(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))s(r);new MutationObserver(r=>{for(const n of r)if(n.type==="childList")for(const o of n.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&s(o)}).observe(document,{childList:!0,subtree:!0});function i(r){const n={};return r.integrity&&(n.integrity=r.integrity),r.referrerPolicy&&(n.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?n.credentials="include":r.crossOrigin==="anonymous"?n.credentials="omit":n.credentials="same-origin",n}function s(r){if(r.ep)return;r.ep=!0;const n=i(r);fetch(r.href,n)}})();var zt=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Ak(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var Rk={exports:{}},FS={},Mk={exports:{}},ni={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var uC=Symbol.for("react.element"),DH=Symbol.for("react.portal"),PH=Symbol.for("react.fragment"),IH=Symbol.for("react.strict_mode"),FH=Symbol.for("react.profiler"),LH=Symbol.for("react.provider"),kH=Symbol.for("react.context"),NH=Symbol.for("react.forward_ref"),OH=Symbol.for("react.suspense"),GH=Symbol.for("react.memo"),BH=Symbol.for("react.lazy"),L2=Symbol.iterator;function VH(t){return t===null||typeof t!="object"?null:(t=L2&&t[L2]||t["@@iterator"],typeof t=="function"?t:null)}var Dk={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},Pk=Object.assign,Ik={};function Ig(t,e,i){this.props=t,this.context=e,this.refs=Ik,this.updater=i||Dk}Ig.prototype.isReactComponent={};Ig.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};Ig.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function Fk(){}Fk.prototype=Ig.prototype;function zA(t,e,i){this.props=t,this.context=e,this.refs=Ik,this.updater=i||Dk}var $A=zA.prototype=new Fk;$A.constructor=zA;Pk($A,Ig.prototype);$A.isPureReactComponent=!0;var k2=Array.isArray,Lk=Object.prototype.hasOwnProperty,KA={current:null},kk={key:!0,ref:!0,__self:!0,__source:!0};function Nk(t,e,i){var s,r={},n=null,o=null;if(e!=null)for(s in e.ref!==void 0&&(o=e.ref),e.key!==void 0&&(n=""+e.key),e)Lk.call(e,s)&&!kk.hasOwnProperty(s)&&(r[s]=e[s]);var a=arguments.length-2;if(a===1)r.children=i;else if(1<a){for(var l=Array(a),c=0;c<a;c++)l[c]=arguments[c+2];r.children=l}if(t&&t.defaultProps)for(s in a=t.defaultProps,a)r[s]===void 0&&(r[s]=a[s]);return{$$typeof:uC,type:t,key:n,ref:o,props:r,_owner:KA.current}}function HH(t,e){return{$$typeof:uC,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function YA(t){return typeof t=="object"&&t!==null&&t.$$typeof===uC}function jH(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(i){return e[i]})}var N2=/\/+/g;function r1(t,e){return typeof t=="object"&&t!==null&&t.key!=null?jH(""+t.key):e.toString(36)}function _b(t,e,i,s,r){var n=typeof t;(n==="undefined"||n==="boolean")&&(t=null);var o=!1;if(t===null)o=!0;else switch(n){case"string":case"number":o=!0;break;case"object":switch(t.$$typeof){case uC:case DH:o=!0}}if(o)return o=t,r=r(o),t=s===""?"."+r1(o,0):s,k2(r)?(i="",t!=null&&(i=t.replace(N2,"$&/")+"/"),_b(r,e,i,"",function(c){return c})):r!=null&&(YA(r)&&(r=HH(r,i+(!r.key||o&&o.key===r.key?"":(""+r.key).replace(N2,"$&/")+"/")+t)),e.push(r)),1;if(o=0,s=s===""?".":s+":",k2(t))for(var a=0;a<t.length;a++){n=t[a];var l=s+r1(n,a);o+=_b(n,e,i,l,r)}else if(l=VH(t),typeof l=="function")for(t=l.call(t),a=0;!(n=t.next()).done;)n=n.value,l=s+r1(n,a++),o+=_b(n,e,i,l,r);else if(n==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return o}function L0(t,e,i){if(t==null)return t;var s=[],r=0;return _b(t,s,"","",function(n){return e.call(i,n,r++)}),s}function UH(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(i){(t._status===0||t._status===-1)&&(t._status=1,t._result=i)},function(i){(t._status===0||t._status===-1)&&(t._status=2,t._result=i)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var tn={current:null},Ab={transition:null},WH={ReactCurrentDispatcher:tn,ReactCurrentBatchConfig:Ab,ReactCurrentOwner:KA};function Ok(){throw Error("act(...) is not supported in production builds of React.")}ni.Children={map:L0,forEach:function(t,e,i){L0(t,function(){e.apply(this,arguments)},i)},count:function(t){var e=0;return L0(t,function(){e++}),e},toArray:function(t){return L0(t,function(e){return e})||[]},only:function(t){if(!YA(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};ni.Component=Ig;ni.Fragment=PH;ni.Profiler=FH;ni.PureComponent=zA;ni.StrictMode=IH;ni.Suspense=OH;ni.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=WH;ni.act=Ok;ni.cloneElement=function(t,e,i){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var s=Pk({},t.props),r=t.key,n=t.ref,o=t._owner;if(e!=null){if(e.ref!==void 0&&(n=e.ref,o=KA.current),e.key!==void 0&&(r=""+e.key),t.type&&t.type.defaultProps)var a=t.type.defaultProps;for(l in e)Lk.call(e,l)&&!kk.hasOwnProperty(l)&&(s[l]=e[l]===void 0&&a!==void 0?a[l]:e[l])}var l=arguments.length-2;if(l===1)s.children=i;else if(1<l){a=Array(l);for(var c=0;c<l;c++)a[c]=arguments[c+2];s.children=a}return{$$typeof:uC,type:t.type,key:r,ref:n,props:s,_owner:o}};ni.createContext=function(t){return t={$$typeof:kH,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:LH,_context:t},t.Consumer=t};ni.createElement=Nk;ni.createFactory=function(t){var e=Nk.bind(null,t);return e.type=t,e};ni.createRef=function(){return{current:null}};ni.forwardRef=function(t){return{$$typeof:NH,render:t}};ni.isValidElement=YA;ni.lazy=function(t){return{$$typeof:BH,_payload:{_status:-1,_result:t},_init:UH}};ni.memo=function(t,e){return{$$typeof:GH,type:t,compare:e===void 0?null:e}};ni.startTransition=function(t){var e=Ab.transition;Ab.transition={};try{t()}finally{Ab.transition=e}};ni.unstable_act=Ok;ni.useCallback=function(t,e){return tn.current.useCallback(t,e)};ni.useContext=function(t){return tn.current.useContext(t)};ni.useDebugValue=function(){};ni.useDeferredValue=function(t){return tn.current.useDeferredValue(t)};ni.useEffect=function(t,e){return tn.current.useEffect(t,e)};ni.useId=function(){return tn.current.useId()};ni.useImperativeHandle=function(t,e,i){return tn.current.useImperativeHandle(t,e,i)};ni.useInsertionEffect=function(t,e){return tn.current.useInsertionEffect(t,e)};ni.useLayoutEffect=function(t,e){return tn.current.useLayoutEffect(t,e)};ni.useMemo=function(t,e){return tn.current.useMemo(t,e)};ni.useReducer=function(t,e,i){return tn.current.useReducer(t,e,i)};ni.useRef=function(t){return tn.current.useRef(t)};ni.useState=function(t){return tn.current.useState(t)};ni.useSyncExternalStore=function(t,e,i){return tn.current.useSyncExternalStore(t,e,i)};ni.useTransition=function(){return tn.current.useTransition()};ni.version="18.3.1";Mk.exports=ni;var _e=Mk.exports;const qA=Ak(_e);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var zH=_e,$H=Symbol.for("react.element"),KH=Symbol.for("react.fragment"),YH=Object.prototype.hasOwnProperty,qH=zH.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,XH={key:!0,ref:!0,__self:!0,__source:!0};function Gk(t,e,i){var s,r={},n=null,o=null;i!==void 0&&(n=""+i),e.key!==void 0&&(n=""+e.key),e.ref!==void 0&&(o=e.ref);for(s in e)YH.call(e,s)&&!XH.hasOwnProperty(s)&&(r[s]=e[s]);if(t&&t.defaultProps)for(s in e=t.defaultProps,e)r[s]===void 0&&(r[s]=e[s]);return{$$typeof:$H,type:t,key:n,ref:o,props:r,_owner:qH.current}}FS.Fragment=KH;FS.jsx=Gk;FS.jsxs=Gk;Rk.exports=FS;var k=Rk.exports,ST={},Bk={exports:{}},uo={},Vk={exports:{}},Hk={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(x,E){var M=x.length;x.push(E);e:for(;0<M;){var O=M-1>>>1,V=x[O];if(0<r(V,E))x[O]=E,x[M]=V,M=O;else break e}}function i(x){return x.length===0?null:x[0]}function s(x){if(x.length===0)return null;var E=x[0],M=x.pop();if(M!==E){x[0]=M;e:for(var O=0,V=x.length,Y=V>>>1;O<Y;){var $=2*(O+1)-1,J=x[$],G=$+1,Z=x[G];if(0>r(J,M))G<V&&0>r(Z,J)?(x[O]=Z,x[G]=M,O=G):(x[O]=J,x[$]=M,O=$);else if(G<V&&0>r(Z,M))x[O]=Z,x[G]=M,O=G;else break e}}return E}function r(x,E){var M=x.sortIndex-E.sortIndex;return M!==0?M:x.id-E.id}if(typeof performance=="object"&&typeof performance.now=="function"){var n=performance;t.unstable_now=function(){return n.now()}}else{var o=Date,a=o.now();t.unstable_now=function(){return o.now()-a}}var l=[],c=[],u=1,d=null,h=3,p=!1,f=!1,m=!1,g=typeof setTimeout=="function"?setTimeout:null,y=typeof clearTimeout=="function"?clearTimeout:null,v=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function C(x){for(var E=i(c);E!==null;){if(E.callback===null)s(c);else if(E.startTime<=x)s(c),E.sortIndex=E.expirationTime,e(l,E);else break;E=i(c)}}function b(x){if(m=!1,C(x),!f)if(i(l)!==null)f=!0,w(T);else{var E=i(c);E!==null&&S(b,E.startTime-x)}}function T(x,E){f=!1,m&&(m=!1,y(D),D=-1),p=!0;var M=h;try{for(C(E),d=i(l);d!==null&&(!(d.expirationTime>E)||x&&!U());){var O=d.callback;if(typeof O=="function"){d.callback=null,h=d.priorityLevel;var V=O(d.expirationTime<=E);E=t.unstable_now(),typeof V=="function"?d.callback=V:d===i(l)&&s(l),C(E)}else s(l);d=i(l)}if(d!==null)var Y=!0;else{var $=i(c);$!==null&&S(b,$.startTime-E),Y=!1}return Y}finally{d=null,h=M,p=!1}}var A=!1,I=null,D=-1,F=5,B=-1;function U(){return!(t.unstable_now()-B<F)}function H(){if(I!==null){var x=t.unstable_now();B=x;var E=!0;try{E=I(!0,x)}finally{E?R():(A=!1,I=null)}}else A=!1}var R;if(typeof v=="function")R=function(){v(H)};else if(typeof MessageChannel<"u"){var L=new MessageChannel,_=L.port2;L.port1.onmessage=H,R=function(){_.postMessage(null)}}else R=function(){g(H,0)};function w(x){I=x,A||(A=!0,R())}function S(x,E){D=g(function(){x(t.unstable_now())},E)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(x){x.callback=null},t.unstable_continueExecution=function(){f||p||(f=!0,w(T))},t.unstable_forceFrameRate=function(x){0>x||125<x?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):F=0<x?Math.floor(1e3/x):5},t.unstable_getCurrentPriorityLevel=function(){return h},t.unstable_getFirstCallbackNode=function(){return i(l)},t.unstable_next=function(x){switch(h){case 1:case 2:case 3:var E=3;break;default:E=h}var M=h;h=E;try{return x()}finally{h=M}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(x,E){switch(x){case 1:case 2:case 3:case 4:case 5:break;default:x=3}var M=h;h=x;try{return E()}finally{h=M}},t.unstable_scheduleCallback=function(x,E,M){var O=t.unstable_now();switch(typeof M=="object"&&M!==null?(M=M.delay,M=typeof M=="number"&&0<M?O+M:O):M=O,x){case 1:var V=-1;break;case 2:V=250;break;case 5:V=1073741823;break;case 4:V=1e4;break;default:V=5e3}return V=M+V,x={id:u++,callback:E,priorityLevel:x,startTime:M,expirationTime:V,sortIndex:-1},M>O?(x.sortIndex=M,e(c,x),i(l)===null&&x===i(c)&&(m?(y(D),D=-1):m=!0,S(b,M-O))):(x.sortIndex=V,e(l,x),f||p||(f=!0,w(T))),x},t.unstable_shouldYield=U,t.unstable_wrapCallback=function(x){var E=h;return function(){var M=h;h=E;try{return x.apply(this,arguments)}finally{h=M}}}})(Hk);Vk.exports=Hk;var ZH=Vk.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var JH=_e,ro=ZH;function Oe(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,i=1;i<arguments.length;i++)e+="&args[]="+encodeURIComponent(arguments[i]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var jk=new Set,Hv={};function jh(t,e){$f(t,e),$f(t+"Capture",e)}function $f(t,e){for(Hv[t]=e,t=0;t<e.length;t++)jk.add(e[t])}var ec=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),xT=Object.prototype.hasOwnProperty,QH=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,O2={},G2={};function ej(t){return xT.call(G2,t)?!0:xT.call(O2,t)?!1:QH.test(t)?G2[t]=!0:(O2[t]=!0,!1)}function tj(t,e,i,s){if(i!==null&&i.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return s?!1:i!==null?!i.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function ij(t,e,i,s){if(e===null||typeof e>"u"||tj(t,e,i,s))return!0;if(s)return!1;if(i!==null)switch(i.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function sn(t,e,i,s,r,n,o){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=s,this.attributeNamespace=r,this.mustUseProperty=i,this.propertyName=t,this.type=e,this.sanitizeURL=n,this.removeEmptyString=o}var yr={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){yr[t]=new sn(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];yr[e]=new sn(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){yr[t]=new sn(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){yr[t]=new sn(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){yr[t]=new sn(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){yr[t]=new sn(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){yr[t]=new sn(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){yr[t]=new sn(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){yr[t]=new sn(t,5,!1,t.toLowerCase(),null,!1,!1)});var XA=/[\-:]([a-z])/g;function ZA(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(XA,ZA);yr[e]=new sn(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(XA,ZA);yr[e]=new sn(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(XA,ZA);yr[e]=new sn(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){yr[t]=new sn(t,1,!1,t.toLowerCase(),null,!1,!1)});yr.xlinkHref=new sn("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){yr[t]=new sn(t,1,!1,t.toLowerCase(),null,!0,!0)});function JA(t,e,i,s){var r=yr.hasOwnProperty(e)?yr[e]:null;(r!==null?r.type!==0:s||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(ij(e,i,r,s)&&(i=null),s||r===null?ej(e)&&(i===null?t.removeAttribute(e):t.setAttribute(e,""+i)):r.mustUseProperty?t[r.propertyName]=i===null?r.type===3?!1:"":i:(e=r.attributeName,s=r.attributeNamespace,i===null?t.removeAttribute(e):(r=r.type,i=r===3||r===4&&i===!0?"":""+i,s?t.setAttributeNS(s,e,i):t.setAttribute(e,i))))}var bc=JH.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,k0=Symbol.for("react.element"),rf=Symbol.for("react.portal"),nf=Symbol.for("react.fragment"),QA=Symbol.for("react.strict_mode"),ET=Symbol.for("react.profiler"),Uk=Symbol.for("react.provider"),Wk=Symbol.for("react.context"),eR=Symbol.for("react.forward_ref"),TT=Symbol.for("react.suspense"),_T=Symbol.for("react.suspense_list"),tR=Symbol.for("react.memo"),Zc=Symbol.for("react.lazy"),zk=Symbol.for("react.offscreen"),B2=Symbol.iterator;function Dm(t){return t===null||typeof t!="object"?null:(t=B2&&t[B2]||t["@@iterator"],typeof t=="function"?t:null)}var fs=Object.assign,n1;function Xm(t){if(n1===void 0)try{throw Error()}catch(i){var e=i.stack.trim().match(/\n( *(at )?)/);n1=e&&e[1]||""}return`
`+n1+t}var o1=!1;function a1(t,e){if(!t||o1)return"";o1=!0;var i=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(c){var s=c}Reflect.construct(t,[],e)}else{try{e.call()}catch(c){s=c}t.call(e.prototype)}else{try{throw Error()}catch(c){s=c}t()}}catch(c){if(c&&s&&typeof c.stack=="string"){for(var r=c.stack.split(`
`),n=s.stack.split(`
`),o=r.length-1,a=n.length-1;1<=o&&0<=a&&r[o]!==n[a];)a--;for(;1<=o&&0<=a;o--,a--)if(r[o]!==n[a]){if(o!==1||a!==1)do if(o--,a--,0>a||r[o]!==n[a]){var l=`
`+r[o].replace(" at new "," at ");return t.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",t.displayName)),l}while(1<=o&&0<=a);break}}}finally{o1=!1,Error.prepareStackTrace=i}return(t=t?t.displayName||t.name:"")?Xm(t):""}function sj(t){switch(t.tag){case 5:return Xm(t.type);case 16:return Xm("Lazy");case 13:return Xm("Suspense");case 19:return Xm("SuspenseList");case 0:case 2:case 15:return t=a1(t.type,!1),t;case 11:return t=a1(t.type.render,!1),t;case 1:return t=a1(t.type,!0),t;default:return""}}function AT(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case nf:return"Fragment";case rf:return"Portal";case ET:return"Profiler";case QA:return"StrictMode";case TT:return"Suspense";case _T:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case Wk:return(t.displayName||"Context")+".Consumer";case Uk:return(t._context.displayName||"Context")+".Provider";case eR:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case tR:return e=t.displayName||null,e!==null?e:AT(t.type)||"Memo";case Zc:e=t._payload,t=t._init;try{return AT(t(e))}catch{}}return null}function rj(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return AT(e);case 8:return e===QA?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function Eu(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function $k(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function nj(t){var e=$k(t)?"checked":"value",i=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),s=""+t[e];if(!t.hasOwnProperty(e)&&typeof i<"u"&&typeof i.get=="function"&&typeof i.set=="function"){var r=i.get,n=i.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return r.call(this)},set:function(o){s=""+o,n.call(this,o)}}),Object.defineProperty(t,e,{enumerable:i.enumerable}),{getValue:function(){return s},setValue:function(o){s=""+o},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function N0(t){t._valueTracker||(t._valueTracker=nj(t))}function Kk(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var i=e.getValue(),s="";return t&&(s=$k(t)?t.checked?"true":"false":t.value),t=s,t!==i?(e.setValue(t),!0):!1}function uw(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function RT(t,e){var i=e.checked;return fs({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:i??t._wrapperState.initialChecked})}function V2(t,e){var i=e.defaultValue==null?"":e.defaultValue,s=e.checked!=null?e.checked:e.defaultChecked;i=Eu(e.value!=null?e.value:i),t._wrapperState={initialChecked:s,initialValue:i,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function Yk(t,e){e=e.checked,e!=null&&JA(t,"checked",e,!1)}function MT(t,e){Yk(t,e);var i=Eu(e.value),s=e.type;if(i!=null)s==="number"?(i===0&&t.value===""||t.value!=i)&&(t.value=""+i):t.value!==""+i&&(t.value=""+i);else if(s==="submit"||s==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?DT(t,e.type,i):e.hasOwnProperty("defaultValue")&&DT(t,e.type,Eu(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function H2(t,e,i){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var s=e.type;if(!(s!=="submit"&&s!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,i||e===t.value||(t.value=e),t.defaultValue=e}i=t.name,i!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,i!==""&&(t.name=i)}function DT(t,e,i){(e!=="number"||uw(t.ownerDocument)!==t)&&(i==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+i&&(t.defaultValue=""+i))}var Zm=Array.isArray;function xf(t,e,i,s){if(t=t.options,e){e={};for(var r=0;r<i.length;r++)e["$"+i[r]]=!0;for(i=0;i<t.length;i++)r=e.hasOwnProperty("$"+t[i].value),t[i].selected!==r&&(t[i].selected=r),r&&s&&(t[i].defaultSelected=!0)}else{for(i=""+Eu(i),e=null,r=0;r<t.length;r++){if(t[r].value===i){t[r].selected=!0,s&&(t[r].defaultSelected=!0);return}e!==null||t[r].disabled||(e=t[r])}e!==null&&(e.selected=!0)}}function PT(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(Oe(91));return fs({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function j2(t,e){var i=e.value;if(i==null){if(i=e.children,e=e.defaultValue,i!=null){if(e!=null)throw Error(Oe(92));if(Zm(i)){if(1<i.length)throw Error(Oe(93));i=i[0]}e=i}e==null&&(e=""),i=e}t._wrapperState={initialValue:Eu(i)}}function qk(t,e){var i=Eu(e.value),s=Eu(e.defaultValue);i!=null&&(i=""+i,i!==t.value&&(t.value=i),e.defaultValue==null&&t.defaultValue!==i&&(t.defaultValue=i)),s!=null&&(t.defaultValue=""+s)}function U2(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function Xk(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function IT(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?Xk(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var O0,Zk=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,i,s,r){MSApp.execUnsafeLocalFunction(function(){return t(e,i,s,r)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(O0=O0||document.createElement("div"),O0.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=O0.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function jv(t,e){if(e){var i=t.firstChild;if(i&&i===t.lastChild&&i.nodeType===3){i.nodeValue=e;return}}t.textContent=e}var Cv={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},oj=["Webkit","ms","Moz","O"];Object.keys(Cv).forEach(function(t){oj.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),Cv[e]=Cv[t]})});function Jk(t,e,i){return e==null||typeof e=="boolean"||e===""?"":i||typeof e!="number"||e===0||Cv.hasOwnProperty(t)&&Cv[t]?(""+e).trim():e+"px"}function Qk(t,e){t=t.style;for(var i in e)if(e.hasOwnProperty(i)){var s=i.indexOf("--")===0,r=Jk(i,e[i],s);i==="float"&&(i="cssFloat"),s?t.setProperty(i,r):t[i]=r}}var aj=fs({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function FT(t,e){if(e){if(aj[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(Oe(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(Oe(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(Oe(61))}if(e.style!=null&&typeof e.style!="object")throw Error(Oe(62))}}function LT(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var kT=null;function iR(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var NT=null,Ef=null,Tf=null;function W2(t){if(t=pC(t)){if(typeof NT!="function")throw Error(Oe(280));var e=t.stateNode;e&&(e=GS(e),NT(t.stateNode,t.type,e))}}function eN(t){Ef?Tf?Tf.push(t):Tf=[t]:Ef=t}function tN(){if(Ef){var t=Ef,e=Tf;if(Tf=Ef=null,W2(t),e)for(t=0;t<e.length;t++)W2(e[t])}}function iN(t,e){return t(e)}function sN(){}var l1=!1;function rN(t,e,i){if(l1)return t(e,i);l1=!0;try{return iN(t,e,i)}finally{l1=!1,(Ef!==null||Tf!==null)&&(sN(),tN())}}function Uv(t,e){var i=t.stateNode;if(i===null)return null;var s=GS(i);if(s===null)return null;i=s[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(s=!s.disabled)||(t=t.type,s=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!s;break e;default:t=!1}if(t)return null;if(i&&typeof i!="function")throw Error(Oe(231,e,typeof i));return i}var OT=!1;if(ec)try{var Pm={};Object.defineProperty(Pm,"passive",{get:function(){OT=!0}}),window.addEventListener("test",Pm,Pm),window.removeEventListener("test",Pm,Pm)}catch{OT=!1}function lj(t,e,i,s,r,n,o,a,l){var c=Array.prototype.slice.call(arguments,3);try{e.apply(i,c)}catch(u){this.onError(u)}}var bv=!1,dw=null,hw=!1,GT=null,cj={onError:function(t){bv=!0,dw=t}};function uj(t,e,i,s,r,n,o,a,l){bv=!1,dw=null,lj.apply(cj,arguments)}function dj(t,e,i,s,r,n,o,a,l){if(uj.apply(this,arguments),bv){if(bv){var c=dw;bv=!1,dw=null}else throw Error(Oe(198));hw||(hw=!0,GT=c)}}function Uh(t){var e=t,i=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(i=e.return),t=e.return;while(t)}return e.tag===3?i:null}function nN(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function z2(t){if(Uh(t)!==t)throw Error(Oe(188))}function hj(t){var e=t.alternate;if(!e){if(e=Uh(t),e===null)throw Error(Oe(188));return e!==t?null:t}for(var i=t,s=e;;){var r=i.return;if(r===null)break;var n=r.alternate;if(n===null){if(s=r.return,s!==null){i=s;continue}break}if(r.child===n.child){for(n=r.child;n;){if(n===i)return z2(r),t;if(n===s)return z2(r),e;n=n.sibling}throw Error(Oe(188))}if(i.return!==s.return)i=r,s=n;else{for(var o=!1,a=r.child;a;){if(a===i){o=!0,i=r,s=n;break}if(a===s){o=!0,s=r,i=n;break}a=a.sibling}if(!o){for(a=n.child;a;){if(a===i){o=!0,i=n,s=r;break}if(a===s){o=!0,s=n,i=r;break}a=a.sibling}if(!o)throw Error(Oe(189))}}if(i.alternate!==s)throw Error(Oe(190))}if(i.tag!==3)throw Error(Oe(188));return i.stateNode.current===i?t:e}function oN(t){return t=hj(t),t!==null?aN(t):null}function aN(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=aN(t);if(e!==null)return e;t=t.sibling}return null}var lN=ro.unstable_scheduleCallback,$2=ro.unstable_cancelCallback,pj=ro.unstable_shouldYield,fj=ro.unstable_requestPaint,Ss=ro.unstable_now,gj=ro.unstable_getCurrentPriorityLevel,sR=ro.unstable_ImmediatePriority,cN=ro.unstable_UserBlockingPriority,pw=ro.unstable_NormalPriority,mj=ro.unstable_LowPriority,uN=ro.unstable_IdlePriority,LS=null,Qa=null;function vj(t){if(Qa&&typeof Qa.onCommitFiberRoot=="function")try{Qa.onCommitFiberRoot(LS,t,void 0,(t.current.flags&128)===128)}catch{}}var ua=Math.clz32?Math.clz32:bj,yj=Math.log,Cj=Math.LN2;function bj(t){return t>>>=0,t===0?32:31-(yj(t)/Cj|0)|0}var G0=64,B0=4194304;function Jm(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function fw(t,e){var i=t.pendingLanes;if(i===0)return 0;var s=0,r=t.suspendedLanes,n=t.pingedLanes,o=i&268435455;if(o!==0){var a=o&~r;a!==0?s=Jm(a):(n&=o,n!==0&&(s=Jm(n)))}else o=i&~r,o!==0?s=Jm(o):n!==0&&(s=Jm(n));if(s===0)return 0;if(e!==0&&e!==s&&!(e&r)&&(r=s&-s,n=e&-e,r>=n||r===16&&(n&4194240)!==0))return e;if(s&4&&(s|=i&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=s;0<e;)i=31-ua(e),r=1<<i,s|=t[i],e&=~r;return s}function wj(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Sj(t,e){for(var i=t.suspendedLanes,s=t.pingedLanes,r=t.expirationTimes,n=t.pendingLanes;0<n;){var o=31-ua(n),a=1<<o,l=r[o];l===-1?(!(a&i)||a&s)&&(r[o]=wj(a,e)):l<=e&&(t.expiredLanes|=a),n&=~a}}function BT(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function dN(){var t=G0;return G0<<=1,!(G0&4194240)&&(G0=64),t}function c1(t){for(var e=[],i=0;31>i;i++)e.push(t);return e}function dC(t,e,i){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-ua(e),t[e]=i}function xj(t,e){var i=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var s=t.eventTimes;for(t=t.expirationTimes;0<i;){var r=31-ua(i),n=1<<r;e[r]=0,s[r]=-1,t[r]=-1,i&=~n}}function rR(t,e){var i=t.entangledLanes|=e;for(t=t.entanglements;i;){var s=31-ua(i),r=1<<s;r&e|t[s]&e&&(t[s]|=e),i&=~r}}var Ni=0;function hN(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var pN,nR,fN,gN,mN,VT=!1,V0=[],lu=null,cu=null,uu=null,Wv=new Map,zv=new Map,Qc=[],Ej="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function K2(t,e){switch(t){case"focusin":case"focusout":lu=null;break;case"dragenter":case"dragleave":cu=null;break;case"mouseover":case"mouseout":uu=null;break;case"pointerover":case"pointerout":Wv.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":zv.delete(e.pointerId)}}function Im(t,e,i,s,r,n){return t===null||t.nativeEvent!==n?(t={blockedOn:e,domEventName:i,eventSystemFlags:s,nativeEvent:n,targetContainers:[r]},e!==null&&(e=pC(e),e!==null&&nR(e)),t):(t.eventSystemFlags|=s,e=t.targetContainers,r!==null&&e.indexOf(r)===-1&&e.push(r),t)}function Tj(t,e,i,s,r){switch(e){case"focusin":return lu=Im(lu,t,e,i,s,r),!0;case"dragenter":return cu=Im(cu,t,e,i,s,r),!0;case"mouseover":return uu=Im(uu,t,e,i,s,r),!0;case"pointerover":var n=r.pointerId;return Wv.set(n,Im(Wv.get(n)||null,t,e,i,s,r)),!0;case"gotpointercapture":return n=r.pointerId,zv.set(n,Im(zv.get(n)||null,t,e,i,s,r)),!0}return!1}function vN(t){var e=Kd(t.target);if(e!==null){var i=Uh(e);if(i!==null){if(e=i.tag,e===13){if(e=nN(i),e!==null){t.blockedOn=e,mN(t.priority,function(){fN(i)});return}}else if(e===3&&i.stateNode.current.memoizedState.isDehydrated){t.blockedOn=i.tag===3?i.stateNode.containerInfo:null;return}}}t.blockedOn=null}function Rb(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var i=HT(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(i===null){i=t.nativeEvent;var s=new i.constructor(i.type,i);kT=s,i.target.dispatchEvent(s),kT=null}else return e=pC(i),e!==null&&nR(e),t.blockedOn=i,!1;e.shift()}return!0}function Y2(t,e,i){Rb(t)&&i.delete(e)}function _j(){VT=!1,lu!==null&&Rb(lu)&&(lu=null),cu!==null&&Rb(cu)&&(cu=null),uu!==null&&Rb(uu)&&(uu=null),Wv.forEach(Y2),zv.forEach(Y2)}function Fm(t,e){t.blockedOn===e&&(t.blockedOn=null,VT||(VT=!0,ro.unstable_scheduleCallback(ro.unstable_NormalPriority,_j)))}function $v(t){function e(r){return Fm(r,t)}if(0<V0.length){Fm(V0[0],t);for(var i=1;i<V0.length;i++){var s=V0[i];s.blockedOn===t&&(s.blockedOn=null)}}for(lu!==null&&Fm(lu,t),cu!==null&&Fm(cu,t),uu!==null&&Fm(uu,t),Wv.forEach(e),zv.forEach(e),i=0;i<Qc.length;i++)s=Qc[i],s.blockedOn===t&&(s.blockedOn=null);for(;0<Qc.length&&(i=Qc[0],i.blockedOn===null);)vN(i),i.blockedOn===null&&Qc.shift()}var _f=bc.ReactCurrentBatchConfig,gw=!0;function Aj(t,e,i,s){var r=Ni,n=_f.transition;_f.transition=null;try{Ni=1,oR(t,e,i,s)}finally{Ni=r,_f.transition=n}}function Rj(t,e,i,s){var r=Ni,n=_f.transition;_f.transition=null;try{Ni=4,oR(t,e,i,s)}finally{Ni=r,_f.transition=n}}function oR(t,e,i,s){if(gw){var r=HT(t,e,i,s);if(r===null)C1(t,e,s,mw,i),K2(t,s);else if(Tj(r,t,e,i,s))s.stopPropagation();else if(K2(t,s),e&4&&-1<Ej.indexOf(t)){for(;r!==null;){var n=pC(r);if(n!==null&&pN(n),n=HT(t,e,i,s),n===null&&C1(t,e,s,mw,i),n===r)break;r=n}r!==null&&s.stopPropagation()}else C1(t,e,s,null,i)}}var mw=null;function HT(t,e,i,s){if(mw=null,t=iR(s),t=Kd(t),t!==null)if(e=Uh(t),e===null)t=null;else if(i=e.tag,i===13){if(t=nN(e),t!==null)return t;t=null}else if(i===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return mw=t,null}function yN(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(gj()){case sR:return 1;case cN:return 4;case pw:case mj:return 16;case uN:return 536870912;default:return 16}default:return 16}}var su=null,aR=null,Mb=null;function CN(){if(Mb)return Mb;var t,e=aR,i=e.length,s,r="value"in su?su.value:su.textContent,n=r.length;for(t=0;t<i&&e[t]===r[t];t++);var o=i-t;for(s=1;s<=o&&e[i-s]===r[n-s];s++);return Mb=r.slice(t,1<s?1-s:void 0)}function Db(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function H0(){return!0}function q2(){return!1}function ho(t){function e(i,s,r,n,o){this._reactName=i,this._targetInst=r,this.type=s,this.nativeEvent=n,this.target=o,this.currentTarget=null;for(var a in t)t.hasOwnProperty(a)&&(i=t[a],this[a]=i?i(n):n[a]);return this.isDefaultPrevented=(n.defaultPrevented!=null?n.defaultPrevented:n.returnValue===!1)?H0:q2,this.isPropagationStopped=q2,this}return fs(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var i=this.nativeEvent;i&&(i.preventDefault?i.preventDefault():typeof i.returnValue!="unknown"&&(i.returnValue=!1),this.isDefaultPrevented=H0)},stopPropagation:function(){var i=this.nativeEvent;i&&(i.stopPropagation?i.stopPropagation():typeof i.cancelBubble!="unknown"&&(i.cancelBubble=!0),this.isPropagationStopped=H0)},persist:function(){},isPersistent:H0}),e}var Fg={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},lR=ho(Fg),hC=fs({},Fg,{view:0,detail:0}),Mj=ho(hC),u1,d1,Lm,kS=fs({},hC,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:cR,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==Lm&&(Lm&&t.type==="mousemove"?(u1=t.screenX-Lm.screenX,d1=t.screenY-Lm.screenY):d1=u1=0,Lm=t),u1)},movementY:function(t){return"movementY"in t?t.movementY:d1}}),X2=ho(kS),Dj=fs({},kS,{dataTransfer:0}),Pj=ho(Dj),Ij=fs({},hC,{relatedTarget:0}),h1=ho(Ij),Fj=fs({},Fg,{animationName:0,elapsedTime:0,pseudoElement:0}),Lj=ho(Fj),kj=fs({},Fg,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),Nj=ho(kj),Oj=fs({},Fg,{data:0}),Z2=ho(Oj),Gj={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Bj={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Vj={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Hj(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=Vj[t])?!!e[t]:!1}function cR(){return Hj}var jj=fs({},hC,{key:function(t){if(t.key){var e=Gj[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=Db(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?Bj[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:cR,charCode:function(t){return t.type==="keypress"?Db(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?Db(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),Uj=ho(jj),Wj=fs({},kS,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),J2=ho(Wj),zj=fs({},hC,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:cR}),$j=ho(zj),Kj=fs({},Fg,{propertyName:0,elapsedTime:0,pseudoElement:0}),Yj=ho(Kj),qj=fs({},kS,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),Xj=ho(qj),Zj=[9,13,27,32],uR=ec&&"CompositionEvent"in window,wv=null;ec&&"documentMode"in document&&(wv=document.documentMode);var Jj=ec&&"TextEvent"in window&&!wv,bN=ec&&(!uR||wv&&8<wv&&11>=wv),Q2=" ",eI=!1;function wN(t,e){switch(t){case"keyup":return Zj.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function SN(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var of=!1;function Qj(t,e){switch(t){case"compositionend":return SN(e);case"keypress":return e.which!==32?null:(eI=!0,Q2);case"textInput":return t=e.data,t===Q2&&eI?null:t;default:return null}}function eU(t,e){if(of)return t==="compositionend"||!uR&&wN(t,e)?(t=CN(),Mb=aR=su=null,of=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return bN&&e.locale!=="ko"?null:e.data;default:return null}}var tU={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function tI(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!tU[t.type]:e==="textarea"}function xN(t,e,i,s){eN(s),e=vw(e,"onChange"),0<e.length&&(i=new lR("onChange","change",null,i,s),t.push({event:i,listeners:e}))}var Sv=null,Kv=null;function iU(t){LN(t,0)}function NS(t){var e=cf(t);if(Kk(e))return t}function sU(t,e){if(t==="change")return e}var EN=!1;if(ec){var p1;if(ec){var f1="oninput"in document;if(!f1){var iI=document.createElement("div");iI.setAttribute("oninput","return;"),f1=typeof iI.oninput=="function"}p1=f1}else p1=!1;EN=p1&&(!document.documentMode||9<document.documentMode)}function sI(){Sv&&(Sv.detachEvent("onpropertychange",TN),Kv=Sv=null)}function TN(t){if(t.propertyName==="value"&&NS(Kv)){var e=[];xN(e,Kv,t,iR(t)),rN(iU,e)}}function rU(t,e,i){t==="focusin"?(sI(),Sv=e,Kv=i,Sv.attachEvent("onpropertychange",TN)):t==="focusout"&&sI()}function nU(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return NS(Kv)}function oU(t,e){if(t==="click")return NS(e)}function aU(t,e){if(t==="input"||t==="change")return NS(e)}function lU(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var ma=typeof Object.is=="function"?Object.is:lU;function Yv(t,e){if(ma(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var i=Object.keys(t),s=Object.keys(e);if(i.length!==s.length)return!1;for(s=0;s<i.length;s++){var r=i[s];if(!xT.call(e,r)||!ma(t[r],e[r]))return!1}return!0}function rI(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function nI(t,e){var i=rI(t);t=0;for(var s;i;){if(i.nodeType===3){if(s=t+i.textContent.length,t<=e&&s>=e)return{node:i,offset:e-t};t=s}e:{for(;i;){if(i.nextSibling){i=i.nextSibling;break e}i=i.parentNode}i=void 0}i=rI(i)}}function _N(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?_N(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function AN(){for(var t=window,e=uw();e instanceof t.HTMLIFrameElement;){try{var i=typeof e.contentWindow.location.href=="string"}catch{i=!1}if(i)t=e.contentWindow;else break;e=uw(t.document)}return e}function dR(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function cU(t){var e=AN(),i=t.focusedElem,s=t.selectionRange;if(e!==i&&i&&i.ownerDocument&&_N(i.ownerDocument.documentElement,i)){if(s!==null&&dR(i)){if(e=s.start,t=s.end,t===void 0&&(t=e),"selectionStart"in i)i.selectionStart=e,i.selectionEnd=Math.min(t,i.value.length);else if(t=(e=i.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var r=i.textContent.length,n=Math.min(s.start,r);s=s.end===void 0?n:Math.min(s.end,r),!t.extend&&n>s&&(r=s,s=n,n=r),r=nI(i,n);var o=nI(i,s);r&&o&&(t.rangeCount!==1||t.anchorNode!==r.node||t.anchorOffset!==r.offset||t.focusNode!==o.node||t.focusOffset!==o.offset)&&(e=e.createRange(),e.setStart(r.node,r.offset),t.removeAllRanges(),n>s?(t.addRange(e),t.extend(o.node,o.offset)):(e.setEnd(o.node,o.offset),t.addRange(e)))}}for(e=[],t=i;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof i.focus=="function"&&i.focus(),i=0;i<e.length;i++)t=e[i],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var uU=ec&&"documentMode"in document&&11>=document.documentMode,af=null,jT=null,xv=null,UT=!1;function oI(t,e,i){var s=i.window===i?i.document:i.nodeType===9?i:i.ownerDocument;UT||af==null||af!==uw(s)||(s=af,"selectionStart"in s&&dR(s)?s={start:s.selectionStart,end:s.selectionEnd}:(s=(s.ownerDocument&&s.ownerDocument.defaultView||window).getSelection(),s={anchorNode:s.anchorNode,anchorOffset:s.anchorOffset,focusNode:s.focusNode,focusOffset:s.focusOffset}),xv&&Yv(xv,s)||(xv=s,s=vw(jT,"onSelect"),0<s.length&&(e=new lR("onSelect","select",null,e,i),t.push({event:e,listeners:s}),e.target=af)))}function j0(t,e){var i={};return i[t.toLowerCase()]=e.toLowerCase(),i["Webkit"+t]="webkit"+e,i["Moz"+t]="moz"+e,i}var lf={animationend:j0("Animation","AnimationEnd"),animationiteration:j0("Animation","AnimationIteration"),animationstart:j0("Animation","AnimationStart"),transitionend:j0("Transition","TransitionEnd")},g1={},RN={};ec&&(RN=document.createElement("div").style,"AnimationEvent"in window||(delete lf.animationend.animation,delete lf.animationiteration.animation,delete lf.animationstart.animation),"TransitionEvent"in window||delete lf.transitionend.transition);function OS(t){if(g1[t])return g1[t];if(!lf[t])return t;var e=lf[t],i;for(i in e)if(e.hasOwnProperty(i)&&i in RN)return g1[t]=e[i];return t}var MN=OS("animationend"),DN=OS("animationiteration"),PN=OS("animationstart"),IN=OS("transitionend"),FN=new Map,aI="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function qu(t,e){FN.set(t,e),jh(e,[t])}for(var m1=0;m1<aI.length;m1++){var v1=aI[m1],dU=v1.toLowerCase(),hU=v1[0].toUpperCase()+v1.slice(1);qu(dU,"on"+hU)}qu(MN,"onAnimationEnd");qu(DN,"onAnimationIteration");qu(PN,"onAnimationStart");qu("dblclick","onDoubleClick");qu("focusin","onFocus");qu("focusout","onBlur");qu(IN,"onTransitionEnd");$f("onMouseEnter",["mouseout","mouseover"]);$f("onMouseLeave",["mouseout","mouseover"]);$f("onPointerEnter",["pointerout","pointerover"]);$f("onPointerLeave",["pointerout","pointerover"]);jh("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));jh("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));jh("onBeforeInput",["compositionend","keypress","textInput","paste"]);jh("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));jh("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));jh("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Qm="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),pU=new Set("cancel close invalid load scroll toggle".split(" ").concat(Qm));function lI(t,e,i){var s=t.type||"unknown-event";t.currentTarget=i,dj(s,e,void 0,t),t.currentTarget=null}function LN(t,e){e=(e&4)!==0;for(var i=0;i<t.length;i++){var s=t[i],r=s.event;s=s.listeners;e:{var n=void 0;if(e)for(var o=s.length-1;0<=o;o--){var a=s[o],l=a.instance,c=a.currentTarget;if(a=a.listener,l!==n&&r.isPropagationStopped())break e;lI(r,a,c),n=l}else for(o=0;o<s.length;o++){if(a=s[o],l=a.instance,c=a.currentTarget,a=a.listener,l!==n&&r.isPropagationStopped())break e;lI(r,a,c),n=l}}}if(hw)throw t=GT,hw=!1,GT=null,t}function qi(t,e){var i=e[YT];i===void 0&&(i=e[YT]=new Set);var s=t+"__bubble";i.has(s)||(kN(e,t,2,!1),i.add(s))}function y1(t,e,i){var s=0;e&&(s|=4),kN(i,t,s,e)}var U0="_reactListening"+Math.random().toString(36).slice(2);function qv(t){if(!t[U0]){t[U0]=!0,jk.forEach(function(i){i!=="selectionchange"&&(pU.has(i)||y1(i,!1,t),y1(i,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[U0]||(e[U0]=!0,y1("selectionchange",!1,e))}}function kN(t,e,i,s){switch(yN(e)){case 1:var r=Aj;break;case 4:r=Rj;break;default:r=oR}i=r.bind(null,e,i,t),r=void 0,!OT||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(r=!0),s?r!==void 0?t.addEventListener(e,i,{capture:!0,passive:r}):t.addEventListener(e,i,!0):r!==void 0?t.addEventListener(e,i,{passive:r}):t.addEventListener(e,i,!1)}function C1(t,e,i,s,r){var n=s;if(!(e&1)&&!(e&2)&&s!==null)e:for(;;){if(s===null)return;var o=s.tag;if(o===3||o===4){var a=s.stateNode.containerInfo;if(a===r||a.nodeType===8&&a.parentNode===r)break;if(o===4)for(o=s.return;o!==null;){var l=o.tag;if((l===3||l===4)&&(l=o.stateNode.containerInfo,l===r||l.nodeType===8&&l.parentNode===r))return;o=o.return}for(;a!==null;){if(o=Kd(a),o===null)return;if(l=o.tag,l===5||l===6){s=n=o;continue e}a=a.parentNode}}s=s.return}rN(function(){var c=n,u=iR(i),d=[];e:{var h=FN.get(t);if(h!==void 0){var p=lR,f=t;switch(t){case"keypress":if(Db(i)===0)break e;case"keydown":case"keyup":p=Uj;break;case"focusin":f="focus",p=h1;break;case"focusout":f="blur",p=h1;break;case"beforeblur":case"afterblur":p=h1;break;case"click":if(i.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":p=X2;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":p=Pj;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":p=$j;break;case MN:case DN:case PN:p=Lj;break;case IN:p=Yj;break;case"scroll":p=Mj;break;case"wheel":p=Xj;break;case"copy":case"cut":case"paste":p=Nj;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":p=J2}var m=(e&4)!==0,g=!m&&t==="scroll",y=m?h!==null?h+"Capture":null:h;m=[];for(var v=c,C;v!==null;){C=v;var b=C.stateNode;if(C.tag===5&&b!==null&&(C=b,y!==null&&(b=Uv(v,y),b!=null&&m.push(Xv(v,b,C)))),g)break;v=v.return}0<m.length&&(h=new p(h,f,null,i,u),d.push({event:h,listeners:m}))}}if(!(e&7)){e:{if(h=t==="mouseover"||t==="pointerover",p=t==="mouseout"||t==="pointerout",h&&i!==kT&&(f=i.relatedTarget||i.fromElement)&&(Kd(f)||f[tc]))break e;if((p||h)&&(h=u.window===u?u:(h=u.ownerDocument)?h.defaultView||h.parentWindow:window,p?(f=i.relatedTarget||i.toElement,p=c,f=f?Kd(f):null,f!==null&&(g=Uh(f),f!==g||f.tag!==5&&f.tag!==6)&&(f=null)):(p=null,f=c),p!==f)){if(m=X2,b="onMouseLeave",y="onMouseEnter",v="mouse",(t==="pointerout"||t==="pointerover")&&(m=J2,b="onPointerLeave",y="onPointerEnter",v="pointer"),g=p==null?h:cf(p),C=f==null?h:cf(f),h=new m(b,v+"leave",p,i,u),h.target=g,h.relatedTarget=C,b=null,Kd(u)===c&&(m=new m(y,v+"enter",f,i,u),m.target=C,m.relatedTarget=g,b=m),g=b,p&&f)t:{for(m=p,y=f,v=0,C=m;C;C=Pp(C))v++;for(C=0,b=y;b;b=Pp(b))C++;for(;0<v-C;)m=Pp(m),v--;for(;0<C-v;)y=Pp(y),C--;for(;v--;){if(m===y||y!==null&&m===y.alternate)break t;m=Pp(m),y=Pp(y)}m=null}else m=null;p!==null&&cI(d,h,p,m,!1),f!==null&&g!==null&&cI(d,g,f,m,!0)}}e:{if(h=c?cf(c):window,p=h.nodeName&&h.nodeName.toLowerCase(),p==="select"||p==="input"&&h.type==="file")var T=sU;else if(tI(h))if(EN)T=aU;else{T=nU;var A=rU}else(p=h.nodeName)&&p.toLowerCase()==="input"&&(h.type==="checkbox"||h.type==="radio")&&(T=oU);if(T&&(T=T(t,c))){xN(d,T,i,u);break e}A&&A(t,h,c),t==="focusout"&&(A=h._wrapperState)&&A.controlled&&h.type==="number"&&DT(h,"number",h.value)}switch(A=c?cf(c):window,t){case"focusin":(tI(A)||A.contentEditable==="true")&&(af=A,jT=c,xv=null);break;case"focusout":xv=jT=af=null;break;case"mousedown":UT=!0;break;case"contextmenu":case"mouseup":case"dragend":UT=!1,oI(d,i,u);break;case"selectionchange":if(uU)break;case"keydown":case"keyup":oI(d,i,u)}var I;if(uR)e:{switch(t){case"compositionstart":var D="onCompositionStart";break e;case"compositionend":D="onCompositionEnd";break e;case"compositionupdate":D="onCompositionUpdate";break e}D=void 0}else of?wN(t,i)&&(D="onCompositionEnd"):t==="keydown"&&i.keyCode===229&&(D="onCompositionStart");D&&(bN&&i.locale!=="ko"&&(of||D!=="onCompositionStart"?D==="onCompositionEnd"&&of&&(I=CN()):(su=u,aR="value"in su?su.value:su.textContent,of=!0)),A=vw(c,D),0<A.length&&(D=new Z2(D,t,null,i,u),d.push({event:D,listeners:A}),I?D.data=I:(I=SN(i),I!==null&&(D.data=I)))),(I=Jj?Qj(t,i):eU(t,i))&&(c=vw(c,"onBeforeInput"),0<c.length&&(u=new Z2("onBeforeInput","beforeinput",null,i,u),d.push({event:u,listeners:c}),u.data=I))}LN(d,e)})}function Xv(t,e,i){return{instance:t,listener:e,currentTarget:i}}function vw(t,e){for(var i=e+"Capture",s=[];t!==null;){var r=t,n=r.stateNode;r.tag===5&&n!==null&&(r=n,n=Uv(t,i),n!=null&&s.unshift(Xv(t,n,r)),n=Uv(t,e),n!=null&&s.push(Xv(t,n,r))),t=t.return}return s}function Pp(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function cI(t,e,i,s,r){for(var n=e._reactName,o=[];i!==null&&i!==s;){var a=i,l=a.alternate,c=a.stateNode;if(l!==null&&l===s)break;a.tag===5&&c!==null&&(a=c,r?(l=Uv(i,n),l!=null&&o.unshift(Xv(i,l,a))):r||(l=Uv(i,n),l!=null&&o.push(Xv(i,l,a)))),i=i.return}o.length!==0&&t.push({event:e,listeners:o})}var fU=/\r\n?/g,gU=/\u0000|\uFFFD/g;function uI(t){return(typeof t=="string"?t:""+t).replace(fU,`
`).replace(gU,"")}function W0(t,e,i){if(e=uI(e),uI(t)!==e&&i)throw Error(Oe(425))}function yw(){}var WT=null,zT=null;function $T(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var KT=typeof setTimeout=="function"?setTimeout:void 0,mU=typeof clearTimeout=="function"?clearTimeout:void 0,dI=typeof Promise=="function"?Promise:void 0,vU=typeof queueMicrotask=="function"?queueMicrotask:typeof dI<"u"?function(t){return dI.resolve(null).then(t).catch(yU)}:KT;function yU(t){setTimeout(function(){throw t})}function b1(t,e){var i=e,s=0;do{var r=i.nextSibling;if(t.removeChild(i),r&&r.nodeType===8)if(i=r.data,i==="/$"){if(s===0){t.removeChild(r),$v(e);return}s--}else i!=="$"&&i!=="$?"&&i!=="$!"||s++;i=r}while(i);$v(e)}function du(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function hI(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var i=t.data;if(i==="$"||i==="$!"||i==="$?"){if(e===0)return t;e--}else i==="/$"&&e++}t=t.previousSibling}return null}var Lg=Math.random().toString(36).slice(2),$a="__reactFiber$"+Lg,Zv="__reactProps$"+Lg,tc="__reactContainer$"+Lg,YT="__reactEvents$"+Lg,CU="__reactListeners$"+Lg,bU="__reactHandles$"+Lg;function Kd(t){var e=t[$a];if(e)return e;for(var i=t.parentNode;i;){if(e=i[tc]||i[$a]){if(i=e.alternate,e.child!==null||i!==null&&i.child!==null)for(t=hI(t);t!==null;){if(i=t[$a])return i;t=hI(t)}return e}t=i,i=t.parentNode}return null}function pC(t){return t=t[$a]||t[tc],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function cf(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(Oe(33))}function GS(t){return t[Zv]||null}var qT=[],uf=-1;function Xu(t){return{current:t}}function es(t){0>uf||(t.current=qT[uf],qT[uf]=null,uf--)}function zi(t,e){uf++,qT[uf]=t.current,t.current=e}var Tu={},Gr=Xu(Tu),_n=Xu(!1),mh=Tu;function Kf(t,e){var i=t.type.contextTypes;if(!i)return Tu;var s=t.stateNode;if(s&&s.__reactInternalMemoizedUnmaskedChildContext===e)return s.__reactInternalMemoizedMaskedChildContext;var r={},n;for(n in i)r[n]=e[n];return s&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=r),r}function An(t){return t=t.childContextTypes,t!=null}function Cw(){es(_n),es(Gr)}function pI(t,e,i){if(Gr.current!==Tu)throw Error(Oe(168));zi(Gr,e),zi(_n,i)}function NN(t,e,i){var s=t.stateNode;if(e=e.childContextTypes,typeof s.getChildContext!="function")return i;s=s.getChildContext();for(var r in s)if(!(r in e))throw Error(Oe(108,rj(t)||"Unknown",r));return fs({},i,s)}function bw(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||Tu,mh=Gr.current,zi(Gr,t),zi(_n,_n.current),!0}function fI(t,e,i){var s=t.stateNode;if(!s)throw Error(Oe(169));i?(t=NN(t,e,mh),s.__reactInternalMemoizedMergedChildContext=t,es(_n),es(Gr),zi(Gr,t)):es(_n),zi(_n,i)}var Gl=null,BS=!1,w1=!1;function ON(t){Gl===null?Gl=[t]:Gl.push(t)}function wU(t){BS=!0,ON(t)}function Zu(){if(!w1&&Gl!==null){w1=!0;var t=0,e=Ni;try{var i=Gl;for(Ni=1;t<i.length;t++){var s=i[t];do s=s(!0);while(s!==null)}Gl=null,BS=!1}catch(r){throw Gl!==null&&(Gl=Gl.slice(t+1)),lN(sR,Zu),r}finally{Ni=e,w1=!1}}return null}var df=[],hf=0,ww=null,Sw=0,Ao=[],Ro=0,vh=null,zl=1,$l="";function Id(t,e){df[hf++]=Sw,df[hf++]=ww,ww=t,Sw=e}function GN(t,e,i){Ao[Ro++]=zl,Ao[Ro++]=$l,Ao[Ro++]=vh,vh=t;var s=zl;t=$l;var r=32-ua(s)-1;s&=~(1<<r),i+=1;var n=32-ua(e)+r;if(30<n){var o=r-r%5;n=(s&(1<<o)-1).toString(32),s>>=o,r-=o,zl=1<<32-ua(e)+r|i<<r|s,$l=n+t}else zl=1<<n|i<<r|s,$l=t}function hR(t){t.return!==null&&(Id(t,1),GN(t,1,0))}function pR(t){for(;t===ww;)ww=df[--hf],df[hf]=null,Sw=df[--hf],df[hf]=null;for(;t===vh;)vh=Ao[--Ro],Ao[Ro]=null,$l=Ao[--Ro],Ao[Ro]=null,zl=Ao[--Ro],Ao[Ro]=null}var eo=null,Xn=null,os=!1,na=null;function BN(t,e){var i=Po(5,null,null,0);i.elementType="DELETED",i.stateNode=e,i.return=t,e=t.deletions,e===null?(t.deletions=[i],t.flags|=16):e.push(i)}function gI(t,e){switch(t.tag){case 5:var i=t.type;return e=e.nodeType!==1||i.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,eo=t,Xn=du(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,eo=t,Xn=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(i=vh!==null?{id:zl,overflow:$l}:null,t.memoizedState={dehydrated:e,treeContext:i,retryLane:1073741824},i=Po(18,null,null,0),i.stateNode=e,i.return=t,t.child=i,eo=t,Xn=null,!0):!1;default:return!1}}function XT(t){return(t.mode&1)!==0&&(t.flags&128)===0}function ZT(t){if(os){var e=Xn;if(e){var i=e;if(!gI(t,e)){if(XT(t))throw Error(Oe(418));e=du(i.nextSibling);var s=eo;e&&gI(t,e)?BN(s,i):(t.flags=t.flags&-4097|2,os=!1,eo=t)}}else{if(XT(t))throw Error(Oe(418));t.flags=t.flags&-4097|2,os=!1,eo=t}}}function mI(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;eo=t}function z0(t){if(t!==eo)return!1;if(!os)return mI(t),os=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!$T(t.type,t.memoizedProps)),e&&(e=Xn)){if(XT(t))throw VN(),Error(Oe(418));for(;e;)BN(t,e),e=du(e.nextSibling)}if(mI(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(Oe(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var i=t.data;if(i==="/$"){if(e===0){Xn=du(t.nextSibling);break e}e--}else i!=="$"&&i!=="$!"&&i!=="$?"||e++}t=t.nextSibling}Xn=null}}else Xn=eo?du(t.stateNode.nextSibling):null;return!0}function VN(){for(var t=Xn;t;)t=du(t.nextSibling)}function Yf(){Xn=eo=null,os=!1}function fR(t){na===null?na=[t]:na.push(t)}var SU=bc.ReactCurrentBatchConfig;function km(t,e,i){if(t=i.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(i._owner){if(i=i._owner,i){if(i.tag!==1)throw Error(Oe(309));var s=i.stateNode}if(!s)throw Error(Oe(147,t));var r=s,n=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===n?e.ref:(e=function(o){var a=r.refs;o===null?delete a[n]:a[n]=o},e._stringRef=n,e)}if(typeof t!="string")throw Error(Oe(284));if(!i._owner)throw Error(Oe(290,t))}return t}function $0(t,e){throw t=Object.prototype.toString.call(e),Error(Oe(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function vI(t){var e=t._init;return e(t._payload)}function HN(t){function e(y,v){if(t){var C=y.deletions;C===null?(y.deletions=[v],y.flags|=16):C.push(v)}}function i(y,v){if(!t)return null;for(;v!==null;)e(y,v),v=v.sibling;return null}function s(y,v){for(y=new Map;v!==null;)v.key!==null?y.set(v.key,v):y.set(v.index,v),v=v.sibling;return y}function r(y,v){return y=gu(y,v),y.index=0,y.sibling=null,y}function n(y,v,C){return y.index=C,t?(C=y.alternate,C!==null?(C=C.index,C<v?(y.flags|=2,v):C):(y.flags|=2,v)):(y.flags|=1048576,v)}function o(y){return t&&y.alternate===null&&(y.flags|=2),y}function a(y,v,C,b){return v===null||v.tag!==6?(v=R1(C,y.mode,b),v.return=y,v):(v=r(v,C),v.return=y,v)}function l(y,v,C,b){var T=C.type;return T===nf?u(y,v,C.props.children,b,C.key):v!==null&&(v.elementType===T||typeof T=="object"&&T!==null&&T.$$typeof===Zc&&vI(T)===v.type)?(b=r(v,C.props),b.ref=km(y,v,C),b.return=y,b):(b=Ob(C.type,C.key,C.props,null,y.mode,b),b.ref=km(y,v,C),b.return=y,b)}function c(y,v,C,b){return v===null||v.tag!==4||v.stateNode.containerInfo!==C.containerInfo||v.stateNode.implementation!==C.implementation?(v=M1(C,y.mode,b),v.return=y,v):(v=r(v,C.children||[]),v.return=y,v)}function u(y,v,C,b,T){return v===null||v.tag!==7?(v=nh(C,y.mode,b,T),v.return=y,v):(v=r(v,C),v.return=y,v)}function d(y,v,C){if(typeof v=="string"&&v!==""||typeof v=="number")return v=R1(""+v,y.mode,C),v.return=y,v;if(typeof v=="object"&&v!==null){switch(v.$$typeof){case k0:return C=Ob(v.type,v.key,v.props,null,y.mode,C),C.ref=km(y,null,v),C.return=y,C;case rf:return v=M1(v,y.mode,C),v.return=y,v;case Zc:var b=v._init;return d(y,b(v._payload),C)}if(Zm(v)||Dm(v))return v=nh(v,y.mode,C,null),v.return=y,v;$0(y,v)}return null}function h(y,v,C,b){var T=v!==null?v.key:null;if(typeof C=="string"&&C!==""||typeof C=="number")return T!==null?null:a(y,v,""+C,b);if(typeof C=="object"&&C!==null){switch(C.$$typeof){case k0:return C.key===T?l(y,v,C,b):null;case rf:return C.key===T?c(y,v,C,b):null;case Zc:return T=C._init,h(y,v,T(C._payload),b)}if(Zm(C)||Dm(C))return T!==null?null:u(y,v,C,b,null);$0(y,C)}return null}function p(y,v,C,b,T){if(typeof b=="string"&&b!==""||typeof b=="number")return y=y.get(C)||null,a(v,y,""+b,T);if(typeof b=="object"&&b!==null){switch(b.$$typeof){case k0:return y=y.get(b.key===null?C:b.key)||null,l(v,y,b,T);case rf:return y=y.get(b.key===null?C:b.key)||null,c(v,y,b,T);case Zc:var A=b._init;return p(y,v,C,A(b._payload),T)}if(Zm(b)||Dm(b))return y=y.get(C)||null,u(v,y,b,T,null);$0(v,b)}return null}function f(y,v,C,b){for(var T=null,A=null,I=v,D=v=0,F=null;I!==null&&D<C.length;D++){I.index>D?(F=I,I=null):F=I.sibling;var B=h(y,I,C[D],b);if(B===null){I===null&&(I=F);break}t&&I&&B.alternate===null&&e(y,I),v=n(B,v,D),A===null?T=B:A.sibling=B,A=B,I=F}if(D===C.length)return i(y,I),os&&Id(y,D),T;if(I===null){for(;D<C.length;D++)I=d(y,C[D],b),I!==null&&(v=n(I,v,D),A===null?T=I:A.sibling=I,A=I);return os&&Id(y,D),T}for(I=s(y,I);D<C.length;D++)F=p(I,y,D,C[D],b),F!==null&&(t&&F.alternate!==null&&I.delete(F.key===null?D:F.key),v=n(F,v,D),A===null?T=F:A.sibling=F,A=F);return t&&I.forEach(function(U){return e(y,U)}),os&&Id(y,D),T}function m(y,v,C,b){var T=Dm(C);if(typeof T!="function")throw Error(Oe(150));if(C=T.call(C),C==null)throw Error(Oe(151));for(var A=T=null,I=v,D=v=0,F=null,B=C.next();I!==null&&!B.done;D++,B=C.next()){I.index>D?(F=I,I=null):F=I.sibling;var U=h(y,I,B.value,b);if(U===null){I===null&&(I=F);break}t&&I&&U.alternate===null&&e(y,I),v=n(U,v,D),A===null?T=U:A.sibling=U,A=U,I=F}if(B.done)return i(y,I),os&&Id(y,D),T;if(I===null){for(;!B.done;D++,B=C.next())B=d(y,B.value,b),B!==null&&(v=n(B,v,D),A===null?T=B:A.sibling=B,A=B);return os&&Id(y,D),T}for(I=s(y,I);!B.done;D++,B=C.next())B=p(I,y,D,B.value,b),B!==null&&(t&&B.alternate!==null&&I.delete(B.key===null?D:B.key),v=n(B,v,D),A===null?T=B:A.sibling=B,A=B);return t&&I.forEach(function(H){return e(y,H)}),os&&Id(y,D),T}function g(y,v,C,b){if(typeof C=="object"&&C!==null&&C.type===nf&&C.key===null&&(C=C.props.children),typeof C=="object"&&C!==null){switch(C.$$typeof){case k0:e:{for(var T=C.key,A=v;A!==null;){if(A.key===T){if(T=C.type,T===nf){if(A.tag===7){i(y,A.sibling),v=r(A,C.props.children),v.return=y,y=v;break e}}else if(A.elementType===T||typeof T=="object"&&T!==null&&T.$$typeof===Zc&&vI(T)===A.type){i(y,A.sibling),v=r(A,C.props),v.ref=km(y,A,C),v.return=y,y=v;break e}i(y,A);break}else e(y,A);A=A.sibling}C.type===nf?(v=nh(C.props.children,y.mode,b,C.key),v.return=y,y=v):(b=Ob(C.type,C.key,C.props,null,y.mode,b),b.ref=km(y,v,C),b.return=y,y=b)}return o(y);case rf:e:{for(A=C.key;v!==null;){if(v.key===A)if(v.tag===4&&v.stateNode.containerInfo===C.containerInfo&&v.stateNode.implementation===C.implementation){i(y,v.sibling),v=r(v,C.children||[]),v.return=y,y=v;break e}else{i(y,v);break}else e(y,v);v=v.sibling}v=M1(C,y.mode,b),v.return=y,y=v}return o(y);case Zc:return A=C._init,g(y,v,A(C._payload),b)}if(Zm(C))return f(y,v,C,b);if(Dm(C))return m(y,v,C,b);$0(y,C)}return typeof C=="string"&&C!==""||typeof C=="number"?(C=""+C,v!==null&&v.tag===6?(i(y,v.sibling),v=r(v,C),v.return=y,y=v):(i(y,v),v=R1(C,y.mode,b),v.return=y,y=v),o(y)):i(y,v)}return g}var qf=HN(!0),jN=HN(!1),xw=Xu(null),Ew=null,pf=null,gR=null;function mR(){gR=pf=Ew=null}function vR(t){var e=xw.current;es(xw),t._currentValue=e}function JT(t,e,i){for(;t!==null;){var s=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,s!==null&&(s.childLanes|=e)):s!==null&&(s.childLanes&e)!==e&&(s.childLanes|=e),t===i)break;t=t.return}}function Af(t,e){Ew=t,gR=pf=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(bn=!0),t.firstContext=null)}function No(t){var e=t._currentValue;if(gR!==t)if(t={context:t,memoizedValue:e,next:null},pf===null){if(Ew===null)throw Error(Oe(308));pf=t,Ew.dependencies={lanes:0,firstContext:t}}else pf=pf.next=t;return e}var Yd=null;function yR(t){Yd===null?Yd=[t]:Yd.push(t)}function UN(t,e,i,s){var r=e.interleaved;return r===null?(i.next=i,yR(e)):(i.next=r.next,r.next=i),e.interleaved=i,ic(t,s)}function ic(t,e){t.lanes|=e;var i=t.alternate;for(i!==null&&(i.lanes|=e),i=t,t=t.return;t!==null;)t.childLanes|=e,i=t.alternate,i!==null&&(i.childLanes|=e),i=t,t=t.return;return i.tag===3?i.stateNode:null}var Jc=!1;function CR(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function WN(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function Zl(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function hu(t,e,i){var s=t.updateQueue;if(s===null)return null;if(s=s.shared,wi&2){var r=s.pending;return r===null?e.next=e:(e.next=r.next,r.next=e),s.pending=e,ic(t,i)}return r=s.interleaved,r===null?(e.next=e,yR(s)):(e.next=r.next,r.next=e),s.interleaved=e,ic(t,i)}function Pb(t,e,i){if(e=e.updateQueue,e!==null&&(e=e.shared,(i&4194240)!==0)){var s=e.lanes;s&=t.pendingLanes,i|=s,e.lanes=i,rR(t,i)}}function yI(t,e){var i=t.updateQueue,s=t.alternate;if(s!==null&&(s=s.updateQueue,i===s)){var r=null,n=null;if(i=i.firstBaseUpdate,i!==null){do{var o={eventTime:i.eventTime,lane:i.lane,tag:i.tag,payload:i.payload,callback:i.callback,next:null};n===null?r=n=o:n=n.next=o,i=i.next}while(i!==null);n===null?r=n=e:n=n.next=e}else r=n=e;i={baseState:s.baseState,firstBaseUpdate:r,lastBaseUpdate:n,shared:s.shared,effects:s.effects},t.updateQueue=i;return}t=i.lastBaseUpdate,t===null?i.firstBaseUpdate=e:t.next=e,i.lastBaseUpdate=e}function Tw(t,e,i,s){var r=t.updateQueue;Jc=!1;var n=r.firstBaseUpdate,o=r.lastBaseUpdate,a=r.shared.pending;if(a!==null){r.shared.pending=null;var l=a,c=l.next;l.next=null,o===null?n=c:o.next=c,o=l;var u=t.alternate;u!==null&&(u=u.updateQueue,a=u.lastBaseUpdate,a!==o&&(a===null?u.firstBaseUpdate=c:a.next=c,u.lastBaseUpdate=l))}if(n!==null){var d=r.baseState;o=0,u=c=l=null,a=n;do{var h=a.lane,p=a.eventTime;if((s&h)===h){u!==null&&(u=u.next={eventTime:p,lane:0,tag:a.tag,payload:a.payload,callback:a.callback,next:null});e:{var f=t,m=a;switch(h=e,p=i,m.tag){case 1:if(f=m.payload,typeof f=="function"){d=f.call(p,d,h);break e}d=f;break e;case 3:f.flags=f.flags&-65537|128;case 0:if(f=m.payload,h=typeof f=="function"?f.call(p,d,h):f,h==null)break e;d=fs({},d,h);break e;case 2:Jc=!0}}a.callback!==null&&a.lane!==0&&(t.flags|=64,h=r.effects,h===null?r.effects=[a]:h.push(a))}else p={eventTime:p,lane:h,tag:a.tag,payload:a.payload,callback:a.callback,next:null},u===null?(c=u=p,l=d):u=u.next=p,o|=h;if(a=a.next,a===null){if(a=r.shared.pending,a===null)break;h=a,a=h.next,h.next=null,r.lastBaseUpdate=h,r.shared.pending=null}}while(!0);if(u===null&&(l=d),r.baseState=l,r.firstBaseUpdate=c,r.lastBaseUpdate=u,e=r.shared.interleaved,e!==null){r=e;do o|=r.lane,r=r.next;while(r!==e)}else n===null&&(r.shared.lanes=0);Ch|=o,t.lanes=o,t.memoizedState=d}}function CI(t,e,i){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var s=t[e],r=s.callback;if(r!==null){if(s.callback=null,s=i,typeof r!="function")throw Error(Oe(191,r));r.call(s)}}}var fC={},el=Xu(fC),Jv=Xu(fC),Qv=Xu(fC);function qd(t){if(t===fC)throw Error(Oe(174));return t}function bR(t,e){switch(zi(Qv,e),zi(Jv,t),zi(el,fC),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:IT(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=IT(e,t)}es(el),zi(el,e)}function Xf(){es(el),es(Jv),es(Qv)}function zN(t){qd(Qv.current);var e=qd(el.current),i=IT(e,t.type);e!==i&&(zi(Jv,t),zi(el,i))}function wR(t){Jv.current===t&&(es(el),es(Jv))}var ds=Xu(0);function _w(t){for(var e=t;e!==null;){if(e.tag===13){var i=e.memoizedState;if(i!==null&&(i=i.dehydrated,i===null||i.data==="$?"||i.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var S1=[];function SR(){for(var t=0;t<S1.length;t++)S1[t]._workInProgressVersionPrimary=null;S1.length=0}var Ib=bc.ReactCurrentDispatcher,x1=bc.ReactCurrentBatchConfig,yh=0,ps=null,$s=null,tr=null,Aw=!1,Ev=!1,ey=0,xU=0;function xr(){throw Error(Oe(321))}function xR(t,e){if(e===null)return!1;for(var i=0;i<e.length&&i<t.length;i++)if(!ma(t[i],e[i]))return!1;return!0}function ER(t,e,i,s,r,n){if(yh=n,ps=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,Ib.current=t===null||t.memoizedState===null?AU:RU,t=i(s,r),Ev){n=0;do{if(Ev=!1,ey=0,25<=n)throw Error(Oe(301));n+=1,tr=$s=null,e.updateQueue=null,Ib.current=MU,t=i(s,r)}while(Ev)}if(Ib.current=Rw,e=$s!==null&&$s.next!==null,yh=0,tr=$s=ps=null,Aw=!1,e)throw Error(Oe(300));return t}function TR(){var t=ey!==0;return ey=0,t}function Wa(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return tr===null?ps.memoizedState=tr=t:tr=tr.next=t,tr}function Oo(){if($s===null){var t=ps.alternate;t=t!==null?t.memoizedState:null}else t=$s.next;var e=tr===null?ps.memoizedState:tr.next;if(e!==null)tr=e,$s=t;else{if(t===null)throw Error(Oe(310));$s=t,t={memoizedState:$s.memoizedState,baseState:$s.baseState,baseQueue:$s.baseQueue,queue:$s.queue,next:null},tr===null?ps.memoizedState=tr=t:tr=tr.next=t}return tr}function ty(t,e){return typeof e=="function"?e(t):e}function E1(t){var e=Oo(),i=e.queue;if(i===null)throw Error(Oe(311));i.lastRenderedReducer=t;var s=$s,r=s.baseQueue,n=i.pending;if(n!==null){if(r!==null){var o=r.next;r.next=n.next,n.next=o}s.baseQueue=r=n,i.pending=null}if(r!==null){n=r.next,s=s.baseState;var a=o=null,l=null,c=n;do{var u=c.lane;if((yh&u)===u)l!==null&&(l=l.next={lane:0,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null}),s=c.hasEagerState?c.eagerState:t(s,c.action);else{var d={lane:u,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null};l===null?(a=l=d,o=s):l=l.next=d,ps.lanes|=u,Ch|=u}c=c.next}while(c!==null&&c!==n);l===null?o=s:l.next=a,ma(s,e.memoizedState)||(bn=!0),e.memoizedState=s,e.baseState=o,e.baseQueue=l,i.lastRenderedState=s}if(t=i.interleaved,t!==null){r=t;do n=r.lane,ps.lanes|=n,Ch|=n,r=r.next;while(r!==t)}else r===null&&(i.lanes=0);return[e.memoizedState,i.dispatch]}function T1(t){var e=Oo(),i=e.queue;if(i===null)throw Error(Oe(311));i.lastRenderedReducer=t;var s=i.dispatch,r=i.pending,n=e.memoizedState;if(r!==null){i.pending=null;var o=r=r.next;do n=t(n,o.action),o=o.next;while(o!==r);ma(n,e.memoizedState)||(bn=!0),e.memoizedState=n,e.baseQueue===null&&(e.baseState=n),i.lastRenderedState=n}return[n,s]}function $N(){}function KN(t,e){var i=ps,s=Oo(),r=e(),n=!ma(s.memoizedState,r);if(n&&(s.memoizedState=r,bn=!0),s=s.queue,_R(XN.bind(null,i,s,t),[t]),s.getSnapshot!==e||n||tr!==null&&tr.memoizedState.tag&1){if(i.flags|=2048,iy(9,qN.bind(null,i,s,r,e),void 0,null),rr===null)throw Error(Oe(349));yh&30||YN(i,e,r)}return r}function YN(t,e,i){t.flags|=16384,t={getSnapshot:e,value:i},e=ps.updateQueue,e===null?(e={lastEffect:null,stores:null},ps.updateQueue=e,e.stores=[t]):(i=e.stores,i===null?e.stores=[t]:i.push(t))}function qN(t,e,i,s){e.value=i,e.getSnapshot=s,ZN(e)&&JN(t)}function XN(t,e,i){return i(function(){ZN(e)&&JN(t)})}function ZN(t){var e=t.getSnapshot;t=t.value;try{var i=e();return!ma(t,i)}catch{return!0}}function JN(t){var e=ic(t,1);e!==null&&da(e,t,1,-1)}function bI(t){var e=Wa();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:ty,lastRenderedState:t},e.queue=t,t=t.dispatch=_U.bind(null,ps,t),[e.memoizedState,t]}function iy(t,e,i,s){return t={tag:t,create:e,destroy:i,deps:s,next:null},e=ps.updateQueue,e===null?(e={lastEffect:null,stores:null},ps.updateQueue=e,e.lastEffect=t.next=t):(i=e.lastEffect,i===null?e.lastEffect=t.next=t:(s=i.next,i.next=t,t.next=s,e.lastEffect=t)),t}function QN(){return Oo().memoizedState}function Fb(t,e,i,s){var r=Wa();ps.flags|=t,r.memoizedState=iy(1|e,i,void 0,s===void 0?null:s)}function VS(t,e,i,s){var r=Oo();s=s===void 0?null:s;var n=void 0;if($s!==null){var o=$s.memoizedState;if(n=o.destroy,s!==null&&xR(s,o.deps)){r.memoizedState=iy(e,i,n,s);return}}ps.flags|=t,r.memoizedState=iy(1|e,i,n,s)}function wI(t,e){return Fb(8390656,8,t,e)}function _R(t,e){return VS(2048,8,t,e)}function eO(t,e){return VS(4,2,t,e)}function tO(t,e){return VS(4,4,t,e)}function iO(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function sO(t,e,i){return i=i!=null?i.concat([t]):null,VS(4,4,iO.bind(null,e,t),i)}function AR(){}function rO(t,e){var i=Oo();e=e===void 0?null:e;var s=i.memoizedState;return s!==null&&e!==null&&xR(e,s[1])?s[0]:(i.memoizedState=[t,e],t)}function nO(t,e){var i=Oo();e=e===void 0?null:e;var s=i.memoizedState;return s!==null&&e!==null&&xR(e,s[1])?s[0]:(t=t(),i.memoizedState=[t,e],t)}function oO(t,e,i){return yh&21?(ma(i,e)||(i=dN(),ps.lanes|=i,Ch|=i,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,bn=!0),t.memoizedState=i)}function EU(t,e){var i=Ni;Ni=i!==0&&4>i?i:4,t(!0);var s=x1.transition;x1.transition={};try{t(!1),e()}finally{Ni=i,x1.transition=s}}function aO(){return Oo().memoizedState}function TU(t,e,i){var s=fu(t);if(i={lane:s,action:i,hasEagerState:!1,eagerState:null,next:null},lO(t))cO(e,i);else if(i=UN(t,e,i,s),i!==null){var r=Zr();da(i,t,s,r),uO(i,e,s)}}function _U(t,e,i){var s=fu(t),r={lane:s,action:i,hasEagerState:!1,eagerState:null,next:null};if(lO(t))cO(e,r);else{var n=t.alternate;if(t.lanes===0&&(n===null||n.lanes===0)&&(n=e.lastRenderedReducer,n!==null))try{var o=e.lastRenderedState,a=n(o,i);if(r.hasEagerState=!0,r.eagerState=a,ma(a,o)){var l=e.interleaved;l===null?(r.next=r,yR(e)):(r.next=l.next,l.next=r),e.interleaved=r;return}}catch{}finally{}i=UN(t,e,r,s),i!==null&&(r=Zr(),da(i,t,s,r),uO(i,e,s))}}function lO(t){var e=t.alternate;return t===ps||e!==null&&e===ps}function cO(t,e){Ev=Aw=!0;var i=t.pending;i===null?e.next=e:(e.next=i.next,i.next=e),t.pending=e}function uO(t,e,i){if(i&4194240){var s=e.lanes;s&=t.pendingLanes,i|=s,e.lanes=i,rR(t,i)}}var Rw={readContext:No,useCallback:xr,useContext:xr,useEffect:xr,useImperativeHandle:xr,useInsertionEffect:xr,useLayoutEffect:xr,useMemo:xr,useReducer:xr,useRef:xr,useState:xr,useDebugValue:xr,useDeferredValue:xr,useTransition:xr,useMutableSource:xr,useSyncExternalStore:xr,useId:xr,unstable_isNewReconciler:!1},AU={readContext:No,useCallback:function(t,e){return Wa().memoizedState=[t,e===void 0?null:e],t},useContext:No,useEffect:wI,useImperativeHandle:function(t,e,i){return i=i!=null?i.concat([t]):null,Fb(4194308,4,iO.bind(null,e,t),i)},useLayoutEffect:function(t,e){return Fb(4194308,4,t,e)},useInsertionEffect:function(t,e){return Fb(4,2,t,e)},useMemo:function(t,e){var i=Wa();return e=e===void 0?null:e,t=t(),i.memoizedState=[t,e],t},useReducer:function(t,e,i){var s=Wa();return e=i!==void 0?i(e):e,s.memoizedState=s.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},s.queue=t,t=t.dispatch=TU.bind(null,ps,t),[s.memoizedState,t]},useRef:function(t){var e=Wa();return t={current:t},e.memoizedState=t},useState:bI,useDebugValue:AR,useDeferredValue:function(t){return Wa().memoizedState=t},useTransition:function(){var t=bI(!1),e=t[0];return t=EU.bind(null,t[1]),Wa().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,i){var s=ps,r=Wa();if(os){if(i===void 0)throw Error(Oe(407));i=i()}else{if(i=e(),rr===null)throw Error(Oe(349));yh&30||YN(s,e,i)}r.memoizedState=i;var n={value:i,getSnapshot:e};return r.queue=n,wI(XN.bind(null,s,n,t),[t]),s.flags|=2048,iy(9,qN.bind(null,s,n,i,e),void 0,null),i},useId:function(){var t=Wa(),e=rr.identifierPrefix;if(os){var i=$l,s=zl;i=(s&~(1<<32-ua(s)-1)).toString(32)+i,e=":"+e+"R"+i,i=ey++,0<i&&(e+="H"+i.toString(32)),e+=":"}else i=xU++,e=":"+e+"r"+i.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},RU={readContext:No,useCallback:rO,useContext:No,useEffect:_R,useImperativeHandle:sO,useInsertionEffect:eO,useLayoutEffect:tO,useMemo:nO,useReducer:E1,useRef:QN,useState:function(){return E1(ty)},useDebugValue:AR,useDeferredValue:function(t){var e=Oo();return oO(e,$s.memoizedState,t)},useTransition:function(){var t=E1(ty)[0],e=Oo().memoizedState;return[t,e]},useMutableSource:$N,useSyncExternalStore:KN,useId:aO,unstable_isNewReconciler:!1},MU={readContext:No,useCallback:rO,useContext:No,useEffect:_R,useImperativeHandle:sO,useInsertionEffect:eO,useLayoutEffect:tO,useMemo:nO,useReducer:T1,useRef:QN,useState:function(){return T1(ty)},useDebugValue:AR,useDeferredValue:function(t){var e=Oo();return $s===null?e.memoizedState=t:oO(e,$s.memoizedState,t)},useTransition:function(){var t=T1(ty)[0],e=Oo().memoizedState;return[t,e]},useMutableSource:$N,useSyncExternalStore:KN,useId:aO,unstable_isNewReconciler:!1};function ia(t,e){if(t&&t.defaultProps){e=fs({},e),t=t.defaultProps;for(var i in t)e[i]===void 0&&(e[i]=t[i]);return e}return e}function QT(t,e,i,s){e=t.memoizedState,i=i(s,e),i=i==null?e:fs({},e,i),t.memoizedState=i,t.lanes===0&&(t.updateQueue.baseState=i)}var HS={isMounted:function(t){return(t=t._reactInternals)?Uh(t)===t:!1},enqueueSetState:function(t,e,i){t=t._reactInternals;var s=Zr(),r=fu(t),n=Zl(s,r);n.payload=e,i!=null&&(n.callback=i),e=hu(t,n,r),e!==null&&(da(e,t,r,s),Pb(e,t,r))},enqueueReplaceState:function(t,e,i){t=t._reactInternals;var s=Zr(),r=fu(t),n=Zl(s,r);n.tag=1,n.payload=e,i!=null&&(n.callback=i),e=hu(t,n,r),e!==null&&(da(e,t,r,s),Pb(e,t,r))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var i=Zr(),s=fu(t),r=Zl(i,s);r.tag=2,e!=null&&(r.callback=e),e=hu(t,r,s),e!==null&&(da(e,t,s,i),Pb(e,t,s))}};function SI(t,e,i,s,r,n,o){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(s,n,o):e.prototype&&e.prototype.isPureReactComponent?!Yv(i,s)||!Yv(r,n):!0}function dO(t,e,i){var s=!1,r=Tu,n=e.contextType;return typeof n=="object"&&n!==null?n=No(n):(r=An(e)?mh:Gr.current,s=e.contextTypes,n=(s=s!=null)?Kf(t,r):Tu),e=new e(i,n),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=HS,t.stateNode=e,e._reactInternals=t,s&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=r,t.__reactInternalMemoizedMaskedChildContext=n),e}function xI(t,e,i,s){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(i,s),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(i,s),e.state!==t&&HS.enqueueReplaceState(e,e.state,null)}function e_(t,e,i,s){var r=t.stateNode;r.props=i,r.state=t.memoizedState,r.refs={},CR(t);var n=e.contextType;typeof n=="object"&&n!==null?r.context=No(n):(n=An(e)?mh:Gr.current,r.context=Kf(t,n)),r.state=t.memoizedState,n=e.getDerivedStateFromProps,typeof n=="function"&&(QT(t,e,n,i),r.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof r.getSnapshotBeforeUpdate=="function"||typeof r.UNSAFE_componentWillMount!="function"&&typeof r.componentWillMount!="function"||(e=r.state,typeof r.componentWillMount=="function"&&r.componentWillMount(),typeof r.UNSAFE_componentWillMount=="function"&&r.UNSAFE_componentWillMount(),e!==r.state&&HS.enqueueReplaceState(r,r.state,null),Tw(t,i,r,s),r.state=t.memoizedState),typeof r.componentDidMount=="function"&&(t.flags|=4194308)}function Zf(t,e){try{var i="",s=e;do i+=sj(s),s=s.return;while(s);var r=i}catch(n){r=`
Error generating stack: `+n.message+`
`+n.stack}return{value:t,source:e,stack:r,digest:null}}function _1(t,e,i){return{value:t,source:null,stack:i??null,digest:e??null}}function t_(t,e){try{console.error(e.value)}catch(i){setTimeout(function(){throw i})}}var DU=typeof WeakMap=="function"?WeakMap:Map;function hO(t,e,i){i=Zl(-1,i),i.tag=3,i.payload={element:null};var s=e.value;return i.callback=function(){Dw||(Dw=!0,d_=s),t_(t,e)},i}function pO(t,e,i){i=Zl(-1,i),i.tag=3;var s=t.type.getDerivedStateFromError;if(typeof s=="function"){var r=e.value;i.payload=function(){return s(r)},i.callback=function(){t_(t,e)}}var n=t.stateNode;return n!==null&&typeof n.componentDidCatch=="function"&&(i.callback=function(){t_(t,e),typeof s!="function"&&(pu===null?pu=new Set([this]):pu.add(this));var o=e.stack;this.componentDidCatch(e.value,{componentStack:o!==null?o:""})}),i}function EI(t,e,i){var s=t.pingCache;if(s===null){s=t.pingCache=new DU;var r=new Set;s.set(e,r)}else r=s.get(e),r===void 0&&(r=new Set,s.set(e,r));r.has(i)||(r.add(i),t=WU.bind(null,t,e,i),e.then(t,t))}function TI(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function _I(t,e,i,s,r){return t.mode&1?(t.flags|=65536,t.lanes=r,t):(t===e?t.flags|=65536:(t.flags|=128,i.flags|=131072,i.flags&=-52805,i.tag===1&&(i.alternate===null?i.tag=17:(e=Zl(-1,1),e.tag=2,hu(i,e,1))),i.lanes|=1),t)}var PU=bc.ReactCurrentOwner,bn=!1;function $r(t,e,i,s){e.child=t===null?jN(e,null,i,s):qf(e,t.child,i,s)}function AI(t,e,i,s,r){i=i.render;var n=e.ref;return Af(e,r),s=ER(t,e,i,s,n,r),i=TR(),t!==null&&!bn?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~r,sc(t,e,r)):(os&&i&&hR(e),e.flags|=1,$r(t,e,s,r),e.child)}function RI(t,e,i,s,r){if(t===null){var n=i.type;return typeof n=="function"&&!kR(n)&&n.defaultProps===void 0&&i.compare===null&&i.defaultProps===void 0?(e.tag=15,e.type=n,fO(t,e,n,s,r)):(t=Ob(i.type,null,s,e,e.mode,r),t.ref=e.ref,t.return=e,e.child=t)}if(n=t.child,!(t.lanes&r)){var o=n.memoizedProps;if(i=i.compare,i=i!==null?i:Yv,i(o,s)&&t.ref===e.ref)return sc(t,e,r)}return e.flags|=1,t=gu(n,s),t.ref=e.ref,t.return=e,e.child=t}function fO(t,e,i,s,r){if(t!==null){var n=t.memoizedProps;if(Yv(n,s)&&t.ref===e.ref)if(bn=!1,e.pendingProps=s=n,(t.lanes&r)!==0)t.flags&131072&&(bn=!0);else return e.lanes=t.lanes,sc(t,e,r)}return i_(t,e,i,s,r)}function gO(t,e,i){var s=e.pendingProps,r=s.children,n=t!==null?t.memoizedState:null;if(s.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},zi(gf,Kn),Kn|=i;else{if(!(i&1073741824))return t=n!==null?n.baseLanes|i:i,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,zi(gf,Kn),Kn|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},s=n!==null?n.baseLanes:i,zi(gf,Kn),Kn|=s}else n!==null?(s=n.baseLanes|i,e.memoizedState=null):s=i,zi(gf,Kn),Kn|=s;return $r(t,e,r,i),e.child}function mO(t,e){var i=e.ref;(t===null&&i!==null||t!==null&&t.ref!==i)&&(e.flags|=512,e.flags|=2097152)}function i_(t,e,i,s,r){var n=An(i)?mh:Gr.current;return n=Kf(e,n),Af(e,r),i=ER(t,e,i,s,n,r),s=TR(),t!==null&&!bn?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~r,sc(t,e,r)):(os&&s&&hR(e),e.flags|=1,$r(t,e,i,r),e.child)}function MI(t,e,i,s,r){if(An(i)){var n=!0;bw(e)}else n=!1;if(Af(e,r),e.stateNode===null)Lb(t,e),dO(e,i,s),e_(e,i,s,r),s=!0;else if(t===null){var o=e.stateNode,a=e.memoizedProps;o.props=a;var l=o.context,c=i.contextType;typeof c=="object"&&c!==null?c=No(c):(c=An(i)?mh:Gr.current,c=Kf(e,c));var u=i.getDerivedStateFromProps,d=typeof u=="function"||typeof o.getSnapshotBeforeUpdate=="function";d||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==s||l!==c)&&xI(e,o,s,c),Jc=!1;var h=e.memoizedState;o.state=h,Tw(e,s,o,r),l=e.memoizedState,a!==s||h!==l||_n.current||Jc?(typeof u=="function"&&(QT(e,i,u,s),l=e.memoizedState),(a=Jc||SI(e,i,a,s,h,l,c))?(d||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(e.flags|=4194308)):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=s,e.memoizedState=l),o.props=s,o.state=l,o.context=c,s=a):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),s=!1)}else{o=e.stateNode,WN(t,e),a=e.memoizedProps,c=e.type===e.elementType?a:ia(e.type,a),o.props=c,d=e.pendingProps,h=o.context,l=i.contextType,typeof l=="object"&&l!==null?l=No(l):(l=An(i)?mh:Gr.current,l=Kf(e,l));var p=i.getDerivedStateFromProps;(u=typeof p=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==d||h!==l)&&xI(e,o,s,l),Jc=!1,h=e.memoizedState,o.state=h,Tw(e,s,o,r);var f=e.memoizedState;a!==d||h!==f||_n.current||Jc?(typeof p=="function"&&(QT(e,i,p,s),f=e.memoizedState),(c=Jc||SI(e,i,c,s,h,f,l)||!1)?(u||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(s,f,l),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(s,f,l)),typeof o.componentDidUpdate=="function"&&(e.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof o.componentDidUpdate!="function"||a===t.memoizedProps&&h===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&h===t.memoizedState||(e.flags|=1024),e.memoizedProps=s,e.memoizedState=f),o.props=s,o.state=f,o.context=l,s=c):(typeof o.componentDidUpdate!="function"||a===t.memoizedProps&&h===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&h===t.memoizedState||(e.flags|=1024),s=!1)}return s_(t,e,i,s,n,r)}function s_(t,e,i,s,r,n){mO(t,e);var o=(e.flags&128)!==0;if(!s&&!o)return r&&fI(e,i,!1),sc(t,e,n);s=e.stateNode,PU.current=e;var a=o&&typeof i.getDerivedStateFromError!="function"?null:s.render();return e.flags|=1,t!==null&&o?(e.child=qf(e,t.child,null,n),e.child=qf(e,null,a,n)):$r(t,e,a,n),e.memoizedState=s.state,r&&fI(e,i,!0),e.child}function vO(t){var e=t.stateNode;e.pendingContext?pI(t,e.pendingContext,e.pendingContext!==e.context):e.context&&pI(t,e.context,!1),bR(t,e.containerInfo)}function DI(t,e,i,s,r){return Yf(),fR(r),e.flags|=256,$r(t,e,i,s),e.child}var r_={dehydrated:null,treeContext:null,retryLane:0};function n_(t){return{baseLanes:t,cachePool:null,transitions:null}}function yO(t,e,i){var s=e.pendingProps,r=ds.current,n=!1,o=(e.flags&128)!==0,a;if((a=o)||(a=t!==null&&t.memoizedState===null?!1:(r&2)!==0),a?(n=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(r|=1),zi(ds,r&1),t===null)return ZT(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(o=s.children,t=s.fallback,n?(s=e.mode,n=e.child,o={mode:"hidden",children:o},!(s&1)&&n!==null?(n.childLanes=0,n.pendingProps=o):n=WS(o,s,0,null),t=nh(t,s,i,null),n.return=e,t.return=e,n.sibling=t,e.child=n,e.child.memoizedState=n_(i),e.memoizedState=r_,t):RR(e,o));if(r=t.memoizedState,r!==null&&(a=r.dehydrated,a!==null))return IU(t,e,o,s,a,r,i);if(n){n=s.fallback,o=e.mode,r=t.child,a=r.sibling;var l={mode:"hidden",children:s.children};return!(o&1)&&e.child!==r?(s=e.child,s.childLanes=0,s.pendingProps=l,e.deletions=null):(s=gu(r,l),s.subtreeFlags=r.subtreeFlags&14680064),a!==null?n=gu(a,n):(n=nh(n,o,i,null),n.flags|=2),n.return=e,s.return=e,s.sibling=n,e.child=s,s=n,n=e.child,o=t.child.memoizedState,o=o===null?n_(i):{baseLanes:o.baseLanes|i,cachePool:null,transitions:o.transitions},n.memoizedState=o,n.childLanes=t.childLanes&~i,e.memoizedState=r_,s}return n=t.child,t=n.sibling,s=gu(n,{mode:"visible",children:s.children}),!(e.mode&1)&&(s.lanes=i),s.return=e,s.sibling=null,t!==null&&(i=e.deletions,i===null?(e.deletions=[t],e.flags|=16):i.push(t)),e.child=s,e.memoizedState=null,s}function RR(t,e){return e=WS({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function K0(t,e,i,s){return s!==null&&fR(s),qf(e,t.child,null,i),t=RR(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function IU(t,e,i,s,r,n,o){if(i)return e.flags&256?(e.flags&=-257,s=_1(Error(Oe(422))),K0(t,e,o,s)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(n=s.fallback,r=e.mode,s=WS({mode:"visible",children:s.children},r,0,null),n=nh(n,r,o,null),n.flags|=2,s.return=e,n.return=e,s.sibling=n,e.child=s,e.mode&1&&qf(e,t.child,null,o),e.child.memoizedState=n_(o),e.memoizedState=r_,n);if(!(e.mode&1))return K0(t,e,o,null);if(r.data==="$!"){if(s=r.nextSibling&&r.nextSibling.dataset,s)var a=s.dgst;return s=a,n=Error(Oe(419)),s=_1(n,s,void 0),K0(t,e,o,s)}if(a=(o&t.childLanes)!==0,bn||a){if(s=rr,s!==null){switch(o&-o){case 4:r=2;break;case 16:r=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:r=32;break;case 536870912:r=268435456;break;default:r=0}r=r&(s.suspendedLanes|o)?0:r,r!==0&&r!==n.retryLane&&(n.retryLane=r,ic(t,r),da(s,t,r,-1))}return LR(),s=_1(Error(Oe(421))),K0(t,e,o,s)}return r.data==="$?"?(e.flags|=128,e.child=t.child,e=zU.bind(null,t),r._reactRetry=e,null):(t=n.treeContext,Xn=du(r.nextSibling),eo=e,os=!0,na=null,t!==null&&(Ao[Ro++]=zl,Ao[Ro++]=$l,Ao[Ro++]=vh,zl=t.id,$l=t.overflow,vh=e),e=RR(e,s.children),e.flags|=4096,e)}function PI(t,e,i){t.lanes|=e;var s=t.alternate;s!==null&&(s.lanes|=e),JT(t.return,e,i)}function A1(t,e,i,s,r){var n=t.memoizedState;n===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:s,tail:i,tailMode:r}:(n.isBackwards=e,n.rendering=null,n.renderingStartTime=0,n.last=s,n.tail=i,n.tailMode=r)}function CO(t,e,i){var s=e.pendingProps,r=s.revealOrder,n=s.tail;if($r(t,e,s.children,i),s=ds.current,s&2)s=s&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&PI(t,i,e);else if(t.tag===19)PI(t,i,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}s&=1}if(zi(ds,s),!(e.mode&1))e.memoizedState=null;else switch(r){case"forwards":for(i=e.child,r=null;i!==null;)t=i.alternate,t!==null&&_w(t)===null&&(r=i),i=i.sibling;i=r,i===null?(r=e.child,e.child=null):(r=i.sibling,i.sibling=null),A1(e,!1,r,i,n);break;case"backwards":for(i=null,r=e.child,e.child=null;r!==null;){if(t=r.alternate,t!==null&&_w(t)===null){e.child=r;break}t=r.sibling,r.sibling=i,i=r,r=t}A1(e,!0,i,null,n);break;case"together":A1(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function Lb(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function sc(t,e,i){if(t!==null&&(e.dependencies=t.dependencies),Ch|=e.lanes,!(i&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(Oe(153));if(e.child!==null){for(t=e.child,i=gu(t,t.pendingProps),e.child=i,i.return=e;t.sibling!==null;)t=t.sibling,i=i.sibling=gu(t,t.pendingProps),i.return=e;i.sibling=null}return e.child}function FU(t,e,i){switch(e.tag){case 3:vO(e),Yf();break;case 5:zN(e);break;case 1:An(e.type)&&bw(e);break;case 4:bR(e,e.stateNode.containerInfo);break;case 10:var s=e.type._context,r=e.memoizedProps.value;zi(xw,s._currentValue),s._currentValue=r;break;case 13:if(s=e.memoizedState,s!==null)return s.dehydrated!==null?(zi(ds,ds.current&1),e.flags|=128,null):i&e.child.childLanes?yO(t,e,i):(zi(ds,ds.current&1),t=sc(t,e,i),t!==null?t.sibling:null);zi(ds,ds.current&1);break;case 19:if(s=(i&e.childLanes)!==0,t.flags&128){if(s)return CO(t,e,i);e.flags|=128}if(r=e.memoizedState,r!==null&&(r.rendering=null,r.tail=null,r.lastEffect=null),zi(ds,ds.current),s)break;return null;case 22:case 23:return e.lanes=0,gO(t,e,i)}return sc(t,e,i)}var bO,o_,wO,SO;bO=function(t,e){for(var i=e.child;i!==null;){if(i.tag===5||i.tag===6)t.appendChild(i.stateNode);else if(i.tag!==4&&i.child!==null){i.child.return=i,i=i.child;continue}if(i===e)break;for(;i.sibling===null;){if(i.return===null||i.return===e)return;i=i.return}i.sibling.return=i.return,i=i.sibling}};o_=function(){};wO=function(t,e,i,s){var r=t.memoizedProps;if(r!==s){t=e.stateNode,qd(el.current);var n=null;switch(i){case"input":r=RT(t,r),s=RT(t,s),n=[];break;case"select":r=fs({},r,{value:void 0}),s=fs({},s,{value:void 0}),n=[];break;case"textarea":r=PT(t,r),s=PT(t,s),n=[];break;default:typeof r.onClick!="function"&&typeof s.onClick=="function"&&(t.onclick=yw)}FT(i,s);var o;i=null;for(c in r)if(!s.hasOwnProperty(c)&&r.hasOwnProperty(c)&&r[c]!=null)if(c==="style"){var a=r[c];for(o in a)a.hasOwnProperty(o)&&(i||(i={}),i[o]="")}else c!=="dangerouslySetInnerHTML"&&c!=="children"&&c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&c!=="autoFocus"&&(Hv.hasOwnProperty(c)?n||(n=[]):(n=n||[]).push(c,null));for(c in s){var l=s[c];if(a=r!=null?r[c]:void 0,s.hasOwnProperty(c)&&l!==a&&(l!=null||a!=null))if(c==="style")if(a){for(o in a)!a.hasOwnProperty(o)||l&&l.hasOwnProperty(o)||(i||(i={}),i[o]="");for(o in l)l.hasOwnProperty(o)&&a[o]!==l[o]&&(i||(i={}),i[o]=l[o])}else i||(n||(n=[]),n.push(c,i)),i=l;else c==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,a=a?a.__html:void 0,l!=null&&a!==l&&(n=n||[]).push(c,l)):c==="children"?typeof l!="string"&&typeof l!="number"||(n=n||[]).push(c,""+l):c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&(Hv.hasOwnProperty(c)?(l!=null&&c==="onScroll"&&qi("scroll",t),n||a===l||(n=[])):(n=n||[]).push(c,l))}i&&(n=n||[]).push("style",i);var c=n;(e.updateQueue=c)&&(e.flags|=4)}};SO=function(t,e,i,s){i!==s&&(e.flags|=4)};function Nm(t,e){if(!os)switch(t.tailMode){case"hidden":e=t.tail;for(var i=null;e!==null;)e.alternate!==null&&(i=e),e=e.sibling;i===null?t.tail=null:i.sibling=null;break;case"collapsed":i=t.tail;for(var s=null;i!==null;)i.alternate!==null&&(s=i),i=i.sibling;s===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:s.sibling=null}}function Er(t){var e=t.alternate!==null&&t.alternate.child===t.child,i=0,s=0;if(e)for(var r=t.child;r!==null;)i|=r.lanes|r.childLanes,s|=r.subtreeFlags&14680064,s|=r.flags&14680064,r.return=t,r=r.sibling;else for(r=t.child;r!==null;)i|=r.lanes|r.childLanes,s|=r.subtreeFlags,s|=r.flags,r.return=t,r=r.sibling;return t.subtreeFlags|=s,t.childLanes=i,e}function LU(t,e,i){var s=e.pendingProps;switch(pR(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Er(e),null;case 1:return An(e.type)&&Cw(),Er(e),null;case 3:return s=e.stateNode,Xf(),es(_n),es(Gr),SR(),s.pendingContext&&(s.context=s.pendingContext,s.pendingContext=null),(t===null||t.child===null)&&(z0(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,na!==null&&(f_(na),na=null))),o_(t,e),Er(e),null;case 5:wR(e);var r=qd(Qv.current);if(i=e.type,t!==null&&e.stateNode!=null)wO(t,e,i,s,r),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!s){if(e.stateNode===null)throw Error(Oe(166));return Er(e),null}if(t=qd(el.current),z0(e)){s=e.stateNode,i=e.type;var n=e.memoizedProps;switch(s[$a]=e,s[Zv]=n,t=(e.mode&1)!==0,i){case"dialog":qi("cancel",s),qi("close",s);break;case"iframe":case"object":case"embed":qi("load",s);break;case"video":case"audio":for(r=0;r<Qm.length;r++)qi(Qm[r],s);break;case"source":qi("error",s);break;case"img":case"image":case"link":qi("error",s),qi("load",s);break;case"details":qi("toggle",s);break;case"input":V2(s,n),qi("invalid",s);break;case"select":s._wrapperState={wasMultiple:!!n.multiple},qi("invalid",s);break;case"textarea":j2(s,n),qi("invalid",s)}FT(i,n),r=null;for(var o in n)if(n.hasOwnProperty(o)){var a=n[o];o==="children"?typeof a=="string"?s.textContent!==a&&(n.suppressHydrationWarning!==!0&&W0(s.textContent,a,t),r=["children",a]):typeof a=="number"&&s.textContent!==""+a&&(n.suppressHydrationWarning!==!0&&W0(s.textContent,a,t),r=["children",""+a]):Hv.hasOwnProperty(o)&&a!=null&&o==="onScroll"&&qi("scroll",s)}switch(i){case"input":N0(s),H2(s,n,!0);break;case"textarea":N0(s),U2(s);break;case"select":case"option":break;default:typeof n.onClick=="function"&&(s.onclick=yw)}s=r,e.updateQueue=s,s!==null&&(e.flags|=4)}else{o=r.nodeType===9?r:r.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=Xk(i)),t==="http://www.w3.org/1999/xhtml"?i==="script"?(t=o.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof s.is=="string"?t=o.createElement(i,{is:s.is}):(t=o.createElement(i),i==="select"&&(o=t,s.multiple?o.multiple=!0:s.size&&(o.size=s.size))):t=o.createElementNS(t,i),t[$a]=e,t[Zv]=s,bO(t,e,!1,!1),e.stateNode=t;e:{switch(o=LT(i,s),i){case"dialog":qi("cancel",t),qi("close",t),r=s;break;case"iframe":case"object":case"embed":qi("load",t),r=s;break;case"video":case"audio":for(r=0;r<Qm.length;r++)qi(Qm[r],t);r=s;break;case"source":qi("error",t),r=s;break;case"img":case"image":case"link":qi("error",t),qi("load",t),r=s;break;case"details":qi("toggle",t),r=s;break;case"input":V2(t,s),r=RT(t,s),qi("invalid",t);break;case"option":r=s;break;case"select":t._wrapperState={wasMultiple:!!s.multiple},r=fs({},s,{value:void 0}),qi("invalid",t);break;case"textarea":j2(t,s),r=PT(t,s),qi("invalid",t);break;default:r=s}FT(i,r),a=r;for(n in a)if(a.hasOwnProperty(n)){var l=a[n];n==="style"?Qk(t,l):n==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,l!=null&&Zk(t,l)):n==="children"?typeof l=="string"?(i!=="textarea"||l!=="")&&jv(t,l):typeof l=="number"&&jv(t,""+l):n!=="suppressContentEditableWarning"&&n!=="suppressHydrationWarning"&&n!=="autoFocus"&&(Hv.hasOwnProperty(n)?l!=null&&n==="onScroll"&&qi("scroll",t):l!=null&&JA(t,n,l,o))}switch(i){case"input":N0(t),H2(t,s,!1);break;case"textarea":N0(t),U2(t);break;case"option":s.value!=null&&t.setAttribute("value",""+Eu(s.value));break;case"select":t.multiple=!!s.multiple,n=s.value,n!=null?xf(t,!!s.multiple,n,!1):s.defaultValue!=null&&xf(t,!!s.multiple,s.defaultValue,!0);break;default:typeof r.onClick=="function"&&(t.onclick=yw)}switch(i){case"button":case"input":case"select":case"textarea":s=!!s.autoFocus;break e;case"img":s=!0;break e;default:s=!1}}s&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return Er(e),null;case 6:if(t&&e.stateNode!=null)SO(t,e,t.memoizedProps,s);else{if(typeof s!="string"&&e.stateNode===null)throw Error(Oe(166));if(i=qd(Qv.current),qd(el.current),z0(e)){if(s=e.stateNode,i=e.memoizedProps,s[$a]=e,(n=s.nodeValue!==i)&&(t=eo,t!==null))switch(t.tag){case 3:W0(s.nodeValue,i,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&W0(s.nodeValue,i,(t.mode&1)!==0)}n&&(e.flags|=4)}else s=(i.nodeType===9?i:i.ownerDocument).createTextNode(s),s[$a]=e,e.stateNode=s}return Er(e),null;case 13:if(es(ds),s=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(os&&Xn!==null&&e.mode&1&&!(e.flags&128))VN(),Yf(),e.flags|=98560,n=!1;else if(n=z0(e),s!==null&&s.dehydrated!==null){if(t===null){if(!n)throw Error(Oe(318));if(n=e.memoizedState,n=n!==null?n.dehydrated:null,!n)throw Error(Oe(317));n[$a]=e}else Yf(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;Er(e),n=!1}else na!==null&&(f_(na),na=null),n=!0;if(!n)return e.flags&65536?e:null}return e.flags&128?(e.lanes=i,e):(s=s!==null,s!==(t!==null&&t.memoizedState!==null)&&s&&(e.child.flags|=8192,e.mode&1&&(t===null||ds.current&1?Xs===0&&(Xs=3):LR())),e.updateQueue!==null&&(e.flags|=4),Er(e),null);case 4:return Xf(),o_(t,e),t===null&&qv(e.stateNode.containerInfo),Er(e),null;case 10:return vR(e.type._context),Er(e),null;case 17:return An(e.type)&&Cw(),Er(e),null;case 19:if(es(ds),n=e.memoizedState,n===null)return Er(e),null;if(s=(e.flags&128)!==0,o=n.rendering,o===null)if(s)Nm(n,!1);else{if(Xs!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(o=_w(t),o!==null){for(e.flags|=128,Nm(n,!1),s=o.updateQueue,s!==null&&(e.updateQueue=s,e.flags|=4),e.subtreeFlags=0,s=i,i=e.child;i!==null;)n=i,t=s,n.flags&=14680066,o=n.alternate,o===null?(n.childLanes=0,n.lanes=t,n.child=null,n.subtreeFlags=0,n.memoizedProps=null,n.memoizedState=null,n.updateQueue=null,n.dependencies=null,n.stateNode=null):(n.childLanes=o.childLanes,n.lanes=o.lanes,n.child=o.child,n.subtreeFlags=0,n.deletions=null,n.memoizedProps=o.memoizedProps,n.memoizedState=o.memoizedState,n.updateQueue=o.updateQueue,n.type=o.type,t=o.dependencies,n.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),i=i.sibling;return zi(ds,ds.current&1|2),e.child}t=t.sibling}n.tail!==null&&Ss()>Jf&&(e.flags|=128,s=!0,Nm(n,!1),e.lanes=4194304)}else{if(!s)if(t=_w(o),t!==null){if(e.flags|=128,s=!0,i=t.updateQueue,i!==null&&(e.updateQueue=i,e.flags|=4),Nm(n,!0),n.tail===null&&n.tailMode==="hidden"&&!o.alternate&&!os)return Er(e),null}else 2*Ss()-n.renderingStartTime>Jf&&i!==1073741824&&(e.flags|=128,s=!0,Nm(n,!1),e.lanes=4194304);n.isBackwards?(o.sibling=e.child,e.child=o):(i=n.last,i!==null?i.sibling=o:e.child=o,n.last=o)}return n.tail!==null?(e=n.tail,n.rendering=e,n.tail=e.sibling,n.renderingStartTime=Ss(),e.sibling=null,i=ds.current,zi(ds,s?i&1|2:i&1),e):(Er(e),null);case 22:case 23:return FR(),s=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==s&&(e.flags|=8192),s&&e.mode&1?Kn&1073741824&&(Er(e),e.subtreeFlags&6&&(e.flags|=8192)):Er(e),null;case 24:return null;case 25:return null}throw Error(Oe(156,e.tag))}function kU(t,e){switch(pR(e),e.tag){case 1:return An(e.type)&&Cw(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return Xf(),es(_n),es(Gr),SR(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return wR(e),null;case 13:if(es(ds),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(Oe(340));Yf()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return es(ds),null;case 4:return Xf(),null;case 10:return vR(e.type._context),null;case 22:case 23:return FR(),null;case 24:return null;default:return null}}var Y0=!1,Rr=!1,NU=typeof WeakSet=="function"?WeakSet:Set,tt=null;function ff(t,e){var i=t.ref;if(i!==null)if(typeof i=="function")try{i(null)}catch(s){ms(t,e,s)}else i.current=null}function a_(t,e,i){try{i()}catch(s){ms(t,e,s)}}var II=!1;function OU(t,e){if(WT=gw,t=AN(),dR(t)){if("selectionStart"in t)var i={start:t.selectionStart,end:t.selectionEnd};else e:{i=(i=t.ownerDocument)&&i.defaultView||window;var s=i.getSelection&&i.getSelection();if(s&&s.rangeCount!==0){i=s.anchorNode;var r=s.anchorOffset,n=s.focusNode;s=s.focusOffset;try{i.nodeType,n.nodeType}catch{i=null;break e}var o=0,a=-1,l=-1,c=0,u=0,d=t,h=null;t:for(;;){for(var p;d!==i||r!==0&&d.nodeType!==3||(a=o+r),d!==n||s!==0&&d.nodeType!==3||(l=o+s),d.nodeType===3&&(o+=d.nodeValue.length),(p=d.firstChild)!==null;)h=d,d=p;for(;;){if(d===t)break t;if(h===i&&++c===r&&(a=o),h===n&&++u===s&&(l=o),(p=d.nextSibling)!==null)break;d=h,h=d.parentNode}d=p}i=a===-1||l===-1?null:{start:a,end:l}}else i=null}i=i||{start:0,end:0}}else i=null;for(zT={focusedElem:t,selectionRange:i},gw=!1,tt=e;tt!==null;)if(e=tt,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,tt=t;else for(;tt!==null;){e=tt;try{var f=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(f!==null){var m=f.memoizedProps,g=f.memoizedState,y=e.stateNode,v=y.getSnapshotBeforeUpdate(e.elementType===e.type?m:ia(e.type,m),g);y.__reactInternalSnapshotBeforeUpdate=v}break;case 3:var C=e.stateNode.containerInfo;C.nodeType===1?C.textContent="":C.nodeType===9&&C.documentElement&&C.removeChild(C.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(Oe(163))}}catch(b){ms(e,e.return,b)}if(t=e.sibling,t!==null){t.return=e.return,tt=t;break}tt=e.return}return f=II,II=!1,f}function Tv(t,e,i){var s=e.updateQueue;if(s=s!==null?s.lastEffect:null,s!==null){var r=s=s.next;do{if((r.tag&t)===t){var n=r.destroy;r.destroy=void 0,n!==void 0&&a_(e,i,n)}r=r.next}while(r!==s)}}function jS(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var i=e=e.next;do{if((i.tag&t)===t){var s=i.create;i.destroy=s()}i=i.next}while(i!==e)}}function l_(t){var e=t.ref;if(e!==null){var i=t.stateNode;switch(t.tag){case 5:t=i;break;default:t=i}typeof e=="function"?e(t):e.current=t}}function xO(t){var e=t.alternate;e!==null&&(t.alternate=null,xO(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[$a],delete e[Zv],delete e[YT],delete e[CU],delete e[bU])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function EO(t){return t.tag===5||t.tag===3||t.tag===4}function FI(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||EO(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function c_(t,e,i){var s=t.tag;if(s===5||s===6)t=t.stateNode,e?i.nodeType===8?i.parentNode.insertBefore(t,e):i.insertBefore(t,e):(i.nodeType===8?(e=i.parentNode,e.insertBefore(t,i)):(e=i,e.appendChild(t)),i=i._reactRootContainer,i!=null||e.onclick!==null||(e.onclick=yw));else if(s!==4&&(t=t.child,t!==null))for(c_(t,e,i),t=t.sibling;t!==null;)c_(t,e,i),t=t.sibling}function u_(t,e,i){var s=t.tag;if(s===5||s===6)t=t.stateNode,e?i.insertBefore(t,e):i.appendChild(t);else if(s!==4&&(t=t.child,t!==null))for(u_(t,e,i),t=t.sibling;t!==null;)u_(t,e,i),t=t.sibling}var dr=null,sa=!1;function $c(t,e,i){for(i=i.child;i!==null;)TO(t,e,i),i=i.sibling}function TO(t,e,i){if(Qa&&typeof Qa.onCommitFiberUnmount=="function")try{Qa.onCommitFiberUnmount(LS,i)}catch{}switch(i.tag){case 5:Rr||ff(i,e);case 6:var s=dr,r=sa;dr=null,$c(t,e,i),dr=s,sa=r,dr!==null&&(sa?(t=dr,i=i.stateNode,t.nodeType===8?t.parentNode.removeChild(i):t.removeChild(i)):dr.removeChild(i.stateNode));break;case 18:dr!==null&&(sa?(t=dr,i=i.stateNode,t.nodeType===8?b1(t.parentNode,i):t.nodeType===1&&b1(t,i),$v(t)):b1(dr,i.stateNode));break;case 4:s=dr,r=sa,dr=i.stateNode.containerInfo,sa=!0,$c(t,e,i),dr=s,sa=r;break;case 0:case 11:case 14:case 15:if(!Rr&&(s=i.updateQueue,s!==null&&(s=s.lastEffect,s!==null))){r=s=s.next;do{var n=r,o=n.destroy;n=n.tag,o!==void 0&&(n&2||n&4)&&a_(i,e,o),r=r.next}while(r!==s)}$c(t,e,i);break;case 1:if(!Rr&&(ff(i,e),s=i.stateNode,typeof s.componentWillUnmount=="function"))try{s.props=i.memoizedProps,s.state=i.memoizedState,s.componentWillUnmount()}catch(a){ms(i,e,a)}$c(t,e,i);break;case 21:$c(t,e,i);break;case 22:i.mode&1?(Rr=(s=Rr)||i.memoizedState!==null,$c(t,e,i),Rr=s):$c(t,e,i);break;default:$c(t,e,i)}}function LI(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var i=t.stateNode;i===null&&(i=t.stateNode=new NU),e.forEach(function(s){var r=$U.bind(null,t,s);i.has(s)||(i.add(s),s.then(r,r))})}}function ea(t,e){var i=e.deletions;if(i!==null)for(var s=0;s<i.length;s++){var r=i[s];try{var n=t,o=e,a=o;e:for(;a!==null;){switch(a.tag){case 5:dr=a.stateNode,sa=!1;break e;case 3:dr=a.stateNode.containerInfo,sa=!0;break e;case 4:dr=a.stateNode.containerInfo,sa=!0;break e}a=a.return}if(dr===null)throw Error(Oe(160));TO(n,o,r),dr=null,sa=!1;var l=r.alternate;l!==null&&(l.return=null),r.return=null}catch(c){ms(r,e,c)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)_O(e,t),e=e.sibling}function _O(t,e){var i=t.alternate,s=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(ea(e,t),Na(t),s&4){try{Tv(3,t,t.return),jS(3,t)}catch(m){ms(t,t.return,m)}try{Tv(5,t,t.return)}catch(m){ms(t,t.return,m)}}break;case 1:ea(e,t),Na(t),s&512&&i!==null&&ff(i,i.return);break;case 5:if(ea(e,t),Na(t),s&512&&i!==null&&ff(i,i.return),t.flags&32){var r=t.stateNode;try{jv(r,"")}catch(m){ms(t,t.return,m)}}if(s&4&&(r=t.stateNode,r!=null)){var n=t.memoizedProps,o=i!==null?i.memoizedProps:n,a=t.type,l=t.updateQueue;if(t.updateQueue=null,l!==null)try{a==="input"&&n.type==="radio"&&n.name!=null&&Yk(r,n),LT(a,o);var c=LT(a,n);for(o=0;o<l.length;o+=2){var u=l[o],d=l[o+1];u==="style"?Qk(r,d):u==="dangerouslySetInnerHTML"?Zk(r,d):u==="children"?jv(r,d):JA(r,u,d,c)}switch(a){case"input":MT(r,n);break;case"textarea":qk(r,n);break;case"select":var h=r._wrapperState.wasMultiple;r._wrapperState.wasMultiple=!!n.multiple;var p=n.value;p!=null?xf(r,!!n.multiple,p,!1):h!==!!n.multiple&&(n.defaultValue!=null?xf(r,!!n.multiple,n.defaultValue,!0):xf(r,!!n.multiple,n.multiple?[]:"",!1))}r[Zv]=n}catch(m){ms(t,t.return,m)}}break;case 6:if(ea(e,t),Na(t),s&4){if(t.stateNode===null)throw Error(Oe(162));r=t.stateNode,n=t.memoizedProps;try{r.nodeValue=n}catch(m){ms(t,t.return,m)}}break;case 3:if(ea(e,t),Na(t),s&4&&i!==null&&i.memoizedState.isDehydrated)try{$v(e.containerInfo)}catch(m){ms(t,t.return,m)}break;case 4:ea(e,t),Na(t);break;case 13:ea(e,t),Na(t),r=t.child,r.flags&8192&&(n=r.memoizedState!==null,r.stateNode.isHidden=n,!n||r.alternate!==null&&r.alternate.memoizedState!==null||(PR=Ss())),s&4&&LI(t);break;case 22:if(u=i!==null&&i.memoizedState!==null,t.mode&1?(Rr=(c=Rr)||u,ea(e,t),Rr=c):ea(e,t),Na(t),s&8192){if(c=t.memoizedState!==null,(t.stateNode.isHidden=c)&&!u&&t.mode&1)for(tt=t,u=t.child;u!==null;){for(d=tt=u;tt!==null;){switch(h=tt,p=h.child,h.tag){case 0:case 11:case 14:case 15:Tv(4,h,h.return);break;case 1:ff(h,h.return);var f=h.stateNode;if(typeof f.componentWillUnmount=="function"){s=h,i=h.return;try{e=s,f.props=e.memoizedProps,f.state=e.memoizedState,f.componentWillUnmount()}catch(m){ms(s,i,m)}}break;case 5:ff(h,h.return);break;case 22:if(h.memoizedState!==null){NI(d);continue}}p!==null?(p.return=h,tt=p):NI(d)}u=u.sibling}e:for(u=null,d=t;;){if(d.tag===5){if(u===null){u=d;try{r=d.stateNode,c?(n=r.style,typeof n.setProperty=="function"?n.setProperty("display","none","important"):n.display="none"):(a=d.stateNode,l=d.memoizedProps.style,o=l!=null&&l.hasOwnProperty("display")?l.display:null,a.style.display=Jk("display",o))}catch(m){ms(t,t.return,m)}}}else if(d.tag===6){if(u===null)try{d.stateNode.nodeValue=c?"":d.memoizedProps}catch(m){ms(t,t.return,m)}}else if((d.tag!==22&&d.tag!==23||d.memoizedState===null||d===t)&&d.child!==null){d.child.return=d,d=d.child;continue}if(d===t)break e;for(;d.sibling===null;){if(d.return===null||d.return===t)break e;u===d&&(u=null),d=d.return}u===d&&(u=null),d.sibling.return=d.return,d=d.sibling}}break;case 19:ea(e,t),Na(t),s&4&&LI(t);break;case 21:break;default:ea(e,t),Na(t)}}function Na(t){var e=t.flags;if(e&2){try{e:{for(var i=t.return;i!==null;){if(EO(i)){var s=i;break e}i=i.return}throw Error(Oe(160))}switch(s.tag){case 5:var r=s.stateNode;s.flags&32&&(jv(r,""),s.flags&=-33);var n=FI(t);u_(t,n,r);break;case 3:case 4:var o=s.stateNode.containerInfo,a=FI(t);c_(t,a,o);break;default:throw Error(Oe(161))}}catch(l){ms(t,t.return,l)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function GU(t,e,i){tt=t,AO(t)}function AO(t,e,i){for(var s=(t.mode&1)!==0;tt!==null;){var r=tt,n=r.child;if(r.tag===22&&s){var o=r.memoizedState!==null||Y0;if(!o){var a=r.alternate,l=a!==null&&a.memoizedState!==null||Rr;a=Y0;var c=Rr;if(Y0=o,(Rr=l)&&!c)for(tt=r;tt!==null;)o=tt,l=o.child,o.tag===22&&o.memoizedState!==null?OI(r):l!==null?(l.return=o,tt=l):OI(r);for(;n!==null;)tt=n,AO(n),n=n.sibling;tt=r,Y0=a,Rr=c}kI(t)}else r.subtreeFlags&8772&&n!==null?(n.return=r,tt=n):kI(t)}}function kI(t){for(;tt!==null;){var e=tt;if(e.flags&8772){var i=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:Rr||jS(5,e);break;case 1:var s=e.stateNode;if(e.flags&4&&!Rr)if(i===null)s.componentDidMount();else{var r=e.elementType===e.type?i.memoizedProps:ia(e.type,i.memoizedProps);s.componentDidUpdate(r,i.memoizedState,s.__reactInternalSnapshotBeforeUpdate)}var n=e.updateQueue;n!==null&&CI(e,n,s);break;case 3:var o=e.updateQueue;if(o!==null){if(i=null,e.child!==null)switch(e.child.tag){case 5:i=e.child.stateNode;break;case 1:i=e.child.stateNode}CI(e,o,i)}break;case 5:var a=e.stateNode;if(i===null&&e.flags&4){i=a;var l=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":l.autoFocus&&i.focus();break;case"img":l.src&&(i.src=l.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var c=e.alternate;if(c!==null){var u=c.memoizedState;if(u!==null){var d=u.dehydrated;d!==null&&$v(d)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(Oe(163))}Rr||e.flags&512&&l_(e)}catch(h){ms(e,e.return,h)}}if(e===t){tt=null;break}if(i=e.sibling,i!==null){i.return=e.return,tt=i;break}tt=e.return}}function NI(t){for(;tt!==null;){var e=tt;if(e===t){tt=null;break}var i=e.sibling;if(i!==null){i.return=e.return,tt=i;break}tt=e.return}}function OI(t){for(;tt!==null;){var e=tt;try{switch(e.tag){case 0:case 11:case 15:var i=e.return;try{jS(4,e)}catch(l){ms(e,i,l)}break;case 1:var s=e.stateNode;if(typeof s.componentDidMount=="function"){var r=e.return;try{s.componentDidMount()}catch(l){ms(e,r,l)}}var n=e.return;try{l_(e)}catch(l){ms(e,n,l)}break;case 5:var o=e.return;try{l_(e)}catch(l){ms(e,o,l)}}}catch(l){ms(e,e.return,l)}if(e===t){tt=null;break}var a=e.sibling;if(a!==null){a.return=e.return,tt=a;break}tt=e.return}}var BU=Math.ceil,Mw=bc.ReactCurrentDispatcher,MR=bc.ReactCurrentOwner,Io=bc.ReactCurrentBatchConfig,wi=0,rr=null,Ls=null,fr=0,Kn=0,gf=Xu(0),Xs=0,sy=null,Ch=0,US=0,DR=0,_v=null,yn=null,PR=0,Jf=1/0,Ol=null,Dw=!1,d_=null,pu=null,q0=!1,ru=null,Pw=0,Av=0,h_=null,kb=-1,Nb=0;function Zr(){return wi&6?Ss():kb!==-1?kb:kb=Ss()}function fu(t){return t.mode&1?wi&2&&fr!==0?fr&-fr:SU.transition!==null?(Nb===0&&(Nb=dN()),Nb):(t=Ni,t!==0||(t=window.event,t=t===void 0?16:yN(t.type)),t):1}function da(t,e,i,s){if(50<Av)throw Av=0,h_=null,Error(Oe(185));dC(t,i,s),(!(wi&2)||t!==rr)&&(t===rr&&(!(wi&2)&&(US|=i),Xs===4&&eu(t,fr)),Rn(t,s),i===1&&wi===0&&!(e.mode&1)&&(Jf=Ss()+500,BS&&Zu()))}function Rn(t,e){var i=t.callbackNode;Sj(t,e);var s=fw(t,t===rr?fr:0);if(s===0)i!==null&&$2(i),t.callbackNode=null,t.callbackPriority=0;else if(e=s&-s,t.callbackPriority!==e){if(i!=null&&$2(i),e===1)t.tag===0?wU(GI.bind(null,t)):ON(GI.bind(null,t)),vU(function(){!(wi&6)&&Zu()}),i=null;else{switch(hN(s)){case 1:i=sR;break;case 4:i=cN;break;case 16:i=pw;break;case 536870912:i=uN;break;default:i=pw}i=kO(i,RO.bind(null,t))}t.callbackPriority=e,t.callbackNode=i}}function RO(t,e){if(kb=-1,Nb=0,wi&6)throw Error(Oe(327));var i=t.callbackNode;if(Rf()&&t.callbackNode!==i)return null;var s=fw(t,t===rr?fr:0);if(s===0)return null;if(s&30||s&t.expiredLanes||e)e=Iw(t,s);else{e=s;var r=wi;wi|=2;var n=DO();(rr!==t||fr!==e)&&(Ol=null,Jf=Ss()+500,rh(t,e));do try{jU();break}catch(a){MO(t,a)}while(!0);mR(),Mw.current=n,wi=r,Ls!==null?e=0:(rr=null,fr=0,e=Xs)}if(e!==0){if(e===2&&(r=BT(t),r!==0&&(s=r,e=p_(t,r))),e===1)throw i=sy,rh(t,0),eu(t,s),Rn(t,Ss()),i;if(e===6)eu(t,s);else{if(r=t.current.alternate,!(s&30)&&!VU(r)&&(e=Iw(t,s),e===2&&(n=BT(t),n!==0&&(s=n,e=p_(t,n))),e===1))throw i=sy,rh(t,0),eu(t,s),Rn(t,Ss()),i;switch(t.finishedWork=r,t.finishedLanes=s,e){case 0:case 1:throw Error(Oe(345));case 2:Fd(t,yn,Ol);break;case 3:if(eu(t,s),(s&130023424)===s&&(e=PR+500-Ss(),10<e)){if(fw(t,0)!==0)break;if(r=t.suspendedLanes,(r&s)!==s){Zr(),t.pingedLanes|=t.suspendedLanes&r;break}t.timeoutHandle=KT(Fd.bind(null,t,yn,Ol),e);break}Fd(t,yn,Ol);break;case 4:if(eu(t,s),(s&4194240)===s)break;for(e=t.eventTimes,r=-1;0<s;){var o=31-ua(s);n=1<<o,o=e[o],o>r&&(r=o),s&=~n}if(s=r,s=Ss()-s,s=(120>s?120:480>s?480:1080>s?1080:1920>s?1920:3e3>s?3e3:4320>s?4320:1960*BU(s/1960))-s,10<s){t.timeoutHandle=KT(Fd.bind(null,t,yn,Ol),s);break}Fd(t,yn,Ol);break;case 5:Fd(t,yn,Ol);break;default:throw Error(Oe(329))}}}return Rn(t,Ss()),t.callbackNode===i?RO.bind(null,t):null}function p_(t,e){var i=_v;return t.current.memoizedState.isDehydrated&&(rh(t,e).flags|=256),t=Iw(t,e),t!==2&&(e=yn,yn=i,e!==null&&f_(e)),t}function f_(t){yn===null?yn=t:yn.push.apply(yn,t)}function VU(t){for(var e=t;;){if(e.flags&16384){var i=e.updateQueue;if(i!==null&&(i=i.stores,i!==null))for(var s=0;s<i.length;s++){var r=i[s],n=r.getSnapshot;r=r.value;try{if(!ma(n(),r))return!1}catch{return!1}}}if(i=e.child,e.subtreeFlags&16384&&i!==null)i.return=e,e=i;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function eu(t,e){for(e&=~DR,e&=~US,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var i=31-ua(e),s=1<<i;t[i]=-1,e&=~s}}function GI(t){if(wi&6)throw Error(Oe(327));Rf();var e=fw(t,0);if(!(e&1))return Rn(t,Ss()),null;var i=Iw(t,e);if(t.tag!==0&&i===2){var s=BT(t);s!==0&&(e=s,i=p_(t,s))}if(i===1)throw i=sy,rh(t,0),eu(t,e),Rn(t,Ss()),i;if(i===6)throw Error(Oe(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,Fd(t,yn,Ol),Rn(t,Ss()),null}function IR(t,e){var i=wi;wi|=1;try{return t(e)}finally{wi=i,wi===0&&(Jf=Ss()+500,BS&&Zu())}}function bh(t){ru!==null&&ru.tag===0&&!(wi&6)&&Rf();var e=wi;wi|=1;var i=Io.transition,s=Ni;try{if(Io.transition=null,Ni=1,t)return t()}finally{Ni=s,Io.transition=i,wi=e,!(wi&6)&&Zu()}}function FR(){Kn=gf.current,es(gf)}function rh(t,e){t.finishedWork=null,t.finishedLanes=0;var i=t.timeoutHandle;if(i!==-1&&(t.timeoutHandle=-1,mU(i)),Ls!==null)for(i=Ls.return;i!==null;){var s=i;switch(pR(s),s.tag){case 1:s=s.type.childContextTypes,s!=null&&Cw();break;case 3:Xf(),es(_n),es(Gr),SR();break;case 5:wR(s);break;case 4:Xf();break;case 13:es(ds);break;case 19:es(ds);break;case 10:vR(s.type._context);break;case 22:case 23:FR()}i=i.return}if(rr=t,Ls=t=gu(t.current,null),fr=Kn=e,Xs=0,sy=null,DR=US=Ch=0,yn=_v=null,Yd!==null){for(e=0;e<Yd.length;e++)if(i=Yd[e],s=i.interleaved,s!==null){i.interleaved=null;var r=s.next,n=i.pending;if(n!==null){var o=n.next;n.next=r,s.next=o}i.pending=s}Yd=null}return t}function MO(t,e){do{var i=Ls;try{if(mR(),Ib.current=Rw,Aw){for(var s=ps.memoizedState;s!==null;){var r=s.queue;r!==null&&(r.pending=null),s=s.next}Aw=!1}if(yh=0,tr=$s=ps=null,Ev=!1,ey=0,MR.current=null,i===null||i.return===null){Xs=1,sy=e,Ls=null;break}e:{var n=t,o=i.return,a=i,l=e;if(e=fr,a.flags|=32768,l!==null&&typeof l=="object"&&typeof l.then=="function"){var c=l,u=a,d=u.tag;if(!(u.mode&1)&&(d===0||d===11||d===15)){var h=u.alternate;h?(u.updateQueue=h.updateQueue,u.memoizedState=h.memoizedState,u.lanes=h.lanes):(u.updateQueue=null,u.memoizedState=null)}var p=TI(o);if(p!==null){p.flags&=-257,_I(p,o,a,n,e),p.mode&1&&EI(n,c,e),e=p,l=c;var f=e.updateQueue;if(f===null){var m=new Set;m.add(l),e.updateQueue=m}else f.add(l);break e}else{if(!(e&1)){EI(n,c,e),LR();break e}l=Error(Oe(426))}}else if(os&&a.mode&1){var g=TI(o);if(g!==null){!(g.flags&65536)&&(g.flags|=256),_I(g,o,a,n,e),fR(Zf(l,a));break e}}n=l=Zf(l,a),Xs!==4&&(Xs=2),_v===null?_v=[n]:_v.push(n),n=o;do{switch(n.tag){case 3:n.flags|=65536,e&=-e,n.lanes|=e;var y=hO(n,l,e);yI(n,y);break e;case 1:a=l;var v=n.type,C=n.stateNode;if(!(n.flags&128)&&(typeof v.getDerivedStateFromError=="function"||C!==null&&typeof C.componentDidCatch=="function"&&(pu===null||!pu.has(C)))){n.flags|=65536,e&=-e,n.lanes|=e;var b=pO(n,a,e);yI(n,b);break e}}n=n.return}while(n!==null)}IO(i)}catch(T){e=T,Ls===i&&i!==null&&(Ls=i=i.return);continue}break}while(!0)}function DO(){var t=Mw.current;return Mw.current=Rw,t===null?Rw:t}function LR(){(Xs===0||Xs===3||Xs===2)&&(Xs=4),rr===null||!(Ch&268435455)&&!(US&268435455)||eu(rr,fr)}function Iw(t,e){var i=wi;wi|=2;var s=DO();(rr!==t||fr!==e)&&(Ol=null,rh(t,e));do try{HU();break}catch(r){MO(t,r)}while(!0);if(mR(),wi=i,Mw.current=s,Ls!==null)throw Error(Oe(261));return rr=null,fr=0,Xs}function HU(){for(;Ls!==null;)PO(Ls)}function jU(){for(;Ls!==null&&!pj();)PO(Ls)}function PO(t){var e=LO(t.alternate,t,Kn);t.memoizedProps=t.pendingProps,e===null?IO(t):Ls=e,MR.current=null}function IO(t){var e=t;do{var i=e.alternate;if(t=e.return,e.flags&32768){if(i=kU(i,e),i!==null){i.flags&=32767,Ls=i;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{Xs=6,Ls=null;return}}else if(i=LU(i,e,Kn),i!==null){Ls=i;return}if(e=e.sibling,e!==null){Ls=e;return}Ls=e=t}while(e!==null);Xs===0&&(Xs=5)}function Fd(t,e,i){var s=Ni,r=Io.transition;try{Io.transition=null,Ni=1,UU(t,e,i,s)}finally{Io.transition=r,Ni=s}return null}function UU(t,e,i,s){do Rf();while(ru!==null);if(wi&6)throw Error(Oe(327));i=t.finishedWork;var r=t.finishedLanes;if(i===null)return null;if(t.finishedWork=null,t.finishedLanes=0,i===t.current)throw Error(Oe(177));t.callbackNode=null,t.callbackPriority=0;var n=i.lanes|i.childLanes;if(xj(t,n),t===rr&&(Ls=rr=null,fr=0),!(i.subtreeFlags&2064)&&!(i.flags&2064)||q0||(q0=!0,kO(pw,function(){return Rf(),null})),n=(i.flags&15990)!==0,i.subtreeFlags&15990||n){n=Io.transition,Io.transition=null;var o=Ni;Ni=1;var a=wi;wi|=4,MR.current=null,OU(t,i),_O(i,t),cU(zT),gw=!!WT,zT=WT=null,t.current=i,GU(i),fj(),wi=a,Ni=o,Io.transition=n}else t.current=i;if(q0&&(q0=!1,ru=t,Pw=r),n=t.pendingLanes,n===0&&(pu=null),vj(i.stateNode),Rn(t,Ss()),e!==null)for(s=t.onRecoverableError,i=0;i<e.length;i++)r=e[i],s(r.value,{componentStack:r.stack,digest:r.digest});if(Dw)throw Dw=!1,t=d_,d_=null,t;return Pw&1&&t.tag!==0&&Rf(),n=t.pendingLanes,n&1?t===h_?Av++:(Av=0,h_=t):Av=0,Zu(),null}function Rf(){if(ru!==null){var t=hN(Pw),e=Io.transition,i=Ni;try{if(Io.transition=null,Ni=16>t?16:t,ru===null)var s=!1;else{if(t=ru,ru=null,Pw=0,wi&6)throw Error(Oe(331));var r=wi;for(wi|=4,tt=t.current;tt!==null;){var n=tt,o=n.child;if(tt.flags&16){var a=n.deletions;if(a!==null){for(var l=0;l<a.length;l++){var c=a[l];for(tt=c;tt!==null;){var u=tt;switch(u.tag){case 0:case 11:case 15:Tv(8,u,n)}var d=u.child;if(d!==null)d.return=u,tt=d;else for(;tt!==null;){u=tt;var h=u.sibling,p=u.return;if(xO(u),u===c){tt=null;break}if(h!==null){h.return=p,tt=h;break}tt=p}}}var f=n.alternate;if(f!==null){var m=f.child;if(m!==null){f.child=null;do{var g=m.sibling;m.sibling=null,m=g}while(m!==null)}}tt=n}}if(n.subtreeFlags&2064&&o!==null)o.return=n,tt=o;else e:for(;tt!==null;){if(n=tt,n.flags&2048)switch(n.tag){case 0:case 11:case 15:Tv(9,n,n.return)}var y=n.sibling;if(y!==null){y.return=n.return,tt=y;break e}tt=n.return}}var v=t.current;for(tt=v;tt!==null;){o=tt;var C=o.child;if(o.subtreeFlags&2064&&C!==null)C.return=o,tt=C;else e:for(o=v;tt!==null;){if(a=tt,a.flags&2048)try{switch(a.tag){case 0:case 11:case 15:jS(9,a)}}catch(T){ms(a,a.return,T)}if(a===o){tt=null;break e}var b=a.sibling;if(b!==null){b.return=a.return,tt=b;break e}tt=a.return}}if(wi=r,Zu(),Qa&&typeof Qa.onPostCommitFiberRoot=="function")try{Qa.onPostCommitFiberRoot(LS,t)}catch{}s=!0}return s}finally{Ni=i,Io.transition=e}}return!1}function BI(t,e,i){e=Zf(i,e),e=hO(t,e,1),t=hu(t,e,1),e=Zr(),t!==null&&(dC(t,1,e),Rn(t,e))}function ms(t,e,i){if(t.tag===3)BI(t,t,i);else for(;e!==null;){if(e.tag===3){BI(e,t,i);break}else if(e.tag===1){var s=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof s.componentDidCatch=="function"&&(pu===null||!pu.has(s))){t=Zf(i,t),t=pO(e,t,1),e=hu(e,t,1),t=Zr(),e!==null&&(dC(e,1,t),Rn(e,t));break}}e=e.return}}function WU(t,e,i){var s=t.pingCache;s!==null&&s.delete(e),e=Zr(),t.pingedLanes|=t.suspendedLanes&i,rr===t&&(fr&i)===i&&(Xs===4||Xs===3&&(fr&130023424)===fr&&500>Ss()-PR?rh(t,0):DR|=i),Rn(t,e)}function FO(t,e){e===0&&(t.mode&1?(e=B0,B0<<=1,!(B0&130023424)&&(B0=4194304)):e=1);var i=Zr();t=ic(t,e),t!==null&&(dC(t,e,i),Rn(t,i))}function zU(t){var e=t.memoizedState,i=0;e!==null&&(i=e.retryLane),FO(t,i)}function $U(t,e){var i=0;switch(t.tag){case 13:var s=t.stateNode,r=t.memoizedState;r!==null&&(i=r.retryLane);break;case 19:s=t.stateNode;break;default:throw Error(Oe(314))}s!==null&&s.delete(e),FO(t,i)}var LO;LO=function(t,e,i){if(t!==null)if(t.memoizedProps!==e.pendingProps||_n.current)bn=!0;else{if(!(t.lanes&i)&&!(e.flags&128))return bn=!1,FU(t,e,i);bn=!!(t.flags&131072)}else bn=!1,os&&e.flags&1048576&&GN(e,Sw,e.index);switch(e.lanes=0,e.tag){case 2:var s=e.type;Lb(t,e),t=e.pendingProps;var r=Kf(e,Gr.current);Af(e,i),r=ER(null,e,s,t,r,i);var n=TR();return e.flags|=1,typeof r=="object"&&r!==null&&typeof r.render=="function"&&r.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,An(s)?(n=!0,bw(e)):n=!1,e.memoizedState=r.state!==null&&r.state!==void 0?r.state:null,CR(e),r.updater=HS,e.stateNode=r,r._reactInternals=e,e_(e,s,t,i),e=s_(null,e,s,!0,n,i)):(e.tag=0,os&&n&&hR(e),$r(null,e,r,i),e=e.child),e;case 16:s=e.elementType;e:{switch(Lb(t,e),t=e.pendingProps,r=s._init,s=r(s._payload),e.type=s,r=e.tag=YU(s),t=ia(s,t),r){case 0:e=i_(null,e,s,t,i);break e;case 1:e=MI(null,e,s,t,i);break e;case 11:e=AI(null,e,s,t,i);break e;case 14:e=RI(null,e,s,ia(s.type,t),i);break e}throw Error(Oe(306,s,""))}return e;case 0:return s=e.type,r=e.pendingProps,r=e.elementType===s?r:ia(s,r),i_(t,e,s,r,i);case 1:return s=e.type,r=e.pendingProps,r=e.elementType===s?r:ia(s,r),MI(t,e,s,r,i);case 3:e:{if(vO(e),t===null)throw Error(Oe(387));s=e.pendingProps,n=e.memoizedState,r=n.element,WN(t,e),Tw(e,s,null,i);var o=e.memoizedState;if(s=o.element,n.isDehydrated)if(n={element:s,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},e.updateQueue.baseState=n,e.memoizedState=n,e.flags&256){r=Zf(Error(Oe(423)),e),e=DI(t,e,s,i,r);break e}else if(s!==r){r=Zf(Error(Oe(424)),e),e=DI(t,e,s,i,r);break e}else for(Xn=du(e.stateNode.containerInfo.firstChild),eo=e,os=!0,na=null,i=jN(e,null,s,i),e.child=i;i;)i.flags=i.flags&-3|4096,i=i.sibling;else{if(Yf(),s===r){e=sc(t,e,i);break e}$r(t,e,s,i)}e=e.child}return e;case 5:return zN(e),t===null&&ZT(e),s=e.type,r=e.pendingProps,n=t!==null?t.memoizedProps:null,o=r.children,$T(s,r)?o=null:n!==null&&$T(s,n)&&(e.flags|=32),mO(t,e),$r(t,e,o,i),e.child;case 6:return t===null&&ZT(e),null;case 13:return yO(t,e,i);case 4:return bR(e,e.stateNode.containerInfo),s=e.pendingProps,t===null?e.child=qf(e,null,s,i):$r(t,e,s,i),e.child;case 11:return s=e.type,r=e.pendingProps,r=e.elementType===s?r:ia(s,r),AI(t,e,s,r,i);case 7:return $r(t,e,e.pendingProps,i),e.child;case 8:return $r(t,e,e.pendingProps.children,i),e.child;case 12:return $r(t,e,e.pendingProps.children,i),e.child;case 10:e:{if(s=e.type._context,r=e.pendingProps,n=e.memoizedProps,o=r.value,zi(xw,s._currentValue),s._currentValue=o,n!==null)if(ma(n.value,o)){if(n.children===r.children&&!_n.current){e=sc(t,e,i);break e}}else for(n=e.child,n!==null&&(n.return=e);n!==null;){var a=n.dependencies;if(a!==null){o=n.child;for(var l=a.firstContext;l!==null;){if(l.context===s){if(n.tag===1){l=Zl(-1,i&-i),l.tag=2;var c=n.updateQueue;if(c!==null){c=c.shared;var u=c.pending;u===null?l.next=l:(l.next=u.next,u.next=l),c.pending=l}}n.lanes|=i,l=n.alternate,l!==null&&(l.lanes|=i),JT(n.return,i,e),a.lanes|=i;break}l=l.next}}else if(n.tag===10)o=n.type===e.type?null:n.child;else if(n.tag===18){if(o=n.return,o===null)throw Error(Oe(341));o.lanes|=i,a=o.alternate,a!==null&&(a.lanes|=i),JT(o,i,e),o=n.sibling}else o=n.child;if(o!==null)o.return=n;else for(o=n;o!==null;){if(o===e){o=null;break}if(n=o.sibling,n!==null){n.return=o.return,o=n;break}o=o.return}n=o}$r(t,e,r.children,i),e=e.child}return e;case 9:return r=e.type,s=e.pendingProps.children,Af(e,i),r=No(r),s=s(r),e.flags|=1,$r(t,e,s,i),e.child;case 14:return s=e.type,r=ia(s,e.pendingProps),r=ia(s.type,r),RI(t,e,s,r,i);case 15:return fO(t,e,e.type,e.pendingProps,i);case 17:return s=e.type,r=e.pendingProps,r=e.elementType===s?r:ia(s,r),Lb(t,e),e.tag=1,An(s)?(t=!0,bw(e)):t=!1,Af(e,i),dO(e,s,r),e_(e,s,r,i),s_(null,e,s,!0,t,i);case 19:return CO(t,e,i);case 22:return gO(t,e,i)}throw Error(Oe(156,e.tag))};function kO(t,e){return lN(t,e)}function KU(t,e,i,s){this.tag=t,this.key=i,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=s,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Po(t,e,i,s){return new KU(t,e,i,s)}function kR(t){return t=t.prototype,!(!t||!t.isReactComponent)}function YU(t){if(typeof t=="function")return kR(t)?1:0;if(t!=null){if(t=t.$$typeof,t===eR)return 11;if(t===tR)return 14}return 2}function gu(t,e){var i=t.alternate;return i===null?(i=Po(t.tag,e,t.key,t.mode),i.elementType=t.elementType,i.type=t.type,i.stateNode=t.stateNode,i.alternate=t,t.alternate=i):(i.pendingProps=e,i.type=t.type,i.flags=0,i.subtreeFlags=0,i.deletions=null),i.flags=t.flags&14680064,i.childLanes=t.childLanes,i.lanes=t.lanes,i.child=t.child,i.memoizedProps=t.memoizedProps,i.memoizedState=t.memoizedState,i.updateQueue=t.updateQueue,e=t.dependencies,i.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},i.sibling=t.sibling,i.index=t.index,i.ref=t.ref,i}function Ob(t,e,i,s,r,n){var o=2;if(s=t,typeof t=="function")kR(t)&&(o=1);else if(typeof t=="string")o=5;else e:switch(t){case nf:return nh(i.children,r,n,e);case QA:o=8,r|=8;break;case ET:return t=Po(12,i,e,r|2),t.elementType=ET,t.lanes=n,t;case TT:return t=Po(13,i,e,r),t.elementType=TT,t.lanes=n,t;case _T:return t=Po(19,i,e,r),t.elementType=_T,t.lanes=n,t;case zk:return WS(i,r,n,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case Uk:o=10;break e;case Wk:o=9;break e;case eR:o=11;break e;case tR:o=14;break e;case Zc:o=16,s=null;break e}throw Error(Oe(130,t==null?t:typeof t,""))}return e=Po(o,i,e,r),e.elementType=t,e.type=s,e.lanes=n,e}function nh(t,e,i,s){return t=Po(7,t,s,e),t.lanes=i,t}function WS(t,e,i,s){return t=Po(22,t,s,e),t.elementType=zk,t.lanes=i,t.stateNode={isHidden:!1},t}function R1(t,e,i){return t=Po(6,t,null,e),t.lanes=i,t}function M1(t,e,i){return e=Po(4,t.children!==null?t.children:[],t.key,e),e.lanes=i,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function qU(t,e,i,s,r){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=c1(0),this.expirationTimes=c1(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=c1(0),this.identifierPrefix=s,this.onRecoverableError=r,this.mutableSourceEagerHydrationData=null}function NR(t,e,i,s,r,n,o,a,l){return t=new qU(t,e,i,a,l),e===1?(e=1,n===!0&&(e|=8)):e=0,n=Po(3,null,null,e),t.current=n,n.stateNode=t,n.memoizedState={element:s,isDehydrated:i,cache:null,transitions:null,pendingSuspenseBoundaries:null},CR(n),t}function XU(t,e,i){var s=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:rf,key:s==null?null:""+s,children:t,containerInfo:e,implementation:i}}function NO(t){if(!t)return Tu;t=t._reactInternals;e:{if(Uh(t)!==t||t.tag!==1)throw Error(Oe(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(An(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(Oe(171))}if(t.tag===1){var i=t.type;if(An(i))return NN(t,i,e)}return e}function OO(t,e,i,s,r,n,o,a,l){return t=NR(i,s,!0,t,r,n,o,a,l),t.context=NO(null),i=t.current,s=Zr(),r=fu(i),n=Zl(s,r),n.callback=e??null,hu(i,n,r),t.current.lanes=r,dC(t,r,s),Rn(t,s),t}function zS(t,e,i,s){var r=e.current,n=Zr(),o=fu(r);return i=NO(i),e.context===null?e.context=i:e.pendingContext=i,e=Zl(n,o),e.payload={element:t},s=s===void 0?null:s,s!==null&&(e.callback=s),t=hu(r,e,o),t!==null&&(da(t,r,o,n),Pb(t,r,o)),o}function Fw(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function VI(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var i=t.retryLane;t.retryLane=i!==0&&i<e?i:e}}function OR(t,e){VI(t,e),(t=t.alternate)&&VI(t,e)}function ZU(){return null}var GO=typeof reportError=="function"?reportError:function(t){console.error(t)};function GR(t){this._internalRoot=t}$S.prototype.render=GR.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(Oe(409));zS(t,e,null,null)};$S.prototype.unmount=GR.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;bh(function(){zS(null,t,null,null)}),e[tc]=null}};function $S(t){this._internalRoot=t}$S.prototype.unstable_scheduleHydration=function(t){if(t){var e=gN();t={blockedOn:null,target:t,priority:e};for(var i=0;i<Qc.length&&e!==0&&e<Qc[i].priority;i++);Qc.splice(i,0,t),i===0&&vN(t)}};function BR(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function KS(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function HI(){}function JU(t,e,i,s,r){if(r){if(typeof s=="function"){var n=s;s=function(){var c=Fw(o);n.call(c)}}var o=OO(e,s,t,0,null,!1,!1,"",HI);return t._reactRootContainer=o,t[tc]=o.current,qv(t.nodeType===8?t.parentNode:t),bh(),o}for(;r=t.lastChild;)t.removeChild(r);if(typeof s=="function"){var a=s;s=function(){var c=Fw(l);a.call(c)}}var l=NR(t,0,!1,null,null,!1,!1,"",HI);return t._reactRootContainer=l,t[tc]=l.current,qv(t.nodeType===8?t.parentNode:t),bh(function(){zS(e,l,i,s)}),l}function YS(t,e,i,s,r){var n=i._reactRootContainer;if(n){var o=n;if(typeof r=="function"){var a=r;r=function(){var l=Fw(o);a.call(l)}}zS(e,o,t,r)}else o=JU(i,e,t,r,s);return Fw(o)}pN=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var i=Jm(e.pendingLanes);i!==0&&(rR(e,i|1),Rn(e,Ss()),!(wi&6)&&(Jf=Ss()+500,Zu()))}break;case 13:bh(function(){var s=ic(t,1);if(s!==null){var r=Zr();da(s,t,1,r)}}),OR(t,1)}};nR=function(t){if(t.tag===13){var e=ic(t,134217728);if(e!==null){var i=Zr();da(e,t,134217728,i)}OR(t,134217728)}};fN=function(t){if(t.tag===13){var e=fu(t),i=ic(t,e);if(i!==null){var s=Zr();da(i,t,e,s)}OR(t,e)}};gN=function(){return Ni};mN=function(t,e){var i=Ni;try{return Ni=t,e()}finally{Ni=i}};NT=function(t,e,i){switch(e){case"input":if(MT(t,i),e=i.name,i.type==="radio"&&e!=null){for(i=t;i.parentNode;)i=i.parentNode;for(i=i.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<i.length;e++){var s=i[e];if(s!==t&&s.form===t.form){var r=GS(s);if(!r)throw Error(Oe(90));Kk(s),MT(s,r)}}}break;case"textarea":qk(t,i);break;case"select":e=i.value,e!=null&&xf(t,!!i.multiple,e,!1)}};iN=IR;sN=bh;var QU={usingClientEntryPoint:!1,Events:[pC,cf,GS,eN,tN,IR]},Om={findFiberByHostInstance:Kd,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},eW={bundleType:Om.bundleType,version:Om.version,rendererPackageName:Om.rendererPackageName,rendererConfig:Om.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:bc.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=oN(t),t===null?null:t.stateNode},findFiberByHostInstance:Om.findFiberByHostInstance||ZU,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var X0=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!X0.isDisabled&&X0.supportsFiber)try{LS=X0.inject(eW),Qa=X0}catch{}}uo.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=QU;uo.createPortal=function(t,e){var i=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!BR(e))throw Error(Oe(200));return XU(t,e,null,i)};uo.createRoot=function(t,e){if(!BR(t))throw Error(Oe(299));var i=!1,s="",r=GO;return e!=null&&(e.unstable_strictMode===!0&&(i=!0),e.identifierPrefix!==void 0&&(s=e.identifierPrefix),e.onRecoverableError!==void 0&&(r=e.onRecoverableError)),e=NR(t,1,!1,null,null,i,!1,s,r),t[tc]=e.current,qv(t.nodeType===8?t.parentNode:t),new GR(e)};uo.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(Oe(188)):(t=Object.keys(t).join(","),Error(Oe(268,t)));return t=oN(e),t=t===null?null:t.stateNode,t};uo.flushSync=function(t){return bh(t)};uo.hydrate=function(t,e,i){if(!KS(e))throw Error(Oe(200));return YS(null,t,e,!0,i)};uo.hydrateRoot=function(t,e,i){if(!BR(t))throw Error(Oe(405));var s=i!=null&&i.hydratedSources||null,r=!1,n="",o=GO;if(i!=null&&(i.unstable_strictMode===!0&&(r=!0),i.identifierPrefix!==void 0&&(n=i.identifierPrefix),i.onRecoverableError!==void 0&&(o=i.onRecoverableError)),e=OO(e,null,t,1,i??null,r,!1,n,o),t[tc]=e.current,qv(t),s)for(t=0;t<s.length;t++)i=s[t],r=i._getVersion,r=r(i._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[i,r]:e.mutableSourceEagerHydrationData.push(i,r);return new $S(e)};uo.render=function(t,e,i){if(!KS(e))throw Error(Oe(200));return YS(null,t,e,!1,i)};uo.unmountComponentAtNode=function(t){if(!KS(t))throw Error(Oe(40));return t._reactRootContainer?(bh(function(){YS(null,null,t,!1,function(){t._reactRootContainer=null,t[tc]=null})}),!0):!1};uo.unstable_batchedUpdates=IR;uo.unstable_renderSubtreeIntoContainer=function(t,e,i,s){if(!KS(i))throw Error(Oe(200));if(t==null||t._reactInternals===void 0)throw Error(Oe(38));return YS(t,e,i,!1,s)};uo.version="18.3.1-next-f1338f8080-20240426";function BO(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(BO)}catch(t){console.error(t)}}BO(),Bk.exports=uo;var tW=Bk.exports,jI=tW;ST.createRoot=jI.createRoot,ST.hydrateRoot=jI.hydrateRoot;function VO(t,e){return function(){return t.apply(e,arguments)}}const{toString:iW}=Object.prototype,{getPrototypeOf:VR}=Object,{iterator:qS,toStringTag:HO}=Symbol,XS=(t=>e=>{const i=iW.call(e);return t[i]||(t[i]=i.slice(8,-1).toLowerCase())})(Object.create(null)),Ca=t=>(t=t.toLowerCase(),e=>XS(e)===t),ZS=t=>e=>typeof e===t,{isArray:kg}=Array,Qf=ZS("undefined");function gC(t){return t!==null&&!Qf(t)&&t.constructor!==null&&!Qf(t.constructor)&&Mn(t.constructor.isBuffer)&&t.constructor.isBuffer(t)}const jO=Ca("ArrayBuffer");function sW(t){let e;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?e=ArrayBuffer.isView(t):e=t&&t.buffer&&jO(t.buffer),e}const rW=ZS("string"),Mn=ZS("function"),UO=ZS("number"),mC=t=>t!==null&&typeof t=="object",nW=t=>t===!0||t===!1,Gb=t=>{if(XS(t)!=="object")return!1;const e=VR(t);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(HO in t)&&!(qS in t)},oW=t=>{if(!mC(t)||gC(t))return!1;try{return Object.keys(t).length===0&&Object.getPrototypeOf(t)===Object.prototype}catch{return!1}},aW=Ca("Date"),lW=Ca("File"),cW=Ca("Blob"),uW=Ca("FileList"),dW=t=>mC(t)&&Mn(t.pipe),hW=t=>{let e;return t&&(typeof FormData=="function"&&t instanceof FormData||Mn(t.append)&&((e=XS(t))==="formdata"||e==="object"&&Mn(t.toString)&&t.toString()==="[object FormData]"))},pW=Ca("URLSearchParams"),[fW,gW,mW,vW]=["ReadableStream","Request","Response","Headers"].map(Ca),yW=t=>t.trim?t.trim():t.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"");function vC(t,e,{allOwnKeys:i=!1}={}){if(t===null||typeof t>"u")return;let s,r;if(typeof t!="object"&&(t=[t]),kg(t))for(s=0,r=t.length;s<r;s++)e.call(null,t[s],s,t);else{if(gC(t))return;const n=i?Object.getOwnPropertyNames(t):Object.keys(t),o=n.length;let a;for(s=0;s<o;s++)a=n[s],e.call(null,t[a],a,t)}}function WO(t,e){if(gC(t))return null;e=e.toLowerCase();const i=Object.keys(t);let s=i.length,r;for(;s-- >0;)if(r=i[s],e===r.toLowerCase())return r;return null}const Xd=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:global,zO=t=>!Qf(t)&&t!==Xd;function g_(){const{caseless:t,skipUndefined:e}=zO(this)&&this||{},i={},s=(r,n)=>{const o=t&&WO(i,n)||n;Gb(i[o])&&Gb(r)?i[o]=g_(i[o],r):Gb(r)?i[o]=g_({},r):kg(r)?i[o]=r.slice():(!e||!Qf(r))&&(i[o]=r)};for(let r=0,n=arguments.length;r<n;r++)arguments[r]&&vC(arguments[r],s);return i}const CW=(t,e,i,{allOwnKeys:s}={})=>(vC(e,(r,n)=>{i&&Mn(r)?t[n]=VO(r,i):t[n]=r},{allOwnKeys:s}),t),bW=t=>(t.charCodeAt(0)===65279&&(t=t.slice(1)),t),wW=(t,e,i,s)=>{t.prototype=Object.create(e.prototype,s),t.prototype.constructor=t,Object.defineProperty(t,"super",{value:e.prototype}),i&&Object.assign(t.prototype,i)},SW=(t,e,i,s)=>{let r,n,o;const a={};if(e=e||{},t==null)return e;do{for(r=Object.getOwnPropertyNames(t),n=r.length;n-- >0;)o=r[n],(!s||s(o,t,e))&&!a[o]&&(e[o]=t[o],a[o]=!0);t=i!==!1&&VR(t)}while(t&&(!i||i(t,e))&&t!==Object.prototype);return e},xW=(t,e,i)=>{t=String(t),(i===void 0||i>t.length)&&(i=t.length),i-=e.length;const s=t.indexOf(e,i);return s!==-1&&s===i},EW=t=>{if(!t)return null;if(kg(t))return t;let e=t.length;if(!UO(e))return null;const i=new Array(e);for(;e-- >0;)i[e]=t[e];return i},TW=(t=>e=>t&&e instanceof t)(typeof Uint8Array<"u"&&VR(Uint8Array)),_W=(t,e)=>{const s=(t&&t[qS]).call(t);let r;for(;(r=s.next())&&!r.done;){const n=r.value;e.call(t,n[0],n[1])}},AW=(t,e)=>{let i;const s=[];for(;(i=t.exec(e))!==null;)s.push(i);return s},RW=Ca("HTMLFormElement"),MW=t=>t.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,function(i,s,r){return s.toUpperCase()+r}),UI=(({hasOwnProperty:t})=>(e,i)=>t.call(e,i))(Object.prototype),DW=Ca("RegExp"),$O=(t,e)=>{const i=Object.getOwnPropertyDescriptors(t),s={};vC(i,(r,n)=>{let o;(o=e(r,n,t))!==!1&&(s[n]=o||r)}),Object.defineProperties(t,s)},PW=t=>{$O(t,(e,i)=>{if(Mn(t)&&["arguments","caller","callee"].indexOf(i)!==-1)return!1;const s=t[i];if(Mn(s)){if(e.enumerable=!1,"writable"in e){e.writable=!1;return}e.set||(e.set=()=>{throw Error("Can not rewrite read-only method '"+i+"'")})}})},IW=(t,e)=>{const i={},s=r=>{r.forEach(n=>{i[n]=!0})};return kg(t)?s(t):s(String(t).split(e)),i},FW=()=>{},LW=(t,e)=>t!=null&&Number.isFinite(t=+t)?t:e;function kW(t){return!!(t&&Mn(t.append)&&t[HO]==="FormData"&&t[qS])}const NW=t=>{const e=new Array(10),i=(s,r)=>{if(mC(s)){if(e.indexOf(s)>=0)return;if(gC(s))return s;if(!("toJSON"in s)){e[r]=s;const n=kg(s)?[]:{};return vC(s,(o,a)=>{const l=i(o,r+1);!Qf(l)&&(n[a]=l)}),e[r]=void 0,n}}return s};return i(t,0)},OW=Ca("AsyncFunction"),GW=t=>t&&(mC(t)||Mn(t))&&Mn(t.then)&&Mn(t.catch),KO=((t,e)=>t?setImmediate:e?((i,s)=>(Xd.addEventListener("message",({source:r,data:n})=>{r===Xd&&n===i&&s.length&&s.shift()()},!1),r=>{s.push(r),Xd.postMessage(i,"*")}))(`axios@${Math.random()}`,[]):i=>setTimeout(i))(typeof setImmediate=="function",Mn(Xd.postMessage)),BW=typeof queueMicrotask<"u"?queueMicrotask.bind(Xd):typeof process<"u"&&process.nextTick||KO,VW=t=>t!=null&&Mn(t[qS]),Ee={isArray:kg,isArrayBuffer:jO,isBuffer:gC,isFormData:hW,isArrayBufferView:sW,isString:rW,isNumber:UO,isBoolean:nW,isObject:mC,isPlainObject:Gb,isEmptyObject:oW,isReadableStream:fW,isRequest:gW,isResponse:mW,isHeaders:vW,isUndefined:Qf,isDate:aW,isFile:lW,isBlob:cW,isRegExp:DW,isFunction:Mn,isStream:dW,isURLSearchParams:pW,isTypedArray:TW,isFileList:uW,forEach:vC,merge:g_,extend:CW,trim:yW,stripBOM:bW,inherits:wW,toFlatObject:SW,kindOf:XS,kindOfTest:Ca,endsWith:xW,toArray:EW,forEachEntry:_W,matchAll:AW,isHTMLForm:RW,hasOwnProperty:UI,hasOwnProp:UI,reduceDescriptors:$O,freezeMethods:PW,toObjectSet:IW,toCamelCase:MW,noop:FW,toFiniteNumber:LW,findKey:WO,global:Xd,isContextDefined:zO,isSpecCompliantForm:kW,toJSONObject:NW,isAsyncFn:OW,isThenable:GW,setImmediate:KO,asap:BW,isIterable:VW};function jt(t,e,i,s,r){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack,this.message=t,this.name="AxiosError",e&&(this.code=e),i&&(this.config=i),s&&(this.request=s),r&&(this.response=r,this.status=r.status?r.status:null)}Ee.inherits(jt,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:Ee.toJSONObject(this.config),code:this.code,status:this.status}}});const YO=jt.prototype,qO={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach(t=>{qO[t]={value:t}});Object.defineProperties(jt,qO);Object.defineProperty(YO,"isAxiosError",{value:!0});jt.from=(t,e,i,s,r,n)=>{const o=Object.create(YO);Ee.toFlatObject(t,o,function(u){return u!==Error.prototype},c=>c!=="isAxiosError");const a=t&&t.message?t.message:"Error",l=e==null&&t?t.code:e;return jt.call(o,a,l,i,s,r),t&&o.cause==null&&Object.defineProperty(o,"cause",{value:t,configurable:!0}),o.name=t&&t.name||"Error",n&&Object.assign(o,n),o};const HW=null;function m_(t){return Ee.isPlainObject(t)||Ee.isArray(t)}function XO(t){return Ee.endsWith(t,"[]")?t.slice(0,-2):t}function WI(t,e,i){return t?t.concat(e).map(function(r,n){return r=XO(r),!i&&n?"["+r+"]":r}).join(i?".":""):e}function jW(t){return Ee.isArray(t)&&!t.some(m_)}const UW=Ee.toFlatObject(Ee,{},null,function(e){return/^is[A-Z]/.test(e)});function JS(t,e,i){if(!Ee.isObject(t))throw new TypeError("target must be an object");e=e||new FormData,i=Ee.toFlatObject(i,{metaTokens:!0,dots:!1,indexes:!1},!1,function(m,g){return!Ee.isUndefined(g[m])});const s=i.metaTokens,r=i.visitor||u,n=i.dots,o=i.indexes,l=(i.Blob||typeof Blob<"u"&&Blob)&&Ee.isSpecCompliantForm(e);if(!Ee.isFunction(r))throw new TypeError("visitor must be a function");function c(f){if(f===null)return"";if(Ee.isDate(f))return f.toISOString();if(Ee.isBoolean(f))return f.toString();if(!l&&Ee.isBlob(f))throw new jt("Blob is not supported. Use a Buffer instead.");return Ee.isArrayBuffer(f)||Ee.isTypedArray(f)?l&&typeof Blob=="function"?new Blob([f]):Buffer.from(f):f}function u(f,m,g){let y=f;if(f&&!g&&typeof f=="object"){if(Ee.endsWith(m,"{}"))m=s?m:m.slice(0,-2),f=JSON.stringify(f);else if(Ee.isArray(f)&&jW(f)||(Ee.isFileList(f)||Ee.endsWith(m,"[]"))&&(y=Ee.toArray(f)))return m=XO(m),y.forEach(function(C,b){!(Ee.isUndefined(C)||C===null)&&e.append(o===!0?WI([m],b,n):o===null?m:m+"[]",c(C))}),!1}return m_(f)?!0:(e.append(WI(g,m,n),c(f)),!1)}const d=[],h=Object.assign(UW,{defaultVisitor:u,convertValue:c,isVisitable:m_});function p(f,m){if(!Ee.isUndefined(f)){if(d.indexOf(f)!==-1)throw Error("Circular reference detected in "+m.join("."));d.push(f),Ee.forEach(f,function(y,v){(!(Ee.isUndefined(y)||y===null)&&r.call(e,y,Ee.isString(v)?v.trim():v,m,h))===!0&&p(y,m?m.concat(v):[v])}),d.pop()}}if(!Ee.isObject(t))throw new TypeError("data must be an object");return p(t),e}function zI(t){const e={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(t).replace(/[!'()~]|%20|%00/g,function(s){return e[s]})}function HR(t,e){this._pairs=[],t&&JS(t,this,e)}const ZO=HR.prototype;ZO.append=function(e,i){this._pairs.push([e,i])};ZO.toString=function(e){const i=e?function(s){return e.call(this,s,zI)}:zI;return this._pairs.map(function(r){return i(r[0])+"="+i(r[1])},"").join("&")};function WW(t){return encodeURIComponent(t).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+")}function JO(t,e,i){if(!e)return t;const s=i&&i.encode||WW;Ee.isFunction(i)&&(i={serialize:i});const r=i&&i.serialize;let n;if(r?n=r(e,i):n=Ee.isURLSearchParams(e)?e.toString():new HR(e,i).toString(s),n){const o=t.indexOf("#");o!==-1&&(t=t.slice(0,o)),t+=(t.indexOf("?")===-1?"?":"&")+n}return t}class $I{constructor(){this.handlers=[]}use(e,i,s){return this.handlers.push({fulfilled:e,rejected:i,synchronous:s?s.synchronous:!1,runWhen:s?s.runWhen:null}),this.handlers.length-1}eject(e){this.handlers[e]&&(this.handlers[e]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(e){Ee.forEach(this.handlers,function(s){s!==null&&e(s)})}}const QO={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},zW=typeof URLSearchParams<"u"?URLSearchParams:HR,$W=typeof FormData<"u"?FormData:null,KW=typeof Blob<"u"?Blob:null,YW={isBrowser:!0,classes:{URLSearchParams:zW,FormData:$W,Blob:KW},protocols:["http","https","file","blob","url","data"]},jR=typeof window<"u"&&typeof document<"u",v_=typeof navigator=="object"&&navigator||void 0,qW=jR&&(!v_||["ReactNative","NativeScript","NS"].indexOf(v_.product)<0),XW=typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&typeof self.importScripts=="function",ZW=jR&&window.location.href||"http://localhost",JW=Object.freeze(Object.defineProperty({__proto__:null,hasBrowserEnv:jR,hasStandardBrowserEnv:qW,hasStandardBrowserWebWorkerEnv:XW,navigator:v_,origin:ZW},Symbol.toStringTag,{value:"Module"})),Dr={...JW,...YW};function QW(t,e){return JS(t,new Dr.classes.URLSearchParams,{visitor:function(i,s,r,n){return Dr.isNode&&Ee.isBuffer(i)?(this.append(s,i.toString("base64")),!1):n.defaultVisitor.apply(this,arguments)},...e})}function ez(t){return Ee.matchAll(/\w+|\[(\w*)]/g,t).map(e=>e[0]==="[]"?"":e[1]||e[0])}function tz(t){const e={},i=Object.keys(t);let s;const r=i.length;let n;for(s=0;s<r;s++)n=i[s],e[n]=t[n];return e}function e3(t){function e(i,s,r,n){let o=i[n++];if(o==="__proto__")return!0;const a=Number.isFinite(+o),l=n>=i.length;return o=!o&&Ee.isArray(r)?r.length:o,l?(Ee.hasOwnProp(r,o)?r[o]=[r[o],s]:r[o]=s,!a):((!r[o]||!Ee.isObject(r[o]))&&(r[o]=[]),e(i,s,r[o],n)&&Ee.isArray(r[o])&&(r[o]=tz(r[o])),!a)}if(Ee.isFormData(t)&&Ee.isFunction(t.entries)){const i={};return Ee.forEachEntry(t,(s,r)=>{e(ez(s),r,i,0)}),i}return null}function iz(t,e,i){if(Ee.isString(t))try{return(e||JSON.parse)(t),Ee.trim(t)}catch(s){if(s.name!=="SyntaxError")throw s}return(i||JSON.stringify)(t)}const yC={transitional:QO,adapter:["xhr","http","fetch"],transformRequest:[function(e,i){const s=i.getContentType()||"",r=s.indexOf("application/json")>-1,n=Ee.isObject(e);if(n&&Ee.isHTMLForm(e)&&(e=new FormData(e)),Ee.isFormData(e))return r?JSON.stringify(e3(e)):e;if(Ee.isArrayBuffer(e)||Ee.isBuffer(e)||Ee.isStream(e)||Ee.isFile(e)||Ee.isBlob(e)||Ee.isReadableStream(e))return e;if(Ee.isArrayBufferView(e))return e.buffer;if(Ee.isURLSearchParams(e))return i.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),e.toString();let a;if(n){if(s.indexOf("application/x-www-form-urlencoded")>-1)return QW(e,this.formSerializer).toString();if((a=Ee.isFileList(e))||s.indexOf("multipart/form-data")>-1){const l=this.env&&this.env.FormData;return JS(a?{"files[]":e}:e,l&&new l,this.formSerializer)}}return n||r?(i.setContentType("application/json",!1),iz(e)):e}],transformResponse:[function(e){const i=this.transitional||yC.transitional,s=i&&i.forcedJSONParsing,r=this.responseType==="json";if(Ee.isResponse(e)||Ee.isReadableStream(e))return e;if(e&&Ee.isString(e)&&(s&&!this.responseType||r)){const o=!(i&&i.silentJSONParsing)&&r;try{return JSON.parse(e,this.parseReviver)}catch(a){if(o)throw a.name==="SyntaxError"?jt.from(a,jt.ERR_BAD_RESPONSE,this,null,this.response):a}}return e}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:Dr.classes.FormData,Blob:Dr.classes.Blob},validateStatus:function(e){return e>=200&&e<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};Ee.forEach(["delete","get","head","post","put","patch"],t=>{yC.headers[t]={}});const sz=Ee.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),rz=t=>{const e={};let i,s,r;return t&&t.split(`
`).forEach(function(o){r=o.indexOf(":"),i=o.substring(0,r).trim().toLowerCase(),s=o.substring(r+1).trim(),!(!i||e[i]&&sz[i])&&(i==="set-cookie"?e[i]?e[i].push(s):e[i]=[s]:e[i]=e[i]?e[i]+", "+s:s)}),e},KI=Symbol("internals");function Gm(t){return t&&String(t).trim().toLowerCase()}function Bb(t){return t===!1||t==null?t:Ee.isArray(t)?t.map(Bb):String(t)}function nz(t){const e=Object.create(null),i=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let s;for(;s=i.exec(t);)e[s[1]]=s[2];return e}const oz=t=>/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(t.trim());function D1(t,e,i,s,r){if(Ee.isFunction(s))return s.call(this,e,i);if(r&&(e=i),!!Ee.isString(e)){if(Ee.isString(s))return e.indexOf(s)!==-1;if(Ee.isRegExp(s))return s.test(e)}}function az(t){return t.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(e,i,s)=>i.toUpperCase()+s)}function lz(t,e){const i=Ee.toCamelCase(" "+e);["get","set","has"].forEach(s=>{Object.defineProperty(t,s+i,{value:function(r,n,o){return this[s].call(this,e,r,n,o)},configurable:!0})})}let Dn=class{constructor(e){e&&this.set(e)}set(e,i,s){const r=this;function n(a,l,c){const u=Gm(l);if(!u)throw new Error("header name must be a non-empty string");const d=Ee.findKey(r,u);(!d||r[d]===void 0||c===!0||c===void 0&&r[d]!==!1)&&(r[d||l]=Bb(a))}const o=(a,l)=>Ee.forEach(a,(c,u)=>n(c,u,l));if(Ee.isPlainObject(e)||e instanceof this.constructor)o(e,i);else if(Ee.isString(e)&&(e=e.trim())&&!oz(e))o(rz(e),i);else if(Ee.isObject(e)&&Ee.isIterable(e)){let a={},l,c;for(const u of e){if(!Ee.isArray(u))throw TypeError("Object iterator must return a key-value pair");a[c=u[0]]=(l=a[c])?Ee.isArray(l)?[...l,u[1]]:[l,u[1]]:u[1]}o(a,i)}else e!=null&&n(i,e,s);return this}get(e,i){if(e=Gm(e),e){const s=Ee.findKey(this,e);if(s){const r=this[s];if(!i)return r;if(i===!0)return nz(r);if(Ee.isFunction(i))return i.call(this,r,s);if(Ee.isRegExp(i))return i.exec(r);throw new TypeError("parser must be boolean|regexp|function")}}}has(e,i){if(e=Gm(e),e){const s=Ee.findKey(this,e);return!!(s&&this[s]!==void 0&&(!i||D1(this,this[s],s,i)))}return!1}delete(e,i){const s=this;let r=!1;function n(o){if(o=Gm(o),o){const a=Ee.findKey(s,o);a&&(!i||D1(s,s[a],a,i))&&(delete s[a],r=!0)}}return Ee.isArray(e)?e.forEach(n):n(e),r}clear(e){const i=Object.keys(this);let s=i.length,r=!1;for(;s--;){const n=i[s];(!e||D1(this,this[n],n,e,!0))&&(delete this[n],r=!0)}return r}normalize(e){const i=this,s={};return Ee.forEach(this,(r,n)=>{const o=Ee.findKey(s,n);if(o){i[o]=Bb(r),delete i[n];return}const a=e?az(n):String(n).trim();a!==n&&delete i[n],i[a]=Bb(r),s[a]=!0}),this}concat(...e){return this.constructor.concat(this,...e)}toJSON(e){const i=Object.create(null);return Ee.forEach(this,(s,r)=>{s!=null&&s!==!1&&(i[r]=e&&Ee.isArray(s)?s.join(", "):s)}),i}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(([e,i])=>e+": "+i).join(`
`)}getSetCookie(){return this.get("set-cookie")||[]}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(e){return e instanceof this?e:new this(e)}static concat(e,...i){const s=new this(e);return i.forEach(r=>s.set(r)),s}static accessor(e){const s=(this[KI]=this[KI]={accessors:{}}).accessors,r=this.prototype;function n(o){const a=Gm(o);s[a]||(lz(r,o),s[a]=!0)}return Ee.isArray(e)?e.forEach(n):n(e),this}};Dn.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]);Ee.reduceDescriptors(Dn.prototype,({value:t},e)=>{let i=e[0].toUpperCase()+e.slice(1);return{get:()=>t,set(s){this[i]=s}}});Ee.freezeMethods(Dn);function P1(t,e){const i=this||yC,s=e||i,r=Dn.from(s.headers);let n=s.data;return Ee.forEach(t,function(a){n=a.call(i,n,r.normalize(),e?e.status:void 0)}),r.normalize(),n}function t3(t){return!!(t&&t.__CANCEL__)}function Ng(t,e,i){jt.call(this,t??"canceled",jt.ERR_CANCELED,e,i),this.name="CanceledError"}Ee.inherits(Ng,jt,{__CANCEL__:!0});function i3(t,e,i){const s=i.config.validateStatus;!i.status||!s||s(i.status)?t(i):e(new jt("Request failed with status code "+i.status,[jt.ERR_BAD_REQUEST,jt.ERR_BAD_RESPONSE][Math.floor(i.status/100)-4],i.config,i.request,i))}function cz(t){const e=/^([-+\w]{1,25})(:?\/\/|:)/.exec(t);return e&&e[1]||""}function uz(t,e){t=t||10;const i=new Array(t),s=new Array(t);let r=0,n=0,o;return e=e!==void 0?e:1e3,function(l){const c=Date.now(),u=s[n];o||(o=c),i[r]=l,s[r]=c;let d=n,h=0;for(;d!==r;)h+=i[d++],d=d%t;if(r=(r+1)%t,r===n&&(n=(n+1)%t),c-o<e)return;const p=u&&c-u;return p?Math.round(h*1e3/p):void 0}}function dz(t,e){let i=0,s=1e3/e,r,n;const o=(c,u=Date.now())=>{i=u,r=null,n&&(clearTimeout(n),n=null),t(...c)};return[(...c)=>{const u=Date.now(),d=u-i;d>=s?o(c,u):(r=c,n||(n=setTimeout(()=>{n=null,o(r)},s-d)))},()=>r&&o(r)]}const Lw=(t,e,i=3)=>{let s=0;const r=uz(50,250);return dz(n=>{const o=n.loaded,a=n.lengthComputable?n.total:void 0,l=o-s,c=r(l),u=o<=a;s=o;const d={loaded:o,total:a,progress:a?o/a:void 0,bytes:l,rate:c||void 0,estimated:c&&a&&u?(a-o)/c:void 0,event:n,lengthComputable:a!=null,[e?"download":"upload"]:!0};t(d)},i)},YI=(t,e)=>{const i=t!=null;return[s=>e[0]({lengthComputable:i,total:t,loaded:s}),e[1]]},qI=t=>(...e)=>Ee.asap(()=>t(...e)),hz=Dr.hasStandardBrowserEnv?((t,e)=>i=>(i=new URL(i,Dr.origin),t.protocol===i.protocol&&t.host===i.host&&(e||t.port===i.port)))(new URL(Dr.origin),Dr.navigator&&/(msie|trident)/i.test(Dr.navigator.userAgent)):()=>!0,pz=Dr.hasStandardBrowserEnv?{write(t,e,i,s,r,n,o){if(typeof document>"u")return;const a=[`${t}=${encodeURIComponent(e)}`];Ee.isNumber(i)&&a.push(`expires=${new Date(i).toUTCString()}`),Ee.isString(s)&&a.push(`path=${s}`),Ee.isString(r)&&a.push(`domain=${r}`),n===!0&&a.push("secure"),Ee.isString(o)&&a.push(`SameSite=${o}`),document.cookie=a.join("; ")},read(t){if(typeof document>"u")return null;const e=document.cookie.match(new RegExp("(?:^|; )"+t+"=([^;]*)"));return e?decodeURIComponent(e[1]):null},remove(t){this.write(t,"",Date.now()-864e5,"/")}}:{write(){},read(){return null},remove(){}};function fz(t){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(t)}function gz(t,e){return e?t.replace(/\/?\/$/,"")+"/"+e.replace(/^\/+/,""):t}function s3(t,e,i){let s=!fz(e);return t&&(s||i==!1)?gz(t,e):e}const XI=t=>t instanceof Dn?{...t}:t;function wh(t,e){e=e||{};const i={};function s(c,u,d,h){return Ee.isPlainObject(c)&&Ee.isPlainObject(u)?Ee.merge.call({caseless:h},c,u):Ee.isPlainObject(u)?Ee.merge({},u):Ee.isArray(u)?u.slice():u}function r(c,u,d,h){if(Ee.isUndefined(u)){if(!Ee.isUndefined(c))return s(void 0,c,d,h)}else return s(c,u,d,h)}function n(c,u){if(!Ee.isUndefined(u))return s(void 0,u)}function o(c,u){if(Ee.isUndefined(u)){if(!Ee.isUndefined(c))return s(void 0,c)}else return s(void 0,u)}function a(c,u,d){if(d in e)return s(c,u);if(d in t)return s(void 0,c)}const l={url:n,method:n,data:n,baseURL:o,transformRequest:o,transformResponse:o,paramsSerializer:o,timeout:o,timeoutMessage:o,withCredentials:o,withXSRFToken:o,adapter:o,responseType:o,xsrfCookieName:o,xsrfHeaderName:o,onUploadProgress:o,onDownloadProgress:o,decompress:o,maxContentLength:o,maxBodyLength:o,beforeRedirect:o,transport:o,httpAgent:o,httpsAgent:o,cancelToken:o,socketPath:o,responseEncoding:o,validateStatus:a,headers:(c,u,d)=>r(XI(c),XI(u),d,!0)};return Ee.forEach(Object.keys({...t,...e}),function(u){const d=l[u]||r,h=d(t[u],e[u],u);Ee.isUndefined(h)&&d!==a||(i[u]=h)}),i}const r3=t=>{const e=wh({},t);let{data:i,withXSRFToken:s,xsrfHeaderName:r,xsrfCookieName:n,headers:o,auth:a}=e;if(e.headers=o=Dn.from(o),e.url=JO(s3(e.baseURL,e.url,e.allowAbsoluteUrls),t.params,t.paramsSerializer),a&&o.set("Authorization","Basic "+btoa((a.username||"")+":"+(a.password?unescape(encodeURIComponent(a.password)):""))),Ee.isFormData(i)){if(Dr.hasStandardBrowserEnv||Dr.hasStandardBrowserWebWorkerEnv)o.setContentType(void 0);else if(Ee.isFunction(i.getHeaders)){const l=i.getHeaders(),c=["content-type","content-length"];Object.entries(l).forEach(([u,d])=>{c.includes(u.toLowerCase())&&o.set(u,d)})}}if(Dr.hasStandardBrowserEnv&&(s&&Ee.isFunction(s)&&(s=s(e)),s||s!==!1&&hz(e.url))){const l=r&&n&&pz.read(n);l&&o.set(r,l)}return e},mz=typeof XMLHttpRequest<"u",vz=mz&&function(t){return new Promise(function(i,s){const r=r3(t);let n=r.data;const o=Dn.from(r.headers).normalize();let{responseType:a,onUploadProgress:l,onDownloadProgress:c}=r,u,d,h,p,f;function m(){p&&p(),f&&f(),r.cancelToken&&r.cancelToken.unsubscribe(u),r.signal&&r.signal.removeEventListener("abort",u)}let g=new XMLHttpRequest;g.open(r.method.toUpperCase(),r.url,!0),g.timeout=r.timeout;function y(){if(!g)return;const C=Dn.from("getAllResponseHeaders"in g&&g.getAllResponseHeaders()),T={data:!a||a==="text"||a==="json"?g.responseText:g.response,status:g.status,statusText:g.statusText,headers:C,config:t,request:g};i3(function(I){i(I),m()},function(I){s(I),m()},T),g=null}"onloadend"in g?g.onloadend=y:g.onreadystatechange=function(){!g||g.readyState!==4||g.status===0&&!(g.responseURL&&g.responseURL.indexOf("file:")===0)||setTimeout(y)},g.onabort=function(){g&&(s(new jt("Request aborted",jt.ECONNABORTED,t,g)),g=null)},g.onerror=function(b){const T=b&&b.message?b.message:"Network Error",A=new jt(T,jt.ERR_NETWORK,t,g);A.event=b||null,s(A),g=null},g.ontimeout=function(){let b=r.timeout?"timeout of "+r.timeout+"ms exceeded":"timeout exceeded";const T=r.transitional||QO;r.timeoutErrorMessage&&(b=r.timeoutErrorMessage),s(new jt(b,T.clarifyTimeoutError?jt.ETIMEDOUT:jt.ECONNABORTED,t,g)),g=null},n===void 0&&o.setContentType(null),"setRequestHeader"in g&&Ee.forEach(o.toJSON(),function(b,T){g.setRequestHeader(T,b)}),Ee.isUndefined(r.withCredentials)||(g.withCredentials=!!r.withCredentials),a&&a!=="json"&&(g.responseType=r.responseType),c&&([h,f]=Lw(c,!0),g.addEventListener("progress",h)),l&&g.upload&&([d,p]=Lw(l),g.upload.addEventListener("progress",d),g.upload.addEventListener("loadend",p)),(r.cancelToken||r.signal)&&(u=C=>{g&&(s(!C||C.type?new Ng(null,t,g):C),g.abort(),g=null)},r.cancelToken&&r.cancelToken.subscribe(u),r.signal&&(r.signal.aborted?u():r.signal.addEventListener("abort",u)));const v=cz(r.url);if(v&&Dr.protocols.indexOf(v)===-1){s(new jt("Unsupported protocol "+v+":",jt.ERR_BAD_REQUEST,t));return}g.send(n||null)})},yz=(t,e)=>{const{length:i}=t=t?t.filter(Boolean):[];if(e||i){let s=new AbortController,r;const n=function(c){if(!r){r=!0,a();const u=c instanceof Error?c:this.reason;s.abort(u instanceof jt?u:new Ng(u instanceof Error?u.message:u))}};let o=e&&setTimeout(()=>{o=null,n(new jt(`timeout ${e} of ms exceeded`,jt.ETIMEDOUT))},e);const a=()=>{t&&(o&&clearTimeout(o),o=null,t.forEach(c=>{c.unsubscribe?c.unsubscribe(n):c.removeEventListener("abort",n)}),t=null)};t.forEach(c=>c.addEventListener("abort",n));const{signal:l}=s;return l.unsubscribe=()=>Ee.asap(a),l}},Cz=function*(t,e){let i=t.byteLength;if(i<e){yield t;return}let s=0,r;for(;s<i;)r=s+e,yield t.slice(s,r),s=r},bz=async function*(t,e){for await(const i of wz(t))yield*Cz(i,e)},wz=async function*(t){if(t[Symbol.asyncIterator]){yield*t;return}const e=t.getReader();try{for(;;){const{done:i,value:s}=await e.read();if(i)break;yield s}}finally{await e.cancel()}},ZI=(t,e,i,s)=>{const r=bz(t,e);let n=0,o,a=l=>{o||(o=!0,s&&s(l))};return new ReadableStream({async pull(l){try{const{done:c,value:u}=await r.next();if(c){a(),l.close();return}let d=u.byteLength;if(i){let h=n+=d;i(h)}l.enqueue(new Uint8Array(u))}catch(c){throw a(c),c}},cancel(l){return a(l),r.return()}},{highWaterMark:2})},JI=64*1024,{isFunction:Z0}=Ee,Sz=(({Request:t,Response:e})=>({Request:t,Response:e}))(Ee.global),{ReadableStream:QI,TextEncoder:eF}=Ee.global,tF=(t,...e)=>{try{return!!t(...e)}catch{return!1}},xz=t=>{t=Ee.merge.call({skipUndefined:!0},Sz,t);const{fetch:e,Request:i,Response:s}=t,r=e?Z0(e):typeof fetch=="function",n=Z0(i),o=Z0(s);if(!r)return!1;const a=r&&Z0(QI),l=r&&(typeof eF=="function"?(f=>m=>f.encode(m))(new eF):async f=>new Uint8Array(await new i(f).arrayBuffer())),c=n&&a&&tF(()=>{let f=!1;const m=new i(Dr.origin,{body:new QI,method:"POST",get duplex(){return f=!0,"half"}}).headers.has("Content-Type");return f&&!m}),u=o&&a&&tF(()=>Ee.isReadableStream(new s("").body)),d={stream:u&&(f=>f.body)};r&&["text","arrayBuffer","blob","formData","stream"].forEach(f=>{!d[f]&&(d[f]=(m,g)=>{let y=m&&m[f];if(y)return y.call(m);throw new jt(`Response type '${f}' is not supported`,jt.ERR_NOT_SUPPORT,g)})});const h=async f=>{if(f==null)return 0;if(Ee.isBlob(f))return f.size;if(Ee.isSpecCompliantForm(f))return(await new i(Dr.origin,{method:"POST",body:f}).arrayBuffer()).byteLength;if(Ee.isArrayBufferView(f)||Ee.isArrayBuffer(f))return f.byteLength;if(Ee.isURLSearchParams(f)&&(f=f+""),Ee.isString(f))return(await l(f)).byteLength},p=async(f,m)=>{const g=Ee.toFiniteNumber(f.getContentLength());return g??h(m)};return async f=>{let{url:m,method:g,data:y,signal:v,cancelToken:C,timeout:b,onDownloadProgress:T,onUploadProgress:A,responseType:I,headers:D,withCredentials:F="same-origin",fetchOptions:B}=r3(f),U=e||fetch;I=I?(I+"").toLowerCase():"text";let H=yz([v,C&&C.toAbortSignal()],b),R=null;const L=H&&H.unsubscribe&&(()=>{H.unsubscribe()});let _;try{if(A&&c&&g!=="get"&&g!=="head"&&(_=await p(D,y))!==0){let O=new i(m,{method:"POST",body:y,duplex:"half"}),V;if(Ee.isFormData(y)&&(V=O.headers.get("content-type"))&&D.setContentType(V),O.body){const[Y,$]=YI(_,Lw(qI(A)));y=ZI(O.body,JI,Y,$)}}Ee.isString(F)||(F=F?"include":"omit");const w=n&&"credentials"in i.prototype,S={...B,signal:H,method:g.toUpperCase(),headers:D.normalize().toJSON(),body:y,duplex:"half",credentials:w?F:void 0};R=n&&new i(m,S);let x=await(n?U(R,B):U(m,S));const E=u&&(I==="stream"||I==="response");if(u&&(T||E&&L)){const O={};["status","statusText","headers"].forEach(J=>{O[J]=x[J]});const V=Ee.toFiniteNumber(x.headers.get("content-length")),[Y,$]=T&&YI(V,Lw(qI(T),!0))||[];x=new s(ZI(x.body,JI,Y,()=>{$&&$(),L&&L()}),O)}I=I||"text";let M=await d[Ee.findKey(d,I)||"text"](x,f);return!E&&L&&L(),await new Promise((O,V)=>{i3(O,V,{data:M,headers:Dn.from(x.headers),status:x.status,statusText:x.statusText,config:f,request:R})})}catch(w){throw L&&L(),w&&w.name==="TypeError"&&/Load failed|fetch/i.test(w.message)?Object.assign(new jt("Network Error",jt.ERR_NETWORK,f,R),{cause:w.cause||w}):jt.from(w,w&&w.code,f,R)}}},Ez=new Map,n3=t=>{let e=t&&t.env||{};const{fetch:i,Request:s,Response:r}=e,n=[s,r,i];let o=n.length,a=o,l,c,u=Ez;for(;a--;)l=n[a],c=u.get(l),c===void 0&&u.set(l,c=a?new Map:xz(e)),u=c;return c};n3();const UR={http:HW,xhr:vz,fetch:{get:n3}};Ee.forEach(UR,(t,e)=>{if(t){try{Object.defineProperty(t,"name",{value:e})}catch{}Object.defineProperty(t,"adapterName",{value:e})}});const iF=t=>`- ${t}`,Tz=t=>Ee.isFunction(t)||t===null||t===!1;function _z(t,e){t=Ee.isArray(t)?t:[t];const{length:i}=t;let s,r;const n={};for(let o=0;o<i;o++){s=t[o];let a;if(r=s,!Tz(s)&&(r=UR[(a=String(s)).toLowerCase()],r===void 0))throw new jt(`Unknown adapter '${a}'`);if(r&&(Ee.isFunction(r)||(r=r.get(e))))break;n[a||"#"+o]=r}if(!r){const o=Object.entries(n).map(([l,c])=>`adapter ${l} `+(c===!1?"is not supported by the environment":"is not available in the build"));let a=i?o.length>1?`since :
`+o.map(iF).join(`
`):" "+iF(o[0]):"as no adapter specified";throw new jt("There is no suitable adapter to dispatch the request "+a,"ERR_NOT_SUPPORT")}return r}const o3={getAdapter:_z,adapters:UR};function I1(t){if(t.cancelToken&&t.cancelToken.throwIfRequested(),t.signal&&t.signal.aborted)throw new Ng(null,t)}function sF(t){return I1(t),t.headers=Dn.from(t.headers),t.data=P1.call(t,t.transformRequest),["post","put","patch"].indexOf(t.method)!==-1&&t.headers.setContentType("application/x-www-form-urlencoded",!1),o3.getAdapter(t.adapter||yC.adapter,t)(t).then(function(s){return I1(t),s.data=P1.call(t,t.transformResponse,s),s.headers=Dn.from(s.headers),s},function(s){return t3(s)||(I1(t),s&&s.response&&(s.response.data=P1.call(t,t.transformResponse,s.response),s.response.headers=Dn.from(s.response.headers))),Promise.reject(s)})}const a3="1.13.2",QS={};["object","boolean","number","function","string","symbol"].forEach((t,e)=>{QS[t]=function(s){return typeof s===t||"a"+(e<1?"n ":" ")+t}});const rF={};QS.transitional=function(e,i,s){function r(n,o){return"[Axios v"+a3+"] Transitional option '"+n+"'"+o+(s?". "+s:"")}return(n,o,a)=>{if(e===!1)throw new jt(r(o," has been removed"+(i?" in "+i:"")),jt.ERR_DEPRECATED);return i&&!rF[o]&&(rF[o]=!0,console.warn(r(o," has been deprecated since v"+i+" and will be removed in the near future"))),e?e(n,o,a):!0}};QS.spelling=function(e){return(i,s)=>(console.warn(`${s} is likely a misspelling of ${e}`),!0)};function Az(t,e,i){if(typeof t!="object")throw new jt("options must be an object",jt.ERR_BAD_OPTION_VALUE);const s=Object.keys(t);let r=s.length;for(;r-- >0;){const n=s[r],o=e[n];if(o){const a=t[n],l=a===void 0||o(a,n,t);if(l!==!0)throw new jt("option "+n+" must be "+l,jt.ERR_BAD_OPTION_VALUE);continue}if(i!==!0)throw new jt("Unknown option "+n,jt.ERR_BAD_OPTION)}}const Vb={assertOptions:Az,validators:QS},Oa=Vb.validators;let oh=class{constructor(e){this.defaults=e||{},this.interceptors={request:new $I,response:new $I}}async request(e,i){try{return await this._request(e,i)}catch(s){if(s instanceof Error){let r={};Error.captureStackTrace?Error.captureStackTrace(r):r=new Error;const n=r.stack?r.stack.replace(/^.+\n/,""):"";try{s.stack?n&&!String(s.stack).endsWith(n.replace(/^.+\n.+\n/,""))&&(s.stack+=`
`+n):s.stack=n}catch{}}throw s}}_request(e,i){typeof e=="string"?(i=i||{},i.url=e):i=e||{},i=wh(this.defaults,i);const{transitional:s,paramsSerializer:r,headers:n}=i;s!==void 0&&Vb.assertOptions(s,{silentJSONParsing:Oa.transitional(Oa.boolean),forcedJSONParsing:Oa.transitional(Oa.boolean),clarifyTimeoutError:Oa.transitional(Oa.boolean)},!1),r!=null&&(Ee.isFunction(r)?i.paramsSerializer={serialize:r}:Vb.assertOptions(r,{encode:Oa.function,serialize:Oa.function},!0)),i.allowAbsoluteUrls!==void 0||(this.defaults.allowAbsoluteUrls!==void 0?i.allowAbsoluteUrls=this.defaults.allowAbsoluteUrls:i.allowAbsoluteUrls=!0),Vb.assertOptions(i,{baseUrl:Oa.spelling("baseURL"),withXsrfToken:Oa.spelling("withXSRFToken")},!0),i.method=(i.method||this.defaults.method||"get").toLowerCase();let o=n&&Ee.merge(n.common,n[i.method]);n&&Ee.forEach(["delete","get","head","post","put","patch","common"],f=>{delete n[f]}),i.headers=Dn.concat(o,n);const a=[];let l=!0;this.interceptors.request.forEach(function(m){typeof m.runWhen=="function"&&m.runWhen(i)===!1||(l=l&&m.synchronous,a.unshift(m.fulfilled,m.rejected))});const c=[];this.interceptors.response.forEach(function(m){c.push(m.fulfilled,m.rejected)});let u,d=0,h;if(!l){const f=[sF.bind(this),void 0];for(f.unshift(...a),f.push(...c),h=f.length,u=Promise.resolve(i);d<h;)u=u.then(f[d++],f[d++]);return u}h=a.length;let p=i;for(;d<h;){const f=a[d++],m=a[d++];try{p=f(p)}catch(g){m.call(this,g);break}}try{u=sF.call(this,p)}catch(f){return Promise.reject(f)}for(d=0,h=c.length;d<h;)u=u.then(c[d++],c[d++]);return u}getUri(e){e=wh(this.defaults,e);const i=s3(e.baseURL,e.url,e.allowAbsoluteUrls);return JO(i,e.params,e.paramsSerializer)}};Ee.forEach(["delete","get","head","options"],function(e){oh.prototype[e]=function(i,s){return this.request(wh(s||{},{method:e,url:i,data:(s||{}).data}))}});Ee.forEach(["post","put","patch"],function(e){function i(s){return function(n,o,a){return this.request(wh(a||{},{method:e,headers:s?{"Content-Type":"multipart/form-data"}:{},url:n,data:o}))}}oh.prototype[e]=i(),oh.prototype[e+"Form"]=i(!0)});let Rz=class l3{constructor(e){if(typeof e!="function")throw new TypeError("executor must be a function.");let i;this.promise=new Promise(function(n){i=n});const s=this;this.promise.then(r=>{if(!s._listeners)return;let n=s._listeners.length;for(;n-- >0;)s._listeners[n](r);s._listeners=null}),this.promise.then=r=>{let n;const o=new Promise(a=>{s.subscribe(a),n=a}).then(r);return o.cancel=function(){s.unsubscribe(n)},o},e(function(n,o,a){s.reason||(s.reason=new Ng(n,o,a),i(s.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(e){if(this.reason){e(this.reason);return}this._listeners?this._listeners.push(e):this._listeners=[e]}unsubscribe(e){if(!this._listeners)return;const i=this._listeners.indexOf(e);i!==-1&&this._listeners.splice(i,1)}toAbortSignal(){const e=new AbortController,i=s=>{e.abort(s)};return this.subscribe(i),e.signal.unsubscribe=()=>this.unsubscribe(i),e.signal}static source(){let e;return{token:new l3(function(r){e=r}),cancel:e}}};function Mz(t){return function(i){return t.apply(null,i)}}function Dz(t){return Ee.isObject(t)&&t.isAxiosError===!0}const y_={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511,WebServerIsDown:521,ConnectionTimedOut:522,OriginIsUnreachable:523,TimeoutOccurred:524,SslHandshakeFailed:525,InvalidSslCertificate:526};Object.entries(y_).forEach(([t,e])=>{y_[e]=t});function c3(t){const e=new oh(t),i=VO(oh.prototype.request,e);return Ee.extend(i,oh.prototype,e,{allOwnKeys:!0}),Ee.extend(i,e,null,{allOwnKeys:!0}),i.create=function(r){return c3(wh(t,r))},i}const Dt=c3(yC);Dt.Axios=oh;Dt.CanceledError=Ng;Dt.CancelToken=Rz;Dt.isCancel=t3;Dt.VERSION=a3;Dt.toFormData=JS;Dt.AxiosError=jt;Dt.Cancel=Dt.CanceledError;Dt.all=function(e){return Promise.all(e)};Dt.spread=Mz;Dt.isAxiosError=Dz;Dt.mergeConfig=wh;Dt.AxiosHeaders=Dn;Dt.formToJSON=t=>e3(Ee.isHTMLForm(t)?new FormData(t):t);Dt.getAdapter=o3.getAdapter;Dt.HttpStatusCode=y_;Dt.default=Dt;const{Axios:fce,AxiosError:gce,CanceledError:mce,isCancel:vce,CancelToken:yce,VERSION:Cce,all:bce,Cancel:wce,isAxiosError:Sce,spread:xce,toFormData:Ece,AxiosHeaders:Tce,HttpStatusCode:_ce,formToJSON:Ace,getAdapter:Rce,mergeConfig:Mce}=Dt;async function Pz(t,e){var i,s,r;try{console.log("[AuthService] Attempting login for:",t);const n=await Dt.post("/auth/login",{username:t,password:e});return console.log("[AuthService] Login successful"),n.data}catch(n){throw console.error("[AuthService] Login failed:",{status:(i=n.response)==null?void 0:i.status,message:((r=(s=n.response)==null?void 0:s.data)==null?void 0:r.detail)||n.message,username:t}),n}}async function Iz(t){return(await Dt.get("/auth/me",{headers:{Authorization:`Bearer ${t}`}})).data}const WR="/payroll/locked";async function Fz(t){try{return(await Dt.get(`${WR}/verify`,{headers:{Authorization:`Bearer ${t}`}})).data}catch(e){return console.error("[LockedDivisionService] Token verification failed:",e),null}}async function Lz(t,e,i=null){try{const s={div:e};return i&&(s.search=i),(await Dt.get(`${WR}/gangs`,{headers:{Authorization:`Bearer ${t}`},params:s})).data}catch(s){throw console.error("[LockedDivisionService] Failed to get locked gangs:",s),s}}async function kz(t,e,i,s){try{return(await Dt.get(`${WR}/report/raw-tree`,{headers:{Authorization:`Bearer ${t}`},params:{div:e,month:i,year:s}})).data}catch(r){throw console.error("[LockedDivisionService] Failed to get locked raw tree:",r),r}}/*! js-cookie v3.0.5 | MIT */function J0(t){for(var e=1;e<arguments.length;e++){var i=arguments[e];for(var s in i)t[s]=i[s]}return t}var Nz={read:function(t){return t[0]==='"'&&(t=t.slice(1,-1)),t.replace(/(%[\dA-F]{2})+/gi,decodeURIComponent)},write:function(t){return encodeURIComponent(t).replace(/%(2[346BF]|3[AC-F]|40|5[BDE]|60|7[BCD])/g,decodeURIComponent)}};function C_(t,e){function i(r,n,o){if(!(typeof document>"u")){o=J0({},e,o),typeof o.expires=="number"&&(o.expires=new Date(Date.now()+o.expires*864e5)),o.expires&&(o.expires=o.expires.toUTCString()),r=encodeURIComponent(r).replace(/%(2[346B]|5E|60|7C)/g,decodeURIComponent).replace(/[()]/g,escape);var a="";for(var l in o)o[l]&&(a+="; "+l,o[l]!==!0&&(a+="="+o[l].split(";")[0]));return document.cookie=r+"="+t.write(n,r)+a}}function s(r){if(!(typeof document>"u"||arguments.length&&!r)){for(var n=document.cookie?document.cookie.split("; "):[],o={},a=0;a<n.length;a++){var l=n[a].split("="),c=l.slice(1).join("=");try{var u=decodeURIComponent(l[0]);if(o[u]=t.read(c,u),r===u)break}catch{}}return r?o[r]:o}}return Object.create({set:i,get:s,remove:function(r,n){i(r,"",J0({},n,{expires:-1}))},withAttributes:function(r){return C_(this.converter,J0({},this.attributes,r))},withConverter:function(r){return C_(J0({},this.converter,r),this.attributes)}},{attributes:{value:Object.freeze(e)},converter:{value:Object.freeze(t)}})}var Kc=C_(Nz,{path:"/"});const Q0="payroll_auth_token",eb="payroll_user_info",tb="payroll_remember_me",nF={expires:30,secure:!0,sameSite:"strict",path:"/"},zr={saveToken:(t,e=!1)=>{try{const i={...nF};e?i.expires=30:i.expires=7,Kc.set(Q0,t,i),localStorage.setItem(tb,e),console.log("[CookieService] Token saved successfully with",i.expires,"days expiration")}catch(i){console.error("[CookieService] Failed to save token:",i)}},getToken:()=>{try{return Kc.get(Q0)}catch(t){return console.error("[CookieService] Failed to get token:",t),null}},saveUser:t=>{var e;try{const i=JSON.stringify(t);Kc.set(eb,i,nF),console.log("[CookieService] User info saved successfully:",{username:t.username,divisions:(e=t.divisions)==null?void 0:e.length})}catch(i){console.error("[CookieService] Failed to save user:",i)}},getUser:()=>{try{const t=Kc.get(eb);return t?JSON.parse(t):null}catch(t){return console.error("[CookieService] Failed to get user:",t),null}},saveRememberMe:t=>{try{localStorage.setItem(tb,t),t||(zr.clearToken(),zr.clearUser())}catch(e){console.error("[CookieService] Failed to save remember me:",e)}},getRememberMe:()=>{try{return localStorage.getItem(tb)==="true"}catch(t){return console.error("[CookieService] Failed to get remember me:",t),!1}},clearAuth:()=>{try{Kc.remove(Q0,{path:"/"}),Kc.remove(eb,{path:"/"}),localStorage.removeItem(tb),console.log("[CookieService] Authentication data cleared")}catch(t){console.error("[CookieService] Failed to clear auth data:",t)}},clearToken:()=>{try{Kc.remove(Q0,{path:"/"})}catch(t){console.error("[CookieService] Failed to clear token:",t)}},clearUser:()=>{try{Kc.remove(eb,{path:"/"})}catch(t){console.error("[CookieService] Failed to clear user:",t)}},isLoggedIn:()=>{const t=zr.getToken(),e=zr.getUser();return!!(t&&e)},getAuthHeader:()=>{const t=zr.getToken();return t?{Authorization:`Bearer ${t}`}:{}},EXTERNAL_TOKEN_KEY:"auth-token",getExternalToken:()=>{try{return localStorage.getItem("auth-token")}catch(t){return console.error("[CookieService] Failed to get external token:",t),null}},hasExternalToken:()=>{try{const t=localStorage.getItem("auth-token");return!!(t&&t.length>0)}catch(t){return console.error("[CookieService] Failed to check external token:",t),!1}},getExternalUser:()=>{try{const t=localStorage.getItem("user");return t?JSON.parse(t):null}catch(t){return console.error("[CookieService] Failed to get external user:",t),null}},getExternalAuthHeader:()=>{try{const t=localStorage.getItem("auth-token");return t?{Authorization:`Bearer ${t}`}:{}}catch(t){return console.error("[CookieService] Failed to get external auth header:",t),{}}}},u3={AUTH_TOKEN:"auth-token",USER:"user",DISABLE_CACHE:"disable-cache",REMEMBER_ME:"payroll_remember_me"},mu=()=>window.location.port==="3001",Oz=()=>mu()||window.location.pathname.startsWith("/upah")?"/upah":"",Gz=t=>{const e=Oz(),i=t.startsWith("/")?t:`/${t}`;return`${e}${i}`},Bz=()=>`${window.location.origin}/login`,d3=()=>{try{return localStorage.getItem(u3.AUTH_TOKEN)}catch(t){return console.error("[ProdMode] Failed to get auth token:",t),null}},Vz=()=>{const t=d3();return!!(t&&t.length>0)},h3=()=>{try{const t=localStorage.getItem(u3.USER);return t?JSON.parse(t):null}catch(t){return console.error("[ProdMode] Failed to get user data:",t),null}},kw=()=>{try{const t=h3();if(!t)return null;if(t.divisi)return t.divisi;if(t.divisions&&t.divisions.length>0)return t.divisions[0];if(t.name){const e=[/\b(PGE?\s*\d+[A-Z]?)\b/i,/\b(DIV\s*\d+[A-Z]?)\b/i,/\b([A-Z]{2,3}\s*\d+[A-Z]?)\b/i];for(const i of e){const s=t.name.match(i);if(s)return s[1].toUpperCase().replace(/\s+/g," ")}}return null}catch(t){return console.error("[ProdMode] Failed to extract user division:",t),null}},Hz=()=>{const t=Bz();console.log("[ProdMode] Redirecting to external login:",t),window.location.href=t},p3=_e.createContext(null);function jz({children:t}){const[e,i]=_e.useState(""),[s,r]=_e.useState(null),[n,o]=_e.useState(!0),[a,l]=_e.useState(""),[c,u]=_e.useState(!1),[d,h]=_e.useState(!1),[p,f]=_e.useState(null),m=async()=>{var C;try{o(!0);const b=mu();if(console.log(`[AuthContext] Checking for authentication... (Prod Mode: ${b})`),b){if(console.log("[AuthContext] Production mode detected, using localStorage auth"),Vz()){const I=d3(),D=h3(),F=kw(),B=((D==null?void 0:D.role)||"").toUpperCase(),U=((D==null?void 0:D.divisi)||"").toUpperCase(),H=B==="ADMIN"||U==="ALL";return console.log("[AuthContext] Prod mode auth data:",{hasToken:!!I,hasUser:!!D,division:F,role:B,divisi:U,isAdmin:H}),i(I),r({...D,divisi:H?null:F,divisions:H?[]:F?[F]:[],isExternal:!0,isProdMode:!0,isAdmin:H}),h(!0),f(H?null:F),Dt.defaults.headers.common.Authorization=`Bearer ${I}`,o(!1),!0}return console.log("[AuthContext] Prod mode: No auth token found in localStorage"),i(""),r(null),h(!1),f(null),o(!1),!1}if(zr.hasExternalToken()){console.log("[AuthContext] Found external token in localStorage, verifying...");const I=zr.getExternalToken();try{const D=await Fz(I);if(D&&D.valid){console.log("[AuthContext] External token verified successfully");const F=zr.getExternalUser();return i(I),r({...F,username:D.username,role:D.role||(F==null?void 0:F.role)||"user",divisions:D.divisions||[D.division].filter(Boolean),divisi:D.division||(F==null?void 0:F.divisi)||((C=F==null?void 0:F.divisions)==null?void 0:C[0]),isExternal:!0}),h(!0),f(D.division||null),Dt.defaults.headers.common.Authorization=`Bearer ${I}`,o(!1),!0}else throw console.warn("[AuthContext] Token verification returned invalid status"),new Error("Invalid token status")}catch(D){return console.error("[AuthContext] External token verification failed:",D),i(""),r(null),h(!1),f(null),o(!1),!1}}console.log("[AuthContext] Checking for saved authentication in cookies");const T=zr.getToken(),A=zr.getUser();return T&&A?(console.log("[AuthContext] Restoring authentication from cookies"),i(T),r(A),h(!1),f(null),Dt.defaults.headers.common.Authorization=`Bearer ${T}`,o(!1),!0):(console.log("[AuthContext] No saved authentication found"),i(""),r(null),h(!1),f(null),o(!1),!1)}catch(b){return console.error("[AuthContext] Error checking authentication:",b),o(!1),!1}};_e.useEffect(()=>{m()},[]),_e.useEffect(()=>{const C=Dt.interceptors.response.use(b=>b,b=>{var T;if(((T=b.response)==null?void 0:T.status)===401){if(console.warn("[AuthContext] 401 Unauthorized detected"),mu())return console.warn("[AuthContext] Prod mode: 401 error - redirecting to login"),l("Sesi expired. Mengalihkan ke halaman login..."),i(""),r(null),setTimeout(()=>{window.location.href="/login"},1500),Promise.reject(b);console.warn("[AuthContext] Dev mode: Redirecting to login due to 401");try{zr.clearAuth(),delete Dt.defaults.headers.common.Authorization}catch(A){console.error("[AuthContext] Error clearing auth on 401:",A)}i(""),r(null),l("Session expired. Mengalihkan ke halaman login..."),setTimeout(()=>{window.location.href="/login"},1500)}return Promise.reject(b)});return()=>{Dt.interceptors.response.eject(C)}},[]);async function g(C,b,T=!0){if(c)return console.log("[Auth] Login already in progress, skipping duplicate request"),!1;o(!0),u(!0),l(""),console.log("[Auth] Starting login process for username:",C);try{const A=await Pz(C,b),I=A==null?void 0:A.access_token;let D=A==null?void 0:A.user;if(console.log("[Auth] Login API response received"),!D&&I)try{console.log("[Auth] Fetching user details with token"),D=await Iz(I)}catch(F){console.error("[Auth] Failed to fetch user details:",F)}if(I&&D){console.log("[Auth] Login successful, setting authentication state"),i(I),r(D);try{zr.saveToken(I,T),zr.saveUser(D),zr.saveRememberMe(T),Dt.defaults.headers.common.Authorization=`Bearer ${I}`,console.log("[Auth] Authentication saved to cookies successfully (rememberMe:",T,")")}catch(F){console.error("[Auth] Failed to save authentication to cookies:",F)}return!0}throw new Error("Missing token or user")}catch(A){return console.error("[Auth] Login failed:",A.message),l("Login failed"),!1}finally{o(!1),u(!1)}}const y=()=>{if(mu()){console.log("[Auth] Prod mode: Clearing in-memory auth state and redirecting to /login"),delete Dt.defaults.headers.common.Authorization,i(""),r(null),window.location.href=window.location.origin+"/login";return}try{zr.clearAuth(),delete Dt.defaults.headers.common.Authorization,console.log("[Auth] Logged out successfully, authentication data cleared")}catch(C){console.error("[Auth] Error during logout:",C);try{document.cookie="auth_token=; Max-Age=0; path=/",document.cookie="payroll_user_info=; Max-Age=0; path=/",localStorage.removeItem("payroll_remember_me")}catch{}}i(""),r(null)},v=!!e;return k.jsx(p3.Provider,{value:{token:e,isAuthenticated:v,user:s,login:g,logout:y,loading:n,error:a,checkAuth:m,isExternalAuth:d,lockedDivision:p},children:t})}function wc(){return _e.useContext(p3)}async function Uz(t,e=null,i=null,s=!1,r=null){const n={};e&&(n.division=e),i&&(n.search=i),s&&(n.force=s);const o=t?{Authorization:`Bearer ${t}`}:void 0;return r?(await Dt.get("/payroll/gangs/by-loc",{headers:o,params:{loc_code:r,force:s}})).data:(await Dt.get("/payroll/gangs",{headers:o,params:n})).data}async function Wz(t){return(await Dt.get("/payroll/divisions",{headers:t?{Authorization:`Bearer ${t}`}:void 0})).data}const Mf={calculateEmployeeFields:(t,e={})=>{var f;const i=m=>Number(m)||0;t.premi&&typeof t.premi=="object"&&Object.entries(t.premi).forEach(([m,g])=>{const y=m.startsWith("premi_")?m:`premi_${m}`;t[y]=i(g),t[m]=i(g)}),t.potongan_upah_kotor&&typeof t.potongan_upah_kotor=="object"&&(t.potongan_upah_kotor.dynamic&&typeof t.potongan_upah_kotor.dynamic=="object"&&Object.assign(t,t.potongan_upah_kotor.dynamic),Object.entries(t.potongan_upah_kotor).forEach(([m,g])=>{m!=="dynamic"&&typeof g!="object"&&m==="koreksi"&&(!t.pot_koreksi||t.pot_koreksi===0)&&(t.pot_koreksi=i(g))}),t.pot_koreksi>0&&console.log(`[KOREKSI DEBUG] ${t.nik}: pot_koreksi=${t.pot_koreksi}, nested.koreksi=${(f=t.potongan_upah_kotor)==null?void 0:f.koreksi}`)),t.potongan_upah_bersih&&typeof t.potongan_upah_bersih=="object"&&t.potongan_upah_bersih.dynamic&&typeof t.potongan_upah_bersih.dynamic=="object"&&Object.assign(t,t.potongan_upah_bersih.dynamic),e&&Object.keys(e).length>0&&Object.entries(e).forEach(([m,g])=>{if(!t[g]){const y=t[m]||t[m.toUpperCase()];y!==void 0&&(t[g]=i(y))}});const s=i(t.pot_bpjs_kesehatan_pekerja),r=i(t.pot_bpjs_kesehatan_majikan),n=i(t.pot_bpjs_pensiun_pekerja),o=i(t.pot_bpjs_pensiun_majikan);t.pot_bpjs_pekerja_total=s+n,t.pot_bpjs_kesehatan_total=s+r,t.pot_bpjs_pensiun_total=n+o;const a=i(t.pot_bpjs_maj)||r+o;t.pot_bpjs_jumlah=t.pot_bpjs_pekerja_total+a,t.pot_total_4=i(t.pot_pph21)+i(t.pot_kontan)+i(t.pot_thr)+i(t.pot_pinjam)+i(t.pot_kl)+i(t.pot_tiket)+i(t.pot_alat)+i(t.pot_spsi)+i(t.pot_koreksi)+t.pot_bpjs_pekerja_total+i(t.pot_astek);const l=i(t.total_tunjangan),c=i(t.total_premi);let u=i(t.potongan_upah_kotor_total);const d=i(t.jumlah_upah_kotor);let h=i(t.total_potongan);const p=i(t.upah_bersih);return{...t,total_tunjangan:l,total_premi:c,potongan_upah_kotor_total:u,jumlah_upah_kotor:d,upah_kotor_premi:d,total_potongan:h,upah_bersih:p}},flattenData:(t,e={},i=!0)=>{if(!t||!t.gangs)return[];const s=[];return t.gangs.forEach(r=>{r.employees&&Array.isArray(r.employees)&&r.employees.forEach(n=>{const a={...Mf.calculateEmployeeFields(n,e),gang_code:r.gang_code};s.push(a)})}),i?s.filter(r=>(r.jumlah_hk||0)>0):s},calculateGangTotals:(t,e)=>{const i=e.filter(s=>s.gang_code===t);return Mf._sumRows(i)},calculateGrandTotal:t=>Mf._sumRows(t),_sumRows:t=>{if(!t||t.length===0)return{};const e=new Set;t.forEach(r=>{r.isTotal||r.isHeader||r.isGrandTotal||r.isDivisionTotal||r.nama&&(String(r.nama).startsWith("TOTAL")||String(r.nama).startsWith("GRAND TOTAL"))||Object.keys(r).forEach(n=>{const o=r[n];(typeof o=="number"||!isNaN(parseFloat(o))&&isFinite(o))&&!["nik","no","id","year","month"].includes(n.toLowerCase())&&!n.toLowerCase().includes("code")&&!n.toLowerCase().includes("name")&&!n.toLowerCase().includes("phone")&&e.add(n)})});const i=Array.from(e),s={};return i.forEach(r=>s[r]=0),t.forEach(r=>{r.isTotal||r.isHeader||r.isGrandTotal||r.isDivisionTotal||r.nama&&(String(r.nama).startsWith("TOTAL")||String(r.nama).startsWith("GRAND TOTAL"))||i.forEach(n=>{const o=parseFloat(r[n])||0;s[n]+=o})}),s}};function ib(t){throw new Error('Could not dynamically require "'+t+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var f3={exports:{}};/*! ExcelJS 19-10-2023 */(function(t,e){(function(i){t.exports=i()})(function(){return function i(s,r,n){function o(c,u){if(!r[c]){if(!s[c]){var d=typeof ib=="function"&&ib;if(!u&&d)return d(c,!0);if(a)return a(c,!0);var h=new Error("Cannot find module '"+c+"'");throw h.code="MODULE_NOT_FOUND",h}var p=r[c]={exports:{}};s[c][0].call(p.exports,function(f){return o(s[c][1][f]||f)},p,p.exports,i,s,r,n)}return r[c].exports}for(var a=typeof ib=="function"&&ib,l=0;l<n.length;l++)o(n[l]);return o}({1:[function(i,s,r){const n=i("fs"),o=i("fast-csv"),a=i("dayjs/plugin/customParseFormat"),l=i("dayjs/plugin/utc"),c=i("dayjs").extend(a).extend(l),u=i("../utils/stream-buf"),{fs:{exists:d}}=i("../utils/utils"),h={true:!0,false:!1,"#N/A":{error:"#N/A"},"#REF!":{error:"#REF!"},"#NAME?":{error:"#NAME?"},"#DIV/0!":{error:"#DIV/0!"},"#NULL!":{error:"#NULL!"},"#VALUE!":{error:"#VALUE!"},"#NUM!":{error:"#NUM!"}};s.exports=class{constructor(p){this.workbook=p,this.worksheet=null}async readFile(p,f){if(f=f||{},!await d(p))throw new Error("File not found: "+p);const m=n.createReadStream(p),g=await this.read(m,f);return m.close(),g}read(p,f){return f=f||{},new Promise((m,g)=>{const y=this.workbook.addWorksheet(f.sheetName),v=f.dateFormats||["YYYY-MM-DD[T]HH:mm:ssZ","YYYY-MM-DD[T]HH:mm:ss","MM-DD-YYYY","YYYY-MM-DD"],C=f.map||function(T){if(T==="")return null;const A=Number(T);if(!Number.isNaN(A)&&A!==1/0)return A;const I=v.reduce((F,B)=>{if(F)return F;const U=c(T,B,!0);return U.isValid()?U:null},null);if(I)return new Date(I.valueOf());const D=h[T];return D!==void 0?D:T},b=o.parse(f.parserOptions).on("data",T=>{y.addRow(T.map(C))}).on("end",()=>{b.emit("worksheet",y)});b.on("worksheet",m).on("error",g),p.pipe(b)})}createInputStream(){throw new Error("`CSV#createInputStream` is deprecated. You should use `CSV#read` instead. This method will be removed in version 5.0. Please follow upgrade instruction: https://github.com/exceljs/exceljs/blob/master/UPGRADE-4.0.md")}write(p,f){return new Promise((m,g)=>{f=f||{};const y=this.workbook.getWorksheet(f.sheetName||f.sheetId),v=o.format(f.formatterOptions);p.on("finish",()=>{m()}),v.on("error",g),v.pipe(p);const{dateFormat:C,dateUTC:b}=f,T=f.map||(D=>{if(D){if(D.text||D.hyperlink)return D.hyperlink||D.text||"";if(D.formula||D.result)return D.result||"";if(D instanceof Date)return C?b?c.utc(D).format(C):c(D).format(C):b?c.utc(D).format():c(D).format();if(D.error)return D.error;if(typeof D=="object")return JSON.stringify(D)}return D}),A=f.includeEmptyRows===void 0||f.includeEmptyRows;let I=1;y&&y.eachRow((D,F)=>{if(A)for(;I++<F-1;)v.write([]);const{values:B}=D;B.shift(),v.write(B.map(T)),I=F}),v.end()})}writeFile(p,f){const m={encoding:(f=f||{}).encoding||"utf8"},g=n.createWriteStream(p,m);return this.write(g,f)}async writeBuffer(p){const f=new u;return await this.write(f,p),f.read()}}},{"../utils/stream-buf":24,"../utils/utils":27,dayjs:391,"dayjs/plugin/customParseFormat":392,"dayjs/plugin/utc":393,"fast-csv":424,fs:216}],2:[function(i,s,r){const n=i("../utils/col-cache");class o{constructor(l,c){let u=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0;if(this.worksheet=l,c)if(typeof c=="string"){const d=n.decodeAddress(c);this.nativeCol=d.col+u,this.nativeColOff=0,this.nativeRow=d.row+u,this.nativeRowOff=0}else c.nativeCol!==void 0?(this.nativeCol=c.nativeCol||0,this.nativeColOff=c.nativeColOff||0,this.nativeRow=c.nativeRow||0,this.nativeRowOff=c.nativeRowOff||0):c.col!==void 0?(this.col=c.col+u,this.row=c.row+u):(this.nativeCol=0,this.nativeColOff=0,this.nativeRow=0,this.nativeRowOff=0);else this.nativeCol=0,this.nativeColOff=0,this.nativeRow=0,this.nativeRowOff=0}static asInstance(l){return l instanceof o||l==null?l:new o(l)}get col(){return this.nativeCol+Math.min(this.colWidth-1,this.nativeColOff)/this.colWidth}set col(l){this.nativeCol=Math.floor(l),this.nativeColOff=Math.floor((l-this.nativeCol)*this.colWidth)}get row(){return this.nativeRow+Math.min(this.rowHeight-1,this.nativeRowOff)/this.rowHeight}set row(l){this.nativeRow=Math.floor(l),this.nativeRowOff=Math.floor((l-this.nativeRow)*this.rowHeight)}get colWidth(){return this.worksheet&&this.worksheet.getColumn(this.nativeCol+1)&&this.worksheet.getColumn(this.nativeCol+1).isCustomWidth?Math.floor(1e4*this.worksheet.getColumn(this.nativeCol+1).width):64e4}get rowHeight(){return this.worksheet&&this.worksheet.getRow(this.nativeRow+1)&&this.worksheet.getRow(this.nativeRow+1).height?Math.floor(1e4*this.worksheet.getRow(this.nativeRow+1).height):18e4}get model(){return{nativeCol:this.nativeCol,nativeColOff:this.nativeColOff,nativeRow:this.nativeRow,nativeRowOff:this.nativeRowOff}}set model(l){this.nativeCol=l.nativeCol,this.nativeColOff=l.nativeColOff,this.nativeRow=l.nativeRow,this.nativeRowOff=l.nativeRowOff}}s.exports=o},{"../utils/col-cache":19}],3:[function(i,s,r){const n=i("../utils/col-cache"),o=i("../utils/under-dash"),a=i("./enums"),{slideFormula:l}=i("../utils/shared-formula"),c=i("./note");class u{constructor(p,f,m){if(!p||!f)throw new Error("A Cell needs a Row");this._row=p,this._column=f,n.validateAddress(m),this._address=m,this._value=d.create(u.Types.Null,this),this.style=this._mergeStyle(p.style,f.style,{}),this._mergeCount=0}get worksheet(){return this._row.worksheet}get workbook(){return this._row.worksheet.workbook}destroy(){delete this.style,delete this._value,delete this._row,delete this._column,delete this._address}get numFmt(){return this.style.numFmt}set numFmt(p){this.style.numFmt=p}get font(){return this.style.font}set font(p){this.style.font=p}get alignment(){return this.style.alignment}set alignment(p){this.style.alignment=p}get border(){return this.style.border}set border(p){this.style.border=p}get fill(){return this.style.fill}set fill(p){this.style.fill=p}get protection(){return this.style.protection}set protection(p){this.style.protection=p}_mergeStyle(p,f,m){const g=p&&p.numFmt||f&&f.numFmt;g&&(m.numFmt=g);const y=p&&p.font||f&&f.font;y&&(m.font=y);const v=p&&p.alignment||f&&f.alignment;v&&(m.alignment=v);const C=p&&p.border||f&&f.border;C&&(m.border=C);const b=p&&p.fill||f&&f.fill;b&&(m.fill=b);const T=p&&p.protection||f&&f.protection;return T&&(m.protection=T),m}get address(){return this._address}get row(){return this._row.number}get col(){return this._column.number}get $col$row(){return`$${this._column.letter}$${this.row}`}get type(){return this._value.type}get effectiveType(){return this._value.effectiveType}toCsvString(){return this._value.toCsvString()}addMergeRef(){this._mergeCount++}releaseMergeRef(){this._mergeCount--}get isMerged(){return this._mergeCount>0||this.type===u.Types.Merge}merge(p,f){this._value.release(),this._value=d.create(u.Types.Merge,this,p),f||(this.style=p.style)}unmerge(){this.type===u.Types.Merge&&(this._value.release(),this._value=d.create(u.Types.Null,this),this.style=this._mergeStyle(this._row.style,this._column.style,{}))}isMergedTo(p){return this._value.type===u.Types.Merge&&this._value.isMergedTo(p)}get master(){return this.type===u.Types.Merge?this._value.master:this}get isHyperlink(){return this._value.type===u.Types.Hyperlink}get hyperlink(){return this._value.hyperlink}get value(){return this._value.value}set value(p){this.type!==u.Types.Merge?(this._value.release(),this._value=d.create(d.getType(p),this,p)):this._value.master.value=p}get note(){return this._comment&&this._comment.note}set note(p){this._comment=new c(p)}get text(){return this._value.toString()}get html(){return o.escapeHtml(this.text)}toString(){return this.text}_upgradeToHyperlink(p){this.type===u.Types.String&&(this._value=d.create(u.Types.Hyperlink,this,{text:this._value.value,hyperlink:p}))}get formula(){return this._value.formula}get result(){return this._value.result}get formulaType(){return this._value.formulaType}get fullAddress(){const{worksheet:p}=this._row;return{sheetName:p.name,address:this.address,row:this.row,col:this.col}}get name(){return this.names[0]}set name(p){this.names=[p]}get names(){return this.workbook.definedNames.getNamesEx(this.fullAddress)}set names(p){const{definedNames:f}=this.workbook;f.removeAllNames(this.fullAddress),p.forEach(m=>{f.addEx(this.fullAddress,m)})}addName(p){this.workbook.definedNames.addEx(this.fullAddress,p)}removeName(p){this.workbook.definedNames.removeEx(this.fullAddress,p)}removeAllNames(){this.workbook.definedNames.removeAllNames(this.fullAddress)}get _dataValidations(){return this.worksheet.dataValidations}get dataValidation(){return this._dataValidations.find(this.address)}set dataValidation(p){this._dataValidations.add(this.address,p)}get model(){const{model:p}=this._value;return p.style=this.style,this._comment&&(p.comment=this._comment.model),p}set model(p){if(this._value.release(),this._value=d.create(p.type,this),this._value.model=p,p.comment)switch(p.comment.type){case"note":this._comment=c.fromModel(p.comment)}p.style?this.style=p.style:this.style={}}}u.Types=a.ValueType;const d={getType:h=>h==null?u.Types.Null:h instanceof String||typeof h=="string"?u.Types.String:typeof h=="number"?u.Types.Number:typeof h=="boolean"?u.Types.Boolean:h instanceof Date?u.Types.Date:h.text&&h.hyperlink?u.Types.Hyperlink:h.formula||h.sharedFormula?u.Types.Formula:h.richText?u.Types.RichText:h.sharedString?u.Types.SharedString:h.error?u.Types.Error:u.Types.JSON,types:[{t:u.Types.Null,f:class{constructor(h){this.model={address:h.address,type:u.Types.Null}}get value(){return null}set value(h){}get type(){return u.Types.Null}get effectiveType(){return u.Types.Null}get address(){return this.model.address}set address(h){this.model.address=h}toCsvString(){return""}release(){}toString(){return""}}},{t:u.Types.Number,f:class{constructor(h,p){this.model={address:h.address,type:u.Types.Number,value:p}}get value(){return this.model.value}set value(h){this.model.value=h}get type(){return u.Types.Number}get effectiveType(){return u.Types.Number}get address(){return this.model.address}set address(h){this.model.address=h}toCsvString(){return this.model.value.toString()}release(){}toString(){return this.model.value.toString()}}},{t:u.Types.String,f:class{constructor(h,p){this.model={address:h.address,type:u.Types.String,value:p}}get value(){return this.model.value}set value(h){this.model.value=h}get type(){return u.Types.String}get effectiveType(){return u.Types.String}get address(){return this.model.address}set address(h){this.model.address=h}toCsvString(){return`"${this.model.value.replace(/"/g,'""')}"`}release(){}toString(){return this.model.value}}},{t:u.Types.Date,f:class{constructor(h,p){this.model={address:h.address,type:u.Types.Date,value:p}}get value(){return this.model.value}set value(h){this.model.value=h}get type(){return u.Types.Date}get effectiveType(){return u.Types.Date}get address(){return this.model.address}set address(h){this.model.address=h}toCsvString(){return this.model.value.toISOString()}release(){}toString(){return this.model.value.toString()}}},{t:u.Types.Hyperlink,f:class{constructor(h,p){this.model={address:h.address,type:u.Types.Hyperlink,text:p?p.text:void 0,hyperlink:p?p.hyperlink:void 0},p&&p.tooltip&&(this.model.tooltip=p.tooltip)}get value(){const h={text:this.model.text,hyperlink:this.model.hyperlink};return this.model.tooltip&&(h.tooltip=this.model.tooltip),h}set value(h){this.model={text:h.text,hyperlink:h.hyperlink},h.tooltip&&(this.model.tooltip=h.tooltip)}get text(){return this.model.text}set text(h){this.model.text=h}get hyperlink(){return this.model.hyperlink}set hyperlink(h){this.model.hyperlink=h}get type(){return u.Types.Hyperlink}get effectiveType(){return u.Types.Hyperlink}get address(){return this.model.address}set address(h){this.model.address=h}toCsvString(){return this.model.hyperlink}release(){}toString(){return this.model.text}}},{t:u.Types.Formula,f:class{constructor(h,p){this.cell=h,this.model={address:h.address,type:u.Types.Formula,shareType:p?p.shareType:void 0,ref:p?p.ref:void 0,formula:p?p.formula:void 0,sharedFormula:p?p.sharedFormula:void 0,result:p?p.result:void 0}}_copyModel(h){const p={},f=m=>{const g=h[m];g&&(p[m]=g)};return f("formula"),f("result"),f("ref"),f("shareType"),f("sharedFormula"),p}get value(){return this._copyModel(this.model)}set value(h){this.model=this._copyModel(h)}validate(h){switch(d.getType(h)){case u.Types.Null:case u.Types.String:case u.Types.Number:case u.Types.Date:break;case u.Types.Hyperlink:case u.Types.Formula:default:throw new Error("Cannot process that type of result value")}}get dependencies(){return{ranges:this.formula.match(/([a-zA-Z0-9]+!)?[A-Z]{1,3}\d{1,4}:[A-Z]{1,3}\d{1,4}/g),cells:this.formula.replace(/([a-zA-Z0-9]+!)?[A-Z]{1,3}\d{1,4}:[A-Z]{1,3}\d{1,4}/g,"").match(/([a-zA-Z0-9]+!)?[A-Z]{1,3}\d{1,4}/g)}}get formula(){return this.model.formula||this._getTranslatedFormula()}set formula(h){this.model.formula=h}get formulaType(){return this.model.formula?a.FormulaType.Master:this.model.sharedFormula?a.FormulaType.Shared:a.FormulaType.None}get result(){return this.model.result}set result(h){this.model.result=h}get type(){return u.Types.Formula}get effectiveType(){const h=this.model.result;return h==null?a.ValueType.Null:h instanceof String||typeof h=="string"?a.ValueType.String:typeof h=="number"?a.ValueType.Number:h instanceof Date?a.ValueType.Date:h.text&&h.hyperlink?a.ValueType.Hyperlink:h.formula?a.ValueType.Formula:a.ValueType.Null}get address(){return this.model.address}set address(h){this.model.address=h}_getTranslatedFormula(){if(!this._translatedFormula&&this.model.sharedFormula){const{worksheet:h}=this.cell,p=h.findCell(this.model.sharedFormula);this._translatedFormula=p&&l(p.formula,p.address,this.model.address)}return this._translatedFormula}toCsvString(){return""+(this.model.result||"")}release(){}toString(){return this.model.result?this.model.result.toString():""}}},{t:u.Types.Merge,f:class{constructor(h,p){this.model={address:h.address,type:u.Types.Merge,master:p?p.address:void 0},this._master=p,p&&p.addMergeRef()}get value(){return this._master.value}set value(h){h instanceof u?(this._master&&this._master.releaseMergeRef(),h.addMergeRef(),this._master=h):this._master.value=h}isMergedTo(h){return h===this._master}get master(){return this._master}get type(){return u.Types.Merge}get effectiveType(){return this._master.effectiveType}get address(){return this.model.address}set address(h){this.model.address=h}toCsvString(){return""}release(){this._master.releaseMergeRef()}toString(){return this.value.toString()}}},{t:u.Types.JSON,f:class{constructor(h,p){this.model={address:h.address,type:u.Types.String,value:JSON.stringify(p),rawValue:p}}get value(){return this.model.rawValue}set value(h){this.model.rawValue=h,this.model.value=JSON.stringify(h)}get type(){return u.Types.String}get effectiveType(){return u.Types.String}get address(){return this.model.address}set address(h){this.model.address=h}toCsvString(){return this.model.value}release(){}toString(){return this.model.value}}},{t:u.Types.SharedString,f:class{constructor(h,p){this.model={address:h.address,type:u.Types.SharedString,value:p}}get value(){return this.model.value}set value(h){this.model.value=h}get type(){return u.Types.SharedString}get effectiveType(){return u.Types.SharedString}get address(){return this.model.address}set address(h){this.model.address=h}toCsvString(){return this.model.value.toString()}release(){}toString(){return this.model.value.toString()}}},{t:u.Types.RichText,f:class{constructor(h,p){this.model={address:h.address,type:u.Types.String,value:p}}get value(){return this.model.value}set value(h){this.model.value=h}toString(){return this.model.value.richText.map(h=>h.text).join("")}get type(){return u.Types.RichText}get effectiveType(){return u.Types.RichText}get address(){return this.model.address}set address(h){this.model.address=h}toCsvString(){return`"${this.text.replace(/"/g,'""')}"`}release(){}}},{t:u.Types.Boolean,f:class{constructor(h,p){this.model={address:h.address,type:u.Types.Boolean,value:p}}get value(){return this.model.value}set value(h){this.model.value=h}get type(){return u.Types.Boolean}get effectiveType(){return u.Types.Boolean}get address(){return this.model.address}set address(h){this.model.address=h}toCsvString(){return this.model.value?1:0}release(){}toString(){return this.model.value.toString()}}},{t:u.Types.Error,f:class{constructor(h,p){this.model={address:h.address,type:u.Types.Error,value:p}}get value(){return this.model.value}set value(h){this.model.value=h}get type(){return u.Types.Error}get effectiveType(){return u.Types.Error}get address(){return this.model.address}set address(h){this.model.address=h}toCsvString(){return this.toString()}release(){}toString(){return this.model.value.error.toString()}}}].reduce((h,p)=>(h[p.t]=p.f,h),[]),create(h,p,f){const m=this.types[h];if(!m)throw new Error("Could not create Value of type "+h);return new m(p,f)}};s.exports=u},{"../utils/col-cache":19,"../utils/shared-formula":23,"../utils/under-dash":26,"./enums":7,"./note":9}],4:[function(i,s,r){const n=i("../utils/under-dash"),o=i("./enums"),a=i("../utils/col-cache");class l{constructor(u,d,h){this._worksheet=u,this._number=d,h!==!1&&(this.defn=h)}get number(){return this._number}get worksheet(){return this._worksheet}get letter(){return a.n2l(this._number)}get isCustomWidth(){return this.width!==void 0&&this.width!==9}get defn(){return{header:this._header,key:this.key,width:this.width,style:this.style,hidden:this.hidden,outlineLevel:this.outlineLevel}}set defn(u){u?(this.key=u.key,this.width=u.width!==void 0?u.width:9,this.outlineLevel=u.outlineLevel,u.style?this.style=u.style:this.style={},this.header=u.header,this._hidden=!!u.hidden):(delete this._header,delete this._key,delete this.width,this.style={},this.outlineLevel=0)}get headers(){return this._header&&this._header instanceof Array?this._header:[this._header]}get header(){return this._header}set header(u){u!==void 0?(this._header=u,this.headers.forEach((d,h)=>{this._worksheet.getCell(h+1,this.number).value=d})):this._header=void 0}get key(){return this._key}set key(u){(this._key&&this._worksheet.getColumnKey(this._key))===this&&this._worksheet.deleteColumnKey(this._key),this._key=u,u&&this._worksheet.setColumnKey(this._key,this)}get hidden(){return!!this._hidden}set hidden(u){this._hidden=u}get outlineLevel(){return this._outlineLevel||0}set outlineLevel(u){this._outlineLevel=u}get collapsed(){return!!(this._outlineLevel&&this._outlineLevel>=this._worksheet.properties.outlineLevelCol)}toString(){return JSON.stringify({key:this.key,width:this.width,headers:this.headers.length?this.headers:void 0})}equivalentTo(u){return this.width===u.width&&this.hidden===u.hidden&&this.outlineLevel===u.outlineLevel&&n.isEqual(this.style,u.style)}get isDefault(){if(this.isCustomWidth||this.hidden||this.outlineLevel)return!1;const u=this.style;return!u||!(u.font||u.numFmt||u.alignment||u.border||u.fill||u.protection)}get headerCount(){return this.headers.length}eachCell(u,d){const h=this.number;d||(d=u,u=null),this._worksheet.eachRow(u,(p,f)=>{d(p.getCell(h),f)})}get values(){const u=[];return this.eachCell((d,h)=>{d&&d.type!==o.ValueType.Null&&(u[h]=d.value)}),u}set values(u){if(!u)return;const d=this.number;let h=0;u.hasOwnProperty("0")&&(h=1),u.forEach((p,f)=>{this._worksheet.getCell(f+h,d).value=p})}_applyStyle(u,d){return this.style[u]=d,this.eachCell(h=>{h[u]=d}),d}get numFmt(){return this.style.numFmt}set numFmt(u){this._applyStyle("numFmt",u)}get font(){return this.style.font}set font(u){this._applyStyle("font",u)}get alignment(){return this.style.alignment}set alignment(u){this._applyStyle("alignment",u)}get protection(){return this.style.protection}set protection(u){this._applyStyle("protection",u)}get border(){return this.style.border}set border(u){this._applyStyle("border",u)}get fill(){return this.style.fill}set fill(u){this._applyStyle("fill",u)}static toModel(u){const d=[];let h=null;return u&&u.forEach((p,f)=>{p.isDefault?h&&(h=null):h&&p.equivalentTo(h)?h.max=f+1:(h={min:f+1,max:f+1,width:p.width!==void 0?p.width:9,style:p.style,isCustomWidth:p.isCustomWidth,hidden:p.hidden,outlineLevel:p.outlineLevel,collapsed:p.collapsed},d.push(h))}),d.length?d:void 0}static fromModel(u,d){const h=[];let p=1,f=0;for(d=(d=d||[]).sort(function(m,g){return m.min-g.min});f<d.length;){const m=d[f++];for(;p<m.min;)h.push(new l(u,p++));for(;p<=m.max;)h.push(new l(u,p++,m))}return h.length?h:null}}s.exports=l},{"../utils/col-cache":19,"../utils/under-dash":26,"./enums":7}],5:[function(i,s,r){s.exports=class{constructor(n){this.model=n||{}}add(n,o){return this.model[n]=o}find(n){return this.model[n]}remove(n){this.model[n]=void 0}}},{}],6:[function(i,s,r){const n=i("../utils/under-dash"),o=i("../utils/col-cache"),a=i("../utils/cell-matrix"),l=i("./range"),c=/[$](\w+)[$](\d+)(:[$](\w+)[$](\d+))?/;s.exports=class{constructor(){this.matrixMap={}}getMatrix(u){return this.matrixMap[u]||(this.matrixMap[u]=new a)}add(u,d){const h=o.decodeEx(u);this.addEx(h,d)}addEx(u,d){const h=this.getMatrix(d);if(u.top)for(let p=u.left;p<=u.right;p++)for(let f=u.top;f<=u.bottom;f++){const m={sheetName:u.sheetName,address:o.n2l(p)+f,row:f,col:p};h.addCellEx(m)}else h.addCellEx(u)}remove(u,d){const h=o.decodeEx(u);this.removeEx(h,d)}removeEx(u,d){this.getMatrix(d).removeCellEx(u)}removeAllNames(u){n.each(this.matrixMap,d=>{d.removeCellEx(u)})}forEach(u){n.each(this.matrixMap,(d,h)=>{d.forEach(p=>{u(h,p)})})}getNames(u){return this.getNamesEx(o.decodeEx(u))}getNamesEx(u){return n.map(this.matrixMap,(d,h)=>d.findCellEx(u)&&h).filter(Boolean)}_explore(u,d){d.mark=!1;const{sheetName:h}=d,p=new l(d.row,d.col,d.row,d.col,h);let f,m;function g(v,C){const b=u.findCellAt(h,v,d.col);return!(!b||!b.mark)&&(p[C]=v,b.mark=!1,!0)}for(m=d.row-1;g(m,"top");m--);for(m=d.row+1;g(m,"bottom");m++);function y(v,C){const b=[];for(m=p.top;m<=p.bottom;m++){const T=u.findCellAt(h,m,v);if(!T||!T.mark)return!1;b.push(T)}p[C]=v;for(let T=0;T<b.length;T++)b[T].mark=!1;return!0}for(f=d.col-1;y(f,"left");f--);for(f=d.col+1;y(f,"right");f++);return p}getRanges(u,d){return(d=d||this.matrixMap[u])?(d.forEach(h=>{h.mark=!0}),{name:u,ranges:d.map(h=>h.mark&&this._explore(d,h)).filter(Boolean).map(h=>h.$shortRange)}):{name:u,ranges:[]}}normaliseMatrix(u,d){u.forEachInSheet(d,(h,p,f)=>{h&&(h.row===p&&h.col===f||(h.row=p,h.col=f,h.address=o.n2l(f)+p))})}spliceRows(u,d,h,p){n.each(this.matrixMap,f=>{f.spliceRows(u,d,h,p),this.normaliseMatrix(f,u)})}spliceColumns(u,d,h,p){n.each(this.matrixMap,f=>{f.spliceColumns(u,d,h,p),this.normaliseMatrix(f,u)})}get model(){return n.map(this.matrixMap,(u,d)=>this.getRanges(d,u)).filter(u=>u.ranges.length)}set model(u){const d=this.matrixMap={};u.forEach(h=>{const p=d[h.name]=new a;h.ranges.forEach(f=>{c.test(f.split("!").pop()||"")&&p.addCell(f)})})}}},{"../utils/cell-matrix":18,"../utils/col-cache":19,"../utils/under-dash":26,"./range":10}],7:[function(i,s,r){s.exports={ValueType:{Null:0,Merge:1,Number:2,String:3,Date:4,Hyperlink:5,Formula:6,SharedString:7,RichText:8,Boolean:9,Error:10},FormulaType:{None:0,Master:1,Shared:2},RelationshipType:{None:0,OfficeDocument:1,Worksheet:2,CalcChain:3,SharedStrings:4,Styles:5,Theme:6,Hyperlink:7},DocumentType:{Xlsx:1},ReadingOrder:{LeftToRight:1,RightToLeft:2},ErrorValue:{NotApplicable:"#N/A",Ref:"#REF!",Name:"#NAME?",DivZero:"#DIV/0!",Null:"#NULL!",Value:"#VALUE!",Num:"#NUM!"}}},{}],8:[function(i,s,r){const n=i("../utils/col-cache"),o=i("./anchor");s.exports=class{constructor(a,l){this.worksheet=a,this.model=l}get model(){switch(this.type){case"background":return{type:this.type,imageId:this.imageId};case"image":return{type:this.type,imageId:this.imageId,hyperlinks:this.range.hyperlinks,range:{tl:this.range.tl.model,br:this.range.br&&this.range.br.model,ext:this.range.ext,editAs:this.range.editAs}};default:throw new Error("Invalid Image Type")}}set model(a){let{type:l,imageId:c,range:u,hyperlinks:d}=a;if(this.type=l,this.imageId=c,l==="image")if(typeof u=="string"){const h=n.decode(u);this.range={tl:new o(this.worksheet,{col:h.left,row:h.top},-1),br:new o(this.worksheet,{col:h.right,row:h.bottom},0),editAs:"oneCell"}}else this.range={tl:new o(this.worksheet,u.tl,0),br:u.br&&new o(this.worksheet,u.br,0),ext:u.ext,editAs:u.editAs,hyperlinks:d||u.hyperlinks}}}},{"../utils/col-cache":19,"./anchor":2}],9:[function(i,s,r){const n=i("../utils/under-dash");class o{constructor(l){this.note=l}get model(){let l=null;switch(typeof this.note){case"string":l={type:"note",note:{texts:[{text:this.note}]}};break;default:l={type:"note",note:this.note}}return n.deepMerge({},o.DEFAULT_CONFIGS,l)}set model(l){const{note:c}=l,{texts:u}=c;u.length===1&&Object.keys(u[0]).length===1?this.note=u[0].text:this.note=c}static fromModel(l){const c=new o;return c.model=l,c}}o.DEFAULT_CONFIGS={note:{margins:{insetmode:"auto",inset:[.13,.13,.25,.25]},protection:{locked:"True",lockText:"True"},editAs:"absolute"}},s.exports=o},{"../utils/under-dash":26}],10:[function(i,s,r){const n=i("../utils/col-cache");class o{constructor(){this.decode(arguments)}setTLBR(l,c,u,d,h){if(arguments.length<4){const p=n.decodeAddress(l),f=n.decodeAddress(c);this.model={top:Math.min(p.row,f.row),left:Math.min(p.col,f.col),bottom:Math.max(p.row,f.row),right:Math.max(p.col,f.col),sheetName:u},this.setTLBR(p.row,p.col,f.row,f.col,h)}else this.model={top:Math.min(l,u),left:Math.min(c,d),bottom:Math.max(l,u),right:Math.max(c,d),sheetName:h}}decode(l){switch(l.length){case 5:this.setTLBR(l[0],l[1],l[2],l[3],l[4]);break;case 4:this.setTLBR(l[0],l[1],l[2],l[3]);break;case 3:this.setTLBR(l[0],l[1],l[2]);break;case 2:this.setTLBR(l[0],l[1]);break;case 1:{const c=l[0];if(c instanceof o)this.model={top:c.model.top,left:c.model.left,bottom:c.model.bottom,right:c.model.right,sheetName:c.sheetName};else if(c instanceof Array)this.decode(c);else if(c.top&&c.left&&c.bottom&&c.right)this.model={top:c.top,left:c.left,bottom:c.bottom,right:c.right,sheetName:c.sheetName};else{const u=n.decodeEx(c);u.top?this.model={top:u.top,left:u.left,bottom:u.bottom,right:u.right,sheetName:u.sheetName}:this.model={top:u.row,left:u.col,bottom:u.row,right:u.col,sheetName:u.sheetName}}break}case 0:this.model={top:0,left:0,bottom:0,right:0};break;default:throw new Error("Invalid number of arguments to _getDimensions() - "+l.length)}}get top(){return this.model.top||1}set top(l){this.model.top=l}get left(){return this.model.left||1}set left(l){this.model.left=l}get bottom(){return this.model.bottom||1}set bottom(l){this.model.bottom=l}get right(){return this.model.right||1}set right(l){this.model.right=l}get sheetName(){return this.model.sheetName}set sheetName(l){this.model.sheetName=l}get _serialisedSheetName(){const{sheetName:l}=this.model;return l?/^[a-zA-Z0-9]*$/.test(l)?l+"!":`'${l}'!`:""}expand(l,c,u,d){(!this.model.top||l<this.top)&&(this.top=l),(!this.model.left||c<this.left)&&(this.left=c),(!this.model.bottom||u>this.bottom)&&(this.bottom=u),(!this.model.right||d>this.right)&&(this.right=d)}expandRow(l){if(l){const{dimensions:c,number:u}=l;c&&this.expand(u,c.min,u,c.max)}}expandToAddress(l){const c=n.decodeEx(l);this.expand(c.row,c.col,c.row,c.col)}get tl(){return n.n2l(this.left)+this.top}get $t$l(){return`$${n.n2l(this.left)}$${this.top}`}get br(){return n.n2l(this.right)+this.bottom}get $b$r(){return`$${n.n2l(this.right)}$${this.bottom}`}get range(){return`${this._serialisedSheetName+this.tl}:${this.br}`}get $range(){return`${this._serialisedSheetName+this.$t$l}:${this.$b$r}`}get shortRange(){return this.count>1?this.range:this._serialisedSheetName+this.tl}get $shortRange(){return this.count>1?this.$range:this._serialisedSheetName+this.$t$l}get count(){return(1+this.bottom-this.top)*(1+this.right-this.left)}toString(){return this.range}intersects(l){return(!l.sheetName||!this.sheetName||l.sheetName===this.sheetName)&&!(l.bottom<this.top)&&!(l.top>this.bottom)&&!(l.right<this.left)&&!(l.left>this.right)}contains(l){const c=n.decodeEx(l);return this.containsEx(c)}containsEx(l){return(!l.sheetName||!this.sheetName||l.sheetName===this.sheetName)&&l.row>=this.top&&l.row<=this.bottom&&l.col>=this.left&&l.col<=this.right}forEachAddress(l){for(let c=this.left;c<=this.right;c++)for(let u=this.top;u<=this.bottom;u++)l(n.encodeAddress(u,c),u,c)}}s.exports=o},{"../utils/col-cache":19}],11:[function(i,s,r){const n=i("../utils/under-dash"),o=i("./enums"),a=i("../utils/col-cache"),l=i("./cell");s.exports=class{constructor(c,u){this._worksheet=c,this._number=u,this._cells=[],this.style={},this.outlineLevel=0}get number(){return this._number}get worksheet(){return this._worksheet}commit(){this._worksheet._commitRow(this)}destroy(){delete this._worksheet,delete this._cells,delete this.style}findCell(c){return this._cells[c-1]}getCellEx(c){let u=this._cells[c.col-1];if(!u){const d=this._worksheet.getColumn(c.col);u=new l(this,d,c.address),this._cells[c.col-1]=u}return u}getCell(c){if(typeof c=="string"){const u=this._worksheet.getColumnKey(c);c=u?u.number:a.l2n(c)}return this._cells[c-1]||this.getCellEx({address:a.encodeAddress(this._number,c),row:this._number,col:c})}splice(c,u){const d=c+u;for(var h=arguments.length,p=new Array(h>2?h-2:0),f=2;f<h;f++)p[f-2]=arguments[f];const m=p.length-u,g=this._cells.length;let y,v,C;if(m<0)for(y=c+p.length;y<=g;y++)C=this._cells[y-1],v=this._cells[y-m-1],v?(C=this.getCell(y),C.value=v.value,C.style=v.style,C._comment=v._comment):C&&(C.value=null,C.style={},C._comment=void 0);else if(m>0)for(y=g;y>=d;y--)v=this._cells[y-1],v?(C=this.getCell(y+m),C.value=v.value,C.style=v.style,C._comment=v._comment):this._cells[y+m-1]=void 0;for(y=0;y<p.length;y++)C=this.getCell(c+y),C.value=p[y],C.style={},C._comment=void 0}eachCell(c,u){if(u||(u=c,c=null),c&&c.includeEmpty){const d=this._cells.length;for(let h=1;h<=d;h++)u(this.getCell(h),h)}else this._cells.forEach((d,h)=>{d&&d.type!==o.ValueType.Null&&u(d,h+1)})}addPageBreak(c,u){const d=this._worksheet,h=Math.max(0,c-1)||0,p=Math.max(0,u-1)||16838,f={id:this._number,max:p,man:1};h&&(f.min=h),d.rowBreaks.push(f)}get values(){const c=[];return this._cells.forEach(u=>{u&&u.type!==o.ValueType.Null&&(c[u.col]=u.value)}),c}set values(c){if(this._cells=[],c)if(c instanceof Array){let u=0;c.hasOwnProperty("0")&&(u=1),c.forEach((d,h)=>{d!==void 0&&(this.getCellEx({address:a.encodeAddress(this._number,h+u),row:this._number,col:h+u}).value=d)})}else this._worksheet.eachColumnKey((u,d)=>{c[d]!==void 0&&(this.getCellEx({address:a.encodeAddress(this._number,u.number),row:this._number,col:u.number}).value=c[d])})}get hasValues(){return n.some(this._cells,c=>c&&c.type!==o.ValueType.Null)}get cellCount(){return this._cells.length}get actualCellCount(){let c=0;return this.eachCell(()=>{c++}),c}get dimensions(){let c=0,u=0;return this._cells.forEach(d=>{d&&d.type!==o.ValueType.Null&&((!c||c>d.col)&&(c=d.col),u<d.col&&(u=d.col))}),c>0?{min:c,max:u}:null}_applyStyle(c,u){return this.style[c]=u,this._cells.forEach(d=>{d&&(d[c]=u)}),u}get numFmt(){return this.style.numFmt}set numFmt(c){this._applyStyle("numFmt",c)}get font(){return this.style.font}set font(c){this._applyStyle("font",c)}get alignment(){return this.style.alignment}set alignment(c){this._applyStyle("alignment",c)}get protection(){return this.style.protection}set protection(c){this._applyStyle("protection",c)}get border(){return this.style.border}set border(c){this._applyStyle("border",c)}get fill(){return this.style.fill}set fill(c){this._applyStyle("fill",c)}get hidden(){return!!this._hidden}set hidden(c){this._hidden=c}get outlineLevel(){return this._outlineLevel||0}set outlineLevel(c){this._outlineLevel=c}get collapsed(){return!!(this._outlineLevel&&this._outlineLevel>=this._worksheet.properties.outlineLevelRow)}get model(){const c=[];let u=0,d=0;return this._cells.forEach(h=>{if(h){const p=h.model;p&&((!u||u>h.col)&&(u=h.col),d<h.col&&(d=h.col),c.push(p))}}),this.height||c.length?{cells:c,number:this.number,min:u,max:d,height:this.height,style:this.style,hidden:this.hidden,outlineLevel:this.outlineLevel,collapsed:this.collapsed}:null}set model(c){if(c.number!==this._number)throw new Error("Invalid row number in model");let u;this._cells=[],c.cells.forEach(d=>{switch(d.type){case l.Types.Merge:break;default:{let h;if(d.address)h=a.decodeAddress(d.address);else if(u){const{row:p}=u,f=u.col+1;h={row:p,col:f,address:a.encodeAddress(p,f),$col$row:`$${a.n2l(f)}$${p}`}}u=h,this.getCellEx(h).model=d;break}}}),c.height?this.height=c.height:delete this.height,this.hidden=c.hidden,this.outlineLevel=c.outlineLevel||0,this.style=c.style&&JSON.parse(JSON.stringify(c.style))||{}}}},{"../utils/col-cache":19,"../utils/under-dash":26,"./cell":3,"./enums":7}],12:[function(i,s,r){const n=i("../utils/col-cache");class o{constructor(l,c,u){this.table=l,this.column=c,this.index=u}_set(l,c){this.table.cacheState(),this.column[l]=c}get name(){return this.column.name}set name(l){this._set("name",l)}get filterButton(){return this.column.filterButton}set filterButton(l){this.column.filterButton=l}get style(){return this.column.style}set style(l){this.column.style=l}get totalsRowLabel(){return this.column.totalsRowLabel}set totalsRowLabel(l){this._set("totalsRowLabel",l)}get totalsRowFunction(){return this.column.totalsRowFunction}set totalsRowFunction(l){this._set("totalsRowFunction",l)}get totalsRowResult(){return this.column.totalsRowResult}set totalsRowResult(l){this._set("totalsRowResult",l)}get totalsRowFormula(){return this.column.totalsRowFormula}set totalsRowFormula(l){this._set("totalsRowFormula",l)}}s.exports=class{constructor(a,l){this.worksheet=a,l&&(this.table=l,this.validate(),this.store())}getFormula(a){switch(a.totalsRowFunction){case"none":return null;case"average":return`SUBTOTAL(101,${this.table.name}[${a.name}])`;case"countNums":return`SUBTOTAL(102,${this.table.name}[${a.name}])`;case"count":return`SUBTOTAL(103,${this.table.name}[${a.name}])`;case"max":return`SUBTOTAL(104,${this.table.name}[${a.name}])`;case"min":return`SUBTOTAL(105,${this.table.name}[${a.name}])`;case"stdDev":return`SUBTOTAL(106,${this.table.name}[${a.name}])`;case"var":return`SUBTOTAL(107,${this.table.name}[${a.name}])`;case"sum":return`SUBTOTAL(109,${this.table.name}[${a.name}])`;case"custom":return a.totalsRowFormula;default:throw new Error("Invalid Totals Row Function: "+a.totalsRowFunction)}}get width(){return this.table.columns.length}get height(){return this.table.rows.length}get filterHeight(){return this.height+(this.table.headerRow?1:0)}get tableHeight(){return this.filterHeight+(this.table.totalsRow?1:0)}validate(){const{table:a}=this,l=(m,g,y)=>{m[g]===void 0&&(m[g]=y)};l(a,"headerRow",!0),l(a,"totalsRow",!1),l(a,"style",{}),l(a.style,"theme","TableStyleMedium2"),l(a.style,"showFirstColumn",!1),l(a.style,"showLastColumn",!1),l(a.style,"showRowStripes",!1),l(a.style,"showColumnStripes",!1);const c=(m,g)=>{if(!m)throw new Error(g)};c(a.ref,"Table must have ref"),c(a.columns,"Table must have column definitions"),c(a.rows,"Table must have row definitions"),a.tl=n.decodeAddress(a.ref);const{row:u,col:d}=a.tl;c(u>0,"Table must be on valid row"),c(d>0,"Table must be on valid col");const{width:h,filterHeight:p,tableHeight:f}=this;a.autoFilterRef=n.encode(u,d,u+p-1,d+h-1),a.tableRef=n.encode(u,d,u+f-1,d+h-1),a.columns.forEach((m,g)=>{c(m.name,`Column ${g} must have a name`),g===0?l(m,"totalsRowLabel","Total"):(l(m,"totalsRowFunction","none"),m.totalsRowFormula=this.getFormula(m))})}store(){const a=(p,f)=>{f&&Object.keys(f).forEach(m=>{p[m]=f[m]})},{worksheet:l,table:c}=this,{row:u,col:d}=c.tl;let h=0;if(c.headerRow){const p=l.getRow(u+h++);c.columns.forEach((f,m)=>{const{style:g,name:y}=f,v=p.getCell(d+m);v.value=y,a(v,g)})}if(c.rows.forEach(p=>{const f=l.getRow(u+h++);p.forEach((m,g)=>{const y=f.getCell(d+g);y.value=m,a(y,c.columns[g].style)})}),c.totalsRow){const p=l.getRow(u+h++);c.columns.forEach((f,m)=>{const g=p.getCell(d+m);if(m===0)g.value=f.totalsRowLabel;else{const y=this.getFormula(f);g.value=y?{formula:f.totalsRowFormula,result:f.totalsRowResult}:null}a(g,f.style)})}}load(a){const{table:l}=this,{row:c,col:u}=l.tl;let d=0;if(l.headerRow){const h=a.getRow(c+d++);l.columns.forEach((p,f)=>{h.getCell(u+f).value=p.name})}if(l.rows.forEach(h=>{const p=a.getRow(c+d++);h.forEach((f,m)=>{p.getCell(u+m).value=f})}),l.totalsRow){const h=a.getRow(c+d++);l.columns.forEach((p,f)=>{const m=h.getCell(u+f);f===0?m.value=p.totalsRowLabel:this.getFormula(p)&&(m.value={formula:p.totalsRowFormula,result:p.totalsRowResult})})}}get model(){return this.table}set model(a){this.table=a}cacheState(){this._cache||(this._cache={ref:this.ref,width:this.width,tableHeight:this.tableHeight})}commit(){if(!this._cache)return;this.validate();const a=n.decodeAddress(this._cache.ref);if(this.ref!==this._cache.ref)for(let l=0;l<this._cache.tableHeight;l++){const c=this.worksheet.getRow(a.row+l);for(let u=0;u<this._cache.width;u++)c.getCell(a.col+u).value=null}else{for(let l=this.tableHeight;l<this._cache.tableHeight;l++){const c=this.worksheet.getRow(a.row+l);for(let u=0;u<this._cache.width;u++)c.getCell(a.col+u).value=null}for(let l=0;l<this.tableHeight;l++){const c=this.worksheet.getRow(a.row+l);for(let u=this.width;u<this._cache.width;u++)c.getCell(a.col+u).value=null}}this.store()}addRow(a,l){this.cacheState(),l===void 0?this.table.rows.push(a):this.table.rows.splice(l,0,a)}removeRows(a){let l=arguments.length>1&&arguments[1]!==void 0?arguments[1]:1;this.cacheState(),this.table.rows.splice(a,l)}getColumn(a){const l=this.table.columns[a];return new o(this,l,a)}addColumn(a,l,c){this.cacheState(),c===void 0?(this.table.columns.push(a),this.table.rows.forEach((u,d)=>{u.push(l[d])})):(this.table.columns.splice(c,0,a),this.table.rows.forEach((u,d)=>{u.splice(c,0,l[d])}))}removeColumns(a){let l=arguments.length>1&&arguments[1]!==void 0?arguments[1]:1;this.cacheState(),this.table.columns.splice(a,l),this.table.rows.forEach(c=>{c.splice(a,l)})}_assign(a,l,c){this.cacheState(),a[l]=c}get ref(){return this.table.ref}set ref(a){this._assign(this.table,"ref",a)}get name(){return this.table.name}set name(a){this.table.name=a}get displayName(){return this.table.displyName||this.table.name}set displayNamename(a){this.table.displayName=a}get headerRow(){return this.table.headerRow}set headerRow(a){this._assign(this.table,"headerRow",a)}get totalsRow(){return this.table.totalsRow}set totalsRow(a){this._assign(this.table,"totalsRow",a)}get theme(){return this.table.style.name}set theme(a){this.table.style.name=a}get showFirstColumn(){return this.table.style.showFirstColumn}set showFirstColumn(a){this.table.style.showFirstColumn=a}get showLastColumn(){return this.table.style.showLastColumn}set showLastColumn(a){this.table.style.showLastColumn=a}get showRowStripes(){return this.table.style.showRowStripes}set showRowStripes(a){this.table.style.showRowStripes=a}get showColumnStripes(){return this.table.style.showColumnStripes}set showColumnStripes(a){this.table.style.showColumnStripes=a}}},{"../utils/col-cache":19}],13:[function(i,s,r){const n=i("./worksheet"),o=i("./defined-names"),a=i("../xlsx/xlsx"),l=i("../csv/csv");s.exports=class{constructor(){this.category="",this.company="",this.created=new Date,this.description="",this.keywords="",this.manager="",this.modified=this.created,this.properties={},this.calcProperties={},this._worksheets=[],this.subject="",this.title="",this.views=[],this.media=[],this._definedNames=new o}get xlsx(){return this._xlsx||(this._xlsx=new a(this)),this._xlsx}get csv(){return this._csv||(this._csv=new l(this)),this._csv}get nextId(){for(let c=1;c<this._worksheets.length;c++)if(!this._worksheets[c])return c;return this._worksheets.length||1}addWorksheet(c,u){const d=this.nextId;u&&(typeof u=="string"?(console.trace('tabColor argument is now deprecated. Please use workbook.addWorksheet(name, {properties: { tabColor: { argb: "rbg value" } }'),u={properties:{tabColor:{argb:u}}}):(u.argb||u.theme||u.indexed)&&(console.trace("tabColor argument is now deprecated. Please use workbook.addWorksheet(name, {properties: { tabColor: { ... } }"),u={properties:{tabColor:u}}));const h=this._worksheets.reduce((m,g)=>(g&&g.orderNo)>m?g.orderNo:m,0),p=Object.assign({},u,{id:d,name:c,orderNo:h+1,workbook:this}),f=new n(p);return this._worksheets[d]=f,f}removeWorksheetEx(c){delete this._worksheets[c.id]}removeWorksheet(c){const u=this.getWorksheet(c);u&&u.destroy()}getWorksheet(c){return c===void 0?this._worksheets.find(Boolean):typeof c=="number"?this._worksheets[c]:typeof c=="string"?this._worksheets.find(u=>u&&u.name===c):void 0}get worksheets(){return this._worksheets.slice(1).sort((c,u)=>c.orderNo-u.orderNo).filter(Boolean)}eachSheet(c){this.worksheets.forEach(u=>{c(u,u.id)})}get definedNames(){return this._definedNames}clearThemes(){this._themes=void 0}addImage(c){const u=this.media.length;return this.media.push(Object.assign({},c,{type:"image"})),u}getImage(c){return this.media[c]}get model(){return{creator:this.creator||"Unknown",lastModifiedBy:this.lastModifiedBy||"Unknown",lastPrinted:this.lastPrinted,created:this.created,modified:this.modified,properties:this.properties,worksheets:this.worksheets.map(c=>c.model),sheets:this.worksheets.map(c=>c.model).filter(Boolean),definedNames:this._definedNames.model,views:this.views,company:this.company,manager:this.manager,title:this.title,subject:this.subject,keywords:this.keywords,category:this.category,description:this.description,language:this.language,revision:this.revision,contentStatus:this.contentStatus,themes:this._themes,media:this.media,calcProperties:this.calcProperties}}set model(c){this.creator=c.creator,this.lastModifiedBy=c.lastModifiedBy,this.lastPrinted=c.lastPrinted,this.created=c.created,this.modified=c.modified,this.company=c.company,this.manager=c.manager,this.title=c.title,this.subject=c.subject,this.keywords=c.keywords,this.category=c.category,this.description=c.description,this.language=c.language,this.revision=c.revision,this.contentStatus=c.contentStatus,this.properties=c.properties,this.calcProperties=c.calcProperties,this._worksheets=[],c.worksheets.forEach(u=>{const{id:d,name:h,state:p}=u,f=c.sheets&&c.sheets.findIndex(m=>m.id===d);(this._worksheets[d]=new n({id:d,name:h,orderNo:f,state:p,workbook:this})).model=u}),this._definedNames.model=c.definedNames,this.views=c.views,this._themes=c.themes,this.media=c.media||[]}}},{"../csv/csv":1,"../xlsx/xlsx":144,"./defined-names":6,"./worksheet":14}],14:[function(i,s,r){const n=i("../utils/under-dash"),o=i("../utils/col-cache"),a=i("./range"),l=i("./row"),c=i("./column"),u=i("./enums"),d=i("./image"),h=i("./table"),p=i("./data-validations"),f=i("../utils/encryptor"),{copyStyle:m}=i("../utils/copy-style");s.exports=class{constructor(g){g=g||{},this._workbook=g.workbook,this.id=g.id,this.orderNo=g.orderNo,this.name=g.name,this.state=g.state||"visible",this._rows=[],this._columns=null,this._keys={},this._merges={},this.rowBreaks=[],this.properties=Object.assign({},{defaultRowHeight:15,dyDescent:55,outlineLevelCol:0,outlineLevelRow:0},g.properties),this.pageSetup=Object.assign({},{margins:{left:.7,right:.7,top:.75,bottom:.75,header:.3,footer:.3},orientation:"portrait",horizontalDpi:4294967295,verticalDpi:4294967295,fitToPage:!(!g.pageSetup||!g.pageSetup.fitToWidth&&!g.pageSetup.fitToHeight||g.pageSetup.scale),pageOrder:"downThenOver",blackAndWhite:!1,draft:!1,cellComments:"None",errors:"displayed",scale:100,fitToWidth:1,fitToHeight:1,paperSize:void 0,showRowColHeaders:!1,showGridLines:!1,firstPageNumber:void 0,horizontalCentered:!1,verticalCentered:!1,rowBreaks:null,colBreaks:null},g.pageSetup),this.headerFooter=Object.assign({},{differentFirst:!1,differentOddEven:!1,oddHeader:null,oddFooter:null,evenHeader:null,evenFooter:null,firstHeader:null,firstFooter:null},g.headerFooter),this.dataValidations=new p,this.views=g.views||[],this.autoFilter=g.autoFilter||null,this._media=[],this.sheetProtection=null,this.tables={},this.conditionalFormattings=[]}get name(){return this._name}set name(g){if(g===void 0&&(g="sheet"+this.id),this._name!==g){if(typeof g!="string")throw new Error("The name has to be a string.");if(g==="")throw new Error("The name can't be empty.");if(g==="History")throw new Error('The name "History" is protected. Please use a different name.');if(/[*?:/\\[\]]/.test(g))throw new Error(`Worksheet name ${g} cannot include any of the following characters: * ? : \\ / [ ]`);if(/(^')|('$)/.test(g))throw new Error("The first or last character of worksheet name cannot be a single quotation mark: "+g);if(g&&g.length>31&&(console.warn(`Worksheet name ${g} exceeds 31 chars. This will be truncated`),g=g.substring(0,31)),this._workbook._worksheets.find(y=>y&&y.name.toLowerCase()===g.toLowerCase()))throw new Error("Worksheet name already exists: "+g);this._name=g}}get workbook(){return this._workbook}destroy(){this._workbook.removeWorksheetEx(this)}get dimensions(){const g=new a;return this._rows.forEach(y=>{if(y){const v=y.dimensions;v&&g.expand(y.number,v.min,y.number,v.max)}}),g}get columns(){return this._columns}set columns(g){this._headerRowCount=g.reduce((C,b)=>{const T=(b.header?1:b.headers&&b.headers.length)||0;return Math.max(C,T)},0);let y=1;const v=this._columns=[];g.forEach(C=>{const b=new c(this,y++,!1);v.push(b),b.defn=C})}getColumnKey(g){return this._keys[g]}setColumnKey(g,y){this._keys[g]=y}deleteColumnKey(g){delete this._keys[g]}eachColumnKey(g){n.each(this._keys,g)}getColumn(g){if(typeof g=="string"){const y=this._keys[g];if(y)return y;g=o.l2n(g)}if(this._columns||(this._columns=[]),g>this._columns.length){let y=this._columns.length+1;for(;y<=g;)this._columns.push(new c(this,y++))}return this._columns[g-1]}spliceColumns(g,y){const v=this._rows.length;for(var C=arguments.length,b=new Array(C>2?C-2:0),T=2;T<C;T++)b[T-2]=arguments[T];if(b.length>0)for(let F=0;F<v;F++){const B=[g,y];b.forEach(H=>{B.push(H[F]||null)});const U=this.getRow(F+1);U.splice.apply(U,B)}else this._rows.forEach(F=>{F&&F.splice(g,y)});const A=b.length-y,I=g+y,D=this._columns.length;if(A<0)for(let F=g+b.length;F<=D;F++)this.getColumn(F).defn=this.getColumn(F-A).defn;else if(A>0)for(let F=D;F>=I;F--)this.getColumn(F+A).defn=this.getColumn(F).defn;for(let F=g;F<g+b.length;F++)this.getColumn(F).defn=null;this.workbook.definedNames.spliceColumns(this.name,g,y,b.length)}get lastColumn(){return this.getColumn(this.columnCount)}get columnCount(){let g=0;return this.eachRow(y=>{g=Math.max(g,y.cellCount)}),g}get actualColumnCount(){const g=[];let y=0;return this.eachRow(v=>{v.eachCell(C=>{let{col:b}=C;g[b]||(g[b]=!0,y++)})}),y}_commitRow(){}get _lastRowNumber(){const g=this._rows;let y=g.length;for(;y>0&&g[y-1]===void 0;)y--;return y}get _nextRow(){return this._lastRowNumber+1}get lastRow(){if(this._rows.length)return this._rows[this._rows.length-1]}findRow(g){return this._rows[g-1]}findRows(g,y){return this._rows.slice(g-1,g-1+y)}get rowCount(){return this._lastRowNumber}get actualRowCount(){let g=0;return this.eachRow(()=>{g++}),g}getRow(g){let y=this._rows[g-1];return y||(y=this._rows[g-1]=new l(this,g)),y}getRows(g,y){if(y<1)return;const v=[];for(let C=g;C<g+y;C++)v.push(this.getRow(C));return v}addRow(g){let y=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"n";const v=this._nextRow,C=this.getRow(v);return C.values=g,this._setStyleOption(v,y[0]==="i"?y:"n"),C}addRows(g){let y=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"n";const v=[];return g.forEach(C=>{v.push(this.addRow(C,y))}),v}insertRow(g,y){let v=arguments.length>2&&arguments[2]!==void 0?arguments[2]:"n";return this.spliceRows(g,0,y),this._setStyleOption(g,v),this.getRow(g)}insertRows(g,y){let v=arguments.length>2&&arguments[2]!==void 0?arguments[2]:"n";if(this.spliceRows(g,0,...y),v!=="n")for(let C=0;C<y.length;C++)v[0]==="o"&&this.findRow(y.length+g+C)!==void 0?this._copyStyle(y.length+g+C,g+C,v[1]==="+"):v[0]==="i"&&this.findRow(g-1)!==void 0&&this._copyStyle(g-1,g+C,v[1]==="+");return this.getRows(g,y.length)}_setStyleOption(g){let y=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"n";y[0]==="o"&&this.findRow(g+1)!==void 0?this._copyStyle(g+1,g,y[1]==="+"):y[0]==="i"&&this.findRow(g-1)!==void 0&&this._copyStyle(g-1,g,y[1]==="+")}_copyStyle(g,y){let v=arguments.length>2&&arguments[2]!==void 0&&arguments[2];const C=this.getRow(g),b=this.getRow(y);b.style=m(C.style),C.eachCell({includeEmpty:v},(T,A)=>{b.getCell(A).style=m(T.style)}),b.height=C.height}duplicateRow(g,y){let v=arguments.length>2&&arguments[2]!==void 0&&arguments[2];const C=this._rows[g-1],b=new Array(y).fill(C.values);this.spliceRows(g+1,v?0:y,...b);for(let T=0;T<y;T++){const A=this._rows[g+T];A.style=C.style,A.height=C.height,C.eachCell({includeEmpty:!0},(I,D)=>{A.getCell(D).style=I.style})}}spliceRows(g,y){const v=g+y;for(var C=arguments.length,b=new Array(C>2?C-2:0),T=2;T<C;T++)b[T-2]=arguments[T];const A=b.length,I=A-y,D=this._rows.length;let F,B;if(I<0)for(g===D&&(this._rows[D-1]=void 0),F=v;F<=D;F++)if(B=this._rows[F-1],B){const U=this.getRow(F+I);U.values=B.values,U.style=B.style,U.height=B.height,B.eachCell({includeEmpty:!0},(H,R)=>{U.getCell(R).style=H.style}),this._rows[F-1]=void 0}else this._rows[F+I-1]=void 0;else if(I>0)for(F=D;F>=v;F--)if(B=this._rows[F-1],B){const U=this.getRow(F+I);U.values=B.values,U.style=B.style,U.height=B.height,B.eachCell({includeEmpty:!0},(H,R)=>{if(U.getCell(R).style=H.style,H._value.constructor.name==="MergeValue"){const L=this.getRow(H._row._number+A).getCell(R),_=H._value._master,w=this.getRow(_._row._number+A).getCell(_._column._number);L.merge(w)}})}else this._rows[F+I-1]=void 0;for(F=0;F<A;F++){const U=this.getRow(g+F);U.style={},U.values=b[F]}this.workbook.definedNames.spliceRows(this.name,g,y,A)}eachRow(g,y){if(y||(y=g,g=void 0),g&&g.includeEmpty){const v=this._rows.length;for(let C=1;C<=v;C++)y(this.getRow(C),C)}else this._rows.forEach(v=>{v&&v.hasValues&&y(v,v.number)})}getSheetValues(){const g=[];return this._rows.forEach(y=>{y&&(g[y.number]=y.values)}),g}findCell(g,y){const v=o.getAddress(g,y),C=this._rows[v.row-1];return C?C.findCell(v.col):void 0}getCell(g,y){const v=o.getAddress(g,y);return this.getRow(v.row).getCellEx(v)}mergeCells(){for(var g=arguments.length,y=new Array(g),v=0;v<g;v++)y[v]=arguments[v];const C=new a(y);this._mergeCellsInternal(C)}mergeCellsWithoutStyle(){for(var g=arguments.length,y=new Array(g),v=0;v<g;v++)y[v]=arguments[v];const C=new a(y);this._mergeCellsInternal(C,!0)}_mergeCellsInternal(g,y){n.each(this._merges,C=>{if(C.intersects(g))throw new Error("Cannot merge already merged cells")});const v=this.getCell(g.top,g.left);for(let C=g.top;C<=g.bottom;C++)for(let b=g.left;b<=g.right;b++)(C>g.top||b>g.left)&&this.getCell(C,b).merge(v,y);this._merges[v.address]=g}_unMergeMaster(g){const y=this._merges[g.address];if(y){for(let v=y.top;v<=y.bottom;v++)for(let C=y.left;C<=y.right;C++)this.getCell(v,C).unmerge();delete this._merges[g.address]}}get hasMerges(){return n.some(this._merges,Boolean)}unMergeCells(){for(var g=arguments.length,y=new Array(g),v=0;v<g;v++)y[v]=arguments[v];const C=new a(y);for(let b=C.top;b<=C.bottom;b++)for(let T=C.left;T<=C.right;T++){const A=this.findCell(b,T);A&&(A.type===u.ValueType.Merge?this._unMergeMaster(A.master):this._merges[A.address]&&this._unMergeMaster(A))}}fillFormula(g,y,v){let C=arguments.length>3&&arguments[3]!==void 0?arguments[3]:"shared";const b=o.decode(g),{top:T,left:A,bottom:I,right:D}=b,F=D-A+1,B=o.encodeAddress(T,A),U=C==="shared";let H;H=typeof v=="function"?v:Array.isArray(v)?Array.isArray(v[0])?(L,_)=>v[L-T][_-A]:(L,_)=>v[(L-T)*F+(_-A)]:()=>{};let R=!0;for(let L=T;L<=I;L++)for(let _=A;_<=D;_++)R?(this.getCell(L,_).value={shareType:C,formula:y,ref:g,result:H(L,_)},R=!1):this.getCell(L,_).value=U?{sharedFormula:B,result:H(L,_)}:H(L,_)}addImage(g,y){const v={type:"image",imageId:g,range:y};this._media.push(new d(this,v))}getImages(){return this._media.filter(g=>g.type==="image")}addBackgroundImage(g){const y={type:"background",imageId:g};this._media.push(new d(this,y))}getBackgroundImageId(){const g=this._media.find(y=>y.type==="background");return g&&g.imageId}protect(g,y){return new Promise(v=>{this.sheetProtection={sheet:!0},y&&"spinCount"in y&&(y.spinCount=Number.isFinite(y.spinCount)?Math.round(Math.max(0,y.spinCount)):1e5),g&&(this.sheetProtection.algorithmName="SHA-512",this.sheetProtection.saltValue=f.randomBytes(16).toString("base64"),this.sheetProtection.spinCount=y&&"spinCount"in y?y.spinCount:1e5,this.sheetProtection.hashValue=f.convertPasswordToHash(g,"SHA512",this.sheetProtection.saltValue,this.sheetProtection.spinCount)),y&&(this.sheetProtection=Object.assign(this.sheetProtection,y),!g&&"spinCount"in y&&delete this.sheetProtection.spinCount),v()})}unprotect(){this.sheetProtection=null}addTable(g){const y=new h(this,g);return this.tables[g.name]=y,y}getTable(g){return this.tables[g]}removeTable(g){delete this.tables[g]}getTables(){return Object.values(this.tables)}addConditionalFormatting(g){this.conditionalFormattings.push(g)}removeConditionalFormatting(g){typeof g=="number"?this.conditionalFormattings.splice(g,1):this.conditionalFormattings=g instanceof Function?this.conditionalFormattings.filter(g):[]}get tabColor(){return console.trace("worksheet.tabColor property is now deprecated. Please use worksheet.properties.tabColor"),this.properties.tabColor}set tabColor(g){console.trace("worksheet.tabColor property is now deprecated. Please use worksheet.properties.tabColor"),this.properties.tabColor=g}get model(){const g={id:this.id,name:this.name,dataValidations:this.dataValidations.model,properties:this.properties,state:this.state,pageSetup:this.pageSetup,headerFooter:this.headerFooter,rowBreaks:this.rowBreaks,views:this.views,autoFilter:this.autoFilter,media:this._media.map(C=>C.model),sheetProtection:this.sheetProtection,tables:Object.values(this.tables).map(C=>C.model),conditionalFormattings:this.conditionalFormattings};g.cols=c.toModel(this.columns);const y=g.rows=[],v=g.dimensions=new a;return this._rows.forEach(C=>{const b=C&&C.model;b&&(v.expand(b.number,b.min,b.number,b.max),y.push(b))}),g.merges=[],n.each(this._merges,C=>{g.merges.push(C.range)}),g}_parseRows(g){this._rows=[],g.rows.forEach(y=>{const v=new l(this,y.number);this._rows[v.number-1]=v,v.model=y})}_parseMergeCells(g){n.each(g.mergeCells,y=>{this.mergeCellsWithoutStyle(y)})}set model(g){this.name=g.name,this._columns=c.fromModel(this,g.cols),this._parseRows(g),this._parseMergeCells(g),this.dataValidations=new p(g.dataValidations),this.properties=g.properties,this.pageSetup=g.pageSetup,this.headerFooter=g.headerFooter,this.views=g.views,this.autoFilter=g.autoFilter,this._media=g.media.map(y=>new d(this,y)),this.sheetProtection=g.sheetProtection,this.tables=g.tables.reduce((y,v)=>{const C=new h;return C.model=v,y[v.name]=C,y},{}),this.conditionalFormattings=g.conditionalFormattings}}},{"../utils/col-cache":19,"../utils/copy-style":20,"../utils/encryptor":21,"../utils/under-dash":26,"./column":4,"./data-validations":5,"./enums":7,"./image":8,"./range":10,"./row":11,"./table":12}],15:[function(i,s,r){i("core-js/modules/es.promise"),i("core-js/modules/es.promise.finally"),i("core-js/modules/es.object.assign"),i("core-js/modules/es.object.keys"),i("core-js/modules/es.object.values"),i("core-js/modules/es.symbol"),i("core-js/modules/es.symbol.async-iterator"),i("core-js/modules/es.array.iterator"),i("core-js/modules/es.array.includes"),i("core-js/modules/es.array.find-index"),i("core-js/modules/es.array.find"),i("core-js/modules/es.string.from-code-point"),i("core-js/modules/es.string.includes"),i("core-js/modules/es.number.is-nan"),i("regenerator-runtime/runtime");const n={Workbook:i("./doc/workbook")},o=i("./doc/enums");Object.keys(o).forEach(a=>{n[a]=o[a]}),s.exports=n},{"./doc/enums":7,"./doc/workbook":13,"core-js/modules/es.array.find":359,"core-js/modules/es.array.find-index":358,"core-js/modules/es.array.includes":360,"core-js/modules/es.array.iterator":361,"core-js/modules/es.number.is-nan":363,"core-js/modules/es.object.assign":364,"core-js/modules/es.object.keys":366,"core-js/modules/es.object.values":367,"core-js/modules/es.promise":372,"core-js/modules/es.promise.finally":371,"core-js/modules/es.string.from-code-point":376,"core-js/modules/es.string.includes":377,"core-js/modules/es.symbol":381,"core-js/modules/es.symbol.async-iterator":378,"regenerator-runtime/runtime":492}],16:[function(i,s,r){const n=typeof TextDecoder>"u"?null:new TextDecoder("utf-8");r.bufferToString=function(o){return typeof o=="string"?o:n?n.decode(o):o.toString()}},{}],17:[function(i,s,r){const n=typeof TextEncoder>"u"?null:new TextEncoder("utf-8"),{Buffer:o}=i("buffer");r.stringToBuffer=function(a){return typeof a!="string"?a:n?o.from(n.encode(a).buffer):o.from(a)}},{buffer:220}],18:[function(i,s,r){const n=i("./under-dash"),o=i("./col-cache");s.exports=class{constructor(a){this.template=a,this.sheets={}}addCell(a){this.addCellEx(o.decodeEx(a))}getCell(a){return this.findCellEx(o.decodeEx(a),!0)}findCell(a){return this.findCellEx(o.decodeEx(a),!1)}findCellAt(a,l,c){const u=this.sheets[a],d=u&&u[l];return d&&d[c]}addCellEx(a){if(a.top)for(let l=a.top;l<=a.bottom;l++)for(let c=a.left;c<=a.right;c++)this.getCellAt(a.sheetName,l,c);else this.findCellEx(a,!0)}getCellEx(a){return this.findCellEx(a,!0)}findCellEx(a,l){const c=this.findSheet(a,l),u=this.findSheetRow(c,a,l);return this.findRowCell(u,a,l)}getCellAt(a,l,c){const u=this.sheets[a]||(this.sheets[a]=[]),d=u[l]||(u[l]=[]);return d[c]||(d[c]={sheetName:a,address:o.n2l(c)+l,row:l,col:c})}removeCellEx(a){const l=this.findSheet(a);if(!l)return;const c=this.findSheetRow(l,a);c&&delete c[a.col]}forEachInSheet(a,l){const c=this.sheets[a];c&&c.forEach((u,d)=>{u&&u.forEach((h,p)=>{h&&l(h,d,p)})})}forEach(a){n.each(this.sheets,(l,c)=>{this.forEachInSheet(c,a)})}map(a){const l=[];return this.forEach(c=>{l.push(a(c))}),l}findSheet(a,l){const c=a.sheetName;return this.sheets[c]?this.sheets[c]:l?this.sheets[c]=[]:void 0}findSheetRow(a,l,c){const{row:u}=l;return a&&a[u]?a[u]:c?a[u]=[]:void 0}findRowCell(a,l,c){const{col:u}=l;return a&&a[u]?a[u]:c?a[u]=this.template?Object.assign(l,JSON.parse(JSON.stringify(this.template))):l:void 0}spliceRows(a,l,c,u){const d=this.sheets[a];if(d){const h=[];for(let p=0;p<u;p++)h.push([]);d.splice(l,c,...h)}}spliceColumns(a,l,c,u){const d=this.sheets[a];if(d){const h=[];for(let p=0;p<u;p++)h.push(null);n.each(d,p=>{p.splice(l,c,...h)})}}}},{"./col-cache":19,"./under-dash":26}],19:[function(i,s,r){const n=/^[A-Z]+\d+$/,o={_dictionary:["A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z"],_l2nFill:0,_l2n:{},_n2l:[],_level:a=>a<=26?1:a<=676?2:3,_fill(a){let l,c,u,d,h,p=1;if(a>=4)throw new Error("Out of bounds. Excel supports columns from 1 to 16384");if(this._l2nFill<1&&a>=1){for(;p<=26;)l=this._dictionary[p-1],this._n2l[p]=l,this._l2n[l]=p,p++;this._l2nFill=1}if(this._l2nFill<2&&a>=2){for(p=27;p<=702;)c=p-27,u=c%26,d=Math.floor(c/26),l=this._dictionary[d]+this._dictionary[u],this._n2l[p]=l,this._l2n[l]=p,p++;this._l2nFill=2}if(this._l2nFill<3&&a>=3){for(p=703;p<=16384;)c=p-703,u=c%26,d=Math.floor(c/26)%26,h=Math.floor(c/676),l=this._dictionary[h]+this._dictionary[d]+this._dictionary[u],this._n2l[p]=l,this._l2n[l]=p,p++;this._l2nFill=3}},l2n(a){if(this._l2n[a]||this._fill(a.length),!this._l2n[a])throw new Error("Out of bounds. Invalid column letter: "+a);return this._l2n[a]},n2l(a){if(a<1||a>16384)throw new Error(a+" is out of bounds. Excel supports columns from 1 to 16384");return this._n2l[a]||this._fill(this._level(a)),this._n2l[a]},_hash:{},validateAddress(a){if(!n.test(a))throw new Error("Invalid Address: "+a);return!0},decodeAddress(a){const l=a.length<5&&this._hash[a];if(l)return l;let c=!1,u="",d=0,h=!1,p="",f=0;for(let g,y=0;y<a.length;y++)if(g=a.charCodeAt(y),!h&&g>=65&&g<=90)c=!0,u+=a[y],d=26*d+g-64;else if(g>=48&&g<=57)h=!0,p+=a[y],f=10*f+g-48;else if(h&&c&&g!==36)break;if(c){if(d>16384)throw new Error("Out of bounds. Invalid column letter: "+u)}else d=void 0;h||(f=void 0);const m={address:a=u+p,col:d,row:f,$col$row:`$${u}$${p}`};return d<=100&&f<=100&&(this._hash[a]=m,this._hash[m.$col$row]=m),m},getAddress(a,l){if(l){const c=this.n2l(l)+a;return this.decodeAddress(c)}return this.decodeAddress(a)},decode(a){const l=a.split(":");if(l.length===2){const c=this.decodeAddress(l[0]),u=this.decodeAddress(l[1]),d={top:Math.min(c.row,u.row),left:Math.min(c.col,u.col),bottom:Math.max(c.row,u.row),right:Math.max(c.col,u.col)};return d.tl=this.n2l(d.left)+d.top,d.br=this.n2l(d.right)+d.bottom,d.dimensions=`${d.tl}:${d.br}`,d}return this.decodeAddress(a)},decodeEx(a){const l=a.match(/(?:(?:(?:'((?:[^']|'')*)')|([^'^ !]*))!)?(.*)/),c=l[1]||l[2],u=l[3],d=u.split(":");if(d.length>1){let p=this.decodeAddress(d[0]),f=this.decodeAddress(d[1]);const m=Math.min(p.row,f.row),g=Math.min(p.col,f.col),y=Math.max(p.row,f.row),v=Math.max(p.col,f.col);return p=this.n2l(g)+m,f=this.n2l(v)+y,{top:m,left:g,bottom:y,right:v,sheetName:c,tl:{address:p,col:g,row:m,$col$row:`$${this.n2l(g)}$${m}`,sheetName:c},br:{address:f,col:v,row:y,$col$row:`$${this.n2l(v)}$${y}`,sheetName:c},dimensions:`${p}:${f}`}}if(u.startsWith("#"))return c?{sheetName:c,error:u}:{error:u};const h=this.decodeAddress(u);return c?{sheetName:c,...h}:h},encodeAddress:(a,l)=>o.n2l(l)+a,encode(){switch(arguments.length){case 2:return o.encodeAddress(arguments[0],arguments[1]);case 4:return`${o.encodeAddress(arguments[0],arguments[1])}:${o.encodeAddress(arguments[2],arguments[3])}`;default:throw new Error("Can only encode with 2 or 4 arguments")}},inRange(a,l){const[c,u,,d,h]=a,[p,f]=l;return p>=c&&p<=d&&f>=u&&f<=h}};s.exports=o},{}],20:[function(i,s,r){const n=(a,l)=>({...a,...l.reduce((c,u)=>(a[u]&&(c[u]={...a[u]}),c),{})}),o=function(a,l,c){let u=arguments.length>3&&arguments[3]!==void 0?arguments[3]:[];a[c]&&(l[c]=n(a[c],u))};r.copyStyle=a=>{if(!a)return a;if(l=a,Object.keys(l).length===0)return{};var l;const c={...a};return o(a,c,"font",["color"]),o(a,c,"alignment"),o(a,c,"protection"),a.border&&(o(a,c,"border"),o(a.border,c.border,"top",["color"]),o(a.border,c.border,"left",["color"]),o(a.border,c.border,"bottom",["color"]),o(a.border,c.border,"right",["color"]),o(a.border,c.border,"diagonal",["color"])),a.fill&&(o(a,c,"fill",["fgColor","bgColor","center"]),a.fill.stops&&(c.fill.stops=a.fill.stops.map(u=>n(u,["color"])))),c}},{}],21:[function(i,s,r){(function(n){(function(){const o=i("crypto"),a={hash(l){const c=o.createHash(l);for(var u=arguments.length,d=new Array(u>1?u-1:0),h=1;h<u;h++)d[h-1]=arguments[h];return c.update(n.concat(d)),c.digest()},convertPasswordToHash(l,c,u,d){if(c=c.toLowerCase(),o.getHashes().indexOf(c)<0)throw new Error(`Hash algorithm '${c}' not supported!`);const h=n.from(l,"utf16le");let p=this.hash(c,n.from(u,"base64"),h);for(let f=0;f<d;f++){const m=n.alloc(4);m.writeUInt32LE(f,0),p=this.hash(c,p,m)}return p.toString("base64")},randomBytes:l=>o.randomBytes(l)};s.exports=a}).call(this)}).call(this,i("buffer").Buffer)},{buffer:220,crypto:390}],22:[function(i,s,r){const{SaxesParser:n}=i("saxes"),{PassThrough:o}=i("readable-stream"),{bufferToString:a}=i("./browser-buffer-decode");s.exports=async function*(l){l.pipe&&!l[Symbol.asyncIterator]&&(l=l.pipe(new o));const c=new n;let u;c.on("error",h=>{u=h});let d=[];c.on("opentag",h=>d.push({eventType:"opentag",value:h})),c.on("text",h=>d.push({eventType:"text",value:h})),c.on("closetag",h=>d.push({eventType:"closetag",value:h}));for await(const h of l){if(c.write(a(h)),u)throw u;yield d,d=[]}}},{"./browser-buffer-decode":16,"readable-stream":491,saxes:496}],23:[function(i,s,r){const n=i("./col-cache"),o=/(([a-z_\-0-9]*)!)?([a-z0-9_$]{2,})([(])?/gi,a=/^([$])?([a-z]+)([$])?([1-9][0-9]*)$/i;s.exports={slideFormula:function(l,c,u){const d=n.decode(c),h=n.decode(u);return l.replace(o,(p,f,m,g,y)=>{if(y)return p;const v=a.exec(g);if(v){const C=v[1],b=v[2].toUpperCase(),T=v[3],A=v[4];if(b.length>3||b.length===3&&b>"XFD")return p;let I=n.l2n(b),D=parseInt(A,10);return C||(I+=h.col-d.col),T||(D+=h.row-d.row),(f||"")+(C||"")+n.n2l(I)+(T||"")+D}return p})}}},{"./col-cache":19}],24:[function(i,s,r){(function(n,o){(function(){const a=i("readable-stream"),l=i("./utils"),c=i("./string-buf");class u{constructor(g,y){this._data=g,this._encoding=y}get length(){return this.toBuffer().length}copy(g,y,v,C){return this.toBuffer().copy(g,y,v,C)}toBuffer(){return this._buffer||(this._buffer=o.from(this._data,this._encoding)),this._buffer}}class d{constructor(g){this._data=g}get length(){return this._data.length}copy(g,y,v,C){return this._data._buf.copy(g,y,v,C)}toBuffer(){return this._data.toBuffer()}}class h{constructor(g){this._data=g}get length(){return this._data.length}copy(g,y,v,C){this._data.copy(g,y,v,C)}toBuffer(){return this._data}}class p{constructor(g){this.size=g,this.buffer=o.alloc(g),this.iRead=0,this.iWrite=0}toBuffer(){if(this.iRead===0&&this.iWrite===this.size)return this.buffer;const g=o.alloc(this.iWrite-this.iRead);return this.buffer.copy(g,0,this.iRead,this.iWrite),g}get length(){return this.iWrite-this.iRead}get eod(){return this.iRead===this.iWrite}get full(){return this.iWrite===this.size}read(g){let y;return g===0?null:g===void 0||g>=this.length?(y=this.toBuffer(),this.iRead=this.iWrite,y):(y=o.alloc(g),this.buffer.copy(y,0,this.iRead,g),this.iRead+=g,y)}write(g,y,v){const C=Math.min(v,this.size-this.iWrite);return g.copy(this.buffer,this.iWrite,y,y+C),this.iWrite+=C,C}}const f=function(m){m=m||{},this.bufSize=m.bufSize||1048576,this.buffers=[],this.batch=m.batch||!1,this.corked=!1,this.inPos=0,this.outPos=0,this.pipes=[],this.paused=!1,this.encoding=null};l.inherits(f,a.Duplex,{toBuffer(){switch(this.buffers.length){case 0:return null;case 1:return this.buffers[0].toBuffer();default:return o.concat(this.buffers.map(m=>m.toBuffer()))}},_getWritableBuffer(){if(this.buffers.length){const g=this.buffers[this.buffers.length-1];if(!g.full)return g}const m=new p(this.bufSize);return this.buffers.push(m),m},async _pipe(m){await Promise.all(this.pipes.map(function(g){return new Promise(y=>{g.write(m.toBuffer(),()=>{y()})})}))},_writeToBuffers(m){let g=0;const y=m.length;for(;g<y;)g+=this._getWritableBuffer().write(m,g,y-g)},async write(m,g,y){let v;if(g instanceof Function&&(y=g,g="utf8"),y=y||l.nop,m instanceof c)v=new d(m);else if(m instanceof o)v=new h(m);else{if(!(typeof m=="string"||m instanceof String||m instanceof ArrayBuffer))throw new Error("Chunk must be one of type String, Buffer or StringBuf.");v=new u(m,g)}if(this.pipes.length)if(this.batch)for(this._writeToBuffers(v);!this.corked&&this.buffers.length>1;)this._pipe(this.buffers.shift());else this.corked?(this._writeToBuffers(v),n.nextTick(y)):(await this._pipe(v),y());else this.paused||this.emit("data",v.toBuffer()),this._writeToBuffers(v),this.emit("readable");return!0},cork(){this.corked=!0},_flush(){if(this.pipes.length)for(;this.buffers.length;)this._pipe(this.buffers.shift())},uncork(){this.corked=!1,this._flush()},end(m,g,y){const v=C=>{C?y(C):(this._flush(),this.pipes.forEach(b=>{b.end()}),this.emit("finish"))};m?this.write(m,g,v):v()},read(m){let g;if(m){for(g=[];m&&this.buffers.length&&!this.buffers[0].eod;){const y=this.buffers[0],v=y.read(m);m-=v.length,g.push(v),y.eod&&y.full&&this.buffers.shift()}return o.concat(g)}return g=this.buffers.map(y=>y.toBuffer()).filter(Boolean),this.buffers=[],o.concat(g)},setEncoding(m){this.encoding=m},pause(){this.paused=!0},resume(){this.paused=!1},isPaused(){return!!this.paused},pipe(m){this.pipes.push(m),!this.paused&&this.buffers.length&&this.end()},unpipe(m){this.pipes=this.pipes.filter(g=>g!==m)},unshift(){throw new Error("Not Implemented")},wrap(){throw new Error("Not Implemented")}}),s.exports=f}).call(this)}).call(this,i("_process"),i("buffer").Buffer)},{"./string-buf":25,"./utils":27,_process:467,buffer:220,"readable-stream":491}],25:[function(i,s,r){(function(n){(function(){s.exports=class{constructor(o){this._buf=n.alloc(o&&o.size||16384),this._encoding=o&&o.encoding||"utf8",this._inPos=0,this._buffer=void 0}get length(){return this._inPos}get capacity(){return this._buf.length}get buffer(){return this._buf}toBuffer(){return this._buffer||(this._buffer=n.alloc(this.length),this._buf.copy(this._buffer,0,0,this.length)),this._buffer}reset(o){o=o||0,this._buffer=void 0,this._inPos=o}_grow(o){let a=2*this._buf.length;for(;a<o;)a*=2;const l=n.alloc(a);this._buf.copy(l,0),this._buf=l}addText(o){this._buffer=void 0;let a=this._inPos+this._buf.write(o,this._inPos,this._encoding);for(;a>=this._buf.length-4;)this._grow(this._inPos+o.length),a=this._inPos+this._buf.write(o,this._inPos,this._encoding);this._inPos=a}addStringBuf(o){o.length&&(this._buffer=void 0,this.length+o.length>this.capacity&&this._grow(this.length+o.length),o._buf.copy(this._buf,this._inPos,0,o.length),this._inPos+=o.length)}}}).call(this)}).call(this,i("buffer").Buffer)},{buffer:220}],26:[function(i,s,r){const{toString:n}=Object.prototype,o=/["&<>]/,a={each:function(l,c){l&&(Array.isArray(l)?l.forEach(c):Object.keys(l).forEach(u=>{c(l[u],u)}))},some:function(l,c){return!!l&&(Array.isArray(l)?l.some(c):Object.keys(l).some(u=>c(l[u],u)))},every:function(l,c){return!l||(Array.isArray(l)?l.every(c):Object.keys(l).every(u=>c(l[u],u)))},map:function(l,c){return l?Array.isArray(l)?l.map(c):Object.keys(l).map(u=>c(l[u],u)):[]},keyBy:(l,c)=>l.reduce((u,d)=>(u[d[c]]=d,u),{}),isEqual:function(l,c){const u=typeof l,d=typeof c,h=Array.isArray(l),p=Array.isArray(c);let f;if(u!==d)return!1;switch(typeof l){case"object":if(h||p)return!(!h||!p)&&l.length===c.length&&l.every((m,g)=>{const y=c[g];return a.isEqual(m,y)});if(l===null||c===null)return l===c;if(f=Object.keys(l),Object.keys(c).length!==f.length)return!1;for(const m of f)if(!c.hasOwnProperty(m))return!1;return a.every(l,(m,g)=>{const y=c[g];return a.isEqual(m,y)});default:return l===c}},escapeHtml(l){const c=o.exec(l);if(!c)return l;let u="",d="",h=0,p=c.index;for(;p<l.length;p++){switch(l.charAt(p)){case'"':d="&quot;";break;case"&":d="&amp;";break;case"'":d="&apos;";break;case"<":d="&lt;";break;case">":d="&gt;";break;default:continue}h!==p&&(u+=l.substring(h,p)),h=p+1,u+=d}return h!==p?u+l.substring(h,p):u},strcmp:(l,c)=>l<c?-1:l>c?1:0,isUndefined:l=>n.call(l)==="[object Undefined]",isObject:l=>n.call(l)==="[object Object]",deepMerge(){const l=arguments[0]||{},{length:c}=arguments;let u,d,h;function p(f,m){u=l[m],h=Array.isArray(f),a.isObject(f)||h?(h?(h=!1,d=u&&Array.isArray(u)?u:[]):d=u&&a.isObject(u)?u:{},l[m]=a.deepMerge(d,f)):a.isUndefined(f)||(l[m]=f)}for(let f=0;f<c;f++)a.each(arguments[f],p);return l}};s.exports=a},{}],27:[function(i,s,r){(function(n,o){(function(){const a=i("fs"),l=/[<>&'"\x7F\x00-\x08\x0B-\x0C\x0E-\x1F]/,c={nop(){},promiseImmediate:u=>new Promise(d=>{n.setImmediate?o(()=>{d(u)}):setTimeout(()=>{d(u)},1)}),inherits:function(u,d,h,p){u.super_=d,p||(p=h,h=null),h&&Object.keys(h).forEach(m=>{Object.defineProperty(u,m,Object.getOwnPropertyDescriptor(h,m))});const f={constructor:{value:u,enumerable:!1,writable:!1,configurable:!0}};p&&Object.keys(p).forEach(m=>{f[m]=Object.getOwnPropertyDescriptor(p,m)}),u.prototype=Object.create(d.prototype,f)},dateToExcel:(u,d)=>25569+u.getTime()/864e5-(d?1462:0),excelToDate(u,d){const h=Math.round(24*(u-25569+(d?1462:0))*3600*1e3);return new Date(h)},parsePath(u){const d=u.lastIndexOf("/");return{path:u.substring(0,d),name:u.substring(d+1)}},getRelsPath(u){const d=c.parsePath(u);return`${d.path}/_rels/${d.name}.rels`},xmlEncode(u){const d=l.exec(u);if(!d)return u;let h="",p="",f=0,m=d.index;for(;m<u.length;m++){const g=u.charCodeAt(m);switch(g){case 34:p="&quot;";break;case 38:p="&amp;";break;case 39:p="&apos;";break;case 60:p="&lt;";break;case 62:p="&gt;";break;case 127:p="";break;default:if(g<=31&&(g<=8||g>=11&&g!==13)){p="";break}continue}f!==m&&(h+=u.substring(f,m)),f=m+1,p&&(h+=p)}return f!==m?h+u.substring(f,m):h},xmlDecode:u=>u.replace(/&([a-z]*);/g,d=>{switch(d){case"&lt;":return"<";case"&gt;":return">";case"&amp;":return"&";case"&apos;":return"'";case"&quot;":return'"';default:return d}}),validInt(u){const d=parseInt(u,10);return Number.isNaN(d)?0:d},isDateFmt(u){return u?(u=(u=u.replace(/\[[^\]]*]/g,"")).replace(/"[^"]*"/g,"")).match(/[ymdhMsb]+/)!==null:!1},fs:{exists:u=>new Promise(d=>{a.access(u,a.constants.F_OK,h=>{d(!h)})})},toIsoDateString:u=>u.toIsoString().subsstr(0,10),parseBoolean:u=>u===!0||u==="true"||u===1||u==="1"};s.exports=c}).call(this)}).call(this,typeof zt<"u"?zt:typeof self<"u"?self:typeof window<"u"?window:{},i("timers").setImmediate)},{fs:216,timers:523}],28:[function(i,s,r){const n=i("./under-dash"),o=i("./utils");function a(u,d,h){u.push(` ${d}="${o.xmlEncode(h.toString())}"`)}function l(u,d){if(d){const h=[];n.each(d,(p,f)=>{p!==void 0&&a(h,f,p)}),u.push(h.join(""))}}class c{constructor(){this._xml=[],this._stack=[],this._rollbacks=[]}get tos(){return this._stack.length?this._stack[this._stack.length-1]:void 0}get cursor(){return this._xml.length}openXml(d){const h=this._xml;h.push("<?xml"),l(h,d),h.push(`?>
`)}openNode(d,h){const p=this.tos,f=this._xml;p&&this.open&&f.push(">"),this._stack.push(d),f.push("<"),f.push(d),l(f,h),this.leaf=!0,this.open=!0}addAttribute(d,h){if(!this.open)throw new Error("Cannot write attributes to node if it is not open");h!==void 0&&a(this._xml,d,h)}addAttributes(d){if(!this.open)throw new Error("Cannot write attributes to node if it is not open");l(this._xml,d)}writeText(d){const h=this._xml;this.open&&(h.push(">"),this.open=!1),this.leaf=!1,h.push(o.xmlEncode(d.toString()))}writeXml(d){this.open&&(this._xml.push(">"),this.open=!1),this.leaf=!1,this._xml.push(d)}closeNode(){const d=this._stack.pop(),h=this._xml;this.leaf?h.push("/>"):(h.push("</"),h.push(d),h.push(">")),this.open=!1,this.leaf=!1}leafNode(d,h,p){this.openNode(d,h),p!==void 0&&this.writeText(p),this.closeNode()}closeAll(){for(;this._stack.length;)this.closeNode()}addRollback(){return this._rollbacks.push({xml:this._xml.length,stack:this._stack.length,leaf:this.leaf,open:this.open}),this.cursor}commit(){this._rollbacks.pop()}rollback(){const d=this._rollbacks.pop();this._xml.length>d.xml&&this._xml.splice(d.xml,this._xml.length-d.xml),this._stack.length>d.stack&&this._stack.splice(d.stack,this._stack.length-d.stack),this.leaf=d.leaf,this.open=d.open}get xml(){return this.closeAll(),this._xml.join("")}}c.StdDocAttributes={version:"1.0",encoding:"UTF-8",standalone:"yes"},s.exports=c},{"./under-dash":26,"./utils":27}],29:[function(i,s,r){(function(n){(function(){const o=i("events"),a=i("jszip"),l=i("./stream-buf"),{stringToBuffer:c}=i("./browser-buffer-encode");class u extends o.EventEmitter{constructor(h){super(),this.options=Object.assign({type:"nodebuffer",compression:"DEFLATE"},h),this.zip=new a,this.stream=new l}append(h,p){p.hasOwnProperty("base64")&&p.base64?this.zip.file(p.name,h,{base64:!0}):(n.browser&&typeof h=="string"&&(h=c(h)),this.zip.file(p.name,h))}async finalize(){const h=await this.zip.generateAsync(this.options);this.stream.end(h),this.emit("finish")}read(h){return this.stream.read(h)}setEncoding(h){return this.stream.setEncoding(h)}pause(){return this.stream.pause()}resume(){return this.stream.resume()}isPaused(){return this.stream.isPaused()}pipe(h,p){return this.stream.pipe(h,p)}unpipe(h){return this.stream.unpipe(h)}unshift(h){return this.stream.unshift(h)}wrap(h){return this.stream.wrap(h)}}s.exports={ZipWriter:u}}).call(this)}).call(this,i("_process"))},{"./browser-buffer-encode":17,"./stream-buf":24,_process:467,events:422,jszip:441}],30:[function(i,s,r){s.exports={0:{f:"General"},1:{f:"0"},2:{f:"0.00"},3:{f:"#,##0"},4:{f:"#,##0.00"},9:{f:"0%"},10:{f:"0.00%"},11:{f:"0.00E+00"},12:{f:"# ?/?"},13:{f:"# ??/??"},14:{f:"mm-dd-yy"},15:{f:"d-mmm-yy"},16:{f:"d-mmm"},17:{f:"mmm-yy"},18:{f:"h:mm AM/PM"},19:{f:"h:mm:ss AM/PM"},20:{f:"h:mm"},21:{f:"h:mm:ss"},22:{f:'m/d/yy "h":mm'},27:{"zh-tw":"[$-404]e/m/d","zh-cn":'yyyy""m""',"ja-jp":"[$-411]ge.m.d","ko-kr":'yyyy"" mm"" dd""'},28:{"zh-tw":'[$-404]e""m""d""',"zh-cn":'m""d""',"ja-jp":'[$-411]ggge""m""d""',"ko-kr":"mm-dd"},29:{"zh-tw":'[$-404]e""m""d""',"zh-cn":'m""d""',"ja-jp":'[$-411]ggge""m""d""',"ko-kr":"mm-dd"},30:{"zh-tw":"m/d/yy ","zh-cn":"m-d-yy","ja-jp":"m/d/yy","ko-kr":"mm-dd-yy"},31:{"zh-tw":'yyyy""m""d""',"zh-cn":'yyyy""m""d""',"ja-jp":'yyyy""m""d""',"ko-kr":'yyyy"" mm"" dd""'},32:{"zh-tw":'hh""mm""',"zh-cn":'h""mm""',"ja-jp":'h""mm""',"ko-kr":'h"" mm""'},33:{"zh-tw":'hh""mm""ss""',"zh-cn":'h""mm""ss""',"ja-jp":'h""mm""ss""',"ko-kr":'h"" mm"" ss""'},34:{"zh-tw":'/ hh""mm""',"zh-cn":'/ h""mm""',"ja-jp":'yyyy""m""',"ko-kr":"yyyy-mm-dd"},35:{"zh-tw":'/ hh""mm""ss""',"zh-cn":'/ h""mm""ss""',"ja-jp":'m""d""',"ko-kr":"yyyy-mm-dd"},36:{"zh-tw":"[$-404]e/m/d","zh-cn":'yyyy""m""',"ja-jp":"[$-411]ge.m.d","ko-kr":'yyyy"" mm"" dd""'},37:{f:"#,##0 ;(#,##0)"},38:{f:"#,##0 ;[Red](#,##0)"},39:{f:"#,##0.00 ;(#,##0.00)"},40:{f:"#,##0.00 ;[Red](#,##0.00)"},45:{f:"mm:ss"},46:{f:"[h]:mm:ss"},47:{f:"mmss.0"},48:{f:"##0.0E+0"},49:{f:"@"},50:{"zh-tw":"[$-404]e/m/d","zh-cn":'yyyy""m""',"ja-jp":"[$-411]ge.m.d","ko-kr":'yyyy"" mm"" dd""'},51:{"zh-tw":'[$-404]e""m""d""',"zh-cn":'m""d""',"ja-jp":'[$-411]ggge""m""d""',"ko-kr":"mm-dd"},52:{"zh-tw":'/ hh""mm""',"zh-cn":'yyyy""m""',"ja-jp":'yyyy""m""',"ko-kr":"yyyy-mm-dd"},53:{"zh-tw":'/ hh""mm""ss""',"zh-cn":'m""d""',"ja-jp":'m""d""',"ko-kr":"yyyy-mm-dd"},54:{"zh-tw":'[$-404]e""m""d""',"zh-cn":'m""d""',"ja-jp":'[$-411]ggge""m""d""',"ko-kr":"mm-dd"},55:{"zh-tw":'/ hh""mm""',"zh-cn":'/ h""mm""',"ja-jp":'yyyy""m""',"ko-kr":"yyyy-mm-dd"},56:{"zh-tw":'/ hh""mm""ss""',"zh-cn":'/ h""mm""ss""',"ja-jp":'m""d""',"ko-kr":"yyyy-mm-dd"},57:{"zh-tw":"[$-404]e/m/d","zh-cn":'yyyy""m""',"ja-jp":"[$-411]ge.m.d","ko-kr":'yyyy"" mm"" dd""'},58:{"zh-tw":'[$-404]e""m""d""',"zh-cn":'m""d""',"ja-jp":'[$-411]ggge""m""d""',"ko-kr":"mm-dd"},59:{"th-th":"t0"},60:{"th-th":"t0.00"},61:{"th-th":"t#,##0"},62:{"th-th":"t#,##0.00"},67:{"th-th":"t0%"},68:{"th-th":"t0.00%"},69:{"th-th":"t# ?/?"},70:{"th-th":"t# ??/??"},81:{"th-th":"d/m/bb"}}},{}],31:[function(i,s,r){s.exports={OfficeDocument:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/officeDocument",Worksheet:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/worksheet",CalcChain:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/calcChain",SharedStrings:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/sharedStrings",Styles:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/styles",Theme:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/theme",Hyperlink:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/hyperlink",Image:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/image",CoreProperties:"http://schemas.openxmlformats.org/package/2006/relationships/metadata/core-properties",ExtenderProperties:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/extended-properties",Comments:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/comments",VmlDrawing:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/vmlDrawing",Table:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/table"}},{}],32:[function(i,s,r){const n=i("../../utils/parse-sax"),o=i("../../utils/xml-stream");class a{prepare(){}render(){}parseOpen(c){}parseText(c){}parseClose(c){}reconcile(c,u){}reset(){this.model=null,this.map&&Object.values(this.map).forEach(c=>{c instanceof a?c.reset():c.xform&&c.xform.reset()})}mergeModel(c){this.model=Object.assign(this.model||{},c)}async parse(c){for await(const u of c)for(const{eventType:d,value:h}of u)if(d==="opentag")this.parseOpen(h);else if(d==="text")this.parseText(h);else if(d==="closetag"&&!this.parseClose(h.name))return this.model;return this.model}async parseStream(c){return this.parse(n(c))}get xml(){return this.toXml(this.model)}toXml(c){const u=new o;return this.render(u,c),u.xml}static toAttribute(c,u){let d=arguments.length>2&&arguments[2]!==void 0&&arguments[2];if(c===void 0){if(d)return u}else if(d||c!==u)return c.toString()}static toStringAttribute(c,u){let d=arguments.length>2&&arguments[2]!==void 0&&arguments[2];return a.toAttribute(c,u,d)}static toStringValue(c,u){return c===void 0?u:c}static toBoolAttribute(c,u){let d=arguments.length>2&&arguments[2]!==void 0&&arguments[2];if(c===void 0){if(d)return u}else if(d||c!==u)return c?"1":"0"}static toBoolValue(c,u){return c===void 0?u:c==="1"}static toIntAttribute(c,u){let d=arguments.length>2&&arguments[2]!==void 0&&arguments[2];return a.toAttribute(c,u,d)}static toIntValue(c,u){return c===void 0?u:parseInt(c,10)}static toFloatAttribute(c,u){let d=arguments.length>2&&arguments[2]!==void 0&&arguments[2];return a.toAttribute(c,u,d)}static toFloatValue(c,u){return c===void 0?u:parseFloat(c)}}s.exports=a},{"../../utils/parse-sax":22,"../../utils/xml-stream":28}],33:[function(i,s,r){const n=i("../base-xform"),o=i("../../../utils/col-cache");function a(c){try{return o.decodeEx(c),!0}catch{return!1}}function l(c){const u=[];let d=!1,h="";return c.split(",").forEach(p=>{if(!p)return;const f=(p.match(/'/g)||[]).length;if(!f)return void(d?h+=p+",":a(p)&&u.push(p));const m=f%2==0;!d&&m&&a(p)?u.push(p):d&&!m?(d=!1,a(h+p)&&u.push(h+p),h=""):(d=!0,h+=p+",")}),u}s.exports=class extends n{render(c,u){c.openNode("definedName",{name:u.name,localSheetId:u.localSheetId}),c.writeText(u.ranges.join(",")),c.closeNode()}parseOpen(c){switch(c.name){case"definedName":return this._parsedName=c.attributes.name,this._parsedLocalSheetId=c.attributes.localSheetId,this._parsedText=[],!0;default:return!1}}parseText(c){this._parsedText.push(c)}parseClose(){return this.model={name:this._parsedName,ranges:l(this._parsedText.join(""))},this._parsedLocalSheetId!==void 0&&(this.model.localSheetId=parseInt(this._parsedLocalSheetId,10)),!1}}},{"../../../utils/col-cache":19,"../base-xform":32}],34:[function(i,s,r){const n=i("../../../utils/utils"),o=i("../base-xform");s.exports=class extends o{render(a,l){a.leafNode("sheet",{sheetId:l.id,name:l.name,state:l.state,"r:id":l.rId})}parseOpen(a){return a.name==="sheet"&&(this.model={name:n.xmlDecode(a.attributes.name),id:parseInt(a.attributes.sheetId,10),state:a.attributes.state,rId:a.attributes["r:id"]},!0)}parseText(){}parseClose(){return!1}}},{"../../../utils/utils":27,"../base-xform":32}],35:[function(i,s,r){const n=i("../base-xform");s.exports=class extends n{render(o,a){o.leafNode("calcPr",{calcId:171027,fullCalcOnLoad:a.fullCalcOnLoad?1:void 0})}parseOpen(o){return o.name==="calcPr"&&(this.model={},!0)}parseText(){}parseClose(){return!1}}},{"../base-xform":32}],36:[function(i,s,r){const n=i("../base-xform");s.exports=class extends n{render(o,a){o.leafNode("workbookPr",{date1904:a.date1904?1:void 0,defaultThemeVersion:164011,filterPrivacy:1})}parseOpen(o){return o.name==="workbookPr"&&(this.model={date1904:o.attributes.date1904==="1"},!0)}parseText(){}parseClose(){return!1}}},{"../base-xform":32}],37:[function(i,s,r){const n=i("../base-xform");s.exports=class extends n{render(o,a){const l={xWindow:a.x||0,yWindow:a.y||0,windowWidth:a.width||12e3,windowHeight:a.height||24e3,firstSheet:a.firstSheet,activeTab:a.activeTab};a.visibility&&a.visibility!=="visible"&&(l.visibility=a.visibility),o.leafNode("workbookView",l)}parseOpen(o){if(o.name==="workbookView"){const a=this.model={},l=function(u,d,h){const p=d!==void 0?a[u]=d:h;p!==void 0&&(a[u]=p)},c=function(u,d,h){const p=d!==void 0?a[u]=parseInt(d,10):h;p!==void 0&&(a[u]=p)};return c("x",o.attributes.xWindow,0),c("y",o.attributes.yWindow,0),c("width",o.attributes.windowWidth,25e3),c("height",o.attributes.windowHeight,1e4),l("visibility",o.attributes.visibility,"visible"),c("activeTab",o.attributes.activeTab,void 0),c("firstSheet",o.attributes.firstSheet,void 0),!0}return!1}parseText(){}parseClose(){return!1}}},{"../base-xform":32}],38:[function(i,s,r){const n=i("../../../utils/under-dash"),o=i("../../../utils/col-cache"),a=i("../../../utils/xml-stream"),l=i("../base-xform"),c=i("../static-xform"),u=i("../list-xform"),d=i("./defined-name-xform"),h=i("./sheet-xform"),p=i("./workbook-view-xform"),f=i("./workbook-properties-xform"),m=i("./workbook-calc-properties-xform");class g extends l{constructor(){super(),this.map={fileVersion:g.STATIC_XFORMS.fileVersion,workbookPr:new f,bookViews:new u({tag:"bookViews",count:!1,childXform:new p}),sheets:new u({tag:"sheets",count:!1,childXform:new h}),definedNames:new u({tag:"definedNames",count:!1,childXform:new d}),calcPr:new m}}prepare(v){v.sheets=v.worksheets;const C=[];let b=0;v.sheets.forEach(T=>{if(T.pageSetup&&T.pageSetup.printArea&&T.pageSetup.printArea.split("&&").forEach(A=>{const I=A.split(":"),D={name:"_xlnm.Print_Area",ranges:[`'${T.name}'!$${I[0]}:$${I[1]}`],localSheetId:b};C.push(D)}),T.pageSetup&&(T.pageSetup.printTitlesRow||T.pageSetup.printTitlesColumn)){const A=[];if(T.pageSetup.printTitlesColumn){const D=T.pageSetup.printTitlesColumn.split(":");A.push(`'${T.name}'!$${D[0]}:$${D[1]}`)}if(T.pageSetup.printTitlesRow){const D=T.pageSetup.printTitlesRow.split(":");A.push(`'${T.name}'!$${D[0]}:$${D[1]}`)}const I={name:"_xlnm.Print_Titles",ranges:A,localSheetId:b};C.push(I)}b++}),C.length&&(v.definedNames=v.definedNames.concat(C)),(v.media||[]).forEach((T,A)=>{T.name=T.type+(A+1)})}render(v,C){v.openXml(a.StdDocAttributes),v.openNode("workbook",g.WORKBOOK_ATTRIBUTES),this.map.fileVersion.render(v),this.map.workbookPr.render(v,C.properties),this.map.bookViews.render(v,C.views),this.map.sheets.render(v,C.sheets),this.map.definedNames.render(v,C.definedNames),this.map.calcPr.render(v,C.calcProperties),v.closeNode()}parseOpen(v){if(this.parser)return this.parser.parseOpen(v),!0;switch(v.name){case"workbook":return!0;default:return this.parser=this.map[v.name],this.parser&&this.parser.parseOpen(v),!0}}parseText(v){this.parser&&this.parser.parseText(v)}parseClose(v){if(this.parser)return this.parser.parseClose(v)||(this.parser=void 0),!0;switch(v){case"workbook":return this.model={sheets:this.map.sheets.model,properties:this.map.workbookPr.model||{},views:this.map.bookViews.model,calcProperties:{}},this.map.definedNames.model&&(this.model.definedNames=this.map.definedNames.model),!1;default:return!0}}reconcile(v){const C=(v.workbookRels||[]).reduce((D,F)=>(D[F.Id]=F,D),{}),b=[];let T,A=0;(v.sheets||[]).forEach(D=>{const F=C[D.rId];F&&(T=v.worksheetHash["xl/"+F.Target.replace(/^(\s|\/xl\/)+/,"")],T&&(T.name=D.name,T.id=D.id,T.state=D.state,b[A++]=T))});const I=[];n.each(v.definedNames,D=>{if(D.name==="_xlnm.Print_Area"){if(T=b[D.localSheetId],T){T.pageSetup||(T.pageSetup={});const F=o.decodeEx(D.ranges[0]);T.pageSetup.printArea=T.pageSetup.printArea?`${T.pageSetup.printArea}&&${F.dimensions}`:F.dimensions}}else if(D.name==="_xlnm.Print_Titles"){if(T=b[D.localSheetId],T){T.pageSetup||(T.pageSetup={});const F=D.ranges.join(","),B=/\$/g,U=/\$\d+:\$\d+/,H=F.match(U);if(H&&H.length){const _=H[0];T.pageSetup.printTitlesRow=_.replace(B,"")}const R=/\$[A-Z]+:\$[A-Z]+/,L=F.match(R);if(L&&L.length){const _=L[0];T.pageSetup.printTitlesColumn=_.replace(B,"")}}}else I.push(D)}),v.definedNames=I,v.media.forEach((D,F)=>{D.index=F})}}g.WORKBOOK_ATTRIBUTES={xmlns:"http://schemas.openxmlformats.org/spreadsheetml/2006/main","xmlns:r":"http://schemas.openxmlformats.org/officeDocument/2006/relationships","xmlns:mc":"http://schemas.openxmlformats.org/markup-compatibility/2006","mc:Ignorable":"x15","xmlns:x15":"http://schemas.microsoft.com/office/spreadsheetml/2010/11/main"},g.STATIC_XFORMS={fileVersion:new c({tag:"fileVersion",$:{appName:"xl",lastEdited:5,lowestEdited:5,rupBuild:9303}})},s.exports=g},{"../../../utils/col-cache":19,"../../../utils/under-dash":26,"../../../utils/xml-stream":28,"../base-xform":32,"../list-xform":71,"../static-xform":120,"./defined-name-xform":33,"./sheet-xform":34,"./workbook-calc-properties-xform":35,"./workbook-properties-xform":36,"./workbook-view-xform":37}],39:[function(i,s,r){const n=i("../strings/rich-text-xform"),o=i("../../../utils/utils"),a=i("../base-xform"),l=s.exports=function(c){this.model=c};o.inherits(l,a,{get tag(){return"r"},get richTextXform(){return this._richTextXform||(this._richTextXform=new n),this._richTextXform},render(c,u){u=u||this.model,c.openNode("comment",{ref:u.ref,authorId:0}),c.openNode("text"),u&&u.note&&u.note.texts&&u.note.texts.forEach(d=>{this.richTextXform.render(c,d)}),c.closeNode(),c.closeNode()},parseOpen(c){if(this.parser)return this.parser.parseOpen(c),!0;switch(c.name){case"comment":return this.model={type:"note",note:{texts:[]},...c.attributes},!0;case"r":return this.parser=this.richTextXform,this.parser.parseOpen(c),!0;default:return!1}},parseText(c){this.parser&&this.parser.parseText(c)},parseClose(c){switch(c){case"comment":return!1;case"r":return this.model.note.texts.push(this.parser.model),this.parser=void 0,!0;default:return this.parser&&this.parser.parseClose(c),!0}}})},{"../../../utils/utils":27,"../base-xform":32,"../strings/rich-text-xform":122}],40:[function(i,s,r){const n=i("../../../utils/xml-stream"),o=i("../../../utils/utils"),a=i("../base-xform"),l=i("./comment-xform"),c=s.exports=function(){this.map={comment:new l}};o.inherits(c,a,{COMMENTS_ATTRIBUTES:{xmlns:"http://schemas.openxmlformats.org/spreadsheetml/2006/main"}},{render(u,d){d=d||this.model,u.openXml(n.StdDocAttributes),u.openNode("comments",c.COMMENTS_ATTRIBUTES),u.openNode("authors"),u.leafNode("author",null,"Author"),u.closeNode(),u.openNode("commentList"),d.comments.forEach(h=>{this.map.comment.render(u,h)}),u.closeNode(),u.closeNode()},parseOpen(u){if(this.parser)return this.parser.parseOpen(u),!0;switch(u.name){case"commentList":return this.model={comments:[]},!0;case"comment":return this.parser=this.map.comment,this.parser.parseOpen(u),!0;default:return!1}},parseText(u){this.parser&&this.parser.parseText(u)},parseClose(u){switch(u){case"commentList":return!1;case"comment":return this.model.comments.push(this.parser.model),this.parser=void 0,!0;default:return this.parser&&this.parser.parseClose(u),!0}}})},{"../../../utils/utils":27,"../../../utils/xml-stream":28,"../base-xform":32,"./comment-xform":39}],41:[function(i,s,r){const n=i("../../base-xform");s.exports=class extends n{constructor(o){super(),this._model=o}get tag(){return this._model&&this._model.tag}render(o,a,l){(a===l[2]||this.tag==="x:SizeWithCells"&&a===l[1])&&o.leafNode(this.tag)}parseOpen(o){switch(o.name){case this.tag:return this.model={},this.model[this.tag]=!0,!0;default:return!1}}parseText(){}parseClose(){return!1}}},{"../../base-xform":32}],42:[function(i,s,r){const n=i("../../base-xform");s.exports=class extends n{constructor(o){super(),this._model=o}get tag(){return this._model&&this._model.tag}render(o,a){o.leafNode(this.tag,null,a)}parseOpen(o){switch(o.name){case this.tag:return this.text="",!0;default:return!1}}parseText(o){this.text=o}parseClose(){return!1}}},{"../../base-xform":32}],43:[function(i,s,r){const n=i("../base-xform");s.exports=class extends n{get tag(){return"x:Anchor"}getAnchorRect(o){const a=Math.floor(o.left),l=Math.floor(68*(o.left-a)),c=Math.floor(o.top),u=Math.floor(18*(o.top-c)),d=Math.floor(o.right),h=Math.floor(68*(o.right-d)),p=Math.floor(o.bottom);return[a,l,c,u,d,h,p,Math.floor(18*(o.bottom-p))]}getDefaultRect(o){const a=o.col,l=Math.max(o.row-2,0);return[a,6,l,14,a+2,2,l+4,16]}render(o,a){const l=a.anchor?this.getAnchorRect(a.anchor):this.getDefaultRect(a.refAddress);o.leafNode("x:Anchor",null,l.join(", "))}parseOpen(o){switch(o.name){case this.tag:return this.text="",!0;default:return!1}}parseText(o){this.text=o}parseClose(){return!1}}},{"../base-xform":32}],44:[function(i,s,r){const n=i("../base-xform"),o=i("./vml-anchor-xform"),a=i("./style/vml-protection-xform"),l=i("./style/vml-position-xform"),c=["twoCells","oneCells","absolute"];s.exports=class extends n{constructor(){super(),this.map={"x:Anchor":new o,"x:Locked":new a({tag:"x:Locked"}),"x:LockText":new a({tag:"x:LockText"}),"x:SizeWithCells":new l({tag:"x:SizeWithCells"}),"x:MoveWithCells":new l({tag:"x:MoveWithCells"})}}get tag(){return"x:ClientData"}render(u,d){const{protection:h,editAs:p}=d.note;u.openNode(this.tag,{ObjectType:"Note"}),this.map["x:MoveWithCells"].render(u,p,c),this.map["x:SizeWithCells"].render(u,p,c),this.map["x:Anchor"].render(u,d),this.map["x:Locked"].render(u,h.locked),u.leafNode("x:AutoFill",null,"False"),this.map["x:LockText"].render(u,h.lockText),u.leafNode("x:Row",null,d.refAddress.row-1),u.leafNode("x:Column",null,d.refAddress.col-1),u.closeNode()}parseOpen(u){switch(u.name){case this.tag:this.reset(),this.model={anchor:[],protection:{},editAs:""};break;default:this.parser=this.map[u.name],this.parser&&this.parser.parseOpen(u)}return!0}parseText(u){this.parser&&this.parser.parseText(u)}parseClose(u){if(this.parser)return this.parser.parseClose(u)||(this.parser=void 0),!0;switch(u){case this.tag:return this.normalizeModel(),!1;default:return!0}}normalizeModel(){const u=Object.assign({},this.map["x:MoveWithCells"].model,this.map["x:SizeWithCells"].model),d=Object.keys(u).length;this.model.editAs=c[d],this.model.anchor=this.map["x:Anchor"].text,this.model.protection.locked=this.map["x:Locked"].text,this.model.protection.lockText=this.map["x:LockText"].text}}},{"../base-xform":32,"./style/vml-position-xform":41,"./style/vml-protection-xform":42,"./vml-anchor-xform":43}],45:[function(i,s,r){const n=i("../../../utils/xml-stream"),o=i("../base-xform"),a=i("./vml-shape-xform");class l extends o{constructor(){super(),this.map={"v:shape":new a}}get tag(){return"xml"}render(u,d){u.openXml(n.StdDocAttributes),u.openNode(this.tag,l.DRAWING_ATTRIBUTES),u.openNode("o:shapelayout",{"v:ext":"edit"}),u.leafNode("o:idmap",{"v:ext":"edit",data:1}),u.closeNode(),u.openNode("v:shapetype",{id:"_x0000_t202",coordsize:"21600,21600","o:spt":202,path:"m,l,21600r21600,l21600,xe"}),u.leafNode("v:stroke",{joinstyle:"miter"}),u.leafNode("v:path",{gradientshapeok:"t","o:connecttype":"rect"}),u.closeNode(),d.comments.forEach((h,p)=>{this.map["v:shape"].render(u,h,p)}),u.closeNode()}parseOpen(u){if(this.parser)return this.parser.parseOpen(u),!0;switch(u.name){case this.tag:this.reset(),this.model={comments:[]};break;default:this.parser=this.map[u.name],this.parser&&this.parser.parseOpen(u)}return!0}parseText(u){this.parser&&this.parser.parseText(u)}parseClose(u){if(this.parser)return this.parser.parseClose(u)||(this.model.comments.push(this.parser.model),this.parser=void 0),!0;switch(u){case this.tag:return!1;default:return!0}}reconcile(u,d){u.anchors.forEach(h=>{h.br?this.map["xdr:twoCellAnchor"].reconcile(h,d):this.map["xdr:oneCellAnchor"].reconcile(h,d)})}}l.DRAWING_ATTRIBUTES={"xmlns:v":"urn:schemas-microsoft-com:vml","xmlns:o":"urn:schemas-microsoft-com:office:office","xmlns:x":"urn:schemas-microsoft-com:office:excel"},s.exports=l},{"../../../utils/xml-stream":28,"../base-xform":32,"./vml-shape-xform":46}],46:[function(i,s,r){const n=i("../base-xform"),o=i("./vml-textbox-xform"),a=i("./vml-client-data-xform");class l extends n{constructor(){super(),this.map={"v:textbox":new o,"x:ClientData":new a}}get tag(){return"v:shape"}render(u,d,h){u.openNode("v:shape",l.V_SHAPE_ATTRIBUTES(d,h)),u.leafNode("v:fill",{color2:"infoBackground [80]"}),u.leafNode("v:shadow",{color:"none [81]",obscured:"t"}),u.leafNode("v:path",{"o:connecttype":"none"}),this.map["v:textbox"].render(u,d),this.map["x:ClientData"].render(u,d),u.closeNode()}parseOpen(u){if(this.parser)return this.parser.parseOpen(u),!0;switch(u.name){case this.tag:this.reset(),this.model={margins:{insetmode:u.attributes["o:insetmode"]},anchor:"",editAs:"",protection:{}};break;default:this.parser=this.map[u.name],this.parser&&this.parser.parseOpen(u)}return!0}parseText(u){this.parser&&this.parser.parseText(u)}parseClose(u){if(this.parser)return this.parser.parseClose(u)||(this.parser=void 0),!0;switch(u){case this.tag:return this.model.margins.inset=this.map["v:textbox"].model&&this.map["v:textbox"].model.inset,this.model.protection=this.map["x:ClientData"].model&&this.map["x:ClientData"].model.protection,this.model.anchor=this.map["x:ClientData"].model&&this.map["x:ClientData"].model.anchor,this.model.editAs=this.map["x:ClientData"].model&&this.map["x:ClientData"].model.editAs,!1;default:return!0}}}l.V_SHAPE_ATTRIBUTES=(c,u)=>({id:"_x0000_s"+(1025+u),type:"#_x0000_t202",style:"position:absolute; margin-left:105.3pt;margin-top:10.5pt;width:97.8pt;height:59.1pt;z-index:1;visibility:hidden",fillcolor:"infoBackground [80]",strokecolor:"none [81]","o:insetmode":c.note.margins&&c.note.margins.insetmode}),s.exports=l},{"../base-xform":32,"./vml-client-data-xform":44,"./vml-textbox-xform":47}],47:[function(i,s,r){const n=i("../base-xform");s.exports=class extends n{get tag(){return"v:textbox"}conversionUnit(o,a,l){return`${parseFloat(o)*a.toFixed(2)}${l}`}reverseConversionUnit(o){return(o||"").split(",").map(a=>Number(parseFloat(this.conversionUnit(parseFloat(a),.1,"")).toFixed(2)))}render(o,a){const l={style:"mso-direction-alt:auto"};if(a&&a.note){let{inset:c}=a.note&&a.note.margins;Array.isArray(c)&&(c=c.map(u=>this.conversionUnit(u,10,"mm")).join(",")),c&&(l.inset=c)}o.openNode("v:textbox",l),o.leafNode("div",{style:"text-align:left"}),o.closeNode()}parseOpen(o){switch(o.name){case this.tag:return this.model={inset:this.reverseConversionUnit(o.attributes.inset)},!0;default:return!0}}parseText(){}parseClose(o){switch(o){case this.tag:return!1;default:return!0}}}},{"../base-xform":32}],48:[function(i,s,r){const n=i("./base-xform");s.exports=class extends n{createNewModel(o){return{}}parseOpen(o){return this.parser=this.parser||this.map[o.name],this.parser?(this.parser.parseOpen(o),!0):o.name===this.tag&&(this.model=this.createNewModel(o),!0)}parseText(o){this.parser&&this.parser.parseText(o)}onParserClose(o,a){this.model[o]=a.model}parseClose(o){return this.parser?(this.parser.parseClose(o)||(this.onParserClose(o,this.parser),this.parser=void 0),!0):o!==this.tag}}},{"./base-xform":32}],49:[function(i,s,r){const n=i("../base-xform");s.exports=class extends n{render(o,a){o.openNode("HeadingPairs"),o.openNode("vt:vector",{size:2,baseType:"variant"}),o.openNode("vt:variant"),o.leafNode("vt:lpstr",void 0,"Worksheets"),o.closeNode(),o.openNode("vt:variant"),o.leafNode("vt:i4",void 0,a.length),o.closeNode(),o.closeNode(),o.closeNode()}parseOpen(o){return o.name==="HeadingPairs"}parseText(){}parseClose(o){return o!=="HeadingPairs"}}},{"../base-xform":32}],50:[function(i,s,r){const n=i("../base-xform");s.exports=class extends n{render(o,a){o.openNode("TitlesOfParts"),o.openNode("vt:vector",{size:a.length,baseType:"lpstr"}),a.forEach(l=>{o.leafNode("vt:lpstr",void 0,l.name)}),o.closeNode(),o.closeNode()}parseOpen(o){return o.name==="TitlesOfParts"}parseText(){}parseClose(o){return o!=="TitlesOfParts"}}},{"../base-xform":32}],51:[function(i,s,r){const n=i("../../../utils/xml-stream"),o=i("../base-xform"),a=i("../simple/string-xform"),l=i("./app-heading-pairs-xform"),c=i("./app-titles-of-parts-xform");class u extends o{constructor(){super(),this.map={Company:new a({tag:"Company"}),Manager:new a({tag:"Manager"}),HeadingPairs:new l,TitleOfParts:new c}}render(h,p){h.openXml(n.StdDocAttributes),h.openNode("Properties",u.PROPERTY_ATTRIBUTES),h.leafNode("Application",void 0,"Microsoft Excel"),h.leafNode("DocSecurity",void 0,"0"),h.leafNode("ScaleCrop",void 0,"false"),this.map.HeadingPairs.render(h,p.worksheets),this.map.TitleOfParts.render(h,p.worksheets),this.map.Company.render(h,p.company||""),this.map.Manager.render(h,p.manager),h.leafNode("LinksUpToDate",void 0,"false"),h.leafNode("SharedDoc",void 0,"false"),h.leafNode("HyperlinksChanged",void 0,"false"),h.leafNode("AppVersion",void 0,"16.0300"),h.closeNode()}parseOpen(h){if(this.parser)return this.parser.parseOpen(h),!0;switch(h.name){case"Properties":return!0;default:return this.parser=this.map[h.name],!!this.parser&&(this.parser.parseOpen(h),!0)}}parseText(h){this.parser&&this.parser.parseText(h)}parseClose(h){if(this.parser)return this.parser.parseClose(h)||(this.parser=void 0),!0;switch(h){case"Properties":return this.model={worksheets:this.map.TitleOfParts.model,company:this.map.Company.model,manager:this.map.Manager.model},!1;default:return!0}}}u.DateFormat=function(d){return d.toISOString().replace(/[.]\d{3,6}/,"")},u.DateAttrs={"xsi:type":"dcterms:W3CDTF"},u.PROPERTY_ATTRIBUTES={xmlns:"http://schemas.openxmlformats.org/officeDocument/2006/extended-properties","xmlns:vt":"http://schemas.openxmlformats.org/officeDocument/2006/docPropsVTypes"},s.exports=u},{"../../../utils/xml-stream":28,"../base-xform":32,"../simple/string-xform":119,"./app-heading-pairs-xform":49,"./app-titles-of-parts-xform":50}],52:[function(i,s,r){const n=i("../../../utils/xml-stream"),o=i("../base-xform");class a extends o{render(c,u){c.openXml(n.StdDocAttributes),c.openNode("Types",a.PROPERTY_ATTRIBUTES);const d={};(u.media||[]).forEach(h=>{if(h.type==="image"){const p=h.extension;d[p]||(d[p]=!0,c.leafNode("Default",{Extension:p,ContentType:"image/"+p}))}}),c.leafNode("Default",{Extension:"rels",ContentType:"application/vnd.openxmlformats-package.relationships+xml"}),c.leafNode("Default",{Extension:"xml",ContentType:"application/xml"}),c.leafNode("Override",{PartName:"/xl/workbook.xml",ContentType:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet.main+xml"}),u.worksheets.forEach(h=>{const p=`/xl/worksheets/sheet${h.id}.xml`;c.leafNode("Override",{PartName:p,ContentType:"application/vnd.openxmlformats-officedocument.spreadsheetml.worksheet+xml"})}),c.leafNode("Override",{PartName:"/xl/theme/theme1.xml",ContentType:"application/vnd.openxmlformats-officedocument.theme+xml"}),c.leafNode("Override",{PartName:"/xl/styles.xml",ContentType:"application/vnd.openxmlformats-officedocument.spreadsheetml.styles+xml"}),u.sharedStrings&&u.sharedStrings.count&&c.leafNode("Override",{PartName:"/xl/sharedStrings.xml",ContentType:"application/vnd.openxmlformats-officedocument.spreadsheetml.sharedStrings+xml"}),u.tables&&u.tables.forEach(h=>{c.leafNode("Override",{PartName:"/xl/tables/"+h.target,ContentType:"application/vnd.openxmlformats-officedocument.spreadsheetml.table+xml"})}),u.drawings&&u.drawings.forEach(h=>{c.leafNode("Override",{PartName:`/xl/drawings/${h.name}.xml`,ContentType:"application/vnd.openxmlformats-officedocument.drawing+xml"})}),u.commentRefs&&(c.leafNode("Default",{Extension:"vml",ContentType:"application/vnd.openxmlformats-officedocument.vmlDrawing"}),u.commentRefs.forEach(h=>{let{commentName:p}=h;c.leafNode("Override",{PartName:`/xl/${p}.xml`,ContentType:"application/vnd.openxmlformats-officedocument.spreadsheetml.comments+xml"})})),c.leafNode("Override",{PartName:"/docProps/core.xml",ContentType:"application/vnd.openxmlformats-package.core-properties+xml"}),c.leafNode("Override",{PartName:"/docProps/app.xml",ContentType:"application/vnd.openxmlformats-officedocument.extended-properties+xml"}),c.closeNode()}parseOpen(){return!1}parseText(){}parseClose(){return!1}}a.PROPERTY_ATTRIBUTES={xmlns:"http://schemas.openxmlformats.org/package/2006/content-types"},s.exports=a},{"../../../utils/xml-stream":28,"../base-xform":32}],53:[function(i,s,r){const n=i("../../../utils/xml-stream"),o=i("../base-xform"),a=i("../simple/date-xform"),l=i("../simple/string-xform"),c=i("../simple/integer-xform");class u extends o{constructor(){super(),this.map={"dc:creator":new l({tag:"dc:creator"}),"dc:title":new l({tag:"dc:title"}),"dc:subject":new l({tag:"dc:subject"}),"dc:description":new l({tag:"dc:description"}),"dc:identifier":new l({tag:"dc:identifier"}),"dc:language":new l({tag:"dc:language"}),"cp:keywords":new l({tag:"cp:keywords"}),"cp:category":new l({tag:"cp:category"}),"cp:lastModifiedBy":new l({tag:"cp:lastModifiedBy"}),"cp:lastPrinted":new a({tag:"cp:lastPrinted",format:u.DateFormat}),"cp:revision":new c({tag:"cp:revision"}),"cp:version":new l({tag:"cp:version"}),"cp:contentStatus":new l({tag:"cp:contentStatus"}),"cp:contentType":new l({tag:"cp:contentType"}),"dcterms:created":new a({tag:"dcterms:created",attrs:u.DateAttrs,format:u.DateFormat}),"dcterms:modified":new a({tag:"dcterms:modified",attrs:u.DateAttrs,format:u.DateFormat})}}render(h,p){h.openXml(n.StdDocAttributes),h.openNode("cp:coreProperties",u.CORE_PROPERTY_ATTRIBUTES),this.map["dc:creator"].render(h,p.creator),this.map["dc:title"].render(h,p.title),this.map["dc:subject"].render(h,p.subject),this.map["dc:description"].render(h,p.description),this.map["dc:identifier"].render(h,p.identifier),this.map["dc:language"].render(h,p.language),this.map["cp:keywords"].render(h,p.keywords),this.map["cp:category"].render(h,p.category),this.map["cp:lastModifiedBy"].render(h,p.lastModifiedBy),this.map["cp:lastPrinted"].render(h,p.lastPrinted),this.map["cp:revision"].render(h,p.revision),this.map["cp:version"].render(h,p.version),this.map["cp:contentStatus"].render(h,p.contentStatus),this.map["cp:contentType"].render(h,p.contentType),this.map["dcterms:created"].render(h,p.created),this.map["dcterms:modified"].render(h,p.modified),h.closeNode()}parseOpen(h){if(this.parser)return this.parser.parseOpen(h),!0;switch(h.name){case"cp:coreProperties":case"coreProperties":return!0;default:if(this.parser=this.map[h.name],this.parser)return this.parser.parseOpen(h),!0;throw new Error("Unexpected xml node in parseOpen: "+JSON.stringify(h))}}parseText(h){this.parser&&this.parser.parseText(h)}parseClose(h){if(this.parser)return this.parser.parseClose(h)||(this.parser=void 0),!0;switch(h){case"cp:coreProperties":case"coreProperties":return this.model={creator:this.map["dc:creator"].model,title:this.map["dc:title"].model,subject:this.map["dc:subject"].model,description:this.map["dc:description"].model,identifier:this.map["dc:identifier"].model,language:this.map["dc:language"].model,keywords:this.map["cp:keywords"].model,category:this.map["cp:category"].model,lastModifiedBy:this.map["cp:lastModifiedBy"].model,lastPrinted:this.map["cp:lastPrinted"].model,revision:this.map["cp:revision"].model,contentStatus:this.map["cp:contentStatus"].model,contentType:this.map["cp:contentType"].model,created:this.map["dcterms:created"].model,modified:this.map["dcterms:modified"].model},!1;default:throw new Error("Unexpected xml node in parseClose: "+h)}}}u.DateFormat=function(d){return d.toISOString().replace(/[.]\d{3}/,"")},u.DateAttrs={"xsi:type":"dcterms:W3CDTF"},u.CORE_PROPERTY_ATTRIBUTES={"xmlns:cp":"http://schemas.openxmlformats.org/package/2006/metadata/core-properties","xmlns:dc":"http://purl.org/dc/elements/1.1/","xmlns:dcterms":"http://purl.org/dc/terms/","xmlns:dcmitype":"http://purl.org/dc/dcmitype/","xmlns:xsi":"http://www.w3.org/2001/XMLSchema-instance"},s.exports=u},{"../../../utils/xml-stream":28,"../base-xform":32,"../simple/date-xform":117,"../simple/integer-xform":118,"../simple/string-xform":119}],54:[function(i,s,r){const n=i("../base-xform");s.exports=class extends n{render(o,a){o.leafNode("Relationship",a)}parseOpen(o){switch(o.name){case"Relationship":return this.model=o.attributes,!0;default:return!1}}parseText(){}parseClose(){return!1}}},{"../base-xform":32}],55:[function(i,s,r){const n=i("../../../utils/xml-stream"),o=i("../base-xform"),a=i("./relationship-xform");class l extends o{constructor(){super(),this.map={Relationship:new a}}render(u,d){d=d||this._values,u.openXml(n.StdDocAttributes),u.openNode("Relationships",l.RELATIONSHIPS_ATTRIBUTES),d.forEach(h=>{this.map.Relationship.render(u,h)}),u.closeNode()}parseOpen(u){if(this.parser)return this.parser.parseOpen(u),!0;switch(u.name){case"Relationships":return this.model=[],!0;default:if(this.parser=this.map[u.name],this.parser)return this.parser.parseOpen(u),!0;throw new Error("Unexpected xml node in parseOpen: "+JSON.stringify(u))}}parseText(u){this.parser&&this.parser.parseText(u)}parseClose(u){if(this.parser)return this.parser.parseClose(u)||(this.model.push(this.parser.model),this.parser=void 0),!0;switch(u){case"Relationships":return!1;default:throw new Error("Unexpected xml node in parseClose: "+u)}}}l.RELATIONSHIPS_ATTRIBUTES={xmlns:"http://schemas.openxmlformats.org/package/2006/relationships"},s.exports=l},{"../../../utils/xml-stream":28,"../base-xform":32,"./relationship-xform":54}],56:[function(i,s,r){const n=i("../base-xform");s.exports=class extends n{parseOpen(o){if(this.parser)return this.parser.parseOpen(o),!0;switch(o.name){case this.tag:this.reset(),this.model={range:{editAs:o.attributes.editAs||"oneCell"}};break;default:this.parser=this.map[o.name],this.parser&&this.parser.parseOpen(o)}return!0}parseText(o){this.parser&&this.parser.parseText(o)}reconcilePicture(o,a){if(o&&o.rId){const l=a.rels[o.rId].Target.match(/.*\/media\/(.+[.][a-zA-Z]{3,4})/);if(l){const c=l[1],u=a.mediaIndex[c];return a.media[u]}}}}},{"../base-xform":32}],57:[function(i,s,r){const n=i("../base-xform"),o=i("./blip-xform");s.exports=class extends n{constructor(){super(),this.map={"a:blip":new o}}get tag(){return"xdr:blipFill"}render(a,l){a.openNode(this.tag),this.map["a:blip"].render(a,l),a.openNode("a:stretch"),a.leafNode("a:fillRect"),a.closeNode(),a.closeNode()}parseOpen(a){if(this.parser)return this.parser.parseOpen(a),!0;switch(a.name){case this.tag:this.reset();break;default:this.parser=this.map[a.name],this.parser&&this.parser.parseOpen(a)}return!0}parseText(){}parseClose(a){if(this.parser)return this.parser.parseClose(a)||(this.parser=void 0),!0;switch(a){case this.tag:return this.model=this.map["a:blip"].model,!1;default:return!0}}}},{"../base-xform":32,"./blip-xform":58}],58:[function(i,s,r){const n=i("../base-xform");s.exports=class extends n{get tag(){return"a:blip"}render(o,a){o.leafNode(this.tag,{"xmlns:r":"http://schemas.openxmlformats.org/officeDocument/2006/relationships","r:embed":a.rId,cstate:"print"})}parseOpen(o){switch(o.name){case this.tag:return this.model={rId:o.attributes["r:embed"]},!0;default:return!0}}parseText(){}parseClose(o){switch(o){case this.tag:return!1;default:return!0}}}},{"../base-xform":32}],59:[function(i,s,r){const n=i("../base-xform");s.exports=class extends n{get tag(){return"xdr:cNvPicPr"}render(o){o.openNode(this.tag),o.leafNode("a:picLocks",{noChangeAspect:"1"}),o.closeNode()}parseOpen(o){switch(o.name){case this.tag:default:return!0}}parseText(){}parseClose(o){switch(o){case this.tag:return!1;default:return!0}}}},{"../base-xform":32}],60:[function(i,s,r){const n=i("../base-xform"),o=i("./hlink-click-xform"),a=i("./ext-lst-xform");s.exports=class extends n{constructor(){super(),this.map={"a:hlinkClick":new o,"a:extLst":new a}}get tag(){return"xdr:cNvPr"}render(l,c){l.openNode(this.tag,{id:c.index,name:"Picture "+c.index}),this.map["a:hlinkClick"].render(l,c),this.map["a:extLst"].render(l,c),l.closeNode()}parseOpen(l){if(this.parser)return this.parser.parseOpen(l),!0;switch(l.name){case this.tag:this.reset();break;default:this.parser=this.map[l.name],this.parser&&this.parser.parseOpen(l)}return!0}parseText(){}parseClose(l){if(this.parser)return this.parser.parseClose(l)||(this.parser=void 0),!0;switch(l){case this.tag:return this.model=this.map["a:hlinkClick"].model,!1;default:return!0}}}},{"../base-xform":32,"./ext-lst-xform":63,"./hlink-click-xform":65}],61:[function(i,s,r){const n=i("../base-xform"),o=i("../simple/integer-xform");s.exports=class extends n{constructor(a){super(),this.tag=a.tag,this.map={"xdr:col":new o({tag:"xdr:col",zero:!0}),"xdr:colOff":new o({tag:"xdr:colOff",zero:!0}),"xdr:row":new o({tag:"xdr:row",zero:!0}),"xdr:rowOff":new o({tag:"xdr:rowOff",zero:!0})}}render(a,l){a.openNode(this.tag),this.map["xdr:col"].render(a,l.nativeCol),this.map["xdr:colOff"].render(a,l.nativeColOff),this.map["xdr:row"].render(a,l.nativeRow),this.map["xdr:rowOff"].render(a,l.nativeRowOff),a.closeNode()}parseOpen(a){if(this.parser)return this.parser.parseOpen(a),!0;switch(a.name){case this.tag:this.reset();break;default:this.parser=this.map[a.name],this.parser&&this.parser.parseOpen(a)}return!0}parseText(a){this.parser&&this.parser.parseText(a)}parseClose(a){if(this.parser)return this.parser.parseClose(a)||(this.parser=void 0),!0;switch(a){case this.tag:return this.model={nativeCol:this.map["xdr:col"].model,nativeColOff:this.map["xdr:colOff"].model,nativeRow:this.map["xdr:row"].model,nativeRowOff:this.map["xdr:rowOff"].model},!1;default:return!0}}}},{"../base-xform":32,"../simple/integer-xform":118}],62:[function(i,s,r){const n=i("../../../utils/col-cache"),o=i("../../../utils/xml-stream"),a=i("../base-xform"),l=i("./two-cell-anchor-xform"),c=i("./one-cell-anchor-xform");class u extends a{constructor(){super(),this.map={"xdr:twoCellAnchor":new l,"xdr:oneCellAnchor":new c}}prepare(h){h.anchors.forEach((p,f)=>{p.anchorType=function(m){return(typeof m.range=="string"?n.decode(m.range):m.range).br?"xdr:twoCellAnchor":"xdr:oneCellAnchor"}(p),this.map[p.anchorType].prepare(p,{index:f})})}get tag(){return"xdr:wsDr"}render(h,p){h.openXml(o.StdDocAttributes),h.openNode(this.tag,u.DRAWING_ATTRIBUTES),p.anchors.forEach(f=>{this.map[f.anchorType].render(h,f)}),h.closeNode()}parseOpen(h){if(this.parser)return this.parser.parseOpen(h),!0;switch(h.name){case this.tag:this.reset(),this.model={anchors:[]};break;default:this.parser=this.map[h.name],this.parser&&this.parser.parseOpen(h)}return!0}parseText(h){this.parser&&this.parser.parseText(h)}parseClose(h){if(this.parser)return this.parser.parseClose(h)||(this.model.anchors.push(this.parser.model),this.parser=void 0),!0;switch(h){case this.tag:return!1;default:return!0}}reconcile(h,p){h.anchors.forEach(f=>{f.br?this.map["xdr:twoCellAnchor"].reconcile(f,p):this.map["xdr:oneCellAnchor"].reconcile(f,p)})}}u.DRAWING_ATTRIBUTES={"xmlns:xdr":"http://schemas.openxmlformats.org/drawingml/2006/spreadsheetDrawing","xmlns:a":"http://schemas.openxmlformats.org/drawingml/2006/main"},s.exports=u},{"../../../utils/col-cache":19,"../../../utils/xml-stream":28,"../base-xform":32,"./one-cell-anchor-xform":67,"./two-cell-anchor-xform":70}],63:[function(i,s,r){const n=i("../base-xform");s.exports=class extends n{get tag(){return"a:extLst"}render(o){o.openNode(this.tag),o.openNode("a:ext",{uri:"{FF2B5EF4-FFF2-40B4-BE49-F238E27FC236}"}),o.leafNode("a16:creationId",{"xmlns:a16":"http://schemas.microsoft.com/office/drawing/2014/main",id:"{00000000-0008-0000-0000-000002000000}"}),o.closeNode(),o.closeNode()}parseOpen(o){switch(o.name){case this.tag:default:return!0}}parseText(){}parseClose(o){switch(o){case this.tag:return!1;default:return!0}}}},{"../base-xform":32}],64:[function(i,s,r){const n=i("../base-xform");s.exports=class extends n{constructor(o){super(),this.tag=o.tag,this.map={}}render(o,a){o.openNode(this.tag);const l=Math.floor(9525*a.width),c=Math.floor(9525*a.height);o.addAttribute("cx",l),o.addAttribute("cy",c),o.closeNode()}parseOpen(o){return o.name===this.tag&&(this.model={width:parseInt(o.attributes.cx||"0",10)/9525,height:parseInt(o.attributes.cy||"0",10)/9525},!0)}parseText(){}parseClose(){return!1}}},{"../base-xform":32}],65:[function(i,s,r){const n=i("../base-xform");s.exports=class extends n{get tag(){return"a:hlinkClick"}render(o,a){a.hyperlinks&&a.hyperlinks.rId&&o.leafNode(this.tag,{"xmlns:r":"http://schemas.openxmlformats.org/officeDocument/2006/relationships","r:id":a.hyperlinks.rId,tooltip:a.hyperlinks.tooltip})}parseOpen(o){switch(o.name){case this.tag:return this.model={hyperlinks:{rId:o.attributes["r:id"],tooltip:o.attributes.tooltip}},!0;default:return!0}}parseText(){}parseClose(){return!1}}},{"../base-xform":32}],66:[function(i,s,r){const n=i("../base-xform"),o=i("./c-nv-pr-xform"),a=i("./c-nv-pic-pr-xform");s.exports=class extends n{constructor(){super(),this.map={"xdr:cNvPr":new o,"xdr:cNvPicPr":new a}}get tag(){return"xdr:nvPicPr"}render(l,c){l.openNode(this.tag),this.map["xdr:cNvPr"].render(l,c),this.map["xdr:cNvPicPr"].render(l,c),l.closeNode()}parseOpen(l){if(this.parser)return this.parser.parseOpen(l),!0;switch(l.name){case this.tag:this.reset();break;default:this.parser=this.map[l.name],this.parser&&this.parser.parseOpen(l)}return!0}parseText(){}parseClose(l){if(this.parser)return this.parser.parseClose(l)||(this.parser=void 0),!0;switch(l){case this.tag:return this.model=this.map["xdr:cNvPr"].model,!1;default:return!0}}}},{"../base-xform":32,"./c-nv-pic-pr-xform":59,"./c-nv-pr-xform":60}],67:[function(i,s,r){const n=i("./base-cell-anchor-xform"),o=i("../static-xform"),a=i("./cell-position-xform"),l=i("./ext-xform"),c=i("./pic-xform");s.exports=class extends n{constructor(){super(),this.map={"xdr:from":new a({tag:"xdr:from"}),"xdr:ext":new l({tag:"xdr:ext"}),"xdr:pic":new c,"xdr:clientData":new o({tag:"xdr:clientData"})}}get tag(){return"xdr:oneCellAnchor"}prepare(u,d){this.map["xdr:pic"].prepare(u.picture,d)}render(u,d){u.openNode(this.tag,{editAs:d.range.editAs||"oneCell"}),this.map["xdr:from"].render(u,d.range.tl),this.map["xdr:ext"].render(u,d.range.ext),this.map["xdr:pic"].render(u,d.picture),this.map["xdr:clientData"].render(u,{}),u.closeNode()}parseClose(u){if(this.parser)return this.parser.parseClose(u)||(this.parser=void 0),!0;switch(u){case this.tag:return this.model.range.tl=this.map["xdr:from"].model,this.model.range.ext=this.map["xdr:ext"].model,this.model.picture=this.map["xdr:pic"].model,!1;default:return!0}}reconcile(u,d){u.medium=this.reconcilePicture(u.picture,d)}}},{"../static-xform":120,"./base-cell-anchor-xform":56,"./cell-position-xform":61,"./ext-xform":64,"./pic-xform":68}],68:[function(i,s,r){const n=i("../base-xform"),o=i("../static-xform"),a=i("./blip-fill-xform"),l=i("./nv-pic-pr-xform"),c=i("./sp-pr");s.exports=class extends n{constructor(){super(),this.map={"xdr:nvPicPr":new l,"xdr:blipFill":new a,"xdr:spPr":new o(c)}}get tag(){return"xdr:pic"}prepare(u,d){u.index=d.index+1}render(u,d){u.openNode(this.tag),this.map["xdr:nvPicPr"].render(u,d),this.map["xdr:blipFill"].render(u,d),this.map["xdr:spPr"].render(u,d),u.closeNode()}parseOpen(u){if(this.parser)return this.parser.parseOpen(u),!0;switch(u.name){case this.tag:this.reset();break;default:this.parser=this.map[u.name],this.parser&&this.parser.parseOpen(u)}return!0}parseText(){}parseClose(u){if(this.parser)return this.parser.parseClose(u)||(this.mergeModel(this.parser.model),this.parser=void 0),!0;switch(u){case this.tag:return!1;default:return!0}}}},{"../base-xform":32,"../static-xform":120,"./blip-fill-xform":57,"./nv-pic-pr-xform":66,"./sp-pr":69}],69:[function(i,s,r){s.exports={tag:"xdr:spPr",c:[{tag:"a:xfrm",c:[{tag:"a:off",$:{x:"0",y:"0"}},{tag:"a:ext",$:{cx:"0",cy:"0"}}]},{tag:"a:prstGeom",$:{prst:"rect"},c:[{tag:"a:avLst"}]}]}},{}],70:[function(i,s,r){const n=i("./base-cell-anchor-xform"),o=i("../static-xform"),a=i("./cell-position-xform"),l=i("./pic-xform");s.exports=class extends n{constructor(){super(),this.map={"xdr:from":new a({tag:"xdr:from"}),"xdr:to":new a({tag:"xdr:to"}),"xdr:pic":new l,"xdr:clientData":new o({tag:"xdr:clientData"})}}get tag(){return"xdr:twoCellAnchor"}prepare(c,u){this.map["xdr:pic"].prepare(c.picture,u)}render(c,u){c.openNode(this.tag,{editAs:u.range.editAs||"oneCell"}),this.map["xdr:from"].render(c,u.range.tl),this.map["xdr:to"].render(c,u.range.br),this.map["xdr:pic"].render(c,u.picture),this.map["xdr:clientData"].render(c,{}),c.closeNode()}parseClose(c){if(this.parser)return this.parser.parseClose(c)||(this.parser=void 0),!0;switch(c){case this.tag:return this.model.range.tl=this.map["xdr:from"].model,this.model.range.br=this.map["xdr:to"].model,this.model.picture=this.map["xdr:pic"].model,!1;default:return!0}}reconcile(c,u){c.medium=this.reconcilePicture(c.picture,u)}}},{"../static-xform":120,"./base-cell-anchor-xform":56,"./cell-position-xform":61,"./pic-xform":68}],71:[function(i,s,r){const n=i("./base-xform");s.exports=class extends n{constructor(o){super(),this.tag=o.tag,this.always=!!o.always,this.count=o.count,this.empty=o.empty,this.$count=o.$count||"count",this.$=o.$,this.childXform=o.childXform,this.maxItems=o.maxItems}prepare(o,a){const{childXform:l}=this;o&&o.forEach((c,u)=>{a.index=u,l.prepare(c,a)})}render(o,a){if(this.always||a&&a.length){o.openNode(this.tag,this.$),this.count&&o.addAttribute(this.$count,a&&a.length||0);const{childXform:l}=this;(a||[]).forEach((c,u)=>{l.render(o,c,u)}),o.closeNode()}else this.empty&&o.leafNode(this.tag)}parseOpen(o){if(this.parser)return this.parser.parseOpen(o),!0;switch(o.name){case this.tag:return this.model=[],!0;default:return!!this.childXform.parseOpen(o)&&(this.parser=this.childXform,!0)}}parseText(o){this.parser&&this.parser.parseText(o)}parseClose(o){if(this.parser){if(!this.parser.parseClose(o)&&(this.model.push(this.parser.model),this.parser=void 0,this.maxItems&&this.model.length>this.maxItems))throw new Error(`Max ${this.childXform.tag} count (${this.maxItems}) exceeded`);return!0}return!1}reconcile(o,a){if(o){const{childXform:l}=this;o.forEach(c=>{l.reconcile(c,a)})}}}},{"./base-xform":32}],72:[function(i,s,r){const n=i("../../../utils/col-cache"),o=i("../base-xform");s.exports=class extends o{get tag(){return"autoFilter"}render(a,l){if(l)if(typeof l=="string")a.leafNode("autoFilter",{ref:l});else{const c=function(h){return typeof h=="string"?h:n.getAddress(h.row,h.column).address},u=c(l.from),d=c(l.to);u&&d&&a.leafNode("autoFilter",{ref:`${u}:${d}`})}}parseOpen(a){a.name==="autoFilter"&&(this.model=a.attributes.ref)}}},{"../../../utils/col-cache":19,"../base-xform":32}],73:[function(i,s,r){const n=i("../../../utils/utils"),o=i("../base-xform"),a=i("../../../doc/range"),l=i("../../../doc/enums"),c=i("../strings/rich-text-xform");function u(d){if(d==null)return l.ValueType.Null;if(d instanceof String||typeof d=="string")return l.ValueType.String;if(typeof d=="number")return l.ValueType.Number;if(typeof d=="boolean")return l.ValueType.Boolean;if(d instanceof Date)return l.ValueType.Date;if(d.text&&d.hyperlink)return l.ValueType.Hyperlink;if(d.formula)return l.ValueType.Formula;if(d.error)return l.ValueType.Error;throw new Error("I could not understand type of value")}s.exports=class extends o{constructor(){super(),this.richTextXForm=new c}get tag(){return"c"}prepare(d,h){const p=h.styles.addStyleModel(d.style||{},function(f){switch(f.type){case l.ValueType.Formula:return u(f.result);default:return f.type}}(d));switch(p&&(d.styleId=p),d.comment&&h.comments.push({...d.comment,ref:d.address}),d.type){case l.ValueType.String:case l.ValueType.RichText:h.sharedStrings&&(d.ssId=h.sharedStrings.add(d.value));break;case l.ValueType.Date:h.date1904&&(d.date1904=!0);break;case l.ValueType.Hyperlink:h.sharedStrings&&d.text!==void 0&&d.text!==null&&(d.ssId=h.sharedStrings.add(d.text)),h.hyperlinks.push({address:d.address,target:d.hyperlink,tooltip:d.tooltip});break;case l.ValueType.Merge:h.merges.add(d);break;case l.ValueType.Formula:if(h.date1904&&(d.date1904=!0),d.shareType==="shared"&&(d.si=h.siFormulae++),d.formula)h.formulae[d.address]=d;else if(d.sharedFormula){const f=h.formulae[d.sharedFormula];if(!f)throw new Error("Shared Formula master must exist above and or left of clone for cell "+d.address);f.si===void 0?(f.shareType="shared",f.si=h.siFormulae++,f.range=new a(f.address,d.address)):f.range&&f.range.expandToAddress(d.address),d.si=f.si}}}renderFormula(d,h){let p=null;switch(h.shareType){case"shared":p={t:"shared",ref:h.ref||h.range.range,si:h.si};break;case"array":p={t:"array",ref:h.ref};break;default:h.si!==void 0&&(p={t:"shared",si:h.si})}switch(u(h.result)){case l.ValueType.Null:d.leafNode("f",p,h.formula);break;case l.ValueType.String:d.addAttribute("t","str"),d.leafNode("f",p,h.formula),d.leafNode("v",null,h.result);break;case l.ValueType.Number:d.leafNode("f",p,h.formula),d.leafNode("v",null,h.result);break;case l.ValueType.Boolean:d.addAttribute("t","b"),d.leafNode("f",p,h.formula),d.leafNode("v",null,h.result?1:0);break;case l.ValueType.Error:d.addAttribute("t","e"),d.leafNode("f",p,h.formula),d.leafNode("v",null,h.result.error);break;case l.ValueType.Date:d.leafNode("f",p,h.formula),d.leafNode("v",null,n.dateToExcel(h.result,h.date1904));break;default:throw new Error("I could not understand type of value")}}render(d,h){if(h.type!==l.ValueType.Null||h.styleId){switch(d.openNode("c"),d.addAttribute("r",h.address),h.styleId&&d.addAttribute("s",h.styleId),h.type){case l.ValueType.Null:break;case l.ValueType.Number:d.leafNode("v",null,h.value);break;case l.ValueType.Boolean:d.addAttribute("t","b"),d.leafNode("v",null,h.value?"1":"0");break;case l.ValueType.Error:d.addAttribute("t","e"),d.leafNode("v",null,h.value.error);break;case l.ValueType.String:case l.ValueType.RichText:h.ssId!==void 0?(d.addAttribute("t","s"),d.leafNode("v",null,h.ssId)):h.value&&h.value.richText?(d.addAttribute("t","inlineStr"),d.openNode("is"),h.value.richText.forEach(p=>{this.richTextXForm.render(d,p)}),d.closeNode("is")):(d.addAttribute("t","str"),d.leafNode("v",null,h.value));break;case l.ValueType.Date:d.leafNode("v",null,n.dateToExcel(h.value,h.date1904));break;case l.ValueType.Hyperlink:h.ssId!==void 0?(d.addAttribute("t","s"),d.leafNode("v",null,h.ssId)):(d.addAttribute("t","str"),d.leafNode("v",null,h.text));break;case l.ValueType.Formula:this.renderFormula(d,h);break;case l.ValueType.Merge:}d.closeNode()}}parseOpen(d){if(this.parser)return this.parser.parseOpen(d),!0;switch(d.name){case"c":return this.model={address:d.attributes.r},this.t=d.attributes.t,d.attributes.s&&(this.model.styleId=parseInt(d.attributes.s,10)),!0;case"f":return this.currentNode="f",this.model.si=d.attributes.si,this.model.shareType=d.attributes.t,this.model.ref=d.attributes.ref,!0;case"v":return this.currentNode="v",!0;case"t":return this.currentNode="t",!0;case"r":return this.parser=this.richTextXForm,this.parser.parseOpen(d),!0;default:return!1}}parseText(d){if(this.parser)this.parser.parseText(d);else switch(this.currentNode){case"f":this.model.formula=this.model.formula?this.model.formula+d:d;break;case"v":case"t":this.model.value&&this.model.value.richText?this.model.value.richText.text=this.model.value.richText.text?this.model.value.richText.text+d:d:this.model.value=this.model.value?this.model.value+d:d}}parseClose(d){switch(d){case"c":{const{model:h}=this;if(h.formula||h.shareType)h.type=l.ValueType.Formula,h.value&&(this.t==="str"?h.result=n.xmlDecode(h.value):this.t==="b"?h.result=parseInt(h.value,10)!==0:this.t==="e"?h.result={error:h.value}:h.result=parseFloat(h.value),h.value=void 0);else if(h.value!==void 0)switch(this.t){case"s":h.type=l.ValueType.String,h.value=parseInt(h.value,10);break;case"str":h.type=l.ValueType.String,h.value=n.xmlDecode(h.value);break;case"inlineStr":h.type=l.ValueType.String;break;case"b":h.type=l.ValueType.Boolean,h.value=parseInt(h.value,10)!==0;break;case"e":h.type=l.ValueType.Error,h.value={error:h.value};break;default:h.type=l.ValueType.Number,h.value=parseFloat(h.value)}else h.styleId?h.type=l.ValueType.Null:h.type=l.ValueType.Merge;return!1}case"f":case"v":case"is":return this.currentNode=void 0,!0;case"t":return this.parser?(this.parser.parseClose(d),!0):(this.currentNode=void 0,!0);case"r":return this.model.value=this.model.value||{},this.model.value.richText=this.model.value.richText||[],this.model.value.richText.push(this.parser.model),this.parser=void 0,this.currentNode=void 0,!0;default:return!!this.parser&&(this.parser.parseClose(d),!0)}}reconcile(d,h){const p=d.styleId&&h.styles&&h.styles.getStyleModel(d.styleId);switch(p&&(d.style=p),d.styleId!==void 0&&(d.styleId=void 0),d.type){case l.ValueType.String:typeof d.value=="number"&&h.sharedStrings&&(d.value=h.sharedStrings.getString(d.value)),d.value.richText&&(d.type=l.ValueType.RichText);break;case l.ValueType.Number:p&&n.isDateFmt(p.numFmt)&&(d.type=l.ValueType.Date,d.value=n.excelToDate(d.value,h.date1904));break;case l.ValueType.Formula:d.result!==void 0&&p&&n.isDateFmt(p.numFmt)&&(d.result=n.excelToDate(d.result,h.date1904)),d.shareType==="shared"&&(d.ref?h.formulae[d.si]=d.address:(d.sharedFormula=h.formulae[d.si],delete d.shareType),delete d.si)}const f=h.hyperlinkMap[d.address];f&&(d.type===l.ValueType.Formula?(d.text=d.result,d.result=void 0):(d.text=d.value,d.value=void 0),d.type=l.ValueType.Hyperlink,d.hyperlink=f);const m=h.commentsMap&&h.commentsMap[d.address];m&&(d.comment=m)}}},{"../../../doc/enums":7,"../../../doc/range":10,"../../../utils/utils":27,"../base-xform":32,"../strings/rich-text-xform":122}],74:[function(i,s,r){const n=i("../../base-xform");s.exports=class extends n{get tag(){return"x14:cfIcon"}render(o,a){o.leafNode(this.tag,{iconSet:a.iconSet,iconId:a.iconId})}parseOpen(o){let{attributes:a}=o;this.model={iconSet:a.iconSet,iconId:n.toIntValue(a.iconId)}}parseClose(o){return o!==this.tag}}},{"../../base-xform":32}],75:[function(i,s,r){const{v4:n}=i("uuid"),o=i("../../base-xform"),a=i("../../composite-xform"),l=i("./databar-ext-xform"),c=i("./icon-set-ext-xform"),u={"3Triangles":!0,"3Stars":!0,"5Boxes":!0};class d extends a{constructor(){super(),this.map={"x14:dataBar":this.databarXform=new l,"x14:iconSet":this.iconSetXform=new c}}get tag(){return"x14:cfRule"}static isExt(p){return p.type==="dataBar"?l.isExt(p):!(p.type!=="iconSet"||!p.custom&&!u[p.iconSet])}prepare(p){d.isExt(p)&&(p.x14Id=`{${n()}}`.toUpperCase())}render(p,f){if(d.isExt(f))switch(f.type){case"dataBar":this.renderDataBar(p,f);break;case"iconSet":this.renderIconSet(p,f)}}renderDataBar(p,f){p.openNode(this.tag,{type:"dataBar",id:f.x14Id}),this.databarXform.render(p,f),p.closeNode()}renderIconSet(p,f){p.openNode(this.tag,{type:"iconSet",priority:f.priority,id:f.x14Id||`{${n()}}`}),this.iconSetXform.render(p,f),p.closeNode()}createNewModel(p){let{attributes:f}=p;return{type:f.type,x14Id:f.id,priority:o.toIntValue(f.priority)}}onParserClose(p,f){Object.assign(this.model,f.model)}}s.exports=d},{"../../base-xform":32,"../../composite-xform":48,"./databar-ext-xform":79,"./icon-set-ext-xform":81,uuid:528}],76:[function(i,s,r){const n=i("../../composite-xform"),o=i("./f-ext-xform");s.exports=class extends n{constructor(){super(),this.map={"xm:f":this.fExtXform=new o}}get tag(){return"x14:cfvo"}render(a,l){a.openNode(this.tag,{type:l.type}),l.value!==void 0&&this.fExtXform.render(a,l.value),a.closeNode()}createNewModel(a){return{type:a.attributes.type}}onParserClose(a,l){switch(a){case"xm:f":this.model.value=l.model?parseFloat(l.model):0}}}},{"../../composite-xform":48,"./f-ext-xform":80}],77:[function(i,s,r){const n=i("../../composite-xform"),o=i("./sqref-ext-xform"),a=i("./cf-rule-ext-xform");s.exports=class extends n{constructor(){super(),this.map={"xm:sqref":this.sqRef=new o,"x14:cfRule":this.cfRule=new a}}get tag(){return"x14:conditionalFormatting"}prepare(l,c){l.rules.forEach(u=>{this.cfRule.prepare(u,c)})}render(l,c){c.rules.some(a.isExt)&&(l.openNode(this.tag,{"xmlns:xm":"http://schemas.microsoft.com/office/excel/2006/main"}),c.rules.filter(a.isExt).forEach(u=>this.cfRule.render(l,u)),this.sqRef.render(l,c.ref),l.closeNode())}createNewModel(){return{rules:[]}}onParserClose(l,c){switch(l){case"xm:sqref":this.model.ref=c.model;break;case"x14:cfRule":this.model.rules.push(c.model)}}}},{"../../composite-xform":48,"./cf-rule-ext-xform":75,"./sqref-ext-xform":82}],78:[function(i,s,r){const n=i("../../composite-xform"),o=i("./cf-rule-ext-xform"),a=i("./conditional-formatting-ext-xform");s.exports=class extends n{constructor(){super(),this.map={"x14:conditionalFormatting":this.cfXform=new a}}get tag(){return"x14:conditionalFormattings"}hasContent(l){return l.hasExtContent===void 0&&(l.hasExtContent=l.some(c=>c.rules.some(o.isExt))),l.hasExtContent}prepare(l,c){l.forEach(u=>{this.cfXform.prepare(u,c)})}render(l,c){this.hasContent(c)&&(l.openNode(this.tag),c.forEach(u=>this.cfXform.render(l,u)),l.closeNode())}createNewModel(){return[]}onParserClose(l,c){this.model.push(c.model)}}},{"../../composite-xform":48,"./cf-rule-ext-xform":75,"./conditional-formatting-ext-xform":77}],79:[function(i,s,r){const n=i("../../base-xform"),o=i("../../composite-xform"),a=i("../../style/color-xform"),l=i("./cfvo-ext-xform");s.exports=class extends o{constructor(){super(),this.map={"x14:cfvo":this.cfvoXform=new l,"x14:borderColor":this.borderColorXform=new a("x14:borderColor"),"x14:negativeBorderColor":this.negativeBorderColorXform=new a("x14:negativeBorderColor"),"x14:negativeFillColor":this.negativeFillColorXform=new a("x14:negativeFillColor"),"x14:axisColor":this.axisColorXform=new a("x14:axisColor")}}static isExt(c){return!c.gradient}get tag(){return"x14:dataBar"}render(c,u){c.openNode(this.tag,{minLength:n.toIntAttribute(u.minLength,0,!0),maxLength:n.toIntAttribute(u.maxLength,100,!0),border:n.toBoolAttribute(u.border,!1),gradient:n.toBoolAttribute(u.gradient,!0),negativeBarColorSameAsPositive:n.toBoolAttribute(u.negativeBarColorSameAsPositive,!0),negativeBarBorderColorSameAsPositive:n.toBoolAttribute(u.negativeBarBorderColorSameAsPositive,!0),axisPosition:n.toAttribute(u.axisPosition,"auto"),direction:n.toAttribute(u.direction,"leftToRight")}),u.cfvo.forEach(d=>{this.cfvoXform.render(c,d)}),this.borderColorXform.render(c,u.borderColor),this.negativeBorderColorXform.render(c,u.negativeBorderColor),this.negativeFillColorXform.render(c,u.negativeFillColor),this.axisColorXform.render(c,u.axisColor),c.closeNode()}createNewModel(c){let{attributes:u}=c;return{cfvo:[],minLength:n.toIntValue(u.minLength,0),maxLength:n.toIntValue(u.maxLength,100),border:n.toBoolValue(u.border,!1),gradient:n.toBoolValue(u.gradient,!0),negativeBarColorSameAsPositive:n.toBoolValue(u.negativeBarColorSameAsPositive,!0),negativeBarBorderColorSameAsPositive:n.toBoolValue(u.negativeBarBorderColorSameAsPositive,!0),axisPosition:n.toStringValue(u.axisPosition,"auto"),direction:n.toStringValue(u.direction,"leftToRight")}}onParserClose(c,u){const[,d]=c.split(":");switch(d){case"cfvo":this.model.cfvo.push(u.model);break;default:this.model[d]=u.model}}}},{"../../base-xform":32,"../../composite-xform":48,"../../style/color-xform":128,"./cfvo-ext-xform":76}],80:[function(i,s,r){const n=i("../../base-xform");s.exports=class extends n{get tag(){return"xm:f"}render(o,a){o.leafNode(this.tag,null,a)}parseOpen(){this.model=""}parseText(o){this.model+=o}parseClose(o){return o!==this.tag}}},{"../../base-xform":32}],81:[function(i,s,r){const n=i("../../base-xform"),o=i("../../composite-xform"),a=i("./cfvo-ext-xform"),l=i("./cf-icon-ext-xform");s.exports=class extends o{constructor(){super(),this.map={"x14:cfvo":this.cfvoXform=new a,"x14:cfIcon":this.cfIconXform=new l}}get tag(){return"x14:iconSet"}render(c,u){c.openNode(this.tag,{iconSet:n.toStringAttribute(u.iconSet),reverse:n.toBoolAttribute(u.reverse,!1),showValue:n.toBoolAttribute(u.showValue,!0),custom:n.toBoolAttribute(u.icons,!1)}),u.cfvo.forEach(d=>{this.cfvoXform.render(c,d)}),u.icons&&u.icons.forEach((d,h)=>{d.iconId=h,this.cfIconXform.render(c,d)}),c.closeNode()}createNewModel(c){let{attributes:u}=c;return{cfvo:[],iconSet:n.toStringValue(u.iconSet,"3TrafficLights"),reverse:n.toBoolValue(u.reverse,!1),showValue:n.toBoolValue(u.showValue,!0)}}onParserClose(c,u){const[,d]=c.split(":");switch(d){case"cfvo":this.model.cfvo.push(u.model);break;case"cfIcon":this.model.icons||(this.model.icons=[]),this.model.icons.push(u.model);break;default:this.model[d]=u.model}}}},{"../../base-xform":32,"../../composite-xform":48,"./cf-icon-ext-xform":74,"./cfvo-ext-xform":76}],82:[function(i,s,r){const n=i("../../base-xform");s.exports=class extends n{get tag(){return"xm:sqref"}render(o,a){o.leafNode(this.tag,null,a)}parseOpen(){this.model=""}parseText(o){this.model+=o}parseClose(o){return o!==this.tag}}},{"../../base-xform":32}],83:[function(i,s,r){const n=i("../../base-xform"),o=i("../../composite-xform"),a=i("../../../../doc/range"),l=i("./databar-xform"),c=i("./ext-lst-ref-xform"),u=i("./formula-xform"),d=i("./color-scale-xform"),h=i("./icon-set-xform"),p={"3Triangles":!0,"3Stars":!0,"5Boxes":!0},f=g=>{const{type:y,operator:v}=g;switch(y){case"containsText":case"containsBlanks":case"notContainsBlanks":case"containsErrors":case"notContainsErrors":return{type:"containsText",operator:y};default:return{type:y,operator:v}}};class m extends o{constructor(){super(),this.map={dataBar:this.databarXform=new l,extLst:this.extLstRefXform=new c,formula:this.formulaXform=new u,colorScale:this.colorScaleXform=new d,iconSet:this.iconSetXform=new h}}get tag(){return"cfRule"}static isPrimitive(y){return y.type!=="iconSet"||!y.custom&&!p[y.iconSet]}render(y,v){switch(v.type){case"expression":this.renderExpression(y,v);break;case"cellIs":this.renderCellIs(y,v);break;case"top10":this.renderTop10(y,v);break;case"aboveAverage":this.renderAboveAverage(y,v);break;case"dataBar":this.renderDataBar(y,v);break;case"colorScale":this.renderColorScale(y,v);break;case"iconSet":this.renderIconSet(y,v);break;case"containsText":this.renderText(y,v);break;case"timePeriod":this.renderTimePeriod(y,v)}}renderExpression(y,v){y.openNode(this.tag,{type:"expression",dxfId:v.dxfId,priority:v.priority}),this.formulaXform.render(y,v.formulae[0]),y.closeNode()}renderCellIs(y,v){y.openNode(this.tag,{type:"cellIs",dxfId:v.dxfId,priority:v.priority,operator:v.operator}),v.formulae.forEach(C=>{this.formulaXform.render(y,C)}),y.closeNode()}renderTop10(y,v){y.leafNode(this.tag,{type:"top10",dxfId:v.dxfId,priority:v.priority,percent:n.toBoolAttribute(v.percent,!1),bottom:n.toBoolAttribute(v.bottom,!1),rank:n.toIntValue(v.rank,10,!0)})}renderAboveAverage(y,v){y.leafNode(this.tag,{type:"aboveAverage",dxfId:v.dxfId,priority:v.priority,aboveAverage:n.toBoolAttribute(v.aboveAverage,!0)})}renderDataBar(y,v){y.openNode(this.tag,{type:"dataBar",priority:v.priority}),this.databarXform.render(y,v),this.extLstRefXform.render(y,v),y.closeNode()}renderColorScale(y,v){y.openNode(this.tag,{type:"colorScale",priority:v.priority}),this.colorScaleXform.render(y,v),y.closeNode()}renderIconSet(y,v){m.isPrimitive(v)&&(y.openNode(this.tag,{type:"iconSet",priority:v.priority}),this.iconSetXform.render(y,v),y.closeNode())}renderText(y,v){y.openNode(this.tag,{type:v.operator,dxfId:v.dxfId,priority:v.priority,operator:n.toStringAttribute(v.operator,"containsText")});const C=(b=>{if(b.formulae&&b.formulae[0])return b.formulae[0];const T=new a(b.ref),{tl:A}=T;switch(b.operator){case"containsText":return`NOT(ISERROR(SEARCH("${b.text}",${A})))`;case"containsBlanks":return`LEN(TRIM(${A}))=0`;case"notContainsBlanks":return`LEN(TRIM(${A}))>0`;case"containsErrors":return`ISERROR(${A})`;case"notContainsErrors":return`NOT(ISERROR(${A}))`;default:return}})(v);C&&this.formulaXform.render(y,C),y.closeNode()}renderTimePeriod(y,v){y.openNode(this.tag,{type:"timePeriod",dxfId:v.dxfId,priority:v.priority,timePeriod:v.timePeriod});const C=(b=>{if(b.formulae&&b.formulae[0])return b.formulae[0];const T=new a(b.ref),{tl:A}=T;switch(b.timePeriod){case"thisWeek":return`AND(TODAY()-ROUNDDOWN(${A},0)<=WEEKDAY(TODAY())-1,ROUNDDOWN(${A},0)-TODAY()<=7-WEEKDAY(TODAY()))`;case"lastWeek":return`AND(TODAY()-ROUNDDOWN(${A},0)>=(WEEKDAY(TODAY())),TODAY()-ROUNDDOWN(${A},0)<(WEEKDAY(TODAY())+7))`;case"nextWeek":return`AND(ROUNDDOWN(${A},0)-TODAY()>(7-WEEKDAY(TODAY())),ROUNDDOWN(${A},0)-TODAY()<(15-WEEKDAY(TODAY())))`;case"yesterday":return`FLOOR(${A},1)=TODAY()-1`;case"today":return`FLOOR(${A},1)=TODAY()`;case"tomorrow":return`FLOOR(${A},1)=TODAY()+1`;case"last7Days":return`AND(TODAY()-FLOOR(${A},1)<=6,FLOOR(${A},1)<=TODAY())`;case"lastMonth":return`AND(MONTH(${A})=MONTH(EDATE(TODAY(),0-1)),YEAR(${A})=YEAR(EDATE(TODAY(),0-1)))`;case"thisMonth":return`AND(MONTH(${A})=MONTH(TODAY()),YEAR(${A})=YEAR(TODAY()))`;case"nextMonth":return`AND(MONTH(${A})=MONTH(EDATE(TODAY(),0+1)),YEAR(${A})=YEAR(EDATE(TODAY(),0+1)))`;default:return}})(v);C&&this.formulaXform.render(y,C),y.closeNode()}createNewModel(y){let{attributes:v}=y;return{...f(v),dxfId:n.toIntValue(v.dxfId),priority:n.toIntValue(v.priority),timePeriod:v.timePeriod,percent:n.toBoolValue(v.percent),bottom:n.toBoolValue(v.bottom),rank:n.toIntValue(v.rank),aboveAverage:n.toBoolValue(v.aboveAverage)}}onParserClose(y,v){switch(y){case"dataBar":case"extLst":case"colorScale":case"iconSet":Object.assign(this.model,v.model);break;case"formula":this.model.formulae=this.model.formulae||[],this.model.formulae.push(v.model)}}}s.exports=m},{"../../../../doc/range":10,"../../base-xform":32,"../../composite-xform":48,"./color-scale-xform":85,"./databar-xform":88,"./ext-lst-ref-xform":89,"./formula-xform":90,"./icon-set-xform":91}],84:[function(i,s,r){const n=i("../../base-xform");s.exports=class extends n{get tag(){return"cfvo"}render(o,a){o.leafNode(this.tag,{type:a.type,val:a.value})}parseOpen(o){this.model={type:o.attributes.type,value:n.toFloatValue(o.attributes.val)}}parseClose(o){return o!==this.tag}}},{"../../base-xform":32}],85:[function(i,s,r){const n=i("../../composite-xform"),o=i("../../style/color-xform"),a=i("./cfvo-xform");s.exports=class extends n{constructor(){super(),this.map={cfvo:this.cfvoXform=new a,color:this.colorXform=new o}}get tag(){return"colorScale"}render(l,c){l.openNode(this.tag),c.cfvo.forEach(u=>{this.cfvoXform.render(l,u)}),c.color.forEach(u=>{this.colorXform.render(l,u)}),l.closeNode()}createNewModel(l){return{cfvo:[],color:[]}}onParserClose(l,c){this.model[l].push(c.model)}}},{"../../composite-xform":48,"../../style/color-xform":128,"./cfvo-xform":84}],86:[function(i,s,r){const n=i("../../composite-xform"),o=i("./cf-rule-xform");s.exports=class extends n{constructor(){super(),this.map={cfRule:new o}}get tag(){return"conditionalFormatting"}render(a,l){l.rules.some(o.isPrimitive)&&(a.openNode(this.tag,{sqref:l.ref}),l.rules.forEach(c=>{o.isPrimitive(c)&&(c.ref=l.ref,this.map.cfRule.render(a,c))}),a.closeNode())}createNewModel(a){let{attributes:l}=a;return{ref:l.sqref,rules:[]}}onParserClose(a,l){this.model.rules.push(l.model)}}},{"../../composite-xform":48,"./cf-rule-xform":83}],87:[function(i,s,r){const n=i("../../base-xform"),o=i("./conditional-formatting-xform");s.exports=class extends n{constructor(){super(),this.cfXform=new o}get tag(){return"conditionalFormatting"}reset(){this.model=[]}prepare(a,l){let c=a.reduce((u,d)=>Math.max(u,...d.rules.map(h=>h.priority||0)),1);a.forEach(u=>{u.rules.forEach(d=>{d.priority||(d.priority=c++),d.style&&(d.dxfId=l.styles.addDxfStyle(d.style))})})}render(a,l){l.forEach(c=>{this.cfXform.render(a,c)})}parseOpen(a){if(this.parser)return this.parser.parseOpen(a),!0;switch(a.name){case"conditionalFormatting":return this.parser=this.cfXform,this.parser.parseOpen(a),!0;default:return!1}}parseText(a){this.parser&&this.parser.parseText(a)}parseClose(a){return!!this.parser&&(!!this.parser.parseClose(a)||(this.model.push(this.parser.model),this.parser=void 0,!1))}reconcile(a,l){a.forEach(c=>{c.rules.forEach(u=>{u.dxfId!==void 0&&(u.style=l.styles.getDxfStyle(u.dxfId),delete u.dxfId)})})}}},{"../../base-xform":32,"./conditional-formatting-xform":86}],88:[function(i,s,r){const n=i("../../composite-xform"),o=i("../../style/color-xform"),a=i("./cfvo-xform");s.exports=class extends n{constructor(){super(),this.map={cfvo:this.cfvoXform=new a,color:this.colorXform=new o}}get tag(){return"dataBar"}render(l,c){l.openNode(this.tag),c.cfvo.forEach(u=>{this.cfvoXform.render(l,u)}),this.colorXform.render(l,c.color),l.closeNode()}createNewModel(){return{cfvo:[]}}onParserClose(l,c){switch(l){case"cfvo":this.model.cfvo.push(c.model);break;case"color":this.model.color=c.model}}}},{"../../composite-xform":48,"../../style/color-xform":128,"./cfvo-xform":84}],89:[function(i,s,r){const n=i("../../base-xform"),o=i("../../composite-xform");class a extends n{get tag(){return"x14:id"}render(u,d){u.leafNode(this.tag,null,d)}parseOpen(){this.model=""}parseText(u){this.model+=u}parseClose(u){return u!==this.tag}}class l extends o{constructor(){super(),this.map={"x14:id":this.idXform=new a}}get tag(){return"ext"}render(u,d){u.openNode(this.tag,{uri:"{B025F937-C7B1-47D3-B67F-A62EFF666E3E}","xmlns:x14":"http://schemas.microsoft.com/office/spreadsheetml/2009/9/main"}),this.idXform.render(u,d.x14Id),u.closeNode()}createNewModel(){return{}}onParserClose(u,d){this.model.x14Id=d.model}}s.exports=class extends o{constructor(){super(),this.map={ext:new l}}get tag(){return"extLst"}render(c,u){c.openNode(this.tag),this.map.ext.render(c,u),c.closeNode()}createNewModel(){return{}}onParserClose(c,u){Object.assign(this.model,u.model)}}},{"../../base-xform":32,"../../composite-xform":48}],90:[function(i,s,r){const n=i("../../base-xform");s.exports=class extends n{get tag(){return"formula"}render(o,a){o.leafNode(this.tag,null,a)}parseOpen(){this.model=""}parseText(o){this.model+=o}parseClose(o){return o!==this.tag}}},{"../../base-xform":32}],91:[function(i,s,r){const n=i("../../base-xform"),o=i("../../composite-xform"),a=i("./cfvo-xform");s.exports=class extends o{constructor(){super(),this.map={cfvo:this.cfvoXform=new a}}get tag(){return"iconSet"}render(l,c){l.openNode(this.tag,{iconSet:n.toStringAttribute(c.iconSet,"3TrafficLights"),reverse:n.toBoolAttribute(c.reverse,!1),showValue:n.toBoolAttribute(c.showValue,!0)}),c.cfvo.forEach(u=>{this.cfvoXform.render(l,u)}),l.closeNode()}createNewModel(l){let{attributes:c}=l;return{iconSet:n.toStringValue(c.iconSet,"3TrafficLights"),reverse:n.toBoolValue(c.reverse),showValue:n.toBoolValue(c.showValue),cfvo:[]}}onParserClose(l,c){this.model[l].push(c.model)}}},{"../../base-xform":32,"../../composite-xform":48,"./cfvo-xform":84}],92:[function(i,s,r){const n=i("../../../utils/utils"),o=i("../base-xform");s.exports=class extends o{get tag(){return"col"}prepare(a,l){const c=l.styles.addStyleModel(a.style||{});c&&(a.styleId=c)}render(a,l){a.openNode("col"),a.addAttribute("min",l.min),a.addAttribute("max",l.max),l.width&&a.addAttribute("width",l.width),l.styleId&&a.addAttribute("style",l.styleId),l.hidden&&a.addAttribute("hidden","1"),l.bestFit&&a.addAttribute("bestFit","1"),l.outlineLevel&&a.addAttribute("outlineLevel",l.outlineLevel),l.collapsed&&a.addAttribute("collapsed","1"),a.addAttribute("customWidth","1"),a.closeNode()}parseOpen(a){if(a.name==="col"){const l=this.model={min:parseInt(a.attributes.min||"0",10),max:parseInt(a.attributes.max||"0",10),width:a.attributes.width===void 0?void 0:parseFloat(a.attributes.width||"0")};return a.attributes.style&&(l.styleId=parseInt(a.attributes.style,10)),n.parseBoolean(a.attributes.hidden)&&(l.hidden=!0),n.parseBoolean(a.attributes.bestFit)&&(l.bestFit=!0),a.attributes.outlineLevel&&(l.outlineLevel=parseInt(a.attributes.outlineLevel,10)),n.parseBoolean(a.attributes.collapsed)&&(l.collapsed=!0),!0}return!1}parseText(){}parseClose(){return!1}reconcile(a,l){a.styleId&&(a.style=l.styles.getStyleModel(a.styleId))}}},{"../../../utils/utils":27,"../base-xform":32}],93:[function(i,s,r){const n=i("../../../utils/under-dash"),o=i("../../../utils/utils"),a=i("../../../utils/col-cache"),l=i("../base-xform"),c=i("../../../doc/range");function u(h,p,f,m){const g=p[f];g!==void 0?h[f]=g:m!==void 0&&(h[f]=m)}function d(h,p,f,m){const g=p[f];g!==void 0&&(h[f]=o.parseBoolean(g))}s.exports=class extends l{get tag(){return"dataValidations"}render(h,p){const f=function(m){const g=n.map(m,(C,b)=>({address:b,dataValidation:C,marked:!1})).sort((C,b)=>n.strcmp(C.address,b.address)),y=n.keyBy(g,"address"),v=(C,b,T)=>{for(let A=0;A<b;A++){const I=a.encodeAddress(C.row+A,T);if(!m[I]||!n.isEqual(m[C.address],m[I]))return!1}return!0};return g.map(C=>{if(!C.marked){const b=a.decodeEx(C.address);if(b.dimensions)return y[b.dimensions].marked=!0,{...C.dataValidation,sqref:C.address};let T=1,A=a.encodeAddress(b.row+T,b.col);for(;m[A]&&n.isEqual(C.dataValidation,m[A]);)T++,A=a.encodeAddress(b.row+T,b.col);let I=1;for(;v(b,T,b.col+I);)I++;for(let D=0;D<T;D++)for(let F=0;F<I;F++)A=a.encodeAddress(b.row+D,b.col+F),y[A].marked=!0;if(T>1||I>1){const D=b.row+(T-1),F=b.col+(I-1);return{...C.dataValidation,sqref:`${C.address}:${a.encodeAddress(D,F)}`}}return{...C.dataValidation,sqref:C.address}}return null}).filter(Boolean)}(p);f.length&&(h.openNode("dataValidations",{count:f.length}),f.forEach(m=>{h.openNode("dataValidation"),m.type!=="any"&&(h.addAttribute("type",m.type),m.operator&&m.type!=="list"&&m.operator!=="between"&&h.addAttribute("operator",m.operator),m.allowBlank&&h.addAttribute("allowBlank","1")),m.showInputMessage&&h.addAttribute("showInputMessage","1"),m.promptTitle&&h.addAttribute("promptTitle",m.promptTitle),m.prompt&&h.addAttribute("prompt",m.prompt),m.showErrorMessage&&h.addAttribute("showErrorMessage","1"),m.errorStyle&&h.addAttribute("errorStyle",m.errorStyle),m.errorTitle&&h.addAttribute("errorTitle",m.errorTitle),m.error&&h.addAttribute("error",m.error),h.addAttribute("sqref",m.sqref),(m.formulae||[]).forEach((g,y)=>{h.openNode("formula"+(y+1)),m.type==="date"?h.writeText(o.dateToExcel(new Date(g))):h.writeText(g),h.closeNode()}),h.closeNode()}),h.closeNode())}parseOpen(h){switch(h.name){case"dataValidations":return this.model={},!0;case"dataValidation":{this._address=h.attributes.sqref;const p={type:h.attributes.type||"any",formulae:[]};switch(h.attributes.type&&d(p,h.attributes,"allowBlank"),d(p,h.attributes,"showInputMessage"),d(p,h.attributes,"showErrorMessage"),p.type){case"any":case"list":case"custom":break;default:u(p,h.attributes,"operator","between")}return u(p,h.attributes,"promptTitle"),u(p,h.attributes,"prompt"),u(p,h.attributes,"errorStyle"),u(p,h.attributes,"errorTitle"),u(p,h.attributes,"error"),this._dataValidation=p,!0}case"formula1":case"formula2":return this._formula=[],!0;default:return!1}}parseText(h){this._formula&&this._formula.push(h)}parseClose(h){switch(h){case"dataValidations":return!1;case"dataValidation":return this._dataValidation.formulae&&this._dataValidation.formulae.length||(delete this._dataValidation.formulae,delete this._dataValidation.operator),(this._address.split(/\s+/g)||[]).forEach(p=>{p.includes(":")?new c(p).forEachAddress(f=>{this.model[f]=this._dataValidation}):this.model[p]=this._dataValidation}),!0;case"formula1":case"formula2":{let p=this._formula.join("");switch(this._dataValidation.type){case"whole":case"textLength":p=parseInt(p,10);break;case"decimal":p=parseFloat(p);break;case"date":p=o.excelToDate(parseFloat(p))}return this._dataValidation.formulae.push(p),this._formula=void 0,!0}default:return!0}}}},{"../../../doc/range":10,"../../../utils/col-cache":19,"../../../utils/under-dash":26,"../../../utils/utils":27,"../base-xform":32}],94:[function(i,s,r){const n=i("../base-xform");s.exports=class extends n{get tag(){return"dimension"}render(o,a){a&&o.leafNode("dimension",{ref:a})}parseOpen(o){return o.name==="dimension"&&(this.model=o.attributes.ref,!0)}parseText(){}parseClose(){return!1}}},{"../base-xform":32}],95:[function(i,s,r){const n=i("../base-xform");s.exports=class extends n{get tag(){return"drawing"}render(o,a){a&&o.leafNode(this.tag,{"r:id":a.rId})}parseOpen(o){switch(o.name){case this.tag:return this.model={rId:o.attributes["r:id"]},!0;default:return!1}}parseText(){}parseClose(){return!1}}},{"../base-xform":32}],96:[function(i,s,r){const n=i("../composite-xform"),o=i("./cf-ext/conditional-formattings-ext-xform");class a extends n{constructor(){super(),this.map={"x14:conditionalFormattings":this.conditionalFormattings=new o}}get tag(){return"ext"}hasContent(c){return this.conditionalFormattings.hasContent(c.conditionalFormattings)}prepare(c,u){this.conditionalFormattings.prepare(c.conditionalFormattings,u)}render(c,u){c.openNode("ext",{uri:"{78C0D931-6437-407d-A8EE-F0AAD7539E65}","xmlns:x14":"http://schemas.microsoft.com/office/spreadsheetml/2009/9/main"}),this.conditionalFormattings.render(c,u.conditionalFormattings),c.closeNode()}createNewModel(){return{}}onParserClose(c,u){this.model[c]=u.model}}s.exports=class extends n{constructor(){super(),this.map={ext:this.ext=new a}}get tag(){return"extLst"}prepare(l,c){this.ext.prepare(l,c)}hasContent(l){return this.ext.hasContent(l)}render(l,c){this.hasContent(c)&&(l.openNode("extLst"),this.ext.render(l,c),l.closeNode())}createNewModel(){return{}}onParserClose(l,c){Object.assign(this.model,c.model)}}},{"../composite-xform":48,"./cf-ext/conditional-formattings-ext-xform":78}],97:[function(i,s,r){const n=i("../base-xform");s.exports=class extends n{get tag(){return"headerFooter"}render(o,a){if(a){o.addRollback();let l=!1;o.openNode("headerFooter"),a.differentFirst&&(o.addAttribute("differentFirst","1"),l=!0),a.differentOddEven&&(o.addAttribute("differentOddEven","1"),l=!0),a.oddHeader&&typeof a.oddHeader=="string"&&(o.leafNode("oddHeader",null,a.oddHeader),l=!0),a.oddFooter&&typeof a.oddFooter=="string"&&(o.leafNode("oddFooter",null,a.oddFooter),l=!0),a.evenHeader&&typeof a.evenHeader=="string"&&(o.leafNode("evenHeader",null,a.evenHeader),l=!0),a.evenFooter&&typeof a.evenFooter=="string"&&(o.leafNode("evenFooter",null,a.evenFooter),l=!0),a.firstHeader&&typeof a.firstHeader=="string"&&(o.leafNode("firstHeader",null,a.firstHeader),l=!0),a.firstFooter&&typeof a.firstFooter=="string"&&(o.leafNode("firstFooter",null,a.firstFooter),l=!0),l?(o.closeNode(),o.commit()):o.rollback()}}parseOpen(o){switch(o.name){case"headerFooter":return this.model={},o.attributes.differentFirst&&(this.model.differentFirst=parseInt(o.attributes.differentFirst,0)===1),o.attributes.differentOddEven&&(this.model.differentOddEven=parseInt(o.attributes.differentOddEven,0)===1),!0;case"oddHeader":return this.currentNode="oddHeader",!0;case"oddFooter":return this.currentNode="oddFooter",!0;case"evenHeader":return this.currentNode="evenHeader",!0;case"evenFooter":return this.currentNode="evenFooter",!0;case"firstHeader":return this.currentNode="firstHeader",!0;case"firstFooter":return this.currentNode="firstFooter",!0;default:return!1}}parseText(o){switch(this.currentNode){case"oddHeader":this.model.oddHeader=o;break;case"oddFooter":this.model.oddFooter=o;break;case"evenHeader":this.model.evenHeader=o;break;case"evenFooter":this.model.evenFooter=o;break;case"firstHeader":this.model.firstHeader=o;break;case"firstFooter":this.model.firstFooter=o}}parseClose(){switch(this.currentNode){case"oddHeader":case"oddFooter":case"evenHeader":case"evenFooter":case"firstHeader":case"firstFooter":return this.currentNode=void 0,!0;default:return!1}}}},{"../base-xform":32}],98:[function(i,s,r){const n=i("../base-xform");s.exports=class extends n{get tag(){return"hyperlink"}render(o,a){this.isInternalLink(a)?o.leafNode("hyperlink",{ref:a.address,"r:id":a.rId,tooltip:a.tooltip,location:a.target}):o.leafNode("hyperlink",{ref:a.address,"r:id":a.rId,tooltip:a.tooltip})}parseOpen(o){return o.name==="hyperlink"&&(this.model={address:o.attributes.ref,rId:o.attributes["r:id"],tooltip:o.attributes.tooltip},o.attributes.location&&(this.model.target=o.attributes.location),!0)}parseText(){}parseClose(){return!1}isInternalLink(o){return o.target&&/^[^!]+![a-zA-Z]+[\d]+$/.test(o.target)}}},{"../base-xform":32}],99:[function(i,s,r){const n=i("../base-xform");s.exports=class extends n{get tag(){return"mergeCell"}render(o,a){o.leafNode("mergeCell",{ref:a})}parseOpen(o){return o.name==="mergeCell"&&(this.model=o.attributes.ref,!0)}parseText(){}parseClose(){return!1}}},{"../base-xform":32}],100:[function(i,s,r){const n=i("../../../utils/under-dash"),o=i("../../../doc/range"),a=i("../../../utils/col-cache"),l=i("../../../doc/enums");s.exports=class{constructor(){this.merges={}}add(c){if(this.merges[c.master])this.merges[c.master].expandToAddress(c.address);else{const u=`${c.master}:${c.address}`;this.merges[c.master]=new o(u)}}get mergeCells(){return n.map(this.merges,c=>c.range)}reconcile(c,u){n.each(c,d=>{const h=a.decode(d);for(let p=h.top;p<=h.bottom;p++){const f=u[p-1];for(let m=h.left;m<=h.right;m++){const g=f.cells[m-1];g?g.type===l.ValueType.Merge&&(g.master=h.tl):f.cells[m]={type:l.ValueType.Null,address:a.encodeAddress(p,m)}}}})}getMasterAddress(c){const u=this.hash[c];return u&&u.tl}}},{"../../../doc/enums":7,"../../../doc/range":10,"../../../utils/col-cache":19,"../../../utils/under-dash":26}],101:[function(i,s,r){const n=i("../base-xform"),o=a=>a!==void 0;s.exports=class extends n{get tag(){return"outlinePr"}render(a,l){return!(!l||!o(l.summaryBelow)&&!o(l.summaryRight))&&(a.leafNode(this.tag,{summaryBelow:o(l.summaryBelow)?Number(l.summaryBelow):void 0,summaryRight:o(l.summaryRight)?Number(l.summaryRight):void 0}),!0)}parseOpen(a){return a.name===this.tag&&(this.model={summaryBelow:o(a.attributes.summaryBelow)?!!Number(a.attributes.summaryBelow):void 0,summaryRight:o(a.attributes.summaryRight)?!!Number(a.attributes.summaryRight):void 0},!0)}parseText(){}parseClose(){return!1}}},{"../base-xform":32}],102:[function(i,s,r){const n=i("../base-xform");s.exports=class extends n{get tag(){return"brk"}render(o,a){o.leafNode("brk",a)}parseOpen(o){return o.name==="brk"&&(this.model=o.attributes.ref,!0)}parseText(){}parseClose(){return!1}}},{"../base-xform":32}],103:[function(i,s,r){const n=i("../../../utils/under-dash"),o=i("../base-xform");s.exports=class extends o{get tag(){return"pageMargins"}render(a,l){if(l){const c={left:l.left,right:l.right,top:l.top,bottom:l.bottom,header:l.header,footer:l.footer};n.some(c,u=>u!==void 0)&&a.leafNode(this.tag,c)}}parseOpen(a){switch(a.name){case this.tag:return this.model={left:parseFloat(a.attributes.left||.7),right:parseFloat(a.attributes.right||.7),top:parseFloat(a.attributes.top||.75),bottom:parseFloat(a.attributes.bottom||.75),header:parseFloat(a.attributes.header||.3),footer:parseFloat(a.attributes.footer||.3)},!0;default:return!1}}parseText(){}parseClose(){return!1}}},{"../../../utils/under-dash":26,"../base-xform":32}],104:[function(i,s,r){const n=i("../base-xform");s.exports=class extends n{get tag(){return"pageSetUpPr"}render(o,a){return!(!a||!a.fitToPage)&&(o.leafNode(this.tag,{fitToPage:a.fitToPage?"1":void 0}),!0)}parseOpen(o){return o.name===this.tag&&(this.model={fitToPage:o.attributes.fitToPage==="1"},!0)}parseText(){}parseClose(){return!1}}},{"../base-xform":32}],105:[function(i,s,r){const n=i("../../../utils/under-dash"),o=i("../base-xform");function a(d){return d?"1":void 0}function l(d){switch(d){case"overThenDown":return d;default:return}}function c(d){switch(d){case"atEnd":case"asDisplyed":return d;default:return}}function u(d){switch(d){case"dash":case"blank":case"NA":return d;default:return}}s.exports=class extends o{get tag(){return"pageSetup"}render(d,h){if(h){const p={paperSize:h.paperSize,orientation:h.orientation,horizontalDpi:h.horizontalDpi,verticalDpi:h.verticalDpi,pageOrder:l(h.pageOrder),blackAndWhite:a(h.blackAndWhite),draft:a(h.draft),cellComments:c(h.cellComments),errors:u(h.errors),scale:h.scale,fitToWidth:h.fitToWidth,fitToHeight:h.fitToHeight,firstPageNumber:h.firstPageNumber,useFirstPageNumber:a(h.firstPageNumber),usePrinterDefaults:a(h.usePrinterDefaults),copies:h.copies};n.some(p,f=>f!==void 0)&&d.leafNode(this.tag,p)}}parseOpen(d){switch(d.name){case this.tag:return this.model={paperSize:(h=d.attributes.paperSize,h!==void 0?parseInt(h,10):void 0),orientation:d.attributes.orientation||"portrait",horizontalDpi:parseInt(d.attributes.horizontalDpi||"4294967295",10),verticalDpi:parseInt(d.attributes.verticalDpi||"4294967295",10),pageOrder:d.attributes.pageOrder||"downThenOver",blackAndWhite:d.attributes.blackAndWhite==="1",draft:d.attributes.draft==="1",cellComments:d.attributes.cellComments||"None",errors:d.attributes.errors||"displayed",scale:parseInt(d.attributes.scale||"100",10),fitToWidth:parseInt(d.attributes.fitToWidth||"1",10),fitToHeight:parseInt(d.attributes.fitToHeight||"1",10),firstPageNumber:parseInt(d.attributes.firstPageNumber||"1",10),useFirstPageNumber:d.attributes.useFirstPageNumber==="1",usePrinterDefaults:d.attributes.usePrinterDefaults==="1",copies:parseInt(d.attributes.copies||"1",10)},!0;default:return!1}var h}parseText(){}parseClose(){return!1}}},{"../../../utils/under-dash":26,"../base-xform":32}],106:[function(i,s,r){const n=i("../base-xform");s.exports=class extends n{get tag(){return"picture"}render(o,a){a&&o.leafNode(this.tag,{"r:id":a.rId})}parseOpen(o){switch(o.name){case this.tag:return this.model={rId:o.attributes["r:id"]},!0;default:return!1}}parseText(){}parseClose(){return!1}}},{"../base-xform":32}],107:[function(i,s,r){const n=i("../../../utils/under-dash"),o=i("../base-xform");function a(l){return l?"1":void 0}s.exports=class extends o{get tag(){return"printOptions"}render(l,c){if(c){const u={headings:a(c.showRowColHeaders),gridLines:a(c.showGridLines),horizontalCentered:a(c.horizontalCentered),verticalCentered:a(c.verticalCentered)};n.some(u,d=>d!==void 0)&&l.leafNode(this.tag,u)}}parseOpen(l){switch(l.name){case this.tag:return this.model={showRowColHeaders:l.attributes.headings==="1",showGridLines:l.attributes.gridLines==="1",horizontalCentered:l.attributes.horizontalCentered==="1",verticalCentered:l.attributes.verticalCentered==="1"},!0;default:return!1}}parseText(){}parseClose(){return!1}}},{"../../../utils/under-dash":26,"../base-xform":32}],108:[function(i,s,r){const n=i("./page-breaks-xform"),o=i("../list-xform");s.exports=class extends o{constructor(){super({tag:"rowBreaks",count:!0,childXform:new n})}render(a,l){if(l&&l.length){a.openNode(this.tag,this.$),this.count&&(a.addAttribute(this.$count,l.length),a.addAttribute("manualBreakCount",l.length));const{childXform:c}=this;l.forEach(u=>{c.render(a,u)}),a.closeNode()}else this.empty&&a.leafNode(this.tag)}}},{"../list-xform":71,"./page-breaks-xform":102}],109:[function(i,s,r){const n=i("../base-xform"),o=i("../../../utils/utils"),a=i("./cell-xform");s.exports=class extends n{constructor(l){super(),this.maxItems=l&&l.maxItems,this.map={c:new a}}get tag(){return"row"}prepare(l,c){const u=c.styles.addStyleModel(l.style);u&&(l.styleId=u);const d=this.map.c;l.cells.forEach(h=>{d.prepare(h,c)})}render(l,c,u){l.openNode("row"),l.addAttribute("r",c.number),c.height&&(l.addAttribute("ht",c.height),l.addAttribute("customHeight","1")),c.hidden&&l.addAttribute("hidden","1"),c.min>0&&c.max>0&&c.min<=c.max&&l.addAttribute("spans",`${c.min}:${c.max}`),c.styleId&&(l.addAttribute("s",c.styleId),l.addAttribute("customFormat","1")),l.addAttribute("x14ac:dyDescent","0.25"),c.outlineLevel&&l.addAttribute("outlineLevel",c.outlineLevel),c.collapsed&&l.addAttribute("collapsed","1");const d=this.map.c;c.cells.forEach(h=>{d.render(l,h,u)}),l.closeNode()}parseOpen(l){if(this.parser)return this.parser.parseOpen(l),!0;if(l.name==="row"){this.numRowsSeen+=1;const c=l.attributes.spans?l.attributes.spans.split(":").map(d=>parseInt(d,10)):[void 0,void 0],u=this.model={number:parseInt(l.attributes.r,10),min:c[0],max:c[1],cells:[]};return l.attributes.s&&(u.styleId=parseInt(l.attributes.s,10)),o.parseBoolean(l.attributes.hidden)&&(u.hidden=!0),o.parseBoolean(l.attributes.bestFit)&&(u.bestFit=!0),l.attributes.ht&&(u.height=parseFloat(l.attributes.ht)),l.attributes.outlineLevel&&(u.outlineLevel=parseInt(l.attributes.outlineLevel,10)),o.parseBoolean(l.attributes.collapsed)&&(u.collapsed=!0),!0}return this.parser=this.map[l.name],!!this.parser&&(this.parser.parseOpen(l),!0)}parseText(l){this.parser&&this.parser.parseText(l)}parseClose(l){if(this.parser){if(!this.parser.parseClose(l)){if(this.model.cells.push(this.parser.model),this.maxItems&&this.model.cells.length>this.maxItems)throw new Error(`Max column count (${this.maxItems}) exceeded`);this.parser=void 0}return!0}return!1}reconcile(l,c){l.style=l.styleId?c.styles.getStyleModel(l.styleId):{},l.styleId!==void 0&&(l.styleId=void 0);const u=this.map.c;l.cells.forEach(d=>{u.reconcile(d,c)})}}},{"../../../utils/utils":27,"../base-xform":32,"./cell-xform":73}],110:[function(i,s,r){const n=i("../../../utils/under-dash"),o=i("../base-xform");s.exports=class extends o{get tag(){return"sheetFormatPr"}render(a,l){if(l){const c={defaultRowHeight:l.defaultRowHeight,outlineLevelRow:l.outlineLevelRow,outlineLevelCol:l.outlineLevelCol,"x14ac:dyDescent":l.dyDescent};l.defaultColWidth&&(c.defaultColWidth=l.defaultColWidth),l.defaultRowHeight&&l.defaultRowHeight===15||(c.customHeight="1"),n.some(c,u=>u!==void 0)&&a.leafNode("sheetFormatPr",c)}}parseOpen(a){return a.name==="sheetFormatPr"&&(this.model={defaultRowHeight:parseFloat(a.attributes.defaultRowHeight||"0"),dyDescent:parseFloat(a.attributes["x14ac:dyDescent"]||"0"),outlineLevelRow:parseInt(a.attributes.outlineLevelRow||"0",10),outlineLevelCol:parseInt(a.attributes.outlineLevelCol||"0",10)},a.attributes.defaultColWidth&&(this.model.defaultColWidth=parseFloat(a.attributes.defaultColWidth)),!0)}parseText(){}parseClose(){return!1}}},{"../../../utils/under-dash":26,"../base-xform":32}],111:[function(i,s,r){const n=i("../base-xform"),o=i("../style/color-xform"),a=i("./page-setup-properties-xform"),l=i("./outline-properties-xform");s.exports=class extends n{constructor(){super(),this.map={tabColor:new o("tabColor"),pageSetUpPr:new a,outlinePr:new l}}get tag(){return"sheetPr"}render(c,u){if(u){c.addRollback(),c.openNode("sheetPr");let d=!1;d=this.map.tabColor.render(c,u.tabColor)||d,d=this.map.pageSetUpPr.render(c,u.pageSetup)||d,d=this.map.outlinePr.render(c,u.outlineProperties)||d,d?(c.closeNode(),c.commit()):c.rollback()}}parseOpen(c){return this.parser?(this.parser.parseOpen(c),!0):c.name===this.tag?(this.reset(),!0):!!this.map[c.name]&&(this.parser=this.map[c.name],this.parser.parseOpen(c),!0)}parseText(c){return!!this.parser&&(this.parser.parseText(c),!0)}parseClose(c){return this.parser?(this.parser.parseClose(c)||(this.parser=void 0),!0):(this.map.tabColor.model||this.map.pageSetUpPr.model||this.map.outlinePr.model?(this.model={},this.map.tabColor.model&&(this.model.tabColor=this.map.tabColor.model),this.map.pageSetUpPr.model&&(this.model.pageSetup=this.map.pageSetUpPr.model),this.map.outlinePr.model&&(this.model.outlineProperties=this.map.outlinePr.model)):this.model=null,!1)}}},{"../base-xform":32,"../style/color-xform":128,"./outline-properties-xform":101,"./page-setup-properties-xform":104}],112:[function(i,s,r){const n=i("../../../utils/under-dash"),o=i("../base-xform");function a(c,u){return c?u:void 0}function l(c,u){return c===u||void 0}s.exports=class extends o{get tag(){return"sheetProtection"}render(c,u){if(u){const d={sheet:a(u.sheet,"1"),selectLockedCells:u.selectLockedCells===!1?"1":void 0,selectUnlockedCells:u.selectUnlockedCells===!1?"1":void 0,formatCells:a(u.formatCells,"0"),formatColumns:a(u.formatColumns,"0"),formatRows:a(u.formatRows,"0"),insertColumns:a(u.insertColumns,"0"),insertRows:a(u.insertRows,"0"),insertHyperlinks:a(u.insertHyperlinks,"0"),deleteColumns:a(u.deleteColumns,"0"),deleteRows:a(u.deleteRows,"0"),sort:a(u.sort,"0"),autoFilter:a(u.autoFilter,"0"),pivotTables:a(u.pivotTables,"0")};u.sheet&&(d.algorithmName=u.algorithmName,d.hashValue=u.hashValue,d.saltValue=u.saltValue,d.spinCount=u.spinCount,d.objects=a(u.objects===!1,"1"),d.scenarios=a(u.scenarios===!1,"1")),n.some(d,h=>h!==void 0)&&c.leafNode(this.tag,d)}}parseOpen(c){switch(c.name){case this.tag:return this.model={sheet:l(c.attributes.sheet,"1"),objects:c.attributes.objects!=="1"&&void 0,scenarios:c.attributes.scenarios!=="1"&&void 0,selectLockedCells:c.attributes.selectLockedCells!=="1"&&void 0,selectUnlockedCells:c.attributes.selectUnlockedCells!=="1"&&void 0,formatCells:l(c.attributes.formatCells,"0"),formatColumns:l(c.attributes.formatColumns,"0"),formatRows:l(c.attributes.formatRows,"0"),insertColumns:l(c.attributes.insertColumns,"0"),insertRows:l(c.attributes.insertRows,"0"),insertHyperlinks:l(c.attributes.insertHyperlinks,"0"),deleteColumns:l(c.attributes.deleteColumns,"0"),deleteRows:l(c.attributes.deleteRows,"0"),sort:l(c.attributes.sort,"0"),autoFilter:l(c.attributes.autoFilter,"0"),pivotTables:l(c.attributes.pivotTables,"0")},c.attributes.algorithmName&&(this.model.algorithmName=c.attributes.algorithmName,this.model.hashValue=c.attributes.hashValue,this.model.saltValue=c.attributes.saltValue,this.model.spinCount=parseInt(c.attributes.spinCount,10)),!0;default:return!1}}parseText(){}parseClose(){return!1}}},{"../../../utils/under-dash":26,"../base-xform":32}],113:[function(i,s,r){const n=i("../../../utils/col-cache"),o=i("../base-xform"),a={frozen:"frozen",frozenSplit:"frozen",split:"split"};s.exports=class extends o{get tag(){return"sheetView"}prepare(l){switch(l.state){case"frozen":case"split":break;default:l.state="normal"}}render(l,c){l.openNode("sheetView",{workbookViewId:c.workbookViewId||0});const u=function(m,g,y){y&&l.addAttribute(m,g)};let d,h,p,f;switch(u("rightToLeft","1",c.rightToLeft===!0),u("tabSelected","1",c.tabSelected),u("showRuler","0",c.showRuler===!1),u("showRowColHeaders","0",c.showRowColHeaders===!1),u("showGridLines","0",c.showGridLines===!1),u("zoomScale",c.zoomScale,c.zoomScale),u("zoomScaleNormal",c.zoomScaleNormal,c.zoomScaleNormal),u("view",c.style,c.style),c.state){case"frozen":h=c.xSplit||0,p=c.ySplit||0,d=c.topLeftCell||n.getAddress(p+1,h+1).address,f=(c.xSplit&&c.ySplit?"bottomRight":c.xSplit&&"topRight")||"bottomLeft",l.leafNode("pane",{xSplit:c.xSplit||void 0,ySplit:c.ySplit||void 0,topLeftCell:d,activePane:f,state:"frozen"}),l.leafNode("selection",{pane:f,activeCell:c.activeCell,sqref:c.activeCell});break;case"split":c.activePane==="topLeft"&&(c.activePane=void 0),l.leafNode("pane",{xSplit:c.xSplit||void 0,ySplit:c.ySplit||void 0,topLeftCell:c.topLeftCell,activePane:c.activePane}),l.leafNode("selection",{pane:c.activePane,activeCell:c.activeCell,sqref:c.activeCell});break;case"normal":c.activeCell&&l.leafNode("selection",{activeCell:c.activeCell,sqref:c.activeCell})}l.closeNode()}parseOpen(l){switch(l.name){case"sheetView":return this.sheetView={workbookViewId:parseInt(l.attributes.workbookViewId,10),rightToLeft:l.attributes.rightToLeft==="1",tabSelected:l.attributes.tabSelected==="1",showRuler:l.attributes.showRuler!=="0",showRowColHeaders:l.attributes.showRowColHeaders!=="0",showGridLines:l.attributes.showGridLines!=="0",zoomScale:parseInt(l.attributes.zoomScale||"100",10),zoomScaleNormal:parseInt(l.attributes.zoomScaleNormal||"100",10),style:l.attributes.view},this.pane=void 0,this.selections={},!0;case"pane":return this.pane={xSplit:parseInt(l.attributes.xSplit||"0",10),ySplit:parseInt(l.attributes.ySplit||"0",10),topLeftCell:l.attributes.topLeftCell,activePane:l.attributes.activePane||"topLeft",state:l.attributes.state},!0;case"selection":{const c=l.attributes.pane||"topLeft";return this.selections[c]={pane:c,activeCell:l.attributes.activeCell},!0}default:return!1}}parseText(){}parseClose(l){let c,u;switch(l){case"sheetView":return this.sheetView&&this.pane?(c=this.model={workbookViewId:this.sheetView.workbookViewId,rightToLeft:this.sheetView.rightToLeft,state:a[this.pane.state]||"split",xSplit:this.pane.xSplit,ySplit:this.pane.ySplit,topLeftCell:this.pane.topLeftCell,showRuler:this.sheetView.showRuler,showRowColHeaders:this.sheetView.showRowColHeaders,showGridLines:this.sheetView.showGridLines,zoomScale:this.sheetView.zoomScale,zoomScaleNormal:this.sheetView.zoomScaleNormal},this.model.state==="split"&&(c.activePane=this.pane.activePane),u=this.selections[this.pane.activePane],u&&u.activeCell&&(c.activeCell=u.activeCell),this.sheetView.style&&(c.style=this.sheetView.style)):(c=this.model={workbookViewId:this.sheetView.workbookViewId,rightToLeft:this.sheetView.rightToLeft,state:"normal",showRuler:this.sheetView.showRuler,showRowColHeaders:this.sheetView.showRowColHeaders,showGridLines:this.sheetView.showGridLines,zoomScale:this.sheetView.zoomScale,zoomScaleNormal:this.sheetView.zoomScaleNormal},u=this.selections.topLeft,u&&u.activeCell&&(c.activeCell=u.activeCell),this.sheetView.style&&(c.style=this.sheetView.style)),!1;default:return!0}}reconcile(){}}},{"../../../utils/col-cache":19,"../base-xform":32}],114:[function(i,s,r){const n=i("../base-xform");s.exports=class extends n{get tag(){return"tablePart"}render(o,a){a&&o.leafNode(this.tag,{"r:id":a.rId})}parseOpen(o){switch(o.name){case this.tag:return this.model={rId:o.attributes["r:id"]},!0;default:return!1}}parseText(){}parseClose(){return!1}}},{"../base-xform":32}],115:[function(i,s,r){const n=i("../../../utils/under-dash"),o=i("../../../utils/col-cache"),a=i("../../../utils/xml-stream"),l=i("../../rel-type"),c=i("./merges"),u=i("../base-xform"),d=i("../list-xform"),h=i("./row-xform"),p=i("./col-xform"),f=i("./dimension-xform"),m=i("./hyperlink-xform"),g=i("./merge-cell-xform"),y=i("./data-validations-xform"),v=i("./sheet-properties-xform"),C=i("./sheet-format-properties-xform"),b=i("./sheet-view-xform"),T=i("./sheet-protection-xform"),A=i("./page-margins-xform"),I=i("./page-setup-xform"),D=i("./print-options-xform"),F=i("./auto-filter-xform"),B=i("./picture-xform"),U=i("./drawing-xform"),H=i("./table-part-xform"),R=i("./row-breaks-xform"),L=i("./header-footer-xform"),_=i("./cf/conditional-formattings-xform"),w=i("./ext-lst-xform"),S=(E,M)=>{if(!M||!M.length)return E;if(!E||!E.length)return M;const O={},V={};return E.forEach(Y=>{O[Y.ref]=Y,Y.rules.forEach($=>{const{x14Id:J}=$;J&&(V[J]=$)})}),M.forEach(Y=>{Y.rules.forEach($=>{const J=V[$.x14Id];J?((G,Z)=>{Object.keys(Z).forEach(N=>{const P=G[N],j=Z[N];P===void 0&&j!==void 0&&(G[N]=j)})})(J,$):O[Y.ref]?O[Y.ref].rules.push($):E.push({ref:Y.ref,rules:[$]})})}),E};class x extends u{constructor(M){super();const{maxRows:O,maxCols:V,ignoreNodes:Y}=M||{};this.ignoreNodes=Y||[],this.map={sheetPr:new v,dimension:new f,sheetViews:new d({tag:"sheetViews",count:!1,childXform:new b}),sheetFormatPr:new C,cols:new d({tag:"cols",count:!1,childXform:new p}),sheetData:new d({tag:"sheetData",count:!1,empty:!0,childXform:new h({maxItems:V}),maxItems:O}),autoFilter:new F,mergeCells:new d({tag:"mergeCells",count:!0,childXform:new g}),rowBreaks:new R,hyperlinks:new d({tag:"hyperlinks",count:!1,childXform:new m}),pageMargins:new A,dataValidations:new y,pageSetup:new I,headerFooter:new L,printOptions:new D,picture:new B,drawing:new U,sheetProtection:new T,tableParts:new d({tag:"tableParts",count:!0,childXform:new H}),conditionalFormatting:new _,extLst:new w}}prepare(M,O){O.merges=new c,M.hyperlinks=O.hyperlinks=[],M.comments=O.comments=[],O.formulae={},O.siFormulae=0,this.map.cols.prepare(M.cols,O),this.map.sheetData.prepare(M.rows,O),this.map.conditionalFormatting.prepare(M.conditionalFormattings,O),M.mergeCells=O.merges.mergeCells;const V=M.rels=[];function Y(G){return"rId"+(G.length+1)}if(M.hyperlinks.forEach(G=>{const Z=Y(V);G.rId=Z,V.push({Id:Z,Type:l.Hyperlink,Target:G.target,TargetMode:"External"})}),M.comments.length>0){const G={Id:Y(V),Type:l.Comments,Target:`../comments${M.id}.xml`};V.push(G);const Z={Id:Y(V),Type:l.VmlDrawing,Target:`../drawings/vmlDrawing${M.id}.vml`};V.push(Z),M.comments.forEach(N=>{N.refAddress=o.decodeAddress(N.ref)}),O.commentRefs.push({commentName:"comments"+M.id,vmlDrawing:"vmlDrawing"+M.id})}const $=[];let J;M.media.forEach(G=>{if(G.type==="background"){const Z=Y(V);J=O.media[G.imageId],V.push({Id:Z,Type:l.Image,Target:`../media/${J.name}.${J.extension}`}),M.background={rId:Z},M.image=O.media[G.imageId]}else if(G.type==="image"){let{drawing:Z}=M;J=O.media[G.imageId],Z||(Z=M.drawing={rId:Y(V),name:"drawing"+ ++O.drawingsCount,anchors:[],rels:[]},O.drawings.push(Z),V.push({Id:Z.rId,Type:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/drawing",Target:`../drawings/${Z.name}.xml`}));let N=this.preImageId===G.imageId?$[G.imageId]:$[Z.rels.length];N||(N=Y(Z.rels),$[Z.rels.length]=N,Z.rels.push({Id:N,Type:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/image",Target:`../media/${J.name}.${J.extension}`}));const P={picture:{rId:N},range:G.range};if(G.hyperlinks&&G.hyperlinks.hyperlink){const j=Y(Z.rels);$[Z.rels.length]=j,P.picture.hyperlinks={tooltip:G.hyperlinks.tooltip,rId:j},Z.rels.push({Id:j,Type:l.Hyperlink,Target:G.hyperlinks.hyperlink,TargetMode:"External"})}this.preImageId=G.imageId,Z.anchors.push(P)}}),M.tables.forEach(G=>{const Z=Y(V);G.rId=Z,V.push({Id:Z,Type:l.Table,Target:"../tables/"+G.target}),G.columns.forEach(N=>{const{style:P}=N;P&&(N.dxfId=O.styles.addDxfStyle(P))})}),this.map.extLst.prepare(M,O)}render(M,O){M.openXml(a.StdDocAttributes),M.openNode("worksheet",x.WORKSHEET_ATTRIBUTES);const V=O.properties?{defaultRowHeight:O.properties.defaultRowHeight,dyDescent:O.properties.dyDescent,outlineLevelCol:O.properties.outlineLevelCol,outlineLevelRow:O.properties.outlineLevelRow}:void 0;O.properties&&O.properties.defaultColWidth&&(V.defaultColWidth=O.properties.defaultColWidth);const Y={outlineProperties:O.properties&&O.properties.outlineProperties,tabColor:O.properties&&O.properties.tabColor,pageSetup:O.pageSetup&&O.pageSetup.fitToPage?{fitToPage:O.pageSetup.fitToPage}:void 0},$=O.pageSetup&&O.pageSetup.margins,J={showRowColHeaders:O.pageSetup&&O.pageSetup.showRowColHeaders,showGridLines:O.pageSetup&&O.pageSetup.showGridLines,horizontalCentered:O.pageSetup&&O.pageSetup.horizontalCentered,verticalCentered:O.pageSetup&&O.pageSetup.verticalCentered},G=O.sheetProtection;this.map.sheetPr.render(M,Y),this.map.dimension.render(M,O.dimensions),this.map.sheetViews.render(M,O.views),this.map.sheetFormatPr.render(M,V),this.map.cols.render(M,O.cols),this.map.sheetData.render(M,O.rows),this.map.sheetProtection.render(M,G),this.map.autoFilter.render(M,O.autoFilter),this.map.mergeCells.render(M,O.mergeCells),this.map.conditionalFormatting.render(M,O.conditionalFormattings),this.map.dataValidations.render(M,O.dataValidations),this.map.hyperlinks.render(M,O.hyperlinks),this.map.printOptions.render(M,J),this.map.pageMargins.render(M,$),this.map.pageSetup.render(M,O.pageSetup),this.map.headerFooter.render(M,O.headerFooter),this.map.rowBreaks.render(M,O.rowBreaks),this.map.drawing.render(M,O.drawing),this.map.picture.render(M,O.background),this.map.tableParts.render(M,O.tables),this.map.extLst.render(M,O),O.rels&&O.rels.forEach(Z=>{Z.Type===l.VmlDrawing&&M.leafNode("legacyDrawing",{"r:id":Z.Id})}),M.closeNode()}parseOpen(M){return this.parser?(this.parser.parseOpen(M),!0):M.name==="worksheet"?(n.each(this.map,O=>{O.reset()}),!0):(this.map[M.name]&&!this.ignoreNodes.includes(M.name)&&(this.parser=this.map[M.name],this.parser.parseOpen(M)),!0)}parseText(M){this.parser&&this.parser.parseText(M)}parseClose(M){if(this.parser)return this.parser.parseClose(M)||(this.parser=void 0),!0;switch(M){case"worksheet":{const O=this.map.sheetFormatPr.model||{};this.map.sheetPr.model&&this.map.sheetPr.model.tabColor&&(O.tabColor=this.map.sheetPr.model.tabColor),this.map.sheetPr.model&&this.map.sheetPr.model.outlineProperties&&(O.outlineProperties=this.map.sheetPr.model.outlineProperties);const V={fitToPage:this.map.sheetPr.model&&this.map.sheetPr.model.pageSetup&&this.map.sheetPr.model.pageSetup.fitToPage||!1,margins:this.map.pageMargins.model},Y=Object.assign(V,this.map.pageSetup.model,this.map.printOptions.model),$=S(this.map.conditionalFormatting.model,this.map.extLst.model&&this.map.extLst.model["x14:conditionalFormattings"]);return this.model={dimensions:this.map.dimension.model,cols:this.map.cols.model,rows:this.map.sheetData.model,mergeCells:this.map.mergeCells.model,hyperlinks:this.map.hyperlinks.model,dataValidations:this.map.dataValidations.model,properties:O,views:this.map.sheetViews.model,pageSetup:Y,headerFooter:this.map.headerFooter.model,background:this.map.picture.model,drawing:this.map.drawing.model,tables:this.map.tableParts.model,conditionalFormattings:$},this.map.autoFilter.model&&(this.model.autoFilter=this.map.autoFilter.model),this.map.sheetProtection.model&&(this.model.sheetProtection=this.map.sheetProtection.model),!1}default:return!0}}reconcile(M,O){const V=(M.relationships||[]).reduce(($,J)=>{if($[J.Id]=J,J.Type===l.Comments&&(M.comments=O.comments[J.Target].comments),J.Type===l.VmlDrawing&&M.comments&&M.comments.length){const G=O.vmlDrawings[J.Target].comments;M.comments.forEach((Z,N)=>{Z.note=Object.assign({},Z.note,G[N])})}return $},{});if(O.commentsMap=(M.comments||[]).reduce(($,J)=>(J.ref&&($[J.ref]=J),$),{}),O.hyperlinkMap=(M.hyperlinks||[]).reduce(($,J)=>(J.rId&&($[J.address]=V[J.rId].Target),$),{}),O.formulae={},M.rows=M.rows&&M.rows.filter(Boolean)||[],M.rows.forEach($=>{$.cells=$.cells&&$.cells.filter(Boolean)||[]}),this.map.cols.reconcile(M.cols,O),this.map.sheetData.reconcile(M.rows,O),this.map.conditionalFormatting.reconcile(M.conditionalFormattings,O),M.media=[],M.drawing){const $=V[M.drawing.rId].Target.match(/\/drawings\/([a-zA-Z0-9]+)[.][a-zA-Z]{3,4}$/);if($){const J=$[1];O.drawings[J].anchors.forEach(G=>{if(G.medium){const Z={type:"image",imageId:G.medium.index,range:G.range,hyperlinks:G.picture.hyperlinks};M.media.push(Z)}})}}const Y=M.background&&V[M.background.rId];if(Y){const $=Y.Target.split("/media/")[1],J=O.mediaIndex&&O.mediaIndex[$];J!==void 0&&M.media.push({type:"background",imageId:J})}M.tables=(M.tables||[]).map($=>{const J=V[$.rId];return O.tables[J.Target]}),delete M.relationships,delete M.hyperlinks,delete M.comments}}x.WORKSHEET_ATTRIBUTES={xmlns:"http://schemas.openxmlformats.org/spreadsheetml/2006/main","xmlns:r":"http://schemas.openxmlformats.org/officeDocument/2006/relationships","xmlns:mc":"http://schemas.openxmlformats.org/markup-compatibility/2006","mc:Ignorable":"x14ac","xmlns:x14ac":"http://schemas.microsoft.com/office/spreadsheetml/2009/9/ac"},s.exports=x},{"../../../utils/col-cache":19,"../../../utils/under-dash":26,"../../../utils/xml-stream":28,"../../rel-type":31,"../base-xform":32,"../list-xform":71,"./auto-filter-xform":72,"./cf/conditional-formattings-xform":87,"./col-xform":92,"./data-validations-xform":93,"./dimension-xform":94,"./drawing-xform":95,"./ext-lst-xform":96,"./header-footer-xform":97,"./hyperlink-xform":98,"./merge-cell-xform":99,"./merges":100,"./page-margins-xform":103,"./page-setup-xform":105,"./picture-xform":106,"./print-options-xform":107,"./row-breaks-xform":108,"./row-xform":109,"./sheet-format-properties-xform":110,"./sheet-properties-xform":111,"./sheet-protection-xform":112,"./sheet-view-xform":113,"./table-part-xform":114}],116:[function(i,s,r){const n=i("../base-xform");s.exports=class extends n{constructor(o){super(),this.tag=o.tag,this.attr=o.attr}render(o,a){a&&(o.openNode(this.tag),o.closeNode())}parseOpen(o){o.name===this.tag&&(this.model=!0)}parseText(){}parseClose(){return!1}}},{"../base-xform":32}],117:[function(i,s,r){const n=i("../base-xform");s.exports=class extends n{constructor(o){super(),this.tag=o.tag,this.attr=o.attr,this.attrs=o.attrs,this._format=o.format||function(a){try{return Number.isNaN(a.getTime())?"":a.toISOString()}catch{return""}},this._parse=o.parse||function(a){return new Date(a)}}render(o,a){a&&(o.openNode(this.tag),this.attrs&&o.addAttributes(this.attrs),this.attr?o.addAttribute(this.attr,this._format(a)):o.writeText(this._format(a)),o.closeNode())}parseOpen(o){o.name===this.tag&&(this.attr?this.model=this._parse(o.attributes[this.attr]):this.text=[])}parseText(o){this.attr||this.text.push(o)}parseClose(){return this.attr||(this.model=this._parse(this.text.join(""))),!1}}},{"../base-xform":32}],118:[function(i,s,r){const n=i("../base-xform");s.exports=class extends n{constructor(o){super(),this.tag=o.tag,this.attr=o.attr,this.attrs=o.attrs,this.zero=o.zero}render(o,a){(a||this.zero)&&(o.openNode(this.tag),this.attrs&&o.addAttributes(this.attrs),this.attr?o.addAttribute(this.attr,a):o.writeText(a),o.closeNode())}parseOpen(o){return o.name===this.tag&&(this.attr?this.model=parseInt(o.attributes[this.attr],10):this.text=[],!0)}parseText(o){this.attr||this.text.push(o)}parseClose(){return this.attr||(this.model=parseInt(this.text.join("")||0,10)),!1}}},{"../base-xform":32}],119:[function(i,s,r){const n=i("../base-xform");s.exports=class extends n{constructor(o){super(),this.tag=o.tag,this.attr=o.attr,this.attrs=o.attrs}render(o,a){a!==void 0&&(o.openNode(this.tag),this.attrs&&o.addAttributes(this.attrs),this.attr?o.addAttribute(this.attr,a):o.writeText(a),o.closeNode())}parseOpen(o){o.name===this.tag&&(this.attr?this.model=o.attributes[this.attr]:this.text=[])}parseText(o){this.attr||this.text.push(o)}parseClose(){return this.attr||(this.model=this.text.join("")),!1}}},{"../base-xform":32}],120:[function(i,s,r){const n=i("./base-xform"),o=i("../../utils/xml-stream");s.exports=class extends n{constructor(a){super(),this._model=a}render(a){if(!this._xml){const l=new o;(function c(u,d){u.openNode(d.tag,d.$),d.c&&d.c.forEach(h=>{c(u,h)}),d.t&&u.writeText(d.t),u.closeNode()})(l,this._model),this._xml=l.xml}a.writeXml(this._xml)}parseOpen(){return!0}parseText(){}parseClose(a){switch(a){case this._model.tag:return!1;default:return!0}}}},{"../../utils/xml-stream":28,"./base-xform":32}],121:[function(i,s,r){const n=i("./text-xform"),o=i("./rich-text-xform"),a=i("../base-xform");s.exports=class extends a{constructor(){super(),this.map={r:new o,t:new n}}get tag(){return"rPh"}render(l,c){if(l.openNode(this.tag,{sb:c.sb||0,eb:c.eb||0}),c&&c.hasOwnProperty("richText")&&c.richText){const{r:u}=this.map;c.richText.forEach(d=>{u.render(l,d)})}else c&&this.map.t.render(l,c.text);l.closeNode()}parseOpen(l){const{name:c}=l;return this.parser?(this.parser.parseOpen(l),!0):c===this.tag?(this.model={sb:parseInt(l.attributes.sb,10),eb:parseInt(l.attributes.eb,10)},!0):(this.parser=this.map[c],!!this.parser&&(this.parser.parseOpen(l),!0))}parseText(l){this.parser&&this.parser.parseText(l)}parseClose(l){if(this.parser){if(!this.parser.parseClose(l)){switch(l){case"r":{let c=this.model.richText;c||(c=this.model.richText=[]),c.push(this.parser.model);break}case"t":this.model.text=this.parser.model}this.parser=void 0}return!0}switch(l){case this.tag:return!1;default:return!0}}}},{"../base-xform":32,"./rich-text-xform":122,"./text-xform":125}],122:[function(i,s,r){const n=i("./text-xform"),o=i("../style/font-xform"),a=i("../base-xform");class l extends a{constructor(u){super(),this.model=u}get tag(){return"r"}get textXform(){return this._textXform||(this._textXform=new n)}get fontXform(){return this._fontXform||(this._fontXform=new o(l.FONT_OPTIONS))}render(u,d){d=d||this.model,u.openNode("r"),d.font&&this.fontXform.render(u,d.font),this.textXform.render(u,d.text),u.closeNode()}parseOpen(u){if(this.parser)return this.parser.parseOpen(u),!0;switch(u.name){case"r":return this.model={},!0;case"t":return this.parser=this.textXform,this.parser.parseOpen(u),!0;case"rPr":return this.parser=this.fontXform,this.parser.parseOpen(u),!0;default:return!1}}parseText(u){this.parser&&this.parser.parseText(u)}parseClose(u){switch(u){case"r":return!1;case"t":return this.model.text=this.parser.model,this.parser=void 0,!0;case"rPr":return this.model.font=this.parser.model,this.parser=void 0,!0;default:return this.parser&&this.parser.parseClose(u),!0}}}l.FONT_OPTIONS={tagName:"rPr",fontNameTag:"rFont"},s.exports=l},{"../base-xform":32,"../style/font-xform":131,"./text-xform":125}],123:[function(i,s,r){const n=i("./text-xform"),o=i("./rich-text-xform"),a=i("./phonetic-text-xform"),l=i("../base-xform");s.exports=class extends l{constructor(c){super(),this.model=c,this.map={r:new o,t:new n,rPh:new a}}get tag(){return"si"}render(c,u){c.openNode(this.tag),u&&u.hasOwnProperty("richText")&&u.richText?u.richText.length?u.richText.forEach(d=>{this.map.r.render(c,d)}):this.map.t.render(c,""):u!=null&&this.map.t.render(c,u),c.closeNode()}parseOpen(c){const{name:u}=c;return this.parser?(this.parser.parseOpen(c),!0):u===this.tag?(this.model={},!0):(this.parser=this.map[u],!!this.parser&&(this.parser.parseOpen(c),!0))}parseText(c){this.parser&&this.parser.parseText(c)}parseClose(c){if(this.parser){if(!this.parser.parseClose(c)){switch(c){case"r":{let u=this.model.richText;u||(u=this.model.richText=[]),u.push(this.parser.model);break}case"t":this.model=this.parser.model}this.parser=void 0}return!0}switch(c){case this.tag:return!1;default:return!0}}}},{"../base-xform":32,"./phonetic-text-xform":121,"./rich-text-xform":122,"./text-xform":125}],124:[function(i,s,r){const n=i("../../../utils/xml-stream"),o=i("../base-xform"),a=i("./shared-string-xform");s.exports=class extends o{constructor(l){super(),this.model=l||{values:[],count:0},this.hash=Object.create(null),this.rich=Object.create(null)}get sharedStringXform(){return this._sharedStringXform||(this._sharedStringXform=new a)}get values(){return this.model.values}get uniqueCount(){return this.model.values.length}get count(){return this.model.count}getString(l){return this.model.values[l]}add(l){return l.richText?this.addRichText(l):this.addText(l)}addText(l){let c=this.hash[l];return c===void 0&&(c=this.hash[l]=this.model.values.length,this.model.values.push(l)),this.model.count++,c}addRichText(l){const c=this.sharedStringXform.toXml(l);let u=this.rich[c];return u===void 0&&(u=this.rich[c]=this.model.values.length,this.model.values.push(l)),this.model.count++,u}render(l,c){c=c||this._values,l.openXml(n.StdDocAttributes),l.openNode("sst",{xmlns:"http://schemas.openxmlformats.org/spreadsheetml/2006/main",count:c.count,uniqueCount:c.values.length});const u=this.sharedStringXform;c.values.forEach(d=>{u.render(l,d)}),l.closeNode()}parseOpen(l){if(this.parser)return this.parser.parseOpen(l),!0;switch(l.name){case"sst":return!0;case"si":return this.parser=this.sharedStringXform,this.parser.parseOpen(l),!0;default:throw new Error("Unexpected xml node in parseOpen: "+JSON.stringify(l))}}parseText(l){this.parser&&this.parser.parseText(l)}parseClose(l){if(this.parser)return this.parser.parseClose(l)||(this.model.values.push(this.parser.model),this.model.count++,this.parser=void 0),!0;switch(l){case"sst":return!1;default:throw new Error("Unexpected xml node in parseClose: "+l)}}}},{"../../../utils/xml-stream":28,"../base-xform":32,"./shared-string-xform":123}],125:[function(i,s,r){const n=i("../base-xform");s.exports=class extends n{get tag(){return"t"}render(o,a){o.openNode("t"),/^\s|\n|\s$/.test(a)&&o.addAttribute("xml:space","preserve"),o.writeText(a),o.closeNode()}get model(){return this._text.join("").replace(/_x([0-9A-F]{4})_/g,(o,a)=>String.fromCharCode(parseInt(a,16)))}parseOpen(o){switch(o.name){case"t":return this._text=[],!0;default:return!1}}parseText(o){this._text.push(o)}parseClose(){return!1}}},{"../base-xform":32}],126:[function(i,s,r){const n=i("../../../doc/enums"),o=i("../../../utils/utils"),a=i("../base-xform"),l={horizontalValues:["left","center","right","fill","centerContinuous","distributed","justify"].reduce((u,d)=>(u[d]=!0,u),{}),horizontal(u){return this.horizontalValues[u]?u:void 0},verticalValues:["top","middle","bottom","distributed","justify"].reduce((u,d)=>(u[d]=!0,u),{}),vertical(u){return u==="middle"?"center":this.verticalValues[u]?u:void 0},wrapText:u=>!!u||void 0,shrinkToFit:u=>!!u||void 0,textRotation(u){switch(u){case"vertical":return u;default:return(u=o.validInt(u))>=-90&&u<=90?u:void 0}},indent:u=>(u=o.validInt(u),Math.max(0,u)),readingOrder(u){switch(u){case"ltr":return n.ReadingOrder.LeftToRight;case"rtl":return n.ReadingOrder.RightToLeft;default:return}}},c={toXml(u){if(u=l.textRotation(u)){if(u==="vertical")return 255;const d=Math.round(u);if(d>=0&&d<=90)return d;if(d<0&&d>=-90)return 90-d}},toModel(u){const d=o.validInt(u);if(d!==void 0){if(d===255)return"vertical";if(d>=0&&d<=90)return d;if(d>90&&d<=180)return 90-d}}};s.exports=class extends a{get tag(){return"alignment"}render(u,d){u.addRollback(),u.openNode("alignment");let h=!1;function p(f,m){m&&(u.addAttribute(f,m),h=!0)}p("horizontal",l.horizontal(d.horizontal)),p("vertical",l.vertical(d.vertical)),p("wrapText",!!l.wrapText(d.wrapText)&&"1"),p("shrinkToFit",!!l.shrinkToFit(d.shrinkToFit)&&"1"),p("indent",l.indent(d.indent)),p("textRotation",c.toXml(d.textRotation)),p("readingOrder",l.readingOrder(d.readingOrder)),u.closeNode(),h?u.commit():u.rollback()}parseOpen(u){const d={};let h=!1;function p(f,m,g){f&&(d[m]=g,h=!0)}p(u.attributes.horizontal,"horizontal",u.attributes.horizontal),p(u.attributes.vertical,"vertical",u.attributes.vertical==="center"?"middle":u.attributes.vertical),p(u.attributes.wrapText,"wrapText",o.parseBoolean(u.attributes.wrapText)),p(u.attributes.shrinkToFit,"shrinkToFit",o.parseBoolean(u.attributes.shrinkToFit)),p(u.attributes.indent,"indent",parseInt(u.attributes.indent,10)),p(u.attributes.textRotation,"textRotation",c.toModel(u.attributes.textRotation)),p(u.attributes.readingOrder,"readingOrder",u.attributes.readingOrder==="2"?"rtl":"ltr"),this.model=h?d:null}parseText(){}parseClose(){return!1}}},{"../../../doc/enums":7,"../../../utils/utils":27,"../base-xform":32}],127:[function(i,s,r){const n=i("../base-xform"),o=i("../../../utils/utils"),a=i("./color-xform");class l extends n{constructor(u){super(),this.name=u,this.map={color:new a}}get tag(){return this.name}render(u,d,h){const p=d&&d.color||h||this.defaultColor;u.openNode(this.name),d&&d.style&&(u.addAttribute("style",d.style),p&&this.map.color.render(u,p)),u.closeNode()}parseOpen(u){if(this.parser)return this.parser.parseOpen(u),!0;switch(u.name){case this.name:{const{style:d}=u.attributes;return this.model=d?{style:d}:void 0,!0}case"color":return this.parser=this.map.color,this.parser.parseOpen(u),!0;default:return!1}}parseText(u){this.parser&&this.parser.parseText(u)}parseClose(u){return this.parser?(this.parser.parseClose(u)||(this.parser=void 0),!0):(u===this.name&&this.map.color.model&&(this.model||(this.model={}),this.model.color=this.map.color.model),!1)}validStyle(u){return l.validStyleValues[u]}}l.validStyleValues=["thin","dashed","dotted","dashDot","hair","dashDotDot","slantDashDot","mediumDashed","mediumDashDotDot","mediumDashDot","medium","double","thick"].reduce((c,u)=>(c[u]=!0,c),{}),s.exports=class extends n{constructor(){super(),this.map={top:new l("top"),left:new l("left"),bottom:new l("bottom"),right:new l("right"),diagonal:new l("diagonal")}}render(c,u){const{color:d}=u;function h(p,f){p&&!p.color&&u.color&&(p={...p,color:u.color}),f.render(c,p,d)}c.openNode("border"),u.diagonal&&u.diagonal.style&&(u.diagonal.up&&c.addAttribute("diagonalUp","1"),u.diagonal.down&&c.addAttribute("diagonalDown","1")),h(u.left,this.map.left),h(u.right,this.map.right),h(u.top,this.map.top),h(u.bottom,this.map.bottom),h(u.diagonal,this.map.diagonal),c.closeNode()}parseOpen(c){if(this.parser)return this.parser.parseOpen(c),!0;switch(c.name){case"border":return this.reset(),this.diagonalUp=o.parseBoolean(c.attributes.diagonalUp),this.diagonalDown=o.parseBoolean(c.attributes.diagonalDown),!0;default:return this.parser=this.map[c.name],!!this.parser&&(this.parser.parseOpen(c),!0)}}parseText(c){this.parser&&this.parser.parseText(c)}parseClose(c){if(this.parser)return this.parser.parseClose(c)||(this.parser=void 0),!0;if(c==="border"){const u=this.model={},d=function(h,p,f){p&&(f&&Object.assign(p,f),u[h]=p)};d("left",this.map.left.model),d("right",this.map.right.model),d("top",this.map.top.model),d("bottom",this.map.bottom.model),d("diagonal",this.map.diagonal.model,{up:this.diagonalUp,down:this.diagonalDown})}return!1}}},{"../../../utils/utils":27,"../base-xform":32,"./color-xform":128}],128:[function(i,s,r){const n=i("../base-xform");s.exports=class extends n{constructor(o){super(),this.name=o||"color"}get tag(){return this.name}render(o,a){return!!a&&(o.openNode(this.name),a.argb?o.addAttribute("rgb",a.argb):a.theme!==void 0?(o.addAttribute("theme",a.theme),a.tint!==void 0&&o.addAttribute("tint",a.tint)):a.indexed!==void 0?o.addAttribute("indexed",a.indexed):o.addAttribute("auto","1"),o.closeNode(),!0)}parseOpen(o){return o.name===this.name&&(o.attributes.rgb?this.model={argb:o.attributes.rgb}:o.attributes.theme?(this.model={theme:parseInt(o.attributes.theme,10)},o.attributes.tint&&(this.model.tint=parseFloat(o.attributes.tint))):o.attributes.indexed?this.model={indexed:parseInt(o.attributes.indexed,10)}:this.model=void 0,!0)}parseText(){}parseClose(){return!1}}},{"../base-xform":32}],129:[function(i,s,r){const n=i("../base-xform"),o=i("./alignment-xform"),a=i("./border-xform"),l=i("./fill-xform"),c=i("./font-xform"),u=i("./numfmt-xform"),d=i("./protection-xform");s.exports=class extends n{constructor(){super(),this.map={alignment:new o,border:new a,fill:new l,font:new c,numFmt:new u,protection:new d}}get tag(){return"dxf"}render(h,p){if(h.openNode(this.tag),p.font&&this.map.font.render(h,p.font),p.numFmt&&p.numFmtId){const f={id:p.numFmtId,formatCode:p.numFmt};this.map.numFmt.render(h,f)}p.fill&&this.map.fill.render(h,p.fill),p.alignment&&this.map.alignment.render(h,p.alignment),p.border&&this.map.border.render(h,p.border),p.protection&&this.map.protection.render(h,p.protection),h.closeNode()}parseOpen(h){if(this.parser)return this.parser.parseOpen(h),!0;switch(h.name){case this.tag:return this.reset(),!0;default:return this.parser=this.map[h.name],this.parser&&this.parser.parseOpen(h),!0}}parseText(h){this.parser&&this.parser.parseText(h)}parseClose(h){return this.parser?(this.parser.parseClose(h)||(this.parser=void 0),!0):h!==this.tag||(this.model={alignment:this.map.alignment.model,border:this.map.border.model,fill:this.map.fill.model,font:this.map.font.model,numFmt:this.map.numFmt.model,protection:this.map.protection.model},!1)}}},{"../base-xform":32,"./alignment-xform":126,"./border-xform":127,"./fill-xform":130,"./font-xform":131,"./numfmt-xform":132,"./protection-xform":133}],130:[function(i,s,r){const n=i("../base-xform"),o=i("./color-xform");class a extends n{constructor(){super(),this.map={color:new o}}get tag(){return"stop"}render(h,p){h.openNode("stop"),h.addAttribute("position",p.position),this.map.color.render(h,p.color),h.closeNode()}parseOpen(h){if(this.parser)return this.parser.parseOpen(h),!0;switch(h.name){case"stop":return this.model={position:parseFloat(h.attributes.position)},!0;case"color":return this.parser=this.map.color,this.parser.parseOpen(h),!0;default:return!1}}parseText(){}parseClose(h){return!!this.parser&&(this.parser.parseClose(h)||(this.model.color=this.parser.model,this.parser=void 0),!0)}}class l extends n{constructor(){super(),this.map={fgColor:new o("fgColor"),bgColor:new o("bgColor")}}get name(){return"pattern"}get tag(){return"patternFill"}render(h,p){h.openNode("patternFill"),h.addAttribute("patternType",p.pattern),p.fgColor&&this.map.fgColor.render(h,p.fgColor),p.bgColor&&this.map.bgColor.render(h,p.bgColor),h.closeNode()}parseOpen(h){if(this.parser)return this.parser.parseOpen(h),!0;switch(h.name){case"patternFill":return this.model={type:"pattern",pattern:h.attributes.patternType},!0;default:return this.parser=this.map[h.name],!!this.parser&&(this.parser.parseOpen(h),!0)}}parseText(h){this.parser&&this.parser.parseText(h)}parseClose(h){return!!this.parser&&(this.parser.parseClose(h)||(this.parser.model&&(this.model[h]=this.parser.model),this.parser=void 0),!0)}}class c extends n{constructor(){super(),this.map={stop:new a}}get name(){return"gradient"}get tag(){return"gradientFill"}render(h,p){switch(h.openNode("gradientFill"),p.gradient){case"angle":h.addAttribute("degree",p.degree);break;case"path":h.addAttribute("type","path"),p.center.left&&(h.addAttribute("left",p.center.left),p.center.right===void 0&&h.addAttribute("right",p.center.left)),p.center.right&&h.addAttribute("right",p.center.right),p.center.top&&(h.addAttribute("top",p.center.top),p.center.bottom===void 0&&h.addAttribute("bottom",p.center.top)),p.center.bottom&&h.addAttribute("bottom",p.center.bottom)}const f=this.map.stop;p.stops.forEach(m=>{f.render(h,m)}),h.closeNode()}parseOpen(h){if(this.parser)return this.parser.parseOpen(h),!0;switch(h.name){case"gradientFill":{const p=this.model={stops:[]};return h.attributes.degree?(p.gradient="angle",p.degree=parseInt(h.attributes.degree,10)):h.attributes.type==="path"&&(p.gradient="path",p.center={left:h.attributes.left?parseFloat(h.attributes.left):0,top:h.attributes.top?parseFloat(h.attributes.top):0},h.attributes.right!==h.attributes.left&&(p.center.right=h.attributes.right?parseFloat(h.attributes.right):0),h.attributes.bottom!==h.attributes.top&&(p.center.bottom=h.attributes.bottom?parseFloat(h.attributes.bottom):0)),!0}case"stop":return this.parser=this.map.stop,this.parser.parseOpen(h),!0;default:return!1}}parseText(h){this.parser&&this.parser.parseText(h)}parseClose(h){return!!this.parser&&(this.parser.parseClose(h)||(this.model.stops.push(this.parser.model),this.parser=void 0),!0)}}class u extends n{constructor(){super(),this.map={patternFill:new l,gradientFill:new c}}get tag(){return"fill"}render(h,p){switch(h.addRollback(),h.openNode("fill"),p.type){case"pattern":this.map.patternFill.render(h,p);break;case"gradient":this.map.gradientFill.render(h,p);break;default:return void h.rollback()}h.closeNode(),h.commit()}parseOpen(h){if(this.parser)return this.parser.parseOpen(h),!0;switch(h.name){case"fill":return this.model={},!0;default:return this.parser=this.map[h.name],!!this.parser&&(this.parser.parseOpen(h),!0)}}parseText(h){this.parser&&this.parser.parseText(h)}parseClose(h){return!!this.parser&&(this.parser.parseClose(h)||(this.model=this.parser.model,this.model.type=this.parser.name,this.parser=void 0),!0)}validStyle(h){return u.validPatternValues[h]}}u.validPatternValues=["none","solid","darkVertical","darkGray","mediumGray","lightGray","gray125","gray0625","darkHorizontal","darkVertical","darkDown","darkUp","darkGrid","darkTrellis","lightHorizontal","lightVertical","lightDown","lightUp","lightGrid","lightTrellis","lightGrid"].reduce((d,h)=>(d[h]=!0,d),{}),u.StopXform=a,u.PatternFillXform=l,u.GradientFillXform=c,s.exports=u},{"../base-xform":32,"./color-xform":128}],131:[function(i,s,r){const n=i("./color-xform"),o=i("../simple/boolean-xform"),a=i("../simple/integer-xform"),l=i("../simple/string-xform"),c=i("./underline-xform"),u=i("../../../utils/under-dash"),d=i("../base-xform");class h extends d{constructor(f){super(),this.options=f||h.OPTIONS,this.map={b:{prop:"bold",xform:new o({tag:"b",attr:"val"})},i:{prop:"italic",xform:new o({tag:"i",attr:"val"})},u:{prop:"underline",xform:new c},charset:{prop:"charset",xform:new a({tag:"charset",attr:"val"})},color:{prop:"color",xform:new n},condense:{prop:"condense",xform:new o({tag:"condense",attr:"val"})},extend:{prop:"extend",xform:new o({tag:"extend",attr:"val"})},family:{prop:"family",xform:new a({tag:"family",attr:"val"})},outline:{prop:"outline",xform:new o({tag:"outline",attr:"val"})},vertAlign:{prop:"vertAlign",xform:new l({tag:"vertAlign",attr:"val"})},scheme:{prop:"scheme",xform:new l({tag:"scheme",attr:"val"})},shadow:{prop:"shadow",xform:new o({tag:"shadow",attr:"val"})},strike:{prop:"strike",xform:new o({tag:"strike",attr:"val"})},sz:{prop:"size",xform:new a({tag:"sz",attr:"val"})}},this.map[this.options.fontNameTag]={prop:"name",xform:new l({tag:this.options.fontNameTag,attr:"val"})}}get tag(){return this.options.tagName}render(f,m){const{map:g}=this;f.openNode(this.options.tagName),u.each(this.map,(y,v)=>{g[v].xform.render(f,m[y.prop])}),f.closeNode()}parseOpen(f){if(this.parser)return this.parser.parseOpen(f),!0;if(this.map[f.name])return this.parser=this.map[f.name].xform,this.parser.parseOpen(f);switch(f.name){case this.options.tagName:return this.model={},!0;default:return!1}}parseText(f){this.parser&&this.parser.parseText(f)}parseClose(f){if(this.parser&&!this.parser.parseClose(f)){const m=this.map[f];return this.parser.model&&(this.model[m.prop]=this.parser.model),this.parser=void 0,!0}switch(f){case this.options.tagName:return!1;default:return!0}}}h.OPTIONS={tagName:"font",fontNameTag:"name"},s.exports=h},{"../../../utils/under-dash":26,"../base-xform":32,"../simple/boolean-xform":116,"../simple/integer-xform":118,"../simple/string-xform":119,"./color-xform":128,"./underline-xform":136}],132:[function(i,s,r){const n=i("../../../utils/under-dash"),o=i("../../defaultnumformats"),a=i("../base-xform"),l=function(){const u={};return n.each(o,(d,h)=>{d.f&&(u[d.f]=parseInt(h,10))}),u}();class c extends a{constructor(d,h){super(),this.id=d,this.formatCode=h}get tag(){return"numFmt"}render(d,h){d.leafNode("numFmt",{numFmtId:h.id,formatCode:h.formatCode})}parseOpen(d){switch(d.name){case"numFmt":return this.model={id:parseInt(d.attributes.numFmtId,10),formatCode:d.attributes.formatCode.replace(/[\\](.)/g,"$1")},!0;default:return!1}}parseText(){}parseClose(){return!1}}c.getDefaultFmtId=function(u){return l[u]},c.getDefaultFmtCode=function(u){return o[u]&&o[u].f},s.exports=c},{"../../../utils/under-dash":26,"../../defaultnumformats":30,"../base-xform":32}],133:[function(i,s,r){const n=i("../base-xform"),o={boolean:(a,l)=>a===void 0?l:a};s.exports=class extends n{get tag(){return"protection"}render(a,l){a.addRollback(),a.openNode("protection");let c=!1;function u(d,h){h!==void 0&&(a.addAttribute(d,h),c=!0)}u("locked",o.boolean(l.locked,!0)?void 0:"0"),u("hidden",o.boolean(l.hidden,!1)?"1":void 0),a.closeNode(),c?a.commit():a.rollback()}parseOpen(a){const l={locked:a.attributes.locked!=="0",hidden:a.attributes.hidden==="1"},c=!l.locked||l.hidden;this.model=c?l:null}parseText(){}parseClose(){return!1}}},{"../base-xform":32}],134:[function(i,s,r){const n=i("../base-xform"),o=i("./alignment-xform"),a=i("./protection-xform");s.exports=class extends n{constructor(l){super(),this.xfId=!(!l||!l.xfId),this.map={alignment:new o,protection:new a}}get tag(){return"xf"}render(l,c){l.openNode("xf",{numFmtId:c.numFmtId||0,fontId:c.fontId||0,fillId:c.fillId||0,borderId:c.borderId||0}),this.xfId&&l.addAttribute("xfId",c.xfId||0),c.numFmtId&&l.addAttribute("applyNumberFormat","1"),c.fontId&&l.addAttribute("applyFont","1"),c.fillId&&l.addAttribute("applyFill","1"),c.borderId&&l.addAttribute("applyBorder","1"),c.alignment&&l.addAttribute("applyAlignment","1"),c.protection&&l.addAttribute("applyProtection","1"),c.alignment&&this.map.alignment.render(l,c.alignment),c.protection&&this.map.protection.render(l,c.protection),l.closeNode()}parseOpen(l){if(this.parser)return this.parser.parseOpen(l),!0;switch(l.name){case"xf":return this.model={numFmtId:parseInt(l.attributes.numFmtId,10),fontId:parseInt(l.attributes.fontId,10),fillId:parseInt(l.attributes.fillId,10),borderId:parseInt(l.attributes.borderId,10)},this.xfId&&(this.model.xfId=parseInt(l.attributes.xfId,10)),!0;case"alignment":return this.parser=this.map.alignment,this.parser.parseOpen(l),!0;case"protection":return this.parser=this.map.protection,this.parser.parseOpen(l),!0;default:return!1}}parseText(l){this.parser&&this.parser.parseText(l)}parseClose(l){return this.parser?(this.parser.parseClose(l)||(this.map.protection===this.parser?this.model.protection=this.parser.model:this.model.alignment=this.parser.model,this.parser=void 0),!0):l!=="xf"}}},{"../base-xform":32,"./alignment-xform":126,"./protection-xform":133}],135:[function(i,s,r){const n=i("../../../doc/enums"),o=i("../../../utils/xml-stream"),a=i("../base-xform"),l=i("../static-xform"),c=i("../list-xform"),u=i("./font-xform"),d=i("./fill-xform"),h=i("./border-xform"),p=i("./numfmt-xform"),f=i("./style-xform"),m=i("./dxf-xform");class g extends a{constructor(v){super(),this.map={numFmts:new c({tag:"numFmts",count:!0,childXform:new p}),fonts:new c({tag:"fonts",count:!0,childXform:new u,$:{"x14ac:knownFonts":1}}),fills:new c({tag:"fills",count:!0,childXform:new d}),borders:new c({tag:"borders",count:!0,childXform:new h}),cellStyleXfs:new c({tag:"cellStyleXfs",count:!0,childXform:new f}),cellXfs:new c({tag:"cellXfs",count:!0,childXform:new f({xfId:!0})}),dxfs:new c({tag:"dxfs",always:!0,count:!0,childXform:new m}),numFmt:new p,font:new u,fill:new d,border:new h,style:new f({xfId:!0}),cellStyles:g.STATIC_XFORMS.cellStyles,tableStyles:g.STATIC_XFORMS.tableStyles,extLst:g.STATIC_XFORMS.extLst},v&&this.init()}initIndex(){this.index={style:{},numFmt:{},numFmtNextId:164,font:{},border:{},fill:{}}}init(){this.model={styles:[],numFmts:[],fonts:[],borders:[],fills:[],dxfs:[]},this.initIndex(),this._addBorder({}),this._addStyle({numFmtId:0,fontId:0,fillId:0,borderId:0,xfId:0}),this._addFill({type:"pattern",pattern:"none"}),this._addFill({type:"pattern",pattern:"gray125"}),this.weakMap=new WeakMap}render(v,C){C=C||this.model,v.openXml(o.StdDocAttributes),v.openNode("styleSheet",g.STYLESHEET_ATTRIBUTES),this.index?(C.numFmts&&C.numFmts.length&&(v.openNode("numFmts",{count:C.numFmts.length}),C.numFmts.forEach(b=>{v.writeXml(b)}),v.closeNode()),C.fonts.length||this._addFont({size:11,color:{theme:1},name:"Calibri",family:2,scheme:"minor"}),v.openNode("fonts",{count:C.fonts.length,"x14ac:knownFonts":1}),C.fonts.forEach(b=>{v.writeXml(b)}),v.closeNode(),v.openNode("fills",{count:C.fills.length}),C.fills.forEach(b=>{v.writeXml(b)}),v.closeNode(),v.openNode("borders",{count:C.borders.length}),C.borders.forEach(b=>{v.writeXml(b)}),v.closeNode(),this.map.cellStyleXfs.render(v,[{numFmtId:0,fontId:0,fillId:0,borderId:0,xfId:0}]),v.openNode("cellXfs",{count:C.styles.length}),C.styles.forEach(b=>{v.writeXml(b)}),v.closeNode()):(this.map.numFmts.render(v,C.numFmts),this.map.fonts.render(v,C.fonts),this.map.fills.render(v,C.fills),this.map.borders.render(v,C.borders),this.map.cellStyleXfs.render(v,[{numFmtId:0,fontId:0,fillId:0,borderId:0,xfId:0}]),this.map.cellXfs.render(v,C.styles)),g.STATIC_XFORMS.cellStyles.render(v),this.map.dxfs.render(v,C.dxfs),g.STATIC_XFORMS.tableStyles.render(v),g.STATIC_XFORMS.extLst.render(v),v.closeNode()}parseOpen(v){if(this.parser)return this.parser.parseOpen(v),!0;switch(v.name){case"styleSheet":return this.initIndex(),!0;default:return this.parser=this.map[v.name],this.parser&&this.parser.parseOpen(v),!0}}parseText(v){this.parser&&this.parser.parseText(v)}parseClose(v){if(this.parser)return this.parser.parseClose(v)||(this.parser=void 0),!0;switch(v){case"styleSheet":{this.model={};const C=(b,T)=>{T.model&&T.model.length&&(this.model[b]=T.model)};if(C("numFmts",this.map.numFmts),C("fonts",this.map.fonts),C("fills",this.map.fills),C("borders",this.map.borders),C("styles",this.map.cellXfs),C("dxfs",this.map.dxfs),this.index={model:[],numFmt:[]},this.model.numFmts){const b=this.index.numFmt;this.model.numFmts.forEach(T=>{b[T.id]=T.formatCode})}return!1}default:return!0}}addStyleModel(v,C){if(!v)return 0;if(this.model.fonts.length||this._addFont({size:11,color:{theme:1},name:"Calibri",family:2,scheme:"minor"}),this.weakMap&&this.weakMap.has(v))return this.weakMap.get(v);const b={};if(C=C||n.ValueType.Number,v.numFmt)b.numFmtId=this._addNumFmtStr(v.numFmt);else switch(C){case n.ValueType.Number:b.numFmtId=this._addNumFmtStr("General");break;case n.ValueType.Date:b.numFmtId=this._addNumFmtStr("mm-dd-yy")}v.font&&(b.fontId=this._addFont(v.font)),v.border&&(b.borderId=this._addBorder(v.border)),v.fill&&(b.fillId=this._addFill(v.fill)),v.alignment&&(b.alignment=v.alignment),v.protection&&(b.protection=v.protection);const T=this._addStyle(b);return this.weakMap&&this.weakMap.set(v,T),T}getStyleModel(v){const C=this.model.styles[v];if(!C)return null;let b=this.index.model[v];if(b)return b;if(b=this.index.model[v]={},C.numFmtId){const A=this.index.numFmt[C.numFmtId]||p.getDefaultFmtCode(C.numFmtId);A&&(b.numFmt=A)}function T(A,I,D){if(D||D===0){const F=I[D];F&&(b[A]=F)}}return T("font",this.model.fonts,C.fontId),T("border",this.model.borders,C.borderId),T("fill",this.model.fills,C.fillId),C.alignment&&(b.alignment=C.alignment),C.protection&&(b.protection=C.protection),b}addDxfStyle(v){return v.numFmt&&(v.numFmtId=this._addNumFmtStr(v.numFmt)),this.model.dxfs.push(v),this.model.dxfs.length-1}getDxfStyle(v){return this.model.dxfs[v]}_addStyle(v){const C=this.map.style.toXml(v);let b=this.index.style[C];return b===void 0&&(b=this.index.style[C]=this.model.styles.length,this.model.styles.push(C)),b}_addNumFmtStr(v){let C=p.getDefaultFmtId(v);if(C!==void 0||(C=this.index.numFmt[v],C!==void 0))return C;C=this.index.numFmt[v]=164+this.model.numFmts.length;const b=this.map.numFmt.toXml({id:C,formatCode:v});return this.model.numFmts.push(b),C}_addFont(v){const C=this.map.font.toXml(v);let b=this.index.font[C];return b===void 0&&(b=this.index.font[C]=this.model.fonts.length,this.model.fonts.push(C)),b}_addBorder(v){const C=this.map.border.toXml(v);let b=this.index.border[C];return b===void 0&&(b=this.index.border[C]=this.model.borders.length,this.model.borders.push(C)),b}_addFill(v){const C=this.map.fill.toXml(v);let b=this.index.fill[C];return b===void 0&&(b=this.index.fill[C]=this.model.fills.length,this.model.fills.push(C)),b}}g.STYLESHEET_ATTRIBUTES={xmlns:"http://schemas.openxmlformats.org/spreadsheetml/2006/main","xmlns:mc":"http://schemas.openxmlformats.org/markup-compatibility/2006","mc:Ignorable":"x14ac x16r2","xmlns:x14ac":"http://schemas.microsoft.com/office/spreadsheetml/2009/9/ac","xmlns:x16r2":"http://schemas.microsoft.com/office/spreadsheetml/2015/02/main"},g.STATIC_XFORMS={cellStyles:new l({tag:"cellStyles",$:{count:1},c:[{tag:"cellStyle",$:{name:"Normal",xfId:0,builtinId:0}}]}),dxfs:new l({tag:"dxfs",$:{count:0}}),tableStyles:new l({tag:"tableStyles",$:{count:0,defaultTableStyle:"TableStyleMedium2",defaultPivotStyle:"PivotStyleLight16"}}),extLst:new l({tag:"extLst",c:[{tag:"ext",$:{uri:"{EB79DEF2-80B8-43e5-95BD-54CBDDF9020C}","xmlns:x14":"http://schemas.microsoft.com/office/spreadsheetml/2009/9/main"},c:[{tag:"x14:slicerStyles",$:{defaultSlicerStyle:"SlicerStyleLight1"}}]},{tag:"ext",$:{uri:"{9260A510-F301-46a8-8635-F512D64BE5F5}","xmlns:x15":"http://schemas.microsoft.com/office/spreadsheetml/2010/11/main"},c:[{tag:"x15:timelineStyles",$:{defaultTimelineStyle:"TimeSlicerStyleLight1"}}]}]})},g.Mock=class extends g{constructor(){super(),this.model={styles:[{numFmtId:0,fontId:0,fillId:0,borderId:0,xfId:0}],numFmts:[],fonts:[{size:11,color:{theme:1},name:"Calibri",family:2,scheme:"minor"}],borders:[{}],fills:[{type:"pattern",pattern:"none"},{type:"pattern",pattern:"gray125"}]}}parseStream(y){return y.autodrain(),Promise.resolve()}addStyleModel(y,v){switch(v){case n.ValueType.Date:return this.dateStyleId;default:return 0}}get dateStyleId(){if(!this._dateStyleId){const y={numFmtId:p.getDefaultFmtId("mm-dd-yy")};this._dateStyleId=this.model.styles.length,this.model.styles.push(y)}return this._dateStyleId}getStyleModel(){return{}}},s.exports=g},{"../../../doc/enums":7,"../../../utils/xml-stream":28,"../base-xform":32,"../list-xform":71,"../static-xform":120,"./border-xform":127,"./dxf-xform":129,"./fill-xform":130,"./font-xform":131,"./numfmt-xform":132,"./style-xform":134}],136:[function(i,s,r){const n=i("../base-xform");class o extends n{constructor(l){super(),this.model=l}get tag(){return"u"}render(l,c){if((c=c||this.model)===!0)l.leafNode("u");else{const u=o.Attributes[c];u&&l.leafNode("u",u)}}parseOpen(l){l.name==="u"&&(this.model=l.attributes.val||!0)}parseText(){}parseClose(){return!1}}o.Attributes={single:{},double:{val:"double"},singleAccounting:{val:"singleAccounting"},doubleAccounting:{val:"doubleAccounting"}},s.exports=o},{"../base-xform":32}],137:[function(i,s,r){const n=i("../base-xform"),o=i("./filter-column-xform");s.exports=class extends n{constructor(){super(),this.map={filterColumn:new o}}get tag(){return"autoFilter"}prepare(a){a.columns.forEach((l,c)=>{this.map.filterColumn.prepare(l,{index:c})})}render(a,l){return a.openNode(this.tag,{ref:l.autoFilterRef}),l.columns.forEach(c=>{this.map.filterColumn.render(a,c)}),a.closeNode(),!0}parseOpen(a){if(this.parser)return this.parser.parseOpen(a),!0;switch(a.name){case this.tag:return this.model={autoFilterRef:a.attributes.ref,columns:[]},!0;default:if(this.parser=this.map[a.name],this.parser)return this.parseOpen(a),!0;throw new Error("Unexpected xml node in parseOpen: "+JSON.stringify(a))}}parseText(a){this.parser&&this.parser.parseText(a)}parseClose(a){if(this.parser)return this.parser.parseClose(a)||(this.model.columns.push(this.parser.model),this.parser=void 0),!0;switch(a){case this.tag:return!1;default:throw new Error("Unexpected xml node in parseClose: "+a)}}}},{"../base-xform":32,"./filter-column-xform":139}],138:[function(i,s,r){const n=i("../base-xform");s.exports=class extends n{get tag(){return"customFilter"}render(o,a){o.leafNode(this.tag,{val:a.val,operator:a.operator})}parseOpen(o){return o.name===this.tag&&(this.model={val:o.attributes.val,operator:o.attributes.operator},!0)}parseText(){}parseClose(){return!1}}},{"../base-xform":32}],139:[function(i,s,r){const n=i("../base-xform"),o=i("../list-xform"),a=i("./custom-filter-xform"),l=i("./filter-xform");s.exports=class extends n{constructor(){super(),this.map={customFilters:new o({tag:"customFilters",count:!1,empty:!0,childXform:new a}),filters:new o({tag:"filters",count:!1,empty:!0,childXform:new l})}}get tag(){return"filterColumn"}prepare(c,u){c.colId=u.index.toString()}render(c,u){return u.customFilters?(c.openNode(this.tag,{colId:u.colId,hiddenButton:u.filterButton?"0":"1"}),this.map.customFilters.render(c,u.customFilters),c.closeNode(),!0):(c.leafNode(this.tag,{colId:u.colId,hiddenButton:u.filterButton?"0":"1"}),!0)}parseOpen(c){if(this.parser)return this.parser.parseOpen(c),!0;const{attributes:u}=c;switch(c.name){case this.tag:return this.model={filterButton:u.hiddenButton==="0"},!0;default:if(this.parser=this.map[c.name],this.parser)return this.parseOpen(c),!0;throw new Error("Unexpected xml node in parseOpen: "+JSON.stringify(c))}}parseText(){}parseClose(c){if(this.parser)return this.parser.parseClose(c)||(this.parser=void 0),!0;switch(c){case this.tag:return this.model.customFilters=this.map.customFilters.model,!1;default:return!0}}}},{"../base-xform":32,"../list-xform":71,"./custom-filter-xform":138,"./filter-xform":140}],140:[function(i,s,r){const n=i("../base-xform");s.exports=class extends n{get tag(){return"filter"}render(o,a){o.leafNode(this.tag,{val:a.val})}parseOpen(o){return o.name===this.tag&&(this.model={val:o.attributes.val},!0)}parseText(){}parseClose(){return!1}}},{"../base-xform":32}],141:[function(i,s,r){const n=i("../base-xform");s.exports=class extends n{get tag(){return"tableColumn"}prepare(o,a){o.id=a.index+1}render(o,a){return o.leafNode(this.tag,{id:a.id.toString(),name:a.name,totalsRowLabel:a.totalsRowLabel,totalsRowFunction:a.totalsRowFunction,dxfId:a.dxfId}),!0}parseOpen(o){if(o.name===this.tag){const{attributes:a}=o;return this.model={name:a.name,totalsRowLabel:a.totalsRowLabel,totalsRowFunction:a.totalsRowFunction,dxfId:a.dxfId},!0}return!1}parseText(){}parseClose(){return!1}}},{"../base-xform":32}],142:[function(i,s,r){const n=i("../base-xform");s.exports=class extends n{get tag(){return"tableStyleInfo"}render(o,a){return o.leafNode(this.tag,{name:a.theme?a.theme:void 0,showFirstColumn:a.showFirstColumn?"1":"0",showLastColumn:a.showLastColumn?"1":"0",showRowStripes:a.showRowStripes?"1":"0",showColumnStripes:a.showColumnStripes?"1":"0"}),!0}parseOpen(o){if(o.name===this.tag){const{attributes:a}=o;return this.model={theme:a.name?a.name:null,showFirstColumn:a.showFirstColumn==="1",showLastColumn:a.showLastColumn==="1",showRowStripes:a.showRowStripes==="1",showColumnStripes:a.showColumnStripes==="1"},!0}return!1}parseText(){}parseClose(){return!1}}},{"../base-xform":32}],143:[function(i,s,r){const n=i("../../../utils/xml-stream"),o=i("../base-xform"),a=i("../list-xform"),l=i("./auto-filter-xform"),c=i("./table-column-xform"),u=i("./table-style-info-xform");class d extends o{constructor(){super(),this.map={autoFilter:new l,tableColumns:new a({tag:"tableColumns",count:!0,empty:!0,childXform:new c}),tableStyleInfo:new u}}prepare(p,f){this.map.autoFilter.prepare(p),this.map.tableColumns.prepare(p.columns,f)}get tag(){return"table"}render(p,f){p.openXml(n.StdDocAttributes),p.openNode(this.tag,{...d.TABLE_ATTRIBUTES,id:f.id,name:f.name,displayName:f.displayName||f.name,ref:f.tableRef,totalsRowCount:f.totalsRow?"1":void 0,totalsRowShown:f.totalsRow?void 0:"1",headerRowCount:f.headerRow?"1":"0"}),this.map.autoFilter.render(p,f),this.map.tableColumns.render(p,f.columns),this.map.tableStyleInfo.render(p,f.style),p.closeNode()}parseOpen(p){if(this.parser)return this.parser.parseOpen(p),!0;const{name:f,attributes:m}=p;switch(f){case this.tag:this.reset(),this.model={name:m.name,displayName:m.displayName||m.name,tableRef:m.ref,totalsRow:m.totalsRowCount==="1",headerRow:m.headerRowCount==="1"};break;default:this.parser=this.map[p.name],this.parser&&this.parser.parseOpen(p)}return!0}parseText(p){this.parser&&this.parser.parseText(p)}parseClose(p){if(this.parser)return this.parser.parseClose(p)||(this.parser=void 0),!0;switch(p){case this.tag:return this.model.columns=this.map.tableColumns.model,this.map.autoFilter.model&&(this.model.autoFilterRef=this.map.autoFilter.model.autoFilterRef,this.map.autoFilter.model.columns.forEach((f,m)=>{this.model.columns[m].filterButton=f.filterButton})),this.model.style=this.map.tableStyleInfo.model,!1;default:return!0}}reconcile(p,f){p.columns.forEach(m=>{m.dxfId!==void 0&&(m.style=f.styles.getDxfStyle(m.dxfId))})}}d.TABLE_ATTRIBUTES={xmlns:"http://schemas.openxmlformats.org/spreadsheetml/2006/main","xmlns:mc":"http://schemas.openxmlformats.org/markup-compatibility/2006","mc:Ignorable":"xr xr3","xmlns:xr":"http://schemas.microsoft.com/office/spreadsheetml/2014/revision","xmlns:xr3":"http://schemas.microsoft.com/office/spreadsheetml/2016/revision3"},s.exports=d},{"../../../utils/xml-stream":28,"../base-xform":32,"../list-xform":71,"./auto-filter-xform":137,"./table-column-xform":141,"./table-style-info-xform":142}],144:[function(i,s,r){(function(n,o){(function(){const a=i("fs"),l=i("jszip"),{PassThrough:c}=i("readable-stream"),u=i("../utils/zip-stream"),d=i("../utils/stream-buf"),h=i("../utils/utils"),p=i("../utils/xml-stream"),{bufferToString:f}=i("../utils/browser-buffer-decode"),m=i("./xform/style/styles-xform"),g=i("./xform/core/core-xform"),y=i("./xform/strings/shared-strings-xform"),v=i("./xform/core/relationships-xform"),C=i("./xform/core/content-types-xform"),b=i("./xform/core/app-xform"),T=i("./xform/book/workbook-xform"),A=i("./xform/sheet/worksheet-xform"),I=i("./xform/drawing/drawing-xform"),D=i("./xform/table/table-xform"),F=i("./xform/comment/comments-xform"),B=i("./xform/comment/vml-notes-xform"),U=i("./xml/theme1");class H{constructor(L){this.workbook=L}async readFile(L,_){if(!await h.fs.exists(L))throw new Error("File not found: "+L);const w=a.createReadStream(L);try{const S=await this.read(w,_);return w.close(),S}catch(S){throw w.close(),S}}parseRels(L){return new v().parseStream(L)}parseWorkbook(L){return new T().parseStream(L)}parseSharedStrings(L){return new y().parseStream(L)}reconcile(L,_){const w=new T,S=new A(_),x=new I,E=new D;w.reconcile(L);const M={media:L.media,mediaIndex:L.mediaIndex};Object.keys(L.drawings).forEach(Y=>{const $=L.drawings[Y],J=L.drawingRels[Y];J&&(M.rels=J.reduce((G,Z)=>(G[Z.Id]=Z,G),{}),($.anchors||[]).forEach(G=>{const Z=G.picture&&G.picture.hyperlinks;Z&&M.rels[Z.rId]&&(Z.hyperlink=M.rels[Z.rId].Target,delete Z.rId)}),x.reconcile($,M))});const O={styles:L.styles};Object.values(L.tables).forEach(Y=>{E.reconcile(Y,O)});const V={styles:L.styles,sharedStrings:L.sharedStrings,media:L.media,mediaIndex:L.mediaIndex,date1904:L.properties&&L.properties.date1904,drawings:L.drawings,comments:L.comments,tables:L.tables,vmlDrawings:L.vmlDrawings};L.worksheets.forEach(Y=>{Y.relationships=L.worksheetRels[Y.sheetNo],S.reconcile(Y,V)}),delete L.worksheetHash,delete L.worksheetRels,delete L.globalRels,delete L.sharedStrings,delete L.workbookRels,delete L.sheetDefs,delete L.styles,delete L.mediaIndex,delete L.drawings,delete L.drawingRels,delete L.vmlDrawings}async _processWorksheetEntry(L,_,w,S,x){const E=new A(S),M=await E.parseStream(L);M.sheetNo=w,_.worksheetHash[x]=M,_.worksheets.push(M)}async _processCommentEntry(L,_,w){const S=new F,x=await S.parseStream(L);_.comments[`../${w}.xml`]=x}async _processTableEntry(L,_,w){const S=new D,x=await S.parseStream(L);_.tables[`../tables/${w}.xml`]=x}async _processWorksheetRelsEntry(L,_,w){const S=new v,x=await S.parseStream(L);_.worksheetRels[w]=x}async _processMediaEntry(L,_,w){const S=w.lastIndexOf(".");if(S>=1){const x=w.substr(S+1),E=w.substr(0,S);await new Promise((M,O)=>{const V=new d;V.on("finish",()=>{_.mediaIndex[w]=_.media.length,_.mediaIndex[E]=_.media.length;const Y={type:"image",name:E,extension:x,buffer:V.toBuffer()};_.media.push(Y),M()}),L.on("error",Y=>{O(Y)}),L.pipe(V)})}}async _processDrawingEntry(L,_,w){const S=new I,x=await S.parseStream(L);_.drawings[w]=x}async _processDrawingRelsEntry(L,_,w){const S=new v,x=await S.parseStream(L);_.drawingRels[w]=x}async _processVmlDrawingEntry(L,_,w){const S=new B,x=await S.parseStream(L);_.vmlDrawings[`../drawings/${w}.vml`]=x}async _processThemeEntry(L,_,w){await new Promise((S,x)=>{const E=new d;L.on("error",x),E.on("error",x),E.on("finish",()=>{_.themes[w]=E.read().toString(),S()}),L.pipe(E)})}createInputStream(){throw new Error("`XLSX#createInputStream` is deprecated. You should use `XLSX#read` instead. This method will be removed in version 5.0. Please follow upgrade instruction: https://github.com/exceljs/exceljs/blob/master/UPGRADE-4.0.md")}async read(L,_){!L[Symbol.asyncIterator]&&L.pipe&&(L=L.pipe(new c));const w=[];for await(const S of L)w.push(S);return this.load(o.concat(w),_)}async load(L,_){let w;w=_&&_.base64?o.from(L.toString(),"base64"):L;const S={worksheets:[],worksheetHash:{},worksheetRels:[],themes:{},media:[],mediaIndex:{},drawings:{},drawingRels:{},comments:{},tables:{},vmlDrawings:{}},x=await l.loadAsync(w);for(const E of Object.values(x.files))if(!E.dir){let M,O=E.name;if(O[0]==="/"&&(O=O.substr(1)),O.match(/xl\/media\//)||O.match(/xl\/theme\/([a-zA-Z0-9]+)[.]xml/))M=new c,M.write(await E.async("nodebuffer"));else{let V;M=new c({writableObjectMode:!0,readableObjectMode:!0}),V=n.browser?f(await E.async("nodebuffer")):await E.async("string");const Y=16384;for(let $=0;$<V.length;$+=Y)M.write(V.substring($,$+Y))}switch(M.end(),O){case"_rels/.rels":S.globalRels=await this.parseRels(M);break;case"xl/workbook.xml":{const V=await this.parseWorkbook(M);S.sheets=V.sheets,S.definedNames=V.definedNames,S.views=V.views,S.properties=V.properties,S.calcProperties=V.calcProperties;break}case"xl/_rels/workbook.xml.rels":S.workbookRels=await this.parseRels(M);break;case"xl/sharedStrings.xml":S.sharedStrings=new y,await S.sharedStrings.parseStream(M);break;case"xl/styles.xml":S.styles=new m,await S.styles.parseStream(M);break;case"docProps/app.xml":{const V=new b,Y=await V.parseStream(M);S.company=Y.company,S.manager=Y.manager;break}case"docProps/core.xml":{const V=new g,Y=await V.parseStream(M);Object.assign(S,Y);break}default:{let V=O.match(/xl\/worksheets\/sheet(\d+)[.]xml/);if(V){await this._processWorksheetEntry(M,S,V[1],_,O);break}if(V=O.match(/xl\/worksheets\/_rels\/sheet(\d+)[.]xml.rels/),V){await this._processWorksheetRelsEntry(M,S,V[1]);break}if(V=O.match(/xl\/theme\/([a-zA-Z0-9]+)[.]xml/),V){await this._processThemeEntry(M,S,V[1]);break}if(V=O.match(/xl\/media\/([a-zA-Z0-9]+[.][a-zA-Z0-9]{3,4})$/),V){await this._processMediaEntry(M,S,V[1]);break}if(V=O.match(/xl\/drawings\/([a-zA-Z0-9]+)[.]xml/),V){await this._processDrawingEntry(M,S,V[1]);break}if(V=O.match(/xl\/(comments\d+)[.]xml/),V){await this._processCommentEntry(M,S,V[1]);break}if(V=O.match(/xl\/tables\/(table\d+)[.]xml/),V){await this._processTableEntry(M,S,V[1]);break}if(V=O.match(/xl\/drawings\/_rels\/([a-zA-Z0-9]+)[.]xml[.]rels/),V){await this._processDrawingRelsEntry(M,S,V[1]);break}if(V=O.match(/xl\/drawings\/(vmlDrawing\d+)[.]vml/),V){await this._processVmlDrawingEntry(M,S,V[1]);break}}}}return this.reconcile(S,_),this.workbook.model=S,this.workbook}async addMedia(L,_){await Promise.all(_.media.map(async w=>{if(w.type==="image"){const S=`xl/media/${w.name}.${w.extension}`;if(w.filename){const x=await function(E,M){return new Promise((O,V)=>{a.readFile(E,M,(Y,$)=>{Y?V(Y):O($)})})}(w.filename);return L.append(x,{name:S})}if(w.buffer)return L.append(w.buffer,{name:S});if(w.base64){const x=w.base64,E=x.substring(x.indexOf(",")+1);return L.append(E,{name:S,base64:!0})}}throw new Error("Unsupported media")}))}addDrawings(L,_){const w=new I,S=new v;_.worksheets.forEach(x=>{const{drawing:E}=x;if(E){w.prepare(E,{});let M=w.toXml(E);L.append(M,{name:`xl/drawings/${E.name}.xml`}),M=S.toXml(E.rels),L.append(M,{name:`xl/drawings/_rels/${E.name}.xml.rels`})}})}addTables(L,_){const w=new D;_.worksheets.forEach(S=>{const{tables:x}=S;x.forEach(E=>{w.prepare(E,{});const M=w.toXml(E);L.append(M,{name:"xl/tables/"+E.target})})})}async addContentTypes(L,_){const w=new C().toXml(_);L.append(w,{name:"[Content_Types].xml"})}async addApp(L,_){const w=new b().toXml(_);L.append(w,{name:"docProps/app.xml"})}async addCore(L,_){const w=new g;L.append(w.toXml(_),{name:"docProps/core.xml"})}async addThemes(L,_){const w=_.themes||{theme1:U};Object.keys(w).forEach(S=>{const x=w[S],E=`xl/theme/${S}.xml`;L.append(x,{name:E})})}async addOfficeRels(L){const _=new v().toXml([{Id:"rId1",Type:H.RelType.OfficeDocument,Target:"xl/workbook.xml"},{Id:"rId2",Type:H.RelType.CoreProperties,Target:"docProps/core.xml"},{Id:"rId3",Type:H.RelType.ExtenderProperties,Target:"docProps/app.xml"}]);L.append(_,{name:"_rels/.rels"})}async addWorkbookRels(L,_){let w=1;const S=[{Id:"rId"+w++,Type:H.RelType.Styles,Target:"styles.xml"},{Id:"rId"+w++,Type:H.RelType.Theme,Target:"theme/theme1.xml"}];_.sharedStrings.count&&S.push({Id:"rId"+w++,Type:H.RelType.SharedStrings,Target:"sharedStrings.xml"}),_.worksheets.forEach(E=>{E.rId="rId"+w++,S.push({Id:E.rId,Type:H.RelType.Worksheet,Target:`worksheets/sheet${E.id}.xml`})});const x=new v().toXml(S);L.append(x,{name:"xl/_rels/workbook.xml.rels"})}async addSharedStrings(L,_){_.sharedStrings&&_.sharedStrings.count&&L.append(_.sharedStrings.xml,{name:"xl/sharedStrings.xml"})}async addStyles(L,_){const{xml:w}=_.styles;w&&L.append(w,{name:"xl/styles.xml"})}async addWorkbook(L,_){const w=new T;L.append(w.toXml(_),{name:"xl/workbook.xml"})}async addWorksheets(L,_){const w=new A,S=new v,x=new F,E=new B;_.worksheets.forEach(M=>{let O=new p;w.render(O,M),L.append(O.xml,{name:`xl/worksheets/sheet${M.id}.xml`}),M.rels&&M.rels.length&&(O=new p,S.render(O,M.rels),L.append(O.xml,{name:`xl/worksheets/_rels/sheet${M.id}.xml.rels`})),M.comments.length>0&&(O=new p,x.render(O,M),L.append(O.xml,{name:`xl/comments${M.id}.xml`}),O=new p,E.render(O,M),L.append(O.xml,{name:`xl/drawings/vmlDrawing${M.id}.vml`}))})}_finalize(L){return new Promise((_,w)=>{L.on("finish",()=>{_(this)}),L.on("error",w),L.finalize()})}prepareModel(L,_){L.creator=L.creator||"ExcelJS",L.lastModifiedBy=L.lastModifiedBy||"ExcelJS",L.created=L.created||new Date,L.modified=L.modified||new Date,L.useSharedStrings=_.useSharedStrings===void 0||_.useSharedStrings,L.useStyles=_.useStyles===void 0||_.useStyles,L.sharedStrings=new y,L.styles=L.useStyles?new m(!0):new m.Mock;const w=new T,S=new A;w.prepare(L);const x={sharedStrings:L.sharedStrings,styles:L.styles,date1904:L.properties.date1904,drawingsCount:0,media:L.media};x.drawings=L.drawings=[],x.commentRefs=L.commentRefs=[];let E=0;L.tables=[],L.worksheets.forEach(M=>{M.tables.forEach(O=>{E++,O.target=`table${E}.xml`,O.id=E,L.tables.push(O)}),S.prepare(M,x)})}async write(L,_){_=_||{};const{model:w}=this.workbook,S=new u.ZipWriter(_.zip);return S.pipe(L),this.prepareModel(w,_),await this.addContentTypes(S,w),await this.addOfficeRels(S,w),await this.addWorkbookRels(S,w),await this.addWorksheets(S,w),await this.addSharedStrings(S,w),await this.addDrawings(S,w),await this.addTables(S,w),await Promise.all([this.addThemes(S,w),this.addStyles(S,w)]),await this.addMedia(S,w),await Promise.all([this.addApp(S,w),this.addCore(S,w)]),await this.addWorkbook(S,w),this._finalize(S)}writeFile(L,_){const w=a.createWriteStream(L);return new Promise((S,x)=>{w.on("finish",()=>{S()}),w.on("error",E=>{x(E)}),this.write(w,_).then(()=>{w.end()}).catch(E=>{x(E)})})}async writeBuffer(L){const _=new d;return await this.write(_,L),_.read()}}H.RelType=i("./rel-type"),s.exports=H}).call(this)}).call(this,i("_process"),i("buffer").Buffer)},{"../utils/browser-buffer-decode":16,"../utils/stream-buf":24,"../utils/utils":27,"../utils/xml-stream":28,"../utils/zip-stream":29,"./rel-type":31,"./xform/book/workbook-xform":38,"./xform/comment/comments-xform":40,"./xform/comment/vml-notes-xform":45,"./xform/core/app-xform":51,"./xform/core/content-types-xform":52,"./xform/core/core-xform":53,"./xform/core/relationships-xform":55,"./xform/drawing/drawing-xform":62,"./xform/sheet/worksheet-xform":115,"./xform/strings/shared-strings-xform":124,"./xform/style/styles-xform":135,"./xform/table/table-xform":143,"./xml/theme1":145,_process:467,buffer:220,fs:216,jszip:441,"readable-stream":491}],145:[function(i,s,r){s.exports=`<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<a:theme xmlns:a="http://schemas.openxmlformats.org/drawingml/2006/main" name="Office Theme"> <a:themeElements> <a:clrScheme name="Office"> <a:dk1> <a:sysClr val="windowText" lastClr="000000"/> </a:dk1> <a:lt1> <a:sysClr val="window" lastClr="FFFFFF"/> </a:lt1> <a:dk2> <a:srgbClr val="1F497D"/> </a:dk2> <a:lt2> <a:srgbClr val="EEECE1"/> </a:lt2> <a:accent1> <a:srgbClr val="4F81BD"/> </a:accent1> <a:accent2> <a:srgbClr val="C0504D"/> </a:accent2> <a:accent3> <a:srgbClr val="9BBB59"/> </a:accent3> <a:accent4> <a:srgbClr val="8064A2"/> </a:accent4> <a:accent5> <a:srgbClr val="4BACC6"/> </a:accent5> <a:accent6> <a:srgbClr val="F79646"/> </a:accent6> <a:hlink> <a:srgbClr val="0000FF"/> </a:hlink> <a:folHlink> <a:srgbClr val="800080"/> </a:folHlink> </a:clrScheme> <a:fontScheme name="Office"> <a:majorFont> <a:latin typeface="Cambria"/> <a:ea typeface=""/> <a:cs typeface=""/> <a:font script="Jpan" typeface=" "/> <a:font script="Hang" typeface=" "/> <a:font script="Hans" typeface=""/> <a:font script="Hant" typeface=""/> <a:font script="Arab" typeface="Times New Roman"/> <a:font script="Hebr" typeface="Times New Roman"/> <a:font script="Thai" typeface="Tahoma"/> <a:font script="Ethi" typeface="Nyala"/> <a:font script="Beng" typeface="Vrinda"/> <a:font script="Gujr" typeface="Shruti"/> <a:font script="Khmr" typeface="MoolBoran"/> <a:font script="Knda" typeface="Tunga"/> <a:font script="Guru" typeface="Raavi"/> <a:font script="Cans" typeface="Euphemia"/> <a:font script="Cher" typeface="Plantagenet Cherokee"/> <a:font script="Yiii" typeface="Microsoft Yi Baiti"/> <a:font script="Tibt" typeface="Microsoft Himalaya"/> <a:font script="Thaa" typeface="MV Boli"/> <a:font script="Deva" typeface="Mangal"/> <a:font script="Telu" typeface="Gautami"/> <a:font script="Taml" typeface="Latha"/> <a:font script="Syrc" typeface="Estrangelo Edessa"/> <a:font script="Orya" typeface="Kalinga"/> <a:font script="Mlym" typeface="Kartika"/> <a:font script="Laoo" typeface="DokChampa"/> <a:font script="Sinh" typeface="Iskoola Pota"/> <a:font script="Mong" typeface="Mongolian Baiti"/> <a:font script="Viet" typeface="Times New Roman"/> <a:font script="Uigh" typeface="Microsoft Uighur"/> <a:font script="Geor" typeface="Sylfaen"/> </a:majorFont> <a:minorFont> <a:latin typeface="Calibri"/> <a:ea typeface=""/> <a:cs typeface=""/> <a:font script="Jpan" typeface=" "/> <a:font script="Hang" typeface=" "/> <a:font script="Hans" typeface=""/> <a:font script="Hant" typeface=""/> <a:font script="Arab" typeface="Arial"/> <a:font script="Hebr" typeface="Arial"/> <a:font script="Thai" typeface="Tahoma"/> <a:font script="Ethi" typeface="Nyala"/> <a:font script="Beng" typeface="Vrinda"/> <a:font script="Gujr" typeface="Shruti"/> <a:font script="Khmr" typeface="DaunPenh"/> <a:font script="Knda" typeface="Tunga"/> <a:font script="Guru" typeface="Raavi"/> <a:font script="Cans" typeface="Euphemia"/> <a:font script="Cher" typeface="Plantagenet Cherokee"/> <a:font script="Yiii" typeface="Microsoft Yi Baiti"/> <a:font script="Tibt" typeface="Microsoft Himalaya"/> <a:font script="Thaa" typeface="MV Boli"/> <a:font script="Deva" typeface="Mangal"/> <a:font script="Telu" typeface="Gautami"/> <a:font script="Taml" typeface="Latha"/> <a:font script="Syrc" typeface="Estrangelo Edessa"/> <a:font script="Orya" typeface="Kalinga"/> <a:font script="Mlym" typeface="Kartika"/> <a:font script="Laoo" typeface="DokChampa"/> <a:font script="Sinh" typeface="Iskoola Pota"/> <a:font script="Mong" typeface="Mongolian Baiti"/> <a:font script="Viet" typeface="Arial"/> <a:font script="Uigh" typeface="Microsoft Uighur"/> <a:font script="Geor" typeface="Sylfaen"/> </a:minorFont> </a:fontScheme> <a:fmtScheme name="Office"> <a:fillStyleLst> <a:solidFill> <a:schemeClr val="phClr"/> </a:solidFill> <a:gradFill rotWithShape="1"> <a:gsLst> <a:gs pos="0"> <a:schemeClr val="phClr"> <a:tint val="50000"/> <a:satMod val="300000"/> </a:schemeClr> </a:gs> <a:gs pos="35000"> <a:schemeClr val="phClr"> <a:tint val="37000"/> <a:satMod val="300000"/> </a:schemeClr> </a:gs> <a:gs pos="100000"> <a:schemeClr val="phClr"> <a:tint val="15000"/> <a:satMod val="350000"/> </a:schemeClr> </a:gs> </a:gsLst> <a:lin ang="16200000" scaled="1"/> </a:gradFill> <a:gradFill rotWithShape="1"> <a:gsLst> <a:gs pos="0"> <a:schemeClr val="phClr"> <a:tint val="100000"/> <a:shade val="100000"/> <a:satMod val="130000"/> </a:schemeClr> </a:gs> <a:gs pos="100000"> <a:schemeClr val="phClr"> <a:tint val="50000"/> <a:shade val="100000"/> <a:satMod val="350000"/> </a:schemeClr> </a:gs> </a:gsLst> <a:lin ang="16200000" scaled="0"/> </a:gradFill> </a:fillStyleLst> <a:lnStyleLst> <a:ln w="9525" cap="flat" cmpd="sng" algn="ctr"> <a:solidFill> <a:schemeClr val="phClr"> <a:shade val="95000"/> <a:satMod val="105000"/> </a:schemeClr> </a:solidFill> <a:prstDash val="solid"/> </a:ln> <a:ln w="25400" cap="flat" cmpd="sng" algn="ctr"> <a:solidFill> <a:schemeClr val="phClr"/> </a:solidFill> <a:prstDash val="solid"/> </a:ln> <a:ln w="38100" cap="flat" cmpd="sng" algn="ctr"> <a:solidFill> <a:schemeClr val="phClr"/> </a:solidFill> <a:prstDash val="solid"/> </a:ln> </a:lnStyleLst> <a:effectStyleLst> <a:effectStyle> <a:effectLst> <a:outerShdw blurRad="40000" dist="20000" dir="5400000" rotWithShape="0"> <a:srgbClr val="000000"> <a:alpha val="38000"/> </a:srgbClr> </a:outerShdw> </a:effectLst> </a:effectStyle> <a:effectStyle> <a:effectLst> <a:outerShdw blurRad="40000" dist="23000" dir="5400000" rotWithShape="0"> <a:srgbClr val="000000"> <a:alpha val="35000"/> </a:srgbClr> </a:outerShdw> </a:effectLst> </a:effectStyle> <a:effectStyle> <a:effectLst> <a:outerShdw blurRad="40000" dist="23000" dir="5400000" rotWithShape="0"> <a:srgbClr val="000000"> <a:alpha val="35000"/> </a:srgbClr> </a:outerShdw> </a:effectLst> <a:scene3d> <a:camera prst="orthographicFront"> <a:rot lat="0" lon="0" rev="0"/> </a:camera> <a:lightRig rig="threePt" dir="t"> <a:rot lat="0" lon="0" rev="1200000"/> </a:lightRig> </a:scene3d> <a:sp3d> <a:bevelT w="63500" h="25400"/> </a:sp3d> </a:effectStyle> </a:effectStyleLst> <a:bgFillStyleLst> <a:solidFill> <a:schemeClr val="phClr"/> </a:solidFill> <a:gradFill rotWithShape="1"> <a:gsLst> <a:gs pos="0"> <a:schemeClr val="phClr"> <a:tint val="40000"/> <a:satMod val="350000"/> </a:schemeClr> </a:gs> <a:gs pos="40000"> <a:schemeClr val="phClr"> <a:tint val="45000"/> <a:shade val="99000"/> <a:satMod val="350000"/> </a:schemeClr> </a:gs> <a:gs pos="100000"> <a:schemeClr val="phClr"> <a:shade val="20000"/> <a:satMod val="255000"/> </a:schemeClr> </a:gs> </a:gsLst> <a:path path="circle"> <a:fillToRect l="50000" t="-80000" r="50000" b="180000"/> </a:path> </a:gradFill> <a:gradFill rotWithShape="1"> <a:gsLst> <a:gs pos="0"> <a:schemeClr val="phClr"> <a:tint val="80000"/> <a:satMod val="300000"/> </a:schemeClr> </a:gs> <a:gs pos="100000"> <a:schemeClr val="phClr"> <a:shade val="30000"/> <a:satMod val="200000"/> </a:schemeClr> </a:gs> </a:gsLst> <a:path path="circle"> <a:fillToRect l="50000" t="50000" r="50000" b="50000"/> </a:path> </a:gradFill> </a:bgFillStyleLst> </a:fmtScheme> </a:themeElements> <a:objectDefaults> <a:spDef> <a:spPr/> <a:bodyPr/> <a:lstStyle/> <a:style> <a:lnRef idx="1"> <a:schemeClr val="accent1"/> </a:lnRef> <a:fillRef idx="3"> <a:schemeClr val="accent1"/> </a:fillRef> <a:effectRef idx="2"> <a:schemeClr val="accent1"/> </a:effectRef> <a:fontRef idx="minor"> <a:schemeClr val="lt1"/> </a:fontRef> </a:style> </a:spDef> <a:lnDef> <a:spPr/> <a:bodyPr/> <a:lstStyle/> <a:style> <a:lnRef idx="2"> <a:schemeClr val="accent1"/> </a:lnRef> <a:fillRef idx="0"> <a:schemeClr val="accent1"/> </a:fillRef> <a:effectRef idx="1"> <a:schemeClr val="accent1"/> </a:effectRef> <a:fontRef idx="minor"> <a:schemeClr val="tx1"/> </a:fontRef> </a:style> </a:lnDef> </a:objectDefaults> <a:extraClrSchemeLst/> </a:theme>`},{}],146:[function(i,s,r){(function(n){(function(){Object.defineProperty(r,"__esModule",{value:!0}),r.CsvFormatterStream=void 0;const o=i("stream"),a=i("./formatter");class l extends o.Transform{constructor(u){super({writableObjectMode:u.objectMode}),this.hasWrittenBOM=!1,this.formatterOptions=u,this.rowFormatter=new a.RowFormatter(u),this.hasWrittenBOM=!u.writeBOM}transform(u){return this.rowFormatter.rowTransform=u,this}_transform(u,d,h){let p=!1;try{this.hasWrittenBOM||(this.push(this.formatterOptions.BOM),this.hasWrittenBOM=!0),this.rowFormatter.format(u,(f,m)=>f?(p=!0,h(f)):(m&&m.forEach(g=>{this.push(n.from(g,"utf8"))}),p=!0,h()))}catch(f){if(p)throw f;h(f)}}_flush(u){this.rowFormatter.finish((d,h)=>d?u(d):(h&&h.forEach(p=>{this.push(n.from(p,"utf8"))}),u()))}}r.CsvFormatterStream=l}).call(this)}).call(this,i("buffer").Buffer)},{"./formatter":150,buffer:220,stream:505}],147:[function(i,s,r){Object.defineProperty(r,"__esModule",{value:!0}),r.FormatterOptions=void 0,r.FormatterOptions=class{constructor(){let n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};var o;this.objectMode=!0,this.delimiter=",",this.rowDelimiter=`
`,this.quote='"',this.escape=this.quote,this.quoteColumns=!1,this.quoteHeaders=this.quoteColumns,this.headers=null,this.includeEndRowDelimiter=!1,this.writeBOM=!1,this.BOM="\uFEFF",this.alwaysWriteHeaders=!1,Object.assign(this,n||{}),(n==null?void 0:n.quoteHeaders)===void 0&&(this.quoteHeaders=this.quoteColumns),(n==null?void 0:n.quote)===!0?this.quote='"':(n==null?void 0:n.quote)===!1&&(this.quote=""),typeof(n==null?void 0:n.escape)!="string"&&(this.escape=this.quote),this.shouldWriteHeaders=!!this.headers&&((o=n.writeHeaders)===null||o===void 0||o),this.headers=Array.isArray(this.headers)?this.headers:null,this.escapedQuote=`${this.escape}${this.quote}`}}},{}],148:[function(i,s,r){var n=function(c){return c&&c.__esModule?c:{default:c}};Object.defineProperty(r,"__esModule",{value:!0}),r.FieldFormatter=void 0;const o=n(i("lodash.isboolean")),a=n(i("lodash.isnil")),l=n(i("lodash.escaperegexp"));r.FieldFormatter=class{constructor(c){this._headers=null,this.formatterOptions=c,c.headers!==null&&(this.headers=c.headers),this.REPLACE_REGEXP=new RegExp(c.quote,"g");const u=`[${c.delimiter}${l.default(c.rowDelimiter)}|\r|
]`;this.ESCAPE_REGEXP=new RegExp(u)}set headers(c){this._headers=c}shouldQuote(c,u){const d=u?this.formatterOptions.quoteHeaders:this.formatterOptions.quoteColumns;return o.default(d)?d:Array.isArray(d)?d[c]:this._headers!==null&&d[this._headers[c]]}format(c,u,d){const h=(""+(a.default(c)?"":c)).replace(/\0/g,""),{formatterOptions:p}=this;return p.quote!==""&&h.indexOf(p.quote)!==-1?this.quoteField(h.replace(this.REPLACE_REGEXP,p.escapedQuote)):h.search(this.ESCAPE_REGEXP)!==-1||this.shouldQuote(u,d)?this.quoteField(h):h}quoteField(c){const{quote:u}=this.formatterOptions;return`${u}${c}${u}`}}},{"lodash.escaperegexp":442,"lodash.isboolean":444,"lodash.isnil":447}],149:[function(i,s,r){var n=function(d){return d&&d.__esModule?d:{default:d}};Object.defineProperty(r,"__esModule",{value:!0}),r.RowFormatter=void 0;const o=n(i("lodash.isfunction")),a=n(i("lodash.isequal")),l=i("./FieldFormatter"),c=i("../types");class u{constructor(h){this.rowCount=0,this.formatterOptions=h,this.fieldFormatter=new l.FieldFormatter(h),this.headers=h.headers,this.shouldWriteHeaders=h.shouldWriteHeaders,this.hasWrittenHeaders=!1,this.headers!==null&&(this.fieldFormatter.headers=this.headers),h.transform&&(this.rowTransform=h.transform)}static isRowHashArray(h){return!!Array.isArray(h)&&Array.isArray(h[0])&&h[0].length===2}static isRowArray(h){return Array.isArray(h)&&!this.isRowHashArray(h)}static gatherHeaders(h){return u.isRowHashArray(h)?h.map(p=>p[0]):Array.isArray(h)?h:Object.keys(h)}static createTransform(h){return c.isSyncTransform(h)?(p,f)=>{let m=null;try{m=h(p)}catch(g){return f(g)}return f(null,m)}:(p,f)=>{h(p,f)}}set rowTransform(h){if(!o.default(h))throw new TypeError("The transform should be a function");this._rowTransform=u.createTransform(h)}format(h,p){this.callTransformer(h,(f,m)=>{if(f)return p(f);if(!h)return p(null);const g=[];if(m){const{shouldFormatColumns:y,headers:v}=this.checkHeaders(m);if(this.shouldWriteHeaders&&v&&!this.hasWrittenHeaders&&(g.push(this.formatColumns(v,!0)),this.hasWrittenHeaders=!0),y){const C=this.gatherColumns(m);g.push(this.formatColumns(C,!1))}}return p(null,g)})}finish(h){const p=[];if(this.formatterOptions.alwaysWriteHeaders&&this.rowCount===0){if(!this.headers)return h(new Error("`alwaysWriteHeaders` option is set to true but `headers` option not provided."));p.push(this.formatColumns(this.headers,!0))}return this.formatterOptions.includeEndRowDelimiter&&p.push(this.formatterOptions.rowDelimiter),h(null,p)}checkHeaders(h){if(this.headers)return{shouldFormatColumns:!0,headers:this.headers};const p=u.gatherHeaders(h);return this.headers=p,this.fieldFormatter.headers=p,this.shouldWriteHeaders?{shouldFormatColumns:!a.default(p,h),headers:p}:{shouldFormatColumns:!0,headers:null}}gatherColumns(h){if(this.headers===null)throw new Error("Headers is currently null");return Array.isArray(h)?u.isRowHashArray(h)?this.headers.map((p,f)=>{const m=h[f];return m?m[1]:""}):u.isRowArray(h)&&!this.shouldWriteHeaders?h:this.headers.map((p,f)=>h[f]):this.headers.map(p=>h[p])}callTransformer(h,p){return this._rowTransform?this._rowTransform(h,p):p(null,h)}formatColumns(h,p){const f=h.map((g,y)=>this.fieldFormatter.format(g,y,p)).join(this.formatterOptions.delimiter),{rowCount:m}=this;return this.rowCount+=1,m?[this.formatterOptions.rowDelimiter,f].join(""):f}}r.RowFormatter=u},{"../types":152,"./FieldFormatter":148,"lodash.isequal":445,"lodash.isfunction":446}],150:[function(i,s,r){Object.defineProperty(r,"__esModule",{value:!0}),r.FieldFormatter=r.RowFormatter=void 0;var n=i("./RowFormatter");Object.defineProperty(r,"RowFormatter",{enumerable:!0,get:function(){return n.RowFormatter}});var o=i("./FieldFormatter");Object.defineProperty(r,"FieldFormatter",{enumerable:!0,get:function(){return o.FieldFormatter}})},{"./FieldFormatter":148,"./RowFormatter":149}],151:[function(i,s,r){(function(n){(function(){var o=Object.create?function(y,v,C,b){b===void 0&&(b=C),Object.defineProperty(y,b,{enumerable:!0,get:function(){return v[C]}})}:function(y,v,C,b){b===void 0&&(b=C),y[b]=v[C]},a=Object.create?function(y,v){Object.defineProperty(y,"default",{enumerable:!0,value:v})}:function(y,v){y.default=v},l=function(y){if(y&&y.__esModule)return y;var v={};if(y!=null)for(var C in y)C!=="default"&&Object.prototype.hasOwnProperty.call(y,C)&&o(v,y,C);return a(v,y),v},c=function(y,v){for(var C in y)C==="default"||Object.prototype.hasOwnProperty.call(v,C)||o(v,y,C)};Object.defineProperty(r,"__esModule",{value:!0}),r.writeToPath=r.writeToString=r.writeToBuffer=r.writeToStream=r.write=r.format=r.FormatterOptions=r.CsvFormatterStream=void 0;const u=i("util"),d=i("stream"),h=l(i("fs")),p=i("./FormatterOptions"),f=i("./CsvFormatterStream");c(i("./types"),r);var m=i("./CsvFormatterStream");Object.defineProperty(r,"CsvFormatterStream",{enumerable:!0,get:function(){return m.CsvFormatterStream}});var g=i("./FormatterOptions");Object.defineProperty(r,"FormatterOptions",{enumerable:!0,get:function(){return g.FormatterOptions}}),r.format=y=>new f.CsvFormatterStream(new p.FormatterOptions(y)),r.write=(y,v)=>{const C=r.format(v),b=u.promisify((T,A)=>{C.write(T,void 0,A)});return y.reduce((T,A)=>T.then(()=>b(A)),Promise.resolve()).then(()=>C.end()).catch(T=>{C.emit("error",T)}),C},r.writeToStream=(y,v,C)=>r.write(v,C).pipe(y),r.writeToBuffer=function(y){let v=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const C=[],b=new d.Writable({write(T,A,I){C.push(T),I()}});return new Promise((T,A)=>{b.on("error",A).on("finish",()=>T(n.concat(C))),r.write(y,v).pipe(b)})},r.writeToString=(y,v)=>r.writeToBuffer(y,v).then(C=>C.toString()),r.writeToPath=(y,v,C)=>{const b=h.createWriteStream(y,{encoding:"utf8"});return r.write(v,C).pipe(b)}}).call(this)}).call(this,i("buffer").Buffer)},{"./CsvFormatterStream":146,"./FormatterOptions":147,"./types":152,buffer:220,fs:216,stream:505,util:527}],152:[function(i,s,r){Object.defineProperty(r,"__esModule",{value:!0}),r.isSyncTransform=void 0,r.isSyncTransform=n=>n.length===1},{}],153:[function(i,s,r){(function(n){(function(){Object.defineProperty(r,"__esModule",{value:!0}),r.CsvParserStream=void 0;const o=i("string_decoder"),a=i("stream"),l=i("./transforms"),c=i("./parser");class u extends a.Transform{constructor(h){super({objectMode:h.objectMode}),this.lines="",this.rowCount=0,this.parsedRowCount=0,this.parsedLineCount=0,this.endEmitted=!1,this.headersEmitted=!1,this.parserOptions=h,this.parser=new c.Parser(h),this.headerTransformer=new l.HeaderTransformer(h),this.decoder=new o.StringDecoder(h.encoding),this.rowTransformerValidator=new l.RowTransformerValidator}get hasHitRowLimit(){return this.parserOptions.limitRows&&this.rowCount>=this.parserOptions.maxRows}get shouldEmitRows(){return this.parsedRowCount>this.parserOptions.skipRows}get shouldSkipLine(){return this.parsedLineCount<=this.parserOptions.skipLines}transform(h){return this.rowTransformerValidator.rowTransform=h,this}validate(h){return this.rowTransformerValidator.rowValidator=h,this}emit(h){if(h==="end")return this.endEmitted||(this.endEmitted=!0,super.emit("end",this.rowCount)),!1;for(var p=arguments.length,f=new Array(p>1?p-1:0),m=1;m<p;m++)f[m-1]=arguments[m];return super.emit(h,...f)}_transform(h,p,f){if(this.hasHitRowLimit)return f();const m=u.wrapDoneCallback(f);try{const{lines:g}=this,y=g+this.decoder.write(h),v=this.parse(y,!0);return this.processRows(v,m)}catch(g){return m(g)}}_flush(h){const p=u.wrapDoneCallback(h);if(this.hasHitRowLimit)return p();try{const f=this.lines+this.decoder.end(),m=this.parse(f,!1);return this.processRows(m,p)}catch(f){return p(f)}}parse(h,p){if(!h)return[];const{line:f,rows:m}=this.parser.parse(h,p);return this.lines=f,m}processRows(h,p){const f=h.length,m=g=>{const y=b=>b?p(b):g%100!=0?m(g+1):void n(()=>m(g+1));if(this.checkAndEmitHeaders(),g>=f||this.hasHitRowLimit)return p();if(this.parsedLineCount+=1,this.shouldSkipLine)return y();const v=h[g];this.rowCount+=1,this.parsedRowCount+=1;const C=this.rowCount;return this.transformRow(v,(b,T)=>{if(b)return this.rowCount-=1,y(b);if(!T)return y(new Error("expected transform result"));if(T.isValid){if(T.row)return this.pushRow(T.row,y)}else this.emit("data-invalid",T.row,C,T.reason);return y()})};m(0)}transformRow(h,p){try{this.headerTransformer.transform(h,(f,m)=>f?p(f):m?m.isValid?m.row?this.shouldEmitRows?this.rowTransformerValidator.transformAndValidate(m.row,p):this.skipRow(p):(this.rowCount-=1,this.parsedRowCount-=1,p(null,{row:null,isValid:!0})):this.shouldEmitRows?p(null,{isValid:!1,row:h}):this.skipRow(p):p(new Error("Expected result from header transform")))}catch(f){p(f)}}checkAndEmitHeaders(){!this.headersEmitted&&this.headerTransformer.headers&&(this.headersEmitted=!0,this.emit("headers",this.headerTransformer.headers))}skipRow(h){return this.rowCount-=1,h(null,{row:null,isValid:!0})}pushRow(h,p){try{this.parserOptions.objectMode?this.push(h):this.push(JSON.stringify(h)),p()}catch(f){p(f)}}static wrapDoneCallback(h){let p=!1;return function(f){if(f){if(p)throw f;return p=!0,void h(f)}for(var m=arguments.length,g=new Array(m>1?m-1:0),y=1;y<m;y++)g[y-1]=arguments[y];h(...g)}}}r.CsvParserStream=u}).call(this)}).call(this,i("timers").setImmediate)},{"./parser":165,"./transforms":168,stream:505,string_decoder:218,timers:523}],154:[function(i,s,r){var n=function(l){return l&&l.__esModule?l:{default:l}};Object.defineProperty(r,"__esModule",{value:!0}),r.ParserOptions=void 0;const o=n(i("lodash.escaperegexp")),a=n(i("lodash.isnil"));r.ParserOptions=class{constructor(l){var c;if(this.objectMode=!0,this.delimiter=",",this.ignoreEmpty=!1,this.quote='"',this.escape=null,this.escapeChar=this.quote,this.comment=null,this.supportsComments=!1,this.ltrim=!1,this.rtrim=!1,this.trim=!1,this.headers=null,this.renameHeaders=!1,this.strictColumnHandling=!1,this.discardUnmappedColumns=!1,this.carriageReturn="\r",this.encoding="utf8",this.limitRows=!1,this.maxRows=0,this.skipLines=0,this.skipRows=0,Object.assign(this,l||{}),this.delimiter.length>1)throw new Error("delimiter option must be one character long");this.escapedDelimiter=o.default(this.delimiter),this.escapeChar=(c=this.escape)!==null&&c!==void 0?c:this.quote,this.supportsComments=!a.default(this.comment),this.NEXT_TOKEN_REGEXP=new RegExp(`([^\\s]|\\r\\n|\\n|\\r|${this.escapedDelimiter})`),this.maxRows>0&&(this.limitRows=!0)}}},{"lodash.escaperegexp":442,"lodash.isnil":447}],155:[function(i,s,r){var n=Object.create?function(m,g,y,v){v===void 0&&(v=y),Object.defineProperty(m,v,{enumerable:!0,get:function(){return g[y]}})}:function(m,g,y,v){v===void 0&&(v=y),m[v]=g[y]},o=Object.create?function(m,g){Object.defineProperty(m,"default",{enumerable:!0,value:g})}:function(m,g){m.default=g},a=function(m){if(m&&m.__esModule)return m;var g={};if(m!=null)for(var y in m)y!=="default"&&Object.prototype.hasOwnProperty.call(m,y)&&n(g,m,y);return o(g,m),g},l=function(m,g){for(var y in m)y==="default"||Object.prototype.hasOwnProperty.call(g,y)||n(g,m,y)};Object.defineProperty(r,"__esModule",{value:!0}),r.parseString=r.parseFile=r.parseStream=r.parse=r.ParserOptions=r.CsvParserStream=void 0;const c=a(i("fs")),u=i("stream"),d=i("./ParserOptions"),h=i("./CsvParserStream");l(i("./types"),r);var p=i("./CsvParserStream");Object.defineProperty(r,"CsvParserStream",{enumerable:!0,get:function(){return p.CsvParserStream}});var f=i("./ParserOptions");Object.defineProperty(r,"ParserOptions",{enumerable:!0,get:function(){return f.ParserOptions}}),r.parse=m=>new h.CsvParserStream(new d.ParserOptions(m)),r.parseStream=(m,g)=>m.pipe(new h.CsvParserStream(new d.ParserOptions(g))),r.parseFile=function(m){let g=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return c.createReadStream(m).pipe(new h.CsvParserStream(new d.ParserOptions(g)))},r.parseString=(m,g)=>{const y=new u.Readable;return y.push(m),y.push(null),y.pipe(new h.CsvParserStream(new d.ParserOptions(g)))}},{"./CsvParserStream":153,"./ParserOptions":154,"./types":169,fs:216,stream:505}],156:[function(i,s,r){Object.defineProperty(r,"__esModule",{value:!0}),r.Parser=void 0;const n=i("./Scanner"),o=i("./RowParser"),a=i("./Token");class l{constructor(u){this.parserOptions=u,this.rowParser=new o.RowParser(this.parserOptions)}static removeBOM(u){return u&&u.charCodeAt(0)===65279?u.slice(1):u}parse(u,d){const h=new n.Scanner({line:l.removeBOM(u),parserOptions:this.parserOptions,hasMoreData:d});return this.parserOptions.supportsComments?this.parseWithComments(h):this.parseWithoutComments(h)}parseWithoutComments(u){const d=[];let h=!0;for(;h;)h=this.parseRow(u,d);return{line:u.line,rows:d}}parseWithComments(u){const{parserOptions:d}=this,h=[];for(let p=u.nextCharacterToken;p!==null;p=u.nextCharacterToken)if(a.Token.isTokenComment(p,d)){if(u.advancePastLine()===null)return{line:u.lineFromCursor,rows:h};if(!u.hasMoreCharacters)return{line:u.lineFromCursor,rows:h};u.truncateToCursor()}else if(!this.parseRow(u,h))break;return{line:u.line,rows:h}}parseRow(u,d){if(!u.nextNonSpaceToken)return!1;const h=this.rowParser.parse(u);return h!==null&&(this.parserOptions.ignoreEmpty&&o.RowParser.isEmptyRow(h)||d.push(h),!0)}}r.Parser=l},{"./RowParser":157,"./Scanner":158,"./Token":159}],157:[function(i,s,r){Object.defineProperty(r,"__esModule",{value:!0}),r.RowParser=void 0;const n=i("./column"),o=i("./Token");r.RowParser=class{constructor(a){this.parserOptions=a,this.columnParser=new n.ColumnParser(a)}static isEmptyRow(a){return a.join("").replace(/\s+/g,"")===""}parse(a){const{parserOptions:l}=this,{hasMoreData:c}=a,u=a,d=[];let h=this.getStartToken(u,d);for(;h;){if(o.Token.isTokenRowDelimiter(h))return u.advancePastToken(h),!u.hasMoreCharacters&&o.Token.isTokenCarriageReturn(h,l)&&c?null:(u.truncateToCursor(),d);if(!this.shouldSkipColumnParse(u,h,d)){const p=this.columnParser.parse(u);if(p===null)return null;d.push(p)}h=u.nextNonSpaceToken}return c?null:(u.truncateToCursor(),d)}getStartToken(a,l){const c=a.nextNonSpaceToken;return c!==null&&o.Token.isTokenDelimiter(c,this.parserOptions)?(l.push(""),a.nextNonSpaceToken):c}shouldSkipColumnParse(a,l,c){const{parserOptions:u}=this;if(o.Token.isTokenDelimiter(l,u)){a.advancePastToken(l);const d=a.nextCharacterToken;if(!a.hasMoreCharacters||d!==null&&o.Token.isTokenRowDelimiter(d)||d!==null&&o.Token.isTokenDelimiter(d,u))return c.push(""),!0}return!1}}},{"./Token":159,"./column":164}],158:[function(i,s,r){Object.defineProperty(r,"__esModule",{value:!0}),r.Scanner=void 0;const n=i("./Token"),o=/((?:\r\n)|\n|\r)/;r.Scanner=class{constructor(a){this.cursor=0,this.line=a.line,this.lineLength=this.line.length,this.parserOptions=a.parserOptions,this.hasMoreData=a.hasMoreData,this.cursor=a.cursor||0}get hasMoreCharacters(){return this.lineLength>this.cursor}get nextNonSpaceToken(){const{lineFromCursor:a}=this,l=this.parserOptions.NEXT_TOKEN_REGEXP;if(a.search(l)===-1)return null;const c=l.exec(a);if(c==null)return null;const u=c[1],d=this.cursor+(c.index||0);return new n.Token({token:u,startCursor:d,endCursor:d+u.length-1})}get nextCharacterToken(){const{cursor:a,lineLength:l}=this;return l<=a?null:new n.Token({token:this.line[a],startCursor:a,endCursor:a})}get lineFromCursor(){return this.line.substr(this.cursor)}advancePastLine(){const a=o.exec(this.lineFromCursor);return a?(this.cursor+=(a.index||0)+a[0].length,this):this.hasMoreData?null:(this.cursor=this.lineLength,this)}advanceTo(a){return this.cursor=a,this}advanceToToken(a){return this.cursor=a.startCursor,this}advancePastToken(a){return this.cursor=a.endCursor+1,this}truncateToCursor(){return this.line=this.lineFromCursor,this.lineLength=this.line.length,this.cursor=0,this}}},{"./Token":159}],159:[function(i,s,r){Object.defineProperty(r,"__esModule",{value:!0}),r.Token=void 0,r.Token=class{constructor(n){this.token=n.token,this.startCursor=n.startCursor,this.endCursor=n.endCursor}static isTokenRowDelimiter(n){const o=n.token;return o==="\r"||o===`
`||o===`\r
`}static isTokenCarriageReturn(n,o){return n.token===o.carriageReturn}static isTokenComment(n,o){return o.supportsComments&&!!n&&n.token===o.comment}static isTokenEscapeCharacter(n,o){return n.token===o.escapeChar}static isTokenQuote(n,o){return n.token===o.quote}static isTokenDelimiter(n,o){return n.token===o.delimiter}}},{}],160:[function(i,s,r){Object.defineProperty(r,"__esModule",{value:!0}),r.ColumnFormatter=void 0,r.ColumnFormatter=class{constructor(n){n.trim?this.format=o=>o.trim():n.ltrim?this.format=o=>o.trimLeft():n.rtrim?this.format=o=>o.trimRight():this.format=o=>o}}},{}],161:[function(i,s,r){Object.defineProperty(r,"__esModule",{value:!0}),r.ColumnParser=void 0;const n=i("./NonQuotedColumnParser"),o=i("./QuotedColumnParser"),a=i("../Token");r.ColumnParser=class{constructor(l){this.parserOptions=l,this.quotedColumnParser=new o.QuotedColumnParser(l),this.nonQuotedColumnParser=new n.NonQuotedColumnParser(l)}parse(l){const{nextNonSpaceToken:c}=l;return c!==null&&a.Token.isTokenQuote(c,this.parserOptions)?(l.advanceToToken(c),this.quotedColumnParser.parse(l)):this.nonQuotedColumnParser.parse(l)}}},{"../Token":159,"./NonQuotedColumnParser":162,"./QuotedColumnParser":163}],162:[function(i,s,r){Object.defineProperty(r,"__esModule",{value:!0}),r.NonQuotedColumnParser=void 0;const n=i("./ColumnFormatter"),o=i("../Token");r.NonQuotedColumnParser=class{constructor(a){this.parserOptions=a,this.columnFormatter=new n.ColumnFormatter(a)}parse(a){if(!a.hasMoreCharacters)return null;const{parserOptions:l}=this,c=[];let u=a.nextCharacterToken;for(;u&&!o.Token.isTokenDelimiter(u,l)&&!o.Token.isTokenRowDelimiter(u);u=a.nextCharacterToken)c.push(u.token),a.advancePastToken(u);return this.columnFormatter.format(c.join(""))}}},{"../Token":159,"./ColumnFormatter":160}],163:[function(i,s,r){Object.defineProperty(r,"__esModule",{value:!0}),r.QuotedColumnParser=void 0;const n=i("./ColumnFormatter"),o=i("../Token");r.QuotedColumnParser=class{constructor(a){this.parserOptions=a,this.columnFormatter=new n.ColumnFormatter(a)}parse(a){if(!a.hasMoreCharacters)return null;const l=a.cursor,{foundClosingQuote:c,col:u}=this.gatherDataBetweenQuotes(a);if(!c){if(a.advanceTo(l),!a.hasMoreData)throw new Error(`Parse Error: missing closing: '${this.parserOptions.quote||""}' in line: at '${a.lineFromCursor.replace(/[\r\n]/g,"\\n'")}'`);return null}return this.checkForMalformedColumn(a),u}gatherDataBetweenQuotes(a){const{parserOptions:l}=this;let c=!1,u=!1;const d=[];let h=a.nextCharacterToken;for(;!u&&h!==null;h=a.nextCharacterToken){const p=o.Token.isTokenQuote(h,l);if(!c&&p)c=!0;else if(c)if(o.Token.isTokenEscapeCharacter(h,l)){a.advancePastToken(h);const f=a.nextCharacterToken;f!==null&&(o.Token.isTokenQuote(f,l)||o.Token.isTokenEscapeCharacter(f,l))?(d.push(f.token),h=f):p?u=!0:d.push(h.token)}else p?u=!0:d.push(h.token);a.advancePastToken(h)}return{col:this.columnFormatter.format(d.join("")),foundClosingQuote:u}}checkForMalformedColumn(a){const{parserOptions:l}=this,{nextNonSpaceToken:c}=a;if(c){const u=o.Token.isTokenDelimiter(c,l),d=o.Token.isTokenRowDelimiter(c);if(!u&&!d){const h=a.lineFromCursor.substr(0,10).replace(/[\r\n]/g,"\\n'");throw new Error(`Parse Error: expected: '${l.escapedDelimiter}' OR new line got: '${c.token}'. at '${h}`)}a.advanceToToken(c)}else a.hasMoreData||a.advancePastLine()}}},{"../Token":159,"./ColumnFormatter":160}],164:[function(i,s,r){Object.defineProperty(r,"__esModule",{value:!0}),r.ColumnFormatter=r.QuotedColumnParser=r.NonQuotedColumnParser=r.ColumnParser=void 0;var n=i("./ColumnParser");Object.defineProperty(r,"ColumnParser",{enumerable:!0,get:function(){return n.ColumnParser}});var o=i("./NonQuotedColumnParser");Object.defineProperty(r,"NonQuotedColumnParser",{enumerable:!0,get:function(){return o.NonQuotedColumnParser}});var a=i("./QuotedColumnParser");Object.defineProperty(r,"QuotedColumnParser",{enumerable:!0,get:function(){return a.QuotedColumnParser}});var l=i("./ColumnFormatter");Object.defineProperty(r,"ColumnFormatter",{enumerable:!0,get:function(){return l.ColumnFormatter}})},{"./ColumnFormatter":160,"./ColumnParser":161,"./NonQuotedColumnParser":162,"./QuotedColumnParser":163}],165:[function(i,s,r){Object.defineProperty(r,"__esModule",{value:!0}),r.QuotedColumnParser=r.NonQuotedColumnParser=r.ColumnParser=r.Token=r.Scanner=r.RowParser=r.Parser=void 0;var n=i("./Parser");Object.defineProperty(r,"Parser",{enumerable:!0,get:function(){return n.Parser}});var o=i("./RowParser");Object.defineProperty(r,"RowParser",{enumerable:!0,get:function(){return o.RowParser}});var a=i("./Scanner");Object.defineProperty(r,"Scanner",{enumerable:!0,get:function(){return a.Scanner}});var l=i("./Token");Object.defineProperty(r,"Token",{enumerable:!0,get:function(){return l.Token}});var c=i("./column");Object.defineProperty(r,"ColumnParser",{enumerable:!0,get:function(){return c.ColumnParser}}),Object.defineProperty(r,"NonQuotedColumnParser",{enumerable:!0,get:function(){return c.NonQuotedColumnParser}}),Object.defineProperty(r,"QuotedColumnParser",{enumerable:!0,get:function(){return c.QuotedColumnParser}})},{"./Parser":156,"./RowParser":157,"./Scanner":158,"./Token":159,"./column":164}],166:[function(i,s,r){var n=function(u){return u&&u.__esModule?u:{default:u}};Object.defineProperty(r,"__esModule",{value:!0}),r.HeaderTransformer=void 0;const o=n(i("lodash.isundefined")),a=n(i("lodash.isfunction")),l=n(i("lodash.uniq")),c=n(i("lodash.groupby"));r.HeaderTransformer=class{constructor(u){this.headers=null,this.receivedHeaders=!1,this.shouldUseFirstRow=!1,this.processedFirstRow=!1,this.headersLength=0,this.parserOptions=u,u.headers===!0?this.shouldUseFirstRow=!0:Array.isArray(u.headers)?this.setHeaders(u.headers):a.default(u.headers)&&(this.headersTransform=u.headers)}transform(u,d){return this.shouldMapRow(u)?d(null,this.processRow(u)):d(null,{row:null,isValid:!0})}shouldMapRow(u){const{parserOptions:d}=this;if(!this.headersTransform&&d.renameHeaders&&!this.processedFirstRow){if(!this.receivedHeaders)throw new Error("Error renaming headers: new headers must be provided in an array");return this.processedFirstRow=!0,!1}if(!this.receivedHeaders&&Array.isArray(u)){if(this.headersTransform)this.setHeaders(this.headersTransform(u));else{if(!this.shouldUseFirstRow)return!0;this.setHeaders(u)}return!1}return!0}processRow(u){if(!this.headers)return{row:u,isValid:!0};const{parserOptions:d}=this;if(!d.discardUnmappedColumns&&u.length>this.headersLength){if(!d.strictColumnHandling)throw new Error(`Unexpected Error: column header mismatch expected: ${this.headersLength} columns got: ${u.length}`);return{row:u,isValid:!1,reason:`Column header mismatch expected: ${this.headersLength} columns got: ${u.length}`}}return d.strictColumnHandling&&u.length<this.headersLength?{row:u,isValid:!1,reason:`Column header mismatch expected: ${this.headersLength} columns got: ${u.length}`}:{row:this.mapHeaders(u),isValid:!0}}mapHeaders(u){const d={},{headers:h,headersLength:p}=this;for(let f=0;f<p;f+=1){const m=h[f];if(!o.default(m)){const g=u[f];o.default(g)?d[m]="":d[m]=g}}return d}setHeaders(u){var d;const h=u.filter(p=>!!p);if(l.default(h).length!==h.length){const p=c.default(h),f=Object.keys(p).filter(m=>p[m].length>1);throw new Error("Duplicate headers found "+JSON.stringify(f))}this.headers=u,this.receivedHeaders=!0,this.headersLength=((d=this.headers)===null||d===void 0?void 0:d.length)||0}}},{"lodash.groupby":443,"lodash.isfunction":446,"lodash.isundefined":448,"lodash.uniq":449}],167:[function(i,s,r){var n=function(c){return c&&c.__esModule?c:{default:c}};Object.defineProperty(r,"__esModule",{value:!0}),r.RowTransformerValidator=void 0;const o=n(i("lodash.isfunction")),a=i("../types");class l{constructor(){this._rowTransform=null,this._rowValidator=null}static createTransform(u){return a.isSyncTransform(u)?(d,h)=>{let p=null;try{p=u(d)}catch(f){return h(f)}return h(null,p)}:u}static createValidator(u){return a.isSyncValidate(u)?(d,h)=>{h(null,{row:d,isValid:u(d)})}:(d,h)=>{u(d,(p,f,m)=>p?h(p):h(null,f?{row:d,isValid:f,reason:m}:{row:d,isValid:!1,reason:m}))}}set rowTransform(u){if(!o.default(u))throw new TypeError("The transform should be a function");this._rowTransform=l.createTransform(u)}set rowValidator(u){if(!o.default(u))throw new TypeError("The validate should be a function");this._rowValidator=l.createValidator(u)}transformAndValidate(u,d){return this.callTransformer(u,(h,p)=>h?d(h):p?this.callValidator(p,(f,m)=>f?d(f):m&&!m.isValid?d(null,{row:p,isValid:!1,reason:m.reason}):d(null,{row:p,isValid:!0})):d(null,{row:null,isValid:!0}))}callTransformer(u,d){return this._rowTransform?this._rowTransform(u,d):d(null,u)}callValidator(u,d){return this._rowValidator?this._rowValidator(u,d):d(null,{row:u,isValid:!0})}}r.RowTransformerValidator=l},{"../types":169,"lodash.isfunction":446}],168:[function(i,s,r){Object.defineProperty(r,"__esModule",{value:!0}),r.HeaderTransformer=r.RowTransformerValidator=void 0;var n=i("./RowTransformerValidator");Object.defineProperty(r,"RowTransformerValidator",{enumerable:!0,get:function(){return n.RowTransformerValidator}});var o=i("./HeaderTransformer");Object.defineProperty(r,"HeaderTransformer",{enumerable:!0,get:function(){return o.HeaderTransformer}})},{"./HeaderTransformer":166,"./RowTransformerValidator":167}],169:[function(i,s,r){Object.defineProperty(r,"__esModule",{value:!0}),r.isSyncValidate=r.isSyncTransform=void 0,r.isSyncTransform=n=>n.length===1,r.isSyncValidate=n=>n.length===1},{}],170:[function(i,s,r){const n=r;n.bignum=i("bn.js"),n.define=i("./asn1/api").define,n.base=i("./asn1/base"),n.constants=i("./asn1/constants"),n.decoders=i("./asn1/decoders"),n.encoders=i("./asn1/encoders")},{"./asn1/api":171,"./asn1/base":173,"./asn1/constants":177,"./asn1/decoders":179,"./asn1/encoders":182,"bn.js":184}],171:[function(i,s,r){const n=i("./encoders"),o=i("./decoders"),a=i("inherits");function l(c,u){this.name=c,this.body=u,this.decoders={},this.encoders={}}r.define=function(c,u){return new l(c,u)},l.prototype._createNamed=function(c){const u=this.name;function d(h){this._initNamed(h,u)}return a(d,c),d.prototype._initNamed=function(h,p){c.call(this,h,p)},new d(this)},l.prototype._getDecoder=function(c){return c=c||"der",this.decoders.hasOwnProperty(c)||(this.decoders[c]=this._createNamed(o[c])),this.decoders[c]},l.prototype.decode=function(c,u,d){return this._getDecoder(u).decode(c,d)},l.prototype._getEncoder=function(c){return c=c||"der",this.encoders.hasOwnProperty(c)||(this.encoders[c]=this._createNamed(n[c])),this.encoders[c]},l.prototype.encode=function(c,u,d){return this._getEncoder(u).encode(c,d)}},{"./decoders":179,"./encoders":182,inherits:440}],172:[function(i,s,r){const n=i("inherits"),o=i("../base/reporter").Reporter,a=i("safer-buffer").Buffer;function l(u,d){o.call(this,d),a.isBuffer(u)?(this.base=u,this.offset=0,this.length=u.length):this.error("Input not Buffer")}function c(u,d){if(Array.isArray(u))this.length=0,this.value=u.map(function(h){return c.isEncoderBuffer(h)||(h=new c(h,d)),this.length+=h.length,h},this);else if(typeof u=="number"){if(!(0<=u&&u<=255))return d.error("non-byte EncoderBuffer value");this.value=u,this.length=1}else if(typeof u=="string")this.value=u,this.length=a.byteLength(u);else{if(!a.isBuffer(u))return d.error("Unsupported type: "+typeof u);this.value=u,this.length=u.length}}n(l,o),r.DecoderBuffer=l,l.isDecoderBuffer=function(u){return u instanceof l?!0:typeof u=="object"&&a.isBuffer(u.base)&&u.constructor.name==="DecoderBuffer"&&typeof u.offset=="number"&&typeof u.length=="number"&&typeof u.save=="function"&&typeof u.restore=="function"&&typeof u.isEmpty=="function"&&typeof u.readUInt8=="function"&&typeof u.skip=="function"&&typeof u.raw=="function"},l.prototype.save=function(){return{offset:this.offset,reporter:o.prototype.save.call(this)}},l.prototype.restore=function(u){const d=new l(this.base);return d.offset=u.offset,d.length=this.offset,this.offset=u.offset,o.prototype.restore.call(this,u.reporter),d},l.prototype.isEmpty=function(){return this.offset===this.length},l.prototype.readUInt8=function(u){return this.offset+1<=this.length?this.base.readUInt8(this.offset++,!0):this.error(u||"DecoderBuffer overrun")},l.prototype.skip=function(u,d){if(!(this.offset+u<=this.length))return this.error(d||"DecoderBuffer overrun");const h=new l(this.base);return h._reporterState=this._reporterState,h.offset=this.offset,h.length=this.offset+u,this.offset+=u,h},l.prototype.raw=function(u){return this.base.slice(u?u.offset:this.offset,this.length)},r.EncoderBuffer=c,c.isEncoderBuffer=function(u){return u instanceof c?!0:typeof u=="object"&&u.constructor.name==="EncoderBuffer"&&typeof u.length=="number"&&typeof u.join=="function"},c.prototype.join=function(u,d){return u||(u=a.alloc(this.length)),d||(d=0),this.length===0||(Array.isArray(this.value)?this.value.forEach(function(h){h.join(u,d),d+=h.length}):(typeof this.value=="number"?u[d]=this.value:typeof this.value=="string"?u.write(this.value,d):a.isBuffer(this.value)&&this.value.copy(u,d),d+=this.length)),u}},{"../base/reporter":175,inherits:440,"safer-buffer":495}],173:[function(i,s,r){const n=r;n.Reporter=i("./reporter").Reporter,n.DecoderBuffer=i("./buffer").DecoderBuffer,n.EncoderBuffer=i("./buffer").EncoderBuffer,n.Node=i("./node")},{"./buffer":172,"./node":174,"./reporter":175}],174:[function(i,s,r){const n=i("../base/reporter").Reporter,o=i("../base/buffer").EncoderBuffer,a=i("../base/buffer").DecoderBuffer,l=i("minimalistic-assert"),c=["seq","seqof","set","setof","objid","bool","gentime","utctime","null_","enum","int","objDesc","bitstr","bmpstr","charstr","genstr","graphstr","ia5str","iso646str","numstr","octstr","printstr","t61str","unistr","utf8str","videostr"],u=["key","obj","use","optional","explicit","implicit","def","choice","any","contains"].concat(c);function d(p,f,m){const g={};this._baseState=g,g.name=m,g.enc=p,g.parent=f||null,g.children=null,g.tag=null,g.args=null,g.reverseArgs=null,g.choice=null,g.optional=!1,g.any=!1,g.obj=!1,g.use=null,g.useDecoder=null,g.key=null,g.default=null,g.explicit=null,g.implicit=null,g.contains=null,g.parent||(g.children=[],this._wrap())}s.exports=d;const h=["enc","parent","children","tag","args","reverseArgs","choice","optional","any","obj","use","alteredUse","key","default","explicit","implicit","contains"];d.prototype.clone=function(){const p=this._baseState,f={};h.forEach(function(g){f[g]=p[g]});const m=new this.constructor(f.parent);return m._baseState=f,m},d.prototype._wrap=function(){const p=this._baseState;u.forEach(function(f){this[f]=function(){const m=new this.constructor(this);return p.children.push(m),m[f].apply(m,arguments)}},this)},d.prototype._init=function(p){const f=this._baseState;l(f.parent===null),p.call(this),f.children=f.children.filter(function(m){return m._baseState.parent===this},this),l.equal(f.children.length,1,"Root node can have only one child")},d.prototype._useArgs=function(p){const f=this._baseState,m=p.filter(function(g){return g instanceof this.constructor},this);p=p.filter(function(g){return!(g instanceof this.constructor)},this),m.length!==0&&(l(f.children===null),f.children=m,m.forEach(function(g){g._baseState.parent=this},this)),p.length!==0&&(l(f.args===null),f.args=p,f.reverseArgs=p.map(function(g){if(typeof g!="object"||g.constructor!==Object)return g;const y={};return Object.keys(g).forEach(function(v){v==(0|v)&&(v|=0);const C=g[v];y[C]=v}),y}))},["_peekTag","_decodeTag","_use","_decodeStr","_decodeObjid","_decodeTime","_decodeNull","_decodeInt","_decodeBool","_decodeList","_encodeComposite","_encodeStr","_encodeObjid","_encodeTime","_encodeNull","_encodeInt","_encodeBool"].forEach(function(p){d.prototype[p]=function(){const f=this._baseState;throw new Error(p+" not implemented for encoding: "+f.enc)}}),c.forEach(function(p){d.prototype[p]=function(){const f=this._baseState,m=Array.prototype.slice.call(arguments);return l(f.tag===null),f.tag=p,this._useArgs(m),this}}),d.prototype.use=function(p){l(p);const f=this._baseState;return l(f.use===null),f.use=p,this},d.prototype.optional=function(){return this._baseState.optional=!0,this},d.prototype.def=function(p){const f=this._baseState;return l(f.default===null),f.default=p,f.optional=!0,this},d.prototype.explicit=function(p){const f=this._baseState;return l(f.explicit===null&&f.implicit===null),f.explicit=p,this},d.prototype.implicit=function(p){const f=this._baseState;return l(f.explicit===null&&f.implicit===null),f.implicit=p,this},d.prototype.obj=function(){const p=this._baseState,f=Array.prototype.slice.call(arguments);return p.obj=!0,f.length!==0&&this._useArgs(f),this},d.prototype.key=function(p){const f=this._baseState;return l(f.key===null),f.key=p,this},d.prototype.any=function(){return this._baseState.any=!0,this},d.prototype.choice=function(p){const f=this._baseState;return l(f.choice===null),f.choice=p,this._useArgs(Object.keys(p).map(function(m){return p[m]})),this},d.prototype.contains=function(p){const f=this._baseState;return l(f.use===null),f.contains=p,this},d.prototype._decode=function(p,f){const m=this._baseState;if(m.parent===null)return p.wrapResult(m.children[0]._decode(p,f));let g,y=m.default,v=!0,C=null;if(m.key!==null&&(C=p.enterKey(m.key)),m.optional){let b=null;if(m.explicit!==null?b=m.explicit:m.implicit!==null?b=m.implicit:m.tag!==null&&(b=m.tag),b!==null||m.any){if(v=this._peekTag(p,b,m.any),p.isError(v))return v}else{const T=p.save();try{m.choice===null?this._decodeGeneric(m.tag,p,f):this._decodeChoice(p,f),v=!0}catch{v=!1}p.restore(T)}}if(m.obj&&v&&(g=p.enterObject()),v){if(m.explicit!==null){const T=this._decodeTag(p,m.explicit);if(p.isError(T))return T;p=T}const b=p.offset;if(m.use===null&&m.choice===null){let T;m.any&&(T=p.save());const A=this._decodeTag(p,m.implicit!==null?m.implicit:m.tag,m.any);if(p.isError(A))return A;m.any?y=p.raw(T):p=A}if(f&&f.track&&m.tag!==null&&f.track(p.path(),b,p.length,"tagged"),f&&f.track&&m.tag!==null&&f.track(p.path(),p.offset,p.length,"content"),m.any||(y=m.choice===null?this._decodeGeneric(m.tag,p,f):this._decodeChoice(p,f)),p.isError(y))return y;if(m.any||m.choice!==null||m.children===null||m.children.forEach(function(T){T._decode(p,f)}),m.contains&&(m.tag==="octstr"||m.tag==="bitstr")){const T=new a(y);y=this._getUse(m.contains,p._reporterState.obj)._decode(T,f)}}return m.obj&&v&&(y=p.leaveObject(g)),m.key===null||y===null&&v!==!0?C!==null&&p.exitKey(C):p.leaveKey(C,m.key,y),y},d.prototype._decodeGeneric=function(p,f,m){const g=this._baseState;return p==="seq"||p==="set"?null:p==="seqof"||p==="setof"?this._decodeList(f,p,g.args[0],m):/str$/.test(p)?this._decodeStr(f,p,m):p==="objid"&&g.args?this._decodeObjid(f,g.args[0],g.args[1],m):p==="objid"?this._decodeObjid(f,null,null,m):p==="gentime"||p==="utctime"?this._decodeTime(f,p,m):p==="null_"?this._decodeNull(f,m):p==="bool"?this._decodeBool(f,m):p==="objDesc"?this._decodeStr(f,p,m):p==="int"||p==="enum"?this._decodeInt(f,g.args&&g.args[0],m):g.use!==null?this._getUse(g.use,f._reporterState.obj)._decode(f,m):f.error("unknown tag: "+p)},d.prototype._getUse=function(p,f){const m=this._baseState;return m.useDecoder=this._use(p,f),l(m.useDecoder._baseState.parent===null),m.useDecoder=m.useDecoder._baseState.children[0],m.implicit!==m.useDecoder._baseState.implicit&&(m.useDecoder=m.useDecoder.clone(),m.useDecoder._baseState.implicit=m.implicit),m.useDecoder},d.prototype._decodeChoice=function(p,f){const m=this._baseState;let g=null,y=!1;return Object.keys(m.choice).some(function(v){const C=p.save(),b=m.choice[v];try{const T=b._decode(p,f);if(p.isError(T))return!1;g={type:v,value:T},y=!0}catch{return p.restore(C),!1}return!0},this),y?g:p.error("Choice not matched")},d.prototype._createEncoderBuffer=function(p){return new o(p,this.reporter)},d.prototype._encode=function(p,f,m){const g=this._baseState;if(g.default!==null&&g.default===p)return;const y=this._encodeValue(p,f,m);return y===void 0||this._skipDefault(y,f,m)?void 0:y},d.prototype._encodeValue=function(p,f,m){const g=this._baseState;if(g.parent===null)return g.children[0]._encode(p,f||new n);let y=null;if(this.reporter=f,g.optional&&p===void 0){if(g.default===null)return;p=g.default}let v=null,C=!1;if(g.any)y=this._createEncoderBuffer(p);else if(g.choice)y=this._encodeChoice(p,f);else if(g.contains)v=this._getUse(g.contains,m)._encode(p,f),C=!0;else if(g.children)v=g.children.map(function(b){if(b._baseState.tag==="null_")return b._encode(null,f,p);if(b._baseState.key===null)return f.error("Child should have a key");const T=f.enterKey(b._baseState.key);if(typeof p!="object")return f.error("Child expected, but input is not object");const A=b._encode(p[b._baseState.key],f,p);return f.leaveKey(T),A},this).filter(function(b){return b}),v=this._createEncoderBuffer(v);else if(g.tag==="seqof"||g.tag==="setof"){if(!g.args||g.args.length!==1)return f.error("Too many args for : "+g.tag);if(!Array.isArray(p))return f.error("seqof/setof, but data is not Array");const b=this.clone();b._baseState.implicit=null,v=this._createEncoderBuffer(p.map(function(T){const A=this._baseState;return this._getUse(A.args[0],p)._encode(T,f)},b))}else g.use!==null?y=this._getUse(g.use,m)._encode(p,f):(v=this._encodePrimitive(g.tag,p),C=!0);if(!g.any&&g.choice===null){const b=g.implicit!==null?g.implicit:g.tag,T=g.implicit===null?"universal":"context";b===null?g.use===null&&f.error("Tag could be omitted only for .use()"):g.use===null&&(y=this._encodeComposite(b,C,T,v))}return g.explicit!==null&&(y=this._encodeComposite(g.explicit,!1,"context",y)),y},d.prototype._encodeChoice=function(p,f){const m=this._baseState,g=m.choice[p.type];return g||l(!1,p.type+" not found in "+JSON.stringify(Object.keys(m.choice))),g._encode(p.value,f)},d.prototype._encodePrimitive=function(p,f){const m=this._baseState;if(/str$/.test(p))return this._encodeStr(f,p);if(p==="objid"&&m.args)return this._encodeObjid(f,m.reverseArgs[0],m.args[1]);if(p==="objid")return this._encodeObjid(f,null,null);if(p==="gentime"||p==="utctime")return this._encodeTime(f,p);if(p==="null_")return this._encodeNull();if(p==="int"||p==="enum")return this._encodeInt(f,m.args&&m.reverseArgs[0]);if(p==="bool")return this._encodeBool(f);if(p==="objDesc")return this._encodeStr(f,p);throw new Error("Unsupported tag: "+p)},d.prototype._isNumstr=function(p){return/^[0-9 ]*$/.test(p)},d.prototype._isPrintstr=function(p){return/^[A-Za-z0-9 '()+,-./:=?]*$/.test(p)}},{"../base/buffer":172,"../base/reporter":175,"minimalistic-assert":453}],175:[function(i,s,r){const n=i("inherits");function o(l){this._reporterState={obj:null,path:[],options:l||{},errors:[]}}function a(l,c){this.path=l,this.rethrow(c)}r.Reporter=o,o.prototype.isError=function(l){return l instanceof a},o.prototype.save=function(){const l=this._reporterState;return{obj:l.obj,pathLen:l.path.length}},o.prototype.restore=function(l){const c=this._reporterState;c.obj=l.obj,c.path=c.path.slice(0,l.pathLen)},o.prototype.enterKey=function(l){return this._reporterState.path.push(l)},o.prototype.exitKey=function(l){const c=this._reporterState;c.path=c.path.slice(0,l-1)},o.prototype.leaveKey=function(l,c,u){const d=this._reporterState;this.exitKey(l),d.obj!==null&&(d.obj[c]=u)},o.prototype.path=function(){return this._reporterState.path.join("/")},o.prototype.enterObject=function(){const l=this._reporterState,c=l.obj;return l.obj={},c},o.prototype.leaveObject=function(l){const c=this._reporterState,u=c.obj;return c.obj=l,u},o.prototype.error=function(l){let c;const u=this._reporterState,d=l instanceof a;if(c=d?l:new a(u.path.map(function(h){return"["+JSON.stringify(h)+"]"}).join(""),l.message||l,l.stack),!u.options.partial)throw c;return d||u.errors.push(c),c},o.prototype.wrapResult=function(l){const c=this._reporterState;return c.options.partial?{result:this.isError(l)?null:l,errors:c.errors}:l},n(a,Error),a.prototype.rethrow=function(l){if(this.message=l+" at: "+(this.path||"(shallow)"),Error.captureStackTrace&&Error.captureStackTrace(this,a),!this.stack)try{throw new Error(this.message)}catch(c){this.stack=c.stack}return this}},{inherits:440}],176:[function(i,s,r){function n(o){const a={};return Object.keys(o).forEach(function(l){(0|l)==l&&(l|=0);const c=o[l];a[c]=l}),a}r.tagClass={0:"universal",1:"application",2:"context",3:"private"},r.tagClassByName=n(r.tagClass),r.tag={0:"end",1:"bool",2:"int",3:"bitstr",4:"octstr",5:"null_",6:"objid",7:"objDesc",8:"external",9:"real",10:"enum",11:"embed",12:"utf8str",13:"relativeOid",16:"seq",17:"set",18:"numstr",19:"printstr",20:"t61str",21:"videostr",22:"ia5str",23:"utctime",24:"gentime",25:"graphstr",26:"iso646str",27:"genstr",28:"unistr",29:"charstr",30:"bmpstr"},r.tagByName=n(r.tag)},{}],177:[function(i,s,r){const n=r;n._reverse=function(o){const a={};return Object.keys(o).forEach(function(l){(0|l)==l&&(l|=0);const c=o[l];a[c]=l}),a},n.der=i("./der")},{"./der":176}],178:[function(i,s,r){const n=i("inherits"),o=i("bn.js"),a=i("../base/buffer").DecoderBuffer,l=i("../base/node"),c=i("../constants/der");function u(f){this.enc="der",this.name=f.name,this.entity=f,this.tree=new d,this.tree._init(f.body)}function d(f){l.call(this,"der",f)}function h(f,m){let g=f.readUInt8(m);if(f.isError(g))return g;const y=c.tagClass[g>>6],v=(32&g)==0;if((31&g)==31){let C=g;for(g=0;(128&C)==128;){if(C=f.readUInt8(m),f.isError(C))return C;g<<=7,g|=127&C}}else g&=31;return{cls:y,primitive:v,tag:g,tagStr:c.tag[g]}}function p(f,m,g){let y=f.readUInt8(g);if(f.isError(y))return y;if(!m&&y===128)return null;if(!(128&y))return y;const v=127&y;if(v>4)return f.error("length octect is too long");y=0;for(let C=0;C<v;C++){y<<=8;const b=f.readUInt8(g);if(f.isError(b))return b;y|=b}return y}s.exports=u,u.prototype.decode=function(f,m){return a.isDecoderBuffer(f)||(f=new a(f,m)),this.tree._decode(f,m)},n(d,l),d.prototype._peekTag=function(f,m,g){if(f.isEmpty())return!1;const y=f.save(),v=h(f,'Failed to peek tag: "'+m+'"');return f.isError(v)?v:(f.restore(y),v.tag===m||v.tagStr===m||v.tagStr+"of"===m||g)},d.prototype._decodeTag=function(f,m,g){const y=h(f,'Failed to decode tag of "'+m+'"');if(f.isError(y))return y;let v=p(f,y.primitive,'Failed to get length of "'+m+'"');if(f.isError(v))return v;if(!g&&y.tag!==m&&y.tagStr!==m&&y.tagStr+"of"!==m)return f.error('Failed to match tag: "'+m+'"');if(y.primitive||v!==null)return f.skip(v,'Failed to match body of: "'+m+'"');const C=f.save(),b=this._skipUntilEnd(f,'Failed to skip indefinite length body: "'+this.tag+'"');return f.isError(b)?b:(v=f.offset-C.offset,f.restore(C),f.skip(v,'Failed to match body of: "'+m+'"'))},d.prototype._skipUntilEnd=function(f,m){for(;;){const g=h(f,m);if(f.isError(g))return g;const y=p(f,g.primitive,m);if(f.isError(y))return y;let v;if(v=g.primitive||y!==null?f.skip(y):this._skipUntilEnd(f,m),f.isError(v))return v;if(g.tagStr==="end")break}},d.prototype._decodeList=function(f,m,g,y){const v=[];for(;!f.isEmpty();){const C=this._peekTag(f,"end");if(f.isError(C))return C;const b=g.decode(f,"der",y);if(f.isError(b)&&C)break;v.push(b)}return v},d.prototype._decodeStr=function(f,m){if(m==="bitstr"){const g=f.readUInt8();return f.isError(g)?g:{unused:g,data:f.raw()}}if(m==="bmpstr"){const g=f.raw();if(g.length%2==1)return f.error("Decoding of string type: bmpstr length mismatch");let y="";for(let v=0;v<g.length/2;v++)y+=String.fromCharCode(g.readUInt16BE(2*v));return y}if(m==="numstr"){const g=f.raw().toString("ascii");return this._isNumstr(g)?g:f.error("Decoding of string type: numstr unsupported characters")}if(m==="octstr"||m==="objDesc")return f.raw();if(m==="printstr"){const g=f.raw().toString("ascii");return this._isPrintstr(g)?g:f.error("Decoding of string type: printstr unsupported characters")}return/str$/.test(m)?f.raw().toString():f.error("Decoding of string type: "+m+" unsupported")},d.prototype._decodeObjid=function(f,m,g){let y;const v=[];let C=0,b=0;for(;!f.isEmpty();)b=f.readUInt8(),C<<=7,C|=127&b,!(128&b)&&(v.push(C),C=0);128&b&&v.push(C);const T=v[0]/40|0,A=v[0]%40;if(y=g?v:[T,A].concat(v.slice(1)),m){let I=m[y.join(" ")];I===void 0&&(I=m[y.join(".")]),I!==void 0&&(y=I)}return y},d.prototype._decodeTime=function(f,m){const g=f.raw().toString();let y,v,C,b,T,A;if(m==="gentime")y=0|g.slice(0,4),v=0|g.slice(4,6),C=0|g.slice(6,8),b=0|g.slice(8,10),T=0|g.slice(10,12),A=0|g.slice(12,14);else{if(m!=="utctime")return f.error("Decoding "+m+" time is not supported yet");y=0|g.slice(0,2),v=0|g.slice(2,4),C=0|g.slice(4,6),b=0|g.slice(6,8),T=0|g.slice(8,10),A=0|g.slice(10,12),y=y<70?2e3+y:1900+y}return Date.UTC(y,v-1,C,b,T,A,0)},d.prototype._decodeNull=function(){return null},d.prototype._decodeBool=function(f){const m=f.readUInt8();return f.isError(m)?m:m!==0},d.prototype._decodeInt=function(f,m){const g=f.raw();let y=new o(g);return m&&(y=m[y.toString(10)]||y),y},d.prototype._use=function(f,m){return typeof f=="function"&&(f=f(m)),f._getDecoder("der").tree}},{"../base/buffer":172,"../base/node":174,"../constants/der":176,"bn.js":184,inherits:440}],179:[function(i,s,r){const n=r;n.der=i("./der"),n.pem=i("./pem")},{"./der":178,"./pem":180}],180:[function(i,s,r){const n=i("inherits"),o=i("safer-buffer").Buffer,a=i("./der");function l(c){a.call(this,c),this.enc="pem"}n(l,a),s.exports=l,l.prototype.decode=function(c,u){const d=c.toString().split(/[\r\n]+/g),h=u.label.toUpperCase(),p=/^-----(BEGIN|END) ([^-]+)-----$/;let f=-1,m=-1;for(let v=0;v<d.length;v++){const C=d[v].match(p);if(C!==null&&C[2]===h){if(f!==-1){if(C[1]!=="END")break;m=v;break}if(C[1]!=="BEGIN")break;f=v}}if(f===-1||m===-1)throw new Error("PEM section not found for: "+h);const g=d.slice(f+1,m).join("");g.replace(/[^a-z0-9+/=]+/gi,"");const y=o.from(g,"base64");return a.prototype.decode.call(this,y,u)}},{"./der":178,inherits:440,"safer-buffer":495}],181:[function(i,s,r){const n=i("inherits"),o=i("safer-buffer").Buffer,a=i("../base/node"),l=i("../constants/der");function c(h){this.enc="der",this.name=h.name,this.entity=h,this.tree=new u,this.tree._init(h.body)}function u(h){a.call(this,"der",h)}function d(h){return h<10?"0"+h:h}s.exports=c,c.prototype.encode=function(h,p){return this.tree._encode(h,p).join()},n(u,a),u.prototype._encodeComposite=function(h,p,f,m){const g=function(C,b,T,A){let I;if(C==="seqof"?C="seq":C==="setof"&&(C="set"),l.tagByName.hasOwnProperty(C))I=l.tagByName[C];else{if(typeof C!="number"||(0|C)!==C)return A.error("Unknown tag: "+C);I=C}return I>=31?A.error("Multi-octet tag encoding unsupported"):(b||(I|=32),I|=l.tagClassByName[T||"universal"]<<6,I)}(h,p,f,this.reporter);if(m.length<128){const C=o.alloc(2);return C[0]=g,C[1]=m.length,this._createEncoderBuffer([C,m])}let y=1;for(let C=m.length;C>=256;C>>=8)y++;const v=o.alloc(2+y);v[0]=g,v[1]=128|y;for(let C=1+y,b=m.length;b>0;C--,b>>=8)v[C]=255&b;return this._createEncoderBuffer([v,m])},u.prototype._encodeStr=function(h,p){if(p==="bitstr")return this._createEncoderBuffer([0|h.unused,h.data]);if(p==="bmpstr"){const f=o.alloc(2*h.length);for(let m=0;m<h.length;m++)f.writeUInt16BE(h.charCodeAt(m),2*m);return this._createEncoderBuffer(f)}return p==="numstr"?this._isNumstr(h)?this._createEncoderBuffer(h):this.reporter.error("Encoding of string type: numstr supports only digits and space"):p==="printstr"?this._isPrintstr(h)?this._createEncoderBuffer(h):this.reporter.error("Encoding of string type: printstr supports only latin upper and lower case letters, digits, space, apostrophe, left and rigth parenthesis, plus sign, comma, hyphen, dot, slash, colon, equal sign, question mark"):/str$/.test(p)||p==="objDesc"?this._createEncoderBuffer(h):this.reporter.error("Encoding of string type: "+p+" unsupported")},u.prototype._encodeObjid=function(h,p,f){if(typeof h=="string"){if(!p)return this.reporter.error("string objid given, but no values map found");if(!p.hasOwnProperty(h))return this.reporter.error("objid not found in values map");h=p[h].split(/[\s.]+/g);for(let v=0;v<h.length;v++)h[v]|=0}else if(Array.isArray(h)){h=h.slice();for(let v=0;v<h.length;v++)h[v]|=0}if(!Array.isArray(h))return this.reporter.error("objid() should be either array or string, got: "+JSON.stringify(h));if(!f){if(h[1]>=40)return this.reporter.error("Second objid identifier OOB");h.splice(0,2,40*h[0]+h[1])}let m=0;for(let v=0;v<h.length;v++){let C=h[v];for(m++;C>=128;C>>=7)m++}const g=o.alloc(m);let y=g.length-1;for(let v=h.length-1;v>=0;v--){let C=h[v];for(g[y--]=127&C;(C>>=7)>0;)g[y--]=128|127&C}return this._createEncoderBuffer(g)},u.prototype._encodeTime=function(h,p){let f;const m=new Date(h);return p==="gentime"?f=[d(m.getUTCFullYear()),d(m.getUTCMonth()+1),d(m.getUTCDate()),d(m.getUTCHours()),d(m.getUTCMinutes()),d(m.getUTCSeconds()),"Z"].join(""):p==="utctime"?f=[d(m.getUTCFullYear()%100),d(m.getUTCMonth()+1),d(m.getUTCDate()),d(m.getUTCHours()),d(m.getUTCMinutes()),d(m.getUTCSeconds()),"Z"].join(""):this.reporter.error("Encoding "+p+" time is not supported yet"),this._encodeStr(f,"octstr")},u.prototype._encodeNull=function(){return this._createEncoderBuffer("")},u.prototype._encodeInt=function(h,p){if(typeof h=="string"){if(!p)return this.reporter.error("String int or enum given, but no values map");if(!p.hasOwnProperty(h))return this.reporter.error("Values map doesn't contain: "+JSON.stringify(h));h=p[h]}if(typeof h!="number"&&!o.isBuffer(h)){const g=h.toArray();!h.sign&&128&g[0]&&g.unshift(0),h=o.from(g)}if(o.isBuffer(h)){let g=h.length;h.length===0&&g++;const y=o.alloc(g);return h.copy(y),h.length===0&&(y[0]=0),this._createEncoderBuffer(y)}if(h<128)return this._createEncoderBuffer(h);if(h<256)return this._createEncoderBuffer([0,h]);let f=1;for(let g=h;g>=256;g>>=8)f++;const m=new Array(f);for(let g=m.length-1;g>=0;g--)m[g]=255&h,h>>=8;return 128&m[0]&&m.unshift(0),this._createEncoderBuffer(o.from(m))},u.prototype._encodeBool=function(h){return this._createEncoderBuffer(h?255:0)},u.prototype._use=function(h,p){return typeof h=="function"&&(h=h(p)),h._getEncoder("der").tree},u.prototype._skipDefault=function(h,p,f){const m=this._baseState;let g;if(m.default===null)return!1;const y=h.join();if(m.defaultBuffer===void 0&&(m.defaultBuffer=this._encodeValue(m.default,p,f).join()),y.length!==m.defaultBuffer.length)return!1;for(g=0;g<y.length;g++)if(y[g]!==m.defaultBuffer[g])return!1;return!0}},{"../base/node":174,"../constants/der":176,inherits:440,"safer-buffer":495}],182:[function(i,s,r){const n=r;n.der=i("./der"),n.pem=i("./pem")},{"./der":181,"./pem":183}],183:[function(i,s,r){const n=i("inherits"),o=i("./der");function a(l){o.call(this,l),this.enc="pem"}n(a,o),s.exports=a,a.prototype.encode=function(l,c){const u=o.prototype.encode.call(this,l).toString("base64"),d=["-----BEGIN "+c.label+"-----"];for(let h=0;h<u.length;h+=64)d.push(u.slice(h,h+64));return d.push("-----END "+c.label+"-----"),d.join(`
`)}},{"./der":181,inherits:440}],184:[function(i,s,r){(function(n,o){function a(R,L){if(!R)throw new Error(L||"Assertion failed")}function l(R,L){R.super_=L;var _=function(){};_.prototype=L.prototype,R.prototype=new _,R.prototype.constructor=R}function c(R,L,_){if(c.isBN(R))return R;this.negative=0,this.words=null,this.length=0,this.red=null,R!==null&&(L!=="le"&&L!=="be"||(_=L,L=10),this._init(R||0,L||10,_||"be"))}var u;typeof n=="object"?n.exports=c:(void 0).BN=c,c.BN=c,c.wordSize=26;try{u=typeof window<"u"&&window.Buffer!==void 0?window.Buffer:i("buffer").Buffer}catch{}function d(R,L){var _=R.charCodeAt(L);return _>=65&&_<=70?_-55:_>=97&&_<=102?_-87:_-48&15}function h(R,L,_){var w=d(R,_);return _-1>=L&&(w|=d(R,_-1)<<4),w}function p(R,L,_,w){for(var S=0,x=Math.min(R.length,_),E=L;E<x;E++){var M=R.charCodeAt(E)-48;S*=w,S+=M>=49?M-49+10:M>=17?M-17+10:M}return S}c.isBN=function(R){return R instanceof c||R!==null&&typeof R=="object"&&R.constructor.wordSize===c.wordSize&&Array.isArray(R.words)},c.max=function(R,L){return R.cmp(L)>0?R:L},c.min=function(R,L){return R.cmp(L)<0?R:L},c.prototype._init=function(R,L,_){if(typeof R=="number")return this._initNumber(R,L,_);if(typeof R=="object")return this._initArray(R,L,_);L==="hex"&&(L=16),a(L===(0|L)&&L>=2&&L<=36);var w=0;(R=R.toString().replace(/\s+/g,""))[0]==="-"&&(w++,this.negative=1),w<R.length&&(L===16?this._parseHex(R,w,_):(this._parseBase(R,L,w),_==="le"&&this._initArray(this.toArray(),L,_)))},c.prototype._initNumber=function(R,L,_){R<0&&(this.negative=1,R=-R),R<67108864?(this.words=[67108863&R],this.length=1):R<4503599627370496?(this.words=[67108863&R,R/67108864&67108863],this.length=2):(a(R<9007199254740992),this.words=[67108863&R,R/67108864&67108863,1],this.length=3),_==="le"&&this._initArray(this.toArray(),L,_)},c.prototype._initArray=function(R,L,_){if(a(typeof R.length=="number"),R.length<=0)return this.words=[0],this.length=1,this;this.length=Math.ceil(R.length/3),this.words=new Array(this.length);for(var w=0;w<this.length;w++)this.words[w]=0;var S,x,E=0;if(_==="be")for(w=R.length-1,S=0;w>=0;w-=3)x=R[w]|R[w-1]<<8|R[w-2]<<16,this.words[S]|=x<<E&67108863,this.words[S+1]=x>>>26-E&67108863,(E+=24)>=26&&(E-=26,S++);else if(_==="le")for(w=0,S=0;w<R.length;w+=3)x=R[w]|R[w+1]<<8|R[w+2]<<16,this.words[S]|=x<<E&67108863,this.words[S+1]=x>>>26-E&67108863,(E+=24)>=26&&(E-=26,S++);return this.strip()},c.prototype._parseHex=function(R,L,_){this.length=Math.ceil((R.length-L)/6),this.words=new Array(this.length);for(var w=0;w<this.length;w++)this.words[w]=0;var S,x=0,E=0;if(_==="be")for(w=R.length-1;w>=L;w-=2)S=h(R,L,w)<<x,this.words[E]|=67108863&S,x>=18?(x-=18,E+=1,this.words[E]|=S>>>26):x+=8;else for(w=(R.length-L)%2==0?L+1:L;w<R.length;w+=2)S=h(R,L,w)<<x,this.words[E]|=67108863&S,x>=18?(x-=18,E+=1,this.words[E]|=S>>>26):x+=8;this.strip()},c.prototype._parseBase=function(R,L,_){this.words=[0],this.length=1;for(var w=0,S=1;S<=67108863;S*=L)w++;w--,S=S/L|0;for(var x=R.length-_,E=x%w,M=Math.min(x,x-E)+_,O=0,V=_;V<M;V+=w)O=p(R,V,V+w,L),this.imuln(S),this.words[0]+O<67108864?this.words[0]+=O:this._iaddn(O);if(E!==0){var Y=1;for(O=p(R,V,R.length,L),V=0;V<E;V++)Y*=L;this.imuln(Y),this.words[0]+O<67108864?this.words[0]+=O:this._iaddn(O)}this.strip()},c.prototype.copy=function(R){R.words=new Array(this.length);for(var L=0;L<this.length;L++)R.words[L]=this.words[L];R.length=this.length,R.negative=this.negative,R.red=this.red},c.prototype.clone=function(){var R=new c(null);return this.copy(R),R},c.prototype._expand=function(R){for(;this.length<R;)this.words[this.length++]=0;return this},c.prototype.strip=function(){for(;this.length>1&&this.words[this.length-1]===0;)this.length--;return this._normSign()},c.prototype._normSign=function(){return this.length===1&&this.words[0]===0&&(this.negative=0),this},c.prototype.inspect=function(){return(this.red?"<BN-R: ":"<BN: ")+this.toString(16)+">"};var f=["","0","00","000","0000","00000","000000","0000000","00000000","000000000","0000000000","00000000000","000000000000","0000000000000","00000000000000","000000000000000","0000000000000000","00000000000000000","000000000000000000","0000000000000000000","00000000000000000000","000000000000000000000","0000000000000000000000","00000000000000000000000","000000000000000000000000","0000000000000000000000000"],m=[0,0,25,16,12,11,10,9,8,8,7,7,7,7,6,6,6,6,6,6,6,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5],g=[0,0,33554432,43046721,16777216,48828125,60466176,40353607,16777216,43046721,1e7,19487171,35831808,62748517,7529536,11390625,16777216,24137569,34012224,47045881,64e6,4084101,5153632,6436343,7962624,9765625,11881376,14348907,17210368,20511149,243e5,28629151,33554432,39135393,45435424,52521875,60466176];function y(R,L,_){_.negative=L.negative^R.negative;var w=R.length+L.length|0;_.length=w,w=w-1|0;var S=0|R.words[0],x=0|L.words[0],E=S*x,M=67108863&E,O=E/67108864|0;_.words[0]=M;for(var V=1;V<w;V++){for(var Y=O>>>26,$=67108863&O,J=Math.min(V,L.length-1),G=Math.max(0,V-R.length+1);G<=J;G++){var Z=V-G|0;Y+=(E=(S=0|R.words[Z])*(x=0|L.words[G])+$)/67108864|0,$=67108863&E}_.words[V]=0|$,O=0|Y}return O!==0?_.words[V]=0|O:_.length--,_.strip()}c.prototype.toString=function(R,L){var _;if(L=0|L||1,(R=R||10)===16||R==="hex"){_="";for(var w=0,S=0,x=0;x<this.length;x++){var E=this.words[x],M=(16777215&(E<<w|S)).toString(16);_=(S=E>>>24-w&16777215)!==0||x!==this.length-1?f[6-M.length]+M+_:M+_,(w+=2)>=26&&(w-=26,x--)}for(S!==0&&(_=S.toString(16)+_);_.length%L!=0;)_="0"+_;return this.negative!==0&&(_="-"+_),_}if(R===(0|R)&&R>=2&&R<=36){var O=m[R],V=g[R];_="";var Y=this.clone();for(Y.negative=0;!Y.isZero();){var $=Y.modn(V).toString(R);_=(Y=Y.idivn(V)).isZero()?$+_:f[O-$.length]+$+_}for(this.isZero()&&(_="0"+_);_.length%L!=0;)_="0"+_;return this.negative!==0&&(_="-"+_),_}a(!1,"Base should be between 2 and 36")},c.prototype.toNumber=function(){var R=this.words[0];return this.length===2?R+=67108864*this.words[1]:this.length===3&&this.words[2]===1?R+=4503599627370496+67108864*this.words[1]:this.length>2&&a(!1,"Number can only safely store up to 53 bits"),this.negative!==0?-R:R},c.prototype.toJSON=function(){return this.toString(16)},c.prototype.toBuffer=function(R,L){return a(u!==void 0),this.toArrayLike(u,R,L)},c.prototype.toArray=function(R,L){return this.toArrayLike(Array,R,L)},c.prototype.toArrayLike=function(R,L,_){var w=this.byteLength(),S=_||Math.max(1,w);a(w<=S,"byte array longer than desired length"),a(S>0,"Requested array length <= 0"),this.strip();var x,E,M=L==="le",O=new R(S),V=this.clone();if(M){for(E=0;!V.isZero();E++)x=V.andln(255),V.iushrn(8),O[E]=x;for(;E<S;E++)O[E]=0}else{for(E=0;E<S-w;E++)O[E]=0;for(E=0;!V.isZero();E++)x=V.andln(255),V.iushrn(8),O[S-E-1]=x}return O},Math.clz32?c.prototype._countBits=function(R){return 32-Math.clz32(R)}:c.prototype._countBits=function(R){var L=R,_=0;return L>=4096&&(_+=13,L>>>=13),L>=64&&(_+=7,L>>>=7),L>=8&&(_+=4,L>>>=4),L>=2&&(_+=2,L>>>=2),_+L},c.prototype._zeroBits=function(R){if(R===0)return 26;var L=R,_=0;return!(8191&L)&&(_+=13,L>>>=13),!(127&L)&&(_+=7,L>>>=7),!(15&L)&&(_+=4,L>>>=4),!(3&L)&&(_+=2,L>>>=2),!(1&L)&&_++,_},c.prototype.bitLength=function(){var R=this.words[this.length-1],L=this._countBits(R);return 26*(this.length-1)+L},c.prototype.zeroBits=function(){if(this.isZero())return 0;for(var R=0,L=0;L<this.length;L++){var _=this._zeroBits(this.words[L]);if(R+=_,_!==26)break}return R},c.prototype.byteLength=function(){return Math.ceil(this.bitLength()/8)},c.prototype.toTwos=function(R){return this.negative!==0?this.abs().inotn(R).iaddn(1):this.clone()},c.prototype.fromTwos=function(R){return this.testn(R-1)?this.notn(R).iaddn(1).ineg():this.clone()},c.prototype.isNeg=function(){return this.negative!==0},c.prototype.neg=function(){return this.clone().ineg()},c.prototype.ineg=function(){return this.isZero()||(this.negative^=1),this},c.prototype.iuor=function(R){for(;this.length<R.length;)this.words[this.length++]=0;for(var L=0;L<R.length;L++)this.words[L]=this.words[L]|R.words[L];return this.strip()},c.prototype.ior=function(R){return a((this.negative|R.negative)==0),this.iuor(R)},c.prototype.or=function(R){return this.length>R.length?this.clone().ior(R):R.clone().ior(this)},c.prototype.uor=function(R){return this.length>R.length?this.clone().iuor(R):R.clone().iuor(this)},c.prototype.iuand=function(R){var L;L=this.length>R.length?R:this;for(var _=0;_<L.length;_++)this.words[_]=this.words[_]&R.words[_];return this.length=L.length,this.strip()},c.prototype.iand=function(R){return a((this.negative|R.negative)==0),this.iuand(R)},c.prototype.and=function(R){return this.length>R.length?this.clone().iand(R):R.clone().iand(this)},c.prototype.uand=function(R){return this.length>R.length?this.clone().iuand(R):R.clone().iuand(this)},c.prototype.iuxor=function(R){var L,_;this.length>R.length?(L=this,_=R):(L=R,_=this);for(var w=0;w<_.length;w++)this.words[w]=L.words[w]^_.words[w];if(this!==L)for(;w<L.length;w++)this.words[w]=L.words[w];return this.length=L.length,this.strip()},c.prototype.ixor=function(R){return a((this.negative|R.negative)==0),this.iuxor(R)},c.prototype.xor=function(R){return this.length>R.length?this.clone().ixor(R):R.clone().ixor(this)},c.prototype.uxor=function(R){return this.length>R.length?this.clone().iuxor(R):R.clone().iuxor(this)},c.prototype.inotn=function(R){a(typeof R=="number"&&R>=0);var L=0|Math.ceil(R/26),_=R%26;this._expand(L),_>0&&L--;for(var w=0;w<L;w++)this.words[w]=67108863&~this.words[w];return _>0&&(this.words[w]=~this.words[w]&67108863>>26-_),this.strip()},c.prototype.notn=function(R){return this.clone().inotn(R)},c.prototype.setn=function(R,L){a(typeof R=="number"&&R>=0);var _=R/26|0,w=R%26;return this._expand(_+1),this.words[_]=L?this.words[_]|1<<w:this.words[_]&~(1<<w),this.strip()},c.prototype.iadd=function(R){var L,_,w;if(this.negative!==0&&R.negative===0)return this.negative=0,L=this.isub(R),this.negative^=1,this._normSign();if(this.negative===0&&R.negative!==0)return R.negative=0,L=this.isub(R),R.negative=1,L._normSign();this.length>R.length?(_=this,w=R):(_=R,w=this);for(var S=0,x=0;x<w.length;x++)L=(0|_.words[x])+(0|w.words[x])+S,this.words[x]=67108863&L,S=L>>>26;for(;S!==0&&x<_.length;x++)L=(0|_.words[x])+S,this.words[x]=67108863&L,S=L>>>26;if(this.length=_.length,S!==0)this.words[this.length]=S,this.length++;else if(_!==this)for(;x<_.length;x++)this.words[x]=_.words[x];return this},c.prototype.add=function(R){var L;return R.negative!==0&&this.negative===0?(R.negative=0,L=this.sub(R),R.negative^=1,L):R.negative===0&&this.negative!==0?(this.negative=0,L=R.sub(this),this.negative=1,L):this.length>R.length?this.clone().iadd(R):R.clone().iadd(this)},c.prototype.isub=function(R){if(R.negative!==0){R.negative=0;var L=this.iadd(R);return R.negative=1,L._normSign()}if(this.negative!==0)return this.negative=0,this.iadd(R),this.negative=1,this._normSign();var _,w,S=this.cmp(R);if(S===0)return this.negative=0,this.length=1,this.words[0]=0,this;S>0?(_=this,w=R):(_=R,w=this);for(var x=0,E=0;E<w.length;E++)x=(L=(0|_.words[E])-(0|w.words[E])+x)>>26,this.words[E]=67108863&L;for(;x!==0&&E<_.length;E++)x=(L=(0|_.words[E])+x)>>26,this.words[E]=67108863&L;if(x===0&&E<_.length&&_!==this)for(;E<_.length;E++)this.words[E]=_.words[E];return this.length=Math.max(this.length,E),_!==this&&(this.negative=1),this.strip()},c.prototype.sub=function(R){return this.clone().isub(R)};var v=function(R,L,_){var w,S,x,E=R.words,M=L.words,O=_.words,V=0,Y=0|E[0],$=8191&Y,J=Y>>>13,G=0|E[1],Z=8191&G,N=G>>>13,P=0|E[2],j=8191&P,X=P>>>13,ie=0|E[3],ee=8191&ie,re=ie>>>13,oe=0|E[4],ue=8191&oe,se=oe>>>13,le=0|E[5],ne=8191&le,fe=le>>>13,me=0|E[6],ge=8191&me,ve=me>>>13,xe=0|E[7],De=8191&xe,ze=xe>>>13,Ye=0|E[8],je=8191&Ye,ht=Ye>>>13,ut=0|E[9],dt=8191&ut,gt=ut>>>13,Ze=0|M[0],Ve=8191&Ze,Je=Ze>>>13,ct=0|M[1],et=8191&ct,ii=ct>>>13,_i=0|M[2],mt=8191&_i,vi=_i>>>13,ei=0|M[3],It=8191&ei,Gi=ei>>>13,yi=0|M[4],xt=8191&yi,ui=yi>>>13,Fi=0|M[5],At=8191&Fi,xi=Fi>>>13,Li=0|M[6],Gt=8191&Li,he=Li>>>13,be=0|M[7],Re=8191&be,Ue=be>>>13,Ct=0|M[8],Ke=8191&Ct,Rt=Ct>>>13,bt=0|M[9],pt=8191&bt,kt=bt>>>13;_.negative=R.negative^L.negative,_.length=19;var Pt=(V+(w=Math.imul($,Ve))|0)+((8191&(S=(S=Math.imul($,Je))+Math.imul(J,Ve)|0))<<13)|0;V=((x=Math.imul(J,Je))+(S>>>13)|0)+(Pt>>>26)|0,Pt&=67108863,w=Math.imul(Z,Ve),S=(S=Math.imul(Z,Je))+Math.imul(N,Ve)|0,x=Math.imul(N,Je);var qt=(V+(w=w+Math.imul($,et)|0)|0)+((8191&(S=(S=S+Math.imul($,ii)|0)+Math.imul(J,et)|0))<<13)|0;V=((x=x+Math.imul(J,ii)|0)+(S>>>13)|0)+(qt>>>26)|0,qt&=67108863,w=Math.imul(j,Ve),S=(S=Math.imul(j,Je))+Math.imul(X,Ve)|0,x=Math.imul(X,Je),w=w+Math.imul(Z,et)|0,S=(S=S+Math.imul(Z,ii)|0)+Math.imul(N,et)|0,x=x+Math.imul(N,ii)|0;var gs=(V+(w=w+Math.imul($,mt)|0)|0)+((8191&(S=(S=S+Math.imul($,vi)|0)+Math.imul(J,mt)|0))<<13)|0;V=((x=x+Math.imul(J,vi)|0)+(S>>>13)|0)+(gs>>>26)|0,gs&=67108863,w=Math.imul(ee,Ve),S=(S=Math.imul(ee,Je))+Math.imul(re,Ve)|0,x=Math.imul(re,Je),w=w+Math.imul(j,et)|0,S=(S=S+Math.imul(j,ii)|0)+Math.imul(X,et)|0,x=x+Math.imul(X,ii)|0,w=w+Math.imul(Z,mt)|0,S=(S=S+Math.imul(Z,vi)|0)+Math.imul(N,mt)|0,x=x+Math.imul(N,vi)|0;var ji=(V+(w=w+Math.imul($,It)|0)|0)+((8191&(S=(S=S+Math.imul($,Gi)|0)+Math.imul(J,It)|0))<<13)|0;V=((x=x+Math.imul(J,Gi)|0)+(S>>>13)|0)+(ji>>>26)|0,ji&=67108863,w=Math.imul(ue,Ve),S=(S=Math.imul(ue,Je))+Math.imul(se,Ve)|0,x=Math.imul(se,Je),w=w+Math.imul(ee,et)|0,S=(S=S+Math.imul(ee,ii)|0)+Math.imul(re,et)|0,x=x+Math.imul(re,ii)|0,w=w+Math.imul(j,mt)|0,S=(S=S+Math.imul(j,vi)|0)+Math.imul(X,mt)|0,x=x+Math.imul(X,vi)|0,w=w+Math.imul(Z,It)|0,S=(S=S+Math.imul(Z,Gi)|0)+Math.imul(N,It)|0,x=x+Math.imul(N,Gi)|0;var js=(V+(w=w+Math.imul($,xt)|0)|0)+((8191&(S=(S=S+Math.imul($,ui)|0)+Math.imul(J,xt)|0))<<13)|0;V=((x=x+Math.imul(J,ui)|0)+(S>>>13)|0)+(js>>>26)|0,js&=67108863,w=Math.imul(ne,Ve),S=(S=Math.imul(ne,Je))+Math.imul(fe,Ve)|0,x=Math.imul(fe,Je),w=w+Math.imul(ue,et)|0,S=(S=S+Math.imul(ue,ii)|0)+Math.imul(se,et)|0,x=x+Math.imul(se,ii)|0,w=w+Math.imul(ee,mt)|0,S=(S=S+Math.imul(ee,vi)|0)+Math.imul(re,mt)|0,x=x+Math.imul(re,vi)|0,w=w+Math.imul(j,It)|0,S=(S=S+Math.imul(j,Gi)|0)+Math.imul(X,It)|0,x=x+Math.imul(X,Gi)|0,w=w+Math.imul(Z,xt)|0,S=(S=S+Math.imul(Z,ui)|0)+Math.imul(N,xt)|0,x=x+Math.imul(N,ui)|0;var Us=(V+(w=w+Math.imul($,At)|0)|0)+((8191&(S=(S=S+Math.imul($,xi)|0)+Math.imul(J,At)|0))<<13)|0;V=((x=x+Math.imul(J,xi)|0)+(S>>>13)|0)+(Us>>>26)|0,Us&=67108863,w=Math.imul(ge,Ve),S=(S=Math.imul(ge,Je))+Math.imul(ve,Ve)|0,x=Math.imul(ve,Je),w=w+Math.imul(ne,et)|0,S=(S=S+Math.imul(ne,ii)|0)+Math.imul(fe,et)|0,x=x+Math.imul(fe,ii)|0,w=w+Math.imul(ue,mt)|0,S=(S=S+Math.imul(ue,vi)|0)+Math.imul(se,mt)|0,x=x+Math.imul(se,vi)|0,w=w+Math.imul(ee,It)|0,S=(S=S+Math.imul(ee,Gi)|0)+Math.imul(re,It)|0,x=x+Math.imul(re,Gi)|0,w=w+Math.imul(j,xt)|0,S=(S=S+Math.imul(j,ui)|0)+Math.imul(X,xt)|0,x=x+Math.imul(X,ui)|0,w=w+Math.imul(Z,At)|0,S=(S=S+Math.imul(Z,xi)|0)+Math.imul(N,At)|0,x=x+Math.imul(N,xi)|0;var hn=(V+(w=w+Math.imul($,Gt)|0)|0)+((8191&(S=(S=S+Math.imul($,he)|0)+Math.imul(J,Gt)|0))<<13)|0;V=((x=x+Math.imul(J,he)|0)+(S>>>13)|0)+(hn>>>26)|0,hn&=67108863,w=Math.imul(De,Ve),S=(S=Math.imul(De,Je))+Math.imul(ze,Ve)|0,x=Math.imul(ze,Je),w=w+Math.imul(ge,et)|0,S=(S=S+Math.imul(ge,ii)|0)+Math.imul(ve,et)|0,x=x+Math.imul(ve,ii)|0,w=w+Math.imul(ne,mt)|0,S=(S=S+Math.imul(ne,vi)|0)+Math.imul(fe,mt)|0,x=x+Math.imul(fe,vi)|0,w=w+Math.imul(ue,It)|0,S=(S=S+Math.imul(ue,Gi)|0)+Math.imul(se,It)|0,x=x+Math.imul(se,Gi)|0,w=w+Math.imul(ee,xt)|0,S=(S=S+Math.imul(ee,ui)|0)+Math.imul(re,xt)|0,x=x+Math.imul(re,ui)|0,w=w+Math.imul(j,At)|0,S=(S=S+Math.imul(j,xi)|0)+Math.imul(X,At)|0,x=x+Math.imul(X,xi)|0,w=w+Math.imul(Z,Gt)|0,S=(S=S+Math.imul(Z,he)|0)+Math.imul(N,Gt)|0,x=x+Math.imul(N,he)|0;var ae=(V+(w=w+Math.imul($,Re)|0)|0)+((8191&(S=(S=S+Math.imul($,Ue)|0)+Math.imul(J,Re)|0))<<13)|0;V=((x=x+Math.imul(J,Ue)|0)+(S>>>13)|0)+(ae>>>26)|0,ae&=67108863,w=Math.imul(je,Ve),S=(S=Math.imul(je,Je))+Math.imul(ht,Ve)|0,x=Math.imul(ht,Je),w=w+Math.imul(De,et)|0,S=(S=S+Math.imul(De,ii)|0)+Math.imul(ze,et)|0,x=x+Math.imul(ze,ii)|0,w=w+Math.imul(ge,mt)|0,S=(S=S+Math.imul(ge,vi)|0)+Math.imul(ve,mt)|0,x=x+Math.imul(ve,vi)|0,w=w+Math.imul(ne,It)|0,S=(S=S+Math.imul(ne,Gi)|0)+Math.imul(fe,It)|0,x=x+Math.imul(fe,Gi)|0,w=w+Math.imul(ue,xt)|0,S=(S=S+Math.imul(ue,ui)|0)+Math.imul(se,xt)|0,x=x+Math.imul(se,ui)|0,w=w+Math.imul(ee,At)|0,S=(S=S+Math.imul(ee,xi)|0)+Math.imul(re,At)|0,x=x+Math.imul(re,xi)|0,w=w+Math.imul(j,Gt)|0,S=(S=S+Math.imul(j,he)|0)+Math.imul(X,Gt)|0,x=x+Math.imul(X,he)|0,w=w+Math.imul(Z,Re)|0,S=(S=S+Math.imul(Z,Ue)|0)+Math.imul(N,Re)|0,x=x+Math.imul(N,Ue)|0;var we=(V+(w=w+Math.imul($,Ke)|0)|0)+((8191&(S=(S=S+Math.imul($,Rt)|0)+Math.imul(J,Ke)|0))<<13)|0;V=((x=x+Math.imul(J,Rt)|0)+(S>>>13)|0)+(we>>>26)|0,we&=67108863,w=Math.imul(dt,Ve),S=(S=Math.imul(dt,Je))+Math.imul(gt,Ve)|0,x=Math.imul(gt,Je),w=w+Math.imul(je,et)|0,S=(S=S+Math.imul(je,ii)|0)+Math.imul(ht,et)|0,x=x+Math.imul(ht,ii)|0,w=w+Math.imul(De,mt)|0,S=(S=S+Math.imul(De,vi)|0)+Math.imul(ze,mt)|0,x=x+Math.imul(ze,vi)|0,w=w+Math.imul(ge,It)|0,S=(S=S+Math.imul(ge,Gi)|0)+Math.imul(ve,It)|0,x=x+Math.imul(ve,Gi)|0,w=w+Math.imul(ne,xt)|0,S=(S=S+Math.imul(ne,ui)|0)+Math.imul(fe,xt)|0,x=x+Math.imul(fe,ui)|0,w=w+Math.imul(ue,At)|0,S=(S=S+Math.imul(ue,xi)|0)+Math.imul(se,At)|0,x=x+Math.imul(se,xi)|0,w=w+Math.imul(ee,Gt)|0,S=(S=S+Math.imul(ee,he)|0)+Math.imul(re,Gt)|0,x=x+Math.imul(re,he)|0,w=w+Math.imul(j,Re)|0,S=(S=S+Math.imul(j,Ue)|0)+Math.imul(X,Re)|0,x=x+Math.imul(X,Ue)|0,w=w+Math.imul(Z,Ke)|0,S=(S=S+Math.imul(Z,Rt)|0)+Math.imul(N,Ke)|0,x=x+Math.imul(N,Rt)|0;var Ie=(V+(w=w+Math.imul($,pt)|0)|0)+((8191&(S=(S=S+Math.imul($,kt)|0)+Math.imul(J,pt)|0))<<13)|0;V=((x=x+Math.imul(J,kt)|0)+(S>>>13)|0)+(Ie>>>26)|0,Ie&=67108863,w=Math.imul(dt,et),S=(S=Math.imul(dt,ii))+Math.imul(gt,et)|0,x=Math.imul(gt,ii),w=w+Math.imul(je,mt)|0,S=(S=S+Math.imul(je,vi)|0)+Math.imul(ht,mt)|0,x=x+Math.imul(ht,vi)|0,w=w+Math.imul(De,It)|0,S=(S=S+Math.imul(De,Gi)|0)+Math.imul(ze,It)|0,x=x+Math.imul(ze,Gi)|0,w=w+Math.imul(ge,xt)|0,S=(S=S+Math.imul(ge,ui)|0)+Math.imul(ve,xt)|0,x=x+Math.imul(ve,ui)|0,w=w+Math.imul(ne,At)|0,S=(S=S+Math.imul(ne,xi)|0)+Math.imul(fe,At)|0,x=x+Math.imul(fe,xi)|0,w=w+Math.imul(ue,Gt)|0,S=(S=S+Math.imul(ue,he)|0)+Math.imul(se,Gt)|0,x=x+Math.imul(se,he)|0,w=w+Math.imul(ee,Re)|0,S=(S=S+Math.imul(ee,Ue)|0)+Math.imul(re,Re)|0,x=x+Math.imul(re,Ue)|0,w=w+Math.imul(j,Ke)|0,S=(S=S+Math.imul(j,Rt)|0)+Math.imul(X,Ke)|0,x=x+Math.imul(X,Rt)|0;var Le=(V+(w=w+Math.imul(Z,pt)|0)|0)+((8191&(S=(S=S+Math.imul(Z,kt)|0)+Math.imul(N,pt)|0))<<13)|0;V=((x=x+Math.imul(N,kt)|0)+(S>>>13)|0)+(Le>>>26)|0,Le&=67108863,w=Math.imul(dt,mt),S=(S=Math.imul(dt,vi))+Math.imul(gt,mt)|0,x=Math.imul(gt,vi),w=w+Math.imul(je,It)|0,S=(S=S+Math.imul(je,Gi)|0)+Math.imul(ht,It)|0,x=x+Math.imul(ht,Gi)|0,w=w+Math.imul(De,xt)|0,S=(S=S+Math.imul(De,ui)|0)+Math.imul(ze,xt)|0,x=x+Math.imul(ze,ui)|0,w=w+Math.imul(ge,At)|0,S=(S=S+Math.imul(ge,xi)|0)+Math.imul(ve,At)|0,x=x+Math.imul(ve,xi)|0,w=w+Math.imul(ne,Gt)|0,S=(S=S+Math.imul(ne,he)|0)+Math.imul(fe,Gt)|0,x=x+Math.imul(fe,he)|0,w=w+Math.imul(ue,Re)|0,S=(S=S+Math.imul(ue,Ue)|0)+Math.imul(se,Re)|0,x=x+Math.imul(se,Ue)|0,w=w+Math.imul(ee,Ke)|0,S=(S=S+Math.imul(ee,Rt)|0)+Math.imul(re,Ke)|0,x=x+Math.imul(re,Rt)|0;var at=(V+(w=w+Math.imul(j,pt)|0)|0)+((8191&(S=(S=S+Math.imul(j,kt)|0)+Math.imul(X,pt)|0))<<13)|0;V=((x=x+Math.imul(X,kt)|0)+(S>>>13)|0)+(at>>>26)|0,at&=67108863,w=Math.imul(dt,It),S=(S=Math.imul(dt,Gi))+Math.imul(gt,It)|0,x=Math.imul(gt,Gi),w=w+Math.imul(je,xt)|0,S=(S=S+Math.imul(je,ui)|0)+Math.imul(ht,xt)|0,x=x+Math.imul(ht,ui)|0,w=w+Math.imul(De,At)|0,S=(S=S+Math.imul(De,xi)|0)+Math.imul(ze,At)|0,x=x+Math.imul(ze,xi)|0,w=w+Math.imul(ge,Gt)|0,S=(S=S+Math.imul(ge,he)|0)+Math.imul(ve,Gt)|0,x=x+Math.imul(ve,he)|0,w=w+Math.imul(ne,Re)|0,S=(S=S+Math.imul(ne,Ue)|0)+Math.imul(fe,Re)|0,x=x+Math.imul(fe,Ue)|0,w=w+Math.imul(ue,Ke)|0,S=(S=S+Math.imul(ue,Rt)|0)+Math.imul(se,Ke)|0,x=x+Math.imul(se,Rt)|0;var He=(V+(w=w+Math.imul(ee,pt)|0)|0)+((8191&(S=(S=S+Math.imul(ee,kt)|0)+Math.imul(re,pt)|0))<<13)|0;V=((x=x+Math.imul(re,kt)|0)+(S>>>13)|0)+(He>>>26)|0,He&=67108863,w=Math.imul(dt,xt),S=(S=Math.imul(dt,ui))+Math.imul(gt,xt)|0,x=Math.imul(gt,ui),w=w+Math.imul(je,At)|0,S=(S=S+Math.imul(je,xi)|0)+Math.imul(ht,At)|0,x=x+Math.imul(ht,xi)|0,w=w+Math.imul(De,Gt)|0,S=(S=S+Math.imul(De,he)|0)+Math.imul(ze,Gt)|0,x=x+Math.imul(ze,he)|0,w=w+Math.imul(ge,Re)|0,S=(S=S+Math.imul(ge,Ue)|0)+Math.imul(ve,Re)|0,x=x+Math.imul(ve,Ue)|0,w=w+Math.imul(ne,Ke)|0,S=(S=S+Math.imul(ne,Rt)|0)+Math.imul(fe,Ke)|0,x=x+Math.imul(fe,Rt)|0;var We=(V+(w=w+Math.imul(ue,pt)|0)|0)+((8191&(S=(S=S+Math.imul(ue,kt)|0)+Math.imul(se,pt)|0))<<13)|0;V=((x=x+Math.imul(se,kt)|0)+(S>>>13)|0)+(We>>>26)|0,We&=67108863,w=Math.imul(dt,At),S=(S=Math.imul(dt,xi))+Math.imul(gt,At)|0,x=Math.imul(gt,xi),w=w+Math.imul(je,Gt)|0,S=(S=S+Math.imul(je,he)|0)+Math.imul(ht,Gt)|0,x=x+Math.imul(ht,he)|0,w=w+Math.imul(De,Re)|0,S=(S=S+Math.imul(De,Ue)|0)+Math.imul(ze,Re)|0,x=x+Math.imul(ze,Ue)|0,w=w+Math.imul(ge,Ke)|0,S=(S=S+Math.imul(ge,Rt)|0)+Math.imul(ve,Ke)|0,x=x+Math.imul(ve,Rt)|0;var oi=(V+(w=w+Math.imul(ne,pt)|0)|0)+((8191&(S=(S=S+Math.imul(ne,kt)|0)+Math.imul(fe,pt)|0))<<13)|0;V=((x=x+Math.imul(fe,kt)|0)+(S>>>13)|0)+(oi>>>26)|0,oi&=67108863,w=Math.imul(dt,Gt),S=(S=Math.imul(dt,he))+Math.imul(gt,Gt)|0,x=Math.imul(gt,he),w=w+Math.imul(je,Re)|0,S=(S=S+Math.imul(je,Ue)|0)+Math.imul(ht,Re)|0,x=x+Math.imul(ht,Ue)|0,w=w+Math.imul(De,Ke)|0,S=(S=S+Math.imul(De,Rt)|0)+Math.imul(ze,Ke)|0,x=x+Math.imul(ze,Rt)|0;var Ht=(V+(w=w+Math.imul(ge,pt)|0)|0)+((8191&(S=(S=S+Math.imul(ge,kt)|0)+Math.imul(ve,pt)|0))<<13)|0;V=((x=x+Math.imul(ve,kt)|0)+(S>>>13)|0)+(Ht>>>26)|0,Ht&=67108863,w=Math.imul(dt,Re),S=(S=Math.imul(dt,Ue))+Math.imul(gt,Re)|0,x=Math.imul(gt,Ue),w=w+Math.imul(je,Ke)|0,S=(S=S+Math.imul(je,Rt)|0)+Math.imul(ht,Ke)|0,x=x+Math.imul(ht,Rt)|0;var Xt=(V+(w=w+Math.imul(De,pt)|0)|0)+((8191&(S=(S=S+Math.imul(De,kt)|0)+Math.imul(ze,pt)|0))<<13)|0;V=((x=x+Math.imul(ze,kt)|0)+(S>>>13)|0)+(Xt>>>26)|0,Xt&=67108863,w=Math.imul(dt,Ke),S=(S=Math.imul(dt,Rt))+Math.imul(gt,Ke)|0,x=Math.imul(gt,Rt);var wt=(V+(w=w+Math.imul(je,pt)|0)|0)+((8191&(S=(S=S+Math.imul(je,kt)|0)+Math.imul(ht,pt)|0))<<13)|0;V=((x=x+Math.imul(ht,kt)|0)+(S>>>13)|0)+(wt>>>26)|0,wt&=67108863;var Di=(V+(w=Math.imul(dt,pt))|0)+((8191&(S=(S=Math.imul(dt,kt))+Math.imul(gt,pt)|0))<<13)|0;return V=((x=Math.imul(gt,kt))+(S>>>13)|0)+(Di>>>26)|0,Di&=67108863,O[0]=Pt,O[1]=qt,O[2]=gs,O[3]=ji,O[4]=js,O[5]=Us,O[6]=hn,O[7]=ae,O[8]=we,O[9]=Ie,O[10]=Le,O[11]=at,O[12]=He,O[13]=We,O[14]=oi,O[15]=Ht,O[16]=Xt,O[17]=wt,O[18]=Di,V!==0&&(O[19]=V,_.length++),_};function C(R,L,_){return new b().mulp(R,L,_)}function b(R,L){this.x=R,this.y=L}Math.imul||(v=y),c.prototype.mulTo=function(R,L){var _=this.length+R.length;return this.length===10&&R.length===10?v(this,R,L):_<63?y(this,R,L):_<1024?function(w,S,x){x.negative=S.negative^w.negative,x.length=w.length+S.length;for(var E=0,M=0,O=0;O<x.length-1;O++){var V=M;M=0;for(var Y=67108863&E,$=Math.min(O,S.length-1),J=Math.max(0,O-w.length+1);J<=$;J++){var G=O-J,Z=(0|w.words[G])*(0|S.words[J]),N=67108863&Z;Y=67108863&(N=N+Y|0),M+=(V=(V=V+(Z/67108864|0)|0)+(N>>>26)|0)>>>26,V&=67108863}x.words[O]=Y,E=V,V=M}return E!==0?x.words[O]=E:x.length--,x.strip()}(this,R,L):C(this,R,L)},b.prototype.makeRBT=function(R){for(var L=new Array(R),_=c.prototype._countBits(R)-1,w=0;w<R;w++)L[w]=this.revBin(w,_,R);return L},b.prototype.revBin=function(R,L,_){if(R===0||R===_-1)return R;for(var w=0,S=0;S<L;S++)w|=(1&R)<<L-S-1,R>>=1;return w},b.prototype.permute=function(R,L,_,w,S,x){for(var E=0;E<x;E++)w[E]=L[R[E]],S[E]=_[R[E]]},b.prototype.transform=function(R,L,_,w,S,x){this.permute(x,R,L,_,w,S);for(var E=1;E<S;E<<=1)for(var M=E<<1,O=Math.cos(2*Math.PI/M),V=Math.sin(2*Math.PI/M),Y=0;Y<S;Y+=M)for(var $=O,J=V,G=0;G<E;G++){var Z=_[Y+G],N=w[Y+G],P=_[Y+G+E],j=w[Y+G+E],X=$*P-J*j;j=$*j+J*P,P=X,_[Y+G]=Z+P,w[Y+G]=N+j,_[Y+G+E]=Z-P,w[Y+G+E]=N-j,G!==M&&(X=O*$-V*J,J=O*J+V*$,$=X)}},b.prototype.guessLen13b=function(R,L){var _=1|Math.max(L,R),w=1&_,S=0;for(_=_/2|0;_;_>>>=1)S++;return 1<<S+1+w},b.prototype.conjugate=function(R,L,_){if(!(_<=1))for(var w=0;w<_/2;w++){var S=R[w];R[w]=R[_-w-1],R[_-w-1]=S,S=L[w],L[w]=-L[_-w-1],L[_-w-1]=-S}},b.prototype.normalize13b=function(R,L){for(var _=0,w=0;w<L/2;w++){var S=8192*Math.round(R[2*w+1]/L)+Math.round(R[2*w]/L)+_;R[w]=67108863&S,_=S<67108864?0:S/67108864|0}return R},b.prototype.convert13b=function(R,L,_,w){for(var S=0,x=0;x<L;x++)S+=0|R[x],_[2*x]=8191&S,S>>>=13,_[2*x+1]=8191&S,S>>>=13;for(x=2*L;x<w;++x)_[x]=0;a(S===0),a((-8192&S)==0)},b.prototype.stub=function(R){for(var L=new Array(R),_=0;_<R;_++)L[_]=0;return L},b.prototype.mulp=function(R,L,_){var w=2*this.guessLen13b(R.length,L.length),S=this.makeRBT(w),x=this.stub(w),E=new Array(w),M=new Array(w),O=new Array(w),V=new Array(w),Y=new Array(w),$=new Array(w),J=_.words;J.length=w,this.convert13b(R.words,R.length,E,w),this.convert13b(L.words,L.length,V,w),this.transform(E,x,M,O,w,S),this.transform(V,x,Y,$,w,S);for(var G=0;G<w;G++){var Z=M[G]*Y[G]-O[G]*$[G];O[G]=M[G]*$[G]+O[G]*Y[G],M[G]=Z}return this.conjugate(M,O,w),this.transform(M,O,J,x,w,S),this.conjugate(J,x,w),this.normalize13b(J,w),_.negative=R.negative^L.negative,_.length=R.length+L.length,_.strip()},c.prototype.mul=function(R){var L=new c(null);return L.words=new Array(this.length+R.length),this.mulTo(R,L)},c.prototype.mulf=function(R){var L=new c(null);return L.words=new Array(this.length+R.length),C(this,R,L)},c.prototype.imul=function(R){return this.clone().mulTo(R,this)},c.prototype.imuln=function(R){a(typeof R=="number"),a(R<67108864);for(var L=0,_=0;_<this.length;_++){var w=(0|this.words[_])*R,S=(67108863&w)+(67108863&L);L>>=26,L+=w/67108864|0,L+=S>>>26,this.words[_]=67108863&S}return L!==0&&(this.words[_]=L,this.length++),this},c.prototype.muln=function(R){return this.clone().imuln(R)},c.prototype.sqr=function(){return this.mul(this)},c.prototype.isqr=function(){return this.imul(this.clone())},c.prototype.pow=function(R){var L=function(x){for(var E=new Array(x.bitLength()),M=0;M<E.length;M++){var O=M/26|0,V=M%26;E[M]=(x.words[O]&1<<V)>>>V}return E}(R);if(L.length===0)return new c(1);for(var _=this,w=0;w<L.length&&L[w]===0;w++,_=_.sqr());if(++w<L.length)for(var S=_.sqr();w<L.length;w++,S=S.sqr())L[w]!==0&&(_=_.mul(S));return _},c.prototype.iushln=function(R){a(typeof R=="number"&&R>=0);var L,_=R%26,w=(R-_)/26,S=67108863>>>26-_<<26-_;if(_!==0){var x=0;for(L=0;L<this.length;L++){var E=this.words[L]&S,M=(0|this.words[L])-E<<_;this.words[L]=M|x,x=E>>>26-_}x&&(this.words[L]=x,this.length++)}if(w!==0){for(L=this.length-1;L>=0;L--)this.words[L+w]=this.words[L];for(L=0;L<w;L++)this.words[L]=0;this.length+=w}return this.strip()},c.prototype.ishln=function(R){return a(this.negative===0),this.iushln(R)},c.prototype.iushrn=function(R,L,_){var w;a(typeof R=="number"&&R>=0),w=L?(L-L%26)/26:0;var S=R%26,x=Math.min((R-S)/26,this.length),E=67108863^67108863>>>S<<S,M=_;if(w-=x,w=Math.max(0,w),M){for(var O=0;O<x;O++)M.words[O]=this.words[O];M.length=x}if(x!==0)if(this.length>x)for(this.length-=x,O=0;O<this.length;O++)this.words[O]=this.words[O+x];else this.words[0]=0,this.length=1;var V=0;for(O=this.length-1;O>=0&&(V!==0||O>=w);O--){var Y=0|this.words[O];this.words[O]=V<<26-S|Y>>>S,V=Y&E}return M&&V!==0&&(M.words[M.length++]=V),this.length===0&&(this.words[0]=0,this.length=1),this.strip()},c.prototype.ishrn=function(R,L,_){return a(this.negative===0),this.iushrn(R,L,_)},c.prototype.shln=function(R){return this.clone().ishln(R)},c.prototype.ushln=function(R){return this.clone().iushln(R)},c.prototype.shrn=function(R){return this.clone().ishrn(R)},c.prototype.ushrn=function(R){return this.clone().iushrn(R)},c.prototype.testn=function(R){a(typeof R=="number"&&R>=0);var L=R%26,_=(R-L)/26,w=1<<L;return!(this.length<=_)&&!!(this.words[_]&w)},c.prototype.imaskn=function(R){a(typeof R=="number"&&R>=0);var L=R%26,_=(R-L)/26;if(a(this.negative===0,"imaskn works only with positive numbers"),this.length<=_)return this;if(L!==0&&_++,this.length=Math.min(_,this.length),L!==0){var w=67108863^67108863>>>L<<L;this.words[this.length-1]&=w}return this.strip()},c.prototype.maskn=function(R){return this.clone().imaskn(R)},c.prototype.iaddn=function(R){return a(typeof R=="number"),a(R<67108864),R<0?this.isubn(-R):this.negative!==0?this.length===1&&(0|this.words[0])<R?(this.words[0]=R-(0|this.words[0]),this.negative=0,this):(this.negative=0,this.isubn(R),this.negative=1,this):this._iaddn(R)},c.prototype._iaddn=function(R){this.words[0]+=R;for(var L=0;L<this.length&&this.words[L]>=67108864;L++)this.words[L]-=67108864,L===this.length-1?this.words[L+1]=1:this.words[L+1]++;return this.length=Math.max(this.length,L+1),this},c.prototype.isubn=function(R){if(a(typeof R=="number"),a(R<67108864),R<0)return this.iaddn(-R);if(this.negative!==0)return this.negative=0,this.iaddn(R),this.negative=1,this;if(this.words[0]-=R,this.length===1&&this.words[0]<0)this.words[0]=-this.words[0],this.negative=1;else for(var L=0;L<this.length&&this.words[L]<0;L++)this.words[L]+=67108864,this.words[L+1]-=1;return this.strip()},c.prototype.addn=function(R){return this.clone().iaddn(R)},c.prototype.subn=function(R){return this.clone().isubn(R)},c.prototype.iabs=function(){return this.negative=0,this},c.prototype.abs=function(){return this.clone().iabs()},c.prototype._ishlnsubmul=function(R,L,_){var w,S,x=R.length+_;this._expand(x);var E=0;for(w=0;w<R.length;w++){S=(0|this.words[w+_])+E;var M=(0|R.words[w])*L;E=((S-=67108863&M)>>26)-(M/67108864|0),this.words[w+_]=67108863&S}for(;w<this.length-_;w++)E=(S=(0|this.words[w+_])+E)>>26,this.words[w+_]=67108863&S;if(E===0)return this.strip();for(a(E===-1),E=0,w=0;w<this.length;w++)E=(S=-(0|this.words[w])+E)>>26,this.words[w]=67108863&S;return this.negative=1,this.strip()},c.prototype._wordDiv=function(R,L){var _=(this.length,R.length),w=this.clone(),S=R,x=0|S.words[S.length-1];(_=26-this._countBits(x))!==0&&(S=S.ushln(_),w.iushln(_),x=0|S.words[S.length-1]);var E,M=w.length-S.length;if(L!=="mod"){(E=new c(null)).length=M+1,E.words=new Array(E.length);for(var O=0;O<E.length;O++)E.words[O]=0}var V=w.clone()._ishlnsubmul(S,1,M);V.negative===0&&(w=V,E&&(E.words[M]=1));for(var Y=M-1;Y>=0;Y--){var $=67108864*(0|w.words[S.length+Y])+(0|w.words[S.length+Y-1]);for($=Math.min($/x|0,67108863),w._ishlnsubmul(S,$,Y);w.negative!==0;)$--,w.negative=0,w._ishlnsubmul(S,1,Y),w.isZero()||(w.negative^=1);E&&(E.words[Y]=$)}return E&&E.strip(),w.strip(),L!=="div"&&_!==0&&w.iushrn(_),{div:E||null,mod:w}},c.prototype.divmod=function(R,L,_){return a(!R.isZero()),this.isZero()?{div:new c(0),mod:new c(0)}:this.negative!==0&&R.negative===0?(x=this.neg().divmod(R,L),L!=="mod"&&(w=x.div.neg()),L!=="div"&&(S=x.mod.neg(),_&&S.negative!==0&&S.iadd(R)),{div:w,mod:S}):this.negative===0&&R.negative!==0?(x=this.divmod(R.neg(),L),L!=="mod"&&(w=x.div.neg()),{div:w,mod:x.mod}):this.negative&R.negative?(x=this.neg().divmod(R.neg(),L),L!=="div"&&(S=x.mod.neg(),_&&S.negative!==0&&S.isub(R)),{div:x.div,mod:S}):R.length>this.length||this.cmp(R)<0?{div:new c(0),mod:this}:R.length===1?L==="div"?{div:this.divn(R.words[0]),mod:null}:L==="mod"?{div:null,mod:new c(this.modn(R.words[0]))}:{div:this.divn(R.words[0]),mod:new c(this.modn(R.words[0]))}:this._wordDiv(R,L);var w,S,x},c.prototype.div=function(R){return this.divmod(R,"div",!1).div},c.prototype.mod=function(R){return this.divmod(R,"mod",!1).mod},c.prototype.umod=function(R){return this.divmod(R,"mod",!0).mod},c.prototype.divRound=function(R){var L=this.divmod(R);if(L.mod.isZero())return L.div;var _=L.div.negative!==0?L.mod.isub(R):L.mod,w=R.ushrn(1),S=R.andln(1),x=_.cmp(w);return x<0||S===1&&x===0?L.div:L.div.negative!==0?L.div.isubn(1):L.div.iaddn(1)},c.prototype.modn=function(R){a(R<=67108863);for(var L=(1<<26)%R,_=0,w=this.length-1;w>=0;w--)_=(L*_+(0|this.words[w]))%R;return _},c.prototype.idivn=function(R){a(R<=67108863);for(var L=0,_=this.length-1;_>=0;_--){var w=(0|this.words[_])+67108864*L;this.words[_]=w/R|0,L=w%R}return this.strip()},c.prototype.divn=function(R){return this.clone().idivn(R)},c.prototype.egcd=function(R){a(R.negative===0),a(!R.isZero());var L=this,_=R.clone();L=L.negative!==0?L.umod(R):L.clone();for(var w=new c(1),S=new c(0),x=new c(0),E=new c(1),M=0;L.isEven()&&_.isEven();)L.iushrn(1),_.iushrn(1),++M;for(var O=_.clone(),V=L.clone();!L.isZero();){for(var Y=0,$=1;!(L.words[0]&$)&&Y<26;++Y,$<<=1);if(Y>0)for(L.iushrn(Y);Y-- >0;)(w.isOdd()||S.isOdd())&&(w.iadd(O),S.isub(V)),w.iushrn(1),S.iushrn(1);for(var J=0,G=1;!(_.words[0]&G)&&J<26;++J,G<<=1);if(J>0)for(_.iushrn(J);J-- >0;)(x.isOdd()||E.isOdd())&&(x.iadd(O),E.isub(V)),x.iushrn(1),E.iushrn(1);L.cmp(_)>=0?(L.isub(_),w.isub(x),S.isub(E)):(_.isub(L),x.isub(w),E.isub(S))}return{a:x,b:E,gcd:_.iushln(M)}},c.prototype._invmp=function(R){a(R.negative===0),a(!R.isZero());var L=this,_=R.clone();L=L.negative!==0?L.umod(R):L.clone();for(var w,S=new c(1),x=new c(0),E=_.clone();L.cmpn(1)>0&&_.cmpn(1)>0;){for(var M=0,O=1;!(L.words[0]&O)&&M<26;++M,O<<=1);if(M>0)for(L.iushrn(M);M-- >0;)S.isOdd()&&S.iadd(E),S.iushrn(1);for(var V=0,Y=1;!(_.words[0]&Y)&&V<26;++V,Y<<=1);if(V>0)for(_.iushrn(V);V-- >0;)x.isOdd()&&x.iadd(E),x.iushrn(1);L.cmp(_)>=0?(L.isub(_),S.isub(x)):(_.isub(L),x.isub(S))}return(w=L.cmpn(1)===0?S:x).cmpn(0)<0&&w.iadd(R),w},c.prototype.gcd=function(R){if(this.isZero())return R.abs();if(R.isZero())return this.abs();var L=this.clone(),_=R.clone();L.negative=0,_.negative=0;for(var w=0;L.isEven()&&_.isEven();w++)L.iushrn(1),_.iushrn(1);for(;;){for(;L.isEven();)L.iushrn(1);for(;_.isEven();)_.iushrn(1);var S=L.cmp(_);if(S<0){var x=L;L=_,_=x}else if(S===0||_.cmpn(1)===0)break;L.isub(_)}return _.iushln(w)},c.prototype.invm=function(R){return this.egcd(R).a.umod(R)},c.prototype.isEven=function(){return(1&this.words[0])==0},c.prototype.isOdd=function(){return(1&this.words[0])==1},c.prototype.andln=function(R){return this.words[0]&R},c.prototype.bincn=function(R){a(typeof R=="number");var L=R%26,_=(R-L)/26,w=1<<L;if(this.length<=_)return this._expand(_+1),this.words[_]|=w,this;for(var S=w,x=_;S!==0&&x<this.length;x++){var E=0|this.words[x];S=(E+=S)>>>26,E&=67108863,this.words[x]=E}return S!==0&&(this.words[x]=S,this.length++),this},c.prototype.isZero=function(){return this.length===1&&this.words[0]===0},c.prototype.cmpn=function(R){var L,_=R<0;if(this.negative!==0&&!_)return-1;if(this.negative===0&&_)return 1;if(this.strip(),this.length>1)L=1;else{_&&(R=-R),a(R<=67108863,"Number is too big");var w=0|this.words[0];L=w===R?0:w<R?-1:1}return this.negative!==0?0|-L:L},c.prototype.cmp=function(R){if(this.negative!==0&&R.negative===0)return-1;if(this.negative===0&&R.negative!==0)return 1;var L=this.ucmp(R);return this.negative!==0?0|-L:L},c.prototype.ucmp=function(R){if(this.length>R.length)return 1;if(this.length<R.length)return-1;for(var L=0,_=this.length-1;_>=0;_--){var w=0|this.words[_],S=0|R.words[_];if(w!==S){w<S?L=-1:w>S&&(L=1);break}}return L},c.prototype.gtn=function(R){return this.cmpn(R)===1},c.prototype.gt=function(R){return this.cmp(R)===1},c.prototype.gten=function(R){return this.cmpn(R)>=0},c.prototype.gte=function(R){return this.cmp(R)>=0},c.prototype.ltn=function(R){return this.cmpn(R)===-1},c.prototype.lt=function(R){return this.cmp(R)===-1},c.prototype.lten=function(R){return this.cmpn(R)<=0},c.prototype.lte=function(R){return this.cmp(R)<=0},c.prototype.eqn=function(R){return this.cmpn(R)===0},c.prototype.eq=function(R){return this.cmp(R)===0},c.red=function(R){return new U(R)},c.prototype.toRed=function(R){return a(!this.red,"Already a number in reduction context"),a(this.negative===0,"red works only with positives"),R.convertTo(this)._forceRed(R)},c.prototype.fromRed=function(){return a(this.red,"fromRed works only with numbers in reduction context"),this.red.convertFrom(this)},c.prototype._forceRed=function(R){return this.red=R,this},c.prototype.forceRed=function(R){return a(!this.red,"Already a number in reduction context"),this._forceRed(R)},c.prototype.redAdd=function(R){return a(this.red,"redAdd works only with red numbers"),this.red.add(this,R)},c.prototype.redIAdd=function(R){return a(this.red,"redIAdd works only with red numbers"),this.red.iadd(this,R)},c.prototype.redSub=function(R){return a(this.red,"redSub works only with red numbers"),this.red.sub(this,R)},c.prototype.redISub=function(R){return a(this.red,"redISub works only with red numbers"),this.red.isub(this,R)},c.prototype.redShl=function(R){return a(this.red,"redShl works only with red numbers"),this.red.shl(this,R)},c.prototype.redMul=function(R){return a(this.red,"redMul works only with red numbers"),this.red._verify2(this,R),this.red.mul(this,R)},c.prototype.redIMul=function(R){return a(this.red,"redMul works only with red numbers"),this.red._verify2(this,R),this.red.imul(this,R)},c.prototype.redSqr=function(){return a(this.red,"redSqr works only with red numbers"),this.red._verify1(this),this.red.sqr(this)},c.prototype.redISqr=function(){return a(this.red,"redISqr works only with red numbers"),this.red._verify1(this),this.red.isqr(this)},c.prototype.redSqrt=function(){return a(this.red,"redSqrt works only with red numbers"),this.red._verify1(this),this.red.sqrt(this)},c.prototype.redInvm=function(){return a(this.red,"redInvm works only with red numbers"),this.red._verify1(this),this.red.invm(this)},c.prototype.redNeg=function(){return a(this.red,"redNeg works only with red numbers"),this.red._verify1(this),this.red.neg(this)},c.prototype.redPow=function(R){return a(this.red&&!R.red,"redPow(normalNum)"),this.red._verify1(this),this.red.pow(this,R)};var T={k256:null,p224:null,p192:null,p25519:null};function A(R,L){this.name=R,this.p=new c(L,16),this.n=this.p.bitLength(),this.k=new c(1).iushln(this.n).isub(this.p),this.tmp=this._tmp()}function I(){A.call(this,"k256","ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f")}function D(){A.call(this,"p224","ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001")}function F(){A.call(this,"p192","ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff")}function B(){A.call(this,"25519","7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed")}function U(R){if(typeof R=="string"){var L=c._prime(R);this.m=L.p,this.prime=L}else a(R.gtn(1),"modulus must be greater than 1"),this.m=R,this.prime=null}function H(R){U.call(this,R),this.shift=this.m.bitLength(),this.shift%26!=0&&(this.shift+=26-this.shift%26),this.r=new c(1).iushln(this.shift),this.r2=this.imod(this.r.sqr()),this.rinv=this.r._invmp(this.m),this.minv=this.rinv.mul(this.r).isubn(1).div(this.m),this.minv=this.minv.umod(this.r),this.minv=this.r.sub(this.minv)}A.prototype._tmp=function(){var R=new c(null);return R.words=new Array(Math.ceil(this.n/13)),R},A.prototype.ireduce=function(R){var L,_=R;do this.split(_,this.tmp),L=(_=(_=this.imulK(_)).iadd(this.tmp)).bitLength();while(L>this.n);var w=L<this.n?-1:_.ucmp(this.p);return w===0?(_.words[0]=0,_.length=1):w>0?_.isub(this.p):_.strip!==void 0?_.strip():_._strip(),_},A.prototype.split=function(R,L){R.iushrn(this.n,0,L)},A.prototype.imulK=function(R){return R.imul(this.k)},l(I,A),I.prototype.split=function(R,L){for(var _=Math.min(R.length,9),w=0;w<_;w++)L.words[w]=R.words[w];if(L.length=_,R.length<=9)return R.words[0]=0,void(R.length=1);var S=R.words[9];for(L.words[L.length++]=4194303&S,w=10;w<R.length;w++){var x=0|R.words[w];R.words[w-10]=(4194303&x)<<4|S>>>22,S=x}S>>>=22,R.words[w-10]=S,S===0&&R.length>10?R.length-=10:R.length-=9},I.prototype.imulK=function(R){R.words[R.length]=0,R.words[R.length+1]=0,R.length+=2;for(var L=0,_=0;_<R.length;_++){var w=0|R.words[_];L+=977*w,R.words[_]=67108863&L,L=64*w+(L/67108864|0)}return R.words[R.length-1]===0&&(R.length--,R.words[R.length-1]===0&&R.length--),R},l(D,A),l(F,A),l(B,A),B.prototype.imulK=function(R){for(var L=0,_=0;_<R.length;_++){var w=19*(0|R.words[_])+L,S=67108863&w;w>>>=26,R.words[_]=S,L=w}return L!==0&&(R.words[R.length++]=L),R},c._prime=function(R){if(T[R])return T[R];var L;if(R==="k256")L=new I;else if(R==="p224")L=new D;else if(R==="p192")L=new F;else{if(R!=="p25519")throw new Error("Unknown prime "+R);L=new B}return T[R]=L,L},U.prototype._verify1=function(R){a(R.negative===0,"red works only with positives"),a(R.red,"red works only with red numbers")},U.prototype._verify2=function(R,L){a((R.negative|L.negative)==0,"red works only with positives"),a(R.red&&R.red===L.red,"red works only with red numbers")},U.prototype.imod=function(R){return this.prime?this.prime.ireduce(R)._forceRed(this):R.umod(this.m)._forceRed(this)},U.prototype.neg=function(R){return R.isZero()?R.clone():this.m.sub(R)._forceRed(this)},U.prototype.add=function(R,L){this._verify2(R,L);var _=R.add(L);return _.cmp(this.m)>=0&&_.isub(this.m),_._forceRed(this)},U.prototype.iadd=function(R,L){this._verify2(R,L);var _=R.iadd(L);return _.cmp(this.m)>=0&&_.isub(this.m),_},U.prototype.sub=function(R,L){this._verify2(R,L);var _=R.sub(L);return _.cmpn(0)<0&&_.iadd(this.m),_._forceRed(this)},U.prototype.isub=function(R,L){this._verify2(R,L);var _=R.isub(L);return _.cmpn(0)<0&&_.iadd(this.m),_},U.prototype.shl=function(R,L){return this._verify1(R),this.imod(R.ushln(L))},U.prototype.imul=function(R,L){return this._verify2(R,L),this.imod(R.imul(L))},U.prototype.mul=function(R,L){return this._verify2(R,L),this.imod(R.mul(L))},U.prototype.isqr=function(R){return this.imul(R,R.clone())},U.prototype.sqr=function(R){return this.mul(R,R)},U.prototype.sqrt=function(R){if(R.isZero())return R.clone();var L=this.m.andln(3);if(a(L%2==1),L===3){var _=this.m.add(new c(1)).iushrn(2);return this.pow(R,_)}for(var w=this.m.subn(1),S=0;!w.isZero()&&w.andln(1)===0;)S++,w.iushrn(1);a(!w.isZero());var x=new c(1).toRed(this),E=x.redNeg(),M=this.m.subn(1).iushrn(1),O=this.m.bitLength();for(O=new c(2*O*O).toRed(this);this.pow(O,M).cmp(E)!==0;)O.redIAdd(E);for(var V=this.pow(O,w),Y=this.pow(R,w.addn(1).iushrn(1)),$=this.pow(R,w),J=S;$.cmp(x)!==0;){for(var G=$,Z=0;G.cmp(x)!==0;Z++)G=G.redSqr();a(Z<J);var N=this.pow(V,new c(1).iushln(J-Z-1));Y=Y.redMul(N),V=N.redSqr(),$=$.redMul(V),J=Z}return Y},U.prototype.invm=function(R){var L=R._invmp(this.m);return L.negative!==0?(L.negative=0,this.imod(L).redNeg()):this.imod(L)},U.prototype.pow=function(R,L){if(L.isZero())return new c(1).toRed(this);if(L.cmpn(1)===0)return R.clone();var _=new Array(16);_[0]=new c(1).toRed(this),_[1]=R;for(var w=2;w<_.length;w++)_[w]=this.mul(_[w-1],R);var S=_[0],x=0,E=0,M=L.bitLength()%26;for(M===0&&(M=26),w=L.length-1;w>=0;w--){for(var O=L.words[w],V=M-1;V>=0;V--){var Y=O>>V&1;S!==_[0]&&(S=this.sqr(S)),Y!==0||x!==0?(x<<=1,x|=Y,(++E===4||w===0&&V===0)&&(S=this.mul(S,_[x]),E=0,x=0)):E=0}M=26}return S},U.prototype.convertTo=function(R){var L=R.umod(this.m);return L===R?L.clone():L},U.prototype.convertFrom=function(R){var L=R.clone();return L.red=null,L},c.mont=function(R){return new H(R)},l(H,U),H.prototype.convertTo=function(R){return this.imod(R.ushln(this.shift))},H.prototype.convertFrom=function(R){var L=this.imod(R.mul(this.rinv));return L.red=null,L},H.prototype.imul=function(R,L){if(R.isZero()||L.isZero())return R.words[0]=0,R.length=1,R;var _=R.imul(L),w=_.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),S=_.isub(w).iushrn(this.shift),x=S;return S.cmp(this.m)>=0?x=S.isub(this.m):S.cmpn(0)<0&&(x=S.iadd(this.m)),x._forceRed(this)},H.prototype.mul=function(R,L){if(R.isZero()||L.isZero())return new c(0)._forceRed(this);var _=R.mul(L),w=_.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),S=_.isub(w).iushrn(this.shift),x=S;return S.cmp(this.m)>=0?x=S.isub(this.m):S.cmpn(0)<0&&(x=S.iadd(this.m)),x._forceRed(this)},H.prototype.invm=function(R){return this.imod(R._invmp(this.m).mul(this.r2))._forceRed(this)}})(s===void 0||s)},{buffer:188}],185:[function(i,s,r){r.byteLength=function(p){var f=d(p),m=f[0],g=f[1];return 3*(m+g)/4-g},r.toByteArray=function(p){var f,m,g=d(p),y=g[0],v=g[1],C=new a(function(A,I,D){return 3*(I+D)/4-D}(0,y,v)),b=0,T=v>0?y-4:y;for(m=0;m<T;m+=4)f=o[p.charCodeAt(m)]<<18|o[p.charCodeAt(m+1)]<<12|o[p.charCodeAt(m+2)]<<6|o[p.charCodeAt(m+3)],C[b++]=f>>16&255,C[b++]=f>>8&255,C[b++]=255&f;return v===2&&(f=o[p.charCodeAt(m)]<<2|o[p.charCodeAt(m+1)]>>4,C[b++]=255&f),v===1&&(f=o[p.charCodeAt(m)]<<10|o[p.charCodeAt(m+1)]<<4|o[p.charCodeAt(m+2)]>>2,C[b++]=f>>8&255,C[b++]=255&f),C},r.fromByteArray=function(p){for(var f,m=p.length,g=m%3,y=[],v=0,C=m-g;v<C;v+=16383)y.push(h(p,v,v+16383>C?C:v+16383));return g===1?(f=p[m-1],y.push(n[f>>2]+n[f<<4&63]+"==")):g===2&&(f=(p[m-2]<<8)+p[m-1],y.push(n[f>>10]+n[f>>4&63]+n[f<<2&63]+"=")),y.join("")};for(var n=[],o=[],a=typeof Uint8Array<"u"?Uint8Array:Array,l="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",c=0,u=l.length;c<u;++c)n[c]=l[c],o[l.charCodeAt(c)]=c;function d(p){var f=p.length;if(f%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var m=p.indexOf("=");return m===-1&&(m=f),[m,m===f?0:4-m%4]}function h(p,f,m){for(var g,y,v=[],C=f;C<m;C+=3)g=(p[C]<<16&16711680)+(p[C+1]<<8&65280)+(255&p[C+2]),v.push(n[(y=g)>>18&63]+n[y>>12&63]+n[y>>6&63]+n[63&y]);return v.join("")}o[45]=62,o[95]=63},{}],186:[function(i,s,r){(function(n,o){function a(_,w){if(!_)throw new Error(w||"Assertion failed")}function l(_,w){_.super_=w;var S=function(){};S.prototype=w.prototype,_.prototype=new S,_.prototype.constructor=_}function c(_,w,S){if(c.isBN(_))return _;this.negative=0,this.words=null,this.length=0,this.red=null,_!==null&&(w!=="le"&&w!=="be"||(S=w,w=10),this._init(_||0,w||10,S||"be"))}var u;typeof n=="object"?n.exports=c:(void 0).BN=c,c.BN=c,c.wordSize=26;try{u=typeof window<"u"&&window.Buffer!==void 0?window.Buffer:i("buffer").Buffer}catch{}function d(_,w){var S=_.charCodeAt(w);return S>=48&&S<=57?S-48:S>=65&&S<=70?S-55:S>=97&&S<=102?S-87:void a(!1,"Invalid character in "+_)}function h(_,w,S){var x=d(_,S);return S-1>=w&&(x|=d(_,S-1)<<4),x}function p(_,w,S,x){for(var E=0,M=0,O=Math.min(_.length,S),V=w;V<O;V++){var Y=_.charCodeAt(V)-48;E*=x,M=Y>=49?Y-49+10:Y>=17?Y-17+10:Y,a(Y>=0&&M<x,"Invalid character"),E+=M}return E}function f(_,w){_.words=w.words,_.length=w.length,_.negative=w.negative,_.red=w.red}if(c.isBN=function(_){return _ instanceof c||_!==null&&typeof _=="object"&&_.constructor.wordSize===c.wordSize&&Array.isArray(_.words)},c.max=function(_,w){return _.cmp(w)>0?_:w},c.min=function(_,w){return _.cmp(w)<0?_:w},c.prototype._init=function(_,w,S){if(typeof _=="number")return this._initNumber(_,w,S);if(typeof _=="object")return this._initArray(_,w,S);w==="hex"&&(w=16),a(w===(0|w)&&w>=2&&w<=36);var x=0;(_=_.toString().replace(/\s+/g,""))[0]==="-"&&(x++,this.negative=1),x<_.length&&(w===16?this._parseHex(_,x,S):(this._parseBase(_,w,x),S==="le"&&this._initArray(this.toArray(),w,S)))},c.prototype._initNumber=function(_,w,S){_<0&&(this.negative=1,_=-_),_<67108864?(this.words=[67108863&_],this.length=1):_<4503599627370496?(this.words=[67108863&_,_/67108864&67108863],this.length=2):(a(_<9007199254740992),this.words=[67108863&_,_/67108864&67108863,1],this.length=3),S==="le"&&this._initArray(this.toArray(),w,S)},c.prototype._initArray=function(_,w,S){if(a(typeof _.length=="number"),_.length<=0)return this.words=[0],this.length=1,this;this.length=Math.ceil(_.length/3),this.words=new Array(this.length);for(var x=0;x<this.length;x++)this.words[x]=0;var E,M,O=0;if(S==="be")for(x=_.length-1,E=0;x>=0;x-=3)M=_[x]|_[x-1]<<8|_[x-2]<<16,this.words[E]|=M<<O&67108863,this.words[E+1]=M>>>26-O&67108863,(O+=24)>=26&&(O-=26,E++);else if(S==="le")for(x=0,E=0;x<_.length;x+=3)M=_[x]|_[x+1]<<8|_[x+2]<<16,this.words[E]|=M<<O&67108863,this.words[E+1]=M>>>26-O&67108863,(O+=24)>=26&&(O-=26,E++);return this._strip()},c.prototype._parseHex=function(_,w,S){this.length=Math.ceil((_.length-w)/6),this.words=new Array(this.length);for(var x=0;x<this.length;x++)this.words[x]=0;var E,M=0,O=0;if(S==="be")for(x=_.length-1;x>=w;x-=2)E=h(_,w,x)<<M,this.words[O]|=67108863&E,M>=18?(M-=18,O+=1,this.words[O]|=E>>>26):M+=8;else for(x=(_.length-w)%2==0?w+1:w;x<_.length;x+=2)E=h(_,w,x)<<M,this.words[O]|=67108863&E,M>=18?(M-=18,O+=1,this.words[O]|=E>>>26):M+=8;this._strip()},c.prototype._parseBase=function(_,w,S){this.words=[0],this.length=1;for(var x=0,E=1;E<=67108863;E*=w)x++;x--,E=E/w|0;for(var M=_.length-S,O=M%x,V=Math.min(M,M-O)+S,Y=0,$=S;$<V;$+=x)Y=p(_,$,$+x,w),this.imuln(E),this.words[0]+Y<67108864?this.words[0]+=Y:this._iaddn(Y);if(O!==0){var J=1;for(Y=p(_,$,_.length,w),$=0;$<O;$++)J*=w;this.imuln(J),this.words[0]+Y<67108864?this.words[0]+=Y:this._iaddn(Y)}this._strip()},c.prototype.copy=function(_){_.words=new Array(this.length);for(var w=0;w<this.length;w++)_.words[w]=this.words[w];_.length=this.length,_.negative=this.negative,_.red=this.red},c.prototype._move=function(_){f(_,this)},c.prototype.clone=function(){var _=new c(null);return this.copy(_),_},c.prototype._expand=function(_){for(;this.length<_;)this.words[this.length++]=0;return this},c.prototype._strip=function(){for(;this.length>1&&this.words[this.length-1]===0;)this.length--;return this._normSign()},c.prototype._normSign=function(){return this.length===1&&this.words[0]===0&&(this.negative=0),this},typeof Symbol<"u"&&typeof Symbol.for=="function")try{c.prototype[Symbol.for("nodejs.util.inspect.custom")]=m}catch{c.prototype.inspect=m}else c.prototype.inspect=m;function m(){return(this.red?"<BN-R: ":"<BN: ")+this.toString(16)+">"}var g=["","0","00","000","0000","00000","000000","0000000","00000000","000000000","0000000000","00000000000","000000000000","0000000000000","00000000000000","000000000000000","0000000000000000","00000000000000000","000000000000000000","0000000000000000000","00000000000000000000","000000000000000000000","0000000000000000000000","00000000000000000000000","000000000000000000000000","0000000000000000000000000"],y=[0,0,25,16,12,11,10,9,8,8,7,7,7,7,6,6,6,6,6,6,6,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5],v=[0,0,33554432,43046721,16777216,48828125,60466176,40353607,16777216,43046721,1e7,19487171,35831808,62748517,7529536,11390625,16777216,24137569,34012224,47045881,64e6,4084101,5153632,6436343,7962624,9765625,11881376,14348907,17210368,20511149,243e5,28629151,33554432,39135393,45435424,52521875,60466176];c.prototype.toString=function(_,w){var S;if(w=0|w||1,(_=_||10)===16||_==="hex"){S="";for(var x=0,E=0,M=0;M<this.length;M++){var O=this.words[M],V=(16777215&(O<<x|E)).toString(16);E=O>>>24-x&16777215,(x+=2)>=26&&(x-=26,M--),S=E!==0||M!==this.length-1?g[6-V.length]+V+S:V+S}for(E!==0&&(S=E.toString(16)+S);S.length%w!=0;)S="0"+S;return this.negative!==0&&(S="-"+S),S}if(_===(0|_)&&_>=2&&_<=36){var Y=y[_],$=v[_];S="";var J=this.clone();for(J.negative=0;!J.isZero();){var G=J.modrn($).toString(_);S=(J=J.idivn($)).isZero()?G+S:g[Y-G.length]+G+S}for(this.isZero()&&(S="0"+S);S.length%w!=0;)S="0"+S;return this.negative!==0&&(S="-"+S),S}a(!1,"Base should be between 2 and 36")},c.prototype.toNumber=function(){var _=this.words[0];return this.length===2?_+=67108864*this.words[1]:this.length===3&&this.words[2]===1?_+=4503599627370496+67108864*this.words[1]:this.length>2&&a(!1,"Number can only safely store up to 53 bits"),this.negative!==0?-_:_},c.prototype.toJSON=function(){return this.toString(16,2)},u&&(c.prototype.toBuffer=function(_,w){return this.toArrayLike(u,_,w)}),c.prototype.toArray=function(_,w){return this.toArrayLike(Array,_,w)};function C(_,w,S){S.negative=w.negative^_.negative;var x=_.length+w.length|0;S.length=x,x=x-1|0;var E=0|_.words[0],M=0|w.words[0],O=E*M,V=67108863&O,Y=O/67108864|0;S.words[0]=V;for(var $=1;$<x;$++){for(var J=Y>>>26,G=67108863&Y,Z=Math.min($,w.length-1),N=Math.max(0,$-_.length+1);N<=Z;N++){var P=$-N|0;J+=(O=(E=0|_.words[P])*(M=0|w.words[N])+G)/67108864|0,G=67108863&O}S.words[$]=0|G,Y=0|J}return Y!==0?S.words[$]=0|Y:S.length--,S._strip()}c.prototype.toArrayLike=function(_,w,S){this._strip();var x=this.byteLength(),E=S||Math.max(1,x);a(x<=E,"byte array longer than desired length"),a(E>0,"Requested array length <= 0");var M=function(O,V){return O.allocUnsafe?O.allocUnsafe(V):new O(V)}(_,E);return this["_toArrayLike"+(w==="le"?"LE":"BE")](M,x),M},c.prototype._toArrayLikeLE=function(_,w){for(var S=0,x=0,E=0,M=0;E<this.length;E++){var O=this.words[E]<<M|x;_[S++]=255&O,S<_.length&&(_[S++]=O>>8&255),S<_.length&&(_[S++]=O>>16&255),M===6?(S<_.length&&(_[S++]=O>>24&255),x=0,M=0):(x=O>>>24,M+=2)}if(S<_.length)for(_[S++]=x;S<_.length;)_[S++]=0},c.prototype._toArrayLikeBE=function(_,w){for(var S=_.length-1,x=0,E=0,M=0;E<this.length;E++){var O=this.words[E]<<M|x;_[S--]=255&O,S>=0&&(_[S--]=O>>8&255),S>=0&&(_[S--]=O>>16&255),M===6?(S>=0&&(_[S--]=O>>24&255),x=0,M=0):(x=O>>>24,M+=2)}if(S>=0)for(_[S--]=x;S>=0;)_[S--]=0},Math.clz32?c.prototype._countBits=function(_){return 32-Math.clz32(_)}:c.prototype._countBits=function(_){var w=_,S=0;return w>=4096&&(S+=13,w>>>=13),w>=64&&(S+=7,w>>>=7),w>=8&&(S+=4,w>>>=4),w>=2&&(S+=2,w>>>=2),S+w},c.prototype._zeroBits=function(_){if(_===0)return 26;var w=_,S=0;return!(8191&w)&&(S+=13,w>>>=13),!(127&w)&&(S+=7,w>>>=7),!(15&w)&&(S+=4,w>>>=4),!(3&w)&&(S+=2,w>>>=2),!(1&w)&&S++,S},c.prototype.bitLength=function(){var _=this.words[this.length-1],w=this._countBits(_);return 26*(this.length-1)+w},c.prototype.zeroBits=function(){if(this.isZero())return 0;for(var _=0,w=0;w<this.length;w++){var S=this._zeroBits(this.words[w]);if(_+=S,S!==26)break}return _},c.prototype.byteLength=function(){return Math.ceil(this.bitLength()/8)},c.prototype.toTwos=function(_){return this.negative!==0?this.abs().inotn(_).iaddn(1):this.clone()},c.prototype.fromTwos=function(_){return this.testn(_-1)?this.notn(_).iaddn(1).ineg():this.clone()},c.prototype.isNeg=function(){return this.negative!==0},c.prototype.neg=function(){return this.clone().ineg()},c.prototype.ineg=function(){return this.isZero()||(this.negative^=1),this},c.prototype.iuor=function(_){for(;this.length<_.length;)this.words[this.length++]=0;for(var w=0;w<_.length;w++)this.words[w]=this.words[w]|_.words[w];return this._strip()},c.prototype.ior=function(_){return a((this.negative|_.negative)==0),this.iuor(_)},c.prototype.or=function(_){return this.length>_.length?this.clone().ior(_):_.clone().ior(this)},c.prototype.uor=function(_){return this.length>_.length?this.clone().iuor(_):_.clone().iuor(this)},c.prototype.iuand=function(_){var w;w=this.length>_.length?_:this;for(var S=0;S<w.length;S++)this.words[S]=this.words[S]&_.words[S];return this.length=w.length,this._strip()},c.prototype.iand=function(_){return a((this.negative|_.negative)==0),this.iuand(_)},c.prototype.and=function(_){return this.length>_.length?this.clone().iand(_):_.clone().iand(this)},c.prototype.uand=function(_){return this.length>_.length?this.clone().iuand(_):_.clone().iuand(this)},c.prototype.iuxor=function(_){var w,S;this.length>_.length?(w=this,S=_):(w=_,S=this);for(var x=0;x<S.length;x++)this.words[x]=w.words[x]^S.words[x];if(this!==w)for(;x<w.length;x++)this.words[x]=w.words[x];return this.length=w.length,this._strip()},c.prototype.ixor=function(_){return a((this.negative|_.negative)==0),this.iuxor(_)},c.prototype.xor=function(_){return this.length>_.length?this.clone().ixor(_):_.clone().ixor(this)},c.prototype.uxor=function(_){return this.length>_.length?this.clone().iuxor(_):_.clone().iuxor(this)},c.prototype.inotn=function(_){a(typeof _=="number"&&_>=0);var w=0|Math.ceil(_/26),S=_%26;this._expand(w),S>0&&w--;for(var x=0;x<w;x++)this.words[x]=67108863&~this.words[x];return S>0&&(this.words[x]=~this.words[x]&67108863>>26-S),this._strip()},c.prototype.notn=function(_){return this.clone().inotn(_)},c.prototype.setn=function(_,w){a(typeof _=="number"&&_>=0);var S=_/26|0,x=_%26;return this._expand(S+1),this.words[S]=w?this.words[S]|1<<x:this.words[S]&~(1<<x),this._strip()},c.prototype.iadd=function(_){var w,S,x;if(this.negative!==0&&_.negative===0)return this.negative=0,w=this.isub(_),this.negative^=1,this._normSign();if(this.negative===0&&_.negative!==0)return _.negative=0,w=this.isub(_),_.negative=1,w._normSign();this.length>_.length?(S=this,x=_):(S=_,x=this);for(var E=0,M=0;M<x.length;M++)w=(0|S.words[M])+(0|x.words[M])+E,this.words[M]=67108863&w,E=w>>>26;for(;E!==0&&M<S.length;M++)w=(0|S.words[M])+E,this.words[M]=67108863&w,E=w>>>26;if(this.length=S.length,E!==0)this.words[this.length]=E,this.length++;else if(S!==this)for(;M<S.length;M++)this.words[M]=S.words[M];return this},c.prototype.add=function(_){var w;return _.negative!==0&&this.negative===0?(_.negative=0,w=this.sub(_),_.negative^=1,w):_.negative===0&&this.negative!==0?(this.negative=0,w=_.sub(this),this.negative=1,w):this.length>_.length?this.clone().iadd(_):_.clone().iadd(this)},c.prototype.isub=function(_){if(_.negative!==0){_.negative=0;var w=this.iadd(_);return _.negative=1,w._normSign()}if(this.negative!==0)return this.negative=0,this.iadd(_),this.negative=1,this._normSign();var S,x,E=this.cmp(_);if(E===0)return this.negative=0,this.length=1,this.words[0]=0,this;E>0?(S=this,x=_):(S=_,x=this);for(var M=0,O=0;O<x.length;O++)M=(w=(0|S.words[O])-(0|x.words[O])+M)>>26,this.words[O]=67108863&w;for(;M!==0&&O<S.length;O++)M=(w=(0|S.words[O])+M)>>26,this.words[O]=67108863&w;if(M===0&&O<S.length&&S!==this)for(;O<S.length;O++)this.words[O]=S.words[O];return this.length=Math.max(this.length,O),S!==this&&(this.negative=1),this._strip()},c.prototype.sub=function(_){return this.clone().isub(_)};var b=function(_,w,S){var x,E,M,O=_.words,V=w.words,Y=S.words,$=0,J=0|O[0],G=8191&J,Z=J>>>13,N=0|O[1],P=8191&N,j=N>>>13,X=0|O[2],ie=8191&X,ee=X>>>13,re=0|O[3],oe=8191&re,ue=re>>>13,se=0|O[4],le=8191&se,ne=se>>>13,fe=0|O[5],me=8191&fe,ge=fe>>>13,ve=0|O[6],xe=8191&ve,De=ve>>>13,ze=0|O[7],Ye=8191&ze,je=ze>>>13,ht=0|O[8],ut=8191&ht,dt=ht>>>13,gt=0|O[9],Ze=8191&gt,Ve=gt>>>13,Je=0|V[0],ct=8191&Je,et=Je>>>13,ii=0|V[1],_i=8191&ii,mt=ii>>>13,vi=0|V[2],ei=8191&vi,It=vi>>>13,Gi=0|V[3],yi=8191&Gi,xt=Gi>>>13,ui=0|V[4],Fi=8191&ui,At=ui>>>13,xi=0|V[5],Li=8191&xi,Gt=xi>>>13,he=0|V[6],be=8191&he,Re=he>>>13,Ue=0|V[7],Ct=8191&Ue,Ke=Ue>>>13,Rt=0|V[8],bt=8191&Rt,pt=Rt>>>13,kt=0|V[9],Pt=8191&kt,qt=kt>>>13;S.negative=_.negative^w.negative,S.length=19;var gs=($+(x=Math.imul(G,ct))|0)+((8191&(E=(E=Math.imul(G,et))+Math.imul(Z,ct)|0))<<13)|0;$=((M=Math.imul(Z,et))+(E>>>13)|0)+(gs>>>26)|0,gs&=67108863,x=Math.imul(P,ct),E=(E=Math.imul(P,et))+Math.imul(j,ct)|0,M=Math.imul(j,et);var ji=($+(x=x+Math.imul(G,_i)|0)|0)+((8191&(E=(E=E+Math.imul(G,mt)|0)+Math.imul(Z,_i)|0))<<13)|0;$=((M=M+Math.imul(Z,mt)|0)+(E>>>13)|0)+(ji>>>26)|0,ji&=67108863,x=Math.imul(ie,ct),E=(E=Math.imul(ie,et))+Math.imul(ee,ct)|0,M=Math.imul(ee,et),x=x+Math.imul(P,_i)|0,E=(E=E+Math.imul(P,mt)|0)+Math.imul(j,_i)|0,M=M+Math.imul(j,mt)|0;var js=($+(x=x+Math.imul(G,ei)|0)|0)+((8191&(E=(E=E+Math.imul(G,It)|0)+Math.imul(Z,ei)|0))<<13)|0;$=((M=M+Math.imul(Z,It)|0)+(E>>>13)|0)+(js>>>26)|0,js&=67108863,x=Math.imul(oe,ct),E=(E=Math.imul(oe,et))+Math.imul(ue,ct)|0,M=Math.imul(ue,et),x=x+Math.imul(ie,_i)|0,E=(E=E+Math.imul(ie,mt)|0)+Math.imul(ee,_i)|0,M=M+Math.imul(ee,mt)|0,x=x+Math.imul(P,ei)|0,E=(E=E+Math.imul(P,It)|0)+Math.imul(j,ei)|0,M=M+Math.imul(j,It)|0;var Us=($+(x=x+Math.imul(G,yi)|0)|0)+((8191&(E=(E=E+Math.imul(G,xt)|0)+Math.imul(Z,yi)|0))<<13)|0;$=((M=M+Math.imul(Z,xt)|0)+(E>>>13)|0)+(Us>>>26)|0,Us&=67108863,x=Math.imul(le,ct),E=(E=Math.imul(le,et))+Math.imul(ne,ct)|0,M=Math.imul(ne,et),x=x+Math.imul(oe,_i)|0,E=(E=E+Math.imul(oe,mt)|0)+Math.imul(ue,_i)|0,M=M+Math.imul(ue,mt)|0,x=x+Math.imul(ie,ei)|0,E=(E=E+Math.imul(ie,It)|0)+Math.imul(ee,ei)|0,M=M+Math.imul(ee,It)|0,x=x+Math.imul(P,yi)|0,E=(E=E+Math.imul(P,xt)|0)+Math.imul(j,yi)|0,M=M+Math.imul(j,xt)|0;var hn=($+(x=x+Math.imul(G,Fi)|0)|0)+((8191&(E=(E=E+Math.imul(G,At)|0)+Math.imul(Z,Fi)|0))<<13)|0;$=((M=M+Math.imul(Z,At)|0)+(E>>>13)|0)+(hn>>>26)|0,hn&=67108863,x=Math.imul(me,ct),E=(E=Math.imul(me,et))+Math.imul(ge,ct)|0,M=Math.imul(ge,et),x=x+Math.imul(le,_i)|0,E=(E=E+Math.imul(le,mt)|0)+Math.imul(ne,_i)|0,M=M+Math.imul(ne,mt)|0,x=x+Math.imul(oe,ei)|0,E=(E=E+Math.imul(oe,It)|0)+Math.imul(ue,ei)|0,M=M+Math.imul(ue,It)|0,x=x+Math.imul(ie,yi)|0,E=(E=E+Math.imul(ie,xt)|0)+Math.imul(ee,yi)|0,M=M+Math.imul(ee,xt)|0,x=x+Math.imul(P,Fi)|0,E=(E=E+Math.imul(P,At)|0)+Math.imul(j,Fi)|0,M=M+Math.imul(j,At)|0;var ae=($+(x=x+Math.imul(G,Li)|0)|0)+((8191&(E=(E=E+Math.imul(G,Gt)|0)+Math.imul(Z,Li)|0))<<13)|0;$=((M=M+Math.imul(Z,Gt)|0)+(E>>>13)|0)+(ae>>>26)|0,ae&=67108863,x=Math.imul(xe,ct),E=(E=Math.imul(xe,et))+Math.imul(De,ct)|0,M=Math.imul(De,et),x=x+Math.imul(me,_i)|0,E=(E=E+Math.imul(me,mt)|0)+Math.imul(ge,_i)|0,M=M+Math.imul(ge,mt)|0,x=x+Math.imul(le,ei)|0,E=(E=E+Math.imul(le,It)|0)+Math.imul(ne,ei)|0,M=M+Math.imul(ne,It)|0,x=x+Math.imul(oe,yi)|0,E=(E=E+Math.imul(oe,xt)|0)+Math.imul(ue,yi)|0,M=M+Math.imul(ue,xt)|0,x=x+Math.imul(ie,Fi)|0,E=(E=E+Math.imul(ie,At)|0)+Math.imul(ee,Fi)|0,M=M+Math.imul(ee,At)|0,x=x+Math.imul(P,Li)|0,E=(E=E+Math.imul(P,Gt)|0)+Math.imul(j,Li)|0,M=M+Math.imul(j,Gt)|0;var we=($+(x=x+Math.imul(G,be)|0)|0)+((8191&(E=(E=E+Math.imul(G,Re)|0)+Math.imul(Z,be)|0))<<13)|0;$=((M=M+Math.imul(Z,Re)|0)+(E>>>13)|0)+(we>>>26)|0,we&=67108863,x=Math.imul(Ye,ct),E=(E=Math.imul(Ye,et))+Math.imul(je,ct)|0,M=Math.imul(je,et),x=x+Math.imul(xe,_i)|0,E=(E=E+Math.imul(xe,mt)|0)+Math.imul(De,_i)|0,M=M+Math.imul(De,mt)|0,x=x+Math.imul(me,ei)|0,E=(E=E+Math.imul(me,It)|0)+Math.imul(ge,ei)|0,M=M+Math.imul(ge,It)|0,x=x+Math.imul(le,yi)|0,E=(E=E+Math.imul(le,xt)|0)+Math.imul(ne,yi)|0,M=M+Math.imul(ne,xt)|0,x=x+Math.imul(oe,Fi)|0,E=(E=E+Math.imul(oe,At)|0)+Math.imul(ue,Fi)|0,M=M+Math.imul(ue,At)|0,x=x+Math.imul(ie,Li)|0,E=(E=E+Math.imul(ie,Gt)|0)+Math.imul(ee,Li)|0,M=M+Math.imul(ee,Gt)|0,x=x+Math.imul(P,be)|0,E=(E=E+Math.imul(P,Re)|0)+Math.imul(j,be)|0,M=M+Math.imul(j,Re)|0;var Ie=($+(x=x+Math.imul(G,Ct)|0)|0)+((8191&(E=(E=E+Math.imul(G,Ke)|0)+Math.imul(Z,Ct)|0))<<13)|0;$=((M=M+Math.imul(Z,Ke)|0)+(E>>>13)|0)+(Ie>>>26)|0,Ie&=67108863,x=Math.imul(ut,ct),E=(E=Math.imul(ut,et))+Math.imul(dt,ct)|0,M=Math.imul(dt,et),x=x+Math.imul(Ye,_i)|0,E=(E=E+Math.imul(Ye,mt)|0)+Math.imul(je,_i)|0,M=M+Math.imul(je,mt)|0,x=x+Math.imul(xe,ei)|0,E=(E=E+Math.imul(xe,It)|0)+Math.imul(De,ei)|0,M=M+Math.imul(De,It)|0,x=x+Math.imul(me,yi)|0,E=(E=E+Math.imul(me,xt)|0)+Math.imul(ge,yi)|0,M=M+Math.imul(ge,xt)|0,x=x+Math.imul(le,Fi)|0,E=(E=E+Math.imul(le,At)|0)+Math.imul(ne,Fi)|0,M=M+Math.imul(ne,At)|0,x=x+Math.imul(oe,Li)|0,E=(E=E+Math.imul(oe,Gt)|0)+Math.imul(ue,Li)|0,M=M+Math.imul(ue,Gt)|0,x=x+Math.imul(ie,be)|0,E=(E=E+Math.imul(ie,Re)|0)+Math.imul(ee,be)|0,M=M+Math.imul(ee,Re)|0,x=x+Math.imul(P,Ct)|0,E=(E=E+Math.imul(P,Ke)|0)+Math.imul(j,Ct)|0,M=M+Math.imul(j,Ke)|0;var Le=($+(x=x+Math.imul(G,bt)|0)|0)+((8191&(E=(E=E+Math.imul(G,pt)|0)+Math.imul(Z,bt)|0))<<13)|0;$=((M=M+Math.imul(Z,pt)|0)+(E>>>13)|0)+(Le>>>26)|0,Le&=67108863,x=Math.imul(Ze,ct),E=(E=Math.imul(Ze,et))+Math.imul(Ve,ct)|0,M=Math.imul(Ve,et),x=x+Math.imul(ut,_i)|0,E=(E=E+Math.imul(ut,mt)|0)+Math.imul(dt,_i)|0,M=M+Math.imul(dt,mt)|0,x=x+Math.imul(Ye,ei)|0,E=(E=E+Math.imul(Ye,It)|0)+Math.imul(je,ei)|0,M=M+Math.imul(je,It)|0,x=x+Math.imul(xe,yi)|0,E=(E=E+Math.imul(xe,xt)|0)+Math.imul(De,yi)|0,M=M+Math.imul(De,xt)|0,x=x+Math.imul(me,Fi)|0,E=(E=E+Math.imul(me,At)|0)+Math.imul(ge,Fi)|0,M=M+Math.imul(ge,At)|0,x=x+Math.imul(le,Li)|0,E=(E=E+Math.imul(le,Gt)|0)+Math.imul(ne,Li)|0,M=M+Math.imul(ne,Gt)|0,x=x+Math.imul(oe,be)|0,E=(E=E+Math.imul(oe,Re)|0)+Math.imul(ue,be)|0,M=M+Math.imul(ue,Re)|0,x=x+Math.imul(ie,Ct)|0,E=(E=E+Math.imul(ie,Ke)|0)+Math.imul(ee,Ct)|0,M=M+Math.imul(ee,Ke)|0,x=x+Math.imul(P,bt)|0,E=(E=E+Math.imul(P,pt)|0)+Math.imul(j,bt)|0,M=M+Math.imul(j,pt)|0;var at=($+(x=x+Math.imul(G,Pt)|0)|0)+((8191&(E=(E=E+Math.imul(G,qt)|0)+Math.imul(Z,Pt)|0))<<13)|0;$=((M=M+Math.imul(Z,qt)|0)+(E>>>13)|0)+(at>>>26)|0,at&=67108863,x=Math.imul(Ze,_i),E=(E=Math.imul(Ze,mt))+Math.imul(Ve,_i)|0,M=Math.imul(Ve,mt),x=x+Math.imul(ut,ei)|0,E=(E=E+Math.imul(ut,It)|0)+Math.imul(dt,ei)|0,M=M+Math.imul(dt,It)|0,x=x+Math.imul(Ye,yi)|0,E=(E=E+Math.imul(Ye,xt)|0)+Math.imul(je,yi)|0,M=M+Math.imul(je,xt)|0,x=x+Math.imul(xe,Fi)|0,E=(E=E+Math.imul(xe,At)|0)+Math.imul(De,Fi)|0,M=M+Math.imul(De,At)|0,x=x+Math.imul(me,Li)|0,E=(E=E+Math.imul(me,Gt)|0)+Math.imul(ge,Li)|0,M=M+Math.imul(ge,Gt)|0,x=x+Math.imul(le,be)|0,E=(E=E+Math.imul(le,Re)|0)+Math.imul(ne,be)|0,M=M+Math.imul(ne,Re)|0,x=x+Math.imul(oe,Ct)|0,E=(E=E+Math.imul(oe,Ke)|0)+Math.imul(ue,Ct)|0,M=M+Math.imul(ue,Ke)|0,x=x+Math.imul(ie,bt)|0,E=(E=E+Math.imul(ie,pt)|0)+Math.imul(ee,bt)|0,M=M+Math.imul(ee,pt)|0;var He=($+(x=x+Math.imul(P,Pt)|0)|0)+((8191&(E=(E=E+Math.imul(P,qt)|0)+Math.imul(j,Pt)|0))<<13)|0;$=((M=M+Math.imul(j,qt)|0)+(E>>>13)|0)+(He>>>26)|0,He&=67108863,x=Math.imul(Ze,ei),E=(E=Math.imul(Ze,It))+Math.imul(Ve,ei)|0,M=Math.imul(Ve,It),x=x+Math.imul(ut,yi)|0,E=(E=E+Math.imul(ut,xt)|0)+Math.imul(dt,yi)|0,M=M+Math.imul(dt,xt)|0,x=x+Math.imul(Ye,Fi)|0,E=(E=E+Math.imul(Ye,At)|0)+Math.imul(je,Fi)|0,M=M+Math.imul(je,At)|0,x=x+Math.imul(xe,Li)|0,E=(E=E+Math.imul(xe,Gt)|0)+Math.imul(De,Li)|0,M=M+Math.imul(De,Gt)|0,x=x+Math.imul(me,be)|0,E=(E=E+Math.imul(me,Re)|0)+Math.imul(ge,be)|0,M=M+Math.imul(ge,Re)|0,x=x+Math.imul(le,Ct)|0,E=(E=E+Math.imul(le,Ke)|0)+Math.imul(ne,Ct)|0,M=M+Math.imul(ne,Ke)|0,x=x+Math.imul(oe,bt)|0,E=(E=E+Math.imul(oe,pt)|0)+Math.imul(ue,bt)|0,M=M+Math.imul(ue,pt)|0;var We=($+(x=x+Math.imul(ie,Pt)|0)|0)+((8191&(E=(E=E+Math.imul(ie,qt)|0)+Math.imul(ee,Pt)|0))<<13)|0;$=((M=M+Math.imul(ee,qt)|0)+(E>>>13)|0)+(We>>>26)|0,We&=67108863,x=Math.imul(Ze,yi),E=(E=Math.imul(Ze,xt))+Math.imul(Ve,yi)|0,M=Math.imul(Ve,xt),x=x+Math.imul(ut,Fi)|0,E=(E=E+Math.imul(ut,At)|0)+Math.imul(dt,Fi)|0,M=M+Math.imul(dt,At)|0,x=x+Math.imul(Ye,Li)|0,E=(E=E+Math.imul(Ye,Gt)|0)+Math.imul(je,Li)|0,M=M+Math.imul(je,Gt)|0,x=x+Math.imul(xe,be)|0,E=(E=E+Math.imul(xe,Re)|0)+Math.imul(De,be)|0,M=M+Math.imul(De,Re)|0,x=x+Math.imul(me,Ct)|0,E=(E=E+Math.imul(me,Ke)|0)+Math.imul(ge,Ct)|0,M=M+Math.imul(ge,Ke)|0,x=x+Math.imul(le,bt)|0,E=(E=E+Math.imul(le,pt)|0)+Math.imul(ne,bt)|0,M=M+Math.imul(ne,pt)|0;var oi=($+(x=x+Math.imul(oe,Pt)|0)|0)+((8191&(E=(E=E+Math.imul(oe,qt)|0)+Math.imul(ue,Pt)|0))<<13)|0;$=((M=M+Math.imul(ue,qt)|0)+(E>>>13)|0)+(oi>>>26)|0,oi&=67108863,x=Math.imul(Ze,Fi),E=(E=Math.imul(Ze,At))+Math.imul(Ve,Fi)|0,M=Math.imul(Ve,At),x=x+Math.imul(ut,Li)|0,E=(E=E+Math.imul(ut,Gt)|0)+Math.imul(dt,Li)|0,M=M+Math.imul(dt,Gt)|0,x=x+Math.imul(Ye,be)|0,E=(E=E+Math.imul(Ye,Re)|0)+Math.imul(je,be)|0,M=M+Math.imul(je,Re)|0,x=x+Math.imul(xe,Ct)|0,E=(E=E+Math.imul(xe,Ke)|0)+Math.imul(De,Ct)|0,M=M+Math.imul(De,Ke)|0,x=x+Math.imul(me,bt)|0,E=(E=E+Math.imul(me,pt)|0)+Math.imul(ge,bt)|0,M=M+Math.imul(ge,pt)|0;var Ht=($+(x=x+Math.imul(le,Pt)|0)|0)+((8191&(E=(E=E+Math.imul(le,qt)|0)+Math.imul(ne,Pt)|0))<<13)|0;$=((M=M+Math.imul(ne,qt)|0)+(E>>>13)|0)+(Ht>>>26)|0,Ht&=67108863,x=Math.imul(Ze,Li),E=(E=Math.imul(Ze,Gt))+Math.imul(Ve,Li)|0,M=Math.imul(Ve,Gt),x=x+Math.imul(ut,be)|0,E=(E=E+Math.imul(ut,Re)|0)+Math.imul(dt,be)|0,M=M+Math.imul(dt,Re)|0,x=x+Math.imul(Ye,Ct)|0,E=(E=E+Math.imul(Ye,Ke)|0)+Math.imul(je,Ct)|0,M=M+Math.imul(je,Ke)|0,x=x+Math.imul(xe,bt)|0,E=(E=E+Math.imul(xe,pt)|0)+Math.imul(De,bt)|0,M=M+Math.imul(De,pt)|0;var Xt=($+(x=x+Math.imul(me,Pt)|0)|0)+((8191&(E=(E=E+Math.imul(me,qt)|0)+Math.imul(ge,Pt)|0))<<13)|0;$=((M=M+Math.imul(ge,qt)|0)+(E>>>13)|0)+(Xt>>>26)|0,Xt&=67108863,x=Math.imul(Ze,be),E=(E=Math.imul(Ze,Re))+Math.imul(Ve,be)|0,M=Math.imul(Ve,Re),x=x+Math.imul(ut,Ct)|0,E=(E=E+Math.imul(ut,Ke)|0)+Math.imul(dt,Ct)|0,M=M+Math.imul(dt,Ke)|0,x=x+Math.imul(Ye,bt)|0,E=(E=E+Math.imul(Ye,pt)|0)+Math.imul(je,bt)|0,M=M+Math.imul(je,pt)|0;var wt=($+(x=x+Math.imul(xe,Pt)|0)|0)+((8191&(E=(E=E+Math.imul(xe,qt)|0)+Math.imul(De,Pt)|0))<<13)|0;$=((M=M+Math.imul(De,qt)|0)+(E>>>13)|0)+(wt>>>26)|0,wt&=67108863,x=Math.imul(Ze,Ct),E=(E=Math.imul(Ze,Ke))+Math.imul(Ve,Ct)|0,M=Math.imul(Ve,Ke),x=x+Math.imul(ut,bt)|0,E=(E=E+Math.imul(ut,pt)|0)+Math.imul(dt,bt)|0,M=M+Math.imul(dt,pt)|0;var Di=($+(x=x+Math.imul(Ye,Pt)|0)|0)+((8191&(E=(E=E+Math.imul(Ye,qt)|0)+Math.imul(je,Pt)|0))<<13)|0;$=((M=M+Math.imul(je,qt)|0)+(E>>>13)|0)+(Di>>>26)|0,Di&=67108863,x=Math.imul(Ze,bt),E=(E=Math.imul(Ze,pt))+Math.imul(Ve,bt)|0,M=Math.imul(Ve,pt);var Pi=($+(x=x+Math.imul(ut,Pt)|0)|0)+((8191&(E=(E=E+Math.imul(ut,qt)|0)+Math.imul(dt,Pt)|0))<<13)|0;$=((M=M+Math.imul(dt,qt)|0)+(E>>>13)|0)+(Pi>>>26)|0,Pi&=67108863;var ki=($+(x=Math.imul(Ze,Pt))|0)+((8191&(E=(E=Math.imul(Ze,qt))+Math.imul(Ve,Pt)|0))<<13)|0;return $=((M=Math.imul(Ve,qt))+(E>>>13)|0)+(ki>>>26)|0,ki&=67108863,Y[0]=gs,Y[1]=ji,Y[2]=js,Y[3]=Us,Y[4]=hn,Y[5]=ae,Y[6]=we,Y[7]=Ie,Y[8]=Le,Y[9]=at,Y[10]=He,Y[11]=We,Y[12]=oi,Y[13]=Ht,Y[14]=Xt,Y[15]=wt,Y[16]=Di,Y[17]=Pi,Y[18]=ki,$!==0&&(Y[19]=$,S.length++),S};function T(_,w,S){S.negative=w.negative^_.negative,S.length=_.length+w.length;for(var x=0,E=0,M=0;M<S.length-1;M++){var O=E;E=0;for(var V=67108863&x,Y=Math.min(M,w.length-1),$=Math.max(0,M-_.length+1);$<=Y;$++){var J=M-$,G=(0|_.words[J])*(0|w.words[$]),Z=67108863&G;V=67108863&(Z=Z+V|0),E+=(O=(O=O+(G/67108864|0)|0)+(Z>>>26)|0)>>>26,O&=67108863}S.words[M]=V,x=O,O=E}return x!==0?S.words[M]=x:S.length--,S._strip()}function A(_,w,S){return T(_,w,S)}Math.imul||(b=C),c.prototype.mulTo=function(_,w){var S=this.length+_.length;return this.length===10&&_.length===10?b(this,_,w):S<63?C(this,_,w):S<1024?T(this,_,w):A(this,_,w)},c.prototype.mul=function(_){var w=new c(null);return w.words=new Array(this.length+_.length),this.mulTo(_,w)},c.prototype.mulf=function(_){var w=new c(null);return w.words=new Array(this.length+_.length),A(this,_,w)},c.prototype.imul=function(_){return this.clone().mulTo(_,this)},c.prototype.imuln=function(_){var w=_<0;w&&(_=-_),a(typeof _=="number"),a(_<67108864);for(var S=0,x=0;x<this.length;x++){var E=(0|this.words[x])*_,M=(67108863&E)+(67108863&S);S>>=26,S+=E/67108864|0,S+=M>>>26,this.words[x]=67108863&M}return S!==0&&(this.words[x]=S,this.length++),w?this.ineg():this},c.prototype.muln=function(_){return this.clone().imuln(_)},c.prototype.sqr=function(){return this.mul(this)},c.prototype.isqr=function(){return this.imul(this.clone())},c.prototype.pow=function(_){var w=function(M){for(var O=new Array(M.bitLength()),V=0;V<O.length;V++){var Y=V/26|0,$=V%26;O[V]=M.words[Y]>>>$&1}return O}(_);if(w.length===0)return new c(1);for(var S=this,x=0;x<w.length&&w[x]===0;x++,S=S.sqr());if(++x<w.length)for(var E=S.sqr();x<w.length;x++,E=E.sqr())w[x]!==0&&(S=S.mul(E));return S},c.prototype.iushln=function(_){a(typeof _=="number"&&_>=0);var w,S=_%26,x=(_-S)/26,E=67108863>>>26-S<<26-S;if(S!==0){var M=0;for(w=0;w<this.length;w++){var O=this.words[w]&E,V=(0|this.words[w])-O<<S;this.words[w]=V|M,M=O>>>26-S}M&&(this.words[w]=M,this.length++)}if(x!==0){for(w=this.length-1;w>=0;w--)this.words[w+x]=this.words[w];for(w=0;w<x;w++)this.words[w]=0;this.length+=x}return this._strip()},c.prototype.ishln=function(_){return a(this.negative===0),this.iushln(_)},c.prototype.iushrn=function(_,w,S){var x;a(typeof _=="number"&&_>=0),x=w?(w-w%26)/26:0;var E=_%26,M=Math.min((_-E)/26,this.length),O=67108863^67108863>>>E<<E,V=S;if(x-=M,x=Math.max(0,x),V){for(var Y=0;Y<M;Y++)V.words[Y]=this.words[Y];V.length=M}if(M!==0)if(this.length>M)for(this.length-=M,Y=0;Y<this.length;Y++)this.words[Y]=this.words[Y+M];else this.words[0]=0,this.length=1;var $=0;for(Y=this.length-1;Y>=0&&($!==0||Y>=x);Y--){var J=0|this.words[Y];this.words[Y]=$<<26-E|J>>>E,$=J&O}return V&&$!==0&&(V.words[V.length++]=$),this.length===0&&(this.words[0]=0,this.length=1),this._strip()},c.prototype.ishrn=function(_,w,S){return a(this.negative===0),this.iushrn(_,w,S)},c.prototype.shln=function(_){return this.clone().ishln(_)},c.prototype.ushln=function(_){return this.clone().iushln(_)},c.prototype.shrn=function(_){return this.clone().ishrn(_)},c.prototype.ushrn=function(_){return this.clone().iushrn(_)},c.prototype.testn=function(_){a(typeof _=="number"&&_>=0);var w=_%26,S=(_-w)/26,x=1<<w;return!(this.length<=S)&&!!(this.words[S]&x)},c.prototype.imaskn=function(_){a(typeof _=="number"&&_>=0);var w=_%26,S=(_-w)/26;if(a(this.negative===0,"imaskn works only with positive numbers"),this.length<=S)return this;if(w!==0&&S++,this.length=Math.min(S,this.length),w!==0){var x=67108863^67108863>>>w<<w;this.words[this.length-1]&=x}return this._strip()},c.prototype.maskn=function(_){return this.clone().imaskn(_)},c.prototype.iaddn=function(_){return a(typeof _=="number"),a(_<67108864),_<0?this.isubn(-_):this.negative!==0?this.length===1&&(0|this.words[0])<=_?(this.words[0]=_-(0|this.words[0]),this.negative=0,this):(this.negative=0,this.isubn(_),this.negative=1,this):this._iaddn(_)},c.prototype._iaddn=function(_){this.words[0]+=_;for(var w=0;w<this.length&&this.words[w]>=67108864;w++)this.words[w]-=67108864,w===this.length-1?this.words[w+1]=1:this.words[w+1]++;return this.length=Math.max(this.length,w+1),this},c.prototype.isubn=function(_){if(a(typeof _=="number"),a(_<67108864),_<0)return this.iaddn(-_);if(this.negative!==0)return this.negative=0,this.iaddn(_),this.negative=1,this;if(this.words[0]-=_,this.length===1&&this.words[0]<0)this.words[0]=-this.words[0],this.negative=1;else for(var w=0;w<this.length&&this.words[w]<0;w++)this.words[w]+=67108864,this.words[w+1]-=1;return this._strip()},c.prototype.addn=function(_){return this.clone().iaddn(_)},c.prototype.subn=function(_){return this.clone().isubn(_)},c.prototype.iabs=function(){return this.negative=0,this},c.prototype.abs=function(){return this.clone().iabs()},c.prototype._ishlnsubmul=function(_,w,S){var x,E,M=_.length+S;this._expand(M);var O=0;for(x=0;x<_.length;x++){E=(0|this.words[x+S])+O;var V=(0|_.words[x])*w;O=((E-=67108863&V)>>26)-(V/67108864|0),this.words[x+S]=67108863&E}for(;x<this.length-S;x++)O=(E=(0|this.words[x+S])+O)>>26,this.words[x+S]=67108863&E;if(O===0)return this._strip();for(a(O===-1),O=0,x=0;x<this.length;x++)O=(E=-(0|this.words[x])+O)>>26,this.words[x]=67108863&E;return this.negative=1,this._strip()},c.prototype._wordDiv=function(_,w){var S=(this.length,_.length),x=this.clone(),E=_,M=0|E.words[E.length-1];(S=26-this._countBits(M))!==0&&(E=E.ushln(S),x.iushln(S),M=0|E.words[E.length-1]);var O,V=x.length-E.length;if(w!=="mod"){(O=new c(null)).length=V+1,O.words=new Array(O.length);for(var Y=0;Y<O.length;Y++)O.words[Y]=0}var $=x.clone()._ishlnsubmul(E,1,V);$.negative===0&&(x=$,O&&(O.words[V]=1));for(var J=V-1;J>=0;J--){var G=67108864*(0|x.words[E.length+J])+(0|x.words[E.length+J-1]);for(G=Math.min(G/M|0,67108863),x._ishlnsubmul(E,G,J);x.negative!==0;)G--,x.negative=0,x._ishlnsubmul(E,1,J),x.isZero()||(x.negative^=1);O&&(O.words[J]=G)}return O&&O._strip(),x._strip(),w!=="div"&&S!==0&&x.iushrn(S),{div:O||null,mod:x}},c.prototype.divmod=function(_,w,S){return a(!_.isZero()),this.isZero()?{div:new c(0),mod:new c(0)}:this.negative!==0&&_.negative===0?(M=this.neg().divmod(_,w),w!=="mod"&&(x=M.div.neg()),w!=="div"&&(E=M.mod.neg(),S&&E.negative!==0&&E.iadd(_)),{div:x,mod:E}):this.negative===0&&_.negative!==0?(M=this.divmod(_.neg(),w),w!=="mod"&&(x=M.div.neg()),{div:x,mod:M.mod}):this.negative&_.negative?(M=this.neg().divmod(_.neg(),w),w!=="div"&&(E=M.mod.neg(),S&&E.negative!==0&&E.isub(_)),{div:M.div,mod:E}):_.length>this.length||this.cmp(_)<0?{div:new c(0),mod:this}:_.length===1?w==="div"?{div:this.divn(_.words[0]),mod:null}:w==="mod"?{div:null,mod:new c(this.modrn(_.words[0]))}:{div:this.divn(_.words[0]),mod:new c(this.modrn(_.words[0]))}:this._wordDiv(_,w);var x,E,M},c.prototype.div=function(_){return this.divmod(_,"div",!1).div},c.prototype.mod=function(_){return this.divmod(_,"mod",!1).mod},c.prototype.umod=function(_){return this.divmod(_,"mod",!0).mod},c.prototype.divRound=function(_){var w=this.divmod(_);if(w.mod.isZero())return w.div;var S=w.div.negative!==0?w.mod.isub(_):w.mod,x=_.ushrn(1),E=_.andln(1),M=S.cmp(x);return M<0||E===1&&M===0?w.div:w.div.negative!==0?w.div.isubn(1):w.div.iaddn(1)},c.prototype.modrn=function(_){var w=_<0;w&&(_=-_),a(_<=67108863);for(var S=(1<<26)%_,x=0,E=this.length-1;E>=0;E--)x=(S*x+(0|this.words[E]))%_;return w?-x:x},c.prototype.modn=function(_){return this.modrn(_)},c.prototype.idivn=function(_){var w=_<0;w&&(_=-_),a(_<=67108863);for(var S=0,x=this.length-1;x>=0;x--){var E=(0|this.words[x])+67108864*S;this.words[x]=E/_|0,S=E%_}return this._strip(),w?this.ineg():this},c.prototype.divn=function(_){return this.clone().idivn(_)},c.prototype.egcd=function(_){a(_.negative===0),a(!_.isZero());var w=this,S=_.clone();w=w.negative!==0?w.umod(_):w.clone();for(var x=new c(1),E=new c(0),M=new c(0),O=new c(1),V=0;w.isEven()&&S.isEven();)w.iushrn(1),S.iushrn(1),++V;for(var Y=S.clone(),$=w.clone();!w.isZero();){for(var J=0,G=1;!(w.words[0]&G)&&J<26;++J,G<<=1);if(J>0)for(w.iushrn(J);J-- >0;)(x.isOdd()||E.isOdd())&&(x.iadd(Y),E.isub($)),x.iushrn(1),E.iushrn(1);for(var Z=0,N=1;!(S.words[0]&N)&&Z<26;++Z,N<<=1);if(Z>0)for(S.iushrn(Z);Z-- >0;)(M.isOdd()||O.isOdd())&&(M.iadd(Y),O.isub($)),M.iushrn(1),O.iushrn(1);w.cmp(S)>=0?(w.isub(S),x.isub(M),E.isub(O)):(S.isub(w),M.isub(x),O.isub(E))}return{a:M,b:O,gcd:S.iushln(V)}},c.prototype._invmp=function(_){a(_.negative===0),a(!_.isZero());var w=this,S=_.clone();w=w.negative!==0?w.umod(_):w.clone();for(var x,E=new c(1),M=new c(0),O=S.clone();w.cmpn(1)>0&&S.cmpn(1)>0;){for(var V=0,Y=1;!(w.words[0]&Y)&&V<26;++V,Y<<=1);if(V>0)for(w.iushrn(V);V-- >0;)E.isOdd()&&E.iadd(O),E.iushrn(1);for(var $=0,J=1;!(S.words[0]&J)&&$<26;++$,J<<=1);if($>0)for(S.iushrn($);$-- >0;)M.isOdd()&&M.iadd(O),M.iushrn(1);w.cmp(S)>=0?(w.isub(S),E.isub(M)):(S.isub(w),M.isub(E))}return(x=w.cmpn(1)===0?E:M).cmpn(0)<0&&x.iadd(_),x},c.prototype.gcd=function(_){if(this.isZero())return _.abs();if(_.isZero())return this.abs();var w=this.clone(),S=_.clone();w.negative=0,S.negative=0;for(var x=0;w.isEven()&&S.isEven();x++)w.iushrn(1),S.iushrn(1);for(;;){for(;w.isEven();)w.iushrn(1);for(;S.isEven();)S.iushrn(1);var E=w.cmp(S);if(E<0){var M=w;w=S,S=M}else if(E===0||S.cmpn(1)===0)break;w.isub(S)}return S.iushln(x)},c.prototype.invm=function(_){return this.egcd(_).a.umod(_)},c.prototype.isEven=function(){return(1&this.words[0])==0},c.prototype.isOdd=function(){return(1&this.words[0])==1},c.prototype.andln=function(_){return this.words[0]&_},c.prototype.bincn=function(_){a(typeof _=="number");var w=_%26,S=(_-w)/26,x=1<<w;if(this.length<=S)return this._expand(S+1),this.words[S]|=x,this;for(var E=x,M=S;E!==0&&M<this.length;M++){var O=0|this.words[M];E=(O+=E)>>>26,O&=67108863,this.words[M]=O}return E!==0&&(this.words[M]=E,this.length++),this},c.prototype.isZero=function(){return this.length===1&&this.words[0]===0},c.prototype.cmpn=function(_){var w,S=_<0;if(this.negative!==0&&!S)return-1;if(this.negative===0&&S)return 1;if(this._strip(),this.length>1)w=1;else{S&&(_=-_),a(_<=67108863,"Number is too big");var x=0|this.words[0];w=x===_?0:x<_?-1:1}return this.negative!==0?0|-w:w},c.prototype.cmp=function(_){if(this.negative!==0&&_.negative===0)return-1;if(this.negative===0&&_.negative!==0)return 1;var w=this.ucmp(_);return this.negative!==0?0|-w:w},c.prototype.ucmp=function(_){if(this.length>_.length)return 1;if(this.length<_.length)return-1;for(var w=0,S=this.length-1;S>=0;S--){var x=0|this.words[S],E=0|_.words[S];if(x!==E){x<E?w=-1:x>E&&(w=1);break}}return w},c.prototype.gtn=function(_){return this.cmpn(_)===1},c.prototype.gt=function(_){return this.cmp(_)===1},c.prototype.gten=function(_){return this.cmpn(_)>=0},c.prototype.gte=function(_){return this.cmp(_)>=0},c.prototype.ltn=function(_){return this.cmpn(_)===-1},c.prototype.lt=function(_){return this.cmp(_)===-1},c.prototype.lten=function(_){return this.cmpn(_)<=0},c.prototype.lte=function(_){return this.cmp(_)<=0},c.prototype.eqn=function(_){return this.cmpn(_)===0},c.prototype.eq=function(_){return this.cmp(_)===0},c.red=function(_){return new R(_)},c.prototype.toRed=function(_){return a(!this.red,"Already a number in reduction context"),a(this.negative===0,"red works only with positives"),_.convertTo(this)._forceRed(_)},c.prototype.fromRed=function(){return a(this.red,"fromRed works only with numbers in reduction context"),this.red.convertFrom(this)},c.prototype._forceRed=function(_){return this.red=_,this},c.prototype.forceRed=function(_){return a(!this.red,"Already a number in reduction context"),this._forceRed(_)},c.prototype.redAdd=function(_){return a(this.red,"redAdd works only with red numbers"),this.red.add(this,_)},c.prototype.redIAdd=function(_){return a(this.red,"redIAdd works only with red numbers"),this.red.iadd(this,_)},c.prototype.redSub=function(_){return a(this.red,"redSub works only with red numbers"),this.red.sub(this,_)},c.prototype.redISub=function(_){return a(this.red,"redISub works only with red numbers"),this.red.isub(this,_)},c.prototype.redShl=function(_){return a(this.red,"redShl works only with red numbers"),this.red.shl(this,_)},c.prototype.redMul=function(_){return a(this.red,"redMul works only with red numbers"),this.red._verify2(this,_),this.red.mul(this,_)},c.prototype.redIMul=function(_){return a(this.red,"redMul works only with red numbers"),this.red._verify2(this,_),this.red.imul(this,_)},c.prototype.redSqr=function(){return a(this.red,"redSqr works only with red numbers"),this.red._verify1(this),this.red.sqr(this)},c.prototype.redISqr=function(){return a(this.red,"redISqr works only with red numbers"),this.red._verify1(this),this.red.isqr(this)},c.prototype.redSqrt=function(){return a(this.red,"redSqrt works only with red numbers"),this.red._verify1(this),this.red.sqrt(this)},c.prototype.redInvm=function(){return a(this.red,"redInvm works only with red numbers"),this.red._verify1(this),this.red.invm(this)},c.prototype.redNeg=function(){return a(this.red,"redNeg works only with red numbers"),this.red._verify1(this),this.red.neg(this)},c.prototype.redPow=function(_){return a(this.red&&!_.red,"redPow(normalNum)"),this.red._verify1(this),this.red.pow(this,_)};var I={k256:null,p224:null,p192:null,p25519:null};function D(_,w){this.name=_,this.p=new c(w,16),this.n=this.p.bitLength(),this.k=new c(1).iushln(this.n).isub(this.p),this.tmp=this._tmp()}function F(){D.call(this,"k256","ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f")}function B(){D.call(this,"p224","ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001")}function U(){D.call(this,"p192","ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff")}function H(){D.call(this,"25519","7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed")}function R(_){if(typeof _=="string"){var w=c._prime(_);this.m=w.p,this.prime=w}else a(_.gtn(1),"modulus must be greater than 1"),this.m=_,this.prime=null}function L(_){R.call(this,_),this.shift=this.m.bitLength(),this.shift%26!=0&&(this.shift+=26-this.shift%26),this.r=new c(1).iushln(this.shift),this.r2=this.imod(this.r.sqr()),this.rinv=this.r._invmp(this.m),this.minv=this.rinv.mul(this.r).isubn(1).div(this.m),this.minv=this.minv.umod(this.r),this.minv=this.r.sub(this.minv)}D.prototype._tmp=function(){var _=new c(null);return _.words=new Array(Math.ceil(this.n/13)),_},D.prototype.ireduce=function(_){var w,S=_;do this.split(S,this.tmp),w=(S=(S=this.imulK(S)).iadd(this.tmp)).bitLength();while(w>this.n);var x=w<this.n?-1:S.ucmp(this.p);return x===0?(S.words[0]=0,S.length=1):x>0?S.isub(this.p):S.strip!==void 0?S.strip():S._strip(),S},D.prototype.split=function(_,w){_.iushrn(this.n,0,w)},D.prototype.imulK=function(_){return _.imul(this.k)},l(F,D),F.prototype.split=function(_,w){for(var S=Math.min(_.length,9),x=0;x<S;x++)w.words[x]=_.words[x];if(w.length=S,_.length<=9)return _.words[0]=0,void(_.length=1);var E=_.words[9];for(w.words[w.length++]=4194303&E,x=10;x<_.length;x++){var M=0|_.words[x];_.words[x-10]=(4194303&M)<<4|E>>>22,E=M}E>>>=22,_.words[x-10]=E,E===0&&_.length>10?_.length-=10:_.length-=9},F.prototype.imulK=function(_){_.words[_.length]=0,_.words[_.length+1]=0,_.length+=2;for(var w=0,S=0;S<_.length;S++){var x=0|_.words[S];w+=977*x,_.words[S]=67108863&w,w=64*x+(w/67108864|0)}return _.words[_.length-1]===0&&(_.length--,_.words[_.length-1]===0&&_.length--),_},l(B,D),l(U,D),l(H,D),H.prototype.imulK=function(_){for(var w=0,S=0;S<_.length;S++){var x=19*(0|_.words[S])+w,E=67108863&x;x>>>=26,_.words[S]=E,w=x}return w!==0&&(_.words[_.length++]=w),_},c._prime=function(_){if(I[_])return I[_];var w;if(_==="k256")w=new F;else if(_==="p224")w=new B;else if(_==="p192")w=new U;else{if(_!=="p25519")throw new Error("Unknown prime "+_);w=new H}return I[_]=w,w},R.prototype._verify1=function(_){a(_.negative===0,"red works only with positives"),a(_.red,"red works only with red numbers")},R.prototype._verify2=function(_,w){a((_.negative|w.negative)==0,"red works only with positives"),a(_.red&&_.red===w.red,"red works only with red numbers")},R.prototype.imod=function(_){return this.prime?this.prime.ireduce(_)._forceRed(this):(f(_,_.umod(this.m)._forceRed(this)),_)},R.prototype.neg=function(_){return _.isZero()?_.clone():this.m.sub(_)._forceRed(this)},R.prototype.add=function(_,w){this._verify2(_,w);var S=_.add(w);return S.cmp(this.m)>=0&&S.isub(this.m),S._forceRed(this)},R.prototype.iadd=function(_,w){this._verify2(_,w);var S=_.iadd(w);return S.cmp(this.m)>=0&&S.isub(this.m),S},R.prototype.sub=function(_,w){this._verify2(_,w);var S=_.sub(w);return S.cmpn(0)<0&&S.iadd(this.m),S._forceRed(this)},R.prototype.isub=function(_,w){this._verify2(_,w);var S=_.isub(w);return S.cmpn(0)<0&&S.iadd(this.m),S},R.prototype.shl=function(_,w){return this._verify1(_),this.imod(_.ushln(w))},R.prototype.imul=function(_,w){return this._verify2(_,w),this.imod(_.imul(w))},R.prototype.mul=function(_,w){return this._verify2(_,w),this.imod(_.mul(w))},R.prototype.isqr=function(_){return this.imul(_,_.clone())},R.prototype.sqr=function(_){return this.mul(_,_)},R.prototype.sqrt=function(_){if(_.isZero())return _.clone();var w=this.m.andln(3);if(a(w%2==1),w===3){var S=this.m.add(new c(1)).iushrn(2);return this.pow(_,S)}for(var x=this.m.subn(1),E=0;!x.isZero()&&x.andln(1)===0;)E++,x.iushrn(1);a(!x.isZero());var M=new c(1).toRed(this),O=M.redNeg(),V=this.m.subn(1).iushrn(1),Y=this.m.bitLength();for(Y=new c(2*Y*Y).toRed(this);this.pow(Y,V).cmp(O)!==0;)Y.redIAdd(O);for(var $=this.pow(Y,x),J=this.pow(_,x.addn(1).iushrn(1)),G=this.pow(_,x),Z=E;G.cmp(M)!==0;){for(var N=G,P=0;N.cmp(M)!==0;P++)N=N.redSqr();a(P<Z);var j=this.pow($,new c(1).iushln(Z-P-1));J=J.redMul(j),$=j.redSqr(),G=G.redMul($),Z=P}return J},R.prototype.invm=function(_){var w=_._invmp(this.m);return w.negative!==0?(w.negative=0,this.imod(w).redNeg()):this.imod(w)},R.prototype.pow=function(_,w){if(w.isZero())return new c(1).toRed(this);if(w.cmpn(1)===0)return _.clone();var S=new Array(16);S[0]=new c(1).toRed(this),S[1]=_;for(var x=2;x<S.length;x++)S[x]=this.mul(S[x-1],_);var E=S[0],M=0,O=0,V=w.bitLength()%26;for(V===0&&(V=26),x=w.length-1;x>=0;x--){for(var Y=w.words[x],$=V-1;$>=0;$--){var J=Y>>$&1;E!==S[0]&&(E=this.sqr(E)),J!==0||M!==0?(M<<=1,M|=J,(++O===4||x===0&&$===0)&&(E=this.mul(E,S[M]),O=0,M=0)):O=0}V=26}return E},R.prototype.convertTo=function(_){var w=_.umod(this.m);return w===_?w.clone():w},R.prototype.convertFrom=function(_){var w=_.clone();return w.red=null,w},c.mont=function(_){return new L(_)},l(L,R),L.prototype.convertTo=function(_){return this.imod(_.ushln(this.shift))},L.prototype.convertFrom=function(_){var w=this.imod(_.mul(this.rinv));return w.red=null,w},L.prototype.imul=function(_,w){if(_.isZero()||w.isZero())return _.words[0]=0,_.length=1,_;var S=_.imul(w),x=S.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),E=S.isub(x).iushrn(this.shift),M=E;return E.cmp(this.m)>=0?M=E.isub(this.m):E.cmpn(0)<0&&(M=E.iadd(this.m)),M._forceRed(this)},L.prototype.mul=function(_,w){if(_.isZero()||w.isZero())return new c(0)._forceRed(this);var S=_.mul(w),x=S.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),E=S.isub(x).iushrn(this.shift),M=E;return E.cmp(this.m)>=0?M=E.isub(this.m):E.cmpn(0)<0&&(M=E.iadd(this.m)),M._forceRed(this)},L.prototype.invm=function(_){return this.imod(_._invmp(this.m).mul(this.r2))._forceRed(this)}})(s===void 0||s)},{buffer:188}],187:[function(i,s,r){var n;function o(l){this.rand=l}if(s.exports=function(l){return n||(n=new o(null)),n.generate(l)},s.exports.Rand=o,o.prototype.generate=function(l){return this._rand(l)},o.prototype._rand=function(l){if(this.rand.getBytes)return this.rand.getBytes(l);for(var c=new Uint8Array(l),u=0;u<c.length;u++)c[u]=this.rand.getByte();return c},typeof self=="object")self.crypto&&self.crypto.getRandomValues?o.prototype._rand=function(l){var c=new Uint8Array(l);return self.crypto.getRandomValues(c),c}:self.msCrypto&&self.msCrypto.getRandomValues?o.prototype._rand=function(l){var c=new Uint8Array(l);return self.msCrypto.getRandomValues(c),c}:typeof window=="object"&&(o.prototype._rand=function(){throw new Error("Not implemented yet")});else try{var a=i("crypto");if(typeof a.randomBytes!="function")throw new Error("Not supported");o.prototype._rand=function(l){return a.randomBytes(l)}}catch{}},{crypto:188}],188:[function(i,s,r){},{}],189:[function(i,s,r){var n=i("safe-buffer").Buffer;function o(h){n.isBuffer(h)||(h=n.from(h));for(var p=h.length/4|0,f=new Array(p),m=0;m<p;m++)f[m]=h.readUInt32BE(4*m);return f}function a(h){for(;0<h.length;h++)h[0]=0}function l(h,p,f,m,g){for(var y,v,C,b,T=f[0],A=f[1],I=f[2],D=f[3],F=h[0]^p[0],B=h[1]^p[1],U=h[2]^p[2],H=h[3]^p[3],R=4,L=1;L<g;L++)y=T[F>>>24]^A[B>>>16&255]^I[U>>>8&255]^D[255&H]^p[R++],v=T[B>>>24]^A[U>>>16&255]^I[H>>>8&255]^D[255&F]^p[R++],C=T[U>>>24]^A[H>>>16&255]^I[F>>>8&255]^D[255&B]^p[R++],b=T[H>>>24]^A[F>>>16&255]^I[B>>>8&255]^D[255&U]^p[R++],F=y,B=v,U=C,H=b;return y=(m[F>>>24]<<24|m[B>>>16&255]<<16|m[U>>>8&255]<<8|m[255&H])^p[R++],v=(m[B>>>24]<<24|m[U>>>16&255]<<16|m[H>>>8&255]<<8|m[255&F])^p[R++],C=(m[U>>>24]<<24|m[H>>>16&255]<<16|m[F>>>8&255]<<8|m[255&B])^p[R++],b=(m[H>>>24]<<24|m[F>>>16&255]<<16|m[B>>>8&255]<<8|m[255&U])^p[R++],[y>>>=0,v>>>=0,C>>>=0,b>>>=0]}var c=[0,1,2,4,8,16,32,64,128,27,54],u=function(){for(var h=new Array(256),p=0;p<256;p++)h[p]=p<128?p<<1:p<<1^283;for(var f=[],m=[],g=[[],[],[],[]],y=[[],[],[],[]],v=0,C=0,b=0;b<256;++b){var T=C^C<<1^C<<2^C<<3^C<<4;T=T>>>8^255&T^99,f[v]=T,m[T]=v;var A=h[v],I=h[A],D=h[I],F=257*h[T]^16843008*T;g[0][v]=F<<24|F>>>8,g[1][v]=F<<16|F>>>16,g[2][v]=F<<8|F>>>24,g[3][v]=F,F=16843009*D^65537*I^257*A^16843008*v,y[0][T]=F<<24|F>>>8,y[1][T]=F<<16|F>>>16,y[2][T]=F<<8|F>>>24,y[3][T]=F,v===0?v=C=1:(v=A^h[h[h[D^A]]],C^=h[h[C]])}return{SBOX:f,INV_SBOX:m,SUB_MIX:g,INV_SUB_MIX:y}}();function d(h){this._key=o(h),this._reset()}d.blockSize=16,d.keySize=32,d.prototype.blockSize=d.blockSize,d.prototype.keySize=d.keySize,d.prototype._reset=function(){for(var h=this._key,p=h.length,f=p+6,m=4*(f+1),g=[],y=0;y<p;y++)g[y]=h[y];for(y=p;y<m;y++){var v=g[y-1];y%p==0?(v=v<<8|v>>>24,v=u.SBOX[v>>>24]<<24|u.SBOX[v>>>16&255]<<16|u.SBOX[v>>>8&255]<<8|u.SBOX[255&v],v^=c[y/p|0]<<24):p>6&&y%p==4&&(v=u.SBOX[v>>>24]<<24|u.SBOX[v>>>16&255]<<16|u.SBOX[v>>>8&255]<<8|u.SBOX[255&v]),g[y]=g[y-p]^v}for(var C=[],b=0;b<m;b++){var T=m-b,A=g[T-(b%4?0:4)];C[b]=b<4||T<=4?A:u.INV_SUB_MIX[0][u.SBOX[A>>>24]]^u.INV_SUB_MIX[1][u.SBOX[A>>>16&255]]^u.INV_SUB_MIX[2][u.SBOX[A>>>8&255]]^u.INV_SUB_MIX[3][u.SBOX[255&A]]}this._nRounds=f,this._keySchedule=g,this._invKeySchedule=C},d.prototype.encryptBlockRaw=function(h){return l(h=o(h),this._keySchedule,u.SUB_MIX,u.SBOX,this._nRounds)},d.prototype.encryptBlock=function(h){var p=this.encryptBlockRaw(h),f=n.allocUnsafe(16);return f.writeUInt32BE(p[0],0),f.writeUInt32BE(p[1],4),f.writeUInt32BE(p[2],8),f.writeUInt32BE(p[3],12),f},d.prototype.decryptBlock=function(h){var p=(h=o(h))[1];h[1]=h[3],h[3]=p;var f=l(h,this._invKeySchedule,u.INV_SUB_MIX,u.INV_SBOX,this._nRounds),m=n.allocUnsafe(16);return m.writeUInt32BE(f[0],0),m.writeUInt32BE(f[3],4),m.writeUInt32BE(f[2],8),m.writeUInt32BE(f[1],12),m},d.prototype.scrub=function(){a(this._keySchedule),a(this._invKeySchedule),a(this._key)},s.exports.AES=d},{"safe-buffer":494}],190:[function(i,s,r){var n=i("./aes"),o=i("safe-buffer").Buffer,a=i("cipher-base"),l=i("inherits"),c=i("./ghash"),u=i("buffer-xor"),d=i("./incr32");function h(p,f,m,g){a.call(this);var y=o.alloc(4,0);this._cipher=new n.AES(f);var v=this._cipher.encryptBlock(y);this._ghash=new c(v),m=function(C,b,T){if(b.length===12)return C._finID=o.concat([b,o.from([0,0,0,1])]),o.concat([b,o.from([0,0,0,2])]);var A=new c(T),I=b.length,D=I%16;A.update(b),D&&(D=16-D,A.update(o.alloc(D,0))),A.update(o.alloc(8,0));var F=8*I,B=o.alloc(8);B.writeUIntBE(F,0,8),A.update(B),C._finID=A.state;var U=o.from(C._finID);return d(U),U}(this,m,v),this._prev=o.from(m),this._cache=o.allocUnsafe(0),this._secCache=o.allocUnsafe(0),this._decrypt=g,this._alen=0,this._len=0,this._mode=p,this._authTag=null,this._called=!1}l(h,a),h.prototype._update=function(p){if(!this._called&&this._alen){var f=16-this._alen%16;f<16&&(f=o.alloc(f,0),this._ghash.update(f))}this._called=!0;var m=this._mode.encrypt(this,p);return this._decrypt?this._ghash.update(p):this._ghash.update(m),this._len+=p.length,m},h.prototype._final=function(){if(this._decrypt&&!this._authTag)throw new Error("Unsupported state or unable to authenticate data");var p=u(this._ghash.final(8*this._alen,8*this._len),this._cipher.encryptBlock(this._finID));if(this._decrypt&&function(f,m){var g=0;f.length!==m.length&&g++;for(var y=Math.min(f.length,m.length),v=0;v<y;++v)g+=f[v]^m[v];return g}(p,this._authTag))throw new Error("Unsupported state or unable to authenticate data");this._authTag=p,this._cipher.scrub()},h.prototype.getAuthTag=function(){if(this._decrypt||!o.isBuffer(this._authTag))throw new Error("Attempting to get auth tag in unsupported state");return this._authTag},h.prototype.setAuthTag=function(p){if(!this._decrypt)throw new Error("Attempting to set auth tag in unsupported state");this._authTag=p},h.prototype.setAAD=function(p){if(this._called)throw new Error("Attempting to set AAD in unsupported state");this._ghash.update(p),this._alen+=p.length},s.exports=h},{"./aes":189,"./ghash":194,"./incr32":195,"buffer-xor":219,"cipher-base":221,inherits:440,"safe-buffer":494}],191:[function(i,s,r){var n=i("./encrypter"),o=i("./decrypter"),a=i("./modes/list.json");r.createCipher=r.Cipher=n.createCipher,r.createCipheriv=r.Cipheriv=n.createCipheriv,r.createDecipher=r.Decipher=o.createDecipher,r.createDecipheriv=r.Decipheriv=o.createDecipheriv,r.listCiphers=r.getCiphers=function(){return Object.keys(a)}},{"./decrypter":192,"./encrypter":193,"./modes/list.json":203}],192:[function(i,s,r){var n=i("./authCipher"),o=i("safe-buffer").Buffer,a=i("./modes"),l=i("./streamCipher"),c=i("cipher-base"),u=i("./aes"),d=i("evp_bytestokey");function h(m,g,y){c.call(this),this._cache=new p,this._last=void 0,this._cipher=new u.AES(g),this._prev=o.from(y),this._mode=m,this._autopadding=!0}function p(){this.cache=o.allocUnsafe(0)}function f(m,g,y){var v=a[m.toLowerCase()];if(!v)throw new TypeError("invalid suite type");if(typeof y=="string"&&(y=o.from(y)),v.mode!=="GCM"&&y.length!==v.iv)throw new TypeError("invalid iv length "+y.length);if(typeof g=="string"&&(g=o.from(g)),g.length!==v.key/8)throw new TypeError("invalid key length "+g.length);return v.type==="stream"?new l(v.module,g,y,!0):v.type==="auth"?new n(v.module,g,y,!0):new h(v.module,g,y)}i("inherits")(h,c),h.prototype._update=function(m){var g,y;this._cache.add(m);for(var v=[];g=this._cache.get(this._autopadding);)y=this._mode.decrypt(this,g),v.push(y);return o.concat(v)},h.prototype._final=function(){var m=this._cache.flush();if(this._autopadding)return function(g){var y=g[15];if(y<1||y>16)throw new Error("unable to decrypt data");for(var v=-1;++v<y;)if(g[v+(16-y)]!==y)throw new Error("unable to decrypt data");if(y!==16)return g.slice(0,16-y)}(this._mode.decrypt(this,m));if(m)throw new Error("data not multiple of block length")},h.prototype.setAutoPadding=function(m){return this._autopadding=!!m,this},p.prototype.add=function(m){this.cache=o.concat([this.cache,m])},p.prototype.get=function(m){var g;if(m){if(this.cache.length>16)return g=this.cache.slice(0,16),this.cache=this.cache.slice(16),g}else if(this.cache.length>=16)return g=this.cache.slice(0,16),this.cache=this.cache.slice(16),g;return null},p.prototype.flush=function(){if(this.cache.length)return this.cache},r.createDecipher=function(m,g){var y=a[m.toLowerCase()];if(!y)throw new TypeError("invalid suite type");var v=d(g,!1,y.key,y.iv);return f(m,v.key,v.iv)},r.createDecipheriv=f},{"./aes":189,"./authCipher":190,"./modes":202,"./streamCipher":205,"cipher-base":221,evp_bytestokey:423,inherits:440,"safe-buffer":494}],193:[function(i,s,r){var n=i("./modes"),o=i("./authCipher"),a=i("safe-buffer").Buffer,l=i("./streamCipher"),c=i("cipher-base"),u=i("./aes"),d=i("evp_bytestokey");function h(g,y,v){c.call(this),this._cache=new f,this._cipher=new u.AES(y),this._prev=a.from(v),this._mode=g,this._autopadding=!0}i("inherits")(h,c),h.prototype._update=function(g){var y,v;this._cache.add(g);for(var C=[];y=this._cache.get();)v=this._mode.encrypt(this,y),C.push(v);return a.concat(C)};var p=a.alloc(16,16);function f(){this.cache=a.allocUnsafe(0)}function m(g,y,v){var C=n[g.toLowerCase()];if(!C)throw new TypeError("invalid suite type");if(typeof y=="string"&&(y=a.from(y)),y.length!==C.key/8)throw new TypeError("invalid key length "+y.length);if(typeof v=="string"&&(v=a.from(v)),C.mode!=="GCM"&&v.length!==C.iv)throw new TypeError("invalid iv length "+v.length);return C.type==="stream"?new l(C.module,y,v):C.type==="auth"?new o(C.module,y,v):new h(C.module,y,v)}h.prototype._final=function(){var g=this._cache.flush();if(this._autopadding)return g=this._mode.encrypt(this,g),this._cipher.scrub(),g;if(!g.equals(p))throw this._cipher.scrub(),new Error("data not multiple of block length")},h.prototype.setAutoPadding=function(g){return this._autopadding=!!g,this},f.prototype.add=function(g){this.cache=a.concat([this.cache,g])},f.prototype.get=function(){if(this.cache.length>15){var g=this.cache.slice(0,16);return this.cache=this.cache.slice(16),g}return null},f.prototype.flush=function(){for(var g=16-this.cache.length,y=a.allocUnsafe(g),v=-1;++v<g;)y.writeUInt8(g,v);return a.concat([this.cache,y])},r.createCipheriv=m,r.createCipher=function(g,y){var v=n[g.toLowerCase()];if(!v)throw new TypeError("invalid suite type");var C=d(y,!1,v.key,v.iv);return m(g,C.key,C.iv)}},{"./aes":189,"./authCipher":190,"./modes":202,"./streamCipher":205,"cipher-base":221,evp_bytestokey:423,inherits:440,"safe-buffer":494}],194:[function(i,s,r){var n=i("safe-buffer").Buffer,o=n.alloc(16,0);function a(c){var u=n.allocUnsafe(16);return u.writeUInt32BE(c[0]>>>0,0),u.writeUInt32BE(c[1]>>>0,4),u.writeUInt32BE(c[2]>>>0,8),u.writeUInt32BE(c[3]>>>0,12),u}function l(c){this.h=c,this.state=n.alloc(16,0),this.cache=n.allocUnsafe(0)}l.prototype.ghash=function(c){for(var u=-1;++u<c.length;)this.state[u]^=c[u];this._multiply()},l.prototype._multiply=function(){for(var c,u,d,h=[(c=this.h).readUInt32BE(0),c.readUInt32BE(4),c.readUInt32BE(8),c.readUInt32BE(12)],p=[0,0,0,0],f=-1;++f<128;){for(this.state[~~(f/8)]&1<<7-f%8&&(p[0]^=h[0],p[1]^=h[1],p[2]^=h[2],p[3]^=h[3]),d=(1&h[3])!=0,u=3;u>0;u--)h[u]=h[u]>>>1|(1&h[u-1])<<31;h[0]=h[0]>>>1,d&&(h[0]=h[0]^225<<24)}this.state=a(p)},l.prototype.update=function(c){var u;for(this.cache=n.concat([this.cache,c]);this.cache.length>=16;)u=this.cache.slice(0,16),this.cache=this.cache.slice(16),this.ghash(u)},l.prototype.final=function(c,u){return this.cache.length&&this.ghash(n.concat([this.cache,o],16)),this.ghash(a([0,c,0,u])),this.state},s.exports=l},{"safe-buffer":494}],195:[function(i,s,r){s.exports=function(n){for(var o,a=n.length;a--;){if((o=n.readUInt8(a))!==255){o++,n.writeUInt8(o,a);break}n.writeUInt8(0,a)}}},{}],196:[function(i,s,r){var n=i("buffer-xor");r.encrypt=function(o,a){var l=n(a,o._prev);return o._prev=o._cipher.encryptBlock(l),o._prev},r.decrypt=function(o,a){var l=o._prev;o._prev=a;var c=o._cipher.decryptBlock(a);return n(c,l)}},{"buffer-xor":219}],197:[function(i,s,r){var n=i("safe-buffer").Buffer,o=i("buffer-xor");function a(l,c,u){var d=c.length,h=o(c,l._cache);return l._cache=l._cache.slice(d),l._prev=n.concat([l._prev,u?c:h]),h}r.encrypt=function(l,c,u){for(var d,h=n.allocUnsafe(0);c.length;){if(l._cache.length===0&&(l._cache=l._cipher.encryptBlock(l._prev),l._prev=n.allocUnsafe(0)),!(l._cache.length<=c.length)){h=n.concat([h,a(l,c,u)]);break}d=l._cache.length,h=n.concat([h,a(l,c.slice(0,d),u)]),c=c.slice(d)}return h}},{"buffer-xor":219,"safe-buffer":494}],198:[function(i,s,r){var n=i("safe-buffer").Buffer;function o(l,c,u){for(var d,h,p=-1,f=0;++p<8;)d=c&1<<7-p?128:0,f+=(128&(h=l._cipher.encryptBlock(l._prev)[0]^d))>>p%8,l._prev=a(l._prev,u?d:h);return f}function a(l,c){var u=l.length,d=-1,h=n.allocUnsafe(l.length);for(l=n.concat([l,n.from([c])]);++d<u;)h[d]=l[d]<<1|l[d+1]>>7;return h}r.encrypt=function(l,c,u){for(var d=c.length,h=n.allocUnsafe(d),p=-1;++p<d;)h[p]=o(l,c[p],u);return h}},{"safe-buffer":494}],199:[function(i,s,r){var n=i("safe-buffer").Buffer;function o(a,l,c){var u=a._cipher.encryptBlock(a._prev)[0]^l;return a._prev=n.concat([a._prev.slice(1),n.from([c?l:u])]),u}r.encrypt=function(a,l,c){for(var u=l.length,d=n.allocUnsafe(u),h=-1;++h<u;)d[h]=o(a,l[h],c);return d}},{"safe-buffer":494}],200:[function(i,s,r){var n=i("buffer-xor"),o=i("safe-buffer").Buffer,a=i("../incr32");function l(c){var u=c._cipher.encryptBlockRaw(c._prev);return a(c._prev),u}r.encrypt=function(c,u){var d=Math.ceil(u.length/16),h=c._cache.length;c._cache=o.concat([c._cache,o.allocUnsafe(16*d)]);for(var p=0;p<d;p++){var f=l(c),m=h+16*p;c._cache.writeUInt32BE(f[0],m+0),c._cache.writeUInt32BE(f[1],m+4),c._cache.writeUInt32BE(f[2],m+8),c._cache.writeUInt32BE(f[3],m+12)}var g=c._cache.slice(0,u.length);return c._cache=c._cache.slice(u.length),n(u,g)}},{"../incr32":195,"buffer-xor":219,"safe-buffer":494}],201:[function(i,s,r){r.encrypt=function(n,o){return n._cipher.encryptBlock(o)},r.decrypt=function(n,o){return n._cipher.decryptBlock(o)}},{}],202:[function(i,s,r){var n={ECB:i("./ecb"),CBC:i("./cbc"),CFB:i("./cfb"),CFB8:i("./cfb8"),CFB1:i("./cfb1"),OFB:i("./ofb"),CTR:i("./ctr"),GCM:i("./ctr")},o=i("./list.json");for(var a in o)o[a].module=n[o[a].mode];s.exports=o},{"./cbc":196,"./cfb":197,"./cfb1":198,"./cfb8":199,"./ctr":200,"./ecb":201,"./list.json":203,"./ofb":204}],203:[function(i,s,r){s.exports={"aes-128-ecb":{cipher:"AES",key:128,iv:0,mode:"ECB",type:"block"},"aes-192-ecb":{cipher:"AES",key:192,iv:0,mode:"ECB",type:"block"},"aes-256-ecb":{cipher:"AES",key:256,iv:0,mode:"ECB",type:"block"},"aes-128-cbc":{cipher:"AES",key:128,iv:16,mode:"CBC",type:"block"},"aes-192-cbc":{cipher:"AES",key:192,iv:16,mode:"CBC",type:"block"},"aes-256-cbc":{cipher:"AES",key:256,iv:16,mode:"CBC",type:"block"},aes128:{cipher:"AES",key:128,iv:16,mode:"CBC",type:"block"},aes192:{cipher:"AES",key:192,iv:16,mode:"CBC",type:"block"},aes256:{cipher:"AES",key:256,iv:16,mode:"CBC",type:"block"},"aes-128-cfb":{cipher:"AES",key:128,iv:16,mode:"CFB",type:"stream"},"aes-192-cfb":{cipher:"AES",key:192,iv:16,mode:"CFB",type:"stream"},"aes-256-cfb":{cipher:"AES",key:256,iv:16,mode:"CFB",type:"stream"},"aes-128-cfb8":{cipher:"AES",key:128,iv:16,mode:"CFB8",type:"stream"},"aes-192-cfb8":{cipher:"AES",key:192,iv:16,mode:"CFB8",type:"stream"},"aes-256-cfb8":{cipher:"AES",key:256,iv:16,mode:"CFB8",type:"stream"},"aes-128-cfb1":{cipher:"AES",key:128,iv:16,mode:"CFB1",type:"stream"},"aes-192-cfb1":{cipher:"AES",key:192,iv:16,mode:"CFB1",type:"stream"},"aes-256-cfb1":{cipher:"AES",key:256,iv:16,mode:"CFB1",type:"stream"},"aes-128-ofb":{cipher:"AES",key:128,iv:16,mode:"OFB",type:"stream"},"aes-192-ofb":{cipher:"AES",key:192,iv:16,mode:"OFB",type:"stream"},"aes-256-ofb":{cipher:"AES",key:256,iv:16,mode:"OFB",type:"stream"},"aes-128-ctr":{cipher:"AES",key:128,iv:16,mode:"CTR",type:"stream"},"aes-192-ctr":{cipher:"AES",key:192,iv:16,mode:"CTR",type:"stream"},"aes-256-ctr":{cipher:"AES",key:256,iv:16,mode:"CTR",type:"stream"},"aes-128-gcm":{cipher:"AES",key:128,iv:12,mode:"GCM",type:"auth"},"aes-192-gcm":{cipher:"AES",key:192,iv:12,mode:"GCM",type:"auth"},"aes-256-gcm":{cipher:"AES",key:256,iv:12,mode:"GCM",type:"auth"}}},{}],204:[function(i,s,r){(function(n){(function(){var o=i("buffer-xor");function a(l){return l._prev=l._cipher.encryptBlock(l._prev),l._prev}r.encrypt=function(l,c){for(;l._cache.length<c.length;)l._cache=n.concat([l._cache,a(l)]);var u=l._cache.slice(0,c.length);return l._cache=l._cache.slice(c.length),o(c,u)}}).call(this)}).call(this,i("buffer").Buffer)},{buffer:220,"buffer-xor":219}],205:[function(i,s,r){var n=i("./aes"),o=i("safe-buffer").Buffer,a=i("cipher-base");function l(c,u,d,h){a.call(this),this._cipher=new n.AES(u),this._prev=o.from(d),this._cache=o.allocUnsafe(0),this._secCache=o.allocUnsafe(0),this._decrypt=h,this._mode=c}i("inherits")(l,a),l.prototype._update=function(c){return this._mode.encrypt(this,c,this._decrypt)},l.prototype._final=function(){this._cipher.scrub()},s.exports=l},{"./aes":189,"cipher-base":221,inherits:440,"safe-buffer":494}],206:[function(i,s,r){var n=i("browserify-des"),o=i("browserify-aes/browser"),a=i("browserify-aes/modes"),l=i("browserify-des/modes"),c=i("evp_bytestokey");function u(h,p,f){if(h=h.toLowerCase(),a[h])return o.createCipheriv(h,p,f);if(l[h])return new n({key:p,iv:f,mode:h});throw new TypeError("invalid suite type")}function d(h,p,f){if(h=h.toLowerCase(),a[h])return o.createDecipheriv(h,p,f);if(l[h])return new n({key:p,iv:f,mode:h,decrypt:!0});throw new TypeError("invalid suite type")}r.createCipher=r.Cipher=function(h,p){var f,m;if(h=h.toLowerCase(),a[h])f=a[h].key,m=a[h].iv;else{if(!l[h])throw new TypeError("invalid suite type");f=8*l[h].key,m=l[h].iv}var g=c(p,!1,f,m);return u(h,g.key,g.iv)},r.createCipheriv=r.Cipheriv=u,r.createDecipher=r.Decipher=function(h,p){var f,m;if(h=h.toLowerCase(),a[h])f=a[h].key,m=a[h].iv;else{if(!l[h])throw new TypeError("invalid suite type");f=8*l[h].key,m=l[h].iv}var g=c(p,!1,f,m);return d(h,g.key,g.iv)},r.createDecipheriv=r.Decipheriv=d,r.listCiphers=r.getCiphers=function(){return Object.keys(l).concat(o.getCiphers())}},{"browserify-aes/browser":191,"browserify-aes/modes":202,"browserify-des":207,"browserify-des/modes":208,evp_bytestokey:423}],207:[function(i,s,r){var n=i("cipher-base"),o=i("des.js"),a=i("inherits"),l=i("safe-buffer").Buffer,c={"des-ede3-cbc":o.CBC.instantiate(o.EDE),"des-ede3":o.EDE,"des-ede-cbc":o.CBC.instantiate(o.EDE),"des-ede":o.EDE,"des-cbc":o.CBC.instantiate(o.DES),"des-ecb":o.DES};function u(d){n.call(this);var h,p=d.mode.toLowerCase(),f=c[p];h=d.decrypt?"decrypt":"encrypt";var m=d.key;l.isBuffer(m)||(m=l.from(m)),p!=="des-ede"&&p!=="des-ede-cbc"||(m=l.concat([m,m.slice(0,8)]));var g=d.iv;l.isBuffer(g)||(g=l.from(g)),this._des=f.create({key:m,iv:g,type:h})}c.des=c["des-cbc"],c.des3=c["des-ede3-cbc"],s.exports=u,a(u,n),u.prototype._update=function(d){return l.from(this._des.update(d))},u.prototype._final=function(){return l.from(this._des.final())}},{"cipher-base":221,"des.js":394,inherits:440,"safe-buffer":494}],208:[function(i,s,r){r["des-ecb"]={key:8,iv:0},r["des-cbc"]=r.des={key:8,iv:8},r["des-ede3-cbc"]=r.des3={key:24,iv:8},r["des-ede3"]={key:24,iv:0},r["des-ede-cbc"]={key:16,iv:8},r["des-ede"]={key:16,iv:0}},{}],209:[function(i,s,r){(function(n){(function(){var o=i("bn.js"),a=i("randombytes");function l(u){var d,h=u.modulus.byteLength();do d=new o(a(h));while(d.cmp(u.modulus)>=0||!d.umod(u.prime1)||!d.umod(u.prime2));return d}function c(u,d){var h=function(I){var D=l(I);return{blinder:D.toRed(o.mont(I.modulus)).redPow(new o(I.publicExponent)).fromRed(),unblinder:D.invm(I.modulus)}}(d),p=d.modulus.byteLength(),f=new o(u).mul(h.blinder).umod(d.modulus),m=f.toRed(o.mont(d.prime1)),g=f.toRed(o.mont(d.prime2)),y=d.coefficient,v=d.prime1,C=d.prime2,b=m.redPow(d.exponent1).fromRed(),T=g.redPow(d.exponent2).fromRed(),A=b.isub(T).imul(y).umod(v).imul(C);return T.iadd(A).imul(h.unblinder).umod(d.modulus).toArrayLike(n,"be",p)}c.getr=l,s.exports=c}).call(this)}).call(this,i("buffer").Buffer)},{"bn.js":186,buffer:220,randombytes:475}],210:[function(i,s,r){s.exports=i("./browser/algorithms.json")},{"./browser/algorithms.json":211}],211:[function(i,s,r){s.exports={sha224WithRSAEncryption:{sign:"rsa",hash:"sha224",id:"302d300d06096086480165030402040500041c"},"RSA-SHA224":{sign:"ecdsa/rsa",hash:"sha224",id:"302d300d06096086480165030402040500041c"},sha256WithRSAEncryption:{sign:"rsa",hash:"sha256",id:"3031300d060960864801650304020105000420"},"RSA-SHA256":{sign:"ecdsa/rsa",hash:"sha256",id:"3031300d060960864801650304020105000420"},sha384WithRSAEncryption:{sign:"rsa",hash:"sha384",id:"3041300d060960864801650304020205000430"},"RSA-SHA384":{sign:"ecdsa/rsa",hash:"sha384",id:"3041300d060960864801650304020205000430"},sha512WithRSAEncryption:{sign:"rsa",hash:"sha512",id:"3051300d060960864801650304020305000440"},"RSA-SHA512":{sign:"ecdsa/rsa",hash:"sha512",id:"3051300d060960864801650304020305000440"},"RSA-SHA1":{sign:"rsa",hash:"sha1",id:"3021300906052b0e03021a05000414"},"ecdsa-with-SHA1":{sign:"ecdsa",hash:"sha1",id:""},sha256:{sign:"ecdsa",hash:"sha256",id:""},sha224:{sign:"ecdsa",hash:"sha224",id:""},sha384:{sign:"ecdsa",hash:"sha384",id:""},sha512:{sign:"ecdsa",hash:"sha512",id:""},"DSA-SHA":{sign:"dsa",hash:"sha1",id:""},"DSA-SHA1":{sign:"dsa",hash:"sha1",id:""},DSA:{sign:"dsa",hash:"sha1",id:""},"DSA-WITH-SHA224":{sign:"dsa",hash:"sha224",id:""},"DSA-SHA224":{sign:"dsa",hash:"sha224",id:""},"DSA-WITH-SHA256":{sign:"dsa",hash:"sha256",id:""},"DSA-SHA256":{sign:"dsa",hash:"sha256",id:""},"DSA-WITH-SHA384":{sign:"dsa",hash:"sha384",id:""},"DSA-SHA384":{sign:"dsa",hash:"sha384",id:""},"DSA-WITH-SHA512":{sign:"dsa",hash:"sha512",id:""},"DSA-SHA512":{sign:"dsa",hash:"sha512",id:""},"DSA-RIPEMD160":{sign:"dsa",hash:"rmd160",id:""},ripemd160WithRSA:{sign:"rsa",hash:"rmd160",id:"3021300906052b2403020105000414"},"RSA-RIPEMD160":{sign:"rsa",hash:"rmd160",id:"3021300906052b2403020105000414"},md5WithRSAEncryption:{sign:"rsa",hash:"md5",id:"3020300c06082a864886f70d020505000410"},"RSA-MD5":{sign:"rsa",hash:"md5",id:"3020300c06082a864886f70d020505000410"}}},{}],212:[function(i,s,r){s.exports={"1.3.132.0.10":"secp256k1","1.3.132.0.33":"p224","1.2.840.10045.3.1.1":"p192","1.2.840.10045.3.1.7":"p256","1.3.132.0.34":"p384","1.3.132.0.35":"p521"}},{}],213:[function(i,s,r){var n=i("safe-buffer").Buffer,o=i("create-hash"),a=i("readable-stream"),l=i("inherits"),c=i("./sign"),u=i("./verify"),d=i("./algorithms.json");function h(g){a.Writable.call(this);var y=d[g];if(!y)throw new Error("Unknown message digest");this._hashType=y.hash,this._hash=o(y.hash),this._tag=y.id,this._signType=y.sign}function p(g){a.Writable.call(this);var y=d[g];if(!y)throw new Error("Unknown message digest");this._hash=o(y.hash),this._tag=y.id,this._signType=y.sign}function f(g){return new h(g)}function m(g){return new p(g)}Object.keys(d).forEach(function(g){d[g].id=n.from(d[g].id,"hex"),d[g.toLowerCase()]=d[g]}),l(h,a.Writable),h.prototype._write=function(g,y,v){this._hash.update(g),v()},h.prototype.update=function(g,y){return typeof g=="string"&&(g=n.from(g,y)),this._hash.update(g),this},h.prototype.sign=function(g,y){this.end();var v=this._hash.digest(),C=c(v,g,this._hashType,this._signType,this._tag);return y?C.toString(y):C},l(p,a.Writable),p.prototype._write=function(g,y,v){this._hash.update(g),v()},p.prototype.update=function(g,y){return typeof g=="string"&&(g=n.from(g,y)),this._hash.update(g),this},p.prototype.verify=function(g,y,v){typeof y=="string"&&(y=n.from(y,v)),this.end();var C=this._hash.digest();return u(y,C,g,this._signType,this._tag)},s.exports={Sign:f,Verify:m,createSign:f,createVerify:m}},{"./algorithms.json":211,"./sign":214,"./verify":215,"create-hash":386,inherits:440,"readable-stream":491,"safe-buffer":494}],214:[function(i,s,r){var n=i("safe-buffer").Buffer,o=i("create-hmac"),a=i("browserify-rsa"),l=i("elliptic").ec,c=i("bn.js"),u=i("parse-asn1"),d=i("./curves.json");function h(g,y,v,C){if((g=n.from(g.toArray())).length<y.byteLength()){var b=n.alloc(y.byteLength()-g.length);g=n.concat([b,g])}var T=v.length,A=function(F,B){F=(F=p(F,B)).mod(B);var U=n.from(F.toArray());if(U.length<B.byteLength()){var H=n.alloc(B.byteLength()-U.length);U=n.concat([H,U])}return U}(v,y),I=n.alloc(T);I.fill(1);var D=n.alloc(T);return D=o(C,D).update(I).update(n.from([0])).update(g).update(A).digest(),I=o(C,D).update(I).digest(),{k:D=o(C,D).update(I).update(n.from([1])).update(g).update(A).digest(),v:I=o(C,D).update(I).digest()}}function p(g,y){var v=new c(g),C=(g.length<<3)-y.bitLength();return C>0&&v.ishrn(C),v}function f(g,y,v){var C,b;do{for(C=n.alloc(0);8*C.length<g.bitLength();)y.v=o(v,y.k).update(y.v).digest(),C=n.concat([C,y.v]);b=p(C,g),y.k=o(v,y.k).update(y.v).update(n.from([0])).digest(),y.v=o(v,y.k).update(y.v).digest()}while(b.cmp(g)!==-1);return b}function m(g,y,v,C){return g.toRed(c.mont(v)).redPow(y).fromRed().mod(C)}s.exports=function(g,y,v,C,b){var T=u(y);if(T.curve){if(C!=="ecdsa"&&C!=="ecdsa/rsa")throw new Error("wrong private key type");return function(F,B){var U=d[B.curve.join(".")];if(!U)throw new Error("unknown curve "+B.curve.join("."));var H=new l(U).keyFromPrivate(B.privateKey).sign(F);return n.from(H.toDER())}(g,T)}if(T.type==="dsa"){if(C!=="dsa")throw new Error("wrong private key type");return function(F,B,U){for(var H,R=B.params.priv_key,L=B.params.p,_=B.params.q,w=B.params.g,S=new c(0),x=p(F,_).mod(_),E=!1,M=h(R,_,F,U);E===!1;)H=f(_,M,U),S=m(w,H,L,_),(E=H.invm(_).imul(x.add(R.mul(S))).mod(_)).cmpn(0)===0&&(E=!1,S=new c(0));return function(O,V){O=O.toArray(),V=V.toArray(),128&O[0]&&(O=[0].concat(O)),128&V[0]&&(V=[0].concat(V));var Y=[48,O.length+V.length+4,2,O.length];return Y=Y.concat(O,[2,V.length],V),n.from(Y)}(S,E)}(g,T,v)}if(C!=="rsa"&&C!=="ecdsa/rsa")throw new Error("wrong private key type");g=n.concat([b,g]);for(var A=T.modulus.byteLength(),I=[0,1];g.length+I.length+1<A;)I.push(255);I.push(0);for(var D=-1;++D<g.length;)I.push(g[D]);return a(I,T)},s.exports.getKey=h,s.exports.makeKey=f},{"./curves.json":212,"bn.js":186,"browserify-rsa":209,"create-hmac":388,elliptic:405,"parse-asn1":459,"safe-buffer":494}],215:[function(i,s,r){var n=i("safe-buffer").Buffer,o=i("bn.js"),a=i("elliptic").ec,l=i("parse-asn1"),c=i("./curves.json");function u(d,h){if(d.cmpn(0)<=0)throw new Error("invalid sig");if(d.cmp(h)>=h)throw new Error("invalid sig")}s.exports=function(d,h,p,f,m){var g=l(p);if(g.type==="ec"){if(f!=="ecdsa"&&f!=="ecdsa/rsa")throw new Error("wrong public key type");return function(I,D,F){var B=c[F.data.algorithm.curve.join(".")];if(!B)throw new Error("unknown curve "+F.data.algorithm.curve.join("."));var U=new a(B),H=F.data.subjectPrivateKey.data;return U.verify(D,I,H)}(d,h,g)}if(g.type==="dsa"){if(f!=="dsa")throw new Error("wrong public key type");return function(I,D,F){var B=F.data.p,U=F.data.q,H=F.data.g,R=F.data.pub_key,L=l.signature.decode(I,"der"),_=L.s,w=L.r;u(_,U),u(w,U);var S=o.mont(B),x=_.invm(U);return H.toRed(S).redPow(new o(D).mul(x).mod(U)).fromRed().mul(R.toRed(S).redPow(w.mul(x).mod(U)).fromRed()).mod(B).mod(U).cmp(w)===0}(d,h,g)}if(f!=="rsa"&&f!=="ecdsa/rsa")throw new Error("wrong public key type");h=n.concat([m,h]);for(var y=g.modulus.byteLength(),v=[1],C=0;h.length+v.length+2<y;)v.push(255),C++;v.push(0);for(var b=-1;++b<h.length;)v.push(h[b]);v=n.from(v);var T=o.mont(g.modulus);d=(d=new o(d).toRed(T)).redPow(new o(g.publicExponent)),d=n.from(d.fromRed().toArray());var A=C<8?1:0;for(y=Math.min(d.length,v.length),d.length!==v.length&&(A=1),b=-1;++b<y;)A|=d[b]^v[b];return A===0}},{"./curves.json":212,"bn.js":186,elliptic:405,"parse-asn1":459,"safe-buffer":494}],216:[function(i,s,r){},{}],217:[function(i,s,r){var n=i("buffer"),o=n.Buffer;function a(c,u){for(var d in c)u[d]=c[d]}function l(c,u,d){return o(c,u,d)}o.from&&o.alloc&&o.allocUnsafe&&o.allocUnsafeSlow?s.exports=n:(a(n,r),r.Buffer=l),a(o,l),l.from=function(c,u,d){if(typeof c=="number")throw new TypeError("Argument must not be a number");return o(c,u,d)},l.alloc=function(c,u,d){if(typeof c!="number")throw new TypeError("Argument must be a number");var h=o(c);return u!==void 0?typeof d=="string"?h.fill(u,d):h.fill(u):h.fill(0),h},l.allocUnsafe=function(c){if(typeof c!="number")throw new TypeError("Argument must be a number");return o(c)},l.allocUnsafeSlow=function(c){if(typeof c!="number")throw new TypeError("Argument must be a number");return n.SlowBuffer(c)}},{buffer:220}],218:[function(i,s,r){var n=i("safe-buffer").Buffer,o=n.isEncoding||function(g){switch((g=""+g)&&g.toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":case"raw":return!0;default:return!1}};function a(g){var y;switch(this.encoding=function(v){var C=function(b){if(!b)return"utf8";for(var T;;)switch(b){case"utf8":case"utf-8":return"utf8";case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return"utf16le";case"latin1":case"binary":return"latin1";case"base64":case"ascii":case"hex":return b;default:if(T)return;b=(""+b).toLowerCase(),T=!0}}(v);if(typeof C!="string"&&(n.isEncoding===o||!o(v)))throw new Error("Unknown encoding: "+v);return C||v}(g),this.encoding){case"utf16le":this.text=u,this.end=d,y=4;break;case"utf8":this.fillLast=c,y=4;break;case"base64":this.text=h,this.end=p,y=3;break;default:return this.write=f,void(this.end=m)}this.lastNeed=0,this.lastTotal=0,this.lastChar=n.allocUnsafe(y)}function l(g){return g<=127?0:g>>5==6?2:g>>4==14?3:g>>3==30?4:g>>6==2?-1:-2}function c(g){var y=this.lastTotal-this.lastNeed,v=function(C,b,T){if((192&b[0])!=128)return C.lastNeed=0,"";if(C.lastNeed>1&&b.length>1){if((192&b[1])!=128)return C.lastNeed=1,"";if(C.lastNeed>2&&b.length>2&&(192&b[2])!=128)return C.lastNeed=2,""}}(this,g);return v!==void 0?v:this.lastNeed<=g.length?(g.copy(this.lastChar,y,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal)):(g.copy(this.lastChar,y,0,g.length),void(this.lastNeed-=g.length))}function u(g,y){if((g.length-y)%2==0){var v=g.toString("utf16le",y);if(v){var C=v.charCodeAt(v.length-1);if(C>=55296&&C<=56319)return this.lastNeed=2,this.lastTotal=4,this.lastChar[0]=g[g.length-2],this.lastChar[1]=g[g.length-1],v.slice(0,-1)}return v}return this.lastNeed=1,this.lastTotal=2,this.lastChar[0]=g[g.length-1],g.toString("utf16le",y,g.length-1)}function d(g){var y=g&&g.length?this.write(g):"";if(this.lastNeed){var v=this.lastTotal-this.lastNeed;return y+this.lastChar.toString("utf16le",0,v)}return y}function h(g,y){var v=(g.length-y)%3;return v===0?g.toString("base64",y):(this.lastNeed=3-v,this.lastTotal=3,v===1?this.lastChar[0]=g[g.length-1]:(this.lastChar[0]=g[g.length-2],this.lastChar[1]=g[g.length-1]),g.toString("base64",y,g.length-v))}function p(g){var y=g&&g.length?this.write(g):"";return this.lastNeed?y+this.lastChar.toString("base64",0,3-this.lastNeed):y}function f(g){return g.toString(this.encoding)}function m(g){return g&&g.length?this.write(g):""}r.StringDecoder=a,a.prototype.write=function(g){if(g.length===0)return"";var y,v;if(this.lastNeed){if((y=this.fillLast(g))===void 0)return"";v=this.lastNeed,this.lastNeed=0}else v=0;return v<g.length?y?y+this.text(g,v):this.text(g,v):y||""},a.prototype.end=function(g){var y=g&&g.length?this.write(g):"";return this.lastNeed?y+"":y},a.prototype.text=function(g,y){var v=function(b,T,A){var I=T.length-1;if(I<A)return 0;var D=l(T[I]);return D>=0?(D>0&&(b.lastNeed=D-1),D):--I<A||D===-2?0:(D=l(T[I]))>=0?(D>0&&(b.lastNeed=D-2),D):--I<A||D===-2?0:(D=l(T[I]))>=0?(D>0&&(D===2?D=0:b.lastNeed=D-3),D):0}(this,g,y);if(!this.lastNeed)return g.toString("utf8",y);this.lastTotal=v;var C=g.length-(v-this.lastNeed);return g.copy(this.lastChar,0,C),g.toString("utf8",y,C)},a.prototype.fillLast=function(g){if(this.lastNeed<=g.length)return g.copy(this.lastChar,this.lastTotal-this.lastNeed,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);g.copy(this.lastChar,this.lastTotal-this.lastNeed,0,g.length),this.lastNeed-=g.length}},{"safe-buffer":217}],219:[function(i,s,r){(function(n){(function(){s.exports=function(o,a){for(var l=Math.min(o.length,a.length),c=new n(l),u=0;u<l;++u)c[u]=o[u]^a[u];return c}}).call(this)}).call(this,i("buffer").Buffer)},{buffer:220}],220:[function(i,s,r){(function(n){(function(){var o=i("base64-js"),a=i("ieee754");r.Buffer=c,r.SlowBuffer=function(N){return+N!=N&&(N=0),c.alloc(+N)},r.INSPECT_MAX_BYTES=50;function l(N){if(N>2147483647)throw new RangeError('The value "'+N+'" is invalid for option "size"');var P=new Uint8Array(N);return P.__proto__=c.prototype,P}function c(N,P,j){if(typeof N=="number"){if(typeof P=="string")throw new TypeError('The "string" argument must be of type string. Received type number');return h(N)}return u(N,P,j)}function u(N,P,j){if(typeof N=="string")return function(ee,re){if(typeof re=="string"&&re!==""||(re="utf8"),!c.isEncoding(re))throw new TypeError("Unknown encoding: "+re);var oe=0|m(ee,re),ue=l(oe),se=ue.write(ee,re);return se!==oe&&(ue=ue.slice(0,se)),ue}(N,P);if(ArrayBuffer.isView(N))return p(N);if(N==null)throw TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof N);if(G(N,ArrayBuffer)||N&&G(N.buffer,ArrayBuffer))return function(ee,re,oe){if(re<0||ee.byteLength<re)throw new RangeError('"offset" is outside of buffer bounds');if(ee.byteLength<re+(oe||0))throw new RangeError('"length" is outside of buffer bounds');var ue;return ue=re===void 0&&oe===void 0?new Uint8Array(ee):oe===void 0?new Uint8Array(ee,re):new Uint8Array(ee,re,oe),ue.__proto__=c.prototype,ue}(N,P,j);if(typeof N=="number")throw new TypeError('The "value" argument must not be of type number. Received type number');var X=N.valueOf&&N.valueOf();if(X!=null&&X!==N)return c.from(X,P,j);var ie=function(ee){if(c.isBuffer(ee)){var re=0|f(ee.length),oe=l(re);return oe.length===0||ee.copy(oe,0,0,re),oe}if(ee.length!==void 0)return typeof ee.length!="number"||Z(ee.length)?l(0):p(ee);if(ee.type==="Buffer"&&Array.isArray(ee.data))return p(ee.data)}(N);if(ie)return ie;if(typeof Symbol<"u"&&Symbol.toPrimitive!=null&&typeof N[Symbol.toPrimitive]=="function")return c.from(N[Symbol.toPrimitive]("string"),P,j);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof N)}function d(N){if(typeof N!="number")throw new TypeError('"size" argument must be of type number');if(N<0)throw new RangeError('The value "'+N+'" is invalid for option "size"')}function h(N){return d(N),l(N<0?0:0|f(N))}function p(N){for(var P=N.length<0?0:0|f(N.length),j=l(P),X=0;X<P;X+=1)j[X]=255&N[X];return j}function f(N){if(N>=2147483647)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x7fffffff bytes");return 0|N}function m(N,P){if(c.isBuffer(N))return N.length;if(ArrayBuffer.isView(N)||G(N,ArrayBuffer))return N.byteLength;if(typeof N!="string")throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof N);var j=N.length,X=arguments.length>2&&arguments[2]===!0;if(!X&&j===0)return 0;for(var ie=!1;;)switch(P){case"ascii":case"latin1":case"binary":return j;case"utf8":case"utf-8":return Y(N).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*j;case"hex":return j>>>1;case"base64":return $(N).length;default:if(ie)return X?-1:Y(N).length;P=(""+P).toLowerCase(),ie=!0}}function g(N,P,j){var X=!1;if((P===void 0||P<0)&&(P=0),P>this.length||((j===void 0||j>this.length)&&(j=this.length),j<=0)||(j>>>=0)<=(P>>>=0))return"";for(N||(N="utf8");;)switch(N){case"hex":return L(this,P,j);case"utf8":case"utf-8":return U(this,P,j);case"ascii":return H(this,P,j);case"latin1":case"binary":return R(this,P,j);case"base64":return B(this,P,j);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return _(this,P,j);default:if(X)throw new TypeError("Unknown encoding: "+N);N=(N+"").toLowerCase(),X=!0}}function y(N,P,j){var X=N[P];N[P]=N[j],N[j]=X}function v(N,P,j,X,ie){if(N.length===0)return-1;if(typeof j=="string"?(X=j,j=0):j>2147483647?j=2147483647:j<-2147483648&&(j=-2147483648),Z(j=+j)&&(j=ie?0:N.length-1),j<0&&(j=N.length+j),j>=N.length){if(ie)return-1;j=N.length-1}else if(j<0){if(!ie)return-1;j=0}if(typeof P=="string"&&(P=c.from(P,X)),c.isBuffer(P))return P.length===0?-1:C(N,P,j,X,ie);if(typeof P=="number")return P&=255,typeof Uint8Array.prototype.indexOf=="function"?ie?Uint8Array.prototype.indexOf.call(N,P,j):Uint8Array.prototype.lastIndexOf.call(N,P,j):C(N,[P],j,X,ie);throw new TypeError("val must be string, number or Buffer")}function C(N,P,j,X,ie){var ee,re=1,oe=N.length,ue=P.length;if(X!==void 0&&((X=String(X).toLowerCase())==="ucs2"||X==="ucs-2"||X==="utf16le"||X==="utf-16le")){if(N.length<2||P.length<2)return-1;re=2,oe/=2,ue/=2,j/=2}function se(me,ge){return re===1?me[ge]:me.readUInt16BE(ge*re)}if(ie){var le=-1;for(ee=j;ee<oe;ee++)if(se(N,ee)===se(P,le===-1?0:ee-le)){if(le===-1&&(le=ee),ee-le+1===ue)return le*re}else le!==-1&&(ee-=ee-le),le=-1}else for(j+ue>oe&&(j=oe-ue),ee=j;ee>=0;ee--){for(var ne=!0,fe=0;fe<ue;fe++)if(se(N,ee+fe)!==se(P,fe)){ne=!1;break}if(ne)return ee}return-1}function b(N,P,j,X){j=Number(j)||0;var ie=N.length-j;X?(X=Number(X))>ie&&(X=ie):X=ie;var ee=P.length;X>ee/2&&(X=ee/2);for(var re=0;re<X;++re){var oe=parseInt(P.substr(2*re,2),16);if(Z(oe))return re;N[j+re]=oe}return re}function T(N,P,j,X){return J(Y(P,N.length-j),N,j,X)}function A(N,P,j,X){return J(function(ie){for(var ee=[],re=0;re<ie.length;++re)ee.push(255&ie.charCodeAt(re));return ee}(P),N,j,X)}function I(N,P,j,X){return A(N,P,j,X)}function D(N,P,j,X){return J($(P),N,j,X)}function F(N,P,j,X){return J(function(ie,ee){for(var re,oe,ue,se=[],le=0;le<ie.length&&!((ee-=2)<0);++le)re=ie.charCodeAt(le),oe=re>>8,ue=re%256,se.push(ue),se.push(oe);return se}(P,N.length-j),N,j,X)}function B(N,P,j){return P===0&&j===N.length?o.fromByteArray(N):o.fromByteArray(N.slice(P,j))}function U(N,P,j){j=Math.min(N.length,j);for(var X=[],ie=P;ie<j;){var ee,re,oe,ue,se=N[ie],le=null,ne=se>239?4:se>223?3:se>191?2:1;if(ie+ne<=j)switch(ne){case 1:se<128&&(le=se);break;case 2:(192&(ee=N[ie+1]))==128&&(ue=(31&se)<<6|63&ee)>127&&(le=ue);break;case 3:ee=N[ie+1],re=N[ie+2],(192&ee)==128&&(192&re)==128&&(ue=(15&se)<<12|(63&ee)<<6|63&re)>2047&&(ue<55296||ue>57343)&&(le=ue);break;case 4:ee=N[ie+1],re=N[ie+2],oe=N[ie+3],(192&ee)==128&&(192&re)==128&&(192&oe)==128&&(ue=(15&se)<<18|(63&ee)<<12|(63&re)<<6|63&oe)>65535&&ue<1114112&&(le=ue)}le===null?(le=65533,ne=1):le>65535&&(le-=65536,X.push(le>>>10&1023|55296),le=56320|1023&le),X.push(le),ie+=ne}return function(fe){var me=fe.length;if(me<=4096)return String.fromCharCode.apply(String,fe);for(var ge="",ve=0;ve<me;)ge+=String.fromCharCode.apply(String,fe.slice(ve,ve+=4096));return ge}(X)}r.kMaxLength=2147483647,c.TYPED_ARRAY_SUPPORT=function(){try{var N=new Uint8Array(1);return N.__proto__={__proto__:Uint8Array.prototype,foo:function(){return 42}},N.foo()===42}catch{return!1}}(),c.TYPED_ARRAY_SUPPORT||typeof console>"u"||typeof console.error!="function"||console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support."),Object.defineProperty(c.prototype,"parent",{enumerable:!0,get:function(){if(c.isBuffer(this))return this.buffer}}),Object.defineProperty(c.prototype,"offset",{enumerable:!0,get:function(){if(c.isBuffer(this))return this.byteOffset}}),typeof Symbol<"u"&&Symbol.species!=null&&c[Symbol.species]===c&&Object.defineProperty(c,Symbol.species,{value:null,configurable:!0,enumerable:!1,writable:!1}),c.poolSize=8192,c.from=function(N,P,j){return u(N,P,j)},c.prototype.__proto__=Uint8Array.prototype,c.__proto__=Uint8Array,c.alloc=function(N,P,j){return function(X,ie,ee){return d(X),X<=0?l(X):ie!==void 0?typeof ee=="string"?l(X).fill(ie,ee):l(X).fill(ie):l(X)}(N,P,j)},c.allocUnsafe=function(N){return h(N)},c.allocUnsafeSlow=function(N){return h(N)},c.isBuffer=function(N){return N!=null&&N._isBuffer===!0&&N!==c.prototype},c.compare=function(N,P){if(G(N,Uint8Array)&&(N=c.from(N,N.offset,N.byteLength)),G(P,Uint8Array)&&(P=c.from(P,P.offset,P.byteLength)),!c.isBuffer(N)||!c.isBuffer(P))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(N===P)return 0;for(var j=N.length,X=P.length,ie=0,ee=Math.min(j,X);ie<ee;++ie)if(N[ie]!==P[ie]){j=N[ie],X=P[ie];break}return j<X?-1:X<j?1:0},c.isEncoding=function(N){switch(String(N).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},c.concat=function(N,P){if(!Array.isArray(N))throw new TypeError('"list" argument must be an Array of Buffers');if(N.length===0)return c.alloc(0);var j;if(P===void 0)for(P=0,j=0;j<N.length;++j)P+=N[j].length;var X=c.allocUnsafe(P),ie=0;for(j=0;j<N.length;++j){var ee=N[j];if(G(ee,Uint8Array)&&(ee=c.from(ee)),!c.isBuffer(ee))throw new TypeError('"list" argument must be an Array of Buffers');ee.copy(X,ie),ie+=ee.length}return X},c.byteLength=m,c.prototype._isBuffer=!0,c.prototype.swap16=function(){var N=this.length;if(N%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var P=0;P<N;P+=2)y(this,P,P+1);return this},c.prototype.swap32=function(){var N=this.length;if(N%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var P=0;P<N;P+=4)y(this,P,P+3),y(this,P+1,P+2);return this},c.prototype.swap64=function(){var N=this.length;if(N%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var P=0;P<N;P+=8)y(this,P,P+7),y(this,P+1,P+6),y(this,P+2,P+5),y(this,P+3,P+4);return this},c.prototype.toString=function(){var N=this.length;return N===0?"":arguments.length===0?U(this,0,N):g.apply(this,arguments)},c.prototype.toLocaleString=c.prototype.toString,c.prototype.equals=function(N){if(!c.isBuffer(N))throw new TypeError("Argument must be a Buffer");return this===N||c.compare(this,N)===0},c.prototype.inspect=function(){var N="",P=r.INSPECT_MAX_BYTES;return N=this.toString("hex",0,P).replace(/(.{2})/g,"$1 ").trim(),this.length>P&&(N+=" ... "),"<Buffer "+N+">"},c.prototype.compare=function(N,P,j,X,ie){if(G(N,Uint8Array)&&(N=c.from(N,N.offset,N.byteLength)),!c.isBuffer(N))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof N);if(P===void 0&&(P=0),j===void 0&&(j=N?N.length:0),X===void 0&&(X=0),ie===void 0&&(ie=this.length),P<0||j>N.length||X<0||ie>this.length)throw new RangeError("out of range index");if(X>=ie&&P>=j)return 0;if(X>=ie)return-1;if(P>=j)return 1;if(this===N)return 0;for(var ee=(ie>>>=0)-(X>>>=0),re=(j>>>=0)-(P>>>=0),oe=Math.min(ee,re),ue=this.slice(X,ie),se=N.slice(P,j),le=0;le<oe;++le)if(ue[le]!==se[le]){ee=ue[le],re=se[le];break}return ee<re?-1:re<ee?1:0},c.prototype.includes=function(N,P,j){return this.indexOf(N,P,j)!==-1},c.prototype.indexOf=function(N,P,j){return v(this,N,P,j,!0)},c.prototype.lastIndexOf=function(N,P,j){return v(this,N,P,j,!1)},c.prototype.write=function(N,P,j,X){if(P===void 0)X="utf8",j=this.length,P=0;else if(j===void 0&&typeof P=="string")X=P,j=this.length,P=0;else{if(!isFinite(P))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");P>>>=0,isFinite(j)?(j>>>=0,X===void 0&&(X="utf8")):(X=j,j=void 0)}var ie=this.length-P;if((j===void 0||j>ie)&&(j=ie),N.length>0&&(j<0||P<0)||P>this.length)throw new RangeError("Attempt to write outside buffer bounds");X||(X="utf8");for(var ee=!1;;)switch(X){case"hex":return b(this,N,P,j);case"utf8":case"utf-8":return T(this,N,P,j);case"ascii":return A(this,N,P,j);case"latin1":case"binary":return I(this,N,P,j);case"base64":return D(this,N,P,j);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return F(this,N,P,j);default:if(ee)throw new TypeError("Unknown encoding: "+X);X=(""+X).toLowerCase(),ee=!0}},c.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};function H(N,P,j){var X="";j=Math.min(N.length,j);for(var ie=P;ie<j;++ie)X+=String.fromCharCode(127&N[ie]);return X}function R(N,P,j){var X="";j=Math.min(N.length,j);for(var ie=P;ie<j;++ie)X+=String.fromCharCode(N[ie]);return X}function L(N,P,j){var X=N.length;(!P||P<0)&&(P=0),(!j||j<0||j>X)&&(j=X);for(var ie="",ee=P;ee<j;++ee)ie+=V(N[ee]);return ie}function _(N,P,j){for(var X=N.slice(P,j),ie="",ee=0;ee<X.length;ee+=2)ie+=String.fromCharCode(X[ee]+256*X[ee+1]);return ie}function w(N,P,j){if(N%1!=0||N<0)throw new RangeError("offset is not uint");if(N+P>j)throw new RangeError("Trying to access beyond buffer length")}function S(N,P,j,X,ie,ee){if(!c.isBuffer(N))throw new TypeError('"buffer" argument must be a Buffer instance');if(P>ie||P<ee)throw new RangeError('"value" argument is out of bounds');if(j+X>N.length)throw new RangeError("Index out of range")}function x(N,P,j,X,ie,ee){if(j+X>N.length)throw new RangeError("Index out of range");if(j<0)throw new RangeError("Index out of range")}function E(N,P,j,X,ie){return P=+P,j>>>=0,ie||x(N,0,j,4),a.write(N,P,j,X,23,4),j+4}function M(N,P,j,X,ie){return P=+P,j>>>=0,ie||x(N,0,j,8),a.write(N,P,j,X,52,8),j+8}c.prototype.slice=function(N,P){var j=this.length;(N=~~N)<0?(N+=j)<0&&(N=0):N>j&&(N=j),(P=P===void 0?j:~~P)<0?(P+=j)<0&&(P=0):P>j&&(P=j),P<N&&(P=N);var X=this.subarray(N,P);return X.__proto__=c.prototype,X},c.prototype.readUIntLE=function(N,P,j){N>>>=0,P>>>=0,j||w(N,P,this.length);for(var X=this[N],ie=1,ee=0;++ee<P&&(ie*=256);)X+=this[N+ee]*ie;return X},c.prototype.readUIntBE=function(N,P,j){N>>>=0,P>>>=0,j||w(N,P,this.length);for(var X=this[N+--P],ie=1;P>0&&(ie*=256);)X+=this[N+--P]*ie;return X},c.prototype.readUInt8=function(N,P){return N>>>=0,P||w(N,1,this.length),this[N]},c.prototype.readUInt16LE=function(N,P){return N>>>=0,P||w(N,2,this.length),this[N]|this[N+1]<<8},c.prototype.readUInt16BE=function(N,P){return N>>>=0,P||w(N,2,this.length),this[N]<<8|this[N+1]},c.prototype.readUInt32LE=function(N,P){return N>>>=0,P||w(N,4,this.length),(this[N]|this[N+1]<<8|this[N+2]<<16)+16777216*this[N+3]},c.prototype.readUInt32BE=function(N,P){return N>>>=0,P||w(N,4,this.length),16777216*this[N]+(this[N+1]<<16|this[N+2]<<8|this[N+3])},c.prototype.readIntLE=function(N,P,j){N>>>=0,P>>>=0,j||w(N,P,this.length);for(var X=this[N],ie=1,ee=0;++ee<P&&(ie*=256);)X+=this[N+ee]*ie;return X>=(ie*=128)&&(X-=Math.pow(2,8*P)),X},c.prototype.readIntBE=function(N,P,j){N>>>=0,P>>>=0,j||w(N,P,this.length);for(var X=P,ie=1,ee=this[N+--X];X>0&&(ie*=256);)ee+=this[N+--X]*ie;return ee>=(ie*=128)&&(ee-=Math.pow(2,8*P)),ee},c.prototype.readInt8=function(N,P){return N>>>=0,P||w(N,1,this.length),128&this[N]?-1*(255-this[N]+1):this[N]},c.prototype.readInt16LE=function(N,P){N>>>=0,P||w(N,2,this.length);var j=this[N]|this[N+1]<<8;return 32768&j?4294901760|j:j},c.prototype.readInt16BE=function(N,P){N>>>=0,P||w(N,2,this.length);var j=this[N+1]|this[N]<<8;return 32768&j?4294901760|j:j},c.prototype.readInt32LE=function(N,P){return N>>>=0,P||w(N,4,this.length),this[N]|this[N+1]<<8|this[N+2]<<16|this[N+3]<<24},c.prototype.readInt32BE=function(N,P){return N>>>=0,P||w(N,4,this.length),this[N]<<24|this[N+1]<<16|this[N+2]<<8|this[N+3]},c.prototype.readFloatLE=function(N,P){return N>>>=0,P||w(N,4,this.length),a.read(this,N,!0,23,4)},c.prototype.readFloatBE=function(N,P){return N>>>=0,P||w(N,4,this.length),a.read(this,N,!1,23,4)},c.prototype.readDoubleLE=function(N,P){return N>>>=0,P||w(N,8,this.length),a.read(this,N,!0,52,8)},c.prototype.readDoubleBE=function(N,P){return N>>>=0,P||w(N,8,this.length),a.read(this,N,!1,52,8)},c.prototype.writeUIntLE=function(N,P,j,X){N=+N,P>>>=0,j>>>=0,X||S(this,N,P,j,Math.pow(2,8*j)-1,0);var ie=1,ee=0;for(this[P]=255&N;++ee<j&&(ie*=256);)this[P+ee]=N/ie&255;return P+j},c.prototype.writeUIntBE=function(N,P,j,X){N=+N,P>>>=0,j>>>=0,X||S(this,N,P,j,Math.pow(2,8*j)-1,0);var ie=j-1,ee=1;for(this[P+ie]=255&N;--ie>=0&&(ee*=256);)this[P+ie]=N/ee&255;return P+j},c.prototype.writeUInt8=function(N,P,j){return N=+N,P>>>=0,j||S(this,N,P,1,255,0),this[P]=255&N,P+1},c.prototype.writeUInt16LE=function(N,P,j){return N=+N,P>>>=0,j||S(this,N,P,2,65535,0),this[P]=255&N,this[P+1]=N>>>8,P+2},c.prototype.writeUInt16BE=function(N,P,j){return N=+N,P>>>=0,j||S(this,N,P,2,65535,0),this[P]=N>>>8,this[P+1]=255&N,P+2},c.prototype.writeUInt32LE=function(N,P,j){return N=+N,P>>>=0,j||S(this,N,P,4,4294967295,0),this[P+3]=N>>>24,this[P+2]=N>>>16,this[P+1]=N>>>8,this[P]=255&N,P+4},c.prototype.writeUInt32BE=function(N,P,j){return N=+N,P>>>=0,j||S(this,N,P,4,4294967295,0),this[P]=N>>>24,this[P+1]=N>>>16,this[P+2]=N>>>8,this[P+3]=255&N,P+4},c.prototype.writeIntLE=function(N,P,j,X){if(N=+N,P>>>=0,!X){var ie=Math.pow(2,8*j-1);S(this,N,P,j,ie-1,-ie)}var ee=0,re=1,oe=0;for(this[P]=255&N;++ee<j&&(re*=256);)N<0&&oe===0&&this[P+ee-1]!==0&&(oe=1),this[P+ee]=(N/re>>0)-oe&255;return P+j},c.prototype.writeIntBE=function(N,P,j,X){if(N=+N,P>>>=0,!X){var ie=Math.pow(2,8*j-1);S(this,N,P,j,ie-1,-ie)}var ee=j-1,re=1,oe=0;for(this[P+ee]=255&N;--ee>=0&&(re*=256);)N<0&&oe===0&&this[P+ee+1]!==0&&(oe=1),this[P+ee]=(N/re>>0)-oe&255;return P+j},c.prototype.writeInt8=function(N,P,j){return N=+N,P>>>=0,j||S(this,N,P,1,127,-128),N<0&&(N=255+N+1),this[P]=255&N,P+1},c.prototype.writeInt16LE=function(N,P,j){return N=+N,P>>>=0,j||S(this,N,P,2,32767,-32768),this[P]=255&N,this[P+1]=N>>>8,P+2},c.prototype.writeInt16BE=function(N,P,j){return N=+N,P>>>=0,j||S(this,N,P,2,32767,-32768),this[P]=N>>>8,this[P+1]=255&N,P+2},c.prototype.writeInt32LE=function(N,P,j){return N=+N,P>>>=0,j||S(this,N,P,4,2147483647,-2147483648),this[P]=255&N,this[P+1]=N>>>8,this[P+2]=N>>>16,this[P+3]=N>>>24,P+4},c.prototype.writeInt32BE=function(N,P,j){return N=+N,P>>>=0,j||S(this,N,P,4,2147483647,-2147483648),N<0&&(N=4294967295+N+1),this[P]=N>>>24,this[P+1]=N>>>16,this[P+2]=N>>>8,this[P+3]=255&N,P+4},c.prototype.writeFloatLE=function(N,P,j){return E(this,N,P,!0,j)},c.prototype.writeFloatBE=function(N,P,j){return E(this,N,P,!1,j)},c.prototype.writeDoubleLE=function(N,P,j){return M(this,N,P,!0,j)},c.prototype.writeDoubleBE=function(N,P,j){return M(this,N,P,!1,j)},c.prototype.copy=function(N,P,j,X){if(!c.isBuffer(N))throw new TypeError("argument should be a Buffer");if(j||(j=0),X||X===0||(X=this.length),P>=N.length&&(P=N.length),P||(P=0),X>0&&X<j&&(X=j),X===j||N.length===0||this.length===0)return 0;if(P<0)throw new RangeError("targetStart out of bounds");if(j<0||j>=this.length)throw new RangeError("Index out of range");if(X<0)throw new RangeError("sourceEnd out of bounds");X>this.length&&(X=this.length),N.length-P<X-j&&(X=N.length-P+j);var ie=X-j;if(this===N&&typeof Uint8Array.prototype.copyWithin=="function")this.copyWithin(P,j,X);else if(this===N&&j<P&&P<X)for(var ee=ie-1;ee>=0;--ee)N[ee+P]=this[ee+j];else Uint8Array.prototype.set.call(N,this.subarray(j,X),P);return ie},c.prototype.fill=function(N,P,j,X){if(typeof N=="string"){if(typeof P=="string"?(X=P,P=0,j=this.length):typeof j=="string"&&(X=j,j=this.length),X!==void 0&&typeof X!="string")throw new TypeError("encoding must be a string");if(typeof X=="string"&&!c.isEncoding(X))throw new TypeError("Unknown encoding: "+X);if(N.length===1){var ie=N.charCodeAt(0);(X==="utf8"&&ie<128||X==="latin1")&&(N=ie)}}else typeof N=="number"&&(N&=255);if(P<0||this.length<P||this.length<j)throw new RangeError("Out of range index");if(j<=P)return this;var ee;if(P>>>=0,j=j===void 0?this.length:j>>>0,N||(N=0),typeof N=="number")for(ee=P;ee<j;++ee)this[ee]=N;else{var re=c.isBuffer(N)?N:c.from(N,X),oe=re.length;if(oe===0)throw new TypeError('The value "'+N+'" is invalid for argument "value"');for(ee=0;ee<j-P;++ee)this[ee+P]=re[ee%oe]}return this};var O=/[^+/0-9A-Za-z-_]/g;function V(N){return N<16?"0"+N.toString(16):N.toString(16)}function Y(N,P){var j;P=P||1/0;for(var X=N.length,ie=null,ee=[],re=0;re<X;++re){if((j=N.charCodeAt(re))>55295&&j<57344){if(!ie){if(j>56319){(P-=3)>-1&&ee.push(239,191,189);continue}if(re+1===X){(P-=3)>-1&&ee.push(239,191,189);continue}ie=j;continue}if(j<56320){(P-=3)>-1&&ee.push(239,191,189),ie=j;continue}j=65536+(ie-55296<<10|j-56320)}else ie&&(P-=3)>-1&&ee.push(239,191,189);if(ie=null,j<128){if((P-=1)<0)break;ee.push(j)}else if(j<2048){if((P-=2)<0)break;ee.push(j>>6|192,63&j|128)}else if(j<65536){if((P-=3)<0)break;ee.push(j>>12|224,j>>6&63|128,63&j|128)}else{if(!(j<1114112))throw new Error("Invalid code point");if((P-=4)<0)break;ee.push(j>>18|240,j>>12&63|128,j>>6&63|128,63&j|128)}}return ee}function $(N){return o.toByteArray(function(P){if((P=(P=P.split("=")[0]).trim().replace(O,"")).length<2)return"";for(;P.length%4!=0;)P+="=";return P}(N))}function J(N,P,j,X){for(var ie=0;ie<X&&!(ie+j>=P.length||ie>=N.length);++ie)P[ie+j]=N[ie];return ie}function G(N,P){return N instanceof P||N!=null&&N.constructor!=null&&N.constructor.name!=null&&N.constructor.name===P.name}function Z(N){return N!=N}}).call(this)}).call(this,i("buffer").Buffer)},{"base64-js":185,buffer:220,ieee754:439}],221:[function(i,s,r){var n=i("safe-buffer").Buffer,o=i("stream").Transform,a=i("string_decoder").StringDecoder;function l(c){o.call(this),this.hashMode=typeof c=="string",this.hashMode?this[c]=this._finalOrDigest:this.final=this._finalOrDigest,this._final&&(this.__final=this._final,this._final=null),this._decoder=null,this._encoding=null}i("inherits")(l,o),l.prototype.update=function(c,u,d){typeof c=="string"&&(c=n.from(c,u));var h=this._update(c);return this.hashMode?this:(d&&(h=this._toString(h,d)),h)},l.prototype.setAutoPadding=function(){},l.prototype.getAuthTag=function(){throw new Error("trying to get auth tag in unsupported state")},l.prototype.setAuthTag=function(){throw new Error("trying to set auth tag in unsupported state")},l.prototype.setAAD=function(){throw new Error("trying to set aad in unsupported state")},l.prototype._transform=function(c,u,d){var h;try{this.hashMode?this._update(c):this.push(this._update(c))}catch(p){h=p}finally{d(h)}},l.prototype._flush=function(c){var u;try{this.push(this.__final())}catch(d){u=d}c(u)},l.prototype._finalOrDigest=function(c){var u=this.__final()||n.alloc(0);return c&&(u=this._toString(u,c,!0)),u},l.prototype._toString=function(c,u,d){if(this._decoder||(this._decoder=new a(u),this._encoding=u),this._encoding!==u)throw new Error("can't switch encodings");var h=this._decoder.write(c);return d&&(h+=this._decoder.end()),h},s.exports=l},{inherits:440,"safe-buffer":494,stream:505,string_decoder:218}],222:[function(i,s,r){var n=i("../internals/is-callable"),o=i("../internals/try-to-string"),a=TypeError;s.exports=function(l){if(n(l))return l;throw new a(o(l)+" is not a function")}},{"../internals/is-callable":285,"../internals/try-to-string":349}],223:[function(i,s,r){var n=i("../internals/is-constructor"),o=i("../internals/try-to-string"),a=TypeError;s.exports=function(l){if(n(l))return l;throw new a(o(l)+" is not a constructor")}},{"../internals/is-constructor":286,"../internals/try-to-string":349}],224:[function(i,s,r){var n=i("../internals/is-callable"),o=String,a=TypeError;s.exports=function(l){if(typeof l=="object"||n(l))return l;throw new a("Can't set "+o(l)+" as a prototype")}},{"../internals/is-callable":285}],225:[function(i,s,r){var n=i("../internals/well-known-symbol"),o=i("../internals/object-create"),a=i("../internals/object-define-property").f,l=n("unscopables"),c=Array.prototype;c[l]===void 0&&a(c,l,{configurable:!0,value:o(null)}),s.exports=function(u){c[l][u]=!0}},{"../internals/object-create":306,"../internals/object-define-property":308,"../internals/well-known-symbol":357}],226:[function(i,s,r){var n=i("../internals/object-is-prototype-of"),o=TypeError;s.exports=function(a,l){if(n(l,a))return a;throw new o("Incorrect invocation")}},{"../internals/object-is-prototype-of":314}],227:[function(i,s,r){var n=i("../internals/is-object"),o=String,a=TypeError;s.exports=function(l){if(n(l))return l;throw new a(o(l)+" is not an object")}},{"../internals/is-object":289}],228:[function(i,s,r){var n=i("../internals/to-indexed-object"),o=i("../internals/to-absolute-index"),a=i("../internals/length-of-array-like"),l=function(c){return function(u,d,h){var p,f=n(u),m=a(f),g=o(h,m);if(c&&d!=d){for(;m>g;)if((p=f[g++])!=p)return!0}else for(;m>g;g++)if((c||g in f)&&f[g]===d)return c||g||0;return!c&&-1}};s.exports={includes:l(!0),indexOf:l(!1)}},{"../internals/length-of-array-like":299,"../internals/to-absolute-index":340,"../internals/to-indexed-object":341}],229:[function(i,s,r){var n=i("../internals/function-bind-context"),o=i("../internals/function-uncurry-this"),a=i("../internals/indexed-object"),l=i("../internals/to-object"),c=i("../internals/length-of-array-like"),u=i("../internals/array-species-create"),d=o([].push),h=function(p){var f=p===1,m=p===2,g=p===3,y=p===4,v=p===6,C=p===7,b=p===5||v;return function(T,A,I,D){for(var F,B,U=l(T),H=a(U),R=n(A,I),L=c(H),_=0,w=D||u,S=f?w(T,L):m||C?w(T,0):void 0;L>_;_++)if((b||_ in H)&&(B=R(F=H[_],_,U),p))if(f)S[_]=B;else if(B)switch(p){case 3:return!0;case 5:return F;case 6:return _;case 2:d(S,F)}else switch(p){case 4:return!1;case 7:d(S,F)}return v?-1:g||y?y:S}};s.exports={forEach:h(0),map:h(1),filter:h(2),some:h(3),every:h(4),find:h(5),findIndex:h(6),filterReject:h(7)}},{"../internals/array-species-create":233,"../internals/function-bind-context":262,"../internals/function-uncurry-this":268,"../internals/indexed-object":280,"../internals/length-of-array-like":299,"../internals/to-object":344}],230:[function(i,s,r){var n=i("../internals/to-absolute-index"),o=i("../internals/length-of-array-like"),a=i("../internals/create-property"),l=Array,c=Math.max;s.exports=function(u,d,h){for(var p=o(u),f=n(d,p),m=n(h===void 0?p:h,p),g=l(c(m-f,0)),y=0;f<m;f++,y++)a(g,y,u[f]);return g.length=y,g}},{"../internals/create-property":243,"../internals/length-of-array-like":299,"../internals/to-absolute-index":340}],231:[function(i,s,r){var n=i("../internals/function-uncurry-this");s.exports=n([].slice)},{"../internals/function-uncurry-this":268}],232:[function(i,s,r){var n=i("../internals/is-array"),o=i("../internals/is-constructor"),a=i("../internals/is-object"),l=i("../internals/well-known-symbol")("species"),c=Array;s.exports=function(u){var d;return n(u)&&(d=u.constructor,(o(d)&&(d===c||n(d.prototype))||a(d)&&(d=d[l])===null)&&(d=void 0)),d===void 0?c:d}},{"../internals/is-array":284,"../internals/is-constructor":286,"../internals/is-object":289,"../internals/well-known-symbol":357}],233:[function(i,s,r){var n=i("../internals/array-species-constructor");s.exports=function(o,a){return new(n(o))(a===0?0:a)}},{"../internals/array-species-constructor":232}],234:[function(i,s,r){var n=i("../internals/well-known-symbol")("iterator"),o=!1;try{var a=0,l={next:function(){return{done:!!a++}},return:function(){o=!0}};l[n]=function(){return this},Array.from(l,function(){throw 2})}catch{}s.exports=function(c,u){try{if(!u&&!o)return!1}catch{return!1}var d=!1;try{var h={};h[n]=function(){return{next:function(){return{done:d=!0}}}},c(h)}catch{}return d}},{"../internals/well-known-symbol":357}],235:[function(i,s,r){var n=i("../internals/function-uncurry-this"),o=n({}.toString),a=n("".slice);s.exports=function(l){return a(o(l),8,-1)}},{"../internals/function-uncurry-this":268}],236:[function(i,s,r){var n=i("../internals/to-string-tag-support"),o=i("../internals/is-callable"),a=i("../internals/classof-raw"),l=i("../internals/well-known-symbol")("toStringTag"),c=Object,u=a(function(){return arguments}())==="Arguments";s.exports=n?a:function(d){var h,p,f;return d===void 0?"Undefined":d===null?"Null":typeof(p=function(m,g){try{return m[g]}catch{}}(h=c(d),l))=="string"?p:u?a(h):(f=a(h))==="Object"&&o(h.callee)?"Arguments":f}},{"../internals/classof-raw":235,"../internals/is-callable":285,"../internals/to-string-tag-support":347,"../internals/well-known-symbol":357}],237:[function(i,s,r){var n=i("../internals/has-own-property"),o=i("../internals/own-keys"),a=i("../internals/object-get-own-property-descriptor"),l=i("../internals/object-define-property");s.exports=function(c,u,d){for(var h=o(u),p=l.f,f=a.f,m=0;m<h.length;m++){var g=h[m];n(c,g)||d&&n(d,g)||p(c,g,f(u,g))}}},{"../internals/has-own-property":275,"../internals/object-define-property":308,"../internals/object-get-own-property-descriptor":309,"../internals/own-keys":321}],238:[function(i,s,r){var n=i("../internals/well-known-symbol")("match");s.exports=function(o){var a=/./;try{"/./"[o](a)}catch{try{return a[n]=!1,"/./"[o](a)}catch{}}return!1}},{"../internals/well-known-symbol":357}],239:[function(i,s,r){var n=i("../internals/fails");s.exports=!n(function(){function o(){}return o.prototype.constructor=null,Object.getPrototypeOf(new o)!==o.prototype})},{"../internals/fails":260}],240:[function(i,s,r){s.exports=function(n,o){return{value:n,done:o}}},{}],241:[function(i,s,r){var n=i("../internals/descriptors"),o=i("../internals/object-define-property"),a=i("../internals/create-property-descriptor");s.exports=n?function(l,c,u){return o.f(l,c,a(1,u))}:function(l,c,u){return l[c]=u,l}},{"../internals/create-property-descriptor":242,"../internals/descriptors":247,"../internals/object-define-property":308}],242:[function(i,s,r){s.exports=function(n,o){return{enumerable:!(1&n),configurable:!(2&n),writable:!(4&n),value:o}}},{}],243:[function(i,s,r){var n=i("../internals/to-property-key"),o=i("../internals/object-define-property"),a=i("../internals/create-property-descriptor");s.exports=function(l,c,u){var d=n(c);d in l?o.f(l,d,a(0,u)):l[d]=u}},{"../internals/create-property-descriptor":242,"../internals/object-define-property":308,"../internals/to-property-key":346}],244:[function(i,s,r){var n=i("../internals/make-built-in"),o=i("../internals/object-define-property");s.exports=function(a,l,c){return c.get&&n(c.get,l,{getter:!0}),c.set&&n(c.set,l,{setter:!0}),o.f(a,l,c)}},{"../internals/make-built-in":300,"../internals/object-define-property":308}],245:[function(i,s,r){var n=i("../internals/is-callable"),o=i("../internals/object-define-property"),a=i("../internals/make-built-in"),l=i("../internals/define-global-property");s.exports=function(c,u,d,h){h||(h={});var p=h.enumerable,f=h.name!==void 0?h.name:u;if(n(d)&&a(d,f,h),h.global)p?c[u]=d:l(u,d);else{try{h.unsafe?c[u]&&(p=!0):delete c[u]}catch{}p?c[u]=d:o.f(c,u,{value:d,enumerable:!1,configurable:!h.nonConfigurable,writable:!h.nonWritable})}return c}},{"../internals/define-global-property":246,"../internals/is-callable":285,"../internals/make-built-in":300,"../internals/object-define-property":308}],246:[function(i,s,r){var n=i("../internals/global"),o=Object.defineProperty;s.exports=function(a,l){try{o(n,a,{value:l,configurable:!0,writable:!0})}catch{n[a]=l}return l}},{"../internals/global":274}],247:[function(i,s,r){var n=i("../internals/fails");s.exports=!n(function(){return Object.defineProperty({},1,{get:function(){return 7}})[1]!==7})},{"../internals/fails":260}],248:[function(i,s,r){var n=typeof document=="object"&&document.all,o=n===void 0&&n!==void 0;s.exports={all:n,IS_HTMLDDA:o}},{}],249:[function(i,s,r){var n=i("../internals/global"),o=i("../internals/is-object"),a=n.document,l=o(a)&&o(a.createElement);s.exports=function(c){return l?a.createElement(c):{}}},{"../internals/global":274,"../internals/is-object":289}],250:[function(i,s,r){var n=i("../internals/engine-is-deno"),o=i("../internals/engine-is-node");s.exports=!n&&!o&&typeof window=="object"&&typeof document=="object"},{"../internals/engine-is-deno":251,"../internals/engine-is-node":254}],251:[function(i,s,r){s.exports=typeof Deno=="object"&&Deno&&typeof Deno.version=="object"},{}],252:[function(i,s,r){var n=i("../internals/engine-user-agent");s.exports=/ipad|iphone|ipod/i.test(n)&&typeof Pebble<"u"},{"../internals/engine-user-agent":256}],253:[function(i,s,r){var n=i("../internals/engine-user-agent");s.exports=/(?:ipad|iphone|ipod).*applewebkit/i.test(n)},{"../internals/engine-user-agent":256}],254:[function(i,s,r){var n=i("../internals/global"),o=i("../internals/classof-raw");s.exports=o(n.process)==="process"},{"../internals/classof-raw":235,"../internals/global":274}],255:[function(i,s,r){var n=i("../internals/engine-user-agent");s.exports=/web0s(?!.*chrome)/i.test(n)},{"../internals/engine-user-agent":256}],256:[function(i,s,r){s.exports=typeof navigator<"u"&&String(navigator.userAgent)||""},{}],257:[function(i,s,r){var n,o,a=i("../internals/global"),l=i("../internals/engine-user-agent"),c=a.process,u=a.Deno,d=c&&c.versions||u&&u.version,h=d&&d.v8;h&&(o=(n=h.split("."))[0]>0&&n[0]<4?1:+(n[0]+n[1])),!o&&l&&(!(n=l.match(/Edge\/(\d+)/))||n[1]>=74)&&(n=l.match(/Chrome\/(\d+)/))&&(o=+n[1]),s.exports=o},{"../internals/engine-user-agent":256,"../internals/global":274}],258:[function(i,s,r){s.exports=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"]},{}],259:[function(i,s,r){var n=i("../internals/global"),o=i("../internals/object-get-own-property-descriptor").f,a=i("../internals/create-non-enumerable-property"),l=i("../internals/define-built-in"),c=i("../internals/define-global-property"),u=i("../internals/copy-constructor-properties"),d=i("../internals/is-forced");s.exports=function(h,p){var f,m,g,y,v,C=h.target,b=h.global,T=h.stat;if(f=b?n:T?n[C]||c(C,{}):(n[C]||{}).prototype)for(m in p){if(y=p[m],g=h.dontCallGetSet?(v=o(f,m))&&v.value:f[m],!d(b?m:C+(T?".":"#")+m,h.forced)&&g!==void 0){if(typeof y==typeof g)continue;u(y,g)}(h.sham||g&&g.sham)&&a(y,"sham",!0),l(f,m,y,h)}}},{"../internals/copy-constructor-properties":237,"../internals/create-non-enumerable-property":241,"../internals/define-built-in":245,"../internals/define-global-property":246,"../internals/global":274,"../internals/is-forced":287,"../internals/object-get-own-property-descriptor":309}],260:[function(i,s,r){s.exports=function(n){try{return!!n()}catch{return!0}}},{}],261:[function(i,s,r){var n=i("../internals/function-bind-native"),o=Function.prototype,a=o.apply,l=o.call;s.exports=typeof Reflect=="object"&&Reflect.apply||(n?l.bind(a):function(){return l.apply(a,arguments)})},{"../internals/function-bind-native":263}],262:[function(i,s,r){var n=i("../internals/function-uncurry-this-clause"),o=i("../internals/a-callable"),a=i("../internals/function-bind-native"),l=n(n.bind);s.exports=function(c,u){return o(c),u===void 0?c:a?l(c,u):function(){return c.apply(u,arguments)}}},{"../internals/a-callable":222,"../internals/function-bind-native":263,"../internals/function-uncurry-this-clause":267}],263:[function(i,s,r){var n=i("../internals/fails");s.exports=!n(function(){var o=(function(){}).bind();return typeof o!="function"||o.hasOwnProperty("prototype")})},{"../internals/fails":260}],264:[function(i,s,r){var n=i("../internals/function-bind-native"),o=Function.prototype.call;s.exports=n?o.bind(o):function(){return o.apply(o,arguments)}},{"../internals/function-bind-native":263}],265:[function(i,s,r){var n=i("../internals/descriptors"),o=i("../internals/has-own-property"),a=Function.prototype,l=n&&Object.getOwnPropertyDescriptor,c=o(a,"name"),u=c&&(function(){}).name==="something",d=c&&(!n||n&&l(a,"name").configurable);s.exports={EXISTS:c,PROPER:u,CONFIGURABLE:d}},{"../internals/descriptors":247,"../internals/has-own-property":275}],266:[function(i,s,r){var n=i("../internals/function-uncurry-this"),o=i("../internals/a-callable");s.exports=function(a,l,c){try{return n(o(Object.getOwnPropertyDescriptor(a,l)[c]))}catch{}}},{"../internals/a-callable":222,"../internals/function-uncurry-this":268}],267:[function(i,s,r){var n=i("../internals/classof-raw"),o=i("../internals/function-uncurry-this");s.exports=function(a){if(n(a)==="Function")return o(a)}},{"../internals/classof-raw":235,"../internals/function-uncurry-this":268}],268:[function(i,s,r){var n=i("../internals/function-bind-native"),o=Function.prototype,a=o.call,l=n&&o.bind.bind(a,a);s.exports=n?l:function(c){return function(){return a.apply(c,arguments)}}},{"../internals/function-bind-native":263}],269:[function(i,s,r){var n=i("../internals/global"),o=i("../internals/is-callable"),a=function(l){return o(l)?l:void 0};s.exports=function(l,c){return arguments.length<2?a(n[l]):n[l]&&n[l][c]}},{"../internals/global":274,"../internals/is-callable":285}],270:[function(i,s,r){var n=i("../internals/classof"),o=i("../internals/get-method"),a=i("../internals/is-null-or-undefined"),l=i("../internals/iterators"),c=i("../internals/well-known-symbol")("iterator");s.exports=function(u){if(!a(u))return o(u,c)||o(u,"@@iterator")||l[n(u)]}},{"../internals/classof":236,"../internals/get-method":273,"../internals/is-null-or-undefined":288,"../internals/iterators":298,"../internals/well-known-symbol":357}],271:[function(i,s,r){var n=i("../internals/function-call"),o=i("../internals/a-callable"),a=i("../internals/an-object"),l=i("../internals/try-to-string"),c=i("../internals/get-iterator-method"),u=TypeError;s.exports=function(d,h){var p=arguments.length<2?c(d):h;if(o(p))return a(n(p,d));throw new u(l(d)+" is not iterable")}},{"../internals/a-callable":222,"../internals/an-object":227,"../internals/function-call":264,"../internals/get-iterator-method":270,"../internals/try-to-string":349}],272:[function(i,s,r){var n=i("../internals/function-uncurry-this"),o=i("../internals/is-array"),a=i("../internals/is-callable"),l=i("../internals/classof-raw"),c=i("../internals/to-string"),u=n([].push);s.exports=function(d){if(a(d))return d;if(o(d)){for(var h=d.length,p=[],f=0;f<h;f++){var m=d[f];typeof m=="string"?u(p,m):typeof m!="number"&&l(m)!=="Number"&&l(m)!=="String"||u(p,c(m))}var g=p.length,y=!0;return function(v,C){if(y)return y=!1,C;if(o(this))return C;for(var b=0;b<g;b++)if(p[b]===v)return C}}}},{"../internals/classof-raw":235,"../internals/function-uncurry-this":268,"../internals/is-array":284,"../internals/is-callable":285,"../internals/to-string":348}],273:[function(i,s,r){var n=i("../internals/a-callable"),o=i("../internals/is-null-or-undefined");s.exports=function(a,l){var c=a[l];return o(c)?void 0:n(c)}},{"../internals/a-callable":222,"../internals/is-null-or-undefined":288}],274:[function(i,s,r){(function(n){(function(){var o=function(a){return a&&a.Math===Math&&a};s.exports=o(typeof globalThis=="object"&&globalThis)||o(typeof window=="object"&&window)||o(typeof self=="object"&&self)||o(typeof n=="object"&&n)||function(){return this}()||this||Function("return this")()}).call(this)}).call(this,typeof zt<"u"?zt:typeof self<"u"?self:typeof window<"u"?window:{})},{}],275:[function(i,s,r){var n=i("../internals/function-uncurry-this"),o=i("../internals/to-object"),a=n({}.hasOwnProperty);s.exports=Object.hasOwn||function(l,c){return a(o(l),c)}},{"../internals/function-uncurry-this":268,"../internals/to-object":344}],276:[function(i,s,r){s.exports={}},{}],277:[function(i,s,r){s.exports=function(n,o){try{arguments.length===1?console.error(n):console.error(n,o)}catch{}}},{}],278:[function(i,s,r){var n=i("../internals/get-built-in");s.exports=n("document","documentElement")},{"../internals/get-built-in":269}],279:[function(i,s,r){var n=i("../internals/descriptors"),o=i("../internals/fails"),a=i("../internals/document-create-element");s.exports=!n&&!o(function(){return Object.defineProperty(a("div"),"a",{get:function(){return 7}}).a!==7})},{"../internals/descriptors":247,"../internals/document-create-element":249,"../internals/fails":260}],280:[function(i,s,r){var n=i("../internals/function-uncurry-this"),o=i("../internals/fails"),a=i("../internals/classof-raw"),l=Object,c=n("".split);s.exports=o(function(){return!l("z").propertyIsEnumerable(0)})?function(u){return a(u)==="String"?c(u,""):l(u)}:l},{"../internals/classof-raw":235,"../internals/fails":260,"../internals/function-uncurry-this":268}],281:[function(i,s,r){var n=i("../internals/function-uncurry-this"),o=i("../internals/is-callable"),a=i("../internals/shared-store"),l=n(Function.toString);o(a.inspectSource)||(a.inspectSource=function(c){return l(c)}),s.exports=a.inspectSource},{"../internals/function-uncurry-this":268,"../internals/is-callable":285,"../internals/shared-store":333}],282:[function(i,s,r){var n,o,a,l=i("../internals/weak-map-basic-detection"),c=i("../internals/global"),u=i("../internals/is-object"),d=i("../internals/create-non-enumerable-property"),h=i("../internals/has-own-property"),p=i("../internals/shared-store"),f=i("../internals/shared-key"),m=i("../internals/hidden-keys"),g=c.TypeError,y=c.WeakMap;if(l||p.state){var v=p.state||(p.state=new y);v.get=v.get,v.has=v.has,v.set=v.set,n=function(b,T){if(v.has(b))throw new g("Object already initialized");return T.facade=b,v.set(b,T),T},o=function(b){return v.get(b)||{}},a=function(b){return v.has(b)}}else{var C=f("state");m[C]=!0,n=function(b,T){if(h(b,C))throw new g("Object already initialized");return T.facade=b,d(b,C,T),T},o=function(b){return h(b,C)?b[C]:{}},a=function(b){return h(b,C)}}s.exports={set:n,get:o,has:a,enforce:function(b){return a(b)?o(b):n(b,{})},getterFor:function(b){return function(T){var A;if(!u(T)||(A=o(T)).type!==b)throw new g("Incompatible receiver, "+b+" required");return A}}}},{"../internals/create-non-enumerable-property":241,"../internals/global":274,"../internals/has-own-property":275,"../internals/hidden-keys":276,"../internals/is-object":289,"../internals/shared-key":332,"../internals/shared-store":333,"../internals/weak-map-basic-detection":354}],283:[function(i,s,r){var n=i("../internals/well-known-symbol"),o=i("../internals/iterators"),a=n("iterator"),l=Array.prototype;s.exports=function(c){return c!==void 0&&(o.Array===c||l[a]===c)}},{"../internals/iterators":298,"../internals/well-known-symbol":357}],284:[function(i,s,r){var n=i("../internals/classof-raw");s.exports=Array.isArray||function(o){return n(o)==="Array"}},{"../internals/classof-raw":235}],285:[function(i,s,r){var n=i("../internals/document-all"),o=n.all;s.exports=n.IS_HTMLDDA?function(a){return typeof a=="function"||a===o}:function(a){return typeof a=="function"}},{"../internals/document-all":248}],286:[function(i,s,r){var n=i("../internals/function-uncurry-this"),o=i("../internals/fails"),a=i("../internals/is-callable"),l=i("../internals/classof"),c=i("../internals/get-built-in"),u=i("../internals/inspect-source"),d=function(){},h=[],p=c("Reflect","construct"),f=/^\s*(?:class|function)\b/,m=n(f.exec),g=!f.test(d),y=function(C){if(!a(C))return!1;try{return p(d,h,C),!0}catch{return!1}},v=function(C){if(!a(C))return!1;switch(l(C)){case"AsyncFunction":case"GeneratorFunction":case"AsyncGeneratorFunction":return!1}try{return g||!!m(f,u(C))}catch{return!0}};v.sham=!0,s.exports=!p||o(function(){var C;return y(y.call)||!y(Object)||!y(function(){C=!0})||C})?v:y},{"../internals/classof":236,"../internals/fails":260,"../internals/function-uncurry-this":268,"../internals/get-built-in":269,"../internals/inspect-source":281,"../internals/is-callable":285}],287:[function(i,s,r){var n=i("../internals/fails"),o=i("../internals/is-callable"),a=/#|\.prototype\./,l=function(p,f){var m=u[c(p)];return m===h||m!==d&&(o(f)?n(f):!!f)},c=l.normalize=function(p){return String(p).replace(a,".").toLowerCase()},u=l.data={},d=l.NATIVE="N",h=l.POLYFILL="P";s.exports=l},{"../internals/fails":260,"../internals/is-callable":285}],288:[function(i,s,r){s.exports=function(n){return n==null}},{}],289:[function(i,s,r){var n=i("../internals/is-callable"),o=i("../internals/document-all"),a=o.all;s.exports=o.IS_HTMLDDA?function(l){return typeof l=="object"?l!==null:n(l)||l===a}:function(l){return typeof l=="object"?l!==null:n(l)}},{"../internals/document-all":248,"../internals/is-callable":285}],290:[function(i,s,r){s.exports=!1},{}],291:[function(i,s,r){var n=i("../internals/is-object"),o=i("../internals/classof-raw"),a=i("../internals/well-known-symbol")("match");s.exports=function(l){var c;return n(l)&&((c=l[a])!==void 0?!!c:o(l)==="RegExp")}},{"../internals/classof-raw":235,"../internals/is-object":289,"../internals/well-known-symbol":357}],292:[function(i,s,r){var n=i("../internals/get-built-in"),o=i("../internals/is-callable"),a=i("../internals/object-is-prototype-of"),l=i("../internals/use-symbol-as-uid"),c=Object;s.exports=l?function(u){return typeof u=="symbol"}:function(u){var d=n("Symbol");return o(d)&&a(d.prototype,c(u))}},{"../internals/get-built-in":269,"../internals/is-callable":285,"../internals/object-is-prototype-of":314,"../internals/use-symbol-as-uid":351}],293:[function(i,s,r){var n=i("../internals/function-bind-context"),o=i("../internals/function-call"),a=i("../internals/an-object"),l=i("../internals/try-to-string"),c=i("../internals/is-array-iterator-method"),u=i("../internals/length-of-array-like"),d=i("../internals/object-is-prototype-of"),h=i("../internals/get-iterator"),p=i("../internals/get-iterator-method"),f=i("../internals/iterator-close"),m=TypeError,g=function(v,C){this.stopped=v,this.result=C},y=g.prototype;s.exports=function(v,C,b){var T,A,I,D,F,B,U,H=b&&b.that,R=!(!b||!b.AS_ENTRIES),L=!(!b||!b.IS_RECORD),_=!(!b||!b.IS_ITERATOR),w=!(!b||!b.INTERRUPTED),S=n(C,H),x=function(M){return T&&f(T,"normal",M),new g(!0,M)},E=function(M){return R?(a(M),w?S(M[0],M[1],x):S(M[0],M[1])):w?S(M,x):S(M)};if(L)T=v.iterator;else if(_)T=v;else{if(!(A=p(v)))throw new m(l(v)+" is not iterable");if(c(A)){for(I=0,D=u(v);D>I;I++)if((F=E(v[I]))&&d(y,F))return F;return new g(!1)}T=h(v,A)}for(B=L?v.next:T.next;!(U=o(B,T)).done;){try{F=E(U.value)}catch(M){f(T,"throw",M)}if(typeof F=="object"&&F&&d(y,F))return F}return new g(!1)}},{"../internals/an-object":227,"../internals/function-bind-context":262,"../internals/function-call":264,"../internals/get-iterator":271,"../internals/get-iterator-method":270,"../internals/is-array-iterator-method":283,"../internals/iterator-close":294,"../internals/length-of-array-like":299,"../internals/object-is-prototype-of":314,"../internals/try-to-string":349}],294:[function(i,s,r){var n=i("../internals/function-call"),o=i("../internals/an-object"),a=i("../internals/get-method");s.exports=function(l,c,u){var d,h;o(l);try{if(!(d=a(l,"return"))){if(c==="throw")throw u;return u}d=n(d,l)}catch(p){h=!0,d=p}if(c==="throw")throw u;if(h)throw d;return o(d),u}},{"../internals/an-object":227,"../internals/function-call":264,"../internals/get-method":273}],295:[function(i,s,r){var n=i("../internals/iterators-core").IteratorPrototype,o=i("../internals/object-create"),a=i("../internals/create-property-descriptor"),l=i("../internals/set-to-string-tag"),c=i("../internals/iterators"),u=function(){return this};s.exports=function(d,h,p,f){var m=h+" Iterator";return d.prototype=o(n,{next:a(+!f,p)}),l(d,m,!1,!0),c[m]=u,d}},{"../internals/create-property-descriptor":242,"../internals/iterators":298,"../internals/iterators-core":297,"../internals/object-create":306,"../internals/set-to-string-tag":331}],296:[function(i,s,r){var n=i("../internals/export"),o=i("../internals/function-call"),a=i("../internals/is-pure"),l=i("../internals/function-name"),c=i("../internals/is-callable"),u=i("../internals/iterator-create-constructor"),d=i("../internals/object-get-prototype-of"),h=i("../internals/object-set-prototype-of"),p=i("../internals/set-to-string-tag"),f=i("../internals/create-non-enumerable-property"),m=i("../internals/define-built-in"),g=i("../internals/well-known-symbol"),y=i("../internals/iterators"),v=i("../internals/iterators-core"),C=l.PROPER,b=l.CONFIGURABLE,T=v.IteratorPrototype,A=v.BUGGY_SAFARI_ITERATORS,I=g("iterator"),D=function(){return this};s.exports=function(F,B,U,H,R,L,_){u(U,B,H);var w,S,x,E=function(G){if(G===R&&$)return $;if(!A&&G&&G in V)return V[G];switch(G){case"keys":case"values":case"entries":return function(){return new U(this,G)}}return function(){return new U(this)}},M=B+" Iterator",O=!1,V=F.prototype,Y=V[I]||V["@@iterator"]||R&&V[R],$=!A&&Y||E(R),J=B==="Array"&&V.entries||Y;if(J&&(w=d(J.call(new F)))!==Object.prototype&&w.next&&(a||d(w)===T||(h?h(w,T):c(w[I])||m(w,I,D)),p(w,M,!0,!0),a&&(y[M]=D)),C&&R==="values"&&Y&&Y.name!=="values"&&(!a&&b?f(V,"name","values"):(O=!0,$=function(){return o(Y,this)})),R)if(S={values:E("values"),keys:L?$:E("keys"),entries:E("entries")},_)for(x in S)(A||O||!(x in V))&&m(V,x,S[x]);else n({target:B,proto:!0,forced:A||O},S);return a&&!_||V[I]===$||m(V,I,$,{name:R}),y[B]=$,S}},{"../internals/create-non-enumerable-property":241,"../internals/define-built-in":245,"../internals/export":259,"../internals/function-call":264,"../internals/function-name":265,"../internals/is-callable":285,"../internals/is-pure":290,"../internals/iterator-create-constructor":295,"../internals/iterators":298,"../internals/iterators-core":297,"../internals/object-get-prototype-of":313,"../internals/object-set-prototype-of":318,"../internals/set-to-string-tag":331,"../internals/well-known-symbol":357}],297:[function(i,s,r){var n,o,a,l=i("../internals/fails"),c=i("../internals/is-callable"),u=i("../internals/is-object"),d=i("../internals/object-create"),h=i("../internals/object-get-prototype-of"),p=i("../internals/define-built-in"),f=i("../internals/well-known-symbol"),m=i("../internals/is-pure"),g=f("iterator"),y=!1;[].keys&&("next"in(a=[].keys())?(o=h(h(a)))!==Object.prototype&&(n=o):y=!0),!u(n)||l(function(){var v={};return n[g].call(v)!==v})?n={}:m&&(n=d(n)),c(n[g])||p(n,g,function(){return this}),s.exports={IteratorPrototype:n,BUGGY_SAFARI_ITERATORS:y}},{"../internals/define-built-in":245,"../internals/fails":260,"../internals/is-callable":285,"../internals/is-object":289,"../internals/is-pure":290,"../internals/object-create":306,"../internals/object-get-prototype-of":313,"../internals/well-known-symbol":357}],298:[function(i,s,r){arguments[4][276][0].apply(r,arguments)},{dup:276}],299:[function(i,s,r){var n=i("../internals/to-length");s.exports=function(o){return n(o.length)}},{"../internals/to-length":343}],300:[function(i,s,r){var n=i("../internals/function-uncurry-this"),o=i("../internals/fails"),a=i("../internals/is-callable"),l=i("../internals/has-own-property"),c=i("../internals/descriptors"),u=i("../internals/function-name").CONFIGURABLE,d=i("../internals/inspect-source"),h=i("../internals/internal-state"),p=h.enforce,f=h.get,m=String,g=Object.defineProperty,y=n("".slice),v=n("".replace),C=n([].join),b=c&&!o(function(){return g(function(){},"length",{value:8}).length!==8}),T=String(String).split("String"),A=s.exports=function(I,D,F){y(m(D),0,7)==="Symbol("&&(D="["+v(m(D),/^Symbol\(([^)]*)\)/,"$1")+"]"),F&&F.getter&&(D="get "+D),F&&F.setter&&(D="set "+D),(!l(I,"name")||u&&I.name!==D)&&(c?g(I,"name",{value:D,configurable:!0}):I.name=D),b&&F&&l(F,"arity")&&I.length!==F.arity&&g(I,"length",{value:F.arity});try{F&&l(F,"constructor")&&F.constructor?c&&g(I,"prototype",{writable:!1}):I.prototype&&(I.prototype=void 0)}catch{}var B=p(I);return l(B,"source")||(B.source=C(T,typeof D=="string"?D:"")),I};Function.prototype.toString=A(function(){return a(this)&&f(this).source||d(this)},"toString")},{"../internals/descriptors":247,"../internals/fails":260,"../internals/function-name":265,"../internals/function-uncurry-this":268,"../internals/has-own-property":275,"../internals/inspect-source":281,"../internals/internal-state":282,"../internals/is-callable":285}],301:[function(i,s,r){var n=Math.ceil,o=Math.floor;s.exports=Math.trunc||function(a){var l=+a;return(l>0?o:n)(l)}},{}],302:[function(i,s,r){var n,o,a,l,c,u=i("../internals/global"),d=i("../internals/function-bind-context"),h=i("../internals/object-get-own-property-descriptor").f,p=i("../internals/task").set,f=i("../internals/queue"),m=i("../internals/engine-is-ios"),g=i("../internals/engine-is-ios-pebble"),y=i("../internals/engine-is-webos-webkit"),v=i("../internals/engine-is-node"),C=u.MutationObserver||u.WebKitMutationObserver,b=u.document,T=u.process,A=u.Promise,I=h(u,"queueMicrotask"),D=I&&I.value;if(!D){var F=new f,B=function(){var U,H;for(v&&(U=T.domain)&&U.exit();H=F.get();)try{H()}catch(R){throw F.head&&n(),R}U&&U.enter()};m||v||y||!C||!b?!g&&A&&A.resolve?((l=A.resolve(void 0)).constructor=A,c=d(l.then,l),n=function(){c(B)}):v?n=function(){T.nextTick(B)}:(p=d(p,u),n=function(){p(B)}):(o=!0,a=b.createTextNode(""),new C(B).observe(a,{characterData:!0}),n=function(){a.data=o=!o}),D=function(U){F.head||n(),F.add(U)}}s.exports=D},{"../internals/engine-is-ios":253,"../internals/engine-is-ios-pebble":252,"../internals/engine-is-node":254,"../internals/engine-is-webos-webkit":255,"../internals/function-bind-context":262,"../internals/global":274,"../internals/object-get-own-property-descriptor":309,"../internals/queue":328,"../internals/task":339}],303:[function(i,s,r){var n=i("../internals/a-callable"),o=TypeError,a=function(l){var c,u;this.promise=new l(function(d,h){if(c!==void 0||u!==void 0)throw new o("Bad Promise constructor");c=d,u=h}),this.resolve=n(c),this.reject=n(u)};s.exports.f=function(l){return new a(l)}},{"../internals/a-callable":222}],304:[function(i,s,r){var n=i("../internals/is-regexp"),o=TypeError;s.exports=function(a){if(n(a))throw new o("The method doesn't accept regular expressions");return a}},{"../internals/is-regexp":291}],305:[function(i,s,r){var n=i("../internals/descriptors"),o=i("../internals/function-uncurry-this"),a=i("../internals/function-call"),l=i("../internals/fails"),c=i("../internals/object-keys"),u=i("../internals/object-get-own-property-symbols"),d=i("../internals/object-property-is-enumerable"),h=i("../internals/to-object"),p=i("../internals/indexed-object"),f=Object.assign,m=Object.defineProperty,g=o([].concat);s.exports=!f||l(function(){if(n&&f({b:1},f(m({},"a",{enumerable:!0,get:function(){m(this,"b",{value:3,enumerable:!1})}}),{b:2})).b!==1)return!0;var y={},v={},C=Symbol("assign detection");return y[C]=7,"abcdefghijklmnopqrst".split("").forEach(function(b){v[b]=b}),f({},y)[C]!==7||c(f({},v)).join("")!=="abcdefghijklmnopqrst"})?function(y,v){for(var C=h(y),b=arguments.length,T=1,A=u.f,I=d.f;b>T;)for(var D,F=p(arguments[T++]),B=A?g(c(F),A(F)):c(F),U=B.length,H=0;U>H;)D=B[H++],n&&!a(I,F,D)||(C[D]=F[D]);return C}:f},{"../internals/descriptors":247,"../internals/fails":260,"../internals/function-call":264,"../internals/function-uncurry-this":268,"../internals/indexed-object":280,"../internals/object-get-own-property-symbols":312,"../internals/object-keys":316,"../internals/object-property-is-enumerable":317,"../internals/to-object":344}],306:[function(i,s,r){var n,o=i("../internals/an-object"),a=i("../internals/object-define-properties"),l=i("../internals/enum-bug-keys"),c=i("../internals/hidden-keys"),u=i("../internals/html"),d=i("../internals/document-create-element"),h=i("../internals/shared-key"),p=h("IE_PROTO"),f=function(){},m=function(v){return"<script>"+v+"<\/script>"},g=function(v){v.write(m("")),v.close();var C=v.parentWindow.Object;return v=null,C},y=function(){try{n=new ActiveXObject("htmlfile")}catch{}var v,C;y=typeof document<"u"?document.domain&&n?g(n):((C=d("iframe")).style.display="none",u.appendChild(C),C.src="javascript:",(v=C.contentWindow.document).open(),v.write(m("document.F=Object")),v.close(),v.F):g(n);for(var b=l.length;b--;)delete y.prototype[l[b]];return y()};c[p]=!0,s.exports=Object.create||function(v,C){var b;return v!==null?(f.prototype=o(v),b=new f,f.prototype=null,b[p]=v):b=y(),C===void 0?b:a.f(b,C)}},{"../internals/an-object":227,"../internals/document-create-element":249,"../internals/enum-bug-keys":258,"../internals/hidden-keys":276,"../internals/html":278,"../internals/object-define-properties":307,"../internals/shared-key":332}],307:[function(i,s,r){var n=i("../internals/descriptors"),o=i("../internals/v8-prototype-define-bug"),a=i("../internals/object-define-property"),l=i("../internals/an-object"),c=i("../internals/to-indexed-object"),u=i("../internals/object-keys");r.f=n&&!o?Object.defineProperties:function(d,h){l(d);for(var p,f=c(h),m=u(h),g=m.length,y=0;g>y;)a.f(d,p=m[y++],f[p]);return d}},{"../internals/an-object":227,"../internals/descriptors":247,"../internals/object-define-property":308,"../internals/object-keys":316,"../internals/to-indexed-object":341,"../internals/v8-prototype-define-bug":352}],308:[function(i,s,r){var n=i("../internals/descriptors"),o=i("../internals/ie8-dom-define"),a=i("../internals/v8-prototype-define-bug"),l=i("../internals/an-object"),c=i("../internals/to-property-key"),u=TypeError,d=Object.defineProperty,h=Object.getOwnPropertyDescriptor;r.f=n?a?function(p,f,m){if(l(p),f=c(f),l(m),typeof p=="function"&&f==="prototype"&&"value"in m&&"writable"in m&&!m.writable){var g=h(p,f);g&&g.writable&&(p[f]=m.value,m={configurable:"configurable"in m?m.configurable:g.configurable,enumerable:"enumerable"in m?m.enumerable:g.enumerable,writable:!1})}return d(p,f,m)}:d:function(p,f,m){if(l(p),f=c(f),l(m),o)try{return d(p,f,m)}catch{}if("get"in m||"set"in m)throw new u("Accessors not supported");return"value"in m&&(p[f]=m.value),p}},{"../internals/an-object":227,"../internals/descriptors":247,"../internals/ie8-dom-define":279,"../internals/to-property-key":346,"../internals/v8-prototype-define-bug":352}],309:[function(i,s,r){var n=i("../internals/descriptors"),o=i("../internals/function-call"),a=i("../internals/object-property-is-enumerable"),l=i("../internals/create-property-descriptor"),c=i("../internals/to-indexed-object"),u=i("../internals/to-property-key"),d=i("../internals/has-own-property"),h=i("../internals/ie8-dom-define"),p=Object.getOwnPropertyDescriptor;r.f=n?p:function(f,m){if(f=c(f),m=u(m),h)try{return p(f,m)}catch{}if(d(f,m))return l(!o(a.f,f,m),f[m])}},{"../internals/create-property-descriptor":242,"../internals/descriptors":247,"../internals/function-call":264,"../internals/has-own-property":275,"../internals/ie8-dom-define":279,"../internals/object-property-is-enumerable":317,"../internals/to-indexed-object":341,"../internals/to-property-key":346}],310:[function(i,s,r){var n=i("../internals/classof-raw"),o=i("../internals/to-indexed-object"),a=i("../internals/object-get-own-property-names").f,l=i("../internals/array-slice-simple"),c=typeof window=="object"&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[];s.exports.f=function(u){return c&&n(u)==="Window"?function(d){try{return a(d)}catch{return l(c)}}(u):a(o(u))}},{"../internals/array-slice-simple":230,"../internals/classof-raw":235,"../internals/object-get-own-property-names":311,"../internals/to-indexed-object":341}],311:[function(i,s,r){var n=i("../internals/object-keys-internal"),o=i("../internals/enum-bug-keys").concat("length","prototype");r.f=Object.getOwnPropertyNames||function(a){return n(a,o)}},{"../internals/enum-bug-keys":258,"../internals/object-keys-internal":315}],312:[function(i,s,r){r.f=Object.getOwnPropertySymbols},{}],313:[function(i,s,r){var n=i("../internals/has-own-property"),o=i("../internals/is-callable"),a=i("../internals/to-object"),l=i("../internals/shared-key"),c=i("../internals/correct-prototype-getter"),u=l("IE_PROTO"),d=Object,h=d.prototype;s.exports=c?d.getPrototypeOf:function(p){var f=a(p);if(n(f,u))return f[u];var m=f.constructor;return o(m)&&f instanceof m?m.prototype:f instanceof d?h:null}},{"../internals/correct-prototype-getter":239,"../internals/has-own-property":275,"../internals/is-callable":285,"../internals/shared-key":332,"../internals/to-object":344}],314:[function(i,s,r){var n=i("../internals/function-uncurry-this");s.exports=n({}.isPrototypeOf)},{"../internals/function-uncurry-this":268}],315:[function(i,s,r){var n=i("../internals/function-uncurry-this"),o=i("../internals/has-own-property"),a=i("../internals/to-indexed-object"),l=i("../internals/array-includes").indexOf,c=i("../internals/hidden-keys"),u=n([].push);s.exports=function(d,h){var p,f=a(d),m=0,g=[];for(p in f)!o(c,p)&&o(f,p)&&u(g,p);for(;h.length>m;)o(f,p=h[m++])&&(~l(g,p)||u(g,p));return g}},{"../internals/array-includes":228,"../internals/function-uncurry-this":268,"../internals/has-own-property":275,"../internals/hidden-keys":276,"../internals/to-indexed-object":341}],316:[function(i,s,r){var n=i("../internals/object-keys-internal"),o=i("../internals/enum-bug-keys");s.exports=Object.keys||function(a){return n(a,o)}},{"../internals/enum-bug-keys":258,"../internals/object-keys-internal":315}],317:[function(i,s,r){var n={}.propertyIsEnumerable,o=Object.getOwnPropertyDescriptor,a=o&&!n.call({1:2},1);r.f=a?function(l){var c=o(this,l);return!!c&&c.enumerable}:n},{}],318:[function(i,s,r){var n=i("../internals/function-uncurry-this-accessor"),o=i("../internals/an-object"),a=i("../internals/a-possible-prototype");s.exports=Object.setPrototypeOf||("__proto__"in{}?function(){var l,c=!1,u={};try{(l=n(Object.prototype,"__proto__","set"))(u,[]),c=u instanceof Array}catch{}return function(d,h){return o(d),a(h),c?l(d,h):d.__proto__=h,d}}():void 0)},{"../internals/a-possible-prototype":224,"../internals/an-object":227,"../internals/function-uncurry-this-accessor":266}],319:[function(i,s,r){var n=i("../internals/descriptors"),o=i("../internals/fails"),a=i("../internals/function-uncurry-this"),l=i("../internals/object-get-prototype-of"),c=i("../internals/object-keys"),u=i("../internals/to-indexed-object"),d=a(i("../internals/object-property-is-enumerable").f),h=a([].push),p=n&&o(function(){var m=Object.create(null);return m[2]=2,!d(m,2)}),f=function(m){return function(g){for(var y,v=u(g),C=c(v),b=p&&l(v)===null,T=C.length,A=0,I=[];T>A;)y=C[A++],n&&!(b?y in v:d(v,y))||h(I,m?[y,v[y]]:v[y]);return I}};s.exports={entries:f(!0),values:f(!1)}},{"../internals/descriptors":247,"../internals/fails":260,"../internals/function-uncurry-this":268,"../internals/object-get-prototype-of":313,"../internals/object-keys":316,"../internals/object-property-is-enumerable":317,"../internals/to-indexed-object":341}],320:[function(i,s,r){var n=i("../internals/function-call"),o=i("../internals/is-callable"),a=i("../internals/is-object"),l=TypeError;s.exports=function(c,u){var d,h;if(u==="string"&&o(d=c.toString)&&!a(h=n(d,c))||o(d=c.valueOf)&&!a(h=n(d,c))||u!=="string"&&o(d=c.toString)&&!a(h=n(d,c)))return h;throw new l("Can't convert object to primitive value")}},{"../internals/function-call":264,"../internals/is-callable":285,"../internals/is-object":289}],321:[function(i,s,r){var n=i("../internals/get-built-in"),o=i("../internals/function-uncurry-this"),a=i("../internals/object-get-own-property-names"),l=i("../internals/object-get-own-property-symbols"),c=i("../internals/an-object"),u=o([].concat);s.exports=n("Reflect","ownKeys")||function(d){var h=a.f(c(d)),p=l.f;return p?u(h,p(d)):h}},{"../internals/an-object":227,"../internals/function-uncurry-this":268,"../internals/get-built-in":269,"../internals/object-get-own-property-names":311,"../internals/object-get-own-property-symbols":312}],322:[function(i,s,r){var n=i("../internals/global");s.exports=n},{"../internals/global":274}],323:[function(i,s,r){s.exports=function(n){try{return{error:!1,value:n()}}catch(o){return{error:!0,value:o}}}},{}],324:[function(i,s,r){var n=i("../internals/global"),o=i("../internals/promise-native-constructor"),a=i("../internals/is-callable"),l=i("../internals/is-forced"),c=i("../internals/inspect-source"),u=i("../internals/well-known-symbol"),d=i("../internals/engine-is-browser"),h=i("../internals/engine-is-deno"),p=i("../internals/is-pure"),f=i("../internals/engine-v8-version"),m=o&&o.prototype,g=u("species"),y=!1,v=a(n.PromiseRejectionEvent),C=l("Promise",function(){var b=c(o),T=b!==String(o);if(!T&&f===66||p&&(!m.catch||!m.finally))return!0;if(!f||f<51||!/native code/.test(b)){var A=new o(function(D){D(1)}),I=function(D){D(function(){},function(){})};if((A.constructor={})[g]=I,!(y=A.then(function(){})instanceof I))return!0}return!T&&(d||h)&&!v});s.exports={CONSTRUCTOR:C,REJECTION_EVENT:v,SUBCLASSING:y}},{"../internals/engine-is-browser":250,"../internals/engine-is-deno":251,"../internals/engine-v8-version":257,"../internals/global":274,"../internals/inspect-source":281,"../internals/is-callable":285,"../internals/is-forced":287,"../internals/is-pure":290,"../internals/promise-native-constructor":325,"../internals/well-known-symbol":357}],325:[function(i,s,r){var n=i("../internals/global");s.exports=n.Promise},{"../internals/global":274}],326:[function(i,s,r){var n=i("../internals/an-object"),o=i("../internals/is-object"),a=i("../internals/new-promise-capability");s.exports=function(l,c){if(n(l),o(c)&&c.constructor===l)return c;var u=a.f(l);return(0,u.resolve)(c),u.promise}},{"../internals/an-object":227,"../internals/is-object":289,"../internals/new-promise-capability":303}],327:[function(i,s,r){var n=i("../internals/promise-native-constructor"),o=i("../internals/check-correctness-of-iteration"),a=i("../internals/promise-constructor-detection").CONSTRUCTOR;s.exports=a||!o(function(l){n.all(l).then(void 0,function(){})})},{"../internals/check-correctness-of-iteration":234,"../internals/promise-constructor-detection":324,"../internals/promise-native-constructor":325}],328:[function(i,s,r){var n=function(){this.head=null,this.tail=null};n.prototype={add:function(o){var a={item:o,next:null},l=this.tail;l?l.next=a:this.head=a,this.tail=a},get:function(){var o=this.head;if(o)return(this.head=o.next)===null&&(this.tail=null),o.item}},s.exports=n},{}],329:[function(i,s,r){var n=i("../internals/is-null-or-undefined"),o=TypeError;s.exports=function(a){if(n(a))throw new o("Can't call method on "+a);return a}},{"../internals/is-null-or-undefined":288}],330:[function(i,s,r){var n=i("../internals/get-built-in"),o=i("../internals/define-built-in-accessor"),a=i("../internals/well-known-symbol"),l=i("../internals/descriptors"),c=a("species");s.exports=function(u){var d=n(u);l&&d&&!d[c]&&o(d,c,{configurable:!0,get:function(){return this}})}},{"../internals/define-built-in-accessor":244,"../internals/descriptors":247,"../internals/get-built-in":269,"../internals/well-known-symbol":357}],331:[function(i,s,r){var n=i("../internals/object-define-property").f,o=i("../internals/has-own-property"),a=i("../internals/well-known-symbol")("toStringTag");s.exports=function(l,c,u){l&&!u&&(l=l.prototype),l&&!o(l,a)&&n(l,a,{configurable:!0,value:c})}},{"../internals/has-own-property":275,"../internals/object-define-property":308,"../internals/well-known-symbol":357}],332:[function(i,s,r){var n=i("../internals/shared"),o=i("../internals/uid"),a=n("keys");s.exports=function(l){return a[l]||(a[l]=o(l))}},{"../internals/shared":334,"../internals/uid":350}],333:[function(i,s,r){var n=i("../internals/global"),o=i("../internals/define-global-property"),a=n["__core-js_shared__"]||o("__core-js_shared__",{});s.exports=a},{"../internals/define-global-property":246,"../internals/global":274}],334:[function(i,s,r){var n=i("../internals/is-pure"),o=i("../internals/shared-store");(s.exports=function(a,l){return o[a]||(o[a]=l!==void 0?l:{})})("versions",[]).push({version:"3.33.0",mode:n?"pure":"global",copyright:" 2014-2023 Denis Pushkarev (zloirock.ru)",license:"https://github.com/zloirock/core-js/blob/v3.33.0/LICENSE",source:"https://github.com/zloirock/core-js"})},{"../internals/is-pure":290,"../internals/shared-store":333}],335:[function(i,s,r){var n=i("../internals/an-object"),o=i("../internals/a-constructor"),a=i("../internals/is-null-or-undefined"),l=i("../internals/well-known-symbol")("species");s.exports=function(c,u){var d,h=n(c).constructor;return h===void 0||a(d=n(h)[l])?u:o(d)}},{"../internals/a-constructor":223,"../internals/an-object":227,"../internals/is-null-or-undefined":288,"../internals/well-known-symbol":357}],336:[function(i,s,r){var n=i("../internals/engine-v8-version"),o=i("../internals/fails"),a=i("../internals/global").String;s.exports=!!Object.getOwnPropertySymbols&&!o(function(){var l=Symbol("symbol detection");return!a(l)||!(Object(l)instanceof Symbol)||!Symbol.sham&&n&&n<41})},{"../internals/engine-v8-version":257,"../internals/fails":260,"../internals/global":274}],337:[function(i,s,r){var n=i("../internals/function-call"),o=i("../internals/get-built-in"),a=i("../internals/well-known-symbol"),l=i("../internals/define-built-in");s.exports=function(){var c=o("Symbol"),u=c&&c.prototype,d=u&&u.valueOf,h=a("toPrimitive");u&&!u[h]&&l(u,h,function(p){return n(d,this)},{arity:1})}},{"../internals/define-built-in":245,"../internals/function-call":264,"../internals/get-built-in":269,"../internals/well-known-symbol":357}],338:[function(i,s,r){var n=i("../internals/symbol-constructor-detection");s.exports=n&&!!Symbol.for&&!!Symbol.keyFor},{"../internals/symbol-constructor-detection":336}],339:[function(i,s,r){var n,o,a,l,c=i("../internals/global"),u=i("../internals/function-apply"),d=i("../internals/function-bind-context"),h=i("../internals/is-callable"),p=i("../internals/has-own-property"),f=i("../internals/fails"),m=i("../internals/html"),g=i("../internals/array-slice"),y=i("../internals/document-create-element"),v=i("../internals/validate-arguments-length"),C=i("../internals/engine-is-ios"),b=i("../internals/engine-is-node"),T=c.setImmediate,A=c.clearImmediate,I=c.process,D=c.Dispatch,F=c.Function,B=c.MessageChannel,U=c.String,H=0,R={};f(function(){n=c.location});var L=function(x){if(p(R,x)){var E=R[x];delete R[x],E()}},_=function(x){return function(){L(x)}},w=function(x){L(x.data)},S=function(x){c.postMessage(U(x),n.protocol+"//"+n.host)};T&&A||(T=function(x){v(arguments.length,1);var E=h(x)?x:F(x),M=g(arguments,1);return R[++H]=function(){u(E,void 0,M)},o(H),H},A=function(x){delete R[x]},b?o=function(x){I.nextTick(_(x))}:D&&D.now?o=function(x){D.now(_(x))}:B&&!C?(l=(a=new B).port2,a.port1.onmessage=w,o=d(l.postMessage,l)):c.addEventListener&&h(c.postMessage)&&!c.importScripts&&n&&n.protocol!=="file:"&&!f(S)?(o=S,c.addEventListener("message",w,!1)):o="onreadystatechange"in y("script")?function(x){m.appendChild(y("script")).onreadystatechange=function(){m.removeChild(this),L(x)}}:function(x){setTimeout(_(x),0)}),s.exports={set:T,clear:A}},{"../internals/array-slice":231,"../internals/document-create-element":249,"../internals/engine-is-ios":253,"../internals/engine-is-node":254,"../internals/fails":260,"../internals/function-apply":261,"../internals/function-bind-context":262,"../internals/global":274,"../internals/has-own-property":275,"../internals/html":278,"../internals/is-callable":285,"../internals/validate-arguments-length":353}],340:[function(i,s,r){var n=i("../internals/to-integer-or-infinity"),o=Math.max,a=Math.min;s.exports=function(l,c){var u=n(l);return u<0?o(u+c,0):a(u,c)}},{"../internals/to-integer-or-infinity":342}],341:[function(i,s,r){var n=i("../internals/indexed-object"),o=i("../internals/require-object-coercible");s.exports=function(a){return n(o(a))}},{"../internals/indexed-object":280,"../internals/require-object-coercible":329}],342:[function(i,s,r){var n=i("../internals/math-trunc");s.exports=function(o){var a=+o;return a!=a||a===0?0:n(a)}},{"../internals/math-trunc":301}],343:[function(i,s,r){var n=i("../internals/to-integer-or-infinity"),o=Math.min;s.exports=function(a){return a>0?o(n(a),9007199254740991):0}},{"../internals/to-integer-or-infinity":342}],344:[function(i,s,r){var n=i("../internals/require-object-coercible"),o=Object;s.exports=function(a){return o(n(a))}},{"../internals/require-object-coercible":329}],345:[function(i,s,r){var n=i("../internals/function-call"),o=i("../internals/is-object"),a=i("../internals/is-symbol"),l=i("../internals/get-method"),c=i("../internals/ordinary-to-primitive"),u=i("../internals/well-known-symbol"),d=TypeError,h=u("toPrimitive");s.exports=function(p,f){if(!o(p)||a(p))return p;var m,g=l(p,h);if(g){if(f===void 0&&(f="default"),m=n(g,p,f),!o(m)||a(m))return m;throw new d("Can't convert object to primitive value")}return f===void 0&&(f="number"),c(p,f)}},{"../internals/function-call":264,"../internals/get-method":273,"../internals/is-object":289,"../internals/is-symbol":292,"../internals/ordinary-to-primitive":320,"../internals/well-known-symbol":357}],346:[function(i,s,r){var n=i("../internals/to-primitive"),o=i("../internals/is-symbol");s.exports=function(a){var l=n(a,"string");return o(l)?l:l+""}},{"../internals/is-symbol":292,"../internals/to-primitive":345}],347:[function(i,s,r){var n={};n[i("../internals/well-known-symbol")("toStringTag")]="z",s.exports=String(n)==="[object z]"},{"../internals/well-known-symbol":357}],348:[function(i,s,r){var n=i("../internals/classof"),o=String;s.exports=function(a){if(n(a)==="Symbol")throw new TypeError("Cannot convert a Symbol value to a string");return o(a)}},{"../internals/classof":236}],349:[function(i,s,r){var n=String;s.exports=function(o){try{return n(o)}catch{return"Object"}}},{}],350:[function(i,s,r){var n=i("../internals/function-uncurry-this"),o=0,a=Math.random(),l=n(1 .toString);s.exports=function(c){return"Symbol("+(c===void 0?"":c)+")_"+l(++o+a,36)}},{"../internals/function-uncurry-this":268}],351:[function(i,s,r){var n=i("../internals/symbol-constructor-detection");s.exports=n&&!Symbol.sham&&typeof Symbol.iterator=="symbol"},{"../internals/symbol-constructor-detection":336}],352:[function(i,s,r){var n=i("../internals/descriptors"),o=i("../internals/fails");s.exports=n&&o(function(){return Object.defineProperty(function(){},"prototype",{value:42,writable:!1}).prototype!==42})},{"../internals/descriptors":247,"../internals/fails":260}],353:[function(i,s,r){var n=TypeError;s.exports=function(o,a){if(o<a)throw new n("Not enough arguments");return o}},{}],354:[function(i,s,r){var n=i("../internals/global"),o=i("../internals/is-callable"),a=n.WeakMap;s.exports=o(a)&&/native code/.test(String(a))},{"../internals/global":274,"../internals/is-callable":285}],355:[function(i,s,r){var n=i("../internals/path"),o=i("../internals/has-own-property"),a=i("../internals/well-known-symbol-wrapped"),l=i("../internals/object-define-property").f;s.exports=function(c){var u=n.Symbol||(n.Symbol={});o(u,c)||l(u,c,{value:a.f(c)})}},{"../internals/has-own-property":275,"../internals/object-define-property":308,"../internals/path":322,"../internals/well-known-symbol-wrapped":356}],356:[function(i,s,r){var n=i("../internals/well-known-symbol");r.f=n},{"../internals/well-known-symbol":357}],357:[function(i,s,r){var n=i("../internals/global"),o=i("../internals/shared"),a=i("../internals/has-own-property"),l=i("../internals/uid"),c=i("../internals/symbol-constructor-detection"),u=i("../internals/use-symbol-as-uid"),d=n.Symbol,h=o("wks"),p=u?d.for||d:d&&d.withoutSetter||l;s.exports=function(f){return a(h,f)||(h[f]=c&&a(d,f)?d[f]:p("Symbol."+f)),h[f]}},{"../internals/global":274,"../internals/has-own-property":275,"../internals/shared":334,"../internals/symbol-constructor-detection":336,"../internals/uid":350,"../internals/use-symbol-as-uid":351}],358:[function(i,s,r){var n=i("../internals/export"),o=i("../internals/array-iteration").findIndex,a=i("../internals/add-to-unscopables"),l=!0;"findIndex"in[]&&Array(1).findIndex(function(){l=!1}),n({target:"Array",proto:!0,forced:l},{findIndex:function(c){return o(this,c,arguments.length>1?arguments[1]:void 0)}}),a("findIndex")},{"../internals/add-to-unscopables":225,"../internals/array-iteration":229,"../internals/export":259}],359:[function(i,s,r){var n=i("../internals/export"),o=i("../internals/array-iteration").find,a=i("../internals/add-to-unscopables"),l=!0;"find"in[]&&Array(1).find(function(){l=!1}),n({target:"Array",proto:!0,forced:l},{find:function(c){return o(this,c,arguments.length>1?arguments[1]:void 0)}}),a("find")},{"../internals/add-to-unscopables":225,"../internals/array-iteration":229,"../internals/export":259}],360:[function(i,s,r){var n=i("../internals/export"),o=i("../internals/array-includes").includes,a=i("../internals/fails"),l=i("../internals/add-to-unscopables");n({target:"Array",proto:!0,forced:a(function(){return!Array(1).includes()})},{includes:function(c){return o(this,c,arguments.length>1?arguments[1]:void 0)}}),l("includes")},{"../internals/add-to-unscopables":225,"../internals/array-includes":228,"../internals/export":259,"../internals/fails":260}],361:[function(i,s,r){var n=i("../internals/to-indexed-object"),o=i("../internals/add-to-unscopables"),a=i("../internals/iterators"),l=i("../internals/internal-state"),c=i("../internals/object-define-property").f,u=i("../internals/iterator-define"),d=i("../internals/create-iter-result-object"),h=i("../internals/is-pure"),p=i("../internals/descriptors"),f=l.set,m=l.getterFor("Array Iterator");s.exports=u(Array,"Array",function(y,v){f(this,{type:"Array Iterator",target:n(y),index:0,kind:v})},function(){var y=m(this),v=y.target,C=y.kind,b=y.index++;if(!v||b>=v.length)return y.target=void 0,d(void 0,!0);switch(C){case"keys":return d(b,!1);case"values":return d(v[b],!1)}return d([b,v[b]],!1)},"values");var g=a.Arguments=a.Array;if(o("keys"),o("values"),o("entries"),!h&&p&&g.name!=="values")try{c(g,"name",{value:"values"})}catch{}},{"../internals/add-to-unscopables":225,"../internals/create-iter-result-object":240,"../internals/descriptors":247,"../internals/internal-state":282,"../internals/is-pure":290,"../internals/iterator-define":296,"../internals/iterators":298,"../internals/object-define-property":308,"../internals/to-indexed-object":341}],362:[function(i,s,r){var n=i("../internals/export"),o=i("../internals/get-built-in"),a=i("../internals/function-apply"),l=i("../internals/function-call"),c=i("../internals/function-uncurry-this"),u=i("../internals/fails"),d=i("../internals/is-callable"),h=i("../internals/is-symbol"),p=i("../internals/array-slice"),f=i("../internals/get-json-replacer-function"),m=i("../internals/symbol-constructor-detection"),g=String,y=o("JSON","stringify"),v=c(/./.exec),C=c("".charAt),b=c("".charCodeAt),T=c("".replace),A=c(1 .toString),I=/[\uD800-\uDFFF]/g,D=/^[\uD800-\uDBFF]$/,F=/^[\uDC00-\uDFFF]$/,B=!m||u(function(){var L=o("Symbol")("stringify detection");return y([L])!=="[null]"||y({a:L})!=="{}"||y(Object(L))!=="{}"}),U=u(function(){return y("\uDF06\uD834")!=='"\\udf06\\ud834"'||y("\uDEAD")!=='"\\udead"'}),H=function(L,_){var w=p(arguments),S=f(_);if(d(S)||L!==void 0&&!h(L))return w[1]=function(x,E){if(d(S)&&(E=l(S,this,g(x),E)),!h(E))return E},a(y,null,w)},R=function(L,_,w){var S=C(w,_-1),x=C(w,_+1);return v(D,L)&&!v(F,x)||v(F,L)&&!v(D,S)?"\\u"+A(b(L,0),16):L};y&&n({target:"JSON",stat:!0,arity:3,forced:B||U},{stringify:function(L,_,w){var S=p(arguments),x=a(B?H:y,null,S);return U&&typeof x=="string"?T(x,I,R):x}})},{"../internals/array-slice":231,"../internals/export":259,"../internals/fails":260,"../internals/function-apply":261,"../internals/function-call":264,"../internals/function-uncurry-this":268,"../internals/get-built-in":269,"../internals/get-json-replacer-function":272,"../internals/is-callable":285,"../internals/is-symbol":292,"../internals/symbol-constructor-detection":336}],363:[function(i,s,r){i("../internals/export")({target:"Number",stat:!0},{isNaN:function(n){return n!=n}})},{"../internals/export":259}],364:[function(i,s,r){var n=i("../internals/export"),o=i("../internals/object-assign");n({target:"Object",stat:!0,arity:2,forced:Object.assign!==o},{assign:o})},{"../internals/export":259,"../internals/object-assign":305}],365:[function(i,s,r){var n=i("../internals/export"),o=i("../internals/symbol-constructor-detection"),a=i("../internals/fails"),l=i("../internals/object-get-own-property-symbols"),c=i("../internals/to-object");n({target:"Object",stat:!0,forced:!o||a(function(){l.f(1)})},{getOwnPropertySymbols:function(u){var d=l.f;return d?d(c(u)):[]}})},{"../internals/export":259,"../internals/fails":260,"../internals/object-get-own-property-symbols":312,"../internals/symbol-constructor-detection":336,"../internals/to-object":344}],366:[function(i,s,r){var n=i("../internals/export"),o=i("../internals/to-object"),a=i("../internals/object-keys");n({target:"Object",stat:!0,forced:i("../internals/fails")(function(){a(1)})},{keys:function(l){return a(o(l))}})},{"../internals/export":259,"../internals/fails":260,"../internals/object-keys":316,"../internals/to-object":344}],367:[function(i,s,r){var n=i("../internals/export"),o=i("../internals/object-to-array").values;n({target:"Object",stat:!0},{values:function(a){return o(a)}})},{"../internals/export":259,"../internals/object-to-array":319}],368:[function(i,s,r){var n=i("../internals/export"),o=i("../internals/function-call"),a=i("../internals/a-callable"),l=i("../internals/new-promise-capability"),c=i("../internals/perform"),u=i("../internals/iterate");n({target:"Promise",stat:!0,forced:i("../internals/promise-statics-incorrect-iteration")},{all:function(d){var h=this,p=l.f(h),f=p.resolve,m=p.reject,g=c(function(){var y=a(h.resolve),v=[],C=0,b=1;u(d,function(T){var A=C++,I=!1;b++,o(y,h,T).then(function(D){I||(I=!0,v[A]=D,--b||f(v))},m)}),--b||f(v)});return g.error&&m(g.value),p.promise}})},{"../internals/a-callable":222,"../internals/export":259,"../internals/function-call":264,"../internals/iterate":293,"../internals/new-promise-capability":303,"../internals/perform":323,"../internals/promise-statics-incorrect-iteration":327}],369:[function(i,s,r){var n=i("../internals/export"),o=i("../internals/is-pure"),a=i("../internals/promise-constructor-detection").CONSTRUCTOR,l=i("../internals/promise-native-constructor"),c=i("../internals/get-built-in"),u=i("../internals/is-callable"),d=i("../internals/define-built-in"),h=l&&l.prototype;if(n({target:"Promise",proto:!0,forced:a,real:!0},{catch:function(f){return this.then(void 0,f)}}),!o&&u(l)){var p=c("Promise").prototype.catch;h.catch!==p&&d(h,"catch",p,{unsafe:!0})}},{"../internals/define-built-in":245,"../internals/export":259,"../internals/get-built-in":269,"../internals/is-callable":285,"../internals/is-pure":290,"../internals/promise-constructor-detection":324,"../internals/promise-native-constructor":325}],370:[function(i,s,r){var n,o,a,l=i("../internals/export"),c=i("../internals/is-pure"),u=i("../internals/engine-is-node"),d=i("../internals/global"),h=i("../internals/function-call"),p=i("../internals/define-built-in"),f=i("../internals/object-set-prototype-of"),m=i("../internals/set-to-string-tag"),g=i("../internals/set-species"),y=i("../internals/a-callable"),v=i("../internals/is-callable"),C=i("../internals/is-object"),b=i("../internals/an-instance"),T=i("../internals/species-constructor"),A=i("../internals/task").set,I=i("../internals/microtask"),D=i("../internals/host-report-errors"),F=i("../internals/perform"),B=i("../internals/queue"),U=i("../internals/internal-state"),H=i("../internals/promise-native-constructor"),R=i("../internals/promise-constructor-detection"),L=i("../internals/new-promise-capability"),_=R.CONSTRUCTOR,w=R.REJECTION_EVENT,S=R.SUBCLASSING,x=U.getterFor("Promise"),E=U.set,M=H&&H.prototype,O=H,V=M,Y=d.TypeError,$=d.document,J=d.process,G=L.f,Z=G,N=!!($&&$.createEvent&&d.dispatchEvent),P=function(ne){var fe;return!(!C(ne)||!v(fe=ne.then))&&fe},j=function(ne,fe){var me,ge,ve,xe=fe.value,De=fe.state===1,ze=De?ne.ok:ne.fail,Ye=ne.resolve,je=ne.reject,ht=ne.domain;try{ze?(De||(fe.rejection===2&&oe(fe),fe.rejection=1),ze===!0?me=xe:(ht&&ht.enter(),me=ze(xe),ht&&(ht.exit(),ve=!0)),me===ne.promise?je(new Y("Promise-chain cycle")):(ge=P(me))?h(ge,me,Ye,je):Ye(me)):je(xe)}catch(ut){ht&&!ve&&ht.exit(),je(ut)}},X=function(ne,fe){ne.notified||(ne.notified=!0,I(function(){for(var me,ge=ne.reactions;me=ge.get();)j(me,ne);ne.notified=!1,fe&&!ne.rejection&&ee(ne)}))},ie=function(ne,fe,me){var ge,ve;N?((ge=$.createEvent("Event")).promise=fe,ge.reason=me,ge.initEvent(ne,!1,!0),d.dispatchEvent(ge)):ge={promise:fe,reason:me},!w&&(ve=d["on"+ne])?ve(ge):ne==="unhandledrejection"&&D("Unhandled promise rejection",me)},ee=function(ne){h(A,d,function(){var fe,me=ne.facade,ge=ne.value;if(re(ne)&&(fe=F(function(){u?J.emit("unhandledRejection",ge,me):ie("unhandledrejection",me,ge)}),ne.rejection=u||re(ne)?2:1,fe.error))throw fe.value})},re=function(ne){return ne.rejection!==1&&!ne.parent},oe=function(ne){h(A,d,function(){var fe=ne.facade;u?J.emit("rejectionHandled",fe):ie("rejectionhandled",fe,ne.value)})},ue=function(ne,fe,me){return function(ge){ne(fe,ge,me)}},se=function(ne,fe,me){ne.done||(ne.done=!0,me&&(ne=me),ne.value=fe,ne.state=2,X(ne,!0))},le=function(ne,fe,me){if(!ne.done){ne.done=!0,me&&(ne=me);try{if(ne.facade===fe)throw new Y("Promise can't be resolved itself");var ge=P(fe);ge?I(function(){var ve={done:!1};try{h(ge,fe,ue(le,ve,ne),ue(se,ve,ne))}catch(xe){se(ve,xe,ne)}}):(ne.value=fe,ne.state=1,X(ne,!1))}catch(ve){se({done:!1},ve,ne)}}};if(_&&(V=(O=function(ne){b(this,V),y(ne),h(n,this);var fe=x(this);try{ne(ue(le,fe),ue(se,fe))}catch(me){se(fe,me)}}).prototype,(n=function(ne){E(this,{type:"Promise",done:!1,notified:!1,parent:!1,reactions:new B,rejection:!1,state:0,value:void 0})}).prototype=p(V,"then",function(ne,fe){var me=x(this),ge=G(T(this,O));return me.parent=!0,ge.ok=!v(ne)||ne,ge.fail=v(fe)&&fe,ge.domain=u?J.domain:void 0,me.state===0?me.reactions.add(ge):I(function(){j(ge,me)}),ge.promise}),o=function(){var ne=new n,fe=x(ne);this.promise=ne,this.resolve=ue(le,fe),this.reject=ue(se,fe)},L.f=G=function(ne){return ne===O||ne===void 0?new o(ne):Z(ne)},!c&&v(H)&&M!==Object.prototype)){a=M.then,S||p(M,"then",function(ne,fe){var me=this;return new O(function(ge,ve){h(a,me,ge,ve)}).then(ne,fe)},{unsafe:!0});try{delete M.constructor}catch{}f&&f(M,V)}l({global:!0,constructor:!0,wrap:!0,forced:_},{Promise:O}),m(O,"Promise",!1,!0),g("Promise")},{"../internals/a-callable":222,"../internals/an-instance":226,"../internals/define-built-in":245,"../internals/engine-is-node":254,"../internals/export":259,"../internals/function-call":264,"../internals/global":274,"../internals/host-report-errors":277,"../internals/internal-state":282,"../internals/is-callable":285,"../internals/is-object":289,"../internals/is-pure":290,"../internals/microtask":302,"../internals/new-promise-capability":303,"../internals/object-set-prototype-of":318,"../internals/perform":323,"../internals/promise-constructor-detection":324,"../internals/promise-native-constructor":325,"../internals/queue":328,"../internals/set-species":330,"../internals/set-to-string-tag":331,"../internals/species-constructor":335,"../internals/task":339}],371:[function(i,s,r){var n=i("../internals/export"),o=i("../internals/is-pure"),a=i("../internals/promise-native-constructor"),l=i("../internals/fails"),c=i("../internals/get-built-in"),u=i("../internals/is-callable"),d=i("../internals/species-constructor"),h=i("../internals/promise-resolve"),p=i("../internals/define-built-in"),f=a&&a.prototype;if(n({target:"Promise",proto:!0,real:!0,forced:!!a&&l(function(){f.finally.call({then:function(){}},function(){})})},{finally:function(g){var y=d(this,c("Promise")),v=u(g);return this.then(v?function(C){return h(y,g()).then(function(){return C})}:g,v?function(C){return h(y,g()).then(function(){throw C})}:g)}}),!o&&u(a)){var m=c("Promise").prototype.finally;f.finally!==m&&p(f,"finally",m,{unsafe:!0})}},{"../internals/define-built-in":245,"../internals/export":259,"../internals/fails":260,"../internals/get-built-in":269,"../internals/is-callable":285,"../internals/is-pure":290,"../internals/promise-native-constructor":325,"../internals/promise-resolve":326,"../internals/species-constructor":335}],372:[function(i,s,r){i("../modules/es.promise.constructor"),i("../modules/es.promise.all"),i("../modules/es.promise.catch"),i("../modules/es.promise.race"),i("../modules/es.promise.reject"),i("../modules/es.promise.resolve")},{"../modules/es.promise.all":368,"../modules/es.promise.catch":369,"../modules/es.promise.constructor":370,"../modules/es.promise.race":373,"../modules/es.promise.reject":374,"../modules/es.promise.resolve":375}],373:[function(i,s,r){var n=i("../internals/export"),o=i("../internals/function-call"),a=i("../internals/a-callable"),l=i("../internals/new-promise-capability"),c=i("../internals/perform"),u=i("../internals/iterate");n({target:"Promise",stat:!0,forced:i("../internals/promise-statics-incorrect-iteration")},{race:function(d){var h=this,p=l.f(h),f=p.reject,m=c(function(){var g=a(h.resolve);u(d,function(y){o(g,h,y).then(p.resolve,f)})});return m.error&&f(m.value),p.promise}})},{"../internals/a-callable":222,"../internals/export":259,"../internals/function-call":264,"../internals/iterate":293,"../internals/new-promise-capability":303,"../internals/perform":323,"../internals/promise-statics-incorrect-iteration":327}],374:[function(i,s,r){var n=i("../internals/export"),o=i("../internals/function-call"),a=i("../internals/new-promise-capability");n({target:"Promise",stat:!0,forced:i("../internals/promise-constructor-detection").CONSTRUCTOR},{reject:function(l){var c=a.f(this);return o(c.reject,void 0,l),c.promise}})},{"../internals/export":259,"../internals/function-call":264,"../internals/new-promise-capability":303,"../internals/promise-constructor-detection":324}],375:[function(i,s,r){var n=i("../internals/export"),o=i("../internals/get-built-in"),a=i("../internals/is-pure"),l=i("../internals/promise-native-constructor"),c=i("../internals/promise-constructor-detection").CONSTRUCTOR,u=i("../internals/promise-resolve"),d=o("Promise"),h=a&&!c;n({target:"Promise",stat:!0,forced:a||c},{resolve:function(p){return u(h&&this===d?l:this,p)}})},{"../internals/export":259,"../internals/get-built-in":269,"../internals/is-pure":290,"../internals/promise-constructor-detection":324,"../internals/promise-native-constructor":325,"../internals/promise-resolve":326}],376:[function(i,s,r){var n=i("../internals/export"),o=i("../internals/function-uncurry-this"),a=i("../internals/to-absolute-index"),l=RangeError,c=String.fromCharCode,u=String.fromCodePoint,d=o([].join);n({target:"String",stat:!0,arity:1,forced:!!u&&u.length!==1},{fromCodePoint:function(h){for(var p,f=[],m=arguments.length,g=0;m>g;){if(p=+arguments[g++],a(p,1114111)!==p)throw new l(p+" is not a valid code point");f[g]=p<65536?c(p):c(55296+((p-=65536)>>10),p%1024+56320)}return d(f,"")}})},{"../internals/export":259,"../internals/function-uncurry-this":268,"../internals/to-absolute-index":340}],377:[function(i,s,r){var n=i("../internals/export"),o=i("../internals/function-uncurry-this"),a=i("../internals/not-a-regexp"),l=i("../internals/require-object-coercible"),c=i("../internals/to-string"),u=i("../internals/correct-is-regexp-logic"),d=o("".indexOf);n({target:"String",proto:!0,forced:!u("includes")},{includes:function(h){return!!~d(c(l(this)),c(a(h)),arguments.length>1?arguments[1]:void 0)}})},{"../internals/correct-is-regexp-logic":238,"../internals/export":259,"../internals/function-uncurry-this":268,"../internals/not-a-regexp":304,"../internals/require-object-coercible":329,"../internals/to-string":348}],378:[function(i,s,r){i("../internals/well-known-symbol-define")("asyncIterator")},{"../internals/well-known-symbol-define":355}],379:[function(i,s,r){var n=i("../internals/export"),o=i("../internals/global"),a=i("../internals/function-call"),l=i("../internals/function-uncurry-this"),c=i("../internals/is-pure"),u=i("../internals/descriptors"),d=i("../internals/symbol-constructor-detection"),h=i("../internals/fails"),p=i("../internals/has-own-property"),f=i("../internals/object-is-prototype-of"),m=i("../internals/an-object"),g=i("../internals/to-indexed-object"),y=i("../internals/to-property-key"),v=i("../internals/to-string"),C=i("../internals/create-property-descriptor"),b=i("../internals/object-create"),T=i("../internals/object-keys"),A=i("../internals/object-get-own-property-names"),I=i("../internals/object-get-own-property-names-external"),D=i("../internals/object-get-own-property-symbols"),F=i("../internals/object-get-own-property-descriptor"),B=i("../internals/object-define-property"),U=i("../internals/object-define-properties"),H=i("../internals/object-property-is-enumerable"),R=i("../internals/define-built-in"),L=i("../internals/define-built-in-accessor"),_=i("../internals/shared"),w=i("../internals/shared-key"),S=i("../internals/hidden-keys"),x=i("../internals/uid"),E=i("../internals/well-known-symbol"),M=i("../internals/well-known-symbol-wrapped"),O=i("../internals/well-known-symbol-define"),V=i("../internals/symbol-define-to-primitive"),Y=i("../internals/set-to-string-tag"),$=i("../internals/internal-state"),J=i("../internals/array-iteration").forEach,G=w("hidden"),Z=$.set,N=$.getterFor("Symbol"),P=Object.prototype,j=o.Symbol,X=j&&j.prototype,ie=o.RangeError,ee=o.TypeError,re=o.QObject,oe=F.f,ue=B.f,se=I.f,le=H.f,ne=l([].push),fe=_("symbols"),me=_("op-symbols"),ge=_("wks"),ve=!re||!re.prototype||!re.prototype.findChild,xe=function(Ze,Ve,Je){var ct=oe(P,Ve);ct&&delete P[Ve],ue(Ze,Ve,Je),ct&&Ze!==P&&ue(P,Ve,ct)},De=u&&h(function(){return b(ue({},"a",{get:function(){return ue(this,"a",{value:7}).a}})).a!==7})?xe:ue,ze=function(Ze,Ve){var Je=fe[Ze]=b(X);return Z(Je,{type:"Symbol",tag:Ze,description:Ve}),u||(Je.description=Ve),Je},Ye=function(Ze,Ve,Je){Ze===P&&Ye(me,Ve,Je),m(Ze);var ct=y(Ve);return m(Je),p(fe,ct)?(Je.enumerable?(p(Ze,G)&&Ze[G][ct]&&(Ze[G][ct]=!1),Je=b(Je,{enumerable:C(0,!1)})):(p(Ze,G)||ue(Ze,G,C(1,{})),Ze[G][ct]=!0),De(Ze,ct,Je)):ue(Ze,ct,Je)},je=function(Ze,Ve){m(Ze);var Je=g(Ve),ct=T(Je).concat(gt(Je));return J(ct,function(et){u&&!a(ht,Je,et)||Ye(Ze,et,Je[et])}),Ze},ht=function(Ze){var Ve=y(Ze),Je=a(le,this,Ve);return!(this===P&&p(fe,Ve)&&!p(me,Ve))&&(!(Je||!p(this,Ve)||!p(fe,Ve)||p(this,G)&&this[G][Ve])||Je)},ut=function(Ze,Ve){var Je=g(Ze),ct=y(Ve);if(Je!==P||!p(fe,ct)||p(me,ct)){var et=oe(Je,ct);return!et||!p(fe,ct)||p(Je,G)&&Je[G][ct]||(et.enumerable=!0),et}},dt=function(Ze){var Ve=se(g(Ze)),Je=[];return J(Ve,function(ct){p(fe,ct)||p(S,ct)||ne(Je,ct)}),Je},gt=function(Ze){var Ve=Ze===P,Je=se(Ve?me:g(Ze)),ct=[];return J(Je,function(et){!p(fe,et)||Ve&&!p(P,et)||ne(ct,fe[et])}),ct};d||(R(X=(j=function(){if(f(X,this))throw new ee("Symbol is not a constructor");var Ze=arguments.length&&arguments[0]!==void 0?v(arguments[0]):void 0,Ve=x(Ze),Je=function(ct){this===P&&a(Je,me,ct),p(this,G)&&p(this[G],Ve)&&(this[G][Ve]=!1);var et=C(1,ct);try{De(this,Ve,et)}catch(ii){if(!(ii instanceof ie))throw ii;xe(this,Ve,et)}};return u&&ve&&De(P,Ve,{configurable:!0,set:Je}),ze(Ve,Ze)}).prototype,"toString",function(){return N(this).tag}),R(j,"withoutSetter",function(Ze){return ze(x(Ze),Ze)}),H.f=ht,B.f=Ye,U.f=je,F.f=ut,A.f=I.f=dt,D.f=gt,M.f=function(Ze){return ze(E(Ze),Ze)},u&&(L(X,"description",{configurable:!0,get:function(){return N(this).description}}),c||R(P,"propertyIsEnumerable",ht,{unsafe:!0}))),n({global:!0,constructor:!0,wrap:!0,forced:!d,sham:!d},{Symbol:j}),J(T(ge),function(Ze){O(Ze)}),n({target:"Symbol",stat:!0,forced:!d},{useSetter:function(){ve=!0},useSimple:function(){ve=!1}}),n({target:"Object",stat:!0,forced:!d,sham:!u},{create:function(Ze,Ve){return Ve===void 0?b(Ze):je(b(Ze),Ve)},defineProperty:Ye,defineProperties:je,getOwnPropertyDescriptor:ut}),n({target:"Object",stat:!0,forced:!d},{getOwnPropertyNames:dt}),V(),Y(j,"Symbol"),S[G]=!0},{"../internals/an-object":227,"../internals/array-iteration":229,"../internals/create-property-descriptor":242,"../internals/define-built-in":245,"../internals/define-built-in-accessor":244,"../internals/descriptors":247,"../internals/export":259,"../internals/fails":260,"../internals/function-call":264,"../internals/function-uncurry-this":268,"../internals/global":274,"../internals/has-own-property":275,"../internals/hidden-keys":276,"../internals/internal-state":282,"../internals/is-pure":290,"../internals/object-create":306,"../internals/object-define-properties":307,"../internals/object-define-property":308,"../internals/object-get-own-property-descriptor":309,"../internals/object-get-own-property-names":311,"../internals/object-get-own-property-names-external":310,"../internals/object-get-own-property-symbols":312,"../internals/object-is-prototype-of":314,"../internals/object-keys":316,"../internals/object-property-is-enumerable":317,"../internals/set-to-string-tag":331,"../internals/shared":334,"../internals/shared-key":332,"../internals/symbol-constructor-detection":336,"../internals/symbol-define-to-primitive":337,"../internals/to-indexed-object":341,"../internals/to-property-key":346,"../internals/to-string":348,"../internals/uid":350,"../internals/well-known-symbol":357,"../internals/well-known-symbol-define":355,"../internals/well-known-symbol-wrapped":356}],380:[function(i,s,r){var n=i("../internals/export"),o=i("../internals/get-built-in"),a=i("../internals/has-own-property"),l=i("../internals/to-string"),c=i("../internals/shared"),u=i("../internals/symbol-registry-detection"),d=c("string-to-symbol-registry"),h=c("symbol-to-string-registry");n({target:"Symbol",stat:!0,forced:!u},{for:function(p){var f=l(p);if(a(d,f))return d[f];var m=o("Symbol")(f);return d[f]=m,h[m]=f,m}})},{"../internals/export":259,"../internals/get-built-in":269,"../internals/has-own-property":275,"../internals/shared":334,"../internals/symbol-registry-detection":338,"../internals/to-string":348}],381:[function(i,s,r){i("../modules/es.symbol.constructor"),i("../modules/es.symbol.for"),i("../modules/es.symbol.key-for"),i("../modules/es.json.stringify"),i("../modules/es.object.get-own-property-symbols")},{"../modules/es.json.stringify":362,"../modules/es.object.get-own-property-symbols":365,"../modules/es.symbol.constructor":379,"../modules/es.symbol.for":380,"../modules/es.symbol.key-for":382}],382:[function(i,s,r){var n=i("../internals/export"),o=i("../internals/has-own-property"),a=i("../internals/is-symbol"),l=i("../internals/try-to-string"),c=i("../internals/shared"),u=i("../internals/symbol-registry-detection"),d=c("symbol-to-string-registry");n({target:"Symbol",stat:!0,forced:!u},{keyFor:function(h){if(!a(h))throw new TypeError(l(h)+" is not a symbol");if(o(d,h))return d[h]}})},{"../internals/export":259,"../internals/has-own-property":275,"../internals/is-symbol":292,"../internals/shared":334,"../internals/symbol-registry-detection":338,"../internals/try-to-string":349}],383:[function(i,s,r){function n(o){return Object.prototype.toString.call(o)}r.isArray=function(o){return Array.isArray?Array.isArray(o):n(o)==="[object Array]"},r.isBoolean=function(o){return typeof o=="boolean"},r.isNull=function(o){return o===null},r.isNullOrUndefined=function(o){return o==null},r.isNumber=function(o){return typeof o=="number"},r.isString=function(o){return typeof o=="string"},r.isSymbol=function(o){return typeof o=="symbol"},r.isUndefined=function(o){return o===void 0},r.isRegExp=function(o){return n(o)==="[object RegExp]"},r.isObject=function(o){return typeof o=="object"&&o!==null},r.isDate=function(o){return n(o)==="[object Date]"},r.isError=function(o){return n(o)==="[object Error]"||o instanceof Error},r.isFunction=function(o){return typeof o=="function"},r.isPrimitive=function(o){return o===null||typeof o=="boolean"||typeof o=="number"||typeof o=="string"||typeof o=="symbol"||o===void 0},r.isBuffer=i("buffer").Buffer.isBuffer},{buffer:220}],384:[function(i,s,r){(function(n){(function(){var o=i("elliptic"),a=i("bn.js");s.exports=function(d){return new c(d)};var l={secp256k1:{name:"secp256k1",byteLength:32},secp224r1:{name:"p224",byteLength:28},prime256v1:{name:"p256",byteLength:32},prime192v1:{name:"p192",byteLength:24},ed25519:{name:"ed25519",byteLength:32},secp384r1:{name:"p384",byteLength:48},secp521r1:{name:"p521",byteLength:66}};function c(d){this.curveType=l[d],this.curveType||(this.curveType={name:d}),this.curve=new o.ec(this.curveType.name),this.keys=void 0}function u(d,h,p){Array.isArray(d)||(d=d.toArray());var f=new n(d);if(p&&f.length<p){var m=new n(p-f.length);m.fill(0),f=n.concat([m,f])}return h?f.toString(h):f}l.p224=l.secp224r1,l.p256=l.secp256r1=l.prime256v1,l.p192=l.secp192r1=l.prime192v1,l.p384=l.secp384r1,l.p521=l.secp521r1,c.prototype.generateKeys=function(d,h){return this.keys=this.curve.genKeyPair(),this.getPublicKey(d,h)},c.prototype.computeSecret=function(d,h,p){return h=h||"utf8",n.isBuffer(d)||(d=new n(d,h)),u(this.curve.keyFromPublic(d).getPublic().mul(this.keys.getPrivate()).getX(),p,this.curveType.byteLength)},c.prototype.getPublicKey=function(d,h){var p=this.keys.getPublic(h==="compressed",!0);return h==="hybrid"&&(p[p.length-1]%2?p[0]=7:p[0]=6),u(p,d)},c.prototype.getPrivateKey=function(d){return u(this.keys.getPrivate(),d)},c.prototype.setPublicKey=function(d,h){return h=h||"utf8",n.isBuffer(d)||(d=new n(d,h)),this.keys._importPublic(d),this},c.prototype.setPrivateKey=function(d,h){h=h||"utf8",n.isBuffer(d)||(d=new n(d,h));var p=new a(d);return p=p.toString(16),this.keys=this.curve.genKeyPair(),this.keys._importPrivate(p),this}}).call(this)}).call(this,i("buffer").Buffer)},{"bn.js":385,buffer:220,elliptic:405}],385:[function(i,s,r){arguments[4][184][0].apply(r,arguments)},{buffer:188,dup:184}],386:[function(i,s,r){var n=i("inherits"),o=i("md5.js"),a=i("ripemd160"),l=i("sha.js"),c=i("cipher-base");function u(d){c.call(this,"digest"),this._hash=d}n(u,c),u.prototype._update=function(d){this._hash.update(d)},u.prototype._final=function(){return this._hash.digest()},s.exports=function(d){return(d=d.toLowerCase())==="md5"?new o:d==="rmd160"||d==="ripemd160"?new a:new u(l(d))}},{"cipher-base":221,inherits:440,"md5.js":450,ripemd160:493,"sha.js":498}],387:[function(i,s,r){var n=i("md5.js");s.exports=function(o){return new n().update(o).digest()}},{"md5.js":450}],388:[function(i,s,r){var n=i("inherits"),o=i("./legacy"),a=i("cipher-base"),l=i("safe-buffer").Buffer,c=i("create-hash/md5"),u=i("ripemd160"),d=i("sha.js"),h=l.alloc(128);function p(f,m){a.call(this,"digest"),typeof m=="string"&&(m=l.from(m));var g=f==="sha512"||f==="sha384"?128:64;this._alg=f,this._key=m,m.length>g?m=(f==="rmd160"?new u:d(f)).update(m).digest():m.length<g&&(m=l.concat([m,h],g));for(var y=this._ipad=l.allocUnsafe(g),v=this._opad=l.allocUnsafe(g),C=0;C<g;C++)y[C]=54^m[C],v[C]=92^m[C];this._hash=f==="rmd160"?new u:d(f),this._hash.update(y)}n(p,a),p.prototype._update=function(f){this._hash.update(f)},p.prototype._final=function(){var f=this._hash.digest();return(this._alg==="rmd160"?new u:d(this._alg)).update(this._opad).update(f).digest()},s.exports=function(f,m){return(f=f.toLowerCase())==="rmd160"||f==="ripemd160"?new p("rmd160",m):f==="md5"?new o(c,m):new p(f,m)}},{"./legacy":389,"cipher-base":221,"create-hash/md5":387,inherits:440,ripemd160:493,"safe-buffer":494,"sha.js":498}],389:[function(i,s,r){var n=i("inherits"),o=i("safe-buffer").Buffer,a=i("cipher-base"),l=o.alloc(128);function c(u,d){a.call(this,"digest"),typeof d=="string"&&(d=o.from(d)),this._alg=u,this._key=d,d.length>64?d=u(d):d.length<64&&(d=o.concat([d,l],64));for(var h=this._ipad=o.allocUnsafe(64),p=this._opad=o.allocUnsafe(64),f=0;f<64;f++)h[f]=54^d[f],p[f]=92^d[f];this._hash=[h]}n(c,a),c.prototype._update=function(u){this._hash.push(u)},c.prototype._final=function(){var u=this._alg(o.concat(this._hash));return this._alg(o.concat([this._opad,u]))},s.exports=c},{"cipher-base":221,inherits:440,"safe-buffer":494}],390:[function(i,s,r){r.randomBytes=r.rng=r.pseudoRandomBytes=r.prng=i("randombytes"),r.createHash=r.Hash=i("create-hash"),r.createHmac=r.Hmac=i("create-hmac");var n=i("browserify-sign/algos"),o=Object.keys(n),a=["sha1","sha224","sha256","sha384","sha512","md5","rmd160"].concat(o);r.getHashes=function(){return a};var l=i("pbkdf2");r.pbkdf2=l.pbkdf2,r.pbkdf2Sync=l.pbkdf2Sync;var c=i("browserify-cipher");r.Cipher=c.Cipher,r.createCipher=c.createCipher,r.Cipheriv=c.Cipheriv,r.createCipheriv=c.createCipheriv,r.Decipher=c.Decipher,r.createDecipher=c.createDecipher,r.Decipheriv=c.Decipheriv,r.createDecipheriv=c.createDecipheriv,r.getCiphers=c.getCiphers,r.listCiphers=c.listCiphers;var u=i("diffie-hellman");r.DiffieHellmanGroup=u.DiffieHellmanGroup,r.createDiffieHellmanGroup=u.createDiffieHellmanGroup,r.getDiffieHellman=u.getDiffieHellman,r.createDiffieHellman=u.createDiffieHellman,r.DiffieHellman=u.DiffieHellman;var d=i("browserify-sign");r.createSign=d.createSign,r.Sign=d.Sign,r.createVerify=d.createVerify,r.Verify=d.Verify,r.createECDH=i("create-ecdh");var h=i("public-encrypt");r.publicEncrypt=h.publicEncrypt,r.privateEncrypt=h.privateEncrypt,r.publicDecrypt=h.publicDecrypt,r.privateDecrypt=h.privateDecrypt;var p=i("randomfill");r.randomFill=p.randomFill,r.randomFillSync=p.randomFillSync,r.createCredentials=function(){throw new Error(["sorry, createCredentials is not implemented yet","we accept pull requests","https://github.com/crypto-browserify/crypto-browserify"].join(`
`))},r.constants={DH_CHECK_P_NOT_SAFE_PRIME:2,DH_CHECK_P_NOT_PRIME:1,DH_UNABLE_TO_CHECK_GENERATOR:4,DH_NOT_SUITABLE_GENERATOR:8,NPN_ENABLED:1,ALPN_ENABLED:1,RSA_PKCS1_PADDING:1,RSA_SSLV23_PADDING:2,RSA_NO_PADDING:3,RSA_PKCS1_OAEP_PADDING:4,RSA_X931_PADDING:5,RSA_PKCS1_PSS_PADDING:6,POINT_CONVERSION_COMPRESSED:2,POINT_CONVERSION_UNCOMPRESSED:4,POINT_CONVERSION_HYBRID:6}},{"browserify-cipher":206,"browserify-sign":213,"browserify-sign/algos":210,"create-ecdh":384,"create-hash":386,"create-hmac":388,"diffie-hellman":400,pbkdf2:460,"public-encrypt":468,randombytes:475,randomfill:476}],391:[function(i,s,r){(function(n,o){typeof r=="object"&&s!==void 0?s.exports=o():(n=typeof globalThis<"u"?globalThis:n||self).dayjs=o()})(void 0,function(){var n=6e4,o=36e5,a="millisecond",l="second",c="minute",u="hour",d="day",h="week",p="month",f="quarter",m="year",g="date",y="Invalid Date",v=/^(\d{4})[-/]?(\d{1,2})?[-/]?(\d{0,2})[Tt\s]*(\d{1,2})?:?(\d{1,2})?:?(\d{1,2})?[.:]?(\d+)?$/,C=/\[([^\]]+)]|Y{1,4}|M{1,4}|D{1,2}|d{1,4}|H{1,2}|h{1,2}|a|A|m{1,2}|s{1,2}|Z{1,2}|SSS/g,b={name:"en",weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_"),ordinal:function(w){var S=["th","st","nd","rd"],x=w%100;return"["+w+(S[(x-20)%10]||S[x]||S[0])+"]"}},T=function(w,S,x){var E=String(w);return!E||E.length>=S?w:""+Array(S+1-E.length).join(x)+w},A={s:T,z:function(w){var S=-w.utcOffset(),x=Math.abs(S),E=Math.floor(x/60),M=x%60;return(S<=0?"+":"-")+T(E,2,"0")+":"+T(M,2,"0")},m:function w(S,x){if(S.date()<x.date())return-w(x,S);var E=12*(x.year()-S.year())+(x.month()-S.month()),M=S.clone().add(E,p),O=x-M<0,V=S.clone().add(E+(O?-1:1),p);return+(-(E+(x-M)/(O?M-V:V-M))||0)},a:function(w){return w<0?Math.ceil(w)||0:Math.floor(w)},p:function(w){return{M:p,y:m,w:h,d,D:g,h:u,m:c,s:l,ms:a,Q:f}[w]||String(w||"").toLowerCase().replace(/s$/,"")},u:function(w){return w===void 0}},I="en",D={};D[I]=b;var F="$isDayjsObject",B=function(w){return w instanceof L||!(!w||!w[F])},U=function w(S,x,E){var M;if(!S)return I;if(typeof S=="string"){var O=S.toLowerCase();D[O]&&(M=O),x&&(D[O]=x,M=O);var V=S.split("-");if(!M&&V.length>1)return w(V[0])}else{var Y=S.name;D[Y]=S,M=Y}return!E&&M&&(I=M),M||!E&&I},H=function(w,S){if(B(w))return w.clone();var x=typeof S=="object"?S:{};return x.date=w,x.args=arguments,new L(x)},R=A;R.l=U,R.i=B,R.w=function(w,S){return H(w,{locale:S.$L,utc:S.$u,x:S.$x,$offset:S.$offset})};var L=function(){function w(x){this.$L=U(x.locale,null,!0),this.parse(x),this.$x=this.$x||x.x||{},this[F]=!0}var S=w.prototype;return S.parse=function(x){this.$d=function(E){var M=E.date,O=E.utc;if(M===null)return new Date(NaN);if(R.u(M))return new Date;if(M instanceof Date)return new Date(M);if(typeof M=="string"&&!/Z$/i.test(M)){var V=M.match(v);if(V){var Y=V[2]-1||0,$=(V[7]||"0").substring(0,3);return O?new Date(Date.UTC(V[1],Y,V[3]||1,V[4]||0,V[5]||0,V[6]||0,$)):new Date(V[1],Y,V[3]||1,V[4]||0,V[5]||0,V[6]||0,$)}}return new Date(M)}(x),this.init()},S.init=function(){var x=this.$d;this.$y=x.getFullYear(),this.$M=x.getMonth(),this.$D=x.getDate(),this.$W=x.getDay(),this.$H=x.getHours(),this.$m=x.getMinutes(),this.$s=x.getSeconds(),this.$ms=x.getMilliseconds()},S.$utils=function(){return R},S.isValid=function(){return this.$d.toString()!==y},S.isSame=function(x,E){var M=H(x);return this.startOf(E)<=M&&M<=this.endOf(E)},S.isAfter=function(x,E){return H(x)<this.startOf(E)},S.isBefore=function(x,E){return this.endOf(E)<H(x)},S.$g=function(x,E,M){return R.u(x)?this[E]:this.set(M,x)},S.unix=function(){return Math.floor(this.valueOf()/1e3)},S.valueOf=function(){return this.$d.getTime()},S.startOf=function(x,E){var M=this,O=!!R.u(E)||E,V=R.p(x),Y=function(X,ie){var ee=R.w(M.$u?Date.UTC(M.$y,ie,X):new Date(M.$y,ie,X),M);return O?ee:ee.endOf(d)},$=function(X,ie){return R.w(M.toDate()[X].apply(M.toDate("s"),(O?[0,0,0,0]:[23,59,59,999]).slice(ie)),M)},J=this.$W,G=this.$M,Z=this.$D,N="set"+(this.$u?"UTC":"");switch(V){case m:return O?Y(1,0):Y(31,11);case p:return O?Y(1,G):Y(0,G+1);case h:var P=this.$locale().weekStart||0,j=(J<P?J+7:J)-P;return Y(O?Z-j:Z+(6-j),G);case d:case g:return $(N+"Hours",0);case u:return $(N+"Minutes",1);case c:return $(N+"Seconds",2);case l:return $(N+"Milliseconds",3);default:return this.clone()}},S.endOf=function(x){return this.startOf(x,!1)},S.$set=function(x,E){var M,O=R.p(x),V="set"+(this.$u?"UTC":""),Y=(M={},M[d]=V+"Date",M[g]=V+"Date",M[p]=V+"Month",M[m]=V+"FullYear",M[u]=V+"Hours",M[c]=V+"Minutes",M[l]=V+"Seconds",M[a]=V+"Milliseconds",M)[O],$=O===d?this.$D+(E-this.$W):E;if(O===p||O===m){var J=this.clone().set(g,1);J.$d[Y]($),J.init(),this.$d=J.set(g,Math.min(this.$D,J.daysInMonth())).$d}else Y&&this.$d[Y]($);return this.init(),this},S.set=function(x,E){return this.clone().$set(x,E)},S.get=function(x){return this[R.p(x)]()},S.add=function(x,E){var M,O=this;x=Number(x);var V=R.p(E),Y=function(G){var Z=H(O);return R.w(Z.date(Z.date()+Math.round(G*x)),O)};if(V===p)return this.set(p,this.$M+x);if(V===m)return this.set(m,this.$y+x);if(V===d)return Y(1);if(V===h)return Y(7);var $=(M={},M[c]=n,M[u]=o,M[l]=1e3,M)[V]||1,J=this.$d.getTime()+x*$;return R.w(J,this)},S.subtract=function(x,E){return this.add(-1*x,E)},S.format=function(x){var E=this,M=this.$locale();if(!this.isValid())return M.invalidDate||y;var O=x||"YYYY-MM-DDTHH:mm:ssZ",V=R.z(this),Y=this.$H,$=this.$m,J=this.$M,G=M.weekdays,Z=M.months,N=M.meridiem,P=function(ie,ee,re,oe){return ie&&(ie[ee]||ie(E,O))||re[ee].slice(0,oe)},j=function(ie){return R.s(Y%12||12,ie,"0")},X=N||function(ie,ee,re){var oe=ie<12?"AM":"PM";return re?oe.toLowerCase():oe};return O.replace(C,function(ie,ee){return ee||function(re){switch(re){case"YY":return String(E.$y).slice(-2);case"YYYY":return R.s(E.$y,4,"0");case"M":return J+1;case"MM":return R.s(J+1,2,"0");case"MMM":return P(M.monthsShort,J,Z,3);case"MMMM":return P(Z,J);case"D":return E.$D;case"DD":return R.s(E.$D,2,"0");case"d":return String(E.$W);case"dd":return P(M.weekdaysMin,E.$W,G,2);case"ddd":return P(M.weekdaysShort,E.$W,G,3);case"dddd":return G[E.$W];case"H":return String(Y);case"HH":return R.s(Y,2,"0");case"h":return j(1);case"hh":return j(2);case"a":return X(Y,$,!0);case"A":return X(Y,$,!1);case"m":return String($);case"mm":return R.s($,2,"0");case"s":return String(E.$s);case"ss":return R.s(E.$s,2,"0");case"SSS":return R.s(E.$ms,3,"0");case"Z":return V}return null}(ie)||V.replace(":","")})},S.utcOffset=function(){return 15*-Math.round(this.$d.getTimezoneOffset()/15)},S.diff=function(x,E,M){var O,V=this,Y=R.p(E),$=H(x),J=($.utcOffset()-this.utcOffset())*n,G=this-$,Z=function(){return R.m(V,$)};switch(Y){case m:O=Z()/12;break;case p:O=Z();break;case f:O=Z()/3;break;case h:O=(G-J)/6048e5;break;case d:O=(G-J)/864e5;break;case u:O=G/o;break;case c:O=G/n;break;case l:O=G/1e3;break;default:O=G}return M?O:R.a(O)},S.daysInMonth=function(){return this.endOf(p).$D},S.$locale=function(){return D[this.$L]},S.locale=function(x,E){if(!x)return this.$L;var M=this.clone(),O=U(x,E,!0);return O&&(M.$L=O),M},S.clone=function(){return R.w(this.$d,this)},S.toDate=function(){return new Date(this.valueOf())},S.toJSON=function(){return this.isValid()?this.toISOString():null},S.toISOString=function(){return this.$d.toISOString()},S.toString=function(){return this.$d.toUTCString()},w}(),_=L.prototype;return H.prototype=_,[["$ms",a],["$s",l],["$m",c],["$H",u],["$W",d],["$M",p],["$y",m],["$D",g]].forEach(function(w){_[w[1]]=function(S){return this.$g(S,w[0],w[1])}}),H.extend=function(w,S){return w.$i||(w(S,L,H),w.$i=!0),H},H.locale=U,H.isDayjs=B,H.unix=function(w){return H(1e3*w)},H.en=D[I],H.Ls=D,H.p={},H})},{}],392:[function(i,s,r){(function(n,o){typeof r=="object"&&s!==void 0?s.exports=o():(n=typeof globalThis<"u"?globalThis:n||self).dayjs_plugin_customParseFormat=o()})(void 0,function(){var n={LTS:"h:mm:ss A",LT:"h:mm A",L:"MM/DD/YYYY",LL:"MMMM D, YYYY",LLL:"MMMM D, YYYY h:mm A",LLLL:"dddd, MMMM D, YYYY h:mm A"},o=/(\[[^[]*\])|([-_:/.,()\s]+)|(A|a|YYYY|YY?|MM?M?M?|Do|DD?|hh?|HH?|mm?|ss?|S{1,3}|z|ZZ?)/g,a=/\d\d/,l=/\d\d?/,c=/\d*[^-_:/,()\s\d]+/,u={},d=function(v){return(v=+v)+(v>68?1900:2e3)},h=function(v){return function(C){this[v]=+C}},p=[/[+-]\d\d:?(\d\d)?|Z/,function(v){(this.zone||(this.zone={})).offset=function(C){if(!C||C==="Z")return 0;var b=C.match(/([+-]|\d\d)/g),T=60*b[1]+(+b[2]||0);return T===0?0:b[0]==="+"?-T:T}(v)}],f=function(v){var C=u[v];return C&&(C.indexOf?C:C.s.concat(C.f))},m=function(v,C){var b,T=u.meridiem;if(T){for(var A=1;A<=24;A+=1)if(v.indexOf(T(A,0,C))>-1){b=A>12;break}}else b=v===(C?"pm":"PM");return b},g={A:[c,function(v){this.afternoon=m(v,!1)}],a:[c,function(v){this.afternoon=m(v,!0)}],S:[/\d/,function(v){this.milliseconds=100*+v}],SS:[a,function(v){this.milliseconds=10*+v}],SSS:[/\d{3}/,function(v){this.milliseconds=+v}],s:[l,h("seconds")],ss:[l,h("seconds")],m:[l,h("minutes")],mm:[l,h("minutes")],H:[l,h("hours")],h:[l,h("hours")],HH:[l,h("hours")],hh:[l,h("hours")],D:[l,h("day")],DD:[a,h("day")],Do:[c,function(v){var C=u.ordinal,b=v.match(/\d+/);if(this.day=b[0],C)for(var T=1;T<=31;T+=1)C(T).replace(/\[|\]/g,"")===v&&(this.day=T)}],M:[l,h("month")],MM:[a,h("month")],MMM:[c,function(v){var C=f("months"),b=(f("monthsShort")||C.map(function(T){return T.slice(0,3)})).indexOf(v)+1;if(b<1)throw new Error;this.month=b%12||b}],MMMM:[c,function(v){var C=f("months").indexOf(v)+1;if(C<1)throw new Error;this.month=C%12||C}],Y:[/[+-]?\d+/,h("year")],YY:[a,function(v){this.year=d(v)}],YYYY:[/\d{4}/,h("year")],Z:p,ZZ:p};function y(v){var C,b;C=v,b=u&&u.formats;for(var T=(v=C.replace(/(\[[^\]]+])|(LTS?|l{1,4}|L{1,4})/g,function(H,R,L){var _=L&&L.toUpperCase();return R||b[L]||n[L]||b[_].replace(/(\[[^\]]+])|(MMMM|MM|DD|dddd)/g,function(w,S,x){return S||x.slice(1)})})).match(o),A=T.length,I=0;I<A;I+=1){var D=T[I],F=g[D],B=F&&F[0],U=F&&F[1];T[I]=U?{regex:B,parser:U}:D.replace(/^\[|\]$/g,"")}return function(H){for(var R={},L=0,_=0;L<A;L+=1){var w=T[L];if(typeof w=="string")_+=w.length;else{var S=w.regex,x=w.parser,E=H.slice(_),M=S.exec(E)[0];x.call(R,M),H=H.replace(M,"")}}return function(O){var V=O.afternoon;if(V!==void 0){var Y=O.hours;V?Y<12&&(O.hours+=12):Y===12&&(O.hours=0),delete O.afternoon}}(R),R}}return function(v,C,b){b.p.customParseFormat=!0,v&&v.parseTwoDigitYear&&(d=v.parseTwoDigitYear);var T=C.prototype,A=T.parse;T.parse=function(I){var D=I.date,F=I.utc,B=I.args;this.$u=F;var U=B[1];if(typeof U=="string"){var H=B[2]===!0,R=B[3]===!0,L=H||R,_=B[2];R&&(_=B[2]),u=this.$locale(),!H&&_&&(u=b.Ls[_]),this.$d=function(E,M,O){try{if(["x","X"].indexOf(M)>-1)return new Date((M==="X"?1e3:1)*E);var V=y(M)(E),Y=V.year,$=V.month,J=V.day,G=V.hours,Z=V.minutes,N=V.seconds,P=V.milliseconds,j=V.zone,X=new Date,ie=J||(Y||$?1:X.getDate()),ee=Y||X.getFullYear(),re=0;Y&&!$||(re=$>0?$-1:X.getMonth());var oe=G||0,ue=Z||0,se=N||0,le=P||0;return j?new Date(Date.UTC(ee,re,ie,oe,ue,se,le+60*j.offset*1e3)):O?new Date(Date.UTC(ee,re,ie,oe,ue,se,le)):new Date(ee,re,ie,oe,ue,se,le)}catch{return new Date("")}}(D,U,F),this.init(),_&&_!==!0&&(this.$L=this.locale(_).$L),L&&D!=this.format(U)&&(this.$d=new Date("")),u={}}else if(U instanceof Array)for(var w=U.length,S=1;S<=w;S+=1){B[1]=U[S-1];var x=b.apply(this,B);if(x.isValid()){this.$d=x.$d,this.$L=x.$L,this.init();break}S===w&&(this.$d=new Date(""))}else A.call(this,I)}}})},{}],393:[function(i,s,r){(function(n,o){typeof r=="object"&&s!==void 0?s.exports=o():(n=typeof globalThis<"u"?globalThis:n||self).dayjs_plugin_utc=o()})(void 0,function(){var n="minute",o=/[+-]\d\d(?::?\d\d)?/g,a=/([+-]|\d\d)/g;return function(l,c,u){var d=c.prototype;u.utc=function(v){var C={date:v,utc:!0,args:arguments};return new c(C)},d.utc=function(v){var C=u(this.toDate(),{locale:this.$L,utc:!0});return v?C.add(this.utcOffset(),n):C},d.local=function(){return u(this.toDate(),{locale:this.$L,utc:!1})};var h=d.parse;d.parse=function(v){v.utc&&(this.$u=!0),this.$utils().u(v.$offset)||(this.$offset=v.$offset),h.call(this,v)};var p=d.init;d.init=function(){if(this.$u){var v=this.$d;this.$y=v.getUTCFullYear(),this.$M=v.getUTCMonth(),this.$D=v.getUTCDate(),this.$W=v.getUTCDay(),this.$H=v.getUTCHours(),this.$m=v.getUTCMinutes(),this.$s=v.getUTCSeconds(),this.$ms=v.getUTCMilliseconds()}else p.call(this)};var f=d.utcOffset;d.utcOffset=function(v,C){var b=this.$utils().u;if(b(v))return this.$u?0:b(this.$offset)?f.call(this):this.$offset;if(typeof v=="string"&&(v=function(D){D===void 0&&(D="");var F=D.match(o);if(!F)return null;var B=(""+F[0]).match(a)||["-",0,0],U=B[0],H=60*+B[1]+ +B[2];return H===0?0:U==="+"?H:-H}(v))===null)return this;var T=Math.abs(v)<=16?60*v:v,A=this;if(C)return A.$offset=T,A.$u=v===0,A;if(v!==0){var I=this.$u?this.toDate().getTimezoneOffset():-1*this.utcOffset();(A=this.local().add(T+I,n)).$offset=T,A.$x.$localOffset=I}else A=this.utc();return A};var m=d.format;d.format=function(v){var C=v||(this.$u?"YYYY-MM-DDTHH:mm:ss[Z]":"");return m.call(this,C)},d.valueOf=function(){var v=this.$utils().u(this.$offset)?0:this.$offset+(this.$x.$localOffset||this.$d.getTimezoneOffset());return this.$d.valueOf()-6e4*v},d.isUTC=function(){return!!this.$u},d.toISOString=function(){return this.toDate().toISOString()},d.toString=function(){return this.toDate().toUTCString()};var g=d.toDate;d.toDate=function(v){return v==="s"&&this.$offset?u(this.format("YYYY-MM-DD HH:mm:ss:SSS")).toDate():g.call(this)};var y=d.diff;d.diff=function(v,C,b){if(v&&this.$u===v.$u)return y.call(this,v,C,b);var T=this.local(),A=u(v).local();return y.call(T,A,C,b)}}})},{}],394:[function(i,s,r){r.utils=i("./des/utils"),r.Cipher=i("./des/cipher"),r.DES=i("./des/des"),r.CBC=i("./des/cbc"),r.EDE=i("./des/ede")},{"./des/cbc":395,"./des/cipher":396,"./des/des":397,"./des/ede":398,"./des/utils":399}],395:[function(i,s,r){var n=i("minimalistic-assert"),o=i("inherits"),a={};function l(c){n.equal(c.length,8,"Invalid IV length"),this.iv=new Array(8);for(var u=0;u<this.iv.length;u++)this.iv[u]=c[u]}r.instantiate=function(c){function u(f){c.call(this,f),this._cbcInit()}o(u,c);for(var d=Object.keys(a),h=0;h<d.length;h++){var p=d[h];u.prototype[p]=a[p]}return u.create=function(f){return new u(f)},u},a._cbcInit=function(){var c=new l(this.options.iv);this._cbcState=c},a._update=function(c,u,d,h){var p=this._cbcState,f=this.constructor.super_.prototype,m=p.iv;if(this.type==="encrypt"){for(var g=0;g<this.blockSize;g++)m[g]^=c[u+g];for(f._update.call(this,m,0,d,h),g=0;g<this.blockSize;g++)m[g]=d[h+g]}else{for(f._update.call(this,c,u,d,h),g=0;g<this.blockSize;g++)d[h+g]^=m[g];for(g=0;g<this.blockSize;g++)m[g]=c[u+g]}}},{inherits:440,"minimalistic-assert":453}],396:[function(i,s,r){var n=i("minimalistic-assert");function o(a){this.options=a,this.type=this.options.type,this.blockSize=8,this._init(),this.buffer=new Array(this.blockSize),this.bufferOff=0,this.padding=a.padding!==!1}s.exports=o,o.prototype._init=function(){},o.prototype.update=function(a){return a.length===0?[]:this.type==="decrypt"?this._updateDecrypt(a):this._updateEncrypt(a)},o.prototype._buffer=function(a,l){for(var c=Math.min(this.buffer.length-this.bufferOff,a.length-l),u=0;u<c;u++)this.buffer[this.bufferOff+u]=a[l+u];return this.bufferOff+=c,c},o.prototype._flushBuffer=function(a,l){return this._update(this.buffer,0,a,l),this.bufferOff=0,this.blockSize},o.prototype._updateEncrypt=function(a){var l=0,c=0,u=(this.bufferOff+a.length)/this.blockSize|0,d=new Array(u*this.blockSize);this.bufferOff!==0&&(l+=this._buffer(a,l),this.bufferOff===this.buffer.length&&(c+=this._flushBuffer(d,c)));for(var h=a.length-(a.length-l)%this.blockSize;l<h;l+=this.blockSize)this._update(a,l,d,c),c+=this.blockSize;for(;l<a.length;l++,this.bufferOff++)this.buffer[this.bufferOff]=a[l];return d},o.prototype._updateDecrypt=function(a){for(var l=0,c=0,u=Math.ceil((this.bufferOff+a.length)/this.blockSize)-1,d=new Array(u*this.blockSize);u>0;u--)l+=this._buffer(a,l),c+=this._flushBuffer(d,c);return l+=this._buffer(a,l),d},o.prototype.final=function(a){var l,c;return a&&(l=this.update(a)),c=this.type==="encrypt"?this._finalEncrypt():this._finalDecrypt(),l?l.concat(c):c},o.prototype._pad=function(a,l){if(l===0)return!1;for(;l<a.length;)a[l++]=0;return!0},o.prototype._finalEncrypt=function(){if(!this._pad(this.buffer,this.bufferOff))return[];var a=new Array(this.blockSize);return this._update(this.buffer,0,a,0),a},o.prototype._unpad=function(a){return a},o.prototype._finalDecrypt=function(){n.equal(this.bufferOff,this.blockSize,"Not enough data to decrypt");var a=new Array(this.blockSize);return this._flushBuffer(a,0),this._unpad(a)}},{"minimalistic-assert":453}],397:[function(i,s,r){var n=i("minimalistic-assert"),o=i("inherits"),a=i("./utils"),l=i("./cipher");function c(){this.tmp=new Array(2),this.keys=null}function u(h){l.call(this,h);var p=new c;this._desState=p,this.deriveKeys(p,h.key)}o(u,l),s.exports=u,u.create=function(h){return new u(h)};var d=[1,1,2,2,2,2,2,2,1,2,2,2,2,2,2,1];u.prototype.deriveKeys=function(h,p){h.keys=new Array(32),n.equal(p.length,this.blockSize,"Invalid key length");var f=a.readUInt32BE(p,0),m=a.readUInt32BE(p,4);a.pc1(f,m,h.tmp,0),f=h.tmp[0],m=h.tmp[1];for(var g=0;g<h.keys.length;g+=2){var y=d[g>>>1];f=a.r28shl(f,y),m=a.r28shl(m,y),a.pc2(f,m,h.keys,g)}},u.prototype._update=function(h,p,f,m){var g=this._desState,y=a.readUInt32BE(h,p),v=a.readUInt32BE(h,p+4);a.ip(y,v,g.tmp,0),y=g.tmp[0],v=g.tmp[1],this.type==="encrypt"?this._encrypt(g,y,v,g.tmp,0):this._decrypt(g,y,v,g.tmp,0),y=g.tmp[0],v=g.tmp[1],a.writeUInt32BE(f,y,m),a.writeUInt32BE(f,v,m+4)},u.prototype._pad=function(h,p){if(this.padding===!1)return!1;for(var f=h.length-p,m=p;m<h.length;m++)h[m]=f;return!0},u.prototype._unpad=function(h){if(this.padding===!1)return h;for(var p=h[h.length-1],f=h.length-p;f<h.length;f++)n.equal(h[f],p);return h.slice(0,h.length-p)},u.prototype._encrypt=function(h,p,f,m,g){for(var y=p,v=f,C=0;C<h.keys.length;C+=2){var b=h.keys[C],T=h.keys[C+1];a.expand(v,h.tmp,0),b^=h.tmp[0],T^=h.tmp[1];var A=a.substitute(b,T),I=v;v=(y^a.permute(A))>>>0,y=I}a.rip(v,y,m,g)},u.prototype._decrypt=function(h,p,f,m,g){for(var y=f,v=p,C=h.keys.length-2;C>=0;C-=2){var b=h.keys[C],T=h.keys[C+1];a.expand(y,h.tmp,0),b^=h.tmp[0],T^=h.tmp[1];var A=a.substitute(b,T),I=y;y=(v^a.permute(A))>>>0,v=I}a.rip(y,v,m,g)}},{"./cipher":396,"./utils":399,inherits:440,"minimalistic-assert":453}],398:[function(i,s,r){var n=i("minimalistic-assert"),o=i("inherits"),a=i("./cipher"),l=i("./des");function c(d,h){n.equal(h.length,24,"Invalid key length");var p=h.slice(0,8),f=h.slice(8,16),m=h.slice(16,24);this.ciphers=d==="encrypt"?[l.create({type:"encrypt",key:p}),l.create({type:"decrypt",key:f}),l.create({type:"encrypt",key:m})]:[l.create({type:"decrypt",key:m}),l.create({type:"encrypt",key:f}),l.create({type:"decrypt",key:p})]}function u(d){a.call(this,d);var h=new c(this.type,this.options.key);this._edeState=h}o(u,a),s.exports=u,u.create=function(d){return new u(d)},u.prototype._update=function(d,h,p,f){var m=this._edeState;m.ciphers[0]._update(d,h,p,f),m.ciphers[1]._update(p,f,p,f),m.ciphers[2]._update(p,f,p,f)},u.prototype._pad=l.prototype._pad,u.prototype._unpad=l.prototype._unpad},{"./cipher":396,"./des":397,inherits:440,"minimalistic-assert":453}],399:[function(i,s,r){r.readUInt32BE=function(l,c){return(l[0+c]<<24|l[1+c]<<16|l[2+c]<<8|l[3+c])>>>0},r.writeUInt32BE=function(l,c,u){l[0+u]=c>>>24,l[1+u]=c>>>16&255,l[2+u]=c>>>8&255,l[3+u]=255&c},r.ip=function(l,c,u,d){for(var h=0,p=0,f=6;f>=0;f-=2){for(var m=0;m<=24;m+=8)h<<=1,h|=c>>>m+f&1;for(m=0;m<=24;m+=8)h<<=1,h|=l>>>m+f&1}for(f=6;f>=0;f-=2){for(m=1;m<=25;m+=8)p<<=1,p|=c>>>m+f&1;for(m=1;m<=25;m+=8)p<<=1,p|=l>>>m+f&1}u[d+0]=h>>>0,u[d+1]=p>>>0},r.rip=function(l,c,u,d){for(var h=0,p=0,f=0;f<4;f++)for(var m=24;m>=0;m-=8)h<<=1,h|=c>>>m+f&1,h<<=1,h|=l>>>m+f&1;for(f=4;f<8;f++)for(m=24;m>=0;m-=8)p<<=1,p|=c>>>m+f&1,p<<=1,p|=l>>>m+f&1;u[d+0]=h>>>0,u[d+1]=p>>>0},r.pc1=function(l,c,u,d){for(var h=0,p=0,f=7;f>=5;f--){for(var m=0;m<=24;m+=8)h<<=1,h|=c>>m+f&1;for(m=0;m<=24;m+=8)h<<=1,h|=l>>m+f&1}for(m=0;m<=24;m+=8)h<<=1,h|=c>>m+f&1;for(f=1;f<=3;f++){for(m=0;m<=24;m+=8)p<<=1,p|=c>>m+f&1;for(m=0;m<=24;m+=8)p<<=1,p|=l>>m+f&1}for(m=0;m<=24;m+=8)p<<=1,p|=l>>m+f&1;u[d+0]=h>>>0,u[d+1]=p>>>0},r.r28shl=function(l,c){return l<<c&268435455|l>>>28-c};var n=[14,11,17,4,27,23,25,0,13,22,7,18,5,9,16,24,2,20,12,21,1,8,15,26,15,4,25,19,9,1,26,16,5,11,23,8,12,7,17,0,22,3,10,14,6,20,27,24];r.pc2=function(l,c,u,d){for(var h=0,p=0,f=n.length>>>1,m=0;m<f;m++)h<<=1,h|=l>>>n[m]&1;for(m=f;m<n.length;m++)p<<=1,p|=c>>>n[m]&1;u[d+0]=h>>>0,u[d+1]=p>>>0},r.expand=function(l,c,u){var d=0,h=0;d=(1&l)<<5|l>>>27;for(var p=23;p>=15;p-=4)d<<=6,d|=l>>>p&63;for(p=11;p>=3;p-=4)h|=l>>>p&63,h<<=6;h|=(31&l)<<1|l>>>31,c[u+0]=d>>>0,c[u+1]=h>>>0};var o=[14,0,4,15,13,7,1,4,2,14,15,2,11,13,8,1,3,10,10,6,6,12,12,11,5,9,9,5,0,3,7,8,4,15,1,12,14,8,8,2,13,4,6,9,2,1,11,7,15,5,12,11,9,3,7,14,3,10,10,0,5,6,0,13,15,3,1,13,8,4,14,7,6,15,11,2,3,8,4,14,9,12,7,0,2,1,13,10,12,6,0,9,5,11,10,5,0,13,14,8,7,10,11,1,10,3,4,15,13,4,1,2,5,11,8,6,12,7,6,12,9,0,3,5,2,14,15,9,10,13,0,7,9,0,14,9,6,3,3,4,15,6,5,10,1,2,13,8,12,5,7,14,11,12,4,11,2,15,8,1,13,1,6,10,4,13,9,0,8,6,15,9,3,8,0,7,11,4,1,15,2,14,12,3,5,11,10,5,14,2,7,12,7,13,13,8,14,11,3,5,0,6,6,15,9,0,10,3,1,4,2,7,8,2,5,12,11,1,12,10,4,14,15,9,10,3,6,15,9,0,0,6,12,10,11,1,7,13,13,8,15,9,1,4,3,5,14,11,5,12,2,7,8,2,4,14,2,14,12,11,4,2,1,12,7,4,10,7,11,13,6,1,8,5,5,0,3,15,15,10,13,3,0,9,14,8,9,6,4,11,2,8,1,12,11,7,10,1,13,14,7,2,8,13,15,6,9,15,12,0,5,9,6,10,3,4,0,5,14,3,12,10,1,15,10,4,15,2,9,7,2,12,6,9,8,5,0,6,13,1,3,13,4,14,14,0,7,11,5,3,11,8,9,4,14,3,15,2,5,12,2,9,8,5,12,15,3,10,7,11,0,14,4,1,10,7,1,6,13,0,11,8,6,13,4,13,11,0,2,11,14,7,15,4,0,9,8,1,13,10,3,14,12,3,9,5,7,12,5,2,10,15,6,8,1,6,1,6,4,11,11,13,13,8,12,1,3,4,7,10,14,7,10,9,15,5,6,0,8,15,0,14,5,2,9,3,2,12,13,1,2,15,8,13,4,8,6,10,15,3,11,7,1,4,10,12,9,5,3,6,14,11,5,0,0,14,12,9,7,2,7,2,11,1,4,14,1,7,9,4,12,10,14,8,2,13,0,15,6,12,10,9,13,0,15,3,3,5,5,6,8,11];r.substitute=function(l,c){for(var u=0,d=0;d<4;d++)u<<=4,u|=o[64*d+(l>>>18-6*d&63)];for(d=0;d<4;d++)u<<=4,u|=o[256+64*d+(c>>>18-6*d&63)];return u>>>0};var a=[16,25,12,11,3,20,4,15,31,17,9,6,27,14,1,22,30,24,8,18,0,5,29,23,13,19,2,26,10,21,28,7];r.permute=function(l){for(var c=0,u=0;u<a.length;u++)c<<=1,c|=l>>>a[u]&1;return c>>>0},r.padSplit=function(l,c,u){for(var d=l.toString(2);d.length<c;)d="0"+d;for(var h=[],p=0;p<c;p+=u)h.push(d.slice(p,p+u));return h.join(" ")}},{}],400:[function(i,s,r){(function(n){(function(){var o=i("./lib/generatePrime"),a=i("./lib/primes.json"),l=i("./lib/dh"),c={binary:!0,hex:!0,base64:!0};r.DiffieHellmanGroup=r.createDiffieHellmanGroup=r.getDiffieHellman=function(u){var d=new n(a[u].prime,"hex"),h=new n(a[u].gen,"hex");return new l(d,h)},r.createDiffieHellman=r.DiffieHellman=function u(d,h,p,f){return n.isBuffer(h)||c[h]===void 0?u(d,"binary",h,p):(h=h||"binary",f=f||"binary",p=p||new n([2]),n.isBuffer(p)||(p=new n(p,f)),typeof d=="number"?new l(o(d,p),p,!0):(n.isBuffer(d)||(d=new n(d,h)),new l(d,p,!0)))}}).call(this)}).call(this,i("buffer").Buffer)},{"./lib/dh":401,"./lib/generatePrime":402,"./lib/primes.json":403,buffer:220}],401:[function(i,s,r){(function(n){(function(){var o=i("bn.js"),a=new(i("miller-rabin")),l=new o(24),c=new o(11),u=new o(10),d=new o(3),h=new o(7),p=i("./generatePrime"),f=i("randombytes");function m(b,T){return T=T||"utf8",n.isBuffer(b)||(b=new n(b,T)),this._pub=new o(b),this}function g(b,T){return T=T||"utf8",n.isBuffer(b)||(b=new n(b,T)),this._priv=new o(b),this}s.exports=v;var y={};function v(b,T,A){this.setGenerator(T),this.__prime=new o(b),this._prime=o.mont(this.__prime),this._primeLen=b.length,this._pub=void 0,this._priv=void 0,this._primeCode=void 0,A?(this.setPublicKey=m,this.setPrivateKey=g):this._primeCode=8}function C(b,T){var A=new n(b.toArray());return T?A.toString(T):A}Object.defineProperty(v.prototype,"verifyError",{enumerable:!0,get:function(){return typeof this._primeCode!="number"&&(this._primeCode=function(b,T){var A=T.toString("hex"),I=[A,b.toString(16)].join("_");if(I in y)return y[I];var D,F=0;if(b.isEven()||!p.simpleSieve||!p.fermatTest(b)||!a.test(b))return F+=1,F+=A==="02"||A==="05"?8:4,y[I]=F,F;switch(a.test(b.shrn(1))||(F+=2),A){case"02":b.mod(l).cmp(c)&&(F+=8);break;case"05":(D=b.mod(u)).cmp(d)&&D.cmp(h)&&(F+=8);break;default:F+=4}return y[I]=F,F}(this.__prime,this.__gen)),this._primeCode}}),v.prototype.generateKeys=function(){return this._priv||(this._priv=new o(f(this._primeLen))),this._pub=this._gen.toRed(this._prime).redPow(this._priv).fromRed(),this.getPublicKey()},v.prototype.computeSecret=function(b){var T=(b=(b=new o(b)).toRed(this._prime)).redPow(this._priv).fromRed(),A=new n(T.toArray()),I=this.getPrime();if(A.length<I.length){var D=new n(I.length-A.length);D.fill(0),A=n.concat([D,A])}return A},v.prototype.getPublicKey=function(b){return C(this._pub,b)},v.prototype.getPrivateKey=function(b){return C(this._priv,b)},v.prototype.getPrime=function(b){return C(this.__prime,b)},v.prototype.getGenerator=function(b){return C(this._gen,b)},v.prototype.setGenerator=function(b,T){return T=T||"utf8",n.isBuffer(b)||(b=new n(b,T)),this.__gen=b,this._gen=new o(b),this}}).call(this)}).call(this,i("buffer").Buffer)},{"./generatePrime":402,"bn.js":404,buffer:220,"miller-rabin":451,randombytes:475}],402:[function(i,s,r){var n=i("randombytes");s.exports=b,b.simpleSieve=v,b.fermatTest=C;var o=i("bn.js"),a=new o(24),l=new(i("miller-rabin")),c=new o(1),u=new o(2),d=new o(5),h=(new o(16),new o(8),new o(10)),p=new o(3),f=(new o(7),new o(11)),m=new o(4),g=(new o(12),null);function y(){if(g!==null)return g;var T=[];T[0]=2;for(var A=1,I=3;I<1048576;I+=2){for(var D=Math.ceil(Math.sqrt(I)),F=0;F<A&&T[F]<=D&&I%T[F]!=0;F++);A!==F&&T[F]<=D||(T[A++]=I)}return g=T,T}function v(T){for(var A=y(),I=0;I<A.length;I++)if(T.modn(A[I])===0)return T.cmpn(A[I])===0;return!0}function C(T){var A=o.mont(T);return u.toRed(A).redPow(T.subn(1)).fromRed().cmpn(1)===0}function b(T,A){if(T<16)return new o(A===2||A===5?[140,123]:[140,39]);var I,D;for(A=new o(A);;){for(I=new o(n(Math.ceil(T/8)));I.bitLength()>T;)I.ishrn(1);if(I.isEven()&&I.iadd(c),I.testn(1)||I.iadd(u),A.cmp(u)){if(!A.cmp(d))for(;I.mod(h).cmp(p);)I.iadd(m)}else for(;I.mod(a).cmp(f);)I.iadd(m);if(v(D=I.shrn(1))&&v(I)&&C(D)&&C(I)&&l.test(D)&&l.test(I))return I}}},{"bn.js":404,"miller-rabin":451,randombytes:475}],403:[function(i,s,r){s.exports={modp1:{gen:"02",prime:"ffffffffffffffffc90fdaa22168c234c4c6628b80dc1cd129024e088a67cc74020bbea63b139b22514a08798e3404ddef9519b3cd3a431b302b0a6df25f14374fe1356d6d51c245e485b576625e7ec6f44c42e9a63a3620ffffffffffffffff"},modp2:{gen:"02",prime:"ffffffffffffffffc90fdaa22168c234c4c6628b80dc1cd129024e088a67cc74020bbea63b139b22514a08798e3404ddef9519b3cd3a431b302b0a6df25f14374fe1356d6d51c245e485b576625e7ec6f44c42e9a637ed6b0bff5cb6f406b7edee386bfb5a899fa5ae9f24117c4b1fe649286651ece65381ffffffffffffffff"},modp5:{gen:"02",prime:"ffffffffffffffffc90fdaa22168c234c4c6628b80dc1cd129024e088a67cc74020bbea63b139b22514a08798e3404ddef9519b3cd3a431b302b0a6df25f14374fe1356d6d51c245e485b576625e7ec6f44c42e9a637ed6b0bff5cb6f406b7edee386bfb5a899fa5ae9f24117c4b1fe649286651ece45b3dc2007cb8a163bf0598da48361c55d39a69163fa8fd24cf5f83655d23dca3ad961c62f356208552bb9ed529077096966d670c354e4abc9804f1746c08ca237327ffffffffffffffff"},modp14:{gen:"02",prime:"ffffffffffffffffc90fdaa22168c234c4c6628b80dc1cd129024e088a67cc74020bbea63b139b22514a08798e3404ddef9519b3cd3a431b302b0a6df25f14374fe1356d6d51c245e485b576625e7ec6f44c42e9a637ed6b0bff5cb6f406b7edee386bfb5a899fa5ae9f24117c4b1fe649286651ece45b3dc2007cb8a163bf0598da48361c55d39a69163fa8fd24cf5f83655d23dca3ad961c62f356208552bb9ed529077096966d670c354e4abc9804f1746c08ca18217c32905e462e36ce3be39e772c180e86039b2783a2ec07a28fb5c55df06f4c52c9de2bcbf6955817183995497cea956ae515d2261898fa051015728e5a8aacaa68ffffffffffffffff"},modp15:{gen:"02",prime:"ffffffffffffffffc90fdaa22168c234c4c6628b80dc1cd129024e088a67cc74020bbea63b139b22514a08798e3404ddef9519b3cd3a431b302b0a6df25f14374fe1356d6d51c245e485b576625e7ec6f44c42e9a637ed6b0bff5cb6f406b7edee386bfb5a899fa5ae9f24117c4b1fe649286651ece45b3dc2007cb8a163bf0598da48361c55d39a69163fa8fd24cf5f83655d23dca3ad961c62f356208552bb9ed529077096966d670c354e4abc9804f1746c08ca18217c32905e462e36ce3be39e772c180e86039b2783a2ec07a28fb5c55df06f4c52c9de2bcbf6955817183995497cea956ae515d2261898fa051015728e5a8aaac42dad33170d04507a33a85521abdf1cba64ecfb850458dbef0a8aea71575d060c7db3970f85a6e1e4c7abf5ae8cdb0933d71e8c94e04a25619dcee3d2261ad2ee6bf12ffa06d98a0864d87602733ec86a64521f2b18177b200cbbe117577a615d6c770988c0bad946e208e24fa074e5ab3143db5bfce0fd108e4b82d120a93ad2caffffffffffffffff"},modp16:{gen:"02",prime:"ffffffffffffffffc90fdaa22168c234c4c6628b80dc1cd129024e088a67cc74020bbea63b139b22514a08798e3404ddef9519b3cd3a431b302b0a6df25f14374fe1356d6d51c245e485b576625e7ec6f44c42e9a637ed6b0bff5cb6f406b7edee386bfb5a899fa5ae9f24117c4b1fe649286651ece45b3dc2007cb8a163bf0598da48361c55d39a69163fa8fd24cf5f83655d23dca3ad961c62f356208552bb9ed529077096966d670c354e4abc9804f1746c08ca18217c32905e462e36ce3be39e772c180e86039b2783a2ec07a28fb5c55df06f4c52c9de2bcbf6955817183995497cea956ae515d2261898fa051015728e5a8aaac42dad33170d04507a33a85521abdf1cba64ecfb850458dbef0a8aea71575d060c7db3970f85a6e1e4c7abf5ae8cdb0933d71e8c94e04a25619dcee3d2261ad2ee6bf12ffa06d98a0864d87602733ec86a64521f2b18177b200cbbe117577a615d6c770988c0bad946e208e24fa074e5ab3143db5bfce0fd108e4b82d120a92108011a723c12a787e6d788719a10bdba5b2699c327186af4e23c1a946834b6150bda2583e9ca2ad44ce8dbbbc2db04de8ef92e8efc141fbecaa6287c59474e6bc05d99b2964fa090c3a2233ba186515be7ed1f612970cee2d7afb81bdd762170481cd0069127d5b05aa993b4ea988d8fddc186ffb7dc90a6c08f4df435c934063199ffffffffffffffff"},modp17:{gen:"02",prime:"ffffffffffffffffc90fdaa22168c234c4c6628b80dc1cd129024e088a67cc74020bbea63b139b22514a08798e3404ddef9519b3cd3a431b302b0a6df25f14374fe1356d6d51c245e485b576625e7ec6f44c42e9a637ed6b0bff5cb6f406b7edee386bfb5a899fa5ae9f24117c4b1fe649286651ece45b3dc2007cb8a163bf0598da48361c55d39a69163fa8fd24cf5f83655d23dca3ad961c62f356208552bb9ed529077096966d670c354e4abc9804f1746c08ca18217c32905e462e36ce3be39e772c180e86039b2783a2ec07a28fb5c55df06f4c52c9de2bcbf6955817183995497cea956ae515d2261898fa051015728e5a8aaac42dad33170d04507a33a85521abdf1cba64ecfb850458dbef0a8aea71575d060c7db3970f85a6e1e4c7abf5ae8cdb0933d71e8c94e04a25619dcee3d2261ad2ee6bf12ffa06d98a0864d87602733ec86a64521f2b18177b200cbbe117577a615d6c770988c0bad946e208e24fa074e5ab3143db5bfce0fd108e4b82d120a92108011a723c12a787e6d788719a10bdba5b2699c327186af4e23c1a946834b6150bda2583e9ca2ad44ce8dbbbc2db04de8ef92e8efc141fbecaa6287c59474e6bc05d99b2964fa090c3a2233ba186515be7ed1f612970cee2d7afb81bdd762170481cd0069127d5b05aa993b4ea988d8fddc186ffb7dc90a6c08f4df435c93402849236c3fab4d27c7026c1d4dcb2602646dec9751e763dba37bdf8ff9406ad9e530ee5db382f413001aeb06a53ed9027d831179727b0865a8918da3edbebcf9b14ed44ce6cbaced4bb1bdb7f1447e6cc254b332051512bd7af426fb8f401378cd2bf5983ca01c64b92ecf032ea15d1721d03f482d7ce6e74fef6d55e702f46980c82b5a84031900b1c9e59e7c97fbec7e8f323a97a7e36cc88be0f1d45b7ff585ac54bd407b22b4154aacc8f6d7ebf48e1d814cc5ed20f8037e0a79715eef29be32806a1d58bb7c5da76f550aa3d8a1fbff0eb19ccb1a313d55cda56c9ec2ef29632387fe8d76e3c0468043e8f663f4860ee12bf2d5b0b7474d6e694f91e6dcc4024ffffffffffffffff"},modp18:{gen:"02",prime:"ffffffffffffffffc90fdaa22168c234c4c6628b80dc1cd129024e088a67cc74020bbea63b139b22514a08798e3404ddef9519b3cd3a431b302b0a6df25f14374fe1356d6d51c245e485b576625e7ec6f44c42e9a637ed6b0bff5cb6f406b7edee386bfb5a899fa5ae9f24117c4b1fe649286651ece45b3dc2007cb8a163bf0598da48361c55d39a69163fa8fd24cf5f83655d23dca3ad961c62f356208552bb9ed529077096966d670c354e4abc9804f1746c08ca18217c32905e462e36ce3be39e772c180e86039b2783a2ec07a28fb5c55df06f4c52c9de2bcbf6955817183995497cea956ae515d2261898fa051015728e5a8aaac42dad33170d04507a33a85521abdf1cba64ecfb850458dbef0a8aea71575d060c7db3970f85a6e1e4c7abf5ae8cdb0933d71e8c94e04a25619dcee3d2261ad2ee6bf12ffa06d98a0864d87602733ec86a64521f2b18177b200cbbe117577a615d6c770988c0bad946e208e24fa074e5ab3143db5bfce0fd108e4b82d120a92108011a723c12a787e6d788719a10bdba5b2699c327186af4e23c1a946834b6150bda2583e9ca2ad44ce8dbbbc2db04de8ef92e8efc141fbecaa6287c59474e6bc05d99b2964fa090c3a2233ba186515be7ed1f612970cee2d7afb81bdd762170481cd0069127d5b05aa993b4ea988d8fddc186ffb7dc90a6c08f4df435c93402849236c3fab4d27c7026c1d4dcb2602646dec9751e763dba37bdf8ff9406ad9e530ee5db382f413001aeb06a53ed9027d831179727b0865a8918da3edbebcf9b14ed44ce6cbaced4bb1bdb7f1447e6cc254b332051512bd7af426fb8f401378cd2bf5983ca01c64b92ecf032ea15d1721d03f482d7ce6e74fef6d55e702f46980c82b5a84031900b1c9e59e7c97fbec7e8f323a97a7e36cc88be0f1d45b7ff585ac54bd407b22b4154aacc8f6d7ebf48e1d814cc5ed20f8037e0a79715eef29be32806a1d58bb7c5da76f550aa3d8a1fbff0eb19ccb1a313d55cda56c9ec2ef29632387fe8d76e3c0468043e8f663f4860ee12bf2d5b0b7474d6e694f91e6dbe115974a3926f12fee5e438777cb6a932df8cd8bec4d073b931ba3bc832b68d9dd300741fa7bf8afc47ed2576f6936ba424663aab639c5ae4f5683423b4742bf1c978238f16cbe39d652de3fdb8befc848ad922222e04a4037c0713eb57a81a23f0c73473fc646cea306b4bcbc8862f8385ddfa9d4b7fa2c087e879683303ed5bdd3a062b3cf5b3a278a66d2a13f83f44f82ddf310ee074ab6a364597e899a0255dc164f31cc50846851df9ab48195ded7ea1b1d510bd7ee74d73faf36bc31ecfa268359046f4eb879f924009438b481c6cd7889a002ed5ee382bc9190da6fc026e479558e4475677e9aa9e3050e2765694dfc81f56e880b96e7160c980dd98edd3dfffffffffffffffff"}}},{}],404:[function(i,s,r){arguments[4][184][0].apply(r,arguments)},{buffer:188,dup:184}],405:[function(i,s,r){var n=r;n.version=i("../package.json").version,n.utils=i("./elliptic/utils"),n.rand=i("brorand"),n.curve=i("./elliptic/curve"),n.curves=i("./elliptic/curves"),n.ec=i("./elliptic/ec"),n.eddsa=i("./elliptic/eddsa")},{"../package.json":421,"./elliptic/curve":408,"./elliptic/curves":411,"./elliptic/ec":412,"./elliptic/eddsa":415,"./elliptic/utils":419,brorand:187}],406:[function(i,s,r){var n=i("bn.js"),o=i("../utils"),a=o.getNAF,l=o.getJSF,c=o.assert;function u(h,p){this.type=h,this.p=new n(p.p,16),this.red=p.prime?n.red(p.prime):n.mont(this.p),this.zero=new n(0).toRed(this.red),this.one=new n(1).toRed(this.red),this.two=new n(2).toRed(this.red),this.n=p.n&&new n(p.n,16),this.g=p.g&&this.pointFromJSON(p.g,p.gRed),this._wnafT1=new Array(4),this._wnafT2=new Array(4),this._wnafT3=new Array(4),this._wnafT4=new Array(4),this._bitLength=this.n?this.n.bitLength():0;var f=this.n&&this.p.div(this.n);!f||f.cmpn(100)>0?this.redN=null:(this._maxwellTrick=!0,this.redN=this.n.toRed(this.red))}function d(h,p){this.curve=h,this.type=p,this.precomputed=null}s.exports=u,u.prototype.point=function(){throw new Error("Not implemented")},u.prototype.validate=function(){throw new Error("Not implemented")},u.prototype._fixedNafMul=function(h,p){c(h.precomputed);var f=h._getDoubles(),m=a(p,1,this._bitLength),g=(1<<f.step+1)-(f.step%2==0?2:1);g/=3;var y,v,C=[];for(y=0;y<m.length;y+=f.step){v=0;for(var b=y+f.step-1;b>=y;b--)v=(v<<1)+m[b];C.push(v)}for(var T=this.jpoint(null,null,null),A=this.jpoint(null,null,null),I=g;I>0;I--){for(y=0;y<C.length;y++)(v=C[y])===I?A=A.mixedAdd(f.points[y]):v===-I&&(A=A.mixedAdd(f.points[y].neg()));T=T.add(A)}return T.toP()},u.prototype._wnafMul=function(h,p){var f=4,m=h._getNAFPoints(f);f=m.wnd;for(var g=m.points,y=a(p,f,this._bitLength),v=this.jpoint(null,null,null),C=y.length-1;C>=0;C--){for(var b=0;C>=0&&y[C]===0;C--)b++;if(C>=0&&b++,v=v.dblp(b),C<0)break;var T=y[C];c(T!==0),v=h.type==="affine"?T>0?v.mixedAdd(g[T-1>>1]):v.mixedAdd(g[-T-1>>1].neg()):T>0?v.add(g[T-1>>1]):v.add(g[-T-1>>1].neg())}return h.type==="affine"?v.toP():v},u.prototype._wnafMulAdd=function(h,p,f,m,g){var y,v,C,b=this._wnafT1,T=this._wnafT2,A=this._wnafT3,I=0;for(y=0;y<m;y++){var D=(C=p[y])._getNAFPoints(h);b[y]=D.wnd,T[y]=D.points}for(y=m-1;y>=1;y-=2){var F=y-1,B=y;if(b[F]===1&&b[B]===1){var U=[p[F],null,null,p[B]];p[F].y.cmp(p[B].y)===0?(U[1]=p[F].add(p[B]),U[2]=p[F].toJ().mixedAdd(p[B].neg())):p[F].y.cmp(p[B].y.redNeg())===0?(U[1]=p[F].toJ().mixedAdd(p[B]),U[2]=p[F].add(p[B].neg())):(U[1]=p[F].toJ().mixedAdd(p[B]),U[2]=p[F].toJ().mixedAdd(p[B].neg()));var H=[-3,-1,-5,-7,0,7,5,1,3],R=l(f[F],f[B]);for(I=Math.max(R[0].length,I),A[F]=new Array(I),A[B]=new Array(I),v=0;v<I;v++){var L=0|R[0][v],_=0|R[1][v];A[F][v]=H[3*(L+1)+(_+1)],A[B][v]=0,T[F]=U}}else A[F]=a(f[F],b[F],this._bitLength),A[B]=a(f[B],b[B],this._bitLength),I=Math.max(A[F].length,I),I=Math.max(A[B].length,I)}var w=this.jpoint(null,null,null),S=this._wnafT4;for(y=I;y>=0;y--){for(var x=0;y>=0;){var E=!0;for(v=0;v<m;v++)S[v]=0|A[v][y],S[v]!==0&&(E=!1);if(!E)break;x++,y--}if(y>=0&&x++,w=w.dblp(x),y<0)break;for(v=0;v<m;v++){var M=S[v];M!==0&&(M>0?C=T[v][M-1>>1]:M<0&&(C=T[v][-M-1>>1].neg()),w=C.type==="affine"?w.mixedAdd(C):w.add(C))}}for(y=0;y<m;y++)T[y]=null;return g?w:w.toP()},u.BasePoint=d,d.prototype.eq=function(){throw new Error("Not implemented")},d.prototype.validate=function(){return this.curve.validate(this)},u.prototype.decodePoint=function(h,p){h=o.toArray(h,p);var f=this.p.byteLength();if((h[0]===4||h[0]===6||h[0]===7)&&h.length-1==2*f)return h[0]===6?c(h[h.length-1]%2==0):h[0]===7&&c(h[h.length-1]%2==1),this.point(h.slice(1,1+f),h.slice(1+f,1+2*f));if((h[0]===2||h[0]===3)&&h.length-1===f)return this.pointFromX(h.slice(1,1+f),h[0]===3);throw new Error("Unknown point format")},d.prototype.encodeCompressed=function(h){return this.encode(h,!0)},d.prototype._encode=function(h){var p=this.curve.p.byteLength(),f=this.getX().toArray("be",p);return h?[this.getY().isEven()?2:3].concat(f):[4].concat(f,this.getY().toArray("be",p))},d.prototype.encode=function(h,p){return o.encode(this._encode(p),h)},d.prototype.precompute=function(h){if(this.precomputed)return this;var p={doubles:null,naf:null,beta:null};return p.naf=this._getNAFPoints(8),p.doubles=this._getDoubles(4,h),p.beta=this._getBeta(),this.precomputed=p,this},d.prototype._hasDoubles=function(h){if(!this.precomputed)return!1;var p=this.precomputed.doubles;return!!p&&p.points.length>=Math.ceil((h.bitLength()+1)/p.step)},d.prototype._getDoubles=function(h,p){if(this.precomputed&&this.precomputed.doubles)return this.precomputed.doubles;for(var f=[this],m=this,g=0;g<p;g+=h){for(var y=0;y<h;y++)m=m.dbl();f.push(m)}return{step:h,points:f}},d.prototype._getNAFPoints=function(h){if(this.precomputed&&this.precomputed.naf)return this.precomputed.naf;for(var p=[this],f=(1<<h)-1,m=f===1?null:this.dbl(),g=1;g<f;g++)p[g]=p[g-1].add(m);return{wnd:h,points:p}},d.prototype._getBeta=function(){return null},d.prototype.dblp=function(h){for(var p=this,f=0;f<h;f++)p=p.dbl();return p}},{"../utils":419,"bn.js":420}],407:[function(i,s,r){var n=i("../utils"),o=i("bn.js"),a=i("inherits"),l=i("./base"),c=n.assert;function u(h){this.twisted=(0|h.a)!=1,this.mOneA=this.twisted&&(0|h.a)==-1,this.extended=this.mOneA,l.call(this,"edwards",h),this.a=new o(h.a,16).umod(this.red.m),this.a=this.a.toRed(this.red),this.c=new o(h.c,16).toRed(this.red),this.c2=this.c.redSqr(),this.d=new o(h.d,16).toRed(this.red),this.dd=this.d.redAdd(this.d),c(!this.twisted||this.c.fromRed().cmpn(1)===0),this.oneC=(0|h.c)==1}function d(h,p,f,m,g){l.BasePoint.call(this,h,"projective"),p===null&&f===null&&m===null?(this.x=this.curve.zero,this.y=this.curve.one,this.z=this.curve.one,this.t=this.curve.zero,this.zOne=!0):(this.x=new o(p,16),this.y=new o(f,16),this.z=m?new o(m,16):this.curve.one,this.t=g&&new o(g,16),this.x.red||(this.x=this.x.toRed(this.curve.red)),this.y.red||(this.y=this.y.toRed(this.curve.red)),this.z.red||(this.z=this.z.toRed(this.curve.red)),this.t&&!this.t.red&&(this.t=this.t.toRed(this.curve.red)),this.zOne=this.z===this.curve.one,this.curve.extended&&!this.t&&(this.t=this.x.redMul(this.y),this.zOne||(this.t=this.t.redMul(this.z.redInvm()))))}a(u,l),s.exports=u,u.prototype._mulA=function(h){return this.mOneA?h.redNeg():this.a.redMul(h)},u.prototype._mulC=function(h){return this.oneC?h:this.c.redMul(h)},u.prototype.jpoint=function(h,p,f,m){return this.point(h,p,f,m)},u.prototype.pointFromX=function(h,p){(h=new o(h,16)).red||(h=h.toRed(this.red));var f=h.redSqr(),m=this.c2.redSub(this.a.redMul(f)),g=this.one.redSub(this.c2.redMul(this.d).redMul(f)),y=m.redMul(g.redInvm()),v=y.redSqrt();if(v.redSqr().redSub(y).cmp(this.zero)!==0)throw new Error("invalid point");var C=v.fromRed().isOdd();return(p&&!C||!p&&C)&&(v=v.redNeg()),this.point(h,v)},u.prototype.pointFromY=function(h,p){(h=new o(h,16)).red||(h=h.toRed(this.red));var f=h.redSqr(),m=f.redSub(this.c2),g=f.redMul(this.d).redMul(this.c2).redSub(this.a),y=m.redMul(g.redInvm());if(y.cmp(this.zero)===0){if(p)throw new Error("invalid point");return this.point(this.zero,h)}var v=y.redSqrt();if(v.redSqr().redSub(y).cmp(this.zero)!==0)throw new Error("invalid point");return v.fromRed().isOdd()!==p&&(v=v.redNeg()),this.point(v,h)},u.prototype.validate=function(h){if(h.isInfinity())return!0;h.normalize();var p=h.x.redSqr(),f=h.y.redSqr(),m=p.redMul(this.a).redAdd(f),g=this.c2.redMul(this.one.redAdd(this.d.redMul(p).redMul(f)));return m.cmp(g)===0},a(d,l.BasePoint),u.prototype.pointFromJSON=function(h){return d.fromJSON(this,h)},u.prototype.point=function(h,p,f,m){return new d(this,h,p,f,m)},d.fromJSON=function(h,p){return new d(h,p[0],p[1],p[2])},d.prototype.inspect=function(){return this.isInfinity()?"<EC Point Infinity>":"<EC Point x: "+this.x.fromRed().toString(16,2)+" y: "+this.y.fromRed().toString(16,2)+" z: "+this.z.fromRed().toString(16,2)+">"},d.prototype.isInfinity=function(){return this.x.cmpn(0)===0&&(this.y.cmp(this.z)===0||this.zOne&&this.y.cmp(this.curve.c)===0)},d.prototype._extDbl=function(){var h=this.x.redSqr(),p=this.y.redSqr(),f=this.z.redSqr();f=f.redIAdd(f);var m=this.curve._mulA(h),g=this.x.redAdd(this.y).redSqr().redISub(h).redISub(p),y=m.redAdd(p),v=y.redSub(f),C=m.redSub(p),b=g.redMul(v),T=y.redMul(C),A=g.redMul(C),I=v.redMul(y);return this.curve.point(b,T,I,A)},d.prototype._projDbl=function(){var h,p,f,m,g,y,v=this.x.redAdd(this.y).redSqr(),C=this.x.redSqr(),b=this.y.redSqr();if(this.curve.twisted){var T=(m=this.curve._mulA(C)).redAdd(b);this.zOne?(h=v.redSub(C).redSub(b).redMul(T.redSub(this.curve.two)),p=T.redMul(m.redSub(b)),f=T.redSqr().redSub(T).redSub(T)):(g=this.z.redSqr(),y=T.redSub(g).redISub(g),h=v.redSub(C).redISub(b).redMul(y),p=T.redMul(m.redSub(b)),f=T.redMul(y))}else m=C.redAdd(b),g=this.curve._mulC(this.z).redSqr(),y=m.redSub(g).redSub(g),h=this.curve._mulC(v.redISub(m)).redMul(y),p=this.curve._mulC(m).redMul(C.redISub(b)),f=m.redMul(y);return this.curve.point(h,p,f)},d.prototype.dbl=function(){return this.isInfinity()?this:this.curve.extended?this._extDbl():this._projDbl()},d.prototype._extAdd=function(h){var p=this.y.redSub(this.x).redMul(h.y.redSub(h.x)),f=this.y.redAdd(this.x).redMul(h.y.redAdd(h.x)),m=this.t.redMul(this.curve.dd).redMul(h.t),g=this.z.redMul(h.z.redAdd(h.z)),y=f.redSub(p),v=g.redSub(m),C=g.redAdd(m),b=f.redAdd(p),T=y.redMul(v),A=C.redMul(b),I=y.redMul(b),D=v.redMul(C);return this.curve.point(T,A,D,I)},d.prototype._projAdd=function(h){var p,f,m=this.z.redMul(h.z),g=m.redSqr(),y=this.x.redMul(h.x),v=this.y.redMul(h.y),C=this.curve.d.redMul(y).redMul(v),b=g.redSub(C),T=g.redAdd(C),A=this.x.redAdd(this.y).redMul(h.x.redAdd(h.y)).redISub(y).redISub(v),I=m.redMul(b).redMul(A);return this.curve.twisted?(p=m.redMul(T).redMul(v.redSub(this.curve._mulA(y))),f=b.redMul(T)):(p=m.redMul(T).redMul(v.redSub(y)),f=this.curve._mulC(b).redMul(T)),this.curve.point(I,p,f)},d.prototype.add=function(h){return this.isInfinity()?h:h.isInfinity()?this:this.curve.extended?this._extAdd(h):this._projAdd(h)},d.prototype.mul=function(h){return this._hasDoubles(h)?this.curve._fixedNafMul(this,h):this.curve._wnafMul(this,h)},d.prototype.mulAdd=function(h,p,f){return this.curve._wnafMulAdd(1,[this,p],[h,f],2,!1)},d.prototype.jmulAdd=function(h,p,f){return this.curve._wnafMulAdd(1,[this,p],[h,f],2,!0)},d.prototype.normalize=function(){if(this.zOne)return this;var h=this.z.redInvm();return this.x=this.x.redMul(h),this.y=this.y.redMul(h),this.t&&(this.t=this.t.redMul(h)),this.z=this.curve.one,this.zOne=!0,this},d.prototype.neg=function(){return this.curve.point(this.x.redNeg(),this.y,this.z,this.t&&this.t.redNeg())},d.prototype.getX=function(){return this.normalize(),this.x.fromRed()},d.prototype.getY=function(){return this.normalize(),this.y.fromRed()},d.prototype.eq=function(h){return this===h||this.getX().cmp(h.getX())===0&&this.getY().cmp(h.getY())===0},d.prototype.eqXToP=function(h){var p=h.toRed(this.curve.red).redMul(this.z);if(this.x.cmp(p)===0)return!0;for(var f=h.clone(),m=this.curve.redN.redMul(this.z);;){if(f.iadd(this.curve.n),f.cmp(this.curve.p)>=0)return!1;if(p.redIAdd(m),this.x.cmp(p)===0)return!0}},d.prototype.toP=d.prototype.normalize,d.prototype.mixedAdd=d.prototype.add},{"../utils":419,"./base":406,"bn.js":420,inherits:440}],408:[function(i,s,r){var n=r;n.base=i("./base"),n.short=i("./short"),n.mont=i("./mont"),n.edwards=i("./edwards")},{"./base":406,"./edwards":407,"./mont":409,"./short":410}],409:[function(i,s,r){var n=i("bn.js"),o=i("inherits"),a=i("./base"),l=i("../utils");function c(d){a.call(this,"mont",d),this.a=new n(d.a,16).toRed(this.red),this.b=new n(d.b,16).toRed(this.red),this.i4=new n(4).toRed(this.red).redInvm(),this.two=new n(2).toRed(this.red),this.a24=this.i4.redMul(this.a.redAdd(this.two))}function u(d,h,p){a.BasePoint.call(this,d,"projective"),h===null&&p===null?(this.x=this.curve.one,this.z=this.curve.zero):(this.x=new n(h,16),this.z=new n(p,16),this.x.red||(this.x=this.x.toRed(this.curve.red)),this.z.red||(this.z=this.z.toRed(this.curve.red)))}o(c,a),s.exports=c,c.prototype.validate=function(d){var h=d.normalize().x,p=h.redSqr(),f=p.redMul(h).redAdd(p.redMul(this.a)).redAdd(h);return f.redSqrt().redSqr().cmp(f)===0},o(u,a.BasePoint),c.prototype.decodePoint=function(d,h){return this.point(l.toArray(d,h),1)},c.prototype.point=function(d,h){return new u(this,d,h)},c.prototype.pointFromJSON=function(d){return u.fromJSON(this,d)},u.prototype.precompute=function(){},u.prototype._encode=function(){return this.getX().toArray("be",this.curve.p.byteLength())},u.fromJSON=function(d,h){return new u(d,h[0],h[1]||d.one)},u.prototype.inspect=function(){return this.isInfinity()?"<EC Point Infinity>":"<EC Point x: "+this.x.fromRed().toString(16,2)+" z: "+this.z.fromRed().toString(16,2)+">"},u.prototype.isInfinity=function(){return this.z.cmpn(0)===0},u.prototype.dbl=function(){var d=this.x.redAdd(this.z).redSqr(),h=this.x.redSub(this.z).redSqr(),p=d.redSub(h),f=d.redMul(h),m=p.redMul(h.redAdd(this.curve.a24.redMul(p)));return this.curve.point(f,m)},u.prototype.add=function(){throw new Error("Not supported on Montgomery curve")},u.prototype.diffAdd=function(d,h){var p=this.x.redAdd(this.z),f=this.x.redSub(this.z),m=d.x.redAdd(d.z),g=d.x.redSub(d.z).redMul(p),y=m.redMul(f),v=h.z.redMul(g.redAdd(y).redSqr()),C=h.x.redMul(g.redISub(y).redSqr());return this.curve.point(v,C)},u.prototype.mul=function(d){for(var h=d.clone(),p=this,f=this.curve.point(null,null),m=[];h.cmpn(0)!==0;h.iushrn(1))m.push(h.andln(1));for(var g=m.length-1;g>=0;g--)m[g]===0?(p=p.diffAdd(f,this),f=f.dbl()):(f=p.diffAdd(f,this),p=p.dbl());return f},u.prototype.mulAdd=function(){throw new Error("Not supported on Montgomery curve")},u.prototype.jumlAdd=function(){throw new Error("Not supported on Montgomery curve")},u.prototype.eq=function(d){return this.getX().cmp(d.getX())===0},u.prototype.normalize=function(){return this.x=this.x.redMul(this.z.redInvm()),this.z=this.curve.one,this},u.prototype.getX=function(){return this.normalize(),this.x.fromRed()}},{"../utils":419,"./base":406,"bn.js":420,inherits:440}],410:[function(i,s,r){var n=i("../utils"),o=i("bn.js"),a=i("inherits"),l=i("./base"),c=n.assert;function u(p){l.call(this,"short",p),this.a=new o(p.a,16).toRed(this.red),this.b=new o(p.b,16).toRed(this.red),this.tinv=this.two.redInvm(),this.zeroA=this.a.fromRed().cmpn(0)===0,this.threeA=this.a.fromRed().sub(this.p).cmpn(-3)===0,this.endo=this._getEndomorphism(p),this._endoWnafT1=new Array(4),this._endoWnafT2=new Array(4)}function d(p,f,m,g){l.BasePoint.call(this,p,"affine"),f===null&&m===null?(this.x=null,this.y=null,this.inf=!0):(this.x=new o(f,16),this.y=new o(m,16),g&&(this.x.forceRed(this.curve.red),this.y.forceRed(this.curve.red)),this.x.red||(this.x=this.x.toRed(this.curve.red)),this.y.red||(this.y=this.y.toRed(this.curve.red)),this.inf=!1)}function h(p,f,m,g){l.BasePoint.call(this,p,"jacobian"),f===null&&m===null&&g===null?(this.x=this.curve.one,this.y=this.curve.one,this.z=new o(0)):(this.x=new o(f,16),this.y=new o(m,16),this.z=new o(g,16)),this.x.red||(this.x=this.x.toRed(this.curve.red)),this.y.red||(this.y=this.y.toRed(this.curve.red)),this.z.red||(this.z=this.z.toRed(this.curve.red)),this.zOne=this.z===this.curve.one}a(u,l),s.exports=u,u.prototype._getEndomorphism=function(p){if(this.zeroA&&this.g&&this.n&&this.p.modn(3)===1){var f,m;if(p.beta)f=new o(p.beta,16).toRed(this.red);else{var g=this._getEndoRoots(this.p);f=(f=g[0].cmp(g[1])<0?g[0]:g[1]).toRed(this.red)}if(p.lambda)m=new o(p.lambda,16);else{var y=this._getEndoRoots(this.n);this.g.mul(y[0]).x.cmp(this.g.x.redMul(f))===0?m=y[0]:(m=y[1],c(this.g.mul(m).x.cmp(this.g.x.redMul(f))===0))}return{beta:f,lambda:m,basis:p.basis?p.basis.map(function(v){return{a:new o(v.a,16),b:new o(v.b,16)}}):this._getEndoBasis(m)}}},u.prototype._getEndoRoots=function(p){var f=p===this.p?this.red:o.mont(p),m=new o(2).toRed(f).redInvm(),g=m.redNeg(),y=new o(3).toRed(f).redNeg().redSqrt().redMul(m);return[g.redAdd(y).fromRed(),g.redSub(y).fromRed()]},u.prototype._getEndoBasis=function(p){for(var f,m,g,y,v,C,b,T,A,I=this.n.ushrn(Math.floor(this.n.bitLength()/2)),D=p,F=this.n.clone(),B=new o(1),U=new o(0),H=new o(0),R=new o(1),L=0;D.cmpn(0)!==0;){var _=F.div(D);T=F.sub(_.mul(D)),A=H.sub(_.mul(B));var w=R.sub(_.mul(U));if(!g&&T.cmp(I)<0)f=b.neg(),m=B,g=T.neg(),y=A;else if(g&&++L==2)break;b=T,F=D,D=T,H=B,B=A,R=U,U=w}v=T.neg(),C=A;var S=g.sqr().add(y.sqr());return v.sqr().add(C.sqr()).cmp(S)>=0&&(v=f,C=m),g.negative&&(g=g.neg(),y=y.neg()),v.negative&&(v=v.neg(),C=C.neg()),[{a:g,b:y},{a:v,b:C}]},u.prototype._endoSplit=function(p){var f=this.endo.basis,m=f[0],g=f[1],y=g.b.mul(p).divRound(this.n),v=m.b.neg().mul(p).divRound(this.n),C=y.mul(m.a),b=v.mul(g.a),T=y.mul(m.b),A=v.mul(g.b);return{k1:p.sub(C).sub(b),k2:T.add(A).neg()}},u.prototype.pointFromX=function(p,f){(p=new o(p,16)).red||(p=p.toRed(this.red));var m=p.redSqr().redMul(p).redIAdd(p.redMul(this.a)).redIAdd(this.b),g=m.redSqrt();if(g.redSqr().redSub(m).cmp(this.zero)!==0)throw new Error("invalid point");var y=g.fromRed().isOdd();return(f&&!y||!f&&y)&&(g=g.redNeg()),this.point(p,g)},u.prototype.validate=function(p){if(p.inf)return!0;var f=p.x,m=p.y,g=this.a.redMul(f),y=f.redSqr().redMul(f).redIAdd(g).redIAdd(this.b);return m.redSqr().redISub(y).cmpn(0)===0},u.prototype._endoWnafMulAdd=function(p,f,m){for(var g=this._endoWnafT1,y=this._endoWnafT2,v=0;v<p.length;v++){var C=this._endoSplit(f[v]),b=p[v],T=b._getBeta();C.k1.negative&&(C.k1.ineg(),b=b.neg(!0)),C.k2.negative&&(C.k2.ineg(),T=T.neg(!0)),g[2*v]=b,g[2*v+1]=T,y[2*v]=C.k1,y[2*v+1]=C.k2}for(var A=this._wnafMulAdd(1,g,y,2*v,m),I=0;I<2*v;I++)g[I]=null,y[I]=null;return A},a(d,l.BasePoint),u.prototype.point=function(p,f,m){return new d(this,p,f,m)},u.prototype.pointFromJSON=function(p,f){return d.fromJSON(this,p,f)},d.prototype._getBeta=function(){if(this.curve.endo){var p=this.precomputed;if(p&&p.beta)return p.beta;var f=this.curve.point(this.x.redMul(this.curve.endo.beta),this.y);if(p){var m=this.curve,g=function(y){return m.point(y.x.redMul(m.endo.beta),y.y)};p.beta=f,f.precomputed={beta:null,naf:p.naf&&{wnd:p.naf.wnd,points:p.naf.points.map(g)},doubles:p.doubles&&{step:p.doubles.step,points:p.doubles.points.map(g)}}}return f}},d.prototype.toJSON=function(){return this.precomputed?[this.x,this.y,this.precomputed&&{doubles:this.precomputed.doubles&&{step:this.precomputed.doubles.step,points:this.precomputed.doubles.points.slice(1)},naf:this.precomputed.naf&&{wnd:this.precomputed.naf.wnd,points:this.precomputed.naf.points.slice(1)}}]:[this.x,this.y]},d.fromJSON=function(p,f,m){typeof f=="string"&&(f=JSON.parse(f));var g=p.point(f[0],f[1],m);if(!f[2])return g;function y(C){return p.point(C[0],C[1],m)}var v=f[2];return g.precomputed={beta:null,doubles:v.doubles&&{step:v.doubles.step,points:[g].concat(v.doubles.points.map(y))},naf:v.naf&&{wnd:v.naf.wnd,points:[g].concat(v.naf.points.map(y))}},g},d.prototype.inspect=function(){return this.isInfinity()?"<EC Point Infinity>":"<EC Point x: "+this.x.fromRed().toString(16,2)+" y: "+this.y.fromRed().toString(16,2)+">"},d.prototype.isInfinity=function(){return this.inf},d.prototype.add=function(p){if(this.inf)return p;if(p.inf)return this;if(this.eq(p))return this.dbl();if(this.neg().eq(p))return this.curve.point(null,null);if(this.x.cmp(p.x)===0)return this.curve.point(null,null);var f=this.y.redSub(p.y);f.cmpn(0)!==0&&(f=f.redMul(this.x.redSub(p.x).redInvm()));var m=f.redSqr().redISub(this.x).redISub(p.x),g=f.redMul(this.x.redSub(m)).redISub(this.y);return this.curve.point(m,g)},d.prototype.dbl=function(){if(this.inf)return this;var p=this.y.redAdd(this.y);if(p.cmpn(0)===0)return this.curve.point(null,null);var f=this.curve.a,m=this.x.redSqr(),g=p.redInvm(),y=m.redAdd(m).redIAdd(m).redIAdd(f).redMul(g),v=y.redSqr().redISub(this.x.redAdd(this.x)),C=y.redMul(this.x.redSub(v)).redISub(this.y);return this.curve.point(v,C)},d.prototype.getX=function(){return this.x.fromRed()},d.prototype.getY=function(){return this.y.fromRed()},d.prototype.mul=function(p){return p=new o(p,16),this.isInfinity()?this:this._hasDoubles(p)?this.curve._fixedNafMul(this,p):this.curve.endo?this.curve._endoWnafMulAdd([this],[p]):this.curve._wnafMul(this,p)},d.prototype.mulAdd=function(p,f,m){var g=[this,f],y=[p,m];return this.curve.endo?this.curve._endoWnafMulAdd(g,y):this.curve._wnafMulAdd(1,g,y,2)},d.prototype.jmulAdd=function(p,f,m){var g=[this,f],y=[p,m];return this.curve.endo?this.curve._endoWnafMulAdd(g,y,!0):this.curve._wnafMulAdd(1,g,y,2,!0)},d.prototype.eq=function(p){return this===p||this.inf===p.inf&&(this.inf||this.x.cmp(p.x)===0&&this.y.cmp(p.y)===0)},d.prototype.neg=function(p){if(this.inf)return this;var f=this.curve.point(this.x,this.y.redNeg());if(p&&this.precomputed){var m=this.precomputed,g=function(y){return y.neg()};f.precomputed={naf:m.naf&&{wnd:m.naf.wnd,points:m.naf.points.map(g)},doubles:m.doubles&&{step:m.doubles.step,points:m.doubles.points.map(g)}}}return f},d.prototype.toJ=function(){return this.inf?this.curve.jpoint(null,null,null):this.curve.jpoint(this.x,this.y,this.curve.one)},a(h,l.BasePoint),u.prototype.jpoint=function(p,f,m){return new h(this,p,f,m)},h.prototype.toP=function(){if(this.isInfinity())return this.curve.point(null,null);var p=this.z.redInvm(),f=p.redSqr(),m=this.x.redMul(f),g=this.y.redMul(f).redMul(p);return this.curve.point(m,g)},h.prototype.neg=function(){return this.curve.jpoint(this.x,this.y.redNeg(),this.z)},h.prototype.add=function(p){if(this.isInfinity())return p;if(p.isInfinity())return this;var f=p.z.redSqr(),m=this.z.redSqr(),g=this.x.redMul(f),y=p.x.redMul(m),v=this.y.redMul(f.redMul(p.z)),C=p.y.redMul(m.redMul(this.z)),b=g.redSub(y),T=v.redSub(C);if(b.cmpn(0)===0)return T.cmpn(0)!==0?this.curve.jpoint(null,null,null):this.dbl();var A=b.redSqr(),I=A.redMul(b),D=g.redMul(A),F=T.redSqr().redIAdd(I).redISub(D).redISub(D),B=T.redMul(D.redISub(F)).redISub(v.redMul(I)),U=this.z.redMul(p.z).redMul(b);return this.curve.jpoint(F,B,U)},h.prototype.mixedAdd=function(p){if(this.isInfinity())return p.toJ();if(p.isInfinity())return this;var f=this.z.redSqr(),m=this.x,g=p.x.redMul(f),y=this.y,v=p.y.redMul(f).redMul(this.z),C=m.redSub(g),b=y.redSub(v);if(C.cmpn(0)===0)return b.cmpn(0)!==0?this.curve.jpoint(null,null,null):this.dbl();var T=C.redSqr(),A=T.redMul(C),I=m.redMul(T),D=b.redSqr().redIAdd(A).redISub(I).redISub(I),F=b.redMul(I.redISub(D)).redISub(y.redMul(A)),B=this.z.redMul(C);return this.curve.jpoint(D,F,B)},h.prototype.dblp=function(p){if(p===0)return this;if(this.isInfinity())return this;if(!p)return this.dbl();var f;if(this.curve.zeroA||this.curve.threeA){var m=this;for(f=0;f<p;f++)m=m.dbl();return m}var g=this.curve.a,y=this.curve.tinv,v=this.x,C=this.y,b=this.z,T=b.redSqr().redSqr(),A=C.redAdd(C);for(f=0;f<p;f++){var I=v.redSqr(),D=A.redSqr(),F=D.redSqr(),B=I.redAdd(I).redIAdd(I).redIAdd(g.redMul(T)),U=v.redMul(D),H=B.redSqr().redISub(U.redAdd(U)),R=U.redISub(H),L=B.redMul(R);L=L.redIAdd(L).redISub(F);var _=A.redMul(b);f+1<p&&(T=T.redMul(F)),v=H,b=_,A=L}return this.curve.jpoint(v,A.redMul(y),b)},h.prototype.dbl=function(){return this.isInfinity()?this:this.curve.zeroA?this._zeroDbl():this.curve.threeA?this._threeDbl():this._dbl()},h.prototype._zeroDbl=function(){var p,f,m;if(this.zOne){var g=this.x.redSqr(),y=this.y.redSqr(),v=y.redSqr(),C=this.x.redAdd(y).redSqr().redISub(g).redISub(v);C=C.redIAdd(C);var b=g.redAdd(g).redIAdd(g),T=b.redSqr().redISub(C).redISub(C),A=v.redIAdd(v);A=(A=A.redIAdd(A)).redIAdd(A),p=T,f=b.redMul(C.redISub(T)).redISub(A),m=this.y.redAdd(this.y)}else{var I=this.x.redSqr(),D=this.y.redSqr(),F=D.redSqr(),B=this.x.redAdd(D).redSqr().redISub(I).redISub(F);B=B.redIAdd(B);var U=I.redAdd(I).redIAdd(I),H=U.redSqr(),R=F.redIAdd(F);R=(R=R.redIAdd(R)).redIAdd(R),p=H.redISub(B).redISub(B),f=U.redMul(B.redISub(p)).redISub(R),m=(m=this.y.redMul(this.z)).redIAdd(m)}return this.curve.jpoint(p,f,m)},h.prototype._threeDbl=function(){var p,f,m;if(this.zOne){var g=this.x.redSqr(),y=this.y.redSqr(),v=y.redSqr(),C=this.x.redAdd(y).redSqr().redISub(g).redISub(v);C=C.redIAdd(C);var b=g.redAdd(g).redIAdd(g).redIAdd(this.curve.a),T=b.redSqr().redISub(C).redISub(C);p=T;var A=v.redIAdd(v);A=(A=A.redIAdd(A)).redIAdd(A),f=b.redMul(C.redISub(T)).redISub(A),m=this.y.redAdd(this.y)}else{var I=this.z.redSqr(),D=this.y.redSqr(),F=this.x.redMul(D),B=this.x.redSub(I).redMul(this.x.redAdd(I));B=B.redAdd(B).redIAdd(B);var U=F.redIAdd(F),H=(U=U.redIAdd(U)).redAdd(U);p=B.redSqr().redISub(H),m=this.y.redAdd(this.z).redSqr().redISub(D).redISub(I);var R=D.redSqr();R=(R=(R=R.redIAdd(R)).redIAdd(R)).redIAdd(R),f=B.redMul(U.redISub(p)).redISub(R)}return this.curve.jpoint(p,f,m)},h.prototype._dbl=function(){var p=this.curve.a,f=this.x,m=this.y,g=this.z,y=g.redSqr().redSqr(),v=f.redSqr(),C=m.redSqr(),b=v.redAdd(v).redIAdd(v).redIAdd(p.redMul(y)),T=f.redAdd(f),A=(T=T.redIAdd(T)).redMul(C),I=b.redSqr().redISub(A.redAdd(A)),D=A.redISub(I),F=C.redSqr();F=(F=(F=F.redIAdd(F)).redIAdd(F)).redIAdd(F);var B=b.redMul(D).redISub(F),U=m.redAdd(m).redMul(g);return this.curve.jpoint(I,B,U)},h.prototype.trpl=function(){if(!this.curve.zeroA)return this.dbl().add(this);var p=this.x.redSqr(),f=this.y.redSqr(),m=this.z.redSqr(),g=f.redSqr(),y=p.redAdd(p).redIAdd(p),v=y.redSqr(),C=this.x.redAdd(f).redSqr().redISub(p).redISub(g),b=(C=(C=(C=C.redIAdd(C)).redAdd(C).redIAdd(C)).redISub(v)).redSqr(),T=g.redIAdd(g);T=(T=(T=T.redIAdd(T)).redIAdd(T)).redIAdd(T);var A=y.redIAdd(C).redSqr().redISub(v).redISub(b).redISub(T),I=f.redMul(A);I=(I=I.redIAdd(I)).redIAdd(I);var D=this.x.redMul(b).redISub(I);D=(D=D.redIAdd(D)).redIAdd(D);var F=this.y.redMul(A.redMul(T.redISub(A)).redISub(C.redMul(b)));F=(F=(F=F.redIAdd(F)).redIAdd(F)).redIAdd(F);var B=this.z.redAdd(C).redSqr().redISub(m).redISub(b);return this.curve.jpoint(D,F,B)},h.prototype.mul=function(p,f){return p=new o(p,f),this.curve._wnafMul(this,p)},h.prototype.eq=function(p){if(p.type==="affine")return this.eq(p.toJ());if(this===p)return!0;var f=this.z.redSqr(),m=p.z.redSqr();if(this.x.redMul(m).redISub(p.x.redMul(f)).cmpn(0)!==0)return!1;var g=f.redMul(this.z),y=m.redMul(p.z);return this.y.redMul(y).redISub(p.y.redMul(g)).cmpn(0)===0},h.prototype.eqXToP=function(p){var f=this.z.redSqr(),m=p.toRed(this.curve.red).redMul(f);if(this.x.cmp(m)===0)return!0;for(var g=p.clone(),y=this.curve.redN.redMul(f);;){if(g.iadd(this.curve.n),g.cmp(this.curve.p)>=0)return!1;if(m.redIAdd(y),this.x.cmp(m)===0)return!0}},h.prototype.inspect=function(){return this.isInfinity()?"<EC JPoint Infinity>":"<EC JPoint x: "+this.x.toString(16,2)+" y: "+this.y.toString(16,2)+" z: "+this.z.toString(16,2)+">"},h.prototype.isInfinity=function(){return this.z.cmpn(0)===0}},{"../utils":419,"./base":406,"bn.js":420,inherits:440}],411:[function(i,s,r){var n,o=r,a=i("hash.js"),l=i("./curve"),c=i("./utils").assert;function u(h){h.type==="short"?this.curve=new l.short(h):h.type==="edwards"?this.curve=new l.edwards(h):this.curve=new l.mont(h),this.g=this.curve.g,this.n=this.curve.n,this.hash=h.hash,c(this.g.validate(),"Invalid curve"),c(this.g.mul(this.n).isInfinity(),"Invalid curve, G*N != O")}function d(h,p){Object.defineProperty(o,h,{configurable:!0,enumerable:!0,get:function(){var f=new u(p);return Object.defineProperty(o,h,{configurable:!0,enumerable:!0,value:f}),f}})}o.PresetCurve=u,d("p192",{type:"short",prime:"p192",p:"ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff",a:"ffffffff ffffffff ffffffff fffffffe ffffffff fffffffc",b:"64210519 e59c80e7 0fa7e9ab 72243049 feb8deec c146b9b1",n:"ffffffff ffffffff ffffffff 99def836 146bc9b1 b4d22831",hash:a.sha256,gRed:!1,g:["188da80e b03090f6 7cbf20eb 43a18800 f4ff0afd 82ff1012","07192b95 ffc8da78 631011ed 6b24cdd5 73f977a1 1e794811"]}),d("p224",{type:"short",prime:"p224",p:"ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001",a:"ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff fffffffe",b:"b4050a85 0c04b3ab f5413256 5044b0b7 d7bfd8ba 270b3943 2355ffb4",n:"ffffffff ffffffff ffffffff ffff16a2 e0b8f03e 13dd2945 5c5c2a3d",hash:a.sha256,gRed:!1,g:["b70e0cbd 6bb4bf7f 321390b9 4a03c1d3 56c21122 343280d6 115c1d21","bd376388 b5f723fb 4c22dfe6 cd4375a0 5a074764 44d58199 85007e34"]}),d("p256",{type:"short",prime:null,p:"ffffffff 00000001 00000000 00000000 00000000 ffffffff ffffffff ffffffff",a:"ffffffff 00000001 00000000 00000000 00000000 ffffffff ffffffff fffffffc",b:"5ac635d8 aa3a93e7 b3ebbd55 769886bc 651d06b0 cc53b0f6 3bce3c3e 27d2604b",n:"ffffffff 00000000 ffffffff ffffffff bce6faad a7179e84 f3b9cac2 fc632551",hash:a.sha256,gRed:!1,g:["6b17d1f2 e12c4247 f8bce6e5 63a440f2 77037d81 2deb33a0 f4a13945 d898c296","4fe342e2 fe1a7f9b 8ee7eb4a 7c0f9e16 2bce3357 6b315ece cbb64068 37bf51f5"]}),d("p384",{type:"short",prime:null,p:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe ffffffff 00000000 00000000 ffffffff",a:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe ffffffff 00000000 00000000 fffffffc",b:"b3312fa7 e23ee7e4 988e056b e3f82d19 181d9c6e fe814112 0314088f 5013875a c656398d 8a2ed19d 2a85c8ed d3ec2aef",n:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff c7634d81 f4372ddf 581a0db2 48b0a77a ecec196a ccc52973",hash:a.sha384,gRed:!1,g:["aa87ca22 be8b0537 8eb1c71e f320ad74 6e1d3b62 8ba79b98 59f741e0 82542a38 5502f25d bf55296c 3a545e38 72760ab7","3617de4a 96262c6f 5d9e98bf 9292dc29 f8f41dbd 289a147c e9da3113 b5f0b8c0 0a60b1ce 1d7e819d 7a431d7c 90ea0e5f"]}),d("p521",{type:"short",prime:null,p:"000001ff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff",a:"000001ff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffc",b:"00000051 953eb961 8e1c9a1f 929a21a0 b68540ee a2da725b 99b315f3 b8b48991 8ef109e1 56193951 ec7e937b 1652c0bd 3bb1bf07 3573df88 3d2c34f1 ef451fd4 6b503f00",n:"000001ff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffa 51868783 bf2f966b 7fcc0148 f709a5d0 3bb5c9b8 899c47ae bb6fb71e 91386409",hash:a.sha512,gRed:!1,g:["000000c6 858e06b7 0404e9cd 9e3ecb66 2395b442 9c648139 053fb521 f828af60 6b4d3dba a14b5e77 efe75928 fe1dc127 a2ffa8de 3348b3c1 856a429b f97e7e31 c2e5bd66","00000118 39296a78 9a3bc004 5c8a5fb4 2c7d1bd9 98f54449 579b4468 17afbd17 273e662c 97ee7299 5ef42640 c550b901 3fad0761 353c7086 a272c240 88be9476 9fd16650"]}),d("curve25519",{type:"mont",prime:"p25519",p:"7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed",a:"76d06",b:"1",n:"1000000000000000 0000000000000000 14def9dea2f79cd6 5812631a5cf5d3ed",hash:a.sha256,gRed:!1,g:["9"]}),d("ed25519",{type:"edwards",prime:"p25519",p:"7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed",a:"-1",c:"1",d:"52036cee2b6ffe73 8cc740797779e898 00700a4d4141d8ab 75eb4dca135978a3",n:"1000000000000000 0000000000000000 14def9dea2f79cd6 5812631a5cf5d3ed",hash:a.sha256,gRed:!1,g:["216936d3cd6e53fec0a4e231fdd6dc5c692cc7609525a7b2c9562d608f25d51a","6666666666666666666666666666666666666666666666666666666666666658"]});try{n=i("./precomputed/secp256k1")}catch{n=void 0}d("secp256k1",{type:"short",prime:"k256",p:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f",a:"0",b:"7",n:"ffffffff ffffffff ffffffff fffffffe baaedce6 af48a03b bfd25e8c d0364141",h:"1",hash:a.sha256,beta:"7ae96a2b657c07106e64479eac3434e99cf0497512f58995c1396c28719501ee",lambda:"5363ad4cc05c30e0a5261c028812645a122e22ea20816678df02967c1b23bd72",basis:[{a:"3086d221a7d46bcde86c90e49284eb15",b:"-e4437ed6010e88286f547fa90abfe4c3"},{a:"114ca50f7a8e2f3f657c1108d9d44cfd8",b:"3086d221a7d46bcde86c90e49284eb15"}],gRed:!1,g:["79be667ef9dcbbac55a06295ce870b07029bfcdb2dce28d959f2815b16f81798","483ada7726a3c4655da4fbfc0e1108a8fd17b448a68554199c47d08ffb10d4b8",n]})},{"./curve":408,"./precomputed/secp256k1":418,"./utils":419,"hash.js":426}],412:[function(i,s,r){var n=i("bn.js"),o=i("hmac-drbg"),a=i("../utils"),l=i("../curves"),c=i("brorand"),u=a.assert,d=i("./key"),h=i("./signature");function p(f){if(!(this instanceof p))return new p(f);typeof f=="string"&&(u(Object.prototype.hasOwnProperty.call(l,f),"Unknown curve "+f),f=l[f]),f instanceof l.PresetCurve&&(f={curve:f}),this.curve=f.curve.curve,this.n=this.curve.n,this.nh=this.n.ushrn(1),this.g=this.curve.g,this.g=f.curve.g,this.g.precompute(f.curve.n.bitLength()+1),this.hash=f.hash||f.curve.hash}s.exports=p,p.prototype.keyPair=function(f){return new d(this,f)},p.prototype.keyFromPrivate=function(f,m){return d.fromPrivate(this,f,m)},p.prototype.keyFromPublic=function(f,m){return d.fromPublic(this,f,m)},p.prototype.genKeyPair=function(f){f||(f={});for(var m=new o({hash:this.hash,pers:f.pers,persEnc:f.persEnc||"utf8",entropy:f.entropy||c(this.hash.hmacStrength),entropyEnc:f.entropy&&f.entropyEnc||"utf8",nonce:this.n.toArray()}),g=this.n.byteLength(),y=this.n.sub(new n(2));;){var v=new n(m.generate(g));if(!(v.cmp(y)>0))return v.iaddn(1),this.keyFromPrivate(v)}},p.prototype._truncateToN=function(f,m){var g=8*f.byteLength()-this.n.bitLength();return g>0&&(f=f.ushrn(g)),!m&&f.cmp(this.n)>=0?f.sub(this.n):f},p.prototype.sign=function(f,m,g,y){typeof g=="object"&&(y=g,g=null),y||(y={}),m=this.keyFromPrivate(m,g),f=this._truncateToN(new n(f,16));for(var v=this.n.byteLength(),C=m.getPrivate().toArray("be",v),b=f.toArray("be",v),T=new o({hash:this.hash,entropy:C,nonce:b,pers:y.pers,persEnc:y.persEnc||"utf8"}),A=this.n.sub(new n(1)),I=0;;I++){var D=y.k?y.k(I):new n(T.generate(this.n.byteLength()));if(!((D=this._truncateToN(D,!0)).cmpn(1)<=0||D.cmp(A)>=0)){var F=this.g.mul(D);if(!F.isInfinity()){var B=F.getX(),U=B.umod(this.n);if(U.cmpn(0)!==0){var H=D.invm(this.n).mul(U.mul(m.getPrivate()).iadd(f));if((H=H.umod(this.n)).cmpn(0)!==0){var R=(F.getY().isOdd()?1:0)|(B.cmp(U)!==0?2:0);return y.canonical&&H.cmp(this.nh)>0&&(H=this.n.sub(H),R^=1),new h({r:U,s:H,recoveryParam:R})}}}}}},p.prototype.verify=function(f,m,g,y){f=this._truncateToN(new n(f,16)),g=this.keyFromPublic(g,y);var v=(m=new h(m,"hex")).r,C=m.s;if(v.cmpn(1)<0||v.cmp(this.n)>=0||C.cmpn(1)<0||C.cmp(this.n)>=0)return!1;var b,T=C.invm(this.n),A=T.mul(f).umod(this.n),I=T.mul(v).umod(this.n);return this.curve._maxwellTrick?!(b=this.g.jmulAdd(A,g.getPublic(),I)).isInfinity()&&b.eqXToP(v):!(b=this.g.mulAdd(A,g.getPublic(),I)).isInfinity()&&b.getX().umod(this.n).cmp(v)===0},p.prototype.recoverPubKey=function(f,m,g,y){u((3&g)===g,"The recovery param is more than two bits"),m=new h(m,y);var v=this.n,C=new n(f),b=m.r,T=m.s,A=1&g,I=g>>1;if(b.cmp(this.curve.p.umod(this.curve.n))>=0&&I)throw new Error("Unable to find sencond key candinate");b=I?this.curve.pointFromX(b.add(this.curve.n),A):this.curve.pointFromX(b,A);var D=m.r.invm(v),F=v.sub(C).mul(D).umod(v),B=T.mul(D).umod(v);return this.g.mulAdd(F,b,B)},p.prototype.getKeyRecoveryParam=function(f,m,g,y){if((m=new h(m,y)).recoveryParam!==null)return m.recoveryParam;for(var v=0;v<4;v++){var C;try{C=this.recoverPubKey(f,m,v)}catch{continue}if(C.eq(g))return v}throw new Error("Unable to find valid recovery factor")}},{"../curves":411,"../utils":419,"./key":413,"./signature":414,"bn.js":420,brorand:187,"hmac-drbg":438}],413:[function(i,s,r){var n=i("bn.js"),o=i("../utils").assert;function a(l,c){this.ec=l,this.priv=null,this.pub=null,c.priv&&this._importPrivate(c.priv,c.privEnc),c.pub&&this._importPublic(c.pub,c.pubEnc)}s.exports=a,a.fromPublic=function(l,c,u){return c instanceof a?c:new a(l,{pub:c,pubEnc:u})},a.fromPrivate=function(l,c,u){return c instanceof a?c:new a(l,{priv:c,privEnc:u})},a.prototype.validate=function(){var l=this.getPublic();return l.isInfinity()?{result:!1,reason:"Invalid public key"}:l.validate()?l.mul(this.ec.curve.n).isInfinity()?{result:!0,reason:null}:{result:!1,reason:"Public key * N != O"}:{result:!1,reason:"Public key is not a point"}},a.prototype.getPublic=function(l,c){return typeof l=="string"&&(c=l,l=null),this.pub||(this.pub=this.ec.g.mul(this.priv)),c?this.pub.encode(c,l):this.pub},a.prototype.getPrivate=function(l){return l==="hex"?this.priv.toString(16,2):this.priv},a.prototype._importPrivate=function(l,c){this.priv=new n(l,c||16),this.priv=this.priv.umod(this.ec.curve.n)},a.prototype._importPublic=function(l,c){if(l.x||l.y)return this.ec.curve.type==="mont"?o(l.x,"Need x coordinate"):this.ec.curve.type!=="short"&&this.ec.curve.type!=="edwards"||o(l.x&&l.y,"Need both x and y coordinate"),void(this.pub=this.ec.curve.point(l.x,l.y));this.pub=this.ec.curve.decodePoint(l,c)},a.prototype.derive=function(l){return l.validate()||o(l.validate(),"public point not validated"),l.mul(this.priv).getX()},a.prototype.sign=function(l,c,u){return this.ec.sign(l,this,c,u)},a.prototype.verify=function(l,c){return this.ec.verify(l,c,this)},a.prototype.inspect=function(){return"<Key priv: "+(this.priv&&this.priv.toString(16,2))+" pub: "+(this.pub&&this.pub.inspect())+" >"}},{"../utils":419,"bn.js":420}],414:[function(i,s,r){var n=i("bn.js"),o=i("../utils"),a=o.assert;function l(p,f){if(p instanceof l)return p;this._importDER(p,f)||(a(p.r&&p.s,"Signature without r or s"),this.r=new n(p.r,16),this.s=new n(p.s,16),p.recoveryParam===void 0?this.recoveryParam=null:this.recoveryParam=p.recoveryParam)}function c(){this.place=0}function u(p,f){var m=p[f.place++];if(!(128&m))return m;var g=15&m;if(g===0||g>4)return!1;for(var y=0,v=0,C=f.place;v<g;v++,C++)y<<=8,y|=p[C],y>>>=0;return!(y<=127)&&(f.place=C,y)}function d(p){for(var f=0,m=p.length-1;!p[f]&&!(128&p[f+1])&&f<m;)f++;return f===0?p:p.slice(f)}function h(p,f){if(f<128)p.push(f);else{var m=1+(Math.log(f)/Math.LN2>>>3);for(p.push(128|m);--m;)p.push(f>>>(m<<3)&255);p.push(f)}}s.exports=l,l.prototype._importDER=function(p,f){p=o.toArray(p,f);var m=new c;if(p[m.place++]!==48)return!1;var g=u(p,m);if(g===!1||g+m.place!==p.length||p[m.place++]!==2)return!1;var y=u(p,m);if(y===!1)return!1;var v=p.slice(m.place,y+m.place);if(m.place+=y,p[m.place++]!==2)return!1;var C=u(p,m);if(C===!1||p.length!==C+m.place)return!1;var b=p.slice(m.place,C+m.place);if(v[0]===0){if(!(128&v[1]))return!1;v=v.slice(1)}if(b[0]===0){if(!(128&b[1]))return!1;b=b.slice(1)}return this.r=new n(v),this.s=new n(b),this.recoveryParam=null,!0},l.prototype.toDER=function(p){var f=this.r.toArray(),m=this.s.toArray();for(128&f[0]&&(f=[0].concat(f)),128&m[0]&&(m=[0].concat(m)),f=d(f),m=d(m);!(m[0]||128&m[1]);)m=m.slice(1);var g=[2];h(g,f.length),(g=g.concat(f)).push(2),h(g,m.length);var y=g.concat(m),v=[48];return h(v,y.length),v=v.concat(y),o.encode(v,p)}},{"../utils":419,"bn.js":420}],415:[function(i,s,r){var n=i("hash.js"),o=i("../curves"),a=i("../utils"),l=a.assert,c=a.parseBytes,u=i("./key"),d=i("./signature");function h(p){if(l(p==="ed25519","only tested with ed25519 so far"),!(this instanceof h))return new h(p);p=o[p].curve,this.curve=p,this.g=p.g,this.g.precompute(p.n.bitLength()+1),this.pointClass=p.point().constructor,this.encodingLength=Math.ceil(p.n.bitLength()/8),this.hash=n.sha512}s.exports=h,h.prototype.sign=function(p,f){p=c(p);var m=this.keyFromSecret(f),g=this.hashInt(m.messagePrefix(),p),y=this.g.mul(g),v=this.encodePoint(y),C=this.hashInt(v,m.pubBytes(),p).mul(m.priv()),b=g.add(C).umod(this.curve.n);return this.makeSignature({R:y,S:b,Rencoded:v})},h.prototype.verify=function(p,f,m){p=c(p),f=this.makeSignature(f);var g=this.keyFromPublic(m),y=this.hashInt(f.Rencoded(),g.pubBytes(),p),v=this.g.mul(f.S());return f.R().add(g.pub().mul(y)).eq(v)},h.prototype.hashInt=function(){for(var p=this.hash(),f=0;f<arguments.length;f++)p.update(arguments[f]);return a.intFromLE(p.digest()).umod(this.curve.n)},h.prototype.keyFromPublic=function(p){return u.fromPublic(this,p)},h.prototype.keyFromSecret=function(p){return u.fromSecret(this,p)},h.prototype.makeSignature=function(p){return p instanceof d?p:new d(this,p)},h.prototype.encodePoint=function(p){var f=p.getY().toArray("le",this.encodingLength);return f[this.encodingLength-1]|=p.getX().isOdd()?128:0,f},h.prototype.decodePoint=function(p){var f=(p=a.parseBytes(p)).length-1,m=p.slice(0,f).concat(-129&p[f]),g=(128&p[f])!=0,y=a.intFromLE(m);return this.curve.pointFromY(y,g)},h.prototype.encodeInt=function(p){return p.toArray("le",this.encodingLength)},h.prototype.decodeInt=function(p){return a.intFromLE(p)},h.prototype.isPoint=function(p){return p instanceof this.pointClass}},{"../curves":411,"../utils":419,"./key":416,"./signature":417,"hash.js":426}],416:[function(i,s,r){var n=i("../utils"),o=n.assert,a=n.parseBytes,l=n.cachedProperty;function c(u,d){this.eddsa=u,this._secret=a(d.secret),u.isPoint(d.pub)?this._pub=d.pub:this._pubBytes=a(d.pub)}c.fromPublic=function(u,d){return d instanceof c?d:new c(u,{pub:d})},c.fromSecret=function(u,d){return d instanceof c?d:new c(u,{secret:d})},c.prototype.secret=function(){return this._secret},l(c,"pubBytes",function(){return this.eddsa.encodePoint(this.pub())}),l(c,"pub",function(){return this._pubBytes?this.eddsa.decodePoint(this._pubBytes):this.eddsa.g.mul(this.priv())}),l(c,"privBytes",function(){var u=this.eddsa,d=this.hash(),h=u.encodingLength-1,p=d.slice(0,u.encodingLength);return p[0]&=248,p[h]&=127,p[h]|=64,p}),l(c,"priv",function(){return this.eddsa.decodeInt(this.privBytes())}),l(c,"hash",function(){return this.eddsa.hash().update(this.secret()).digest()}),l(c,"messagePrefix",function(){return this.hash().slice(this.eddsa.encodingLength)}),c.prototype.sign=function(u){return o(this._secret,"KeyPair can only verify"),this.eddsa.sign(u,this)},c.prototype.verify=function(u,d){return this.eddsa.verify(u,d,this)},c.prototype.getSecret=function(u){return o(this._secret,"KeyPair is public only"),n.encode(this.secret(),u)},c.prototype.getPublic=function(u){return n.encode(this.pubBytes(),u)},s.exports=c},{"../utils":419}],417:[function(i,s,r){var n=i("bn.js"),o=i("../utils"),a=o.assert,l=o.cachedProperty,c=o.parseBytes;function u(d,h){this.eddsa=d,typeof h!="object"&&(h=c(h)),Array.isArray(h)&&(h={R:h.slice(0,d.encodingLength),S:h.slice(d.encodingLength)}),a(h.R&&h.S,"Signature without R or S"),d.isPoint(h.R)&&(this._R=h.R),h.S instanceof n&&(this._S=h.S),this._Rencoded=Array.isArray(h.R)?h.R:h.Rencoded,this._Sencoded=Array.isArray(h.S)?h.S:h.Sencoded}l(u,"S",function(){return this.eddsa.decodeInt(this.Sencoded())}),l(u,"R",function(){return this.eddsa.decodePoint(this.Rencoded())}),l(u,"Rencoded",function(){return this.eddsa.encodePoint(this.R())}),l(u,"Sencoded",function(){return this.eddsa.encodeInt(this.S())}),u.prototype.toBytes=function(){return this.Rencoded().concat(this.Sencoded())},u.prototype.toHex=function(){return o.encode(this.toBytes(),"hex").toUpperCase()},s.exports=u},{"../utils":419,"bn.js":420}],418:[function(i,s,r){s.exports={doubles:{step:4,points:[["e60fce93b59e9ec53011aabc21c23e97b2a31369b87a5ae9c44ee89e2a6dec0a","f7e3507399e595929db99f34f57937101296891e44d23f0be1f32cce69616821"],["8282263212c609d9ea2a6e3e172de238d8c39cabd5ac1ca10646e23fd5f51508","11f8a8098557dfe45e8256e830b60ace62d613ac2f7b17bed31b6eaff6e26caf"],["175e159f728b865a72f99cc6c6fc846de0b93833fd2222ed73fce5b551e5b739","d3506e0d9e3c79eba4ef97a51ff71f5eacb5955add24345c6efa6ffee9fed695"],["363d90d447b00c9c99ceac05b6262ee053441c7e55552ffe526bad8f83ff4640","4e273adfc732221953b445397f3363145b9a89008199ecb62003c7f3bee9de9"],["8b4b5f165df3c2be8c6244b5b745638843e4a781a15bcd1b69f79a55dffdf80c","4aad0a6f68d308b4b3fbd7813ab0da04f9e336546162ee56b3eff0c65fd4fd36"],["723cbaa6e5db996d6bf771c00bd548c7b700dbffa6c0e77bcb6115925232fcda","96e867b5595cc498a921137488824d6e2660a0653779494801dc069d9eb39f5f"],["eebfa4d493bebf98ba5feec812c2d3b50947961237a919839a533eca0e7dd7fa","5d9a8ca3970ef0f269ee7edaf178089d9ae4cdc3a711f712ddfd4fdae1de8999"],["100f44da696e71672791d0a09b7bde459f1215a29b3c03bfefd7835b39a48db0","cdd9e13192a00b772ec8f3300c090666b7ff4a18ff5195ac0fbd5cd62bc65a09"],["e1031be262c7ed1b1dc9227a4a04c017a77f8d4464f3b3852c8acde6e534fd2d","9d7061928940405e6bb6a4176597535af292dd419e1ced79a44f18f29456a00d"],["feea6cae46d55b530ac2839f143bd7ec5cf8b266a41d6af52d5e688d9094696d","e57c6b6c97dce1bab06e4e12bf3ecd5c981c8957cc41442d3155debf18090088"],["da67a91d91049cdcb367be4be6ffca3cfeed657d808583de33fa978bc1ec6cb1","9bacaa35481642bc41f463f7ec9780e5dec7adc508f740a17e9ea8e27a68be1d"],["53904faa0b334cdda6e000935ef22151ec08d0f7bb11069f57545ccc1a37b7c0","5bc087d0bc80106d88c9eccac20d3c1c13999981e14434699dcb096b022771c8"],["8e7bcd0bd35983a7719cca7764ca906779b53a043a9b8bcaeff959f43ad86047","10b7770b2a3da4b3940310420ca9514579e88e2e47fd68b3ea10047e8460372a"],["385eed34c1cdff21e6d0818689b81bde71a7f4f18397e6690a841e1599c43862","283bebc3e8ea23f56701de19e9ebf4576b304eec2086dc8cc0458fe5542e5453"],["6f9d9b803ecf191637c73a4413dfa180fddf84a5947fbc9c606ed86c3fac3a7","7c80c68e603059ba69b8e2a30e45c4d47ea4dd2f5c281002d86890603a842160"],["3322d401243c4e2582a2147c104d6ecbf774d163db0f5e5313b7e0e742d0e6bd","56e70797e9664ef5bfb019bc4ddaf9b72805f63ea2873af624f3a2e96c28b2a0"],["85672c7d2de0b7da2bd1770d89665868741b3f9af7643397721d74d28134ab83","7c481b9b5b43b2eb6374049bfa62c2e5e77f17fcc5298f44c8e3094f790313a6"],["948bf809b1988a46b06c9f1919413b10f9226c60f668832ffd959af60c82a0a","53a562856dcb6646dc6b74c5d1c3418c6d4dff08c97cd2bed4cb7f88d8c8e589"],["6260ce7f461801c34f067ce0f02873a8f1b0e44dfc69752accecd819f38fd8e8","bc2da82b6fa5b571a7f09049776a1ef7ecd292238051c198c1a84e95b2b4ae17"],["e5037de0afc1d8d43d8348414bbf4103043ec8f575bfdc432953cc8d2037fa2d","4571534baa94d3b5f9f98d09fb990bddbd5f5b03ec481f10e0e5dc841d755bda"],["e06372b0f4a207adf5ea905e8f1771b4e7e8dbd1c6a6c5b725866a0ae4fce725","7a908974bce18cfe12a27bb2ad5a488cd7484a7787104870b27034f94eee31dd"],["213c7a715cd5d45358d0bbf9dc0ce02204b10bdde2a3f58540ad6908d0559754","4b6dad0b5ae462507013ad06245ba190bb4850f5f36a7eeddff2c27534b458f2"],["4e7c272a7af4b34e8dbb9352a5419a87e2838c70adc62cddf0cc3a3b08fbd53c","17749c766c9d0b18e16fd09f6def681b530b9614bff7dd33e0b3941817dcaae6"],["fea74e3dbe778b1b10f238ad61686aa5c76e3db2be43057632427e2840fb27b6","6e0568db9b0b13297cf674deccb6af93126b596b973f7b77701d3db7f23cb96f"],["76e64113f677cf0e10a2570d599968d31544e179b760432952c02a4417bdde39","c90ddf8dee4e95cf577066d70681f0d35e2a33d2b56d2032b4b1752d1901ac01"],["c738c56b03b2abe1e8281baa743f8f9a8f7cc643df26cbee3ab150242bcbb891","893fb578951ad2537f718f2eacbfbbbb82314eef7880cfe917e735d9699a84c3"],["d895626548b65b81e264c7637c972877d1d72e5f3a925014372e9f6588f6c14b","febfaa38f2bc7eae728ec60818c340eb03428d632bb067e179363ed75d7d991f"],["b8da94032a957518eb0f6433571e8761ceffc73693e84edd49150a564f676e03","2804dfa44805a1e4d7c99cc9762808b092cc584d95ff3b511488e4e74efdf6e7"],["e80fea14441fb33a7d8adab9475d7fab2019effb5156a792f1a11778e3c0df5d","eed1de7f638e00771e89768ca3ca94472d155e80af322ea9fcb4291b6ac9ec78"],["a301697bdfcd704313ba48e51d567543f2a182031efd6915ddc07bbcc4e16070","7370f91cfb67e4f5081809fa25d40f9b1735dbf7c0a11a130c0d1a041e177ea1"],["90ad85b389d6b936463f9d0512678de208cc330b11307fffab7ac63e3fb04ed4","e507a3620a38261affdcbd9427222b839aefabe1582894d991d4d48cb6ef150"],["8f68b9d2f63b5f339239c1ad981f162ee88c5678723ea3351b7b444c9ec4c0da","662a9f2dba063986de1d90c2b6be215dbbea2cfe95510bfdf23cbf79501fff82"],["e4f3fb0176af85d65ff99ff9198c36091f48e86503681e3e6686fd5053231e11","1e63633ad0ef4f1c1661a6d0ea02b7286cc7e74ec951d1c9822c38576feb73bc"],["8c00fa9b18ebf331eb961537a45a4266c7034f2f0d4e1d0716fb6eae20eae29e","efa47267fea521a1a9dc343a3736c974c2fadafa81e36c54e7d2a4c66702414b"],["e7a26ce69dd4829f3e10cec0a9e98ed3143d084f308b92c0997fddfc60cb3e41","2a758e300fa7984b471b006a1aafbb18d0a6b2c0420e83e20e8a9421cf2cfd51"],["b6459e0ee3662ec8d23540c223bcbdc571cbcb967d79424f3cf29eb3de6b80ef","67c876d06f3e06de1dadf16e5661db3c4b3ae6d48e35b2ff30bf0b61a71ba45"],["d68a80c8280bb840793234aa118f06231d6f1fc67e73c5a5deda0f5b496943e8","db8ba9fff4b586d00c4b1f9177b0e28b5b0e7b8f7845295a294c84266b133120"],["324aed7df65c804252dc0270907a30b09612aeb973449cea4095980fc28d3d5d","648a365774b61f2ff130c0c35aec1f4f19213b0c7e332843967224af96ab7c84"],["4df9c14919cde61f6d51dfdbe5fee5dceec4143ba8d1ca888e8bd373fd054c96","35ec51092d8728050974c23a1d85d4b5d506cdc288490192ebac06cad10d5d"],["9c3919a84a474870faed8a9c1cc66021523489054d7f0308cbfc99c8ac1f98cd","ddb84f0f4a4ddd57584f044bf260e641905326f76c64c8e6be7e5e03d4fc599d"],["6057170b1dd12fdf8de05f281d8e06bb91e1493a8b91d4cc5a21382120a959e5","9a1af0b26a6a4807add9a2daf71df262465152bc3ee24c65e899be932385a2a8"],["a576df8e23a08411421439a4518da31880cef0fba7d4df12b1a6973eecb94266","40a6bf20e76640b2c92b97afe58cd82c432e10a7f514d9f3ee8be11ae1b28ec8"],["7778a78c28dec3e30a05fe9629de8c38bb30d1f5cf9a3a208f763889be58ad71","34626d9ab5a5b22ff7098e12f2ff580087b38411ff24ac563b513fc1fd9f43ac"],["928955ee637a84463729fd30e7afd2ed5f96274e5ad7e5cb09eda9c06d903ac","c25621003d3f42a827b78a13093a95eeac3d26efa8a8d83fc5180e935bcd091f"],["85d0fef3ec6db109399064f3a0e3b2855645b4a907ad354527aae75163d82751","1f03648413a38c0be29d496e582cf5663e8751e96877331582c237a24eb1f962"],["ff2b0dce97eece97c1c9b6041798b85dfdfb6d8882da20308f5404824526087e","493d13fef524ba188af4c4dc54d07936c7b7ed6fb90e2ceb2c951e01f0c29907"],["827fbbe4b1e880ea9ed2b2e6301b212b57f1ee148cd6dd28780e5e2cf856e241","c60f9c923c727b0b71bef2c67d1d12687ff7a63186903166d605b68baec293ec"],["eaa649f21f51bdbae7be4ae34ce6e5217a58fdce7f47f9aa7f3b58fa2120e2b3","be3279ed5bbbb03ac69a80f89879aa5a01a6b965f13f7e59d47a5305ba5ad93d"],["e4a42d43c5cf169d9391df6decf42ee541b6d8f0c9a137401e23632dda34d24f","4d9f92e716d1c73526fc99ccfb8ad34ce886eedfa8d8e4f13a7f7131deba9414"],["1ec80fef360cbdd954160fadab352b6b92b53576a88fea4947173b9d4300bf19","aeefe93756b5340d2f3a4958a7abbf5e0146e77f6295a07b671cdc1cc107cefd"],["146a778c04670c2f91b00af4680dfa8bce3490717d58ba889ddb5928366642be","b318e0ec3354028add669827f9d4b2870aaa971d2f7e5ed1d0b297483d83efd0"],["fa50c0f61d22e5f07e3acebb1aa07b128d0012209a28b9776d76a8793180eef9","6b84c6922397eba9b72cd2872281a68a5e683293a57a213b38cd8d7d3f4f2811"],["da1d61d0ca721a11b1a5bf6b7d88e8421a288ab5d5bba5220e53d32b5f067ec2","8157f55a7c99306c79c0766161c91e2966a73899d279b48a655fba0f1ad836f1"],["a8e282ff0c9706907215ff98e8fd416615311de0446f1e062a73b0610d064e13","7f97355b8db81c09abfb7f3c5b2515888b679a3e50dd6bd6cef7c73111f4cc0c"],["174a53b9c9a285872d39e56e6913cab15d59b1fa512508c022f382de8319497c","ccc9dc37abfc9c1657b4155f2c47f9e6646b3a1d8cb9854383da13ac079afa73"],["959396981943785c3d3e57edf5018cdbe039e730e4918b3d884fdff09475b7ba","2e7e552888c331dd8ba0386a4b9cd6849c653f64c8709385e9b8abf87524f2fd"],["d2a63a50ae401e56d645a1153b109a8fcca0a43d561fba2dbb51340c9d82b151","e82d86fb6443fcb7565aee58b2948220a70f750af484ca52d4142174dcf89405"],["64587e2335471eb890ee7896d7cfdc866bacbdbd3839317b3436f9b45617e073","d99fcdd5bf6902e2ae96dd6447c299a185b90a39133aeab358299e5e9faf6589"],["8481bde0e4e4d885b3a546d3e549de042f0aa6cea250e7fd358d6c86dd45e458","38ee7b8cba5404dd84a25bf39cecb2ca900a79c42b262e556d64b1b59779057e"],["13464a57a78102aa62b6979ae817f4637ffcfed3c4b1ce30bcd6303f6caf666b","69be159004614580ef7e433453ccb0ca48f300a81d0942e13f495a907f6ecc27"],["bc4a9df5b713fe2e9aef430bcc1dc97a0cd9ccede2f28588cada3a0d2d83f366","d3a81ca6e785c06383937adf4b798caa6e8a9fbfa547b16d758d666581f33c1"],["8c28a97bf8298bc0d23d8c749452a32e694b65e30a9472a3954ab30fe5324caa","40a30463a3305193378fedf31f7cc0eb7ae784f0451cb9459e71dc73cbef9482"],["8ea9666139527a8c1dd94ce4f071fd23c8b350c5a4bb33748c4ba111faccae0","620efabbc8ee2782e24e7c0cfb95c5d735b783be9cf0f8e955af34a30e62b945"],["dd3625faef5ba06074669716bbd3788d89bdde815959968092f76cc4eb9a9787","7a188fa3520e30d461da2501045731ca941461982883395937f68d00c644a573"],["f710d79d9eb962297e4f6232b40e8f7feb2bc63814614d692c12de752408221e","ea98e67232d3b3295d3b535532115ccac8612c721851617526ae47a9c77bfc82"]]},naf:{wnd:7,points:[["f9308a019258c31049344f85f89d5229b531c845836f99b08601f113bce036f9","388f7b0f632de8140fe337e62a37f3566500a99934c2231b6cb9fd7584b8e672"],["2f8bde4d1a07209355b4a7250a5c5128e88b84bddc619ab7cba8d569b240efe4","d8ac222636e5e3d6d4dba9dda6c9c426f788271bab0d6840dca87d3aa6ac62d6"],["5cbdf0646e5db4eaa398f365f2ea7a0e3d419b7e0330e39ce92bddedcac4f9bc","6aebca40ba255960a3178d6d861a54dba813d0b813fde7b5a5082628087264da"],["acd484e2f0c7f65309ad178a9f559abde09796974c57e714c35f110dfc27ccbe","cc338921b0a7d9fd64380971763b61e9add888a4375f8e0f05cc262ac64f9c37"],["774ae7f858a9411e5ef4246b70c65aac5649980be5c17891bbec17895da008cb","d984a032eb6b5e190243dd56d7b7b365372db1e2dff9d6a8301d74c9c953c61b"],["f28773c2d975288bc7d1d205c3748651b075fbc6610e58cddeeddf8f19405aa8","ab0902e8d880a89758212eb65cdaf473a1a06da521fa91f29b5cb52db03ed81"],["d7924d4f7d43ea965a465ae3095ff41131e5946f3c85f79e44adbcf8e27e080e","581e2872a86c72a683842ec228cc6defea40af2bd896d3a5c504dc9ff6a26b58"],["defdea4cdb677750a420fee807eacf21eb9898ae79b9768766e4faa04a2d4a34","4211ab0694635168e997b0ead2a93daeced1f4a04a95c0f6cfb199f69e56eb77"],["2b4ea0a797a443d293ef5cff444f4979f06acfebd7e86d277475656138385b6c","85e89bc037945d93b343083b5a1c86131a01f60c50269763b570c854e5c09b7a"],["352bbf4a4cdd12564f93fa332ce333301d9ad40271f8107181340aef25be59d5","321eb4075348f534d59c18259dda3e1f4a1b3b2e71b1039c67bd3d8bcf81998c"],["2fa2104d6b38d11b0230010559879124e42ab8dfeff5ff29dc9cdadd4ecacc3f","2de1068295dd865b64569335bd5dd80181d70ecfc882648423ba76b532b7d67"],["9248279b09b4d68dab21a9b066edda83263c3d84e09572e269ca0cd7f5453714","73016f7bf234aade5d1aa71bdea2b1ff3fc0de2a887912ffe54a32ce97cb3402"],["daed4f2be3a8bf278e70132fb0beb7522f570e144bf615c07e996d443dee8729","a69dce4a7d6c98e8d4a1aca87ef8d7003f83c230f3afa726ab40e52290be1c55"],["c44d12c7065d812e8acf28d7cbb19f9011ecd9e9fdf281b0e6a3b5e87d22e7db","2119a460ce326cdc76c45926c982fdac0e106e861edf61c5a039063f0e0e6482"],["6a245bf6dc698504c89a20cfded60853152b695336c28063b61c65cbd269e6b4","e022cf42c2bd4a708b3f5126f16a24ad8b33ba48d0423b6efd5e6348100d8a82"],["1697ffa6fd9de627c077e3d2fe541084ce13300b0bec1146f95ae57f0d0bd6a5","b9c398f186806f5d27561506e4557433a2cf15009e498ae7adee9d63d01b2396"],["605bdb019981718b986d0f07e834cb0d9deb8360ffb7f61df982345ef27a7479","2972d2de4f8d20681a78d93ec96fe23c26bfae84fb14db43b01e1e9056b8c49"],["62d14dab4150bf497402fdc45a215e10dcb01c354959b10cfe31c7e9d87ff33d","80fc06bd8cc5b01098088a1950eed0db01aa132967ab472235f5642483b25eaf"],["80c60ad0040f27dade5b4b06c408e56b2c50e9f56b9b8b425e555c2f86308b6f","1c38303f1cc5c30f26e66bad7fe72f70a65eed4cbe7024eb1aa01f56430bd57a"],["7a9375ad6167ad54aa74c6348cc54d344cc5dc9487d847049d5eabb0fa03c8fb","d0e3fa9eca8726909559e0d79269046bdc59ea10c70ce2b02d499ec224dc7f7"],["d528ecd9b696b54c907a9ed045447a79bb408ec39b68df504bb51f459bc3ffc9","eecf41253136e5f99966f21881fd656ebc4345405c520dbc063465b521409933"],["49370a4b5f43412ea25f514e8ecdad05266115e4a7ecb1387231808f8b45963","758f3f41afd6ed428b3081b0512fd62a54c3f3afbb5b6764b653052a12949c9a"],["77f230936ee88cbbd73df930d64702ef881d811e0e1498e2f1c13eb1fc345d74","958ef42a7886b6400a08266e9ba1b37896c95330d97077cbbe8eb3c7671c60d6"],["f2dac991cc4ce4b9ea44887e5c7c0bce58c80074ab9d4dbaeb28531b7739f530","e0dedc9b3b2f8dad4da1f32dec2531df9eb5fbeb0598e4fd1a117dba703a3c37"],["463b3d9f662621fb1b4be8fbbe2520125a216cdfc9dae3debcba4850c690d45b","5ed430d78c296c3543114306dd8622d7c622e27c970a1de31cb377b01af7307e"],["f16f804244e46e2a09232d4aff3b59976b98fac14328a2d1a32496b49998f247","cedabd9b82203f7e13d206fcdf4e33d92a6c53c26e5cce26d6579962c4e31df6"],["caf754272dc84563b0352b7a14311af55d245315ace27c65369e15f7151d41d1","cb474660ef35f5f2a41b643fa5e460575f4fa9b7962232a5c32f908318a04476"],["2600ca4b282cb986f85d0f1709979d8b44a09c07cb86d7c124497bc86f082120","4119b88753c15bd6a693b03fcddbb45d5ac6be74ab5f0ef44b0be9475a7e4b40"],["7635ca72d7e8432c338ec53cd12220bc01c48685e24f7dc8c602a7746998e435","91b649609489d613d1d5e590f78e6d74ecfc061d57048bad9e76f302c5b9c61"],["754e3239f325570cdbbf4a87deee8a66b7f2b33479d468fbc1a50743bf56cc18","673fb86e5bda30fb3cd0ed304ea49a023ee33d0197a695d0c5d98093c536683"],["e3e6bd1071a1e96aff57859c82d570f0330800661d1c952f9fe2694691d9b9e8","59c9e0bba394e76f40c0aa58379a3cb6a5a2283993e90c4167002af4920e37f5"],["186b483d056a033826ae73d88f732985c4ccb1f32ba35f4b4cc47fdcf04aa6eb","3b952d32c67cf77e2e17446e204180ab21fb8090895138b4a4a797f86e80888b"],["df9d70a6b9876ce544c98561f4be4f725442e6d2b737d9c91a8321724ce0963f","55eb2dafd84d6ccd5f862b785dc39d4ab157222720ef9da217b8c45cf2ba2417"],["5edd5cc23c51e87a497ca815d5dce0f8ab52554f849ed8995de64c5f34ce7143","efae9c8dbc14130661e8cec030c89ad0c13c66c0d17a2905cdc706ab7399a868"],["290798c2b6476830da12fe02287e9e777aa3fba1c355b17a722d362f84614fba","e38da76dcd440621988d00bcf79af25d5b29c094db2a23146d003afd41943e7a"],["af3c423a95d9f5b3054754efa150ac39cd29552fe360257362dfdecef4053b45","f98a3fd831eb2b749a93b0e6f35cfb40c8cd5aa667a15581bc2feded498fd9c6"],["766dbb24d134e745cccaa28c99bf274906bb66b26dcf98df8d2fed50d884249a","744b1152eacbe5e38dcc887980da38b897584a65fa06cedd2c924f97cbac5996"],["59dbf46f8c94759ba21277c33784f41645f7b44f6c596a58ce92e666191abe3e","c534ad44175fbc300f4ea6ce648309a042ce739a7919798cd85e216c4a307f6e"],["f13ada95103c4537305e691e74e9a4a8dd647e711a95e73cb62dc6018cfd87b8","e13817b44ee14de663bf4bc808341f326949e21a6a75c2570778419bdaf5733d"],["7754b4fa0e8aced06d4167a2c59cca4cda1869c06ebadfb6488550015a88522c","30e93e864e669d82224b967c3020b8fa8d1e4e350b6cbcc537a48b57841163a2"],["948dcadf5990e048aa3874d46abef9d701858f95de8041d2a6828c99e2262519","e491a42537f6e597d5d28a3224b1bc25df9154efbd2ef1d2cbba2cae5347d57e"],["7962414450c76c1689c7b48f8202ec37fb224cf5ac0bfa1570328a8a3d7c77ab","100b610ec4ffb4760d5c1fc133ef6f6b12507a051f04ac5760afa5b29db83437"],["3514087834964b54b15b160644d915485a16977225b8847bb0dd085137ec47ca","ef0afbb2056205448e1652c48e8127fc6039e77c15c2378b7e7d15a0de293311"],["d3cc30ad6b483e4bc79ce2c9dd8bc54993e947eb8df787b442943d3f7b527eaf","8b378a22d827278d89c5e9be8f9508ae3c2ad46290358630afb34db04eede0a4"],["1624d84780732860ce1c78fcbfefe08b2b29823db913f6493975ba0ff4847610","68651cf9b6da903e0914448c6cd9d4ca896878f5282be4c8cc06e2a404078575"],["733ce80da955a8a26902c95633e62a985192474b5af207da6df7b4fd5fc61cd4","f5435a2bd2badf7d485a4d8b8db9fcce3e1ef8e0201e4578c54673bc1dc5ea1d"],["15d9441254945064cf1a1c33bbd3b49f8966c5092171e699ef258dfab81c045c","d56eb30b69463e7234f5137b73b84177434800bacebfc685fc37bbe9efe4070d"],["a1d0fcf2ec9de675b612136e5ce70d271c21417c9d2b8aaaac138599d0717940","edd77f50bcb5a3cab2e90737309667f2641462a54070f3d519212d39c197a629"],["e22fbe15c0af8ccc5780c0735f84dbe9a790badee8245c06c7ca37331cb36980","a855babad5cd60c88b430a69f53a1a7a38289154964799be43d06d77d31da06"],["311091dd9860e8e20ee13473c1155f5f69635e394704eaa74009452246cfa9b3","66db656f87d1f04fffd1f04788c06830871ec5a64feee685bd80f0b1286d8374"],["34c1fd04d301be89b31c0442d3e6ac24883928b45a9340781867d4232ec2dbdf","9414685e97b1b5954bd46f730174136d57f1ceeb487443dc5321857ba73abee"],["f219ea5d6b54701c1c14de5b557eb42a8d13f3abbcd08affcc2a5e6b049b8d63","4cb95957e83d40b0f73af4544cccf6b1f4b08d3c07b27fb8d8c2962a400766d1"],["d7b8740f74a8fbaab1f683db8f45de26543a5490bca627087236912469a0b448","fa77968128d9c92ee1010f337ad4717eff15db5ed3c049b3411e0315eaa4593b"],["32d31c222f8f6f0ef86f7c98d3a3335ead5bcd32abdd94289fe4d3091aa824bf","5f3032f5892156e39ccd3d7915b9e1da2e6dac9e6f26e961118d14b8462e1661"],["7461f371914ab32671045a155d9831ea8793d77cd59592c4340f86cbc18347b5","8ec0ba238b96bec0cbdddcae0aa442542eee1ff50c986ea6b39847b3cc092ff6"],["ee079adb1df1860074356a25aa38206a6d716b2c3e67453d287698bad7b2b2d6","8dc2412aafe3be5c4c5f37e0ecc5f9f6a446989af04c4e25ebaac479ec1c8c1e"],["16ec93e447ec83f0467b18302ee620f7e65de331874c9dc72bfd8616ba9da6b5","5e4631150e62fb40d0e8c2a7ca5804a39d58186a50e497139626778e25b0674d"],["eaa5f980c245f6f038978290afa70b6bd8855897f98b6aa485b96065d537bd99","f65f5d3e292c2e0819a528391c994624d784869d7e6ea67fb18041024edc07dc"],["78c9407544ac132692ee1910a02439958ae04877151342ea96c4b6b35a49f51","f3e0319169eb9b85d5404795539a5e68fa1fbd583c064d2462b675f194a3ddb4"],["494f4be219a1a77016dcd838431aea0001cdc8ae7a6fc688726578d9702857a5","42242a969283a5f339ba7f075e36ba2af925ce30d767ed6e55f4b031880d562c"],["a598a8030da6d86c6bc7f2f5144ea549d28211ea58faa70ebf4c1e665c1fe9b5","204b5d6f84822c307e4b4a7140737aec23fc63b65b35f86a10026dbd2d864e6b"],["c41916365abb2b5d09192f5f2dbeafec208f020f12570a184dbadc3e58595997","4f14351d0087efa49d245b328984989d5caf9450f34bfc0ed16e96b58fa9913"],["841d6063a586fa475a724604da03bc5b92a2e0d2e0a36acfe4c73a5514742881","73867f59c0659e81904f9a1c7543698e62562d6744c169ce7a36de01a8d6154"],["5e95bb399a6971d376026947f89bde2f282b33810928be4ded112ac4d70e20d5","39f23f366809085beebfc71181313775a99c9aed7d8ba38b161384c746012865"],["36e4641a53948fd476c39f8a99fd974e5ec07564b5315d8bf99471bca0ef2f66","d2424b1b1abe4eb8164227b085c9aa9456ea13493fd563e06fd51cf5694c78fc"],["336581ea7bfbbb290c191a2f507a41cf5643842170e914faeab27c2c579f726","ead12168595fe1be99252129b6e56b3391f7ab1410cd1e0ef3dcdcabd2fda224"],["8ab89816dadfd6b6a1f2634fcf00ec8403781025ed6890c4849742706bd43ede","6fdcef09f2f6d0a044e654aef624136f503d459c3e89845858a47a9129cdd24e"],["1e33f1a746c9c5778133344d9299fcaa20b0938e8acff2544bb40284b8c5fb94","60660257dd11b3aa9c8ed618d24edff2306d320f1d03010e33a7d2057f3b3b6"],["85b7c1dcb3cec1b7ee7f30ded79dd20a0ed1f4cc18cbcfcfa410361fd8f08f31","3d98a9cdd026dd43f39048f25a8847f4fcafad1895d7a633c6fed3c35e999511"],["29df9fbd8d9e46509275f4b125d6d45d7fbe9a3b878a7af872a2800661ac5f51","b4c4fe99c775a606e2d8862179139ffda61dc861c019e55cd2876eb2a27d84b"],["a0b1cae06b0a847a3fea6e671aaf8adfdfe58ca2f768105c8082b2e449fce252","ae434102edde0958ec4b19d917a6a28e6b72da1834aff0e650f049503a296cf2"],["4e8ceafb9b3e9a136dc7ff67e840295b499dfb3b2133e4ba113f2e4c0e121e5","cf2174118c8b6d7a4b48f6d534ce5c79422c086a63460502b827ce62a326683c"],["d24a44e047e19b6f5afb81c7ca2f69080a5076689a010919f42725c2b789a33b","6fb8d5591b466f8fc63db50f1c0f1c69013f996887b8244d2cdec417afea8fa3"],["ea01606a7a6c9cdd249fdfcfacb99584001edd28abbab77b5104e98e8e3b35d4","322af4908c7312b0cfbfe369f7a7b3cdb7d4494bc2823700cfd652188a3ea98d"],["af8addbf2b661c8a6c6328655eb96651252007d8c5ea31be4ad196de8ce2131f","6749e67c029b85f52a034eafd096836b2520818680e26ac8f3dfbcdb71749700"],["e3ae1974566ca06cc516d47e0fb165a674a3dabcfca15e722f0e3450f45889","2aeabe7e4531510116217f07bf4d07300de97e4874f81f533420a72eeb0bd6a4"],["591ee355313d99721cf6993ffed1e3e301993ff3ed258802075ea8ced397e246","b0ea558a113c30bea60fc4775460c7901ff0b053d25ca2bdeee98f1a4be5d196"],["11396d55fda54c49f19aa97318d8da61fa8584e47b084945077cf03255b52984","998c74a8cd45ac01289d5833a7beb4744ff536b01b257be4c5767bea93ea57a4"],["3c5d2a1ba39c5a1790000738c9e0c40b8dcdfd5468754b6405540157e017aa7a","b2284279995a34e2f9d4de7396fc18b80f9b8b9fdd270f6661f79ca4c81bd257"],["cc8704b8a60a0defa3a99a7299f2e9c3fbc395afb04ac078425ef8a1793cc030","bdd46039feed17881d1e0862db347f8cf395b74fc4bcdc4e940b74e3ac1f1b13"],["c533e4f7ea8555aacd9777ac5cad29b97dd4defccc53ee7ea204119b2889b197","6f0a256bc5efdf429a2fb6242f1a43a2d9b925bb4a4b3a26bb8e0f45eb596096"],["c14f8f2ccb27d6f109f6d08d03cc96a69ba8c34eec07bbcf566d48e33da6593","c359d6923bb398f7fd4473e16fe1c28475b740dd098075e6c0e8649113dc3a38"],["a6cbc3046bc6a450bac24789fa17115a4c9739ed75f8f21ce441f72e0b90e6ef","21ae7f4680e889bb130619e2c0f95a360ceb573c70603139862afd617fa9b9f"],["347d6d9a02c48927ebfb86c1359b1caf130a3c0267d11ce6344b39f99d43cc38","60ea7f61a353524d1c987f6ecec92f086d565ab687870cb12689ff1e31c74448"],["da6545d2181db8d983f7dcb375ef5866d47c67b1bf31c8cf855ef7437b72656a","49b96715ab6878a79e78f07ce5680c5d6673051b4935bd897fea824b77dc208a"],["c40747cc9d012cb1a13b8148309c6de7ec25d6945d657146b9d5994b8feb1111","5ca560753be2a12fc6de6caf2cb489565db936156b9514e1bb5e83037e0fa2d4"],["4e42c8ec82c99798ccf3a610be870e78338c7f713348bd34c8203ef4037f3502","7571d74ee5e0fb92a7a8b33a07783341a5492144cc54bcc40a94473693606437"],["3775ab7089bc6af823aba2e1af70b236d251cadb0c86743287522a1b3b0dedea","be52d107bcfa09d8bcb9736a828cfa7fac8db17bf7a76a2c42ad961409018cf7"],["cee31cbf7e34ec379d94fb814d3d775ad954595d1314ba8846959e3e82f74e26","8fd64a14c06b589c26b947ae2bcf6bfa0149ef0be14ed4d80f448a01c43b1c6d"],["b4f9eaea09b6917619f6ea6a4eb5464efddb58fd45b1ebefcdc1a01d08b47986","39e5c9925b5a54b07433a4f18c61726f8bb131c012ca542eb24a8ac07200682a"],["d4263dfc3d2df923a0179a48966d30ce84e2515afc3dccc1b77907792ebcc60e","62dfaf07a0f78feb30e30d6295853ce189e127760ad6cf7fae164e122a208d54"],["48457524820fa65a4f8d35eb6930857c0032acc0a4a2de422233eeda897612c4","25a748ab367979d98733c38a1fa1c2e7dc6cc07db2d60a9ae7a76aaa49bd0f77"],["dfeeef1881101f2cb11644f3a2afdfc2045e19919152923f367a1767c11cceda","ecfb7056cf1de042f9420bab396793c0c390bde74b4bbdff16a83ae09a9a7517"],["6d7ef6b17543f8373c573f44e1f389835d89bcbc6062ced36c82df83b8fae859","cd450ec335438986dfefa10c57fea9bcc521a0959b2d80bbf74b190dca712d10"],["e75605d59102a5a2684500d3b991f2e3f3c88b93225547035af25af66e04541f","f5c54754a8f71ee540b9b48728473e314f729ac5308b06938360990e2bfad125"],["eb98660f4c4dfaa06a2be453d5020bc99a0c2e60abe388457dd43fefb1ed620c","6cb9a8876d9cb8520609af3add26cd20a0a7cd8a9411131ce85f44100099223e"],["13e87b027d8514d35939f2e6892b19922154596941888336dc3563e3b8dba942","fef5a3c68059a6dec5d624114bf1e91aac2b9da568d6abeb2570d55646b8adf1"],["ee163026e9fd6fe017c38f06a5be6fc125424b371ce2708e7bf4491691e5764a","1acb250f255dd61c43d94ccc670d0f58f49ae3fa15b96623e5430da0ad6c62b2"],["b268f5ef9ad51e4d78de3a750c2dc89b1e626d43505867999932e5db33af3d80","5f310d4b3c99b9ebb19f77d41c1dee018cf0d34fd4191614003e945a1216e423"],["ff07f3118a9df035e9fad85eb6c7bfe42b02f01ca99ceea3bf7ffdba93c4750d","438136d603e858a3a5c440c38eccbaddc1d2942114e2eddd4740d098ced1f0d8"],["8d8b9855c7c052a34146fd20ffb658bea4b9f69e0d825ebec16e8c3ce2b526a1","cdb559eedc2d79f926baf44fb84ea4d44bcf50fee51d7ceb30e2e7f463036758"],["52db0b5384dfbf05bfa9d472d7ae26dfe4b851ceca91b1eba54263180da32b63","c3b997d050ee5d423ebaf66a6db9f57b3180c902875679de924b69d84a7b375"],["e62f9490d3d51da6395efd24e80919cc7d0f29c3f3fa48c6fff543becbd43352","6d89ad7ba4876b0b22c2ca280c682862f342c8591f1daf5170e07bfd9ccafa7d"],["7f30ea2476b399b4957509c88f77d0191afa2ff5cb7b14fd6d8e7d65aaab1193","ca5ef7d4b231c94c3b15389a5f6311e9daff7bb67b103e9880ef4bff637acaec"],["5098ff1e1d9f14fb46a210fada6c903fef0fb7b4a1dd1d9ac60a0361800b7a00","9731141d81fc8f8084d37c6e7542006b3ee1b40d60dfe5362a5b132fd17ddc0"],["32b78c7de9ee512a72895be6b9cbefa6e2f3c4ccce445c96b9f2c81e2778ad58","ee1849f513df71e32efc3896ee28260c73bb80547ae2275ba497237794c8753c"],["e2cb74fddc8e9fbcd076eef2a7c72b0ce37d50f08269dfc074b581550547a4f7","d3aa2ed71c9dd2247a62df062736eb0baddea9e36122d2be8641abcb005cc4a4"],["8438447566d4d7bedadc299496ab357426009a35f235cb141be0d99cd10ae3a8","c4e1020916980a4da5d01ac5e6ad330734ef0d7906631c4f2390426b2edd791f"],["4162d488b89402039b584c6fc6c308870587d9c46f660b878ab65c82c711d67e","67163e903236289f776f22c25fb8a3afc1732f2b84b4e95dbda47ae5a0852649"],["3fad3fa84caf0f34f0f89bfd2dcf54fc175d767aec3e50684f3ba4a4bf5f683d","cd1bc7cb6cc407bb2f0ca647c718a730cf71872e7d0d2a53fa20efcdfe61826"],["674f2600a3007a00568c1a7ce05d0816c1fb84bf1370798f1c69532faeb1a86b","299d21f9413f33b3edf43b257004580b70db57da0b182259e09eecc69e0d38a5"],["d32f4da54ade74abb81b815ad1fb3b263d82d6c692714bcff87d29bd5ee9f08f","f9429e738b8e53b968e99016c059707782e14f4535359d582fc416910b3eea87"],["30e4e670435385556e593657135845d36fbb6931f72b08cb1ed954f1e3ce3ff6","462f9bce619898638499350113bbc9b10a878d35da70740dc695a559eb88db7b"],["be2062003c51cc3004682904330e4dee7f3dcd10b01e580bf1971b04d4cad297","62188bc49d61e5428573d48a74e1c655b1c61090905682a0d5558ed72dccb9bc"],["93144423ace3451ed29e0fb9ac2af211cb6e84a601df5993c419859fff5df04a","7c10dfb164c3425f5c71a3f9d7992038f1065224f72bb9d1d902a6d13037b47c"],["b015f8044f5fcbdcf21ca26d6c34fb8197829205c7b7d2a7cb66418c157b112c","ab8c1e086d04e813744a655b2df8d5f83b3cdc6faa3088c1d3aea1454e3a1d5f"],["d5e9e1da649d97d89e4868117a465a3a4f8a18de57a140d36b3f2af341a21b52","4cb04437f391ed73111a13cc1d4dd0db1693465c2240480d8955e8592f27447a"],["d3ae41047dd7ca065dbf8ed77b992439983005cd72e16d6f996a5316d36966bb","bd1aeb21ad22ebb22a10f0303417c6d964f8cdd7df0aca614b10dc14d125ac46"],["463e2763d885f958fc66cdd22800f0a487197d0a82e377b49f80af87c897b065","bfefacdb0e5d0fd7df3a311a94de062b26b80c61fbc97508b79992671ef7ca7f"],["7985fdfd127c0567c6f53ec1bb63ec3158e597c40bfe747c83cddfc910641917","603c12daf3d9862ef2b25fe1de289aed24ed291e0ec6708703a5bd567f32ed03"],["74a1ad6b5f76e39db2dd249410eac7f99e74c59cb83d2d0ed5ff1543da7703e9","cc6157ef18c9c63cd6193d83631bbea0093e0968942e8c33d5737fd790e0db08"],["30682a50703375f602d416664ba19b7fc9bab42c72747463a71d0896b22f6da3","553e04f6b018b4fa6c8f39e7f311d3176290d0e0f19ca73f17714d9977a22ff8"],["9e2158f0d7c0d5f26c3791efefa79597654e7a2b2464f52b1ee6c1347769ef57","712fcdd1b9053f09003a3481fa7762e9ffd7c8ef35a38509e2fbf2629008373"],["176e26989a43c9cfeba4029c202538c28172e566e3c4fce7322857f3be327d66","ed8cc9d04b29eb877d270b4878dc43c19aefd31f4eee09ee7b47834c1fa4b1c3"],["75d46efea3771e6e68abb89a13ad747ecf1892393dfc4f1b7004788c50374da8","9852390a99507679fd0b86fd2b39a868d7efc22151346e1a3ca4726586a6bed8"],["809a20c67d64900ffb698c4c825f6d5f2310fb0451c869345b7319f645605721","9e994980d9917e22b76b061927fa04143d096ccc54963e6a5ebfa5f3f8e286c1"],["1b38903a43f7f114ed4500b4eac7083fdefece1cf29c63528d563446f972c180","4036edc931a60ae889353f77fd53de4a2708b26b6f5da72ad3394119daf408f9"]]}}},{}],419:[function(i,s,r){var n=r,o=i("bn.js"),a=i("minimalistic-assert"),l=i("minimalistic-crypto-utils");n.assert=a,n.toArray=l.toArray,n.zero2=l.zero2,n.toHex=l.toHex,n.encode=l.encode,n.getNAF=function(c,u,d){var h=new Array(Math.max(c.bitLength(),d)+1);h.fill(0);for(var p=1<<u+1,f=c.clone(),m=0;m<h.length;m++){var g,y=f.andln(p-1);f.isOdd()?(g=y>(p>>1)-1?(p>>1)-y:y,f.isubn(g)):g=0,h[m]=g,f.iushrn(1)}return h},n.getJSF=function(c,u){var d=[[],[]];c=c.clone(),u=u.clone();for(var h,p=0,f=0;c.cmpn(-p)>0||u.cmpn(-f)>0;){var m,g,y=c.andln(3)+p&3,v=u.andln(3)+f&3;y===3&&(y=-1),v===3&&(v=-1),m=1&y?(h=c.andln(7)+p&7)!==3&&h!==5||v!==2?y:-y:0,d[0].push(m),g=1&v?(h=u.andln(7)+f&7)!==3&&h!==5||y!==2?v:-v:0,d[1].push(g),2*p===m+1&&(p=1-p),2*f===g+1&&(f=1-f),c.iushrn(1),u.iushrn(1)}return d},n.cachedProperty=function(c,u,d){var h="_"+u;c.prototype[u]=function(){return this[h]!==void 0?this[h]:this[h]=d.call(this)}},n.parseBytes=function(c){return typeof c=="string"?n.toArray(c,"hex"):c},n.intFromLE=function(c){return new o(c,"hex","le")}},{"bn.js":420,"minimalistic-assert":453,"minimalistic-crypto-utils":454}],420:[function(i,s,r){arguments[4][184][0].apply(r,arguments)},{buffer:188,dup:184}],421:[function(i,s,r){s.exports={name:"elliptic",version:"6.5.4",description:"EC cryptography",main:"lib/elliptic.js",files:["lib"],scripts:{lint:"eslint lib test","lint:fix":"npm run lint -- --fix",unit:"istanbul test _mocha --reporter=spec test/index.js",test:"npm run lint && npm run unit",version:"grunt dist && git add dist/"},repository:{type:"git",url:"git@github.com:indutny/elliptic"},keywords:["EC","Elliptic","curve","Cryptography"],author:"Fedor Indutny <fedor@indutny.com>",license:"MIT",bugs:{url:"https://github.com/indutny/elliptic/issues"},homepage:"https://github.com/indutny/elliptic",devDependencies:{brfs:"^2.0.2",coveralls:"^3.1.0",eslint:"^7.6.0",grunt:"^1.2.1","grunt-browserify":"^5.3.0","grunt-cli":"^1.3.2","grunt-contrib-connect":"^3.0.0","grunt-contrib-copy":"^1.0.0","grunt-contrib-uglify":"^5.0.0","grunt-mocha-istanbul":"^5.0.2","grunt-saucelabs":"^9.0.1",istanbul:"^0.4.5",mocha:"^8.0.1"},dependencies:{"bn.js":"^4.11.9",brorand:"^1.1.0","hash.js":"^1.0.0","hmac-drbg":"^1.0.1",inherits:"^2.0.4","minimalistic-assert":"^1.0.1","minimalistic-crypto-utils":"^1.0.1"}}},{}],422:[function(i,s,r){var n=Object.create||function(D){var F=function(){};return F.prototype=D,new F},o=Object.keys||function(D){var F=[];for(var B in D)Object.prototype.hasOwnProperty.call(D,B)&&F.push(B);return B},a=Function.prototype.bind||function(D){var F=this;return function(){return F.apply(D,arguments)}};function l(){this._events&&Object.prototype.hasOwnProperty.call(this,"_events")||(this._events=n(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0}s.exports=l,l.EventEmitter=l,l.prototype._events=void 0,l.prototype._maxListeners=void 0;var c,u=10;try{var d={};Object.defineProperty&&Object.defineProperty(d,"x",{value:0}),c=d.x===0}catch{c=!1}function h(D){return D._maxListeners===void 0?l.defaultMaxListeners:D._maxListeners}function p(D,F,B){if(F)D.call(B);else for(var U=D.length,H=I(D,U),R=0;R<U;++R)H[R].call(B)}function f(D,F,B,U){if(F)D.call(B,U);else for(var H=D.length,R=I(D,H),L=0;L<H;++L)R[L].call(B,U)}function m(D,F,B,U,H){if(F)D.call(B,U,H);else for(var R=D.length,L=I(D,R),_=0;_<R;++_)L[_].call(B,U,H)}function g(D,F,B,U,H,R){if(F)D.call(B,U,H,R);else for(var L=D.length,_=I(D,L),w=0;w<L;++w)_[w].call(B,U,H,R)}function y(D,F,B,U){if(F)D.apply(B,U);else for(var H=D.length,R=I(D,H),L=0;L<H;++L)R[L].apply(B,U)}function v(D,F,B,U){var H,R,L;if(typeof B!="function")throw new TypeError('"listener" argument must be a function');if((R=D._events)?(R.newListener&&(D.emit("newListener",F,B.listener?B.listener:B),R=D._events),L=R[F]):(R=D._events=n(null),D._eventsCount=0),L){if(typeof L=="function"?L=R[F]=U?[B,L]:[L,B]:U?L.unshift(B):L.push(B),!L.warned&&(H=h(D))&&H>0&&L.length>H){L.warned=!0;var _=new Error("Possible EventEmitter memory leak detected. "+L.length+' "'+String(F)+'" listeners added. Use emitter.setMaxListeners() to increase limit.');_.name="MaxListenersExceededWarning",_.emitter=D,_.type=F,_.count=L.length,typeof console=="object"&&console.warn&&console.warn("%s: %s",_.name,_.message)}}else L=R[F]=B,++D._eventsCount;return D}function C(){if(!this.fired)switch(this.target.removeListener(this.type,this.wrapFn),this.fired=!0,arguments.length){case 0:return this.listener.call(this.target);case 1:return this.listener.call(this.target,arguments[0]);case 2:return this.listener.call(this.target,arguments[0],arguments[1]);case 3:return this.listener.call(this.target,arguments[0],arguments[1],arguments[2]);default:for(var D=new Array(arguments.length),F=0;F<D.length;++F)D[F]=arguments[F];this.listener.apply(this.target,D)}}function b(D,F,B){var U={fired:!1,wrapFn:void 0,target:D,type:F,listener:B},H=a.call(C,U);return H.listener=B,U.wrapFn=H,H}function T(D,F,B){var U=D._events;if(!U)return[];var H=U[F];return H?typeof H=="function"?B?[H.listener||H]:[H]:B?function(R){for(var L=new Array(R.length),_=0;_<L.length;++_)L[_]=R[_].listener||R[_];return L}(H):I(H,H.length):[]}function A(D){var F=this._events;if(F){var B=F[D];if(typeof B=="function")return 1;if(B)return B.length}return 0}function I(D,F){for(var B=new Array(F),U=0;U<F;++U)B[U]=D[U];return B}c?Object.defineProperty(l,"defaultMaxListeners",{enumerable:!0,get:function(){return u},set:function(D){if(typeof D!="number"||D<0||D!=D)throw new TypeError('"defaultMaxListeners" must be a positive number');u=D}}):l.defaultMaxListeners=u,l.prototype.setMaxListeners=function(D){if(typeof D!="number"||D<0||isNaN(D))throw new TypeError('"n" argument must be a positive number');return this._maxListeners=D,this},l.prototype.getMaxListeners=function(){return h(this)},l.prototype.emit=function(D){var F,B,U,H,R,L,_=D==="error";if(L=this._events)_=_&&L.error==null;else if(!_)return!1;if(_){if(arguments.length>1&&(F=arguments[1]),F instanceof Error)throw F;var w=new Error('Unhandled "error" event. ('+F+")");throw w.context=F,w}if(!(B=L[D]))return!1;var S=typeof B=="function";switch(U=arguments.length){case 1:p(B,S,this);break;case 2:f(B,S,this,arguments[1]);break;case 3:m(B,S,this,arguments[1],arguments[2]);break;case 4:g(B,S,this,arguments[1],arguments[2],arguments[3]);break;default:for(H=new Array(U-1),R=1;R<U;R++)H[R-1]=arguments[R];y(B,S,this,H)}return!0},l.prototype.addListener=function(D,F){return v(this,D,F,!1)},l.prototype.on=l.prototype.addListener,l.prototype.prependListener=function(D,F){return v(this,D,F,!0)},l.prototype.once=function(D,F){if(typeof F!="function")throw new TypeError('"listener" argument must be a function');return this.on(D,b(this,D,F)),this},l.prototype.prependOnceListener=function(D,F){if(typeof F!="function")throw new TypeError('"listener" argument must be a function');return this.prependListener(D,b(this,D,F)),this},l.prototype.removeListener=function(D,F){var B,U,H,R,L;if(typeof F!="function")throw new TypeError('"listener" argument must be a function');if(!(U=this._events))return this;if(!(B=U[D]))return this;if(B===F||B.listener===F)--this._eventsCount==0?this._events=n(null):(delete U[D],U.removeListener&&this.emit("removeListener",D,B.listener||F));else if(typeof B!="function"){for(H=-1,R=B.length-1;R>=0;R--)if(B[R]===F||B[R].listener===F){L=B[R].listener,H=R;break}if(H<0)return this;H===0?B.shift():function(_,w){for(var S=w,x=S+1,E=_.length;x<E;S+=1,x+=1)_[S]=_[x];_.pop()}(B,H),B.length===1&&(U[D]=B[0]),U.removeListener&&this.emit("removeListener",D,L||F)}return this},l.prototype.removeAllListeners=function(D){var F,B,U;if(!(B=this._events))return this;if(!B.removeListener)return arguments.length===0?(this._events=n(null),this._eventsCount=0):B[D]&&(--this._eventsCount==0?this._events=n(null):delete B[D]),this;if(arguments.length===0){var H,R=o(B);for(U=0;U<R.length;++U)(H=R[U])!=="removeListener"&&this.removeAllListeners(H);return this.removeAllListeners("removeListener"),this._events=n(null),this._eventsCount=0,this}if(typeof(F=B[D])=="function")this.removeListener(D,F);else if(F)for(U=F.length-1;U>=0;U--)this.removeListener(D,F[U]);return this},l.prototype.listeners=function(D){return T(this,D,!0)},l.prototype.rawListeners=function(D){return T(this,D,!1)},l.listenerCount=function(D,F){return typeof D.listenerCount=="function"?D.listenerCount(F):A.call(D,F)},l.prototype.listenerCount=A,l.prototype.eventNames=function(){return this._eventsCount>0?Reflect.ownKeys(this._events):[]}},{}],423:[function(i,s,r){var n=i("safe-buffer").Buffer,o=i("md5.js");s.exports=function(a,l,c,u){if(n.isBuffer(a)||(a=n.from(a,"binary")),l&&(n.isBuffer(l)||(l=n.from(l,"binary")),l.length!==8))throw new RangeError("salt should be Buffer with 8 byte length");for(var d=c/8,h=n.alloc(d),p=n.alloc(u||0),f=n.alloc(0);d>0||u>0;){var m=new o;m.update(f),m.update(a),l&&m.update(l),f=m.digest();var g=0;if(d>0){var y=h.length-d;g=Math.min(d,f.length),f.copy(h,y,0,g),d-=g}if(g<f.length&&u>0){var v=p.length-u,C=Math.min(u,f.length-g);f.copy(p,v,g,g+C),u-=C}}return f.fill(0),{key:h,iv:p}}},{"md5.js":450,"safe-buffer":494}],424:[function(i,s,r){Object.defineProperty(r,"__esModule",{value:!0}),r.CsvParserStream=r.ParserOptions=r.parseFile=r.parseStream=r.parseString=r.parse=r.FormatterOptions=r.CsvFormatterStream=r.writeToPath=r.writeToString=r.writeToBuffer=r.writeToStream=r.write=r.format=void 0;var n=i("@fast-csv/format");Object.defineProperty(r,"format",{enumerable:!0,get:function(){return n.format}}),Object.defineProperty(r,"write",{enumerable:!0,get:function(){return n.write}}),Object.defineProperty(r,"writeToStream",{enumerable:!0,get:function(){return n.writeToStream}}),Object.defineProperty(r,"writeToBuffer",{enumerable:!0,get:function(){return n.writeToBuffer}}),Object.defineProperty(r,"writeToString",{enumerable:!0,get:function(){return n.writeToString}}),Object.defineProperty(r,"writeToPath",{enumerable:!0,get:function(){return n.writeToPath}}),Object.defineProperty(r,"CsvFormatterStream",{enumerable:!0,get:function(){return n.CsvFormatterStream}}),Object.defineProperty(r,"FormatterOptions",{enumerable:!0,get:function(){return n.FormatterOptions}});var o=i("@fast-csv/parse");Object.defineProperty(r,"parse",{enumerable:!0,get:function(){return o.parse}}),Object.defineProperty(r,"parseString",{enumerable:!0,get:function(){return o.parseString}}),Object.defineProperty(r,"parseStream",{enumerable:!0,get:function(){return o.parseStream}}),Object.defineProperty(r,"parseFile",{enumerable:!0,get:function(){return o.parseFile}}),Object.defineProperty(r,"ParserOptions",{enumerable:!0,get:function(){return o.ParserOptions}}),Object.defineProperty(r,"CsvParserStream",{enumerable:!0,get:function(){return o.CsvParserStream}})},{"@fast-csv/format":151,"@fast-csv/parse":155}],425:[function(i,s,r){var n=i("safe-buffer").Buffer,o=i("readable-stream").Transform;function a(l){o.call(this),this._block=n.allocUnsafe(l),this._blockSize=l,this._blockOffset=0,this._length=[0,0,0,0],this._finalized=!1}i("inherits")(a,o),a.prototype._transform=function(l,c,u){var d=null;try{this.update(l,c)}catch(h){d=h}u(d)},a.prototype._flush=function(l){var c=null;try{this.push(this.digest())}catch(u){c=u}l(c)},a.prototype.update=function(l,c){if(function(m,g){if(!n.isBuffer(m)&&typeof m!="string")throw new TypeError(g+" must be a string or a buffer")}(l,"Data"),this._finalized)throw new Error("Digest already called");n.isBuffer(l)||(l=n.from(l,c));for(var u=this._block,d=0;this._blockOffset+l.length-d>=this._blockSize;){for(var h=this._blockOffset;h<this._blockSize;)u[h++]=l[d++];this._update(),this._blockOffset=0}for(;d<l.length;)u[this._blockOffset++]=l[d++];for(var p=0,f=8*l.length;f>0;++p)this._length[p]+=f,(f=this._length[p]/4294967296|0)>0&&(this._length[p]-=4294967296*f);return this},a.prototype._update=function(){throw new Error("_update is not implemented")},a.prototype.digest=function(l){if(this._finalized)throw new Error("Digest already called");this._finalized=!0;var c=this._digest();l!==void 0&&(c=c.toString(l)),this._block.fill(0),this._blockOffset=0;for(var u=0;u<4;++u)this._length[u]=0;return c},a.prototype._digest=function(){throw new Error("_digest is not implemented")},s.exports=a},{inherits:440,"readable-stream":491,"safe-buffer":494}],426:[function(i,s,r){var n=r;n.utils=i("./hash/utils"),n.common=i("./hash/common"),n.sha=i("./hash/sha"),n.ripemd=i("./hash/ripemd"),n.hmac=i("./hash/hmac"),n.sha1=n.sha.sha1,n.sha256=n.sha.sha256,n.sha224=n.sha.sha224,n.sha384=n.sha.sha384,n.sha512=n.sha.sha512,n.ripemd160=n.ripemd.ripemd160},{"./hash/common":427,"./hash/hmac":428,"./hash/ripemd":429,"./hash/sha":430,"./hash/utils":437}],427:[function(i,s,r){var n=i("./utils"),o=i("minimalistic-assert");function a(){this.pending=null,this.pendingTotal=0,this.blockSize=this.constructor.blockSize,this.outSize=this.constructor.outSize,this.hmacStrength=this.constructor.hmacStrength,this.padLength=this.constructor.padLength/8,this.endian="big",this._delta8=this.blockSize/8,this._delta32=this.blockSize/32}r.BlockHash=a,a.prototype.update=function(l,c){if(l=n.toArray(l,c),this.pending?this.pending=this.pending.concat(l):this.pending=l,this.pendingTotal+=l.length,this.pending.length>=this._delta8){var u=(l=this.pending).length%this._delta8;this.pending=l.slice(l.length-u,l.length),this.pending.length===0&&(this.pending=null),l=n.join32(l,0,l.length-u,this.endian);for(var d=0;d<l.length;d+=this._delta32)this._update(l,d,d+this._delta32)}return this},a.prototype.digest=function(l){return this.update(this._pad()),o(this.pending===null),this._digest(l)},a.prototype._pad=function(){var l=this.pendingTotal,c=this._delta8,u=c-(l+this.padLength)%c,d=new Array(u+this.padLength);d[0]=128;for(var h=1;h<u;h++)d[h]=0;if(l<<=3,this.endian==="big"){for(var p=8;p<this.padLength;p++)d[h++]=0;d[h++]=0,d[h++]=0,d[h++]=0,d[h++]=0,d[h++]=l>>>24&255,d[h++]=l>>>16&255,d[h++]=l>>>8&255,d[h++]=255&l}else for(d[h++]=255&l,d[h++]=l>>>8&255,d[h++]=l>>>16&255,d[h++]=l>>>24&255,d[h++]=0,d[h++]=0,d[h++]=0,d[h++]=0,p=8;p<this.padLength;p++)d[h++]=0;return d}},{"./utils":437,"minimalistic-assert":453}],428:[function(i,s,r){var n=i("./utils"),o=i("minimalistic-assert");function a(l,c,u){if(!(this instanceof a))return new a(l,c,u);this.Hash=l,this.blockSize=l.blockSize/8,this.outSize=l.outSize/8,this.inner=null,this.outer=null,this._init(n.toArray(c,u))}s.exports=a,a.prototype._init=function(l){l.length>this.blockSize&&(l=new this.Hash().update(l).digest()),o(l.length<=this.blockSize);for(var c=l.length;c<this.blockSize;c++)l.push(0);for(c=0;c<l.length;c++)l[c]^=54;for(this.inner=new this.Hash().update(l),c=0;c<l.length;c++)l[c]^=106;this.outer=new this.Hash().update(l)},a.prototype.update=function(l,c){return this.inner.update(l,c),this},a.prototype.digest=function(l){return this.outer.update(this.inner.digest()),this.outer.digest(l)}},{"./utils":437,"minimalistic-assert":453}],429:[function(i,s,r){var n=i("./utils"),o=i("./common"),a=n.rotl32,l=n.sum32,c=n.sum32_3,u=n.sum32_4,d=o.BlockHash;function h(){if(!(this instanceof h))return new h;d.call(this),this.h=[1732584193,4023233417,2562383102,271733878,3285377520],this.endian="little"}function p(b,T,A,I){return b<=15?T^A^I:b<=31?T&A|~T&I:b<=47?(T|~A)^I:b<=63?T&I|A&~I:T^(A|~I)}function f(b){return b<=15?0:b<=31?1518500249:b<=47?1859775393:b<=63?2400959708:2840853838}function m(b){return b<=15?1352829926:b<=31?1548603684:b<=47?1836072691:b<=63?2053994217:0}n.inherits(h,d),r.ripemd160=h,h.blockSize=512,h.outSize=160,h.hmacStrength=192,h.padLength=64,h.prototype._update=function(b,T){for(var A=this.h[0],I=this.h[1],D=this.h[2],F=this.h[3],B=this.h[4],U=A,H=I,R=D,L=F,_=B,w=0;w<80;w++){var S=l(a(u(A,p(w,I,D,F),b[g[w]+T],f(w)),v[w]),B);A=B,B=F,F=a(D,10),D=I,I=S,S=l(a(u(U,p(79-w,H,R,L),b[y[w]+T],m(w)),C[w]),_),U=_,_=L,L=a(R,10),R=H,H=S}S=c(this.h[1],D,L),this.h[1]=c(this.h[2],F,_),this.h[2]=c(this.h[3],B,U),this.h[3]=c(this.h[4],A,H),this.h[4]=c(this.h[0],I,R),this.h[0]=S},h.prototype._digest=function(b){return b==="hex"?n.toHex32(this.h,"little"):n.split32(this.h,"little")};var g=[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,7,4,13,1,10,6,15,3,12,0,9,5,2,14,11,8,3,10,14,4,9,15,8,1,2,7,0,6,13,11,5,12,1,9,11,10,0,8,12,4,13,3,7,15,14,5,6,2,4,0,5,9,7,12,2,10,14,1,3,8,11,6,15,13],y=[5,14,7,0,9,2,11,4,13,6,15,8,1,10,3,12,6,11,3,7,0,13,5,10,14,15,8,12,4,9,1,2,15,5,1,3,7,14,6,9,11,8,12,2,10,0,4,13,8,6,4,1,3,11,15,0,5,12,2,13,9,7,10,14,12,15,10,4,1,5,8,7,6,2,13,14,0,3,9,11],v=[11,14,15,12,5,8,7,9,11,13,14,15,6,7,9,8,7,6,8,13,11,9,7,15,7,12,15,9,11,7,13,12,11,13,6,7,14,9,13,15,14,8,13,6,5,12,7,5,11,12,14,15,14,15,9,8,9,14,5,6,8,6,5,12,9,15,5,11,6,8,13,12,5,12,13,14,11,8,5,6],C=[8,9,9,11,13,15,15,5,7,7,8,11,14,14,12,6,9,13,15,7,12,8,9,11,7,7,12,7,6,15,13,11,9,7,15,11,8,6,6,14,12,13,5,14,13,13,7,5,15,5,8,11,14,14,6,14,6,9,12,9,12,5,15,8,8,5,12,9,12,5,14,6,8,13,6,5,15,13,11,11]},{"./common":427,"./utils":437}],430:[function(i,s,r){r.sha1=i("./sha/1"),r.sha224=i("./sha/224"),r.sha256=i("./sha/256"),r.sha384=i("./sha/384"),r.sha512=i("./sha/512")},{"./sha/1":431,"./sha/224":432,"./sha/256":433,"./sha/384":434,"./sha/512":435}],431:[function(i,s,r){var n=i("../utils"),o=i("../common"),a=i("./common"),l=n.rotl32,c=n.sum32,u=n.sum32_5,d=a.ft_1,h=o.BlockHash,p=[1518500249,1859775393,2400959708,3395469782];function f(){if(!(this instanceof f))return new f;h.call(this),this.h=[1732584193,4023233417,2562383102,271733878,3285377520],this.W=new Array(80)}n.inherits(f,h),s.exports=f,f.blockSize=512,f.outSize=160,f.hmacStrength=80,f.padLength=64,f.prototype._update=function(m,g){for(var y=this.W,v=0;v<16;v++)y[v]=m[g+v];for(;v<y.length;v++)y[v]=l(y[v-3]^y[v-8]^y[v-14]^y[v-16],1);var C=this.h[0],b=this.h[1],T=this.h[2],A=this.h[3],I=this.h[4];for(v=0;v<y.length;v++){var D=~~(v/20),F=u(l(C,5),d(D,b,T,A),I,y[v],p[D]);I=A,A=T,T=l(b,30),b=C,C=F}this.h[0]=c(this.h[0],C),this.h[1]=c(this.h[1],b),this.h[2]=c(this.h[2],T),this.h[3]=c(this.h[3],A),this.h[4]=c(this.h[4],I)},f.prototype._digest=function(m){return m==="hex"?n.toHex32(this.h,"big"):n.split32(this.h,"big")}},{"../common":427,"../utils":437,"./common":436}],432:[function(i,s,r){var n=i("../utils"),o=i("./256");function a(){if(!(this instanceof a))return new a;o.call(this),this.h=[3238371032,914150663,812702999,4144912697,4290775857,1750603025,1694076839,3204075428]}n.inherits(a,o),s.exports=a,a.blockSize=512,a.outSize=224,a.hmacStrength=192,a.padLength=64,a.prototype._digest=function(l){return l==="hex"?n.toHex32(this.h.slice(0,7),"big"):n.split32(this.h.slice(0,7),"big")}},{"../utils":437,"./256":433}],433:[function(i,s,r){var n=i("../utils"),o=i("../common"),a=i("./common"),l=i("minimalistic-assert"),c=n.sum32,u=n.sum32_4,d=n.sum32_5,h=a.ch32,p=a.maj32,f=a.s0_256,m=a.s1_256,g=a.g0_256,y=a.g1_256,v=o.BlockHash,C=[1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298];function b(){if(!(this instanceof b))return new b;v.call(this),this.h=[1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225],this.k=C,this.W=new Array(64)}n.inherits(b,v),s.exports=b,b.blockSize=512,b.outSize=256,b.hmacStrength=192,b.padLength=64,b.prototype._update=function(T,A){for(var I=this.W,D=0;D<16;D++)I[D]=T[A+D];for(;D<I.length;D++)I[D]=u(y(I[D-2]),I[D-7],g(I[D-15]),I[D-16]);var F=this.h[0],B=this.h[1],U=this.h[2],H=this.h[3],R=this.h[4],L=this.h[5],_=this.h[6],w=this.h[7];for(l(this.k.length===I.length),D=0;D<I.length;D++){var S=d(w,m(R),h(R,L,_),this.k[D],I[D]),x=c(f(F),p(F,B,U));w=_,_=L,L=R,R=c(H,S),H=U,U=B,B=F,F=c(S,x)}this.h[0]=c(this.h[0],F),this.h[1]=c(this.h[1],B),this.h[2]=c(this.h[2],U),this.h[3]=c(this.h[3],H),this.h[4]=c(this.h[4],R),this.h[5]=c(this.h[5],L),this.h[6]=c(this.h[6],_),this.h[7]=c(this.h[7],w)},b.prototype._digest=function(T){return T==="hex"?n.toHex32(this.h,"big"):n.split32(this.h,"big")}},{"../common":427,"../utils":437,"./common":436,"minimalistic-assert":453}],434:[function(i,s,r){var n=i("../utils"),o=i("./512");function a(){if(!(this instanceof a))return new a;o.call(this),this.h=[3418070365,3238371032,1654270250,914150663,2438529370,812702999,355462360,4144912697,1731405415,4290775857,2394180231,1750603025,3675008525,1694076839,1203062813,3204075428]}n.inherits(a,o),s.exports=a,a.blockSize=1024,a.outSize=384,a.hmacStrength=192,a.padLength=128,a.prototype._digest=function(l){return l==="hex"?n.toHex32(this.h.slice(0,12),"big"):n.split32(this.h.slice(0,12),"big")}},{"../utils":437,"./512":435}],435:[function(i,s,r){var n=i("../utils"),o=i("../common"),a=i("minimalistic-assert"),l=n.rotr64_hi,c=n.rotr64_lo,u=n.shr64_hi,d=n.shr64_lo,h=n.sum64,p=n.sum64_hi,f=n.sum64_lo,m=n.sum64_4_hi,g=n.sum64_4_lo,y=n.sum64_5_hi,v=n.sum64_5_lo,C=o.BlockHash,b=[1116352408,3609767458,1899447441,602891725,3049323471,3964484399,3921009573,2173295548,961987163,4081628472,1508970993,3053834265,2453635748,2937671579,2870763221,3664609560,3624381080,2734883394,310598401,1164996542,607225278,1323610764,1426881987,3590304994,1925078388,4068182383,2162078206,991336113,2614888103,633803317,3248222580,3479774868,3835390401,2666613458,4022224774,944711139,264347078,2341262773,604807628,2007800933,770255983,1495990901,1249150122,1856431235,1555081692,3175218132,1996064986,2198950837,2554220882,3999719339,2821834349,766784016,2952996808,2566594879,3210313671,3203337956,3336571891,1034457026,3584528711,2466948901,113926993,3758326383,338241895,168717936,666307205,1188179964,773529912,1546045734,1294757372,1522805485,1396182291,2643833823,1695183700,2343527390,1986661051,1014477480,2177026350,1206759142,2456956037,344077627,2730485921,1290863460,2820302411,3158454273,3259730800,3505952657,3345764771,106217008,3516065817,3606008344,3600352804,1432725776,4094571909,1467031594,275423344,851169720,430227734,3100823752,506948616,1363258195,659060556,3750685593,883997877,3785050280,958139571,3318307427,1322822218,3812723403,1537002063,2003034995,1747873779,3602036899,1955562222,1575990012,2024104815,1125592928,2227730452,2716904306,2361852424,442776044,2428436474,593698344,2756734187,3733110249,3204031479,2999351573,3329325298,3815920427,3391569614,3928383900,3515267271,566280711,3940187606,3454069534,4118630271,4000239992,116418474,1914138554,174292421,2731055270,289380356,3203993006,460393269,320620315,685471733,587496836,852142971,1086792851,1017036298,365543100,1126000580,2618297676,1288033470,3409855158,1501505948,4234509866,1607167915,987167468,1816402316,1246189591];function T(){if(!(this instanceof T))return new T;C.call(this),this.h=[1779033703,4089235720,3144134277,2227873595,1013904242,4271175723,2773480762,1595750129,1359893119,2917565137,2600822924,725511199,528734635,4215389547,1541459225,327033209],this.k=b,this.W=new Array(160)}function A(x,E,M,O,V){var Y=x&M^~x&V;return Y<0&&(Y+=4294967296),Y}function I(x,E,M,O,V,Y){var $=E&O^~E&Y;return $<0&&($+=4294967296),$}function D(x,E,M,O,V){var Y=x&M^x&V^M&V;return Y<0&&(Y+=4294967296),Y}function F(x,E,M,O,V,Y){var $=E&O^E&Y^O&Y;return $<0&&($+=4294967296),$}function B(x,E){var M=l(x,E,28)^l(E,x,2)^l(E,x,7);return M<0&&(M+=4294967296),M}function U(x,E){var M=c(x,E,28)^c(E,x,2)^c(E,x,7);return M<0&&(M+=4294967296),M}function H(x,E){var M=l(x,E,14)^l(x,E,18)^l(E,x,9);return M<0&&(M+=4294967296),M}function R(x,E){var M=c(x,E,14)^c(x,E,18)^c(E,x,9);return M<0&&(M+=4294967296),M}function L(x,E){var M=l(x,E,1)^l(x,E,8)^u(x,E,7);return M<0&&(M+=4294967296),M}function _(x,E){var M=c(x,E,1)^c(x,E,8)^d(x,E,7);return M<0&&(M+=4294967296),M}function w(x,E){var M=l(x,E,19)^l(E,x,29)^u(x,E,6);return M<0&&(M+=4294967296),M}function S(x,E){var M=c(x,E,19)^c(E,x,29)^d(x,E,6);return M<0&&(M+=4294967296),M}n.inherits(T,C),s.exports=T,T.blockSize=1024,T.outSize=512,T.hmacStrength=192,T.padLength=128,T.prototype._prepareBlock=function(x,E){for(var M=this.W,O=0;O<32;O++)M[O]=x[E+O];for(;O<M.length;O+=2){var V=w(M[O-4],M[O-3]),Y=S(M[O-4],M[O-3]),$=M[O-14],J=M[O-13],G=L(M[O-30],M[O-29]),Z=_(M[O-30],M[O-29]),N=M[O-32],P=M[O-31];M[O]=m(V,Y,$,J,G,Z,N,P),M[O+1]=g(V,Y,$,J,G,Z,N,P)}},T.prototype._update=function(x,E){this._prepareBlock(x,E);var M=this.W,O=this.h[0],V=this.h[1],Y=this.h[2],$=this.h[3],J=this.h[4],G=this.h[5],Z=this.h[6],N=this.h[7],P=this.h[8],j=this.h[9],X=this.h[10],ie=this.h[11],ee=this.h[12],re=this.h[13],oe=this.h[14],ue=this.h[15];a(this.k.length===M.length);for(var se=0;se<M.length;se+=2){var le=oe,ne=ue,fe=H(P,j),me=R(P,j),ge=A(P,j,X,ie,ee),ve=I(P,j,X,ie,ee,re),xe=this.k[se],De=this.k[se+1],ze=M[se],Ye=M[se+1],je=y(le,ne,fe,me,ge,ve,xe,De,ze,Ye),ht=v(le,ne,fe,me,ge,ve,xe,De,ze,Ye);le=B(O,V),ne=U(O,V),fe=D(O,V,Y,$,J),me=F(O,V,Y,$,J,G);var ut=p(le,ne,fe,me),dt=f(le,ne,fe,me);oe=ee,ue=re,ee=X,re=ie,X=P,ie=j,P=p(Z,N,je,ht),j=f(N,N,je,ht),Z=J,N=G,J=Y,G=$,Y=O,$=V,O=p(je,ht,ut,dt),V=f(je,ht,ut,dt)}h(this.h,0,O,V),h(this.h,2,Y,$),h(this.h,4,J,G),h(this.h,6,Z,N),h(this.h,8,P,j),h(this.h,10,X,ie),h(this.h,12,ee,re),h(this.h,14,oe,ue)},T.prototype._digest=function(x){return x==="hex"?n.toHex32(this.h,"big"):n.split32(this.h,"big")}},{"../common":427,"../utils":437,"minimalistic-assert":453}],436:[function(i,s,r){var n=i("../utils").rotr32;function o(c,u,d){return c&u^~c&d}function a(c,u,d){return c&u^c&d^u&d}function l(c,u,d){return c^u^d}r.ft_1=function(c,u,d,h){return c===0?o(u,d,h):c===1||c===3?l(u,d,h):c===2?a(u,d,h):void 0},r.ch32=o,r.maj32=a,r.p32=l,r.s0_256=function(c){return n(c,2)^n(c,13)^n(c,22)},r.s1_256=function(c){return n(c,6)^n(c,11)^n(c,25)},r.g0_256=function(c){return n(c,7)^n(c,18)^c>>>3},r.g1_256=function(c){return n(c,17)^n(c,19)^c>>>10}},{"../utils":437}],437:[function(i,s,r){var n=i("minimalistic-assert"),o=i("inherits");function a(d,h){return(64512&d.charCodeAt(h))==55296&&!(h<0||h+1>=d.length)&&(64512&d.charCodeAt(h+1))==56320}function l(d){return(d>>>24|d>>>8&65280|d<<8&16711680|(255&d)<<24)>>>0}function c(d){return d.length===1?"0"+d:d}function u(d){return d.length===7?"0"+d:d.length===6?"00"+d:d.length===5?"000"+d:d.length===4?"0000"+d:d.length===3?"00000"+d:d.length===2?"000000"+d:d.length===1?"0000000"+d:d}r.inherits=o,r.toArray=function(d,h){if(Array.isArray(d))return d.slice();if(!d)return[];var p=[];if(typeof d=="string")if(h){if(h==="hex")for((d=d.replace(/[^a-z0-9]+/gi,"")).length%2!=0&&(d="0"+d),m=0;m<d.length;m+=2)p.push(parseInt(d[m]+d[m+1],16))}else for(var f=0,m=0;m<d.length;m++){var g=d.charCodeAt(m);g<128?p[f++]=g:g<2048?(p[f++]=g>>6|192,p[f++]=63&g|128):a(d,m)?(g=65536+((1023&g)<<10)+(1023&d.charCodeAt(++m)),p[f++]=g>>18|240,p[f++]=g>>12&63|128,p[f++]=g>>6&63|128,p[f++]=63&g|128):(p[f++]=g>>12|224,p[f++]=g>>6&63|128,p[f++]=63&g|128)}else for(m=0;m<d.length;m++)p[m]=0|d[m];return p},r.toHex=function(d){for(var h="",p=0;p<d.length;p++)h+=c(d[p].toString(16));return h},r.htonl=l,r.toHex32=function(d,h){for(var p="",f=0;f<d.length;f++){var m=d[f];h==="little"&&(m=l(m)),p+=u(m.toString(16))}return p},r.zero2=c,r.zero8=u,r.join32=function(d,h,p,f){var m=p-h;n(m%4==0);for(var g=new Array(m/4),y=0,v=h;y<g.length;y++,v+=4){var C;C=f==="big"?d[v]<<24|d[v+1]<<16|d[v+2]<<8|d[v+3]:d[v+3]<<24|d[v+2]<<16|d[v+1]<<8|d[v],g[y]=C>>>0}return g},r.split32=function(d,h){for(var p=new Array(4*d.length),f=0,m=0;f<d.length;f++,m+=4){var g=d[f];h==="big"?(p[m]=g>>>24,p[m+1]=g>>>16&255,p[m+2]=g>>>8&255,p[m+3]=255&g):(p[m+3]=g>>>24,p[m+2]=g>>>16&255,p[m+1]=g>>>8&255,p[m]=255&g)}return p},r.rotr32=function(d,h){return d>>>h|d<<32-h},r.rotl32=function(d,h){return d<<h|d>>>32-h},r.sum32=function(d,h){return d+h>>>0},r.sum32_3=function(d,h,p){return d+h+p>>>0},r.sum32_4=function(d,h,p,f){return d+h+p+f>>>0},r.sum32_5=function(d,h,p,f,m){return d+h+p+f+m>>>0},r.sum64=function(d,h,p,f){var m=d[h],g=f+d[h+1]>>>0,y=(g<f?1:0)+p+m;d[h]=y>>>0,d[h+1]=g},r.sum64_hi=function(d,h,p,f){return(h+f>>>0<h?1:0)+d+p>>>0},r.sum64_lo=function(d,h,p,f){return h+f>>>0},r.sum64_4_hi=function(d,h,p,f,m,g,y,v){var C=0,b=h;return C+=(b=b+f>>>0)<h?1:0,C+=(b=b+g>>>0)<g?1:0,d+p+m+y+(C+=(b=b+v>>>0)<v?1:0)>>>0},r.sum64_4_lo=function(d,h,p,f,m,g,y,v){return h+f+g+v>>>0},r.sum64_5_hi=function(d,h,p,f,m,g,y,v,C,b){var T=0,A=h;return T+=(A=A+f>>>0)<h?1:0,T+=(A=A+g>>>0)<g?1:0,T+=(A=A+v>>>0)<v?1:0,d+p+m+y+C+(T+=(A=A+b>>>0)<b?1:0)>>>0},r.sum64_5_lo=function(d,h,p,f,m,g,y,v,C,b){return h+f+g+v+b>>>0},r.rotr64_hi=function(d,h,p){return(h<<32-p|d>>>p)>>>0},r.rotr64_lo=function(d,h,p){return(d<<32-p|h>>>p)>>>0},r.shr64_hi=function(d,h,p){return d>>>p},r.shr64_lo=function(d,h,p){return(d<<32-p|h>>>p)>>>0}},{inherits:440,"minimalistic-assert":453}],438:[function(i,s,r){var n=i("hash.js"),o=i("minimalistic-crypto-utils"),a=i("minimalistic-assert");function l(c){if(!(this instanceof l))return new l(c);this.hash=c.hash,this.predResist=!!c.predResist,this.outLen=this.hash.outSize,this.minEntropy=c.minEntropy||this.hash.hmacStrength,this._reseed=null,this.reseedInterval=null,this.K=null,this.V=null;var u=o.toArray(c.entropy,c.entropyEnc||"hex"),d=o.toArray(c.nonce,c.nonceEnc||"hex"),h=o.toArray(c.pers,c.persEnc||"hex");a(u.length>=this.minEntropy/8,"Not enough entropy. Minimum is: "+this.minEntropy+" bits"),this._init(u,d,h)}s.exports=l,l.prototype._init=function(c,u,d){var h=c.concat(u).concat(d);this.K=new Array(this.outLen/8),this.V=new Array(this.outLen/8);for(var p=0;p<this.V.length;p++)this.K[p]=0,this.V[p]=1;this._update(h),this._reseed=1,this.reseedInterval=281474976710656},l.prototype._hmac=function(){return new n.hmac(this.hash,this.K)},l.prototype._update=function(c){var u=this._hmac().update(this.V).update([0]);c&&(u=u.update(c)),this.K=u.digest(),this.V=this._hmac().update(this.V).digest(),c&&(this.K=this._hmac().update(this.V).update([1]).update(c).digest(),this.V=this._hmac().update(this.V).digest())},l.prototype.reseed=function(c,u,d,h){typeof u!="string"&&(h=d,d=u,u=null),c=o.toArray(c,u),d=o.toArray(d,h),a(c.length>=this.minEntropy/8,"Not enough entropy. Minimum is: "+this.minEntropy+" bits"),this._update(c.concat(d||[])),this._reseed=1},l.prototype.generate=function(c,u,d,h){if(this._reseed>this.reseedInterval)throw new Error("Reseed is required");typeof u!="string"&&(h=d,d=u,u=null),d&&(d=o.toArray(d,h||"hex"),this._update(d));for(var p=[];p.length<c;)this.V=this._hmac().update(this.V).digest(),p=p.concat(this.V);var f=p.slice(0,c);return this._update(d),this._reseed++,o.encode(f,u)}},{"hash.js":426,"minimalistic-assert":453,"minimalistic-crypto-utils":454}],439:[function(i,s,r){/*! ieee754. BSD-3-Clause License. Feross Aboukhadijeh <https://feross.org/opensource> */r.read=function(n,o,a,l,c){var u,d,h=8*c-l-1,p=(1<<h)-1,f=p>>1,m=-7,g=a?c-1:0,y=a?-1:1,v=n[o+g];for(g+=y,u=v&(1<<-m)-1,v>>=-m,m+=h;m>0;u=256*u+n[o+g],g+=y,m-=8);for(d=u&(1<<-m)-1,u>>=-m,m+=l;m>0;d=256*d+n[o+g],g+=y,m-=8);if(u===0)u=1-f;else{if(u===p)return d?NaN:1/0*(v?-1:1);d+=Math.pow(2,l),u-=f}return(v?-1:1)*d*Math.pow(2,u-l)},r.write=function(n,o,a,l,c,u){var d,h,p,f=8*u-c-1,m=(1<<f)-1,g=m>>1,y=c===23?Math.pow(2,-24)-Math.pow(2,-77):0,v=l?0:u-1,C=l?1:-1,b=o<0||o===0&&1/o<0?1:0;for(o=Math.abs(o),isNaN(o)||o===1/0?(h=isNaN(o)?1:0,d=m):(d=Math.floor(Math.log(o)/Math.LN2),o*(p=Math.pow(2,-d))<1&&(d--,p*=2),(o+=d+g>=1?y/p:y*Math.pow(2,1-g))*p>=2&&(d++,p/=2),d+g>=m?(h=0,d=m):d+g>=1?(h=(o*p-1)*Math.pow(2,c),d+=g):(h=o*Math.pow(2,g-1)*Math.pow(2,c),d=0));c>=8;n[a+v]=255&h,v+=C,h/=256,c-=8);for(d=d<<c|h,f+=c;f>0;n[a+v]=255&d,v+=C,d/=256,f-=8);n[a+v-C]|=128*b}},{}],440:[function(i,s,r){typeof Object.create=="function"?s.exports=function(n,o){o&&(n.super_=o,n.prototype=Object.create(o.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}}))}:s.exports=function(n,o){if(o){n.super_=o;var a=function(){};a.prototype=o.prototype,n.prototype=new a,n.prototype.constructor=n}}},{}],441:[function(i,s,r){(function(n,o,a,l,c,u,d,h){(function(){/*!

	JSZip v3.10.1 - A JavaScript class for generating and reading zip files
	<http://stuartk.com/jszip>

	(c) 2009-2016 Stuart Knightley <stuart [at] stuartk.com>
	Dual licenced under the MIT license or GPLv3. See https://raw.github.com/Stuk/jszip/main/LICENSE.markdown.

	JSZip uses the library pako released under the MIT license :
	https://github.com/nodeca/pako/blob/main/LICENSE
	*/(function(p){typeof r=="object"&&s!==void 0?s.exports=p():(typeof window<"u"?window:o!==void 0?o:typeof self<"u"?self:this).JSZip=p()})(function(){return function p(f,m,g){function y(b,T){if(!m[b]){if(!f[b]){var A=typeof i=="function"&&i;if(!T&&A)return A(b,!0);if(v)return v(b,!0);var I=new Error("Cannot find module '"+b+"'");throw I.code="MODULE_NOT_FOUND",I}var D=m[b]={exports:{}};f[b][0].call(D.exports,function(F){return y(f[b][1][F]||F)},D,D.exports,p,f,m,g)}return m[b].exports}for(var v=typeof i=="function"&&i,C=0;C<g.length;C++)y(g[C]);return y}({1:[function(p,f,m){var g=p("./utils"),y=p("./support"),v="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";m.encode=function(C){for(var b,T,A,I,D,F,B,U=[],H=0,R=C.length,L=R,_=g.getTypeOf(C)!=="string";H<C.length;)L=R-H,A=_?(b=C[H++],T=H<R?C[H++]:0,H<R?C[H++]:0):(b=C.charCodeAt(H++),T=H<R?C.charCodeAt(H++):0,H<R?C.charCodeAt(H++):0),I=b>>2,D=(3&b)<<4|T>>4,F=1<L?(15&T)<<2|A>>6:64,B=2<L?63&A:64,U.push(v.charAt(I)+v.charAt(D)+v.charAt(F)+v.charAt(B));return U.join("")},m.decode=function(C){var b,T,A,I,D,F,B=0,U=0,H="data:";if(C.substr(0,H.length)===H)throw new Error("Invalid base64 input, it looks like a data url.");var R,L=3*(C=C.replace(/[^A-Za-z0-9+/=]/g,"")).length/4;if(C.charAt(C.length-1)===v.charAt(64)&&L--,C.charAt(C.length-2)===v.charAt(64)&&L--,L%1!=0)throw new Error("Invalid base64 input, bad content length.");for(R=y.uint8array?new Uint8Array(0|L):new Array(0|L);B<C.length;)b=v.indexOf(C.charAt(B++))<<2|(I=v.indexOf(C.charAt(B++)))>>4,T=(15&I)<<4|(D=v.indexOf(C.charAt(B++)))>>2,A=(3&D)<<6|(F=v.indexOf(C.charAt(B++))),R[U++]=b,D!==64&&(R[U++]=T),F!==64&&(R[U++]=A);return R}},{"./support":30,"./utils":32}],2:[function(p,f,m){var g=p("./external"),y=p("./stream/DataWorker"),v=p("./stream/Crc32Probe"),C=p("./stream/DataLengthProbe");function b(T,A,I,D,F){this.compressedSize=T,this.uncompressedSize=A,this.crc32=I,this.compression=D,this.compressedContent=F}b.prototype={getContentWorker:function(){var T=new y(g.Promise.resolve(this.compressedContent)).pipe(this.compression.uncompressWorker()).pipe(new C("data_length")),A=this;return T.on("end",function(){if(this.streamInfo.data_length!==A.uncompressedSize)throw new Error("Bug : uncompressed data size mismatch")}),T},getCompressedWorker:function(){return new y(g.Promise.resolve(this.compressedContent)).withStreamInfo("compressedSize",this.compressedSize).withStreamInfo("uncompressedSize",this.uncompressedSize).withStreamInfo("crc32",this.crc32).withStreamInfo("compression",this.compression)}},b.createWorkerFrom=function(T,A,I){return T.pipe(new v).pipe(new C("uncompressedSize")).pipe(A.compressWorker(I)).pipe(new C("compressedSize")).withStreamInfo("compression",A)},f.exports=b},{"./external":6,"./stream/Crc32Probe":25,"./stream/DataLengthProbe":26,"./stream/DataWorker":27}],3:[function(p,f,m){var g=p("./stream/GenericWorker");m.STORE={magic:"\0\0",compressWorker:function(){return new g("STORE compression")},uncompressWorker:function(){return new g("STORE decompression")}},m.DEFLATE=p("./flate")},{"./flate":7,"./stream/GenericWorker":28}],4:[function(p,f,m){var g=p("./utils"),y=function(){for(var v,C=[],b=0;b<256;b++){v=b;for(var T=0;T<8;T++)v=1&v?3988292384^v>>>1:v>>>1;C[b]=v}return C}();f.exports=function(v,C){return v!==void 0&&v.length?g.getTypeOf(v)!=="string"?function(b,T,A,I){var D=y,F=0+A;b^=-1;for(var B=0;B<F;B++)b=b>>>8^D[255&(b^T[B])];return-1^b}(0|C,v,v.length):function(b,T,A,I){var D=y,F=0+A;b^=-1;for(var B=0;B<F;B++)b=b>>>8^D[255&(b^T.charCodeAt(B))];return-1^b}(0|C,v,v.length):0}},{"./utils":32}],5:[function(p,f,m){m.base64=!1,m.binary=!1,m.dir=!1,m.createFolders=!0,m.date=null,m.compression=null,m.compressionOptions=null,m.comment=null,m.unixPermissions=null,m.dosPermissions=null},{}],6:[function(p,f,m){var g;g=typeof Promise<"u"?Promise:p("lie"),f.exports={Promise:g}},{lie:37}],7:[function(p,f,m){var g=typeof Uint8Array<"u"&&typeof Uint16Array<"u"&&typeof Uint32Array<"u",y=p("pako"),v=p("./utils"),C=p("./stream/GenericWorker"),b=g?"uint8array":"array";function T(A,I){C.call(this,"FlateWorker/"+A),this._pako=null,this._pakoAction=A,this._pakoOptions=I,this.meta={}}m.magic="\b\0",v.inherits(T,C),T.prototype.processChunk=function(A){this.meta=A.meta,this._pako===null&&this._createPako(),this._pako.push(v.transformTo(b,A.data),!1)},T.prototype.flush=function(){C.prototype.flush.call(this),this._pako===null&&this._createPako(),this._pako.push([],!0)},T.prototype.cleanUp=function(){C.prototype.cleanUp.call(this),this._pako=null},T.prototype._createPako=function(){this._pako=new y[this._pakoAction]({raw:!0,level:this._pakoOptions.level||-1});var A=this;this._pako.onData=function(I){A.push({data:I,meta:A.meta})}},m.compressWorker=function(A){return new T("Deflate",A)},m.uncompressWorker=function(){return new T("Inflate",{})}},{"./stream/GenericWorker":28,"./utils":32,pako:38}],8:[function(p,f,m){function g(D,F){var B,U="";for(B=0;B<F;B++)U+=String.fromCharCode(255&D),D>>>=8;return U}function y(D,F,B,U,H,R){var L,_,w=D.file,S=D.compression,x=R!==b.utf8encode,E=v.transformTo("string",R(w.name)),M=v.transformTo("string",b.utf8encode(w.name)),O=w.comment,V=v.transformTo("string",R(O)),Y=v.transformTo("string",b.utf8encode(O)),$=M.length!==w.name.length,J=Y.length!==O.length,G="",Z="",N="",P=w.dir,j=w.date,X={crc32:0,compressedSize:0,uncompressedSize:0};F&&!B||(X.crc32=D.crc32,X.compressedSize=D.compressedSize,X.uncompressedSize=D.uncompressedSize);var ie=0;F&&(ie|=8),x||!$&&!J||(ie|=2048);var ee=0,re=0;P&&(ee|=16),H==="UNIX"?(re=798,ee|=function(ue,se){var le=ue;return ue||(le=se?16893:33204),(65535&le)<<16}(w.unixPermissions,P)):(re=20,ee|=function(ue){return 63&(ue||0)}(w.dosPermissions)),L=j.getUTCHours(),L<<=6,L|=j.getUTCMinutes(),L<<=5,L|=j.getUTCSeconds()/2,_=j.getUTCFullYear()-1980,_<<=4,_|=j.getUTCMonth()+1,_<<=5,_|=j.getUTCDate(),$&&(Z=g(1,1)+g(T(E),4)+M,G+="up"+g(Z.length,2)+Z),J&&(N=g(1,1)+g(T(V),4)+Y,G+="uc"+g(N.length,2)+N);var oe="";return oe+=`
\0`,oe+=g(ie,2),oe+=S.magic,oe+=g(L,2),oe+=g(_,2),oe+=g(X.crc32,4),oe+=g(X.compressedSize,4),oe+=g(X.uncompressedSize,4),oe+=g(E.length,2),oe+=g(G.length,2),{fileRecord:A.LOCAL_FILE_HEADER+oe+E+G,dirRecord:A.CENTRAL_FILE_HEADER+g(re,2)+oe+g(V.length,2)+"\0\0\0\0"+g(ee,4)+g(U,4)+E+G+V}}var v=p("../utils"),C=p("../stream/GenericWorker"),b=p("../utf8"),T=p("../crc32"),A=p("../signature");function I(D,F,B,U){C.call(this,"ZipFileWorker"),this.bytesWritten=0,this.zipComment=F,this.zipPlatform=B,this.encodeFileName=U,this.streamFiles=D,this.accumulate=!1,this.contentBuffer=[],this.dirRecords=[],this.currentSourceOffset=0,this.entriesCount=0,this.currentFile=null,this._sources=[]}v.inherits(I,C),I.prototype.push=function(D){var F=D.meta.percent||0,B=this.entriesCount,U=this._sources.length;this.accumulate?this.contentBuffer.push(D):(this.bytesWritten+=D.data.length,C.prototype.push.call(this,{data:D.data,meta:{currentFile:this.currentFile,percent:B?(F+100*(B-U-1))/B:100}}))},I.prototype.openedSource=function(D){this.currentSourceOffset=this.bytesWritten,this.currentFile=D.file.name;var F=this.streamFiles&&!D.file.dir;if(F){var B=y(D,F,!1,this.currentSourceOffset,this.zipPlatform,this.encodeFileName);this.push({data:B.fileRecord,meta:{percent:0}})}else this.accumulate=!0},I.prototype.closedSource=function(D){this.accumulate=!1;var F=this.streamFiles&&!D.file.dir,B=y(D,F,!0,this.currentSourceOffset,this.zipPlatform,this.encodeFileName);if(this.dirRecords.push(B.dirRecord),F)this.push({data:function(U){return A.DATA_DESCRIPTOR+g(U.crc32,4)+g(U.compressedSize,4)+g(U.uncompressedSize,4)}(D),meta:{percent:100}});else for(this.push({data:B.fileRecord,meta:{percent:0}});this.contentBuffer.length;)this.push(this.contentBuffer.shift());this.currentFile=null},I.prototype.flush=function(){for(var D=this.bytesWritten,F=0;F<this.dirRecords.length;F++)this.push({data:this.dirRecords[F],meta:{percent:100}});var B=this.bytesWritten-D,U=function(H,R,L,_,w){var S=v.transformTo("string",w(_));return A.CENTRAL_DIRECTORY_END+"\0\0\0\0"+g(H,2)+g(H,2)+g(R,4)+g(L,4)+g(S.length,2)+S}(this.dirRecords.length,B,D,this.zipComment,this.encodeFileName);this.push({data:U,meta:{percent:100}})},I.prototype.prepareNextSource=function(){this.previous=this._sources.shift(),this.openedSource(this.previous.streamInfo),this.isPaused?this.previous.pause():this.previous.resume()},I.prototype.registerPrevious=function(D){this._sources.push(D);var F=this;return D.on("data",function(B){F.processChunk(B)}),D.on("end",function(){F.closedSource(F.previous.streamInfo),F._sources.length?F.prepareNextSource():F.end()}),D.on("error",function(B){F.error(B)}),this},I.prototype.resume=function(){return!!C.prototype.resume.call(this)&&(!this.previous&&this._sources.length?(this.prepareNextSource(),!0):this.previous||this._sources.length||this.generatedError?void 0:(this.end(),!0))},I.prototype.error=function(D){var F=this._sources;if(!C.prototype.error.call(this,D))return!1;for(var B=0;B<F.length;B++)try{F[B].error(D)}catch{}return!0},I.prototype.lock=function(){C.prototype.lock.call(this);for(var D=this._sources,F=0;F<D.length;F++)D[F].lock()},f.exports=I},{"../crc32":4,"../signature":23,"../stream/GenericWorker":28,"../utf8":31,"../utils":32}],9:[function(p,f,m){var g=p("../compressions"),y=p("./ZipFileWorker");m.generateWorker=function(v,C,b){var T=new y(C.streamFiles,b,C.platform,C.encodeFileName),A=0;try{v.forEach(function(I,D){A++;var F=function(R,L){var _=R||L,w=g[_];if(!w)throw new Error(_+" is not a valid compression method !");return w}(D.options.compression,C.compression),B=D.options.compressionOptions||C.compressionOptions||{},U=D.dir,H=D.date;D._compressWorker(F,B).withStreamInfo("file",{name:I,dir:U,date:H,comment:D.comment||"",unixPermissions:D.unixPermissions,dosPermissions:D.dosPermissions}).pipe(T)}),T.entriesCount=A}catch(I){T.error(I)}return T}},{"../compressions":3,"./ZipFileWorker":8}],10:[function(p,f,m){function g(){if(!(this instanceof g))return new g;if(arguments.length)throw new Error("The constructor with parameters has been removed in JSZip 3.0, please check the upgrade guide.");this.files=Object.create(null),this.comment=null,this.root="",this.clone=function(){var y=new g;for(var v in this)typeof this[v]!="function"&&(y[v]=this[v]);return y}}(g.prototype=p("./object")).loadAsync=p("./load"),g.support=p("./support"),g.defaults=p("./defaults"),g.version="3.10.1",g.loadAsync=function(y,v){return new g().loadAsync(y,v)},g.external=p("./external"),f.exports=g},{"./defaults":5,"./external":6,"./load":11,"./object":15,"./support":30}],11:[function(p,f,m){var g=p("./utils"),y=p("./external"),v=p("./utf8"),C=p("./zipEntries"),b=p("./stream/Crc32Probe"),T=p("./nodejsUtils");function A(I){return new y.Promise(function(D,F){var B=I.decompressed.getContentWorker().pipe(new b);B.on("error",function(U){F(U)}).on("end",function(){B.streamInfo.crc32!==I.decompressed.crc32?F(new Error("Corrupted zip : CRC32 mismatch")):D()}).resume()})}f.exports=function(I,D){var F=this;return D=g.extend(D||{},{base64:!1,checkCRC32:!1,optimizedBinaryString:!1,createFolders:!1,decodeFileName:v.utf8decode}),T.isNode&&T.isStream(I)?y.Promise.reject(new Error("JSZip can't accept a stream when loading a zip file.")):g.prepareContent("the loaded zip file",I,!0,D.optimizedBinaryString,D.base64).then(function(B){var U=new C(D);return U.load(B),U}).then(function(B){var U=[y.Promise.resolve(B)],H=B.files;if(D.checkCRC32)for(var R=0;R<H.length;R++)U.push(A(H[R]));return y.Promise.all(U)}).then(function(B){for(var U=B.shift(),H=U.files,R=0;R<H.length;R++){var L=H[R],_=L.fileNameStr,w=g.resolve(L.fileNameStr);F.file(w,L.decompressed,{binary:!0,optimizedBinaryString:!0,date:L.date,dir:L.dir,comment:L.fileCommentStr.length?L.fileCommentStr:null,unixPermissions:L.unixPermissions,dosPermissions:L.dosPermissions,createFolders:D.createFolders}),L.dir||(F.file(w).unsafeOriginalName=_)}return U.zipComment.length&&(F.comment=U.zipComment),F})}},{"./external":6,"./nodejsUtils":14,"./stream/Crc32Probe":25,"./utf8":31,"./utils":32,"./zipEntries":33}],12:[function(p,f,m){var g=p("../utils"),y=p("../stream/GenericWorker");function v(C,b){y.call(this,"Nodejs stream input adapter for "+C),this._upstreamEnded=!1,this._bindStream(b)}g.inherits(v,y),v.prototype._bindStream=function(C){var b=this;(this._stream=C).pause(),C.on("data",function(T){b.push({data:T,meta:{percent:0}})}).on("error",function(T){b.isPaused?this.generatedError=T:b.error(T)}).on("end",function(){b.isPaused?b._upstreamEnded=!0:b.end()})},v.prototype.pause=function(){return!!y.prototype.pause.call(this)&&(this._stream.pause(),!0)},v.prototype.resume=function(){return!!y.prototype.resume.call(this)&&(this._upstreamEnded?this.end():this._stream.resume(),!0)},f.exports=v},{"../stream/GenericWorker":28,"../utils":32}],13:[function(p,f,m){var g=p("readable-stream").Readable;function y(v,C,b){g.call(this,C),this._helper=v;var T=this;v.on("data",function(A,I){T.push(A)||T._helper.pause(),b&&b(I)}).on("error",function(A){T.emit("error",A)}).on("end",function(){T.push(null)})}p("../utils").inherits(y,g),y.prototype._read=function(){this._helper.resume()},f.exports=y},{"../utils":32,"readable-stream":16}],14:[function(p,f,m){f.exports={isNode:a!==void 0,newBufferFrom:function(g,y){if(a.from&&a.from!==Uint8Array.from)return a.from(g,y);if(typeof g=="number")throw new Error('The "data" argument must not be a number');return new a(g,y)},allocBuffer:function(g){if(a.alloc)return a.alloc(g);var y=new a(g);return y.fill(0),y},isBuffer:function(g){return a.isBuffer(g)},isStream:function(g){return g&&typeof g.on=="function"&&typeof g.pause=="function"&&typeof g.resume=="function"}}},{}],15:[function(p,f,m){function g(w,S,x){var E,M=v.getTypeOf(S),O=v.extend(x||{},T);O.date=O.date||new Date,O.compression!==null&&(O.compression=O.compression.toUpperCase()),typeof O.unixPermissions=="string"&&(O.unixPermissions=parseInt(O.unixPermissions,8)),O.unixPermissions&&16384&O.unixPermissions&&(O.dir=!0),O.dosPermissions&&16&O.dosPermissions&&(O.dir=!0),O.dir&&(w=H(w)),O.createFolders&&(E=U(w))&&R.call(this,E,!0);var V=M==="string"&&O.binary===!1&&O.base64===!1;x&&x.binary!==void 0||(O.binary=!V),(S instanceof A&&S.uncompressedSize===0||O.dir||!S||S.length===0)&&(O.base64=!1,O.binary=!0,S="",O.compression="STORE",M="string");var Y;Y=S instanceof A||S instanceof C?S:F.isNode&&F.isStream(S)?new B(w,S):v.prepareContent(w,S,O.binary,O.optimizedBinaryString,O.base64);var $=new I(w,Y,O);this.files[w]=$}var y=p("./utf8"),v=p("./utils"),C=p("./stream/GenericWorker"),b=p("./stream/StreamHelper"),T=p("./defaults"),A=p("./compressedObject"),I=p("./zipObject"),D=p("./generate"),F=p("./nodejsUtils"),B=p("./nodejs/NodejsStreamInputAdapter"),U=function(w){w.slice(-1)==="/"&&(w=w.substring(0,w.length-1));var S=w.lastIndexOf("/");return 0<S?w.substring(0,S):""},H=function(w){return w.slice(-1)!=="/"&&(w+="/"),w},R=function(w,S){return S=S!==void 0?S:T.createFolders,w=H(w),this.files[w]||g.call(this,w,null,{dir:!0,createFolders:S}),this.files[w]};function L(w){return Object.prototype.toString.call(w)==="[object RegExp]"}var _={load:function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},forEach:function(w){var S,x,E;for(S in this.files)E=this.files[S],(x=S.slice(this.root.length,S.length))&&S.slice(0,this.root.length)===this.root&&w(x,E)},filter:function(w){var S=[];return this.forEach(function(x,E){w(x,E)&&S.push(E)}),S},file:function(w,S,x){if(arguments.length!==1)return w=this.root+w,g.call(this,w,S,x),this;if(L(w)){var E=w;return this.filter(function(O,V){return!V.dir&&E.test(O)})}var M=this.files[this.root+w];return M&&!M.dir?M:null},folder:function(w){if(!w)return this;if(L(w))return this.filter(function(M,O){return O.dir&&w.test(M)});var S=this.root+w,x=R.call(this,S),E=this.clone();return E.root=x.name,E},remove:function(w){w=this.root+w;var S=this.files[w];if(S||(w.slice(-1)!=="/"&&(w+="/"),S=this.files[w]),S&&!S.dir)delete this.files[w];else for(var x=this.filter(function(M,O){return O.name.slice(0,w.length)===w}),E=0;E<x.length;E++)delete this.files[x[E].name];return this},generate:function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},generateInternalStream:function(w){var S,x={};try{if((x=v.extend(w||{},{streamFiles:!1,compression:"STORE",compressionOptions:null,type:"",platform:"DOS",comment:null,mimeType:"application/zip",encodeFileName:y.utf8encode})).type=x.type.toLowerCase(),x.compression=x.compression.toUpperCase(),x.type==="binarystring"&&(x.type="string"),!x.type)throw new Error("No output type specified.");v.checkSupport(x.type),x.platform!=="darwin"&&x.platform!=="freebsd"&&x.platform!=="linux"&&x.platform!=="sunos"||(x.platform="UNIX"),x.platform==="win32"&&(x.platform="DOS");var E=x.comment||this.comment||"";S=D.generateWorker(this,x,E)}catch(M){(S=new C("error")).error(M)}return new b(S,x.type||"string",x.mimeType)},generateAsync:function(w,S){return this.generateInternalStream(w).accumulate(S)},generateNodeStream:function(w,S){return(w=w||{}).type||(w.type="nodebuffer"),this.generateInternalStream(w).toNodejsStream(S)}};f.exports=_},{"./compressedObject":2,"./defaults":5,"./generate":9,"./nodejs/NodejsStreamInputAdapter":12,"./nodejsUtils":14,"./stream/GenericWorker":28,"./stream/StreamHelper":29,"./utf8":31,"./utils":32,"./zipObject":35}],16:[function(p,f,m){f.exports=p("stream")},{stream:void 0}],17:[function(p,f,m){var g=p("./DataReader");function y(v){g.call(this,v);for(var C=0;C<this.data.length;C++)v[C]=255&v[C]}p("../utils").inherits(y,g),y.prototype.byteAt=function(v){return this.data[this.zero+v]},y.prototype.lastIndexOfSignature=function(v){for(var C=v.charCodeAt(0),b=v.charCodeAt(1),T=v.charCodeAt(2),A=v.charCodeAt(3),I=this.length-4;0<=I;--I)if(this.data[I]===C&&this.data[I+1]===b&&this.data[I+2]===T&&this.data[I+3]===A)return I-this.zero;return-1},y.prototype.readAndCheckSignature=function(v){var C=v.charCodeAt(0),b=v.charCodeAt(1),T=v.charCodeAt(2),A=v.charCodeAt(3),I=this.readData(4);return C===I[0]&&b===I[1]&&T===I[2]&&A===I[3]},y.prototype.readData=function(v){if(this.checkOffset(v),v===0)return[];var C=this.data.slice(this.zero+this.index,this.zero+this.index+v);return this.index+=v,C},f.exports=y},{"../utils":32,"./DataReader":18}],18:[function(p,f,m){var g=p("../utils");function y(v){this.data=v,this.length=v.length,this.index=0,this.zero=0}y.prototype={checkOffset:function(v){this.checkIndex(this.index+v)},checkIndex:function(v){if(this.length<this.zero+v||v<0)throw new Error("End of data reached (data length = "+this.length+", asked index = "+v+"). Corrupted zip ?")},setIndex:function(v){this.checkIndex(v),this.index=v},skip:function(v){this.setIndex(this.index+v)},byteAt:function(){},readInt:function(v){var C,b=0;for(this.checkOffset(v),C=this.index+v-1;C>=this.index;C--)b=(b<<8)+this.byteAt(C);return this.index+=v,b},readString:function(v){return g.transformTo("string",this.readData(v))},readData:function(){},lastIndexOfSignature:function(){},readAndCheckSignature:function(){},readDate:function(){var v=this.readInt(4);return new Date(Date.UTC(1980+(v>>25&127),(v>>21&15)-1,v>>16&31,v>>11&31,v>>5&63,(31&v)<<1))}},f.exports=y},{"../utils":32}],19:[function(p,f,m){var g=p("./Uint8ArrayReader");function y(v){g.call(this,v)}p("../utils").inherits(y,g),y.prototype.readData=function(v){this.checkOffset(v);var C=this.data.slice(this.zero+this.index,this.zero+this.index+v);return this.index+=v,C},f.exports=y},{"../utils":32,"./Uint8ArrayReader":21}],20:[function(p,f,m){var g=p("./DataReader");function y(v){g.call(this,v)}p("../utils").inherits(y,g),y.prototype.byteAt=function(v){return this.data.charCodeAt(this.zero+v)},y.prototype.lastIndexOfSignature=function(v){return this.data.lastIndexOf(v)-this.zero},y.prototype.readAndCheckSignature=function(v){return v===this.readData(4)},y.prototype.readData=function(v){this.checkOffset(v);var C=this.data.slice(this.zero+this.index,this.zero+this.index+v);return this.index+=v,C},f.exports=y},{"../utils":32,"./DataReader":18}],21:[function(p,f,m){var g=p("./ArrayReader");function y(v){g.call(this,v)}p("../utils").inherits(y,g),y.prototype.readData=function(v){if(this.checkOffset(v),v===0)return new Uint8Array(0);var C=this.data.subarray(this.zero+this.index,this.zero+this.index+v);return this.index+=v,C},f.exports=y},{"../utils":32,"./ArrayReader":17}],22:[function(p,f,m){var g=p("../utils"),y=p("../support"),v=p("./ArrayReader"),C=p("./StringReader"),b=p("./NodeBufferReader"),T=p("./Uint8ArrayReader");f.exports=function(A){var I=g.getTypeOf(A);return g.checkSupport(I),I!=="string"||y.uint8array?I==="nodebuffer"?new b(A):y.uint8array?new T(g.transformTo("uint8array",A)):new v(g.transformTo("array",A)):new C(A)}},{"../support":30,"../utils":32,"./ArrayReader":17,"./NodeBufferReader":19,"./StringReader":20,"./Uint8ArrayReader":21}],23:[function(p,f,m){m.LOCAL_FILE_HEADER="PK",m.CENTRAL_FILE_HEADER="PK",m.CENTRAL_DIRECTORY_END="PK",m.ZIP64_CENTRAL_DIRECTORY_LOCATOR="PK\x07",m.ZIP64_CENTRAL_DIRECTORY_END="PK",m.DATA_DESCRIPTOR="PK\x07\b"},{}],24:[function(p,f,m){var g=p("./GenericWorker"),y=p("../utils");function v(C){g.call(this,"ConvertWorker to "+C),this.destType=C}y.inherits(v,g),v.prototype.processChunk=function(C){this.push({data:y.transformTo(this.destType,C.data),meta:C.meta})},f.exports=v},{"../utils":32,"./GenericWorker":28}],25:[function(p,f,m){var g=p("./GenericWorker"),y=p("../crc32");function v(){g.call(this,"Crc32Probe"),this.withStreamInfo("crc32",0)}p("../utils").inherits(v,g),v.prototype.processChunk=function(C){this.streamInfo.crc32=y(C.data,this.streamInfo.crc32||0),this.push(C)},f.exports=v},{"../crc32":4,"../utils":32,"./GenericWorker":28}],26:[function(p,f,m){var g=p("../utils"),y=p("./GenericWorker");function v(C){y.call(this,"DataLengthProbe for "+C),this.propName=C,this.withStreamInfo(C,0)}g.inherits(v,y),v.prototype.processChunk=function(C){if(C){var b=this.streamInfo[this.propName]||0;this.streamInfo[this.propName]=b+C.data.length}y.prototype.processChunk.call(this,C)},f.exports=v},{"../utils":32,"./GenericWorker":28}],27:[function(p,f,m){var g=p("../utils"),y=p("./GenericWorker");function v(C){y.call(this,"DataWorker");var b=this;this.dataIsReady=!1,this.index=0,this.max=0,this.data=null,this.type="",this._tickScheduled=!1,C.then(function(T){b.dataIsReady=!0,b.data=T,b.max=T&&T.length||0,b.type=g.getTypeOf(T),b.isPaused||b._tickAndRepeat()},function(T){b.error(T)})}g.inherits(v,y),v.prototype.cleanUp=function(){y.prototype.cleanUp.call(this),this.data=null},v.prototype.resume=function(){return!!y.prototype.resume.call(this)&&(!this._tickScheduled&&this.dataIsReady&&(this._tickScheduled=!0,g.delay(this._tickAndRepeat,[],this)),!0)},v.prototype._tickAndRepeat=function(){this._tickScheduled=!1,this.isPaused||this.isFinished||(this._tick(),this.isFinished||(g.delay(this._tickAndRepeat,[],this),this._tickScheduled=!0))},v.prototype._tick=function(){if(this.isPaused||this.isFinished)return!1;var C=null,b=Math.min(this.max,this.index+16384);if(this.index>=this.max)return this.end();switch(this.type){case"string":C=this.data.substring(this.index,b);break;case"uint8array":C=this.data.subarray(this.index,b);break;case"array":case"nodebuffer":C=this.data.slice(this.index,b)}return this.index=b,this.push({data:C,meta:{percent:this.max?this.index/this.max*100:0}})},f.exports=v},{"../utils":32,"./GenericWorker":28}],28:[function(p,f,m){function g(y){this.name=y||"default",this.streamInfo={},this.generatedError=null,this.extraStreamInfo={},this.isPaused=!0,this.isFinished=!1,this.isLocked=!1,this._listeners={data:[],end:[],error:[]},this.previous=null}g.prototype={push:function(y){this.emit("data",y)},end:function(){if(this.isFinished)return!1;this.flush();try{this.emit("end"),this.cleanUp(),this.isFinished=!0}catch(y){this.emit("error",y)}return!0},error:function(y){return!this.isFinished&&(this.isPaused?this.generatedError=y:(this.isFinished=!0,this.emit("error",y),this.previous&&this.previous.error(y),this.cleanUp()),!0)},on:function(y,v){return this._listeners[y].push(v),this},cleanUp:function(){this.streamInfo=this.generatedError=this.extraStreamInfo=null,this._listeners=[]},emit:function(y,v){if(this._listeners[y])for(var C=0;C<this._listeners[y].length;C++)this._listeners[y][C].call(this,v)},pipe:function(y){return y.registerPrevious(this)},registerPrevious:function(y){if(this.isLocked)throw new Error("The stream '"+this+"' has already been used.");this.streamInfo=y.streamInfo,this.mergeStreamInfo(),this.previous=y;var v=this;return y.on("data",function(C){v.processChunk(C)}),y.on("end",function(){v.end()}),y.on("error",function(C){v.error(C)}),this},pause:function(){return!this.isPaused&&!this.isFinished&&(this.isPaused=!0,this.previous&&this.previous.pause(),!0)},resume:function(){if(!this.isPaused||this.isFinished)return!1;var y=this.isPaused=!1;return this.generatedError&&(this.error(this.generatedError),y=!0),this.previous&&this.previous.resume(),!y},flush:function(){},processChunk:function(y){this.push(y)},withStreamInfo:function(y,v){return this.extraStreamInfo[y]=v,this.mergeStreamInfo(),this},mergeStreamInfo:function(){for(var y in this.extraStreamInfo)Object.prototype.hasOwnProperty.call(this.extraStreamInfo,y)&&(this.streamInfo[y]=this.extraStreamInfo[y])},lock:function(){if(this.isLocked)throw new Error("The stream '"+this+"' has already been used.");this.isLocked=!0,this.previous&&this.previous.lock()},toString:function(){var y="Worker "+this.name;return this.previous?this.previous+" -> "+y:y}},f.exports=g},{}],29:[function(p,f,m){var g=p("../utils"),y=p("./ConvertWorker"),v=p("./GenericWorker"),C=p("../base64"),b=p("../support"),T=p("../external"),A=null;if(b.nodestream)try{A=p("../nodejs/NodejsStreamOutputAdapter")}catch{}function I(D,F,B){var U=F;switch(F){case"blob":case"arraybuffer":U="uint8array";break;case"base64":U="string"}try{this._internalType=U,this._outputType=F,this._mimeType=B,g.checkSupport(U),this._worker=D.pipe(new y(U)),D.lock()}catch(H){this._worker=new v("error"),this._worker.error(H)}}I.prototype={accumulate:function(D){return function(F,B){return new T.Promise(function(U,H){var R=[],L=F._internalType,_=F._outputType,w=F._mimeType;F.on("data",function(S,x){R.push(S),B&&B(x)}).on("error",function(S){R=[],H(S)}).on("end",function(){try{var S=function(x,E,M){switch(x){case"blob":return g.newBlob(g.transformTo("arraybuffer",E),M);case"base64":return C.encode(E);default:return g.transformTo(x,E)}}(_,function(x,E){var M,O=0,V=null,Y=0;for(M=0;M<E.length;M++)Y+=E[M].length;switch(x){case"string":return E.join("");case"array":return Array.prototype.concat.apply([],E);case"uint8array":for(V=new Uint8Array(Y),M=0;M<E.length;M++)V.set(E[M],O),O+=E[M].length;return V;case"nodebuffer":return a.concat(E);default:throw new Error("concat : unsupported type '"+x+"'")}}(L,R),w);U(S)}catch(x){H(x)}R=[]}).resume()})}(this,D)},on:function(D,F){var B=this;return D==="data"?this._worker.on(D,function(U){F.call(B,U.data,U.meta)}):this._worker.on(D,function(){g.delay(F,arguments,B)}),this},resume:function(){return g.delay(this._worker.resume,[],this._worker),this},pause:function(){return this._worker.pause(),this},toNodejsStream:function(D){if(g.checkSupport("nodestream"),this._outputType!=="nodebuffer")throw new Error(this._outputType+" is not supported by this method");return new A(this,{objectMode:this._outputType!=="nodebuffer"},D)}},f.exports=I},{"../base64":1,"../external":6,"../nodejs/NodejsStreamOutputAdapter":13,"../support":30,"../utils":32,"./ConvertWorker":24,"./GenericWorker":28}],30:[function(p,f,m){if(m.base64=!0,m.array=!0,m.string=!0,m.arraybuffer=typeof ArrayBuffer<"u"&&typeof Uint8Array<"u",m.nodebuffer=a!==void 0,m.uint8array=typeof Uint8Array<"u",typeof ArrayBuffer>"u")m.blob=!1;else{var g=new ArrayBuffer(0);try{m.blob=new Blob([g],{type:"application/zip"}).size===0}catch{try{var y=new(self.BlobBuilder||self.WebKitBlobBuilder||self.MozBlobBuilder||self.MSBlobBuilder);y.append(g),m.blob=y.getBlob("application/zip").size===0}catch{m.blob=!1}}}try{m.nodestream=!!p("readable-stream").Readable}catch{m.nodestream=!1}},{"readable-stream":16}],31:[function(p,f,m){for(var g=p("./utils"),y=p("./support"),v=p("./nodejsUtils"),C=p("./stream/GenericWorker"),b=new Array(256),T=0;T<256;T++)b[T]=252<=T?6:248<=T?5:240<=T?4:224<=T?3:192<=T?2:1;function A(){C.call(this,"utf-8 decode"),this.leftOver=null}function I(){C.call(this,"utf-8 encode")}b[254]=b[254]=1,m.utf8encode=function(D){return y.nodebuffer?v.newBufferFrom(D,"utf-8"):function(F){var B,U,H,R,L,_=F.length,w=0;for(R=0;R<_;R++)(64512&(U=F.charCodeAt(R)))==55296&&R+1<_&&(64512&(H=F.charCodeAt(R+1)))==56320&&(U=65536+(U-55296<<10)+(H-56320),R++),w+=U<128?1:U<2048?2:U<65536?3:4;for(B=y.uint8array?new Uint8Array(w):new Array(w),R=L=0;L<w;R++)(64512&(U=F.charCodeAt(R)))==55296&&R+1<_&&(64512&(H=F.charCodeAt(R+1)))==56320&&(U=65536+(U-55296<<10)+(H-56320),R++),U<128?B[L++]=U:(U<2048?B[L++]=192|U>>>6:(U<65536?B[L++]=224|U>>>12:(B[L++]=240|U>>>18,B[L++]=128|U>>>12&63),B[L++]=128|U>>>6&63),B[L++]=128|63&U);return B}(D)},m.utf8decode=function(D){return y.nodebuffer?g.transformTo("nodebuffer",D).toString("utf-8"):function(F){var B,U,H,R,L=F.length,_=new Array(2*L);for(B=U=0;B<L;)if((H=F[B++])<128)_[U++]=H;else if(4<(R=b[H]))_[U++]=65533,B+=R-1;else{for(H&=R===2?31:R===3?15:7;1<R&&B<L;)H=H<<6|63&F[B++],R--;1<R?_[U++]=65533:H<65536?_[U++]=H:(H-=65536,_[U++]=55296|H>>10&1023,_[U++]=56320|1023&H)}return _.length!==U&&(_.subarray?_=_.subarray(0,U):_.length=U),g.applyFromCharCode(_)}(D=g.transformTo(y.uint8array?"uint8array":"array",D))},g.inherits(A,C),A.prototype.processChunk=function(D){var F=g.transformTo(y.uint8array?"uint8array":"array",D.data);if(this.leftOver&&this.leftOver.length){if(y.uint8array){var B=F;(F=new Uint8Array(B.length+this.leftOver.length)).set(this.leftOver,0),F.set(B,this.leftOver.length)}else F=this.leftOver.concat(F);this.leftOver=null}var U=function(R,L){var _;for((L=L||R.length)>R.length&&(L=R.length),_=L-1;0<=_&&(192&R[_])==128;)_--;return _<0||_===0?L:_+b[R[_]]>L?_:L}(F),H=F;U!==F.length&&(y.uint8array?(H=F.subarray(0,U),this.leftOver=F.subarray(U,F.length)):(H=F.slice(0,U),this.leftOver=F.slice(U,F.length))),this.push({data:m.utf8decode(H),meta:D.meta})},A.prototype.flush=function(){this.leftOver&&this.leftOver.length&&(this.push({data:m.utf8decode(this.leftOver),meta:{}}),this.leftOver=null)},m.Utf8DecodeWorker=A,g.inherits(I,C),I.prototype.processChunk=function(D){this.push({data:m.utf8encode(D.data),meta:D.meta})},m.Utf8EncodeWorker=I},{"./nodejsUtils":14,"./stream/GenericWorker":28,"./support":30,"./utils":32}],32:[function(p,f,m){var g=p("./support"),y=p("./base64"),v=p("./nodejsUtils"),C=p("./external");function b(B){return B}function T(B,U){for(var H=0;H<B.length;++H)U[H]=255&B.charCodeAt(H);return U}p("setimmediate"),m.newBlob=function(B,U){m.checkSupport("blob");try{return new Blob([B],{type:U})}catch{try{var H=new(self.BlobBuilder||self.WebKitBlobBuilder||self.MozBlobBuilder||self.MSBlobBuilder);return H.append(B),H.getBlob(U)}catch{throw new Error("Bug : can't construct the Blob.")}}};var A={stringifyByChunk:function(B,U,H){var R=[],L=0,_=B.length;if(_<=H)return String.fromCharCode.apply(null,B);for(;L<_;)U==="array"||U==="nodebuffer"?R.push(String.fromCharCode.apply(null,B.slice(L,Math.min(L+H,_)))):R.push(String.fromCharCode.apply(null,B.subarray(L,Math.min(L+H,_)))),L+=H;return R.join("")},stringifyByChar:function(B){for(var U="",H=0;H<B.length;H++)U+=String.fromCharCode(B[H]);return U},applyCanBeUsed:{uint8array:function(){try{return g.uint8array&&String.fromCharCode.apply(null,new Uint8Array(1)).length===1}catch{return!1}}(),nodebuffer:function(){try{return g.nodebuffer&&String.fromCharCode.apply(null,v.allocBuffer(1)).length===1}catch{return!1}}()}};function I(B){var U=65536,H=m.getTypeOf(B),R=!0;if(H==="uint8array"?R=A.applyCanBeUsed.uint8array:H==="nodebuffer"&&(R=A.applyCanBeUsed.nodebuffer),R)for(;1<U;)try{return A.stringifyByChunk(B,H,U)}catch{U=Math.floor(U/2)}return A.stringifyByChar(B)}function D(B,U){for(var H=0;H<B.length;H++)U[H]=B[H];return U}m.applyFromCharCode=I;var F={};F.string={string:b,array:function(B){return T(B,new Array(B.length))},arraybuffer:function(B){return F.string.uint8array(B).buffer},uint8array:function(B){return T(B,new Uint8Array(B.length))},nodebuffer:function(B){return T(B,v.allocBuffer(B.length))}},F.array={string:I,array:b,arraybuffer:function(B){return new Uint8Array(B).buffer},uint8array:function(B){return new Uint8Array(B)},nodebuffer:function(B){return v.newBufferFrom(B)}},F.arraybuffer={string:function(B){return I(new Uint8Array(B))},array:function(B){return D(new Uint8Array(B),new Array(B.byteLength))},arraybuffer:b,uint8array:function(B){return new Uint8Array(B)},nodebuffer:function(B){return v.newBufferFrom(new Uint8Array(B))}},F.uint8array={string:I,array:function(B){return D(B,new Array(B.length))},arraybuffer:function(B){return B.buffer},uint8array:b,nodebuffer:function(B){return v.newBufferFrom(B)}},F.nodebuffer={string:I,array:function(B){return D(B,new Array(B.length))},arraybuffer:function(B){return F.nodebuffer.uint8array(B).buffer},uint8array:function(B){return D(B,new Uint8Array(B.length))},nodebuffer:b},m.transformTo=function(B,U){if(U=U||"",!B)return U;m.checkSupport(B);var H=m.getTypeOf(U);return F[H][B](U)},m.resolve=function(B){for(var U=B.split("/"),H=[],R=0;R<U.length;R++){var L=U[R];L==="."||L===""&&R!==0&&R!==U.length-1||(L===".."?H.pop():H.push(L))}return H.join("/")},m.getTypeOf=function(B){return typeof B=="string"?"string":Object.prototype.toString.call(B)==="[object Array]"?"array":g.nodebuffer&&v.isBuffer(B)?"nodebuffer":g.uint8array&&B instanceof Uint8Array?"uint8array":g.arraybuffer&&B instanceof ArrayBuffer?"arraybuffer":void 0},m.checkSupport=function(B){if(!g[B.toLowerCase()])throw new Error(B+" is not supported by this platform")},m.MAX_VALUE_16BITS=65535,m.MAX_VALUE_32BITS=-1,m.pretty=function(B){var U,H,R="";for(H=0;H<(B||"").length;H++)R+="\\x"+((U=B.charCodeAt(H))<16?"0":"")+U.toString(16).toUpperCase();return R},m.delay=function(B,U,H){h(function(){B.apply(H||null,U||[])})},m.inherits=function(B,U){function H(){}H.prototype=U.prototype,B.prototype=new H},m.extend=function(){var B,U,H={};for(B=0;B<arguments.length;B++)for(U in arguments[B])Object.prototype.hasOwnProperty.call(arguments[B],U)&&H[U]===void 0&&(H[U]=arguments[B][U]);return H},m.prepareContent=function(B,U,H,R,L){return C.Promise.resolve(U).then(function(_){return g.blob&&(_ instanceof Blob||["[object File]","[object Blob]"].indexOf(Object.prototype.toString.call(_))!==-1)&&typeof FileReader<"u"?new C.Promise(function(w,S){var x=new FileReader;x.onload=function(E){w(E.target.result)},x.onerror=function(E){S(E.target.error)},x.readAsArrayBuffer(_)}):_}).then(function(_){var w=m.getTypeOf(_);return w?(w==="arraybuffer"?_=m.transformTo("uint8array",_):w==="string"&&(L?_=y.decode(_):H&&R!==!0&&(_=function(S){return T(S,g.uint8array?new Uint8Array(S.length):new Array(S.length))}(_))),_):C.Promise.reject(new Error("Can't read the data of '"+B+"'. Is it in a supported JavaScript type (String, Blob, ArrayBuffer, etc) ?"))})}},{"./base64":1,"./external":6,"./nodejsUtils":14,"./support":30,setimmediate:54}],33:[function(p,f,m){var g=p("./reader/readerFor"),y=p("./utils"),v=p("./signature"),C=p("./zipEntry"),b=p("./support");function T(A){this.files=[],this.loadOptions=A}T.prototype={checkSignature:function(A){if(!this.reader.readAndCheckSignature(A)){this.reader.index-=4;var I=this.reader.readString(4);throw new Error("Corrupted zip or bug: unexpected signature ("+y.pretty(I)+", expected "+y.pretty(A)+")")}},isSignature:function(A,I){var D=this.reader.index;this.reader.setIndex(A);var F=this.reader.readString(4)===I;return this.reader.setIndex(D),F},readBlockEndOfCentral:function(){this.diskNumber=this.reader.readInt(2),this.diskWithCentralDirStart=this.reader.readInt(2),this.centralDirRecordsOnThisDisk=this.reader.readInt(2),this.centralDirRecords=this.reader.readInt(2),this.centralDirSize=this.reader.readInt(4),this.centralDirOffset=this.reader.readInt(4),this.zipCommentLength=this.reader.readInt(2);var A=this.reader.readData(this.zipCommentLength),I=b.uint8array?"uint8array":"array",D=y.transformTo(I,A);this.zipComment=this.loadOptions.decodeFileName(D)},readBlockZip64EndOfCentral:function(){this.zip64EndOfCentralSize=this.reader.readInt(8),this.reader.skip(4),this.diskNumber=this.reader.readInt(4),this.diskWithCentralDirStart=this.reader.readInt(4),this.centralDirRecordsOnThisDisk=this.reader.readInt(8),this.centralDirRecords=this.reader.readInt(8),this.centralDirSize=this.reader.readInt(8),this.centralDirOffset=this.reader.readInt(8),this.zip64ExtensibleData={};for(var A,I,D,F=this.zip64EndOfCentralSize-44;0<F;)A=this.reader.readInt(2),I=this.reader.readInt(4),D=this.reader.readData(I),this.zip64ExtensibleData[A]={id:A,length:I,value:D}},readBlockZip64EndOfCentralLocator:function(){if(this.diskWithZip64CentralDirStart=this.reader.readInt(4),this.relativeOffsetEndOfZip64CentralDir=this.reader.readInt(8),this.disksCount=this.reader.readInt(4),1<this.disksCount)throw new Error("Multi-volumes zip are not supported")},readLocalFiles:function(){var A,I;for(A=0;A<this.files.length;A++)I=this.files[A],this.reader.setIndex(I.localHeaderOffset),this.checkSignature(v.LOCAL_FILE_HEADER),I.readLocalPart(this.reader),I.handleUTF8(),I.processAttributes()},readCentralDir:function(){var A;for(this.reader.setIndex(this.centralDirOffset);this.reader.readAndCheckSignature(v.CENTRAL_FILE_HEADER);)(A=new C({zip64:this.zip64},this.loadOptions)).readCentralPart(this.reader),this.files.push(A);if(this.centralDirRecords!==this.files.length&&this.centralDirRecords!==0&&this.files.length===0)throw new Error("Corrupted zip or bug: expected "+this.centralDirRecords+" records in central dir, got "+this.files.length)},readEndOfCentral:function(){var A=this.reader.lastIndexOfSignature(v.CENTRAL_DIRECTORY_END);if(A<0)throw this.isSignature(0,v.LOCAL_FILE_HEADER)?new Error("Corrupted zip: can't find end of central directory"):new Error("Can't find end of central directory : is this a zip file ? If it is, see https://stuk.github.io/jszip/documentation/howto/read_zip.html");this.reader.setIndex(A);var I=A;if(this.checkSignature(v.CENTRAL_DIRECTORY_END),this.readBlockEndOfCentral(),this.diskNumber===y.MAX_VALUE_16BITS||this.diskWithCentralDirStart===y.MAX_VALUE_16BITS||this.centralDirRecordsOnThisDisk===y.MAX_VALUE_16BITS||this.centralDirRecords===y.MAX_VALUE_16BITS||this.centralDirSize===y.MAX_VALUE_32BITS||this.centralDirOffset===y.MAX_VALUE_32BITS){if(this.zip64=!0,(A=this.reader.lastIndexOfSignature(v.ZIP64_CENTRAL_DIRECTORY_LOCATOR))<0)throw new Error("Corrupted zip: can't find the ZIP64 end of central directory locator");if(this.reader.setIndex(A),this.checkSignature(v.ZIP64_CENTRAL_DIRECTORY_LOCATOR),this.readBlockZip64EndOfCentralLocator(),!this.isSignature(this.relativeOffsetEndOfZip64CentralDir,v.ZIP64_CENTRAL_DIRECTORY_END)&&(this.relativeOffsetEndOfZip64CentralDir=this.reader.lastIndexOfSignature(v.ZIP64_CENTRAL_DIRECTORY_END),this.relativeOffsetEndOfZip64CentralDir<0))throw new Error("Corrupted zip: can't find the ZIP64 end of central directory");this.reader.setIndex(this.relativeOffsetEndOfZip64CentralDir),this.checkSignature(v.ZIP64_CENTRAL_DIRECTORY_END),this.readBlockZip64EndOfCentral()}var D=this.centralDirOffset+this.centralDirSize;this.zip64&&(D+=20,D+=12+this.zip64EndOfCentralSize);var F=I-D;if(0<F)this.isSignature(I,v.CENTRAL_FILE_HEADER)||(this.reader.zero=F);else if(F<0)throw new Error("Corrupted zip: missing "+Math.abs(F)+" bytes.")},prepareReader:function(A){this.reader=g(A)},load:function(A){this.prepareReader(A),this.readEndOfCentral(),this.readCentralDir(),this.readLocalFiles()}},f.exports=T},{"./reader/readerFor":22,"./signature":23,"./support":30,"./utils":32,"./zipEntry":34}],34:[function(p,f,m){var g=p("./reader/readerFor"),y=p("./utils"),v=p("./compressedObject"),C=p("./crc32"),b=p("./utf8"),T=p("./compressions"),A=p("./support");function I(D,F){this.options=D,this.loadOptions=F}I.prototype={isEncrypted:function(){return(1&this.bitFlag)==1},useUTF8:function(){return(2048&this.bitFlag)==2048},readLocalPart:function(D){var F,B;if(D.skip(22),this.fileNameLength=D.readInt(2),B=D.readInt(2),this.fileName=D.readData(this.fileNameLength),D.skip(B),this.compressedSize===-1||this.uncompressedSize===-1)throw new Error("Bug or corrupted zip : didn't get enough information from the central directory (compressedSize === -1 || uncompressedSize === -1)");if((F=function(U){for(var H in T)if(Object.prototype.hasOwnProperty.call(T,H)&&T[H].magic===U)return T[H];return null}(this.compressionMethod))===null)throw new Error("Corrupted zip : compression "+y.pretty(this.compressionMethod)+" unknown (inner file : "+y.transformTo("string",this.fileName)+")");this.decompressed=new v(this.compressedSize,this.uncompressedSize,this.crc32,F,D.readData(this.compressedSize))},readCentralPart:function(D){this.versionMadeBy=D.readInt(2),D.skip(2),this.bitFlag=D.readInt(2),this.compressionMethod=D.readString(2),this.date=D.readDate(),this.crc32=D.readInt(4),this.compressedSize=D.readInt(4),this.uncompressedSize=D.readInt(4);var F=D.readInt(2);if(this.extraFieldsLength=D.readInt(2),this.fileCommentLength=D.readInt(2),this.diskNumberStart=D.readInt(2),this.internalFileAttributes=D.readInt(2),this.externalFileAttributes=D.readInt(4),this.localHeaderOffset=D.readInt(4),this.isEncrypted())throw new Error("Encrypted zip are not supported");D.skip(F),this.readExtraFields(D),this.parseZIP64ExtraField(D),this.fileComment=D.readData(this.fileCommentLength)},processAttributes:function(){this.unixPermissions=null,this.dosPermissions=null;var D=this.versionMadeBy>>8;this.dir=!!(16&this.externalFileAttributes),D==0&&(this.dosPermissions=63&this.externalFileAttributes),D==3&&(this.unixPermissions=this.externalFileAttributes>>16&65535),this.dir||this.fileNameStr.slice(-1)!=="/"||(this.dir=!0)},parseZIP64ExtraField:function(){if(this.extraFields[1]){var D=g(this.extraFields[1].value);this.uncompressedSize===y.MAX_VALUE_32BITS&&(this.uncompressedSize=D.readInt(8)),this.compressedSize===y.MAX_VALUE_32BITS&&(this.compressedSize=D.readInt(8)),this.localHeaderOffset===y.MAX_VALUE_32BITS&&(this.localHeaderOffset=D.readInt(8)),this.diskNumberStart===y.MAX_VALUE_32BITS&&(this.diskNumberStart=D.readInt(4))}},readExtraFields:function(D){var F,B,U,H=D.index+this.extraFieldsLength;for(this.extraFields||(this.extraFields={});D.index+4<H;)F=D.readInt(2),B=D.readInt(2),U=D.readData(B),this.extraFields[F]={id:F,length:B,value:U};D.setIndex(H)},handleUTF8:function(){var D=A.uint8array?"uint8array":"array";if(this.useUTF8())this.fileNameStr=b.utf8decode(this.fileName),this.fileCommentStr=b.utf8decode(this.fileComment);else{var F=this.findExtraFieldUnicodePath();if(F!==null)this.fileNameStr=F;else{var B=y.transformTo(D,this.fileName);this.fileNameStr=this.loadOptions.decodeFileName(B)}var U=this.findExtraFieldUnicodeComment();if(U!==null)this.fileCommentStr=U;else{var H=y.transformTo(D,this.fileComment);this.fileCommentStr=this.loadOptions.decodeFileName(H)}}},findExtraFieldUnicodePath:function(){var D=this.extraFields[28789];if(D){var F=g(D.value);return F.readInt(1)!==1||C(this.fileName)!==F.readInt(4)?null:b.utf8decode(F.readData(D.length-5))}return null},findExtraFieldUnicodeComment:function(){var D=this.extraFields[25461];if(D){var F=g(D.value);return F.readInt(1)!==1||C(this.fileComment)!==F.readInt(4)?null:b.utf8decode(F.readData(D.length-5))}return null}},f.exports=I},{"./compressedObject":2,"./compressions":3,"./crc32":4,"./reader/readerFor":22,"./support":30,"./utf8":31,"./utils":32}],35:[function(p,f,m){function g(F,B,U){this.name=F,this.dir=U.dir,this.date=U.date,this.comment=U.comment,this.unixPermissions=U.unixPermissions,this.dosPermissions=U.dosPermissions,this._data=B,this._dataBinary=U.binary,this.options={compression:U.compression,compressionOptions:U.compressionOptions}}var y=p("./stream/StreamHelper"),v=p("./stream/DataWorker"),C=p("./utf8"),b=p("./compressedObject"),T=p("./stream/GenericWorker");g.prototype={internalStream:function(F){var B=null,U="string";try{if(!F)throw new Error("No output type specified.");var H=(U=F.toLowerCase())==="string"||U==="text";U!=="binarystring"&&U!=="text"||(U="string"),B=this._decompressWorker();var R=!this._dataBinary;R&&!H&&(B=B.pipe(new C.Utf8EncodeWorker)),!R&&H&&(B=B.pipe(new C.Utf8DecodeWorker))}catch(L){(B=new T("error")).error(L)}return new y(B,U,"")},async:function(F,B){return this.internalStream(F).accumulate(B)},nodeStream:function(F,B){return this.internalStream(F||"nodebuffer").toNodejsStream(B)},_compressWorker:function(F,B){if(this._data instanceof b&&this._data.compression.magic===F.magic)return this._data.getCompressedWorker();var U=this._decompressWorker();return this._dataBinary||(U=U.pipe(new C.Utf8EncodeWorker)),b.createWorkerFrom(U,F,B)},_decompressWorker:function(){return this._data instanceof b?this._data.getContentWorker():this._data instanceof T?this._data:new v(this._data)}};for(var A=["asText","asBinary","asNodeBuffer","asUint8Array","asArrayBuffer"],I=function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},D=0;D<A.length;D++)g.prototype[A[D]]=I;f.exports=g},{"./compressedObject":2,"./stream/DataWorker":27,"./stream/GenericWorker":28,"./stream/StreamHelper":29,"./utf8":31}],36:[function(p,f,m){(function(g){var y,v,C=g.MutationObserver||g.WebKitMutationObserver;if(C){var b=0,T=new C(F),A=g.document.createTextNode("");T.observe(A,{characterData:!0}),y=function(){A.data=b=++b%2}}else if(g.setImmediate||g.MessageChannel===void 0)y="document"in g&&"onreadystatechange"in g.document.createElement("script")?function(){var B=g.document.createElement("script");B.onreadystatechange=function(){F(),B.onreadystatechange=null,B.parentNode.removeChild(B),B=null},g.document.documentElement.appendChild(B)}:function(){setTimeout(F,0)};else{var I=new g.MessageChannel;I.port1.onmessage=F,y=function(){I.port2.postMessage(0)}}var D=[];function F(){var B,U;v=!0;for(var H=D.length;H;){for(U=D,D=[],B=-1;++B<H;)U[B]();H=D.length}v=!1}f.exports=function(B){D.push(B)!==1||v||y()}}).call(this,o!==void 0?o:typeof self<"u"?self:typeof window<"u"?window:{})},{}],37:[function(p,f,m){var g=p("immediate");function y(){}var v={},C=["REJECTED"],b=["FULFILLED"],T=["PENDING"];function A(H){if(typeof H!="function")throw new TypeError("resolver must be a function");this.state=T,this.queue=[],this.outcome=void 0,H!==y&&B(this,H)}function I(H,R,L){this.promise=H,typeof R=="function"&&(this.onFulfilled=R,this.callFulfilled=this.otherCallFulfilled),typeof L=="function"&&(this.onRejected=L,this.callRejected=this.otherCallRejected)}function D(H,R,L){g(function(){var _;try{_=R(L)}catch(w){return v.reject(H,w)}_===H?v.reject(H,new TypeError("Cannot resolve promise with itself")):v.resolve(H,_)})}function F(H){var R=H&&H.then;if(H&&(typeof H=="object"||typeof H=="function")&&typeof R=="function")return function(){R.apply(H,arguments)}}function B(H,R){var L=!1;function _(x){L||(L=!0,v.reject(H,x))}function w(x){L||(L=!0,v.resolve(H,x))}var S=U(function(){R(w,_)});S.status==="error"&&_(S.value)}function U(H,R){var L={};try{L.value=H(R),L.status="success"}catch(_){L.status="error",L.value=_}return L}(f.exports=A).prototype.finally=function(H){if(typeof H!="function")return this;var R=this.constructor;return this.then(function(L){return R.resolve(H()).then(function(){return L})},function(L){return R.resolve(H()).then(function(){throw L})})},A.prototype.catch=function(H){return this.then(null,H)},A.prototype.then=function(H,R){if(typeof H!="function"&&this.state===b||typeof R!="function"&&this.state===C)return this;var L=new this.constructor(y);return this.state!==T?D(L,this.state===b?H:R,this.outcome):this.queue.push(new I(L,H,R)),L},I.prototype.callFulfilled=function(H){v.resolve(this.promise,H)},I.prototype.otherCallFulfilled=function(H){D(this.promise,this.onFulfilled,H)},I.prototype.callRejected=function(H){v.reject(this.promise,H)},I.prototype.otherCallRejected=function(H){D(this.promise,this.onRejected,H)},v.resolve=function(H,R){var L=U(F,R);if(L.status==="error")return v.reject(H,L.value);var _=L.value;if(_)B(H,_);else{H.state=b,H.outcome=R;for(var w=-1,S=H.queue.length;++w<S;)H.queue[w].callFulfilled(R)}return H},v.reject=function(H,R){H.state=C,H.outcome=R;for(var L=-1,_=H.queue.length;++L<_;)H.queue[L].callRejected(R);return H},A.resolve=function(H){return H instanceof this?H:v.resolve(new this(y),H)},A.reject=function(H){var R=new this(y);return v.reject(R,H)},A.all=function(H){var R=this;if(Object.prototype.toString.call(H)!=="[object Array]")return this.reject(new TypeError("must be an array"));var L=H.length,_=!1;if(!L)return this.resolve([]);for(var w=new Array(L),S=0,x=-1,E=new this(y);++x<L;)M(H[x],x);return E;function M(O,V){R.resolve(O).then(function(Y){w[V]=Y,++S!==L||_||(_=!0,v.resolve(E,w))},function(Y){_||(_=!0,v.reject(E,Y))})}},A.race=function(H){if(Object.prototype.toString.call(H)!=="[object Array]")return this.reject(new TypeError("must be an array"));var R=H.length,L=!1;if(!R)return this.resolve([]);for(var _,w=-1,S=new this(y);++w<R;)_=H[w],this.resolve(_).then(function(x){L||(L=!0,v.resolve(S,x))},function(x){L||(L=!0,v.reject(S,x))});return S}},{immediate:36}],38:[function(p,f,m){var g={};(0,p("./lib/utils/common").assign)(g,p("./lib/deflate"),p("./lib/inflate"),p("./lib/zlib/constants")),f.exports=g},{"./lib/deflate":39,"./lib/inflate":40,"./lib/utils/common":41,"./lib/zlib/constants":44}],39:[function(p,f,m){var g=p("./zlib/deflate"),y=p("./utils/common"),v=p("./utils/strings"),C=p("./zlib/messages"),b=p("./zlib/zstream"),T=Object.prototype.toString;function A(D){if(!(this instanceof A))return new A(D);this.options=y.assign({level:-1,method:8,chunkSize:16384,windowBits:15,memLevel:8,strategy:0,to:""},D||{});var F=this.options;F.raw&&0<F.windowBits?F.windowBits=-F.windowBits:F.gzip&&0<F.windowBits&&F.windowBits<16&&(F.windowBits+=16),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new b,this.strm.avail_out=0;var B=g.deflateInit2(this.strm,F.level,F.method,F.windowBits,F.memLevel,F.strategy);if(B!==0)throw new Error(C[B]);if(F.header&&g.deflateSetHeader(this.strm,F.header),F.dictionary){var U;if(U=typeof F.dictionary=="string"?v.string2buf(F.dictionary):T.call(F.dictionary)==="[object ArrayBuffer]"?new Uint8Array(F.dictionary):F.dictionary,(B=g.deflateSetDictionary(this.strm,U))!==0)throw new Error(C[B]);this._dict_set=!0}}function I(D,F){var B=new A(F);if(B.push(D,!0),B.err)throw B.msg||C[B.err];return B.result}A.prototype.push=function(D,F){var B,U,H=this.strm,R=this.options.chunkSize;if(this.ended)return!1;U=F===~~F?F:F===!0?4:0,typeof D=="string"?H.input=v.string2buf(D):T.call(D)==="[object ArrayBuffer]"?H.input=new Uint8Array(D):H.input=D,H.next_in=0,H.avail_in=H.input.length;do{if(H.avail_out===0&&(H.output=new y.Buf8(R),H.next_out=0,H.avail_out=R),(B=g.deflate(H,U))!==1&&B!==0)return this.onEnd(B),!(this.ended=!0);H.avail_out!==0&&(H.avail_in!==0||U!==4&&U!==2)||(this.options.to==="string"?this.onData(v.buf2binstring(y.shrinkBuf(H.output,H.next_out))):this.onData(y.shrinkBuf(H.output,H.next_out)))}while((0<H.avail_in||H.avail_out===0)&&B!==1);return U===4?(B=g.deflateEnd(this.strm),this.onEnd(B),this.ended=!0,B===0):U!==2||(this.onEnd(0),!(H.avail_out=0))},A.prototype.onData=function(D){this.chunks.push(D)},A.prototype.onEnd=function(D){D===0&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=y.flattenChunks(this.chunks)),this.chunks=[],this.err=D,this.msg=this.strm.msg},m.Deflate=A,m.deflate=I,m.deflateRaw=function(D,F){return(F=F||{}).raw=!0,I(D,F)},m.gzip=function(D,F){return(F=F||{}).gzip=!0,I(D,F)}},{"./utils/common":41,"./utils/strings":42,"./zlib/deflate":46,"./zlib/messages":51,"./zlib/zstream":53}],40:[function(p,f,m){var g=p("./zlib/inflate"),y=p("./utils/common"),v=p("./utils/strings"),C=p("./zlib/constants"),b=p("./zlib/messages"),T=p("./zlib/zstream"),A=p("./zlib/gzheader"),I=Object.prototype.toString;function D(B){if(!(this instanceof D))return new D(B);this.options=y.assign({chunkSize:16384,windowBits:0,to:""},B||{});var U=this.options;U.raw&&0<=U.windowBits&&U.windowBits<16&&(U.windowBits=-U.windowBits,U.windowBits===0&&(U.windowBits=-15)),!(0<=U.windowBits&&U.windowBits<16)||B&&B.windowBits||(U.windowBits+=32),15<U.windowBits&&U.windowBits<48&&!(15&U.windowBits)&&(U.windowBits|=15),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new T,this.strm.avail_out=0;var H=g.inflateInit2(this.strm,U.windowBits);if(H!==C.Z_OK)throw new Error(b[H]);this.header=new A,g.inflateGetHeader(this.strm,this.header)}function F(B,U){var H=new D(U);if(H.push(B,!0),H.err)throw H.msg||b[H.err];return H.result}D.prototype.push=function(B,U){var H,R,L,_,w,S,x=this.strm,E=this.options.chunkSize,M=this.options.dictionary,O=!1;if(this.ended)return!1;R=U===~~U?U:U===!0?C.Z_FINISH:C.Z_NO_FLUSH,typeof B=="string"?x.input=v.binstring2buf(B):I.call(B)==="[object ArrayBuffer]"?x.input=new Uint8Array(B):x.input=B,x.next_in=0,x.avail_in=x.input.length;do{if(x.avail_out===0&&(x.output=new y.Buf8(E),x.next_out=0,x.avail_out=E),(H=g.inflate(x,C.Z_NO_FLUSH))===C.Z_NEED_DICT&&M&&(S=typeof M=="string"?v.string2buf(M):I.call(M)==="[object ArrayBuffer]"?new Uint8Array(M):M,H=g.inflateSetDictionary(this.strm,S)),H===C.Z_BUF_ERROR&&O===!0&&(H=C.Z_OK,O=!1),H!==C.Z_STREAM_END&&H!==C.Z_OK)return this.onEnd(H),!(this.ended=!0);x.next_out&&(x.avail_out!==0&&H!==C.Z_STREAM_END&&(x.avail_in!==0||R!==C.Z_FINISH&&R!==C.Z_SYNC_FLUSH)||(this.options.to==="string"?(L=v.utf8border(x.output,x.next_out),_=x.next_out-L,w=v.buf2string(x.output,L),x.next_out=_,x.avail_out=E-_,_&&y.arraySet(x.output,x.output,L,_,0),this.onData(w)):this.onData(y.shrinkBuf(x.output,x.next_out)))),x.avail_in===0&&x.avail_out===0&&(O=!0)}while((0<x.avail_in||x.avail_out===0)&&H!==C.Z_STREAM_END);return H===C.Z_STREAM_END&&(R=C.Z_FINISH),R===C.Z_FINISH?(H=g.inflateEnd(this.strm),this.onEnd(H),this.ended=!0,H===C.Z_OK):R!==C.Z_SYNC_FLUSH||(this.onEnd(C.Z_OK),!(x.avail_out=0))},D.prototype.onData=function(B){this.chunks.push(B)},D.prototype.onEnd=function(B){B===C.Z_OK&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=y.flattenChunks(this.chunks)),this.chunks=[],this.err=B,this.msg=this.strm.msg},m.Inflate=D,m.inflate=F,m.inflateRaw=function(B,U){return(U=U||{}).raw=!0,F(B,U)},m.ungzip=F},{"./utils/common":41,"./utils/strings":42,"./zlib/constants":44,"./zlib/gzheader":47,"./zlib/inflate":49,"./zlib/messages":51,"./zlib/zstream":53}],41:[function(p,f,m){var g=typeof Uint8Array<"u"&&typeof Uint16Array<"u"&&typeof Int32Array<"u";m.assign=function(C){for(var b=Array.prototype.slice.call(arguments,1);b.length;){var T=b.shift();if(T){if(typeof T!="object")throw new TypeError(T+"must be non-object");for(var A in T)T.hasOwnProperty(A)&&(C[A]=T[A])}}return C},m.shrinkBuf=function(C,b){return C.length===b?C:C.subarray?C.subarray(0,b):(C.length=b,C)};var y={arraySet:function(C,b,T,A,I){if(b.subarray&&C.subarray)C.set(b.subarray(T,T+A),I);else for(var D=0;D<A;D++)C[I+D]=b[T+D]},flattenChunks:function(C){var b,T,A,I,D,F;for(b=A=0,T=C.length;b<T;b++)A+=C[b].length;for(F=new Uint8Array(A),b=I=0,T=C.length;b<T;b++)D=C[b],F.set(D,I),I+=D.length;return F}},v={arraySet:function(C,b,T,A,I){for(var D=0;D<A;D++)C[I+D]=b[T+D]},flattenChunks:function(C){return[].concat.apply([],C)}};m.setTyped=function(C){C?(m.Buf8=Uint8Array,m.Buf16=Uint16Array,m.Buf32=Int32Array,m.assign(m,y)):(m.Buf8=Array,m.Buf16=Array,m.Buf32=Array,m.assign(m,v))},m.setTyped(g)},{}],42:[function(p,f,m){var g=p("./common"),y=!0,v=!0;try{String.fromCharCode.apply(null,[0])}catch{y=!1}try{String.fromCharCode.apply(null,new Uint8Array(1))}catch{v=!1}for(var C=new g.Buf8(256),b=0;b<256;b++)C[b]=252<=b?6:248<=b?5:240<=b?4:224<=b?3:192<=b?2:1;function T(A,I){if(I<65537&&(A.subarray&&v||!A.subarray&&y))return String.fromCharCode.apply(null,g.shrinkBuf(A,I));for(var D="",F=0;F<I;F++)D+=String.fromCharCode(A[F]);return D}C[254]=C[254]=1,m.string2buf=function(A){var I,D,F,B,U,H=A.length,R=0;for(B=0;B<H;B++)(64512&(D=A.charCodeAt(B)))==55296&&B+1<H&&(64512&(F=A.charCodeAt(B+1)))==56320&&(D=65536+(D-55296<<10)+(F-56320),B++),R+=D<128?1:D<2048?2:D<65536?3:4;for(I=new g.Buf8(R),B=U=0;U<R;B++)(64512&(D=A.charCodeAt(B)))==55296&&B+1<H&&(64512&(F=A.charCodeAt(B+1)))==56320&&(D=65536+(D-55296<<10)+(F-56320),B++),D<128?I[U++]=D:(D<2048?I[U++]=192|D>>>6:(D<65536?I[U++]=224|D>>>12:(I[U++]=240|D>>>18,I[U++]=128|D>>>12&63),I[U++]=128|D>>>6&63),I[U++]=128|63&D);return I},m.buf2binstring=function(A){return T(A,A.length)},m.binstring2buf=function(A){for(var I=new g.Buf8(A.length),D=0,F=I.length;D<F;D++)I[D]=A.charCodeAt(D);return I},m.buf2string=function(A,I){var D,F,B,U,H=I||A.length,R=new Array(2*H);for(D=F=0;D<H;)if((B=A[D++])<128)R[F++]=B;else if(4<(U=C[B]))R[F++]=65533,D+=U-1;else{for(B&=U===2?31:U===3?15:7;1<U&&D<H;)B=B<<6|63&A[D++],U--;1<U?R[F++]=65533:B<65536?R[F++]=B:(B-=65536,R[F++]=55296|B>>10&1023,R[F++]=56320|1023&B)}return T(R,F)},m.utf8border=function(A,I){var D;for((I=I||A.length)>A.length&&(I=A.length),D=I-1;0<=D&&(192&A[D])==128;)D--;return D<0||D===0?I:D+C[A[D]]>I?D:I}},{"./common":41}],43:[function(p,f,m){f.exports=function(g,y,v,C){for(var b=65535&g|0,T=g>>>16&65535|0,A=0;v!==0;){for(v-=A=2e3<v?2e3:v;T=T+(b=b+y[C++]|0)|0,--A;);b%=65521,T%=65521}return b|T<<16|0}},{}],44:[function(p,f,m){f.exports={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8}},{}],45:[function(p,f,m){var g=function(){for(var y,v=[],C=0;C<256;C++){y=C;for(var b=0;b<8;b++)y=1&y?3988292384^y>>>1:y>>>1;v[C]=y}return v}();f.exports=function(y,v,C,b){var T=g,A=b+C;y^=-1;for(var I=b;I<A;I++)y=y>>>8^T[255&(y^v[I])];return-1^y}},{}],46:[function(p,f,m){var g,y=p("../utils/common"),v=p("./trees"),C=p("./adler32"),b=p("./crc32"),T=p("./messages"),A=-2,I=258,D=262,F=113;function B(G,Z){return G.msg=T[Z],Z}function U(G){return(G<<1)-(4<G?9:0)}function H(G){for(var Z=G.length;0<=--Z;)G[Z]=0}function R(G){var Z=G.state,N=Z.pending;N>G.avail_out&&(N=G.avail_out),N!==0&&(y.arraySet(G.output,Z.pending_buf,Z.pending_out,N,G.next_out),G.next_out+=N,Z.pending_out+=N,G.total_out+=N,G.avail_out-=N,Z.pending-=N,Z.pending===0&&(Z.pending_out=0))}function L(G,Z){v._tr_flush_block(G,0<=G.block_start?G.block_start:-1,G.strstart-G.block_start,Z),G.block_start=G.strstart,R(G.strm)}function _(G,Z){G.pending_buf[G.pending++]=Z}function w(G,Z){G.pending_buf[G.pending++]=Z>>>8&255,G.pending_buf[G.pending++]=255&Z}function S(G,Z){var N,P,j=G.max_chain_length,X=G.strstart,ie=G.prev_length,ee=G.nice_match,re=G.strstart>G.w_size-D?G.strstart-(G.w_size-D):0,oe=G.window,ue=G.w_mask,se=G.prev,le=G.strstart+I,ne=oe[X+ie-1],fe=oe[X+ie];G.prev_length>=G.good_match&&(j>>=2),ee>G.lookahead&&(ee=G.lookahead);do if(oe[(N=Z)+ie]===fe&&oe[N+ie-1]===ne&&oe[N]===oe[X]&&oe[++N]===oe[X+1]){X+=2,N++;do;while(oe[++X]===oe[++N]&&oe[++X]===oe[++N]&&oe[++X]===oe[++N]&&oe[++X]===oe[++N]&&oe[++X]===oe[++N]&&oe[++X]===oe[++N]&&oe[++X]===oe[++N]&&oe[++X]===oe[++N]&&X<le);if(P=I-(le-X),X=le-I,ie<P){if(G.match_start=Z,ee<=(ie=P))break;ne=oe[X+ie-1],fe=oe[X+ie]}}while((Z=se[Z&ue])>re&&--j!=0);return ie<=G.lookahead?ie:G.lookahead}function x(G){var Z,N,P,j,X,ie,ee,re,oe,ue,se=G.w_size;do{if(j=G.window_size-G.lookahead-G.strstart,G.strstart>=se+(se-D)){for(y.arraySet(G.window,G.window,se,se,0),G.match_start-=se,G.strstart-=se,G.block_start-=se,Z=N=G.hash_size;P=G.head[--Z],G.head[Z]=se<=P?P-se:0,--N;);for(Z=N=se;P=G.prev[--Z],G.prev[Z]=se<=P?P-se:0,--N;);j+=se}if(G.strm.avail_in===0)break;if(ie=G.strm,ee=G.window,re=G.strstart+G.lookahead,ue=void 0,(oe=j)<(ue=ie.avail_in)&&(ue=oe),N=ue===0?0:(ie.avail_in-=ue,y.arraySet(ee,ie.input,ie.next_in,ue,re),ie.state.wrap===1?ie.adler=C(ie.adler,ee,ue,re):ie.state.wrap===2&&(ie.adler=b(ie.adler,ee,ue,re)),ie.next_in+=ue,ie.total_in+=ue,ue),G.lookahead+=N,G.lookahead+G.insert>=3)for(X=G.strstart-G.insert,G.ins_h=G.window[X],G.ins_h=(G.ins_h<<G.hash_shift^G.window[X+1])&G.hash_mask;G.insert&&(G.ins_h=(G.ins_h<<G.hash_shift^G.window[X+3-1])&G.hash_mask,G.prev[X&G.w_mask]=G.head[G.ins_h],G.head[G.ins_h]=X,X++,G.insert--,!(G.lookahead+G.insert<3)););}while(G.lookahead<D&&G.strm.avail_in!==0)}function E(G,Z){for(var N,P;;){if(G.lookahead<D){if(x(G),G.lookahead<D&&Z===0)return 1;if(G.lookahead===0)break}if(N=0,G.lookahead>=3&&(G.ins_h=(G.ins_h<<G.hash_shift^G.window[G.strstart+3-1])&G.hash_mask,N=G.prev[G.strstart&G.w_mask]=G.head[G.ins_h],G.head[G.ins_h]=G.strstart),N!==0&&G.strstart-N<=G.w_size-D&&(G.match_length=S(G,N)),G.match_length>=3)if(P=v._tr_tally(G,G.strstart-G.match_start,G.match_length-3),G.lookahead-=G.match_length,G.match_length<=G.max_lazy_match&&G.lookahead>=3){for(G.match_length--;G.strstart++,G.ins_h=(G.ins_h<<G.hash_shift^G.window[G.strstart+3-1])&G.hash_mask,N=G.prev[G.strstart&G.w_mask]=G.head[G.ins_h],G.head[G.ins_h]=G.strstart,--G.match_length!=0;);G.strstart++}else G.strstart+=G.match_length,G.match_length=0,G.ins_h=G.window[G.strstart],G.ins_h=(G.ins_h<<G.hash_shift^G.window[G.strstart+1])&G.hash_mask;else P=v._tr_tally(G,0,G.window[G.strstart]),G.lookahead--,G.strstart++;if(P&&(L(G,!1),G.strm.avail_out===0))return 1}return G.insert=G.strstart<2?G.strstart:2,Z===4?(L(G,!0),G.strm.avail_out===0?3:4):G.last_lit&&(L(G,!1),G.strm.avail_out===0)?1:2}function M(G,Z){for(var N,P,j;;){if(G.lookahead<D){if(x(G),G.lookahead<D&&Z===0)return 1;if(G.lookahead===0)break}if(N=0,G.lookahead>=3&&(G.ins_h=(G.ins_h<<G.hash_shift^G.window[G.strstart+3-1])&G.hash_mask,N=G.prev[G.strstart&G.w_mask]=G.head[G.ins_h],G.head[G.ins_h]=G.strstart),G.prev_length=G.match_length,G.prev_match=G.match_start,G.match_length=2,N!==0&&G.prev_length<G.max_lazy_match&&G.strstart-N<=G.w_size-D&&(G.match_length=S(G,N),G.match_length<=5&&(G.strategy===1||G.match_length===3&&4096<G.strstart-G.match_start)&&(G.match_length=2)),G.prev_length>=3&&G.match_length<=G.prev_length){for(j=G.strstart+G.lookahead-3,P=v._tr_tally(G,G.strstart-1-G.prev_match,G.prev_length-3),G.lookahead-=G.prev_length-1,G.prev_length-=2;++G.strstart<=j&&(G.ins_h=(G.ins_h<<G.hash_shift^G.window[G.strstart+3-1])&G.hash_mask,N=G.prev[G.strstart&G.w_mask]=G.head[G.ins_h],G.head[G.ins_h]=G.strstart),--G.prev_length!=0;);if(G.match_available=0,G.match_length=2,G.strstart++,P&&(L(G,!1),G.strm.avail_out===0))return 1}else if(G.match_available){if((P=v._tr_tally(G,0,G.window[G.strstart-1]))&&L(G,!1),G.strstart++,G.lookahead--,G.strm.avail_out===0)return 1}else G.match_available=1,G.strstart++,G.lookahead--}return G.match_available&&(P=v._tr_tally(G,0,G.window[G.strstart-1]),G.match_available=0),G.insert=G.strstart<2?G.strstart:2,Z===4?(L(G,!0),G.strm.avail_out===0?3:4):G.last_lit&&(L(G,!1),G.strm.avail_out===0)?1:2}function O(G,Z,N,P,j){this.good_length=G,this.max_lazy=Z,this.nice_length=N,this.max_chain=P,this.func=j}function V(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=8,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new y.Buf16(1146),this.dyn_dtree=new y.Buf16(122),this.bl_tree=new y.Buf16(78),H(this.dyn_ltree),H(this.dyn_dtree),H(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new y.Buf16(16),this.heap=new y.Buf16(573),H(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new y.Buf16(573),H(this.depth),this.l_buf=0,this.lit_bufsize=0,this.last_lit=0,this.d_buf=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}function Y(G){var Z;return G&&G.state?(G.total_in=G.total_out=0,G.data_type=2,(Z=G.state).pending=0,Z.pending_out=0,Z.wrap<0&&(Z.wrap=-Z.wrap),Z.status=Z.wrap?42:F,G.adler=Z.wrap===2?0:1,Z.last_flush=0,v._tr_init(Z),0):B(G,A)}function $(G){var Z=Y(G);return Z===0&&function(N){N.window_size=2*N.w_size,H(N.head),N.max_lazy_match=g[N.level].max_lazy,N.good_match=g[N.level].good_length,N.nice_match=g[N.level].nice_length,N.max_chain_length=g[N.level].max_chain,N.strstart=0,N.block_start=0,N.lookahead=0,N.insert=0,N.match_length=N.prev_length=2,N.match_available=0,N.ins_h=0}(G.state),Z}function J(G,Z,N,P,j,X){if(!G)return A;var ie=1;if(Z===-1&&(Z=6),P<0?(ie=0,P=-P):15<P&&(ie=2,P-=16),j<1||9<j||N!==8||P<8||15<P||Z<0||9<Z||X<0||4<X)return B(G,A);P===8&&(P=9);var ee=new V;return(G.state=ee).strm=G,ee.wrap=ie,ee.gzhead=null,ee.w_bits=P,ee.w_size=1<<ee.w_bits,ee.w_mask=ee.w_size-1,ee.hash_bits=j+7,ee.hash_size=1<<ee.hash_bits,ee.hash_mask=ee.hash_size-1,ee.hash_shift=~~((ee.hash_bits+3-1)/3),ee.window=new y.Buf8(2*ee.w_size),ee.head=new y.Buf16(ee.hash_size),ee.prev=new y.Buf16(ee.w_size),ee.lit_bufsize=1<<j+6,ee.pending_buf_size=4*ee.lit_bufsize,ee.pending_buf=new y.Buf8(ee.pending_buf_size),ee.d_buf=1*ee.lit_bufsize,ee.l_buf=3*ee.lit_bufsize,ee.level=Z,ee.strategy=X,ee.method=N,$(G)}g=[new O(0,0,0,0,function(G,Z){var N=65535;for(N>G.pending_buf_size-5&&(N=G.pending_buf_size-5);;){if(G.lookahead<=1){if(x(G),G.lookahead===0&&Z===0)return 1;if(G.lookahead===0)break}G.strstart+=G.lookahead,G.lookahead=0;var P=G.block_start+N;if((G.strstart===0||G.strstart>=P)&&(G.lookahead=G.strstart-P,G.strstart=P,L(G,!1),G.strm.avail_out===0)||G.strstart-G.block_start>=G.w_size-D&&(L(G,!1),G.strm.avail_out===0))return 1}return G.insert=0,Z===4?(L(G,!0),G.strm.avail_out===0?3:4):(G.strstart>G.block_start&&(L(G,!1),G.strm.avail_out),1)}),new O(4,4,8,4,E),new O(4,5,16,8,E),new O(4,6,32,32,E),new O(4,4,16,16,M),new O(8,16,32,32,M),new O(8,16,128,128,M),new O(8,32,128,256,M),new O(32,128,258,1024,M),new O(32,258,258,4096,M)],m.deflateInit=function(G,Z){return J(G,Z,8,15,8,0)},m.deflateInit2=J,m.deflateReset=$,m.deflateResetKeep=Y,m.deflateSetHeader=function(G,Z){return G&&G.state?G.state.wrap!==2?A:(G.state.gzhead=Z,0):A},m.deflate=function(G,Z){var N,P,j,X;if(!G||!G.state||5<Z||Z<0)return G?B(G,A):A;if(P=G.state,!G.output||!G.input&&G.avail_in!==0||P.status===666&&Z!==4)return B(G,G.avail_out===0?-5:A);if(P.strm=G,N=P.last_flush,P.last_flush=Z,P.status===42)if(P.wrap===2)G.adler=0,_(P,31),_(P,139),_(P,8),P.gzhead?(_(P,(P.gzhead.text?1:0)+(P.gzhead.hcrc?2:0)+(P.gzhead.extra?4:0)+(P.gzhead.name?8:0)+(P.gzhead.comment?16:0)),_(P,255&P.gzhead.time),_(P,P.gzhead.time>>8&255),_(P,P.gzhead.time>>16&255),_(P,P.gzhead.time>>24&255),_(P,P.level===9?2:2<=P.strategy||P.level<2?4:0),_(P,255&P.gzhead.os),P.gzhead.extra&&P.gzhead.extra.length&&(_(P,255&P.gzhead.extra.length),_(P,P.gzhead.extra.length>>8&255)),P.gzhead.hcrc&&(G.adler=b(G.adler,P.pending_buf,P.pending,0)),P.gzindex=0,P.status=69):(_(P,0),_(P,0),_(P,0),_(P,0),_(P,0),_(P,P.level===9?2:2<=P.strategy||P.level<2?4:0),_(P,3),P.status=F);else{var ie=8+(P.w_bits-8<<4)<<8;ie|=(2<=P.strategy||P.level<2?0:P.level<6?1:P.level===6?2:3)<<6,P.strstart!==0&&(ie|=32),ie+=31-ie%31,P.status=F,w(P,ie),P.strstart!==0&&(w(P,G.adler>>>16),w(P,65535&G.adler)),G.adler=1}if(P.status===69)if(P.gzhead.extra){for(j=P.pending;P.gzindex<(65535&P.gzhead.extra.length)&&(P.pending!==P.pending_buf_size||(P.gzhead.hcrc&&P.pending>j&&(G.adler=b(G.adler,P.pending_buf,P.pending-j,j)),R(G),j=P.pending,P.pending!==P.pending_buf_size));)_(P,255&P.gzhead.extra[P.gzindex]),P.gzindex++;P.gzhead.hcrc&&P.pending>j&&(G.adler=b(G.adler,P.pending_buf,P.pending-j,j)),P.gzindex===P.gzhead.extra.length&&(P.gzindex=0,P.status=73)}else P.status=73;if(P.status===73)if(P.gzhead.name){j=P.pending;do{if(P.pending===P.pending_buf_size&&(P.gzhead.hcrc&&P.pending>j&&(G.adler=b(G.adler,P.pending_buf,P.pending-j,j)),R(G),j=P.pending,P.pending===P.pending_buf_size)){X=1;break}X=P.gzindex<P.gzhead.name.length?255&P.gzhead.name.charCodeAt(P.gzindex++):0,_(P,X)}while(X!==0);P.gzhead.hcrc&&P.pending>j&&(G.adler=b(G.adler,P.pending_buf,P.pending-j,j)),X===0&&(P.gzindex=0,P.status=91)}else P.status=91;if(P.status===91)if(P.gzhead.comment){j=P.pending;do{if(P.pending===P.pending_buf_size&&(P.gzhead.hcrc&&P.pending>j&&(G.adler=b(G.adler,P.pending_buf,P.pending-j,j)),R(G),j=P.pending,P.pending===P.pending_buf_size)){X=1;break}X=P.gzindex<P.gzhead.comment.length?255&P.gzhead.comment.charCodeAt(P.gzindex++):0,_(P,X)}while(X!==0);P.gzhead.hcrc&&P.pending>j&&(G.adler=b(G.adler,P.pending_buf,P.pending-j,j)),X===0&&(P.status=103)}else P.status=103;if(P.status===103&&(P.gzhead.hcrc?(P.pending+2>P.pending_buf_size&&R(G),P.pending+2<=P.pending_buf_size&&(_(P,255&G.adler),_(P,G.adler>>8&255),G.adler=0,P.status=F)):P.status=F),P.pending!==0){if(R(G),G.avail_out===0)return P.last_flush=-1,0}else if(G.avail_in===0&&U(Z)<=U(N)&&Z!==4)return B(G,-5);if(P.status===666&&G.avail_in!==0)return B(G,-5);if(G.avail_in!==0||P.lookahead!==0||Z!==0&&P.status!==666){var ee=P.strategy===2?function(re,oe){for(var ue;;){if(re.lookahead===0&&(x(re),re.lookahead===0)){if(oe===0)return 1;break}if(re.match_length=0,ue=v._tr_tally(re,0,re.window[re.strstart]),re.lookahead--,re.strstart++,ue&&(L(re,!1),re.strm.avail_out===0))return 1}return re.insert=0,oe===4?(L(re,!0),re.strm.avail_out===0?3:4):re.last_lit&&(L(re,!1),re.strm.avail_out===0)?1:2}(P,Z):P.strategy===3?function(re,oe){for(var ue,se,le,ne,fe=re.window;;){if(re.lookahead<=I){if(x(re),re.lookahead<=I&&oe===0)return 1;if(re.lookahead===0)break}if(re.match_length=0,re.lookahead>=3&&0<re.strstart&&(se=fe[le=re.strstart-1])===fe[++le]&&se===fe[++le]&&se===fe[++le]){ne=re.strstart+I;do;while(se===fe[++le]&&se===fe[++le]&&se===fe[++le]&&se===fe[++le]&&se===fe[++le]&&se===fe[++le]&&se===fe[++le]&&se===fe[++le]&&le<ne);re.match_length=I-(ne-le),re.match_length>re.lookahead&&(re.match_length=re.lookahead)}if(re.match_length>=3?(ue=v._tr_tally(re,1,re.match_length-3),re.lookahead-=re.match_length,re.strstart+=re.match_length,re.match_length=0):(ue=v._tr_tally(re,0,re.window[re.strstart]),re.lookahead--,re.strstart++),ue&&(L(re,!1),re.strm.avail_out===0))return 1}return re.insert=0,oe===4?(L(re,!0),re.strm.avail_out===0?3:4):re.last_lit&&(L(re,!1),re.strm.avail_out===0)?1:2}(P,Z):g[P.level].func(P,Z);if(ee!==3&&ee!==4||(P.status=666),ee===1||ee===3)return G.avail_out===0&&(P.last_flush=-1),0;if(ee===2&&(Z===1?v._tr_align(P):Z!==5&&(v._tr_stored_block(P,0,0,!1),Z===3&&(H(P.head),P.lookahead===0&&(P.strstart=0,P.block_start=0,P.insert=0))),R(G),G.avail_out===0))return P.last_flush=-1,0}return Z!==4?0:P.wrap<=0?1:(P.wrap===2?(_(P,255&G.adler),_(P,G.adler>>8&255),_(P,G.adler>>16&255),_(P,G.adler>>24&255),_(P,255&G.total_in),_(P,G.total_in>>8&255),_(P,G.total_in>>16&255),_(P,G.total_in>>24&255)):(w(P,G.adler>>>16),w(P,65535&G.adler)),R(G),0<P.wrap&&(P.wrap=-P.wrap),P.pending!==0?0:1)},m.deflateEnd=function(G){var Z;return G&&G.state?(Z=G.state.status)!==42&&Z!==69&&Z!==73&&Z!==91&&Z!==103&&Z!==F&&Z!==666?B(G,A):(G.state=null,Z===F?B(G,-3):0):A},m.deflateSetDictionary=function(G,Z){var N,P,j,X,ie,ee,re,oe,ue=Z.length;if(!G||!G.state||(X=(N=G.state).wrap)===2||X===1&&N.status!==42||N.lookahead)return A;for(X===1&&(G.adler=C(G.adler,Z,ue,0)),N.wrap=0,ue>=N.w_size&&(X===0&&(H(N.head),N.strstart=0,N.block_start=0,N.insert=0),oe=new y.Buf8(N.w_size),y.arraySet(oe,Z,ue-N.w_size,N.w_size,0),Z=oe,ue=N.w_size),ie=G.avail_in,ee=G.next_in,re=G.input,G.avail_in=ue,G.next_in=0,G.input=Z,x(N);N.lookahead>=3;){for(P=N.strstart,j=N.lookahead-2;N.ins_h=(N.ins_h<<N.hash_shift^N.window[P+3-1])&N.hash_mask,N.prev[P&N.w_mask]=N.head[N.ins_h],N.head[N.ins_h]=P,P++,--j;);N.strstart=P,N.lookahead=2,x(N)}return N.strstart+=N.lookahead,N.block_start=N.strstart,N.insert=N.lookahead,N.lookahead=0,N.match_length=N.prev_length=2,N.match_available=0,G.next_in=ee,G.input=re,G.avail_in=ie,N.wrap=X,0},m.deflateInfo="pako deflate (from Nodeca project)"},{"../utils/common":41,"./adler32":43,"./crc32":45,"./messages":51,"./trees":52}],47:[function(p,f,m){f.exports=function(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1}},{}],48:[function(p,f,m){f.exports=function(g,y){var v,C,b,T,A,I,D,F,B,U,H,R,L,_,w,S,x,E,M,O,V,Y,$,J,G;v=g.state,C=g.next_in,J=g.input,b=C+(g.avail_in-5),T=g.next_out,G=g.output,A=T-(y-g.avail_out),I=T+(g.avail_out-257),D=v.dmax,F=v.wsize,B=v.whave,U=v.wnext,H=v.window,R=v.hold,L=v.bits,_=v.lencode,w=v.distcode,S=(1<<v.lenbits)-1,x=(1<<v.distbits)-1;e:do{L<15&&(R+=J[C++]<<L,L+=8,R+=J[C++]<<L,L+=8),E=_[R&S];t:for(;;){if(R>>>=M=E>>>24,L-=M,(M=E>>>16&255)==0)G[T++]=65535&E;else{if(!(16&M)){if(!(64&M)){E=_[(65535&E)+(R&(1<<M)-1)];continue t}if(32&M){v.mode=12;break e}g.msg="invalid literal/length code",v.mode=30;break e}O=65535&E,(M&=15)&&(L<M&&(R+=J[C++]<<L,L+=8),O+=R&(1<<M)-1,R>>>=M,L-=M),L<15&&(R+=J[C++]<<L,L+=8,R+=J[C++]<<L,L+=8),E=w[R&x];i:for(;;){if(R>>>=M=E>>>24,L-=M,!(16&(M=E>>>16&255))){if(!(64&M)){E=w[(65535&E)+(R&(1<<M)-1)];continue i}g.msg="invalid distance code",v.mode=30;break e}if(V=65535&E,L<(M&=15)&&(R+=J[C++]<<L,(L+=8)<M&&(R+=J[C++]<<L,L+=8)),D<(V+=R&(1<<M)-1)){g.msg="invalid distance too far back",v.mode=30;break e}if(R>>>=M,L-=M,(M=T-A)<V){if(B<(M=V-M)&&v.sane){g.msg="invalid distance too far back",v.mode=30;break e}if($=H,(Y=0)===U){if(Y+=F-M,M<O){for(O-=M;G[T++]=H[Y++],--M;);Y=T-V,$=G}}else if(U<M){if(Y+=F+U-M,(M-=U)<O){for(O-=M;G[T++]=H[Y++],--M;);if(Y=0,U<O){for(O-=M=U;G[T++]=H[Y++],--M;);Y=T-V,$=G}}}else if(Y+=U-M,M<O){for(O-=M;G[T++]=H[Y++],--M;);Y=T-V,$=G}for(;2<O;)G[T++]=$[Y++],G[T++]=$[Y++],G[T++]=$[Y++],O-=3;O&&(G[T++]=$[Y++],1<O&&(G[T++]=$[Y++]))}else{for(Y=T-V;G[T++]=G[Y++],G[T++]=G[Y++],G[T++]=G[Y++],2<(O-=3););O&&(G[T++]=G[Y++],1<O&&(G[T++]=G[Y++]))}break}}break}}while(C<b&&T<I);C-=O=L>>3,R&=(1<<(L-=O<<3))-1,g.next_in=C,g.next_out=T,g.avail_in=C<b?b-C+5:5-(C-b),g.avail_out=T<I?I-T+257:257-(T-I),v.hold=R,v.bits=L}},{}],49:[function(p,f,m){var g=p("../utils/common"),y=p("./adler32"),v=p("./crc32"),C=p("./inffast"),b=p("./inftrees"),T=-2;function A(S){return(S>>>24&255)+(S>>>8&65280)+((65280&S)<<8)+((255&S)<<24)}function I(){this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new g.Buf16(320),this.work=new g.Buf16(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}function D(S){var x;return S&&S.state?(x=S.state,S.total_in=S.total_out=x.total=0,S.msg="",x.wrap&&(S.adler=1&x.wrap),x.mode=1,x.last=0,x.havedict=0,x.dmax=32768,x.head=null,x.hold=0,x.bits=0,x.lencode=x.lendyn=new g.Buf32(852),x.distcode=x.distdyn=new g.Buf32(592),x.sane=1,x.back=-1,0):T}function F(S){var x;return S&&S.state?((x=S.state).wsize=0,x.whave=0,x.wnext=0,D(S)):T}function B(S,x){var E,M;return S&&S.state?(M=S.state,x<0?(E=0,x=-x):(E=1+(x>>4),x<48&&(x&=15)),x&&(x<8||15<x)?T:(M.window!==null&&M.wbits!==x&&(M.window=null),M.wrap=E,M.wbits=x,F(S))):T}function U(S,x){var E,M;return S?(M=new I,(S.state=M).window=null,(E=B(S,x))!==0&&(S.state=null),E):T}var H,R,L=!0;function _(S){if(L){var x;for(H=new g.Buf32(512),R=new g.Buf32(32),x=0;x<144;)S.lens[x++]=8;for(;x<256;)S.lens[x++]=9;for(;x<280;)S.lens[x++]=7;for(;x<288;)S.lens[x++]=8;for(b(1,S.lens,0,288,H,0,S.work,{bits:9}),x=0;x<32;)S.lens[x++]=5;b(2,S.lens,0,32,R,0,S.work,{bits:5}),L=!1}S.lencode=H,S.lenbits=9,S.distcode=R,S.distbits=5}function w(S,x,E,M){var O,V=S.state;return V.window===null&&(V.wsize=1<<V.wbits,V.wnext=0,V.whave=0,V.window=new g.Buf8(V.wsize)),M>=V.wsize?(g.arraySet(V.window,x,E-V.wsize,V.wsize,0),V.wnext=0,V.whave=V.wsize):(M<(O=V.wsize-V.wnext)&&(O=M),g.arraySet(V.window,x,E-M,O,V.wnext),(M-=O)?(g.arraySet(V.window,x,E-M,M,0),V.wnext=M,V.whave=V.wsize):(V.wnext+=O,V.wnext===V.wsize&&(V.wnext=0),V.whave<V.wsize&&(V.whave+=O))),0}m.inflateReset=F,m.inflateReset2=B,m.inflateResetKeep=D,m.inflateInit=function(S){return U(S,15)},m.inflateInit2=U,m.inflate=function(S,x){var E,M,O,V,Y,$,J,G,Z,N,P,j,X,ie,ee,re,oe,ue,se,le,ne,fe,me,ge,ve=0,xe=new g.Buf8(4),De=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15];if(!S||!S.state||!S.output||!S.input&&S.avail_in!==0)return T;(E=S.state).mode===12&&(E.mode=13),Y=S.next_out,O=S.output,J=S.avail_out,V=S.next_in,M=S.input,$=S.avail_in,G=E.hold,Z=E.bits,N=$,P=J,fe=0;e:for(;;)switch(E.mode){case 1:if(E.wrap===0){E.mode=13;break}for(;Z<16;){if($===0)break e;$--,G+=M[V++]<<Z,Z+=8}if(2&E.wrap&&G===35615){xe[E.check=0]=255&G,xe[1]=G>>>8&255,E.check=v(E.check,xe,2,0),Z=G=0,E.mode=2;break}if(E.flags=0,E.head&&(E.head.done=!1),!(1&E.wrap)||(((255&G)<<8)+(G>>8))%31){S.msg="incorrect header check",E.mode=30;break}if((15&G)!=8){S.msg="unknown compression method",E.mode=30;break}if(Z-=4,ne=8+(15&(G>>>=4)),E.wbits===0)E.wbits=ne;else if(ne>E.wbits){S.msg="invalid window size",E.mode=30;break}E.dmax=1<<ne,S.adler=E.check=1,E.mode=512&G?10:12,Z=G=0;break;case 2:for(;Z<16;){if($===0)break e;$--,G+=M[V++]<<Z,Z+=8}if(E.flags=G,(255&E.flags)!=8){S.msg="unknown compression method",E.mode=30;break}if(57344&E.flags){S.msg="unknown header flags set",E.mode=30;break}E.head&&(E.head.text=G>>8&1),512&E.flags&&(xe[0]=255&G,xe[1]=G>>>8&255,E.check=v(E.check,xe,2,0)),Z=G=0,E.mode=3;case 3:for(;Z<32;){if($===0)break e;$--,G+=M[V++]<<Z,Z+=8}E.head&&(E.head.time=G),512&E.flags&&(xe[0]=255&G,xe[1]=G>>>8&255,xe[2]=G>>>16&255,xe[3]=G>>>24&255,E.check=v(E.check,xe,4,0)),Z=G=0,E.mode=4;case 4:for(;Z<16;){if($===0)break e;$--,G+=M[V++]<<Z,Z+=8}E.head&&(E.head.xflags=255&G,E.head.os=G>>8),512&E.flags&&(xe[0]=255&G,xe[1]=G>>>8&255,E.check=v(E.check,xe,2,0)),Z=G=0,E.mode=5;case 5:if(1024&E.flags){for(;Z<16;){if($===0)break e;$--,G+=M[V++]<<Z,Z+=8}E.length=G,E.head&&(E.head.extra_len=G),512&E.flags&&(xe[0]=255&G,xe[1]=G>>>8&255,E.check=v(E.check,xe,2,0)),Z=G=0}else E.head&&(E.head.extra=null);E.mode=6;case 6:if(1024&E.flags&&($<(j=E.length)&&(j=$),j&&(E.head&&(ne=E.head.extra_len-E.length,E.head.extra||(E.head.extra=new Array(E.head.extra_len)),g.arraySet(E.head.extra,M,V,j,ne)),512&E.flags&&(E.check=v(E.check,M,j,V)),$-=j,V+=j,E.length-=j),E.length))break e;E.length=0,E.mode=7;case 7:if(2048&E.flags){if($===0)break e;for(j=0;ne=M[V+j++],E.head&&ne&&E.length<65536&&(E.head.name+=String.fromCharCode(ne)),ne&&j<$;);if(512&E.flags&&(E.check=v(E.check,M,j,V)),$-=j,V+=j,ne)break e}else E.head&&(E.head.name=null);E.length=0,E.mode=8;case 8:if(4096&E.flags){if($===0)break e;for(j=0;ne=M[V+j++],E.head&&ne&&E.length<65536&&(E.head.comment+=String.fromCharCode(ne)),ne&&j<$;);if(512&E.flags&&(E.check=v(E.check,M,j,V)),$-=j,V+=j,ne)break e}else E.head&&(E.head.comment=null);E.mode=9;case 9:if(512&E.flags){for(;Z<16;){if($===0)break e;$--,G+=M[V++]<<Z,Z+=8}if(G!==(65535&E.check)){S.msg="header crc mismatch",E.mode=30;break}Z=G=0}E.head&&(E.head.hcrc=E.flags>>9&1,E.head.done=!0),S.adler=E.check=0,E.mode=12;break;case 10:for(;Z<32;){if($===0)break e;$--,G+=M[V++]<<Z,Z+=8}S.adler=E.check=A(G),Z=G=0,E.mode=11;case 11:if(E.havedict===0)return S.next_out=Y,S.avail_out=J,S.next_in=V,S.avail_in=$,E.hold=G,E.bits=Z,2;S.adler=E.check=1,E.mode=12;case 12:if(x===5||x===6)break e;case 13:if(E.last){G>>>=7&Z,Z-=7&Z,E.mode=27;break}for(;Z<3;){if($===0)break e;$--,G+=M[V++]<<Z,Z+=8}switch(E.last=1&G,Z-=1,3&(G>>>=1)){case 0:E.mode=14;break;case 1:if(_(E),E.mode=20,x!==6)break;G>>>=2,Z-=2;break e;case 2:E.mode=17;break;case 3:S.msg="invalid block type",E.mode=30}G>>>=2,Z-=2;break;case 14:for(G>>>=7&Z,Z-=7&Z;Z<32;){if($===0)break e;$--,G+=M[V++]<<Z,Z+=8}if((65535&G)!=(G>>>16^65535)){S.msg="invalid stored block lengths",E.mode=30;break}if(E.length=65535&G,Z=G=0,E.mode=15,x===6)break e;case 15:E.mode=16;case 16:if(j=E.length){if($<j&&(j=$),J<j&&(j=J),j===0)break e;g.arraySet(O,M,V,j,Y),$-=j,V+=j,J-=j,Y+=j,E.length-=j;break}E.mode=12;break;case 17:for(;Z<14;){if($===0)break e;$--,G+=M[V++]<<Z,Z+=8}if(E.nlen=257+(31&G),G>>>=5,Z-=5,E.ndist=1+(31&G),G>>>=5,Z-=5,E.ncode=4+(15&G),G>>>=4,Z-=4,286<E.nlen||30<E.ndist){S.msg="too many length or distance symbols",E.mode=30;break}E.have=0,E.mode=18;case 18:for(;E.have<E.ncode;){for(;Z<3;){if($===0)break e;$--,G+=M[V++]<<Z,Z+=8}E.lens[De[E.have++]]=7&G,G>>>=3,Z-=3}for(;E.have<19;)E.lens[De[E.have++]]=0;if(E.lencode=E.lendyn,E.lenbits=7,me={bits:E.lenbits},fe=b(0,E.lens,0,19,E.lencode,0,E.work,me),E.lenbits=me.bits,fe){S.msg="invalid code lengths set",E.mode=30;break}E.have=0,E.mode=19;case 19:for(;E.have<E.nlen+E.ndist;){for(;re=(ve=E.lencode[G&(1<<E.lenbits)-1])>>>16&255,oe=65535&ve,!((ee=ve>>>24)<=Z);){if($===0)break e;$--,G+=M[V++]<<Z,Z+=8}if(oe<16)G>>>=ee,Z-=ee,E.lens[E.have++]=oe;else{if(oe===16){for(ge=ee+2;Z<ge;){if($===0)break e;$--,G+=M[V++]<<Z,Z+=8}if(G>>>=ee,Z-=ee,E.have===0){S.msg="invalid bit length repeat",E.mode=30;break}ne=E.lens[E.have-1],j=3+(3&G),G>>>=2,Z-=2}else if(oe===17){for(ge=ee+3;Z<ge;){if($===0)break e;$--,G+=M[V++]<<Z,Z+=8}Z-=ee,ne=0,j=3+(7&(G>>>=ee)),G>>>=3,Z-=3}else{for(ge=ee+7;Z<ge;){if($===0)break e;$--,G+=M[V++]<<Z,Z+=8}Z-=ee,ne=0,j=11+(127&(G>>>=ee)),G>>>=7,Z-=7}if(E.have+j>E.nlen+E.ndist){S.msg="invalid bit length repeat",E.mode=30;break}for(;j--;)E.lens[E.have++]=ne}}if(E.mode===30)break;if(E.lens[256]===0){S.msg="invalid code -- missing end-of-block",E.mode=30;break}if(E.lenbits=9,me={bits:E.lenbits},fe=b(1,E.lens,0,E.nlen,E.lencode,0,E.work,me),E.lenbits=me.bits,fe){S.msg="invalid literal/lengths set",E.mode=30;break}if(E.distbits=6,E.distcode=E.distdyn,me={bits:E.distbits},fe=b(2,E.lens,E.nlen,E.ndist,E.distcode,0,E.work,me),E.distbits=me.bits,fe){S.msg="invalid distances set",E.mode=30;break}if(E.mode=20,x===6)break e;case 20:E.mode=21;case 21:if(6<=$&&258<=J){S.next_out=Y,S.avail_out=J,S.next_in=V,S.avail_in=$,E.hold=G,E.bits=Z,C(S,P),Y=S.next_out,O=S.output,J=S.avail_out,V=S.next_in,M=S.input,$=S.avail_in,G=E.hold,Z=E.bits,E.mode===12&&(E.back=-1);break}for(E.back=0;re=(ve=E.lencode[G&(1<<E.lenbits)-1])>>>16&255,oe=65535&ve,!((ee=ve>>>24)<=Z);){if($===0)break e;$--,G+=M[V++]<<Z,Z+=8}if(re&&!(240&re)){for(ue=ee,se=re,le=oe;re=(ve=E.lencode[le+((G&(1<<ue+se)-1)>>ue)])>>>16&255,oe=65535&ve,!(ue+(ee=ve>>>24)<=Z);){if($===0)break e;$--,G+=M[V++]<<Z,Z+=8}G>>>=ue,Z-=ue,E.back+=ue}if(G>>>=ee,Z-=ee,E.back+=ee,E.length=oe,re===0){E.mode=26;break}if(32&re){E.back=-1,E.mode=12;break}if(64&re){S.msg="invalid literal/length code",E.mode=30;break}E.extra=15&re,E.mode=22;case 22:if(E.extra){for(ge=E.extra;Z<ge;){if($===0)break e;$--,G+=M[V++]<<Z,Z+=8}E.length+=G&(1<<E.extra)-1,G>>>=E.extra,Z-=E.extra,E.back+=E.extra}E.was=E.length,E.mode=23;case 23:for(;re=(ve=E.distcode[G&(1<<E.distbits)-1])>>>16&255,oe=65535&ve,!((ee=ve>>>24)<=Z);){if($===0)break e;$--,G+=M[V++]<<Z,Z+=8}if(!(240&re)){for(ue=ee,se=re,le=oe;re=(ve=E.distcode[le+((G&(1<<ue+se)-1)>>ue)])>>>16&255,oe=65535&ve,!(ue+(ee=ve>>>24)<=Z);){if($===0)break e;$--,G+=M[V++]<<Z,Z+=8}G>>>=ue,Z-=ue,E.back+=ue}if(G>>>=ee,Z-=ee,E.back+=ee,64&re){S.msg="invalid distance code",E.mode=30;break}E.offset=oe,E.extra=15&re,E.mode=24;case 24:if(E.extra){for(ge=E.extra;Z<ge;){if($===0)break e;$--,G+=M[V++]<<Z,Z+=8}E.offset+=G&(1<<E.extra)-1,G>>>=E.extra,Z-=E.extra,E.back+=E.extra}if(E.offset>E.dmax){S.msg="invalid distance too far back",E.mode=30;break}E.mode=25;case 25:if(J===0)break e;if(j=P-J,E.offset>j){if((j=E.offset-j)>E.whave&&E.sane){S.msg="invalid distance too far back",E.mode=30;break}X=j>E.wnext?(j-=E.wnext,E.wsize-j):E.wnext-j,j>E.length&&(j=E.length),ie=E.window}else ie=O,X=Y-E.offset,j=E.length;for(J<j&&(j=J),J-=j,E.length-=j;O[Y++]=ie[X++],--j;);E.length===0&&(E.mode=21);break;case 26:if(J===0)break e;O[Y++]=E.length,J--,E.mode=21;break;case 27:if(E.wrap){for(;Z<32;){if($===0)break e;$--,G|=M[V++]<<Z,Z+=8}if(P-=J,S.total_out+=P,E.total+=P,P&&(S.adler=E.check=E.flags?v(E.check,O,P,Y-P):y(E.check,O,P,Y-P)),P=J,(E.flags?G:A(G))!==E.check){S.msg="incorrect data check",E.mode=30;break}Z=G=0}E.mode=28;case 28:if(E.wrap&&E.flags){for(;Z<32;){if($===0)break e;$--,G+=M[V++]<<Z,Z+=8}if(G!==(4294967295&E.total)){S.msg="incorrect length check",E.mode=30;break}Z=G=0}E.mode=29;case 29:fe=1;break e;case 30:fe=-3;break e;case 31:return-4;case 32:default:return T}return S.next_out=Y,S.avail_out=J,S.next_in=V,S.avail_in=$,E.hold=G,E.bits=Z,(E.wsize||P!==S.avail_out&&E.mode<30&&(E.mode<27||x!==4))&&w(S,S.output,S.next_out,P-S.avail_out)?(E.mode=31,-4):(N-=S.avail_in,P-=S.avail_out,S.total_in+=N,S.total_out+=P,E.total+=P,E.wrap&&P&&(S.adler=E.check=E.flags?v(E.check,O,P,S.next_out-P):y(E.check,O,P,S.next_out-P)),S.data_type=E.bits+(E.last?64:0)+(E.mode===12?128:0)+(E.mode===20||E.mode===15?256:0),(N==0&&P===0||x===4)&&fe===0&&(fe=-5),fe)},m.inflateEnd=function(S){if(!S||!S.state)return T;var x=S.state;return x.window&&(x.window=null),S.state=null,0},m.inflateGetHeader=function(S,x){var E;return S&&S.state&&2&(E=S.state).wrap?((E.head=x).done=!1,0):T},m.inflateSetDictionary=function(S,x){var E,M=x.length;return S&&S.state?(E=S.state).wrap!==0&&E.mode!==11?T:E.mode===11&&y(1,x,M,0)!==E.check?-3:w(S,x,M,M)?(E.mode=31,-4):(E.havedict=1,0):T},m.inflateInfo="pako inflate (from Nodeca project)"},{"../utils/common":41,"./adler32":43,"./crc32":45,"./inffast":48,"./inftrees":50}],50:[function(p,f,m){var g=p("../utils/common"),y=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0],v=[16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78],C=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0],b=[16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64];f.exports=function(T,A,I,D,F,B,U,H){var R,L,_,w,S,x,E,M,O,V=H.bits,Y=0,$=0,J=0,G=0,Z=0,N=0,P=0,j=0,X=0,ie=0,ee=null,re=0,oe=new g.Buf16(16),ue=new g.Buf16(16),se=null,le=0;for(Y=0;Y<=15;Y++)oe[Y]=0;for($=0;$<D;$++)oe[A[I+$]]++;for(Z=V,G=15;1<=G&&oe[G]===0;G--);if(G<Z&&(Z=G),G===0)return F[B++]=20971520,F[B++]=20971520,H.bits=1,0;for(J=1;J<G&&oe[J]===0;J++);for(Z<J&&(Z=J),Y=j=1;Y<=15;Y++)if(j<<=1,(j-=oe[Y])<0)return-1;if(0<j&&(T===0||G!==1))return-1;for(ue[1]=0,Y=1;Y<15;Y++)ue[Y+1]=ue[Y]+oe[Y];for($=0;$<D;$++)A[I+$]!==0&&(U[ue[A[I+$]]++]=$);if(x=T===0?(ee=se=U,19):T===1?(ee=y,re-=257,se=v,le-=257,256):(ee=C,se=b,-1),Y=J,S=B,P=$=ie=0,_=-1,w=(X=1<<(N=Z))-1,T===1&&852<X||T===2&&592<X)return 1;for(;;){for(E=Y-P,O=U[$]<x?(M=0,U[$]):U[$]>x?(M=se[le+U[$]],ee[re+U[$]]):(M=96,0),R=1<<Y-P,J=L=1<<N;F[S+(ie>>P)+(L-=R)]=E<<24|M<<16|O|0,L!==0;);for(R=1<<Y-1;ie&R;)R>>=1;if(R!==0?(ie&=R-1,ie+=R):ie=0,$++,--oe[Y]==0){if(Y===G)break;Y=A[I+U[$]]}if(Z<Y&&(ie&w)!==_){for(P===0&&(P=Z),S+=J,j=1<<(N=Y-P);N+P<G&&!((j-=oe[N+P])<=0);)N++,j<<=1;if(X+=1<<N,T===1&&852<X||T===2&&592<X)return 1;F[_=ie&w]=Z<<24|N<<16|S-B|0}}return ie!==0&&(F[S+ie]=Y-P<<24|64<<16|0),H.bits=Z,0}},{"../utils/common":41}],51:[function(p,f,m){f.exports={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"}},{}],52:[function(p,f,m){var g=p("../utils/common");function y(se){for(var le=se.length;0<=--le;)se[le]=0}var v=256,C=286,b=30,T=15,A=[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0],I=[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13],D=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7],F=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],B=new Array(576);y(B);var U=new Array(60);y(U);var H=new Array(512);y(H);var R=new Array(256);y(R);var L=new Array(29);y(L);var _,w,S,x=new Array(b);function E(se,le,ne,fe,me){this.static_tree=se,this.extra_bits=le,this.extra_base=ne,this.elems=fe,this.max_length=me,this.has_stree=se&&se.length}function M(se,le){this.dyn_tree=se,this.max_code=0,this.stat_desc=le}function O(se){return se<256?H[se]:H[256+(se>>>7)]}function V(se,le){se.pending_buf[se.pending++]=255&le,se.pending_buf[se.pending++]=le>>>8&255}function Y(se,le,ne){se.bi_valid>16-ne?(se.bi_buf|=le<<se.bi_valid&65535,V(se,se.bi_buf),se.bi_buf=le>>16-se.bi_valid,se.bi_valid+=ne-16):(se.bi_buf|=le<<se.bi_valid&65535,se.bi_valid+=ne)}function $(se,le,ne){Y(se,ne[2*le],ne[2*le+1])}function J(se,le){for(var ne=0;ne|=1&se,se>>>=1,ne<<=1,0<--le;);return ne>>>1}function G(se,le,ne){var fe,me,ge=new Array(16),ve=0;for(fe=1;fe<=T;fe++)ge[fe]=ve=ve+ne[fe-1]<<1;for(me=0;me<=le;me++){var xe=se[2*me+1];xe!==0&&(se[2*me]=J(ge[xe]++,xe))}}function Z(se){var le;for(le=0;le<C;le++)se.dyn_ltree[2*le]=0;for(le=0;le<b;le++)se.dyn_dtree[2*le]=0;for(le=0;le<19;le++)se.bl_tree[2*le]=0;se.dyn_ltree[512]=1,se.opt_len=se.static_len=0,se.last_lit=se.matches=0}function N(se){8<se.bi_valid?V(se,se.bi_buf):0<se.bi_valid&&(se.pending_buf[se.pending++]=se.bi_buf),se.bi_buf=0,se.bi_valid=0}function P(se,le,ne,fe){var me=2*le,ge=2*ne;return se[me]<se[ge]||se[me]===se[ge]&&fe[le]<=fe[ne]}function j(se,le,ne){for(var fe=se.heap[ne],me=ne<<1;me<=se.heap_len&&(me<se.heap_len&&P(le,se.heap[me+1],se.heap[me],se.depth)&&me++,!P(le,fe,se.heap[me],se.depth));)se.heap[ne]=se.heap[me],ne=me,me<<=1;se.heap[ne]=fe}function X(se,le,ne){var fe,me,ge,ve,xe=0;if(se.last_lit!==0)for(;fe=se.pending_buf[se.d_buf+2*xe]<<8|se.pending_buf[se.d_buf+2*xe+1],me=se.pending_buf[se.l_buf+xe],xe++,fe===0?$(se,me,le):($(se,(ge=R[me])+v+1,le),(ve=A[ge])!==0&&Y(se,me-=L[ge],ve),$(se,ge=O(--fe),ne),(ve=I[ge])!==0&&Y(se,fe-=x[ge],ve)),xe<se.last_lit;);$(se,256,le)}function ie(se,le){var ne,fe,me,ge=le.dyn_tree,ve=le.stat_desc.static_tree,xe=le.stat_desc.has_stree,De=le.stat_desc.elems,ze=-1;for(se.heap_len=0,se.heap_max=573,ne=0;ne<De;ne++)ge[2*ne]!==0?(se.heap[++se.heap_len]=ze=ne,se.depth[ne]=0):ge[2*ne+1]=0;for(;se.heap_len<2;)ge[2*(me=se.heap[++se.heap_len]=ze<2?++ze:0)]=1,se.depth[me]=0,se.opt_len--,xe&&(se.static_len-=ve[2*me+1]);for(le.max_code=ze,ne=se.heap_len>>1;1<=ne;ne--)j(se,ge,ne);for(me=De;ne=se.heap[1],se.heap[1]=se.heap[se.heap_len--],j(se,ge,1),fe=se.heap[1],se.heap[--se.heap_max]=ne,se.heap[--se.heap_max]=fe,ge[2*me]=ge[2*ne]+ge[2*fe],se.depth[me]=(se.depth[ne]>=se.depth[fe]?se.depth[ne]:se.depth[fe])+1,ge[2*ne+1]=ge[2*fe+1]=me,se.heap[1]=me++,j(se,ge,1),2<=se.heap_len;);se.heap[--se.heap_max]=se.heap[1],function(Ye,je){var ht,ut,dt,gt,Ze,Ve,Je=je.dyn_tree,ct=je.max_code,et=je.stat_desc.static_tree,ii=je.stat_desc.has_stree,_i=je.stat_desc.extra_bits,mt=je.stat_desc.extra_base,vi=je.stat_desc.max_length,ei=0;for(gt=0;gt<=T;gt++)Ye.bl_count[gt]=0;for(Je[2*Ye.heap[Ye.heap_max]+1]=0,ht=Ye.heap_max+1;ht<573;ht++)vi<(gt=Je[2*Je[2*(ut=Ye.heap[ht])+1]+1]+1)&&(gt=vi,ei++),Je[2*ut+1]=gt,ct<ut||(Ye.bl_count[gt]++,Ze=0,mt<=ut&&(Ze=_i[ut-mt]),Ve=Je[2*ut],Ye.opt_len+=Ve*(gt+Ze),ii&&(Ye.static_len+=Ve*(et[2*ut+1]+Ze)));if(ei!==0){do{for(gt=vi-1;Ye.bl_count[gt]===0;)gt--;Ye.bl_count[gt]--,Ye.bl_count[gt+1]+=2,Ye.bl_count[vi]--,ei-=2}while(0<ei);for(gt=vi;gt!==0;gt--)for(ut=Ye.bl_count[gt];ut!==0;)ct<(dt=Ye.heap[--ht])||(Je[2*dt+1]!==gt&&(Ye.opt_len+=(gt-Je[2*dt+1])*Je[2*dt],Je[2*dt+1]=gt),ut--)}}(se,le),G(ge,ze,se.bl_count)}function ee(se,le,ne){var fe,me,ge=-1,ve=le[1],xe=0,De=7,ze=4;for(ve===0&&(De=138,ze=3),le[2*(ne+1)+1]=65535,fe=0;fe<=ne;fe++)me=ve,ve=le[2*(fe+1)+1],++xe<De&&me===ve||(xe<ze?se.bl_tree[2*me]+=xe:me!==0?(me!==ge&&se.bl_tree[2*me]++,se.bl_tree[32]++):xe<=10?se.bl_tree[34]++:se.bl_tree[36]++,ge=me,ze=(xe=0)===ve?(De=138,3):me===ve?(De=6,3):(De=7,4))}function re(se,le,ne){var fe,me,ge=-1,ve=le[1],xe=0,De=7,ze=4;for(ve===0&&(De=138,ze=3),fe=0;fe<=ne;fe++)if(me=ve,ve=le[2*(fe+1)+1],!(++xe<De&&me===ve)){if(xe<ze)for(;$(se,me,se.bl_tree),--xe!=0;);else me!==0?(me!==ge&&($(se,me,se.bl_tree),xe--),$(se,16,se.bl_tree),Y(se,xe-3,2)):xe<=10?($(se,17,se.bl_tree),Y(se,xe-3,3)):($(se,18,se.bl_tree),Y(se,xe-11,7));ge=me,ze=(xe=0)===ve?(De=138,3):me===ve?(De=6,3):(De=7,4)}}y(x);var oe=!1;function ue(se,le,ne,fe){Y(se,0+(fe?1:0),3),function(me,ge,ve,xe){N(me),V(me,ve),V(me,~ve),g.arraySet(me.pending_buf,me.window,ge,ve,me.pending),me.pending+=ve}(se,le,ne)}m._tr_init=function(se){oe||(function(){var le,ne,fe,me,ge,ve=new Array(16);for(me=fe=0;me<28;me++)for(L[me]=fe,le=0;le<1<<A[me];le++)R[fe++]=me;for(R[fe-1]=me,me=ge=0;me<16;me++)for(x[me]=ge,le=0;le<1<<I[me];le++)H[ge++]=me;for(ge>>=7;me<b;me++)for(x[me]=ge<<7,le=0;le<1<<I[me]-7;le++)H[256+ge++]=me;for(ne=0;ne<=T;ne++)ve[ne]=0;for(le=0;le<=143;)B[2*le+1]=8,le++,ve[8]++;for(;le<=255;)B[2*le+1]=9,le++,ve[9]++;for(;le<=279;)B[2*le+1]=7,le++,ve[7]++;for(;le<=287;)B[2*le+1]=8,le++,ve[8]++;for(G(B,287,ve),le=0;le<b;le++)U[2*le+1]=5,U[2*le]=J(le,5);_=new E(B,A,257,C,T),w=new E(U,I,0,b,T),S=new E(new Array(0),D,0,19,7)}(),oe=!0),se.l_desc=new M(se.dyn_ltree,_),se.d_desc=new M(se.dyn_dtree,w),se.bl_desc=new M(se.bl_tree,S),se.bi_buf=0,se.bi_valid=0,Z(se)},m._tr_stored_block=ue,m._tr_flush_block=function(se,le,ne,fe){var me,ge,ve=0;0<se.level?(se.strm.data_type===2&&(se.strm.data_type=function(xe){var De,ze=4093624447;for(De=0;De<=31;De++,ze>>>=1)if(1&ze&&xe.dyn_ltree[2*De]!==0)return 0;if(xe.dyn_ltree[18]!==0||xe.dyn_ltree[20]!==0||xe.dyn_ltree[26]!==0)return 1;for(De=32;De<v;De++)if(xe.dyn_ltree[2*De]!==0)return 1;return 0}(se)),ie(se,se.l_desc),ie(se,se.d_desc),ve=function(xe){var De;for(ee(xe,xe.dyn_ltree,xe.l_desc.max_code),ee(xe,xe.dyn_dtree,xe.d_desc.max_code),ie(xe,xe.bl_desc),De=18;3<=De&&xe.bl_tree[2*F[De]+1]===0;De--);return xe.opt_len+=3*(De+1)+5+5+4,De}(se),me=se.opt_len+3+7>>>3,(ge=se.static_len+3+7>>>3)<=me&&(me=ge)):me=ge=ne+5,ne+4<=me&&le!==-1?ue(se,le,ne,fe):se.strategy===4||ge===me?(Y(se,2+(fe?1:0),3),X(se,B,U)):(Y(se,4+(fe?1:0),3),function(xe,De,ze,Ye){var je;for(Y(xe,De-257,5),Y(xe,ze-1,5),Y(xe,Ye-4,4),je=0;je<Ye;je++)Y(xe,xe.bl_tree[2*F[je]+1],3);re(xe,xe.dyn_ltree,De-1),re(xe,xe.dyn_dtree,ze-1)}(se,se.l_desc.max_code+1,se.d_desc.max_code+1,ve+1),X(se,se.dyn_ltree,se.dyn_dtree)),Z(se),fe&&N(se)},m._tr_tally=function(se,le,ne){return se.pending_buf[se.d_buf+2*se.last_lit]=le>>>8&255,se.pending_buf[se.d_buf+2*se.last_lit+1]=255&le,se.pending_buf[se.l_buf+se.last_lit]=255&ne,se.last_lit++,le===0?se.dyn_ltree[2*ne]++:(se.matches++,le--,se.dyn_ltree[2*(R[ne]+v+1)]++,se.dyn_dtree[2*O(le)]++),se.last_lit===se.lit_bufsize-1},m._tr_align=function(se){Y(se,2,3),$(se,256,B),function(le){le.bi_valid===16?(V(le,le.bi_buf),le.bi_buf=0,le.bi_valid=0):8<=le.bi_valid&&(le.pending_buf[le.pending++]=255&le.bi_buf,le.bi_buf>>=8,le.bi_valid-=8)}(se)}},{"../utils/common":41}],53:[function(p,f,m){f.exports=function(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}},{}],54:[function(p,f,m){(function(g){(function(y,v){if(!y.setImmediate){var C,b,T,A,I=1,D={},F=!1,B=y.document,U=Object.getPrototypeOf&&Object.getPrototypeOf(y);U=U&&U.setTimeout?U:y,C={}.toString.call(y.process)==="[object process]"?function(_){n.nextTick(function(){R(_)})}:function(){if(y.postMessage&&!y.importScripts){var _=!0,w=y.onmessage;return y.onmessage=function(){_=!1},y.postMessage("","*"),y.onmessage=w,_}}()?(A="setImmediate$"+Math.random()+"$",y.addEventListener?y.addEventListener("message",L,!1):y.attachEvent("onmessage",L),function(_){y.postMessage(A+_,"*")}):y.MessageChannel?((T=new MessageChannel).port1.onmessage=function(_){R(_.data)},function(_){T.port2.postMessage(_)}):B&&"onreadystatechange"in B.createElement("script")?(b=B.documentElement,function(_){var w=B.createElement("script");w.onreadystatechange=function(){R(_),w.onreadystatechange=null,b.removeChild(w),w=null},b.appendChild(w)}):function(_){setTimeout(R,0,_)},U.setImmediate=function(_){typeof _!="function"&&(_=new Function(""+_));for(var w=new Array(arguments.length-1),S=0;S<w.length;S++)w[S]=arguments[S+1];var x={callback:_,args:w};return D[I]=x,C(I),I++},U.clearImmediate=H}function H(_){delete D[_]}function R(_){if(F)setTimeout(R,0,_);else{var w=D[_];if(w){F=!0;try{(function(S){var x=S.callback,E=S.args;switch(E.length){case 0:x();break;case 1:x(E[0]);break;case 2:x(E[0],E[1]);break;case 3:x(E[0],E[1],E[2]);break;default:x.apply(void 0,E)}})(w)}finally{H(_),F=!1}}}}function L(_){_.source===y&&typeof _.data=="string"&&_.data.indexOf(A)===0&&R(+_.data.slice(A.length))}})(typeof self>"u"?g===void 0?this:g:self)}).call(this,o!==void 0?o:typeof self<"u"?self:typeof window<"u"?window:{})},{}]},{},[10])(10)})}).call(this)}).call(this,i("_process"),typeof zt<"u"?zt:typeof self<"u"?self:typeof window<"u"?window:{},i("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],i("timers").setImmediate)},{_process:467,buffer:220,timers:523}],442:[function(i,s,r){(function(n){(function(){var o=/[\\^$.*+?()[\]{}|]/g,a=RegExp(o.source),l=typeof n=="object"&&n&&n.Object===Object&&n,c=typeof self=="object"&&self&&self.Object===Object&&self,u=l||c||Function("return this")(),d=Object.prototype.toString,h=u.Symbol,p=h?h.prototype:void 0,f=p?p.toString:void 0;function m(g){if(typeof g=="string")return g;if(function(v){return typeof v=="symbol"||function(C){return!!C&&typeof C=="object"}(v)&&d.call(v)=="[object Symbol]"}(g))return f?f.call(g):"";var y=g+"";return y=="0"&&1/g==-1/0?"-0":y}s.exports=function(g){var y;return(g=(y=g)==null?"":m(y))&&a.test(g)?g.replace(o,"\\$&"):g}}).call(this)}).call(this,typeof zt<"u"?zt:typeof self<"u"?self:typeof window<"u"?window:{})},{}],443:[function(i,s,r){(function(n){(function(){var o="[object Arguments]",a="[object Map]",l="[object Object]",c="[object Set]",u=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,d=/^\w*$/,h=/^\./,p=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,f=/\\(\\)?/g,m=/^\[object .+?Constructor\]$/,g=/^(?:0|[1-9]\d*)$/,y={};y["[object Float32Array]"]=y["[object Float64Array]"]=y["[object Int8Array]"]=y["[object Int16Array]"]=y["[object Int32Array]"]=y["[object Uint8Array]"]=y["[object Uint8ClampedArray]"]=y["[object Uint16Array]"]=y["[object Uint32Array]"]=!0,y[o]=y["[object Array]"]=y["[object ArrayBuffer]"]=y["[object Boolean]"]=y["[object DataView]"]=y["[object Date]"]=y["[object Error]"]=y["[object Function]"]=y[a]=y["[object Number]"]=y[l]=y["[object RegExp]"]=y[c]=y["[object String]"]=y["[object WeakMap]"]=!1;var v=typeof n=="object"&&n&&n.Object===Object&&n,C=typeof self=="object"&&self&&self.Object===Object&&self,b=v||C||Function("return this")(),T=typeof r=="object"&&r&&!r.nodeType&&r,A=T&&typeof s=="object"&&s&&!s.nodeType&&s,I=A&&A.exports===T&&v.process,D=function(){try{return I&&I.binding("util")}catch{}}(),F=D&&D.isTypedArray;function B(ae,we,Ie,Le){for(var at=-1,He=ae?ae.length:0;++at<He;){var We=ae[at];we(Le,We,Ie(We),ae)}return Le}function U(ae,we){for(var Ie=-1,Le=ae?ae.length:0;++Ie<Le;)if(we(ae[Ie],Ie,ae))return!0;return!1}function H(ae){var we=!1;if(ae!=null&&typeof ae.toString!="function")try{we=!!(ae+"")}catch{}return we}function R(ae){var we=-1,Ie=Array(ae.size);return ae.forEach(function(Le,at){Ie[++we]=[at,Le]}),Ie}function L(ae){var we=-1,Ie=Array(ae.size);return ae.forEach(function(Le){Ie[++we]=Le}),Ie}var _,w,S,x=Array.prototype,E=Function.prototype,M=Object.prototype,O=b["__core-js_shared__"],V=(_=/[^.]+$/.exec(O&&O.keys&&O.keys.IE_PROTO||""))?"Symbol(src)_1."+_:"",Y=E.toString,$=M.hasOwnProperty,J=M.toString,G=RegExp("^"+Y.call($).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),Z=b.Symbol,N=b.Uint8Array,P=M.propertyIsEnumerable,j=x.splice,X=(w=Object.keys,S=Object,function(ae){return w(S(ae))}),ie=xt(b,"DataView"),ee=xt(b,"Map"),re=xt(b,"Promise"),oe=xt(b,"Set"),ue=xt(b,"WeakMap"),se=xt(Object,"create"),le=be(ie),ne=be(ee),fe=be(re),me=be(oe),ge=be(ue),ve=Z?Z.prototype:void 0,xe=ve?ve.valueOf:void 0,De=ve?ve.toString:void 0;function ze(ae){var we=-1,Ie=ae?ae.length:0;for(this.clear();++we<Ie;){var Le=ae[we];this.set(Le[0],Le[1])}}function Ye(ae){var we=-1,Ie=ae?ae.length:0;for(this.clear();++we<Ie;){var Le=ae[we];this.set(Le[0],Le[1])}}function je(ae){var we=-1,Ie=ae?ae.length:0;for(this.clear();++we<Ie;){var Le=ae[we];this.set(Le[0],Le[1])}}function ht(ae){var we=-1,Ie=ae?ae.length:0;for(this.__data__=new je;++we<Ie;)this.add(ae[we])}function ut(ae){this.__data__=new Ye(ae)}function dt(ae,we){var Ie=bt(ae)||Rt(ae)?function(We,oi){for(var Ht=-1,Xt=Array(We);++Ht<We;)Xt[Ht]=oi(Ht);return Xt}(ae.length,String):[],Le=Ie.length,at=!!Le;for(var He in ae)!$.call(ae,He)||at&&(He=="length"||Fi(He,Le))||Ie.push(He);return Ie}function gt(ae,we){for(var Ie=ae.length;Ie--;)if(Ke(ae[Ie][0],we))return Ie;return-1}function Ze(ae,we,Ie,Le){return Je(ae,function(at,He,We){we(Le,at,Ie(at),We)}),Le}ze.prototype.clear=function(){this.__data__=se?se(null):{}},ze.prototype.delete=function(ae){return this.has(ae)&&delete this.__data__[ae]},ze.prototype.get=function(ae){var we=this.__data__;if(se){var Ie=we[ae];return Ie==="__lodash_hash_undefined__"?void 0:Ie}return $.call(we,ae)?we[ae]:void 0},ze.prototype.has=function(ae){var we=this.__data__;return se?we[ae]!==void 0:$.call(we,ae)},ze.prototype.set=function(ae,we){return this.__data__[ae]=se&&we===void 0?"__lodash_hash_undefined__":we,this},Ye.prototype.clear=function(){this.__data__=[]},Ye.prototype.delete=function(ae){var we=this.__data__,Ie=gt(we,ae);return!(Ie<0)&&(Ie==we.length-1?we.pop():j.call(we,Ie,1),!0)},Ye.prototype.get=function(ae){var we=this.__data__,Ie=gt(we,ae);return Ie<0?void 0:we[Ie][1]},Ye.prototype.has=function(ae){return gt(this.__data__,ae)>-1},Ye.prototype.set=function(ae,we){var Ie=this.__data__,Le=gt(Ie,ae);return Le<0?Ie.push([ae,we]):Ie[Le][1]=we,this},je.prototype.clear=function(){this.__data__={hash:new ze,map:new(ee||Ye),string:new ze}},je.prototype.delete=function(ae){return yi(this,ae).delete(ae)},je.prototype.get=function(ae){return yi(this,ae).get(ae)},je.prototype.has=function(ae){return yi(this,ae).has(ae)},je.prototype.set=function(ae,we){return yi(this,ae).set(ae,we),this},ht.prototype.add=ht.prototype.push=function(ae){return this.__data__.set(ae,"__lodash_hash_undefined__"),this},ht.prototype.has=function(ae){return this.__data__.has(ae)},ut.prototype.clear=function(){this.__data__=new Ye},ut.prototype.delete=function(ae){return this.__data__.delete(ae)},ut.prototype.get=function(ae){return this.__data__.get(ae)},ut.prototype.has=function(ae){return this.__data__.has(ae)},ut.prototype.set=function(ae,we){var Ie=this.__data__;if(Ie instanceof Ye){var Le=Ie.__data__;if(!ee||Le.length<199)return Le.push([ae,we]),this;Ie=this.__data__=new je(Le)}return Ie.set(ae,we),this};var Ve,Je=(Ve=function(ae,we){return ae&&ct(ae,we,Us)},function(ae,we){if(ae==null)return ae;if(!pt(ae))return Ve(ae,we);for(var Ie=ae.length,Le=-1,at=Object(ae);++Le<Ie&&we(at[Le],Le,at)!==!1;);return ae}),ct=function(ae){return function(we,Ie,Le){for(var at=-1,He=Object(we),We=Le(we),oi=We.length;oi--;){var Ht=We[++at];if(Ie(He[Ht],Ht,He)===!1)break}return we}}();function et(ae,we){for(var Ie=0,Le=(we=At(we,ae)?[we]:It(we)).length;ae!=null&&Ie<Le;)ae=ae[he(we[Ie++])];return Ie&&Ie==Le?ae:void 0}function ii(ae,we){return ae!=null&&we in Object(ae)}function _i(ae,we,Ie,Le,at){return ae===we||(ae==null||we==null||!qt(ae)&&!gs(we)?ae!=ae&&we!=we:function(He,We,oi,Ht,Xt,wt){var Di=bt(He),Pi=bt(We),ki="[object Array]",us="[object Array]";Di||(ki=(ki=ui(He))==o?l:ki),Pi||(us=(us=ui(We))==o?l:us);var er=ki==l&&!H(He),jr=us==l&&!H(We),Qo=ki==us;if(Qo&&!er)return wt||(wt=new ut),Di||js(He)?Gi(He,We,oi,Ht,Xt,wt):function(Ii,hi,Uc,Dd,A0,zn,Rl){switch(Uc){case"[object DataView]":if(Ii.byteLength!=hi.byteLength||Ii.byteOffset!=hi.byteOffset)return!1;Ii=Ii.buffer,hi=hi.buffer;case"[object ArrayBuffer]":return!(Ii.byteLength!=hi.byteLength||!Dd(new N(Ii),new N(hi)));case"[object Boolean]":case"[object Date]":case"[object Number]":return Ke(+Ii,+hi);case"[object Error]":return Ii.name==hi.name&&Ii.message==hi.message;case"[object RegExp]":case"[object String]":return Ii==hi+"";case a:var Wc=R;case c:var Mm=2&zn;if(Wc||(Wc=L),Ii.size!=hi.size&&!Mm)return!1;var R0=Rl.get(Ii);if(R0)return R0==hi;zn|=1,Rl.set(Ii,hi);var Dp=Gi(Wc(Ii),Wc(hi),Dd,A0,zn,Rl);return Rl.delete(Ii),Dp;case"[object Symbol]":if(xe)return xe.call(Ii)==xe.call(hi)}return!1}(He,We,ki,oi,Ht,Xt,wt);if(!(2&Xt)){var Md=er&&$.call(He,"__wrapped__"),Ap=jr&&$.call(We,"__wrapped__");if(Md||Ap){var Rp=Md?He.value():He,Mp=Ap?We.value():We;return wt||(wt=new ut),oi(Rp,Mp,Ht,Xt,wt)}}return Qo?(wt||(wt=new ut),function(Ii,hi,Uc,Dd,A0,zn){var Rl=2&A0,Wc=Us(Ii),Mm=Wc.length,R0=Us(hi).length;if(Mm!=R0&&!Rl)return!1;for(var Dp=Mm;Dp--;){var zc=Wc[Dp];if(!(Rl?zc in hi:$.call(hi,zc)))return!1}var I2=zn.get(Ii);if(I2&&zn.get(hi))return I2==hi;var M0=!0;zn.set(Ii,hi),zn.set(hi,Ii);for(var s1=Rl;++Dp<Mm;){zc=Wc[Dp];var D0=Ii[zc],P0=hi[zc];if(Dd)var F2=Rl?Dd(P0,D0,zc,hi,Ii,zn):Dd(D0,P0,zc,Ii,hi,zn);if(!(F2===void 0?D0===P0||Uc(D0,P0,Dd,A0,zn):F2)){M0=!1;break}s1||(s1=zc=="constructor")}if(M0&&!s1){var I0=Ii.constructor,F0=hi.constructor;I0==F0||!("constructor"in Ii)||!("constructor"in hi)||typeof I0=="function"&&I0 instanceof I0&&typeof F0=="function"&&F0 instanceof F0||(M0=!1)}return zn.delete(Ii),zn.delete(hi),M0}(He,We,oi,Ht,Xt,wt)):!1}(ae,we,_i,Ie,Le,at))}function mt(ae){return!(!qt(ae)||function(we){return!!V&&V in we}(ae))&&(kt(ae)||H(ae)?G:m).test(be(ae))}function vi(ae){return typeof ae=="function"?ae:ae==null?hn:typeof ae=="object"?bt(ae)?function(Le,at){return At(Le)&&xi(at)?Li(he(Le),at):function(He){var We=function(oi,Ht,Xt){var wt=oi==null?void 0:et(oi,Ht);return wt===void 0?Xt:wt}(He,Le);return We===void 0&&We===at?function(oi,Ht){return oi!=null&&function(Xt,wt,Di){wt=At(wt,Xt)?[wt]:It(wt);for(var Pi,ki=-1,us=wt.length;++ki<us;){var er=he(wt[ki]);if(!(Pi=Xt!=null&&Di(Xt,er)))break;Xt=Xt[er]}return Pi||!!(us=Xt?Xt.length:0)&&Pt(us)&&Fi(er,us)&&(bt(Xt)||Rt(Xt))}(oi,Ht,ii)}(He,Le):_i(at,We,void 0,3)}}(ae[0],ae[1]):function(Le){var at=function(He){for(var We=Us(He),oi=We.length;oi--;){var Ht=We[oi],Xt=He[Ht];We[oi]=[Ht,Xt,xi(Xt)]}return We}(Le);return at.length==1&&at[0][2]?Li(at[0][0],at[0][1]):function(He){return He===Le||function(We,oi,Ht,Xt){var wt=Ht.length,Di=wt;if(We==null)return!Di;for(We=Object(We);wt--;){var Pi=Ht[wt];if(Pi[2]?Pi[1]!==We[Pi[0]]:!(Pi[0]in We))return!1}for(;++wt<Di;){var ki=(Pi=Ht[wt])[0],us=We[ki],er=Pi[1];if(Pi[2]){if(us===void 0&&!(ki in We))return!1}else{var jr=new ut,Qo;if(!(Qo===void 0?_i(er,us,Xt,3,jr):Qo))return!1}}return!0}(He,Le,at)}}(ae):At(we=ae)?(Ie=he(we),function(Le){return Le==null?void 0:Le[Ie]}):function(Le){return function(at){return et(at,Le)}}(we);var we,Ie}function ei(ae){if(Ie=(we=ae)&&we.constructor,Le=typeof Ie=="function"&&Ie.prototype||M,we!==Le)return X(ae);var we,Ie,Le,at=[];for(var He in Object(ae))$.call(ae,He)&&He!="constructor"&&at.push(He);return at}function It(ae){return bt(ae)?ae:Gt(ae)}function Gi(ae,we,Ie,Le,at,He){var We=2&at,oi=ae.length,Ht=we.length;if(oi!=Ht&&!(We&&Ht>oi))return!1;var Xt=He.get(ae);if(Xt&&He.get(we))return Xt==we;var wt=-1,Di=!0,Pi=1&at?new ht:void 0;for(He.set(ae,we),He.set(we,ae);++wt<oi;){var ki=ae[wt],us=we[wt];if(Le)var er=We?Le(us,ki,wt,we,ae,He):Le(ki,us,wt,ae,we,He);if(er!==void 0){if(er)continue;Di=!1;break}if(Pi){if(!U(we,function(jr,Qo){if(!Pi.has(Qo)&&(ki===jr||Ie(ki,jr,Le,at,He)))return Pi.add(Qo)})){Di=!1;break}}else if(ki!==us&&!Ie(ki,us,Le,at,He)){Di=!1;break}}return He.delete(ae),He.delete(we),Di}function yi(ae,we){var Ie,Le,at=ae.__data__;return((Le=typeof(Ie=we))=="string"||Le=="number"||Le=="symbol"||Le=="boolean"?Ie!=="__proto__":Ie===null)?at[typeof we=="string"?"string":"hash"]:at.map}function xt(ae,we){var Ie=function(Le,at){return Le==null?void 0:Le[at]}(ae,we);return mt(Ie)?Ie:void 0}var ui=function(ae){return J.call(ae)};function Fi(ae,we){return!!(we=we??9007199254740991)&&(typeof ae=="number"||g.test(ae))&&ae>-1&&ae%1==0&&ae<we}function At(ae,we){if(bt(ae))return!1;var Ie=typeof ae;return!(Ie!="number"&&Ie!="symbol"&&Ie!="boolean"&&ae!=null&&!ji(ae))||d.test(ae)||!u.test(ae)||we!=null&&ae in Object(we)}function xi(ae){return ae==ae&&!qt(ae)}function Li(ae,we){return function(Ie){return Ie!=null&&Ie[ae]===we&&(we!==void 0||ae in Object(Ie))}}(ie&&ui(new ie(new ArrayBuffer(1)))!="[object DataView]"||ee&&ui(new ee)!=a||re&&ui(re.resolve())!="[object Promise]"||oe&&ui(new oe)!=c||ue&&ui(new ue)!="[object WeakMap]")&&(ui=function(ae){var we=J.call(ae),Ie=we==l?ae.constructor:void 0,Le=Ie?be(Ie):void 0;if(Le)switch(Le){case le:return"[object DataView]";case ne:return a;case fe:return"[object Promise]";case me:return c;case ge:return"[object WeakMap]"}return we});var Gt=Ct(function(ae){var we;ae=(we=ae)==null?"":function(Le){if(typeof Le=="string")return Le;if(ji(Le))return De?De.call(Le):"";var at=Le+"";return at=="0"&&1/Le==-1/0?"-0":at}(we);var Ie=[];return h.test(ae)&&Ie.push(""),ae.replace(p,function(Le,at,He,We){Ie.push(He?We.replace(f,"$1"):at||Le)}),Ie});function he(ae){if(typeof ae=="string"||ji(ae))return ae;var we=ae+"";return we=="0"&&1/ae==-1/0?"-0":we}function be(ae){if(ae!=null){try{return Y.call(ae)}catch{}try{return ae+""}catch{}}return""}var Re,Ue=(Re=function(ae,we,Ie){$.call(ae,Ie)?ae[Ie].push(we):ae[Ie]=[we]},function(ae,we){var Ie=bt(ae)?B:Ze,Le={};return Ie(ae,Re,vi(we),Le)});function Ct(ae,we){if(typeof ae!="function"||we&&typeof we!="function")throw new TypeError("Expected a function");var Ie=function(){var Le=arguments,at=we?we.apply(this,Le):Le[0],He=Ie.cache;if(He.has(at))return He.get(at);var We=ae.apply(this,Le);return Ie.cache=He.set(at,We),We};return Ie.cache=new(Ct.Cache||je),Ie}function Ke(ae,we){return ae===we||ae!=ae&&we!=we}function Rt(ae){return function(we){return gs(we)&&pt(we)}(ae)&&$.call(ae,"callee")&&(!P.call(ae,"callee")||J.call(ae)==o)}Ct.Cache=je;var bt=Array.isArray;function pt(ae){return ae!=null&&Pt(ae.length)&&!kt(ae)}function kt(ae){var we=qt(ae)?J.call(ae):"";return we=="[object Function]"||we=="[object GeneratorFunction]"}function Pt(ae){return typeof ae=="number"&&ae>-1&&ae%1==0&&ae<=9007199254740991}function qt(ae){var we=typeof ae;return!!ae&&(we=="object"||we=="function")}function gs(ae){return!!ae&&typeof ae=="object"}function ji(ae){return typeof ae=="symbol"||gs(ae)&&J.call(ae)=="[object Symbol]"}var js=F?function(ae){return function(we){return ae(we)}}(F):function(ae){return gs(ae)&&Pt(ae.length)&&!!y[J.call(ae)]};function Us(ae){return pt(ae)?dt(ae):ei(ae)}function hn(ae){return ae}s.exports=Ue}).call(this)}).call(this,typeof zt<"u"?zt:typeof self<"u"?self:typeof window<"u"?window:{})},{}],444:[function(i,s,r){var n=Object.prototype.toString;s.exports=function(o){return o===!0||o===!1||function(a){return!!a&&typeof a=="object"}(o)&&n.call(o)=="[object Boolean]"}},{}],445:[function(i,s,r){(function(n){(function(){var o="[object Arguments]",a="[object Map]",l="[object Object]",c="[object Set]",u=/^\[object .+?Constructor\]$/,d=/^(?:0|[1-9]\d*)$/,h={};h["[object Float32Array]"]=h["[object Float64Array]"]=h["[object Int8Array]"]=h["[object Int16Array]"]=h["[object Int32Array]"]=h["[object Uint8Array]"]=h["[object Uint8ClampedArray]"]=h["[object Uint16Array]"]=h["[object Uint32Array]"]=!0,h[o]=h["[object Array]"]=h["[object ArrayBuffer]"]=h["[object Boolean]"]=h["[object DataView]"]=h["[object Date]"]=h["[object Error]"]=h["[object Function]"]=h[a]=h["[object Number]"]=h[l]=h["[object RegExp]"]=h[c]=h["[object String]"]=h["[object WeakMap]"]=!1;var p=typeof n=="object"&&n&&n.Object===Object&&n,f=typeof self=="object"&&self&&self.Object===Object&&self,m=p||f||Function("return this")(),g=typeof r=="object"&&r&&!r.nodeType&&r,y=g&&typeof s=="object"&&s&&!s.nodeType&&s,v=y&&y.exports===g,C=v&&p.process,b=function(){try{return C&&C.binding&&C.binding("util")}catch{}}(),T=b&&b.isTypedArray;function A(he,be){for(var Re=-1,Ue=he==null?0:he.length;++Re<Ue;)if(be(he[Re],Re,he))return!0;return!1}function I(he){var be=-1,Re=Array(he.size);return he.forEach(function(Ue,Ct){Re[++be]=[Ct,Ue]}),Re}function D(he){var be=-1,Re=Array(he.size);return he.forEach(function(Ue){Re[++be]=Ue}),Re}var F,B,U,H=Array.prototype,R=Function.prototype,L=Object.prototype,_=m["__core-js_shared__"],w=R.toString,S=L.hasOwnProperty,x=(F=/[^.]+$/.exec(_&&_.keys&&_.keys.IE_PROTO||""))?"Symbol(src)_1."+F:"",E=L.toString,M=RegExp("^"+w.call(S).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),O=v?m.Buffer:void 0,V=m.Symbol,Y=m.Uint8Array,$=L.propertyIsEnumerable,J=H.splice,G=V?V.toStringTag:void 0,Z=Object.getOwnPropertySymbols,N=O?O.isBuffer:void 0,P=(B=Object.keys,U=Object,function(he){return B(U(he))}),j=ii(m,"DataView"),X=ii(m,"Map"),ie=ii(m,"Promise"),ee=ii(m,"Set"),re=ii(m,"WeakMap"),oe=ii(Object,"create"),ue=ei(j),se=ei(X),le=ei(ie),ne=ei(ee),fe=ei(re),me=V?V.prototype:void 0,ge=me?me.valueOf:void 0;function ve(he){var be=-1,Re=he==null?0:he.length;for(this.clear();++be<Re;){var Ue=he[be];this.set(Ue[0],Ue[1])}}function xe(he){var be=-1,Re=he==null?0:he.length;for(this.clear();++be<Re;){var Ue=he[be];this.set(Ue[0],Ue[1])}}function De(he){var be=-1,Re=he==null?0:he.length;for(this.clear();++be<Re;){var Ue=he[be];this.set(Ue[0],Ue[1])}}function ze(he){var be=-1,Re=he==null?0:he.length;for(this.__data__=new De;++be<Re;)this.add(he[be])}function Ye(he){var be=this.__data__=new xe(he);this.size=be.size}function je(he,be){var Re=yi(he),Ue=!Re&&Gi(he),Ct=!Re&&!Ue&&xt(he),Ke=!Re&&!Ue&&!Ct&&Li(he),Rt=Re||Ue||Ct||Ke,bt=Rt?function(Pt,qt){for(var gs=-1,ji=Array(Pt);++gs<Pt;)ji[gs]=qt(gs);return ji}(he.length,String):[],pt=bt.length;for(var kt in he)!S.call(he,kt)||Rt&&(kt=="length"||Ct&&(kt=="offset"||kt=="parent")||Ke&&(kt=="buffer"||kt=="byteLength"||kt=="byteOffset")||vi(kt,pt))||bt.push(kt);return bt}function ht(he,be){for(var Re=he.length;Re--;)if(It(he[Re][0],be))return Re;return-1}function ut(he){return he==null?he===void 0?"[object Undefined]":"[object Null]":G&&G in Object(he)?function(be){var Re=S.call(be,G),Ue=be[G];try{be[G]=void 0;var Ct=!0}catch{}var Ke=E.call(be);return Ct&&(Re?be[G]=Ue:delete be[G]),Ke}(he):function(be){return E.call(be)}(he)}function dt(he){return xi(he)&&ut(he)==o}function gt(he,be,Re,Ue,Ct){return he===be||(he==null||be==null||!xi(he)&&!xi(be)?he!=he&&be!=be:function(Ke,Rt,bt,pt,kt,Pt){var qt=yi(Ke),gs=yi(Rt),ji=qt?"[object Array]":mt(Ke),js=gs?"[object Array]":mt(Rt),Us=(ji=ji==o?l:ji)==l,hn=(js=js==o?l:js)==l,ae=ji==js;if(ae&&xt(Ke)){if(!xt(Rt))return!1;qt=!0,Us=!1}if(ae&&!Us)return Pt||(Pt=new Ye),qt||Li(Ke)?Je(Ke,Rt,bt,pt,kt,Pt):function(He,We,oi,Ht,Xt,wt,Di){switch(oi){case"[object DataView]":if(He.byteLength!=We.byteLength||He.byteOffset!=We.byteOffset)return!1;He=He.buffer,We=We.buffer;case"[object ArrayBuffer]":return!(He.byteLength!=We.byteLength||!wt(new Y(He),new Y(We)));case"[object Boolean]":case"[object Date]":case"[object Number]":return It(+He,+We);case"[object Error]":return He.name==We.name&&He.message==We.message;case"[object RegExp]":case"[object String]":return He==We+"";case a:var Pi=I;case c:var ki=1&Ht;if(Pi||(Pi=D),He.size!=We.size&&!ki)return!1;var us=Di.get(He);if(us)return us==We;Ht|=2,Di.set(He,We);var er=Je(Pi(He),Pi(We),Ht,Xt,wt,Di);return Di.delete(He),er;case"[object Symbol]":if(ge)return ge.call(He)==ge.call(We)}return!1}(Ke,Rt,ji,bt,pt,kt,Pt);if(!(1&bt)){var we=Us&&S.call(Ke,"__wrapped__"),Ie=hn&&S.call(Rt,"__wrapped__");if(we||Ie){var Le=we?Ke.value():Ke,at=Ie?Rt.value():Rt;return Pt||(Pt=new Ye),kt(Le,at,bt,pt,Pt)}}return ae?(Pt||(Pt=new Ye),function(He,We,oi,Ht,Xt,wt){var Di=1&oi,Pi=ct(He),ki=Pi.length,us=ct(We).length;if(ki!=us&&!Di)return!1;for(var er=ki;er--;){var jr=Pi[er];if(!(Di?jr in We:S.call(We,jr)))return!1}var Qo=wt.get(He);if(Qo&&wt.get(We))return Qo==We;var Md=!0;wt.set(He,We),wt.set(We,He);for(var Ap=Di;++er<ki;){jr=Pi[er];var Rp=He[jr],Mp=We[jr];if(Ht)var Ii=Di?Ht(Mp,Rp,jr,We,He,wt):Ht(Rp,Mp,jr,He,We,wt);if(!(Ii===void 0?Rp===Mp||Xt(Rp,Mp,oi,Ht,wt):Ii)){Md=!1;break}Ap||(Ap=jr=="constructor")}if(Md&&!Ap){var hi=He.constructor,Uc=We.constructor;hi==Uc||!("constructor"in He)||!("constructor"in We)||typeof hi=="function"&&hi instanceof hi&&typeof Uc=="function"&&Uc instanceof Uc||(Md=!1)}return wt.delete(He),wt.delete(We),Md}(Ke,Rt,bt,pt,kt,Pt)):!1}(he,be,Re,Ue,gt,Ct))}function Ze(he){return!(!At(he)||function(be){return!!x&&x in be}(he))&&(ui(he)?M:u).test(ei(he))}function Ve(he){if(Re=(be=he)&&be.constructor,Ue=typeof Re=="function"&&Re.prototype||L,be!==Ue)return P(he);var be,Re,Ue,Ct=[];for(var Ke in Object(he))S.call(he,Ke)&&Ke!="constructor"&&Ct.push(Ke);return Ct}function Je(he,be,Re,Ue,Ct,Ke){var Rt=1&Re,bt=he.length,pt=be.length;if(bt!=pt&&!(Rt&&pt>bt))return!1;var kt=Ke.get(he);if(kt&&Ke.get(be))return kt==be;var Pt=-1,qt=!0,gs=2&Re?new ze:void 0;for(Ke.set(he,be),Ke.set(be,he);++Pt<bt;){var ji=he[Pt],js=be[Pt];if(Ue)var Us=Rt?Ue(js,ji,Pt,be,he,Ke):Ue(ji,js,Pt,he,be,Ke);if(Us!==void 0){if(Us)continue;qt=!1;break}if(gs){if(!A(be,function(hn,ae){if(we=ae,!gs.has(we)&&(ji===hn||Ct(ji,hn,Re,Ue,Ke)))return gs.push(ae);var we})){qt=!1;break}}else if(ji!==js&&!Ct(ji,js,Re,Ue,Ke)){qt=!1;break}}return Ke.delete(he),Ke.delete(be),qt}function ct(he){return function(be,Re,Ue){var Ct=Re(be);return yi(be)?Ct:function(Ke,Rt){for(var bt=-1,pt=Rt.length,kt=Ke.length;++bt<pt;)Ke[kt+bt]=Rt[bt];return Ke}(Ct,Ue(be))}(he,Gt,_i)}function et(he,be){var Re,Ue,Ct=he.__data__;return((Ue=typeof(Re=be))=="string"||Ue=="number"||Ue=="symbol"||Ue=="boolean"?Re!=="__proto__":Re===null)?Ct[typeof be=="string"?"string":"hash"]:Ct.map}function ii(he,be){var Re=function(Ue,Ct){return Ue==null?void 0:Ue[Ct]}(he,be);return Ze(Re)?Re:void 0}ve.prototype.clear=function(){this.__data__=oe?oe(null):{},this.size=0},ve.prototype.delete=function(he){var be=this.has(he)&&delete this.__data__[he];return this.size-=be?1:0,be},ve.prototype.get=function(he){var be=this.__data__;if(oe){var Re=be[he];return Re==="__lodash_hash_undefined__"?void 0:Re}return S.call(be,he)?be[he]:void 0},ve.prototype.has=function(he){var be=this.__data__;return oe?be[he]!==void 0:S.call(be,he)},ve.prototype.set=function(he,be){var Re=this.__data__;return this.size+=this.has(he)?0:1,Re[he]=oe&&be===void 0?"__lodash_hash_undefined__":be,this},xe.prototype.clear=function(){this.__data__=[],this.size=0},xe.prototype.delete=function(he){var be=this.__data__,Re=ht(be,he);return!(Re<0)&&(Re==be.length-1?be.pop():J.call(be,Re,1),--this.size,!0)},xe.prototype.get=function(he){var be=this.__data__,Re=ht(be,he);return Re<0?void 0:be[Re][1]},xe.prototype.has=function(he){return ht(this.__data__,he)>-1},xe.prototype.set=function(he,be){var Re=this.__data__,Ue=ht(Re,he);return Ue<0?(++this.size,Re.push([he,be])):Re[Ue][1]=be,this},De.prototype.clear=function(){this.size=0,this.__data__={hash:new ve,map:new(X||xe),string:new ve}},De.prototype.delete=function(he){var be=et(this,he).delete(he);return this.size-=be?1:0,be},De.prototype.get=function(he){return et(this,he).get(he)},De.prototype.has=function(he){return et(this,he).has(he)},De.prototype.set=function(he,be){var Re=et(this,he),Ue=Re.size;return Re.set(he,be),this.size+=Re.size==Ue?0:1,this},ze.prototype.add=ze.prototype.push=function(he){return this.__data__.set(he,"__lodash_hash_undefined__"),this},ze.prototype.has=function(he){return this.__data__.has(he)},Ye.prototype.clear=function(){this.__data__=new xe,this.size=0},Ye.prototype.delete=function(he){var be=this.__data__,Re=be.delete(he);return this.size=be.size,Re},Ye.prototype.get=function(he){return this.__data__.get(he)},Ye.prototype.has=function(he){return this.__data__.has(he)},Ye.prototype.set=function(he,be){var Re=this.__data__;if(Re instanceof xe){var Ue=Re.__data__;if(!X||Ue.length<199)return Ue.push([he,be]),this.size=++Re.size,this;Re=this.__data__=new De(Ue)}return Re.set(he,be),this.size=Re.size,this};var _i=Z?function(he){return he==null?[]:(he=Object(he),function(be,Re){for(var Ue=-1,Ct=be==null?0:be.length,Ke=0,Rt=[];++Ue<Ct;){var bt=be[Ue];Re(bt,Ue,be)&&(Rt[Ke++]=bt)}return Rt}(Z(he),function(be){return $.call(he,be)}))}:function(){return[]},mt=ut;function vi(he,be){return!!(be=be??9007199254740991)&&(typeof he=="number"||d.test(he))&&he>-1&&he%1==0&&he<be}function ei(he){if(he!=null){try{return w.call(he)}catch{}try{return he+""}catch{}}return""}function It(he,be){return he===be||he!=he&&be!=be}(j&&mt(new j(new ArrayBuffer(1)))!="[object DataView]"||X&&mt(new X)!=a||ie&&mt(ie.resolve())!="[object Promise]"||ee&&mt(new ee)!=c||re&&mt(new re)!="[object WeakMap]")&&(mt=function(he){var be=ut(he),Re=be==l?he.constructor:void 0,Ue=Re?ei(Re):"";if(Ue)switch(Ue){case ue:return"[object DataView]";case se:return a;case le:return"[object Promise]";case ne:return c;case fe:return"[object WeakMap]"}return be});var Gi=dt(function(){return arguments}())?dt:function(he){return xi(he)&&S.call(he,"callee")&&!$.call(he,"callee")},yi=Array.isArray,xt=N||function(){return!1};function ui(he){if(!At(he))return!1;var be=ut(he);return be=="[object Function]"||be=="[object GeneratorFunction]"||be=="[object AsyncFunction]"||be=="[object Proxy]"}function Fi(he){return typeof he=="number"&&he>-1&&he%1==0&&he<=9007199254740991}function At(he){var be=typeof he;return he!=null&&(be=="object"||be=="function")}function xi(he){return he!=null&&typeof he=="object"}var Li=T?function(he){return function(be){return he(be)}}(T):function(he){return xi(he)&&Fi(he.length)&&!!h[ut(he)]};function Gt(he){return(be=he)!=null&&Fi(be.length)&&!ui(be)?je(he):Ve(he);var be}s.exports=function(he,be){return gt(he,be)}}).call(this)}).call(this,typeof zt<"u"?zt:typeof self<"u"?self:typeof window<"u"?window:{})},{}],446:[function(i,s,r){(function(n){(function(){var o=typeof n=="object"&&n&&n.Object===Object&&n,a=typeof self=="object"&&self&&self.Object===Object&&self,l=o||a||Function("return this")(),c=Object.prototype,u=c.hasOwnProperty,d=c.toString,h=l.Symbol,p=h?h.toStringTag:void 0;function f(m){return m==null?m===void 0?"[object Undefined]":"[object Null]":p&&p in Object(m)?function(g){var y=u.call(g,p),v=g[p];try{g[p]=void 0;var C=!0}catch{}var b=d.call(g);return C&&(y?g[p]=v:delete g[p]),b}(m):function(g){return d.call(g)}(m)}s.exports=function(m){if(!function(y){var v=typeof y;return y!=null&&(v=="object"||v=="function")}(m))return!1;var g=f(m);return g=="[object Function]"||g=="[object GeneratorFunction]"||g=="[object AsyncFunction]"||g=="[object Proxy]"}}).call(this)}).call(this,typeof zt<"u"?zt:typeof self<"u"?self:typeof window<"u"?window:{})},{}],447:[function(i,s,r){s.exports=function(n){return n==null}},{}],448:[function(i,s,r){s.exports=function(n){return n===void 0}},{}],449:[function(i,s,r){(function(n){(function(){var o=/^\[object .+?Constructor\]$/,a=typeof n=="object"&&n&&n.Object===Object&&n,l=typeof self=="object"&&self&&self.Object===Object&&self,c=a||l||Function("return this")();function u(V,Y){return!!(V&&V.length)&&function($,J,G){if(J!=J)return function(P,j,X,ie){for(var ee=P.length,re=X+-1;++re<ee;)if(j(P[re],re,P))return re;return-1}($,d,G);for(var Z=G-1,N=$.length;++Z<N;)if($[Z]===J)return Z;return-1}(V,Y,0)>-1}function d(V){return V!=V}function h(V,Y){return V.has(Y)}function p(V){var Y=-1,$=Array(V.size);return V.forEach(function(J){$[++Y]=J}),$}var f,m=Array.prototype,g=Function.prototype,y=Object.prototype,v=c["__core-js_shared__"],C=(f=/[^.]+$/.exec(v&&v.keys&&v.keys.IE_PROTO||""))?"Symbol(src)_1."+f:"",b=g.toString,T=y.hasOwnProperty,A=y.toString,I=RegExp("^"+b.call(T).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),D=m.splice,F=M(c,"Map"),B=M(c,"Set"),U=M(Object,"create");function H(V){var Y=-1,$=V?V.length:0;for(this.clear();++Y<$;){var J=V[Y];this.set(J[0],J[1])}}function R(V){var Y=-1,$=V?V.length:0;for(this.clear();++Y<$;){var J=V[Y];this.set(J[0],J[1])}}function L(V){var Y=-1,$=V?V.length:0;for(this.clear();++Y<$;){var J=V[Y];this.set(J[0],J[1])}}function _(V){var Y=-1,$=V?V.length:0;for(this.__data__=new L;++Y<$;)this.add(V[Y])}function w(V,Y){for(var $,J,G=V.length;G--;)if(($=V[G][0])===(J=Y)||$!=$&&J!=J)return G;return-1}function S(V){return!(!O(V)||(Y=V,C&&C in Y))&&(function($){var J=O($)?A.call($):"";return J=="[object Function]"||J=="[object GeneratorFunction]"}(V)||function($){var J=!1;if($!=null&&typeof $.toString!="function")try{J=!!($+"")}catch{}return J}(V)?I:o).test(function($){if($!=null){try{return b.call($)}catch{}try{return $+""}catch{}}return""}(V));var Y}H.prototype.clear=function(){this.__data__=U?U(null):{}},H.prototype.delete=function(V){return this.has(V)&&delete this.__data__[V]},H.prototype.get=function(V){var Y=this.__data__;if(U){var $=Y[V];return $==="__lodash_hash_undefined__"?void 0:$}return T.call(Y,V)?Y[V]:void 0},H.prototype.has=function(V){var Y=this.__data__;return U?Y[V]!==void 0:T.call(Y,V)},H.prototype.set=function(V,Y){return this.__data__[V]=U&&Y===void 0?"__lodash_hash_undefined__":Y,this},R.prototype.clear=function(){this.__data__=[]},R.prototype.delete=function(V){var Y=this.__data__,$=w(Y,V);return!($<0)&&($==Y.length-1?Y.pop():D.call(Y,$,1),!0)},R.prototype.get=function(V){var Y=this.__data__,$=w(Y,V);return $<0?void 0:Y[$][1]},R.prototype.has=function(V){return w(this.__data__,V)>-1},R.prototype.set=function(V,Y){var $=this.__data__,J=w($,V);return J<0?$.push([V,Y]):$[J][1]=Y,this},L.prototype.clear=function(){this.__data__={hash:new H,map:new(F||R),string:new H}},L.prototype.delete=function(V){return E(this,V).delete(V)},L.prototype.get=function(V){return E(this,V).get(V)},L.prototype.has=function(V){return E(this,V).has(V)},L.prototype.set=function(V,Y){return E(this,V).set(V,Y),this},_.prototype.add=_.prototype.push=function(V){return this.__data__.set(V,"__lodash_hash_undefined__"),this},_.prototype.has=function(V){return this.__data__.has(V)};var x=B&&1/p(new B([,-0]))[1]==1/0?function(V){return new B(V)}:function(){};function E(V,Y){var $,J,G=V.__data__;return((J=typeof($=Y))=="string"||J=="number"||J=="symbol"||J=="boolean"?$!=="__proto__":$===null)?G[typeof Y=="string"?"string":"hash"]:G.map}function M(V,Y){var $=function(J,G){return J==null?void 0:J[G]}(V,Y);return S($)?$:void 0}function O(V){var Y=typeof V;return!!V&&(Y=="object"||Y=="function")}s.exports=function(V){return V&&V.length?function(Y,$,J){var G=-1,Z=u,N=Y.length,P=!0,j=[],X=j;if(N>=200){var ie=x(Y);if(ie)return p(ie);P=!1,Z=h,X=new _}else X=j;e:for(;++G<N;){var ee=Y[G],re=ee;if(ee=ee!==0?ee:0,P&&re==re){for(var oe=X.length;oe--;)if(X[oe]===re)continue e;j.push(ee)}else Z(X,re,J)||(X!==j&&X.push(re),j.push(ee))}return j}(V):[]}}).call(this)}).call(this,typeof zt<"u"?zt:typeof self<"u"?self:typeof window<"u"?window:{})},{}],450:[function(i,s,r){var n=i("inherits"),o=i("hash-base"),a=i("safe-buffer").Buffer,l=new Array(16);function c(){o.call(this,64),this._a=1732584193,this._b=4023233417,this._c=2562383102,this._d=271733878}function u(m,g){return m<<g|m>>>32-g}function d(m,g,y,v,C,b,T){return u(m+(g&y|~g&v)+C+b|0,T)+g|0}function h(m,g,y,v,C,b,T){return u(m+(g&v|y&~v)+C+b|0,T)+g|0}function p(m,g,y,v,C,b,T){return u(m+(g^y^v)+C+b|0,T)+g|0}function f(m,g,y,v,C,b,T){return u(m+(y^(g|~v))+C+b|0,T)+g|0}n(c,o),c.prototype._update=function(){for(var m=l,g=0;g<16;++g)m[g]=this._block.readInt32LE(4*g);var y=this._a,v=this._b,C=this._c,b=this._d;y=d(y,v,C,b,m[0],3614090360,7),b=d(b,y,v,C,m[1],3905402710,12),C=d(C,b,y,v,m[2],606105819,17),v=d(v,C,b,y,m[3],3250441966,22),y=d(y,v,C,b,m[4],4118548399,7),b=d(b,y,v,C,m[5],1200080426,12),C=d(C,b,y,v,m[6],2821735955,17),v=d(v,C,b,y,m[7],4249261313,22),y=d(y,v,C,b,m[8],1770035416,7),b=d(b,y,v,C,m[9],2336552879,12),C=d(C,b,y,v,m[10],4294925233,17),v=d(v,C,b,y,m[11],2304563134,22),y=d(y,v,C,b,m[12],1804603682,7),b=d(b,y,v,C,m[13],4254626195,12),C=d(C,b,y,v,m[14],2792965006,17),y=h(y,v=d(v,C,b,y,m[15],1236535329,22),C,b,m[1],4129170786,5),b=h(b,y,v,C,m[6],3225465664,9),C=h(C,b,y,v,m[11],643717713,14),v=h(v,C,b,y,m[0],3921069994,20),y=h(y,v,C,b,m[5],3593408605,5),b=h(b,y,v,C,m[10],38016083,9),C=h(C,b,y,v,m[15],3634488961,14),v=h(v,C,b,y,m[4],3889429448,20),y=h(y,v,C,b,m[9],568446438,5),b=h(b,y,v,C,m[14],3275163606,9),C=h(C,b,y,v,m[3],4107603335,14),v=h(v,C,b,y,m[8],1163531501,20),y=h(y,v,C,b,m[13],2850285829,5),b=h(b,y,v,C,m[2],4243563512,9),C=h(C,b,y,v,m[7],1735328473,14),y=p(y,v=h(v,C,b,y,m[12],2368359562,20),C,b,m[5],4294588738,4),b=p(b,y,v,C,m[8],2272392833,11),C=p(C,b,y,v,m[11],1839030562,16),v=p(v,C,b,y,m[14],4259657740,23),y=p(y,v,C,b,m[1],2763975236,4),b=p(b,y,v,C,m[4],1272893353,11),C=p(C,b,y,v,m[7],4139469664,16),v=p(v,C,b,y,m[10],3200236656,23),y=p(y,v,C,b,m[13],681279174,4),b=p(b,y,v,C,m[0],3936430074,11),C=p(C,b,y,v,m[3],3572445317,16),v=p(v,C,b,y,m[6],76029189,23),y=p(y,v,C,b,m[9],3654602809,4),b=p(b,y,v,C,m[12],3873151461,11),C=p(C,b,y,v,m[15],530742520,16),y=f(y,v=p(v,C,b,y,m[2],3299628645,23),C,b,m[0],4096336452,6),b=f(b,y,v,C,m[7],1126891415,10),C=f(C,b,y,v,m[14],2878612391,15),v=f(v,C,b,y,m[5],4237533241,21),y=f(y,v,C,b,m[12],1700485571,6),b=f(b,y,v,C,m[3],2399980690,10),C=f(C,b,y,v,m[10],4293915773,15),v=f(v,C,b,y,m[1],2240044497,21),y=f(y,v,C,b,m[8],1873313359,6),b=f(b,y,v,C,m[15],4264355552,10),C=f(C,b,y,v,m[6],2734768916,15),v=f(v,C,b,y,m[13],1309151649,21),y=f(y,v,C,b,m[4],4149444226,6),b=f(b,y,v,C,m[11],3174756917,10),C=f(C,b,y,v,m[2],718787259,15),v=f(v,C,b,y,m[9],3951481745,21),this._a=this._a+y|0,this._b=this._b+v|0,this._c=this._c+C|0,this._d=this._d+b|0},c.prototype._digest=function(){this._block[this._blockOffset++]=128,this._blockOffset>56&&(this._block.fill(0,this._blockOffset,64),this._update(),this._blockOffset=0),this._block.fill(0,this._blockOffset,56),this._block.writeUInt32LE(this._length[0],56),this._block.writeUInt32LE(this._length[1],60),this._update();var m=a.allocUnsafe(16);return m.writeInt32LE(this._a,0),m.writeInt32LE(this._b,4),m.writeInt32LE(this._c,8),m.writeInt32LE(this._d,12),m},s.exports=c},{"hash-base":425,inherits:440,"safe-buffer":494}],451:[function(i,s,r){var n=i("bn.js"),o=i("brorand");function a(l){this.rand=l||new o.Rand}s.exports=a,a.create=function(l){return new a(l)},a.prototype._randbelow=function(l){var c=l.bitLength(),u=Math.ceil(c/8);do var d=new n(this.rand.generate(u));while(d.cmp(l)>=0);return d},a.prototype._randrange=function(l,c){var u=c.sub(l);return l.add(this._randbelow(u))},a.prototype.test=function(l,c,u){var d=l.bitLength(),h=n.mont(l),p=new n(1).toRed(h);c||(c=Math.max(1,d/48|0));for(var f=l.subn(1),m=0;!f.testn(m);m++);for(var g=l.shrn(m),y=f.toRed(h);c>0;c--){var v=this._randrange(new n(2),f);u&&u(v);var C=v.toRed(h).redPow(g);if(C.cmp(p)!==0&&C.cmp(y)!==0){for(var b=1;b<m;b++){if((C=C.redSqr()).cmp(p)===0)return!1;if(C.cmp(y)===0)break}if(b===m)return!1}}return!0},a.prototype.getDivisor=function(l,c){var u=l.bitLength(),d=n.mont(l),h=new n(1).toRed(d);c||(c=Math.max(1,u/48|0));for(var p=l.subn(1),f=0;!p.testn(f);f++);for(var m=l.shrn(f),g=p.toRed(d);c>0;c--){var y=this._randrange(new n(2),p),v=l.gcd(y);if(v.cmpn(1)!==0)return v;var C=y.toRed(d).redPow(m);if(C.cmp(h)!==0&&C.cmp(g)!==0){for(var b=1;b<f;b++){if((C=C.redSqr()).cmp(h)===0)return C.fromRed().subn(1).gcd(l);if(C.cmp(g)===0)break}if(b===f)return(C=C.redSqr()).fromRed().subn(1).gcd(l)}}return!1}},{"bn.js":452,brorand:187}],452:[function(i,s,r){arguments[4][184][0].apply(r,arguments)},{buffer:188,dup:184}],453:[function(i,s,r){function n(o,a){if(!o)throw new Error(a||"Assertion failed")}s.exports=n,n.equal=function(o,a,l){if(o!=a)throw new Error(l||"Assertion failed: "+o+" != "+a)}},{}],454:[function(i,s,r){var n=r;function o(l){return l.length===1?"0"+l:l}function a(l){for(var c="",u=0;u<l.length;u++)c+=o(l[u].toString(16));return c}n.toArray=function(l,c){if(Array.isArray(l))return l.slice();if(!l)return[];var u=[];if(typeof l!="string"){for(var d=0;d<l.length;d++)u[d]=0|l[d];return u}if(c==="hex")for((l=l.replace(/[^a-z0-9]+/gi,"")).length%2!=0&&(l="0"+l),d=0;d<l.length;d+=2)u.push(parseInt(l[d]+l[d+1],16));else for(d=0;d<l.length;d++){var h=l.charCodeAt(d),p=h>>8,f=255&h;p?u.push(p,f):u.push(f)}return u},n.zero2=o,n.toHex=a,n.encode=function(l,c){return c==="hex"?a(l):l}},{}],455:[function(i,s,r){s.exports={"2.16.840.1.101.3.4.1.1":"aes-128-ecb","2.16.840.1.101.3.4.1.2":"aes-128-cbc","2.16.840.1.101.3.4.1.3":"aes-128-ofb","2.16.840.1.101.3.4.1.4":"aes-128-cfb","2.16.840.1.101.3.4.1.21":"aes-192-ecb","2.16.840.1.101.3.4.1.22":"aes-192-cbc","2.16.840.1.101.3.4.1.23":"aes-192-ofb","2.16.840.1.101.3.4.1.24":"aes-192-cfb","2.16.840.1.101.3.4.1.41":"aes-256-ecb","2.16.840.1.101.3.4.1.42":"aes-256-cbc","2.16.840.1.101.3.4.1.43":"aes-256-ofb","2.16.840.1.101.3.4.1.44":"aes-256-cfb"}},{}],456:[function(i,s,r){var n=i("asn1.js");r.certificate=i("./certificate");var o=n.define("RSAPrivateKey",function(){this.seq().obj(this.key("version").int(),this.key("modulus").int(),this.key("publicExponent").int(),this.key("privateExponent").int(),this.key("prime1").int(),this.key("prime2").int(),this.key("exponent1").int(),this.key("exponent2").int(),this.key("coefficient").int())});r.RSAPrivateKey=o;var a=n.define("RSAPublicKey",function(){this.seq().obj(this.key("modulus").int(),this.key("publicExponent").int())});r.RSAPublicKey=a;var l=n.define("SubjectPublicKeyInfo",function(){this.seq().obj(this.key("algorithm").use(c),this.key("subjectPublicKey").bitstr())});r.PublicKey=l;var c=n.define("AlgorithmIdentifier",function(){this.seq().obj(this.key("algorithm").objid(),this.key("none").null_().optional(),this.key("curve").objid().optional(),this.key("params").seq().obj(this.key("p").int(),this.key("q").int(),this.key("g").int()).optional())}),u=n.define("PrivateKeyInfo",function(){this.seq().obj(this.key("version").int(),this.key("algorithm").use(c),this.key("subjectPrivateKey").octstr())});r.PrivateKey=u;var d=n.define("EncryptedPrivateKeyInfo",function(){this.seq().obj(this.key("algorithm").seq().obj(this.key("id").objid(),this.key("decrypt").seq().obj(this.key("kde").seq().obj(this.key("id").objid(),this.key("kdeparams").seq().obj(this.key("salt").octstr(),this.key("iters").int())),this.key("cipher").seq().obj(this.key("algo").objid(),this.key("iv").octstr()))),this.key("subjectPrivateKey").octstr())});r.EncryptedPrivateKey=d;var h=n.define("DSAPrivateKey",function(){this.seq().obj(this.key("version").int(),this.key("p").int(),this.key("q").int(),this.key("g").int(),this.key("pub_key").int(),this.key("priv_key").int())});r.DSAPrivateKey=h,r.DSAparam=n.define("DSAparam",function(){this.int()});var p=n.define("ECPrivateKey",function(){this.seq().obj(this.key("version").int(),this.key("privateKey").octstr(),this.key("parameters").optional().explicit(0).use(f),this.key("publicKey").optional().explicit(1).bitstr())});r.ECPrivateKey=p;var f=n.define("ECParameters",function(){this.choice({namedCurve:this.objid()})});r.signature=n.define("signature",function(){this.seq().obj(this.key("r").int(),this.key("s").int())})},{"./certificate":457,"asn1.js":170}],457:[function(i,s,r){var n=i("asn1.js"),o=n.define("Time",function(){this.choice({utcTime:this.utctime(),generalTime:this.gentime()})}),a=n.define("AttributeTypeValue",function(){this.seq().obj(this.key("type").objid(),this.key("value").any())}),l=n.define("AlgorithmIdentifier",function(){this.seq().obj(this.key("algorithm").objid(),this.key("parameters").optional(),this.key("curve").objid().optional())}),c=n.define("SubjectPublicKeyInfo",function(){this.seq().obj(this.key("algorithm").use(l),this.key("subjectPublicKey").bitstr())}),u=n.define("RelativeDistinguishedName",function(){this.setof(a)}),d=n.define("RDNSequence",function(){this.seqof(u)}),h=n.define("Name",function(){this.choice({rdnSequence:this.use(d)})}),p=n.define("Validity",function(){this.seq().obj(this.key("notBefore").use(o),this.key("notAfter").use(o))}),f=n.define("Extension",function(){this.seq().obj(this.key("extnID").objid(),this.key("critical").bool().def(!1),this.key("extnValue").octstr())}),m=n.define("TBSCertificate",function(){this.seq().obj(this.key("version").explicit(0).int().optional(),this.key("serialNumber").int(),this.key("signature").use(l),this.key("issuer").use(h),this.key("validity").use(p),this.key("subject").use(h),this.key("subjectPublicKeyInfo").use(c),this.key("issuerUniqueID").implicit(1).bitstr().optional(),this.key("subjectUniqueID").implicit(2).bitstr().optional(),this.key("extensions").explicit(3).seqof(f).optional())}),g=n.define("X509Certificate",function(){this.seq().obj(this.key("tbsCertificate").use(m),this.key("signatureAlgorithm").use(l),this.key("signatureValue").bitstr())});s.exports=g},{"asn1.js":170}],458:[function(i,s,r){var n=/Proc-Type: 4,ENCRYPTED[\n\r]+DEK-Info: AES-((?:128)|(?:192)|(?:256))-CBC,([0-9A-H]+)[\n\r]+([0-9A-z\n\r+/=]+)[\n\r]+/m,o=/^-----BEGIN ((?:.*? KEY)|CERTIFICATE)-----/m,a=/^-----BEGIN ((?:.*? KEY)|CERTIFICATE)-----([0-9A-z\n\r+/=]+)-----END \1-----$/m,l=i("evp_bytestokey"),c=i("browserify-aes"),u=i("safe-buffer").Buffer;s.exports=function(d,h){var p,f=d.toString(),m=f.match(n);if(m){var g="aes"+m[1],y=u.from(m[2],"hex"),v=u.from(m[3].replace(/[\r\n]/g,""),"base64"),C=l(h,y.slice(0,8),parseInt(m[1],10)).key,b=[],T=c.createDecipheriv(g,C,y);b.push(T.update(v)),b.push(T.final()),p=u.concat(b)}else{var A=f.match(a);p=u.from(A[2].replace(/[\r\n]/g,""),"base64")}return{tag:f.match(o)[1],data:p}}},{"browserify-aes":191,evp_bytestokey:423,"safe-buffer":494}],459:[function(i,s,r){var n=i("./asn1"),o=i("./aesid.json"),a=i("./fixProc"),l=i("browserify-aes"),c=i("pbkdf2"),u=i("safe-buffer").Buffer;function d(h){var p;typeof h!="object"||u.isBuffer(h)||(p=h.passphrase,h=h.key),typeof h=="string"&&(h=u.from(h));var f,m,g=a(h,p),y=g.tag,v=g.data;switch(y){case"CERTIFICATE":m=n.certificate.decode(v,"der").tbsCertificate.subjectPublicKeyInfo;case"PUBLIC KEY":switch(m||(m=n.PublicKey.decode(v,"der")),f=m.algorithm.algorithm.join(".")){case"1.2.840.113549.1.1.1":return n.RSAPublicKey.decode(m.subjectPublicKey.data,"der");case"1.2.840.10045.2.1":return m.subjectPrivateKey=m.subjectPublicKey,{type:"ec",data:m};case"1.2.840.10040.4.1":return m.algorithm.params.pub_key=n.DSAparam.decode(m.subjectPublicKey.data,"der"),{type:"dsa",data:m.algorithm.params};default:throw new Error("unknown key id "+f)}case"ENCRYPTED PRIVATE KEY":v=function(C,b){var T=C.algorithm.decrypt.kde.kdeparams.salt,A=parseInt(C.algorithm.decrypt.kde.kdeparams.iters.toString(),10),I=o[C.algorithm.decrypt.cipher.algo.join(".")],D=C.algorithm.decrypt.cipher.iv,F=C.subjectPrivateKey,B=parseInt(I.split("-")[1],10)/8,U=c.pbkdf2Sync(b,T,A,B,"sha1"),H=l.createDecipheriv(I,U,D),R=[];return R.push(H.update(F)),R.push(H.final()),u.concat(R)}(v=n.EncryptedPrivateKey.decode(v,"der"),p);case"PRIVATE KEY":switch(f=(m=n.PrivateKey.decode(v,"der")).algorithm.algorithm.join(".")){case"1.2.840.113549.1.1.1":return n.RSAPrivateKey.decode(m.subjectPrivateKey,"der");case"1.2.840.10045.2.1":return{curve:m.algorithm.curve,privateKey:n.ECPrivateKey.decode(m.subjectPrivateKey,"der").privateKey};case"1.2.840.10040.4.1":return m.algorithm.params.priv_key=n.DSAparam.decode(m.subjectPrivateKey,"der"),{type:"dsa",params:m.algorithm.params};default:throw new Error("unknown key id "+f)}case"RSA PUBLIC KEY":return n.RSAPublicKey.decode(v,"der");case"RSA PRIVATE KEY":return n.RSAPrivateKey.decode(v,"der");case"DSA PRIVATE KEY":return{type:"dsa",params:n.DSAPrivateKey.decode(v,"der")};case"EC PRIVATE KEY":return{curve:(v=n.ECPrivateKey.decode(v,"der")).parameters.value,privateKey:v.privateKey};default:throw new Error("unknown key type "+y)}}s.exports=d,d.signature=n.signature},{"./aesid.json":455,"./asn1":456,"./fixProc":458,"browserify-aes":191,pbkdf2:460,"safe-buffer":494}],460:[function(i,s,r){r.pbkdf2=i("./lib/async"),r.pbkdf2Sync=i("./lib/sync")},{"./lib/async":461,"./lib/sync":464}],461:[function(i,s,r){(function(n){(function(){var o,a,l=i("safe-buffer").Buffer,c=i("./precondition"),u=i("./default-encoding"),d=i("./sync"),h=i("./to-buffer"),p=n.crypto&&n.crypto.subtle,f={sha:"SHA-1","sha-1":"SHA-1",sha1:"SHA-1",sha256:"SHA-256","sha-256":"SHA-256",sha384:"SHA-384","sha-384":"SHA-384","sha-512":"SHA-512",sha512:"SHA-512"},m=[];function g(){return a||(a=n.process&&n.process.nextTick?n.process.nextTick:n.queueMicrotask?n.queueMicrotask:n.setImmediate?n.setImmediate:n.setTimeout)}function y(v,C,b,T,A){return p.importKey("raw",v,{name:"PBKDF2"},!1,["deriveBits"]).then(function(I){return p.deriveBits({name:"PBKDF2",salt:C,iterations:b,hash:{name:A}},I,T<<3)}).then(function(I){return l.from(I)})}s.exports=function(v,C,b,T,A,I){typeof A=="function"&&(I=A,A=void 0);var D=f[(A=A||"sha1").toLowerCase()];if(D&&typeof n.Promise=="function"){if(c(b,T),v=h(v,u,"Password"),C=h(C,u,"Salt"),typeof I!="function")throw new Error("No callback provided to pbkdf2");(function(F,B){F.then(function(U){g()(function(){B(null,U)})},function(U){g()(function(){B(U)})})})(function(F){if(n.process&&!n.process.browser||!p||!p.importKey||!p.deriveBits)return Promise.resolve(!1);if(m[F]!==void 0)return m[F];var B=y(o=o||l.alloc(8),o,10,128,F).then(function(){return!0}).catch(function(){return!1});return m[F]=B,B}(D).then(function(F){return F?y(v,C,b,T,D):d(v,C,b,T,A)}),I)}else g()(function(){var F;try{F=d(v,C,b,T,A)}catch(B){return I(B)}I(null,F)})}}).call(this)}).call(this,typeof zt<"u"?zt:typeof self<"u"?self:typeof window<"u"?window:{})},{"./default-encoding":462,"./precondition":463,"./sync":464,"./to-buffer":465,"safe-buffer":494}],462:[function(i,s,r){(function(n,o){(function(){var a;o.process&&o.process.browser?a="utf-8":o.process&&o.process.version?a=parseInt(n.version.split(".")[0].slice(1),10)>=6?"utf-8":"binary":a="utf-8",s.exports=a}).call(this)}).call(this,i("_process"),typeof zt<"u"?zt:typeof self<"u"?self:typeof window<"u"?window:{})},{_process:467}],463:[function(i,s,r){var n=Math.pow(2,30)-1;s.exports=function(o,a){if(typeof o!="number")throw new TypeError("Iterations not a number");if(o<0)throw new TypeError("Bad iterations");if(typeof a!="number")throw new TypeError("Key length not a number");if(a<0||a>n||a!=a)throw new TypeError("Bad key length")}},{}],464:[function(i,s,r){var n=i("create-hash/md5"),o=i("ripemd160"),a=i("sha.js"),l=i("safe-buffer").Buffer,c=i("./precondition"),u=i("./default-encoding"),d=i("./to-buffer"),h=l.alloc(128),p={md5:16,sha1:20,sha224:28,sha256:32,sha384:48,sha512:64,rmd160:20,ripemd160:20};function f(m,g,y){var v=function(D){function F(B){return a(D).update(B).digest()}return D==="rmd160"||D==="ripemd160"?function(B){return new o().update(B).digest()}:D==="md5"?n:F}(m),C=m==="sha512"||m==="sha384"?128:64;g.length>C?g=v(g):g.length<C&&(g=l.concat([g,h],C));for(var b=l.allocUnsafe(C+p[m]),T=l.allocUnsafe(C+p[m]),A=0;A<C;A++)b[A]=54^g[A],T[A]=92^g[A];var I=l.allocUnsafe(C+y+4);b.copy(I,0,0,C),this.ipad1=I,this.ipad2=b,this.opad=T,this.alg=m,this.blocksize=C,this.hash=v,this.size=p[m]}f.prototype.run=function(m,g){return m.copy(g,this.blocksize),this.hash(g).copy(this.opad,this.blocksize),this.hash(this.opad)},s.exports=function(m,g,y,v,C){c(y,v);var b=new f(C=C||"sha1",m=d(m,u,"Password"),(g=d(g,u,"Salt")).length),T=l.allocUnsafe(v),A=l.allocUnsafe(g.length+4);g.copy(A,0,0,g.length);for(var I=0,D=p[C],F=Math.ceil(v/D),B=1;B<=F;B++){A.writeUInt32BE(B,g.length);for(var U=b.run(A,b.ipad1),H=U,R=1;R<y;R++){H=b.run(H,b.ipad2);for(var L=0;L<D;L++)U[L]^=H[L]}U.copy(T,I),I+=D}return T}},{"./default-encoding":462,"./precondition":463,"./to-buffer":465,"create-hash/md5":387,ripemd160:493,"safe-buffer":494,"sha.js":498}],465:[function(i,s,r){var n=i("safe-buffer").Buffer;s.exports=function(o,a,l){if(n.isBuffer(o))return o;if(typeof o=="string")return n.from(o,a);if(ArrayBuffer.isView(o))return n.from(o.buffer);throw new TypeError(l+" must be a string, a Buffer, a typed array or a DataView")}},{"safe-buffer":494}],466:[function(i,s,r){(function(n){(function(){n===void 0||!n.version||n.version.indexOf("v0.")===0||n.version.indexOf("v1.")===0&&n.version.indexOf("v1.8.")!==0?s.exports={nextTick:function(o,a,l,c){if(typeof o!="function")throw new TypeError('"callback" argument must be a function');var u,d,h=arguments.length;switch(h){case 0:case 1:return n.nextTick(o);case 2:return n.nextTick(function(){o.call(null,a)});case 3:return n.nextTick(function(){o.call(null,a,l)});case 4:return n.nextTick(function(){o.call(null,a,l,c)});default:for(u=new Array(h-1),d=0;d<u.length;)u[d++]=arguments[d];return n.nextTick(function(){o.apply(null,u)})}}}:s.exports=n}).call(this)}).call(this,i("_process"))},{_process:467}],467:[function(i,s,r){var n,o,a=s.exports={};function l(){throw new Error("setTimeout has not been defined")}function c(){throw new Error("clearTimeout has not been defined")}function u(C){if(n===setTimeout)return setTimeout(C,0);if((n===l||!n)&&setTimeout)return n=setTimeout,setTimeout(C,0);try{return n(C,0)}catch{try{return n.call(null,C,0)}catch{return n.call(this,C,0)}}}(function(){try{n=typeof setTimeout=="function"?setTimeout:l}catch{n=l}try{o=typeof clearTimeout=="function"?clearTimeout:c}catch{o=c}})();var d,h=[],p=!1,f=-1;function m(){p&&d&&(p=!1,d.length?h=d.concat(h):f=-1,h.length&&g())}function g(){if(!p){var C=u(m);p=!0;for(var b=h.length;b;){for(d=h,h=[];++f<b;)d&&d[f].run();f=-1,b=h.length}d=null,p=!1,function(T){if(o===clearTimeout)return clearTimeout(T);if((o===c||!o)&&clearTimeout)return o=clearTimeout,clearTimeout(T);try{o(T)}catch{try{return o.call(null,T)}catch{return o.call(this,T)}}}(C)}}function y(C,b){this.fun=C,this.array=b}function v(){}a.nextTick=function(C){var b=new Array(arguments.length-1);if(arguments.length>1)for(var T=1;T<arguments.length;T++)b[T-1]=arguments[T];h.push(new y(C,b)),h.length!==1||p||u(g)},y.prototype.run=function(){this.fun.apply(null,this.array)},a.title="browser",a.browser=!0,a.env={},a.argv=[],a.version="",a.versions={},a.on=v,a.addListener=v,a.once=v,a.off=v,a.removeListener=v,a.removeAllListeners=v,a.emit=v,a.prependListener=v,a.prependOnceListener=v,a.listeners=function(C){return[]},a.binding=function(C){throw new Error("process.binding is not supported")},a.cwd=function(){return"/"},a.chdir=function(C){throw new Error("process.chdir is not supported")},a.umask=function(){return 0}},{}],468:[function(i,s,r){r.publicEncrypt=i("./publicEncrypt"),r.privateDecrypt=i("./privateDecrypt"),r.privateEncrypt=function(n,o){return r.publicEncrypt(n,o,!0)},r.publicDecrypt=function(n,o){return r.privateDecrypt(n,o,!0)}},{"./privateDecrypt":471,"./publicEncrypt":472}],469:[function(i,s,r){var n=i("create-hash"),o=i("safe-buffer").Buffer;function a(l){var c=o.allocUnsafe(4);return c.writeUInt32BE(l,0),c}s.exports=function(l,c){for(var u,d=o.alloc(0),h=0;d.length<c;)u=a(h++),d=o.concat([d,n("sha1").update(l).update(u).digest()]);return d.slice(0,c)}},{"create-hash":386,"safe-buffer":494}],470:[function(i,s,r){arguments[4][184][0].apply(r,arguments)},{buffer:188,dup:184}],471:[function(i,s,r){var n=i("parse-asn1"),o=i("./mgf"),a=i("./xor"),l=i("bn.js"),c=i("browserify-rsa"),u=i("create-hash"),d=i("./withPublic"),h=i("safe-buffer").Buffer;s.exports=function(p,f,m){var g;g=p.padding?p.padding:m?1:4;var y,v=n(p),C=v.modulus.byteLength();if(f.length>C||new l(f).cmp(v.modulus)>=0)throw new Error("decryption error");y=m?d(new l(f),v):c(f,v);var b=h.alloc(C-y.length);if(y=h.concat([b,y],C),g===4)return function(T,A){var I=T.modulus.byteLength(),D=u("sha1").update(h.alloc(0)).digest(),F=D.length;if(A[0]!==0)throw new Error("decryption error");var B=A.slice(1,F+1),U=A.slice(F+1),H=a(B,o(U,F)),R=a(U,o(H,I-F-1));if(function(_,w){_=h.from(_),w=h.from(w);var S=0,x=_.length;_.length!==w.length&&(S++,x=Math.min(_.length,w.length));for(var E=-1;++E<x;)S+=_[E]^w[E];return S}(D,R.slice(0,F)))throw new Error("decryption error");for(var L=F;R[L]===0;)L++;if(R[L++]!==1)throw new Error("decryption error");return R.slice(L)}(v,y);if(g===1)return function(T,A,I){for(var D=A.slice(0,2),F=2,B=0;A[F++]!==0;)if(F>=A.length){B++;break}var U=A.slice(2,F-1);if((D.toString("hex")!=="0002"&&!I||D.toString("hex")!=="0001"&&I)&&B++,U.length<8&&B++,B)throw new Error("decryption error");return A.slice(F)}(0,y,m);if(g===3)return y;throw new Error("unknown padding")}},{"./mgf":469,"./withPublic":473,"./xor":474,"bn.js":470,"browserify-rsa":209,"create-hash":386,"parse-asn1":459,"safe-buffer":494}],472:[function(i,s,r){var n=i("parse-asn1"),o=i("randombytes"),a=i("create-hash"),l=i("./mgf"),c=i("./xor"),u=i("bn.js"),d=i("./withPublic"),h=i("browserify-rsa"),p=i("safe-buffer").Buffer;s.exports=function(f,m,g){var y;y=f.padding?f.padding:g?1:4;var v,C=n(f);if(y===4)v=function(b,T){var A=b.modulus.byteLength(),I=T.length,D=a("sha1").update(p.alloc(0)).digest(),F=D.length,B=2*F;if(I>A-B-2)throw new Error("message too long");var U=p.alloc(A-I-B-2),H=A-F-1,R=o(F),L=c(p.concat([D,U,p.alloc(1,1),T],H),l(R,H)),_=c(R,l(L,F));return new u(p.concat([p.alloc(1),_,L],A))}(C,m);else if(y===1)v=function(b,T,A){var I,D=T.length,F=b.modulus.byteLength();if(D>F-11)throw new Error("message too long");return I=A?p.alloc(F-D-3,255):function(B){for(var U,H=p.allocUnsafe(B),R=0,L=o(2*B),_=0;R<B;)_===L.length&&(L=o(2*B),_=0),(U=L[_++])&&(H[R++]=U);return H}(F-D-3),new u(p.concat([p.from([0,A?1:2]),I,p.alloc(1),T],F))}(C,m,g);else{if(y!==3)throw new Error("unknown padding");if((v=new u(m)).cmp(C.modulus)>=0)throw new Error("data too long for modulus")}return g?h(v,C):d(v,C)}},{"./mgf":469,"./withPublic":473,"./xor":474,"bn.js":470,"browserify-rsa":209,"create-hash":386,"parse-asn1":459,randombytes:475,"safe-buffer":494}],473:[function(i,s,r){var n=i("bn.js"),o=i("safe-buffer").Buffer;s.exports=function(a,l){return o.from(a.toRed(n.mont(l.modulus)).redPow(new n(l.publicExponent)).fromRed().toArray())}},{"bn.js":470,"safe-buffer":494}],474:[function(i,s,r){s.exports=function(n,o){for(var a=n.length,l=-1;++l<a;)n[l]^=o[l];return n}},{}],475:[function(i,s,r){(function(n,o){(function(){var a=i("safe-buffer").Buffer,l=o.crypto||o.msCrypto;l&&l.getRandomValues?s.exports=function(c,u){if(c>4294967295)throw new RangeError("requested too many random bytes");var d=a.allocUnsafe(c);if(c>0)if(c>65536)for(var h=0;h<c;h+=65536)l.getRandomValues(d.slice(h,h+65536));else l.getRandomValues(d);return typeof u=="function"?n.nextTick(function(){u(null,d)}):d}:s.exports=function(){throw new Error(`Secure random number generation is not supported by this browser.
Use Chrome, Firefox or Internet Explorer 11`)}}).call(this)}).call(this,i("_process"),typeof zt<"u"?zt:typeof self<"u"?self:typeof window<"u"?window:{})},{_process:467,"safe-buffer":494}],476:[function(i,s,r){(function(n,o){(function(){function a(){throw new Error(`secure random number generation not supported by this browser
use chrome, FireFox or Internet Explorer 11`)}var l=i("safe-buffer"),c=i("randombytes"),u=l.Buffer,d=l.kMaxLength,h=o.crypto||o.msCrypto,p=Math.pow(2,32)-1;function f(y,v){if(typeof y!="number"||y!=y)throw new TypeError("offset must be a number");if(y>p||y<0)throw new TypeError("offset must be a uint32");if(y>d||y>v)throw new RangeError("offset out of range")}function m(y,v,C){if(typeof y!="number"||y!=y)throw new TypeError("size must be a number");if(y>p||y<0)throw new TypeError("size must be a uint32");if(y+v>C||y>d)throw new RangeError("buffer too small")}function g(y,v,C,b){if(n.browser){var T=y.buffer,A=new Uint8Array(T,v,C);return h.getRandomValues(A),b?void n.nextTick(function(){b(null,y)}):y}if(!b)return c(C).copy(y,v),y;c(C,function(I,D){if(I)return b(I);D.copy(y,v),b(null,y)})}h&&h.getRandomValues||!n.browser?(r.randomFill=function(y,v,C,b){if(!(u.isBuffer(y)||y instanceof o.Uint8Array))throw new TypeError('"buf" argument must be a Buffer or Uint8Array');if(typeof v=="function")b=v,v=0,C=y.length;else if(typeof C=="function")b=C,C=y.length-v;else if(typeof b!="function")throw new TypeError('"cb" argument must be a function');return f(v,y.length),m(C,v,y.length),g(y,v,C,b)},r.randomFillSync=function(y,v,C){if(v===void 0&&(v=0),!(u.isBuffer(y)||y instanceof o.Uint8Array))throw new TypeError('"buf" argument must be a Buffer or Uint8Array');return f(v,y.length),C===void 0&&(C=y.length-v),m(C,v,y.length),g(y,v,C)}):(r.randomFill=a,r.randomFillSync=a)}).call(this)}).call(this,i("_process"),typeof zt<"u"?zt:typeof self<"u"?self:typeof window<"u"?window:{})},{_process:467,randombytes:475,"safe-buffer":494}],477:[function(i,s,r){var n={};function o(l,c,u){u||(u=Error);var d=function(h){var p,f;function m(g,y,v){return h.call(this,function(C,b,T){return typeof c=="string"?c:c(C,b,T)}(g,y,v))||this}return f=h,(p=m).prototype=Object.create(f.prototype),p.prototype.constructor=p,p.__proto__=f,m}(u);d.prototype.name=u.name,d.prototype.code=l,n[l]=d}function a(l,c){if(Array.isArray(l)){var u=l.length;return l=l.map(function(d){return String(d)}),u>2?"one of ".concat(c," ").concat(l.slice(0,u-1).join(", "),", or ")+l[u-1]:u===2?"one of ".concat(c," ").concat(l[0]," or ").concat(l[1]):"of ".concat(c," ").concat(l[0])}return"of ".concat(c," ").concat(String(l))}o("ERR_INVALID_OPT_VALUE",function(l,c){return'The value "'+c+'" is invalid for option "'+l+'"'},TypeError),o("ERR_INVALID_ARG_TYPE",function(l,c,u){var d,h,p;if(typeof c=="string"&&(h="not ",c.substr(0,h.length)===h)?(d="must not be",c=c.replace(/^not /,"")):d="must be",function(m,g,y){return(y===void 0||y>m.length)&&(y=m.length),m.substring(y-g.length,y)===g}(l," argument"))p="The ".concat(l," ").concat(d," ").concat(a(c,"type"));else{var f=function(m,g,y){return typeof y!="number"&&(y=0),!(y+g.length>m.length)&&m.indexOf(g,y)!==-1}(l,".")?"property":"argument";p='The "'.concat(l,'" ').concat(f," ").concat(d," ").concat(a(c,"type"))}return p+=". Received type ".concat(typeof u)},TypeError),o("ERR_STREAM_PUSH_AFTER_EOF","stream.push() after EOF"),o("ERR_METHOD_NOT_IMPLEMENTED",function(l){return"The "+l+" method is not implemented"}),o("ERR_STREAM_PREMATURE_CLOSE","Premature close"),o("ERR_STREAM_DESTROYED",function(l){return"Cannot call "+l+" after a stream was destroyed"}),o("ERR_MULTIPLE_CALLBACK","Callback called multiple times"),o("ERR_STREAM_CANNOT_PIPE","Cannot pipe, not readable"),o("ERR_STREAM_WRITE_AFTER_END","write after end"),o("ERR_STREAM_NULL_VALUES","May not write null values to stream",TypeError),o("ERR_UNKNOWN_ENCODING",function(l){return"Unknown encoding: "+l},TypeError),o("ERR_STREAM_UNSHIFT_AFTER_END_EVENT","stream.unshift() after end event"),s.exports.codes=n},{}],478:[function(i,s,r){(function(n){(function(){var o=Object.keys||function(m){var g=[];for(var y in m)g.push(y);return g};s.exports=h;var a=i("./_stream_readable"),l=i("./_stream_writable");i("inherits")(h,a);for(var c=o(l.prototype),u=0;u<c.length;u++){var d=c[u];h.prototype[d]||(h.prototype[d]=l.prototype[d])}function h(m){if(!(this instanceof h))return new h(m);a.call(this,m),l.call(this,m),this.allowHalfOpen=!0,m&&(m.readable===!1&&(this.readable=!1),m.writable===!1&&(this.writable=!1),m.allowHalfOpen===!1&&(this.allowHalfOpen=!1,this.once("end",p)))}function p(){this._writableState.ended||n.nextTick(f,this)}function f(m){m.end()}Object.defineProperty(h.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),Object.defineProperty(h.prototype,"writableBuffer",{enumerable:!1,get:function(){return this._writableState&&this._writableState.getBuffer()}}),Object.defineProperty(h.prototype,"writableLength",{enumerable:!1,get:function(){return this._writableState.length}}),Object.defineProperty(h.prototype,"destroyed",{enumerable:!1,get:function(){return this._readableState!==void 0&&this._writableState!==void 0&&this._readableState.destroyed&&this._writableState.destroyed},set:function(m){this._readableState!==void 0&&this._writableState!==void 0&&(this._readableState.destroyed=m,this._writableState.destroyed=m)}})}).call(this)}).call(this,i("_process"))},{"./_stream_readable":480,"./_stream_writable":482,_process:467,inherits:440}],479:[function(i,s,r){s.exports=o;var n=i("./_stream_transform");function o(a){if(!(this instanceof o))return new o(a);n.call(this,a)}i("inherits")(o,n),o.prototype._transform=function(a,l,c){c(null,a)}},{"./_stream_transform":481,inherits:440}],480:[function(i,s,r){(function(n,o){(function(){var a;s.exports=H,H.ReadableState=U,i("events").EventEmitter;var l=function(N,P){return N.listeners(P).length},c=i("./internal/streams/stream"),u=i("buffer").Buffer,d=(o!==void 0?o:typeof window<"u"?window:typeof self<"u"?self:{}).Uint8Array||function(){},h,p=i("util");h=p&&p.debuglog?p.debuglog("stream"):function(){};var f,m,g,y=i("./internal/streams/buffer_list"),v=i("./internal/streams/destroy"),C=i("./internal/streams/state").getHighWaterMark,b=i("../errors").codes,T=b.ERR_INVALID_ARG_TYPE,A=b.ERR_STREAM_PUSH_AFTER_EOF,I=b.ERR_METHOD_NOT_IMPLEMENTED,D=b.ERR_STREAM_UNSHIFT_AFTER_END_EVENT;i("inherits")(H,c);var F=v.errorOrDestroy,B=["error","close","destroy","pause","resume"];function U(N,P,j){a=a||i("./_stream_duplex"),N=N||{},typeof j!="boolean"&&(j=P instanceof a),this.objectMode=!!N.objectMode,j&&(this.objectMode=this.objectMode||!!N.readableObjectMode),this.highWaterMark=C(this,N,"readableHighWaterMark",j),this.buffer=new y,this.length=0,this.pipes=null,this.pipesCount=0,this.flowing=null,this.ended=!1,this.endEmitted=!1,this.reading=!1,this.sync=!0,this.needReadable=!1,this.emittedReadable=!1,this.readableListening=!1,this.resumeScheduled=!1,this.paused=!0,this.emitClose=N.emitClose!==!1,this.autoDestroy=!!N.autoDestroy,this.destroyed=!1,this.defaultEncoding=N.defaultEncoding||"utf8",this.awaitDrain=0,this.readingMore=!1,this.decoder=null,this.encoding=null,N.encoding&&(f||(f=i("string_decoder/").StringDecoder),this.decoder=new f(N.encoding),this.encoding=N.encoding)}function H(N){if(a=a||i("./_stream_duplex"),!(this instanceof H))return new H(N);var P=this instanceof a;this._readableState=new U(N,this,P),this.readable=!0,N&&(typeof N.read=="function"&&(this._read=N.read),typeof N.destroy=="function"&&(this._destroy=N.destroy)),c.call(this)}function R(N,P,j,X,ie){h("readableAddChunk",P);var ee,re=N._readableState;if(P===null)re.reading=!1,function(oe,ue){if(h("onEofChunk"),!ue.ended){if(ue.decoder){var se=ue.decoder.end();se&&se.length&&(ue.buffer.push(se),ue.length+=ue.objectMode?1:se.length)}ue.ended=!0,ue.sync?w(oe):(ue.needReadable=!1,ue.emittedReadable||(ue.emittedReadable=!0,S(oe)))}}(N,re);else if(ie||(ee=function(oe,ue){var se;le=ue,u.isBuffer(le)||le instanceof d||typeof ue=="string"||ue===void 0||oe.objectMode||(se=new T("chunk",["string","Buffer","Uint8Array"],ue));var le;return se}(re,P)),ee)F(N,ee);else if(re.objectMode||P&&P.length>0)if(typeof P=="string"||re.objectMode||Object.getPrototypeOf(P)===u.prototype||(P=function(oe){return u.from(oe)}(P)),X)re.endEmitted?F(N,new D):L(N,re,P,!0);else if(re.ended)F(N,new A);else{if(re.destroyed)return!1;re.reading=!1,re.decoder&&!j?(P=re.decoder.write(P),re.objectMode||P.length!==0?L(N,re,P,!1):x(N,re)):L(N,re,P,!1)}else X||(re.reading=!1,x(N,re));return!re.ended&&(re.length<re.highWaterMark||re.length===0)}function L(N,P,j,X){P.flowing&&P.length===0&&!P.sync?(P.awaitDrain=0,N.emit("data",j)):(P.length+=P.objectMode?1:j.length,X?P.buffer.unshift(j):P.buffer.push(j),P.needReadable&&w(N)),x(N,P)}Object.defineProperty(H.prototype,"destroyed",{enumerable:!1,get:function(){return this._readableState!==void 0&&this._readableState.destroyed},set:function(N){this._readableState&&(this._readableState.destroyed=N)}}),H.prototype.destroy=v.destroy,H.prototype._undestroy=v.undestroy,H.prototype._destroy=function(N,P){P(N)},H.prototype.push=function(N,P){var j,X=this._readableState;return X.objectMode?j=!0:typeof N=="string"&&((P=P||X.defaultEncoding)!==X.encoding&&(N=u.from(N,P),P=""),j=!0),R(this,N,P,!1,j)},H.prototype.unshift=function(N){return R(this,N,null,!0,!1)},H.prototype.isPaused=function(){return this._readableState.flowing===!1},H.prototype.setEncoding=function(N){f||(f=i("string_decoder/").StringDecoder);var P=new f(N);this._readableState.decoder=P,this._readableState.encoding=this._readableState.decoder.encoding;for(var j=this._readableState.buffer.head,X="";j!==null;)X+=P.write(j.data),j=j.next;return this._readableState.buffer.clear(),X!==""&&this._readableState.buffer.push(X),this._readableState.length=X.length,this};function _(N,P){return N<=0||P.length===0&&P.ended?0:P.objectMode?1:N!=N?P.flowing&&P.length?P.buffer.head.data.length:P.length:(N>P.highWaterMark&&(P.highWaterMark=function(j){return j>=1073741824?j=1073741824:(j--,j|=j>>>1,j|=j>>>2,j|=j>>>4,j|=j>>>8,j|=j>>>16,j++),j}(N)),N<=P.length?N:P.ended?P.length:(P.needReadable=!0,0))}function w(N){var P=N._readableState;h("emitReadable",P.needReadable,P.emittedReadable),P.needReadable=!1,P.emittedReadable||(h("emitReadable",P.flowing),P.emittedReadable=!0,n.nextTick(S,N))}function S(N){var P=N._readableState;h("emitReadable_",P.destroyed,P.length,P.ended),P.destroyed||!P.length&&!P.ended||(N.emit("readable"),P.emittedReadable=!1),P.needReadable=!P.flowing&&!P.ended&&P.length<=P.highWaterMark,Y(N)}function x(N,P){P.readingMore||(P.readingMore=!0,n.nextTick(E,N,P))}function E(N,P){for(;!P.reading&&!P.ended&&(P.length<P.highWaterMark||P.flowing&&P.length===0);){var j=P.length;if(h("maybeReadMore read 0"),N.read(0),j===P.length)break}P.readingMore=!1}function M(N){var P=N._readableState;P.readableListening=N.listenerCount("readable")>0,P.resumeScheduled&&!P.paused?P.flowing=!0:N.listenerCount("data")>0&&N.resume()}function O(N){h("readable nexttick read 0"),N.read(0)}function V(N,P){h("resume",P.reading),P.reading||N.read(0),P.resumeScheduled=!1,N.emit("resume"),Y(N),P.flowing&&!P.reading&&N.read(0)}function Y(N){var P=N._readableState;for(h("flow",P.flowing);P.flowing&&N.read()!==null;);}function $(N,P){return P.length===0?null:(P.objectMode?j=P.buffer.shift():!N||N>=P.length?(j=P.decoder?P.buffer.join(""):P.buffer.length===1?P.buffer.first():P.buffer.concat(P.length),P.buffer.clear()):j=P.buffer.consume(N,P.decoder),j);var j}function J(N){var P=N._readableState;h("endReadable",P.endEmitted),P.endEmitted||(P.ended=!0,n.nextTick(G,P,N))}function G(N,P){if(h("endReadableNT",N.endEmitted,N.length),!N.endEmitted&&N.length===0&&(N.endEmitted=!0,P.readable=!1,P.emit("end"),N.autoDestroy)){var j=P._writableState;(!j||j.autoDestroy&&j.finished)&&P.destroy()}}function Z(N,P){for(var j=0,X=N.length;j<X;j++)if(N[j]===P)return j;return-1}H.prototype.read=function(N){h("read",N),N=parseInt(N,10);var P=this._readableState,j=N;if(N!==0&&(P.emittedReadable=!1),N===0&&P.needReadable&&((P.highWaterMark!==0?P.length>=P.highWaterMark:P.length>0)||P.ended))return h("read: emitReadable",P.length,P.ended),P.length===0&&P.ended?J(this):w(this),null;if((N=_(N,P))===0&&P.ended)return P.length===0&&J(this),null;var X,ie=P.needReadable;return h("need readable",ie),(P.length===0||P.length-N<P.highWaterMark)&&h("length less than watermark",ie=!0),P.ended||P.reading?h("reading or ended",ie=!1):ie&&(h("do read"),P.reading=!0,P.sync=!0,P.length===0&&(P.needReadable=!0),this._read(P.highWaterMark),P.sync=!1,P.reading||(N=_(j,P))),(X=N>0?$(N,P):null)===null?(P.needReadable=P.length<=P.highWaterMark,N=0):(P.length-=N,P.awaitDrain=0),P.length===0&&(P.ended||(P.needReadable=!0),j!==N&&P.ended&&J(this)),X!==null&&this.emit("data",X),X},H.prototype._read=function(N){F(this,new I("_read()"))},H.prototype.pipe=function(N,P){var j=this,X=this._readableState;switch(X.pipesCount){case 0:X.pipes=N;break;case 1:X.pipes=[X.pipes,N];break;default:X.pipes.push(N)}X.pipesCount+=1,h("pipe count=%d opts=%j",X.pipesCount,P);var ie=(!P||P.end!==!1)&&N!==n.stdout&&N!==n.stderr?re:me;function ee(ge,ve){h("onunpipe"),ge===j&&ve&&ve.hasUnpiped===!1&&(ve.hasUnpiped=!0,h("cleanup"),N.removeListener("close",ne),N.removeListener("finish",fe),N.removeListener("drain",oe),N.removeListener("error",le),N.removeListener("unpipe",ee),j.removeListener("end",re),j.removeListener("end",me),j.removeListener("data",se),ue=!0,!X.awaitDrain||N._writableState&&!N._writableState.needDrain||oe())}function re(){h("onend"),N.end()}X.endEmitted?n.nextTick(ie):j.once("end",ie),N.on("unpipe",ee);var oe=function(ge){return function(){var ve=ge._readableState;h("pipeOnDrain",ve.awaitDrain),ve.awaitDrain&&ve.awaitDrain--,ve.awaitDrain===0&&l(ge,"data")&&(ve.flowing=!0,Y(ge))}}(j);N.on("drain",oe);var ue=!1;function se(ge){h("ondata");var ve=N.write(ge);h("dest.write",ve),ve===!1&&((X.pipesCount===1&&X.pipes===N||X.pipesCount>1&&Z(X.pipes,N)!==-1)&&!ue&&(h("false write response, pause",X.awaitDrain),X.awaitDrain++),j.pause())}function le(ge){h("onerror",ge),me(),N.removeListener("error",le),l(N,"error")===0&&F(N,ge)}function ne(){N.removeListener("finish",fe),me()}function fe(){h("onfinish"),N.removeListener("close",ne),me()}function me(){h("unpipe"),j.unpipe(N)}return j.on("data",se),function(ge,ve,xe){if(typeof ge.prependListener=="function")return ge.prependListener(ve,xe);ge._events&&ge._events[ve]?Array.isArray(ge._events[ve])?ge._events[ve].unshift(xe):ge._events[ve]=[xe,ge._events[ve]]:ge.on(ve,xe)}(N,"error",le),N.once("close",ne),N.once("finish",fe),N.emit("pipe",j),X.flowing||(h("pipe resume"),j.resume()),N},H.prototype.unpipe=function(N){var P=this._readableState,j={hasUnpiped:!1};if(P.pipesCount===0)return this;if(P.pipesCount===1)return N&&N!==P.pipes||(N||(N=P.pipes),P.pipes=null,P.pipesCount=0,P.flowing=!1,N&&N.emit("unpipe",this,j)),this;if(!N){var X=P.pipes,ie=P.pipesCount;P.pipes=null,P.pipesCount=0,P.flowing=!1;for(var ee=0;ee<ie;ee++)X[ee].emit("unpipe",this,{hasUnpiped:!1});return this}var re=Z(P.pipes,N);return re===-1||(P.pipes.splice(re,1),P.pipesCount-=1,P.pipesCount===1&&(P.pipes=P.pipes[0]),N.emit("unpipe",this,j)),this},H.prototype.on=function(N,P){var j=c.prototype.on.call(this,N,P),X=this._readableState;return N==="data"?(X.readableListening=this.listenerCount("readable")>0,X.flowing!==!1&&this.resume()):N==="readable"&&(X.endEmitted||X.readableListening||(X.readableListening=X.needReadable=!0,X.flowing=!1,X.emittedReadable=!1,h("on readable",X.length,X.reading),X.length?w(this):X.reading||n.nextTick(O,this))),j},H.prototype.addListener=H.prototype.on,H.prototype.removeListener=function(N,P){var j=c.prototype.removeListener.call(this,N,P);return N==="readable"&&n.nextTick(M,this),j},H.prototype.removeAllListeners=function(N){var P=c.prototype.removeAllListeners.apply(this,arguments);return N!=="readable"&&N!==void 0||n.nextTick(M,this),P},H.prototype.resume=function(){var N=this._readableState;return N.flowing||(h("resume"),N.flowing=!N.readableListening,function(P,j){j.resumeScheduled||(j.resumeScheduled=!0,n.nextTick(V,P,j))}(this,N)),N.paused=!1,this},H.prototype.pause=function(){return h("call pause flowing=%j",this._readableState.flowing),this._readableState.flowing!==!1&&(h("pause"),this._readableState.flowing=!1,this.emit("pause")),this._readableState.paused=!0,this},H.prototype.wrap=function(N){var P=this,j=this._readableState,X=!1;for(var ie in N.on("end",function(){if(h("wrapped end"),j.decoder&&!j.ended){var re=j.decoder.end();re&&re.length&&P.push(re)}P.push(null)}),N.on("data",function(re){h("wrapped data"),j.decoder&&(re=j.decoder.write(re)),j.objectMode&&re==null||(j.objectMode||re&&re.length)&&(P.push(re)||(X=!0,N.pause()))}),N)this[ie]===void 0&&typeof N[ie]=="function"&&(this[ie]=function(re){return function(){return N[re].apply(N,arguments)}}(ie));for(var ee=0;ee<B.length;ee++)N.on(B[ee],this.emit.bind(this,B[ee]));return this._read=function(re){h("wrapped _read",re),X&&(X=!1,N.resume())},this},typeof Symbol=="function"&&(H.prototype[Symbol.asyncIterator]=function(){return m===void 0&&(m=i("./internal/streams/async_iterator")),m(this)}),Object.defineProperty(H.prototype,"readableHighWaterMark",{enumerable:!1,get:function(){return this._readableState.highWaterMark}}),Object.defineProperty(H.prototype,"readableBuffer",{enumerable:!1,get:function(){return this._readableState&&this._readableState.buffer}}),Object.defineProperty(H.prototype,"readableFlowing",{enumerable:!1,get:function(){return this._readableState.flowing},set:function(N){this._readableState&&(this._readableState.flowing=N)}}),H._fromList=$,Object.defineProperty(H.prototype,"readableLength",{enumerable:!1,get:function(){return this._readableState.length}}),typeof Symbol=="function"&&(H.from=function(N,P){return g===void 0&&(g=i("./internal/streams/from")),g(H,N,P)})}).call(this)}).call(this,i("_process"),typeof zt<"u"?zt:typeof self<"u"?self:typeof window<"u"?window:{})},{"../errors":477,"./_stream_duplex":478,"./internal/streams/async_iterator":483,"./internal/streams/buffer_list":484,"./internal/streams/destroy":485,"./internal/streams/from":487,"./internal/streams/state":489,"./internal/streams/stream":490,_process:467,buffer:220,events:422,inherits:440,"string_decoder/":522,util:188}],481:[function(i,s,r){s.exports=h;var n=i("../errors").codes,o=n.ERR_METHOD_NOT_IMPLEMENTED,a=n.ERR_MULTIPLE_CALLBACK,l=n.ERR_TRANSFORM_ALREADY_TRANSFORMING,c=n.ERR_TRANSFORM_WITH_LENGTH_0,u=i("./_stream_duplex");function d(m,g){var y=this._transformState;y.transforming=!1;var v=y.writecb;if(v===null)return this.emit("error",new a);y.writechunk=null,y.writecb=null,g!=null&&this.push(g),v(m);var C=this._readableState;C.reading=!1,(C.needReadable||C.length<C.highWaterMark)&&this._read(C.highWaterMark)}function h(m){if(!(this instanceof h))return new h(m);u.call(this,m),this._transformState={afterTransform:d.bind(this),needTransform:!1,transforming:!1,writecb:null,writechunk:null,writeencoding:null},this._readableState.needReadable=!0,this._readableState.sync=!1,m&&(typeof m.transform=="function"&&(this._transform=m.transform),typeof m.flush=="function"&&(this._flush=m.flush)),this.on("prefinish",p)}function p(){var m=this;typeof this._flush!="function"||this._readableState.destroyed?f(this,null,null):this._flush(function(g,y){f(m,g,y)})}function f(m,g,y){if(g)return m.emit("error",g);if(y!=null&&m.push(y),m._writableState.length)throw new c;if(m._transformState.transforming)throw new l;return m.push(null)}i("inherits")(h,u),h.prototype.push=function(m,g){return this._transformState.needTransform=!1,u.prototype.push.call(this,m,g)},h.prototype._transform=function(m,g,y){y(new o("_transform()"))},h.prototype._write=function(m,g,y){var v=this._transformState;if(v.writecb=y,v.writechunk=m,v.writeencoding=g,!v.transforming){var C=this._readableState;(v.needTransform||C.needReadable||C.length<C.highWaterMark)&&this._read(C.highWaterMark)}},h.prototype._read=function(m){var g=this._transformState;g.writechunk===null||g.transforming?g.needTransform=!0:(g.transforming=!0,this._transform(g.writechunk,g.writeencoding,g.afterTransform))},h.prototype._destroy=function(m,g){u.prototype._destroy.call(this,m,function(y){g(y)})}},{"../errors":477,"./_stream_duplex":478,inherits:440}],482:[function(i,s,r){(function(n,o){(function(){function a(E){var M=this;this.next=null,this.entry=null,this.finish=function(){(function(O,V,Y){var $=O.entry;for(O.entry=null;$;){var J=$.callback;V.pendingcb--,J(Y),$=$.next}V.corkedRequestsFree.next=O})(M,E)}}var l;s.exports=H,H.WritableState=U;var c={deprecate:i("util-deprecate")},u=i("./internal/streams/stream"),d=i("buffer").Buffer,h=(o!==void 0?o:typeof window<"u"?window:typeof self<"u"?self:{}).Uint8Array||function(){},p,f=i("./internal/streams/destroy"),m=i("./internal/streams/state").getHighWaterMark,g=i("../errors").codes,y=g.ERR_INVALID_ARG_TYPE,v=g.ERR_METHOD_NOT_IMPLEMENTED,C=g.ERR_MULTIPLE_CALLBACK,b=g.ERR_STREAM_CANNOT_PIPE,T=g.ERR_STREAM_DESTROYED,A=g.ERR_STREAM_NULL_VALUES,I=g.ERR_STREAM_WRITE_AFTER_END,D=g.ERR_UNKNOWN_ENCODING,F=f.errorOrDestroy;function B(){}function U(E,M,O){l=l||i("./_stream_duplex"),E=E||{},typeof O!="boolean"&&(O=M instanceof l),this.objectMode=!!E.objectMode,O&&(this.objectMode=this.objectMode||!!E.writableObjectMode),this.highWaterMark=m(this,E,"writableHighWaterMark",O),this.finalCalled=!1,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1,this.destroyed=!1;var V=E.decodeStrings===!1;this.decodeStrings=!V,this.defaultEncoding=E.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=function(Y){(function($,J){var G=$._writableState,Z=G.sync,N=G.writecb;if(typeof N!="function")throw new C;if(function(j){j.writing=!1,j.writecb=null,j.length-=j.writelen,j.writelen=0}(G),J)(function(j,X,ie,ee,re){--X.pendingcb,ie?(n.nextTick(re,ee),n.nextTick(x,j,X),j._writableState.errorEmitted=!0,F(j,ee)):(re(ee),j._writableState.errorEmitted=!0,F(j,ee),x(j,X))})($,G,Z,J,N);else{var P=w(G)||$.destroyed;P||G.corked||G.bufferProcessing||!G.bufferedRequest||_($,G),Z?n.nextTick(L,$,G,P,N):L($,G,P,N)}})(M,Y)},this.writecb=null,this.writelen=0,this.bufferedRequest=null,this.lastBufferedRequest=null,this.pendingcb=0,this.prefinished=!1,this.errorEmitted=!1,this.emitClose=E.emitClose!==!1,this.autoDestroy=!!E.autoDestroy,this.bufferedRequestCount=0,this.corkedRequestsFree=new a(this)}function H(E){var M=this instanceof(l=l||i("./_stream_duplex"));if(!M&&!p.call(H,this))return new H(E);this._writableState=new U(E,this,M),this.writable=!0,E&&(typeof E.write=="function"&&(this._write=E.write),typeof E.writev=="function"&&(this._writev=E.writev),typeof E.destroy=="function"&&(this._destroy=E.destroy),typeof E.final=="function"&&(this._final=E.final)),u.call(this)}function R(E,M,O,V,Y,$,J){M.writelen=V,M.writecb=J,M.writing=!0,M.sync=!0,M.destroyed?M.onwrite(new T("write")):O?E._writev(Y,M.onwrite):E._write(Y,$,M.onwrite),M.sync=!1}function L(E,M,O,V){O||function(Y,$){$.length===0&&$.needDrain&&($.needDrain=!1,Y.emit("drain"))}(E,M),M.pendingcb--,V(),x(E,M)}function _(E,M){M.bufferProcessing=!0;var O=M.bufferedRequest;if(E._writev&&O&&O.next){var V=M.bufferedRequestCount,Y=new Array(V),$=M.corkedRequestsFree;$.entry=O;for(var J=0,G=!0;O;)Y[J]=O,O.isBuf||(G=!1),O=O.next,J+=1;Y.allBuffers=G,R(E,M,!0,M.length,Y,"",$.finish),M.pendingcb++,M.lastBufferedRequest=null,$.next?(M.corkedRequestsFree=$.next,$.next=null):M.corkedRequestsFree=new a(M),M.bufferedRequestCount=0}else{for(;O;){var Z=O.chunk,N=O.encoding,P=O.callback;if(R(E,M,!1,M.objectMode?1:Z.length,Z,N,P),O=O.next,M.bufferedRequestCount--,M.writing)break}O===null&&(M.lastBufferedRequest=null)}M.bufferedRequest=O,M.bufferProcessing=!1}function w(E){return E.ending&&E.length===0&&E.bufferedRequest===null&&!E.finished&&!E.writing}function S(E,M){E._final(function(O){M.pendingcb--,O&&F(E,O),M.prefinished=!0,E.emit("prefinish"),x(E,M)})}function x(E,M){var O=w(M);if(O&&(function(Y,$){$.prefinished||$.finalCalled||(typeof Y._final!="function"||$.destroyed?($.prefinished=!0,Y.emit("prefinish")):($.pendingcb++,$.finalCalled=!0,n.nextTick(S,Y,$)))}(E,M),M.pendingcb===0&&(M.finished=!0,E.emit("finish"),M.autoDestroy))){var V=E._readableState;(!V||V.autoDestroy&&V.endEmitted)&&E.destroy()}return O}i("inherits")(H,u),U.prototype.getBuffer=function(){for(var E=this.bufferedRequest,M=[];E;)M.push(E),E=E.next;return M},function(){try{Object.defineProperty(U.prototype,"buffer",{get:c.deprecate(function(){return this.getBuffer()},"_writableState.buffer is deprecated. Use _writableState.getBuffer instead.","DEP0003")})}catch{}}(),typeof Symbol=="function"&&Symbol.hasInstance&&typeof Function.prototype[Symbol.hasInstance]=="function"?(p=Function.prototype[Symbol.hasInstance],Object.defineProperty(H,Symbol.hasInstance,{value:function(E){return!!p.call(this,E)||this===H&&E&&E._writableState instanceof U}})):p=function(E){return E instanceof this},H.prototype.pipe=function(){F(this,new b)},H.prototype.write=function(E,M,O){var V,Y=this._writableState,$=!1,J=!Y.objectMode&&(V=E,d.isBuffer(V)||V instanceof h);return J&&!d.isBuffer(E)&&(E=function(G){return d.from(G)}(E)),typeof M=="function"&&(O=M,M=null),J?M="buffer":M||(M=Y.defaultEncoding),typeof O!="function"&&(O=B),Y.ending?function(G,Z){var N=new I;F(G,N),n.nextTick(Z,N)}(this,O):(J||function(G,Z,N,P){var j;return N===null?j=new A:typeof N=="string"||Z.objectMode||(j=new y("chunk",["string","Buffer"],N)),!j||(F(G,j),n.nextTick(P,j),!1)}(this,Y,E,O))&&(Y.pendingcb++,$=function(G,Z,N,P,j,X){if(!N){var ie=function(ue,se,le){return ue.objectMode||ue.decodeStrings===!1||typeof se!="string"||(se=d.from(se,le)),se}(Z,P,j);P!==ie&&(N=!0,j="buffer",P=ie)}var ee=Z.objectMode?1:P.length;Z.length+=ee;var re=Z.length<Z.highWaterMark;if(re||(Z.needDrain=!0),Z.writing||Z.corked){var oe=Z.lastBufferedRequest;Z.lastBufferedRequest={chunk:P,encoding:j,isBuf:N,callback:X,next:null},oe?oe.next=Z.lastBufferedRequest:Z.bufferedRequest=Z.lastBufferedRequest,Z.bufferedRequestCount+=1}else R(G,Z,!1,ee,P,j,X);return re}(this,Y,J,E,M,O)),$},H.prototype.cork=function(){this._writableState.corked++},H.prototype.uncork=function(){var E=this._writableState;E.corked&&(E.corked--,E.writing||E.corked||E.bufferProcessing||!E.bufferedRequest||_(this,E))},H.prototype.setDefaultEncoding=function(E){if(typeof E=="string"&&(E=E.toLowerCase()),!(["hex","utf8","utf-8","ascii","binary","base64","ucs2","ucs-2","utf16le","utf-16le","raw"].indexOf((E+"").toLowerCase())>-1))throw new D(E);return this._writableState.defaultEncoding=E,this},Object.defineProperty(H.prototype,"writableBuffer",{enumerable:!1,get:function(){return this._writableState&&this._writableState.getBuffer()}}),Object.defineProperty(H.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),H.prototype._write=function(E,M,O){O(new v("_write()"))},H.prototype._writev=null,H.prototype.end=function(E,M,O){var V=this._writableState;return typeof E=="function"?(O=E,E=null,M=null):typeof M=="function"&&(O=M,M=null),E!=null&&this.write(E,M),V.corked&&(V.corked=1,this.uncork()),V.ending||function(Y,$,J){$.ending=!0,x(Y,$),J&&($.finished?n.nextTick(J):Y.once("finish",J)),$.ended=!0,Y.writable=!1}(this,V,O),this},Object.defineProperty(H.prototype,"writableLength",{enumerable:!1,get:function(){return this._writableState.length}}),Object.defineProperty(H.prototype,"destroyed",{enumerable:!1,get:function(){return this._writableState!==void 0&&this._writableState.destroyed},set:function(E){this._writableState&&(this._writableState.destroyed=E)}}),H.prototype.destroy=f.destroy,H.prototype._undestroy=f.undestroy,H.prototype._destroy=function(E,M){M(E)}}).call(this)}).call(this,i("_process"),typeof zt<"u"?zt:typeof self<"u"?self:typeof window<"u"?window:{})},{"../errors":477,"./_stream_duplex":478,"./internal/streams/destroy":485,"./internal/streams/state":489,"./internal/streams/stream":490,_process:467,buffer:220,inherits:440,"util-deprecate":524}],483:[function(i,s,r){(function(n){(function(){var o;function a(T,A,I){return(A=function(D){var F=function(B,U){if(typeof B!="object"||B===null)return B;var H=B[Symbol.toPrimitive];if(H!==void 0){var R=H.call(B,U);if(typeof R!="object")return R;throw new TypeError("@@toPrimitive must return a primitive value.")}return(U==="string"?String:Number)(B)}(D,"string");return typeof F=="symbol"?F:String(F)}(A))in T?Object.defineProperty(T,A,{value:I,enumerable:!0,configurable:!0,writable:!0}):T[A]=I,T}var l=i("./end-of-stream"),c=Symbol("lastResolve"),u=Symbol("lastReject"),d=Symbol("error"),h=Symbol("ended"),p=Symbol("lastPromise"),f=Symbol("handlePromise"),m=Symbol("stream");function g(T,A){return{value:T,done:A}}function y(T){var A=T[c];if(A!==null){var I=T[m].read();I!==null&&(T[p]=null,T[c]=null,T[u]=null,A(g(I,!1)))}}function v(T){n.nextTick(y,T)}var C=Object.getPrototypeOf(function(){}),b=Object.setPrototypeOf((a(o={get stream(){return this[m]},next:function(){var T=this,A=this[d];if(A!==null)return Promise.reject(A);if(this[h])return Promise.resolve(g(void 0,!0));if(this[m].destroyed)return new Promise(function(B,U){n.nextTick(function(){T[d]?U(T[d]):B(g(void 0,!0))})});var I,D=this[p];if(D)I=new Promise(function(B,U){return function(H,R){B.then(function(){U[h]?H(g(void 0,!0)):U[f](H,R)},R)}}(D,this));else{var F=this[m].read();if(F!==null)return Promise.resolve(g(F,!1));I=new Promise(this[f])}return this[p]=I,I}},Symbol.asyncIterator,function(){return this}),a(o,"return",function(){var T=this;return new Promise(function(A,I){T[m].destroy(null,function(D){D?I(D):A(g(void 0,!0))})})}),o),C);s.exports=function(T){var A,I=Object.create(b,(a(A={},m,{value:T,writable:!0}),a(A,c,{value:null,writable:!0}),a(A,u,{value:null,writable:!0}),a(A,d,{value:null,writable:!0}),a(A,h,{value:T._readableState.endEmitted,writable:!0}),a(A,f,{value:function(D,F){var B=I[m].read();B?(I[p]=null,I[c]=null,I[u]=null,D(g(B,!1))):(I[c]=D,I[u]=F)},writable:!0}),A));return I[p]=null,l(T,function(D){if(D&&D.code!=="ERR_STREAM_PREMATURE_CLOSE"){var F=I[u];return F!==null&&(I[p]=null,I[c]=null,I[u]=null,F(D)),void(I[d]=D)}var B=I[c];B!==null&&(I[p]=null,I[c]=null,I[u]=null,B(g(void 0,!0))),I[h]=!0}),T.on("readable",v.bind(null,I)),I}}).call(this)}).call(this,i("_process"))},{"./end-of-stream":486,_process:467}],484:[function(i,s,r){function n(p,f){var m=Object.keys(p);if(Object.getOwnPropertySymbols){var g=Object.getOwnPropertySymbols(p);f&&(g=g.filter(function(y){return Object.getOwnPropertyDescriptor(p,y).enumerable})),m.push.apply(m,g)}return m}function o(p){for(var f=1;f<arguments.length;f++){var m=arguments[f]!=null?arguments[f]:{};f%2?n(Object(m),!0).forEach(function(g){a(p,g,m[g])}):Object.getOwnPropertyDescriptors?Object.defineProperties(p,Object.getOwnPropertyDescriptors(m)):n(Object(m)).forEach(function(g){Object.defineProperty(p,g,Object.getOwnPropertyDescriptor(m,g))})}return p}function a(p,f,m){return(f=c(f))in p?Object.defineProperty(p,f,{value:m,enumerable:!0,configurable:!0,writable:!0}):p[f]=m,p}function l(p,f){for(var m=0;m<f.length;m++){var g=f[m];g.enumerable=g.enumerable||!1,g.configurable=!0,"value"in g&&(g.writable=!0),Object.defineProperty(p,c(g.key),g)}}function c(p){var f=function(m,g){if(typeof m!="object"||m===null)return m;var y=m[Symbol.toPrimitive];if(y!==void 0){var v=y.call(m,g);if(typeof v!="object")return v;throw new TypeError("@@toPrimitive must return a primitive value.")}return(g==="string"?String:Number)(m)}(p,"string");return typeof f=="symbol"?f:String(f)}var u=i("buffer").Buffer,d=i("util").inspect,h=d&&d.custom||"inspect";s.exports=function(){function p(){(function(g,y){if(!(g instanceof y))throw new TypeError("Cannot call a class as a function")})(this,p),this.head=null,this.tail=null,this.length=0}var f,m;return f=p,(m=[{key:"push",value:function(g){var y={data:g,next:null};this.length>0?this.tail.next=y:this.head=y,this.tail=y,++this.length}},{key:"unshift",value:function(g){var y={data:g,next:this.head};this.length===0&&(this.tail=y),this.head=y,++this.length}},{key:"shift",value:function(){if(this.length!==0){var g=this.head.data;return this.length===1?this.head=this.tail=null:this.head=this.head.next,--this.length,g}}},{key:"clear",value:function(){this.head=this.tail=null,this.length=0}},{key:"join",value:function(g){if(this.length===0)return"";for(var y=this.head,v=""+y.data;y=y.next;)v+=g+y.data;return v}},{key:"concat",value:function(g){if(this.length===0)return u.alloc(0);for(var y,v,C,b=u.allocUnsafe(g>>>0),T=this.head,A=0;T;)y=T.data,v=b,C=A,u.prototype.copy.call(y,v,C),A+=T.data.length,T=T.next;return b}},{key:"consume",value:function(g,y){var v;return g<this.head.data.length?(v=this.head.data.slice(0,g),this.head.data=this.head.data.slice(g)):v=g===this.head.data.length?this.shift():y?this._getString(g):this._getBuffer(g),v}},{key:"first",value:function(){return this.head.data}},{key:"_getString",value:function(g){var y=this.head,v=1,C=y.data;for(g-=C.length;y=y.next;){var b=y.data,T=g>b.length?b.length:g;if(T===b.length?C+=b:C+=b.slice(0,g),(g-=T)==0){T===b.length?(++v,y.next?this.head=y.next:this.head=this.tail=null):(this.head=y,y.data=b.slice(T));break}++v}return this.length-=v,C}},{key:"_getBuffer",value:function(g){var y=u.allocUnsafe(g),v=this.head,C=1;for(v.data.copy(y),g-=v.data.length;v=v.next;){var b=v.data,T=g>b.length?b.length:g;if(b.copy(y,y.length-g,0,T),(g-=T)==0){T===b.length?(++C,v.next?this.head=v.next:this.head=this.tail=null):(this.head=v,v.data=b.slice(T));break}++C}return this.length-=C,y}},{key:h,value:function(g,y){return d(this,o(o({},y),{},{depth:0,customInspect:!1}))}}])&&l(f.prototype,m),Object.defineProperty(f,"prototype",{writable:!1}),p}()},{buffer:220,util:188}],485:[function(i,s,r){(function(n){(function(){function o(c,u){l(c,u),a(c)}function a(c){c._writableState&&!c._writableState.emitClose||c._readableState&&!c._readableState.emitClose||c.emit("close")}function l(c,u){c.emit("error",u)}s.exports={destroy:function(c,u){var d=this,h=this._readableState&&this._readableState.destroyed,p=this._writableState&&this._writableState.destroyed;return h||p?(u?u(c):c&&(this._writableState?this._writableState.errorEmitted||(this._writableState.errorEmitted=!0,n.nextTick(l,this,c)):n.nextTick(l,this,c)),this):(this._readableState&&(this._readableState.destroyed=!0),this._writableState&&(this._writableState.destroyed=!0),this._destroy(c||null,function(f){!u&&f?d._writableState?d._writableState.errorEmitted?n.nextTick(a,d):(d._writableState.errorEmitted=!0,n.nextTick(o,d,f)):n.nextTick(o,d,f):u?(n.nextTick(a,d),u(f)):n.nextTick(a,d)}),this)},undestroy:function(){this._readableState&&(this._readableState.destroyed=!1,this._readableState.reading=!1,this._readableState.ended=!1,this._readableState.endEmitted=!1),this._writableState&&(this._writableState.destroyed=!1,this._writableState.ended=!1,this._writableState.ending=!1,this._writableState.finalCalled=!1,this._writableState.prefinished=!1,this._writableState.finished=!1,this._writableState.errorEmitted=!1)},errorOrDestroy:function(c,u){var d=c._readableState,h=c._writableState;d&&d.autoDestroy||h&&h.autoDestroy?c.destroy(u):c.emit("error",u)}}}).call(this)}).call(this,i("_process"))},{_process:467}],486:[function(i,s,r){var n=i("../../../errors").codes.ERR_STREAM_PREMATURE_CLOSE;function o(){}s.exports=function a(l,c,u){if(typeof c=="function")return a(l,null,c);c||(c={}),u=function(T){var A=!1;return function(){if(!A){A=!0;for(var I=arguments.length,D=new Array(I),F=0;F<I;F++)D[F]=arguments[F];T.apply(this,D)}}}(u||o);var d=c.readable||c.readable!==!1&&l.readable,h=c.writable||c.writable!==!1&&l.writable,p=function(){l.writable||m()},f=l._writableState&&l._writableState.finished,m=function(){h=!1,f=!0,d||u.call(l)},g=l._readableState&&l._readableState.endEmitted,y=function(){d=!1,g=!0,h||u.call(l)},v=function(T){u.call(l,T)},C=function(){var T;return d&&!g?(l._readableState&&l._readableState.ended||(T=new n),u.call(l,T)):h&&!f?(l._writableState&&l._writableState.ended||(T=new n),u.call(l,T)):void 0},b=function(){l.req.on("finish",m)};return function(T){return T.setHeader&&typeof T.abort=="function"}(l)?(l.on("complete",m),l.on("abort",C),l.req?b():l.on("request",b)):h&&!l._writableState&&(l.on("end",p),l.on("close",p)),l.on("end",y),l.on("finish",m),c.error!==!1&&l.on("error",v),l.on("close",C),function(){l.removeListener("complete",m),l.removeListener("abort",C),l.removeListener("request",b),l.req&&l.req.removeListener("finish",m),l.removeListener("end",p),l.removeListener("close",p),l.removeListener("finish",m),l.removeListener("end",y),l.removeListener("error",v),l.removeListener("close",C)}}},{"../../../errors":477}],487:[function(i,s,r){s.exports=function(){throw new Error("Readable.from is not available in the browser")}},{}],488:[function(i,s,r){var n,o=i("../../../errors").codes,a=o.ERR_MISSING_ARGS,l=o.ERR_STREAM_DESTROYED;function c(f){if(f)throw f}function u(f,m,g,y){y=function(b){var T=!1;return function(){T||(T=!0,b.apply(void 0,arguments))}}(y);var v=!1;f.on("close",function(){v=!0}),n===void 0&&(n=i("./end-of-stream")),n(f,{readable:m,writable:g},function(b){if(b)return y(b);v=!0,y()});var C=!1;return function(b){if(!v&&!C)return C=!0,function(T){return T.setHeader&&typeof T.abort=="function"}(f)?f.abort():typeof f.destroy=="function"?f.destroy():void y(b||new l("pipe"))}}function d(f){f()}function h(f,m){return f.pipe(m)}function p(f){return f.length?typeof f[f.length-1]!="function"?c:f.pop():c}s.exports=function(){for(var f=arguments.length,m=new Array(f),g=0;g<f;g++)m[g]=arguments[g];var y,v=p(m);if(Array.isArray(m[0])&&(m=m[0]),m.length<2)throw new a("streams");var C=m.map(function(b,T){var A=T<m.length-1;return u(b,A,T>0,function(I){y||(y=I),I&&C.forEach(d),A||(C.forEach(d),v(y))})});return m.reduce(h)}},{"../../../errors":477,"./end-of-stream":486}],489:[function(i,s,r){var n=i("../../../errors").codes.ERR_INVALID_OPT_VALUE;s.exports={getHighWaterMark:function(o,a,l,c){var u=function(d,h,p){return d.highWaterMark!=null?d.highWaterMark:h?d[p]:null}(a,c,l);if(u!=null){if(!isFinite(u)||Math.floor(u)!==u||u<0)throw new n(c?l:"highWaterMark",u);return Math.floor(u)}return o.objectMode?16:16384}}},{"../../../errors":477}],490:[function(i,s,r){s.exports=i("events").EventEmitter},{events:422}],491:[function(i,s,r){(r=s.exports=i("./lib/_stream_readable.js")).Stream=r,r.Readable=r,r.Writable=i("./lib/_stream_writable.js"),r.Duplex=i("./lib/_stream_duplex.js"),r.Transform=i("./lib/_stream_transform.js"),r.PassThrough=i("./lib/_stream_passthrough.js"),r.finished=i("./lib/internal/streams/end-of-stream.js"),r.pipeline=i("./lib/internal/streams/pipeline.js")},{"./lib/_stream_duplex.js":478,"./lib/_stream_passthrough.js":479,"./lib/_stream_readable.js":480,"./lib/_stream_transform.js":481,"./lib/_stream_writable.js":482,"./lib/internal/streams/end-of-stream.js":486,"./lib/internal/streams/pipeline.js":488}],492:[function(i,s,r){var n=function(o){var a=Object.prototype,l=a.hasOwnProperty,c=Object.defineProperty||function(x,E,M){x[E]=M.value},u=typeof Symbol=="function"?Symbol:{},d=u.iterator||"@@iterator",h=u.asyncIterator||"@@asyncIterator",p=u.toStringTag||"@@toStringTag";function f(x,E,M){return Object.defineProperty(x,E,{value:M,enumerable:!0,configurable:!0,writable:!0}),x[E]}try{f({},"")}catch{f=function(E,M,O){return E[M]=O}}function m(x,E,M,O){var V=E&&E.prototype instanceof v?E:v,Y=Object.create(V.prototype),$=new _(O||[]);return c(Y,"_invoke",{value:U(x,M,$)}),Y}function g(x,E,M){try{return{type:"normal",arg:x.call(E,M)}}catch(O){return{type:"throw",arg:O}}}o.wrap=m;var y={};function v(){}function C(){}function b(){}var T={};f(T,d,function(){return this});var A=Object.getPrototypeOf,I=A&&A(A(w([])));I&&I!==a&&l.call(I,d)&&(T=I);var D=b.prototype=v.prototype=Object.create(T);function F(x){["next","throw","return"].forEach(function(E){f(x,E,function(M){return this._invoke(E,M)})})}function B(x,E){var M;c(this,"_invoke",{value:function(O,V){function Y(){return new E(function($,J){(function G(Z,N,P,j){var X=g(x[Z],x,N);if(X.type!=="throw"){var ie=X.arg,ee=ie.value;return ee&&typeof ee=="object"&&l.call(ee,"__await")?E.resolve(ee.__await).then(function(re){G("next",re,P,j)},function(re){G("throw",re,P,j)}):E.resolve(ee).then(function(re){ie.value=re,P(ie)},function(re){return G("throw",re,P,j)})}j(X.arg)})(O,V,$,J)})}return M=M?M.then(Y,Y):Y()}})}function U(x,E,M){var O="suspendedStart";return function(V,Y){if(O==="executing")throw new Error("Generator is already running");if(O==="completed"){if(V==="throw")throw Y;return S()}for(M.method=V,M.arg=Y;;){var $=M.delegate;if($){var J=H($,M);if(J){if(J===y)continue;return J}}if(M.method==="next")M.sent=M._sent=M.arg;else if(M.method==="throw"){if(O==="suspendedStart")throw O="completed",M.arg;M.dispatchException(M.arg)}else M.method==="return"&&M.abrupt("return",M.arg);O="executing";var G=g(x,E,M);if(G.type==="normal"){if(O=M.done?"completed":"suspendedYield",G.arg===y)continue;return{value:G.arg,done:M.done}}G.type==="throw"&&(O="completed",M.method="throw",M.arg=G.arg)}}}function H(x,E){var M=E.method,O=x.iterator[M];if(O===void 0)return E.delegate=null,M==="throw"&&x.iterator.return&&(E.method="return",E.arg=void 0,H(x,E),E.method==="throw")||M!=="return"&&(E.method="throw",E.arg=new TypeError("The iterator does not provide a '"+M+"' method")),y;var V=g(O,x.iterator,E.arg);if(V.type==="throw")return E.method="throw",E.arg=V.arg,E.delegate=null,y;var Y=V.arg;return Y?Y.done?(E[x.resultName]=Y.value,E.next=x.nextLoc,E.method!=="return"&&(E.method="next",E.arg=void 0),E.delegate=null,y):Y:(E.method="throw",E.arg=new TypeError("iterator result is not an object"),E.delegate=null,y)}function R(x){var E={tryLoc:x[0]};1 in x&&(E.catchLoc=x[1]),2 in x&&(E.finallyLoc=x[2],E.afterLoc=x[3]),this.tryEntries.push(E)}function L(x){var E=x.completion||{};E.type="normal",delete E.arg,x.completion=E}function _(x){this.tryEntries=[{tryLoc:"root"}],x.forEach(R,this),this.reset(!0)}function w(x){if(x){var E=x[d];if(E)return E.call(x);if(typeof x.next=="function")return x;if(!isNaN(x.length)){var M=-1,O=function V(){for(;++M<x.length;)if(l.call(x,M))return V.value=x[M],V.done=!1,V;return V.value=void 0,V.done=!0,V};return O.next=O}}return{next:S}}function S(){return{value:void 0,done:!0}}return C.prototype=b,c(D,"constructor",{value:b,configurable:!0}),c(b,"constructor",{value:C,configurable:!0}),C.displayName=f(b,p,"GeneratorFunction"),o.isGeneratorFunction=function(x){var E=typeof x=="function"&&x.constructor;return!!E&&(E===C||(E.displayName||E.name)==="GeneratorFunction")},o.mark=function(x){return Object.setPrototypeOf?Object.setPrototypeOf(x,b):(x.__proto__=b,f(x,p,"GeneratorFunction")),x.prototype=Object.create(D),x},o.awrap=function(x){return{__await:x}},F(B.prototype),f(B.prototype,h,function(){return this}),o.AsyncIterator=B,o.async=function(x,E,M,O,V){V===void 0&&(V=Promise);var Y=new B(m(x,E,M,O),V);return o.isGeneratorFunction(E)?Y:Y.next().then(function($){return $.done?$.value:Y.next()})},F(D),f(D,p,"Generator"),f(D,d,function(){return this}),f(D,"toString",function(){return"[object Generator]"}),o.keys=function(x){var E=Object(x),M=[];for(var O in E)M.push(O);return M.reverse(),function V(){for(;M.length;){var Y=M.pop();if(Y in E)return V.value=Y,V.done=!1,V}return V.done=!0,V}},o.values=w,_.prototype={constructor:_,reset:function(x){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(L),!x)for(var E in this)E.charAt(0)==="t"&&l.call(this,E)&&!isNaN(+E.slice(1))&&(this[E]=void 0)},stop:function(){this.done=!0;var x=this.tryEntries[0].completion;if(x.type==="throw")throw x.arg;return this.rval},dispatchException:function(x){if(this.done)throw x;var E=this;function M(G,Z){return Y.type="throw",Y.arg=x,E.next=G,Z&&(E.method="next",E.arg=void 0),!!Z}for(var O=this.tryEntries.length-1;O>=0;--O){var V=this.tryEntries[O],Y=V.completion;if(V.tryLoc==="root")return M("end");if(V.tryLoc<=this.prev){var $=l.call(V,"catchLoc"),J=l.call(V,"finallyLoc");if($&&J){if(this.prev<V.catchLoc)return M(V.catchLoc,!0);if(this.prev<V.finallyLoc)return M(V.finallyLoc)}else if($){if(this.prev<V.catchLoc)return M(V.catchLoc,!0)}else{if(!J)throw new Error("try statement without catch or finally");if(this.prev<V.finallyLoc)return M(V.finallyLoc)}}}},abrupt:function(x,E){for(var M=this.tryEntries.length-1;M>=0;--M){var O=this.tryEntries[M];if(O.tryLoc<=this.prev&&l.call(O,"finallyLoc")&&this.prev<O.finallyLoc){var V=O;break}}V&&(x==="break"||x==="continue")&&V.tryLoc<=E&&E<=V.finallyLoc&&(V=null);var Y=V?V.completion:{};return Y.type=x,Y.arg=E,V?(this.method="next",this.next=V.finallyLoc,y):this.complete(Y)},complete:function(x,E){if(x.type==="throw")throw x.arg;return x.type==="break"||x.type==="continue"?this.next=x.arg:x.type==="return"?(this.rval=this.arg=x.arg,this.method="return",this.next="end"):x.type==="normal"&&E&&(this.next=E),y},finish:function(x){for(var E=this.tryEntries.length-1;E>=0;--E){var M=this.tryEntries[E];if(M.finallyLoc===x)return this.complete(M.completion,M.afterLoc),L(M),y}},catch:function(x){for(var E=this.tryEntries.length-1;E>=0;--E){var M=this.tryEntries[E];if(M.tryLoc===x){var O=M.completion;if(O.type==="throw"){var V=O.arg;L(M)}return V}}throw new Error("illegal catch attempt")},delegateYield:function(x,E,M){return this.delegate={iterator:w(x),resultName:E,nextLoc:M},this.method==="next"&&(this.arg=void 0),y}},o}(typeof s=="object"?s.exports:{});try{regeneratorRuntime=n}catch{typeof globalThis=="object"?globalThis.regeneratorRuntime=n:Function("r","regeneratorRuntime = r")(n)}},{}],493:[function(i,s,r){var n=i("buffer").Buffer,o=i("inherits"),a=i("hash-base"),l=new Array(16),c=[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,7,4,13,1,10,6,15,3,12,0,9,5,2,14,11,8,3,10,14,4,9,15,8,1,2,7,0,6,13,11,5,12,1,9,11,10,0,8,12,4,13,3,7,15,14,5,6,2,4,0,5,9,7,12,2,10,14,1,3,8,11,6,15,13],u=[5,14,7,0,9,2,11,4,13,6,15,8,1,10,3,12,6,11,3,7,0,13,5,10,14,15,8,12,4,9,1,2,15,5,1,3,7,14,6,9,11,8,12,2,10,0,4,13,8,6,4,1,3,11,15,0,5,12,2,13,9,7,10,14,12,15,10,4,1,5,8,7,6,2,13,14,0,3,9,11],d=[11,14,15,12,5,8,7,9,11,13,14,15,6,7,9,8,7,6,8,13,11,9,7,15,7,12,15,9,11,7,13,12,11,13,6,7,14,9,13,15,14,8,13,6,5,12,7,5,11,12,14,15,14,15,9,8,9,14,5,6,8,6,5,12,9,15,5,11,6,8,13,12,5,12,13,14,11,8,5,6],h=[8,9,9,11,13,15,15,5,7,7,8,11,14,14,12,6,9,13,15,7,12,8,9,11,7,7,12,7,6,15,13,11,9,7,15,11,8,6,6,14,12,13,5,14,13,13,7,5,15,5,8,11,14,14,6,14,6,9,12,9,12,5,15,8,8,5,12,9,12,5,14,6,8,13,6,5,15,13,11,11],p=[0,1518500249,1859775393,2400959708,2840853838],f=[1352829926,1548603684,1836072691,2053994217,0];function m(){a.call(this,64),this._a=1732584193,this._b=4023233417,this._c=2562383102,this._d=271733878,this._e=3285377520}function g(A,I){return A<<I|A>>>32-I}function y(A,I,D,F,B,U,H,R){return g(A+(I^D^F)+U+H|0,R)+B|0}function v(A,I,D,F,B,U,H,R){return g(A+(I&D|~I&F)+U+H|0,R)+B|0}function C(A,I,D,F,B,U,H,R){return g(A+((I|~D)^F)+U+H|0,R)+B|0}function b(A,I,D,F,B,U,H,R){return g(A+(I&F|D&~F)+U+H|0,R)+B|0}function T(A,I,D,F,B,U,H,R){return g(A+(I^(D|~F))+U+H|0,R)+B|0}o(m,a),m.prototype._update=function(){for(var A=l,I=0;I<16;++I)A[I]=this._block.readInt32LE(4*I);for(var D=0|this._a,F=0|this._b,B=0|this._c,U=0|this._d,H=0|this._e,R=0|this._a,L=0|this._b,_=0|this._c,w=0|this._d,S=0|this._e,x=0;x<80;x+=1){var E,M;x<16?(E=y(D,F,B,U,H,A[c[x]],p[0],d[x]),M=T(R,L,_,w,S,A[u[x]],f[0],h[x])):x<32?(E=v(D,F,B,U,H,A[c[x]],p[1],d[x]),M=b(R,L,_,w,S,A[u[x]],f[1],h[x])):x<48?(E=C(D,F,B,U,H,A[c[x]],p[2],d[x]),M=C(R,L,_,w,S,A[u[x]],f[2],h[x])):x<64?(E=b(D,F,B,U,H,A[c[x]],p[3],d[x]),M=v(R,L,_,w,S,A[u[x]],f[3],h[x])):(E=T(D,F,B,U,H,A[c[x]],p[4],d[x]),M=y(R,L,_,w,S,A[u[x]],f[4],h[x])),D=H,H=U,U=g(B,10),B=F,F=E,R=S,S=w,w=g(_,10),_=L,L=M}var O=this._b+B+w|0;this._b=this._c+U+S|0,this._c=this._d+H+R|0,this._d=this._e+D+L|0,this._e=this._a+F+_|0,this._a=O},m.prototype._digest=function(){this._block[this._blockOffset++]=128,this._blockOffset>56&&(this._block.fill(0,this._blockOffset,64),this._update(),this._blockOffset=0),this._block.fill(0,this._blockOffset,56),this._block.writeUInt32LE(this._length[0],56),this._block.writeUInt32LE(this._length[1],60),this._update();var A=n.alloc?n.alloc(20):new n(20);return A.writeInt32LE(this._a,0),A.writeInt32LE(this._b,4),A.writeInt32LE(this._c,8),A.writeInt32LE(this._d,12),A.writeInt32LE(this._e,16),A},s.exports=m},{buffer:220,"hash-base":425,inherits:440}],494:[function(i,s,r){/*! safe-buffer. MIT License. Feross Aboukhadijeh <https://feross.org/opensource> */var n=i("buffer"),o=n.Buffer;function a(c,u){for(var d in c)u[d]=c[d]}function l(c,u,d){return o(c,u,d)}o.from&&o.alloc&&o.allocUnsafe&&o.allocUnsafeSlow?s.exports=n:(a(n,r),r.Buffer=l),l.prototype=Object.create(o.prototype),a(o,l),l.from=function(c,u,d){if(typeof c=="number")throw new TypeError("Argument must not be a number");return o(c,u,d)},l.alloc=function(c,u,d){if(typeof c!="number")throw new TypeError("Argument must be a number");var h=o(c);return u!==void 0?typeof d=="string"?h.fill(u,d):h.fill(u):h.fill(0),h},l.allocUnsafe=function(c){if(typeof c!="number")throw new TypeError("Argument must be a number");return o(c)},l.allocUnsafeSlow=function(c){if(typeof c!="number")throw new TypeError("Argument must be a number");return n.SlowBuffer(c)}},{buffer:220}],495:[function(i,s,r){(function(n){(function(){var o,a=i("buffer"),l=a.Buffer,c={};for(o in a)a.hasOwnProperty(o)&&o!=="SlowBuffer"&&o!=="Buffer"&&(c[o]=a[o]);var u=c.Buffer={};for(o in l)l.hasOwnProperty(o)&&o!=="allocUnsafe"&&o!=="allocUnsafeSlow"&&(u[o]=l[o]);if(c.Buffer.prototype=l.prototype,u.from&&u.from!==Uint8Array.from||(u.from=function(d,h,p){if(typeof d=="number")throw new TypeError('The "value" argument must not be of type number. Received type '+typeof d);if(d&&d.length===void 0)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof d);return l(d,h,p)}),u.alloc||(u.alloc=function(d,h,p){if(typeof d!="number")throw new TypeError('The "size" argument must be of type number. Received type '+typeof d);if(d<0||d>=2*(1<<30))throw new RangeError('The value "'+d+'" is invalid for option "size"');var f=l(d);return h&&h.length!==0?typeof p=="string"?f.fill(h,p):f.fill(h):f.fill(0),f}),!c.kStringMaxLength)try{c.kStringMaxLength=n.binding("buffer").kStringMaxLength}catch{}c.constants||(c.constants={MAX_LENGTH:c.kMaxLength},c.kStringMaxLength&&(c.constants.MAX_STRING_LENGTH=c.kStringMaxLength)),s.exports=c}).call(this)}).call(this,i("_process"))},{_process:467,buffer:220}],496:[function(i,s,r){Object.defineProperty(r,"__esModule",{value:!0});const n=i("xmlchars/xml/1.0/ed5"),o=i("xmlchars/xml/1.1/ed2"),a=i("xmlchars/xmlns/1.0/ed3");var l=n.isS,c=n.isChar,u=n.isNameStartChar,d=n.isNameChar,h=n.S_LIST,p=n.NAME_RE,f=o.isChar,m=a.isNCNameStartChar,g=a.isNCNameChar,y=a.NC_NAME_RE;const v="http://www.w3.org/XML/1998/namespace",C="http://www.w3.org/2000/xmlns/",b={__proto__:null,xml:v,xmlns:C},T={__proto__:null,amp:"&",gt:">",lt:"<",quot:'"',apos:"'"},A=w=>w===34||w===39,I=[34,39],D=[...I,91,62],F=[...I,60,93],B=[61,63,...h],U=[...h,62,38,60];function H(w,S,x){switch(S){case"xml":x!==v&&w.fail(`xml prefix must be bound to ${v}.`);break;case"xmlns":x!==C&&w.fail(`xmlns prefix must be bound to ${C}.`)}switch(x){case C:w.fail(S===""?`the default namespace may not be set to ${x}.`:`may not assign a prefix (even "xmlns") to the URI ${C}.`);break;case v:switch(S){case"xml":break;case"":w.fail(`the default namespace may not be set to ${x}.`);break;default:w.fail("may not assign the xml namespace to another prefix.")}}}const R=w=>y.test(w),L=w=>p.test(w);r.EVENTS=["xmldecl","text","processinginstruction","doctype","comment","opentagstart","attribute","opentag","closetag","cdata","error","end","ready"];const _={xmldecl:"xmldeclHandler",text:"textHandler",processinginstruction:"piHandler",doctype:"doctypeHandler",comment:"commentHandler",opentagstart:"openTagStartHandler",attribute:"attributeHandler",opentag:"openTagHandler",closetag:"closeTagHandler",cdata:"cdataHandler",error:"errorHandler",end:"endHandler",ready:"readyHandler"};r.SaxesParser=class{constructor(w){this.opt=w??{},this.fragmentOpt=!!this.opt.fragment;const S=this.xmlnsOpt=!!this.opt.xmlns;if(this.trackPosition=this.opt.position!==!1,this.fileName=this.opt.fileName,S){this.nameStartCheck=m,this.nameCheck=g,this.isName=R,this.processAttribs=this.processAttribsNS,this.pushAttrib=this.pushAttribNS,this.ns=Object.assign({__proto__:null},b);const x=this.opt.additionalNamespaces;x!=null&&(function(E,M){for(const O of Object.keys(M))H(E,O,M[O])}(this,x),Object.assign(this.ns,x))}else this.nameStartCheck=u,this.nameCheck=d,this.isName=L,this.processAttribs=this.processAttribsPlain,this.pushAttrib=this.pushAttribPlain;this.stateTable=[this.sBegin,this.sBeginWhitespace,this.sDoctype,this.sDoctypeQuote,this.sDTD,this.sDTDQuoted,this.sDTDOpenWaka,this.sDTDOpenWakaBang,this.sDTDComment,this.sDTDCommentEnding,this.sDTDCommentEnded,this.sDTDPI,this.sDTDPIEnding,this.sText,this.sEntity,this.sOpenWaka,this.sOpenWakaBang,this.sComment,this.sCommentEnding,this.sCommentEnded,this.sCData,this.sCDataEnding,this.sCDataEnding2,this.sPIFirstChar,this.sPIRest,this.sPIBody,this.sPIEnding,this.sXMLDeclNameStart,this.sXMLDeclName,this.sXMLDeclEq,this.sXMLDeclValueStart,this.sXMLDeclValue,this.sXMLDeclSeparator,this.sXMLDeclEnding,this.sOpenTag,this.sOpenTagSlash,this.sAttrib,this.sAttribName,this.sAttribNameSawWhite,this.sAttribValue,this.sAttribValueQuoted,this.sAttribValueClosed,this.sAttribValueUnquoted,this.sCloseTag,this.sCloseTagSawWhite],this._init()}get closed(){return this._closed}_init(){var w;this.openWakaBang="",this.text="",this.name="",this.piTarget="",this.entity="",this.q=null,this.tags=[],this.tag=null,this.topNS=null,this.chunk="",this.chunkPosition=0,this.i=0,this.prevI=0,this.carriedFromPrevious=void 0,this.forbiddenState=0,this.attribList=[];const{fragmentOpt:S}=this;this.state=S?13:0,this.reportedTextBeforeRoot=this.reportedTextAfterRoot=this.closedRoot=this.sawRoot=S,this.xmlDeclPossible=!S,this.xmlDeclExpects=["version"],this.entityReturnState=void 0;let{defaultXMLVersion:x}=this.opt;if(x===void 0){if(this.opt.forceXMLVersion===!0)throw new Error("forceXMLVersion set but defaultXMLVersion is not set");x="1.0"}this.setXMLVersion(x),this.positionAtNewLine=0,this.doctype=!1,this._closed=!1,this.xmlDecl={version:void 0,encoding:void 0,standalone:void 0},this.line=1,this.column=0,this.ENTITIES=Object.create(T),(w=this.readyHandler)===null||w===void 0||w.call(this)}get position(){return this.chunkPosition+this.i}get columnIndex(){return this.position-this.positionAtNewLine}on(w,S){this[_[w]]=S}off(w){this[_[w]]=void 0}makeError(w){var S;let x=(S=this.fileName)!==null&&S!==void 0?S:"";return this.trackPosition&&(x.length>0&&(x+=":"),x+=`${this.line}:${this.column}`),x.length>0&&(x+=": "),new Error(x+w)}fail(w){const S=this.makeError(w),x=this.errorHandler;if(x===void 0)throw S;return x(S),this}write(w){if(this.closed)return this.fail("cannot write after close; assign an onready handler.");let S=!1;w===null?(S=!0,w=""):typeof w=="object"&&(w=w.toString()),this.carriedFromPrevious!==void 0&&(w=`${this.carriedFromPrevious}${w}`,this.carriedFromPrevious=void 0);let x=w.length;const E=w.charCodeAt(x-1);!S&&(E===13||E>=55296&&E<=56319)&&(this.carriedFromPrevious=w[x-1],x--,w=w.slice(0,x));const{stateTable:M}=this;for(this.chunk=w,this.i=0;this.i<x;)M[this.state].call(this);return this.chunkPosition+=x,S?this.end():this}close(){return this.write(null)}getCode10(){const{chunk:w,i:S}=this;if(this.prevI=S,this.i=S+1,S>=w.length)return-1;const x=w.charCodeAt(S);if(this.column++,x<55296){if(x>=32||x===9)return x;switch(x){case 10:return this.line++,this.column=0,this.positionAtNewLine=this.position,10;case 13:return w.charCodeAt(S+1)===10&&(this.i=S+2),this.line++,this.column=0,this.positionAtNewLine=this.position,-2;default:return this.fail("disallowed character."),x}}if(x>56319)return x>=57344&&x<=65533||this.fail("disallowed character."),x;const E=65536+1024*(x-55296)+(w.charCodeAt(S+1)-56320);return this.i=S+2,E>1114111&&this.fail("disallowed character."),E}getCode11(){const{chunk:w,i:S}=this;if(this.prevI=S,this.i=S+1,S>=w.length)return-1;const x=w.charCodeAt(S);if(this.column++,x<55296){if(x>31&&x<127||x>159&&x!==8232||x===9)return x;switch(x){case 10:return this.line++,this.column=0,this.positionAtNewLine=this.position,10;case 13:{const M=w.charCodeAt(S+1);M!==10&&M!==133||(this.i=S+2)}case 133:case 8232:return this.line++,this.column=0,this.positionAtNewLine=this.position,-2;default:return this.fail("disallowed character."),x}}if(x>56319)return x>=57344&&x<=65533||this.fail("disallowed character."),x;const E=65536+1024*(x-55296)+(w.charCodeAt(S+1)-56320);return this.i=S+2,E>1114111&&this.fail("disallowed character."),E}getCodeNorm(){const w=this.getCode();return w===-2?10:w}unget(){this.i=this.prevI,this.column--}captureTo(w){let{i:S}=this;const{chunk:x}=this;for(;;){const E=this.getCode(),M=E===-2,O=M?10:E;if(O===-1||w.includes(O))return this.text+=x.slice(S,this.prevI),O;M&&(this.text+=x.slice(S,this.prevI)+`
`,S=this.i)}}captureToChar(w){let{i:S}=this;const{chunk:x}=this;for(;;){let E=this.getCode();switch(E){case-2:this.text+=x.slice(S,this.prevI)+`
`,S=this.i,E=10;break;case-1:return this.text+=x.slice(S),!1}if(E===w)return this.text+=x.slice(S,this.prevI),!0}}captureNameChars(){const{chunk:w,i:S}=this;for(;;){const x=this.getCode();if(x===-1)return this.name+=w.slice(S),-1;if(!d(x))return this.name+=w.slice(S,this.prevI),x===-2?10:x}}skipSpaces(){for(;;){const w=this.getCodeNorm();if(w===-1||!l(w))return w}}setXMLVersion(w){this.currentXMLVersion=w,w==="1.0"?(this.isChar=c,this.getCode=this.getCode10):(this.isChar=f,this.getCode=this.getCode11)}sBegin(){this.chunk.charCodeAt(0)===65279&&(this.i++,this.column++),this.state=1}sBeginWhitespace(){const w=this.i,S=this.skipSpaces();switch(this.prevI!==w&&(this.xmlDeclPossible=!1),S){case 60:if(this.state=15,this.text.length!==0)throw new Error("no-empty text at start");break;case-1:break;default:this.unget(),this.state=13,this.xmlDeclPossible=!1}}sDoctype(){var w;const S=this.captureTo(D);switch(S){case 62:(w=this.doctypeHandler)===null||w===void 0||w.call(this,this.text),this.text="",this.state=13,this.doctype=!0;break;case-1:break;default:this.text+=String.fromCodePoint(S),S===91?this.state=4:A(S)&&(this.state=3,this.q=S)}}sDoctypeQuote(){const w=this.q;this.captureToChar(w)&&(this.text+=String.fromCodePoint(w),this.q=null,this.state=2)}sDTD(){const w=this.captureTo(F);w!==-1&&(this.text+=String.fromCodePoint(w),w===93?this.state=2:w===60?this.state=6:A(w)&&(this.state=5,this.q=w))}sDTDQuoted(){const w=this.q;this.captureToChar(w)&&(this.text+=String.fromCodePoint(w),this.state=4,this.q=null)}sDTDOpenWaka(){const w=this.getCodeNorm();switch(this.text+=String.fromCodePoint(w),w){case 33:this.state=7,this.openWakaBang="";break;case 63:this.state=11;break;default:this.state=4}}sDTDOpenWakaBang(){const w=String.fromCodePoint(this.getCodeNorm()),S=this.openWakaBang+=w;this.text+=w,S!=="-"&&(this.state=S==="--"?8:4,this.openWakaBang="")}sDTDComment(){this.captureToChar(45)&&(this.text+="-",this.state=9)}sDTDCommentEnding(){const w=this.getCodeNorm();this.text+=String.fromCodePoint(w),this.state=w===45?10:8}sDTDCommentEnded(){const w=this.getCodeNorm();this.text+=String.fromCodePoint(w),w===62?this.state=4:(this.fail("malformed comment."),this.state=8)}sDTDPI(){this.captureToChar(63)&&(this.text+="?",this.state=12)}sDTDPIEnding(){const w=this.getCodeNorm();this.text+=String.fromCodePoint(w),w===62&&(this.state=4)}sText(){this.tags.length!==0?this.handleTextInRoot():this.handleTextOutsideRoot()}sEntity(){let{i:w}=this;const{chunk:S}=this;e:for(;;)switch(this.getCode()){case-2:this.entity+=S.slice(w,this.prevI)+`
`,w=this.i;break;case 59:{const{entityReturnState:x}=this,E=this.entity+S.slice(w,this.prevI);let M;this.state=x,E===""?(this.fail("empty entity name."),M="&;"):(M=this.parseEntity(E),this.entity=""),x===13&&this.textHandler===void 0||(this.text+=M);break e}case-1:this.entity+=S.slice(w);break e}}sOpenWaka(){const w=this.getCode();if(u(w))this.state=34,this.unget(),this.xmlDeclPossible=!1;else switch(w){case 47:this.state=43,this.xmlDeclPossible=!1;break;case 33:this.state=16,this.openWakaBang="",this.xmlDeclPossible=!1;break;case 63:this.state=23;break;default:this.fail("disallowed character in tag name"),this.state=13,this.xmlDeclPossible=!1}}sOpenWakaBang(){switch(this.openWakaBang+=String.fromCodePoint(this.getCodeNorm()),this.openWakaBang){case"[CDATA[":this.sawRoot||this.reportedTextBeforeRoot||(this.fail("text data outside of root node."),this.reportedTextBeforeRoot=!0),this.closedRoot&&!this.reportedTextAfterRoot&&(this.fail("text data outside of root node."),this.reportedTextAfterRoot=!0),this.state=20,this.openWakaBang="";break;case"--":this.state=17,this.openWakaBang="";break;case"DOCTYPE":this.state=2,(this.doctype||this.sawRoot)&&this.fail("inappropriately located doctype declaration."),this.openWakaBang="";break;default:this.openWakaBang.length>=7&&this.fail("incorrect syntax.")}}sComment(){this.captureToChar(45)&&(this.state=18)}sCommentEnding(){var w;const S=this.getCodeNorm();S===45?(this.state=19,(w=this.commentHandler)===null||w===void 0||w.call(this,this.text),this.text=""):(this.text+="-"+String.fromCodePoint(S),this.state=17)}sCommentEnded(){const w=this.getCodeNorm();w!==62?(this.fail("malformed comment."),this.text+="--"+String.fromCodePoint(w),this.state=17):this.state=13}sCData(){this.captureToChar(93)&&(this.state=21)}sCDataEnding(){const w=this.getCodeNorm();w===93?this.state=22:(this.text+="]"+String.fromCodePoint(w),this.state=20)}sCDataEnding2(){var w;const S=this.getCodeNorm();switch(S){case 62:(w=this.cdataHandler)===null||w===void 0||w.call(this,this.text),this.text="",this.state=13;break;case 93:this.text+="]";break;default:this.text+="]]"+String.fromCodePoint(S),this.state=20}}sPIFirstChar(){const w=this.getCodeNorm();this.nameStartCheck(w)?(this.piTarget+=String.fromCodePoint(w),this.state=24):w===63||l(w)?(this.fail("processing instruction without a target."),this.state=w===63?26:25):(this.fail("disallowed character in processing instruction name."),this.piTarget+=String.fromCodePoint(w),this.state=24)}sPIRest(){const{chunk:w,i:S}=this;for(;;){const x=this.getCodeNorm();if(x===-1)return void(this.piTarget+=w.slice(S));if(!this.nameCheck(x)){this.piTarget+=w.slice(S,this.prevI);const E=x===63;E||l(x)?this.piTarget==="xml"?(this.xmlDeclPossible||this.fail("an XML declaration must be at the start of the document."),this.state=E?33:27):this.state=E?26:25:(this.fail("disallowed character in processing instruction name."),this.piTarget+=String.fromCodePoint(x));break}}}sPIBody(){if(this.text.length===0){const w=this.getCodeNorm();w===63?this.state=26:l(w)||(this.text=String.fromCodePoint(w))}else this.captureToChar(63)&&(this.state=26)}sPIEnding(){var w;const S=this.getCodeNorm();if(S===62){const{piTarget:x}=this;x.toLowerCase()==="xml"&&this.fail("the XML declaration must appear at the start of the document."),(w=this.piHandler)===null||w===void 0||w.call(this,{target:x,body:this.text}),this.piTarget=this.text="",this.state=13}else S===63?this.text+="?":(this.text+="?"+String.fromCodePoint(S),this.state=25);this.xmlDeclPossible=!1}sXMLDeclNameStart(){const w=this.skipSpaces();w!==63?w!==-1&&(this.state=28,this.name=String.fromCodePoint(w)):this.state=33}sXMLDeclName(){const w=this.captureTo(B);if(w===63)return this.state=33,this.name+=this.text,this.text="",void this.fail("XML declaration is incomplete.");if(l(w)||w===61){if(this.name+=this.text,this.text="",!this.xmlDeclExpects.includes(this.name))switch(this.name.length){case 0:this.fail("did not expect any more name/value pairs.");break;case 1:this.fail(`expected the name ${this.xmlDeclExpects[0]}.`);break;default:this.fail("expected one of "+this.xmlDeclExpects.join(", "))}this.state=w===61?30:29}}sXMLDeclEq(){const w=this.getCodeNorm();if(w===63)return this.state=33,void this.fail("XML declaration is incomplete.");l(w)||(w!==61&&this.fail("value required."),this.state=30)}sXMLDeclValueStart(){const w=this.getCodeNorm();if(w===63)return this.state=33,void this.fail("XML declaration is incomplete.");l(w)||(A(w)?this.q=w:(this.fail("value must be quoted."),this.q=32),this.state=31)}sXMLDeclValue(){const w=this.captureTo([this.q,63]);if(w===63)return this.state=33,this.text="",void this.fail("XML declaration is incomplete.");if(w===-1)return;const S=this.text;switch(this.text="",this.name){case"version":{this.xmlDeclExpects=["encoding","standalone"];const x=S;this.xmlDecl.version=x,/^1\.[0-9]+$/.test(x)?this.opt.forceXMLVersion||this.setXMLVersion(x):this.fail("version number must match /^1\\.[0-9]+$/.");break}case"encoding":/^[A-Za-z][A-Za-z0-9._-]*$/.test(S)||this.fail("encoding value must match /^[A-Za-z0-9][A-Za-z0-9._-]*$/."),this.xmlDeclExpects=["standalone"],this.xmlDecl.encoding=S;break;case"standalone":S!=="yes"&&S!=="no"&&this.fail('standalone value must match "yes" or "no".'),this.xmlDeclExpects=[],this.xmlDecl.standalone=S}this.name="",this.state=32}sXMLDeclSeparator(){const w=this.getCodeNorm();w!==63?(l(w)||(this.fail("whitespace required."),this.unget()),this.state=27):this.state=33}sXMLDeclEnding(){var w;this.getCodeNorm()===62?(this.piTarget!=="xml"?this.fail("processing instructions are not allowed before root."):this.name!=="version"&&this.xmlDeclExpects.includes("version")&&this.fail("XML declaration must contain a version."),(w=this.xmldeclHandler)===null||w===void 0||w.call(this,this.xmlDecl),this.name="",this.piTarget=this.text="",this.state=13):this.fail("The character ? is disallowed anywhere in XML declarations."),this.xmlDeclPossible=!1}sOpenTag(){var w;const S=this.captureNameChars();if(S===-1)return;const x=this.tag={name:this.name,attributes:Object.create(null)};switch(this.name="",this.xmlnsOpt&&(this.topNS=x.ns=Object.create(null)),(w=this.openTagStartHandler)===null||w===void 0||w.call(this,x),this.sawRoot=!0,!this.fragmentOpt&&this.closedRoot&&this.fail("documents may contain only one root."),S){case 62:this.openTag();break;case 47:this.state=35;break;default:l(S)||this.fail("disallowed character in tag name."),this.state=36}}sOpenTagSlash(){this.getCode()===62?this.openSelfClosingTag():(this.fail("forward-slash in opening tag not followed by >."),this.state=36)}sAttrib(){const w=this.skipSpaces();w!==-1&&(u(w)?(this.unget(),this.state=37):w===62?this.openTag():w===47?this.state=35:this.fail("disallowed character in attribute name."))}sAttribName(){const w=this.captureNameChars();w===61?this.state=39:l(w)?this.state=38:w===62?(this.fail("attribute without value."),this.pushAttrib(this.name,this.name),this.name=this.text="",this.openTag()):w!==-1&&this.fail("disallowed character in attribute name.")}sAttribNameSawWhite(){const w=this.skipSpaces();switch(w){case-1:return;case 61:this.state=39;break;default:this.fail("attribute without value."),this.text="",this.name="",w===62?this.openTag():u(w)?(this.unget(),this.state=37):(this.fail("disallowed character in attribute name."),this.state=36)}}sAttribValue(){const w=this.getCodeNorm();A(w)?(this.q=w,this.state=40):l(w)||(this.fail("unquoted attribute value."),this.state=42,this.unget())}sAttribValueQuoted(){const{q:w,chunk:S}=this;let{i:x}=this;for(;;)switch(this.getCode()){case w:return this.pushAttrib(this.name,this.text+S.slice(x,this.prevI)),this.name=this.text="",this.q=null,void(this.state=41);case 38:return this.text+=S.slice(x,this.prevI),this.state=14,void(this.entityReturnState=40);case 10:case-2:case 9:this.text+=S.slice(x,this.prevI)+" ",x=this.i;break;case 60:return this.text+=S.slice(x,this.prevI),void this.fail("disallowed character.");case-1:return void(this.text+=S.slice(x))}}sAttribValueClosed(){const w=this.getCodeNorm();l(w)?this.state=36:w===62?this.openTag():w===47?this.state=35:u(w)?(this.fail("no whitespace between attributes."),this.unget(),this.state=37):this.fail("disallowed character in attribute name.")}sAttribValueUnquoted(){const w=this.captureTo(U);switch(w){case 38:this.state=14,this.entityReturnState=42;break;case 60:this.fail("disallowed character.");break;case-1:break;default:this.text.includes("]]>")&&this.fail('the string "]]>" is disallowed in char data.'),this.pushAttrib(this.name,this.text),this.name=this.text="",w===62?this.openTag():this.state=36}}sCloseTag(){const w=this.captureNameChars();w===62?this.closeTag():l(w)?this.state=44:w!==-1&&this.fail("disallowed character in closing tag.")}sCloseTagSawWhite(){switch(this.skipSpaces()){case 62:this.closeTag();break;case-1:break;default:this.fail("disallowed character in closing tag.")}}handleTextInRoot(){let{i:w,forbiddenState:S}=this;const{chunk:x,textHandler:E}=this;e:for(;;)switch(this.getCode()){case 60:if(this.state=15,E!==void 0){const{text:M}=this,O=x.slice(w,this.prevI);M.length!==0?(E(M+O),this.text=""):O.length!==0&&E(O)}S=0;break e;case 38:this.state=14,this.entityReturnState=13,E!==void 0&&(this.text+=x.slice(w,this.prevI)),S=0;break e;case 93:switch(S){case 0:S=1;break;case 1:S=2;break;case 2:break;default:throw new Error("impossible state")}break;case 62:S===2&&this.fail('the string "]]>" is disallowed in char data.'),S=0;break;case-2:E!==void 0&&(this.text+=x.slice(w,this.prevI)+`
`),w=this.i,S=0;break;case-1:E!==void 0&&(this.text+=x.slice(w));break e;default:S=0}this.forbiddenState=S}handleTextOutsideRoot(){let{i:w}=this;const{chunk:S,textHandler:x}=this;let E=!1;e:for(;;){const M=this.getCode();switch(M){case 60:if(this.state=15,x!==void 0){const{text:O}=this,V=S.slice(w,this.prevI);O.length!==0?(x(O+V),this.text=""):V.length!==0&&x(V)}break e;case 38:this.state=14,this.entityReturnState=13,x!==void 0&&(this.text+=S.slice(w,this.prevI)),E=!0;break e;case-2:x!==void 0&&(this.text+=S.slice(w,this.prevI)+`
`),w=this.i;break;case-1:x!==void 0&&(this.text+=S.slice(w));break e;default:l(M)||(E=!0)}}E&&(this.sawRoot||this.reportedTextBeforeRoot||(this.fail("text data outside of root node."),this.reportedTextBeforeRoot=!0),this.closedRoot&&!this.reportedTextAfterRoot&&(this.fail("text data outside of root node."),this.reportedTextAfterRoot=!0))}pushAttribNS(w,S){var x;const{prefix:E,local:M}=this.qname(w),O={name:w,prefix:E,local:M,value:S};if(this.attribList.push(O),(x=this.attributeHandler)===null||x===void 0||x.call(this,O),E==="xmlns"){const V=S.trim();this.currentXMLVersion==="1.0"&&V===""&&this.fail("invalid attempt to undefine prefix in XML 1.0"),this.topNS[M]=V,H(this,M,V)}else if(w==="xmlns"){const V=S.trim();this.topNS[""]=V,H(this,"",V)}}pushAttribPlain(w,S){var x;const E={name:w,value:S};this.attribList.push(E),(x=this.attributeHandler)===null||x===void 0||x.call(this,E)}end(){var w,S;this.sawRoot||this.fail("document must contain a root element.");const{tags:x}=this;for(;x.length>0;){const M=x.pop();this.fail("unclosed tag: "+M.name)}this.state!==0&&this.state!==13&&this.fail("unexpected end.");const{text:E}=this;return E.length!==0&&((w=this.textHandler)===null||w===void 0||w.call(this,E),this.text=""),this._closed=!0,(S=this.endHandler)===null||S===void 0||S.call(this),this._init(),this}resolve(w){var S,x;let E=this.topNS[w];if(E!==void 0)return E;const{tags:M}=this;for(let O=M.length-1;O>=0;O--)if(E=M[O].ns[w],E!==void 0)return E;return E=this.ns[w],E!==void 0?E:(x=(S=this.opt).resolvePrefix)===null||x===void 0?void 0:x.call(S,w)}qname(w){const S=w.indexOf(":");if(S===-1)return{prefix:"",local:w};const x=w.slice(S+1),E=w.slice(0,S);return(E===""||x===""||x.includes(":"))&&this.fail(`malformed name: ${w}.`),{prefix:E,local:x}}processAttribsNS(){var w;const{attribList:S}=this,x=this.tag;{const{prefix:O,local:V}=this.qname(x.name);x.prefix=O,x.local=V;const Y=x.uri=(w=this.resolve(O))!==null&&w!==void 0?w:"";O!==""&&(O==="xmlns"&&this.fail('tags may not have "xmlns" as prefix.'),Y===""&&(this.fail(`unbound namespace prefix: ${JSON.stringify(O)}.`),x.uri=O))}if(S.length===0)return;const{attributes:E}=x,M=new Set;for(const O of S){const{name:V,prefix:Y,local:$}=O;let J,G;Y===""?(J=V==="xmlns"?C:"",G=V):(J=this.resolve(Y),J===void 0&&(this.fail(`unbound namespace prefix: ${JSON.stringify(Y)}.`),J=Y),G=`{${J}}${$}`),M.has(G)&&this.fail(`duplicate attribute: ${G}.`),M.add(G),O.uri=J,E[V]=O}this.attribList=[]}processAttribsPlain(){const{attribList:w}=this,S=this.tag.attributes;for(const{name:x,value:E}of w)S[x]!==void 0&&this.fail(`duplicate attribute: ${x}.`),S[x]=E;this.attribList=[]}openTag(){var w;this.processAttribs();const{tags:S}=this,x=this.tag;x.isSelfClosing=!1,(w=this.openTagHandler)===null||w===void 0||w.call(this,x),S.push(x),this.state=13,this.name=""}openSelfClosingTag(){var w,S,x;this.processAttribs();const{tags:E}=this,M=this.tag;M.isSelfClosing=!0,(w=this.openTagHandler)===null||w===void 0||w.call(this,M),(S=this.closeTagHandler)===null||S===void 0||S.call(this,M),(this.tag=(x=E[E.length-1])!==null&&x!==void 0?x:null)===null&&(this.closedRoot=!0),this.state=13,this.name=""}closeTag(){const{tags:w,name:S}=this;if(this.state=13,this.name="",S==="")return this.fail("weird empty close tag."),void(this.text+="</>");const x=this.closeTagHandler;let E=w.length;for(;E-- >0;){const M=this.tag=w.pop();if(this.topNS=M.ns,x==null||x(M),M.name===S)break;this.fail("unexpected close tag.")}E===0?this.closedRoot=!0:E<0&&(this.fail(`unmatched closing tag: ${S}.`),this.text+=`</${S}>`)}parseEntity(w){if(w[0]!=="#"){const x=this.ENTITIES[w];return x!==void 0?x:(this.fail(this.isName(w)?"undefined entity.":"disallowed character in entity name."),`&${w};`)}let S=NaN;return w[1]==="x"&&/^#x[0-9a-f]+$/i.test(w)?S=parseInt(w.slice(2),16):/^#[0-9]+$/.test(w)&&(S=parseInt(w.slice(1),10)),this.isChar(S)?String.fromCodePoint(S):(this.fail("malformed character entity."),`&${w};`)}}},{"xmlchars/xml/1.0/ed5":543,"xmlchars/xml/1.1/ed2":544,"xmlchars/xmlns/1.0/ed3":545}],497:[function(i,s,r){var n=i("safe-buffer").Buffer;function o(a,l){this._block=n.alloc(a),this._finalSize=l,this._blockSize=a,this._len=0}o.prototype.update=function(a,l){typeof a=="string"&&(l=l||"utf8",a=n.from(a,l));for(var c=this._block,u=this._blockSize,d=a.length,h=this._len,p=0;p<d;){for(var f=h%u,m=Math.min(d-p,u-f),g=0;g<m;g++)c[f+g]=a[p+g];p+=m,(h+=m)%u==0&&this._update(c)}return this._len+=d,this},o.prototype.digest=function(a){var l=this._len%this._blockSize;this._block[l]=128,this._block.fill(0,l+1),l>=this._finalSize&&(this._update(this._block),this._block.fill(0));var c=8*this._len;if(c<=4294967295)this._block.writeUInt32BE(c,this._blockSize-4);else{var u=(4294967295&c)>>>0,d=(c-u)/4294967296;this._block.writeUInt32BE(d,this._blockSize-8),this._block.writeUInt32BE(u,this._blockSize-4)}this._update(this._block);var h=this._hash();return a?h.toString(a):h},o.prototype._update=function(){throw new Error("_update must be implemented by subclass")},s.exports=o},{"safe-buffer":494}],498:[function(i,s,r){var n=s.exports=function(o){o=o.toLowerCase();var a=n[o];if(!a)throw new Error(o+" is not supported (we accept pull requests)");return new a};n.sha=i("./sha"),n.sha1=i("./sha1"),n.sha224=i("./sha224"),n.sha256=i("./sha256"),n.sha384=i("./sha384"),n.sha512=i("./sha512")},{"./sha":499,"./sha1":500,"./sha224":501,"./sha256":502,"./sha384":503,"./sha512":504}],499:[function(i,s,r){var n=i("inherits"),o=i("./hash"),a=i("safe-buffer").Buffer,l=[1518500249,1859775393,-1894007588,-899497514],c=new Array(80);function u(){this.init(),this._w=c,o.call(this,64,56)}function d(p){return p<<30|p>>>2}function h(p,f,m,g){return p===0?f&m|~f&g:p===2?f&m|f&g|m&g:f^m^g}n(u,o),u.prototype.init=function(){return this._a=1732584193,this._b=4023233417,this._c=2562383102,this._d=271733878,this._e=3285377520,this},u.prototype._update=function(p){for(var f,m=this._w,g=0|this._a,y=0|this._b,v=0|this._c,C=0|this._d,b=0|this._e,T=0;T<16;++T)m[T]=p.readInt32BE(4*T);for(;T<80;++T)m[T]=m[T-3]^m[T-8]^m[T-14]^m[T-16];for(var A=0;A<80;++A){var I=~~(A/20),D=0|((f=g)<<5|f>>>27)+h(I,y,v,C)+b+m[A]+l[I];b=C,C=v,v=d(y),y=g,g=D}this._a=g+this._a|0,this._b=y+this._b|0,this._c=v+this._c|0,this._d=C+this._d|0,this._e=b+this._e|0},u.prototype._hash=function(){var p=a.allocUnsafe(20);return p.writeInt32BE(0|this._a,0),p.writeInt32BE(0|this._b,4),p.writeInt32BE(0|this._c,8),p.writeInt32BE(0|this._d,12),p.writeInt32BE(0|this._e,16),p},s.exports=u},{"./hash":497,inherits:440,"safe-buffer":494}],500:[function(i,s,r){var n=i("inherits"),o=i("./hash"),a=i("safe-buffer").Buffer,l=[1518500249,1859775393,-1894007588,-899497514],c=new Array(80);function u(){this.init(),this._w=c,o.call(this,64,56)}function d(f){return f<<5|f>>>27}function h(f){return f<<30|f>>>2}function p(f,m,g,y){return f===0?m&g|~m&y:f===2?m&g|m&y|g&y:m^g^y}n(u,o),u.prototype.init=function(){return this._a=1732584193,this._b=4023233417,this._c=2562383102,this._d=271733878,this._e=3285377520,this},u.prototype._update=function(f){for(var m,g=this._w,y=0|this._a,v=0|this._b,C=0|this._c,b=0|this._d,T=0|this._e,A=0;A<16;++A)g[A]=f.readInt32BE(4*A);for(;A<80;++A)g[A]=(m=g[A-3]^g[A-8]^g[A-14]^g[A-16])<<1|m>>>31;for(var I=0;I<80;++I){var D=~~(I/20),F=d(y)+p(D,v,C,b)+T+g[I]+l[D]|0;T=b,b=C,C=h(v),v=y,y=F}this._a=y+this._a|0,this._b=v+this._b|0,this._c=C+this._c|0,this._d=b+this._d|0,this._e=T+this._e|0},u.prototype._hash=function(){var f=a.allocUnsafe(20);return f.writeInt32BE(0|this._a,0),f.writeInt32BE(0|this._b,4),f.writeInt32BE(0|this._c,8),f.writeInt32BE(0|this._d,12),f.writeInt32BE(0|this._e,16),f},s.exports=u},{"./hash":497,inherits:440,"safe-buffer":494}],501:[function(i,s,r){var n=i("inherits"),o=i("./sha256"),a=i("./hash"),l=i("safe-buffer").Buffer,c=new Array(64);function u(){this.init(),this._w=c,a.call(this,64,56)}n(u,o),u.prototype.init=function(){return this._a=3238371032,this._b=914150663,this._c=812702999,this._d=4144912697,this._e=4290775857,this._f=1750603025,this._g=1694076839,this._h=3204075428,this},u.prototype._hash=function(){var d=l.allocUnsafe(28);return d.writeInt32BE(this._a,0),d.writeInt32BE(this._b,4),d.writeInt32BE(this._c,8),d.writeInt32BE(this._d,12),d.writeInt32BE(this._e,16),d.writeInt32BE(this._f,20),d.writeInt32BE(this._g,24),d},s.exports=u},{"./hash":497,"./sha256":502,inherits:440,"safe-buffer":494}],502:[function(i,s,r){var n=i("inherits"),o=i("./hash"),a=i("safe-buffer").Buffer,l=[1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298],c=new Array(64);function u(){this.init(),this._w=c,o.call(this,64,56)}function d(g,y,v){return v^g&(y^v)}function h(g,y,v){return g&y|v&(g|y)}function p(g){return(g>>>2|g<<30)^(g>>>13|g<<19)^(g>>>22|g<<10)}function f(g){return(g>>>6|g<<26)^(g>>>11|g<<21)^(g>>>25|g<<7)}function m(g){return(g>>>7|g<<25)^(g>>>18|g<<14)^g>>>3}n(u,o),u.prototype.init=function(){return this._a=1779033703,this._b=3144134277,this._c=1013904242,this._d=2773480762,this._e=1359893119,this._f=2600822924,this._g=528734635,this._h=1541459225,this},u.prototype._update=function(g){for(var y,v=this._w,C=0|this._a,b=0|this._b,T=0|this._c,A=0|this._d,I=0|this._e,D=0|this._f,F=0|this._g,B=0|this._h,U=0;U<16;++U)v[U]=g.readInt32BE(4*U);for(;U<64;++U)v[U]=0|(((y=v[U-2])>>>17|y<<15)^(y>>>19|y<<13)^y>>>10)+v[U-7]+m(v[U-15])+v[U-16];for(var H=0;H<64;++H){var R=B+f(I)+d(I,D,F)+l[H]+v[H]|0,L=p(C)+h(C,b,T)|0;B=F,F=D,D=I,I=A+R|0,A=T,T=b,b=C,C=R+L|0}this._a=C+this._a|0,this._b=b+this._b|0,this._c=T+this._c|0,this._d=A+this._d|0,this._e=I+this._e|0,this._f=D+this._f|0,this._g=F+this._g|0,this._h=B+this._h|0},u.prototype._hash=function(){var g=a.allocUnsafe(32);return g.writeInt32BE(this._a,0),g.writeInt32BE(this._b,4),g.writeInt32BE(this._c,8),g.writeInt32BE(this._d,12),g.writeInt32BE(this._e,16),g.writeInt32BE(this._f,20),g.writeInt32BE(this._g,24),g.writeInt32BE(this._h,28),g},s.exports=u},{"./hash":497,inherits:440,"safe-buffer":494}],503:[function(i,s,r){var n=i("inherits"),o=i("./sha512"),a=i("./hash"),l=i("safe-buffer").Buffer,c=new Array(160);function u(){this.init(),this._w=c,a.call(this,128,112)}n(u,o),u.prototype.init=function(){return this._ah=3418070365,this._bh=1654270250,this._ch=2438529370,this._dh=355462360,this._eh=1731405415,this._fh=2394180231,this._gh=3675008525,this._hh=1203062813,this._al=3238371032,this._bl=914150663,this._cl=812702999,this._dl=4144912697,this._el=4290775857,this._fl=1750603025,this._gl=1694076839,this._hl=3204075428,this},u.prototype._hash=function(){var d=l.allocUnsafe(48);function h(p,f,m){d.writeInt32BE(p,m),d.writeInt32BE(f,m+4)}return h(this._ah,this._al,0),h(this._bh,this._bl,8),h(this._ch,this._cl,16),h(this._dh,this._dl,24),h(this._eh,this._el,32),h(this._fh,this._fl,40),d},s.exports=u},{"./hash":497,"./sha512":504,inherits:440,"safe-buffer":494}],504:[function(i,s,r){var n=i("inherits"),o=i("./hash"),a=i("safe-buffer").Buffer,l=[1116352408,3609767458,1899447441,602891725,3049323471,3964484399,3921009573,2173295548,961987163,4081628472,1508970993,3053834265,2453635748,2937671579,2870763221,3664609560,3624381080,2734883394,310598401,1164996542,607225278,1323610764,1426881987,3590304994,1925078388,4068182383,2162078206,991336113,2614888103,633803317,3248222580,3479774868,3835390401,2666613458,4022224774,944711139,264347078,2341262773,604807628,2007800933,770255983,1495990901,1249150122,1856431235,1555081692,3175218132,1996064986,2198950837,2554220882,3999719339,2821834349,766784016,2952996808,2566594879,3210313671,3203337956,3336571891,1034457026,3584528711,2466948901,113926993,3758326383,338241895,168717936,666307205,1188179964,773529912,1546045734,1294757372,1522805485,1396182291,2643833823,1695183700,2343527390,1986661051,1014477480,2177026350,1206759142,2456956037,344077627,2730485921,1290863460,2820302411,3158454273,3259730800,3505952657,3345764771,106217008,3516065817,3606008344,3600352804,1432725776,4094571909,1467031594,275423344,851169720,430227734,3100823752,506948616,1363258195,659060556,3750685593,883997877,3785050280,958139571,3318307427,1322822218,3812723403,1537002063,2003034995,1747873779,3602036899,1955562222,1575990012,2024104815,1125592928,2227730452,2716904306,2361852424,442776044,2428436474,593698344,2756734187,3733110249,3204031479,2999351573,3329325298,3815920427,3391569614,3928383900,3515267271,566280711,3940187606,3454069534,4118630271,4000239992,116418474,1914138554,174292421,2731055270,289380356,3203993006,460393269,320620315,685471733,587496836,852142971,1086792851,1017036298,365543100,1126000580,2618297676,1288033470,3409855158,1501505948,4234509866,1607167915,987167468,1816402316,1246189591],c=new Array(160);function u(){this.init(),this._w=c,o.call(this,128,112)}function d(b,T,A){return A^b&(T^A)}function h(b,T,A){return b&T|A&(b|T)}function p(b,T){return(b>>>28|T<<4)^(T>>>2|b<<30)^(T>>>7|b<<25)}function f(b,T){return(b>>>14|T<<18)^(b>>>18|T<<14)^(T>>>9|b<<23)}function m(b,T){return(b>>>1|T<<31)^(b>>>8|T<<24)^b>>>7}function g(b,T){return(b>>>1|T<<31)^(b>>>8|T<<24)^(b>>>7|T<<25)}function y(b,T){return(b>>>19|T<<13)^(T>>>29|b<<3)^b>>>6}function v(b,T){return(b>>>19|T<<13)^(T>>>29|b<<3)^(b>>>6|T<<26)}function C(b,T){return b>>>0<T>>>0?1:0}n(u,o),u.prototype.init=function(){return this._ah=1779033703,this._bh=3144134277,this._ch=1013904242,this._dh=2773480762,this._eh=1359893119,this._fh=2600822924,this._gh=528734635,this._hh=1541459225,this._al=4089235720,this._bl=2227873595,this._cl=4271175723,this._dl=1595750129,this._el=2917565137,this._fl=725511199,this._gl=4215389547,this._hl=327033209,this},u.prototype._update=function(b){for(var T=this._w,A=0|this._ah,I=0|this._bh,D=0|this._ch,F=0|this._dh,B=0|this._eh,U=0|this._fh,H=0|this._gh,R=0|this._hh,L=0|this._al,_=0|this._bl,w=0|this._cl,S=0|this._dl,x=0|this._el,E=0|this._fl,M=0|this._gl,O=0|this._hl,V=0;V<32;V+=2)T[V]=b.readInt32BE(4*V),T[V+1]=b.readInt32BE(4*V+4);for(;V<160;V+=2){var Y=T[V-30],$=T[V-30+1],J=m(Y,$),G=g($,Y),Z=y(Y=T[V-4],$=T[V-4+1]),N=v($,Y),P=T[V-14],j=T[V-14+1],X=T[V-32],ie=T[V-32+1],ee=G+j|0,re=J+P+C(ee,G)|0;re=(re=re+Z+C(ee=ee+N|0,N)|0)+X+C(ee=ee+ie|0,ie)|0,T[V]=re,T[V+1]=ee}for(var oe=0;oe<160;oe+=2){re=T[oe],ee=T[oe+1];var ue=h(A,I,D),se=h(L,_,w),le=p(A,L),ne=p(L,A),fe=f(B,x),me=f(x,B),ge=l[oe],ve=l[oe+1],xe=d(B,U,H),De=d(x,E,M),ze=O+me|0,Ye=R+fe+C(ze,O)|0;Ye=(Ye=(Ye=Ye+xe+C(ze=ze+De|0,De)|0)+ge+C(ze=ze+ve|0,ve)|0)+re+C(ze=ze+ee|0,ee)|0;var je=ne+se|0,ht=le+ue+C(je,ne)|0;R=H,O=M,H=U,M=E,U=B,E=x,B=F+Ye+C(x=S+ze|0,S)|0,F=D,S=w,D=I,w=_,I=A,_=L,A=Ye+ht+C(L=ze+je|0,ze)|0}this._al=this._al+L|0,this._bl=this._bl+_|0,this._cl=this._cl+w|0,this._dl=this._dl+S|0,this._el=this._el+x|0,this._fl=this._fl+E|0,this._gl=this._gl+M|0,this._hl=this._hl+O|0,this._ah=this._ah+A+C(this._al,L)|0,this._bh=this._bh+I+C(this._bl,_)|0,this._ch=this._ch+D+C(this._cl,w)|0,this._dh=this._dh+F+C(this._dl,S)|0,this._eh=this._eh+B+C(this._el,x)|0,this._fh=this._fh+U+C(this._fl,E)|0,this._gh=this._gh+H+C(this._gl,M)|0,this._hh=this._hh+R+C(this._hl,O)|0},u.prototype._hash=function(){var b=a.allocUnsafe(64);function T(A,I,D){b.writeInt32BE(A,D),b.writeInt32BE(I,D+4)}return T(this._ah,this._al,0),T(this._bh,this._bl,8),T(this._ch,this._cl,16),T(this._dh,this._dl,24),T(this._eh,this._el,32),T(this._fh,this._fl,40),T(this._gh,this._gl,48),T(this._hh,this._hl,56),b},s.exports=u},{"./hash":497,inherits:440,"safe-buffer":494}],505:[function(i,s,r){s.exports=o;var n=i("events").EventEmitter;function o(){n.call(this)}i("inherits")(o,n),o.Readable=i("readable-stream/readable.js"),o.Writable=i("readable-stream/writable.js"),o.Duplex=i("readable-stream/duplex.js"),o.Transform=i("readable-stream/transform.js"),o.PassThrough=i("readable-stream/passthrough.js"),o.Stream=o,o.prototype.pipe=function(a,l){var c=this;function u(y){a.writable&&a.write(y)===!1&&c.pause&&c.pause()}function d(){c.readable&&c.resume&&c.resume()}c.on("data",u),a.on("drain",d),a._isStdio||l&&l.end===!1||(c.on("end",p),c.on("close",f));var h=!1;function p(){h||(h=!0,a.end())}function f(){h||(h=!0,typeof a.destroy=="function"&&a.destroy())}function m(y){if(g(),n.listenerCount(this,"error")===0)throw y}function g(){c.removeListener("data",u),a.removeListener("drain",d),c.removeListener("end",p),c.removeListener("close",f),c.removeListener("error",m),a.removeListener("error",m),c.removeListener("end",g),c.removeListener("close",g),a.removeListener("close",g)}return c.on("error",m),a.on("error",m),c.on("end",g),c.on("close",g),a.on("close",g),a.emit("pipe",c),a}},{events:422,inherits:440,"readable-stream/duplex.js":507,"readable-stream/passthrough.js":516,"readable-stream/readable.js":517,"readable-stream/transform.js":518,"readable-stream/writable.js":519}],506:[function(i,s,r){var n={}.toString;s.exports=Array.isArray||function(o){return n.call(o)=="[object Array]"}},{}],507:[function(i,s,r){s.exports=i("./lib/_stream_duplex.js")},{"./lib/_stream_duplex.js":508}],508:[function(i,s,r){var n=i("process-nextick-args"),o=Object.keys||function(g){var y=[];for(var v in g)y.push(v);return y};s.exports=p;var a=Object.create(i("core-util-is"));a.inherits=i("inherits");var l=i("./_stream_readable"),c=i("./_stream_writable");a.inherits(p,l);for(var u=o(c.prototype),d=0;d<u.length;d++){var h=u[d];p.prototype[h]||(p.prototype[h]=c.prototype[h])}function p(g){if(!(this instanceof p))return new p(g);l.call(this,g),c.call(this,g),g&&g.readable===!1&&(this.readable=!1),g&&g.writable===!1&&(this.writable=!1),this.allowHalfOpen=!0,g&&g.allowHalfOpen===!1&&(this.allowHalfOpen=!1),this.once("end",f)}function f(){this.allowHalfOpen||this._writableState.ended||n.nextTick(m,this)}function m(g){g.end()}Object.defineProperty(p.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),Object.defineProperty(p.prototype,"destroyed",{get:function(){return this._readableState!==void 0&&this._writableState!==void 0&&this._readableState.destroyed&&this._writableState.destroyed},set:function(g){this._readableState!==void 0&&this._writableState!==void 0&&(this._readableState.destroyed=g,this._writableState.destroyed=g)}}),p.prototype._destroy=function(g,y){this.push(null),this.end(),n.nextTick(y,g)}},{"./_stream_readable":510,"./_stream_writable":512,"core-util-is":383,inherits:440,"process-nextick-args":466}],509:[function(i,s,r){s.exports=a;var n=i("./_stream_transform"),o=Object.create(i("core-util-is"));function a(l){if(!(this instanceof a))return new a(l);n.call(this,l)}o.inherits=i("inherits"),o.inherits(a,n),a.prototype._transform=function(l,c,u){u(null,l)}},{"./_stream_transform":511,"core-util-is":383,inherits:440}],510:[function(i,s,r){(function(n,o){(function(){var a=i("process-nextick-args");s.exports=A;var l,c=i("isarray");A.ReadableState=T,i("events").EventEmitter;var u=function(O,V){return O.listeners(V).length},d=i("./internal/streams/stream"),h=i("safe-buffer").Buffer,p=(o!==void 0?o:typeof window<"u"?window:typeof self<"u"?self:{}).Uint8Array||function(){},f=Object.create(i("core-util-is"));f.inherits=i("inherits");var m=i("util"),g=void 0;g=m&&m.debuglog?m.debuglog("stream"):function(){};var y,v=i("./internal/streams/BufferList"),C=i("./internal/streams/destroy");f.inherits(A,d);var b=["error","close","destroy","pause","resume"];function T(O,V){O=O||{};var Y=V instanceof(l=l||i("./_stream_duplex"));this.objectMode=!!O.objectMode,Y&&(this.objectMode=this.objectMode||!!O.readableObjectMode);var $=O.highWaterMark,J=O.readableHighWaterMark,G=this.objectMode?16:16384;this.highWaterMark=$||$===0?$:Y&&(J||J===0)?J:G,this.highWaterMark=Math.floor(this.highWaterMark),this.buffer=new v,this.length=0,this.pipes=null,this.pipesCount=0,this.flowing=null,this.ended=!1,this.endEmitted=!1,this.reading=!1,this.sync=!0,this.needReadable=!1,this.emittedReadable=!1,this.readableListening=!1,this.resumeScheduled=!1,this.destroyed=!1,this.defaultEncoding=O.defaultEncoding||"utf8",this.awaitDrain=0,this.readingMore=!1,this.decoder=null,this.encoding=null,O.encoding&&(y||(y=i("string_decoder/").StringDecoder),this.decoder=new y(O.encoding),this.encoding=O.encoding)}function A(O){if(l=l||i("./_stream_duplex"),!(this instanceof A))return new A(O);this._readableState=new T(O,this),this.readable=!0,O&&(typeof O.read=="function"&&(this._read=O.read),typeof O.destroy=="function"&&(this._destroy=O.destroy)),d.call(this)}function I(O,V,Y,$,J){var G,Z=O._readableState;return V===null?(Z.reading=!1,function(N,P){if(!P.ended){if(P.decoder){var j=P.decoder.end();j&&j.length&&(P.buffer.push(j),P.length+=P.objectMode?1:j.length)}P.ended=!0,B(N)}}(O,Z)):(J||(G=function(N,P){var j;X=P,h.isBuffer(X)||X instanceof p||typeof P=="string"||P===void 0||N.objectMode||(j=new TypeError("Invalid non-string/buffer chunk"));var X;return j}(Z,V)),G?O.emit("error",G):Z.objectMode||V&&V.length>0?(typeof V=="string"||Z.objectMode||Object.getPrototypeOf(V)===h.prototype||(V=function(N){return h.from(N)}(V)),$?Z.endEmitted?O.emit("error",new Error("stream.unshift() after end event")):D(O,Z,V,!0):Z.ended?O.emit("error",new Error("stream.push() after EOF")):(Z.reading=!1,Z.decoder&&!Y?(V=Z.decoder.write(V),Z.objectMode||V.length!==0?D(O,Z,V,!1):H(O,Z)):D(O,Z,V,!1))):$||(Z.reading=!1)),function(N){return!N.ended&&(N.needReadable||N.length<N.highWaterMark||N.length===0)}(Z)}function D(O,V,Y,$){V.flowing&&V.length===0&&!V.sync?(O.emit("data",Y),O.read(0)):(V.length+=V.objectMode?1:Y.length,$?V.buffer.unshift(Y):V.buffer.push(Y),V.needReadable&&B(O)),H(O,V)}Object.defineProperty(A.prototype,"destroyed",{get:function(){return this._readableState!==void 0&&this._readableState.destroyed},set:function(O){this._readableState&&(this._readableState.destroyed=O)}}),A.prototype.destroy=C.destroy,A.prototype._undestroy=C.undestroy,A.prototype._destroy=function(O,V){this.push(null),V(O)},A.prototype.push=function(O,V){var Y,$=this._readableState;return $.objectMode?Y=!0:typeof O=="string"&&((V=V||$.defaultEncoding)!==$.encoding&&(O=h.from(O,V),V=""),Y=!0),I(this,O,V,!1,Y)},A.prototype.unshift=function(O){return I(this,O,null,!0,!1)},A.prototype.isPaused=function(){return this._readableState.flowing===!1},A.prototype.setEncoding=function(O){return y||(y=i("string_decoder/").StringDecoder),this._readableState.decoder=new y(O),this._readableState.encoding=O,this};function F(O,V){return O<=0||V.length===0&&V.ended?0:V.objectMode?1:O!=O?V.flowing&&V.length?V.buffer.head.data.length:V.length:(O>V.highWaterMark&&(V.highWaterMark=function(Y){return Y>=8388608?Y=8388608:(Y--,Y|=Y>>>1,Y|=Y>>>2,Y|=Y>>>4,Y|=Y>>>8,Y|=Y>>>16,Y++),Y}(O)),O<=V.length?O:V.ended?V.length:(V.needReadable=!0,0))}function B(O){var V=O._readableState;V.needReadable=!1,V.emittedReadable||(g("emitReadable",V.flowing),V.emittedReadable=!0,V.sync?a.nextTick(U,O):U(O))}function U(O){g("emit readable"),O.emit("readable"),w(O)}function H(O,V){V.readingMore||(V.readingMore=!0,a.nextTick(R,O,V))}function R(O,V){for(var Y=V.length;!V.reading&&!V.flowing&&!V.ended&&V.length<V.highWaterMark&&(g("maybeReadMore read 0"),O.read(0),Y!==V.length);)Y=V.length;V.readingMore=!1}function L(O){g("readable nexttick read 0"),O.read(0)}function _(O,V){V.reading||(g("resume read 0"),O.read(0)),V.resumeScheduled=!1,V.awaitDrain=0,O.emit("resume"),w(O),V.flowing&&!V.reading&&O.read(0)}function w(O){var V=O._readableState;for(g("flow",V.flowing);V.flowing&&O.read()!==null;);}function S(O,V){return V.length===0?null:(V.objectMode?Y=V.buffer.shift():!O||O>=V.length?(Y=V.decoder?V.buffer.join(""):V.buffer.length===1?V.buffer.head.data:V.buffer.concat(V.length),V.buffer.clear()):Y=function($,J,G){var Z;return $<J.head.data.length?(Z=J.head.data.slice(0,$),J.head.data=J.head.data.slice($)):Z=$===J.head.data.length?J.shift():G?function(N,P){var j=P.head,X=1,ie=j.data;for(N-=ie.length;j=j.next;){var ee=j.data,re=N>ee.length?ee.length:N;if(re===ee.length?ie+=ee:ie+=ee.slice(0,N),(N-=re)===0){re===ee.length?(++X,j.next?P.head=j.next:P.head=P.tail=null):(P.head=j,j.data=ee.slice(re));break}++X}return P.length-=X,ie}($,J):function(N,P){var j=h.allocUnsafe(N),X=P.head,ie=1;for(X.data.copy(j),N-=X.data.length;X=X.next;){var ee=X.data,re=N>ee.length?ee.length:N;if(ee.copy(j,j.length-N,0,re),(N-=re)===0){re===ee.length?(++ie,X.next?P.head=X.next:P.head=P.tail=null):(P.head=X,X.data=ee.slice(re));break}++ie}return P.length-=ie,j}($,J),Z}(O,V.buffer,V.decoder),Y);var Y}function x(O){var V=O._readableState;if(V.length>0)throw new Error('"endReadable()" called on non-empty stream');V.endEmitted||(V.ended=!0,a.nextTick(E,V,O))}function E(O,V){O.endEmitted||O.length!==0||(O.endEmitted=!0,V.readable=!1,V.emit("end"))}function M(O,V){for(var Y=0,$=O.length;Y<$;Y++)if(O[Y]===V)return Y;return-1}A.prototype.read=function(O){g("read",O),O=parseInt(O,10);var V=this._readableState,Y=O;if(O!==0&&(V.emittedReadable=!1),O===0&&V.needReadable&&(V.length>=V.highWaterMark||V.ended))return g("read: emitReadable",V.length,V.ended),V.length===0&&V.ended?x(this):B(this),null;if((O=F(O,V))===0&&V.ended)return V.length===0&&x(this),null;var $,J=V.needReadable;return g("need readable",J),(V.length===0||V.length-O<V.highWaterMark)&&g("length less than watermark",J=!0),V.ended||V.reading?g("reading or ended",J=!1):J&&(g("do read"),V.reading=!0,V.sync=!0,V.length===0&&(V.needReadable=!0),this._read(V.highWaterMark),V.sync=!1,V.reading||(O=F(Y,V))),($=O>0?S(O,V):null)===null?(V.needReadable=!0,O=0):V.length-=O,V.length===0&&(V.ended||(V.needReadable=!0),Y!==O&&V.ended&&x(this)),$!==null&&this.emit("data",$),$},A.prototype._read=function(O){this.emit("error",new Error("_read() is not implemented"))},A.prototype.pipe=function(O,V){var Y=this,$=this._readableState;switch($.pipesCount){case 0:$.pipes=O;break;case 1:$.pipes=[$.pipes,O];break;default:$.pipes.push(O)}$.pipesCount+=1,g("pipe count=%d opts=%j",$.pipesCount,V);var J=(!V||V.end!==!1)&&O!==n.stdout&&O!==n.stderr?Z:oe;function G(ue,se){g("onunpipe"),ue===Y&&se&&se.hasUnpiped===!1&&(se.hasUnpiped=!0,g("cleanup"),O.removeListener("close",ee),O.removeListener("finish",re),O.removeListener("drain",N),O.removeListener("error",ie),O.removeListener("unpipe",G),Y.removeListener("end",Z),Y.removeListener("end",oe),Y.removeListener("data",X),P=!0,!$.awaitDrain||O._writableState&&!O._writableState.needDrain||N())}function Z(){g("onend"),O.end()}$.endEmitted?a.nextTick(J):Y.once("end",J),O.on("unpipe",G);var N=function(ue){return function(){var se=ue._readableState;g("pipeOnDrain",se.awaitDrain),se.awaitDrain&&se.awaitDrain--,se.awaitDrain===0&&u(ue,"data")&&(se.flowing=!0,w(ue))}}(Y);O.on("drain",N);var P=!1,j=!1;function X(ue){g("ondata"),j=!1,O.write(ue)!==!1||j||(($.pipesCount===1&&$.pipes===O||$.pipesCount>1&&M($.pipes,O)!==-1)&&!P&&(g("false write response, pause",$.awaitDrain),$.awaitDrain++,j=!0),Y.pause())}function ie(ue){g("onerror",ue),oe(),O.removeListener("error",ie),u(O,"error")===0&&O.emit("error",ue)}function ee(){O.removeListener("finish",re),oe()}function re(){g("onfinish"),O.removeListener("close",ee),oe()}function oe(){g("unpipe"),Y.unpipe(O)}return Y.on("data",X),function(ue,se,le){if(typeof ue.prependListener=="function")return ue.prependListener(se,le);ue._events&&ue._events[se]?c(ue._events[se])?ue._events[se].unshift(le):ue._events[se]=[le,ue._events[se]]:ue.on(se,le)}(O,"error",ie),O.once("close",ee),O.once("finish",re),O.emit("pipe",Y),$.flowing||(g("pipe resume"),Y.resume()),O},A.prototype.unpipe=function(O){var V=this._readableState,Y={hasUnpiped:!1};if(V.pipesCount===0)return this;if(V.pipesCount===1)return O&&O!==V.pipes||(O||(O=V.pipes),V.pipes=null,V.pipesCount=0,V.flowing=!1,O&&O.emit("unpipe",this,Y)),this;if(!O){var $=V.pipes,J=V.pipesCount;V.pipes=null,V.pipesCount=0,V.flowing=!1;for(var G=0;G<J;G++)$[G].emit("unpipe",this,{hasUnpiped:!1});return this}var Z=M(V.pipes,O);return Z===-1||(V.pipes.splice(Z,1),V.pipesCount-=1,V.pipesCount===1&&(V.pipes=V.pipes[0]),O.emit("unpipe",this,Y)),this},A.prototype.on=function(O,V){var Y=d.prototype.on.call(this,O,V);if(O==="data")this._readableState.flowing!==!1&&this.resume();else if(O==="readable"){var $=this._readableState;$.endEmitted||$.readableListening||($.readableListening=$.needReadable=!0,$.emittedReadable=!1,$.reading?$.length&&B(this):a.nextTick(L,this))}return Y},A.prototype.addListener=A.prototype.on,A.prototype.resume=function(){var O=this._readableState;return O.flowing||(g("resume"),O.flowing=!0,function(V,Y){Y.resumeScheduled||(Y.resumeScheduled=!0,a.nextTick(_,V,Y))}(this,O)),this},A.prototype.pause=function(){return g("call pause flowing=%j",this._readableState.flowing),this._readableState.flowing!==!1&&(g("pause"),this._readableState.flowing=!1,this.emit("pause")),this},A.prototype.wrap=function(O){var V=this,Y=this._readableState,$=!1;for(var J in O.on("end",function(){if(g("wrapped end"),Y.decoder&&!Y.ended){var Z=Y.decoder.end();Z&&Z.length&&V.push(Z)}V.push(null)}),O.on("data",function(Z){g("wrapped data"),Y.decoder&&(Z=Y.decoder.write(Z)),Y.objectMode&&Z==null||(Y.objectMode||Z&&Z.length)&&(V.push(Z)||($=!0,O.pause()))}),O)this[J]===void 0&&typeof O[J]=="function"&&(this[J]=function(Z){return function(){return O[Z].apply(O,arguments)}}(J));for(var G=0;G<b.length;G++)O.on(b[G],this.emit.bind(this,b[G]));return this._read=function(Z){g("wrapped _read",Z),$&&($=!1,O.resume())},this},Object.defineProperty(A.prototype,"readableHighWaterMark",{enumerable:!1,get:function(){return this._readableState.highWaterMark}}),A._fromList=S}).call(this)}).call(this,i("_process"),typeof zt<"u"?zt:typeof self<"u"?self:typeof window<"u"?window:{})},{"./_stream_duplex":508,"./internal/streams/BufferList":513,"./internal/streams/destroy":514,"./internal/streams/stream":515,_process:467,"core-util-is":383,events:422,inherits:440,isarray:506,"process-nextick-args":466,"safe-buffer":520,"string_decoder/":521,util:188}],511:[function(i,s,r){s.exports=l;var n=i("./_stream_duplex"),o=Object.create(i("core-util-is"));function a(d,h){var p=this._transformState;p.transforming=!1;var f=p.writecb;if(!f)return this.emit("error",new Error("write callback called multiple times"));p.writechunk=null,p.writecb=null,h!=null&&this.push(h),f(d);var m=this._readableState;m.reading=!1,(m.needReadable||m.length<m.highWaterMark)&&this._read(m.highWaterMark)}function l(d){if(!(this instanceof l))return new l(d);n.call(this,d),this._transformState={afterTransform:a.bind(this),needTransform:!1,transforming:!1,writecb:null,writechunk:null,writeencoding:null},this._readableState.needReadable=!0,this._readableState.sync=!1,d&&(typeof d.transform=="function"&&(this._transform=d.transform),typeof d.flush=="function"&&(this._flush=d.flush)),this.on("prefinish",c)}function c(){var d=this;typeof this._flush=="function"?this._flush(function(h,p){u(d,h,p)}):u(this,null,null)}function u(d,h,p){if(h)return d.emit("error",h);if(p!=null&&d.push(p),d._writableState.length)throw new Error("Calling transform done when ws.length != 0");if(d._transformState.transforming)throw new Error("Calling transform done when still transforming");return d.push(null)}o.inherits=i("inherits"),o.inherits(l,n),l.prototype.push=function(d,h){return this._transformState.needTransform=!1,n.prototype.push.call(this,d,h)},l.prototype._transform=function(d,h,p){throw new Error("_transform() is not implemented")},l.prototype._write=function(d,h,p){var f=this._transformState;if(f.writecb=p,f.writechunk=d,f.writeencoding=h,!f.transforming){var m=this._readableState;(f.needTransform||m.needReadable||m.length<m.highWaterMark)&&this._read(m.highWaterMark)}},l.prototype._read=function(d){var h=this._transformState;h.writechunk!==null&&h.writecb&&!h.transforming?(h.transforming=!0,this._transform(h.writechunk,h.writeencoding,h.afterTransform)):h.needTransform=!0},l.prototype._destroy=function(d,h){var p=this;n.prototype._destroy.call(this,d,function(f){h(f),p.emit("close")})}},{"./_stream_duplex":508,"core-util-is":383,inherits:440}],512:[function(i,s,r){(function(n,o,a){(function(){var l=i("process-nextick-args");function c(H){var R=this;this.next=null,this.entry=null,this.finish=function(){(function(L,_,w){var S=L.entry;for(L.entry=null;S;){var x=S.callback;_.pendingcb--,x(w),S=S.next}_.corkedRequestsFree.next=L})(R,H)}}s.exports=T;var u,d=!n.browser&&["v0.10","v0.9."].indexOf(n.version.slice(0,5))>-1?a:l.nextTick;T.WritableState=b;var h=Object.create(i("core-util-is"));h.inherits=i("inherits");var p={deprecate:i("util-deprecate")},f=i("./internal/streams/stream"),m=i("safe-buffer").Buffer,g=(o!==void 0?o:typeof window<"u"?window:typeof self<"u"?self:{}).Uint8Array||function(){},y,v=i("./internal/streams/destroy");function C(){}function b(H,R){u=u||i("./_stream_duplex"),H=H||{};var L=R instanceof u;this.objectMode=!!H.objectMode,L&&(this.objectMode=this.objectMode||!!H.writableObjectMode);var _=H.highWaterMark,w=H.writableHighWaterMark,S=this.objectMode?16:16384;this.highWaterMark=_||_===0?_:L&&(w||w===0)?w:S,this.highWaterMark=Math.floor(this.highWaterMark),this.finalCalled=!1,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1,this.destroyed=!1;var x=H.decodeStrings===!1;this.decodeStrings=!x,this.defaultEncoding=H.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=function(E){(function(M,O){var V=M._writableState,Y=V.sync,$=V.writecb;if(function(G){G.writing=!1,G.writecb=null,G.length-=G.writelen,G.writelen=0}(V),O)(function(G,Z,N,P,j){--Z.pendingcb,N?(l.nextTick(j,P),l.nextTick(U,G,Z),G._writableState.errorEmitted=!0,G.emit("error",P)):(j(P),G._writableState.errorEmitted=!0,G.emit("error",P),U(G,Z))})(M,V,Y,O,$);else{var J=F(V);J||V.corked||V.bufferProcessing||!V.bufferedRequest||D(M,V),Y?d(I,M,V,J,$):I(M,V,J,$)}})(R,E)},this.writecb=null,this.writelen=0,this.bufferedRequest=null,this.lastBufferedRequest=null,this.pendingcb=0,this.prefinished=!1,this.errorEmitted=!1,this.bufferedRequestCount=0,this.corkedRequestsFree=new c(this)}function T(H){if(u=u||i("./_stream_duplex"),!(y.call(T,this)||this instanceof u))return new T(H);this._writableState=new b(H,this),this.writable=!0,H&&(typeof H.write=="function"&&(this._write=H.write),typeof H.writev=="function"&&(this._writev=H.writev),typeof H.destroy=="function"&&(this._destroy=H.destroy),typeof H.final=="function"&&(this._final=H.final)),f.call(this)}function A(H,R,L,_,w,S,x){R.writelen=_,R.writecb=x,R.writing=!0,R.sync=!0,L?H._writev(w,R.onwrite):H._write(w,S,R.onwrite),R.sync=!1}function I(H,R,L,_){L||function(w,S){S.length===0&&S.needDrain&&(S.needDrain=!1,w.emit("drain"))}(H,R),R.pendingcb--,_(),U(H,R)}function D(H,R){R.bufferProcessing=!0;var L=R.bufferedRequest;if(H._writev&&L&&L.next){var _=R.bufferedRequestCount,w=new Array(_),S=R.corkedRequestsFree;S.entry=L;for(var x=0,E=!0;L;)w[x]=L,L.isBuf||(E=!1),L=L.next,x+=1;w.allBuffers=E,A(H,R,!0,R.length,w,"",S.finish),R.pendingcb++,R.lastBufferedRequest=null,S.next?(R.corkedRequestsFree=S.next,S.next=null):R.corkedRequestsFree=new c(R),R.bufferedRequestCount=0}else{for(;L;){var M=L.chunk,O=L.encoding,V=L.callback;if(A(H,R,!1,R.objectMode?1:M.length,M,O,V),L=L.next,R.bufferedRequestCount--,R.writing)break}L===null&&(R.lastBufferedRequest=null)}R.bufferedRequest=L,R.bufferProcessing=!1}function F(H){return H.ending&&H.length===0&&H.bufferedRequest===null&&!H.finished&&!H.writing}function B(H,R){H._final(function(L){R.pendingcb--,L&&H.emit("error",L),R.prefinished=!0,H.emit("prefinish"),U(H,R)})}function U(H,R){var L=F(R);return L&&(function(_,w){w.prefinished||w.finalCalled||(typeof _._final=="function"?(w.pendingcb++,w.finalCalled=!0,l.nextTick(B,_,w)):(w.prefinished=!0,_.emit("prefinish")))}(H,R),R.pendingcb===0&&(R.finished=!0,H.emit("finish"))),L}h.inherits(T,f),b.prototype.getBuffer=function(){for(var H=this.bufferedRequest,R=[];H;)R.push(H),H=H.next;return R},function(){try{Object.defineProperty(b.prototype,"buffer",{get:p.deprecate(function(){return this.getBuffer()},"_writableState.buffer is deprecated. Use _writableState.getBuffer instead.","DEP0003")})}catch{}}(),typeof Symbol=="function"&&Symbol.hasInstance&&typeof Function.prototype[Symbol.hasInstance]=="function"?(y=Function.prototype[Symbol.hasInstance],Object.defineProperty(T,Symbol.hasInstance,{value:function(H){return!!y.call(this,H)||this===T&&H&&H._writableState instanceof b}})):y=function(H){return H instanceof this},T.prototype.pipe=function(){this.emit("error",new Error("Cannot pipe, not readable"))},T.prototype.write=function(H,R,L){var _,w=this._writableState,S=!1,x=!w.objectMode&&(_=H,m.isBuffer(_)||_ instanceof g);return x&&!m.isBuffer(H)&&(H=function(E){return m.from(E)}(H)),typeof R=="function"&&(L=R,R=null),x?R="buffer":R||(R=w.defaultEncoding),typeof L!="function"&&(L=C),w.ended?function(E,M){var O=new Error("write after end");E.emit("error",O),l.nextTick(M,O)}(this,L):(x||function(E,M,O,V){var Y=!0,$=!1;return O===null?$=new TypeError("May not write null values to stream"):typeof O=="string"||O===void 0||M.objectMode||($=new TypeError("Invalid non-string/buffer chunk")),$&&(E.emit("error",$),l.nextTick(V,$),Y=!1),Y}(this,w,H,L))&&(w.pendingcb++,S=function(E,M,O,V,Y,$){if(!O){var J=function(P,j,X){return P.objectMode||P.decodeStrings===!1||typeof j!="string"||(j=m.from(j,X)),j}(M,V,Y);V!==J&&(O=!0,Y="buffer",V=J)}var G=M.objectMode?1:V.length;M.length+=G;var Z=M.length<M.highWaterMark;if(Z||(M.needDrain=!0),M.writing||M.corked){var N=M.lastBufferedRequest;M.lastBufferedRequest={chunk:V,encoding:Y,isBuf:O,callback:$,next:null},N?N.next=M.lastBufferedRequest:M.bufferedRequest=M.lastBufferedRequest,M.bufferedRequestCount+=1}else A(E,M,!1,G,V,Y,$);return Z}(this,w,x,H,R,L)),S},T.prototype.cork=function(){this._writableState.corked++},T.prototype.uncork=function(){var H=this._writableState;H.corked&&(H.corked--,H.writing||H.corked||H.bufferProcessing||!H.bufferedRequest||D(this,H))},T.prototype.setDefaultEncoding=function(H){if(typeof H=="string"&&(H=H.toLowerCase()),!(["hex","utf8","utf-8","ascii","binary","base64","ucs2","ucs-2","utf16le","utf-16le","raw"].indexOf((H+"").toLowerCase())>-1))throw new TypeError("Unknown encoding: "+H);return this._writableState.defaultEncoding=H,this},Object.defineProperty(T.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),T.prototype._write=function(H,R,L){L(new Error("_write() is not implemented"))},T.prototype._writev=null,T.prototype.end=function(H,R,L){var _=this._writableState;typeof H=="function"?(L=H,H=null,R=null):typeof R=="function"&&(L=R,R=null),H!=null&&this.write(H,R),_.corked&&(_.corked=1,this.uncork()),_.ending||function(w,S,x){S.ending=!0,U(w,S),x&&(S.finished?l.nextTick(x):w.once("finish",x)),S.ended=!0,w.writable=!1}(this,_,L)},Object.defineProperty(T.prototype,"destroyed",{get:function(){return this._writableState!==void 0&&this._writableState.destroyed},set:function(H){this._writableState&&(this._writableState.destroyed=H)}}),T.prototype.destroy=v.destroy,T.prototype._undestroy=v.undestroy,T.prototype._destroy=function(H,R){this.end(),R(H)}}).call(this)}).call(this,i("_process"),typeof zt<"u"?zt:typeof self<"u"?self:typeof window<"u"?window:{},i("timers").setImmediate)},{"./_stream_duplex":508,"./internal/streams/destroy":514,"./internal/streams/stream":515,_process:467,"core-util-is":383,inherits:440,"process-nextick-args":466,"safe-buffer":520,timers:523,"util-deprecate":524}],513:[function(i,s,r){var n=i("safe-buffer").Buffer,o=i("util");s.exports=function(){function a(){(function(l,c){if(!(l instanceof c))throw new TypeError("Cannot call a class as a function")})(this,a),this.head=null,this.tail=null,this.length=0}return a.prototype.push=function(l){var c={data:l,next:null};this.length>0?this.tail.next=c:this.head=c,this.tail=c,++this.length},a.prototype.unshift=function(l){var c={data:l,next:this.head};this.length===0&&(this.tail=c),this.head=c,++this.length},a.prototype.shift=function(){if(this.length!==0){var l=this.head.data;return this.length===1?this.head=this.tail=null:this.head=this.head.next,--this.length,l}},a.prototype.clear=function(){this.head=this.tail=null,this.length=0},a.prototype.join=function(l){if(this.length===0)return"";for(var c=this.head,u=""+c.data;c=c.next;)u+=l+c.data;return u},a.prototype.concat=function(l){if(this.length===0)return n.alloc(0);for(var c,u,d,h=n.allocUnsafe(l>>>0),p=this.head,f=0;p;)c=p.data,u=h,d=f,c.copy(u,d),f+=p.data.length,p=p.next;return h},a}(),o&&o.inspect&&o.inspect.custom&&(s.exports.prototype[o.inspect.custom]=function(){var a=o.inspect({length:this.length});return this.constructor.name+" "+a})},{"safe-buffer":520,util:188}],514:[function(i,s,r){var n=i("process-nextick-args");function o(a,l){a.emit("error",l)}s.exports={destroy:function(a,l){var c=this,u=this._readableState&&this._readableState.destroyed,d=this._writableState&&this._writableState.destroyed;return u||d?(l?l(a):a&&(this._writableState?this._writableState.errorEmitted||(this._writableState.errorEmitted=!0,n.nextTick(o,this,a)):n.nextTick(o,this,a)),this):(this._readableState&&(this._readableState.destroyed=!0),this._writableState&&(this._writableState.destroyed=!0),this._destroy(a||null,function(h){!l&&h?c._writableState?c._writableState.errorEmitted||(c._writableState.errorEmitted=!0,n.nextTick(o,c,h)):n.nextTick(o,c,h):l&&l(h)}),this)},undestroy:function(){this._readableState&&(this._readableState.destroyed=!1,this._readableState.reading=!1,this._readableState.ended=!1,this._readableState.endEmitted=!1),this._writableState&&(this._writableState.destroyed=!1,this._writableState.ended=!1,this._writableState.ending=!1,this._writableState.finalCalled=!1,this._writableState.prefinished=!1,this._writableState.finished=!1,this._writableState.errorEmitted=!1)}}},{"process-nextick-args":466}],515:[function(i,s,r){arguments[4][490][0].apply(r,arguments)},{dup:490,events:422}],516:[function(i,s,r){s.exports=i("./readable").PassThrough},{"./readable":517}],517:[function(i,s,r){(r=s.exports=i("./lib/_stream_readable.js")).Stream=r,r.Readable=r,r.Writable=i("./lib/_stream_writable.js"),r.Duplex=i("./lib/_stream_duplex.js"),r.Transform=i("./lib/_stream_transform.js"),r.PassThrough=i("./lib/_stream_passthrough.js")},{"./lib/_stream_duplex.js":508,"./lib/_stream_passthrough.js":509,"./lib/_stream_readable.js":510,"./lib/_stream_transform.js":511,"./lib/_stream_writable.js":512}],518:[function(i,s,r){s.exports=i("./readable").Transform},{"./readable":517}],519:[function(i,s,r){s.exports=i("./lib/_stream_writable.js")},{"./lib/_stream_writable.js":512}],520:[function(i,s,r){arguments[4][217][0].apply(r,arguments)},{buffer:220,dup:217}],521:[function(i,s,r){arguments[4][218][0].apply(r,arguments)},{dup:218,"safe-buffer":520}],522:[function(i,s,r){arguments[4][218][0].apply(r,arguments)},{dup:218,"safe-buffer":494}],523:[function(i,s,r){(function(n,o){(function(){var a=i("process/browser.js").nextTick,l=Function.prototype.apply,c=Array.prototype.slice,u={},d=0;function h(p,f){this._id=p,this._clearFn=f}r.setTimeout=function(){return new h(l.call(setTimeout,window,arguments),clearTimeout)},r.setInterval=function(){return new h(l.call(setInterval,window,arguments),clearInterval)},r.clearTimeout=r.clearInterval=function(p){p.close()},h.prototype.unref=h.prototype.ref=function(){},h.prototype.close=function(){this._clearFn.call(window,this._id)},r.enroll=function(p,f){clearTimeout(p._idleTimeoutId),p._idleTimeout=f},r.unenroll=function(p){clearTimeout(p._idleTimeoutId),p._idleTimeout=-1},r._unrefActive=r.active=function(p){clearTimeout(p._idleTimeoutId);var f=p._idleTimeout;f>=0&&(p._idleTimeoutId=setTimeout(function(){p._onTimeout&&p._onTimeout()},f))},r.setImmediate=typeof n=="function"?n:function(p){var f=d++,m=!(arguments.length<2)&&c.call(arguments,1);return u[f]=!0,a(function(){u[f]&&(m?p.apply(null,m):p.call(null),r.clearImmediate(f))}),f},r.clearImmediate=typeof o=="function"?o:function(p){delete u[p]}}).call(this)}).call(this,i("timers").setImmediate,i("timers").clearImmediate)},{"process/browser.js":467,timers:523}],524:[function(i,s,r){(function(n){(function(){function o(a){try{if(!n.localStorage)return!1}catch{return!1}var l=n.localStorage[a];return l!=null&&String(l).toLowerCase()==="true"}s.exports=function(a,l){if(o("noDeprecation"))return a;var c=!1;return function(){if(!c){if(o("throwDeprecation"))throw new Error(l);o("traceDeprecation")?console.trace(l):console.warn(l),c=!0}return a.apply(this,arguments)}}}).call(this)}).call(this,typeof zt<"u"?zt:typeof self<"u"?self:typeof window<"u"?window:{})},{}],525:[function(i,s,r){typeof Object.create=="function"?s.exports=function(n,o){n.super_=o,n.prototype=Object.create(o.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}})}:s.exports=function(n,o){n.super_=o;var a=function(){};a.prototype=o.prototype,n.prototype=new a,n.prototype.constructor=n}},{}],526:[function(i,s,r){s.exports=function(n){return n&&typeof n=="object"&&typeof n.copy=="function"&&typeof n.fill=="function"&&typeof n.readUInt8=="function"}},{}],527:[function(i,s,r){(function(n,o){(function(){var a=/%[sdj%]/g;r.format=function(w){if(!b(w)){for(var S=[],x=0;x<arguments.length;x++)S.push(u(arguments[x]));return S.join(" ")}x=1;for(var E=arguments,M=E.length,O=String(w).replace(a,function(Y){if(Y==="%%")return"%";if(x>=M)return Y;switch(Y){case"%s":return String(E[x++]);case"%d":return Number(E[x++]);case"%j":try{return JSON.stringify(E[x++])}catch{return"[Circular]"}default:return Y}}),V=E[x];x<M;V=E[++x])v(V)||!I(V)?O+=" "+V:O+=" "+u(V);return O},r.deprecate=function(w,S){if(T(o.process))return function(){return r.deprecate(w,S).apply(this,arguments)};if(n.noDeprecation===!0)return w;var x=!1;return function(){if(!x){if(n.throwDeprecation)throw new Error(S);n.traceDeprecation?console.trace(S):console.error(S),x=!0}return w.apply(this,arguments)}};var l,c={};function u(w,S){var x={seen:[],stylize:h};return arguments.length>=3&&(x.depth=arguments[2]),arguments.length>=4&&(x.colors=arguments[3]),y(S)?x.showHidden=S:S&&r._extend(x,S),T(x.showHidden)&&(x.showHidden=!1),T(x.depth)&&(x.depth=2),T(x.colors)&&(x.colors=!1),T(x.customInspect)&&(x.customInspect=!0),x.colors&&(x.stylize=d),p(x,w,x.depth)}function d(w,S){var x=u.styles[S];return x?"\x1B["+u.colors[x][0]+"m"+w+"\x1B["+u.colors[x][1]+"m":w}function h(w,S){return w}function p(w,S,x){if(w.customInspect&&S&&B(S.inspect)&&S.inspect!==r.inspect&&(!S.constructor||S.constructor.prototype!==S)){var E=S.inspect(x,w);return b(E)||(E=p(w,E,x)),E}var M=function(N,P){if(T(P))return N.stylize("undefined","undefined");if(b(P)){var j="'"+JSON.stringify(P).replace(/^"|"$/g,"").replace(/'/g,"\\'").replace(/\\"/g,'"')+"'";return N.stylize(j,"string")}if(C(P))return N.stylize(""+P,"number");if(y(P))return N.stylize(""+P,"boolean");if(v(P))return N.stylize("null","null")}(w,S);if(M)return M;var O=Object.keys(S),V=function(N){var P={};return N.forEach(function(j,X){P[j]=!0}),P}(O);if(w.showHidden&&(O=Object.getOwnPropertyNames(S)),F(S)&&(O.indexOf("message")>=0||O.indexOf("description")>=0))return f(S);if(O.length===0){if(B(S)){var Y=S.name?": "+S.name:"";return w.stylize("[Function"+Y+"]","special")}if(A(S))return w.stylize(RegExp.prototype.toString.call(S),"regexp");if(D(S))return w.stylize(Date.prototype.toString.call(S),"date");if(F(S))return f(S)}var $,J="",G=!1,Z=["{","}"];return g(S)&&(G=!0,Z=["[","]"]),B(S)&&(J=" [Function"+(S.name?": "+S.name:"")+"]"),A(S)&&(J=" "+RegExp.prototype.toString.call(S)),D(S)&&(J=" "+Date.prototype.toUTCString.call(S)),F(S)&&(J=" "+f(S)),O.length!==0||G&&S.length!=0?x<0?A(S)?w.stylize(RegExp.prototype.toString.call(S),"regexp"):w.stylize("[Object]","special"):(w.seen.push(S),$=G?function(N,P,j,X,ie){for(var ee=[],re=0,oe=P.length;re<oe;++re)_(P,String(re))?ee.push(m(N,P,j,X,String(re),!0)):ee.push("");return ie.forEach(function(ue){ue.match(/^\d+$/)||ee.push(m(N,P,j,X,ue,!0))}),ee}(w,S,x,V,O):O.map(function(N){return m(w,S,x,V,N,G)}),w.seen.pop(),function(N,P,j){return N.reduce(function(X,ie){return ie.indexOf(`
`)>=0,X+ie.replace(/\u001b\[\d\d?m/g,"").length+1},0)>60?j[0]+(P===""?"":P+`
 `)+" "+N.join(`,
  `)+" "+j[1]:j[0]+P+" "+N.join(", ")+" "+j[1]}($,J,Z)):Z[0]+J+Z[1]}function f(w){return"["+Error.prototype.toString.call(w)+"]"}function m(w,S,x,E,M,O){var V,Y,$;if(($=Object.getOwnPropertyDescriptor(S,M)||{value:S[M]}).get?Y=$.set?w.stylize("[Getter/Setter]","special"):w.stylize("[Getter]","special"):$.set&&(Y=w.stylize("[Setter]","special")),_(E,M)||(V="["+M+"]"),Y||(w.seen.indexOf($.value)<0?(Y=v(x)?p(w,$.value,null):p(w,$.value,x-1)).indexOf(`
`)>-1&&(Y=O?Y.split(`
`).map(function(J){return"  "+J}).join(`
`).substr(2):`
`+Y.split(`
`).map(function(J){return"   "+J}).join(`
`)):Y=w.stylize("[Circular]","special")),T(V)){if(O&&M.match(/^\d+$/))return Y;(V=JSON.stringify(""+M)).match(/^"([a-zA-Z_][a-zA-Z_0-9]*)"$/)?(V=V.substr(1,V.length-2),V=w.stylize(V,"name")):(V=V.replace(/'/g,"\\'").replace(/\\"/g,'"').replace(/(^"|"$)/g,"'"),V=w.stylize(V,"string"))}return V+": "+Y}function g(w){return Array.isArray(w)}function y(w){return typeof w=="boolean"}function v(w){return w===null}function C(w){return typeof w=="number"}function b(w){return typeof w=="string"}function T(w){return w===void 0}function A(w){return I(w)&&U(w)==="[object RegExp]"}function I(w){return typeof w=="object"&&w!==null}function D(w){return I(w)&&U(w)==="[object Date]"}function F(w){return I(w)&&(U(w)==="[object Error]"||w instanceof Error)}function B(w){return typeof w=="function"}function U(w){return Object.prototype.toString.call(w)}function H(w){return w<10?"0"+w.toString(10):w.toString(10)}r.debuglog=function(w){if(T(l)&&(l=n.env.NODE_DEBUG||""),w=w.toUpperCase(),!c[w])if(new RegExp("\\b"+w+"\\b","i").test(l)){var S=n.pid;c[w]=function(){var x=r.format.apply(r,arguments);console.error("%s %d: %s",w,S,x)}}else c[w]=function(){};return c[w]},r.inspect=u,u.colors={bold:[1,22],italic:[3,23],underline:[4,24],inverse:[7,27],white:[37,39],grey:[90,39],black:[30,39],blue:[34,39],cyan:[36,39],green:[32,39],magenta:[35,39],red:[31,39],yellow:[33,39]},u.styles={special:"cyan",number:"yellow",boolean:"yellow",undefined:"grey",null:"bold",string:"green",date:"magenta",regexp:"red"},r.isArray=g,r.isBoolean=y,r.isNull=v,r.isNullOrUndefined=function(w){return w==null},r.isNumber=C,r.isString=b,r.isSymbol=function(w){return typeof w=="symbol"},r.isUndefined=T,r.isRegExp=A,r.isObject=I,r.isDate=D,r.isError=F,r.isFunction=B,r.isPrimitive=function(w){return w===null||typeof w=="boolean"||typeof w=="number"||typeof w=="string"||typeof w=="symbol"||w===void 0},r.isBuffer=i("./support/isBuffer");var R=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];function L(){var w=new Date,S=[H(w.getHours()),H(w.getMinutes()),H(w.getSeconds())].join(":");return[w.getDate(),R[w.getMonth()],S].join(" ")}function _(w,S){return Object.prototype.hasOwnProperty.call(w,S)}r.log=function(){console.log("%s - %s",L(),r.format.apply(r,arguments))},r.inherits=i("inherits"),r._extend=function(w,S){if(!S||!I(S))return w;for(var x=Object.keys(S),E=x.length;E--;)w[x[E]]=S[x[E]];return w}}).call(this)}).call(this,i("_process"),typeof zt<"u"?zt:typeof self<"u"?self:typeof window<"u"?window:{})},{"./support/isBuffer":526,_process:467,inherits:525}],528:[function(i,s,r){Object.defineProperty(r,"__esModule",{value:!0}),Object.defineProperty(r,"v1",{enumerable:!0,get:function(){return n.default}}),Object.defineProperty(r,"v3",{enumerable:!0,get:function(){return o.default}}),Object.defineProperty(r,"v4",{enumerable:!0,get:function(){return a.default}}),Object.defineProperty(r,"v5",{enumerable:!0,get:function(){return l.default}}),Object.defineProperty(r,"NIL",{enumerable:!0,get:function(){return c.default}}),Object.defineProperty(r,"version",{enumerable:!0,get:function(){return u.default}}),Object.defineProperty(r,"validate",{enumerable:!0,get:function(){return d.default}}),Object.defineProperty(r,"stringify",{enumerable:!0,get:function(){return h.default}}),Object.defineProperty(r,"parse",{enumerable:!0,get:function(){return p.default}});var n=f(i("./v1.js")),o=f(i("./v3.js")),a=f(i("./v4.js")),l=f(i("./v5.js")),c=f(i("./nil.js")),u=f(i("./version.js")),d=f(i("./validate.js")),h=f(i("./stringify.js")),p=f(i("./parse.js"));function f(m){return m&&m.__esModule?m:{default:m}}},{"./nil.js":530,"./parse.js":531,"./stringify.js":535,"./v1.js":536,"./v3.js":537,"./v4.js":539,"./v5.js":540,"./validate.js":541,"./version.js":542}],529:[function(i,s,r){function n(p){return 14+(p+64>>>9<<4)+1}function o(p,f){const m=(65535&p)+(65535&f);return(p>>16)+(f>>16)+(m>>16)<<16|65535&m}function a(p,f,m,g,y,v){return o((C=o(o(f,p),o(g,v)))<<(b=y)|C>>>32-b,m);var C,b}function l(p,f,m,g,y,v,C){return a(f&m|~f&g,p,f,y,v,C)}function c(p,f,m,g,y,v,C){return a(f&g|m&~g,p,f,y,v,C)}function u(p,f,m,g,y,v,C){return a(f^m^g,p,f,y,v,C)}function d(p,f,m,g,y,v,C){return a(m^(f|~g),p,f,y,v,C)}Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var h=function(p){if(typeof p=="string"){const f=unescape(encodeURIComponent(p));p=new Uint8Array(f.length);for(let m=0;m<f.length;++m)p[m]=f.charCodeAt(m)}return function(f){const m=[],g=32*f.length;for(let y=0;y<g;y+=8){const v=f[y>>5]>>>y%32&255,C=parseInt("0123456789abcdef".charAt(v>>>4&15)+"0123456789abcdef".charAt(15&v),16);m.push(C)}return m}(function(f,m){f[m>>5]|=128<<m%32,f[n(m)-1]=m;let g=1732584193,y=-271733879,v=-1732584194,C=271733878;for(let b=0;b<f.length;b+=16){const T=g,A=y,I=v,D=C;g=l(g,y,v,C,f[b],7,-680876936),C=l(C,g,y,v,f[b+1],12,-389564586),v=l(v,C,g,y,f[b+2],17,606105819),y=l(y,v,C,g,f[b+3],22,-1044525330),g=l(g,y,v,C,f[b+4],7,-176418897),C=l(C,g,y,v,f[b+5],12,1200080426),v=l(v,C,g,y,f[b+6],17,-1473231341),y=l(y,v,C,g,f[b+7],22,-45705983),g=l(g,y,v,C,f[b+8],7,1770035416),C=l(C,g,y,v,f[b+9],12,-1958414417),v=l(v,C,g,y,f[b+10],17,-42063),y=l(y,v,C,g,f[b+11],22,-1990404162),g=l(g,y,v,C,f[b+12],7,1804603682),C=l(C,g,y,v,f[b+13],12,-40341101),v=l(v,C,g,y,f[b+14],17,-1502002290),y=l(y,v,C,g,f[b+15],22,1236535329),g=c(g,y,v,C,f[b+1],5,-165796510),C=c(C,g,y,v,f[b+6],9,-1069501632),v=c(v,C,g,y,f[b+11],14,643717713),y=c(y,v,C,g,f[b],20,-373897302),g=c(g,y,v,C,f[b+5],5,-701558691),C=c(C,g,y,v,f[b+10],9,38016083),v=c(v,C,g,y,f[b+15],14,-660478335),y=c(y,v,C,g,f[b+4],20,-405537848),g=c(g,y,v,C,f[b+9],5,568446438),C=c(C,g,y,v,f[b+14],9,-1019803690),v=c(v,C,g,y,f[b+3],14,-187363961),y=c(y,v,C,g,f[b+8],20,1163531501),g=c(g,y,v,C,f[b+13],5,-1444681467),C=c(C,g,y,v,f[b+2],9,-51403784),v=c(v,C,g,y,f[b+7],14,1735328473),y=c(y,v,C,g,f[b+12],20,-1926607734),g=u(g,y,v,C,f[b+5],4,-378558),C=u(C,g,y,v,f[b+8],11,-2022574463),v=u(v,C,g,y,f[b+11],16,1839030562),y=u(y,v,C,g,f[b+14],23,-35309556),g=u(g,y,v,C,f[b+1],4,-1530992060),C=u(C,g,y,v,f[b+4],11,1272893353),v=u(v,C,g,y,f[b+7],16,-155497632),y=u(y,v,C,g,f[b+10],23,-1094730640),g=u(g,y,v,C,f[b+13],4,681279174),C=u(C,g,y,v,f[b],11,-358537222),v=u(v,C,g,y,f[b+3],16,-722521979),y=u(y,v,C,g,f[b+6],23,76029189),g=u(g,y,v,C,f[b+9],4,-640364487),C=u(C,g,y,v,f[b+12],11,-421815835),v=u(v,C,g,y,f[b+15],16,530742520),y=u(y,v,C,g,f[b+2],23,-995338651),g=d(g,y,v,C,f[b],6,-198630844),C=d(C,g,y,v,f[b+7],10,1126891415),v=d(v,C,g,y,f[b+14],15,-1416354905),y=d(y,v,C,g,f[b+5],21,-57434055),g=d(g,y,v,C,f[b+12],6,1700485571),C=d(C,g,y,v,f[b+3],10,-1894986606),v=d(v,C,g,y,f[b+10],15,-1051523),y=d(y,v,C,g,f[b+1],21,-2054922799),g=d(g,y,v,C,f[b+8],6,1873313359),C=d(C,g,y,v,f[b+15],10,-30611744),v=d(v,C,g,y,f[b+6],15,-1560198380),y=d(y,v,C,g,f[b+13],21,1309151649),g=d(g,y,v,C,f[b+4],6,-145523070),C=d(C,g,y,v,f[b+11],10,-1120210379),v=d(v,C,g,y,f[b+2],15,718787259),y=d(y,v,C,g,f[b+9],21,-343485551),g=o(g,T),y=o(y,A),v=o(v,I),C=o(C,D)}return[g,y,v,C]}(function(f){if(f.length===0)return[];const m=8*f.length,g=new Uint32Array(n(m));for(let y=0;y<m;y+=8)g[y>>5]|=(255&f[y/8])<<y%32;return g}(p),8*p.length))};r.default=h},{}],530:[function(i,s,r){Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0,r.default="00000000-0000-0000-0000-000000000000"},{}],531:[function(i,s,r){Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n,o=(n=i("./validate.js"))&&n.__esModule?n:{default:n},a=function(l){if(!(0,o.default)(l))throw TypeError("Invalid UUID");let c;const u=new Uint8Array(16);return u[0]=(c=parseInt(l.slice(0,8),16))>>>24,u[1]=c>>>16&255,u[2]=c>>>8&255,u[3]=255&c,u[4]=(c=parseInt(l.slice(9,13),16))>>>8,u[5]=255&c,u[6]=(c=parseInt(l.slice(14,18),16))>>>8,u[7]=255&c,u[8]=(c=parseInt(l.slice(19,23),16))>>>8,u[9]=255&c,u[10]=(c=parseInt(l.slice(24,36),16))/1099511627776&255,u[11]=c/4294967296&255,u[12]=c>>>24&255,u[13]=c>>>16&255,u[14]=c>>>8&255,u[15]=255&c,u};r.default=a},{"./validate.js":541}],532:[function(i,s,r){Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0,r.default=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i},{}],533:[function(i,s,r){let n;Object.defineProperty(r,"__esModule",{value:!0}),r.default=function(){if(!n&&(n=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||typeof msCrypto<"u"&&typeof msCrypto.getRandomValues=="function"&&msCrypto.getRandomValues.bind(msCrypto),!n))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return n(o)};const o=new Uint8Array(16)},{}],534:[function(i,s,r){function n(l,c,u,d){switch(l){case 0:return c&u^~c&d;case 1:return c^u^d;case 2:return c&u^c&d^u&d;case 3:return c^u^d}}function o(l,c){return l<<c|l>>>32-c}Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var a=function(l){const c=[1518500249,1859775393,2400959708,3395469782],u=[1732584193,4023233417,2562383102,271733878,3285377520];if(typeof l=="string"){const f=unescape(encodeURIComponent(l));l=[];for(let m=0;m<f.length;++m)l.push(f.charCodeAt(m))}else Array.isArray(l)||(l=Array.prototype.slice.call(l));l.push(128);const d=l.length/4+2,h=Math.ceil(d/16),p=new Array(h);for(let f=0;f<h;++f){const m=new Uint32Array(16);for(let g=0;g<16;++g)m[g]=l[64*f+4*g]<<24|l[64*f+4*g+1]<<16|l[64*f+4*g+2]<<8|l[64*f+4*g+3];p[f]=m}p[h-1][14]=8*(l.length-1)/Math.pow(2,32),p[h-1][14]=Math.floor(p[h-1][14]),p[h-1][15]=8*(l.length-1)&4294967295;for(let f=0;f<h;++f){const m=new Uint32Array(80);for(let T=0;T<16;++T)m[T]=p[f][T];for(let T=16;T<80;++T)m[T]=o(m[T-3]^m[T-8]^m[T-14]^m[T-16],1);let g=u[0],y=u[1],v=u[2],C=u[3],b=u[4];for(let T=0;T<80;++T){const A=Math.floor(T/20),I=o(g,5)+n(A,y,v,C)+b+c[A]+m[T]>>>0;b=C,C=v,v=o(y,30)>>>0,y=g,g=I}u[0]=u[0]+g>>>0,u[1]=u[1]+y>>>0,u[2]=u[2]+v>>>0,u[3]=u[3]+C>>>0,u[4]=u[4]+b>>>0}return[u[0]>>24&255,u[0]>>16&255,u[0]>>8&255,255&u[0],u[1]>>24&255,u[1]>>16&255,u[1]>>8&255,255&u[1],u[2]>>24&255,u[2]>>16&255,u[2]>>8&255,255&u[2],u[3]>>24&255,u[3]>>16&255,u[3]>>8&255,255&u[3],u[4]>>24&255,u[4]>>16&255,u[4]>>8&255,255&u[4]]};r.default=a},{}],535:[function(i,s,r){Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n,o=(n=i("./validate.js"))&&n.__esModule?n:{default:n};const a=[];for(let c=0;c<256;++c)a.push((c+256).toString(16).substr(1));var l=function(c){let u=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;const d=(a[c[u+0]]+a[c[u+1]]+a[c[u+2]]+a[c[u+3]]+"-"+a[c[u+4]]+a[c[u+5]]+"-"+a[c[u+6]]+a[c[u+7]]+"-"+a[c[u+8]]+a[c[u+9]]+"-"+a[c[u+10]]+a[c[u+11]]+a[c[u+12]]+a[c[u+13]]+a[c[u+14]]+a[c[u+15]]).toLowerCase();if(!(0,o.default)(d))throw TypeError("Stringified UUID is invalid");return d};r.default=l},{"./validate.js":541}],536:[function(i,s,r){Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n=a(i("./rng.js")),o=a(i("./stringify.js"));function a(p){return p&&p.__esModule?p:{default:p}}let l,c,u=0,d=0;var h=function(p,f,m){let g=f&&m||0;const y=f||new Array(16);let v=(p=p||{}).node||l,C=p.clockseq!==void 0?p.clockseq:c;if(v==null||C==null){const F=p.random||(p.rng||n.default)();v==null&&(v=l=[1|F[0],F[1],F[2],F[3],F[4],F[5]]),C==null&&(C=c=16383&(F[6]<<8|F[7]))}let b=p.msecs!==void 0?p.msecs:Date.now(),T=p.nsecs!==void 0?p.nsecs:d+1;const A=b-u+(T-d)/1e4;if(A<0&&p.clockseq===void 0&&(C=C+1&16383),(A<0||b>u)&&p.nsecs===void 0&&(T=0),T>=1e4)throw new Error("uuid.v1(): Can't create more than 10M uuids/sec");u=b,d=T,c=C,b+=122192928e5;const I=(1e4*(268435455&b)+T)%4294967296;y[g++]=I>>>24&255,y[g++]=I>>>16&255,y[g++]=I>>>8&255,y[g++]=255&I;const D=b/4294967296*1e4&268435455;y[g++]=D>>>8&255,y[g++]=255&D,y[g++]=D>>>24&15|16,y[g++]=D>>>16&255,y[g++]=C>>>8|128,y[g++]=255&C;for(let F=0;F<6;++F)y[g+F]=v[F];return f||(0,o.default)(y)};r.default=h},{"./rng.js":533,"./stringify.js":535}],537:[function(i,s,r){Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n=a(i("./v35.js")),o=a(i("./md5.js"));function a(c){return c&&c.__esModule?c:{default:c}}var l=(0,n.default)("v3",48,o.default);r.default=l},{"./md5.js":529,"./v35.js":538}],538:[function(i,s,r){Object.defineProperty(r,"__esModule",{value:!0}),r.default=function(u,d,h){function p(f,m,g,y){if(typeof f=="string"&&(f=function(C){C=unescape(encodeURIComponent(C));const b=[];for(let T=0;T<C.length;++T)b.push(C.charCodeAt(T));return b}(f)),typeof m=="string"&&(m=(0,o.default)(m)),m.length!==16)throw TypeError("Namespace must be array-like (16 iterable integer values, 0-255)");let v=new Uint8Array(16+f.length);if(v.set(m),v.set(f,m.length),v=h(v),v[6]=15&v[6]|d,v[8]=63&v[8]|128,g){y=y||0;for(let C=0;C<16;++C)g[y+C]=v[C];return g}return(0,n.default)(v)}try{p.name=u}catch{}return p.DNS=l,p.URL=c,p},r.URL=r.DNS=void 0;var n=a(i("./stringify.js")),o=a(i("./parse.js"));function a(u){return u&&u.__esModule?u:{default:u}}const l="6ba7b810-9dad-11d1-80b4-00c04fd430c8";r.DNS=l;const c="6ba7b811-9dad-11d1-80b4-00c04fd430c8";r.URL=c},{"./parse.js":531,"./stringify.js":535}],539:[function(i,s,r){Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n=a(i("./rng.js")),o=a(i("./stringify.js"));function a(c){return c&&c.__esModule?c:{default:c}}var l=function(c,u,d){const h=(c=c||{}).random||(c.rng||n.default)();if(h[6]=15&h[6]|64,h[8]=63&h[8]|128,u){d=d||0;for(let p=0;p<16;++p)u[d+p]=h[p];return u}return(0,o.default)(h)};r.default=l},{"./rng.js":533,"./stringify.js":535}],540:[function(i,s,r){Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n=a(i("./v35.js")),o=a(i("./sha1.js"));function a(c){return c&&c.__esModule?c:{default:c}}var l=(0,n.default)("v5",80,o.default);r.default=l},{"./sha1.js":534,"./v35.js":538}],541:[function(i,s,r){Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n,o=(n=i("./regex.js"))&&n.__esModule?n:{default:n},a=function(l){return typeof l=="string"&&o.default.test(l)};r.default=a},{"./regex.js":532}],542:[function(i,s,r){Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n,o=(n=i("./validate.js"))&&n.__esModule?n:{default:n},a=function(l){if(!(0,o.default)(l))throw TypeError("Invalid UUID");return parseInt(l.substr(14,1),16)};r.default=a},{"./validate.js":541}],543:[function(i,s,r){/**
* Character classes and associated utilities for the 5th edition of XML 1.0.
*
* @author Louis-Dominique Dubeau
* @license MIT
* @copyright Louis-Dominique Dubeau
*/Object.defineProperty(r,"__esModule",{value:!0}),r.CHAR=`	
\r ---`,r.S=` 	\r
`,r.NAME_START_CHAR=":A-Z_a-z-----------",r.NAME_CHAR="-"+r.NAME_START_CHAR+".0-9--",r.CHAR_RE=new RegExp("^["+r.CHAR+"]$","u"),r.S_RE=new RegExp("^["+r.S+"]+$","u"),r.NAME_START_CHAR_RE=new RegExp("^["+r.NAME_START_CHAR+"]$","u"),r.NAME_CHAR_RE=new RegExp("^["+r.NAME_CHAR+"]$","u"),r.NAME_RE=new RegExp("^["+r.NAME_START_CHAR+"]["+r.NAME_CHAR+"]*$","u"),r.NMTOKEN_RE=new RegExp("^["+r.NAME_CHAR+"]+$","u");function n(o){return o>=65&&o<=90||o>=97&&o<=122||o===58||o===95||o===8204||o===8205||o>=192&&o<=214||o>=216&&o<=246||o>=248&&o<=767||o>=880&&o<=893||o>=895&&o<=8191||o>=8304&&o<=8591||o>=11264&&o<=12271||o>=12289&&o<=55295||o>=63744&&o<=64975||o>=65008&&o<=65533||o>=65536&&o<=983039}r.S_LIST=[32,10,13,9],r.isChar=function(o){return o>=32&&o<=55295||o===10||o===13||o===9||o>=57344&&o<=65533||o>=65536&&o<=1114111},r.isS=function(o){return o===32||o===10||o===13||o===9},r.isNameStartChar=n,r.isNameChar=function(o){return n(o)||o>=48&&o<=57||o===45||o===46||o===183||o>=768&&o<=879||o>=8255&&o<=8256}},{}],544:[function(i,s,r){/**
* Character classes and associated utilities for the 2nd edition of XML 1.1.
*
* @author Louis-Dominique Dubeau
* @license MIT
* @copyright Louis-Dominique Dubeau
*/Object.defineProperty(r,"__esModule",{value:!0}),r.CHAR="---",r.RESTRICTED_CHAR="-\b\v\f---",r.S=` 	\r
`,r.NAME_START_CHAR=":A-Z_a-z-----------",r.NAME_CHAR="-"+r.NAME_START_CHAR+".0-9--",r.CHAR_RE=new RegExp("^["+r.CHAR+"]$","u"),r.RESTRICTED_CHAR_RE=new RegExp("^["+r.RESTRICTED_CHAR+"]$","u"),r.S_RE=new RegExp("^["+r.S+"]+$","u"),r.NAME_START_CHAR_RE=new RegExp("^["+r.NAME_START_CHAR+"]$","u"),r.NAME_CHAR_RE=new RegExp("^["+r.NAME_CHAR+"]$","u"),r.NAME_RE=new RegExp("^["+r.NAME_START_CHAR+"]["+r.NAME_CHAR+"]*$","u"),r.NMTOKEN_RE=new RegExp("^["+r.NAME_CHAR+"]+$","u");function n(o){return o>=65&&o<=90||o>=97&&o<=122||o===58||o===95||o===8204||o===8205||o>=192&&o<=214||o>=216&&o<=246||o>=248&&o<=767||o>=880&&o<=893||o>=895&&o<=8191||o>=8304&&o<=8591||o>=11264&&o<=12271||o>=12289&&o<=55295||o>=63744&&o<=64975||o>=65008&&o<=65533||o>=65536&&o<=983039}r.S_LIST=[32,10,13,9],r.isChar=function(o){return o>=1&&o<=55295||o>=57344&&o<=65533||o>=65536&&o<=1114111},r.isRestrictedChar=function(o){return o>=1&&o<=8||o===11||o===12||o>=14&&o<=31||o>=127&&o<=132||o>=134&&o<=159},r.isCharAndNotRestricted=function(o){return o===9||o===10||o===13||o>31&&o<127||o===133||o>159&&o<=55295||o>=57344&&o<=65533||o>=65536&&o<=1114111},r.isS=function(o){return o===32||o===10||o===13||o===9},r.isNameStartChar=n,r.isNameChar=function(o){return n(o)||o>=48&&o<=57||o===45||o===46||o===183||o>=768&&o<=879||o>=8255&&o<=8256}},{}],545:[function(i,s,r){/**
* Character class utilities for XML NS 1.0 edition 3.
*
* @author Louis-Dominique Dubeau
* @license MIT
* @copyright Louis-Dominique Dubeau
*/function n(o){return o>=65&&o<=90||o===95||o>=97&&o<=122||o>=192&&o<=214||o>=216&&o<=246||o>=248&&o<=767||o>=880&&o<=893||o>=895&&o<=8191||o>=8204&&o<=8205||o>=8304&&o<=8591||o>=11264&&o<=12271||o>=12289&&o<=55295||o>=63744&&o<=64975||o>=65008&&o<=65533||o>=65536&&o<=983039}Object.defineProperty(r,"__esModule",{value:!0}),r.NC_NAME_START_CHAR="A-Z_a-z------------",r.NC_NAME_CHAR="-"+r.NC_NAME_START_CHAR+".0-9--",r.NC_NAME_START_CHAR_RE=new RegExp("^["+r.NC_NAME_START_CHAR+"]$","u"),r.NC_NAME_CHAR_RE=new RegExp("^["+r.NC_NAME_CHAR+"]$","u"),r.NC_NAME_RE=new RegExp("^["+r.NC_NAME_START_CHAR+"]["+r.NC_NAME_CHAR+"]*$","u"),r.isNCNameStartChar=n,r.isNCNameChar=function(o){return n(o)||o===45||o===46||o>=48&&o<=57||o===183||o>=768&&o<=879||o>=8255&&o<=8256}},{}]},{},[15])(15)})})(f3);var zz=f3.exports;const $z=Ak(zz);var g3={exports:{}};(function(t,e){(function(i,s){s()})(zt,function(){function i(c,u){return typeof u>"u"?u={autoBom:!1}:typeof u!="object"&&(console.warn("Deprecated: Expected third argument to be a object"),u={autoBom:!u}),u.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(c.type)?new Blob(["\uFEFF",c],{type:c.type}):c}function s(c,u,d){var h=new XMLHttpRequest;h.open("GET",c),h.responseType="blob",h.onload=function(){l(h.response,u,d)},h.onerror=function(){console.error("could not download file")},h.send()}function r(c){var u=new XMLHttpRequest;u.open("HEAD",c,!1);try{u.send()}catch{}return 200<=u.status&&299>=u.status}function n(c){try{c.dispatchEvent(new MouseEvent("click"))}catch{var u=document.createEvent("MouseEvents");u.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),c.dispatchEvent(u)}}var o=typeof window=="object"&&window.window===window?window:typeof self=="object"&&self.self===self?self:typeof zt=="object"&&zt.global===zt?zt:void 0,a=o.navigator&&/Macintosh/.test(navigator.userAgent)&&/AppleWebKit/.test(navigator.userAgent)&&!/Safari/.test(navigator.userAgent),l=o.saveAs||(typeof window!="object"||window!==o?function(){}:"download"in HTMLAnchorElement.prototype&&!a?function(c,u,d){var h=o.URL||o.webkitURL,p=document.createElement("a");u=u||c.name||"download",p.download=u,p.rel="noopener",typeof c=="string"?(p.href=c,p.origin===location.origin?n(p):r(p.href)?s(c,u,d):n(p,p.target="_blank")):(p.href=h.createObjectURL(c),setTimeout(function(){h.revokeObjectURL(p.href)},4e4),setTimeout(function(){n(p)},0))}:"msSaveOrOpenBlob"in navigator?function(c,u,d){if(u=u||c.name||"download",typeof c!="string")navigator.msSaveOrOpenBlob(i(c,d),u);else if(r(c))s(c,u,d);else{var h=document.createElement("a");h.href=c,h.target="_blank",setTimeout(function(){n(h)})}}:function(c,u,d,h){if(h=h||open("","_blank"),h&&(h.document.title=h.document.body.innerText="downloading..."),typeof c=="string")return s(c,u,d);var p=c.type==="application/octet-stream",f=/constructor/i.test(o.HTMLElement)||o.safari,m=/CriOS\/[\d]+/.test(navigator.userAgent);if((m||p&&f||a)&&typeof FileReader<"u"){var g=new FileReader;g.onloadend=function(){var C=g.result;C=m?C:C.replace(/^data:[^;]*;/,"data:attachment/file;"),h?h.location.href=C:location=C,h=null},g.readAsDataURL(c)}else{var y=o.URL||o.webkitURL,v=y.createObjectURL(c);h?h.location=v:location.href=v,h=null,setTimeout(function(){y.revokeObjectURL(v)},4e4)}});o.saveAs=l.saveAs=l,t.exports=l})})(g3);var Kz=g3.exports;const Ci={headerBg:"F5F7FA",headerText:"212121",absensi:"F5F9FC",upahDasar:"FAF5FC",tunjangan:"FFFBF5",premi:"F5FAF5",potongan:"F8F8F8",totalHk:"E3F2FD",totalHkText:"1565C0",totalTunjangan:"FFF3E0",totalTunjanganText:"E65100",totalPremi:"E8F5E9",totalPremiText:"2E7D32",totalPotongan:"FFEBEE",totalPotonganText:"C62828",upahKotor:"FFFDE7",upahKotorText:"F57F17",upahBersih:"E8F5E9",upahBersihText:"1B5E20",gangHeader:"E8F5E9",gangTotal:"E3F2FD",grandTotal:"1a365d",grandTotalText:"FFFFFF",border:"E0E0E0",borderDark:"BDBDBD"},oF=t=>{if(t==null)return"-";const e=Number(t);return isNaN(e)?"-":Math.round(e)},Yz=t=>{if(t==null)return"-";const e=Number(t);return isNaN(e)?"-":e};function qz(t){return t.includes("hari_kerja")||t.includes("cuti")||t==="jumlah_hk"?Ci.absensi:t.includes("upah_dasar")||t.includes("gaji_pokok")||t==="upah_pokok"?Ci.upahDasar:t.startsWith("beras_")||t.startsWith("jabatan_")||t.startsWith("masa_kerja_")||t.startsWith("lembur_")||t==="total_tunjangan"?Ci.tunjangan:t.startsWith("premi")||t==="total_premi"?Ci.premi:t.startsWith("pot_")||t.includes("potongan")?Ci.potongan:null}function Xz(t){return t==="jumlah_hk"?{fill:Ci.totalHk,font:Ci.totalHkText,bold:!0}:t==="total_tunjangan"?{fill:Ci.totalTunjangan,font:Ci.totalTunjanganText,bold:!0}:t==="total_premi"?{fill:Ci.totalPremi,font:Ci.totalPremiText,bold:!0}:t==="total_potongan"||t==="total_potongan_bersih"?{fill:Ci.totalPotongan,font:Ci.totalPotonganText,bold:!0}:t==="jumlah_upah_kotor"||t==="potongan_upah_kotor_total"?{fill:Ci.upahKotor,font:Ci.upahKotorText,bold:!0}:t==="upah_bersih"?{fill:Ci.upahBersih,font:Ci.upahBersihText,bold:!0}:null}function Zz(t){const i=t.length,s=Array(4).fill(null).map(()=>Array(i).fill(null));t.forEach((n,o)=>{const a=n.headers;for(let l=0;l<4;l++){if(s[l][o]!==null)continue;const c=a[l];if(c!==null){let u=1;for(let d=l+1;d<4&&a[d]===null;d++)u++;for(let d=l;d<l+u;d++)s[d][o]={label:c,rowSpan:u,colSpan:1,startRow:l,startCol:o}}}});for(let n=0;n<4;n++)for(let o=0;o<i;o++){const a=s[n][o];if(!a||a.merged)continue;let l=1;for(let c=o+1;c<i;c++){const u=s[n][c];if(u&&u.label===a.label&&u.startRow===a.startRow&&u.rowSpan===a.rowSpan)l++,u.merged=!0;else break}a.colSpan=l}const r=[];for(let n=0;n<4;n++)for(let o=0;o<i;o++){const a=s[n][o];!a||a.merged||a.startRow===n&&r.push({row:n+1,col:o+1,rowSpan:a.rowSpan,colSpan:a.colSpan,label:a.label||""})}return r}async function Jz(t,e,i,s){const r=new $z.Workbook;r.creator="PT Rebinmas Jaya - Payroll System",r.created=new Date;const o=`${["Januari","Februari","Maret","April","Mei","Juni","Juli","Agustus","September","Oktober","November","Desember"][s.month-1]} ${s.year}`,a=`Daftar Upah ${s.division}`,l=r.addWorksheet(a.substring(0,31),{pageSetup:{paperSize:9,orientation:"landscape",fitToPage:!0,fitToWidth:1,fitToHeight:0}}),c=l.addRow([`DAFTAR UPAH - ${s.division} - ${o}`]);c.height=30,c.getCell(1).font={size:16,bold:!0,color:{argb:"1a365d"}},l.mergeCells(1,1,1,e.length),c.getCell(1).alignment={horizontal:"center",vertical:"middle"};const u=s.gangCode==="ALL"?"Semua Gang":`Gang: ${s.gangCode}`,d=l.addRow([u]);d.height=20,d.getCell(1).font={size:12,italic:!0,color:{argb:"666666"}},l.mergeCells(2,1,2,e.length),d.getCell(1).alignment={horizontal:"center",vertical:"middle"},l.addRow([]);const h=4,p=Zz(e);for(let y=0;y<4;y++){const v=l.addRow(Array(e.length).fill(""));v.height=22}if(p.forEach(y=>{const v=h+y.row-1,C=y.col,b=l.getCell(v,C);if(b.value=y.label,b.font={bold:!0,size:10,color:{argb:Ci.headerText}},b.fill={type:"pattern",pattern:"solid",fgColor:{argb:Ci.headerBg}},b.alignment={horizontal:"center",vertical:"middle",wrapText:!0},b.border={top:{style:"thin",color:{argb:Ci.border}},bottom:{style:"thin",color:{argb:Ci.border}},left:{style:"thin",color:{argb:Ci.border}},right:{style:"thin",color:{argb:Ci.border}}},y.rowSpan>1||y.colSpan>1){const T=v+y.rowSpan-1,A=C+y.colSpan-1;l.mergeCells(v,C,T,A)}}),e.forEach((y,v)=>{l.getColumn(v+1).width=Math.max(y.w/7,8)}),t.forEach(y=>{if(y.type==="gang_header"){const v=l.addRow(Array(e.length).fill(""));v.height=24;const C=v.number;l.mergeCells(C,1,C,e.length);const b=v.getCell(1);b.value=` GANG: ${y.gang_code}`,b.font={bold:!0,size:11,color:{argb:"1B5E20"}},b.fill={type:"pattern",pattern:"solid",fgColor:{argb:Ci.gangHeader}},b.alignment={horizontal:"left",vertical:"middle"},b.border={top:{style:"medium",color:{argb:Ci.borderDark}},bottom:{style:"medium",color:{argb:Ci.borderDark}}}}else{const v=e.map(b=>{let T=y[b.field];return b.field==="lembur_jam"?Yz(T):typeof T=="number"?oF(T):T??"-"}),C=l.addRow(v);C.height=22,e.forEach((b,T)=>{var F,B;const A=C.getCell(T+1),I=qz(b.field),D=Xz(b.field);A.alignment={horizontal:(F=b.className)!=null&&F.includes("text-right")?"right":(B=b.className)!=null&&B.includes("text-center")?"center":"left",vertical:"middle"},A.font={size:10},A.border={top:{style:"thin",color:{argb:Ci.border}},bottom:{style:"thin",color:{argb:Ci.border}},left:{style:"thin",color:{argb:Ci.border}},right:{style:"thin",color:{argb:Ci.border}}},typeof A.value=="number"&&(A.numFmt="#,##0"),D?(A.fill={type:"pattern",pattern:"solid",fgColor:{argb:D.fill}},A.font={size:10,bold:D.bold,color:{argb:D.font}}):I&&(A.fill={type:"pattern",pattern:"solid",fgColor:{argb:I}}),y.type==="gang_total"&&(A.font={...A.font,bold:!0},A.fill={type:"pattern",pattern:"solid",fgColor:{argb:Ci.gangTotal}})})}}),i){const y=e.map(C=>{if(C.field==="nama")return"GRAND TOTAL";if(C.field==="no")return"";let b=i[C.field];return typeof b=="number"?oF(b):b??"-"}),v=l.addRow(y);v.height=28,e.forEach((C,b)=>{var A,I;const T=v.getCell(b+1);T.fill={type:"pattern",pattern:"solid",fgColor:{argb:Ci.grandTotal}},T.font={bold:!0,size:11,color:{argb:Ci.grandTotalText}},T.alignment={horizontal:(A=C.className)!=null&&A.includes("text-right")?"right":(I=C.className)!=null&&I.includes("text-center")?"center":"left",vertical:"middle"},T.border={top:{style:"medium",color:{argb:"0d1b2a"}},bottom:{style:"medium",color:{argb:"0d1b2a"}},left:{style:"thin",color:{argb:"2d4a6f"}},right:{style:"thin",color:{argb:"2d4a6f"}}},typeof T.value=="number"&&(T.numFmt="#,##0")})}l.views=[{state:"frozen",xSplit:2,ySplit:h+3,topLeftCell:"C"+(h+4),activeCell:"C"+(h+4)}];const f=`Daftar_Upah_${s.division}_${s.gangCode==="ALL"?"AllGang":s.gangCode}_${s.year}${String(s.month).padStart(2,"0")}.xlsx`,m=await r.xlsx.writeBuffer(),g=new Blob([m],{type:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"});return Kz.saveAs(g,f),f}const sb=t=>new Intl.NumberFormat("id-ID",{maximumFractionDigits:2}).format(t);function Qz({stats:t}){return!t||t.count===0?null:k.jsxs("div",{className:"selection-status-bar",children:[k.jsxs("div",{className:"stat-item",children:[k.jsx("strong",{children:"Count:"})," ",t.count]}),k.jsxs("div",{className:"stat-item",children:[k.jsx("strong",{children:"Sum:"})," ",sb(t.sum)]}),k.jsxs("div",{className:"stat-item",children:[k.jsx("strong",{children:"Avg:"})," ",sb(t.avg)]}),k.jsxs("div",{className:"stat-item",children:[k.jsx("strong",{children:"Min:"})," ",sb(t.min)]}),k.jsxs("div",{className:"stat-item",children:[k.jsx("strong",{children:"Max:"})," ",sb(t.max)]})]})}function e$({x:t,y:e,options:i,onClose:s}){const r=_e.useRef(null);return _e.useEffect(()=>{const n=o=>{r.current&&!r.current.contains(o.target)&&s()};return document.addEventListener("click",n),()=>document.removeEventListener("click",n)},[s]),!i||i.length===0?null:k.jsx("div",{className:"context-menu",style:{top:e,left:t},ref:r,children:i.map((n,o)=>n==="separator"?k.jsx("div",{className:"context-menu-separator"},o):k.jsx("div",{className:"context-menu-item",onClick:a=>{a.stopPropagation(),n.action(),s()},children:n.label},o))})}function ry({isLoading:t,message:e="Loading...",steps:i=[],gangCode:s,month:r,year:n}){const[o,a]=_e.useState({text:"Menyiapkan data...",author:""}),[l,c]=_e.useState(0),[u,d]=_e.useState(0),h=_e.useRef(null),p=[{text:"Kerja keras tidak akan mengkhianati hasil.",author:"Anonim"},{text:"Kualitas berarti melakukan hal yang benar ketika tidak ada yang melihat.",author:"Henry Ford"},{text:"Satu-satunya cara untuk melakukan pekerjaan hebat adalah dengan mencintai apa yang Anda lakukan.",author:"Steve Jobs"},{text:"Kesuksesan tidak datang kepadamu, kamulah yang harus pergi ke sana.",author:"Marva Collins"},{text:"Bekerjalah dalam diam, biarkan kesuksesanmu yang bersuara.",author:"Frank Ocean"},{text:"Fokus pada produktivitas, bukan kesibukan.",author:"Tim Ferriss"},{text:"Tindakan adalah kunci dasar untuk semua kesuksesan.",author:"Pablo Picasso"},{text:"Jangan takut untuk menyerah pada yang baik demi mendapatkan yang hebat.",author:"John D. Rockefeller"},{text:"Peluang tidak datang, melainkan diciptakan.",author:"Chris Grosser"},{text:"Sukses adalah hasil dari persiapan, kerja keras, dan belajar dari kegagalan.",author:"Colin Powell"},{text:"Setiap pencapaian dimulai dengan keputusan untuk mencoba.",author:"John F. Kennedy"},{text:"Kegagalan adalah bumbu yang memberi kesuksesan rasanya.",author:"Truman Capote"},{text:"Hal-hal terbaik dalam hidup tidak selalu gratis, tapi yang gratis bisa menjadi yang terbaik.",author:"Anonim"},{text:"Berani gagal adalah setengah jalan menuju sukses.",author:"Thomas Edison"},{text:"Perubahan dimulai dari diri sendiri.",author:"Mahatma Gandhi"}],f=(m="")=>{const g=p.filter(y=>y.text!==m);return g[Math.floor(Math.random()*g.length)]};return _e.useEffect(()=>{if(!t){h.current&&clearInterval(h.current);return}return a(f()),h.current=setInterval(()=>{a(m=>f(m.text))},5e3),()=>{h.current&&clearInterval(h.current)}},[t]),_e.useEffect(()=>{if(!t){c(100);return}const m=i.length>0?i.reduce((C,b)=>C+(b.duration||1e3),0):1e4;let g=0;const y=50,v=setInterval(()=>{g+=y;const C=Math.min(g/m*100,95);if(c(C),i.length>0){let b=0;for(let T=0;T<i.length;T++)if(b+=i[T].duration||1e3,g<b){d(T);break}}g>=m&&clearInterval(v)},y);return()=>clearInterval(v)},[t,i]),t?k.jsxs("div",{className:"loading-screen-overlay",children:[k.jsx("div",{className:"loading-screen-wallpaper"}),k.jsxs("div",{className:"loading-screen-content",children:[k.jsxs("div",{className:"loading-logo-container",children:[k.jsx("img",{src:"/images/rebinmas.webp",alt:"PT Rebinmas Jaya",className:"loading-logo",onError:m=>{m.target.style.display="none"}}),k.jsx("div",{className:"loading-company-name",children:"PT REBINMAS JAYA"}),k.jsx("div",{className:"loading-app-name",children:"Sistem Daftar Upah"})]}),k.jsxs("div",{className:"loading-progress-section",children:[k.jsx("div",{className:"loading-message",children:e}),i.length>0&&u<i.length&&k.jsx("div",{className:"loading-step",children:i[u].name}),k.jsx("div",{className:"loading-progress-bar-container",children:k.jsx("div",{className:"loading-progress-bar-fill",style:{width:`${l}%`},children:k.jsx("div",{className:"loading-progress-shine"})})}),k.jsxs("div",{className:"loading-progress-text",children:[Math.round(l),"%"]}),(s||r||n)&&k.jsxs("div",{className:"loading-report-info",children:[s&&k.jsxs("span",{children:["Gang: ",s]}),r&&n&&k.jsxs("span",{children:["Periode: ",`${String(r).padStart(2,"0")}/${n}`]})]})]}),k.jsxs("div",{className:"loading-quote-section",children:[k.jsx("div",{className:"loading-quote-icon",children:""}),k.jsxs("div",{className:"loading-quote-text",children:['"',o.text,'"']}),k.jsxs("div",{className:"loading-quote-author",children:[" ",o.author]})]},o.text),k.jsx("div",{className:"loading-spinner-container",children:k.jsx("div",{className:"loading-spinner"})})]})]}):null}const aF=t=>{if(t==null)return"-";const e=Number(t);return isNaN(e)?"-":new Intl.NumberFormat("id-ID",{minimumFractionDigits:0,maximumFractionDigits:0}).format(Math.round(e))},t$=t=>{if(t==null)return"-";const e=Number(t);return isNaN(e)?"-":new Intl.NumberFormat("id-ID",{minimumFractionDigits:1,maximumFractionDigits:1}).format(e)};function i$({token:t,month:e,year:i,division:s,gangCode:r,onViewEmployeeDetail:n,fontSize:o=100,onExportReady:a=null}){const[l,c]=_e.useState([]),[u,d]=_e.useState(!1),[h,p]=_e.useState(""),[f,m]=_e.useState({premi:{},potongan:{}}),[g,y]=_e.useState(null),[v,C]=_e.useState([]),[b,T]=_e.useState(!1),[A,I]=_e.useState(null),[D,F]=_e.useState(null),[B,U]=_e.useState(null),[H,R]=_e.useState([]),[L,_]=_e.useState([]),w=_e.useRef(null),S=async()=>{d(!0),p("");try{let P;if(mu())P=await kz(t,s,e,i);else{const ge=`/payroll/report/division-raw-tree?division_code=${s}&month=${e}&year=${i}`,ve=await fetch(ge,{headers:{Authorization:`Bearer ${t}`}});if(!ve.ok)throw new Error(await ve.text());P=await ve.json()}const j=P.dynamic_potongan_headers||{},X=P.dynamic_premi_headers||{};m({premi:X,potongan:j});let ie=Mf.flattenData(P,j);const ee=r&&r!=="ALL"?ie.filter(ge=>ge.gang_code===r):ie,re=Mf.calculateGrandTotal(ee);y(re);const oe={};ie.forEach(ge=>{const ve=ge.gang_code;oe[ve]||(oe[ve]=[]),oe[ve].push(ge)});const ue=[];let se=1,le=Object.keys(oe).sort();r&&r!=="ALL"&&(le=le.filter(ge=>ge===r)),le.forEach(ge=>{const ve=oe[ge];ue.push({type:"gang_header",gang_code:ge,id:`HEADER_${ge}`}),ve.forEach(De=>{De.no=se++,De.type="employee",De.id=De.nik||`EMP_${De.no}`,ue.push(De)});const xe=Mf.calculateGangTotals(ge,ie);xe.type="gang_total",xe.id=`TOTAL_${ge}`,xe.gang_code=ge,ue.push(xe)}),c(ue);const ne=ue.filter(ge=>ge.type==="employee"),fe=Object.entries(X).filter(([ge,ve])=>ne.some(xe=>{const De=xe[ve];return De!=null&&De!==0&&De!==""})).map(([ge,ve])=>ve);R(fe);const me=Object.entries(j).filter(([ge])=>!ge.toUpperCase().startsWith("KOREKSI")).filter(([ge,ve])=>ne.some(xe=>{const De=xe[ve];return De!=null&&De!==0&&De!==""})).map(([ge,ve])=>ve);_(me)}catch(P){console.error(P),p(P.message)}finally{d(!1)}};_e.useEffect(()=>{e&&i&&s&&S()},[e,i,s,r,t]);const x=_e.useMemo(()=>{const P=[{field:"no",headers:["IDENTITAS",null,null,"NO"],w:40,className:"text-center sticky-col",left:0},{field:"nama",headers:["IDENTITAS",null,null,"NAMA"],w:170,className:"text-left sticky-col",left:40},{field:"hari_kerja",headers:["ABSENSI","KEHADIRAN",null,"AN"],w:40,className:"text-center cell-absensi"},{field:"cuti_tahunan_hari",headers:["ABSENSI","KETIDAKHADIRAN",null,"CUTI"],w:45,className:"text-center cell-absensi"},{field:"cuti_sakit_haid_hari",headers:["ABSENSI","KETIDAKHADIRAN",null,"SAKIT+HAID"],w:70,className:"text-center cell-absensi"},{field:"cuti_minggu_hari",headers:["ABSENSI","KETIDAKHADIRAN",null,"MINGGU"],w:55,className:"text-center cell-absensi"},{field:"cuti_nasional_hari",headers:["ABSENSI","KETIDAKHADIRAN",null,"NASIONAL"],w:60,className:"text-center cell-absensi"},{field:"jumlah_hk",headers:["ABSENSI",null,null,"JUMLAH HK"],w:60,className:"text-center cell-absensi font-bold"},{field:"upah_dasar",headers:["PENGGAJIAN",null,null,"UPAH DASAR"],w:85,className:"text-right"},{field:"upah_pokok",headers:["PENGGAJIAN",null,null,"UPAH POKOK"],w:85,className:"text-right"},{field:"gaji_pokok",headers:["PENGGAJIAN",null,null,"GAJI POKOK"],w:85,className:"text-right"},{field:"beras_rate",headers:["TUNJANGAN","BERAS",null,"RATE"],w:60,className:"text-right"},{field:"beras_jumlah",headers:["TUNJANGAN","BERAS",null,"JUMLAH"],w:80,className:"text-right"},{field:"jabatan_rate",headers:["TUNJANGAN","JABATAN",null,"RATE"],w:60,className:"text-right"},{field:"jabatan_jumlah",headers:["TUNJANGAN","JABATAN",null,"JUMLAH"],w:80,className:"text-right"},{field:"masa_kerja_tahun",headers:["TUNJANGAN","MASA KERJA",null,"LAMA"],w:45,className:"text-center"},{field:"masa_kerja_jumlah",headers:["TUNJANGAN","MASA KERJA",null,"JUMLAH"],w:80,className:"text-right"},{field:"lembur_jam",headers:["TUNJANGAN","LEMBUR",null,"JAM"],w:45,className:"text-center"},{field:"lembur_jumlah",headers:["TUNJANGAN","LEMBUR",null,"JUMLAH"],w:80,className:"text-right"},{field:"total_tunjangan",headers:["TUNJANGAN",null,null,"TOTAL TUNJANGAN"],w:100,className:"text-right font-bold cell-total-tunjangan"}];return P.push({field:"premi_brondol",headers:["PREMI",null,null,"BRONDOL"],w:80,className:"text-right cell-premi"}),Object.entries(f.premi).filter(([j,X])=>H.includes(X)).forEach(([j,X])=>{P.push({field:X,headers:["PREMI",null,null,j.replace("PREMI ","")],w:80,className:"text-right cell-premi-dynamic"})}),P.push({field:"total_premi",headers:["PREMI",null,null,"TOTAL PREMI"],w:95,className:"text-right font-bold cell-total-premi"}),P.push({field:"pot_koreksi",headers:["POTONGAN UPAH KOTOR",null,null,"KOREKSI"],w:80,className:"text-right",getValue:j=>{var ie;const X=j.pot_koreksi??((ie=j.potongan_upah_kotor)==null?void 0:ie.koreksi)??0;return X>0&&console.log("[CustomTable DEBUG] pot_koreksi for",j.nama,"=",X),X}}),P.push({field:"potongan_upah_kotor_total",headers:["POTONGAN UPAH KOTOR",null,null,"TOTAL KOREKSI"],w:95,className:"text-right font-bold"}),P.push({field:"jumlah_upah_kotor",headers:["UPAH KOTOR",null,null,"JUMLAH"],w:110,className:"text-right font-bold cell-upah-kotor"}),P.push({field:"pot_astek",headers:["POTONGAN UPAH BERSIH","CARUMAN ASTEK",null,"PEKERJA"],w:75,className:"text-right"}),P.push({field:"pot_astek_maj",headers:["POTONGAN UPAH BERSIH","CARUMAN ASTEK",null,"MAJIKAN"],w:75,className:"text-right"}),P.push({field:"pot_bpjs_kesehatan_pekerja",headers:["POTONGAN UPAH BERSIH","POTONGAN BPJS","KESEHATAN","PEKERJA"],w:75,className:"text-right"}),P.push({field:"pot_bpjs_kesehatan_majikan",headers:["POTONGAN UPAH BERSIH","POTONGAN BPJS","KESEHATAN","MAJIKAN"],w:75,className:"text-right"}),P.push({field:"pot_bpjs_pensiun_pekerja",headers:["POTONGAN UPAH BERSIH","POTONGAN BPJS","PENSIUN","PEKERJA"],w:75,className:"text-right"}),P.push({field:"pot_bpjs_pensiun_majikan",headers:["POTONGAN UPAH BERSIH","POTONGAN BPJS","PENSIUN","MAJIKAN"],w:75,className:"text-right"}),P.push({field:"pot_bpjs_pekerja_total",headers:["POTONGAN UPAH BERSIH","POTONGAN BPJS",null,"JUMLAH"],w:80,className:"text-right font-bold"}),P.push({field:"pot_spsi",headers:["POTONGAN UPAH BERSIH",null,null,"IURAN SPSI"],w:80,className:"text-right"}),P.push({field:"pot_pph21",headers:["POTONGAN UPAH BERSIH",null,null,"PPH21"],w:80,className:"text-right"}),Object.entries(f.potongan).filter(([j])=>!j.toUpperCase().startsWith("KOREKSI")).filter(([j,X])=>L.includes(X)).forEach(([j,X])=>{P.push({field:X,headers:["POTONGAN UPAH BERSIH",null,null,j.replace(/^(POTONGAN\s*|POT\s*)/i,"")],w:80,className:"text-right"})}),P.push({field:"total_potongan_bersih",headers:["POTONGAN UPAH BERSIH",null,null,"TOTAL POTONGAN"],w:100,className:"text-right font-bold cell-deduction"}),P.push({field:"upah_bersih",headers:["UPAH BERSIH",null,null,"JUMLAH"],w:115,className:"text-right font-bold cell-net-salary"}),P},[f,H,L]),E=_e.useCallback(async()=>{if(l.length===0)return alert("Tidak ada data untuk di-export"),null;try{return await Jz(l,x,g,{division:s,gangCode:r,month:e,year:i})}catch(P){return console.error("Export error:",P),alert("Gagal export ke Excel: "+P.message),null}},[l,x,g,s,r,e,i]);_e.useEffect(()=>{a&&a(E)},[a,E]);const M=_e.useMemo(()=>{const j=x.length,X=Array(4).fill(null).map(()=>Array(j).fill(null));x.forEach((ee,re)=>{const oe=ee.headers;for(let ue=0;ue<4;ue++){const se=oe[ue];if(se===null)continue;let le=1;for(let ne=ue+1;ne<4&&oe[ne]===null;ne++)le++;for(let ne=ue;ne<ue+le;ne++)X[ne][re]={label:se,rowSpan:le,colSpan:1,startRow:ue,startCol:re};break}for(let ue=0;ue<4;ue++){if(X[ue][re]!==null)continue;const se=oe[ue];if(se!==null){let le=1;for(let ne=ue+1;ne<4&&oe[ne]===null;ne++)le++;for(let ne=ue;ne<ue+le;ne++)X[ne][re]={label:se,rowSpan:le,colSpan:1,startRow:ue,startCol:re}}}});for(let ee=0;ee<4;ee++)for(let re=0;re<j;re++){const oe=X[ee][re];if(!oe||oe.merged)continue;let ue=1;for(let se=re+1;se<j;se++){const le=X[ee][se];if(le&&le.label===oe.label&&le.startRow===oe.startRow&&le.rowSpan===oe.rowSpan)ue++,le.merged=!0;else break}oe.colSpan=ue}const ie=[];for(let ee=0;ee<4;ee++){const re=[];for(let oe=0;oe<j;oe++){const ue=X[ee][oe];ue&&(ue.merged||ue.startRow===ee&&re.push({label:ue.label||"",colSpan:ue.colSpan,rowSpan:ue.rowSpan,isSticky:x[oe].left!==void 0,left:x[oe].left}))}ie.push(re)}return ie},[x]),O=(P,j,X,ie)=>{P.ctrlKey||P.metaKey?C(ee=>ee.some(oe=>oe.r===j&&oe.c===X)?ee.filter(oe=>!(oe.r===j&&oe.c===X)):[...ee,{r:j,c:X}]):(T(!0),C([{r:j,c:X}]),U(ie))},V=(P,j)=>{if(b&&v.length>0){const X=v[0],ie=[],ee=Math.min(X.r,P),re=Math.max(X.r,P),oe=Math.min(X.c,j),ue=Math.max(X.c,j);for(let se=ee;se<=re;se++)for(let le=oe;le<=ue;le++)ie.push({r:se,c:le});C(ie)}},Y=()=>{T(!1),$()},$=_e.useCallback(()=>{if(!v||v.length===0){I(null);return}const P=[];if(v.forEach(({r:j,c:X})=>{const ie=l[j];if(!ie||ie.type==="gang_header")return;const ee=x[X];if(ee){const re=parseFloat(ie[ee.field]);isNaN(re)||P.push(re)}}),P.length>0){const j=P.reduce((X,ie)=>X+ie,0);I({count:P.length,sum:j,avg:j/P.length,min:Math.min(...P),max:Math.max(...P)})}else I(null)},[v,l,x]),J=(P,j)=>v.some(X=>X.r===P&&X.c===j),G=(P,j)=>{P.preventDefault(),j.type==="employee"&&F({x:P.clientX,y:P.clientY,options:[{label:" Lihat Detail Activity",action:()=>n==null?void 0:n(j)},"separator",{label:"Export Data",action:()=>alert("Export not implemented")}]})};if(u)return k.jsx(ry,{isLoading:!0,message:"Memuat Data Payroll...",gangCode:r,month:e,year:i,steps:[{name:"Mengambil data dari server",duration:2e3},{name:"Memproses data karyawan",duration:2e3},{name:"Menghitung total gang",duration:1500},{name:"Menyiapkan tampilan",duration:1500}]});if(h)return k.jsxs("div",{style:{padding:20,color:"red"},children:["Error: ",h]});const Z=o/100,N=28;return k.jsxs("div",{className:"payroll-table-container",style:{fontSize:`${11*Z}px`},onMouseUp:Y,children:[k.jsxs("table",{className:"payroll-table",ref:w,children:[k.jsx("thead",{children:M.map((P,j)=>k.jsx("tr",{children:P.map((X,ie)=>k.jsx("th",{colSpan:X.colSpan,rowSpan:X.rowSpan,className:`sticky-header ${X.isSticky?"sticky-corner":""}`,style:{top:j*N,left:X.left,height:X.rowSpan*N},children:X.label},`hc-${j}-${ie}`))},`hr-${j}`))}),k.jsx("tbody",{children:l.map((P,j)=>{if(P.type==="gang_header")return k.jsx("tr",{className:"gang-header-row",children:k.jsxs("td",{colSpan:x.length,children:[" GANG: ",P.gang_code]})},P.id);const X=B===P.id,ie=P.type==="gang_total"?"gang-total-row":j%2===0?"row-even":"row-odd";return k.jsx("tr",{className:`${ie} ${X?"row-highlighted":""}`,onClick:()=>U(P.id),onContextMenu:ee=>G(ee,P),onDoubleClick:()=>P.type==="employee"&&(n==null?void 0:n(P)),children:x.map((ee,re)=>{let oe=P[ee.field];typeof oe=="number"&&(oe=ee.field==="lembur_jam"?t$(oe):aF(oe));const ue=J(j,re);return k.jsx("td",{className:`${ee.className} ${ue?"cell-selected":""}`,style:{left:ee.left,width:ee.w,minWidth:ee.w},onMouseDown:se=>{se.preventDefault(),O(se,j,re,P.id)},onMouseOver:()=>V(j,re),children:oe??"-"},re)})},P.id)})}),g&&k.jsx("tfoot",{children:k.jsx("tr",{className:"grand-total-row",children:x.map((P,j)=>{let X=g[P.field];return P.field==="nama"&&(X="GRAND TOTAL"),P.field==="no"&&(X=""),typeof X=="number"&&(X=aF(X)),k.jsx("td",{className:P.className,style:{left:P.left,width:P.w},children:X??"-"},j)})})})]}),k.jsx(Qz,{stats:A}),D&&k.jsx(e$,{x:D.x,y:D.y,options:D.options,onClose:()=>F(null)})]})}const s$=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],r$=["Januari","Februari","Maret","April","Mei","Juni","Juli","Agustus","September","Oktober","November","Desember"];function n$({month:t,year:e,onChange:i}){const s=_e.useMemo(()=>{const f=[],m=new Date,g=m.getMonth()+1,y=m.getFullYear();for(let v=0;v<5;v++){let C=g-v,b=y;for(;C<1;)C+=12,b-=1;f.push({month:C,year:b})}return f},[]),r=_e.useMemo(()=>{if(!s.some(m=>m.month===t&&m.year===e)&&t&&e){const m=[];for(let g=0;g<5;g++){let y=t-g,v=e;for(;y<1;)y+=12,v-=1;m.push({month:y,year:v})}return m}return null},[t,e,s]),n=r||s,o=(f,m)=>{i(f,m)},a=()=>{let f=t,m=e-1;i(f,m)},l=()=>{const f=new Date,m=f.getMonth()+1,g=f.getFullYear();let y=e+1;(y>g||y===g&&t>m)&&(y=g),i(t,y)},c=()=>{const f=new Date;i(f.getMonth()+1,f.getFullYear())},u=(f,m)=>{const g=new Date;return f===g.getMonth()+1&&m===g.getFullYear()},d=(f,m)=>f===t&&m===e,h=new Date,p=e<h.getFullYear()||e===h.getFullYear()&&t<h.getMonth()+1;return k.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"12px",padding:"16px",background:"linear-gradient(135deg, #f8fafc 0%, #e2e8f0 100%)",borderRadius:"12px",border:"1px solid #cbd5e1"},children:[k.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",marginBottom:"4px"},children:[k.jsxs("button",{onClick:a,style:{background:"#1a365d",color:"white",border:"none",borderRadius:"6px",padding:"6px 12px",cursor:"pointer",fontWeight:"600",fontSize:"14px",display:"flex",alignItems:"center",gap:"4px"},children:[" ",e-1]}),k.jsxs("div",{style:{fontSize:"18px",fontWeight:"700",color:"#1a365d",display:"flex",alignItems:"center",gap:"8px"},children:[" ",e,r&&k.jsx("button",{onClick:c,style:{background:"#10b981",color:"white",border:"none",borderRadius:"4px",padding:"2px 8px",cursor:"pointer",fontSize:"11px"},title:"Kembali ke bulan sekarang",children:"Sekarang"})]}),k.jsxs("button",{onClick:l,disabled:!p,style:{background:p?"#1a365d":"#94a3b8",color:"white",border:"none",borderRadius:"6px",padding:"6px 12px",cursor:p?"pointer":"not-allowed",fontWeight:"600",fontSize:"14px",display:"flex",alignItems:"center",gap:"4px"},children:[e+1," "]})]}),k.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(5, 1fr)",gap:"8px"},children:n.map(({month:f,year:m})=>{const g=d(f,m),y=u(f,m);return k.jsxs("button",{onClick:()=>o(f,m),style:{display:"flex",flexDirection:"column",alignItems:"center",padding:"10px 8px",borderRadius:"8px",border:g?"2px solid #1a365d":y?"2px solid #10b981":"1px solid #e2e8f0",background:g?"#1a365d":y?"#ecfdf5":"white",color:g?"white":"#1e293b",cursor:"pointer",transition:"all 0.2s ease",boxShadow:g?"0 4px 12px rgba(26, 54, 93, 0.3)":"0 1px 3px rgba(0,0,0,0.1)"},children:[k.jsx("span",{style:{fontSize:"15px",fontWeight:"700"},children:s$[f-1]}),k.jsx("span",{style:{fontSize:"11px",opacity:.8,marginTop:"2px"},children:m}),y&&!g&&k.jsx("span",{style:{fontSize:"9px",background:"#10b981",color:"white",padding:"1px 4px",borderRadius:"3px",marginTop:"3px"},children:"Now"})]},`${m}-${f}`)})}),k.jsxs("div",{style:{textAlign:"center",padding:"8px",background:"#1a365d",color:"white",borderRadius:"6px",fontSize:"14px",fontWeight:"600"},children:["Periode: ",r$[t-1]," ",e]})]})}function o$({division:t,divisions:e,onDivisionChange:i,month:s,year:r,gangCode:n,gangs:o=[],onMonthYearChange:a,onGangChange:l,onBack:c,disableControls:u=!1}){const d=()=>!s||!r?"":`${String(r).padStart(4,"0")}-${String(s).padStart(2,"0")}`,h=p=>{try{const f=p.target.value;if(!f)return;const[m,g]=f.split("-"),y=parseInt(g,10),v=parseInt(m,10);!isNaN(y)&&!isNaN(v)&&a(y,v)}catch(f){console.error("Date parse error:",f)}};return k.jsxs("div",{className:"report-toolbar",style:{display:"flex",gap:"20px",alignItems:"center",width:"100%",padding:"8px 0"},children:[c&&k.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"4px"},children:[k.jsx("label",{style:{fontSize:"11px",fontWeight:"600",color:"var(--text-secondary)",textTransform:"uppercase",visibility:"hidden"},children:"Aksi"}),k.jsxs("button",{className:"btn btn-secondary",onClick:c,disabled:u,style:{borderColor:"var(--neutral-300)",display:"flex",alignItems:"center",gap:"6px",height:"36px",whiteSpace:"nowrap"},children:[k.jsx("span",{children:""})," Back"]})]}),k.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"4px"},children:[k.jsx("label",{style:{fontSize:"11px",fontWeight:"600",color:"var(--text-secondary)",textTransform:"uppercase"},children:"Periode"}),k.jsx("input",{type:"month",className:"input-field",style:{height:"36px",minWidth:"160px"},value:d(),onChange:h,disabled:u})]}),e&&e.length>0&&k.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"4px"},children:[k.jsx("label",{style:{fontSize:"11px",fontWeight:"600",color:"var(--text-secondary)",textTransform:"uppercase"},children:"Divisi"}),k.jsx("select",{className:"input-field",style:{height:"36px",minWidth:"140px"},value:t||"",onChange:p=>i&&i(p.target.value),disabled:u,children:e.map(p=>k.jsx("option",{value:p,children:p},p))})]}),k.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"4px"},children:[k.jsx("label",{style:{fontSize:"11px",fontWeight:"600",color:"var(--text-secondary)",textTransform:"uppercase"},children:"Gang / Kemandoran"}),k.jsxs("select",{className:"input-field",style:{height:"36px",minWidth:"280px",maxWidth:"400px"},value:n||"",onChange:p=>l(p.target.value),disabled:u,children:[String(n).toUpperCase()==="ALL"&&k.jsx("option",{value:"ALL",children:"SEMUA GANG"}),o&&o.length>0?o.map(p=>k.jsxs("option",{value:p.gang_code,children:[p.gang_code,p.description?` - ${p.description}`:""]},p.gang_code)):k.jsx("option",{value:n,children:n})]})]})]})}const a$=()=>"",Og=a$();async function l$(t,{division:e,month:i,year:s}){const r=new URLSearchParams;e&&r.append("division",e),i&&r.append("month",i.toString()),s&&r.append("year",s.toString());const n=`${Og}/payroll/summary/division?${r.toString()}`;return(await Dt.get(n,{headers:{Authorization:`Bearer ${t}`,"Content-Type":"application/json"}})).data}async function ex(t,e=null){const i=e?`?division=${e}`:"",s=`${Og}/payroll/summary/periods${i}`;return(await Dt.get(s,{headers:{Authorization:`Bearer ${t}`,"Content-Type":"application/json"}})).data}async function c$(t){const e=`${Og}/payroll/summary/divisions`;return(await Dt.get(e,{headers:{Authorization:`Bearer ${t}`,"Content-Type":"application/json"}})).data}async function m3(t,{month:e,year:i}){const s=`${Og}/payroll/summary/all-divisions?month=${e}&year=${i}`;return(await Dt.get(s,{headers:{Authorization:`Bearer ${t}`,"Content-Type":"application/json"}})).data}async function v3(t,{month:e,year:i}){const s=`${Og}/payroll/summary/comparison?month=${e}&year=${i}`;return(await Dt.get(s,{headers:{Authorization:`Bearer ${t}`,"Content-Type":"application/json"}})).data}async function u$(t,{month:e,year:i}){const s=`${Og}/payroll/summary/impact-report?month=${e}&year=${i}`;return(await Dt.get(s,{headers:{Authorization:`Bearer ${t}`,"Content-Type":"application/json"}})).data}function d$({onBack:t,initialDivision:e,initialMonth:i,initialYear:s}){const{token:r,user:n}=wc(),[o,a]=_e.useState(e||""),[l,c]=_e.useState(i||11),[u,d]=_e.useState(s||new Date().getFullYear()),[h,p]=_e.useState([]),[f,m]=_e.useState([]),[g,y]=_e.useState([]),[v,C]=_e.useState(!1),[b,T]=_e.useState("");_e.useEffect(()=>{async function w(){if(r)try{const S=await c$(r);p(S.divisions||[])}catch(S){console.error("Failed to load divisions:",S)}}w()},[r]),_e.useEffect(()=>{async function w(){if(r)try{const S=await ex(r,o||null);m(S.periods||[])}catch(S){console.error("Failed to load periods:",S)}}w()},[r,o]);const A=_e.useCallback(async()=>{if(r){C(!0),T("");try{const w=await l$(r,{division:o||void 0,month:l||void 0,year:u||void 0});w.success?y(w.data||[]):T("Failed to fetch summary data")}catch(w){console.error("Error fetching summary:",w),T(w.message||"Failed to fetch summary data")}finally{C(!1)}}},[r,o,l,u]);_e.useEffect(()=>{A()},[A]);const I=w=>{if(w==null||w==="")return"-";const S=Number(w);return isNaN(S)?"-":new Intl.NumberFormat("id-ID",{minimumFractionDigits:0,maximumFractionDigits:0}).format(Math.round(S))},D=w=>["","Januari","Februari","Maret","April","Mei","Juni","Juli","Agustus","September","Oktober","November","Desember"][w]||"",F=`${D(l)} ${u}`,B=new Date().toLocaleDateString("id-ID",{day:"numeric",month:"long",year:"numeric"}),U=_e.useMemo(()=>{var x;if(g.length===0)return[];const w=((x=g[0])==null?void 0:x._premi_headers)||[],S=["prun","pruning","prunning","insentif_panen","insentif panen","tiket","koreksi","panen"];return w.filter(E=>{const M=E.toLowerCase();return!S.some(O=>M.includes(O))})},[g]),H=_e.useMemo(()=>U.map(w=>`premi_${w.toLowerCase().replace(/ /g,"_").replace(/-/g,"_")}`),[U]),R=_e.useMemo(()=>{if(g.length===0)return null;const w={total_employees:0,total_hk:0,total_lembur:0,total_pph21:0,total_spsi:0,total_upah_bersih:0,total_premi:0,total_insentif_panen:0,total_prunning:0,total_koreksi:0};return H.forEach(S=>w[S]=0),g.forEach(S=>{w.total_employees+=Number(S.total_employees)||0,w.total_hk+=Number(S.total_hk)||0,w.total_lembur+=Number(S.total_lembur)||0,w.total_pph21+=Number(S.total_pph21)||0,w.total_spsi+=Number(S.total_spsi)||0,w.total_upah_bersih+=Number(S.total_upah_bersih)||0;let x=0;H.forEach(E=>{const M=Number(S[E])||0;w[E]+=M,x+=M}),w.total_premi+=x,w.total_insentif_panen+=Number(S.premi_insentif_panen)||0,w.total_prunning+=Number(S.premi_prunning||S.premi_pruning)||0,w.total_koreksi+=Number(S.total_koreksi)||0}),w},[g,H]),L=()=>window.print(),_=()=>{let S=`Gang,Workers,HK Checkroll,${U.join(",")},Total Premi,Lembur,PPH 21,SPSI,Total Upah Bersih
`;if(g.forEach(M=>{const O=H.map(V=>M[V]||0).join(",");S+=`"${M.gang_description||M.gang_code}",${M.total_employees||0},${M.total_hk||0},${O},${M.total_premi||0},${M.total_lembur||0},${M.total_pph21||0},${M.total_spsi||0},${M.total_upah_bersih||0}
`}),R){const M=H.map(O=>R[O]||0).join(",");S+=`"GRAND TOTAL",${R.total_employees},${R.total_hk},${M},${R.total_premi},${R.total_lembur},${R.total_pph21},${R.total_spsi},${R.total_upah_bersih}
`}const x=new Blob([S],{type:"text/csv;charset=utf-8;"}),E=document.createElement("a");E.href=URL.createObjectURL(x),E.download=`Summary_Detail_${o||"ALL"}_${l}_${u}.csv`,E.click()};return k.jsxs("div",{className:"wsp-container",children:[k.jsxs("div",{className:"wsp-action-bar no-print",children:[k.jsxs("div",{className:"left-section",children:[t&&k.jsx("button",{onClick:t,className:"wsp-btn",title:"Kembali",children:"Back"}),k.jsxs("div",{className:"wsp-filter-group",style:{display:"flex",gap:"0.5rem"},children:[k.jsxs("select",{value:o,onChange:w=>a(w.target.value),className:"wsp-select",children:[k.jsx("option",{value:"",children:"All Divisions"}),h.map(w=>k.jsx("option",{value:w,children:w},w))]}),k.jsx("select",{value:l,onChange:w=>c(parseInt(w.target.value)),className:"wsp-select",children:[...Array(12)].map((w,S)=>k.jsx("option",{value:S+1,children:D(S+1)},S+1))}),k.jsx("select",{value:u,onChange:w=>d(parseInt(w.target.value)),className:"wsp-select",children:[2023,2024,2025,2026].map(w=>k.jsx("option",{value:w,children:w},w))})]})]}),k.jsxs("div",{className:"right-section",children:[k.jsx("button",{onClick:A,className:"wsp-btn",disabled:v,children:"Refresh"}),k.jsx("button",{onClick:L,className:"wsp-btn",children:"Print"}),k.jsx("button",{onClick:_,className:"wsp-btn wsp-btn-primary",disabled:v||g.length===0,children:"Export CSV"})]})]}),v?k.jsxs("div",{className:"wsp-loading",children:[k.jsx("div",{className:"wsp-spinner"}),"Loading..."]}):b?k.jsxs("div",{className:"wsp-error",children:["! ",b]}):k.jsxs("div",{className:"wsp-document",children:[k.jsxs("div",{className:"wsp-letterhead",children:[k.jsx("img",{src:"/images/rebinmas.webp",alt:"PT REBINMAS JAYA",className:"wsp-logo"}),k.jsx("h1",{className:"wsp-company-name",children:"PT. REBINMAS JAYA"}),k.jsx("div",{className:"wsp-report-title",children:"SUMMARY REPORT DETAIL"}),k.jsxs("div",{className:"wsp-report-period",children:["Division: ",k.jsx("strong",{style:{color:"#0f172a"},children:o||"ALL"})," | Period: ",k.jsx("strong",{style:{color:"#0f172a"},children:F})]})]}),R&&k.jsxs("div",{className:"wsp-kpi-grid",children:[k.jsxs("div",{className:"wsp-kpi-card",children:[k.jsx("div",{className:"wsp-kpi-label",children:"TOTAL WORKERS"}),k.jsx("div",{className:"wsp-kpi-value",children:I(R.total_employees)})]}),k.jsxs("div",{className:"wsp-kpi-card",children:[k.jsx("div",{className:"wsp-kpi-label",children:"TOTAL HK CHEKROLL"}),k.jsx("div",{className:"wsp-kpi-value",children:I(R.total_hk)})]}),k.jsxs("div",{className:"wsp-kpi-card secondary",children:[k.jsx("div",{className:"wsp-kpi-label",children:"TOTAL PREMI"}),k.jsxs("div",{className:"wsp-kpi-value",children:["Rp ",I(R.total_premi)]})]}),k.jsxs("div",{className:"wsp-kpi-card highlight",children:[k.jsx("div",{className:"wsp-kpi-label",children:"TOTAL UPAH BERSIH"}),k.jsxs("div",{className:"wsp-kpi-value",children:["Rp ",I(R.total_upah_bersih)]})]})]}),k.jsx("div",{className:"wsp-table-wrapper",children:k.jsxs("table",{className:"wsp-table",children:[k.jsxs("thead",{children:[k.jsxs("tr",{className:"wsp-header-master",children:[k.jsx("th",{rowSpan:"2",style:{minWidth:"200px"},children:"ESTATE / GANG"}),k.jsx("th",{colSpan:"2",children:"MANPOWER"}),U.length>0&&k.jsx("th",{colSpan:U.length+1,className:"print-hide-detail",children:"PREMI INCOME"}),k.jsx("th",{rowSpan:"2",style:{width:"120px"},className:"print-show-only",children:"TOTAL PREMI"}),k.jsx("th",{rowSpan:"2",style:{width:"120px"},children:"LEMBUR"}),k.jsx("th",{colSpan:"2",children:"DEDUCTIONS"}),k.jsx("th",{rowSpan:"2",style:{width:"140px"},children:"TOTAL UPAH BERSIH"}),k.jsx("th",{colSpan:"3",style:{background:"#475569"},className:"print-hide",children:"INFORMASI TAMBAHAN"})]}),k.jsxs("tr",{className:"wsp-header-sub",children:[k.jsx("th",{style:{width:"80px"},children:"WORKERS"}),k.jsx("th",{style:{width:"80px"},children:"HK"}),U.map((w,S)=>k.jsx("th",{style:{minWidth:"100px"},className:"print-hide-detail",children:w},S)),U.length>0&&k.jsx("th",{style:{width:"120px",background:"#334155"},className:"print-hide-detail",children:"TOTAL PREMI"}),k.jsx("th",{style:{width:"100px"},children:"PPH 21"}),k.jsx("th",{style:{width:"100px"},children:"SPSI"}),k.jsx("th",{style:{width:"110px",background:"#475569"},className:"print-hide",children:"INSENTIF PANEN"}),k.jsx("th",{style:{width:"100px",background:"#475569"},className:"print-hide",children:"PRUNING"}),k.jsx("th",{style:{width:"100px",background:"#475569"},className:"print-hide",children:"KOREKSI"})]})]}),k.jsx("tbody",{children:g.length===0?k.jsx("tr",{children:k.jsx("td",{colSpan:"15",className:"text-center",style:{padding:"3rem"},children:"No Data Available"})}):g.map((w,S)=>k.jsxs("tr",{children:[k.jsx("td",{className:"text-left",children:w.gang_description||w.gang_code}),k.jsx("td",{className:`text-right ${!Number(w.total_employees)&&"val-zero"}`,children:I(w.total_employees)}),k.jsx("td",{className:`text-right ${!Number(w.total_hk)&&"val-zero"}`,children:I(w.total_hk)}),H.map(x=>k.jsx("td",{className:`text-right print-hide-detail ${!Number(w[x])&&"val-zero"}`,children:I(w[x])},x)),H.length>0&&(()=>{const x=H.reduce((E,M)=>E+(Number(w[M])||0),0);return k.jsx("td",{className:`text-right ${!x&&"val-zero"}`,style:{fontWeight:600},children:I(x)})})(),k.jsx("td",{className:`text-right ${!Number(w.total_lembur)&&"val-zero"}`,children:I(w.total_lembur)}),k.jsx("td",{className:`text-right ${!Number(w.total_pph21)&&"val-zero"}`,children:I(w.total_pph21)}),k.jsx("td",{className:`text-right ${!Number(w.total_spsi)&&"val-zero"}`,children:I(w.total_spsi)}),k.jsx("td",{className:`text-right ${Number(w.total_upah_bersih)?"val-positive":"val-zero"}`,style:{fontWeight:600},children:I(w.total_upah_bersih)}),k.jsx("td",{className:`text-right print-hide ${!Number(w.premi_insentif_panen)&&"val-zero"}`,style:{background:"rgba(71, 85, 105, 0.1)"},children:I(w.premi_insentif_panen)}),k.jsx("td",{className:`text-right print-hide ${!Number(w.premi_prunning||w.premi_pruning)&&"val-zero"}`,style:{background:"rgba(71, 85, 105, 0.1)"},children:I(w.premi_prunning||w.premi_pruning)}),k.jsx("td",{className:`text-right print-hide ${!Number(w.total_koreksi)&&"val-zero"}`,style:{background:"rgba(71, 85, 105, 0.1)"},children:I(w.total_koreksi)})]},S))}),R&&k.jsx("tfoot",{children:k.jsxs("tr",{className:"wsp-grand-total",children:[k.jsx("td",{children:"GRAND TOTAL"}),k.jsx("td",{className:"text-right",children:I(R.total_employees)}),k.jsx("td",{className:"text-right",children:I(R.total_hk)}),H.map(w=>k.jsx("td",{className:"text-right print-hide-detail",children:I(R[w])},w)),H.length>0&&k.jsx("td",{className:"text-right",children:I(R.total_premi)}),k.jsx("td",{className:"text-right",children:I(R.total_lembur)}),k.jsx("td",{className:"text-right",children:I(R.total_pph21)}),k.jsx("td",{className:"text-right",children:I(R.total_spsi)}),k.jsx("td",{className:"text-right",style:{color:"#4ade80"},children:I(R.total_upah_bersih)}),k.jsx("td",{className:"text-right print-hide",children:I(R.total_insentif_panen)}),k.jsx("td",{className:"text-right print-hide",children:I(R.total_prunning)}),k.jsx("td",{className:"text-right print-hide",children:I(R.total_koreksi)})]})})]})}),k.jsxs("div",{className:"wsp-signature-section",children:[k.jsxs("div",{className:"wsp-signature-block",children:[k.jsx("div",{className:"wsp-signature-title",children:"DIBUAT OLEH :"}),k.jsx("div",{className:"wsp-signature-name",children:"( ........................................ )"})]}),k.jsxs("div",{className:"wsp-signature-block",children:[k.jsx("div",{className:"wsp-signature-title",children:"DIPERIKSA OLEH :"}),k.jsx("div",{className:"wsp-signature-name",children:"( ........................................ )"})]}),k.jsxs("div",{className:"wsp-signature-block",children:[k.jsx("div",{className:"wsp-signature-title",children:"DISETUJUI OLEH :"}),k.jsx("div",{className:"wsp-signature-name",children:"( ........................................ )"})]})]}),k.jsxs("footer",{className:"wsp-footer",style:{marginTop:"4rem"},children:[k.jsxs("div",{className:"wsp-footer-left",children:[k.jsxs("div",{children:["Dicetak: ",B]}),k.jsxs("div",{style:{fontSize:"0.75rem",color:"#94a3b8"},children:["User: ",n==null?void 0:n.username]})]}),k.jsx("div",{className:"wsp-footer-right",children:"PT. REBINMAS JAYA"})]})]})]})}function y3({onBack:t}){const{token:e,user:i}=wc(),[s,r]=_e.useState(new Date().getMonth()+1),[n,o]=_e.useState(new Date().getFullYear()),[a,l]=_e.useState(null),[c,u]=_e.useState([]),[d,h]=_e.useState(!1),[p,f]=_e.useState("");_e.useEffect(()=>{async function w(){if(e)try{const S=await ex(e);u(S.periods||[])}catch(S){console.error("Failed to load periods:",S)}}w()},[e]);const m=_e.useCallback(async()=>{if(e){h(!0),f("");try{const w=await u$(e,{month:s,year:n});w.success?l(w):f("Failed to fetch impact report data")}catch(w){console.error("Error fetching impact report:",w),f(w.message||"Failed to fetch impact report data")}finally{h(!1)}}},[e,s,n]);_e.useEffect(()=>{m()},[m]);const g=(w,S=0)=>{if(w==null||w==="")return"-";const x=Number(w);return isNaN(x)?"-":new Intl.NumberFormat("id-ID",{minimumFractionDigits:S,maximumFractionDigits:S}).format(x)},y=w=>{if(w==null||w==="")return"-";const S=Number(w);return isNaN(S)?"-":S.toFixed(2)},v=w=>["","Januari","Februari","Maret","April","Mei","Juni","Juli","Agustus","September","Oktober","November","Desember"][w]||"",C=w=>["","Jan","Feb","Mar","Apr","Mei","Jun","Jul","Agu","Sep","Okt","Nov","Des"][w]||"",b=`MONTH OF ${v(s).toUpperCase()} ${n}`,T=s===1?12:s-1,A=s===1?n-1:n,I=new Date().toLocaleDateString("id-ID",{day:"numeric",month:"long",year:"numeric"}),D=[{value:1,label:"Januari"},{value:2,label:"Februari"},{value:3,label:"Maret"},{value:4,label:"April"},{value:5,label:"Mei"},{value:6,label:"Juni"},{value:7,label:"Juli"},{value:8,label:"Agustus"},{value:9,label:"September"},{value:10,label:"Oktober"},{value:11,label:"November"},{value:12,label:"Desember"}],F=new Date().getFullYear(),B=Array.from({length:5},(w,S)=>F-S),U=()=>{window.print()},H=(w,S=!1)=>w===0?"text-neutral":S?w>0?"text-diff-neg":"text-diff-pos":w>0?"text-diff-pos":"text-diff-neg",R=()=>{if(!(a!=null&&a.main_table))return null;const w=a.main_table,S=a.main_table_totals,x=C(s),E=C(T);return k.jsx("div",{className:"wsp-table-wrapper",style:{marginBottom:"2rem"},children:k.jsxs("table",{className:"wsp-table",children:[k.jsxs("thead",{children:[k.jsxs("tr",{className:"wsp-header-master",children:[k.jsx("th",{rowSpan:"2",className:"th-sticky-col",style:{minWidth:"120px"},children:"Estate"}),k.jsxs("th",{rowSpan:"2",style:{minWidth:"70px"},children:["Luas Ha",k.jsx("br",{}),"Productive"]}),k.jsx("th",{colSpan:"3",className:"th-group-manpower",children:"Jumlah Karyawan"}),k.jsx("th",{colSpan:"3",className:"th-group-income",children:"Nilai Gaji (All)"}),k.jsx("th",{colSpan:"3",className:"th-group-manpower",children:"Tonase TBS"}),k.jsxs("th",{rowSpan:"2",className:"th-group-compare",children:["% Gaji",k.jsx("br",{}),"Naik/Turun"]})]}),k.jsxs("tr",{className:"wsp-header-sub",children:[k.jsxs("th",{className:"th-group-manpower",children:[x,"-",String(n).slice(-2)]}),k.jsxs("th",{className:"th-group-manpower",children:[E,"-",String(A).slice(-2)]}),k.jsx("th",{className:"th-group-manpower border-right-section",children:"Diff"}),k.jsxs("th",{className:"th-group-income",children:[x,"-",String(n).slice(-2)]}),k.jsxs("th",{className:"th-group-income",children:[E,"-",String(A).slice(-2)]}),k.jsx("th",{className:"th-group-income border-right-section",children:"Diff"}),k.jsxs("th",{className:"th-group-manpower",children:[x,"-",String(n).slice(-2)]}),k.jsxs("th",{className:"th-group-manpower",children:[E,"-",String(A).slice(-2)]}),k.jsx("th",{className:"th-group-manpower border-right-section",children:"Diff"})]})]}),k.jsx("tbody",{children:w.map((M,O)=>k.jsxs("tr",{children:[k.jsx("td",{className:"text-left sticky-col",children:k.jsx("div",{className:"div-code",children:M.estate})}),k.jsx("td",{className:"text-right border-right-group",children:g(M.luas_ha,2)}),k.jsx("td",{className:"text-right",children:g(M.workers_curr)}),k.jsx("td",{className:"text-right",children:g(M.workers_prev)}),k.jsx("td",{className:`text-right border-right-section ${H(M.workers_diff)}`,children:g(M.workers_diff)}),k.jsx("td",{className:"text-right",children:g(M.gaji_curr)}),k.jsx("td",{className:"text-right",children:g(M.gaji_prev)}),k.jsx("td",{className:`text-right border-right-section ${H(M.gaji_diff,!0)}`,children:g(M.gaji_diff)}),k.jsx("td",{className:"text-right",children:g(M.tbs_curr,2)}),k.jsx("td",{className:"text-right",children:g(M.tbs_prev,2)}),k.jsx("td",{className:`text-right border-right-section ${H(M.tbs_diff)}`,children:g(M.tbs_diff,2)}),k.jsx("td",{className:`text-right font-bold ${H(M.pct_gaji_naik_turun,!0)}`,children:y(M.pct_gaji_naik_turun)})]},O))}),k.jsx("tfoot",{children:k.jsxs("tr",{className:"wsp-grand-total",children:[k.jsx("td",{className:"text-left sticky-col",children:S.estate}),k.jsx("td",{className:"text-right",children:g(S.luas_ha,2)}),k.jsx("td",{className:"text-right",children:g(S.workers_curr)}),k.jsx("td",{className:"text-right",children:g(S.workers_prev)}),k.jsx("td",{className:`text-right border-right-section ${H(S.workers_diff)}`,children:g(S.workers_diff)}),k.jsx("td",{className:"text-right",children:g(S.gaji_curr)}),k.jsx("td",{className:"text-right",children:g(S.gaji_prev)}),k.jsx("td",{className:`text-right border-right-section ${H(S.gaji_diff,!0)}`,children:g(S.gaji_diff)}),k.jsx("td",{className:"text-right",children:g(S.tbs_curr,2)}),k.jsx("td",{className:"text-right",children:g(S.tbs_prev,2)}),k.jsx("td",{className:`text-right border-right-section ${H(S.tbs_diff)}`,children:g(S.tbs_diff,2)}),k.jsx("td",{className:`text-right ${H(S.pct_gaji_naik_turun,!0)}`,children:y(S.pct_gaji_naik_turun)})]})})]})})},L=()=>{if(!(a!=null&&a.pruning_table))return null;const w=a.pruning_table,S=a.pruning_totals;return k.jsxs("div",{className:"wsp-table-wrapper",style:{flex:1},children:[k.jsx("div",{style:{padding:"0.5rem 1rem",background:"#f8fafc",borderBottom:"1px solid #cbd5e1",fontWeight:700,color:"#334155"},children:"PRUNING"}),k.jsxs("table",{className:"wsp-table",children:[k.jsxs("thead",{children:[k.jsxs("tr",{className:"wsp-header-master",children:[k.jsx("th",{rowSpan:"2",className:"th-sticky-col",children:"Estate"}),k.jsx("th",{colSpan:"2",className:"th-group-income",children:"This Month"})]}),k.jsxs("tr",{className:"wsp-header-sub",children:[k.jsx("th",{className:"th-group-income",children:"Premi"}),k.jsx("th",{className:"th-group-income",children:"Total"})]})]}),k.jsx("tbody",{children:w.map((x,E)=>k.jsxs("tr",{children:[k.jsx("td",{className:"text-left sticky-col",children:k.jsx("div",{className:"div-code",children:x.division_code})}),k.jsx("td",{className:"text-right",children:g(x.premi_this_month)}),k.jsx("td",{className:"text-right",children:g(x.total)})]},E))}),k.jsx("tfoot",{children:k.jsxs("tr",{className:"wsp-grand-total",children:[k.jsx("td",{className:"text-left sticky-col",children:S.estate}),k.jsx("td",{className:"text-right",children:g(S.premi_this_month)}),k.jsx("td",{className:"text-right",children:g(S.total)})]})})]})]})},_=()=>{if(!(a!=null&&a.hk_analysis)||!(a!=null&&a.summary_analysis))return null;const w=a.hk_analysis,S=a.summary_analysis,x=v(s),E=v(T);return k.jsxs("div",{className:"wsp-table-wrapper",style:{flex:1},children:[k.jsx("div",{style:{padding:"0.5rem 1rem",background:"#f8fafc",borderBottom:"1px solid #cbd5e1",fontWeight:700,color:"#334155"},children:"ANALISIS HK & SUMMARY"}),k.jsxs("table",{className:"wsp-table",style:{marginBottom:"1rem",borderBottom:"1px solid #cbd5e1"},children:[k.jsx("thead",{children:k.jsxs("tr",{className:"wsp-header-sub",children:[k.jsx("th",{style:{textAlign:"left",paddingLeft:"1rem"},children:"Description"}),k.jsx("th",{children:"HK"}),k.jsxs("th",{children:["Gaji (HK  ",g(w.upah_dasar),")"]}),k.jsx("th",{children:"Insentif Panen"})]})}),k.jsxs("tbody",{children:[k.jsxs("tr",{children:[k.jsxs("td",{className:"text-left",style:{paddingLeft:"1rem"},children:["HK ",E]}),k.jsx("td",{className:"text-right",children:g(w.hk_prev)}),k.jsx("td",{className:"text-right",children:g(w.gaji_hk_prev)}),k.jsx("td",{className:"text-right",children:g(w.insentif_panen_prev)})]}),k.jsxs("tr",{children:[k.jsxs("td",{className:"text-left",style:{paddingLeft:"1rem"},children:["HK ",x]}),k.jsx("td",{className:"text-right",children:g(w.hk_curr)}),k.jsx("td",{className:"text-right",children:g(w.gaji_hk_curr)}),k.jsx("td",{className:"text-right",children:g(w.insentif_panen_curr)})]}),k.jsxs("tr",{style:{background:"#fff7ed"},children:[k.jsx("td",{className:"text-left font-bold",style:{paddingLeft:"1rem"},children:"Diff"}),k.jsxs("td",{className:`text-right font-bold ${H(w.hk_diff)}`,children:["(",g(Math.abs(w.hk_diff)),")"]}),k.jsxs("td",{className:`text-right font-bold ${H(w.gaji_hk_diff,!0)}`,children:["(",g(Math.abs(w.gaji_hk_diff)),")"]}),k.jsx("td",{className:`text-right font-bold ${H(w.insentif_panen_diff)}`,children:g(w.insentif_panen_diff)})]})]})]}),k.jsx("table",{className:"wsp-table",children:k.jsxs("tbody",{children:[k.jsxs("tr",{children:[k.jsxs("td",{className:"text-left",children:[S.turun_hk_label," HK (",x,"'",String(n).slice(-2)," - ",E,"'",String(A).slice(-2),")"]}),k.jsx("td",{className:`text-right ${H(S.turun_hk_value,!0)}`,children:S.turun_hk_value<0?`(${g(Math.abs(S.turun_hk_value))})`:g(S.turun_hk_value)})]}),k.jsxs("tr",{children:[k.jsxs("td",{className:"text-left",children:["Premi Estate ",k.jsx("strong",{children:S.premi_estate_label})," dari bulan lalu"]}),k.jsx("td",{className:`text-right ${H(S.premi_estate_diff,!0)}`,children:S.premi_estate_diff<0?`(${g(Math.abs(S.premi_estate_diff))})`:g(S.premi_estate_diff)})]}),k.jsxs("tr",{children:[k.jsxs("td",{className:"text-left",children:["OT Estate + Mill ",k.jsx("strong",{children:S.ot_label})," dari bulan lalu"]}),k.jsx("td",{className:`text-right ${H(S.ot_estate_mill_diff,!0)}`,children:S.ot_estate_mill_diff<0?`(${g(Math.abs(S.ot_estate_mill_diff))})`:g(S.ot_estate_mill_diff)})]}),k.jsxs("tr",{children:[k.jsxs("td",{className:"text-left",children:["Progressive Pruning ",k.jsx("strong",{children:S.prunning_label})," dari bulan lalu"]}),k.jsx("td",{className:`text-right ${H(S.progressive_prunning_diff,!0)}`,children:S.progressive_prunning_diff<0?`(${g(Math.abs(S.progressive_prunning_diff))})`:g(S.progressive_prunning_diff)})]}),k.jsxs("tr",{children:[k.jsxs("td",{className:"text-left",children:["Insentif Panen ",k.jsx("strong",{children:S.insentif_label})," dari bulan lalu"]}),k.jsx("td",{className:`text-right ${H(S.insentif_panen_diff)}`,children:g(S.insentif_panen_diff)})]}),k.jsxs("tr",{style:{background:"#0f172a",color:"#fff"},children:[k.jsx("td",{className:"text-center font-bold",children:"TOTAL"}),k.jsx("td",{className:`text-right font-bold ${S.total_impact>0?"text-diff-neg":"text-diff-pos"}`,style:{color:"#fff"},children:g(S.total_impact)})]}),k.jsxs("tr",{style:{borderTop:"2px solid #333"},children:[k.jsxs("td",{className:"text-left",children:["Tonase TBS ",k.jsx("strong",{children:S.tbs_label})," dari bulan lalu"]}),k.jsxs("td",{className:`text-right font-bold ${H(S.tonase_tbs_diff)}`,children:[g(S.tonase_tbs_diff,2)," Ton"]})]})]})})]})};return k.jsxs("div",{className:"wsp-container",children:[k.jsxs("div",{className:"wsp-action-bar no-print",children:[k.jsxs("div",{className:"left-section",children:[t&&k.jsx("button",{onClick:t,className:"wsp-btn",title:"Kembali ke Menu Utama",children:"Kembali"}),k.jsxs("div",{className:"wsp-filter-group",style:{display:"flex",gap:"0.5rem"},children:[k.jsx("select",{value:s,onChange:w=>r(parseInt(w.target.value)),className:"wsp-select",children:D.map(w=>k.jsx("option",{value:w.value,children:w.label},w.value))}),k.jsx("select",{value:n,onChange:w=>o(parseInt(w.target.value)),className:"wsp-select",style:{minWidth:"90px"},children:B.map(w=>k.jsx("option",{value:w,children:w},w))})]})]}),k.jsxs("div",{className:"right-section",children:[k.jsx("button",{onClick:m,className:"wsp-btn",disabled:d,title:"Refresh Data",children:"Refresh"}),k.jsx("button",{onClick:U,className:"wsp-btn",title:"Print this report",children:"Print"})]})]}),d?k.jsxs("div",{style:{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",padding:"4rem"},children:[k.jsx("div",{style:{width:"40px",height:"40px",border:"3px solid #cbd5e1",borderTop:"3px solid #0f172a",borderRadius:"50%",animation:"spin 1s linear infinite"}}),k.jsx("div",{style:{marginTop:"1rem",color:"#64748b"},children:"Memuat Impact Report..."})]}):p?k.jsxs("div",{style:{textAlign:"center",padding:"4rem",color:"#ef4444"},children:[k.jsx("div",{style:{fontSize:"2rem"},children:"!"}),k.jsx("div",{style:{fontWeight:700,margin:"1rem 0"},children:"Gagal Memuat Data"}),k.jsx("div",{children:p}),k.jsx("button",{onClick:m,className:"wsp-btn",style:{marginTop:"1rem"},children:"Coba Lagi"})]}):k.jsxs("div",{className:"wsp-document",children:[k.jsxs("div",{className:"wsp-letterhead",children:[k.jsx("img",{src:"/images/rebinmas.webp",alt:"PT REBINMAS JAYA",className:"wsp-logo"}),k.jsx("h1",{className:"wsp-company-name",children:"PT. REBINMAS JAYA"}),k.jsx("div",{className:"wsp-report-title",children:"IMPACT REPORT"}),k.jsx("div",{className:"wsp-report-period",children:b})]}),R(),k.jsxs("div",{className:"wsp-bottom-section",style:{display:"flex",gap:"2rem",flexWrap:"wrap"},children:[L(),_()]}),k.jsxs("footer",{className:"wsp-footer",style:{marginTop:"4rem"},children:[k.jsxs("div",{className:"wsp-footer-left",children:[k.jsxs("div",{children:["Dicetak: ",I]}),k.jsxs("div",{style:{fontSize:"0.75rem",color:"#94a3b8"},children:["User: ",i==null?void 0:i.username]})]}),k.jsx("div",{className:"wsp-footer-right",children:"PT. REBINMAS JAYA"})]})]})]})}function h$({onBack:t}){const{token:e,user:i}=wc(),[s,r]=_e.useState(new Date().getMonth()+1),[n,o]=_e.useState(new Date().getFullYear()),[a,l]=_e.useState([]),[c,u]=_e.useState([]),[d,h]=_e.useState(null),[p,f]=_e.useState(!1),[m,g]=_e.useState(!1),[y,v]=_e.useState(!1),[C,b]=_e.useState("");_e.useEffect(()=>{async function E(){if(e)try{const M=await ex(e);l(M.periods||[])}catch(M){console.error("Failed to load periods:",M)}}E()},[e]);const T=_e.useCallback(async()=>{if(e){v(!0),b("");try{if(p){const E=await v3(e,{month:s,year:n});E.success?h(E):b("Failed to fetch comparison data")}else{const E=await m3(e,{month:s,year:n});E.success?u(E.data||[]):b("Failed to fetch summary data")}}catch(E){console.error("Error fetching summary:",E),b(E.message||"Failed to fetch summary data")}finally{v(!1)}}},[e,s,n,p]);_e.useEffect(()=>{T()},[T]);const A=(E,M=0)=>{if(E==null||E==="")return"-";const O=Number(E);return isNaN(O)?"-":new Intl.NumberFormat("id-ID",{minimumFractionDigits:M,maximumFractionDigits:M}).format(O)},I=E=>["","Januari","Februari","Maret","April","Mei","Juni","Juli","Agustus","September","Oktober","November","Desember"][E]||"",D=(E,M,O="cost")=>{const V=(E||0)-(M||0);if(Math.abs(V)<.01)return null;const Y=V>0;let $=Y?O==="cost"?"trend-up":"trend-up-green":O==="cost"?"trend-down":"trend-down-red";return k.jsx("span",{className:`trend-indicator ${$}`,children:Y?"":""})},F=_e.useMemo(()=>c.filter(E=>{if(E.is_grand_total)return!1;const M=(E.description||"").toUpperCase(),O=(E.division_code||"").toUpperCase(),V=(E.company_name||"").toUpperCase();return!(M.startsWith("I ")||M.startsWith("ESTATE I")||M.includes("IMPIAN")||M.includes("IJL")||O==="IJL"||O.startsWith("I")||V.includes("IMPIAN"))}),[c]),B=_e.useMemo(()=>F.length===0?null:F.filter(M=>!M.is_subtotal).reduce((M,O)=>({total_employees:(M.total_employees||0)+(Number(O.total_employees)||0),total_hk:(M.total_hk||0)+(Number(O.total_hk)||0),total_pph21:(M.total_pph21||0)+(Number(O.total_pph21)||0),total_spsi:(M.total_spsi||0)+(Number(O.total_spsi)||0),total_premi:(M.total_premi||0)+(Number(O.total_premi)||0),total_lembur:(M.total_lembur||0)+(Number(O.total_lembur)||0),total_manual:(M.total_manual||0)+(Number(O.total_manual)||0),thumb_print:(M.thumb_print||0)+(Number(O.thumb_print)||0),selisih:(M.selisih||0)+(Number(O.selisih)||0)}),{}),[F]),U=_e.useMemo(()=>{if(!d||!d.divisions)return null;const E=d.divisions.filter(G=>{const Z=(G.division_code||"").toUpperCase(),N=(G.description||"").toUpperCase();return!(Z.startsWith("I")||N.startsWith("I ")||N.includes("IMPIAN")||N.includes("IJL"))}),M=E.reduce((G,Z)=>{var N;return G+(((N=Z.current_month)==null?void 0:N.gaji)||0)},0),O=E.reduce((G,Z)=>{var N;return G+(((N=Z.previous_month)==null?void 0:N.gaji)||0)},0),V=E.reduce((G,Z)=>{var N;return G+(((N=Z.current_month)==null?void 0:N.tbs_weight)||0)},0),Y=E.reduce((G,Z)=>{var N;return G+(((N=Z.previous_month)==null?void 0:N.tbs_weight)||0)},0),$=E.reduce((G,Z)=>{var N;return G+((Z.division_code||"").startsWith("M")&&((N=Z.current_month)==null?void 0:N.gaji)||0)},0),J=E.reduce((G,Z)=>{var N;return G+((Z.division_code||"").startsWith("M")&&((N=Z.previous_month)==null?void 0:N.gaji)||0)},0);return{...d,divisions:E,kpi_summary:{estate_gaji:{current:M-$,previous:O-J},mill_gaji:{current:$,previous:J},tbs_weight:{current:V,previous:Y}}}},[d]),H=_e.useMemo(()=>{const E={P:"ESTATE PARIT GUNUNG",A:"ESTATE AIR RUAK",D:"ESTATE DARUL MAKMUR",N:"NURSERY",W:"WORKSHOP",L:"ESTATE LESTARI",T:"TRAKSI",K:"KANTOR",S:"SECURITY / STAFF",M:"MILL / PKS"},M={},O=F.filter($=>!$.is_subtotal),V=F.filter($=>$.is_subtotal);O.forEach($=>{const J=($.description||"").charAt(0).toUpperCase();M[J]||(M[J]={key:J,label:E[J]||`ESTATE ${J}`,divisions:[],subtotal:null}),M[J].divisions.push($)}),V.forEach($=>{const J=($.description||"").toUpperCase();Object.keys(M).forEach(G=>{M[G].label.replace("ESTATE ","").split(" ").some(Z=>Z.length>2&&J.includes(Z))&&(M[G].subtotal=$)})});const Y={};return["P","A","D","L","N","W","T","K","S","M"].forEach($=>{M[$]&&(Y[$]=M[$])}),Y},[F]),R=_e.useMemo(()=>({divisions:F.filter(E=>!E.is_subtotal).length,workers:(B==null?void 0:B.total_employees)||0,hk:(B==null?void 0:B.total_hk)||0,netPay:(B==null?void 0:B.total_manual)||0}),[F,B]),L=()=>window.print(),_=()=>{let E=`Division,Workers,HK,PPH21,SPSI,Premi,Lembur,NetPay
`;F.filter(O=>!O.is_subtotal).forEach(O=>{E+=`"${O.description}",${O.total_employees},${O.total_hk},${O.total_pph21},${O.total_spsi},${O.total_premi},${O.total_lembur},${O.total_manual}
`}),B&&(E+=`"GRAND TOTAL",${B.total_employees},${B.total_hk},${B.total_pph21},${B.total_spsi},${B.total_premi},${B.total_lembur},${B.total_manual}
`);const M=document.createElement("a");M.href=URL.createObjectURL(new Blob([E],{type:"text/csv;charset=utf-8;"})),M.download=`Summary_Wages_Rebinmas_${s}_${n}.csv`,M.click()},w=()=>{if(!U||!U.kpi_summary)return null;const{kpi_summary:E,previous_period:M,current_period:O}=U,V=`${I(M==null?void 0:M.month)} ${M==null?void 0:M.year}`,Y=`${I(O==null?void 0:O.month)} ${O==null?void 0:O.year}`,$=E.estate_gaji.current-E.estate_gaji.previous,J=E.mill_gaji.current-E.mill_gaji.previous,G=E.tbs_weight.current-E.tbs_weight.previous;return k.jsxs("div",{className:"wsp-kpi-grid comparison-grid",children:[k.jsxs("div",{className:"wsp-kpi-card comparison-card",children:[k.jsx("div",{className:"wsp-kpi-label",children:"Total Gaji Estate (Excl. Mill)"}),k.jsxs("div",{className:"wsp-kpi-compare-row",children:[k.jsxs("div",{className:"wsp-kpi-trend-box prev",children:[k.jsx("div",{className:"trend-label",children:V}),k.jsxs("div",{className:"trend-value",children:["Rp ",A(E.estate_gaji.previous)]})]}),k.jsxs("div",{className:"wsp-kpi-trend-box curr",children:[k.jsx("div",{className:"trend-label",children:Y}),k.jsxs("div",{className:"trend-value",children:["Rp ",A(E.estate_gaji.current)]})]})]}),k.jsxs("div",{className:`wsp-kpi-diff ${$>0?"pos":$<0?"neg":"neutral"}`,children:[" Rp ",A($)," ",$>0?"":""]})]}),k.jsxs("div",{className:"wsp-kpi-card comparison-card",children:[k.jsx("div",{className:"wsp-kpi-label",children:"Total Gaji Mill PKS"}),k.jsxs("div",{className:"wsp-kpi-compare-row",children:[k.jsxs("div",{className:"wsp-kpi-trend-box prev",children:[k.jsx("div",{className:"trend-label",children:V}),k.jsxs("div",{className:"trend-value",children:["Rp ",A(E.mill_gaji.previous)]})]}),k.jsxs("div",{className:"wsp-kpi-trend-box curr",children:[k.jsx("div",{className:"trend-label",children:Y}),k.jsxs("div",{className:"trend-value",children:["Rp ",A(E.mill_gaji.current)]})]})]}),k.jsxs("div",{className:`wsp-kpi-diff ${J>0?"pos":J<0?"neg":"neutral"}`,children:[" Rp ",A(J)," ",J>0?"":""]})]}),k.jsxs("div",{className:"wsp-kpi-card comparison-card",children:[k.jsx("div",{className:"wsp-kpi-label",children:"Total TBS (Ton)"}),k.jsxs("div",{className:"wsp-kpi-compare-row",children:[k.jsxs("div",{className:"wsp-kpi-trend-box prev",children:[k.jsx("div",{className:"trend-label",children:V}),k.jsxs("div",{className:"trend-value",children:[A(E.tbs_weight.previous,2)," Ton"]})]}),k.jsxs("div",{className:"wsp-kpi-trend-box curr",children:[k.jsx("div",{className:"trend-label",children:Y}),k.jsxs("div",{className:"trend-value",children:[A(E.tbs_weight.current,2)," Ton"]})]})]}),k.jsxs("div",{className:`wsp-kpi-diff ${G>0?"neg-invert":G<0?"pos-invert":"neutral"}`,children:[" ",A(G,2)," Ton ",G>0?"":""]})]})]})},S=()=>{if(!U)return null;const{divisions:E,previous_period:M,current_period:O}=U,V=I(M.month).toUpperCase(),Y=I(O.month).toUpperCase(),$={prev_w:E.reduce((J,G)=>J+(G.workers_previous||0),0),curr_w:E.reduce((J,G)=>J+(G.workers_current||0),0),curr_g:E.reduce((J,G)=>{var Z;return J+(((Z=G.current_month)==null?void 0:Z.gaji)||0)},0),prev_g:E.reduce((J,G)=>{var Z;return J+(((Z=G.previous_month)==null?void 0:Z.gaji)||0)},0),diff:E.reduce((J,G)=>J+(G.selisih||0),0)};return k.jsx("div",{className:"wsp-table-wrapper",children:k.jsxs("table",{className:"wsp-table comparison-table",children:[k.jsxs("thead",{children:[k.jsxs("tr",{className:"wsp-header-master",children:[k.jsx("th",{rowSpan:"2",className:"th-sticky-col",children:"ESTATE/DIVISION"}),k.jsx("th",{colSpan:"2",className:"th-group-workers",children:"WORKERS"}),k.jsxs("th",{colSpan:"5",className:"th-group-pph",children:["CURRENT DETAILS (",Y,")"]}),k.jsxs("th",{colSpan:"2",className:"th-group-prev",children:[V," ",M.year]}),k.jsxs("th",{colSpan:"3",className:"th-group-curr",children:[Y," ",O.year]}),k.jsx("th",{rowSpan:"2",className:"th-group-diff",children:"(Diff)"})]}),k.jsxs("tr",{className:"wsp-header-sub",children:[k.jsx("th",{className:"th-group-workers",children:V.slice(0,3)}),k.jsx("th",{className:"th-group-workers",children:Y.slice(0,3)}),k.jsx("th",{className:"th-group-pph",children:"SPSI"}),k.jsx("th",{className:"th-group-pph",children:"PREMI"}),k.jsx("th",{className:"th-group-pph",children:"PRUN"}),k.jsx("th",{className:"th-group-pph",children:"OT"}),k.jsx("th",{className:"th-group-pph",children:"PPH21"}),k.jsx("th",{className:"th-group-prev",children:"GAJI"}),k.jsx("th",{className:"th-group-prev",children:"TBS"}),k.jsx("th",{className:"th-group-curr",children:"GAJI"}),k.jsx("th",{className:"th-group-curr",children:"TBS"}),k.jsx("th",{className:"th-group-curr",children:"THUMB"})]})]}),k.jsx("tbody",{children:E.map((J,G)=>{var Z,N,P,j,X,ie,ee,re,oe;return k.jsxs("tr",{children:[k.jsxs("td",{className:"text-left sticky-col",children:[k.jsx("div",{className:"div-code",children:J.division_code}),J.description&&J.description!==J.division_code&&k.jsx("div",{className:"div-desc",children:J.description})]}),k.jsx("td",{className:"text-right",children:A(J.workers_previous)}),k.jsxs("td",{className:"text-right border-right-section",children:[A(J.workers_current),D(J.workers_current,J.workers_previous)]}),k.jsx("td",{className:"text-right",children:A(J.total_spsi_current)}),k.jsx("td",{className:"text-right",children:A(J.total_premi_current)}),k.jsx("td",{className:"text-right",children:A(J.total_prunning_current)}),k.jsx("td",{className:"text-right",children:A(J.total_lembur_current)}),k.jsx("td",{className:"text-right border-right-section",children:A(J.total_pph21_current)}),k.jsx("td",{className:"text-right",children:A((Z=J.previous_month)==null?void 0:Z.gaji)}),k.jsx("td",{className:"text-right border-right-section",children:A((N=J.previous_month)==null?void 0:N.tbs_weight,3)}),k.jsxs("td",{className:"text-right font-semibold",children:[A((P=J.current_month)==null?void 0:P.gaji),D((j=J.current_month)==null?void 0:j.gaji,(X=J.previous_month)==null?void 0:X.gaji)]}),k.jsxs("td",{className:"text-right",children:[A((ie=J.current_month)==null?void 0:ie.tbs_weight,3),D((ee=J.current_month)==null?void 0:ee.tbs_weight,(re=J.previous_month)==null?void 0:re.tbs_weight,"yield")]}),k.jsx("td",{className:"text-right border-right-section font-semibold",children:A((oe=J.current_month)==null?void 0:oe.gaji)}),k.jsx("td",{className:`text-right font-semibold ${J.selisih>0?"text-diff-neg":J.selisih<0?"text-diff-pos":"text-neutral"}`,children:A(J.selisih)})]},G)})}),k.jsx("tfoot",{children:k.jsxs("tr",{className:"wsp-grand-total",children:[k.jsx("td",{className:"text-left sticky-col",children:"GRAND TOTAL"}),k.jsx("td",{className:"text-right",children:A($.prev_w)}),k.jsx("td",{className:"text-right",children:A($.curr_w)}),k.jsx("td",{colSpan:"5"}),k.jsx("td",{className:"text-right",children:A($.prev_g)}),k.jsx("td",{}),k.jsx("td",{className:"text-right",children:A($.curr_g)}),k.jsx("td",{}),k.jsx("td",{className:"text-right",children:A($.curr_g)}),k.jsx("td",{className:`text-right font-bold ${$.diff>0?"text-diff-neg":"text-diff-pos"}`,children:A($.diff)})]})})]})})},x=(E,M)=>k.jsxs(qA.Fragment,{children:[k.jsx("tr",{className:"estate-header",children:k.jsx("td",{colSpan:"10",children:M.label})}),M.divisions.map((O,V)=>k.jsxs("tr",{children:[k.jsx("td",{className:"text-left division-name sticky-col",children:k.jsx("div",{className:"div-code",children:O.description})}),k.jsx("td",{className:`text-right ${O.total_employees?"":"val-zero"}`,children:A(O.total_employees)}),k.jsx("td",{className:`text-right border-right-section ${O.total_hk?"":"val-zero"}`,children:A(O.total_hk)}),k.jsx("td",{className:`text-right ${O.total_pph21?"":"val-zero"}`,children:A(O.total_pph21)}),k.jsx("td",{className:`text-right border-right-section ${O.total_spsi?"":"val-zero"}`,children:A(O.total_spsi)}),k.jsx("td",{className:`text-right ${O.total_premi?"":"val-zero"}`,children:A(O.total_premi)}),k.jsx("td",{className:`text-right ${O.total_lembur?"":"val-zero"}`,children:A(O.total_lembur)}),k.jsx("td",{className:`text-right border-right-section ${O.total_manual?"val-positive":"val-zero"}`,children:A(O.total_manual)}),k.jsx("td",{className:`text-right ${O.thumb_print?"":"val-zero"}`,children:A(O.thumb_print)}),k.jsx("td",{className:`text-right font-semibold ${O.selisih>0?"text-diff-neg":O.selisih<0?"text-diff-pos":"text-neutral"}`,children:A(O.selisih)})]},`${E}-${V}`)),M.subtotal&&k.jsxs("tr",{className:"subtotal",children:[k.jsxs("td",{className:"text-left sticky-col",children:["Sub Total ",M.label]}),k.jsx("td",{className:"text-right",children:A(M.subtotal.total_employees)}),k.jsx("td",{className:"text-right border-right-section",children:A(M.subtotal.total_hk)}),k.jsx("td",{className:"text-right",children:A(M.subtotal.total_pph21)}),k.jsx("td",{className:"text-right border-right-section",children:A(M.subtotal.total_spsi)}),k.jsx("td",{className:"text-right",children:A(M.subtotal.total_premi)}),k.jsx("td",{className:"text-right",children:A(M.subtotal.total_lembur)}),k.jsx("td",{className:"text-right border-right-section",children:A(M.subtotal.total_manual)}),k.jsx("td",{className:"text-right",children:A(M.subtotal.thumb_print||0)}),k.jsx("td",{className:`text-right font-semibold ${M.subtotal.selisih>0?"text-diff-neg":M.subtotal.selisih<0?"text-diff-pos":"text-neutral"}`,children:A(M.subtotal.selisih||0)})]})]},E);return k.jsxs("div",{className:"wsp-container",children:[k.jsxs("div",{className:"wsp-action-bar no-print",children:[k.jsxs("div",{className:"left-section",children:[t&&k.jsx("button",{onClick:t,className:"wsp-btn",children:"Kembali"}),k.jsxs("div",{className:"wsp-filter-group",style:{display:"flex",gap:"0.5rem"},children:[k.jsx("select",{value:s,onChange:E=>r(parseInt(E.target.value)),className:"wsp-select",children:monthOptions.map(E=>k.jsx("option",{value:E.value,children:E.label},E.value))}),k.jsx("select",{value:n,onChange:E=>o(parseInt(E.target.value)),className:"wsp-select",style:{minWidth:"90px"},children:yearOptions.map(E=>k.jsx("option",{value:E,children:E},E))})]})]}),k.jsxs("div",{className:"right-section",children:[k.jsx("button",{onClick:T,className:"wsp-btn",children:"Refresh"}),k.jsx("button",{onClick:L,className:"wsp-btn",children:"Print"}),k.jsx("button",{onClick:_,className:"wsp-btn wsp-btn-primary",disabled:y||F.length===0,children:"Export CSV"}),k.jsx("button",{onClick:()=>f(!p),className:`wsp-btn ${p?"wsp-btn-primary":""}`,style:{marginLeft:"0.5rem"},disabled:m,children:p?"Report Mode":"Comparison Mode"}),k.jsx("button",{onClick:()=>g(!m),className:`wsp-btn ${m?"wsp-btn-primary":""}`,style:{marginLeft:"0.5rem"},children:m?"Back to Summary":"Impact Report"})]})]}),m?k.jsx(y3,{onBack:()=>g(!1)}):k.jsx(k.Fragment,{children:y?k.jsxs("div",{className:"wsp-loading",children:[k.jsx("div",{className:"wsp-spinner"}),k.jsx("div",{className:"wsp-loading-text",children:"Memuat Report..."})]}):C?k.jsxs("div",{className:"wsp-error",children:[k.jsx("div",{className:"wsp-error-message",children:C}),k.jsx("button",{onClick:T,className:"wsp-btn",children:"Coba Lagi"})]}):k.jsxs("div",{className:"wsp-document",children:[k.jsxs("div",{className:"wsp-letterhead",children:[k.jsx("img",{src:"/images/rebinmas.webp",alt:"PT REBINMAS JAYA",className:"wsp-logo"}),k.jsx("h1",{className:"wsp-company-name",children:"PT. REBINMAS JAYA"}),k.jsx("div",{className:"wsp-report-title",children:p?"Monthly Wages Comparison Report":"Monthly Wages Summary Report"}),k.jsxs("div",{className:"wsp-report-period",children:["Periode: ",k.jsxs("strong",{style:{color:"#0f172a"},children:[I(s)," ",n]})]})]}),p?w():k.jsxs("div",{className:"wsp-kpi-grid",children:[k.jsxs("div",{className:"wsp-kpi-card",children:[k.jsx("div",{className:"wsp-kpi-label",children:"Total Divisi"}),k.jsx("div",{className:"wsp-kpi-value",children:A(R.divisions)})]}),k.jsxs("div",{className:"wsp-kpi-card",children:[k.jsx("div",{className:"wsp-kpi-label",children:"Total Pekerja"}),k.jsx("div",{className:"wsp-kpi-value",children:A(R.workers)})]}),k.jsxs("div",{className:"wsp-kpi-card",children:[k.jsx("div",{className:"wsp-kpi-label",children:"Total HK Checkroll"}),k.jsx("div",{className:"wsp-kpi-value",children:A(R.hk)})]}),k.jsxs("div",{className:"wsp-kpi-card highlight",children:[k.jsx("div",{className:"wsp-kpi-label",children:"Total Upah Bersih"}),k.jsxs("div",{className:"wsp-kpi-value",children:["Rp ",A(R.netPay)]})]})]}),p?S():k.jsx("div",{className:"wsp-table-wrapper",children:k.jsxs("table",{className:"wsp-table",children:[k.jsxs("thead",{children:[k.jsxs("tr",{className:"wsp-header-master",children:[k.jsx("th",{rowSpan:"2",className:"th-sticky-col",children:"ESTATE / DIVISI"}),k.jsx("th",{colSpan:"2",className:"th-group-manpower",children:"MANPOWER"}),k.jsx("th",{colSpan:"2",className:"th-group-deductions",children:"POTONGAN"}),k.jsx("th",{colSpan:"3",className:"th-group-income",children:"PENDAPATAN"}),k.jsx("th",{colSpan:"2",className:"th-group-compare",children:"PERBANDINGAN"})]}),k.jsxs("tr",{className:"wsp-header-sub",children:[k.jsx("th",{className:"th-group-manpower",children:"WORKERS"}),k.jsx("th",{className:"th-group-manpower border-right-section",children:"HK"}),k.jsx("th",{className:"th-group-deductions",children:"PPH 21"}),k.jsx("th",{className:"th-group-deductions border-right-section",children:"SPSI"}),k.jsx("th",{className:"th-group-income",children:"TOTAL PREMI"}),k.jsx("th",{className:"th-group-income",children:"LEMBUR"}),k.jsx("th",{className:"th-group-income border-right-section",children:"UPAH BERSIH"}),k.jsx("th",{className:"th-group-compare",children:"THUMB PRINT"}),k.jsx("th",{className:"th-group-compare",children:"SELISIH"})]})]}),k.jsx("tbody",{children:F.length===0?k.jsx("tr",{children:k.jsx("td",{colSpan:"10",className:"text-center",style:{padding:"4rem"},children:"Tidak ada data tersedia"})}):Object.keys(H).map(E=>x(E,H[E]))}),B&&k.jsx("tfoot",{children:k.jsxs("tr",{className:"wsp-grand-total",children:[k.jsx("td",{className:"text-left sticky-col",children:"GRAND TOTAL"}),k.jsx("td",{className:"text-right",children:A(B.total_employees)}),k.jsx("td",{className:"text-right border-right-section",children:A(B.total_hk)}),k.jsx("td",{className:"text-right",children:A(B.total_pph21)}),k.jsx("td",{className:"text-right border-right-section",children:A(B.total_spsi)}),k.jsx("td",{className:"text-right",children:A(B.total_premi)}),k.jsx("td",{className:"text-right",children:A(B.total_lembur)}),k.jsx("td",{className:"text-right border-right-section",children:A(B.total_manual)}),k.jsx("td",{className:"text-right",children:A(B.thumb_print)}),k.jsx("td",{className:`text-right font-bold ${B.selisih>0?"text-diff-neg":B.selisih<0?"text-diff-pos":"text-neutral"}`,children:A(B.selisih)})]})})]})}),k.jsxs("div",{className:"wsp-signature-section",children:[k.jsxs("div",{className:"wsp-signature-block",children:[k.jsx("div",{className:"wsp-signature-title",children:"DIBUAT OLEH :"}),k.jsx("div",{className:"wsp-signature-name",children:"( ........................................ )"})]}),k.jsxs("div",{className:"wsp-signature-block",children:[k.jsx("div",{className:"wsp-signature-title",children:"DIPERIKSA OLEH :"}),k.jsx("div",{className:"wsp-signature-name",children:"( ........................................ )"})]}),k.jsxs("div",{className:"wsp-signature-block",children:[k.jsx("div",{className:"wsp-signature-title",children:"DISETUJUI OLEH :"}),k.jsx("div",{className:"wsp-signature-name",children:"( ........................................ )"})]})]}),k.jsxs("footer",{className:"wsp-footer",children:[k.jsxs("div",{className:"wsp-footer-left",children:[k.jsxs("div",{children:["Dicetak: ",printDate]}),k.jsxs("div",{children:["User: ",i==null?void 0:i.username]})]}),k.jsx("div",{className:"wsp-footer-right",children:"PT. REBINMAS JAYA"})]})]})})]})}function p$({onBack:t}){const{token:e,user:i}=wc(),[s,r]=_e.useState(new Date().getMonth()+1),[n,o]=_e.useState(new Date().getFullYear()),[a,l]=_e.useState([]),[c,u]=_e.useState([]),[d,h]=_e.useState(!1),[p,f]=_e.useState(null),[m,g]=_e.useState(!1),[y,v]=_e.useState(!1),[C,b]=_e.useState(""),T=($,J=0)=>{if($==null||$==="")return"-";const G=Number($);return isNaN(G)?"-":new Intl.NumberFormat("id-ID",{minimumFractionDigits:J,maximumFractionDigits:J}).format(G)},A=$=>["","Januari","Februari","Maret","April","Mei","Juni","Juli","Agustus","September","Oktober","November","Desember"][$]||"",I=($,J,G="cost")=>{const Z=($||0)-(J||0);if(Math.abs(Z)<.01)return null;const N=Z>0;let P="";return G==="cost"?P=N?"trend-up":"trend-down":G==="yield"&&(P=N?"trend-up-green":"trend-down-red"),k.jsx("span",{className:`trend-indicator ${P}`,children:N?"":""})};_e.useEffect(()=>{async function $(){if(e)try{const J=await ex(e);l(J.periods||[])}catch(J){console.error("Failed to load periods:",J)}}$()},[e]);const D=_e.useCallback(async()=>{if(e){v(!0),b("");try{if(d){const $=await v3(e,{month:s,year:n});$.success?f($):b("Failed to fetch comparison data")}else{const $=await m3(e,{month:s,year:n});$.success?u($.data||[]):b("Failed to fetch summary data")}}catch($){console.error("Error fetching summary:",$),b($.message||"Failed to fetch summary data")}finally{v(!1)}}},[e,s,n,d]);_e.useEffect(()=>{D()},[D]);const F=_e.useMemo(()=>c.filter($=>{if($.is_grand_total)return!1;const J=($.description||"").toUpperCase();return J.startsWith("I ")||J.startsWith("ESTATE I")||J.includes("IMPIAN")||J.includes("IJL")}),[c]),B=_e.useMemo(()=>F.length===0?null:F.filter(J=>!J.is_subtotal).reduce((J,G)=>({total_employees:(J.total_employees||0)+(Number(G.total_employees)||0),total_hk:(J.total_hk||0)+(Number(G.total_hk)||0),total_pph21:(J.total_pph21||0)+(Number(G.total_pph21)||0),total_spsi:(J.total_spsi||0)+(Number(G.total_spsi)||0),total_premi:(J.total_premi||0)+(Number(G.total_premi)||0),total_lembur:(J.total_lembur||0)+(Number(G.total_lembur)||0),total_manual:(J.total_manual||0)+(Number(G.total_manual)||0),thumb_print:(J.thumb_print||0)+(Number(G.thumb_print)||0),selisih:(J.selisih||0)+(Number(G.selisih)||0)}),{}),[F]),U=_e.useMemo(()=>{if(!p||!p.divisions)return null;const $=p.divisions.filter(P=>{const j=(P.division_code||"").toUpperCase(),X=(P.description||"").toUpperCase();return j.startsWith("I")||X.startsWith("I ")||X.includes("IMPIAN")||X.includes("IJL")}),J=$.reduce((P,j)=>{var X;return P+(((X=j.current_month)==null?void 0:X.gaji)||0)},0),G=$.reduce((P,j)=>{var X;return P+(((X=j.previous_month)==null?void 0:X.gaji)||0)},0),Z=$.reduce((P,j)=>{var X;return P+(((X=j.current_month)==null?void 0:X.tbs_weight)||0)},0),N=$.reduce((P,j)=>{var X;return P+(((X=j.previous_month)==null?void 0:X.tbs_weight)||0)},0);return{...p,divisions:$,kpi_summary:{estate_gaji:{current:J,previous:G},mill_gaji:{current:0,previous:0},tbs_weight:{current:Z,previous:N}}}},[p]),H=`${A(s)} ${n}`,R=new Date().toLocaleDateString("id-ID",{day:"numeric",month:"long",year:"numeric"}),L=[{value:1,label:"Januari"},{value:2,label:"Februari"},{value:3,label:"Maret"},{value:4,label:"April"},{value:5,label:"Mei"},{value:6,label:"Juni"},{value:7,label:"Juli"},{value:8,label:"Agustus"},{value:9,label:"September"},{value:10,label:"Oktober"},{value:11,label:"November"},{value:12,label:"Desember"}],_=new Date().getFullYear(),w=Array.from({length:5},($,J)=>_-J),S=_e.useMemo(()=>{const $={},J=F.filter(N=>!N.is_subtotal),G=F.filter(N=>N.is_subtotal);J.forEach(N=>{const P="I";$[P]||($[P]={key:P,label:"ESTATE IMPIAN JAYA LESTARI",divisions:[],subtotal:null}),$[P].divisions.push(N)});const Z=G.find(N=>(N.description||"").toUpperCase().includes("IMPIAN"));return $.I&&Z&&($.I.subtotal=Z),$},[F]),x=_e.useMemo(()=>({divisions:F.filter(J=>!J.is_subtotal).length,workers:(B==null?void 0:B.total_employees)||0,hk:(B==null?void 0:B.total_hk)||0,netPay:(B==null?void 0:B.total_manual)||0}),[F,B]),E=()=>{window.print()},M=()=>{let $=`Division,Workers,HK Cekroll,PPH21,SPSI,Total Premi,Total Lembur,Total Upah Bersih
`;F.forEach(Z=>{!Z.is_grand_total&&!Z.is_subtotal&&($+=`"${Z.description||""}",${Z.total_employees||0},${Z.total_hk||0},${Z.total_pph21||0},${Z.total_spsi||0},${Z.total_premi||0},${Z.total_lembur||0},${Z.total_manual||0}
`)}),B&&($+=`"GRAND TOTAL",${B.total_employees||0},${B.total_hk||0},${B.total_pph21||0},${B.total_spsi||0},${B.total_premi||0},${B.total_lembur||0},${B.total_manual||0}
`);const J=new Blob([$],{type:"text/csv;charset=utf-8;"}),G=document.createElement("a");G.href=URL.createObjectURL(J),G.download=`Summary_Wages_IJL_${s}_${n}.csv`,G.click()},O=()=>{var X,ie,ee,re,oe,ue,se,le;if(!U||!U.kpi_summary)return null;const{kpi_summary:$,previous_period:J,current_period:G}=U,Z=`${A((J==null?void 0:J.month)||11)} ${(J==null?void 0:J.year)||n}`,N=`${A((G==null?void 0:G.month)||s)} ${(G==null?void 0:G.year)||n}`,P=(((X=$.estate_gaji)==null?void 0:X.current)||0)-(((ie=$.estate_gaji)==null?void 0:ie.previous)||0),j=(((ee=$.tbs_weight)==null?void 0:ee.current)||0)-(((re=$.tbs_weight)==null?void 0:re.previous)||0);return k.jsxs("div",{className:"wsp-kpi-grid comparison-grid",children:[k.jsxs("div",{className:"wsp-kpi-card comparison-card",children:[k.jsx("div",{className:"wsp-kpi-label",children:"Total Gaji Estate (IJL)"}),k.jsxs("div",{className:"wsp-kpi-compare-row",children:[k.jsxs("div",{className:"wsp-kpi-trend-box prev",children:[k.jsx("div",{className:"trend-label",children:Z}),k.jsxs("div",{className:"trend-value",children:["Rp ",T((oe=$.estate_gaji)==null?void 0:oe.previous)]})]}),k.jsxs("div",{className:"wsp-kpi-trend-box curr",children:[k.jsx("div",{className:"trend-label",children:N}),k.jsxs("div",{className:"trend-value",children:["Rp ",T((ue=$.estate_gaji)==null?void 0:ue.current)]})]})]}),k.jsxs("div",{className:`wsp-kpi-diff ${P>0?"pos":P<0?"neg":"neutral"}`,children:[" Rp ",T(P)," ",P>0?"":P<0?"":""]})]}),k.jsxs("div",{className:"wsp-kpi-card comparison-card",children:[k.jsx("div",{className:"wsp-kpi-label",children:"Total TBS (Ton)"}),k.jsxs("div",{className:"wsp-kpi-compare-row",children:[k.jsxs("div",{className:"wsp-kpi-trend-box prev",children:[k.jsx("div",{className:"trend-label",children:Z}),k.jsxs("div",{className:"trend-value",children:[T((se=$.tbs_weight)==null?void 0:se.previous,2)," Ton"]})]}),k.jsxs("div",{className:"wsp-kpi-trend-box curr",children:[k.jsx("div",{className:"trend-label",children:N}),k.jsxs("div",{className:"trend-value",children:[T((le=$.tbs_weight)==null?void 0:le.current,2)," Ton"]})]})]}),k.jsxs("div",{className:`wsp-kpi-diff ${j>0?"neg-invert":j<0?"pos-invert":"neutral"}`,children:[" ",T(j,2)," Ton ",j>0?"":j<0?"":""]})]})]})},V=()=>{if(!U||!U.divisions)return null;const{divisions:$,previous_period:J,current_period:G}=U,Z=A(J.month).toUpperCase(),N=A(G.month).toUpperCase(),P={workers_previous:$.reduce((j,X)=>j+(X.workers_previous||0),0),workers_current:$.reduce((j,X)=>j+(X.workers_current||0),0),total_pph21_current:$.reduce((j,X)=>j+(X.total_pph21_current||0),0),total_spsi_current:$.reduce((j,X)=>j+(X.total_spsi_current||0),0),total_premi_current:$.reduce((j,X)=>j+(X.total_premi_current||0),0),total_prunning_current:$.reduce((j,X)=>j+(X.total_prunning_current||0),0),total_lembur_current:$.reduce((j,X)=>j+(X.total_lembur_current||0),0),prev_gaji:$.reduce((j,X)=>{var ie;return j+(((ie=X.previous_month)==null?void 0:ie.gaji)||0)},0),prev_tbs:$.reduce((j,X)=>{var ie;return j+(((ie=X.previous_month)==null?void 0:ie.tbs_weight)||0)},0),curr_gaji:$.reduce((j,X)=>{var ie;return j+(((ie=X.current_month)==null?void 0:ie.gaji)||0)},0),curr_tbs:$.reduce((j,X)=>{var ie;return j+(((ie=X.current_month)==null?void 0:ie.tbs_weight)||0)},0),selisih:$.reduce((j,X)=>j+(X.selisih||0),0)};return k.jsx("div",{className:"wsp-table-wrapper",children:k.jsxs("table",{className:"wsp-table comparison-table",children:[k.jsxs("thead",{children:[k.jsxs("tr",{className:"wsp-header-master",children:[k.jsx("th",{rowSpan:"2",className:"th-sticky-col",children:"ESTATE/DIVISION"}),k.jsx("th",{colSpan:"2",className:"th-group-workers",children:"WORKERS / PEKERJA"}),k.jsxs("th",{colSpan:"5",className:"th-group-pph",children:["TOTAL PPH 21",k.jsx("br",{}),k.jsxs("small",{children:["(MASA ",N," ",G.year,")"]})]}),k.jsxs("th",{colSpan:"2",className:"th-group-prev",children:[Z," ",J.year]}),k.jsxs("th",{colSpan:"3",className:"th-group-curr",children:[N," ",G.year]}),k.jsx("th",{rowSpan:"2",className:"th-group-diff",children:"(Perubahan Gaji)"})]}),k.jsxs("tr",{className:"wsp-header-sub",children:[k.jsx("th",{className:"th-group-workers",children:Z.substring(0,3)}),k.jsx("th",{className:"th-group-workers",children:N.substring(0,3)}),k.jsx("th",{className:"th-group-pph",children:"POT SPSI"}),k.jsx("th",{className:"th-group-pph",children:"TOT PREMI"}),k.jsx("th",{className:"th-group-pph",children:"TOT PRUNNING"}),k.jsx("th",{className:"th-group-pph",children:"TOT LEMBUR"}),k.jsx("th",{className:"th-group-pph",children:"PPH21"}),k.jsx("th",{className:"th-group-prev",children:"GAJI"}),k.jsx("th",{className:"th-group-prev",children:"TBS (Ton)"}),k.jsx("th",{className:"th-group-curr",children:"GAJI"}),k.jsx("th",{className:"th-group-curr",children:"TBS (Ton)"}),k.jsx("th",{className:"th-group-curr",children:"THUMB PRINT"})]})]}),k.jsx("tbody",{children:$.map((j,X)=>{var oe,ue,se,le,ne,fe;const ie=((oe=j.current_month)==null?void 0:oe.gaji)||0,ee=((ue=j.previous_month)==null?void 0:ue.gaji)||0,re=ie-ee;return k.jsxs("tr",{children:[k.jsxs("td",{className:"text-left division-name sticky-col",children:[k.jsx("div",{className:"div-code",children:j.division_code}),j.description&&j.description!==j.division_code&&k.jsx("div",{className:"div-desc",children:j.description})]}),k.jsx("td",{className:"text-right border-right-group",children:T(j.workers_previous)}),k.jsxs("td",{className:"text-right border-right-section",children:[T(j.workers_current),I(j.workers_current,j.workers_previous,"cost")]}),k.jsx("td",{className:"text-right",children:T(j.total_spsi_current)}),k.jsx("td",{className:"text-right",children:T(j.total_premi_current)}),k.jsx("td",{className:"text-right",children:T(j.total_prunning_current)}),k.jsx("td",{className:"text-right",children:T(j.total_lembur_current)}),k.jsx("td",{className:"text-right border-right-section",children:T(j.total_pph21_current)}),k.jsx("td",{className:"text-right",children:T(ee)}),k.jsx("td",{className:"text-right border-right-section",children:T((se=j.previous_month)==null?void 0:se.tbs_weight,3)}),k.jsxs("td",{className:"text-right font-semibold",children:[T(ie),I(ie,ee,"cost")]}),k.jsxs("td",{className:"text-right",children:[T((le=j.current_month)==null?void 0:le.tbs_weight,3),I((ne=j.current_month)==null?void 0:ne.tbs_weight,(fe=j.previous_month)==null?void 0:fe.tbs_weight,"yield")]}),k.jsx("td",{className:"text-right font-semibold border-right-section",children:T(ie)}),k.jsxs("td",{className:`text-right font-semibold ${re>0?"text-diff-neg":re<0?"text-diff-pos":"text-neutral"}`,children:[k.jsx("span",{style:{marginRight:"6px"},children:re>0?"":re<0?"":""}),T(re)]})]},X)})}),k.jsx("tfoot",{children:k.jsxs("tr",{className:"wsp-grand-total",children:[k.jsx("td",{className:"text-left sticky-col",children:"GRAND TOTAL (IJL)"}),k.jsx("td",{className:"text-right",children:T(P.workers_previous)}),k.jsx("td",{className:"text-right",children:T(P.workers_current)}),k.jsx("td",{className:"text-right",children:T(P.total_spsi_current)}),k.jsx("td",{className:"text-right",children:T(P.total_premi_current)}),k.jsx("td",{className:"text-right",children:T(P.total_prunning_current)}),k.jsx("td",{className:"text-right",children:T(P.total_lembur_current)}),k.jsx("td",{className:"text-right",children:T(P.total_pph21_current)}),k.jsx("td",{className:"text-right",children:T(P.prev_gaji)}),k.jsx("td",{className:"text-right",children:T(P.prev_tbs,3)}),k.jsx("td",{className:"text-right",children:T(P.curr_gaji)}),k.jsx("td",{className:"text-right",children:T(P.curr_tbs,3)}),k.jsx("td",{className:"text-right",children:T(P.curr_gaji)}),k.jsxs("td",{className:`text-right font-bold ${P.selisih>0?"text-diff-neg":P.selisih<0?"text-diff-pos":"text-neutral"}`,children:[k.jsx("span",{style:{marginRight:"6px"},children:P.selisih>0?"":P.selisih<0?"":""}),T(P.selisih)]})]})})]})})},Y=($,J)=>J.divisions.length===0?null:k.jsxs(qA.Fragment,{children:[k.jsx("tr",{className:"estate-header",children:k.jsx("td",{colSpan:"10",children:J.label})}),J.divisions.map((G,Z)=>k.jsxs("tr",{children:[k.jsx("td",{className:"text-left division-name sticky-col",children:k.jsx("div",{className:"div-code",children:G.description})}),k.jsx("td",{className:`text-right ${Number(G.total_employees)===0?"val-zero":""}`,children:T(G.total_employees)}),k.jsx("td",{className:`text-right border-right-section ${Number(G.total_hk)===0?"val-zero":""}`,children:T(G.total_hk)}),k.jsx("td",{className:`text-right ${Number(G.total_pph21)===0?"val-zero":""}`,children:T(G.total_pph21)}),k.jsx("td",{className:`text-right border-right-section ${Number(G.total_spsi)===0?"val-zero":""}`,children:T(G.total_spsi)}),k.jsx("td",{className:`text-right ${Number(G.total_premi)===0?"val-zero":""}`,children:T(G.total_premi)}),k.jsx("td",{className:`text-right ${Number(G.total_lembur)===0?"val-zero":""}`,children:T(G.total_lembur)}),k.jsx("td",{className:`text-right border-right-section ${Number(G.total_manual)===0?"val-zero":"val-positive"}`,children:T(G.total_manual)}),k.jsx("td",{className:`text-right ${Number(G.thumb_print)===0?"val-zero":""}`,children:T(G.thumb_print)}),k.jsx("td",{className:`text-right font-semibold ${G.selisih>0?"text-diff-neg":G.selisih<0?"text-diff-pos":"text-neutral"}`,children:T(G.selisih)})]},`${$}-${Z}`)),J.subtotal&&k.jsxs("tr",{className:"subtotal",children:[k.jsxs("td",{className:"text-left sticky-col",children:["Sub Total ",J.label]}),k.jsx("td",{className:"text-right",children:T(J.subtotal.total_employees)}),k.jsx("td",{className:"text-right border-right-section",children:T(J.subtotal.total_hk)}),k.jsx("td",{className:"text-right",children:T(J.subtotal.total_pph21)}),k.jsx("td",{className:"text-right border-right-section",children:T(J.subtotal.total_spsi)}),k.jsx("td",{className:"text-right",children:T(J.subtotal.total_premi)}),k.jsx("td",{className:"text-right",children:T(J.subtotal.total_lembur)}),k.jsx("td",{className:"text-right border-right-section",children:T(J.subtotal.total_manual)}),k.jsx("td",{className:"text-right",children:T(J.subtotal.thumb_print||0)}),k.jsx("td",{className:`text-right font-semibold ${J.subtotal.selisih>0?"text-diff-neg":J.subtotal.selisih<0?"text-diff-pos":"text-neutral"}`,children:T(J.subtotal.selisih||0)})]})]},$);return k.jsxs("div",{className:"wsp-container",children:[k.jsxs("div",{className:"wsp-action-bar no-print",children:[k.jsxs("div",{className:"left-section",children:[t&&k.jsx("button",{onClick:t,className:"wsp-btn",title:"Kembali ke Menu Utama",children:"Kembali"}),k.jsxs("div",{className:"wsp-filter-group",style:{display:"flex",gap:"0.5rem"},children:[k.jsx("select",{value:s,onChange:$=>r(parseInt($.target.value)),className:"wsp-select",children:L.map($=>k.jsx("option",{value:$.value,children:$.label},$.value))}),k.jsx("select",{value:n,onChange:$=>o(parseInt($.target.value)),className:"wsp-select",style:{minWidth:"90px"},children:w.map($=>k.jsx("option",{value:$,children:$},$))})]})]}),k.jsxs("div",{className:"right-section",children:[k.jsx("button",{onClick:D,className:"wsp-btn",disabled:y,title:"Refresh Data",children:"Refresh"}),k.jsx("button",{onClick:E,className:"wsp-btn",title:"Print this report",children:"Print"}),k.jsx("button",{onClick:M,className:"wsp-btn wsp-btn-primary",disabled:y||F.length===0,title:"Download CSV",children:"Export CSV"}),k.jsx("button",{onClick:()=>h(!d),className:`wsp-btn ${d?"wsp-btn-primary":""}`,style:{marginLeft:"0.5rem"},children:d?"Report Mode":"Comparison Mode"}),k.jsx("button",{onClick:()=>g(!m),className:`wsp-btn ${m?"wsp-btn-primary":""}`,style:{marginLeft:"0.5rem"},children:m?"Back to Summary":"Impact Report"})]})]}),m?k.jsx(y3,{onBack:()=>g(!1)}):k.jsx(k.Fragment,{children:y?k.jsxs("div",{className:"wsp-loading",children:[k.jsx("div",{className:"wsp-spinner"}),k.jsx("div",{className:"wsp-loading-text",children:"Memuat Laporan IJL..."})]}):C?k.jsxs("div",{className:"wsp-error",children:[k.jsx("div",{className:"wsp-error-title",children:"Gagal Memuat Data"}),k.jsx("div",{className:"wsp-error-message",children:C}),k.jsx("button",{onClick:D,className:"wsp-btn",style:{marginTop:"1rem"},children:"Coba Lagi"})]}):k.jsxs("div",{className:"wsp-document",children:[k.jsxs("div",{className:"wsp-letterhead",children:[k.jsx("img",{src:"/images/rebinmas.webp",alt:"PT IMPIAN JAYA LESTARI",className:"wsp-logo"}),k.jsx("h1",{className:"wsp-company-name",children:"PT. IMPIAN JAYA LESTARI"}),k.jsx("div",{className:"wsp-report-title",children:d?"Monthly Wages Comparison Report":"Monthly Wages Summary Report"}),k.jsxs("div",{className:"wsp-report-period",children:["Periode: ",k.jsx("strong",{style:{color:"#0f172a"},children:H})]})]}),d?O():k.jsxs("div",{className:"wsp-kpi-grid",children:[k.jsxs("div",{className:"wsp-kpi-card",children:[k.jsx("div",{className:"wsp-kpi-label",children:"Total Divisi"}),k.jsx("div",{className:"wsp-kpi-value",children:T(x.divisions)})]}),k.jsxs("div",{className:"wsp-kpi-card",children:[k.jsx("div",{className:"wsp-kpi-label",children:"Total Pekerja"}),k.jsx("div",{className:"wsp-kpi-value",children:T(x.workers)})]}),k.jsxs("div",{className:"wsp-kpi-card",children:[k.jsx("div",{className:"wsp-kpi-label",children:"Total HK Checkroll"}),k.jsx("div",{className:"wsp-kpi-value",children:T(x.hk)})]}),k.jsxs("div",{className:"wsp-kpi-card highlight",children:[k.jsx("div",{className:"wsp-kpi-label",children:"Total Upah Bersih"}),k.jsxs("div",{className:"wsp-kpi-value",children:["Rp ",T(x.netPay)]})]})]}),d?V():k.jsx("div",{className:"wsp-table-wrapper",children:k.jsxs("table",{className:"wsp-table",children:[k.jsxs("thead",{children:[k.jsxs("tr",{className:"wsp-header-master",children:[k.jsx("th",{rowSpan:"2",className:"th-sticky-col",children:"ESTATE / DIVISI"}),k.jsx("th",{colSpan:"2",className:"th-group-manpower",children:"MANPOWER"}),k.jsx("th",{colSpan:"2",className:"th-group-deductions",children:"DEDUCTIONS / POTONGAN"}),k.jsx("th",{colSpan:"3",className:"th-group-income",children:"INCOME / PENDAPATAN"}),k.jsx("th",{colSpan:"2",className:"th-group-compare",children:"PERBANDINGAN"})]}),k.jsxs("tr",{className:"wsp-header-sub",children:[k.jsx("th",{className:"th-group-manpower",style:{minWidth:"80px"},children:"WORKERS"}),k.jsx("th",{className:"th-group-manpower border-right-section",style:{minWidth:"90px"},children:"HK"}),k.jsx("th",{className:"th-group-deductions",style:{minWidth:"110px"},children:"PPH 21"}),k.jsx("th",{className:"th-group-deductions border-right-section",style:{minWidth:"100px"},children:"SPSI"}),k.jsx("th",{className:"th-group-income",style:{minWidth:"120px"},children:"TOTAL PREMI"}),k.jsx("th",{className:"th-group-income",style:{minWidth:"120px"},children:"LEMBUR"}),k.jsx("th",{className:"th-group-income border-right-section",style:{minWidth:"130px"},children:"UPAH BERSIH (Portal)"}),k.jsx("th",{className:"th-group-compare",style:{minWidth:"130px"},children:"THUMB PRINT"}),k.jsx("th",{className:"th-group-compare",style:{minWidth:"120px"},children:"SELISIH"})]})]}),k.jsx("tbody",{children:F.length===0?k.jsx("tr",{children:k.jsx("td",{colSpan:"10",className:"text-center",style:{padding:"4rem"},children:"Tidak ada data IJL"})}):Object.keys(S).map($=>Y($,S[$]))}),B&&k.jsx("tfoot",{children:k.jsxs("tr",{className:"wsp-grand-total",children:[k.jsx("td",{className:"text-left sticky-col",children:"GRAND TOTAL (IJL)"}),k.jsx("td",{className:"text-right",children:T(B.total_employees)}),k.jsx("td",{className:"text-right border-right-section",children:T(B.total_hk)}),k.jsx("td",{className:"text-right",children:T(B.total_pph21)}),k.jsx("td",{className:"text-right border-right-section",children:T(B.total_spsi)}),k.jsx("td",{className:"text-right",children:T(B.total_premi)}),k.jsx("td",{className:"text-right",children:T(B.total_lembur)}),k.jsx("td",{className:"text-right border-right-section",children:T(B.total_manual)}),k.jsx("td",{className:"text-right",children:T(B.thumb_print)}),k.jsx("td",{className:`text-right font-bold ${B.selisih>0?"text-diff-neg":B.selisih<0?"text-diff-pos":"text-neutral"}`,children:T(B.selisih)})]})})]})}),k.jsxs("div",{className:"wsp-signature-section",children:[k.jsxs("div",{className:"wsp-signature-block",children:[k.jsx("div",{className:"wsp-signature-title",children:"DIBUAT OLEH :"}),k.jsx("div",{className:"wsp-signature-name",children:"( ........................................ )"})]}),k.jsxs("div",{className:"wsp-signature-block",children:[k.jsx("div",{className:"wsp-signature-title",children:"DIPERIKSA OLEH :"}),k.jsx("div",{className:"wsp-signature-name",children:"( ........................................ )"})]}),k.jsxs("div",{className:"wsp-signature-block",children:[k.jsx("div",{className:"wsp-signature-title",children:"DISETUJUI OLEH :"}),k.jsx("div",{className:"wsp-signature-name",children:"( ........................................ )"})]})]}),k.jsxs("footer",{className:"wsp-footer",children:[k.jsxs("div",{className:"wsp-footer-left",children:[k.jsxs("div",{children:["Dicetak: ",R]}),k.jsxs("div",{children:["User: ",i==null?void 0:i.username]})]}),k.jsx("div",{className:"wsp-footer-right",children:"PT. IMPIAN JAYA LESTARI"})]})]})})]})}function b_({lockedDiv:t=null}){const{user:e,token:i,logout:s,lockedDivision:r}=wc(),n=mu(),o=n?kw():null,a=(e==null?void 0:e.isAdmin)===!0||(e==null?void 0:e.role)&&e.role.toUpperCase()==="ADMIN"||(e==null?void 0:e.divisi)&&e.divisi.toUpperCase()==="ALL",l=a?null:t||r||null,c=!a&&!!(l||o),[u,d]=_e.useState(new Date().getMonth()+1),[h,p]=_e.useState(new Date().getFullYear()),[f,m]=_e.useState(""),[g,y]=_e.useState(""),[v,C]=_e.useState([]),[b,T]=_e.useState(!1),[A,I]=_e.useState([]),[D,F]=_e.useState(!1),[B,U]=_e.useState(!1),[H,R]=_e.useState(!1),[L,_]=_e.useState(!1),[w,S]=_e.useState(!1),[x,E]=_e.useState(0),[M,O]=_e.useState(100),[V,Y]=_e.useState(null),[$,J]=_e.useState(!1),G=()=>O(ne=>Math.min(ne+10,150)),Z=()=>O(ne=>Math.max(ne-10,60)),N=()=>O(100),P=async()=>{if(!V){alert("Data belum siap untuk di-export");return}J(!0);try{await V()}finally{J(!1)}},j=ne=>{console.log("[MainPage] Opening detail tab for employee:",ne);const fe=ne.nik||ne.NIK;if(!fe){console.error("[MainPage] Cannot view detail: NIK is missing",ne);return}const me=new URLSearchParams({nik:fe,month:u,year:h,division:f}),ge=Gz(`/employee/detail?${me.toString()}`);window.open(ge,"_blank","noopener,noreferrer")};_e.useEffect(()=>{async function ne(){if(i)try{const fe=await Wz(i);I(fe||[]),console.log("[MainPage] Loaded divisions from API:",fe)}catch(fe){console.error("[MainPage] Failed to load divisions from API:",fe),I([])}}ne()},[i]),_e.useEffect(()=>{var fe;let ne="";l?(console.log(`[MainPage] Using external locked division = ${l}`),ne=l):n&&o?(console.log(`[MainPage] Prod mode: Using locked division = ${o}`),ne=o):A.length>0?ne=A[0]:((fe=e==null?void 0:e.divisions)==null?void 0:fe.length)>0?ne=e.divisions[0]:e!=null&&e.divisi&&(ne=e.divisi),ne&&!f&&m(ne)},[e,n,o,l,A]),_e.useEffect(()=>{async function ne(){var fe,me,ge;if(!f||!i){C([]),y("");return}T(!0);try{let ve;if(c?(console.log("[MainPage] Loading gangs using locked service for division:",f),ve=await Lz(i,f)):ve=await Uz(i,f,null,!0),ve&&ve.length>0){C(ve);const xe=ve.some(De=>De.gang_code===g);(!g||!xe)&&(fe=ve[0])!=null&&fe.gang_code&&y(ve[0].gang_code)}else C([]),y("")}catch(ve){console.error("Failed to load gangs:",ve),((me=ve.response)==null?void 0:me.status)!==401&&!((ge=ve.message)!=null&&ge.includes("401"))&&(C([]),y(""))}finally{T(!1)}}ne()},[f,i,c]);const X=ne=>{m(ne),y(""),C([])},ie=()=>{f&&g&&U(!0)},ee=()=>{R(!0)},re=()=>{R(!1)},oe=()=>{_(!0)},ue=()=>{_(!1)},se=()=>{S(!0)},le=()=>{S(!1)};return w?k.jsx(p$,{onBack:le,initialMonth:u,initialYear:h}):L?k.jsx(h$,{onBack:ue,initialMonth:u,initialYear:h}):H?k.jsx(d$,{onBack:re,initialDivision:f,initialMonth:u,initialYear:h}):B?k.jsxs("div",{style:{display:"flex",flexDirection:"column",height:"100vh",width:"100vw",overflow:"hidden",background:"var(--bg-body)"},children:[k.jsxs("div",{style:{height:"50px",background:"#ffffff",borderBottom:"1px solid var(--border-color)",display:"flex",alignItems:"center",justifyContent:"space-between",padding:"0 1.5rem",zIndex:50,boxShadow:"0 2px 4px rgba(0,0,0,0.02)"},children:[k.jsxs("div",{className:"flex-center gap-4",children:[k.jsx("img",{src:"/images/rebinmas.webp",alt:"Logo",style:{height:"32px"},onError:ne=>ne.target.style.display="none"}),k.jsxs("div",{style:{borderLeft:"1px solid var(--neutral-200)",paddingLeft:"1rem"},children:[k.jsx("div",{style:{fontSize:"0.9rem",fontWeight:"800",color:"var(--primary-900)",lineHeight:1.1},children:"PT REBINMAS JAYA"}),k.jsxs("div",{style:{fontSize:"0.7rem",color:"var(--neutral-500)",letterSpacing:"0.05em"},children:["PAYROLL SYSTEM ",c&&k.jsxs("span",{style:{color:"#f59e0b"},children:["  ",f]})]})]})]}),k.jsx("div",{className:"flex-center gap-4",style:{flex:1,justifyContent:"center",maxWidth:"1000px",padding:"0 16px"},children:k.jsx(o$,{month:u,year:h,division:f,divisions:c?[f]:A.length>0?A:(e==null?void 0:e.divisions)||[],gangCode:g,gangs:v,onMonthYearChange:(ne,fe)=>{d(ne),p(fe)},onDivisionChange:c?()=>{}:X,onGangChange:ne=>y(ne),disableControls:D||b,divisionLocked:c})}),k.jsxs("div",{className:"flex-center gap-4",children:[B&&x>0&&k.jsxs("div",{style:{background:"linear-gradient(135deg, #1a365d 0%, #2d4a6f 100%)",color:"#ffffff",padding:"0.25rem 0.75rem",borderRadius:"4px",fontSize:"0.8rem",fontWeight:"600",display:"flex",alignItems:"center",gap:"0.3rem"},children:[k.jsx("span",{children:""}),k.jsxs("span",{children:[x," Karyawan"]})]}),B&&k.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"4px",background:"#f3f4f6",padding:"4px 8px",borderRadius:"4px",border:"1px solid #e5e7eb"},children:[k.jsx("span",{style:{fontSize:"12px",color:"#6b7280",fontWeight:"500"},children:"Aa"}),k.jsx("button",{onClick:Z,disabled:M<=60,style:{background:"none",border:"none",cursor:M<=60?"not-allowed":"pointer",fontSize:"14px",padding:"2px 6px",color:M<=60?"#9ca3af":"#374151",fontWeight:"600"},title:"Perkecil Font",children:""}),k.jsxs("button",{onClick:N,style:{background:M===100?"#1a365d":"#ffffff",color:M===100?"#ffffff":"#374151",border:"1px solid #d1d5db",cursor:"pointer",fontSize:"11px",padding:"2px 8px",borderRadius:"3px",fontWeight:"600",minWidth:"45px"},title:"Reset ke 100%",children:[M,"%"]}),k.jsx("button",{onClick:G,disabled:M>=150,style:{background:"none",border:"none",cursor:M>=150?"not-allowed":"pointer",fontSize:"14px",padding:"2px 6px",color:M>=150?"#9ca3af":"#374151",fontWeight:"600"},title:"Perbesar Font",children:"+"})]}),B&&k.jsxs("button",{onClick:P,disabled:$||!V,style:{background:$?"#6b7280":"linear-gradient(135deg, #059669 0%, #047857 100%)",color:"#ffffff",border:"none",padding:"0.4rem 0.8rem",borderRadius:"4px",fontSize:"0.8rem",fontWeight:"600",cursor:$?"not-allowed":"pointer",display:"flex",alignItems:"center",gap:"0.3rem",height:"36px",boxShadow:"0 2px 4px rgba(0,0,0,0.1)"},title:"Export ke Excel",children:[k.jsx("span",{children:$?"":""}),k.jsx("span",{children:$?"Exporting...":"Export Excel"})]}),k.jsxs("div",{style:{textAlign:"right",display:"none","@media (min-width: 768px)":{display:"block"}},children:[k.jsx("div",{style:{fontSize:"0.85rem",fontWeight:"600",color:"var(--text-main)"},children:(e==null?void 0:e.username)||"User"}),k.jsx("div",{style:{fontSize:"0.7rem",color:"var(--primary-600)"},children:(e==null?void 0:e.role)||"Staff"})]}),k.jsx("button",{className:"btn btn-secondary",onClick:s,style:{padding:"0.4rem 0.8rem",fontSize:"0.8rem",height:"36px"},title:"Logout",children:""})]})]}),k.jsxs("div",{style:{flex:1,width:"100%",position:"relative",overflow:"auto"},children:[f&&g?k.jsx("div",{style:{width:"100%",height:"100%",overflow:"hidden"},children:k.jsx(i$,{token:i,month:u,year:h,division:f,gangCode:g,onViewEmployeeDetail:j,fontSize:M,onExportReady:ne=>Y(()=>ne)})}):k.jsxs("div",{className:"flex-center h-full flex-col text-neutral-400",children:[k.jsx("div",{style:{fontSize:"3rem",marginBottom:"1rem"},children:""}),k.jsx("div",{children:"Silakan pilih Divisi dan Gang di menu atas untuk menampilkan data"})]}),k.jsx(ry,{isLoading:D,message:"Memproses Data...",gangCode:g,month:u,year:h,steps:[{name:"Sinkronisasi Database",duration:1e3},{name:"Hitung Premi & Potongan",duration:1500},{name:"Finalisasi Laporan",duration:800}]})]})]}):k.jsxs("div",{style:{height:"100vh",width:"100vw",background:"linear-gradient(to bottom, #f0fdf4, #ffffff)",display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center"},children:[k.jsxs("div",{className:"card",style:{width:"100%",maxWidth:"480px",padding:"2.5rem",borderTop:"4px solid var(--primary-500)",boxShadow:"0 10px 25px -5px rgba(0, 0, 0, 0.1)"},children:[k.jsxs("div",{style:{textAlign:"center",marginBottom:"2rem"},children:[k.jsx("img",{src:"/images/rebinmas.webp",alt:"PT Rebinmas Jaya",style:{height:"64px",marginBottom:"1rem"}}),k.jsx("h2",{style:{margin:0,fontSize:"1.5rem",color:"var(--primary-900)"},children:"Sistem Daftar Upah"}),k.jsxs("div",{style:{backgroundColor:"var(--primary-50)",padding:"0.75rem",borderRadius:"6px",marginTop:"1rem",border:"1px solid var(--primary-200)",fontSize:"0.85rem",color:"var(--primary-800)",textAlign:"left"},children:[k.jsx("strong",{children:" Petunjuk:"}),k.jsx("br",{}),"Pilih ",k.jsx("strong",{children:"Periode"}),", ",k.jsx("strong",{children:"Divisi"}),", dan ",k.jsx("strong",{children:"Gang"})," di bawah ini untuk memulai. Deskripsi gang diambil dari database HR untuk memudahkan identifikasi."]})]}),k.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr",gap:"1.5rem"},children:[k.jsx(n$,{month:u,year:h,onChange:(ne,fe)=>{d(ne),p(fe)}}),k.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"0.5rem"},children:[k.jsxs("label",{className:"form-label",style:{fontWeight:"600",fontSize:"0.9rem",color:"var(--text-main)",display:"flex",alignItems:"center",gap:"0.5rem"},children:[k.jsx("span",{style:{fontSize:"1.1rem"},children:c?"":""}),"Divisi ",c&&k.jsx("span",{style:{fontSize:"0.75rem",color:"#f59e0b"},children:"(Terkunci)"})]}),k.jsxs("select",{className:"input-field",style:{height:"48px",fontSize:"1rem",borderColor:c?"#fcd34d":"var(--neutral-300)",borderRadius:"8px",cursor:c?"not-allowed":"pointer",backgroundColor:c?"#fef3c7":void 0},value:f,onChange:ne=>!c&&X(ne.target.value),disabled:c,children:[k.jsx("option",{value:"",children:"-- Pilih Divisi --"}),A.map(ne=>k.jsx("option",{value:ne,children:ne},ne)),c&&l&&!A.includes(l)&&k.jsx("option",{value:l,children:l},l)]})]}),k.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"0.5rem"},children:[k.jsxs("label",{className:"form-label",style:{fontWeight:"600",fontSize:"0.9rem",color:"var(--text-main)",display:"flex",alignItems:"center",gap:"0.5rem"},children:[k.jsx("span",{style:{fontSize:"1.1rem"},children:""}),"Gang / Kemandoran"]}),k.jsx("select",{className:"input-field",style:{height:"48px",fontSize:"1rem",borderColor:"var(--neutral-300)",borderRadius:"8px",cursor:b?"not-allowed":"pointer",opacity:b?.7:1},value:g,onChange:ne=>y(ne.target.value),disabled:b,children:b?k.jsx("option",{children:"Memuat data gang..."}):v.length===0?k.jsx("option",{children:"Pilih divisi terlebih dahulu"}):k.jsxs(k.Fragment,{children:[k.jsx("option",{value:"",children:"-- Pilih Gang --"}),k.jsx("option",{value:"ALL",children:"-- SEMUA GANG --"}),v.map(ne=>k.jsxs("option",{value:ne.gang_code,children:[ne.gang_code," - ",ne.description||"(Tidak ada deskripsi)"]},ne.gang_code))]})})]}),k.jsxs("button",{className:"btn btn-primary",style:{padding:"1rem",fontSize:"1.1rem",fontWeight:"700",borderRadius:"8px",height:"56px",display:"flex",alignItems:"center",justifyContent:"center",gap:"0.5rem",transition:"all 0.2s ease",boxShadow:"0 4px 12px rgba(0, 0, 0, 0.1)"},onClick:ie,disabled:!f||!g||b,children:[k.jsx("span",{style:{fontSize:"1.2rem"},children:""}),b?"Memuat Data...":"Tampilkan Laporan"]}),f&&k.jsxs("button",{className:"btn btn-secondary",style:{padding:"0.75rem",fontSize:"0.95rem",fontWeight:"600",borderRadius:"8px",height:"48px",display:"flex",alignItems:"center",justifyContent:"center",gap:"0.5rem",transition:"all 0.2s ease",marginTop:"0.5rem",border:"2px dashed var(--primary-400)",background:"var(--primary-50)",color:"var(--primary-700)"},onClick:ee,title:"Lihat Summary Report (Grand Total per Gang)",children:[k.jsx("span",{style:{fontSize:"1rem"},children:""}),"Generate Summary Report"]}),k.jsxs(k.Fragment,{children:[k.jsxs("button",{className:"btn btn-secondary",style:{padding:"0.75rem",fontSize:"0.95rem",fontWeight:"600",borderRadius:"8px",height:"48px",display:"flex",alignItems:"center",justifyContent:"center",gap:"0.5rem",transition:"all 0.2s ease",marginTop:"0.5rem",border:"2px dashed #1a365d",background:"#eef2f7",color:"#1a365d"},onClick:oe,title:"Lihat Wages Rebinmas Report (Total Premi per Divisi)",children:[k.jsx("span",{style:{fontSize:"1rem"},children:""}),"Wages Rebinmas Report"]}),k.jsxs("button",{className:"btn btn-secondary",style:{padding:"0.75rem",fontSize:"0.95rem",fontWeight:"600",borderRadius:"8px",height:"48px",display:"flex",alignItems:"center",justifyContent:"center",gap:"0.5rem",transition:"all 0.2s ease",marginTop:"0.5rem",border:"2px dashed #065f46",background:"#ecfdf5",color:"#065f46"},onClick:se,title:"Lihat Wages Report - PT. Impian Jaya Lestari",children:[k.jsx("span",{style:{fontSize:"1rem"},children:""}),"Wages Report (IJL)"]})]})]})]}),k.jsxs("div",{style:{marginTop:"2rem",fontSize:"0.85rem",color:"var(--neutral-500)"},children:["Logged in as ",k.jsx("strong",{style:{color:"var(--neutral-700)"},children:e==null?void 0:e.username})," ",k.jsx("button",{onClick:s,style:{background:"none",border:"none",color:"var(--danger-700)",cursor:"pointer",marginLeft:"0.5rem",textDecoration:"underline"},children:"Logout"})]})]})}function f$({lockedDiv:t}){return k.jsx(b_,{lockedDiv:t})}function g$(){const[t,e]=_e.useState(""),[i,s]=_e.useState(""),[r,n]=_e.useState(""),[o,a]=_e.useState(!1),[l,c]=_e.useState(!1),{login:u}=wc(),d=async h=>{h.preventDefault(),n(""),a(!0),await u(t,i)?(a(!1),c(!0)):(n("Login failed. Please check your credentials."),a(!1))};return k.jsxs("div",{style:{display:"flex",height:"100vh",width:"100vw",background:"#f0fdf4",overflow:"hidden",position:"relative"},children:[l&&k.jsxs("div",{style:{position:"absolute",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(22, 163, 74, 0.95)",zIndex:100,display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center",color:"white",animation:"fadeIn 0.3s ease-out"},children:[k.jsx("div",{style:{fontSize:"4rem",marginBottom:"1rem",animation:"scaleUp 0.5s cubic-bezier(0.175, 0.885, 0.32, 1.275)"},children:""}),k.jsx("h2",{style:{fontSize:"2rem",fontWeight:"bold",marginBottom:"0.5rem"},children:"Login Berhasil!"}),k.jsx("p",{style:{fontSize:"1.1rem",opacity:.9},children:"Mengalihkan ke Dashboard..."})]}),k.jsxs("div",{style:{flex:"1",display:"none",position:"relative",flexDirection:"column",justifyContent:"center",alignItems:"center",background:"linear-gradient(135deg, #16a34a 0%, #14532d 100%)",color:"white",padding:"4rem"},className:"login-sidebar",children:[k.jsx("div",{style:{position:"absolute",top:0,left:0,right:0,bottom:0,backgroundImage:"url(/images/wallpaper_loading_screen.webp)",backgroundSize:"cover",backgroundPosition:"center",opacity:.2,mixBlendMode:"overlay"}}),k.jsxs("div",{style:{position:"relative",zIndex:10,textAlign:"center"},children:[k.jsx("img",{src:"/images/rebinmas.webp",alt:"Logo",style:{height:"120px",marginBottom:"2rem",filter:"drop-shadow(0 10px 15px rgba(0,0,0,0.2))"},onError:h=>h.target.style.display="none"}),k.jsx("h1",{style:{fontSize:"2.5rem",fontWeight:"800",marginBottom:"1rem",letterSpacing:"-0.025em"},children:"PT REBINMAS JAYA"}),k.jsx("p",{style:{fontSize:"1.25rem",color:"#dcfce7",fontWeight:"500"},children:"Sistem Laporan Daftar Upah"})]}),k.jsxs("div",{style:{position:"absolute",bottom:"2rem",fontSize:"0.875rem",color:"#86efac"},children:[" ",new Date().getFullYear()," Plantation Management System"]})]}),k.jsx("div",{style:{flex:"1",display:"flex",justifyContent:"center",alignItems:"center",padding:"2rem",background:"white"},children:k.jsxs("div",{style:{width:"100%",maxWidth:"400px"},children:[k.jsxs("div",{style:{textAlign:"center",marginBottom:"2.5rem"},children:[k.jsx("h2",{style:{fontSize:"1.875rem",fontWeight:"700",color:"#14532d",marginBottom:"0.5rem"},children:"Selamat Datang"}),k.jsx("p",{style:{color:"#64748b"},children:"Silakan login untuk mengakses dashboard"})]}),k.jsxs("form",{onSubmit:d,style:{display:"flex",flexDirection:"column",gap:"1.25rem"},children:[r&&k.jsx("div",{style:{padding:"0.75rem",borderRadius:"0.5rem",backgroundColor:"#fef2f2",color:"#b91c1c",fontSize:"0.875rem",border:"1px solid #fecaca",textAlign:"center"},children:r}),k.jsxs("div",{children:[k.jsx("label",{style:{display:"block",fontSize:"0.875rem",fontWeight:"600",color:"#334155",marginBottom:"0.5rem"},children:"Username"}),k.jsx("input",{type:"text",value:t,onChange:h=>e(h.target.value),className:"input-field",style:{width:"100%",boxSizing:"border-box",height:"44px"},placeholder:"Masukkan username Anda",required:!0})]}),k.jsxs("div",{children:[k.jsx("label",{style:{display:"block",fontSize:"0.875rem",fontWeight:"600",color:"#334155",marginBottom:"0.5rem"},children:"Password"}),k.jsx("input",{type:"password",value:i,onChange:h=>s(h.target.value),className:"input-field",style:{width:"100%",boxSizing:"border-box",height:"44px"},placeholder:"",required:!0})]}),k.jsx("button",{type:"submit",className:"btn btn-primary",style:{width:"100%",height:"48px",fontSize:"1rem",marginTop:"1rem",background:"linear-gradient(to right, #16a34a, #15803d)"},disabled:o,children:o?k.jsxs("span",{style:{display:"flex",alignItems:"center",gap:"0.5rem"},children:[k.jsx("span",{className:"spinner",style:{width:"16px",height:"16px",border:"2px solid white",borderTopColor:"transparent"}}),"Logging in..."]}):"Masuk ke Dashboard"})]})]})}),k.jsx("style",{children:`
        @media (min-width: 768px) {
          .login-sidebar {
            display: flex !important;
          }
        }
      `})]})}const m$=()=>mu()||window.location.pathname.startsWith("/upah")?"/payroll/locked/employee":"/payroll/employee";async function v$(t,e,i,s,r=null){try{const n={month:i,year:s};r&&(n.div=r);const o=m$();return console.log(`[EmployeeDetailService] Using endpoint: ${o}/${e}/checkroll`),(await Dt.get(`${o}/${e}/checkroll`,{headers:{Authorization:`Bearer ${t}`},params:n})).data}catch(n){throw console.error("[EmployeeDetailService] Failed to get employee checkroll:",n),n}}const Ur=t=>t==null?"-":new Intl.NumberFormat("id-ID",{minimumFractionDigits:0,maximumFractionDigits:0}).format(t),y$=t=>["","Januari","Februari","Maret","April","Mei","Juni","Juli","Agustus","September","Oktober","November","Desember"][t]||"",rb={hadir:{bg:"#10b981",text:"#fff",label:"H"},alpa:{bg:"#ef4444",text:"#fff",label:"A"},sakit:{bg:"#f59e0b",text:"#fff",label:"S"},cuti:{bg:"#8b5cf6",text:"#fff",label:"C"},cuti_tahunan:{bg:"#8b5cf6",text:"#fff",label:"C"},cuti_nasional:{bg:"#3b82f6",text:"#fff",label:"L"},minggu:{bg:"#6b7280",text:"#fff",label:"M"},libur:{bg:"#3b82f6",text:"#fff",label:"L"},libur_nasional:{bg:"#3b82f6",text:"#fff",label:"L"},libur_keagamaan:{bg:"#3b82f6",text:"#fff",label:"K"},no_data:{bg:"#e5e7eb",text:"#9ca3af",label:"-"}};function C$({employeeData:t,month:e,year:i,division:s,onBack:r}){var $,J,G,Z,N,P;const{token:n}=wc(),[o,a]=_e.useState(!0),[l,c]=_e.useState(""),[u,d]=_e.useState(null),h=(t==null?void 0:t.nik)||(t==null?void 0:t.NIK)||"";if(_e.useEffect(()=>{async function j(){if(!n||!h){c("Token atau NIK tidak tersedia"),a(!1);return}a(!0),c("");try{const X=await v$(n,h,e,i,s);d(X)}catch(X){console.error("Failed to load checkroll data:",X),c("Gagal memuat data checkroll: "+(X.message||X))}finally{a(!1)}}j()},[n,h,e,i,s]),o)return k.jsx("div",{className:"payslip-wrapper",children:k.jsxs("div",{className:"loading-screen",children:[k.jsx("div",{className:"spinner"}),k.jsx("p",{children:"Memuat slip gaji..."})]})});if(l)return k.jsx("div",{className:"payslip-wrapper",children:k.jsxs("div",{className:"error-screen",children:[k.jsxs("p",{children:[" ",l]}),k.jsx("button",{onClick:r,className:"btn btn-secondary",children:"Kembali"})]})});const p=(u==null?void 0:u.payroll_data)||t||{},f=(u==null?void 0:u.employee)||t||{},m=(u==null?void 0:u.attendance)||{},g=(u==null?void 0:u.overtime)||{},y=j=>{const X=p[j]??f[j];return typeof X=="number"?X:0},v=y("hari_kerja")||y("jumlah_hk"),C=y("upah_dasar")||y("upah_harian"),b=y("upah_pokok")||v*C,T=[{label:"Tunjangan Beras",value:y("beras_jumlah")},{label:"Tunjangan Jabatan",value:y("jabatan_jumlah")},{label:"Tunjangan Masa Kerja",value:y("masa_kerja_jumlah")}].filter(j=>j.value>0),A=[];y("premi_brondol")>0&&A.push({label:"Premi Brondol",value:y("premi_brondol")}),p.premi&&typeof p.premi=="object"?Object.entries(p.premi).forEach(([j,X])=>{if(j!=="premi_brondol"&&X>0){const ie=j.replace(/_/g," ").replace(/premi /i,"").toUpperCase();A.push({label:`Premi ${ie}`,value:X})}}):Object.entries(p).forEach(([j,X])=>{if(j.startsWith("premi_")&&j!=="premi_brondol"&&typeof X=="number"&&X>0){const ie=j.replace("premi_","").replace(/_/g," ").toUpperCase();A.some(ee=>ee.label===`Premi ${ie}`)||A.push({label:`Premi ${ie}`,value:X})}}),y("total_premi");const I=y("lembur_jam"),D=y("lembur_jumlah"),F=[];y("pot_koreksi")>0&&F.push({label:"Koreksi",value:y("pot_koreksi")}),Object.entries(p).forEach(([j,X])=>{if(j.startsWith("koreksi_")&&typeof X=="number"&&X>0){const ie=j.replace("koreksi_","").replace(/_/g," ").toUpperCase();F.push({label:`Koreksi ${ie}`,value:X})}});const B=F.reduce((j,X)=>j+X.value,0),U=y("potongan_upah_kotor_total")||B,H=[{label:"BPJS Kesehatan",value:y("pot_bpjs_kesehatan_pekerja")},{label:"BPJS Pensiun",value:y("pot_bpjs_pensiun_pekerja")},{label:"Astek Pekerja",value:y("pot_astek")||y("pot_astek_jumlah")},{label:"SPSI",value:y("pot_spsi")},{label:"PPh 21",value:y("pot_pph21")}].filter(j=>j.value>0),R=["pot_bpjs_kesehatan_pekerja","pot_bpjs_pensiun_pekerja","pot_astek","pot_astek_jumlah","pot_spsi","pot_pph21","pot_koreksi","potongan_upah_kotor_total","total_potongan","pot_bpjs_kesehatan_majikan","pot_bpjs_pensiun_majikan"];Object.entries(p).forEach(([j,X])=>{if(j.startsWith("pot_")&&!R.includes(j)&&!j.includes("total")&&typeof X=="number"&&X>0){const ie=j.replace("pot_","").replace(/_/g," ").toUpperCase();H.push({label:ie,value:X})}});const L=H.reduce((j,X)=>j+X.value,0),_=y("total_potongan"),w=y("jumlah_upah_kotor"),S=y("upah_bersih"),x=["Minggu","Senin","Selasa","Rabu","Kamis","Jumat","Sabtu"],M=new Date(i,e-1,1).getDay(),O=new Date(i,e,0).getDate(),V=Array.from({length:M},(j,X)=>X),Y=Array.from({length:O},(j,X)=>X+1);return k.jsxs("div",{className:"payslip-wrapper",children:[k.jsxs("div",{className:"payslip-container",children:[k.jsxs("div",{className:"payslip-header",children:[k.jsx("div",{className:"company-logo",children:k.jsx("img",{src:"/images/rebinmas.webp",alt:"Logo",onError:j=>j.target.style.display="none"})}),k.jsxs("div",{className:"company-info",children:[k.jsx("h2",{children:"PT REBINMAS JAYA"}),k.jsx("h3",{children:"SLIP GAJI KARYAWAN"}),k.jsxs("p",{className:"period",children:["Periode: ",y$(e)," ",i]})]}),k.jsxs("div",{className:"payslip-id",children:["NO: ",h,"/",e,i]})]}),k.jsx("hr",{className:"dashed-line"}),k.jsxs("div",{className:"employee-info-grid",children:[k.jsxs("div",{className:"info-row",children:[k.jsx("span",{className:"label",children:"NIK"}),k.jsx("span",{className:"separator",children:":"}),k.jsx("span",{className:"value bold",children:h})]}),k.jsxs("div",{className:"info-row",children:[k.jsx("span",{className:"label",children:"NAMA"}),k.jsx("span",{className:"separator",children:":"}),k.jsx("span",{className:"value bold",children:f.nama||f.EmpName})]}),k.jsxs("div",{className:"info-row",children:[k.jsx("span",{className:"label",children:"JABATAN"}),k.jsx("span",{className:"separator",children:":"}),k.jsx("span",{className:"value",children:f.jabatan||"-"})]}),k.jsxs("div",{className:"info-row",children:[k.jsx("span",{className:"label",children:"UNIT/GANG"}),k.jsx("span",{className:"separator",children:":"}),k.jsxs("span",{className:"value",children:[f.gang_code||f.GangCode," (",s,")"]})]}),k.jsxs("div",{className:"info-row",children:[k.jsx("span",{className:"label",children:"STATUS"}),k.jsx("span",{className:"separator",children:":"}),k.jsx("span",{className:"value",children:f.status_karyawan||""})]}),k.jsxs("div",{className:"info-row",children:[k.jsx("span",{className:"label",children:"HK / RATE"}),k.jsx("span",{className:"separator",children:":"}),k.jsxs("span",{className:"value",children:[v," Hari / ",Ur(C)]})]})]}),k.jsx("hr",{className:"dashed-line"}),k.jsxs("div",{className:"payslip-content",children:[k.jsxs("div",{className:"content-column",children:[k.jsx("h4",{className:"column-title",children:"PENERIMAAN (EARNINGS)"}),k.jsxs("table",{className:"details-table",children:[k.jsxs("tbody",{children:[k.jsxs("tr",{children:[k.jsx("td",{className:"item-name",children:"Gaji Pokok"}),k.jsx("td",{className:"item-amount",children:Ur(b)})]}),T.length>0&&k.jsxs(k.Fragment,{children:[k.jsx("tr",{className:"group-header",children:k.jsx("td",{colSpan:"2",children:"Tunjangan:"})}),T.map((j,X)=>k.jsxs("tr",{children:[k.jsxs("td",{className:"item-name indent",children:["- ",j.label]}),k.jsx("td",{className:"item-amount",children:Ur(j.value)})]},`tunj-${X}`))]}),A.length>0&&k.jsxs(k.Fragment,{children:[k.jsx("tr",{className:"group-header",children:k.jsx("td",{colSpan:"2",children:"Premi:"})}),A.map((j,X)=>k.jsxs("tr",{children:[k.jsxs("td",{className:"item-name indent",children:["- ",j.label]}),k.jsx("td",{className:"item-amount",children:Ur(j.value)})]},`prem-${X}`))]}),D>0&&k.jsxs("tr",{children:[k.jsxs("td",{className:"item-name",children:["Lembur (",I," Jam)"]}),k.jsx("td",{className:"item-amount",children:Ur(D)})]})]}),k.jsx("tfoot",{children:k.jsxs("tr",{className:"subtotal-row",children:[k.jsx("td",{children:"TOTAL KOTOR"}),k.jsx("td",{children:Ur(w)})]})})]})]}),k.jsx("div",{className:"vertical-line"}),k.jsxs("div",{className:"content-column",children:[k.jsx("h4",{className:"column-title",children:"POTONGAN (DEDUCTIONS)"}),k.jsxs("table",{className:"details-table",children:[k.jsxs("tbody",{children:[F.length>0&&k.jsxs(k.Fragment,{children:[k.jsx("tr",{className:"group-header",children:k.jsx("td",{colSpan:"2",children:"Potongan Upah Kotor:"})}),F.map((j,X)=>k.jsxs("tr",{children:[k.jsxs("td",{className:"item-name indent",children:["- ",j.label]}),k.jsx("td",{className:"item-amount red-text",children:Ur(j.value)})]},`pot-kotor-${X}`)),k.jsxs("tr",{className:"sub-subtotal-row",children:[k.jsx("td",{className:"indent",children:k.jsx("i",{children:"Subtotal Pot. Kotor"})}),k.jsx("td",{className:"red-text",children:k.jsx("i",{children:Ur(U)})})]})]}),H.length>0&&k.jsxs(k.Fragment,{children:[k.jsx("tr",{className:"group-header",children:k.jsx("td",{colSpan:"2",children:"Potongan Upah Bersih:"})}),H.map((j,X)=>k.jsxs("tr",{children:[k.jsxs("td",{className:"item-name indent",children:["- ",j.label]}),k.jsx("td",{className:"item-amount red-text",children:Ur(j.value)})]},`pot-bersih-${X}`)),k.jsxs("tr",{className:"sub-subtotal-row",children:[k.jsx("td",{className:"indent",children:k.jsx("i",{children:"Subtotal Pot. Bersih"})}),k.jsx("td",{className:"red-text",children:k.jsx("i",{children:Ur(L)})})]})]})]}),k.jsx("tfoot",{children:k.jsxs("tr",{className:"subtotal-row",children:[k.jsx("td",{children:"TOTAL POTONGAN"}),k.jsx("td",{className:"red-text",children:Ur(_)})]})})]})]})]}),k.jsx("hr",{className:"dashed-line"}),k.jsxs("div",{className:"thp-section",children:[k.jsx("div",{className:"thp-label",children:"PENERIMAAN BERSIH (TAKE HOME PAY)"}),k.jsxs("div",{className:"thp-amount",children:["Rp ",Ur(S)]}),k.jsxs("div",{className:"thp-terbilang",children:["Ref: ",h," / ",s]})]}),k.jsxs("div",{className:"payslip-footer",children:[k.jsxs("div",{className:"signatures",children:[k.jsxs("div",{className:"sig-box",children:[k.jsx("p",{children:"Dibuat Oleh,"}),k.jsx("br",{}),k.jsx("br",{}),k.jsx("br",{}),k.jsx("p",{children:"( Estate Clerk )"})]}),k.jsxs("div",{className:"sig-box",children:[k.jsx("p",{children:"Diperiksa Oleh,"}),k.jsx("br",{}),k.jsx("br",{}),k.jsx("br",{}),k.jsx("p",{children:"( Assistant )"})]}),k.jsxs("div",{className:"sig-box",children:[k.jsx("p",{children:"Disetujui Oleh,"}),k.jsx("br",{}),k.jsx("br",{}),k.jsx("br",{}),k.jsx("p",{children:"( Estate Manager )"})]}),k.jsxs("div",{className:"sig-box",children:[k.jsx("p",{children:"Diterima Oleh,"}),k.jsx("br",{}),k.jsx("br",{}),k.jsx("br",{}),k.jsxs("p",{children:["( ",f.nama||"Karyawan"," )"]})]})]}),k.jsxs("div",{className:"timestamp",children:["Dicetak pada: ",new Date().toLocaleString("id-ID")]})]})]}),k.jsxs("div",{className:"matrix-sections-container",children:[k.jsxs("div",{className:"matrix-card",children:[k.jsxs("div",{className:"matrix-header gradient-header-blue",children:[k.jsx("h3",{children:" Matriks Kehadiran"}),k.jsx("div",{className:"legend",children:[{key:"hadir",label:"Hadir"},{key:"alpa",label:"Alpa"},{key:"sakit",label:"Sakit"},{key:"cuti",label:"Cuti"},{key:"minggu",label:"Minggu"},{key:"libur",label:"Libur"},{key:"libur_keagamaan",label:"Libur Kemenag"}].map(({key:j,label:X})=>{var ie,ee;return k.jsxs("span",{className:"legend-item",children:[k.jsx("span",{className:"legend-dot",style:{background:((ie=rb[j])==null?void 0:ie.bg)||"#e5e7eb"},children:((ee=rb[j])==null?void 0:ee.label)||"-"}),k.jsx("span",{children:X})]},j)})})]}),k.jsx("div",{className:"calendar-matrix-container",children:k.jsxs("div",{className:"calendar-matrix",children:[x.map(j=>k.jsx("div",{className:"calendar-day-header",children:j},`header-${j}`)),V.map(j=>k.jsx("div",{className:"calendar-cell empty"},`blank-${j}`)),Y.map(j=>{var ee;const X=((ee=m.matrix)==null?void 0:ee[j])||{status:"no_data"},ie=rb[X.status]||rb.no_data;return k.jsxs("div",{className:"calendar-cell",style:{background:ie.bg,color:ie.text},title:`Tanggal ${j}: ${X.status}${X.remarks?` - ${X.remarks}`:""}`,children:[k.jsx("div",{className:"calendar-date",children:j}),k.jsx("div",{className:"calendar-status",children:ie.label})]},`cell-${j}`)})]})}),k.jsxs("div",{className:"attendance-summary",children:[k.jsxs("div",{className:"summary-item success",children:[k.jsx("span",{className:"summary-value",children:(($=m.summary)==null?void 0:$.total_hadir)||0}),k.jsx("span",{className:"summary-label",children:"Hadir"})]}),k.jsxs("div",{className:"summary-item warning",children:[k.jsx("span",{className:"summary-value",children:((J=m.summary)==null?void 0:J.cuti_tahunan)||0}),k.jsx("span",{className:"summary-label",children:"Cuti"})]}),k.jsxs("div",{className:"summary-item info",children:[k.jsx("span",{className:"summary-value",children:((G=m.summary)==null?void 0:G.cuti_sakit)||0}),k.jsx("span",{className:"summary-label",children:"Sakit"})]}),k.jsxs("div",{className:"summary-item danger",children:[k.jsx("span",{className:"summary-value",children:((Z=m.summary)==null?void 0:Z.alpa)||0}),k.jsx("span",{className:"summary-label",children:"Alpa"})]})]})]}),k.jsxs("div",{className:"matrix-card",children:[k.jsxs("div",{className:"matrix-header gradient-header-purple",children:[k.jsx("h3",{children:" Matriks Lembur"}),k.jsxs("div",{className:"overtime-total",children:["Total: ",k.jsx("strong",{children:((N=g.summary)==null?void 0:N.total_hours)||0})," jam = ",k.jsxs("strong",{children:["RP ",Ur(((P=g.list)==null?void 0:P.reduce((j,X)=>j+(X.amount_formula||0),0))||0)]})]})]}),k.jsx("div",{className:"calendar-matrix-container",children:k.jsxs("div",{className:"calendar-matrix overtime-matrix",children:[x.map(j=>k.jsx("div",{className:"calendar-day-header",children:j},`ot-header-${j}`)),V.map(j=>k.jsx("div",{className:"calendar-cell empty"},`ot-blank-${j}`)),Y.map(j=>{var ie;const X=((ie=g.matrix)==null?void 0:ie[j])||{has_overtime:!1,hours:0};return k.jsxs("div",{className:`calendar-cell overtime-cell ${X.has_overtime?"has-overtime":""}`,title:X.has_overtime?`Tanggal ${j}: ${X.hours} jam`:`Tanggal ${j}: Tidak ada lembur`,children:[k.jsx("div",{className:"calendar-date",children:j}),X.has_overtime&&k.jsxs("div",{className:"calendar-status",children:[X.hours," Jam"]})]},`ot-cell-${j}`)})]})}),g.list&&g.list.length>0&&k.jsxs("div",{className:"overtime-list",children:[k.jsx("h4",{children:" Rincian Lembur"}),k.jsxs("table",{className:"overtime-table",children:[k.jsx("thead",{children:k.jsxs("tr",{children:[k.jsx("th",{children:"Tanggal"}),k.jsx("th",{children:"Hari"}),k.jsx("th",{children:"Tipe Hari"}),k.jsx("th",{children:"Jam"}),k.jsx("th",{children:"Rate"}),k.jsx("th",{children:"Amount"})]})}),k.jsx("tbody",{children:g.list.map((j,X)=>k.jsxs("tr",{children:[k.jsx("td",{children:j.date}),k.jsx("td",{children:j.day_name||"-"}),k.jsx("td",{children:k.jsx("span",{className:"day-type-badge",children:j.day_type})}),k.jsx("td",{children:j.hours}),k.jsx("td",{children:Ur(j.rate)}),k.jsx("td",{className:"amount-cell",children:Ur(j.amount_formula)})]},X))})]})]})]})]}),k.jsxs("div",{className:"action-buttons no-print",children:[k.jsx("button",{onClick:r,className:"btn btn-secondary",children:"Tutup / Kembali"}),k.jsx("button",{onClick:()=>window.print(),className:"btn btn-primary",children:" Cetak Slip Gaji"})]})]})}function b$(){const{token:t,loading:e}=wc(),[i,s]=_e.useState(null);return _e.useEffect(()=>{const r=new URLSearchParams(window.location.search),n=r.get("nik"),o=n?n.trim():null,a=parseInt(r.get("month")||"0",10),l=parseInt(r.get("year")||"0",10),c=r.get("division"),u=c&&c!=="undefined"&&c!=="null"?c:null;o&&o!=="undefined"&&o!=="null"&&a&&l?(console.log(`[EmployeeDetailRoute] Params: nik=${o}, month=${a}, year=${l}, div=${u}`),s({nik:o,month:a,year:l,division:u})):console.error("[EmployeeDetailRoute] Invalid params:",{rawNik:n,nik:o,month:a,year:l,division:u})},[]),e?k.jsx(ry,{isLoading:!0,message:"Authenticating..."}):i?k.jsx("div",{style:{height:"100vh",width:"100vw",overflow:"auto",backgroundColor:"#e5e7eb"},children:k.jsx(C$,{employeeData:{nik:i.nik},month:i.month,year:i.year,division:i.division,onBack:()=>window.close()})}):k.jsxs("div",{style:{height:"100vh",display:"flex",alignItems:"center",justifyContent:"center",flexDirection:"column",color:"#666"},children:[k.jsx("h3",{children:"Parameter tidak lengkap"}),k.jsx("p",{children:"Harap akses halaman ini melalui Laporan Upah."})]})}function w$(){const[t,e]=_e.useState(()=>({div:new URLSearchParams(window.location.search).get("div")}));return _e.useEffect(()=>{const i=()=>{const s=new URLSearchParams(window.location.search);e({div:s.get("div")})};return window.addEventListener("popstate",i),()=>window.removeEventListener("popstate",i)},[]),t}function S$(){const{isAuthenticated:t,loading:e,isExternalAuth:i,lockedDivision:s,user:r}=wc(),n=w$(),o=mu(),a=(r==null?void 0:r.isAdmin)===!0||(r==null?void 0:r.role)&&r.role.toUpperCase()==="ADMIN"||(r==null?void 0:r.divisi)&&r.divisi.toUpperCase()==="ALL",l=_e.useMemo(()=>{if(a)return console.log("[App] Admin user detected, no locked division"),null;if(o){const d=kw();return console.log(`[App] Prod mode: division from localStorage = ${d}`),d||s||n.div||null}return n.div||s||null},[o,n.div,s,a]);if(_e.useEffect(()=>{(async()=>{try{await Dt.get("/dev-mode",{timeout:5e3})}catch(d){console.warn("Backend connection check failed:",d)}})()},[]),_e.useEffect(()=>{if(!e){const d=window.location.pathname;if(t)d==="/login"&&window.history.replaceState(null,"","/"+window.location.search);else{if(o){console.log("[App] Prod mode: Not authenticated, redirecting to external login"),d.includes("/login")||Hz();return}d!=="/login"&&window.history.replaceState(null,"","/login"+window.location.search)}}},[t,e,o]),e)return k.jsx(ry,{isLoading:!0,message:"Menyiapkan sistem..."});if(!t)return o?k.jsx(ry,{isLoading:!0,message:"Mengalihkan ke halaman login..."}):k.jsx(g$,{});const c=window.location.pathname;if((c.startsWith("/upah")?c.replace("/upah",""):c).startsWith("/employee/detail"))return k.jsx(b$,{});if(a)return console.log("[App] Admin user: Rendering MainPage with full access"),k.jsx(b_,{});if(o||l){const d=l||kw()||"";return console.log(`[App] Rendering LockedMainPage with division: ${d} (Prod Mode: ${o})`),k.jsx(f$,{lockedDiv:d})}return k.jsx(b_,{})}function x$(){return k.jsx(jz,{children:k.jsx(S$,{})})}const Ip={},E$=()=>Ip!=null&&Ip.VITE_BACKEND_URL?void 0:(Ip==null?void 0:Ip.VITE_PROXY_MODE)==="true"?(console.log(" Explicit proxy mode enabled via VITE_PROXY_MODE, using relative path /backend/upah"),"/backend/upah"):window.location.port==="3001"||window.location.pathname.startsWith("/upah")?(console.log(" Proxy gateway detected, using relative path /backend/upah"),"/backend/upah"):(console.log(" using relative backend path (via proxy)"),""),C3=E$();Dt.defaults.baseURL=C3;console.log(" HTTP Setup - Backend URL:",C3);console.log(" Current Frontend Host:",window.location.hostname);Dt.defaults.withCredentials=!0;Dt.interceptors.request.use(async t=>{try{const e=Date.now();t.meta=Object.assign({},t.meta,{start:e});const i=(t.baseURL||"")+(t.url||""),s=(t.method||"get").toUpperCase(),r=t.params||{};console.log(`[HTTP] -> ${s} ${i}`,{params:r,headers:Object.keys(t.headers||{})})}catch{}return t});Dt.interceptors.response.use(t=>{var e,i,s,r,n;try{const o=((i=(e=t.config)==null?void 0:e.meta)==null?void 0:i.start)||Date.now(),a=Date.now()-o,l=(((s=t.config)==null?void 0:s.baseURL)||"")+(((r=t.config)==null?void 0:r.url)||""),c=(((n=t.config)==null?void 0:n.method)||"get").toUpperCase();console.log(`[HTTP] <- ${c} ${l} ${t.status} ${a}ms`,{length:Array.isArray(t.data)?t.data.length:void 0})}catch{}return t},async t=>{var e,i;try{const s=t.config||{},r=(s.baseURL||"")+(s.url||""),n=(s.method||"get").toUpperCase(),o=((e=s.meta)==null?void 0:e.start)||Date.now(),a=Date.now()-o;console.error(`[HTTP] !! ${n} ${r} ${((i=t==null?void 0:t.response)==null?void 0:i.status)||"ERR"} ${a}ms`,{message:t.message})}catch{}return Promise.reject(t)});var zR=Object.defineProperty,T$=Object.defineProperties,_$=Object.getOwnPropertyDescriptor,A$=Object.getOwnPropertyDescriptors,Nw=Object.getOwnPropertySymbols,b3=Object.prototype.hasOwnProperty,w3=Object.prototype.propertyIsEnumerable,lF=(t,e,i)=>e in t?zR(t,e,{enumerable:!0,configurable:!0,writable:!0,value:i}):t[e]=i,it=(t,e)=>{for(var i in e||(e={}))b3.call(e,i)&&lF(t,i,e[i]);if(Nw)for(var i of Nw(e))w3.call(e,i)&&lF(t,i,e[i]);return t},$i=(t,e)=>T$(t,A$(e)),R$=(t,e)=>{var i={};for(var s in t)b3.call(t,s)&&e.indexOf(s)<0&&(i[s]=t[s]);if(t!=null&&Nw)for(var s of Nw(t))e.indexOf(s)<0&&w3.call(t,s)&&(i[s]=t[s]);return i},ar=(t,e)=>{for(var i in e)zR(t,i,{get:e[i],enumerable:!0})},z=(t,e,i,s)=>{for(var r=s>1?void 0:s?_$(e,i):e,n=t.length-1,o;n>=0;n--)(o=t[n])&&(r=(s?o(e,i,r):o(r))||r);return s&&r&&zR(e,i,r),r},oa=(t,e)=>(i,s)=>e(i,s,t),S3={};ar(S3,{attrToBoolean:()=>Ow,attrToNumber:()=>vu,attrToString:()=>M$,defaultComparator:()=>D$,exists:()=>Pe,jsonEquals:()=>w_,makeNull:()=>tl,missing:()=>St,missingOrEmpty:()=>Mo,toStringOrNull:()=>ny,values:()=>ah});function tl(t){return t==null||t===""?null:t}function Pe(t,e=!1){return t!=null&&(t!==""||e)}function St(t){return!Pe(t)}function Mo(t){return t==null||t.length===0}function ny(t){return t!=null&&typeof t.toString=="function"?t.toString():null}function vu(t){if(t===void 0)return;if(t===null||t==="")return null;if(typeof t=="number")return isNaN(t)?void 0:t;const e=parseInt(t,10);return isNaN(e)?void 0:e}function Ow(t){if(t!==void 0)return t===null||t===""?!1:typeof t=="boolean"?t:/true/i.test(t)}function M$(t){if(!(t==null||t===""))return t}function w_(t,e){const i=t?JSON.stringify(t):null,s=e?JSON.stringify(e):null;return i===s}function D$(t,e,i=!1){const s=t==null,r=e==null;if(t&&t.toNumber&&(t=t.toNumber()),e&&e.toNumber&&(e=e.toNumber()),s&&r)return 0;if(s)return-1;if(r)return 1;function n(o,a){return o>a?1:o<a?-1:0}if(typeof t!="string"||!i)return n(t,e);try{return t.localeCompare(e)}catch{return n(t,e)}}function ah(t){if(t instanceof Set||t instanceof Map){const e=[];return t.forEach(i=>e.push(i)),e}return Object.values(t)}var x3=class{constructor(){this.existingKeys={}}addExistingKeys(t){for(let e=0;e<t.length;e++)this.existingKeys[t[e]]=!0}getUniqueKey(t,e){t=ny(t);let i=0;for(;;){let s;if(t?(s=t,i!==0&&(s+="_"+i)):e?(s=e,i!==0&&(s+="_"+i)):s=i,!this.existingKeys[s])return this.existingKeys[s]=!0,String(s);i++}}},E3={};ar(E3,{SKIP_JS_BUILTINS:()=>tx,cloneObject:()=>$R,deepCloneDefinition:()=>Gw,getAllValuesInObject:()=>_u,getValueUsingField:()=>Df,isNonNullObject:()=>Bw,iterateObject:()=>Pr,mergeDeep:()=>wn,removeAllReferences:()=>T3});var tx=new Set(["__proto__","constructor","prototype"]);function Pr(t,e){if(t!=null){if(Array.isArray(t)){for(let i=0;i<t.length;i++)e(i.toString(),t[i]);return}for(const[i,s]of Object.entries(t))e(i,s)}}function $R(t){const e={},i=Object.keys(t);for(let s=0;s<i.length;s++){if(tx.has(i[s]))continue;const r=i[s],n=t[r];e[r]=n}return e}function Gw(t,e){if(!t)return;const i=t,s={};return Object.keys(i).forEach(r=>{if(e&&e.indexOf(r)>=0||tx.has(r))return;const n=i[r];Bw(n)&&n.constructor===Object?s[r]=Gw(n):s[r]=n}),s}function _u(t){if(!t)return[];const e=Object;if(typeof e.values=="function")return e.values(t);const i=[];for(const s in t)t.hasOwnProperty(s)&&t.propertyIsEnumerable(s)&&i.push(t[s]);return i}function wn(t,e,i=!0,s=!1){Pe(e)&&Pr(e,(r,n)=>{if(tx.has(r))return;let o=t[r];o!==n&&(s&&o==null&&n!=null&&typeof n=="object"&&n.constructor===Object&&(o={},t[r]=o),Bw(n)&&Bw(o)&&!Array.isArray(o)?wn(o,n,i,s):(i||n!==void 0)&&(t[r]=n))})}function Df(t,e,i){if(!e||!t)return;if(!i)return t[e];const s=e.split(".");let r=t;for(let n=0;n<s.length;n++){if(r==null)return;r=r[s[n]]}return r}function T3(t,e=[],i){Object.keys(t).forEach(o=>{typeof t[o]=="object"&&!e.includes(o)&&(t[o]=void 0)});const s=Object.getPrototypeOf(t),r={},n=o=>`AG Grid: Grid API function ${o}() cannot be called as the grid has been destroyed.
    It is recommended to remove local references to the grid api. Alternatively, check gridApi.isDestroyed() to avoid calling methods against a destroyed grid.
    To run logic when the grid is about to be destroyed use the gridPreDestroy event. See: ${i}`;Object.getOwnPropertyNames(s).forEach(o=>{if(typeof s[o]=="function"&&!e.includes(o)){const l=()=>{console.warn(n(o))};r[o]={value:l,writable:!0}}}),Object.defineProperties(t,r)}function Bw(t){return typeof t=="object"&&t!==null}var _3={};ar(_3,{compose:()=>P$,debounce:()=>qr,doOnce:()=>eg,errorOnce:()=>aa,executeAfter:()=>R3,executeInAWhile:()=>A3,executeNextVMTurn:()=>S_,getFunctionName:()=>ix,isFunction:()=>sx,noop:()=>I$,throttle:()=>x_,waitUntil:()=>KR,warnOnce:()=>ot});var cF={};function eg(t,e){cF[e]||(t(),cF[e]=!0)}function ot(t){eg(()=>console.warn("AG Grid: "+t),t)}function aa(t){eg(()=>console.error("AG Grid: "+t),t)}function ix(t){if(t.name)return t.name;const e=/function\s+([^\(]+)/.exec(t.toString());return e&&e.length===2?e[1].trim():null}function sx(t){return!!(t&&t.constructor&&t.call&&t.apply)}function A3(t){R3(t,400)}var F1=[],L1=!1;function S_(t){F1.push(t),!L1&&(L1=!0,window.setTimeout(()=>{const e=F1.slice();F1.length=0,L1=!1,e.forEach(i=>i())},0))}function R3(t,e=0){t.length>0&&window.setTimeout(()=>t.forEach(i=>i()),e)}function qr(t,e){let i;return function(...s){const r=this;window.clearTimeout(i),i=window.setTimeout(function(){t.apply(r,s)},e)}}function x_(t,e){let i=0;return function(...s){const r=this,n=new Date().getTime();n-i<e||(i=n,t.apply(r,s))}}function KR(t,e,i=100,s){const r=new Date().getTime();let n=null,o=!1;const a=()=>{const l=new Date().getTime()-r>i;(t()||l)&&(e(),o=!0,n!=null&&(window.clearInterval(n),n=null),l&&s&&console.warn(s))};a(),o||(n=window.setInterval(a,10))}function P$(...t){return e=>t.reduce((i,s)=>s(i),e)}var I$=()=>{},Ut=(t=>(t.CommunityCoreModule="@ag-grid-community/core",t.InfiniteRowModelModule="@ag-grid-community/infinite-row-model",t.ClientSideRowModelModule="@ag-grid-community/client-side-row-model",t.CsvExportModule="@ag-grid-community/csv-export",t.EnterpriseCoreModule="@ag-grid-enterprise/core",t.RowGroupingModule="@ag-grid-enterprise/row-grouping",t.ColumnsToolPanelModule="@ag-grid-enterprise/column-tool-panel",t.FiltersToolPanelModule="@ag-grid-enterprise/filter-tool-panel",t.MenuModule="@ag-grid-enterprise/menu",t.SetFilterModule="@ag-grid-enterprise/set-filter",t.MultiFilterModule="@ag-grid-enterprise/multi-filter",t.StatusBarModule="@ag-grid-enterprise/status-bar",t.SideBarModule="@ag-grid-enterprise/side-bar",t.RangeSelectionModule="@ag-grid-enterprise/range-selection",t.MasterDetailModule="@ag-grid-enterprise/master-detail",t.RichSelectModule="@ag-grid-enterprise/rich-select",t.GridChartsModule="@ag-grid-enterprise/charts",t.ViewportRowModelModule="@ag-grid-enterprise/viewport-row-model",t.ServerSideRowModelModule="@ag-grid-enterprise/server-side-row-model",t.ExcelExportModule="@ag-grid-enterprise/excel-export",t.ClipboardModule="@ag-grid-enterprise/clipboard",t.SparklinesModule="@ag-grid-enterprise/sparklines",t.AdvancedFilterModule="@ag-grid-enterprise/advanced-filter",t.AngularModule="@ag-grid-community/angular",t.ReactModule="@ag-grid-community/react",t.VueModule="@ag-grid-community/vue",t))(Ut||{}),rx=class Ai{static register(e){Ai.__register(e,!0,void 0)}static registerModules(e){Ai.__registerModules(e,!0,void 0)}static __register(e,i,s){Ai.runVersionChecks(e),s!==void 0?(Ai.areGridScopedModules=!0,Ai.gridModulesMap[s]===void 0&&(Ai.gridModulesMap[s]={}),Ai.gridModulesMap[s][e.moduleName]=e):Ai.globalModulesMap[e.moduleName]=e,Ai.setModuleBased(i)}static __unRegisterGridModules(e){delete Ai.gridModulesMap[e]}static __registerModules(e,i,s){Ai.setModuleBased(i),e&&e.forEach(r=>Ai.__register(r,i,s))}static isValidModuleVersion(e){const[i,s]=e.version.split(".")||[],[r,n]=Ai.currentModuleVersion.split(".")||[];return i===r&&s===n}static runVersionChecks(e){if(Ai.currentModuleVersion||(Ai.currentModuleVersion=e.version),e.version?Ai.isValidModuleVersion(e)||console.error(`AG Grid: You are using incompatible versions of AG Grid modules. Major and minor versions should always match across modules. '${e.moduleName}' is version ${e.version} but the other modules are version ${this.currentModuleVersion}. Please update all modules to the same version.`):console.error(`AG Grid: You are using incompatible versions of AG Grid modules. Major and minor versions should always match across modules. '${e.moduleName}' is incompatible. Please update all modules to the same version.`),e.validate){const i=e.validate();i.isValid||console.error(`AG Grid: ${i.message}`)}}static setModuleBased(e){Ai.moduleBased===void 0?Ai.moduleBased=e:Ai.moduleBased!==e&&eg(()=>{console.warn("AG Grid: You are mixing modules (i.e. @ag-grid-community/core) and packages (ag-grid-community) - you can only use one or the other of these mechanisms."),console.warn("Please see https://www.ag-grid.com/javascript-grid/modules/ for more information.")},"ModulePackageCheck")}static __setIsBundled(){Ai.isBundled=!0}static __assertRegistered(e,i,s){var r;if(this.__isRegistered(e,s))return!0;const n=i+e;let o;if(Ai.isBundled)o=`AG Grid: unable to use ${i} as 'ag-grid-enterprise' has not been loaded. Check you are using the Enterprise bundle:
        
        <script src="https://cdn.jsdelivr.net/npm/ag-grid-enterprise@AG_GRID_VERSION/dist/ag-grid-enterprise.min.js"><\/script>
        
For more info see: https://ag-grid.com/javascript-data-grid/getting-started/#getting-started-with-ag-grid-enterprise`;else if(Ai.moduleBased||Ai.moduleBased===void 0){let a=(r=Object.entries(Ut).find(([l,c])=>c===e))==null?void 0:r[0];o=`AG Grid: unable to use ${i} as the ${a} is not registered${Ai.areGridScopedModules?` for gridId: ${s}`:""}. Check if you have registered the module:
           
    import { ModuleRegistry } from '@ag-grid-community/core';
    import { ${a} } from '${e}';
    
    ModuleRegistry.registerModules([ ${a} ]);

For more info see: https://www.ag-grid.com/javascript-grid/modules/`}else o=`AG Grid: unable to use ${i} as package 'ag-grid-enterprise' has not been imported. Check that you have imported the package:
            
    import 'ag-grid-enterprise';`;return eg(()=>{console.warn(o)},n),!1}static __isRegistered(e,i){var s;return!!Ai.globalModulesMap[e]||!!((s=Ai.gridModulesMap[i])!=null&&s[e])}static __getRegisteredModules(e){return[...ah(Ai.globalModulesMap),...ah(Ai.gridModulesMap[e]||{})]}static __getGridRegisteredModules(e){var i;return ah((i=Ai.gridModulesMap[e])!=null?i:{})||[]}static __isPackageBased(){return!Ai.moduleBased}};rx.globalModulesMap={};rx.gridModulesMap={};rx.areGridScopedModules=!1;var vt=rx,M3=class{constructor(t,e){if(this.beanWrappers={},this.destroyed=!1,!t||!t.beanClasses)return;this.contextParams=t,this.logger=e,this.logger.log(">> creating ag-Application Context"),this.createBeans();const i=this.getBeanInstances();this.wireBeans(i),this.logger.log(">> ag-Application Context ready - component is alive")}getBeanInstances(){return ah(this.beanWrappers).map(t=>t.beanInstance)}createBean(t,e){if(!t)throw Error("Can't wire to bean since it is null");return this.wireBeans([t],e),t}wireBeans(t,e){this.autoWireBeans(t),this.methodWireBeans(t),this.callLifeCycleMethods(t,"preConstructMethods"),Pe(e)&&t.forEach(e),this.callLifeCycleMethods(t,"postConstructMethods")}createBeans(){this.contextParams.beanClasses.forEach(this.createBeanWrapper.bind(this)),Pr(this.beanWrappers,(e,i)=>{let s;i.bean.__agBeanMetaData&&i.bean.__agBeanMetaData.autowireMethods&&i.bean.__agBeanMetaData.autowireMethods.agConstructor&&(s=i.bean.__agBeanMetaData.autowireMethods.agConstructor);const r=this.getBeansForParameters(s,i.bean.name),n=new(i.bean.bind.apply(i.bean,[null,...r]));i.beanInstance=n});const t=Object.keys(this.beanWrappers).join(", ");this.logger.log(`created beans: ${t}`)}createBeanWrapper(t){const e=t.__agBeanMetaData;if(!e){let s;t.prototype.constructor?s=ix(t.prototype.constructor):s=""+t,console.error(`Context item ${s} is not a bean`);return}const i={bean:t,beanInstance:null,beanName:e.beanName};this.beanWrappers[e.beanName]=i}autoWireBeans(t){t.forEach(e=>{this.forEachMetaDataInHierarchy(e,(i,s)=>{const r=i.agClassAttributes;r&&r.forEach(n=>{const o=this.lookupBeanInstance(s,n.beanName,n.optional);e[n.attributeName]=o})})})}methodWireBeans(t){t.forEach(e=>{this.forEachMetaDataInHierarchy(e,(i,s)=>{Pr(i.autowireMethods,(r,n)=>{if(r==="agConstructor")return;const o=this.getBeansForParameters(n,s);e[r].apply(e,o)})})})}forEachMetaDataInHierarchy(t,e){let i=Object.getPrototypeOf(t);for(;i!=null;){const s=i.constructor;if(s.hasOwnProperty("__agBeanMetaData")){const r=s.__agBeanMetaData,n=this.getBeanName(s);e(r,n)}i=Object.getPrototypeOf(i)}}getBeanName(t){if(t.__agBeanMetaData&&t.__agBeanMetaData.beanName)return t.__agBeanMetaData.beanName;const e=t.toString();return e.substring(9,e.indexOf("("))}getBeansForParameters(t,e){const i=[];return t&&Pr(t,(s,r)=>{const n=this.lookupBeanInstance(e,r);i[Number(s)]=n}),i}lookupBeanInstance(t,e,i=!1){if(this.destroyed)return this.logger.log(`AG Grid: bean reference ${e} is used after the grid is destroyed!`),null;if(e==="context")return this;if(this.contextParams.providedBeanInstances&&this.contextParams.providedBeanInstances.hasOwnProperty(e))return this.contextParams.providedBeanInstances[e];const s=this.beanWrappers[e];return s?s.beanInstance:(i||console.error(`AG Grid: unable to find bean reference ${e} while initialising ${t}`),null)}callLifeCycleMethods(t,e){t.forEach(i=>this.callLifeCycleMethodsOnBean(i,e))}callLifeCycleMethodsOnBean(t,e,i){const s={};this.forEachMetaDataInHierarchy(t,n=>{const o=n[e];o&&o.forEach(a=>{a!=i&&(s[a]=!0)})}),Object.keys(s).forEach(n=>t[n]())}getBean(t){return this.lookupBeanInstance("getBean",t,!0)}destroy(){if(this.destroyed)return;this.destroyed=!0,this.logger.log(">> Shutting down ag-Application Context");const t=this.getBeanInstances();this.destroyBeans(t),this.contextParams.providedBeanInstances=null,vt.__unRegisterGridModules(this.contextParams.gridId),this.logger.log(">> ag-Application Context shut down - component is dead")}destroyBean(t){t&&this.destroyBeans([t])}destroyBeans(t){return t?(t.forEach(e=>{this.callLifeCycleMethodsOnBean(e,"preDestroyMethods","destroy");const i=e;typeof i.destroy=="function"&&i.destroy()}),[]):[]}isDestroyed(){return this.destroyed}getGridId(){return this.contextParams.gridId}};function Wh(t,e,i){const s=Sh(t.constructor);s.preConstructMethods||(s.preConstructMethods=[]),s.preConstructMethods.push(e)}function de(t,e,i){const s=Sh(t.constructor);s.postConstructMethods||(s.postConstructMethods=[]),s.postConstructMethods.push(e)}function Hi(t,e,i){const s=Sh(t.constructor);s.preDestroyMethods||(s.preDestroyMethods=[]),s.preDestroyMethods.push(e)}function Me(t){return e=>{const i=Sh(e);i.beanName=t}}function W(t){return(e,i,s)=>{D3(e,t,!1,e,i)}}function Vt(t){return(e,i,s)=>{D3(e,t,!0,e,i)}}function D3(t,e,i,s,r,n){if(e===null){console.error("AG Grid: Autowired name should not be null");return}const o=Sh(t.constructor);o.agClassAttributes||(o.agClassAttributes=[]),o.agClassAttributes.push({attributeName:r,beanName:e,optional:i})}function Zn(t){return(e,i,s)=>{const r=typeof e=="function"?e:e.constructor;let n;if(typeof s=="number"){let o;i?(n=Sh(r),o=i):(n=Sh(r),o="agConstructor"),n.autowireMethods||(n.autowireMethods={}),n.autowireMethods[o]||(n.autowireMethods[o]={}),n.autowireMethods[o][s]=t}}}function Sh(t){return t.hasOwnProperty("__agBeanMetaData")||(t.__agBeanMetaData={}),t.__agBeanMetaData}var In=class{constructor(){this.allSyncListeners=new Map,this.allAsyncListeners=new Map,this.globalSyncListeners=new Set,this.globalAsyncListeners=new Set,this.asyncFunctionsQueue=[],this.scheduled=!1,this.firedEvents={}}setBeans(t,e,i=null,s=null){if(this.frameworkOverrides=e,this.gos=t,i){const r=t.useAsyncEvents();this.addGlobalListener(i,r)}s&&this.addGlobalListener(s,!1)}setFrameworkOverrides(t){this.frameworkOverrides=t}getListeners(t,e,i){const s=e?this.allAsyncListeners:this.allSyncListeners;let r=s.get(t);return!r&&i&&(r=new Set,s.set(t,r)),r}noRegisteredListenersExist(){return this.allSyncListeners.size===0&&this.allAsyncListeners.size===0&&this.globalSyncListeners.size===0&&this.globalAsyncListeners.size===0}addEventListener(t,e,i=!1){this.getListeners(t,i,!0).add(e)}removeEventListener(t,e,i=!1){const s=this.getListeners(t,i,!1);s&&(s.delete(e),s.size===0&&(i?this.allAsyncListeners:this.allSyncListeners).delete(t))}addGlobalListener(t,e=!1){(e?this.globalAsyncListeners:this.globalSyncListeners).add(t)}removeGlobalListener(t,e=!1){(e?this.globalAsyncListeners:this.globalSyncListeners).delete(t)}dispatchEvent(t){let e=t;this.gos&&this.gos.addGridCommonParams(e),this.dispatchToListeners(e,!0),this.dispatchToListeners(e,!1),this.firedEvents[e.type]=!0}dispatchEventOnce(t){this.firedEvents[t.type]||this.dispatchEvent(t)}dispatchToListeners(t,e){var i;const s=t.type;if(e&&"event"in t){const l=t.event;l instanceof Event&&(t.eventPath=l.composedPath())}const r=(l,c)=>l.forEach(u=>{if(!c.has(u))return;const d=this.frameworkOverrides?()=>this.frameworkOverrides.wrapIncoming(()=>u(t)):()=>u(t);e?this.dispatchAsync(d):d()}),n=(i=this.getListeners(s,e,!1))!=null?i:new Set,o=new Set(n);o.size>0&&r(o,n),new Set(e?this.globalAsyncListeners:this.globalSyncListeners).forEach(l=>{const c=this.frameworkOverrides?()=>this.frameworkOverrides.wrapIncoming(()=>l(s,t)):()=>l(s,t);e?this.dispatchAsync(c):c()})}dispatchAsync(t){this.asyncFunctionsQueue.push(t),this.scheduled||(this.frameworkOverrides.wrapIncoming(()=>{window.setTimeout(this.flushAsyncQueue.bind(this),0)}),this.scheduled=!0)}flushAsyncQueue(){this.scheduled=!1;const t=this.asyncFunctionsQueue.slice();this.asyncFunctionsQueue=[],t.forEach(e=>e())}};z([oa(0,Zn("gridOptionsService")),oa(1,Zn("frameworkOverrides")),oa(2,Zn("globalEventListener")),oa(3,Zn("globalSyncEventListener"))],In.prototype,"setBeans",1);In=z([Me("eventService")],In);var YR=class{constructor(t){this.frameworkOverrides=t,this.wrappedListeners=new Map,this.wrappedGlobalListeners=new Map}wrap(t){let e=t;return this.frameworkOverrides.shouldWrapOutgoing&&(e=i=>{this.frameworkOverrides.wrapOutgoing(()=>t(i))},this.wrappedListeners.set(t,e)),e}wrapGlobal(t){let e=t;return this.frameworkOverrides.shouldWrapOutgoing&&(e=(i,s)=>{this.frameworkOverrides.wrapOutgoing(()=>t(i,s))},this.wrappedGlobalListeners.set(t,e)),e}unwrap(t){var e;return(e=this.wrappedListeners.get(t))!=null?e:t}unwrapGlobal(t){var e;return(e=this.wrappedGlobalListeners.get(t))!=null?e:t}},F$={resizable:!0,sortable:!0},L$=0;function P3(){return L$++}var _s=class I3{constructor(e,i,s,r){this.instanceId=P3(),this.autoHeaderHeight=null,this.moving=!1,this.menuVisible=!1,this.lastLeftPinned=!1,this.firstRightPinned=!1,this.filterActive=!1,this.eventService=new In,this.tooltipEnabled=!1,this.rowGroupActive=!1,this.pivotActive=!1,this.aggregationActive=!1,this.colDef=e,this.userProvidedColDef=i,this.colId=s,this.primary=r,this.setState(e)}getInstanceId(){return this.instanceId}setState(e){e.sort!==void 0?(e.sort==="asc"||e.sort==="desc")&&(this.sort=e.sort):(e.initialSort==="asc"||e.initialSort==="desc")&&(this.sort=e.initialSort);const i=e.sortIndex,s=e.initialSortIndex;i!==void 0?i!==null&&(this.sortIndex=i):s!==null&&(this.sortIndex=s);const r=e.hide,n=e.initialHide;r!==void 0?this.visible=!r:this.visible=!n,e.pinned!==void 0?this.setPinned(e.pinned):this.setPinned(e.initialPinned);const o=e.flex,a=e.initialFlex;o!==void 0?this.flex=o:a!==void 0&&(this.flex=a)}setColDef(e,i,s){this.colDef=e,this.userProvidedColDef=i,this.initMinAndMaxWidths(),this.initDotNotation(),this.initTooltip(),this.eventService.dispatchEvent(this.createColumnEvent("colDefChanged",s))}getUserProvidedColDef(){return this.userProvidedColDef}setParent(e){this.parent=e}getParent(){return this.parent}setOriginalParent(e){this.originalParent=e}getOriginalParent(){return this.originalParent}initialise(){this.initMinAndMaxWidths(),this.resetActualWidth("gridInitializing"),this.initDotNotation(),this.initTooltip()}initDotNotation(){const e=this.gos.get("suppressFieldDotNotation");this.fieldContainsDots=Pe(this.colDef.field)&&this.colDef.field.indexOf(".")>=0&&!e,this.tooltipFieldContainsDots=Pe(this.colDef.tooltipField)&&this.colDef.tooltipField.indexOf(".")>=0&&!e}initMinAndMaxWidths(){var e,i;const s=this.colDef;this.minWidth=(e=s.minWidth)!=null?e:this.environment.getMinColWidth(),this.maxWidth=(i=s.maxWidth)!=null?i:Number.MAX_SAFE_INTEGER}initTooltip(){this.tooltipEnabled=Pe(this.colDef.tooltipField)||Pe(this.colDef.tooltipValueGetter)||Pe(this.colDef.tooltipComponent)}resetActualWidth(e){const i=this.calculateColInitialWidth(this.colDef);this.setActualWidth(i,e,!0)}calculateColInitialWidth(e){var i,s;const r=(i=e.minWidth)!=null?i:this.environment.getMinColWidth(),n=(s=e.maxWidth)!=null?s:Number.MAX_SAFE_INTEGER;let o;const a=vu(e.width),l=vu(e.initialWidth);return a!=null?o=a:l!=null?o=l:o=200,Math.max(Math.min(o,n),r)}isEmptyGroup(){return!1}isRowGroupDisplayed(e){if(St(this.colDef)||St(this.colDef.showRowGroup))return!1;const i=this.colDef.showRowGroup===!0,s=this.colDef.showRowGroup===e;return i||s}isPrimary(){return this.primary}isFilterAllowed(){return!!this.colDef.filter}isFieldContainsDots(){return this.fieldContainsDots}isTooltipEnabled(){return this.tooltipEnabled}isTooltipFieldContainsDots(){return this.tooltipFieldContainsDots}addEventListener(e,i){var s,r;this.frameworkOverrides.shouldWrapOutgoing&&!this.frameworkEventListenerService&&(this.eventService.setFrameworkOverrides(this.frameworkOverrides),this.frameworkEventListenerService=new YR(this.frameworkOverrides));const n=(r=(s=this.frameworkEventListenerService)==null?void 0:s.wrap(i))!=null?r:i;this.eventService.addEventListener(e,n)}removeEventListener(e,i){var s,r;const n=(r=(s=this.frameworkEventListenerService)==null?void 0:s.unwrap(i))!=null?r:i;this.eventService.removeEventListener(e,n)}createColumnFunctionCallbackParams(e){return this.gos.addGridCommonParams({node:e,data:e.data,column:this,colDef:this.colDef})}isSuppressNavigable(e){if(typeof this.colDef.suppressNavigable=="boolean")return this.colDef.suppressNavigable;if(typeof this.colDef.suppressNavigable=="function"){const i=this.createColumnFunctionCallbackParams(e),s=this.colDef.suppressNavigable;return s(i)}return!1}isCellEditable(e){return e.group&&!this.gos.get("enableGroupEdit")?!1:this.isColumnFunc(e,this.colDef.editable)}isSuppressFillHandle(){return!!this.colDef.suppressFillHandle}isAutoHeight(){return!!this.colDef.autoHeight}isAutoHeaderHeight(){return!!this.colDef.autoHeaderHeight}isRowDrag(e){return this.isColumnFunc(e,this.colDef.rowDrag)}isDndSource(e){return this.isColumnFunc(e,this.colDef.dndSource)}isCellCheckboxSelection(e){return this.isColumnFunc(e,this.colDef.checkboxSelection)}isSuppressPaste(e){return this.isColumnFunc(e,this.colDef?this.colDef.suppressPaste:null)}isResizable(){return!!this.getColDefValue("resizable")}getColDefValue(e){var i;return(i=this.colDef[e])!=null?i:F$[e]}isColumnFunc(e,i){if(typeof i=="boolean")return i;if(typeof i=="function"){const s=this.createColumnFunctionCallbackParams(e);return i(s)}return!1}setMoving(e,i){this.moving=e,this.eventService.dispatchEvent(this.createColumnEvent("movingChanged",i))}createColumnEvent(e,i){return this.gos.addGridCommonParams({type:e,column:this,columns:[this],source:i})}isMoving(){return this.moving}getSort(){return this.sort}setSort(e,i){this.sort!==e&&(this.sort=e,this.eventService.dispatchEvent(this.createColumnEvent("sortChanged",i))),this.dispatchStateUpdatedEvent("sort")}setMenuVisible(e,i){this.menuVisible!==e&&(this.menuVisible=e,this.eventService.dispatchEvent(this.createColumnEvent("menuVisibleChanged",i)))}isMenuVisible(){return this.menuVisible}isSortable(){return!!this.getColDefValue("sortable")}isSortAscending(){return this.sort==="asc"}isSortDescending(){return this.sort==="desc"}isSortNone(){return St(this.sort)}isSorting(){return Pe(this.sort)}getSortIndex(){return this.sortIndex}setSortIndex(e){this.sortIndex=e,this.dispatchStateUpdatedEvent("sortIndex")}setAggFunc(e){this.aggFunc=e,this.dispatchStateUpdatedEvent("aggFunc")}getAggFunc(){return this.aggFunc}getLeft(){return this.left}getOldLeft(){return this.oldLeft}getRight(){return this.left+this.actualWidth}setLeft(e,i){this.oldLeft=this.left,this.left!==e&&(this.left=e,this.eventService.dispatchEvent(this.createColumnEvent("leftChanged",i)))}isFilterActive(){return this.filterActive}setFilterActive(e,i,s){this.filterActive!==e&&(this.filterActive=e,this.eventService.dispatchEvent(this.createColumnEvent("filterActiveChanged",i)));const r=this.createColumnEvent("filterChanged",i);s&&wn(r,s),this.eventService.dispatchEvent(r)}isHovered(){return this.columnHoverService.isHovered(this)}setPinned(e){e===!0||e==="left"?this.pinned="left":e==="right"?this.pinned="right":this.pinned=null,this.dispatchStateUpdatedEvent("pinned")}setFirstRightPinned(e,i){this.firstRightPinned!==e&&(this.firstRightPinned=e,this.eventService.dispatchEvent(this.createColumnEvent("firstRightPinnedChanged",i)))}setLastLeftPinned(e,i){this.lastLeftPinned!==e&&(this.lastLeftPinned=e,this.eventService.dispatchEvent(this.createColumnEvent("lastLeftPinnedChanged",i)))}isFirstRightPinned(){return this.firstRightPinned}isLastLeftPinned(){return this.lastLeftPinned}isPinned(){return this.pinned==="left"||this.pinned==="right"}isPinnedLeft(){return this.pinned==="left"}isPinnedRight(){return this.pinned==="right"}getPinned(){return this.pinned}setVisible(e,i){const s=e===!0;this.visible!==s&&(this.visible=s,this.eventService.dispatchEvent(this.createColumnEvent("visibleChanged",i))),this.dispatchStateUpdatedEvent("hide")}isVisible(){return this.visible}isSpanHeaderHeight(){const e=this.getColDef();return!e.suppressSpanHeaderHeight&&!e.autoHeaderHeight}getColumnGroupPaddingInfo(){let e=this.getParent();if(!e||!e.isPadding())return{numberOfParents:0,isSpanningTotal:!1};const i=e.getPaddingLevel()+1;let s=!0;for(;e;){if(!e.isPadding()){s=!1;break}e=e.getParent()}return{numberOfParents:i,isSpanningTotal:s}}getColDef(){return this.colDef}getColumnGroupShow(){return this.colDef.columnGroupShow}getColId(){return this.colId}getId(){return this.colId}getUniqueId(){return this.colId}getDefinition(){return this.colDef}getActualWidth(){return this.actualWidth}getAutoHeaderHeight(){return this.autoHeaderHeight}setAutoHeaderHeight(e){const i=e!==this.autoHeaderHeight;return this.autoHeaderHeight=e,i}createBaseColDefParams(e){return this.gos.addGridCommonParams({node:e,data:e.data,colDef:this.colDef,column:this})}getColSpan(e){if(St(this.colDef.colSpan))return 1;const i=this.createBaseColDefParams(e),s=this.colDef.colSpan(i);return Math.max(s,1)}getRowSpan(e){if(St(this.colDef.rowSpan))return 1;const i=this.createBaseColDefParams(e),s=this.colDef.rowSpan(i);return Math.max(s,1)}setActualWidth(e,i,s=!1){this.minWidth!=null&&(e=Math.max(e,this.minWidth)),this.maxWidth!=null&&(e=Math.min(e,this.maxWidth)),this.actualWidth!==e&&(this.actualWidth=e,this.flex&&i!=="flex"&&i!=="gridInitializing"&&(this.flex=null),s||this.fireColumnWidthChangedEvent(i)),this.dispatchStateUpdatedEvent("width")}fireColumnWidthChangedEvent(e){this.eventService.dispatchEvent(this.createColumnEvent("widthChanged",e))}isGreaterThanMax(e){return this.maxWidth!=null?e>this.maxWidth:!1}getMinWidth(){return this.minWidth}getMaxWidth(){return this.maxWidth}getFlex(){return this.flex||0}setFlex(e){this.flex!==e&&(this.flex=e),this.dispatchStateUpdatedEvent("flex")}setMinimum(e){Pe(this.minWidth)&&this.setActualWidth(this.minWidth,e)}setRowGroupActive(e,i){this.rowGroupActive!==e&&(this.rowGroupActive=e,this.eventService.dispatchEvent(this.createColumnEvent("columnRowGroupChanged",i))),this.dispatchStateUpdatedEvent("rowGroup")}isRowGroupActive(){return this.rowGroupActive}setPivotActive(e,i){this.pivotActive!==e&&(this.pivotActive=e,this.eventService.dispatchEvent(this.createColumnEvent("columnPivotChanged",i))),this.dispatchStateUpdatedEvent("pivot")}isPivotActive(){return this.pivotActive}isAnyFunctionActive(){return this.isPivotActive()||this.isRowGroupActive()||this.isValueActive()}isAnyFunctionAllowed(){return this.isAllowPivot()||this.isAllowRowGroup()||this.isAllowValue()}setValueActive(e,i){this.aggregationActive!==e&&(this.aggregationActive=e,this.eventService.dispatchEvent(this.createColumnEvent("columnValueChanged",i)))}isValueActive(){return this.aggregationActive}isAllowPivot(){return this.colDef.enablePivot===!0}isAllowValue(){return this.colDef.enableValue===!0}isAllowRowGroup(){return this.colDef.enableRowGroup===!0}getMenuTabs(e){ot("As of v31.1, 'getMenuTabs' is deprecated. Use 'getColDef().menuTabs ?? defaultValues' instead.");let i=this.getColDef().menuTabs;return i==null&&(i=e),i}dispatchStateUpdatedEvent(e){this.eventService.dispatchEvent({type:I3.EVENT_STATE_UPDATED,key:e})}};_s.EVENT_MOVING_CHANGED="movingChanged";_s.EVENT_LEFT_CHANGED="leftChanged";_s.EVENT_WIDTH_CHANGED="widthChanged";_s.EVENT_LAST_LEFT_PINNED_CHANGED="lastLeftPinnedChanged";_s.EVENT_FIRST_RIGHT_PINNED_CHANGED="firstRightPinnedChanged";_s.EVENT_VISIBLE_CHANGED="visibleChanged";_s.EVENT_FILTER_CHANGED="filterChanged";_s.EVENT_FILTER_ACTIVE_CHANGED="filterActiveChanged";_s.EVENT_SORT_CHANGED="sortChanged";_s.EVENT_COL_DEF_CHANGED="colDefChanged";_s.EVENT_MENU_VISIBLE_CHANGED="menuVisibleChanged";_s.EVENT_ROW_GROUP_CHANGED="columnRowGroupChanged";_s.EVENT_PIVOT_CHANGED="columnPivotChanged";_s.EVENT_VALUE_CHANGED="columnValueChanged";_s.EVENT_STATE_UPDATED="columnStateUpdated";z([W("gridOptionsService")],_s.prototype,"gos",2);z([W("environment")],_s.prototype,"environment",2);z([W("columnHoverService")],_s.prototype,"columnHoverService",2);z([W("frameworkOverrides")],_s.prototype,"frameworkOverrides",2);z([de],_s.prototype,"initialise",1);var Nt=_s,nx=class ev{constructor(e,i,s,r){this.localEventService=new In,this.expandable=!1,this.instanceId=P3(),this.expandableListenerRemoveCallback=null,this.colGroupDef=e,this.groupId=i,this.expanded=!!e&&!!e.openByDefault,this.padding=s,this.level=r}destroy(){this.expandableListenerRemoveCallback&&this.reset(null,void 0)}reset(e,i){this.colGroupDef=e,this.level=i,this.originalParent=null,this.expandableListenerRemoveCallback&&this.expandableListenerRemoveCallback(),this.children=void 0,this.expandable=void 0}getInstanceId(){return this.instanceId}setOriginalParent(e){this.originalParent=e}getOriginalParent(){return this.originalParent}getLevel(){return this.level}isVisible(){return this.children?this.children.some(e=>e.isVisible()):!1}isPadding(){return this.padding}setExpanded(e){this.expanded=e===void 0?!1:e;const i={type:ev.EVENT_EXPANDED_CHANGED};this.localEventService.dispatchEvent(i)}isExpandable(){return this.expandable}isExpanded(){return this.expanded}getGroupId(){return this.groupId}getId(){return this.getGroupId()}setChildren(e){this.children=e}getChildren(){return this.children}getColGroupDef(){return this.colGroupDef}getLeafColumns(){const e=[];return this.addLeafColumns(e),e}addLeafColumns(e){this.children&&this.children.forEach(i=>{i instanceof Nt?e.push(i):i instanceof ev&&i.addLeafColumns(e)})}getColumnGroupShow(){const e=this.colGroupDef;if(e)return e.columnGroupShow}setupExpandable(){this.setExpandable(),this.expandableListenerRemoveCallback&&this.expandableListenerRemoveCallback();const e=this.onColumnVisibilityChanged.bind(this);this.getLeafColumns().forEach(i=>i.addEventListener("visibleChanged",e)),this.expandableListenerRemoveCallback=()=>{this.getLeafColumns().forEach(i=>i.removeEventListener("visibleChanged",e)),this.expandableListenerRemoveCallback=null}}setExpandable(){if(this.isPadding())return;let e=!1,i=!1,s=!1;const r=this.findChildrenRemovingPadding();for(let o=0,a=r.length;o<a;o++){const l=r[o];if(!l.isVisible())continue;const c=l.getColumnGroupShow();c==="open"?(e=!0,s=!0):c==="closed"?(i=!0,s=!0):(e=!0,i=!0)}const n=e&&i&&s;if(this.expandable!==n){this.expandable=n;const o={type:ev.EVENT_EXPANDABLE_CHANGED};this.localEventService.dispatchEvent(o)}}findChildrenRemovingPadding(){const e=[],i=s=>{s.forEach(r=>{r instanceof ev&&r.isPadding()?i(r.children):e.push(r)})};return i(this.children),e}onColumnVisibilityChanged(){this.setExpandable()}addEventListener(e,i){this.localEventService.addEventListener(e,i)}removeEventListener(e,i){this.localEventService.removeEventListener(e,i)}};nx.EVENT_EXPANDED_CHANGED="expandedChanged";nx.EVENT_EXPANDABLE_CHANGED="expandableChanged";z([Hi],nx.prototype,"destroy",1);var bi=nx,k$={numericColumn:{headerClass:"ag-right-aligned-header",cellClass:"ag-right-aligned-cell"},rightAligned:{headerClass:"ag-right-aligned-header",cellClass:"ag-right-aligned-cell"}},F3={};ar(F3,{addSafePassiveEventListener:()=>U3,createEventPath:()=>H3,getCtrlForEventTarget:()=>Vw,getEventPath:()=>j3,isElementInEventPath:()=>Hw,isEventSupported:()=>XR,isStopPropagationForAgGrid:()=>ha,stopPropagationForAgGrid:()=>va});var L3={};ar(L3,{areEqual:()=>Ya,existsAndNotEmpty:()=>k3,flatten:()=>B3,forEachReverse:()=>B$,includes:()=>to,insertArrayIntoArray:()=>E_,insertIntoArray:()=>oy,last:()=>di,moveInArray:()=>T_,pushAll:()=>__,removeAllFromArray:()=>G3,removeAllFromUnorderedArray:()=>O3,removeFromArray:()=>vn,removeFromUnorderedArray:()=>qR,removeRepeatsFromArray:()=>O$,shallowCompare:()=>N$,sortNumerically:()=>N3,toStrings:()=>G$});function k3(t){return t!=null&&t.length>0}function di(t){if(!(!t||!t.length))return t[t.length-1]}function Ya(t,e,i){return t==null&&e==null?!0:t!=null&&e!=null&&t.length===e.length&&t.every((s,r)=>i?i(s,e[r]):e[r]===s)}function N$(t,e){return Ya(t,e)}function N3(t){return t.sort((e,i)=>e-i)}function O$(t,e){if(t)for(let i=t.length-2;i>=0;i--){const s=t[i]===e,r=t[i+1]===e;s&&r&&t.splice(i+1,1)}}function qR(t,e){const i=t.indexOf(e);i>=0&&(t[i]=t[t.length-1],t.pop())}function vn(t,e){const i=t.indexOf(e);i>=0&&t.splice(i,1)}function O3(t,e){for(let i=0;i<e.length;i++)qR(t,e[i])}function G3(t,e){for(let i=0;i<e.length;i++)vn(t,e[i])}function oy(t,e,i){t.splice(i,0,e)}function E_(t,e,i){if(!(t==null||e==null))for(let s=e.length-1;s>=0;s--){const r=e[s];oy(t,r,i)}}function T_(t,e,i){G3(t,e),e.slice().reverse().forEach(s=>oy(t,s,i))}function to(t,e){return t.indexOf(e)>-1}function B3(t){return[].concat.apply([],t)}function __(t,e){e==null||t==null||e.forEach(i=>t.push(i))}function G$(t){return t.map(ny)}function B$(t,e){if(t!=null)for(let i=t.length-1;i>=0;i--)e(t[i],i)}var V3="__ag_Grid_Stop_Propagation",V$=["touchstart","touchend","touchmove","touchcancel","scroll"],k1={};function va(t){t[V3]=!0}function ha(t){return t[V3]===!0}var XR=(()=>{const t={select:"input",change:"input",submit:"form",reset:"form",error:"img",load:"img",abort:"img"};return i=>{if(typeof k1[i]=="boolean")return k1[i];const s=document.createElement(t[i]||"div");return i="on"+i,k1[i]=i in s}})();function Vw(t,e,i){let s=e;for(;s;){const r=t.getDomData(s,i);if(r)return r;s=s.parentElement}return null}function Hw(t,e){return!e||!t?!1:j3(e).indexOf(t)>=0}function H3(t){const e=[];let i=t.target;for(;i;)e.push(i),i=i.parentElement;return e}function j3(t){const e=t;return e.path?e.path:e.composedPath?e.composedPath():H3(e)}function U3(t,e,i,s){const n=to(V$,i)?{passive:!0}:void 0;t&&t.addEventListener&&t.addEventListener(e,i,s,n)}var Sc=class W3{constructor(){this.destroyFunctions=[],this.destroyed=!1,this.__v_skip=!0,this.lastChangeSetIdLookup={},this.propertyListenerId=0,this.isAlive=()=>!this.destroyed}getFrameworkOverrides(){return this.frameworkOverrides}getContext(){return this.context}destroy(){for(let e=0;e<this.destroyFunctions.length;e++)this.destroyFunctions[e]();this.destroyFunctions.length=0,this.destroyed=!0,this.dispatchEvent({type:W3.EVENT_DESTROYED})}addEventListener(e,i){this.localEventService||(this.localEventService=new In),this.localEventService.addEventListener(e,i)}removeEventListener(e,i){this.localEventService&&this.localEventService.removeEventListener(e,i)}dispatchEvent(e){this.localEventService&&this.localEventService.dispatchEvent(e)}addManagedListener(e,i,s){if(this.destroyed)return;e instanceof HTMLElement?U3(this.getFrameworkOverrides(),e,i,s):e.addEventListener(i,s);const r=()=>(e.removeEventListener(i,s),null);return this.destroyFunctions.push(r),()=>(r(),this.destroyFunctions=this.destroyFunctions.filter(n=>n!==r),null)}setupGridOptionListener(e,i){this.gos.addEventListener(e,i);const s=()=>(this.gos.removeEventListener(e,i),null);return this.destroyFunctions.push(s),()=>(s(),this.destroyFunctions=this.destroyFunctions.filter(r=>r!==s),null)}addManagedPropertyListener(e,i){return this.destroyed?()=>null:this.setupGridOptionListener(e,i)}addManagedPropertyListeners(e,i){if(this.destroyed)return;const s=e.join("-")+this.propertyListenerId++,r=n=>{if(n.changeSet){if(n.changeSet&&n.changeSet.id===this.lastChangeSetIdLookup[s])return;this.lastChangeSetIdLookup[s]=n.changeSet.id}const o={type:"gridPropertyChanged",changeSet:n.changeSet,source:n.source};i(o)};e.forEach(n=>this.setupGridOptionListener(n,r))}addDestroyFunc(e){this.isAlive()?this.destroyFunctions.push(e):e()}createManagedBean(e,i){const s=this.createBean(e,i);return this.addDestroyFunc(this.destroyBean.bind(this,e,i)),s}createBean(e,i,s){return(i||this.getContext()).createBean(e,s)}destroyBean(e,i){return(i||this.getContext()).destroyBean(e)}destroyBeans(e,i){if(e)for(let s=0;s<e.length;s++)this.destroyBean(e[s],i);return[]}};Sc.EVENT_DESTROYED="destroyed";z([W("frameworkOverrides")],Sc.prototype,"frameworkOverrides",2);z([W("context")],Sc.prototype,"context",2);z([W("eventService")],Sc.prototype,"eventService",2);z([W("gridOptionsService")],Sc.prototype,"gos",2);z([W("localeService")],Sc.prototype,"localeService",2);z([W("environment")],Sc.prototype,"environment",2);z([Hi],Sc.prototype,"destroy",1);var ye=Sc,tg=class extends ye{setBeans(t){this.logger=t.create("ColumnFactory")}createColumnTree(t,e,i,s){const r=new x3,{existingCols:n,existingGroups:o,existingColKeys:a}=this.extractExistingTreeData(i);r.addExistingKeys(a);const l=this.recursivelyCreateColumns(t,0,e,n,r,o,s),c=this.findMaxDept(l,0);this.logger.log("Number of levels for grouped columns is "+c);const u=this.balanceColumnTree(l,0,c,r);return Bl(null,u,(h,p)=>{h instanceof bi&&h.setupExpandable(),h.setOriginalParent(p)}),{columnTree:u,treeDept:c}}extractExistingTreeData(t){const e=[],i=[],s=[];return t&&Bl(null,t,r=>{if(r instanceof bi){const n=r;i.push(n)}else{const n=r;s.push(n.getId()),e.push(n)}}),{existingCols:e,existingGroups:i,existingColKeys:s}}createForAutoGroups(t,e){return t.map(i=>this.createAutoGroupTreeItem(e,i))}createAutoGroupTreeItem(t,e){const i=this.findDepth(t);let s=e;for(let r=i-1;r>=0;r--){const n=new bi(null,`FAKE_PATH_${e.getId()}}_${r}`,!0,r);this.createBean(n),n.setChildren([s]),s.setOriginalParent(n),s=n}return i===0&&e.setOriginalParent(null),s}findDepth(t){let e=0,i=t;for(;i&&i[0]&&i[0]instanceof bi;)e++,i=i[0].getChildren();return e}balanceColumnTree(t,e,i,s){const r=[];for(let n=0;n<t.length;n++){const o=t[n];if(o instanceof bi){const a=o,l=this.balanceColumnTree(a.getChildren(),e+1,i,s);a.setChildren(l),r.push(a)}else{let a,l;for(let c=i-1;c>=e;c--){const u=s.getUniqueKey(null,null),d=this.createMergedColGroupDef(null),h=new bi(d,u,!0,e);this.createBean(h),l&&l.setChildren([h]),l=h,a||(a=l)}if(a&&l)if(r.push(a),t.some(u=>u instanceof bi)){l.setChildren([o]);continue}else{l.setChildren(t);break}r.push(o)}}return r}findMaxDept(t,e){let i=e;for(let s=0;s<t.length;s++){const r=t[s];if(r instanceof bi){const n=r,o=this.findMaxDept(n.getChildren(),e+1);i<o&&(i=o)}}return i}recursivelyCreateColumns(t,e,i,s,r,n,o){if(!t)return[];const a=new Array(t.length);for(let l=0;l<a.length;l++){const c=t[l];this.isColumnGroup(c)?a[l]=this.createColumnGroup(i,c,e,s,r,n,o):a[l]=this.createColumn(i,c,s,r,o)}return a}createColumnGroup(t,e,i,s,r,n,o){const a=this.createMergedColGroupDef(e),l=r.getUniqueKey(a.groupId||null,null),c=new bi(a,l,!1,i);this.createBean(c);const u=this.findExistingGroup(e,n);u&&n.splice(u.idx,1);let d=u==null?void 0:u.group;d&&c.setExpanded(d.isExpanded());const h=this.recursivelyCreateColumns(a.children,i+1,t,s,r,n,o);return c.setChildren(h),c}createMergedColGroupDef(t){const e={};return Object.assign(e,this.gos.get("defaultColGroupDef")),Object.assign(e,t),e}createColumn(t,e,i,s,r){const n=this.findExistingColumn(e,i);n&&(i==null||i.splice(n.idx,1));let o=n==null?void 0:n.column;if(o){const a=this.addColumnDefaultAndTypes(e,o.getColId());o.setColDef(a,e,r),this.applyColumnState(o,a,r)}else{const a=s.getUniqueKey(e.colId,e.field),l=this.addColumnDefaultAndTypes(e,a);o=new Nt(l,e,a,t),this.context.createBean(o)}return this.dataTypeService.addColumnListeners(o),o}applyColumnState(t,e,i){const s=vu(e.flex);if(s!==void 0&&t.setFlex(s),t.getFlex()<=0){const a=vu(e.width);if(a!=null)t.setActualWidth(a,i);else{const l=t.getActualWidth();t.setActualWidth(l,i)}}e.sort!==void 0&&(e.sort=="asc"||e.sort=="desc"?t.setSort(e.sort,i):t.setSort(void 0,i));const n=vu(e.sortIndex);n!==void 0&&t.setSortIndex(n);const o=Ow(e.hide);o!==void 0&&t.setVisible(!o,i),e.pinned!==void 0&&t.setPinned(e.pinned)}findExistingColumn(t,e){if(e)for(let i=0;i<e.length;i++){const s=e[i].getUserProvidedColDef();if(!s)continue;if(t.colId!=null){if(e[i].getId()===t.colId)return{idx:i,column:e[i]};continue}if(t.field!=null){if(s.field===t.field)return{idx:i,column:e[i]};continue}if(s===t)return{idx:i,column:e[i]}}}findExistingGroup(t,e){if(t.groupId!=null)for(let s=0;s<e.length;s++){const r=e[s];if(r.getColGroupDef()&&r.getId()===t.groupId)return{idx:s,group:r}}}addColumnDefaultAndTypes(t,e){const i={},s=this.gos.get("defaultColDef");wn(i,s,!1,!0);const r=this.dataTypeService.updateColDefAndGetColumnType(i,t,e);r&&this.assignColumnTypes(r,i),wn(i,t,!1,!0);const n=this.gos.get("autoGroupColumnDef"),o=this.gos.isColumnsSortingCoupledToGroup();return t.rowGroup&&n&&o&&wn(i,{sort:n.sort,initialSort:n.initialSort},!1,!0),this.dataTypeService.validateColDef(i),i}assignColumnTypes(t,e){if(!t.length)return;const i=Object.assign({},k$),s=this.gos.get("columnTypes")||{};Pr(s,(r,n)=>{r in i?console.warn(`AG Grid: the column type '${r}' is a default column type and cannot be overridden.`):(n.type&&ot("Column type definitions 'columnTypes' with a 'type' attribute are not supported because a column type cannot refer to another column type. Only column definitions 'columnDefs' can use the 'type' attribute to refer to a column type."),i[r]=n)}),t.forEach(r=>{const n=i[r.trim()];n?wn(e,n,!1,!0):console.warn("AG Grid: colDef.type '"+r+"' does not correspond to defined gridOptions.columnTypes")})}isColumnGroup(t){return t.children!==void 0}};z([W("dataTypeService")],tg.prototype,"dataTypeService",2);z([oa(0,Zn("loggerFactory"))],tg.prototype,"setBeans",1);tg=z([Me("columnFactory")],tg);function Bl(t,e,i){if(e)for(let s=0;s<e.length;s++){const r=e[s];r instanceof bi&&Bl(r,r.getChildren(),i),i(r,t)}}var ox=class Ga{constructor(e,i,s,r){this.displayedChildren=[],this.localEventService=new In,this.groupId=i,this.partId=s,this.providedColumnGroup=e,this.pinned=r}static createUniqueId(e,i){return e+"_"+i}reset(){this.parent=null,this.children=null,this.displayedChildren=null}getParent(){return this.parent}setParent(e){this.parent=e}getUniqueId(){return Ga.createUniqueId(this.groupId,this.partId)}isEmptyGroup(){return this.displayedChildren.length===0}isMoving(){const e=this.getProvidedColumnGroup().getLeafColumns();return!e||e.length===0?!1:e.every(i=>i.isMoving())}checkLeft(){if(this.displayedChildren.forEach(e=>{e instanceof Ga&&e.checkLeft()}),this.displayedChildren.length>0)if(this.gos.get("enableRtl")){const i=di(this.displayedChildren).getLeft();this.setLeft(i)}else{const e=this.displayedChildren[0].getLeft();this.setLeft(e)}else this.setLeft(null)}getLeft(){return this.left}getOldLeft(){return this.oldLeft}setLeft(e){this.oldLeft=this.left,this.left!==e&&(this.left=e,this.localEventService.dispatchEvent(this.createAgEvent(Ga.EVENT_LEFT_CHANGED)))}getPinned(){return this.pinned}createAgEvent(e){return{type:e}}addEventListener(e,i){this.localEventService.addEventListener(e,i)}removeEventListener(e,i){this.localEventService.removeEventListener(e,i)}getGroupId(){return this.groupId}getPartId(){return this.partId}isChildInThisGroupDeepSearch(e){let i=!1;return this.children.forEach(s=>{e===s&&(i=!0),s instanceof Ga&&s.isChildInThisGroupDeepSearch(e)&&(i=!0)}),i}getActualWidth(){let e=0;return this.displayedChildren&&this.displayedChildren.forEach(i=>{e+=i.getActualWidth()}),e}isResizable(){if(!this.displayedChildren)return!1;let e=!1;return this.displayedChildren.forEach(i=>{i.isResizable()&&(e=!0)}),e}getMinWidth(){let e=0;return this.displayedChildren.forEach(i=>{e+=i.getMinWidth()||0}),e}addChild(e){this.children||(this.children=[]),this.children.push(e)}getDisplayedChildren(){return this.displayedChildren}getLeafColumns(){const e=[];return this.addLeafColumns(e),e}getDisplayedLeafColumns(){const e=[];return this.addDisplayedLeafColumns(e),e}getDefinition(){return this.providedColumnGroup.getColGroupDef()}getColGroupDef(){return this.providedColumnGroup.getColGroupDef()}isPadding(){return this.providedColumnGroup.isPadding()}isExpandable(){return this.providedColumnGroup.isExpandable()}isExpanded(){return this.providedColumnGroup.isExpanded()}setExpanded(e){this.providedColumnGroup.setExpanded(e)}addDisplayedLeafColumns(e){this.displayedChildren.forEach(i=>{i instanceof Nt?e.push(i):i instanceof Ga&&i.addDisplayedLeafColumns(e)})}addLeafColumns(e){this.children.forEach(i=>{i instanceof Nt?e.push(i):i instanceof Ga&&i.addLeafColumns(e)})}getChildren(){return this.children}getColumnGroupShow(){return this.providedColumnGroup.getColumnGroupShow()}getProvidedColumnGroup(){return this.providedColumnGroup}getPaddingLevel(){const e=this.getParent();return!this.isPadding()||!e||!e.isPadding()?0:1+e.getPaddingLevel()}calculateDisplayedColumns(){this.displayedChildren=[];let e=this;for(;e!=null&&e.isPadding();)e=e.getParent();if(!(e?e.providedColumnGroup.isExpandable():!1)){this.displayedChildren=this.children,this.localEventService.dispatchEvent(this.createAgEvent(Ga.EVENT_DISPLAYED_CHILDREN_CHANGED));return}this.children.forEach(s=>{if(s instanceof Ga&&(!s.displayedChildren||!s.displayedChildren.length))return;switch(s.getColumnGroupShow()){case"open":e.providedColumnGroup.isExpanded()&&this.displayedChildren.push(s);break;case"closed":e.providedColumnGroup.isExpanded()||this.displayedChildren.push(s);break;default:this.displayedChildren.push(s);break}}),this.localEventService.dispatchEvent(this.createAgEvent(Ga.EVENT_DISPLAYED_CHILDREN_CHANGED))}};ox.EVENT_LEFT_CHANGED="leftChanged";ox.EVENT_DISPLAYED_CHILDREN_CHANGED="displayedChildrenChanged";z([W("gridOptionsService")],ox.prototype,"gos",2);var Fs=ox,K=class{};K.EVENT_COLUMN_EVERYTHING_CHANGED="columnEverythingChanged";K.EVENT_NEW_COLUMNS_LOADED="newColumnsLoaded";K.EVENT_COLUMN_PIVOT_MODE_CHANGED="columnPivotModeChanged";K.EVENT_PIVOT_MAX_COLUMNS_EXCEEDED="pivotMaxColumnsExceeded";K.EVENT_COLUMN_ROW_GROUP_CHANGED="columnRowGroupChanged";K.EVENT_EXPAND_COLLAPSE_ALL="expandOrCollapseAll";K.EVENT_COLUMN_PIVOT_CHANGED="columnPivotChanged";K.EVENT_GRID_COLUMNS_CHANGED="gridColumnsChanged";K.EVENT_COLUMN_VALUE_CHANGED="columnValueChanged";K.EVENT_COLUMN_MOVED="columnMoved";K.EVENT_COLUMN_VISIBLE="columnVisible";K.EVENT_COLUMN_PINNED="columnPinned";K.EVENT_COLUMN_GROUP_OPENED="columnGroupOpened";K.EVENT_COLUMN_RESIZED="columnResized";K.EVENT_DISPLAYED_COLUMNS_CHANGED="displayedColumnsChanged";K.EVENT_SUPPRESS_COLUMN_MOVE_CHANGED="suppressMovableColumns";K.EVENT_SUPPRESS_MENU_HIDE_CHANGED="suppressMenuHide";K.EVENT_SUPPRESS_FIELD_DOT_NOTATION="suppressFieldDotNotation";K.EVENT_VIRTUAL_COLUMNS_CHANGED="virtualColumnsChanged";K.EVENT_COLUMN_HEADER_MOUSE_OVER="columnHeaderMouseOver";K.EVENT_COLUMN_HEADER_MOUSE_LEAVE="columnHeaderMouseLeave";K.EVENT_COLUMN_HEADER_CLICKED="columnHeaderClicked";K.EVENT_COLUMN_HEADER_CONTEXT_MENU="columnHeaderContextMenu";K.EVENT_ASYNC_TRANSACTIONS_FLUSHED="asyncTransactionsFlushed";K.EVENT_ROW_GROUP_OPENED="rowGroupOpened";K.EVENT_ROW_DATA_UPDATED="rowDataUpdated";K.EVENT_PINNED_ROW_DATA_CHANGED="pinnedRowDataChanged";K.EVENT_RANGE_SELECTION_CHANGED="rangeSelectionChanged";K.EVENT_CHART_CREATED="chartCreated";K.EVENT_CHART_RANGE_SELECTION_CHANGED="chartRangeSelectionChanged";K.EVENT_CHART_OPTIONS_CHANGED="chartOptionsChanged";K.EVENT_CHART_DESTROYED="chartDestroyed";K.EVENT_TOOL_PANEL_VISIBLE_CHANGED="toolPanelVisibleChanged";K.EVENT_TOOL_PANEL_SIZE_CHANGED="toolPanelSizeChanged";K.EVENT_COLUMN_PANEL_ITEM_DRAG_START="columnPanelItemDragStart";K.EVENT_COLUMN_PANEL_ITEM_DRAG_END="columnPanelItemDragEnd";K.EVENT_MODEL_UPDATED="modelUpdated";K.EVENT_CUT_START="cutStart";K.EVENT_CUT_END="cutEnd";K.EVENT_PASTE_START="pasteStart";K.EVENT_PASTE_END="pasteEnd";K.EVENT_FILL_START="fillStart";K.EVENT_FILL_END="fillEnd";K.EVENT_RANGE_DELETE_START="rangeDeleteStart";K.EVENT_RANGE_DELETE_END="rangeDeleteEnd";K.EVENT_UNDO_STARTED="undoStarted";K.EVENT_UNDO_ENDED="undoEnded";K.EVENT_REDO_STARTED="redoStarted";K.EVENT_REDO_ENDED="redoEnded";K.EVENT_KEY_SHORTCUT_CHANGED_CELL_START="keyShortcutChangedCellStart";K.EVENT_KEY_SHORTCUT_CHANGED_CELL_END="keyShortcutChangedCellEnd";K.EVENT_CELL_CLICKED="cellClicked";K.EVENT_CELL_DOUBLE_CLICKED="cellDoubleClicked";K.EVENT_CELL_MOUSE_DOWN="cellMouseDown";K.EVENT_CELL_CONTEXT_MENU="cellContextMenu";K.EVENT_CELL_VALUE_CHANGED="cellValueChanged";K.EVENT_CELL_EDIT_REQUEST="cellEditRequest";K.EVENT_ROW_VALUE_CHANGED="rowValueChanged";K.EVENT_CELL_FOCUSED="cellFocused";K.EVENT_CELL_FOCUS_CLEARED="cellFocusCleared";K.EVENT_FULL_WIDTH_ROW_FOCUSED="fullWidthRowFocused";K.EVENT_ROW_SELECTED="rowSelected";K.EVENT_SELECTION_CHANGED="selectionChanged";K.EVENT_TOOLTIP_SHOW="tooltipShow";K.EVENT_TOOLTIP_HIDE="tooltipHide";K.EVENT_CELL_KEY_DOWN="cellKeyDown";K.EVENT_CELL_MOUSE_OVER="cellMouseOver";K.EVENT_CELL_MOUSE_OUT="cellMouseOut";K.EVENT_FILTER_CHANGED="filterChanged";K.EVENT_FILTER_MODIFIED="filterModified";K.EVENT_FILTER_OPENED="filterOpened";K.EVENT_ADVANCED_FILTER_BUILDER_VISIBLE_CHANGED="advancedFilterBuilderVisibleChanged";K.EVENT_SORT_CHANGED="sortChanged";K.EVENT_VIRTUAL_ROW_REMOVED="virtualRowRemoved";K.EVENT_ROW_CLICKED="rowClicked";K.EVENT_ROW_DOUBLE_CLICKED="rowDoubleClicked";K.EVENT_GRID_READY="gridReady";K.EVENT_GRID_PRE_DESTROYED="gridPreDestroyed";K.EVENT_GRID_SIZE_CHANGED="gridSizeChanged";K.EVENT_VIEWPORT_CHANGED="viewportChanged";K.EVENT_SCROLLBAR_WIDTH_CHANGED="scrollbarWidthChanged";K.EVENT_FIRST_DATA_RENDERED="firstDataRendered";K.EVENT_DRAG_STARTED="dragStarted";K.EVENT_DRAG_STOPPED="dragStopped";K.EVENT_CHECKBOX_CHANGED="checkboxChanged";K.EVENT_ROW_EDITING_STARTED="rowEditingStarted";K.EVENT_ROW_EDITING_STOPPED="rowEditingStopped";K.EVENT_CELL_EDITING_STARTED="cellEditingStarted";K.EVENT_CELL_EDITING_STOPPED="cellEditingStopped";K.EVENT_BODY_SCROLL="bodyScroll";K.EVENT_BODY_SCROLL_END="bodyScrollEnd";K.EVENT_HEIGHT_SCALE_CHANGED="heightScaleChanged";K.EVENT_PAGINATION_CHANGED="paginationChanged";K.EVENT_COMPONENT_STATE_CHANGED="componentStateChanged";K.EVENT_STORE_REFRESHED="storeRefreshed";K.EVENT_STATE_UPDATED="stateUpdated";K.EVENT_COLUMN_MENU_VISIBLE_CHANGED="columnMenuVisibleChanged";K.EVENT_CONTEXT_MENU_VISIBLE_CHANGED="contextMenuVisibleChanged";K.EVENT_BODY_HEIGHT_CHANGED="bodyHeightChanged";K.EVENT_COLUMN_CONTAINER_WIDTH_CHANGED="columnContainerWidthChanged";K.EVENT_DISPLAYED_COLUMNS_WIDTH_CHANGED="displayedColumnsWidthChanged";K.EVENT_SCROLL_VISIBILITY_CHANGED="scrollVisibilityChanged";K.EVENT_COLUMN_HOVER_CHANGED="columnHoverChanged";K.EVENT_FLASH_CELLS="flashCells";K.EVENT_PAGINATION_PIXEL_OFFSET_CHANGED="paginationPixelOffsetChanged";K.EVENT_DISPLAYED_ROWS_CHANGED="displayedRowsChanged";K.EVENT_LEFT_PINNED_WIDTH_CHANGED="leftPinnedWidthChanged";K.EVENT_RIGHT_PINNED_WIDTH_CHANGED="rightPinnedWidthChanged";K.EVENT_ROW_CONTAINER_HEIGHT_CHANGED="rowContainerHeightChanged";K.EVENT_HEADER_HEIGHT_CHANGED="headerHeightChanged";K.EVENT_COLUMN_HEADER_HEIGHT_CHANGED="columnHeaderHeightChanged";K.EVENT_ROW_DRAG_ENTER="rowDragEnter";K.EVENT_ROW_DRAG_MOVE="rowDragMove";K.EVENT_ROW_DRAG_LEAVE="rowDragLeave";K.EVENT_ROW_DRAG_END="rowDragEnd";K.EVENT_GRID_STYLES_CHANGED="gridStylesChanged";K.EVENT_COLUMN_ROW_GROUP_CHANGE_REQUEST="columnRowGroupChangeRequest";K.EVENT_COLUMN_PIVOT_CHANGE_REQUEST="columnPivotChangeRequest";K.EVENT_COLUMN_VALUE_CHANGE_REQUEST="columnValueChangeRequest";K.EVENT_COLUMN_AGG_FUNC_CHANGE_REQUEST="columnAggFuncChangeRequest";K.EVENT_STORE_UPDATED="storeUpdated";K.EVENT_FILTER_DESTROYED="filterDestroyed";K.EVENT_ROW_DATA_UPDATE_STARTED="rowDataUpdateStarted";K.EVENT_ROW_COUNT_READY="rowCountReady";K.EVENT_ADVANCED_FILTER_ENABLED_CHANGED="advancedFilterEnabledChanged";K.EVENT_DATA_TYPES_INFERRED="dataTypesInferred";K.EVENT_FIELD_VALUE_CHANGED="fieldValueChanged";K.EVENT_FIELD_PICKER_VALUE_SELECTED="fieldPickerValueSelected";K.EVENT_SIDE_BAR_UPDATED="sideBarUpdated";var Rv=new Set([K.EVENT_GRID_PRE_DESTROYED,K.EVENT_FILL_START]),ZR=class{constructor(){this.existingIds={}}getInstanceIdForKey(t){const e=this.existingIds[t];let i;return typeof e!="number"?i=0:i=e+1,this.existingIds[t]=i,i}},rc="ag-Grid-AutoColumn",ay=class extends ye{createAutoGroupColumns(t){const e=[],i=this.gos.get("treeData");let s=this.gos.isGroupMultiAutoColumn();return i&&s&&(console.warn('AG Grid: you cannot mix groupDisplayType = "multipleColumns" with treeData, only one column can be used to display groups when doing tree data'),s=!1),s?t.forEach((r,n)=>{e.push(this.createOneAutoGroupColumn(r,n))}):e.push(this.createOneAutoGroupColumn()),e}updateAutoGroupColumns(t,e){t.forEach((i,s)=>this.updateOneAutoGroupColumn(i,s,e))}createOneAutoGroupColumn(t,e){let i;t?i=`${rc}-${t.getId()}`:i=rc;const s=this.createAutoGroupColDef(i,t,e);s.colId=i;const r=new Nt(s,null,i,!0);return this.context.createBean(r),r}updateOneAutoGroupColumn(t,e,i){const s=t.getColDef(),r=typeof s.showRowGroup=="string"?s.showRowGroup:void 0,n=r!=null?this.columnModel.getPrimaryColumn(r):void 0,o=this.createAutoGroupColDef(t.getId(),n??void 0,e);t.setColDef(o,null,i),this.columnFactory.applyColumnState(t,o,i)}createAutoGroupColDef(t,e,i){let s=this.createBaseColDef(e);const r=this.gos.get("autoGroupColumnDef");wn(s,r),s=this.columnFactory.addColumnDefaultAndTypes(s,t),this.gos.get("treeData")||St(s.field)&&St(s.valueGetter)&&St(s.filterValueGetter)&&s.filter!=="agGroupColumnFilter"&&(s.filter=!1),i&&i>0&&(s.headerCheckboxSelection=!1);const n=this.gos.isColumnsSortingCoupledToGroup(),o=s.valueGetter||s.field!=null;return n&&!o&&(s.sortIndex=void 0,s.initialSort=void 0),s}createBaseColDef(t){const e=this.gos.get("autoGroupColumnDef"),s={headerName:this.localeService.getLocaleTextFunc()("group","Group")};if(e&&(e.cellRenderer||e.cellRendererSelector)||(s.cellRenderer="agGroupCellRenderer"),t){const n=t.getColDef();Object.assign(s,{headerName:this.columnModel.getDisplayNameForColumn(t,"header"),headerValueGetter:n.headerValueGetter}),n.cellRenderer&&Object.assign(s,{cellRendererParams:{innerRenderer:n.cellRenderer,innerRendererParams:n.cellRendererParams}}),s.showRowGroup=t.getColId()}else s.showRowGroup=!0;return s}};z([W("columnModel")],ay.prototype,"columnModel",2);z([W("columnFactory")],ay.prototype,"columnFactory",2);ay=z([Me("autoGroupColService")],ay);var z3={};ar(z3,{camelCaseToHumanText:()=>$3,camelCaseToHyphenated:()=>K3,capitalise:()=>W$,escapeString:()=>Ts,utf8_encode:()=>U$});var H$=/[&<>"']/g,j$={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"};function U$(t){const e=String.fromCharCode;function i(d){const h=[];if(!d)return[];const p=d.length;let f=0,m,g;for(;f<p;)m=d.charCodeAt(f++),m>=55296&&m<=56319&&f<p?(g=d.charCodeAt(f++),(g&64512)==56320?h.push(((m&1023)<<10)+(g&1023)+65536):(h.push(m),f--)):h.push(m);return h}function s(d){if(d>=55296&&d<=57343)throw Error("Lone surrogate U+"+d.toString(16).toUpperCase()+" is not a scalar value")}function r(d,h){return e(d>>h&63|128)}function n(d){if(d>=0&&d<=31&&d!==10)return`_x${d.toString(16).toUpperCase().padStart(4,"0")}_`;if(!(d&4294967168))return e(d);let h="";return d&4294965248?d&4294901760?d&4292870144||(h=e(d>>18&7|240),h+=r(d,12),h+=r(d,6)):(s(d),h=e(d>>12&15|224),h+=r(d,6)):h=e(d>>6&31|192),h+=e(d&63|128),h}const o=i(t),a=o.length;let l=-1,c,u="";for(;++l<a;)c=o[l],u+=n(c);return u}function W$(t){return t[0].toUpperCase()+t.substring(1).toLowerCase()}function Ts(t,e){if(t==null)return null;const i=t.toString().toString();return e?i:i.replace(H$,s=>j$[s])}function $3(t){if(!t||t==null)return null;const e=/([a-z])([A-Z])/g,i=/([A-Z]+)([A-Z])([a-z])/g;return t.replace(e,"$1 $2").replace(i,"$1 $2$3").replace(/\./g," ").split(" ").map(r=>r.substring(0,1).toUpperCase()+(r.length>1?r.substring(1,r.length):"")).join(" ")}function K3(t){return t.replace(/[A-Z]/g,e=>`-${e.toLocaleLowerCase()}`)}var Y3={};ar(Y3,{convertToMap:()=>tu,keys:()=>$$,mapById:()=>z$});function tu(t){const e=new Map;return t.forEach(i=>e.set(i[0],i[1])),e}function z$(t,e){const i=new Map;return t.forEach(s=>i.set(e(s),s)),i}function $$(t){const e=[];return t.forEach((i,s)=>e.push(s)),e}var Zs=class extends ye{constructor(){super(...arguments),this.primaryHeaderRowCount=0,this.secondaryHeaderRowCount=0,this.gridHeaderRowCount=0,this.displayedColumnsLeft=[],this.displayedColumnsRight=[],this.displayedColumnsCenter=[],this.displayedColumns=[],this.displayedColumnsAndGroupsMap={},this.viewportColumns=[],this.viewportColumnsHash="",this.headerViewportColumns=[],this.viewportColumnsCenter=[],this.headerViewportColumnsCenter=[],this.viewportRowLeft={},this.viewportRowRight={},this.viewportRowCenter={},this.autoHeightActiveAtLeastOnce=!1,this.rowGroupColumns=[],this.valueColumns=[],this.pivotColumns=[],this.ready=!1,this.changeEventsDispatching=!1,this.autoGroupsNeedBuilding=!1,this.forceRecreateAutoGroups=!1,this.pivotMode=!1,this.bodyWidth=0,this.leftWidth=0,this.rightWidth=0,this.bodyWidthDirty=!0,this.shouldQueueResizeOperations=!1,this.resizeOperationQueue=[]}init(){this.suppressColumnVirtualisation=this.gos.get("suppressColumnVirtualisation");const t=this.gos.get("pivotMode");this.isPivotSettingAllowed(t)&&(this.pivotMode=t),this.addManagedPropertyListeners(["groupDisplayType","treeData","treeDataDisplayType","groupHideOpenParents"],e=>this.buildAutoGroupColumns(mf(e.source))),this.addManagedPropertyListener("autoGroupColumnDef",e=>this.onAutoGroupColumnDefChanged(mf(e.source))),this.addManagedPropertyListeners(["defaultColDef","columnTypes","suppressFieldDotNotation"],e=>this.onSharedColDefChanged(mf(e.source))),this.addManagedPropertyListener("pivotMode",e=>this.setPivotMode(this.gos.get("pivotMode"),mf(e.source))),this.addManagedListener(this.eventService,K.EVENT_FIRST_DATA_RENDERED,()=>this.onFirstDataRendered())}buildAutoGroupColumns(t){this.columnDefs&&(this.autoGroupsNeedBuilding=!0,this.forceRecreateAutoGroups=!0,this.updateGridColumns(),this.updateDisplayedColumns(t))}onAutoGroupColumnDefChanged(t){this.groupAutoColumns&&this.autoGroupColService.updateAutoGroupColumns(this.groupAutoColumns,t)}onSharedColDefChanged(t){this.gridColumns&&(this.groupAutoColumns&&this.autoGroupColService.updateAutoGroupColumns(this.groupAutoColumns,t),this.createColumnsFromColumnDefs(!0,t))}setColumnDefs(t,e){const i=!!this.columnDefs;this.columnDefs=t,this.createColumnsFromColumnDefs(i,e)}recreateColumnDefs(t){this.onSharedColDefChanged(t)}destroyOldColumns(t,e){const i={};if(!t)return;Bl(null,t,r=>{i[r.getInstanceId()]=r}),e&&Bl(null,e,r=>{i[r.getInstanceId()]=null});const s=Object.values(i).filter(r=>r!=null);this.destroyBeans(s)}destroyColumns(){this.destroyOldColumns(this.primaryColumnTree),this.destroyOldColumns(this.secondaryBalancedTree),this.destroyOldColumns(this.groupAutoColsBalancedTree)}createColumnsFromColumnDefs(t,e){const i=t?this.compareColumnStatesAndDispatchEvents(e):void 0;this.valueCache.expire(),this.autoGroupsNeedBuilding=!0;const s=this.primaryColumns,r=this.primaryColumnTree,n=this.columnFactory.createColumnTree(this.columnDefs,!0,r,e);this.destroyOldColumns(this.primaryColumnTree,n.columnTree),this.primaryColumnTree=n.columnTree,this.primaryHeaderRowCount=n.treeDept+1,this.primaryColumns=this.getColumnsFromTree(this.primaryColumnTree),this.primaryColumnsMap={},this.primaryColumns.forEach(l=>this.primaryColumnsMap[l.getId()]=l),this.extractRowGroupColumns(e,s),this.extractPivotColumns(e,s),this.extractValueColumns(e,s),this.ready=!0;const o=this.gridColsArePrimary===void 0;(this.gridColsArePrimary||o||this.autoGroupsNeedBuilding)&&(this.updateGridColumns(),t&&this.gridColsArePrimary&&!this.gos.get("maintainColumnOrder")&&this.orderGridColumnsLikePrimary(),this.updateDisplayedColumns(e),this.checkViewportColumns()),this.dispatchEverythingChanged(e),this.changeEventsDispatching=!0,i&&i(),this.changeEventsDispatching=!1,this.dispatchNewColumnsLoaded(e)}shouldRowModelIgnoreRefresh(){return this.changeEventsDispatching}dispatchNewColumnsLoaded(t){const e={type:K.EVENT_NEW_COLUMNS_LOADED,source:t};this.eventService.dispatchEvent(e),t==="gridInitializing"&&this.onColumnsReady()}dispatchEverythingChanged(t){const e={type:K.EVENT_COLUMN_EVERYTHING_CHANGED,source:t};this.eventService.dispatchEvent(e)}orderGridColumnsLikePrimary(){const t=this.primaryColumns;if(!t)return;const e=t.filter(s=>this.gridColumns.indexOf(s)>=0),i=this.gridColumns.filter(s=>e.indexOf(s)<0);this.gridColumns=[...i,...e],this.gridColumns=this.placeLockedColumns(this.gridColumns)}getAllDisplayedAutoHeightCols(){return this.displayedAutoHeightCols}setViewport(){this.gos.get("enableRtl")?(this.viewportLeft=this.bodyWidth-this.scrollPosition-this.scrollWidth,this.viewportRight=this.bodyWidth-this.scrollPosition):(this.viewportLeft=this.scrollPosition,this.viewportRight=this.scrollWidth+this.scrollPosition)}checkViewportColumns(t=!1){if(this.displayedColumnsCenter==null||!this.extractViewport())return;const i={type:K.EVENT_VIRTUAL_COLUMNS_CHANGED,afterScroll:t};this.eventService.dispatchEvent(i)}setViewportPosition(t,e,i=!1){(t!==this.scrollWidth||e!==this.scrollPosition||this.bodyWidthDirty)&&(this.scrollWidth=t,this.scrollPosition=e,this.bodyWidthDirty=!0,this.setViewport(),this.ready&&this.checkViewportColumns(i))}isPivotMode(){return this.pivotMode}isPivotSettingAllowed(t){return t&&this.gos.get("treeData")?(ot("Pivot mode not available with treeData."),!1):!0}setPivotMode(t,e){if(t===this.pivotMode||!this.isPivotSettingAllowed(this.pivotMode)||(this.pivotMode=t,!this.gridColumns))return;this.autoGroupsNeedBuilding=!0,this.updateGridColumns(),this.updateDisplayedColumns(e);const i={type:K.EVENT_COLUMN_PIVOT_MODE_CHANGED};this.eventService.dispatchEvent(i)}getSecondaryPivotColumn(t,e){if(St(this.secondaryColumns))return null;const i=this.getPrimaryColumn(e);let s=null;return this.secondaryColumns.forEach(r=>{const n=r.getColDef().pivotKeys,o=r.getColDef().pivotValueColumn;Ya(n,t)&&o===i&&(s=r)}),s}setBeans(t){this.logger=t.create("columnModel")}setFirstRightAndLastLeftPinned(t){let e,i;this.gos.get("enableRtl")?(e=this.displayedColumnsLeft?this.displayedColumnsLeft[0]:null,i=this.displayedColumnsRight?di(this.displayedColumnsRight):null):(e=this.displayedColumnsLeft?di(this.displayedColumnsLeft):null,i=this.displayedColumnsRight?this.displayedColumnsRight[0]:null),this.gridColumns.forEach(s=>{s.setLastLeftPinned(s===e,t),s.setFirstRightPinned(s===i,t)})}autoSizeColumns(t){if(this.shouldQueueResizeOperations){this.resizeOperationQueue.push(()=>this.autoSizeColumns(t));return}const{columns:e,skipHeader:i,skipHeaderGroups:s,stopAtGroup:r,source:n="api"}=t;this.animationFrameService.flushAllFrames();const o=[];let a=-1;const l=i??this.gos.get("skipHeaderOnAutoSize"),c=s??l;for(;a!==0;)a=0,this.actionOnGridColumns(e,u=>{if(o.indexOf(u)>=0)return!1;const d=this.autoWidthCalculator.getPreferredWidthForColumn(u,l);if(d>0){const h=this.normaliseColumnWidth(u,d);u.setActualWidth(h,n),o.push(u),a++}return!0},n);c||this.autoSizeColumnGroupsByColumns(e,n,r),this.dispatchColumnResizedEvent(o,!0,"autosizeColumns")}dispatchColumnResizedEvent(t,e,i,s=null){if(t&&t.length){const r={type:K.EVENT_COLUMN_RESIZED,columns:t,column:t.length===1?t[0]:null,flexColumns:s,finished:e,source:i};this.eventService.dispatchEvent(r)}}dispatchColumnChangedEvent(t,e,i){const s={type:t,columns:e,column:e&&e.length==1?e[0]:null,source:i};this.eventService.dispatchEvent(s)}dispatchColumnMovedEvent(t){const{movedColumns:e,source:i,toIndex:s,finished:r}=t,n={type:K.EVENT_COLUMN_MOVED,columns:e,column:e&&e.length===1?e[0]:null,toIndex:s,finished:r,source:i};this.eventService.dispatchEvent(n)}dispatchColumnPinnedEvent(t,e){if(!t.length)return;const i=t.length===1?t[0]:null,s=this.getCommonValue(t,n=>n.getPinned()),r={type:K.EVENT_COLUMN_PINNED,pinned:s??null,columns:t,column:i,source:e};this.eventService.dispatchEvent(r)}dispatchColumnVisibleEvent(t,e){if(!t.length)return;const i=t.length===1?t[0]:null,s=this.getCommonValue(t,n=>n.isVisible()),r={type:K.EVENT_COLUMN_VISIBLE,visible:s,columns:t,column:i,source:e};this.eventService.dispatchEvent(r)}autoSizeColumn(t,e,i){t&&this.autoSizeColumns({columns:[t],skipHeader:i,skipHeaderGroups:!0,source:e})}autoSizeColumnGroupsByColumns(t,e,i){const s=new Set;this.getGridColumns(t).forEach(a=>{let l=a.getParent();for(;l&&l!=i;)l.isPadding()||s.add(l),l=l.getParent()});let n;const o=[];for(const a of s){for(const l of this.ctrlsService.getHeaderRowContainerCtrls())if(n=l.getHeaderCtrlForColumn(a),n)break;n&&n.resizeLeafColumnsToFit(e)}return o}autoSizeAllColumns(t,e){if(this.shouldQueueResizeOperations){this.resizeOperationQueue.push(()=>this.autoSizeAllColumns(t,e));return}const i=this.getAllDisplayedColumns();this.autoSizeColumns({columns:i,skipHeader:e,source:t})}getColumnsFromTree(t){const e=[],i=s=>{for(let r=0;r<s.length;r++){const n=s[r];n instanceof Nt?e.push(n):n instanceof bi&&i(n.getChildren())}};return i(t),e}getAllDisplayedTrees(){return this.displayedTreeLeft&&this.displayedTreeRight&&this.displayedTreeCentre?this.displayedTreeLeft.concat(this.displayedTreeCentre).concat(this.displayedTreeRight):null}getPrimaryColumnTree(){return this.primaryColumnTree}getHeaderRowCount(){return this.gridHeaderRowCount}getDisplayedTreeLeft(){return this.displayedTreeLeft}getDisplayedTreeRight(){return this.displayedTreeRight}getDisplayedTreeCentre(){return this.displayedTreeCentre}isColumnDisplayed(t){return this.getAllDisplayedColumns().indexOf(t)>=0}getAllDisplayedColumns(){return this.displayedColumns}getViewportColumns(){return this.viewportColumns}getDisplayedLeftColumnsForRow(t){return this.colSpanActive?this.getDisplayedColumnsForRow(t,this.displayedColumnsLeft):this.displayedColumnsLeft}getDisplayedRightColumnsForRow(t){return this.colSpanActive?this.getDisplayedColumnsForRow(t,this.displayedColumnsRight):this.displayedColumnsRight}isColSpanActive(){return this.colSpanActive}getDisplayedColumnsForRow(t,e,i,s){const r=[];let n=null;for(let o=0;o<e.length;o++){const a=e[o],l=e.length-o,c=Math.min(a.getColSpan(t),l),u=[a];if(c>1){const h=c-1;for(let p=1;p<=h;p++)u.push(e[o+p]);o+=h}let d;i?(d=!1,u.forEach(h=>{i(h)&&(d=!0)})):d=!0,d&&(r.length===0&&n&&(s&&s(a))&&r.push(n),r.push(a)),n=a}return r}getViewportCenterColumnsForRow(t){if(!this.colSpanActive)return this.viewportColumnsCenter;const e=s=>{const r=s.getLeft();return Pe(r)&&r>this.viewportLeft},i=this.isColumnVirtualisationSuppressed()?null:this.isColumnInRowViewport.bind(this);return this.getDisplayedColumnsForRow(t,this.displayedColumnsCenter,i,e)}isColumnAtEdge(t,e){const i=this.getAllDisplayedColumns();if(!i.length)return!1;const s=e==="first";let r;if(t instanceof Fs){const n=t.getDisplayedLeafColumns();if(!n.length)return!1;r=s?n[0]:di(n)}else r=t;return(s?i[0]:di(i))===r}getAriaColumnIndex(t){let e;return t instanceof Fs?e=t.getLeafColumns()[0]:e=t,this.ariaOrderColumns.indexOf(e)+1}isColumnInHeaderViewport(t){return t.isAutoHeaderHeight()?!0:this.isColumnInRowViewport(t)}isColumnInRowViewport(t){if(t.isAutoHeight())return!0;const e=t.getLeft()||0,i=e+t.getActualWidth(),s=this.viewportLeft-200,r=this.viewportRight+200,n=e<s&&i<s,o=e>r&&i>r;return!n&&!o}getDisplayedColumnsLeftWidth(){return this.getWidthOfColsInList(this.displayedColumnsLeft)}getDisplayedColumnsRightWidth(){return this.getWidthOfColsInList(this.displayedColumnsRight)}updatePrimaryColumnList(t,e,i,s,r,n){if(!t||Mo(t))return;let o=!1;if(t.forEach(l=>{if(!l)return;const c=this.getPrimaryColumn(l);if(c){if(i){if(e.indexOf(c)>=0)return;e.push(c)}else{if(e.indexOf(c)<0)return;vn(e,c)}s(c),o=!0}}),!o)return;this.autoGroupsNeedBuilding&&this.updateGridColumns(),this.updateDisplayedColumns(n);const a={type:r,columns:e,column:e.length===1?e[0]:null,source:n};this.eventService.dispatchEvent(a)}setRowGroupColumns(t,e){this.autoGroupsNeedBuilding=!0,this.setPrimaryColumnList(t,this.rowGroupColumns,K.EVENT_COLUMN_ROW_GROUP_CHANGED,!0,this.setRowGroupActive.bind(this),e)}setRowGroupActive(t,e,i){t!==e.isRowGroupActive()&&(e.setRowGroupActive(t,i),t&&!this.gos.get("suppressRowGroupHidesColumns")&&this.setColumnsVisible([e],!1,i),!t&&!this.gos.get("suppressMakeColumnVisibleAfterUnGroup")&&this.setColumnsVisible([e],!0,i))}addRowGroupColumns(t,e){this.autoGroupsNeedBuilding=!0,this.updatePrimaryColumnList(t,this.rowGroupColumns,!0,this.setRowGroupActive.bind(this,!0),K.EVENT_COLUMN_ROW_GROUP_CHANGED,e)}removeRowGroupColumns(t,e){this.autoGroupsNeedBuilding=!0,this.updatePrimaryColumnList(t,this.rowGroupColumns,!1,this.setRowGroupActive.bind(this,!1),K.EVENT_COLUMN_ROW_GROUP_CHANGED,e)}addPivotColumns(t,e){this.updatePrimaryColumnList(t,this.pivotColumns,!0,i=>i.setPivotActive(!0,e),K.EVENT_COLUMN_PIVOT_CHANGED,e)}setPivotColumns(t,e){this.setPrimaryColumnList(t,this.pivotColumns,K.EVENT_COLUMN_PIVOT_CHANGED,!0,(i,s)=>{s.setPivotActive(i,e)},e)}removePivotColumns(t,e){this.updatePrimaryColumnList(t,this.pivotColumns,!1,i=>i.setPivotActive(!1,e),K.EVENT_COLUMN_PIVOT_CHANGED,e)}setPrimaryColumnList(t,e,i,s,r,n){if(!this.gridColumns)return;const o=new Map;e.forEach((a,l)=>o.set(a,l)),e.length=0,Pe(t)&&t.forEach(a=>{const l=this.getPrimaryColumn(a);l&&e.push(l)}),e.forEach((a,l)=>{const c=o.get(a);if(c===void 0){o.set(a,0);return}s&&c!==l||o.delete(a)}),(this.primaryColumns||[]).forEach(a=>{const l=e.indexOf(a)>=0;r(l,a)}),this.autoGroupsNeedBuilding&&this.updateGridColumns(),this.updateDisplayedColumns(n),this.dispatchColumnChangedEvent(i,[...o.keys()],n)}setValueColumns(t,e){this.setPrimaryColumnList(t,this.valueColumns,K.EVENT_COLUMN_VALUE_CHANGED,!1,this.setValueActive.bind(this),e)}setValueActive(t,e,i){if(t!==e.isValueActive()&&(e.setValueActive(t,i),t&&!e.getAggFunc()&&this.aggFuncService)){const s=this.aggFuncService.getDefaultAggFunc(e);e.setAggFunc(s)}}addValueColumns(t,e){this.updatePrimaryColumnList(t,this.valueColumns,!0,this.setValueActive.bind(this,!0),K.EVENT_COLUMN_VALUE_CHANGED,e)}removeValueColumns(t,e){this.updatePrimaryColumnList(t,this.valueColumns,!1,this.setValueActive.bind(this,!1),K.EVENT_COLUMN_VALUE_CHANGED,e)}normaliseColumnWidth(t,e){const i=t.getMinWidth();Pe(i)&&e<i&&(e=i);const s=t.getMaxWidth();return Pe(s)&&t.isGreaterThanMax(e)&&(e=s),e}getPrimaryOrGridColumn(t){return this.getPrimaryColumn(t)||this.getGridColumn(t)}setColumnWidths(t,e,i,s){const r=[];t.forEach(n=>{const o=this.getPrimaryOrGridColumn(n.key);if(!o)return;if(r.push({width:n.newWidth,ratios:[1],columns:[o]}),this.gos.get("colResizeDefault")==="shift"&&(e=!e),e){const l=this.getDisplayedColAfter(o);if(!l)return;const c=o.getActualWidth()-n.newWidth,u=l.getActualWidth()+c;r.push({width:u,ratios:[1],columns:[l]})}}),r.length!==0&&this.resizeColumnSets({resizeSets:r,finished:i,source:s})}checkMinAndMaxWidthsForSet(t){const{columns:e,width:i}=t;let s=0,r=0,n=!0;e.forEach(l=>{const c=l.getMinWidth();s+=c||0;const u=l.getMaxWidth();Pe(u)&&u>0?r+=u:n=!1});const o=i>=s,a=!n||i<=r;return o&&a}resizeColumnSets(t){const{resizeSets:e,finished:i,source:s}=t;if(!(!e||e.every(u=>this.checkMinAndMaxWidthsForSet(u)))){if(i){const u=e&&e.length>0?e[0].columns:null;this.dispatchColumnResizedEvent(u,i,s)}return}const n=[],o=[];e.forEach(u=>{const{width:d,columns:h,ratios:p}=u,f={},m={};h.forEach(v=>o.push(v));let g=!0,y=0;for(;g;){if(y++,y>1e3){console.error("AG Grid: infinite loop in resizeColumnSets");break}g=!1;const v=[];let C=0,b=d;h.forEach((A,I)=>{if(m[A.getId()])b-=f[A.getId()];else{v.push(A);const F=p[I];C+=F}});const T=1/C;v.forEach((A,I)=>{const D=I===v.length-1;let F;D?F=b:(F=Math.round(p[I]*d*T),b-=F);const B=A.getMinWidth(),U=A.getMaxWidth();Pe(B)&&F<B?(F=B,m[A.getId()]=!0,g=!0):Pe(U)&&U>0&&F>U&&(F=U,m[A.getId()]=!0,g=!0),f[A.getId()]=F})}h.forEach(v=>{const C=f[v.getId()];v.getActualWidth()!==C&&(v.setActualWidth(C,s),n.push(v))})});const a=n.length>0;let l=[];a&&(l=this.refreshFlexedColumns({resizingCols:o,skipSetLeft:!0}),this.setLeftValues(s),this.updateBodyWidths(),this.checkViewportColumns());const c=o.concat(l);(a||i)&&this.dispatchColumnResizedEvent(c,i,s,l)}setColumnAggFunc(t,e,i){if(!t)return;const s=this.getPrimaryColumn(t);s&&(s.setAggFunc(e),this.dispatchColumnChangedEvent(K.EVENT_COLUMN_VALUE_CHANGED,[s],i))}moveRowGroupColumn(t,e,i){if(this.isRowGroupEmpty())return;const s=this.rowGroupColumns[t],r=this.rowGroupColumns.slice(t,e);this.rowGroupColumns.splice(t,1),this.rowGroupColumns.splice(e,0,s);const n={type:K.EVENT_COLUMN_ROW_GROUP_CHANGED,columns:r,column:r.length===1?r[0]:null,source:i};this.eventService.dispatchEvent(n)}moveColumns(t,e,i,s=!0){if(!this.gridColumns)return;if(this.columnAnimationService.start(),e>this.gridColumns.length-t.length){console.warn("AG Grid: tried to insert columns in invalid location, toIndex = "+e),console.warn("AG Grid: remember that you should not count the moving columns when calculating the new index");return}const r=this.getGridColumns(t);this.doesMovePassRules(r,e)&&(T_(this.gridColumns,r,e),this.updateDisplayedColumns(i),this.dispatchColumnMovedEvent({movedColumns:r,source:i,toIndex:e,finished:s}),this.columnAnimationService.finish())}doesMovePassRules(t,e){const i=this.getProposedColumnOrder(t,e);return this.doesOrderPassRules(i)}doesOrderPassRules(t){return!(!this.doesMovePassMarryChildren(t)||!this.doesMovePassLockedPositions(t))}getProposedColumnOrder(t,e){const i=this.gridColumns.slice();return T_(i,t,e),i}sortColumnsLikeGridColumns(t){!t||t.length<=1||t.filter(i=>this.gridColumns.indexOf(i)<0).length>0||t.sort((i,s)=>{const r=this.gridColumns.indexOf(i),n=this.gridColumns.indexOf(s);return r-n})}doesMovePassLockedPositions(t){let e=0,i=!0;const s=r=>r?r===!0||r==="left"?0:2:1;return t.forEach(r=>{const n=s(r.getColDef().lockPosition);n<e&&(i=!1),e=n}),i}doesMovePassMarryChildren(t){let e=!0;return Bl(null,this.gridBalancedTree,i=>{if(!(i instanceof bi))return;const s=i,r=s.getColGroupDef();if(!(r&&r.marryChildren))return;const o=[];s.getLeafColumns().forEach(d=>{const h=t.indexOf(d);o.push(h)});const a=Math.max.apply(Math,o),l=Math.min.apply(Math,o),c=a-l,u=s.getLeafColumns().length-1;c>u&&(e=!1)}),e}moveColumnByIndex(t,e,i){if(!this.gridColumns)return;const s=this.gridColumns[t];this.moveColumns([s],e,i)}getColumnDefs(){if(!this.primaryColumns)return;const t=this.primaryColumns.slice();return this.gridColsArePrimary?t.sort((e,i)=>this.gridColumns.indexOf(e)-this.gridColumns.indexOf(i)):this.lastPrimaryOrder&&t.sort((e,i)=>this.lastPrimaryOrder.indexOf(e)-this.lastPrimaryOrder.indexOf(i)),this.columnDefFactory.buildColumnDefs(t,this.rowGroupColumns,this.pivotColumns)}getBodyContainerWidth(){return this.bodyWidth}getContainerWidth(t){switch(t){case"left":return this.leftWidth;case"right":return this.rightWidth;default:return this.bodyWidth}}updateBodyWidths(){const t=this.getWidthOfColsInList(this.displayedColumnsCenter),e=this.getWidthOfColsInList(this.displayedColumnsLeft),i=this.getWidthOfColsInList(this.displayedColumnsRight);if(this.bodyWidthDirty=this.bodyWidth!==t,this.bodyWidth!==t||this.leftWidth!==e||this.rightWidth!==i){this.bodyWidth=t,this.leftWidth=e,this.rightWidth=i;const r={type:K.EVENT_COLUMN_CONTAINER_WIDTH_CHANGED};this.eventService.dispatchEvent(r);const n={type:K.EVENT_DISPLAYED_COLUMNS_WIDTH_CHANGED};this.eventService.dispatchEvent(n)}}getValueColumns(){return this.valueColumns?this.valueColumns:[]}getPivotColumns(){return this.pivotColumns?this.pivotColumns:[]}isPivotActive(){return this.pivotColumns&&this.pivotColumns.length>0&&this.pivotMode}getRowGroupColumns(){return this.rowGroupColumns?this.rowGroupColumns:[]}getDisplayedCenterColumns(){return this.displayedColumnsCenter}getDisplayedLeftColumns(){return this.displayedColumnsLeft}getDisplayedRightColumns(){return this.displayedColumnsRight}getAllPrimaryColumns(){return this.primaryColumns?this.primaryColumns:null}getSecondaryColumns(){return this.secondaryColumns?this.secondaryColumns:null}getAllColumnsForQuickFilter(){return this.columnsForQuickFilter}getAllGridColumns(){var t;return(t=this.gridColumns)!=null?t:[]}isRowGroupEmpty(){return Mo(this.rowGroupColumns)}setColumnsVisible(t,e=!1,i){this.applyColumnState({state:t.map(s=>({colId:typeof s=="string"?s:s.getColId(),hide:!e}))},i)}setColumnsPinned(t,e,i){if(!this.gridColumns)return;if(this.gos.isDomLayout("print")){console.warn("AG Grid: Changing the column pinning status is not allowed with domLayout='print'");return}this.columnAnimationService.start();let s;e===!0||e==="left"?s="left":e==="right"?s="right":s=null,this.actionOnGridColumns(t,r=>r.getPinned()!==s?(r.setPinned(s),!0):!1,i,()=>({type:K.EVENT_COLUMN_PINNED,pinned:s,column:null,columns:null,source:i})),this.columnAnimationService.finish()}actionOnGridColumns(t,e,i,s){if(Mo(t))return;const r=[];if(t.forEach(n=>{if(!n)return;const o=this.getGridColumn(n);if(!o)return;e(o)!==!1&&r.push(o)}),!!r.length&&(this.updateDisplayedColumns(i),Pe(s)&&s)){const n=s();n.columns=r,n.column=r.length===1?r[0]:null,this.eventService.dispatchEvent(n)}}getDisplayedColBefore(t){const e=this.getAllDisplayedColumns(),i=e.indexOf(t);return i>0?e[i-1]:null}getDisplayedColAfter(t){const e=this.getAllDisplayedColumns(),i=e.indexOf(t);return i<e.length-1?e[i+1]:null}getDisplayedGroupAtDirection(t,e){const i=t.getProvidedColumnGroup().getLevel()+t.getPaddingLevel(),s=t.getDisplayedLeafColumns(),r=e==="After"?di(s):s[0],n=`getDisplayedCol${e}`;for(;;){const o=this[n](r);if(!o)return null;const a=this.getColumnGroupAtLevel(o,i);if(a!==t)return a}}getColumnGroupAtLevel(t,e){let i=t.getParent(),s,r;for(;s=i.getProvidedColumnGroup().getLevel(),r=i.getPaddingLevel(),!(s+r<=e);)i=i.getParent();return i}isPinningLeft(){return this.displayedColumnsLeft.length>0}isPinningRight(){return this.displayedColumnsRight.length>0}getPrimaryAndSecondaryAndAutoColumns(){return[].concat(this.primaryColumns||[],this.groupAutoColumns||[],this.secondaryColumns||[])}createStateItemFromColumn(t){const e=t.isRowGroupActive()?this.rowGroupColumns.indexOf(t):null,i=t.isPivotActive()?this.pivotColumns.indexOf(t):null,s=t.isValueActive()?t.getAggFunc():null,r=t.getSort()!=null?t.getSort():null,n=t.getSortIndex()!=null?t.getSortIndex():null,o=t.getFlex()!=null&&t.getFlex()>0?t.getFlex():null;return{colId:t.getColId(),width:t.getActualWidth(),hide:!t.isVisible(),pinned:t.getPinned(),sort:r,sortIndex:n,aggFunc:s,rowGroup:t.isRowGroupActive(),rowGroupIndex:e,pivot:t.isPivotActive(),pivotIndex:i,flex:o}}getColumnState(){if(St(this.primaryColumns)||!this.isAlive())return[];const e=this.getPrimaryAndSecondaryAndAutoColumns().map(this.createStateItemFromColumn.bind(this));return this.orderColumnStateList(e),e}orderColumnStateList(t){const e=tu(this.gridColumns.map((i,s)=>[i.getColId(),s]));t.sort((i,s)=>{const r=e.has(i.colId)?e.get(i.colId):-1,n=e.has(s.colId)?e.get(s.colId):-1;return r-n})}resetColumnState(t){if(Mo(this.primaryColumns))return;const e=this.getColumnsFromTree(this.primaryColumnTree),i=[];let s=1e3,r=1e3,n=[];this.groupAutoColumns&&(n=n.concat(this.groupAutoColumns)),e&&(n=n.concat(e)),n.forEach(o=>{const a=this.getColumnStateFromColDef(o);St(a.rowGroupIndex)&&a.rowGroup&&(a.rowGroupIndex=s++),St(a.pivotIndex)&&a.pivot&&(a.pivotIndex=r++),i.push(a)}),this.applyColumnState({state:i,applyOrder:!0},t)}getColumnStateFromColDef(t){const e=(f,m)=>f??m??null,i=t.getColDef(),s=e(i.sort,i.initialSort),r=e(i.sortIndex,i.initialSortIndex),n=e(i.hide,i.initialHide),o=e(i.pinned,i.initialPinned),a=e(i.width,i.initialWidth),l=e(i.flex,i.initialFlex);let c=e(i.rowGroupIndex,i.initialRowGroupIndex),u=e(i.rowGroup,i.initialRowGroup);c==null&&(u==null||u==!1)&&(c=null,u=null);let d=e(i.pivotIndex,i.initialPivotIndex),h=e(i.pivot,i.initialPivot);d==null&&(h==null||h==!1)&&(d=null,h=null);const p=e(i.aggFunc,i.initialAggFunc);return{colId:t.getColId(),sort:s,sortIndex:r,hide:n,pinned:o,width:a,flex:l,rowGroup:u,rowGroupIndex:c,pivot:h,pivotIndex:d,aggFunc:p}}applyColumnState(t,e){if(Mo(this.primaryColumns))return!1;if(t&&t.state&&!t.state.forEach)return console.warn("AG Grid: applyColumnState() - the state attribute should be an array, however an array was not found. Please provide an array of items (one for each col you want to change) for state."),!1;const i=(n,o,a)=>{const l=this.compareColumnStatesAndDispatchEvents(e);this.autoGroupsNeedBuilding=!0;const c=o.slice(),u={},d={},h=[],p=[];let f=0;const m=this.rowGroupColumns.slice(),g=this.pivotColumns.slice();n.forEach(b=>{const T=b.colId||"";if(T.startsWith(rc)){h.push(b),p.push(b);return}const I=a(T);I?(this.syncColumnWithStateItem(I,b,t.defaultState,u,d,!1,e),vn(c,I)):(p.push(b),f+=1)});const y=b=>this.syncColumnWithStateItem(b,null,t.defaultState,u,d,!1,e);c.forEach(y);const v=(b,T,A,I)=>{const D=b[A.getId()],F=b[I.getId()],B=D!=null,U=F!=null;if(B&&U)return D-F;if(B)return-1;if(U)return 1;const H=T.indexOf(A),R=T.indexOf(I),L=H>=0,_=R>=0;return L&&_?H-R:L?-1:1};this.rowGroupColumns.sort(v.bind(this,u,m)),this.pivotColumns.sort(v.bind(this,d,g)),this.updateGridColumns();const C=this.groupAutoColumns?this.groupAutoColumns.slice():[];return h.forEach(b=>{const T=this.getAutoColumn(b.colId);vn(C,T),this.syncColumnWithStateItem(T,b,t.defaultState,null,null,!0,e)}),C.forEach(y),this.applyOrderAfterApplyState(t),this.updateDisplayedColumns(e),this.dispatchEverythingChanged(e),l(),{unmatchedAndAutoStates:p,unmatchedCount:f}};this.columnAnimationService.start();let{unmatchedAndAutoStates:s,unmatchedCount:r}=i(t.state||[],this.primaryColumns||[],n=>this.getPrimaryColumn(n));return(s.length>0||Pe(t.defaultState))&&(r=i(s,this.secondaryColumns||[],n=>this.getSecondaryColumn(n)).unmatchedCount),this.columnAnimationService.finish(),r===0}applyOrderAfterApplyState(t){if(!t.applyOrder||!t.state)return;let e=[];const i={};t.state.forEach(r=>{if(!r.colId||i[r.colId])return;const n=this.gridColumnsMap[r.colId];n&&(e.push(n),i[r.colId]=!0)});let s=0;if(this.gridColumns.forEach(r=>{const n=r.getColId();if(i[n]!=null)return;n.startsWith(rc)?oy(e,r,s++):e.push(r)}),e=this.placeLockedColumns(e),!this.doesMovePassMarryChildren(e)){console.warn("AG Grid: Applying column order broke a group where columns should be married together. Applying new order has been discarded.");return}this.gridColumns=e}compareColumnStatesAndDispatchEvents(t){const e={rowGroupColumns:this.rowGroupColumns.slice(),pivotColumns:this.pivotColumns.slice(),valueColumns:this.valueColumns.slice()},i=this.getColumnState(),s={};return i.forEach(r=>{s[r.colId]=r}),()=>{const r=this.getPrimaryAndSecondaryAndAutoColumns(),n=(m,g,y,v)=>{const C=g.map(v),b=y.map(v);if(Ya(C,b))return;const A=new Set(g);y.forEach(F=>{A.delete(F)||A.add(F)});const I=[...A],D={type:m,columns:I,column:I.length===1?I[0]:null,source:t};this.eventService.dispatchEvent(D)},o=m=>{const g=[];return r.forEach(y=>{const v=s[y.getColId()];v&&m(v,y)&&g.push(y)}),g},a=m=>m.getColId();n(K.EVENT_COLUMN_ROW_GROUP_CHANGED,e.rowGroupColumns,this.rowGroupColumns,a),n(K.EVENT_COLUMN_PIVOT_CHANGED,e.pivotColumns,this.pivotColumns,a);const c=o((m,g)=>{const y=m.aggFunc!=null,v=y!=g.isValueActive(),C=y&&m.aggFunc!=g.getAggFunc();return v||C});c.length>0&&this.dispatchColumnChangedEvent(K.EVENT_COLUMN_VALUE_CHANGED,c,t);const u=(m,g)=>m.width!=g.getActualWidth();this.dispatchColumnResizedEvent(o(u),!0,t);const d=(m,g)=>m.pinned!=g.getPinned();this.dispatchColumnPinnedEvent(o(d),t);const h=(m,g)=>m.hide==g.isVisible();this.dispatchColumnVisibleEvent(o(h),t);const f=o((m,g)=>m.sort!=g.getSort()||m.sortIndex!=g.getSortIndex());f.length>0&&this.sortController.dispatchSortChangedEvents(t,f),this.normaliseColumnMovedEventForColumnState(i,t)}}getCommonValue(t,e){if(!t||t.length==0)return;const i=e(t[0]);for(let s=1;s<t.length;s++)if(i!==e(t[s]))return;return i}normaliseColumnMovedEventForColumnState(t,e){const i=this.getColumnState(),s={};i.forEach(l=>s[l.colId]=l);const r={};t.forEach(l=>{s[l.colId]&&(r[l.colId]=!0)});const n=t.filter(l=>r[l.colId]),o=i.filter(l=>r[l.colId]),a=[];o.forEach((l,c)=>{const u=n&&n[c];if(u&&u.colId!==l.colId){const d=this.getGridColumn(u.colId);d&&a.push(d)}}),a.length&&this.dispatchColumnMovedEvent({movedColumns:a,source:e,finished:!0})}syncColumnWithStateItem(t,e,i,s,r,n,o){var a;if(!t)return;const l=(b,T)=>{const A={value1:void 0,value2:void 0};let I=!1;return e&&(e[b]!==void 0&&(A.value1=e[b],I=!0),Pe(T)&&e[T]!==void 0&&(A.value2=e[T],I=!0)),!I&&i&&(i[b]!==void 0&&(A.value1=i[b]),Pe(T)&&i[T]!==void 0&&(A.value2=i[T])),A},c=l("hide").value1;c!==void 0&&t.setVisible(!c,o);const u=l("pinned").value1;u!==void 0&&t.setPinned(u);const d=(a=t.getColDef().minWidth)!=null?a:this.environment.getMinColWidth(),h=l("flex").value1;if(h!==void 0&&t.setFlex(h),h==null){const b=l("width").value1;b!=null&&d!=null&&b>=d&&t.setActualWidth(b,o)}const p=l("sort").value1;p!==void 0&&(p==="desc"||p==="asc"?t.setSort(p,o):t.setSort(void 0,o));const f=l("sortIndex").value1;if(f!==void 0&&t.setSortIndex(f),n||!t.isPrimary())return;const m=l("aggFunc").value1;m!==void 0&&(typeof m=="string"?(t.setAggFunc(m),t.isValueActive()||(t.setValueActive(!0,o),this.valueColumns.push(t))):(Pe(m)&&console.warn("AG Grid: stateItem.aggFunc must be a string. if using your own aggregation functions, register the functions first before using them in get/set state. This is because it is intended for the column state to be stored and retrieved as simple JSON."),t.isValueActive()&&(t.setValueActive(!1,o),vn(this.valueColumns,t))));const{value1:g,value2:y}=l("rowGroup","rowGroupIndex");(g!==void 0||y!==void 0)&&(typeof y=="number"||g?(t.isRowGroupActive()||(t.setRowGroupActive(!0,o),this.rowGroupColumns.push(t)),s&&typeof y=="number"&&(s[t.getId()]=y)):t.isRowGroupActive()&&(t.setRowGroupActive(!1,o),vn(this.rowGroupColumns,t)));const{value1:v,value2:C}=l("pivot","pivotIndex");(v!==void 0||C!==void 0)&&(typeof C=="number"||v?(t.isPivotActive()||(t.setPivotActive(!0,o),this.pivotColumns.push(t)),r&&typeof C=="number"&&(r[t.getId()]=C)):t.isPivotActive()&&(t.setPivotActive(!1,o),vn(this.pivotColumns,t)))}getGridColumns(t){return this.getColumns(t,this.getGridColumn.bind(this))}getColumns(t,e){const i=[];return t&&t.forEach(s=>{const r=e(s);r&&i.push(r)}),i}getColumnWithValidation(t){if(t==null)return null;const e=this.getGridColumn(t);return e||console.warn("AG Grid: could not find column "+t),e}getPrimaryColumn(t){return this.primaryColumns?this.getColumn(t,this.primaryColumns,this.primaryColumnsMap):null}getGridColumn(t){return this.getColumn(t,this.gridColumns,this.gridColumnsMap)}lookupGridColumn(t){return this.gridColumnsMap[t]}getSecondaryColumn(t){return this.secondaryColumns?this.getColumn(t,this.secondaryColumns,this.secondaryColumnsMap):null}getColumn(t,e,i){if(!t||!i)return null;if(typeof t=="string"&&i[t])return i[t];for(let s=0;s<e.length;s++)if(this.columnsMatch(e[s],t))return e[s];return this.getAutoColumn(t)}getSourceColumnsForGroupColumn(t){const e=t.getColDef().showRowGroup;if(!e)return null;if(e===!0)return this.rowGroupColumns.slice(0);const i=this.getPrimaryColumn(e);return i?[i]:null}getAutoColumn(t){return!this.groupAutoColumns||!Pe(this.groupAutoColumns)||St(this.groupAutoColumns)?null:this.groupAutoColumns.find(e=>this.columnsMatch(e,t))||null}columnsMatch(t,e){const i=t===e,s=t.getColDef()===e,r=t.getColId()==e;return i||s||r}getDisplayNameForColumn(t,e,i=!1){if(!t)return null;const s=this.getHeaderName(t.getColDef(),t,null,null,e);return i?this.wrapHeaderNameWithAggFunc(t,s):s}getDisplayNameForProvidedColumnGroup(t,e,i){const s=e?e.getColGroupDef():null;return s?this.getHeaderName(s,null,t,e,i):null}getDisplayNameForColumnGroup(t,e){return this.getDisplayNameForProvidedColumnGroup(t,t.getProvidedColumnGroup(),e)}getHeaderName(t,e,i,s,r){const n=t.headerValueGetter;if(n){const o=this.gos.addGridCommonParams({colDef:t,column:e,columnGroup:i,providedColumnGroup:s,location:r});return typeof n=="function"?n(o):typeof n=="string"?this.expressionService.evaluate(n,o):(console.warn("AG Grid: headerValueGetter must be a function or a string"),"")}else{if(t.headerName!=null)return t.headerName;if(t.field)return $3(t.field)}return""}wrapHeaderNameWithAggFunc(t,e){if(this.gos.get("suppressAggFuncInHeader"))return e;const i=t.getColDef().pivotValueColumn,s=Pe(i);let r=null,n;if(s){const o=this.gos.get("removePivotHeaderRowWhenSingleValueColumn")&&this.valueColumns.length===1,a=t.getColDef().pivotTotalColumnIds!==void 0;if(o&&!a)return e;r=i?i.getAggFunc():null,n=!0}else{const o=t.isValueActive(),a=this.pivotMode||!this.isRowGroupEmpty();o&&a?(r=t.getAggFunc(),n=!0):n=!1}if(n){const o=typeof r=="string"?r:"func";return`${this.localeService.getLocaleTextFunc()(o,o)}(${e})`}return e}getColumnGroup(t,e){if(!t)return null;if(t instanceof Fs)return t;const i=this.getAllDisplayedTrees(),s=typeof e=="number";let r=null;return Ld(i,!1,n=>{if(n instanceof Fs){const o=n;let a;s?a=t===o.getGroupId()&&e===o.getPartId():a=t===o.getGroupId(),a&&(r=o)}}),r}isReady(){return this.ready}extractValueColumns(t,e){this.valueColumns=this.extractColumns(e,this.valueColumns,(i,s)=>i.setValueActive(s,t),()=>{},()=>{},i=>{const s=i.aggFunc;if(s===null||s==="")return null;if(s!==void 0)return!!s},i=>i.initialAggFunc!=null&&i.initialAggFunc!=""),this.valueColumns.forEach(i=>{const s=i.getColDef();s.aggFunc!=null&&s.aggFunc!=""?i.setAggFunc(s.aggFunc):i.getAggFunc()||i.setAggFunc(s.initialAggFunc)})}extractRowGroupColumns(t,e){this.rowGroupColumns=this.extractColumns(e,this.rowGroupColumns,(i,s)=>i.setRowGroupActive(s,t),i=>i.rowGroupIndex,i=>i.initialRowGroupIndex,i=>i.rowGroup,i=>i.initialRowGroup)}extractColumns(t=[],e=[],i,s,r,n,o){const a=[],l=[];(this.primaryColumns||[]).forEach(d=>{const h=t.indexOf(d)<0,p=d.getColDef(),f=Ow(n(p)),m=Ow(o(p)),g=vu(s(p)),y=vu(r(p));let v;f!==void 0?v=f:g!==void 0?g===null?v=!1:v=g>=0:h?m!==void 0?v=m:y!==void 0?v=y!=null&&y>=0:v=!1:v=e.indexOf(d)>=0,v&&((h?g!=null||y!=null:g!=null)?a.push(d):l.push(d))});const c=d=>{const h=s(d.getColDef()),p=r(d.getColDef());return h??p};a.sort((d,h)=>{const p=c(d),f=c(h);return p===f?0:p<f?-1:1});const u=[].concat(a);return e.forEach(d=>{l.indexOf(d)>=0&&u.push(d)}),l.forEach(d=>{u.indexOf(d)<0&&u.push(d)}),e.forEach(d=>{u.indexOf(d)<0&&i(d,!1)}),u.forEach(d=>{e.indexOf(d)<0&&i(d,!0)}),u}extractPivotColumns(t,e){this.pivotColumns=this.extractColumns(e,this.pivotColumns,(i,s)=>i.setPivotActive(s,t),i=>i.pivotIndex,i=>i.initialPivotIndex,i=>i.pivot,i=>i.initialPivot)}resetColumnGroupState(t){if(!this.primaryColumnTree)return;const e=[];Bl(null,this.primaryColumnTree,i=>{if(i instanceof bi){const s=i.getColGroupDef(),r={groupId:i.getGroupId(),open:s?s.openByDefault:void 0};e.push(r)}}),this.setColumnGroupState(e,t)}getColumnGroupState(){const t=[];return Bl(null,this.gridBalancedTree,e=>{e instanceof bi&&t.push({groupId:e.getGroupId(),open:e.isExpanded()})}),t}setColumnGroupState(t,e){if(!this.gridBalancedTree)return;this.columnAnimationService.start();const i=[];if(t.forEach(s=>{const r=s.groupId,n=s.open,o=this.getProvidedColumnGroup(r);o&&o.isExpanded()!==n&&(this.logger.log("columnGroupOpened("+o.getGroupId()+","+n+")"),o.setExpanded(n),i.push(o))}),this.updateGroupsAndDisplayedColumns(e),this.setFirstRightAndLastLeftPinned(e),i.length){const s={type:K.EVENT_COLUMN_GROUP_OPENED,columnGroup:bi.length===1?i[0]:void 0,columnGroups:i};this.eventService.dispatchEvent(s)}this.columnAnimationService.finish()}setColumnGroupOpened(t,e,i){let s;t instanceof bi?s=t.getId():s=t||"",this.setColumnGroupState([{groupId:s,open:e}],i)}getProvidedColumnGroup(t){typeof t!="string"&&console.error("AG Grid: group key must be a string");let e=null;return Bl(null,this.gridBalancedTree,i=>{i instanceof bi&&i.getId()===t&&(e=i)}),e}calculateColumnsForDisplay(){let t;return this.pivotMode&&St(this.secondaryColumns)?t=this.gridColumns.filter(e=>{const i=this.groupAutoColumns&&to(this.groupAutoColumns,e),s=this.valueColumns&&to(this.valueColumns,e);return i||s}):t=this.gridColumns.filter(e=>this.groupAutoColumns&&to(this.groupAutoColumns,e)||e.isVisible()),t}checkColSpanActiveInCols(t){let e=!1;return t.forEach(i=>{Pe(i.getColDef().colSpan)&&(e=!0)}),e}calculateColumnsForGroupDisplay(){this.groupDisplayColumns=[],this.groupDisplayColumnsMap={};const t=e=>{const i=e.getColDef(),s=i.showRowGroup;i&&Pe(s)&&(this.groupDisplayColumns.push(e),typeof s=="string"?this.groupDisplayColumnsMap[s]=e:s===!0&&this.getRowGroupColumns().forEach(r=>{this.groupDisplayColumnsMap[r.getId()]=e}))};this.gridColumns.forEach(t)}getGroupDisplayColumns(){return this.groupDisplayColumns}getGroupDisplayColumnForGroup(t){return this.groupDisplayColumnsMap[t]}updateDisplayedColumns(t){const e=this.calculateColumnsForDisplay();this.buildDisplayedTrees(e),this.updateGroupsAndDisplayedColumns(t),this.setFirstRightAndLastLeftPinned(t)}isSecondaryColumnsPresent(){return Pe(this.secondaryColumns)}setSecondaryColumns(t,e){if(!this.gridColumns)return;const i=t;if(!(!i&&St(this.secondaryColumns))){if(i){this.processSecondaryColumnDefinitions(t);const s=this.columnFactory.createColumnTree(t,!1,this.secondaryBalancedTree||this.previousSecondaryColumns||void 0,e);this.destroyOldColumns(this.secondaryBalancedTree,s.columnTree),this.secondaryBalancedTree=s.columnTree,this.secondaryHeaderRowCount=s.treeDept+1,this.secondaryColumns=this.getColumnsFromTree(this.secondaryBalancedTree),this.secondaryColumnsMap={},this.secondaryColumns.forEach(r=>this.secondaryColumnsMap[r.getId()]=r),this.previousSecondaryColumns=null}else this.previousSecondaryColumns=this.secondaryBalancedTree,this.secondaryBalancedTree=null,this.secondaryHeaderRowCount=-1,this.secondaryColumns=null,this.secondaryColumnsMap={};this.updateGridColumns(),this.updateDisplayedColumns(e)}}processSecondaryColumnDefinitions(t){const e=this.gos.get("processPivotResultColDef"),i=this.gos.get("processPivotResultColGroupDef");if(!e&&!i)return;const s=r=>{r.forEach(n=>{if(Pe(n.children)){const a=n;i&&i(a),s(a.children)}else e&&e(n)})};t&&s(t)}updateGridColumns(){const t=this.gridBalancedTree;if(this.gridColsArePrimary?this.lastPrimaryOrder=this.gridColumns:this.lastSecondaryOrder=this.gridColumns,this.createGroupAutoColumnsIfNeeded()){const s=tu(this.groupAutoColumns.map(r=>[r,!0]));this.lastPrimaryOrder&&(this.lastPrimaryOrder=this.lastPrimaryOrder.filter(r=>!s.has(r)),this.lastPrimaryOrder=[...this.groupAutoColumns,...this.lastPrimaryOrder]),this.lastSecondaryOrder&&(this.lastSecondaryOrder=this.lastSecondaryOrder.filter(r=>!s.has(r)),this.lastSecondaryOrder=[...this.groupAutoColumns,...this.lastSecondaryOrder])}let i;if(this.secondaryColumns&&this.secondaryBalancedTree){const s=this.secondaryColumns.some(r=>this.gridColumnsMap[r.getColId()]!==void 0);this.gridBalancedTree=this.secondaryBalancedTree.slice(),this.gridHeaderRowCount=this.secondaryHeaderRowCount,this.gridColumns=this.secondaryColumns.slice(),this.gridColsArePrimary=!1,s&&(i=this.lastSecondaryOrder)}else this.primaryColumns&&(this.gridBalancedTree=this.primaryColumnTree.slice(),this.gridHeaderRowCount=this.primaryHeaderRowCount,this.gridColumns=this.primaryColumns.slice(),this.gridColsArePrimary=!0,i=this.lastPrimaryOrder);if(this.addAutoGroupToGridColumns(),this.orderGridColsLike(i),this.gridColumns=this.placeLockedColumns(this.gridColumns),this.calculateColumnsForGroupDisplay(),this.refreshQuickFilterColumns(),this.clearDisplayedAndViewportColumns(),this.colSpanActive=this.checkColSpanActiveInCols(this.gridColumns),this.gridColumnsMap={},this.gridColumns.forEach(s=>this.gridColumnsMap[s.getId()]=s),this.setAutoHeightActive(),!Ya(t,this.gridBalancedTree)){const s={type:K.EVENT_GRID_COLUMNS_CHANGED};this.eventService.dispatchEvent(s)}}setAutoHeightActive(){this.autoHeightActive=this.gridColumns.filter(t=>t.isAutoHeight()).length>0,this.autoHeightActive&&(this.autoHeightActiveAtLeastOnce=!0,this.gos.isRowModelType("clientSide")||this.gos.isRowModelType("serverSide")||ot("autoHeight columns only work with Client Side Row Model and Server Side Row Model."))}orderGridColsLike(t){if(St(t))return;const e=tu(t.map((l,c)=>[l,c]));let i=!0;if(this.gridColumns.forEach(l=>{e.has(l)&&(i=!1)}),i)return;const s=tu(this.gridColumns.map(l=>[l,!0])),r=t.filter(l=>s.has(l)),n=tu(r.map(l=>[l,!0])),o=this.gridColumns.filter(l=>!n.has(l)),a=r.slice();o.forEach(l=>{let c=l.getOriginalParent();if(!c){a.push(l);return}const u=[];for(;!u.length&&c;)c.getLeafColumns().forEach(f=>{const m=a.indexOf(f)>=0,g=u.indexOf(f)<0;m&&g&&u.push(f)}),c=c.getOriginalParent();if(!u.length){a.push(l);return}const d=u.map(p=>a.indexOf(p)),h=Math.max(...d);oy(a,l,h+1)}),this.gridColumns=a}isPrimaryColumnGroupsPresent(){return this.primaryHeaderRowCount>1}refreshQuickFilterColumns(){var t;let e=(t=this.isPivotMode()&&!this.gos.get("applyQuickFilterBeforePivotOrAgg")?this.secondaryColumns:this.primaryColumns)!=null?t:[];this.groupAutoColumns&&(e=e.concat(this.groupAutoColumns)),this.columnsForQuickFilter=this.gos.get("includeHiddenColumnsInQuickFilter")?e:e.filter(i=>i.isVisible()||i.isRowGroupActive())}placeLockedColumns(t){const e=[],i=[],s=[];return t.forEach(r=>{const n=r.getColDef().lockPosition;n==="right"?s.push(r):n==="left"||n===!0?e.push(r):i.push(r)}),[...e,...i,...s]}addAutoGroupToGridColumns(){if(St(this.groupAutoColumns)){this.destroyOldColumns(this.groupAutoColsBalancedTree),this.groupAutoColsBalancedTree=null;return}this.gridColumns=this.groupAutoColumns?this.groupAutoColumns.concat(this.gridColumns):this.gridColumns;const t=this.columnFactory.createForAutoGroups(this.groupAutoColumns,this.gridBalancedTree);this.destroyOldColumns(this.groupAutoColsBalancedTree,t),this.groupAutoColsBalancedTree=t,this.gridBalancedTree=t.concat(this.gridBalancedTree)}clearDisplayedAndViewportColumns(){this.viewportRowLeft={},this.viewportRowRight={},this.viewportRowCenter={},this.displayedColumnsLeft=[],this.displayedColumnsRight=[],this.displayedColumnsCenter=[],this.displayedColumns=[],this.ariaOrderColumns=[],this.viewportColumns=[],this.headerViewportColumns=[],this.viewportColumnsHash=""}updateGroupsAndDisplayedColumns(t){this.updateOpenClosedVisibilityInColumnGroups(),this.deriveDisplayedColumns(t),this.refreshFlexedColumns(),this.extractViewport(),this.updateBodyWidths();const e={type:K.EVENT_DISPLAYED_COLUMNS_CHANGED};this.eventService.dispatchEvent(e)}deriveDisplayedColumns(t){this.derivedDisplayedColumnsFromDisplayedTree(this.displayedTreeLeft,this.displayedColumnsLeft),this.derivedDisplayedColumnsFromDisplayedTree(this.displayedTreeCentre,this.displayedColumnsCenter),this.derivedDisplayedColumnsFromDisplayedTree(this.displayedTreeRight,this.displayedColumnsRight),this.joinColumnsAriaOrder(),this.joinDisplayedColumns(),this.setLeftValues(t),this.displayedAutoHeightCols=this.displayedColumns.filter(e=>e.isAutoHeight())}isAutoRowHeightActive(){return this.autoHeightActive}wasAutoRowHeightEverActive(){return this.autoHeightActiveAtLeastOnce}joinColumnsAriaOrder(){const t=this.getAllGridColumns(),e=[],i=[],s=[];for(const r of t){const n=r.getPinned();n?n===!0||n==="left"?e.push(r):s.push(r):i.push(r)}this.ariaOrderColumns=e.concat(i).concat(s)}joinDisplayedColumns(){this.gos.get("enableRtl")?this.displayedColumns=this.displayedColumnsRight.concat(this.displayedColumnsCenter).concat(this.displayedColumnsLeft):this.displayedColumns=this.displayedColumnsLeft.concat(this.displayedColumnsCenter).concat(this.displayedColumnsRight)}setLeftValues(t){this.setLeftValuesOfColumns(t),this.setLeftValuesOfGroups()}setLeftValuesOfColumns(t){if(!this.primaryColumns)return;const e=this.getPrimaryAndSecondaryAndAutoColumns().slice(0),i=this.gos.get("enableRtl");[this.displayedColumnsLeft,this.displayedColumnsRight,this.displayedColumnsCenter].forEach(s=>{if(i){let r=this.getWidthOfColsInList(s);s.forEach(n=>{r-=n.getActualWidth(),n.setLeft(r,t)})}else{let r=0;s.forEach(n=>{n.setLeft(r,t),r+=n.getActualWidth()})}O3(e,s)}),e.forEach(s=>{s.setLeft(null,t)})}setLeftValuesOfGroups(){[this.displayedTreeLeft,this.displayedTreeRight,this.displayedTreeCentre].forEach(t=>{t.forEach(e=>{e instanceof Fs&&e.checkLeft()})})}derivedDisplayedColumnsFromDisplayedTree(t,e){e.length=0,Ld(t,!0,i=>{i instanceof Nt&&e.push(i)})}isColumnVirtualisationSuppressed(){return this.suppressColumnVirtualisation||this.viewportRight===0}extractViewportColumns(){this.isColumnVirtualisationSuppressed()?(this.viewportColumnsCenter=this.displayedColumnsCenter,this.headerViewportColumnsCenter=this.displayedColumnsCenter):(this.viewportColumnsCenter=this.displayedColumnsCenter.filter(this.isColumnInRowViewport.bind(this)),this.headerViewportColumnsCenter=this.displayedColumnsCenter.filter(this.isColumnInHeaderViewport.bind(this))),this.viewportColumns=this.viewportColumnsCenter.concat(this.displayedColumnsLeft).concat(this.displayedColumnsRight),this.headerViewportColumns=this.headerViewportColumnsCenter.concat(this.displayedColumnsLeft).concat(this.displayedColumnsRight)}getVirtualHeaderGroupRow(t,e){let i;switch(t){case"left":i=this.viewportRowLeft[e];break;case"right":i=this.viewportRowRight[e];break;default:i=this.viewportRowCenter[e];break}return St(i)&&(i=[]),i}calculateHeaderRows(){this.viewportRowLeft={},this.viewportRowRight={},this.viewportRowCenter={};const t={};this.headerViewportColumns.forEach(i=>t[i.getId()]=!0);const e=(i,s,r)=>{let n=!1;for(let o=0;o<i.length;o++){const a=i[o];let l=!1;if(a instanceof Nt)l=t[a.getId()]===!0;else{const u=a.getDisplayedChildren();u&&(l=e(u,s,r+1))}l&&(n=!0,s[r]||(s[r]=[]),s[r].push(a))}return n};e(this.displayedTreeLeft,this.viewportRowLeft,0),e(this.displayedTreeRight,this.viewportRowRight,0),e(this.displayedTreeCentre,this.viewportRowCenter,0)}extractViewport(){const t=s=>`${s.getId()}-${s.getPinned()||"normal"}`;this.extractViewportColumns();const e=this.viewportColumns.map(t).join("#"),i=this.viewportColumnsHash!==e;return i&&(this.viewportColumnsHash=e,this.calculateHeaderRows()),i}refreshFlexedColumns(t={}){var e;const i=t.source?t.source:"flex";if(t.viewportWidth!=null&&(this.flexViewportWidth=t.viewportWidth),!this.flexViewportWidth)return[];let s=-1;if(t.resizingCols){const h=new Set(t.resizingCols);let p=this.displayedColumnsCenter;for(let f=p.length-1;f>=0;f--)if(h.has(p[f])){s=f;break}}let r=0,n=[],o=0,a=0;for(let h=0;h<this.displayedColumnsCenter.length;h++)this.displayedColumnsCenter[h].getFlex()&&h>s?(n.push(this.displayedColumnsCenter[h]),a+=this.displayedColumnsCenter[h].getFlex(),o+=(e=this.displayedColumnsCenter[h].getMinWidth())!=null?e:0):r+=this.displayedColumnsCenter[h].getActualWidth();if(!n.length)return[];let l=[];r+o>this.flexViewportWidth&&(n.forEach(h=>{var p;return h.setActualWidth((p=h.getMinWidth())!=null?p:0,i)}),l=n,n=[]);const c=[];let u;e:for(;;){u=this.flexViewportWidth-r;const h=u/a;for(let p=0;p<n.length;p++){const f=n[p],m=h*f.getFlex();let g=0;const y=f.getMinWidth(),v=f.getMaxWidth();if(Pe(y)&&m<y?g=y:Pe(v)&&m>v&&(g=v),g){f.setActualWidth(g,i),qR(n,f),a-=f.getFlex(),l.push(f),r+=f.getActualWidth();continue e}c[p]=Math.round(m)}break}let d=u;return n.forEach((h,p)=>{h.setActualWidth(Math.min(c[p],d),i),l.push(h),d-=c[p]}),t.skipSetLeft||this.setLeftValues(i),t.updateBodyWidths&&this.updateBodyWidths(),t.fireResizedEvent&&this.dispatchColumnResizedEvent(l,!0,i,n),n}sizeColumnsToFit(t,e="sizeColumnsToFit",i,s){var r,n,o,a,l;if(this.shouldQueueResizeOperations){this.resizeOperationQueue.push(()=>this.sizeColumnsToFit(t,e,i,s));return}const c={};s&&((r=s==null?void 0:s.columnLimits)==null||r.forEach(y=>{var v=y,{key:C}=v,b=R$(v,["key"]);c[typeof C=="string"?C:C.getColId()]=b}));const u=this.getAllDisplayedColumns(),d=t===this.getWidthOfColsInList(u);if(t<=0||!u.length||d)return;const h=[],p=[];u.forEach(y=>{y.getColDef().suppressSizeToFit===!0?p.push(y):h.push(y)});const f=h.slice(0);let m=!1;const g=y=>{vn(h,y),p.push(y)};for(h.forEach(y=>{var v,C;y.resetActualWidth(e);const b=c==null?void 0:c[y.getId()],T=(v=b==null?void 0:b.minWidth)!=null?v:s==null?void 0:s.defaultMinWidth,A=(C=b==null?void 0:b.maxWidth)!=null?C:s==null?void 0:s.defaultMaxWidth,I=y.getActualWidth();typeof T=="number"&&I<T?y.setActualWidth(T,e,!0):typeof A=="number"&&I>A&&y.setActualWidth(A,e,!0)});!m;){m=!0;const y=t-this.getWidthOfColsInList(p);if(y<=0)h.forEach(v=>{var C,b;const T=(b=(C=c==null?void 0:c[v.getId()])==null?void 0:C.minWidth)!=null?b:s==null?void 0:s.defaultMinWidth;if(typeof T=="number"){v.setActualWidth(T,e,!0);return}v.setMinimum(e)});else{const v=y/this.getWidthOfColsInList(h);let C=y;for(let b=h.length-1;b>=0;b--){const T=h[b],A=c==null?void 0:c[T.getId()],I=(n=A==null?void 0:A.minWidth)!=null?n:s==null?void 0:s.defaultMinWidth,D=(o=A==null?void 0:A.maxWidth)!=null?o:s==null?void 0:s.defaultMaxWidth,F=(a=T.getMinWidth())!=null?a:0,B=(l=T.getMaxWidth())!=null?l:Number.MAX_VALUE,U=typeof I=="number"&&I>F?I:T.getMinWidth(),H=typeof D=="number"&&D<B?D:T.getMaxWidth();let R=Math.round(T.getActualWidth()*v);Pe(U)&&R<U?(R=U,g(T),m=!1):Pe(H)&&R>H?(R=H,g(T),m=!1):b===0&&(R=C),T.setActualWidth(R,e,!0),C-=R}}}f.forEach(y=>{y.fireColumnWidthChangedEvent(e)}),this.setLeftValues(e),this.updateBodyWidths(),!i&&this.dispatchColumnResizedEvent(f,!0,e)}buildDisplayedTrees(t){const e=[],i=[],s=[];t.forEach(n=>{switch(n.getPinned()){case"left":e.push(n);break;case"right":i.push(n);break;default:s.push(n);break}});const r=new ZR;this.displayedTreeLeft=this.displayedGroupCreator.createDisplayedGroups(e,r,"left",this.displayedTreeLeft),this.displayedTreeRight=this.displayedGroupCreator.createDisplayedGroups(i,r,"right",this.displayedTreeRight),this.displayedTreeCentre=this.displayedGroupCreator.createDisplayedGroups(s,r,null,this.displayedTreeCentre),this.updateDisplayedMap()}updateDisplayedMap(){this.displayedColumnsAndGroupsMap={};const t=e=>{this.displayedColumnsAndGroupsMap[e.getUniqueId()]=e};Ld(this.displayedTreeCentre,!1,t),Ld(this.displayedTreeLeft,!1,t),Ld(this.displayedTreeRight,!1,t)}isDisplayed(t){return this.displayedColumnsAndGroupsMap[t.getUniqueId()]===t}updateOpenClosedVisibilityInColumnGroups(){const t=this.getAllDisplayedTrees();Ld(t,!1,e=>{e instanceof Fs&&e.calculateDisplayedColumns()})}getGroupAutoColumns(){return this.groupAutoColumns}createGroupAutoColumnsIfNeeded(){const t=this.forceRecreateAutoGroups;if(this.forceRecreateAutoGroups=!1,!this.autoGroupsNeedBuilding)return!1;this.autoGroupsNeedBuilding=!1;const e=this.gos.isGroupUseEntireRow(this.pivotMode),i=this.pivotMode?this.gos.get("pivotSuppressAutoColumn"):this.isGroupSuppressAutoColumn();if((this.rowGroupColumns.length>0||this.gos.get("treeData"))&&!i&&!e){const n=this.autoGroupColService.createAutoGroupColumns(this.rowGroupColumns);if(!this.autoColsEqual(n,this.groupAutoColumns)||t)return this.groupAutoColumns=n,!0}else this.groupAutoColumns=null;return!1}isGroupSuppressAutoColumn(){return this.gos.get("groupDisplayType")==="custom"?!0:this.gos.get("treeDataDisplayType")==="custom"}autoColsEqual(t,e){return Ya(t,e,(i,s)=>i.getColId()===s.getColId())}getWidthOfColsInList(t){return t.reduce((e,i)=>e+i.getActualWidth(),0)}getFirstDisplayedColumn(){const t=this.gos.get("enableRtl"),e=["getDisplayedLeftColumns","getDisplayedCenterColumns","getDisplayedRightColumns"];t&&e.reverse();for(let i=0;i<e.length;i++){const s=this[e[i]]();if(s.length)return t?di(s):s[0]}return null}setColumnHeaderHeight(t,e){if(t.setAutoHeaderHeight(e)){const s={type:K.EVENT_COLUMN_HEADER_HEIGHT_CHANGED,column:t,columns:[t],source:"autosizeColumnHeaderHeight"};this.eventService.dispatchEvent(s)}}getColumnGroupHeaderRowHeight(){return this.isPivotMode()?this.getPivotGroupHeaderHeight():this.getGroupHeaderHeight()}getColumnHeaderRowHeight(){const t=this.isPivotMode()?this.getPivotHeaderHeight():this.getHeaderHeight(),e=this.getAllDisplayedColumns().filter(i=>i.isAutoHeaderHeight()).map(i=>i.getAutoHeaderHeight()||0);return Math.max(t,...e)}getHeaderHeight(){var t;return(t=this.gos.get("headerHeight"))!=null?t:this.environment.getFromTheme(25,"headerHeight")}getFloatingFiltersHeight(){var t;return(t=this.gos.get("floatingFiltersHeight"))!=null?t:this.getHeaderHeight()}getGroupHeaderHeight(){var t;return(t=this.gos.get("groupHeaderHeight"))!=null?t:this.getHeaderHeight()}getPivotHeaderHeight(){var t;return(t=this.gos.get("pivotHeaderHeight"))!=null?t:this.getHeaderHeight()}getPivotGroupHeaderHeight(){var t;return(t=this.gos.get("pivotGroupHeaderHeight"))!=null?t:this.getGroupHeaderHeight()}queueResizeOperations(){this.shouldQueueResizeOperations=!0}processResizeOperations(){this.shouldQueueResizeOperations=!1,this.resizeOperationQueue.forEach(t=>t()),this.resizeOperationQueue=[]}resetColumnDefIntoColumn(t,e){const i=t.getUserProvidedColDef();if(!i)return!1;const s=this.columnFactory.addColumnDefaultAndTypes(i,t.getColId());return t.setColDef(s,i,e),!0}isColumnGroupingLocked(t){const e=this.gos.get("groupLockGroupColumns");if(!t.isRowGroupActive()||e===0)return!1;if(e===-1)return!0;const i=this.rowGroupColumns.findIndex(s=>s.getColId()===t.getColId());return e>i}generateColumnStateForRowGroupAndPivotIndexes(t,e){let i={};const s=(r,n,o,a,l,c)=>{if(!n.length||!this.primaryColumns)return[];const u=Object.keys(r),d=new Set(u),h=new Set(u),p=new Set(n.map(T=>{const A=T.getColId();return h.delete(A),A}).concat(u)),f=[],m={};let g=0;for(let T=0;T<this.primaryColumns.length;T++){const A=this.primaryColumns[T].getColId();p.has(A)&&(f.push(A),m[A]=g++)}let y=1e3,v=!1,C=0;const b=T=>{const A=m[T];for(let I=C;I<A;I++){const D=f[I];h.has(D)&&(r[D][l]=y++,h.delete(D))}C=A};n.forEach(T=>{const A=T.getColId();if(d.has(A))b(A),r[A][l]=y++;else{const I=T.getColDef();(I[l]===null||I[l]===void 0&&I[c]==null)&&(v||(I[o]||I[o]===void 0&&I[a]?b(A):(h.forEach(B=>{r[B][l]=y+m[B]}),y+=f.length,v=!0)),i[A]||(i[A]={colId:A}),i[A][l]=y++)}})};return s(t,this.rowGroupColumns,"rowGroup","initialRowGroup","rowGroupIndex","initialRowGroupIndex"),s(e,this.pivotColumns,"pivot","initialPivot","pivotIndex","initialPivotIndex"),Object.values(i)}onColumnsReady(){const t=this.gos.get("autoSizeStrategy");if(!t)return;const{type:e}=t;setTimeout(()=>{if(e==="fitGridWidth"){const{columnLimits:i,defaultMinWidth:s,defaultMaxWidth:r}=t,n=i==null?void 0:i.map(({colId:o,minWidth:a,maxWidth:l})=>({key:o,minWidth:a,maxWidth:l}));this.ctrlsService.getGridBodyCtrl().sizeColumnsToFit({defaultMinWidth:s,defaultMaxWidth:r,columnLimits:n})}else e==="fitProvidedWidth"&&this.sizeColumnsToFit(t.width,"sizeColumnsToFit")})}onFirstDataRendered(){const t=this.gos.get("autoSizeStrategy");if((t==null?void 0:t.type)!=="fitCellContents")return;const{colIds:e,skipHeader:i}=t;setTimeout(()=>{e?this.autoSizeColumns({columns:e,skipHeader:i,source:"autosizeColumns"}):this.autoSizeAllColumns("autosizeColumns",i)})}};z([W("expressionService")],Zs.prototype,"expressionService",2);z([W("columnFactory")],Zs.prototype,"columnFactory",2);z([W("displayedGroupCreator")],Zs.prototype,"displayedGroupCreator",2);z([W("ctrlsService")],Zs.prototype,"ctrlsService",2);z([W("autoWidthCalculator")],Zs.prototype,"autoWidthCalculator",2);z([W("columnAnimationService")],Zs.prototype,"columnAnimationService",2);z([W("autoGroupColService")],Zs.prototype,"autoGroupColService",2);z([W("valueCache")],Zs.prototype,"valueCache",2);z([W("animationFrameService")],Zs.prototype,"animationFrameService",2);z([W("sortController")],Zs.prototype,"sortController",2);z([W("columnDefFactory")],Zs.prototype,"columnDefFactory",2);z([Vt("aggFuncService")],Zs.prototype,"aggFuncService",2);z([de],Zs.prototype,"init",1);z([Hi],Zs.prototype,"destroyColumns",1);z([oa(0,Zn("loggerFactory"))],Zs.prototype,"setBeans",1);Zs=z([Me("columnModel")],Zs);function mf(t){return t==="gridOptionsUpdated"?"gridOptionsChanged":t}function Ld(t,e,i){if(t)for(let s=0;s<t.length;s++){const r=t[s];if(r instanceof Fs){const n=e?r.getDisplayedChildren():r.getChildren();Ld(n,e,i)}i(r)}}var jw=class extends ye{createDisplayedGroups(t,e,i,s){const r=this.mapOldGroupsById(s),n=[];let o=t;for(;o.length;){const a=o;o=[];let l=0;const c=u=>{const d=l;l=u;const h=a[d],f=(h instanceof Fs?h.getProvidedColumnGroup():h).getOriginalParent();if(f==null){for(let g=d;g<u;g++)n.push(a[g]);return}const m=this.createColumnGroup(f,e,r,i);for(let g=d;g<u;g++)m.addChild(a[g]);o.push(m)};for(let u=1;u<a.length;u++){const d=a[u],p=(d instanceof Fs?d.getProvidedColumnGroup():d).getOriginalParent(),f=a[l],g=(f instanceof Fs?f.getProvidedColumnGroup():f).getOriginalParent();p!==g&&c(u)}l<a.length&&c(a.length)}return this.setupParentsIntoColumns(n,null),n}createColumnGroup(t,e,i,s){const r=t.getGroupId(),n=e.getInstanceIdForKey(r),o=Fs.createUniqueId(r,n);let a=i[o];return a&&a.getProvidedColumnGroup()!==t&&(a=null),Pe(a)?a.reset():(a=new Fs(t,r,n,s),this.context.createBean(a)),a}mapOldGroupsById(t){const e={},i=s=>{s.forEach(r=>{if(r instanceof Fs){const n=r;e[r.getUniqueId()]=n,i(n.getChildren())}})};return t&&i(t),e}setupParentsIntoColumns(t,e){t.forEach(i=>{if(i.setParent(e),i instanceof Fs){const s=i;this.setupParentsIntoColumns(s.getChildren(),s)}})}};jw=z([Me("displayedGroupCreator")],jw);var K$={enableBrowserTooltips:!0,tooltipTrigger:!0,tooltipMouseTrack:!0,tooltipShowMode:!0,tooltipInteraction:!0,defaultColGroupDef:!0,suppressAutoSize:!0,skipHeaderOnAutoSize:!0,autoSizeStrategy:!0,components:!0,stopEditingWhenCellsLoseFocus:!0,undoRedoCellEditing:!0,undoRedoCellEditingLimit:!0,excelStyles:!0,cacheQuickFilter:!0,excludeHiddenColumnsFromQuickFilter:!0,advancedFilterModel:!0,customChartThemes:!0,chartThemeOverrides:!0,enableChartToolPanelsButton:!0,suppressChartToolPanelsButton:!0,chartToolPanelsDef:!0,loadingCellRendererSelector:!0,localeText:!0,keepDetailRows:!0,keepDetailRowsCount:!0,detailRowHeight:!0,detailRowAutoHeight:!0,tabIndex:!0,valueCache:!0,valueCacheNeverExpires:!0,enableCellExpressions:!0,suppressParentsInRowNodes:!0,suppressTouch:!0,suppressAsyncEvents:!0,suppressBrowserResizeObserver:!0,suppressPropertyNamesCheck:!0,debug:!0,loadingOverlayComponent:!0,suppressLoadingOverlay:!0,noRowsOverlayComponent:!0,paginationPageSizeSelector:!0,paginateChildRows:!0,pivotPanelShow:!0,pivotSuppressAutoColumn:!0,suppressExpandablePivotGroups:!0,aggFuncs:!0,suppressAggFuncInHeader:!0,suppressAggAtRootLevel:!0,removePivotHeaderRowWhenSingleValueColumn:!0,allowShowChangeAfterFilter:!0,ensureDomOrder:!0,enableRtl:!0,suppressColumnVirtualisation:!0,suppressMaxRenderedRowRestriction:!0,suppressRowVirtualisation:!0,rowDragText:!0,suppressGroupMaintainValueType:!0,groupLockGroupColumns:!0,rowGroupPanelSuppressSort:!0,suppressGroupRowsSticky:!0,rowModelType:!0,cacheOverflowSize:!0,infiniteInitialRowCount:!0,serverSideInitialRowCount:!0,suppressServerSideInfiniteScroll:!0,maxBlocksInCache:!0,maxConcurrentDatasourceRequests:!0,blockLoadDebounceMillis:!0,serverSideOnlyRefreshFilteredGroups:!0,serverSidePivotResultFieldSeparator:!0,viewportRowModelPageSize:!0,viewportRowModelBufferSize:!0,debounceVerticalScrollbar:!0,suppressAnimationFrame:!0,suppressPreventDefaultOnMouseWheel:!0,scrollbarWidth:!0,icons:!0,suppressRowTransform:!0,gridId:!0,functionsPassive:!0,enableGroupEdit:!0,initialState:!0,processUnpinnedColumns:!0,createChartContainer:!0,getLocaleText:!0,getRowId:!0,reactiveCustomComponents:!0,columnMenu:!0},Is=class{};Is.STRING_PROPERTIES=["rowSelection","overlayLoadingTemplate","overlayNoRowsTemplate","gridId","quickFilterText","rowModelType","editType","domLayout","clipboardDelimiter","rowGroupPanelShow","multiSortKey","pivotColumnGroupTotals","pivotRowTotals","pivotPanelShow","fillHandleDirection","groupDisplayType","treeDataDisplayType","colResizeDefault","tooltipTrigger","serverSidePivotResultFieldSeparator","columnMenu","tooltipShowMode","grandTotalRow"];Is.OBJECT_PROPERTIES=["components","rowStyle","context","autoGroupColumnDef","localeText","icons","datasource","serverSideDatasource","viewportDatasource","groupRowRendererParams","aggFuncs","fullWidthCellRendererParams","defaultColGroupDef","defaultColDef","defaultCsvExportParams","defaultExcelExportParams","columnTypes","rowClassRules","detailCellRendererParams","loadingCellRendererParams","loadingOverlayComponentParams","noRowsOverlayComponentParams","popupParent","statusBar","sideBar","chartThemeOverrides","customChartThemes","chartToolPanelsDef","dataTypeDefinitions","advancedFilterModel","advancedFilterParent","advancedFilterBuilderParams","initialState","autoSizeStrategy"];Is.ARRAY_PROPERTIES=["sortingOrder","alignedGrids","rowData","columnDefs","excelStyles","pinnedTopRowData","pinnedBottomRowData","chartThemes","rowClass","paginationPageSizeSelector"];Is.NUMBER_PROPERTIES=["rowHeight","detailRowHeight","rowBuffer","headerHeight","groupHeaderHeight","groupLockGroupColumns","floatingFiltersHeight","pivotHeaderHeight","pivotGroupHeaderHeight","groupDefaultExpanded","pivotDefaultExpanded","viewportRowModelPageSize","viewportRowModelBufferSize","autoSizePadding","maxBlocksInCache","maxConcurrentDatasourceRequests","tooltipShowDelay","tooltipHideDelay","cacheOverflowSize","paginationPageSize","cacheBlockSize","infiniteInitialRowCount","serverSideInitialRowCount","scrollbarWidth","asyncTransactionWaitMillis","blockLoadDebounceMillis","keepDetailRowsCount","undoRedoCellEditingLimit","cellFlashDelay","cellFadeDelay","cellFlashDuration","cellFadeDuration","tabIndex","pivotMaxGeneratedColumns"];Is.BOOLEAN_PROPERTIES=["suppressMakeColumnVisibleAfterUnGroup","suppressRowClickSelection","suppressCellFocus","suppressHeaderFocus","suppressHorizontalScroll","groupSelectsChildren","alwaysShowHorizontalScroll","alwaysShowVerticalScroll","debug","enableBrowserTooltips","enableCellExpressions","groupIncludeTotalFooter","groupSuppressBlankHeader","suppressMenuHide","suppressRowDeselection","unSortIcon","suppressMultiSort","alwaysMultiSort","singleClickEdit","suppressLoadingOverlay","suppressNoRowsOverlay","suppressAutoSize","skipHeaderOnAutoSize","suppressParentsInRowNodes","suppressColumnMoveAnimation","suppressMovableColumns","suppressFieldDotNotation","enableRangeSelection","enableRangeHandle","enableFillHandle","suppressClearOnFillReduction","deltaSort","suppressTouch","suppressAsyncEvents","allowContextMenuWithControlKey","suppressContextMenu","enableCellChangeFlash","suppressDragLeaveHidesColumns","suppressRowGroupHidesColumns","suppressMiddleClickScrolls","suppressPreventDefaultOnMouseWheel","suppressCopyRowsToClipboard","copyHeadersToClipboard","copyGroupHeadersToClipboard","pivotMode","suppressAggFuncInHeader","suppressColumnVirtualisation","alwaysAggregateAtRootLevel","suppressAggAtRootLevel","suppressFocusAfterRefresh","functionsPassive","functionsReadOnly","animateRows","groupSelectsFiltered","groupRemoveSingleChildren","groupRemoveLowestSingleChildren","enableRtl","suppressClickEdit","rowDragEntireRow","rowDragManaged","suppressRowDrag","suppressMoveWhenRowDragging","rowDragMultiRow","enableGroupEdit","embedFullWidthRows","suppressPaginationPanel","groupHideOpenParents","groupAllowUnbalanced","pagination","paginationAutoPageSize","suppressScrollOnNewData","suppressScrollWhenPopupsAreOpen","purgeClosedRowNodes","cacheQuickFilter","includeHiddenColumnsInQuickFilter","excludeHiddenColumnsFromQuickFilter","ensureDomOrder","accentedSort","suppressChangeDetection","valueCache","valueCacheNeverExpires","aggregateOnlyChangedColumns","suppressAnimationFrame","suppressExcelExport","suppressCsvExport","includeHiddenColumnsInAdvancedFilter","suppressMultiRangeSelection","enterMovesDown","enterMovesDownAfterEdit","enterNavigatesVerticallyAfterEdit","enterNavigatesVertically","suppressPropertyNamesCheck","rowMultiSelectWithClick","suppressRowHoverHighlight","suppressRowTransform","suppressClipboardPaste","suppressLastEmptyLineOnPaste","enableCharts","enableChartToolPanelsButton","suppressChartToolPanelsButton","suppressMaintainUnsortedOrder","enableCellTextSelection","suppressBrowserResizeObserver","suppressMaxRenderedRowRestriction","excludeChildrenWhenTreeDataFiltering","tooltipMouseTrack","tooltipInteraction","keepDetailRows","paginateChildRows","preventDefaultOnContextMenu","undoRedoCellEditing","allowDragFromColumnsToolPanel","pivotSuppressAutoColumn","suppressExpandablePivotGroups","debounceVerticalScrollbar","detailRowAutoHeight","serverSideFilterAllLevels","serverSideSortAllLevels","serverSideEnableClientSideSort","serverSideOnlyRefreshFilteredGroups","serverSideSortOnServer","serverSideFilterOnServer","suppressAggFilteredOnly","showOpenedGroup","suppressClipboardApi","suppressModelUpdateAfterUpdateTransaction","stopEditingWhenCellsLoseFocus","maintainColumnOrder","groupMaintainOrder","columnHoverHighlight","readOnlyEdit","suppressRowVirtualisation","enableCellEditingOnBackspace","resetRowDataOnUpdate","removePivotHeaderRowWhenSingleValueColumn","suppressCopySingleCellRanges","suppressGroupRowsSticky","suppressCutToClipboard","suppressServerSideInfiniteScroll","rowGroupPanelSuppressSort","allowShowChangeAfterFilter","enableAdvancedFilter","masterDetail","treeData","suppressGroupMaintainValueType","reactiveCustomComponents","applyQuickFilterBeforePivotOrAgg","suppressServerSideFullWidthLoadingRow","suppressAdvancedFilterEval"];Is.OTHER_PROPERTIES=["suppressStickyTotalRow"];Is.FUNCTIONAL_PROPERTIES=["doesExternalFilterPass","processPivotResultColDef","processPivotResultColGroupDef","getBusinessKeyForNode","isRowSelectable","rowDragText","groupRowRenderer","fullWidthCellRenderer","loadingCellRenderer","loadingOverlayComponent","noRowsOverlayComponent","detailCellRenderer","quickFilterParser","quickFilterMatcher"];Is.CALLBACK_PROPERTIES=["getLocaleText","isExternalFilterPresent","getRowHeight","getRowClass","getRowStyle","getContextMenuItems","getMainMenuItems","processRowPostCreate","processCellForClipboard","getGroupRowAgg","isFullWidthRow","sendToClipboard","navigateToNextHeader","tabToNextHeader","navigateToNextCell","tabToNextCell","processCellFromClipboard","getDocument","postProcessPopup","getChildCount","getDataPath","isRowMaster","postSortRows","processHeaderForClipboard","processUnpinnedColumns","processGroupHeaderForClipboard","paginationNumberFormatter","processDataFromClipboard","getServerSideGroupKey","isServerSideGroup","createChartContainer","getChartToolbarItems","fillOperation","isApplyServerSideTransaction","getServerSideGroupLevelParams","isServerSideGroupOpenByDefault","isGroupOpenByDefault","initialGroupOrderComparator","groupIncludeFooter","loadingCellRendererSelector","getRowId","groupAggFiltering","chartMenuItems","groupTotalRow"];Is.FUNCTION_PROPERTIES=[...Is.FUNCTIONAL_PROPERTIES,...Is.CALLBACK_PROPERTIES];Is.ALL_PROPERTIES=[...Is.ARRAY_PROPERTIES,...Is.OBJECT_PROPERTIES,...Is.STRING_PROPERTIES,...Is.NUMBER_PROPERTIES,...Is.FUNCTION_PROPERTIES,...Is.BOOLEAN_PROPERTIES,...Is.OTHER_PROPERTIES];var ig=Is,gr=class Hb{static getCallbackForEvent(e){return!e||e.length<2?e:"on"+e[0].toUpperCase()+e.substring(1)}static getGridOptionKeys(){return this.ALL_PROPERTIES_AND_CALLBACKS}static combineAttributesAndGridOptions(e,i){typeof e!="object"&&(e={});const s=it({},e);return Hb.getGridOptionKeys().forEach(n=>{const o=i[n];typeof o<"u"&&o!==Hb.VUE_OMITTED_PROPERTY&&(s[n]=o)}),s}static processOnChange(e,i,s){if(!e)return;const r={};let n=!1;if(Object.keys(e).filter(a=>Hb.ALL_PROPERTIES_AND_CALLBACKS_SET.has(a)).forEach(a=>{r[a]=e[a],n=!0}),!n)return;i.__internalUpdateGridOptions(r,!0);const o={type:K.EVENT_COMPONENT_STATE_CHANGED};Pr(r,(a,l)=>{o[a]=l}),i.dispatchEvent(o)}};gr.EVENTS=ah(K);gr.VUE_OMITTED_PROPERTY="AG-VUE-OMITTED-PROPERTY";gr.EXCLUDED_INTERNAL_EVENTS=[K.EVENT_SCROLLBAR_WIDTH_CHANGED,K.EVENT_CHECKBOX_CHANGED,K.EVENT_HEIGHT_SCALE_CHANGED,K.EVENT_BODY_HEIGHT_CHANGED,K.EVENT_COLUMN_CONTAINER_WIDTH_CHANGED,K.EVENT_DISPLAYED_COLUMNS_WIDTH_CHANGED,K.EVENT_SCROLL_VISIBILITY_CHANGED,K.EVENT_COLUMN_HOVER_CHANGED,K.EVENT_FLASH_CELLS,K.EVENT_PAGINATION_PIXEL_OFFSET_CHANGED,K.EVENT_DISPLAYED_ROWS_CHANGED,K.EVENT_LEFT_PINNED_WIDTH_CHANGED,K.EVENT_RIGHT_PINNED_WIDTH_CHANGED,K.EVENT_ROW_CONTAINER_HEIGHT_CHANGED,K.EVENT_STORE_UPDATED,K.EVENT_COLUMN_PANEL_ITEM_DRAG_START,K.EVENT_COLUMN_PANEL_ITEM_DRAG_END,K.EVENT_KEY_SHORTCUT_CHANGED_CELL_START,K.EVENT_KEY_SHORTCUT_CHANGED_CELL_END,K.EVENT_FULL_WIDTH_ROW_FOCUSED,K.EVENT_HEADER_HEIGHT_CHANGED,K.EVENT_COLUMN_HEADER_HEIGHT_CHANGED,K.EVENT_CELL_FOCUS_CLEARED,K.EVENT_GRID_STYLES_CHANGED,K.EVENT_FILTER_DESTROYED,K.EVENT_ROW_DATA_UPDATE_STARTED,K.EVENT_ADVANCED_FILTER_ENABLED_CHANGED,K.EVENT_DATA_TYPES_INFERRED,K.EVENT_FIELD_VALUE_CHANGED,K.EVENT_FIELD_PICKER_VALUE_SELECTED,K.EVENT_SUPPRESS_COLUMN_MOVE_CHANGED,K.EVENT_SUPPRESS_MENU_HIDE_CHANGED,K.EVENT_SUPPRESS_FIELD_DOT_NOTATION,K.EVENT_ROW_COUNT_READY,K.EVENT_SIDE_BAR_UPDATED];gr.PUBLIC_EVENTS=gr.EVENTS.filter(t=>!to(gr.EXCLUDED_INTERNAL_EVENTS,t));gr.EVENT_CALLBACKS=gr.EVENTS.map(t=>gr.getCallbackForEvent(t));gr.BOOLEAN_PROPERTIES=ig.BOOLEAN_PROPERTIES;gr.ALL_PROPERTIES=ig.ALL_PROPERTIES;gr.ALL_PROPERTIES_AND_CALLBACKS=[...gr.ALL_PROPERTIES,...gr.EVENT_CALLBACKS];gr.ALL_PROPERTIES_AND_CALLBACKS_SET=new Set(gr.ALL_PROPERTIES_AND_CALLBACKS);var JR=gr,Uw=class extends ye{constructor(){super(...arguments),this.componentsMappedByName={}}setupComponents(t){t&&t.forEach(e=>this.addComponent(e))}addComponent(t){const i=t.componentName.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase().toUpperCase();this.componentsMappedByName[i]=t.componentClass}getComponentClass(t){return this.componentsMappedByName[t]}};Uw=z([Me("agStackComponentsRegistry")],Uw);var q3={};ar(q3,{getAriaCheckboxStateName:()=>cx,getAriaLabel:()=>Q3,getAriaLevel:()=>Y$,getAriaPosInSet:()=>J3,getAriaSortState:()=>Z3,removeAriaExpanded:()=>sG,removeAriaSort:()=>cG,setAriaActiveDescendant:()=>iM,setAriaAtomic:()=>eG,setAriaChecked:()=>X$,setAriaColCount:()=>oG,setAriaColIndex:()=>rM,setAriaColSpan:()=>aG,setAriaControls:()=>nM,setAriaDescribedBy:()=>q$,setAriaDisabled:()=>tM,setAriaExpanded:()=>nc,setAriaHidden:()=>CC,setAriaLabel:()=>no,setAriaLabelledBy:()=>sg,setAriaLevel:()=>iG,setAriaLive:()=>eM,setAriaMultiSelectable:()=>rG,setAriaPosInSet:()=>lx,setAriaRelevant:()=>tG,setAriaRole:()=>as,setAriaRowCount:()=>nG,setAriaRowIndex:()=>sM,setAriaSelected:()=>rg,setAriaSetSize:()=>ax,setAriaSort:()=>lG});function zo(t,e,i){i==null||typeof i=="string"&&i==""?QR(t,e):$o(t,e,i)}function $o(t,e,i){t.setAttribute(X3(e),i.toString())}function QR(t,e){t.removeAttribute(X3(e))}function X3(t){return`aria-${t}`}function as(t,e){e?t.setAttribute("role",e):t.removeAttribute("role")}function Z3(t){let e;return t==="asc"?e="ascending":t==="desc"?e="descending":t==="mixed"?e="other":e="none",e}function Y$(t){return parseInt(t.getAttribute("aria-level"),10)}function J3(t){return parseInt(t.getAttribute("aria-posinset"),10)}function Q3(t){return t.getAttribute("aria-label")}function no(t,e){zo(t,"label",e)}function sg(t,e){zo(t,"labelledby",e)}function q$(t,e){zo(t,"describedby",e)}function eM(t,e){zo(t,"live",e)}function eG(t,e){zo(t,"atomic",e)}function tG(t,e){zo(t,"relevant",e)}function iG(t,e){zo(t,"level",e)}function tM(t,e){zo(t,"disabled",e)}function CC(t,e){zo(t,"hidden",e)}function iM(t,e){zo(t,"activedescendant",e)}function nc(t,e){$o(t,"expanded",e)}function sG(t){QR(t,"expanded")}function ax(t,e){$o(t,"setsize",e)}function lx(t,e){$o(t,"posinset",e)}function rG(t,e){$o(t,"multiselectable",e)}function nG(t,e){$o(t,"rowcount",e)}function sM(t,e){$o(t,"rowindex",e)}function oG(t,e){$o(t,"colcount",e)}function rM(t,e){$o(t,"colindex",e)}function aG(t,e){$o(t,"colspan",e)}function lG(t,e){$o(t,"sort",e)}function cG(t){QR(t,"sort")}function rg(t,e){zo(t,"selected",e)}function X$(t,e){$o(t,"checked",e===void 0?"mixed":e)}function nM(t,e){zo(t,"controls",e.id),sg(e,t.id)}function cx(t,e){return e===void 0?t("ariaIndeterminate","indeterminate"):e===!0?t("ariaChecked","checked"):t("ariaUnchecked","unchecked")}var uG={};ar(uG,{browserSupportsPreventScroll:()=>cM,getBodyHeight:()=>pG,getBodyWidth:()=>hG,getMaxDivHeight:()=>dG,getSafariVersion:()=>oM,getScrollbarWidth:()=>fG,getTabIndex:()=>Ww,isBrowserChrome:()=>ux,isBrowserFirefox:()=>aM,isBrowserSafari:()=>ol,isIOSUserAgent:()=>xc,isInvisibleScrollbar:()=>uM,isMacOsUserAgent:()=>lM});var N1,nb,O1,G1,B1,V1,A_,R_;function ol(){return N1===void 0&&(N1=/^((?!chrome|android).)*safari/i.test(navigator.userAgent)),N1}function oM(){if(nb===void 0)if(ol()){const t=navigator.userAgent.match(/version\/(\d+)/i);t&&(nb=t[1]!=null?parseFloat(t[1]):0)}else nb=0;return nb}function ux(){if(O1===void 0){const t=window;O1=!!t.chrome&&(!!t.chrome.webstore||!!t.chrome.runtime)||/Chrome/.test(navigator.userAgent)&&/Google Inc/.test(navigator.vendor)}return O1}function aM(){return G1===void 0&&(G1=/(firefox)/i.test(navigator.userAgent)),G1}function lM(){return B1===void 0&&(B1=/(Mac|iPhone|iPod|iPad)/i.test(navigator.platform)),B1}function xc(){return V1===void 0&&(V1=/iPad|iPhone|iPod/.test(navigator.platform)||navigator.platform==="MacIntel"&&navigator.maxTouchPoints>1),V1}function cM(){return!ol()||oM()>=15}function Ww(t){if(!t)return null;const e=t.tabIndex,i=t.getAttribute("tabIndex");return e===-1&&(i===null||i===""&&!aM())?null:e.toString()}function dG(){if(!document.body)return-1;let t=1e6;const e=navigator.userAgent.toLowerCase().match(/firefox/)?6e6:1e9,i=document.createElement("div");for(document.body.appendChild(i);;){const s=t*2;if(i.style.height=s+"px",s>e||i.clientHeight!==s)break;t=s}return document.body.removeChild(i),t}function hG(){var t,e,i;return(i=(t=document.body)==null?void 0:t.clientWidth)!=null?i:window.innerHeight||((e=document.documentElement)==null?void 0:e.clientWidth)||-1}function pG(){var t,e,i;return(i=(t=document.body)==null?void 0:t.clientHeight)!=null?i:window.innerHeight||((e=document.documentElement)==null?void 0:e.clientHeight)||-1}function fG(){return R_==null&&gG(),R_}function gG(){const t=document.body,e=document.createElement("div");e.style.width=e.style.height="100px",e.style.opacity="0",e.style.overflow="scroll",e.style.msOverflowStyle="scrollbar",e.style.position="absolute",t.appendChild(e);let i=e.offsetWidth-e.clientWidth;i===0&&e.clientWidth===0&&(i=null),e.parentNode&&e.parentNode.removeChild(e),i!=null&&(R_=i,A_=i===0)}function uM(){return A_==null&&gG(),A_}var mG={};ar(mG,{dateToFormattedString:()=>If,parseDateTimeFromString:()=>Sn,serialiseDate:()=>Fo});var vG={};ar(vG,{cleanNumber:()=>Z$,createArrayOfNumbers:()=>yG,decToHex:()=>J$,formatNumberCommas:()=>dM,formatNumberTwoDecimalPlacesAndCommas:()=>Q$,padStartWidthZeros:()=>Pf,sum:()=>eK});function Pf(t,e){return t.toString().padStart(e,"0")}function yG(t,e){const i=[];for(let s=t;s<=e;s++)i.push(s);return i}function Z$(t){return typeof t=="string"&&(t=parseInt(t,10)),typeof t=="number"?Math.floor(t):null}function J$(t,e){let i="";for(let s=0;s<e;s++)i+=String.fromCharCode(t&255),t>>>=8;return i}function Q$(t,e,i){return typeof t!="number"?"":dM(Math.round(t*100)/100,e,i)}function dM(t,e,i){return typeof t!="number"?"":t.toString().replace(".",i).replace(/(\d)(?=(\d{3})+(?!\d))/g,`$1${e}`)}function eK(t){return t==null?null:t.reduce((e,i)=>e+i,0)}function Fo(t,e=!0,i="-"){if(!t)return null;let s=[t.getFullYear(),t.getMonth()+1,t.getDate()].map(r=>Pf(r,2)).join(i);return e&&(s+=" "+[t.getHours(),t.getMinutes(),t.getSeconds()].map(r=>Pf(r,2)).join(":")),s}var H1=t=>{if(t>3&&t<21)return"th";switch(t%10){case 1:return"st";case 2:return"nd";case 3:return"rd"}return"th"};function If(t,e="YYYY-MM-DD"){const i=Pf(t.getFullYear(),4),s=["January","February","March","April","May","June","July","August","September","October","November","December"],r=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],n={YYYY:()=>i.slice(i.length-4,i.length),YY:()=>i.slice(i.length-2,i.length),Y:()=>`${t.getFullYear()}`,MMMM:()=>s[t.getMonth()],MMM:()=>s[t.getMonth()].slice(0,3),MM:()=>Pf(t.getMonth()+1,2),Mo:()=>`${t.getMonth()+1}${H1(t.getMonth()+1)}`,M:()=>`${t.getMonth()+1}`,Do:()=>`${t.getDate()}${H1(t.getDate())}`,DD:()=>Pf(t.getDate(),2),D:()=>`${t.getDate()}`,dddd:()=>r[t.getDay()],ddd:()=>r[t.getDay()].slice(0,3),dd:()=>r[t.getDay()].slice(0,2),do:()=>`${t.getDay()}${H1(t.getDay())}`,d:()=>`${t.getDay()}`},o=new RegExp(Object.keys(n).join("|"),"g");return e.replace(o,a=>a in n?n[a]():a)}function Sn(t){if(!t)return null;const[e,i]=t.split(" ");if(!e)return null;const s=e.split("-").map(d=>parseInt(d,10));if(s.filter(d=>!isNaN(d)).length!==3)return null;const[r,n,o]=s,a=new Date(r,n-1,o);if(a.getFullYear()!==r||a.getMonth()!==n-1||a.getDate()!==o)return null;if(!i||i==="00:00:00")return a;const[l,c,u]=i.split(":").map(d=>parseInt(d,10));return l>=0&&l<24&&a.setHours(l),c>=0&&c<60&&a.setMinutes(c),u>=0&&u<60&&a.setSeconds(u),a}var CG={};ar(CG,{FOCUSABLE_EXCLUDE:()=>hM,FOCUSABLE_SELECTOR:()=>bG,addOrRemoveAttribute:()=>il,addStylesToElement:()=>CM,bindCellRendererToHtmlElement:()=>wM,clearElement:()=>Cs,copyNodeList:()=>TG,ensureDomOrder:()=>vM,formatSize:()=>dx,getAbsoluteHeight:()=>fM,getAbsoluteWidth:()=>ly,getElementRectWithOffset:()=>gM,getElementSize:()=>Ju,getInnerHeight:()=>bC,getInnerWidth:()=>zh,getScrollLeft:()=>uy,insertWithDomOrder:()=>SG,isElementChildOfClass:()=>lh,isFocusableFormField:()=>pM,isHorizontalScrollShowing:()=>xG,isInDOM:()=>mM,isNodeOrElement:()=>wC,isRtlNegativeScroll:()=>cy,isVerticalScrollShowing:()=>EG,isVisible:()=>Fn,iterateNamedNodeMap:()=>_G,loadTemplate:()=>xn,nodeListForEach:()=>bM,radioCssClass:()=>M_,removeFromParent:()=>la,setDisabled:()=>ng,setDisplayed:()=>Qt,setDomChildOrder:()=>yM,setElementHeight:()=>tK,setElementWidth:()=>hy,setFixedHeight:()=>ch,setFixedWidth:()=>Lo,setScrollLeft:()=>dy,setVisible:()=>wG});var ob;function M_(t,e,i){const s=t.parentElement;let r=s&&s.firstChild;for(;r;)e&&r.classList.toggle(e,r===t),i&&r.classList.toggle(i,r!==t),r=r.nextSibling}var bG="[tabindex], input, select, button, textarea, [href]",hM="[disabled], .ag-disabled:not(.ag-button), .ag-disabled *";function pM(t){const e=Element.prototype.matches||Element.prototype.msMatchesSelector,s=e.call(t,"input, select, button, textarea"),r=e.call(t,hM),n=Fn(t);return s&&!r&&n}function Qt(t,e,i={}){const{skipAriaHidden:s}=i;t.classList.toggle("ag-hidden",!e),s||CC(t,!e)}function wG(t,e,i={}){const{skipAriaHidden:s}=i;t.classList.toggle("ag-invisible",!e),s||CC(t,!e)}function ng(t,e){const i="disabled",s=e?r=>r.setAttribute(i,""):r=>r.removeAttribute(i);s(t),bM(t.querySelectorAll("input"),r=>s(r))}function lh(t,e,i){let s=0;for(;t;){if(t.classList.contains(e))return!0;if(t=t.parentElement,typeof i=="number"){if(++s>i)break}else if(t===i)break}return!1}function Ju(t){const{height:e,width:i,borderTopWidth:s,borderRightWidth:r,borderBottomWidth:n,borderLeftWidth:o,paddingTop:a,paddingRight:l,paddingBottom:c,paddingLeft:u,marginTop:d,marginRight:h,marginBottom:p,marginLeft:f,boxSizing:m}=window.getComputedStyle(t);return{height:parseFloat(e||"0"),width:parseFloat(i||"0"),borderTopWidth:parseFloat(s||"0"),borderRightWidth:parseFloat(r||"0"),borderBottomWidth:parseFloat(n||"0"),borderLeftWidth:parseFloat(o||"0"),paddingTop:parseFloat(a||"0"),paddingRight:parseFloat(l||"0"),paddingBottom:parseFloat(c||"0"),paddingLeft:parseFloat(u||"0"),marginTop:parseFloat(d||"0"),marginRight:parseFloat(h||"0"),marginBottom:parseFloat(p||"0"),marginLeft:parseFloat(f||"0"),boxSizing:m}}function bC(t){const e=Ju(t);return e.boxSizing==="border-box"?e.height-e.paddingTop-e.paddingBottom:e.height}function zh(t){const e=Ju(t);return e.boxSizing==="border-box"?e.width-e.paddingLeft-e.paddingRight:e.width}function fM(t){const e=Ju(t),i=e.marginBottom+e.marginTop;return Math.ceil(t.offsetHeight+i)}function ly(t){const e=Ju(t),i=e.marginLeft+e.marginRight;return Math.ceil(t.offsetWidth+i)}function gM(t){const e=t.getBoundingClientRect(),{borderTopWidth:i,borderLeftWidth:s,borderRightWidth:r,borderBottomWidth:n}=Ju(t);return{top:e.top+(i||0),left:e.left+(s||0),right:e.right+(r||0),bottom:e.bottom+(n||0)}}function cy(){if(typeof ob=="boolean")return ob;const t=document.createElement("div");return t.style.direction="rtl",t.style.width="1px",t.style.height="1px",t.style.position="fixed",t.style.top="0px",t.style.overflow="hidden",t.dir="rtl",t.innerHTML=`<div style="width: 2px">
            <span style="display: inline-block; width: 1px"></span>
            <span style="display: inline-block; width: 1px"></span>
        </div>`,document.body.appendChild(t),t.scrollLeft=1,ob=Math.floor(t.scrollLeft)===0,document.body.removeChild(t),ob}function uy(t,e){let i=t.scrollLeft;return e&&(i=Math.abs(i),ux()&&!cy()&&(i=t.scrollWidth-t.clientWidth-i)),i}function dy(t,e,i){i&&(cy()?e*=-1:(ol()||ux())&&(e=t.scrollWidth-t.clientWidth-e)),t.scrollLeft=e}function Cs(t){for(;t&&t.firstChild;)t.removeChild(t.firstChild)}function la(t){t&&t.parentNode&&t.parentNode.removeChild(t)}function mM(t){return!!t.offsetParent}function Fn(t){const e=t;return e.checkVisibility?e.checkVisibility({checkVisibilityCSS:!0}):!(!mM(t)||window.getComputedStyle(t).visibility!=="visible")}function xn(t){const e=document.createElement("div");return e.innerHTML=(t||"").trim(),e.firstChild}function vM(t,e,i){i&&i.nextSibling===e||(i?i.nextSibling?t.insertBefore(e,i.nextSibling):t.appendChild(e):t.firstChild&&t.firstChild!==e&&t.insertAdjacentElement("afterbegin",e))}function yM(t,e){for(let i=0;i<e.length;i++){const s=e[i],r=t.children[i];r!==s&&t.insertBefore(s,r)}}function SG(t,e,i){i?i.insertAdjacentElement("afterend",e):t.firstChild?t.insertAdjacentElement("afterbegin",e):t.appendChild(e)}function CM(t,e){if(e)for(const[i,s]of Object.entries(e)){if(!i||!i.length||s==null)continue;const r=K3(i),n=s.toString(),o=n.replace(/\s*!important/g,""),a=o.length!=n.length?"important":void 0;t.style.setProperty(r,o,a)}}function xG(t){return t.clientWidth<t.scrollWidth}function EG(t){return t.clientHeight<t.scrollHeight}function hy(t,e){e==="flex"?(t.style.removeProperty("width"),t.style.removeProperty("minWidth"),t.style.removeProperty("maxWidth"),t.style.flex="1 1 auto"):Lo(t,e)}function Lo(t,e){e=dx(e),t.style.width=e.toString(),t.style.maxWidth=e.toString(),t.style.minWidth=e.toString()}function tK(t,e){e==="flex"?(t.style.removeProperty("height"),t.style.removeProperty("minHeight"),t.style.removeProperty("maxHeight"),t.style.flex="1 1 auto"):ch(t,e)}function ch(t,e){e=dx(e),t.style.height=e.toString(),t.style.maxHeight=e.toString(),t.style.minHeight=e.toString()}function dx(t){return typeof t=="number"?`${t}px`:t}function wC(t){return t instanceof Node||t instanceof HTMLElement}function TG(t){if(t==null)return[];const e=[];return bM(t,i=>e.push(i)),e}function _G(t,e){if(t)for(let i=0;i<t.length;i++){const s=t[i];e(s.name,s.value)}}function il(t,e,i){i==null?t.removeAttribute(e):t.setAttribute(e,i.toString())}function bM(t,e){if(t!=null)for(let i=0;i<t.length;i++)e(t[i])}function wM(t,e){t.then(i=>{const s=i.getGui();s!=null&&(typeof s=="object"?e.appendChild(s):e.innerHTML=s)})}var AG={};ar(AG,{fuzzyCheckStrings:()=>RG,fuzzySuggestions:()=>SC});function RG(t,e,i){const s={},r=t.filter(n=>!e.some(o=>o===n));return r.length>0&&r.forEach(n=>s[n]=SC(n,i).values),s}function SC(t,e,i,s){let r=e.map((a,l)=>({value:a,relevance:iK(t.toLowerCase(),a.toLocaleLowerCase()),idx:l}));if(r.sort((a,l)=>l.relevance-a.relevance),i&&(r=r.filter(a=>a.relevance!==0)),r.length>0&&s&&s>0){const l=r[0].relevance*s;r=r.filter(c=>l-c.relevance<0)}const n=[],o=[];for(const a of r)n.push(a.value),o.push(a.idx);return{values:n,indices:o}}function iK(t,e){const i=t.replace(/\s/g,""),s=e.replace(/\s/g,"");let r=0,n=-1;for(let o=0;o<i.length;o++){const a=s.indexOf(i[o],n+1);a!==-1&&(n=a,r+=100-n*100/1e4*100)}return r}var MG={};ar(MG,{createIcon:()=>To,createIconNoSpan:()=>ts,iconNameClassMap:()=>DG});var DG={columnGroupOpened:"expanded",columnGroupClosed:"contracted",columnSelectClosed:"tree-closed",columnSelectOpen:"tree-open",columnSelectIndeterminate:"tree-indeterminate",columnMovePin:"pin",columnMoveHide:"eye-slash",columnMoveMove:"arrows",columnMoveLeft:"left",columnMoveRight:"right",columnMoveGroup:"group",columnMoveValue:"aggregation",columnMovePivot:"pivot",dropNotAllowed:"not-allowed",groupContracted:"tree-closed",groupExpanded:"tree-open",setFilterGroupClosed:"tree-closed",setFilterGroupOpen:"tree-open",setFilterGroupIndeterminate:"tree-indeterminate",chart:"chart",close:"cross",cancel:"cancel",check:"tick",first:"first",previous:"previous",next:"next",last:"last",linked:"linked",unlinked:"unlinked",colorPicker:"color-picker",groupLoading:"loading",menu:"menu",menuAlt:"menu-alt",filter:"filter",columns:"columns",maximize:"maximize",minimize:"minimize",menuPin:"pin",menuValue:"aggregation",menuAddRowGroup:"group",menuRemoveRowGroup:"group",clipboardCopy:"copy",clipboardCut:"cut",clipboardPaste:"paste",pivotPanel:"pivot",rowGroupPanel:"group",valuePanel:"aggregation",columnDrag:"grip",rowDrag:"grip",save:"save",csvExport:"csv",excelExport:"excel",smallDown:"small-down",smallLeft:"small-left",smallRight:"small-right",smallUp:"small-up",sortAscending:"asc",sortDescending:"desc",sortUnSort:"none",advancedFilterBuilder:"group",advancedFilterBuilderDrag:"grip",advancedFilterBuilderInvalid:"not-allowed",advancedFilterBuilderMoveUp:"up",advancedFilterBuilderMoveDown:"down",advancedFilterBuilderAdd:"plus",advancedFilterBuilderRemove:"minus",chartsMenuEdit:"chart",chartsMenuAdvancedSettings:"settings",chartsMenuAdd:"plus"};function To(t,e,i){const s=ts(t,e,i);if(s){const{className:n}=s;if(typeof n=="string"&&n.indexOf("ag-icon")>-1||typeof n=="object"&&n["ag-icon"])return s}const r=document.createElement("span");return r.appendChild(s),r}function ts(t,e,i,s){let r=null;const n=i&&i.getColDef().icons;if(n&&(r=n[t]),e&&!r){const o=e.get("icons");o&&(r=o[t])}if(r){let o;if(typeof r=="function")o=r();else if(typeof r=="string")o=r;else throw new Error("icon from grid options needs to be a string or a function");if(typeof o=="string")return xn(o);if(wC(o))return o;console.warn("AG Grid: iconRenderer should return back a string or a dom object")}else{const o=document.createElement("span");let a=DG[t];return a||(s?a=t:(console.warn(`AG Grid: Did not find icon ${t}`),a="")),o.setAttribute("class",`ag-icon ag-icon-${a}`),o.setAttribute("unselectable","on"),as(o,"presentation"),o}}var PG={};ar(PG,{isDeleteKey:()=>LG,isEventFromPrintableCharacter:()=>hx,isUserSuppressingHeaderKeyboardEvent:()=>IG,isUserSuppressingKeyboardEvent:()=>zw,normaliseQwertyAzerty:()=>FG});var ce=class{};ce.BACKSPACE="Backspace";ce.TAB="Tab";ce.ENTER="Enter";ce.ESCAPE="Escape";ce.SPACE=" ";ce.LEFT="ArrowLeft";ce.UP="ArrowUp";ce.RIGHT="ArrowRight";ce.DOWN="ArrowDown";ce.DELETE="Delete";ce.F2="F2";ce.PAGE_UP="PageUp";ce.PAGE_DOWN="PageDown";ce.PAGE_HOME="Home";ce.PAGE_END="End";ce.A="KeyA";ce.C="KeyC";ce.D="KeyD";ce.V="KeyV";ce.X="KeyX";ce.Y="KeyY";ce.Z="KeyZ";var sK=65,rK=67,nK=86,oK=68,aK=90,lK=89;function hx(t){return t.altKey||t.ctrlKey||t.metaKey?!1:t.key.length===1}function zw(t,e,i,s,r){const n=s?s.getColDef().suppressKeyboardEvent:void 0;if(!n)return!1;const o=t.addGridCommonParams({event:e,editing:r,column:s,node:i,data:i.data,colDef:s.getColDef()});return!!(n&&n(o))}function IG(t,e,i,s){const r=s.getDefinition(),n=r&&r.suppressHeaderKeyboardEvent;if(!Pe(n))return!1;const o=t.addGridCommonParams({colDef:r,column:s,headerRowIndex:i,event:e});return!!n(o)}function FG(t){const{keyCode:e}=t;let i;switch(e){case sK:i=ce.A;break;case rK:i=ce.C;break;case nK:i=ce.V;break;case oK:i=ce.D;break;case aK:i=ce.Z;break;case lK:i=ce.Y;break;default:i=t.code}return i}function LG(t,e=!1){return t===ce.DELETE?!0:!e&&t===ce.BACKSPACE?lM():!1}var kG={};ar(kG,{areEventsNear:()=>SM});function SM(t,e,i){if(i===0)return!1;const s=Math.abs(t.clientX-e.clientX),r=Math.abs(t.clientY-e.clientY);return Math.max(s,r)<=i}var NG={};ar(NG,{sortRowNodesByOrder:()=>cK});function cK(t,e){if(!t)return!1;const i=(o,a)=>{const l=e[o.id],c=e[a.id],u=l!==void 0,d=c!==void 0,h=u&&d,p=!u&&!d;return h?l-c:p?o.__objectId-a.__objectId:u?1:-1};let s,r,n=!1;for(let o=0;o<t.length-1;o++)if(s=t[o],r=t[o+1],i(s,r)>0){n=!0;break}return n?(t.sort(i),!0):!1}var OG={};ar(OG,{convertToSet:()=>xM});function xM(t){const e=new Set;return t.forEach(i=>e.add(i)),e}var uK=it(it(it(it(it(it(it(it(it(it(it(it(it(it(it(it(it(it({},q3),L3),uG),mG),CG),F3),_3),AG),S3),MG),PG),Y3),kG),vG),E3),NG),OG),z3),Q=uK,pr=class{constructor(t=0,e=1){this.nextValue=t,this.step=e}next(){const t=this.nextValue;return this.nextValue+=this.step,t}peek(){return this.nextValue}skip(t){this.nextValue+=t}},GG=(t=>(t[t.IN_PROGRESS=0]="IN_PROGRESS",t[t.RESOLVED=1]="RESOLVED",t))(GG||{}),Ft=class jb{constructor(e){this.status=0,this.resolution=null,this.waiters=[],e(i=>this.onDone(i),i=>this.onReject(i))}static all(e){return new jb(i=>{let s=e.length;const r=new Array(s);e.forEach((n,o)=>{n.then(a=>{r[o]=a,s--,s===0&&i(r)})})})}static resolve(e=null){return new jb(i=>i(e))}then(e){return new jb(i=>{this.status===1?i(e(this.resolution)):this.waiters.push(s=>i(e(s)))})}resolveNow(e,i){return this.status===1?i(this.resolution):e}onDone(e){this.status=1,this.resolution=e,this.waiters.forEach(i=>i(e))}onReject(e){console.warn("TBI")}},dK=class{constructor(){this.timestamp=new Date().getTime()}print(t){const e=new Date().getTime()-this.timestamp;console.info(`${t} = ${e}`),this.timestamp=new Date().getTime()}},BG=class{constructor(t){this.cssClassStates={},this.getGui=t}addCssClass(t){const e=(t||"").split(" ");if(e.length>1){e.forEach(s=>this.addCssClass(s));return}if(this.cssClassStates[t]!==!0&&t.length){const s=this.getGui();s&&s.classList.add(t),this.cssClassStates[t]=!0}}removeCssClass(t){const e=(t||"").split(" ");if(e.length>1){e.forEach(s=>this.removeCssClass(s));return}if(this.cssClassStates[t]!==!1&&t.length){const s=this.getGui();s&&s.classList.remove(t),this.cssClassStates[t]=!1}}containsCssClass(t){const e=this.getGui();return e?e.classList.contains(t):!1}addOrRemoveCssClass(t,e){if(!t)return;if(t.indexOf(" ")>=0){const s=(t||"").split(" ");if(s.length>1){s.forEach(r=>this.addOrRemoveCssClass(r,e));return}}if(this.cssClassStates[t]!==e&&t.length){const s=this.getGui();s&&s.classList.toggle(t,e),this.cssClassStates[t]=e}}},xC=class kd extends ye{constructor(e,i,s,r){super(),this.parentComp=e,this.tooltipShowDelayOverride=i,this.tooltipHideDelayOverride=s,this.shouldDisplayTooltip=r,this.SHOW_QUICK_TOOLTIP_DIFF=1e3,this.FADE_OUT_TOOLTIP_TIMEOUT=1e3,this.INTERACTIVE_HIDE_DELAY=100,this.interactionEnabled=!1,this.isInteractingWithTooltip=!1,this.state=0,this.tooltipInstanceCount=0,this.tooltipMouseTrack=!1}postConstruct(){this.gos.get("tooltipInteraction")&&(this.interactionEnabled=!0),this.tooltipTrigger=this.getTooltipTrigger(),this.tooltipMouseTrack=this.gos.get("tooltipMouseTrack");const e=this.parentComp.getGui();this.tooltipTrigger===0&&(this.addManagedListener(e,"mouseenter",this.onMouseEnter.bind(this)),this.addManagedListener(e,"mouseleave",this.onMouseLeave.bind(this))),this.tooltipTrigger===1&&(this.addManagedListener(e,"focusin",this.onFocusIn.bind(this)),this.addManagedListener(e,"focusout",this.onFocusOut.bind(this))),this.addManagedListener(e,"mousemove",this.onMouseMove.bind(this)),this.interactionEnabled||(this.addManagedListener(e,"mousedown",this.onMouseDown.bind(this)),this.addManagedListener(e,"keydown",this.onKeyDown.bind(this)))}getGridOptionsTooltipDelay(e){const i=this.gos.get(e);return i<0&&ot(`${e} should not be lower than 0`),Math.max(200,i)}getTooltipDelay(e){var i,s;return e==="show"?(i=this.tooltipShowDelayOverride)!=null?i:this.getGridOptionsTooltipDelay("tooltipShowDelay"):(s=this.tooltipHideDelayOverride)!=null?s:this.getGridOptionsTooltipDelay("tooltipHideDelay")}destroy(){this.setToDoNothing(),super.destroy()}getTooltipTrigger(){const e=this.gos.get("tooltipTrigger");return!e||e==="hover"?0:1}onMouseEnter(e){this.interactionEnabled&&this.interactiveTooltipTimeoutId&&(this.unlockService(),this.startHideTimeout()),!xc()&&(kd.isLocked?this.showTooltipTimeoutId=window.setTimeout(()=>{this.prepareToShowTooltip(e)},this.INTERACTIVE_HIDE_DELAY):this.prepareToShowTooltip(e))}onMouseMove(e){this.lastMouseEvent&&(this.lastMouseEvent=e),this.tooltipMouseTrack&&this.state===2&&this.tooltipComp&&this.positionTooltip()}onMouseDown(){this.setToDoNothing()}onMouseLeave(){this.interactionEnabled?this.lockService():this.setToDoNothing()}onFocusIn(){this.prepareToShowTooltip()}onFocusOut(e){var i;const s=e.relatedTarget,r=this.parentComp.getGui(),n=(i=this.tooltipComp)==null?void 0:i.getGui();this.isInteractingWithTooltip||r.contains(s)||this.interactionEnabled&&(n!=null&&n.contains(s))||this.setToDoNothing()}onKeyDown(){this.setToDoNothing()}prepareToShowTooltip(e){if(this.state!=0||kd.isLocked)return;let i=0;e&&(i=this.isLastTooltipHiddenRecently()?200:this.getTooltipDelay("show")),this.lastMouseEvent=e||null,this.showTooltipTimeoutId=window.setTimeout(this.showTooltip.bind(this),i),this.state=1}isLastTooltipHiddenRecently(){const e=new Date().getTime(),i=kd.lastTooltipHideTime;return e-i<this.SHOW_QUICK_TOOLTIP_DIFF}setToDoNothing(){this.state===2&&this.hideTooltip(),this.onBodyScrollEventCallback&&(this.onBodyScrollEventCallback(),this.onBodyScrollEventCallback=void 0),this.onColumnMovedEventCallback&&(this.onColumnMovedEventCallback(),this.onColumnMovedEventCallback=void 0),this.clearTimeouts(),this.state=0,this.lastMouseEvent=null}showTooltip(){const e=it({},this.parentComp.getTooltipParams());if(!Pe(e.value)||this.shouldDisplayTooltip&&!this.shouldDisplayTooltip()){this.setToDoNothing();return}this.state=2,this.tooltipInstanceCount++;const i=this.newTooltipComponentCallback.bind(this,this.tooltipInstanceCount);this.userComponentFactory.getTooltipCompDetails(e).newAgStackInstance().then(i)}hideTooltip(e){if(!e&&this.isInteractingWithTooltip)return;this.tooltipComp&&(this.destroyTooltipComp(),kd.lastTooltipHideTime=new Date().getTime());const i={type:K.EVENT_TOOLTIP_HIDE,parentGui:this.parentComp.getGui()};this.eventService.dispatchEvent(i),this.state=0}newTooltipComponentCallback(e,i){if(this.state!==2||this.tooltipInstanceCount!==e){this.getContext().destroyBean(i);return}const r=i.getGui();this.tooltipComp=i,r.classList.contains("ag-tooltip")||r.classList.add("ag-tooltip-custom"),this.tooltipTrigger===0&&r.classList.add("ag-tooltip-animate"),this.interactionEnabled&&r.classList.add("ag-tooltip-interactive");const n=this.localeService.getLocaleTextFunc(),o=this.popupService.addPopup({eChild:r,ariaLabel:n("ariaLabelTooltip","Tooltip")});o&&(this.tooltipPopupDestroyFunc=o.hideFunc),this.positionTooltip(),this.tooltipTrigger===1&&(this.onBodyScrollEventCallback=this.addManagedListener(this.eventService,K.EVENT_BODY_SCROLL,this.setToDoNothing.bind(this)),this.onColumnMovedEventCallback=this.addManagedListener(this.eventService,K.EVENT_COLUMN_MOVED,this.setToDoNothing.bind(this))),this.interactionEnabled&&(this.tooltipTrigger===0?(this.tooltipMouseEnterListener=this.addManagedListener(r,"mouseenter",this.onTooltipMouseEnter.bind(this))||null,this.tooltipMouseLeaveListener=this.addManagedListener(r,"mouseleave",this.onTooltipMouseLeave.bind(this))||null):(this.tooltipFocusInListener=this.addManagedListener(r,"focusin",this.onTooltipFocusIn.bind(this))||null,this.tooltipFocusOutListener=this.addManagedListener(r,"focusout",this.onTooltipFocusOut.bind(this))||null));const a={type:K.EVENT_TOOLTIP_SHOW,tooltipGui:r,parentGui:this.parentComp.getGui()};this.eventService.dispatchEvent(a),this.startHideTimeout()}onTooltipMouseEnter(){this.isInteractingWithTooltip=!0,this.unlockService()}onTooltipMouseLeave(){this.isInteractingWithTooltip=!1,this.lockService()}onTooltipFocusIn(){this.isInteractingWithTooltip=!0}onTooltipFocusOut(e){var i;const s=this.parentComp.getGui(),r=(i=this.tooltipComp)==null?void 0:i.getGui(),n=e.relatedTarget;r!=null&&r.contains(n)||(this.isInteractingWithTooltip=!1,s.contains(n)?this.startHideTimeout():this.hideTooltip())}positionTooltip(){const e={type:"tooltip",ePopup:this.tooltipComp.getGui(),nudgeY:18,skipObserver:this.tooltipMouseTrack};this.lastMouseEvent?this.popupService.positionPopupUnderMouseEvent($i(it({},e),{mouseEvent:this.lastMouseEvent})):this.popupService.positionPopupByComponent($i(it({},e),{eventSource:this.parentComp.getGui(),position:"under",keepWithinBounds:!0,nudgeY:5}))}destroyTooltipComp(){this.tooltipComp.getGui().classList.add("ag-tooltip-hiding");const e=this.tooltipPopupDestroyFunc,i=this.tooltipComp,s=this.tooltipTrigger===0?this.FADE_OUT_TOOLTIP_TIMEOUT:0;window.setTimeout(()=>{e(),this.getContext().destroyBean(i)},s),this.clearTooltipListeners(),this.tooltipPopupDestroyFunc=void 0,this.tooltipComp=void 0}clearTooltipListeners(){[this.tooltipMouseEnterListener,this.tooltipMouseLeaveListener,this.tooltipFocusInListener,this.tooltipFocusOutListener].forEach(e=>{e&&e()}),this.tooltipMouseEnterListener=this.tooltipMouseLeaveListener=this.tooltipFocusInListener=this.tooltipFocusOutListener=null}lockService(){kd.isLocked=!0,this.interactiveTooltipTimeoutId=window.setTimeout(()=>{this.unlockService(),this.setToDoNothing()},this.INTERACTIVE_HIDE_DELAY)}unlockService(){kd.isLocked=!1,this.clearInteractiveTimeout()}startHideTimeout(){this.clearHideTimeout(),this.hideTooltipTimeoutId=window.setTimeout(this.hideTooltip.bind(this),this.getTooltipDelay("hide"))}clearShowTimeout(){this.showTooltipTimeoutId&&(window.clearTimeout(this.showTooltipTimeoutId),this.showTooltipTimeoutId=void 0)}clearHideTimeout(){this.hideTooltipTimeoutId&&(window.clearTimeout(this.hideTooltipTimeoutId),this.hideTooltipTimeoutId=void 0)}clearInteractiveTimeout(){this.interactiveTooltipTimeoutId&&(window.clearTimeout(this.interactiveTooltipTimeoutId),this.interactiveTooltipTimeoutId=void 0)}clearTimeouts(){this.clearShowTimeout(),this.clearHideTimeout(),this.clearInteractiveTimeout()}};xC.isLocked=!1;z([W("popupService")],xC.prototype,"popupService",2);z([W("userComponentFactory")],xC.prototype,"userComponentFactory",2);z([de],xC.prototype,"postConstruct",1);var VG=xC,hr=class extends ye{constructor(t,e){super(),this.ctrl=t,e&&(this.beans=e)}postConstruct(){this.refreshToolTip()}setBrowserTooltip(t){const e="title",i=this.ctrl.getGui();i&&(t!=null&&t!=""?i.setAttribute(e,t):i.removeAttribute(e))}updateTooltipText(){this.tooltip=this.ctrl.getTooltipValue()}createTooltipFeatureIfNeeded(){var t,e,i,s;if(this.tooltipManager!=null)return;const r={getTooltipParams:()=>this.getTooltipParams(),getGui:()=>this.ctrl.getGui()};this.tooltipManager=this.createBean(new VG(r,(e=(t=this.ctrl).getTooltipShowDelayOverride)==null?void 0:e.call(t),(s=(i=this.ctrl).getTooltipHideDelayOverride)==null?void 0:s.call(i),this.ctrl.shouldDisplayTooltip),this.beans.context)}refreshToolTip(){this.browserTooltips=this.beans.gos.get("enableBrowserTooltips"),this.updateTooltipText(),this.browserTooltips?(this.setBrowserTooltip(this.tooltip),this.tooltipManager&&(this.tooltipManager=this.destroyBean(this.tooltipManager,this.beans.context))):(this.setBrowserTooltip(null),this.createTooltipFeatureIfNeeded())}getTooltipParams(){const t=this.ctrl,e=t.getColumn?t.getColumn():void 0,i=t.getColDef?t.getColDef():void 0,s=t.getRowNode?t.getRowNode():void 0;return{location:t.getLocation(),colDef:i,column:e,rowIndex:t.getRowIndex?t.getRowIndex():void 0,node:s,data:s?s.data:void 0,value:this.getTooltipText(),valueFormatted:t.getValueFormatted?t.getValueFormatted():void 0,hideTooltipCallback:()=>{var r;return(r=this.tooltipManager)==null?void 0:r.hideTooltip(!0)}}}getTooltipText(){return this.tooltip}destroy(){this.tooltipManager&&(this.tooltipManager=this.destroyBean(this.tooltipManager,this.beans.context)),super.destroy()}};z([W("beans")],hr.prototype,"beans",2);z([de],hr.prototype,"postConstruct",1);var hK=new pr,EC=class D_ extends ye{constructor(e){super(),this.displayed=!0,this.visible=!0,this.compId=hK.next(),this.cssClassManager=new BG(()=>this.eGui),e&&this.setTemplate(e)}preConstructOnComponent(){this.usingBrowserTooltips=this.gos.get("enableBrowserTooltips")}getCompId(){return this.compId}getTooltipParams(){return{value:this.tooltipText,location:"UNKNOWN"}}setTooltip(e){const{newTooltipText:i,showDelayOverride:s,hideDelayOverride:r,location:n,shouldDisplayTooltip:o}=e||{};this.tooltipFeature&&(this.tooltipFeature=this.destroyBean(this.tooltipFeature)),this.tooltipText!==i&&(this.tooltipText=i);const a=()=>this.tooltipText;i!=null&&(this.tooltipFeature=this.createBean(new hr({getTooltipValue:a,getGui:()=>this.getGui(),getLocation:()=>n??"UNKNOWN",getColDef:e==null?void 0:e.getColDef,getColumn:e==null?void 0:e.getColumn,getTooltipShowDelayOverride:s!=null?()=>s:void 0,getTooltipHideDelayOverride:r!=null?()=>r:void 0,shouldDisplayTooltip:o})))}createChildComponentsFromTags(e,i){TG(e.childNodes).forEach(r=>{if(!(r instanceof HTMLElement))return;const n=this.createComponentFromElement(r,o=>{o.getGui()&&this.copyAttributesFromNode(r,o.getGui())},i);if(n){if(n.addItems&&r.children.length){this.createChildComponentsFromTags(r,i);const o=Array.prototype.slice.call(r.children);n.addItems(o)}this.swapComponentForNode(n,e,r)}else r.childNodes&&this.createChildComponentsFromTags(r,i)})}createComponentFromElement(e,i,s){const r=e.nodeName,n=s?s[e.getAttribute("ref")]:void 0,o=this.agStackComponentsRegistry.getComponentClass(r);if(o){D_.elementGettingCreated=e;const a=new o(n);return a.setParentComponent(this),this.createBean(a,null,i),a}return null}copyAttributesFromNode(e,i){_G(e.attributes,(s,r)=>i.setAttribute(s,r))}swapComponentForNode(e,i,s){const r=e.getGui();i.replaceChild(r,s),i.insertBefore(document.createComment(s.nodeName),r),this.addDestroyFunc(this.destroyBean.bind(this,e)),this.swapInComponentForQuerySelectors(e,s)}swapInComponentForQuerySelectors(e,i){const s=this;this.iterateOverQuerySelectors(r=>{s[r.attributeName]===i&&(s[r.attributeName]=e)})}iterateOverQuerySelectors(e){let i=Object.getPrototypeOf(this);for(;i!=null;){const s=i.__agComponentMetaData,r=ix(i.constructor);s&&s[r]&&s[r].querySelectors&&s[r].querySelectors.forEach(n=>e(n)),i=Object.getPrototypeOf(i)}}activateTabIndex(e){const i=this.gos.get("tabIndex");e||(e=[]),e.length||e.push(this.getGui()),e.forEach(s=>s.setAttribute("tabindex",i.toString()))}setTemplate(e,i){const s=xn(e);this.setTemplateFromElement(s,i)}setTemplateFromElement(e,i){this.eGui=e,this.eGui.__agComponent=this,this.wireQuerySelectors(),this.getContext()&&this.createChildComponentsFromTags(this.getGui(),i)}createChildComponentsPreConstruct(){this.getGui()&&this.createChildComponentsFromTags(this.getGui())}wireQuerySelectors(){if(!this.eGui)return;const e=this;this.iterateOverQuerySelectors(i=>{const s=n=>e[i.attributeName]=n;if(i.refSelector&&this.getAttribute("ref")===i.refSelector)s(this.eGui);else{const n=this.eGui.querySelector(i.querySelector);n&&s(n.__agComponent||n)}})}getGui(){return this.eGui}getFocusableElement(){return this.eGui}getAriaElement(){return this.getFocusableElement()}setParentComponent(e){this.parentComponent=e}getParentComponent(){return this.parentComponent}setGui(e){this.eGui=e}queryForHtmlElement(e){return this.eGui.querySelector(e)}queryForHtmlInputElement(e){return this.eGui.querySelector(e)}appendChild(e,i){if(e!=null)if(i||(i=this.eGui),wC(e))i.appendChild(e);else{const s=e;i.appendChild(s.getGui())}}isDisplayed(){return this.displayed}setVisible(e,i={}){if(e!==this.visible){this.visible=e;const{skipAriaHidden:s}=i;wG(this.eGui,e,{skipAriaHidden:s})}}setDisplayed(e,i={}){if(e!==this.displayed){this.displayed=e;const{skipAriaHidden:s}=i;Qt(this.eGui,e,{skipAriaHidden:s});const r={type:D_.EVENT_DISPLAYED_CHANGED,visible:this.displayed};this.dispatchEvent(r)}}destroy(){this.parentComponent&&(this.parentComponent=void 0),this.tooltipFeature&&(this.tooltipFeature=this.destroyBean(this.tooltipFeature));const e=this.eGui;e&&e.__agComponent&&(e.__agComponent=void 0),super.destroy()}addGuiEventListener(e,i,s){this.eGui.addEventListener(e,i,s),this.addDestroyFunc(()=>this.eGui.removeEventListener(e,i))}addCssClass(e){this.cssClassManager.addCssClass(e)}removeCssClass(e){this.cssClassManager.removeCssClass(e)}containsCssClass(e){return this.cssClassManager.containsCssClass(e)}addOrRemoveCssClass(e,i){this.cssClassManager.addOrRemoveCssClass(e,i)}getAttribute(e){const{eGui:i}=this;return i?i.getAttribute(e):null}getRefElement(e){return this.queryForHtmlElement(`[ref="${e}"]`)}};EC.EVENT_DISPLAYED_CHANGED="displayedChanged";z([W("agStackComponentsRegistry")],EC.prototype,"agStackComponentsRegistry",2);z([Wh],EC.prototype,"preConstructOnComponent",1);z([Wh],EC.prototype,"createChildComponentsPreConstruct",1);var Te=EC;function pK(t){return HG.bind(this,t,void 0)}function pe(t){return HG.bind(this,`[ref=${t}]`,t)}function HG(t,e,i,s,r){if(t===null){console.error("AG Grid: QuerySelector selector should not be null");return}if(typeof r=="number"){console.error("AG Grid: QuerySelector should be on an attribute");return}fK(i,"querySelectors",{attributeName:s,querySelector:t,refSelector:e})}function fK(t,e,i){const s=gK(t,ix(t.constructor));s[e]||(s[e]=[]),s[e].push(i)}function gK(t,e){return t.__agComponentMetaData||(t.__agComponentMetaData={}),t.__agComponentMetaData[e]||(t.__agComponentMetaData[e]={}),t.__agComponentMetaData[e]}var EM=class extends Te{constructor(){super(`
            <div class="ag-floating-filter-input" role="presentation">
                <ag-input-text-field ref="eFloatingFilterText"></ag-input-text-field>
            </div>`)}destroy(){super.destroy()}init(t){this.params=t;const e=this.columnModel.getDisplayNameForColumn(t.column,"header",!0),i=this.localeService.getLocaleTextFunc();this.eFloatingFilterText.setDisabled(!0).setInputAriaLabel(`${e} ${i("ariaFilterInput","Filter Input")}`)}onParentModelChanged(t){if(t==null){this.eFloatingFilterText.setValue("");return}this.params.parentFilterInstance(e=>{if(e.getModelAsString){const i=e.getModelAsString(t);this.eFloatingFilterText.setValue(i)}})}onParamsUpdated(t){this.refresh(t)}refresh(t){this.init(t)}};z([pe("eFloatingFilterText")],EM.prototype,"eFloatingFilterText",2);z([W("columnModel")],EM.prototype,"columnModel",2);var jG=class{constructor(t,e,i,s,r){this.alive=!0,this.context=t,this.eParent=s,e.getDateCompDetails(i).newAgStackInstance().then(a=>{if(!this.alive){t.destroyBean(a);return}this.dateComp=a,a&&(s.appendChild(a.getGui()),a.afterGuiAttached&&a.afterGuiAttached(),this.tempValue&&a.setDate(this.tempValue),this.disabled!=null&&this.setDateCompDisabled(this.disabled),r==null||r(this))})}destroy(){this.alive=!1,this.dateComp=this.context.destroyBean(this.dateComp)}getDate(){return this.dateComp?this.dateComp.getDate():this.tempValue}setDate(t){this.dateComp?this.dateComp.setDate(t):this.tempValue=t}setDisabled(t){this.dateComp?this.setDateCompDisabled(t):this.disabled=t}setDisplayed(t){Qt(this.eParent,t)}setInputPlaceholder(t){this.dateComp&&this.dateComp.setInputPlaceholder&&this.dateComp.setInputPlaceholder(t)}setInputAriaLabel(t){this.dateComp&&this.dateComp.setInputAriaLabel&&this.dateComp.setInputAriaLabel(t)}afterGuiAttached(t){this.dateComp&&typeof this.dateComp.afterGuiAttached=="function"&&this.dateComp.afterGuiAttached(t)}updateParams(t){var e,i;let s=!1;(e=this.dateComp)!=null&&e.refresh&&typeof this.dateComp.refresh=="function"&&this.dateComp.refresh(t)!==null&&(s=!0),!s&&((i=this.dateComp)!=null&&i.onParamsUpdated)&&typeof this.dateComp.onParamsUpdated=="function"&&this.dateComp.onParamsUpdated(t)!==null&&ot("Custom date component method 'onParamsUpdated' is deprecated. Use 'refresh' instead.")}setDateCompDisabled(t){this.dateComp!=null&&this.dateComp.setDisabled!=null&&this.dateComp.setDisabled(t)}},UG=class{constructor(){this.customFilterOptions={}}init(t,e){this.filterOptions=t.filterOptions||e,this.mapCustomOptions(),this.selectDefaultItem(t)}getFilterOptions(){return this.filterOptions}mapCustomOptions(){this.filterOptions&&this.filterOptions.forEach(t=>{if(typeof t=="string")return;const e=[["displayKey"],["displayName"],["predicate","test"]],i=s=>s.some(r=>t[r]!=null)?!0:(console.warn(`AG Grid: ignoring FilterOptionDef as it doesn't contain one of '${s}'`),!1);if(!e.every(i)){this.filterOptions=this.filterOptions.filter(s=>s===t)||[];return}this.customFilterOptions[t.displayKey]=t})}selectDefaultItem(t){if(t.defaultOption)this.defaultOption=t.defaultOption;else if(this.filterOptions.length>=1){const e=this.filterOptions[0];typeof e=="string"?this.defaultOption=e:e.displayKey?this.defaultOption=e.displayKey:console.warn("AG Grid: invalid FilterOptionDef supplied as it doesn't contain a 'displayKey'")}else console.warn("AG Grid: no filter options for filter")}getDefaultOption(){return this.defaultOption}getCustomOption(t){return this.customFilterOptions[t]}},WG={applyFilter:"Apply",clearFilter:"Clear",resetFilter:"Reset",cancelFilter:"Cancel",textFilter:"Text Filter",numberFilter:"Number Filter",dateFilter:"Date Filter",setFilter:"Set Filter",filterOoo:"Filter...",empty:"Choose one",equals:"Equals",notEqual:"Does not equal",lessThan:"Less than",greaterThan:"Greater than",inRange:"Between",inRangeStart:"From",inRangeEnd:"To",lessThanOrEqual:"Less than or equal to",greaterThanOrEqual:"Greater than or equal to",contains:"Contains",notContains:"Does not contain",startsWith:"Begins with",endsWith:"Ends with",blank:"Blank",notBlank:"Not blank",before:"Before",after:"After",andCondition:"AND",orCondition:"OR",dateFormatOoo:"yyyy-mm-dd"},px=class zG extends ye{constructor(e,i={}){super(),this.eFocusableElement=e,this.callbacks=i,this.callbacks=it({shouldStopEventPropagation:()=>!1,onTabKeyDown:s=>{if(s.defaultPrevented)return;const r=this.focusService.findNextFocusableElement(this.eFocusableElement,!1,s.shiftKey);r&&(r.focus(),s.preventDefault())}},i)}postConstruct(){this.eFocusableElement.classList.add(zG.FOCUS_MANAGED_CLASS),this.addKeyDownListeners(this.eFocusableElement),this.callbacks.onFocusIn&&this.addManagedListener(this.eFocusableElement,"focusin",this.callbacks.onFocusIn),this.callbacks.onFocusOut&&this.addManagedListener(this.eFocusableElement,"focusout",this.callbacks.onFocusOut)}addKeyDownListeners(e){this.addManagedListener(e,"keydown",i=>{if(!(i.defaultPrevented||ha(i))){if(this.callbacks.shouldStopEventPropagation(i)){va(i);return}i.key===ce.TAB?this.callbacks.onTabKeyDown(i):this.callbacks.handleKeyDown&&this.callbacks.handleKeyDown(i)}})}};px.FOCUS_MANAGED_CLASS="ag-focus-managed";z([W("focusService")],px.prototype,"focusService",2);z([de],px.prototype,"postConstruct",1);var ml=px,$G="ag-resizer-wrapper",mK=`<div class="${$G}">
        <div ref="eTopLeftResizer" class="ag-resizer ag-resizer-topLeft"></div>
        <div ref="eTopResizer" class="ag-resizer ag-resizer-top"></div>
        <div ref="eTopRightResizer" class="ag-resizer ag-resizer-topRight"></div>
        <div ref="eRightResizer" class="ag-resizer ag-resizer-right"></div>
        <div ref="eBottomRightResizer" class="ag-resizer ag-resizer-bottomRight"></div>
        <div ref="eBottomResizer" class="ag-resizer ag-resizer-bottom"></div>
        <div ref="eBottomLeftResizer" class="ag-resizer ag-resizer-bottomLeft"></div>
        <div ref="eLeftResizer" class="ag-resizer ag-resizer-left"></div>
    </div>`,Qu=class extends ye{constructor(t,e){super(),this.element=t,this.dragStartPosition={x:0,y:0},this.position={x:0,y:0},this.lastSize={width:-1,height:-1},this.positioned=!1,this.resizersAdded=!1,this.resizeListeners=[],this.boundaryEl=null,this.isResizing=!1,this.isMoving=!1,this.resizable={},this.movable=!1,this.currentResizer=null,this.config=Object.assign({},{popup:!1},e)}center(){const{clientHeight:t,clientWidth:e}=this.offsetParent,i=e/2-this.getWidth()/2,s=t/2-this.getHeight()/2;this.offsetElement(i,s)}initialisePosition(){if(this.positioned)return;const{centered:t,forcePopupParentAsOffsetParent:e,minWidth:i,width:s,minHeight:r,height:n,x:o,y:a}=this.config;this.offsetParent||this.setOffsetParent();let l=0,c=0;const u=Fn(this.element);if(u){const d=this.findBoundaryElement(),h=window.getComputedStyle(d);if(h.minWidth!=null){const p=d.offsetWidth-this.element.offsetWidth;c=parseInt(h.minWidth,10)-p}if(h.minHeight!=null){const p=d.offsetHeight-this.element.offsetHeight;l=parseInt(h.minHeight,10)-p}}if(this.minHeight=r||l,this.minWidth=i||c,s&&this.setWidth(s),n&&this.setHeight(n),(!s||!n)&&this.refreshSize(),t)this.center();else if(o||a)this.offsetElement(o,a);else if(u&&e){let d=this.boundaryEl,h=!0;if(d||(d=this.findBoundaryElement(),h=!1),d){const p=parseFloat(d.style.top),f=parseFloat(d.style.left);h?this.offsetElement(isNaN(f)?0:f,isNaN(p)?0:p):this.setPosition(f,p)}}this.positioned=!!this.offsetParent}isPositioned(){return this.positioned}getPosition(){return this.position}setMovable(t,e){if(!this.config.popup||t===this.movable)return;this.movable=t;const i=this.moveElementDragListener||{eElement:e,onDragStart:this.onMoveStart.bind(this),onDragging:this.onMove.bind(this),onDragStop:this.onMoveEnd.bind(this)};t?(this.dragService.addDragSource(i),this.moveElementDragListener=i):(this.dragService.removeDragSource(i),this.moveElementDragListener=void 0)}setResizable(t){if(this.clearResizeListeners(),t?this.addResizers():this.removeResizers(),typeof t=="boolean"){if(t===!1)return;t={topLeft:t,top:t,topRight:t,right:t,bottomRight:t,bottom:t,bottomLeft:t,left:t}}Object.keys(t).forEach(e=>{const s=!!t[e],r=this.getResizerElement(e),n={dragStartPixels:0,eElement:r,onDragStart:o=>this.onResizeStart(o,e),onDragging:this.onResize.bind(this),onDragStop:o=>this.onResizeEnd(o,e)};(s||!this.isAlive()&&!s)&&(s?(this.dragService.addDragSource(n),this.resizeListeners.push(n),r.style.pointerEvents="all"):r.style.pointerEvents="none",this.resizable[e]=s)})}removeSizeFromEl(){this.element.style.removeProperty("height"),this.element.style.removeProperty("width"),this.element.style.removeProperty("flex")}restoreLastSize(){this.element.style.flex="0 0 auto";const{height:t,width:e}=this.lastSize;e!==-1&&(this.element.style.width=`${e}px`),t!==-1&&(this.element.style.height=`${t}px`)}getHeight(){return this.element.offsetHeight}setHeight(t){const{popup:e}=this.config,i=this.element;let s=!1;if(typeof t=="string"&&t.indexOf("%")!==-1)ch(i,t),t=fM(i),s=!0;else if(t=Math.max(this.minHeight,t),this.positioned){const r=this.getAvailableHeight();r&&t>r&&(t=r)}this.getHeight()!==t&&(s?(i.style.maxHeight="unset",i.style.minHeight="unset"):e?ch(i,t):(i.style.height=`${t}px`,i.style.flex="0 0 auto",this.lastSize.height=typeof t=="number"?t:parseFloat(t)))}getAvailableHeight(){const{popup:t,forcePopupParentAsOffsetParent:e}=this.config;this.positioned||this.initialisePosition();const{clientHeight:i}=this.offsetParent;if(!i)return null;const s=this.element.getBoundingClientRect(),r=this.offsetParent.getBoundingClientRect(),n=t?this.position.y:s.top,o=t?0:r.top;let a=0;if(e){const c=this.element.parentElement;if(c){const{bottom:u}=c.getBoundingClientRect();a=u-s.bottom}}return i+o-n-a}getWidth(){return this.element.offsetWidth}setWidth(t){const e=this.element,{popup:i}=this.config;let s=!1;if(typeof t=="string"&&t.indexOf("%")!==-1)Lo(e,t),t=ly(e),s=!0;else if(this.positioned){t=Math.max(this.minWidth,t);const{clientWidth:r}=this.offsetParent,n=i?this.position.x:this.element.getBoundingClientRect().left;r&&t+n>r&&(t=r-n)}this.getWidth()!==t&&(s?(e.style.maxWidth="unset",e.style.minWidth="unset"):this.config.popup?Lo(e,t):(e.style.width=`${t}px`,e.style.flex=" unset",this.lastSize.width=typeof t=="number"?t:parseFloat(t)))}offsetElement(t=0,e=0){const{forcePopupParentAsOffsetParent:i}=this.config,s=i?this.boundaryEl:this.element;s&&(this.popupService.positionPopup({ePopup:s,keepWithinBounds:!0,skipObserver:this.movable||this.isResizable(),updatePosition:()=>({x:t,y:e})}),this.setPosition(parseFloat(s.style.left),parseFloat(s.style.top)))}constrainSizeToAvailableHeight(t){if(!this.config.forcePopupParentAsOffsetParent)return;const e=()=>{const i=this.getAvailableHeight();this.element.style.setProperty("max-height",`${i}px`)};t?this.resizeObserverSubscriber=this.resizeObserverService.observeResize(this.popupService.getPopupParent(),e):(this.element.style.removeProperty("max-height"),this.resizeObserverSubscriber&&(this.resizeObserverSubscriber(),this.resizeObserverSubscriber=void 0))}setPosition(t,e){this.position.x=t,this.position.y=e}updateDragStartPosition(t,e){this.dragStartPosition={x:t,y:e}}calculateMouseMovement(t){const{e,isLeft:i,isTop:s,anywhereWithin:r,topBuffer:n}=t,o=e.clientX-this.dragStartPosition.x,a=e.clientY-this.dragStartPosition.y,l=this.shouldSkipX(e,!!i,!!r,o)?0:o,c=this.shouldSkipY(e,!!s,n,a)?0:a;return{movementX:l,movementY:c}}shouldSkipX(t,e,i,s){const r=this.element.getBoundingClientRect(),n=this.offsetParent.getBoundingClientRect(),o=this.boundaryEl.getBoundingClientRect(),a=this.config.popup?this.position.x:r.left;let l=a<=0&&n.left>=t.clientX||n.right<=t.clientX&&n.right<=o.right;return l?!0:(e?l=s<0&&t.clientX>a+n.left||s>0&&t.clientX<a+n.left:i?l=s<0&&t.clientX>o.right||s>0&&t.clientX<a+n.left:l=s<0&&t.clientX>o.right||s>0&&t.clientX<o.right,l)}shouldSkipY(t,e,i=0,s){const r=this.element.getBoundingClientRect(),n=this.offsetParent.getBoundingClientRect(),o=this.boundaryEl.getBoundingClientRect(),a=this.config.popup?this.position.y:r.top;let l=a<=0&&n.top>=t.clientY||n.bottom<=t.clientY&&n.bottom<=o.bottom;return l?!0:(e?l=s<0&&t.clientY>a+n.top+i||s>0&&t.clientY<a+n.top:l=s<0&&t.clientY>o.bottom||s>0&&t.clientY<o.bottom,l)}createResizeMap(){const t=this.element;this.resizerMap={topLeft:{element:t.querySelector("[ref=eTopLeftResizer]")},top:{element:t.querySelector("[ref=eTopResizer]")},topRight:{element:t.querySelector("[ref=eTopRightResizer]")},right:{element:t.querySelector("[ref=eRightResizer]")},bottomRight:{element:t.querySelector("[ref=eBottomRightResizer]")},bottom:{element:t.querySelector("[ref=eBottomResizer]")},bottomLeft:{element:t.querySelector("[ref=eBottomLeftResizer]")},left:{element:t.querySelector("[ref=eLeftResizer]")}}}addResizers(){if(this.resizersAdded)return;const t=this.element;if(!t)return;const i=new DOMParser().parseFromString(mK,"text/html").body;t.appendChild(i.firstChild),this.createResizeMap(),this.resizersAdded=!0}removeResizers(){this.resizerMap=void 0;const t=this.element.querySelector(`.${$G}`);t&&this.element.removeChild(t),this.resizersAdded=!1}getResizerElement(t){return this.resizerMap[t].element}onResizeStart(t,e){this.boundaryEl=this.findBoundaryElement(),this.positioned||this.initialisePosition(),this.currentResizer={isTop:!!e.match(/top/i),isRight:!!e.match(/right/i),isBottom:!!e.match(/bottom/i),isLeft:!!e.match(/left/i)},this.element.classList.add("ag-resizing"),this.resizerMap[e].element.classList.add("ag-active");const{popup:i,forcePopupParentAsOffsetParent:s}=this.config;!i&&!s&&this.applySizeToSiblings(this.currentResizer.isBottom||this.currentResizer.isTop),this.isResizing=!0,this.updateDragStartPosition(t.clientX,t.clientY)}getSiblings(){const e=this.element.parentElement;return e?Array.prototype.slice.call(e.children).filter(i=>!i.classList.contains("ag-hidden")):null}getMinSizeOfSiblings(){const t=this.getSiblings()||[];let e=0,i=0;for(let s=0;s<t.length;s++){const r=t[s],n=!!r.style.flex&&r.style.flex!=="0 0 auto";if(r===this.element)continue;let o=this.minHeight||0,a=this.minWidth||0;if(n){const l=window.getComputedStyle(r);l.minHeight&&(o=parseInt(l.minHeight,10)),l.minWidth&&(a=parseInt(l.minWidth,10))}else o=r.offsetHeight,a=r.offsetWidth;e+=o,i+=a}return{height:e,width:i}}applySizeToSiblings(t){let e=null;const i=this.getSiblings();if(i){for(let s=0;s<i.length;s++){const r=i[s];r!==e&&(t?r.style.height=`${r.offsetHeight}px`:r.style.width=`${r.offsetWidth}px`,r.style.flex="0 0 auto",r===this.element&&(e=i[s+1]))}e&&(e.style.removeProperty("height"),e.style.removeProperty("min-height"),e.style.removeProperty("max-height"),e.style.flex="1 1 auto")}}isResizable(){return Object.values(this.resizable).some(t=>t)}onResize(t){if(!this.isResizing||!this.currentResizer)return;const{popup:e,forcePopupParentAsOffsetParent:i}=this.config,{isTop:s,isRight:r,isBottom:n,isLeft:o}=this.currentResizer,a=r||o,l=n||s,{movementX:c,movementY:u}=this.calculateMouseMovement({e:t,isLeft:o,isTop:s}),d=this.position.x,h=this.position.y;let p=0,f=0;if(a&&c){const m=o?-1:1,g=this.getWidth(),y=g+c*m;let v=!1;o&&(p=g-y,(d+p<=0||y<=this.minWidth)&&(v=!0,p=0)),v||this.setWidth(y)}if(l&&u){const m=s?-1:1,g=this.getHeight(),y=g+u*m;let v=!1;s?(f=g-y,(h+f<=0||y<=this.minHeight)&&(v=!0,f=0)):!this.config.popup&&!this.config.forcePopupParentAsOffsetParent&&g<y&&this.getMinSizeOfSiblings().height+y>this.element.parentElement.offsetHeight&&(v=!0),v||this.setHeight(y)}this.updateDragStartPosition(t.clientX,t.clientY),((e||i)&&p||f)&&this.offsetElement(d+p,h+f)}onResizeEnd(t,e){this.isResizing=!1,this.currentResizer=null,this.boundaryEl=null;const i={type:"resize"};this.element.classList.remove("ag-resizing"),this.resizerMap[e].element.classList.remove("ag-active"),this.dispatchEvent(i)}refreshSize(){const t=this.element;this.config.popup&&(this.config.width||this.setWidth(t.offsetWidth),this.config.height||this.setHeight(t.offsetHeight))}onMoveStart(t){this.boundaryEl=this.findBoundaryElement(),this.positioned||this.initialisePosition(),this.isMoving=!0,this.element.classList.add("ag-moving"),this.updateDragStartPosition(t.clientX,t.clientY)}onMove(t){if(!this.isMoving)return;const{x:e,y:i}=this.position;let s;this.config.calculateTopBuffer&&(s=this.config.calculateTopBuffer());const{movementX:r,movementY:n}=this.calculateMouseMovement({e:t,isTop:!0,anywhereWithin:!0,topBuffer:s});this.offsetElement(e+r,i+n),this.updateDragStartPosition(t.clientX,t.clientY)}onMoveEnd(){this.isMoving=!1,this.boundaryEl=null,this.element.classList.remove("ag-moving")}setOffsetParent(){this.config.forcePopupParentAsOffsetParent?this.offsetParent=this.popupService.getPopupParent():this.offsetParent=this.element.offsetParent}findBoundaryElement(){let t=this.element;for(;t;){if(window.getComputedStyle(t).position!=="static")return t;t=t.parentElement}return this.element}clearResizeListeners(){for(;this.resizeListeners.length;){const t=this.resizeListeners.pop();this.dragService.removeDragSource(t)}}destroy(){super.destroy(),this.moveElementDragListener&&this.dragService.removeDragSource(this.moveElementDragListener),this.constrainSizeToAvailableHeight(!1),this.clearResizeListeners(),this.removeResizers()}};z([W("popupService")],Qu.prototype,"popupService",2);z([W("resizeObserverService")],Qu.prototype,"resizeObserverService",2);z([W("dragService")],Qu.prototype,"dragService",2);var fx=class tv extends Te{constructor(e){super(),this.filterNameKey=e,this.applyActive=!1,this.hidePopup=null,this.debouncePending=!1,this.appliedModel=null,this.buttonListeners=[]}postConstruct(){this.resetTemplate(),this.createManagedBean(new ml(this.getFocusableElement(),{handleKeyDown:this.handleKeyDown.bind(this)})),this.positionableFeature=new Qu(this.getPositionableElement(),{forcePopupParentAsOffsetParent:!0}),this.createBean(this.positionableFeature)}handleKeyDown(e){}getFilterTitle(){return this.translate(this.filterNameKey)}isFilterActive(){return!!this.appliedModel}resetTemplate(e){let i=this.getGui();i&&i.removeEventListener("submit",this.onFormSubmit);const s=`
            <form class="ag-filter-wrapper">
                <div class="ag-filter-body-wrapper ag-${this.getCssIdentifier()}-body-wrapper" ref="eFilterBody">
                    ${this.createBodyTemplate()}
                </div>
            </form>`;this.setTemplate(s,e),i=this.getGui(),i&&i.addEventListener("submit",this.onFormSubmit)}isReadOnly(){return!!this.providedFilterParams.readOnly}init(e){this.setParams(e),this.resetUiToDefaults(!0).then(()=>{this.updateUiVisibility(),this.setupOnBtApplyDebounce()})}setParams(e){this.providedFilterParams=e,this.applyActive=tv.isUseApplyButton(e),this.resetButtonsPanel()}updateParams(e){this.providedFilterParams=e,this.applyActive=tv.isUseApplyButton(e),this.resetUiToActiveModel(this.getModel(),()=>{this.updateUiVisibility(),this.setupOnBtApplyDebounce()})}resetButtonsPanel(){const{buttons:e}=this.providedFilterParams,i=e&&e.length>0&&!this.isReadOnly();if(this.eButtonsPanel?(Cs(this.eButtonsPanel),this.buttonListeners.forEach(n=>n==null?void 0:n()),this.buttonListeners=[]):i&&(this.eButtonsPanel=document.createElement("div"),this.eButtonsPanel.classList.add("ag-filter-apply-panel")),!i){this.eButtonsPanel&&la(this.eButtonsPanel);return}const s=document.createDocumentFragment(),r=n=>{let o,a;switch(n){case"apply":o=this.translate("applyFilter"),a=u=>this.onBtApply(!1,!1,u);break;case"clear":o=this.translate("clearFilter"),a=()=>this.onBtClear();break;case"reset":o=this.translate("resetFilter"),a=()=>this.onBtReset();break;case"cancel":o=this.translate("cancelFilter"),a=u=>{this.onBtCancel(u)};break;default:console.warn("AG Grid: Unknown button type specified");return}const c=xn(`<button
                    type="${n==="apply"?"submit":"button"}"
                    ref="${n}FilterButton"
                    class="ag-button ag-standard-button ag-filter-apply-panel-button"
                >${o}
                </button>`);this.buttonListeners.push(this.addManagedListener(c,"click",a)),s.append(c)};xM(e).forEach(n=>r(n)),this.eButtonsPanel.append(s),this.getGui().appendChild(this.eButtonsPanel)}getDefaultDebounceMs(){return 0}setupOnBtApplyDebounce(){const e=tv.getDebounceMs(this.providedFilterParams,this.getDefaultDebounceMs()),i=qr(this.checkApplyDebounce.bind(this),e);this.onBtApplyDebounce=()=>{this.debouncePending=!0,i()}}checkApplyDebounce(){this.debouncePending&&(this.debouncePending=!1,this.onBtApply())}getModel(){return this.appliedModel?this.appliedModel:null}setModel(e){return(e!=null?this.setModelIntoUi(e):this.resetUiToDefaults()).then(()=>{this.updateUiVisibility(),this.applyModel("api")})}onBtCancel(e){this.resetUiToActiveModel(this.getModel(),()=>{this.handleCancelEnd(e)})}handleCancelEnd(e){this.providedFilterParams.closeOnApply&&this.close(e)}resetUiToActiveModel(e,i){const s=()=>{this.onUiChanged(!1,"prevent"),i==null||i()};e!=null?this.setModelIntoUi(e).then(s):this.resetUiToDefaults().then(s)}onBtClear(){this.resetUiToDefaults().then(()=>this.onUiChanged())}onBtReset(){this.onBtClear(),this.onBtApply()}applyModel(e="api"){const i=this.getModelFromUi();if(!this.isModelValid(i))return!1;const s=this.appliedModel;return this.appliedModel=i,!this.areModelsEqual(s,i)}isModelValid(e){return!0}onFormSubmit(e){e.preventDefault()}onBtApply(e=!1,i=!1,s){s&&s.preventDefault(),this.applyModel(i?"rowDataUpdated":"ui")&&this.providedFilterParams.filterChangedCallback({afterFloatingFilter:e,afterDataChange:i,source:"columnFilter"});const{closeOnApply:r}=this.providedFilterParams;r&&this.applyActive&&!e&&!i&&this.close(s)}onNewRowsLoaded(){}close(e){if(!this.hidePopup)return;const i=e,s=i&&i.key;let r;(s==="Enter"||s==="Space")&&(r={keyboardEvent:i}),this.hidePopup(r),this.hidePopup=null}onUiChanged(e=!1,i){if(this.updateUiVisibility(),this.providedFilterParams.filterModifiedCallback(),this.applyActive&&!this.isReadOnly()){const s=this.isModelValid(this.getModelFromUi()),r=this.getRefElement("applyFilterButton");r&&ng(r,!s)}e&&!i||i==="immediately"?this.onBtApply(e):(!this.applyActive&&!i||i==="debounce")&&this.onBtApplyDebounce()}afterGuiAttached(e){e&&(this.hidePopup=e.hidePopup),this.refreshFilterResizer(e==null?void 0:e.container)}refreshFilterResizer(e){if(!this.positionableFeature||e==="toolPanel")return;const i=e==="floatingFilter"||e==="columnFilter",{positionableFeature:s,gos:r}=this;i?(s.restoreLastSize(),s.setResizable(r.get("enableRtl")?{bottom:!0,bottomLeft:!0,left:!0}:{bottom:!0,bottomRight:!0,right:!0})):(this.positionableFeature.removeSizeFromEl(),this.positionableFeature.setResizable(!1)),this.positionableFeature.constrainSizeToAvailableHeight(!0)}afterGuiDetached(){this.checkApplyDebounce(),this.positionableFeature&&this.positionableFeature.constrainSizeToAvailableHeight(!1)}static getDebounceMs(e,i){return tv.isUseApplyButton(e)?(e.debounceMs!=null&&console.warn("AG Grid: debounceMs is ignored when apply button is present"),0):e.debounceMs!=null?e.debounceMs:i}static isUseApplyButton(e){return!!e.buttons&&e.buttons.indexOf("apply")>=0}refresh(e){return this.providedFilterParams=e,!0}destroy(){const e=this.getGui();e&&e.removeEventListener("submit",this.onFormSubmit),this.hidePopup=null,this.positionableFeature&&(this.positionableFeature=this.destroyBean(this.positionableFeature)),this.appliedModel=null,super.destroy()}translate(e){return this.localeService.getLocaleTextFunc()(e,WG[e])}getCellValue(e){return this.providedFilterParams.getValue(e)}getPositionableElement(){return this.eFilterBody}};z([W("rowModel")],fx.prototype,"rowModel",2);z([pe("eFilterBody")],fx.prototype,"eFilterBody",2);z([de],fx.prototype,"postConstruct",1);var Au=fx,TC=class extends Te{constructor(t,e){super(e),this.labelSeparator="",this.labelAlignment="left",this.disabled=!1,this.label="",this.config=t||{}}postConstruct(){this.addCssClass("ag-labeled"),this.eLabel.classList.add("ag-label");const{labelSeparator:t,label:e,labelWidth:i,labelAlignment:s,disabled:r}=this.config;r!=null&&this.setDisabled(r),t!=null&&this.setLabelSeparator(t),e!=null&&this.setLabel(e),i!=null&&this.setLabelWidth(i),this.setLabelAlignment(s||this.labelAlignment),this.refreshLabel()}refreshLabel(){Cs(this.eLabel),typeof this.label=="string"?this.eLabel.innerText=this.label+this.labelSeparator:this.label&&this.eLabel.appendChild(this.label),this.label===""?(Qt(this.eLabel,!1),as(this.eLabel,"presentation")):(Qt(this.eLabel,!0),as(this.eLabel,null))}setLabelSeparator(t){return this.labelSeparator===t?this:(this.labelSeparator=t,this.label!=null&&this.refreshLabel(),this)}getLabelId(){return this.eLabel.id=this.eLabel.id||`ag-${this.getCompId()}-label`,this.eLabel.id}getLabel(){return this.label}setLabel(t){return this.label===t?this:(this.label=t,this.refreshLabel(),this)}setLabelAlignment(t){const i=this.getGui().classList;return i.toggle("ag-label-align-left",t==="left"),i.toggle("ag-label-align-right",t==="right"),i.toggle("ag-label-align-top",t==="top"),this}setLabelEllipsis(t){return this.eLabel.classList.toggle("ag-label-ellipsis",t),this}setLabelWidth(t){return this.label==null?this:(hy(this.eLabel,t),this)}setDisabled(t){t=!!t;const e=this.getGui();return ng(e,t),e.classList.toggle("ag-disabled",t),this.disabled=t,this}isDisabled(){return!!this.disabled}};z([de],TC.prototype,"postConstruct",1);var TM=class extends TC{constructor(t,e,i){super(t,e),this.className=i}postConstruct(){super.postConstruct();const{width:t,value:e,onValueChange:i}=this.config;t!=null&&this.setWidth(t),e!=null&&this.setValue(e),i!=null&&this.onValueChange(i),this.className&&this.addCssClass(this.className),this.refreshAriaLabelledBy()}refreshAriaLabelledBy(){const t=this.getAriaElement(),e=this.getLabelId();Q3(t)!==null?sg(t,""):sg(t,e??"")}setAriaLabel(t){return no(this.getAriaElement(),t),this.refreshAriaLabelledBy(),this}onValueChange(t){return this.addManagedListener(this,K.EVENT_FIELD_VALUE_CHANGED,()=>t(this.getValue())),this}getWidth(){return this.getGui().clientWidth}setWidth(t){return Lo(this.getGui(),t),this}getPreviousValue(){return this.previousValue}getValue(){return this.value}setValue(t,e){return this.value===t?this:(this.previousValue=this.value,this.value=t,e||this.dispatchEvent({type:K.EVENT_FIELD_VALUE_CHANGED}),this)}},vK=`
    <div class="ag-picker-field" role="presentation">
        <div ref="eLabel"></div>
            <div ref="eWrapper" class="ag-wrapper ag-picker-field-wrapper ag-picker-collapsed">
            <div ref="eDisplayField" class="ag-picker-field-display"></div>
            <div ref="eIcon" class="ag-picker-field-icon" aria-hidden="true"></div>
        </div>
    </div>`,Ec=class extends TM{constructor(t){if(super(t,(t==null?void 0:t.template)||vK,t==null?void 0:t.className),this.isPickerDisplayed=!1,this.skipClick=!1,this.pickerGap=4,this.hideCurrentPicker=null,this.ariaRole=t==null?void 0:t.ariaRole,this.onPickerFocusIn=this.onPickerFocusIn.bind(this),this.onPickerFocusOut=this.onPickerFocusOut.bind(this),!t)return;const{pickerGap:e,maxPickerHeight:i,variableWidth:s,minPickerWidth:r,maxPickerWidth:n}=t;e!=null&&(this.pickerGap=e),this.variableWidth=!!s,i!=null&&this.setPickerMaxHeight(i),r!=null&&this.setPickerMinWidth(r),n!=null&&this.setPickerMaxWidth(n)}postConstruct(){super.postConstruct(),this.setupAria();const t=`ag-${this.getCompId()}-display`;this.eDisplayField.setAttribute("id",t);const e=this.getAriaElement();this.addManagedListener(e,"keydown",this.onKeyDown.bind(this)),this.addManagedListener(this.eLabel,"mousedown",this.onLabelOrWrapperMouseDown.bind(this)),this.addManagedListener(this.eWrapper,"mousedown",this.onLabelOrWrapperMouseDown.bind(this));const{pickerIcon:i,inputWidth:s}=this.config;if(i){const r=ts(i,this.gos);r&&this.eIcon.appendChild(r)}s!=null&&this.setInputWidth(s)}setupAria(){const t=this.getAriaElement();t.setAttribute("tabindex",this.gos.get("tabIndex").toString()),nc(t,!1),this.ariaRole&&as(t,this.ariaRole)}onLabelOrWrapperMouseDown(t){if(t){const e=this.getFocusableElement();if(e!==this.eWrapper&&(t==null?void 0:t.target)===e)return;t.preventDefault(),this.getFocusableElement().focus()}if(this.skipClick){this.skipClick=!1;return}this.isDisabled()||(this.isPickerDisplayed?this.hidePicker():this.showPicker())}onKeyDown(t){switch(t.key){case ce.UP:case ce.DOWN:case ce.ENTER:case ce.SPACE:t.preventDefault(),this.onLabelOrWrapperMouseDown();break;case ce.ESCAPE:this.isPickerDisplayed&&(t.preventDefault(),t.stopPropagation(),this.hideCurrentPicker&&this.hideCurrentPicker());break}}showPicker(){this.isPickerDisplayed=!0,this.pickerComponent||(this.pickerComponent=this.createPickerComponent());const t=this.pickerComponent.getGui();t.addEventListener("focusin",this.onPickerFocusIn),t.addEventListener("focusout",this.onPickerFocusOut),this.hideCurrentPicker=this.renderAndPositionPicker(),this.toggleExpandedStyles(!0)}renderAndPositionPicker(){const t=this.gos.getDocument(),e=this.pickerComponent.getGui();this.gos.get("suppressScrollWhenPopupsAreOpen")||(this.destroyMouseWheelFunc=this.addManagedListener(this.eventService,K.EVENT_BODY_SCROLL,()=>{this.hidePicker()}));const i=this.localeService.getLocaleTextFunc(),{pickerAriaLabelKey:s,pickerAriaLabelValue:r,modalPicker:n=!0}=this.config,o={modal:n,eChild:e,closeOnEsc:!0,closedCallback:()=>{const p=this.gos.getActiveDomElement(),f=!p||p===t.body;this.beforeHidePicker(),f&&this.isAlive()&&this.getFocusableElement().focus()},ariaLabel:i(s,r)},a=this.popupService.addPopup(o),{maxPickerHeight:l,minPickerWidth:c,maxPickerWidth:u,variableWidth:d}=this;d?(c&&(e.style.minWidth=c),e.style.width=dx(ly(this.eWrapper)),u&&(e.style.maxWidth=u)):hy(e,u??ly(this.eWrapper));const h=l??`${bC(this.popupService.getPopupParent())}px`;return e.style.setProperty("max-height",h),e.style.position="absolute",this.alignPickerToComponent(),a.hideFunc}alignPickerToComponent(){if(!this.pickerComponent)return;const{pickerType:t}=this.config,{pickerGap:e}=this,i=this.gos.get("enableRtl")?"right":"left";this.popupService.positionPopupByComponent({type:t,eventSource:this.eWrapper,ePopup:this.pickerComponent.getGui(),position:"under",alignSide:i,keepWithinBounds:!0,nudgeY:e})}beforeHidePicker(){this.destroyMouseWheelFunc&&(this.destroyMouseWheelFunc(),this.destroyMouseWheelFunc=void 0),this.toggleExpandedStyles(!1);const t=this.pickerComponent.getGui();t.removeEventListener("focusin",this.onPickerFocusIn),t.removeEventListener("focusout",this.onPickerFocusOut),this.isPickerDisplayed=!1,this.pickerComponent=void 0,this.hideCurrentPicker=null}toggleExpandedStyles(t){if(!this.isAlive())return;const e=this.getAriaElement();nc(e,t),this.eWrapper.classList.toggle("ag-picker-expanded",t),this.eWrapper.classList.toggle("ag-picker-collapsed",!t)}onPickerFocusIn(){this.togglePickerHasFocus(!0)}onPickerFocusOut(t){var e;(e=this.pickerComponent)!=null&&e.getGui().contains(t.relatedTarget)||this.togglePickerHasFocus(!1)}togglePickerHasFocus(t){this.pickerComponent&&this.eWrapper.classList.toggle("ag-picker-has-focus",t)}hidePicker(){this.hideCurrentPicker&&this.hideCurrentPicker()}setInputWidth(t){return hy(this.eWrapper,t),this}getFocusableElement(){return this.eWrapper}setPickerGap(t){return this.pickerGap=t,this}setPickerMinWidth(t){return typeof t=="number"&&(t=`${t}px`),this.minPickerWidth=t??void 0,this}setPickerMaxWidth(t){return typeof t=="number"&&(t=`${t}px`),this.maxPickerWidth=t??void 0,this}setPickerMaxHeight(t){return typeof t=="number"&&(t=`${t}px`),this.maxPickerHeight=t??void 0,this}destroy(){this.hidePicker(),super.destroy()}};z([W("popupService")],Ec.prototype,"popupService",2);z([pe("eLabel")],Ec.prototype,"eLabel",2);z([pe("eWrapper")],Ec.prototype,"eWrapper",2);z([pe("eDisplayField")],Ec.prototype,"eDisplayField",2);z([pe("eIcon")],Ec.prototype,"eIcon",2);var gx=class Ub extends Te{constructor(e="default",i=!1){super(`<div class="ag-list ag-${e}-list" role="listbox"></div>`),this.cssIdentifier=e,this.unFocusable=i,this.options=[],this.itemEls=[]}init(){const e=this.getGui();this.addManagedListener(e,"mouseleave",()=>this.clearHighlighted()),!this.unFocusable&&this.addManagedListener(e,"keydown",this.handleKeyDown.bind(this))}handleKeyDown(e){const i=e.key;switch(i){case ce.ENTER:if(!this.highlightedEl)this.setValue(this.getValue());else{const s=this.itemEls.indexOf(this.highlightedEl);this.setValueByIndex(s)}break;case ce.DOWN:case ce.UP:e.preventDefault(),this.navigate(i);break;case ce.PAGE_DOWN:case ce.PAGE_UP:case ce.PAGE_HOME:case ce.PAGE_END:e.preventDefault(),this.navigateToPage(i);break}}navigate(e){const i=e===ce.DOWN;let s;if(!this.highlightedEl)s=this.itemEls[i?0:this.itemEls.length-1];else{let n=this.itemEls.indexOf(this.highlightedEl)+(i?1:-1);n=Math.min(Math.max(n,0),this.itemEls.length-1),s=this.itemEls[n]}this.highlightItem(s)}navigateToPage(e){if(!this.highlightedEl||this.itemEls.length===0)return;const i=this.itemEls.indexOf(this.highlightedEl),s=this.options.length-1,r=this.itemEls[0].clientHeight,n=Math.floor(this.getGui().clientHeight/r);let o=-1;e===ce.PAGE_HOME?o=0:e===ce.PAGE_END?o=s:e===ce.PAGE_DOWN?o=Math.min(i+n,s):e===ce.PAGE_UP&&(o=Math.max(i-n,0)),o!==-1&&this.highlightItem(this.itemEls[o])}addOptions(e){return e.forEach(i=>this.addOption(i)),this}addOption(e){const{value:i,text:s}=e,r=s||i;return this.options.push({value:i,text:r}),this.renderOption(i,r),this.updateIndices(),this}clearOptions(){this.options=[],this.reset(!0),this.itemEls.forEach(e=>{la(e)}),this.itemEls=[]}updateIndices(){const e=this.getGui().querySelectorAll(".ag-list-item");e.forEach((i,s)=>{lx(i,s+1),ax(i,e.length)})}renderOption(e,i){const s=this.gos.getDocument(),r=s.createElement("div");as(r,"option"),r.classList.add("ag-list-item",`ag-${this.cssIdentifier}-list-item`);const n=s.createElement("span");r.appendChild(n),n.textContent=i,this.unFocusable||(r.tabIndex=-1),this.itemEls.push(r),this.addManagedListener(r,"mousemove",()=>this.highlightItem(r)),this.addManagedListener(r,"mousedown",o=>{o.preventDefault(),this.setValue(e)}),this.createManagedBean(new hr({getTooltipValue:()=>i,getGui:()=>r,getLocation:()=>"UNKNOWN",shouldDisplayTooltip:()=>n.scrollWidth>n.clientWidth})),this.getGui().appendChild(r)}setValue(e,i){if(this.value===e)return this.fireItemSelected(),this;if(e==null)return this.reset(i),this;const s=this.options.findIndex(r=>r.value===e);if(s!==-1){const r=this.options[s];this.value=r.value,this.displayValue=r.text,this.highlightItem(this.itemEls[s]),i||this.fireChangeEvent()}return this}setValueByIndex(e){return this.setValue(this.options[e].value)}getValue(){return this.value}getDisplayValue(){return this.displayValue}refreshHighlighted(){this.clearHighlighted();const e=this.options.findIndex(i=>i.value===this.value);e!==-1&&this.highlightItem(this.itemEls[e])}reset(e){this.value=null,this.displayValue=null,this.clearHighlighted(),e||this.fireChangeEvent()}highlightItem(e){if(!Fn(e))return;this.clearHighlighted(),this.highlightedEl=e,this.highlightedEl.classList.add(Ub.ACTIVE_CLASS),rg(this.highlightedEl,!0);const i=this.getGui(),{scrollTop:s,clientHeight:r}=i,{offsetTop:n,offsetHeight:o}=e;(n+o>s+r||n<s)&&this.highlightedEl.scrollIntoView({block:"nearest"}),this.unFocusable||this.highlightedEl.focus()}clearHighlighted(){!this.highlightedEl||!Fn(this.highlightedEl)||(this.highlightedEl.classList.remove(Ub.ACTIVE_CLASS),rg(this.highlightedEl,!1),this.highlightedEl=null)}fireChangeEvent(){this.dispatchEvent({type:K.EVENT_FIELD_VALUE_CHANGED}),this.fireItemSelected()}fireItemSelected(){this.dispatchEvent({type:Ub.EVENT_ITEM_SELECTED})}};gx.EVENT_ITEM_SELECTED="selectedItem";gx.ACTIVE_CLASS="ag-active-item";z([de],gx.prototype,"init",1);var uF=gx,KG=class YG extends Ec{constructor(e){super(it({pickerAriaLabelKey:"ariaLabelSelectField",pickerAriaLabelValue:"Select Field",pickerType:"ag-list",className:"ag-select",pickerIcon:"smallDown",ariaRole:"combobox"},e))}postConstruct(){super.postConstruct(),this.createListComponent(),this.eWrapper.tabIndex=this.gos.get("tabIndex");const{options:e,value:i,placeholder:s}=this.config;e!=null&&this.addOptions(e),i!=null&&this.setValue(i,!0),s&&i==null&&(this.eDisplayField.textContent=s),this.addManagedListener(this.eWrapper,"focusout",this.onWrapperFocusOut.bind(this))}onWrapperFocusOut(e){this.eWrapper.contains(e.relatedTarget)||this.hidePicker()}createListComponent(){this.listComponent=this.createBean(new uF("select",!0)),this.listComponent.setParentComponent(this);const e=this.listComponent.getAriaElement(),i=`ag-select-list-${this.listComponent.getCompId()}`;e.setAttribute("id",i),nM(this.getAriaElement(),e),this.listComponent.addManagedListener(this.listComponent,uF.EVENT_ITEM_SELECTED,()=>{this.hidePicker(),this.dispatchEvent({type:YG.EVENT_ITEM_SELECTED})}),this.listComponent.addManagedListener(this.listComponent,K.EVENT_FIELD_VALUE_CHANGED,()=>{this.listComponent&&(this.setValue(this.listComponent.getValue(),!1,!0),this.hidePicker())})}createPickerComponent(){return this.listComponent}onKeyDown(e){var i;const{key:s}=e;switch(s===ce.TAB&&this.hidePicker(),s){case ce.ENTER:case ce.UP:case ce.DOWN:case ce.PAGE_UP:case ce.PAGE_DOWN:case ce.PAGE_HOME:case ce.PAGE_END:e.preventDefault(),this.isPickerDisplayed?(i=this.listComponent)==null||i.handleKeyDown(e):super.onKeyDown(e);break;case ce.ESCAPE:super.onKeyDown(e);break}}showPicker(){this.listComponent&&(super.showPicker(),this.listComponent.refreshHighlighted())}addOptions(e){return e.forEach(i=>this.addOption(i)),this}addOption(e){return this.listComponent.addOption(e),this}clearOptions(){var e;return(e=this.listComponent)==null||e.clearOptions(),this}setValue(e,i,s){if(this.value===e||!this.listComponent)return this;if(s||this.listComponent.setValue(e,!0),this.listComponent.getValue()===this.getValue())return this;let n=this.listComponent.getDisplayValue();return n==null&&this.config.placeholder&&(n=this.config.placeholder),this.eDisplayField.textContent=n,this.setTooltip({newTooltipText:n??null,shouldDisplayTooltip:()=>this.eDisplayField.scrollWidth>this.eDisplayField.clientWidth}),super.setValue(e,i)}destroy(){this.listComponent&&(this.destroyBean(this.listComponent),this.listComponent=void 0),super.destroy()}};KG.EVENT_ITEM_SELECTED="selectedItem";var Jr=KG,ca=class extends TM{constructor(t,e,i="text",s="input"){super(t,`
            <div role="presentation">
                <div ref="eLabel" class="ag-input-field-label"></div>
                <div ref="eWrapper" class="ag-wrapper ag-input-wrapper" role="presentation">
                    <${s} ref="eInput" class="ag-input-field-input"></${s}>
                </div>
            </div>`,e),this.inputType=i,this.displayFieldTag=s}postConstruct(){super.postConstruct(),this.setInputType(),this.eLabel.classList.add(`${this.className}-label`),this.eWrapper.classList.add(`${this.className}-input-wrapper`),this.eInput.classList.add(`${this.className}-input`),this.addCssClass("ag-input-field"),this.eInput.id=this.eInput.id||`ag-${this.getCompId()}-input`;const{inputName:t,inputWidth:e}=this.config;t!=null&&this.setInputName(t),e!=null&&this.setInputWidth(e),this.addInputListeners(),this.activateTabIndex([this.eInput])}addInputListeners(){this.addManagedListener(this.eInput,"input",t=>this.setValue(t.target.value))}setInputType(){this.displayFieldTag==="input"&&this.eInput.setAttribute("type",this.inputType)}getInputElement(){return this.eInput}setInputWidth(t){return hy(this.eWrapper,t),this}setInputName(t){return this.getInputElement().setAttribute("name",t),this}getFocusableElement(){return this.eInput}setMaxLength(t){const e=this.eInput;return e.maxLength=t,this}setInputPlaceholder(t){return il(this.eInput,"placeholder",t),this}setInputAriaLabel(t){return no(this.eInput,t),this.refreshAriaLabelledBy(),this}setDisabled(t){return ng(this.eInput,t),super.setDisabled(t)}setAutoComplete(t){if(t===!0)il(this.eInput,"autocomplete",null);else{const e=typeof t=="string"?t:"off";il(this.eInput,"autocomplete",e)}return this}};z([pe("eLabel")],ca.prototype,"eLabel",2);z([pe("eWrapper")],ca.prototype,"eWrapper",2);z([pe("eInput")],ca.prototype,"eInput",2);var Tc=class extends ca{constructor(t,e="ag-checkbox",i="checkbox"){super(t,e,i),this.labelAlignment="right",this.selected=!1,this.readOnly=!1,this.passive=!1}postConstruct(){super.postConstruct();const{readOnly:t,passive:e}=this.config;typeof t=="boolean"&&this.setReadOnly(t),typeof e=="boolean"&&this.setPassive(e)}addInputListeners(){this.addManagedListener(this.eInput,"click",this.onCheckboxClick.bind(this)),this.addManagedListener(this.eLabel,"click",this.toggle.bind(this))}getNextValue(){return this.selected===void 0?!0:!this.selected}setPassive(t){this.passive=t}isReadOnly(){return this.readOnly}setReadOnly(t){this.eWrapper.classList.toggle("ag-disabled",t),this.eInput.disabled=t,this.readOnly=t}setDisabled(t){return this.eWrapper.classList.toggle("ag-disabled",t),super.setDisabled(t)}toggle(){if(this.eInput.disabled)return;const t=this.isSelected(),e=this.getNextValue();this.passive?this.dispatchChange(e,t):this.setValue(e)}getValue(){return this.isSelected()}setValue(t,e){return this.refreshSelectedClass(t),this.setSelected(t,e),this}setName(t){const e=this.getInputElement();return e.name=t,this}isSelected(){return this.selected}setSelected(t,e){this.isSelected()!==t&&(this.previousValue=this.isSelected(),t=this.selected=typeof t=="boolean"?t:void 0,this.eInput.checked=t,this.eInput.indeterminate=t===void 0,e||this.dispatchChange(this.selected,this.previousValue))}dispatchChange(t,e,i){this.dispatchEvent({type:K.EVENT_FIELD_VALUE_CHANGED,selected:t,previousValue:e,event:i});const s=this.getInputElement(),r={type:K.EVENT_CHECKBOX_CHANGED,id:s.id,name:s.name,selected:t,previousValue:e};this.eventService.dispatchEvent(r)}onCheckboxClick(t){if(this.passive||this.eInput.disabled)return;const e=this.isSelected(),i=this.selected=t.target.checked;this.refreshSelectedClass(i),this.dispatchChange(i,e,t)}refreshSelectedClass(t){this.eWrapper.classList.toggle("ag-checked",t===!0),this.eWrapper.classList.toggle("ag-indeterminate",t==null)}},mx=class extends Tc{constructor(t){super(t,"ag-radio-button","radio")}isSelected(){return this.eInput.checked}toggle(){this.eInput.disabled||this.isSelected()||this.setValue(!0)}addInputListeners(){super.addInputListeners(),this.addManagedListener(this.eventService,K.EVENT_CHECKBOX_CHANGED,this.onChange.bind(this))}onChange(t){t.selected&&t.name&&this.eInput.name&&this.eInput.name===t.name&&t.id&&this.eInput.id!==t.id&&this.setValue(!1,!0)}},_M=class{constructor(t,e,i){this.localeService=t,this.optionsFactory=e,this.valueFormatter=i}getModelAsString(t){if(!t)return null;const e=t.operator!=null,i=this.localeService.getLocaleTextFunc();if(e){const s=t;let{conditions:r}=s;if(!r){const{condition1:a,condition2:l}=s;r=[a,l]}const n=r.map(a=>this.getModelAsString(a)),o=s.operator==="AND"?"andCondition":"orCondition";return n.join(` ${i(o,WG[o])} `)}else{if(t.type===Xi.BLANK||t.type===Xi.NOT_BLANK)return i(t.type,t.type);{const s=t,r=this.optionsFactory.getCustomOption(s.type),{displayKey:n,displayName:o,numberOfInputs:a}=r||{};return n&&o&&a===0?(i(n,o),o):this.conditionToString(s,r)}}}updateParams(t){this.optionsFactory=t.optionsFactory}formatValue(t){var e;return this.valueFormatter?(e=this.valueFormatter(t??null))!=null?e:"":String(t)}},rn=class kp extends Au{constructor(){super(...arguments),this.eTypes=[],this.eJoinOperatorPanels=[],this.eJoinOperatorsAnd=[],this.eJoinOperatorsOr=[],this.eConditionBodies=[],this.listener=()=>this.onUiChanged(),this.lastUiCompletePosition=null,this.joinOperatorId=0}getNumberOfInputs(e){const i=this.optionsFactory.getCustomOption(e);if(i){const{numberOfInputs:r}=i;return r??1}const s=[kp.EMPTY,kp.NOT_BLANK,kp.BLANK];return e&&s.indexOf(e)>=0?0:e===kp.IN_RANGE?2:1}onFloatingFilterChanged(e,i){this.setTypeFromFloatingFilter(e),this.setValueFromFloatingFilter(i),this.onUiChanged(!0)}setTypeFromFloatingFilter(e){this.eTypes.forEach((i,s)=>{s===0?i.setValue(e,!0):i.setValue(this.optionsFactory.getDefaultOption(),!0)})}getModelFromUi(){const e=this.getUiCompleteConditions();return e.length===0?null:this.maxNumConditions>1&&e.length>1?{filterType:this.getFilterType(),operator:this.getJoinOperator(),condition1:e[0],condition2:e[1],conditions:e}:e[0]}getConditionTypes(){return this.eTypes.map(e=>e.getValue())}getConditionType(e){return this.eTypes[e].getValue()}getJoinOperator(){return this.eJoinOperatorsOr.length===0?this.defaultJoinOperator:this.eJoinOperatorsOr[0].getValue()===!0?"OR":"AND"}areModelsEqual(e,i){if(!e&&!i)return!0;if(!e&&i||e&&!i)return!1;const s=!e.operator,r=!i.operator;if(!s&&r||s&&!r)return!1;let o;if(s){const a=e,l=i;o=this.areSimpleModelsEqual(a,l)}else{const a=e,l=i;o=a.operator===l.operator&&Ya(a.conditions,l.conditions,(c,u)=>this.areSimpleModelsEqual(c,u))}return o}shouldRefresh(e){var i,s,r;const n=this.getModel(),o=n?(i=n.conditions)!=null?i:[n]:null,a=(r=(s=e.filterOptions)==null?void 0:s.map(c=>typeof c=="string"?c:c.displayKey))!=null?r:this.getDefaultFilterOptions();return!(!(!o||o.every(c=>a.find(u=>u===c.type)!==void 0))||typeof e.maxNumConditions=="number"&&o&&o.length>e.maxNumConditions)}refresh(e){return!this.shouldRefresh(e)||!super.refresh(e)?!1:(this.setParams(e),this.removeConditionsAndOperators(0),this.createOption(),this.setModel(this.getModel()),!0)}setModelIntoUi(e){if(e.operator){let s=e;s.conditions||(s.conditions=[s.condition1,s.condition2]);const r=this.validateAndUpdateConditions(s.conditions),n=this.getNumConditions();if(r<n)this.removeConditionsAndOperators(r);else if(r>n)for(let a=n;a<r;a++)this.createJoinOperatorPanel(),this.createOption();const o=s.operator==="OR";this.eJoinOperatorsAnd.forEach(a=>a.setValue(!o,!0)),this.eJoinOperatorsOr.forEach(a=>a.setValue(o,!0)),s.conditions.forEach((a,l)=>{this.eTypes[l].setValue(a.type,!0),this.setConditionIntoUi(a,l)})}else{const s=e;this.getNumConditions()>1&&this.removeConditionsAndOperators(1),this.eTypes[0].setValue(s.type,!0),this.setConditionIntoUi(s,0)}return this.lastUiCompletePosition=this.getNumConditions()-1,this.createMissingConditionsAndOperators(),this.onUiChanged(),Ft.resolve()}validateAndUpdateConditions(e){let i=e.length;return i>this.maxNumConditions&&(e.splice(this.maxNumConditions),ot('Filter Model contains more conditions than "filterParams.maxNumConditions". Additional conditions have been ignored.'),i=this.maxNumConditions),i}doesFilterPass(e){var i;const s=this.getModel();if(s==null)return!0;const{operator:r}=s,n=[];if(r){const a=s;n.push(...(i=a.conditions)!=null?i:[])}else n.push(s);return n[r&&r==="OR"?"some":"every"](a=>this.individualConditionPasses(e,a))}setParams(e){super.setParams(e),this.setNumConditions(e),this.defaultJoinOperator=this.getDefaultJoinOperator(e.defaultJoinOperator),this.filterPlaceholder=e.filterPlaceholder,this.optionsFactory=new UG,this.optionsFactory.init(e,this.getDefaultFilterOptions()),this.createFilterListOptions(),this.createOption(),this.createMissingConditionsAndOperators(),this.isReadOnly()&&this.eFilterBody.setAttribute("tabindex","-1")}setNumConditions(e){var i,s;e.suppressAndOrCondition!=null&&ot('Since v29.2 "filterParams.suppressAndOrCondition" is deprecated. Use "filterParams.maxNumConditions = 1" instead.'),e.alwaysShowBothConditions!=null&&ot('Since v29.2 "filterParams.alwaysShowBothConditions" is deprecated. Use "filterParams.numAlwaysVisibleConditions = 2" instead.'),this.maxNumConditions=(i=e.maxNumConditions)!=null?i:e.suppressAndOrCondition?1:2,this.maxNumConditions<1&&(ot('"filterParams.maxNumConditions" must be greater than or equal to zero.'),this.maxNumConditions=1),this.numAlwaysVisibleConditions=(s=e.numAlwaysVisibleConditions)!=null?s:e.alwaysShowBothConditions?2:1,this.numAlwaysVisibleConditions<1&&(ot('"filterParams.numAlwaysVisibleConditions" must be greater than or equal to zero.'),this.numAlwaysVisibleConditions=1),this.numAlwaysVisibleConditions>this.maxNumConditions&&(ot('"filterParams.numAlwaysVisibleConditions" cannot be greater than "filterParams.maxNumConditions".'),this.numAlwaysVisibleConditions=this.maxNumConditions)}createOption(){const e=this.createManagedBean(new Jr);this.eTypes.push(e),e.addCssClass("ag-filter-select"),this.eFilterBody.appendChild(e.getGui());const i=this.createValueElement();this.eConditionBodies.push(i),this.eFilterBody.appendChild(i),this.putOptionsIntoDropdown(e),this.resetType(e);const s=this.getNumConditions()-1;this.forEachPositionInput(s,r=>this.resetInput(r)),this.addChangedListeners(e,s)}createJoinOperatorPanel(){const e=document.createElement("div");this.eJoinOperatorPanels.push(e),e.classList.add("ag-filter-condition");const i=this.createJoinOperator(this.eJoinOperatorsAnd,e,"and"),s=this.createJoinOperator(this.eJoinOperatorsOr,e,"or");this.eFilterBody.appendChild(e);const r=this.eJoinOperatorPanels.length-1,n=this.joinOperatorId++;this.resetJoinOperatorAnd(i,r,n),this.resetJoinOperatorOr(s,r,n),this.isReadOnly()||(i.onValueChange(this.listener),s.onValueChange(this.listener))}createJoinOperator(e,i,s){const r=this.createManagedBean(new mx);return e.push(r),r.addCssClass("ag-filter-condition-operator"),r.addCssClass(`ag-filter-condition-operator-${s}`),i.appendChild(r.getGui()),r}getDefaultJoinOperator(e){return e==="AND"||e==="OR"?e:"AND"}createFilterListOptions(){const e=this.optionsFactory.getFilterOptions();this.filterListOptions=e.map(i=>typeof i=="string"?this.createBoilerplateListOption(i):this.createCustomListOption(i))}putOptionsIntoDropdown(e){this.filterListOptions.forEach(i=>{e.addOption(i)}),e.setDisabled(this.filterListOptions.length<=1)}createBoilerplateListOption(e){return{value:e,text:this.translate(e)}}createCustomListOption(e){const{displayKey:i}=e,s=this.optionsFactory.getCustomOption(e.displayKey);return{value:i,text:s?this.localeService.getLocaleTextFunc()(s.displayKey,s.displayName):this.translate(i)}}isAllowTwoConditions(){return this.maxNumConditions>=2}createBodyTemplate(){return""}getCssIdentifier(){return"simple-filter"}updateUiVisibility(){const e=this.getJoinOperator();this.updateNumConditions(),this.updateConditionStatusesAndValues(this.lastUiCompletePosition,e)}updateNumConditions(){var e;let i=-1,s=!0;for(let r=0;r<this.getNumConditions();r++)this.isConditionUiComplete(r)?i=r:s=!1;if(this.shouldAddNewConditionAtEnd(s))this.createJoinOperatorPanel(),this.createOption();else{const r=(e=this.lastUiCompletePosition)!=null?e:this.getNumConditions()-2;if(i<r){this.removeConditionsAndOperators(r+1);const n=i+1,o=r-n;o>0&&this.removeConditionsAndOperators(n,o),this.createMissingConditionsAndOperators()}}this.lastUiCompletePosition=i}updateConditionStatusesAndValues(e,i){this.eTypes.forEach((r,n)=>{const o=this.isConditionDisabled(n,e);r.setDisabled(o||this.filterListOptions.length<=1),n===1&&(ng(this.eJoinOperatorPanels[0],o),this.eJoinOperatorsAnd[0].setDisabled(o),this.eJoinOperatorsOr[0].setDisabled(o))}),this.eConditionBodies.forEach((r,n)=>{Qt(r,this.isConditionBodyVisible(n))});const s=(i??this.getJoinOperator())==="OR";this.eJoinOperatorsAnd.forEach((r,n)=>{r.setValue(!s,!0)}),this.eJoinOperatorsOr.forEach((r,n)=>{r.setValue(s,!0)}),this.forEachInput((r,n,o,a)=>{this.setElementDisplayed(r,n<a),this.setElementDisabled(r,this.isConditionDisabled(o,e))}),this.resetPlaceholder()}shouldAddNewConditionAtEnd(e){return e&&this.getNumConditions()<this.maxNumConditions&&!this.isReadOnly()}removeConditionsAndOperators(e,i){if(e>=this.getNumConditions())return;this.removeComponents(this.eTypes,e,i),this.removeElements(this.eConditionBodies,e,i),this.removeValueElements(e,i);const s=Math.max(e-1,0);this.removeElements(this.eJoinOperatorPanels,s,i),this.removeComponents(this.eJoinOperatorsAnd,s,i),this.removeComponents(this.eJoinOperatorsOr,s,i)}removeElements(e,i,s){this.removeItems(e,i,s).forEach(n=>la(n))}removeComponents(e,i,s){this.removeItems(e,i,s).forEach(n=>{la(n.getGui()),this.destroyBean(n)})}removeItems(e,i,s){return s==null?e.splice(i):e.splice(i,s)}afterGuiAttached(e){if(super.afterGuiAttached(e),this.resetPlaceholder(),!(e!=null&&e.suppressFocus))if(this.isReadOnly())this.eFilterBody.focus();else{const i=this.getInputs(0)[0];if(!i)return;i instanceof ca&&i.getInputElement().focus()}}afterGuiDetached(){super.afterGuiDetached();const e=this.getModel();this.resetUiToActiveModel(e);let i=-1,s=-1,r=!1;const n=this.getJoinOperator();for(let a=this.getNumConditions()-1;a>=0;a--)if(this.isConditionUiComplete(a))i===-1&&(i=a,s=a);else{const l=a>=this.numAlwaysVisibleConditions&&!this.isConditionUiComplete(a-1),c=a<i;(l||c)&&(this.removeConditionsAndOperators(a,1),r=!0,c&&s--)}let o=!1;this.getNumConditions()<this.numAlwaysVisibleConditions&&(this.createMissingConditionsAndOperators(),o=!0),this.shouldAddNewConditionAtEnd(s===this.getNumConditions()-1)&&(this.createJoinOperatorPanel(),this.createOption(),o=!0),o&&this.updateConditionStatusesAndValues(s,n),r&&this.updateJoinOperatorsDisabled(),this.lastUiCompletePosition=s}getPlaceholderText(e,i){let s=this.translate(e);if(sx(this.filterPlaceholder)){const r=this.filterPlaceholder,n=this.eTypes[i].getValue(),o=this.translate(n);s=r({filterOptionKey:n,filterOption:o,placeholder:s})}else typeof this.filterPlaceholder=="string"&&(s=this.filterPlaceholder);return s}resetPlaceholder(){const e=this.localeService.getLocaleTextFunc();this.forEachInput((i,s,r,n)=>{if(!(i instanceof ca))return;const o=s===0&&n>1?"inRangeStart":s===0?"filterOoo":"inRangeEnd",a=s===0&&n>1?e("ariaFilterFromValue","Filter from value"):s===0?e("ariaFilterValue","Filter Value"):e("ariaFilterToValue","Filter to Value");i.setInputPlaceholder(this.getPlaceholderText(o,r)),i.setInputAriaLabel(a)})}setElementValue(e,i,s){e instanceof ca&&e.setValue(i!=null?String(i):null,!0)}setElementDisplayed(e,i){e instanceof Te&&Qt(e.getGui(),i)}setElementDisabled(e,i){e instanceof Te&&ng(e.getGui(),i)}attachElementOnChange(e,i){e instanceof ca&&e.onValueChange(i)}forEachInput(e){this.getConditionTypes().forEach((i,s)=>{this.forEachPositionTypeInput(s,i,e)})}forEachPositionInput(e,i){const s=this.getConditionType(e);this.forEachPositionTypeInput(e,s,i)}forEachPositionTypeInput(e,i,s){const r=this.getNumberOfInputs(i),n=this.getInputs(e);for(let o=0;o<n.length;o++){const a=n[o];a!=null&&s(a,o,e,r)}}isConditionDisabled(e,i){return this.isReadOnly()?!0:e===0?!1:e>i+1}isConditionBodyVisible(e){const i=this.getConditionType(e);return this.getNumberOfInputs(i)>0}isConditionUiComplete(e){return!(e>=this.getNumConditions()||this.getConditionType(e)===kp.EMPTY||this.getValues(e).some(s=>s==null))}getNumConditions(){return this.eTypes.length}getUiCompleteConditions(){const e=[];for(let i=0;i<this.getNumConditions();i++)this.isConditionUiComplete(i)&&e.push(this.createCondition(i));return e}createMissingConditionsAndOperators(){if(!this.isReadOnly())for(let e=this.getNumConditions();e<this.numAlwaysVisibleConditions;e++)this.createJoinOperatorPanel(),this.createOption()}resetUiToDefaults(e){return this.removeConditionsAndOperators(this.isReadOnly()?1:this.numAlwaysVisibleConditions),this.eTypes.forEach(i=>this.resetType(i)),this.eJoinOperatorsAnd.forEach((i,s)=>this.resetJoinOperatorAnd(i,s,this.joinOperatorId+s)),this.eJoinOperatorsOr.forEach((i,s)=>this.resetJoinOperatorOr(i,s,this.joinOperatorId+s)),this.joinOperatorId++,this.forEachInput(i=>this.resetInput(i)),this.resetPlaceholder(),this.createMissingConditionsAndOperators(),this.lastUiCompletePosition=null,e||this.onUiChanged(),Ft.resolve()}resetType(e){const s=this.localeService.getLocaleTextFunc()("ariaFilteringOperator","Filtering operator");e.setValue(this.optionsFactory.getDefaultOption(),!0).setAriaLabel(s).setDisabled(this.isReadOnly()||this.filterListOptions.length<=1)}resetJoinOperatorAnd(e,i,s){this.resetJoinOperator(e,i,this.isDefaultOperator("AND"),this.translate("andCondition"),s)}resetJoinOperatorOr(e,i,s){this.resetJoinOperator(e,i,this.isDefaultOperator("OR"),this.translate("orCondition"),s)}resetJoinOperator(e,i,s,r,n){this.updateJoinOperatorDisabled(e.setValue(s,!0).setName(`ag-simple-filter-and-or-${this.getCompId()}-${n}`).setLabel(r),i)}updateJoinOperatorsDisabled(){this.eJoinOperatorsAnd.forEach((e,i)=>this.updateJoinOperatorDisabled(e,i)),this.eJoinOperatorsOr.forEach((e,i)=>this.updateJoinOperatorDisabled(e,i))}updateJoinOperatorDisabled(e,i){e.setDisabled(this.isReadOnly()||i>0)}resetInput(e){this.setElementValue(e,null),this.setElementDisabled(e,this.isReadOnly())}setConditionIntoUi(e,i){const s=this.mapValuesFromModel(e);this.forEachInput((r,n,o,a)=>{o===i&&this.setElementValue(r,s[n]!=null?s[n]:null)})}setValueFromFloatingFilter(e){this.forEachInput((i,s,r,n)=>{this.setElementValue(i,s===0&&r===0?e:null,!0)})}isDefaultOperator(e){return e===this.defaultJoinOperator}addChangedListeners(e,i){this.isReadOnly()||(e.onValueChange(this.listener),this.forEachPositionInput(i,s=>{this.attachElementOnChange(s,this.listener)}))}individualConditionPasses(e,i){const s=this.getCellValue(e.node),r=this.mapValuesFromModel(i),n=this.optionsFactory.getCustomOption(i.type),o=this.evaluateCustomFilter(n,r,s);return o??(s==null?this.evaluateNullValue(i.type):this.evaluateNonNullValue(r,s,i,e))}evaluateCustomFilter(e,i,s){if(e==null)return;const{predicate:r}=e;if(r!=null&&!i.some(n=>n==null))return r(i,s)}isBlank(e){return e==null||typeof e=="string"&&e.trim().length===0}hasInvalidInputs(){return!1}};rn.EMPTY="empty";rn.BLANK="blank";rn.NOT_BLANK="notBlank";rn.EQUALS="equals";rn.NOT_EQUAL="notEqual";rn.LESS_THAN="lessThan";rn.LESS_THAN_OR_EQUAL="lessThanOrEqual";rn.GREATER_THAN="greaterThan";rn.GREATER_THAN_OR_EQUAL="greaterThanOrEqual";rn.IN_RANGE="inRange";rn.CONTAINS="contains";rn.NOT_CONTAINS="notContains";rn.STARTS_WITH="startsWith";rn.ENDS_WITH="endsWith";var Xi=rn,ws=class Ws extends Xi{setParams(e){super.setParams(e),this.scalarFilterParams=e}evaluateNullValue(e){switch(e){case Ws.EQUALS:case Ws.NOT_EQUAL:if(this.scalarFilterParams.includeBlanksInEquals)return!0;break;case Ws.GREATER_THAN:case Ws.GREATER_THAN_OR_EQUAL:if(this.scalarFilterParams.includeBlanksInGreaterThan)return!0;break;case Ws.LESS_THAN:case Ws.LESS_THAN_OR_EQUAL:if(this.scalarFilterParams.includeBlanksInLessThan)return!0;break;case Ws.IN_RANGE:if(this.scalarFilterParams.includeBlanksInRange)return!0;break;case Ws.BLANK:return!0;case Ws.NOT_BLANK:return!1}return!1}evaluateNonNullValue(e,i,s){const r=this.comparator(),n=e[0]!=null?r(e[0],i):0;switch(s.type){case Ws.EQUALS:return n===0;case Ws.NOT_EQUAL:return n!==0;case Ws.GREATER_THAN:return n>0;case Ws.GREATER_THAN_OR_EQUAL:return n>=0;case Ws.LESS_THAN:return n<0;case Ws.LESS_THAN_OR_EQUAL:return n<=0;case Ws.IN_RANGE:{const o=r(e[1],i);return this.scalarFilterParams.inRangeInclusive?n>=0&&o<=0:n>0&&o<0}case Ws.BLANK:return this.isBlank(i);case Ws.NOT_BLANK:return!this.isBlank(i);default:return console.warn('AG Grid: Unexpected type of filter "'+s.type+'", it looks like the filter was configured with incorrect Filter Options'),!0}}},dF=1e3,hF=1/0,qG=class extends _M{constructor(t,e,i){super(e,i),this.dateFilterParams=t}conditionToString(t,e){const{type:i}=t,{numberOfInputs:s}=e||{},r=i==Xi.IN_RANGE||s===2,n=Sn(t.dateFrom),o=Sn(t.dateTo),a=this.dateFilterParams.inRangeFloatingFilterDateFormat;if(r){const l=n!==null?If(n,a):"null",c=o!==null?If(o,a):"null";return`${l}-${c}`}return n!=null?If(n,a):`${i}`}updateParams(t){super.updateParams(t),this.dateFilterParams=t.dateFilterParams}},AM=class XG extends ws{constructor(){super("dateFilter"),this.eConditionPanelsFrom=[],this.eConditionPanelsTo=[],this.dateConditionFromComps=[],this.dateConditionToComps=[],this.minValidYear=dF,this.maxValidYear=hF,this.minValidDate=null,this.maxValidDate=null}afterGuiAttached(e){super.afterGuiAttached(e),this.dateConditionFromComps[0].afterGuiAttached(e)}mapValuesFromModel(e){const{dateFrom:i,dateTo:s,type:r}=e||{};return[i&&Sn(i)||null,s&&Sn(s)||null].slice(0,this.getNumberOfInputs(r))}comparator(){return this.dateFilterParams.comparator?this.dateFilterParams.comparator:this.defaultComparator.bind(this)}defaultComparator(e,i){const s=i;return i==null||s<e?-1:s>e?1:0}setParams(e){this.dateFilterParams=e,super.setParams(e);const i=(s,r)=>{if(e[s]!=null)if(isNaN(e[s]))console.warn(`AG Grid: DateFilter ${s} is not a number`);else return e[s]==null?r:Number(e[s]);return r};this.minValidYear=i("minValidYear",dF),this.maxValidYear=i("maxValidYear",hF),this.minValidYear>this.maxValidYear&&console.warn("AG Grid: DateFilter minValidYear should be <= maxValidYear"),e.minValidDate?this.minValidDate=e.minValidDate instanceof Date?e.minValidDate:Sn(e.minValidDate):this.minValidDate=null,e.maxValidDate?this.maxValidDate=e.maxValidDate instanceof Date?e.maxValidDate:Sn(e.maxValidDate):this.maxValidDate=null,this.minValidDate&&this.maxValidDate&&this.minValidDate>this.maxValidDate&&console.warn("AG Grid: DateFilter minValidDate should be <= maxValidDate"),this.filterModelFormatter=new qG(this.dateFilterParams,this.localeService,this.optionsFactory)}createDateCompWrapper(e){const i=new jG(this.getContext(),this.userComponentFactory,{onDateChanged:()=>this.onUiChanged(),filterParams:this.dateFilterParams},e);return this.addDestroyFunc(()=>i.destroy()),i}setElementValue(e,i){e.setDate(i)}setElementDisplayed(e,i){e.setDisplayed(i)}setElementDisabled(e,i){e.setDisabled(i)}getDefaultFilterOptions(){return XG.DEFAULT_FILTER_OPTIONS}createValueElement(){const i=this.gos.getDocument().createElement("div");return i.classList.add("ag-filter-body"),this.createFromToElement(i,this.eConditionPanelsFrom,this.dateConditionFromComps,"from"),this.createFromToElement(i,this.eConditionPanelsTo,this.dateConditionToComps,"to"),i}createFromToElement(e,i,s,r){const o=this.gos.getDocument().createElement("div");o.classList.add(`ag-filter-${r}`),o.classList.add(`ag-filter-date-${r}`),i.push(o),e.appendChild(o),s.push(this.createDateCompWrapper(o))}removeValueElements(e,i){this.removeDateComps(this.dateConditionFromComps,e,i),this.removeDateComps(this.dateConditionToComps,e,i),this.removeItems(this.eConditionPanelsFrom,e,i),this.removeItems(this.eConditionPanelsTo,e,i)}removeDateComps(e,i,s){this.removeItems(e,i,s).forEach(n=>n.destroy())}isValidDateValue(e){if(e===null)return!1;if(this.minValidDate){if(e<this.minValidDate)return!1}else if(e.getUTCFullYear()<this.minValidYear)return!1;if(this.maxValidDate){if(e>this.maxValidDate)return!1}else if(e.getUTCFullYear()>this.maxValidYear)return!1;return!0}isConditionUiComplete(e){if(!super.isConditionUiComplete(e))return!1;let i=!0;return this.forEachInput((s,r,n,o)=>{n!==e||!i||r>=o||(i=i&&this.isValidDateValue(s.getDate()))}),i}areSimpleModelsEqual(e,i){return e.dateFrom===i.dateFrom&&e.dateTo===i.dateTo&&e.type===i.type}getFilterType(){return"date"}createCondition(e){const i=this.getConditionType(e),s={},r=this.getValues(e);return r.length>0&&(s.dateFrom=Fo(r[0])),r.length>1&&(s.dateTo=Fo(r[1])),it({dateFrom:null,dateTo:null,filterType:this.getFilterType(),type:i},s)}resetPlaceholder(){const e=this.localeService.getLocaleTextFunc(),i=this.translate("dateFormatOoo"),s=e("ariaFilterValue","Filter Value");this.forEachInput(r=>{r.setInputPlaceholder(i),r.setInputAriaLabel(s)})}getInputs(e){return e>=this.dateConditionFromComps.length?[null,null]:[this.dateConditionFromComps[e],this.dateConditionToComps[e]]}getValues(e){const i=[];return this.forEachPositionInput(e,(s,r,n,o)=>{r<o&&i.push(s.getDate())}),i}translate(e){return e===ws.LESS_THAN?super.translate("before"):e===ws.GREATER_THAN?super.translate("after"):super.translate(e)}getModelAsString(e){var i;return(i=this.filterModelFormatter.getModelAsString(e))!=null?i:""}};AM.DEFAULT_FILTER_OPTIONS=[ws.EQUALS,ws.NOT_EQUAL,ws.LESS_THAN,ws.GREATER_THAN,ws.IN_RANGE,ws.BLANK,ws.NOT_BLANK];z([W("userComponentFactory")],AM.prototype,"userComponentFactory",2);var RM=AM,MM=class extends Te{getDefaultDebounceMs(){return 0}destroy(){super.destroy()}isEventFromFloatingFilter(t){return t&&t.afterFloatingFilter}isEventFromDataChange(t){return t==null?void 0:t.afterDataChange}getLastType(){return this.lastType}isReadOnly(){return this.readOnly}setLastTypeFromModel(t){if(!t){this.lastType=this.optionsFactory.getDefaultOption();return}const e=t.operator;let i;e?i=t.conditions[0]:i=t,this.lastType=i.type}canWeEditAfterModelFromParentFilter(t){if(!t)return this.isTypeEditable(this.lastType);if(t.operator)return!1;const i=t;return this.isTypeEditable(i.type)}init(t){this.setSimpleParams(t,!1)}setSimpleParams(t,e=!0){this.optionsFactory=new UG,this.optionsFactory.init(t.filterParams,this.getDefaultFilterOptions()),e||(this.lastType=this.optionsFactory.getDefaultOption()),this.readOnly=!!t.filterParams.readOnly;const i=this.isTypeEditable(this.optionsFactory.getDefaultOption());this.setEditable(i)}onParamsUpdated(t){this.refresh(t)}refresh(t){this.setSimpleParams(t)}doesFilterHaveSingleInput(t){const e=this.optionsFactory.getCustomOption(t),{numberOfInputs:i}=e||{};return i==null||i==1}isTypeEditable(t){const e=[Xi.IN_RANGE,Xi.EMPTY,Xi.BLANK,Xi.NOT_BLANK];return!!t&&!this.isReadOnly()&&this.doesFilterHaveSingleInput(t)&&e.indexOf(t)<0}getAriaLabel(t){const e=this.columnModel.getDisplayNameForColumn(t.column,"header",!0),i=this.localeService.getLocaleTextFunc();return`${e} ${i("ariaFilterInput","Filter Input")}`}};z([W("columnModel")],MM.prototype,"columnModel",2);var vx=class extends MM{constructor(){super(`
            <div class="ag-floating-filter-input" role="presentation">
                <ag-input-text-field ref="eReadOnlyText"></ag-input-text-field>
                <div ref="eDateWrapper" style="display: flex;"></div>
            </div>`)}getDefaultFilterOptions(){return RM.DEFAULT_FILTER_OPTIONS}init(t){super.init(t),this.params=t,this.filterParams=t.filterParams,this.createDateComponent(),this.filterModelFormatter=new qG(this.filterParams,this.localeService,this.optionsFactory);const e=this.localeService.getLocaleTextFunc();this.eReadOnlyText.setDisabled(!0).setInputAriaLabel(e("ariaDateFilterInput","Date Filter Input"))}onParamsUpdated(t){this.refresh(t)}refresh(t){super.refresh(t),this.params=t,this.filterParams=t.filterParams,this.updateDateComponent(),this.filterModelFormatter.updateParams({optionsFactory:this.optionsFactory,dateFilterParams:this.filterParams}),this.updateCompOnModelChange(t.currentParentModel())}updateCompOnModelChange(t){const e=!this.isReadOnly()&&this.canWeEditAfterModelFromParentFilter(t);if(this.setEditable(e),e){if(t){const i=t;this.dateComp.setDate(Sn(i.dateFrom))}else this.dateComp.setDate(null);this.eReadOnlyText.setValue("")}else this.eReadOnlyText.setValue(this.filterModelFormatter.getModelAsString(t)),this.dateComp.setDate(null)}setEditable(t){Qt(this.eDateWrapper,t),Qt(this.eReadOnlyText.getGui(),!t)}onParentModelChanged(t,e){this.isEventFromFloatingFilter(e)||this.isEventFromDataChange(e)||(super.setLastTypeFromModel(t),this.updateCompOnModelChange(t))}onDateChanged(){const t=this.dateComp.getDate(),e=Fo(t);this.params.parentFilterInstance(i=>{if(i){const s=Sn(e);i.onFloatingFilterChanged(this.getLastType()||null,s)}})}getDateComponentParams(){const t=Au.getDebounceMs(this.params.filterParams,this.getDefaultDebounceMs());return{onDateChanged:qr(this.onDateChanged.bind(this),t),filterParams:this.params.column.getColDef().filterParams}}createDateComponent(){this.dateComp=new jG(this.getContext(),this.userComponentFactory,this.getDateComponentParams(),this.eDateWrapper,t=>{t.setInputAriaLabel(this.getAriaLabel(this.params))}),this.addDestroyFunc(()=>this.dateComp.destroy())}updateDateComponent(){const t=this.gos.addGridCommonParams(this.getDateComponentParams());this.dateComp.updateParams(t)}getFilterModelFormatter(){return this.filterModelFormatter}};z([W("userComponentFactory")],vx.prototype,"userComponentFactory",2);z([pe("eReadOnlyText")],vx.prototype,"eReadOnlyText",2);z([pe("eDateWrapper")],vx.prototype,"eDateWrapper",2);var ZG=class extends Te{constructor(){super(`
            <div class="ag-filter-filter">
                <ag-input-text-field class="ag-date-filter" ref="eDateInput"></ag-input-text-field>
            </div>`)}destroy(){super.destroy()}init(t){this.params=t,this.setParams(t);const e=this.eDateInput.getInputElement();this.addManagedListener(e,"mousedown",()=>{this.eDateInput.isDisabled()||this.usingSafariDatePicker||e.focus()}),this.addManagedListener(e,"input",i=>{i.target===this.gos.getActiveDomElement()&&(this.eDateInput.isDisabled()||this.params.onDateChanged())})}setParams(t){const e=this.eDateInput.getInputElement(),i=this.shouldUseBrowserDatePicker(t);this.usingSafariDatePicker=i&&ol(),e.type=i?"date":"text";const{minValidYear:s,maxValidYear:r,minValidDate:n,maxValidDate:o}=t.filterParams||{};if(n&&s&&ot("DateFilter should not have both minValidDate and minValidYear parameters set at the same time! minValidYear will be ignored."),o&&r&&ot("DateFilter should not have both maxValidDate and maxValidYear parameters set at the same time! maxValidYear will be ignored."),n&&o){const[a,l]=[n,o].map(c=>c instanceof Date?c:Sn(c));a&&l&&a.getTime()>l.getTime()&&ot("DateFilter parameter minValidDate should always be lower than or equal to parameter maxValidDate.")}n?n instanceof Date?e.min=If(n):e.min=n:s&&(e.min=`${s}-01-01`),o?o instanceof Date?e.max=If(o):e.max=o:r&&(e.max=`${r}-12-31`)}onParamsUpdated(t){this.refresh(t)}refresh(t){this.params=t,this.setParams(t)}getDate(){return Sn(this.eDateInput.getValue())}setDate(t){this.eDateInput.setValue(Fo(t,!1))}setInputPlaceholder(t){this.eDateInput.setInputPlaceholder(t)}setInputAriaLabel(t){this.eDateInput.setAriaLabel(t)}setDisabled(t){this.eDateInput.setDisabled(t)}afterGuiAttached(t){(!t||!t.suppressFocus)&&this.eDateInput.getInputElement().focus()}shouldUseBrowserDatePicker(t){return t.filterParams&&t.filterParams.browserDatePicker!=null?t.filterParams.browserDatePicker:ux()||aM()||ol()&&oM()>=14.1}};z([pe("eDateInput")],ZG.prototype,"eDateInput",2);var vl=class extends ca{constructor(t,e="ag-text-field",i="text"){super(t,e,i)}postConstruct(){super.postConstruct(),this.config.allowedCharPattern&&this.preventDisallowedCharacters()}setValue(t,e){return this.eInput.value!==t&&(this.eInput.value=Pe(t)?t:""),super.setValue(t,e)}setStartValue(t){this.setValue(t,!0)}preventDisallowedCharacters(){const t=new RegExp(`[${this.config.allowedCharPattern}]`),e=i=>{hx(i)&&i.key&&!t.test(i.key)&&i.preventDefault()};this.addManagedListener(this.eInput,"keydown",e),this.addManagedListener(this.eInput,"paste",i=>{var s;const r=(s=i.clipboardData)==null?void 0:s.getData("text");r&&r.split("").some(n=>!t.test(n))&&i.preventDefault()})}},_C=class extends vl{constructor(t){super(t,"ag-number-field","number")}postConstruct(){super.postConstruct(),this.addManagedListener(this.eInput,"blur",()=>{const r=parseFloat(this.eInput.value),n=isNaN(r)?"":this.normalizeValue(r.toString());this.value!==n&&this.setValue(n)}),this.addManagedListener(this.eInput,"wheel",this.onWheel.bind(this)),this.eInput.step="any";const{precision:t,min:e,max:i,step:s}=this.config;typeof t=="number"&&this.setPrecision(t),typeof e=="number"&&this.setMin(e),typeof i=="number"&&this.setMax(i),typeof s=="number"&&this.setStep(s)}onWheel(t){this.gos.getActiveDomElement()===this.eInput&&t.preventDefault()}normalizeValue(t){if(t==="")return"";this.precision!=null&&(t=this.adjustPrecision(t));const e=parseFloat(t);return this.min!=null&&e<this.min?t=this.min.toString():this.max!=null&&e>this.max&&(t=this.max.toString()),t}adjustPrecision(t,e){if(this.precision==null)return t;if(e){const s=parseFloat(t).toFixed(this.precision);return parseFloat(s).toString()}const i=String(t).split(".");if(i.length>1){if(i[1].length<=this.precision)return t;if(this.precision>0)return`${i[0]}.${i[1].slice(0,this.precision)}`}return i[0]}setMin(t){return this.min===t?this:(this.min=t,il(this.eInput,"min",t),this)}setMax(t){return this.max===t?this:(this.max=t,il(this.eInput,"max",t),this)}setPrecision(t){return this.precision=t,this}setStep(t){return this.step===t?this:(this.step=t,il(this.eInput,"step",t),this)}setValue(t,e){return this.setValueOrInputValue(i=>super.setValue(i,e),()=>this,t)}setStartValue(t){return this.setValueOrInputValue(e=>super.setValue(e,!0),e=>{this.eInput.value=e},t)}setValueOrInputValue(t,e,i){if(Pe(i)){let s=this.isScientificNotation(i);if(s&&this.eInput.validity.valid)return t(i);if(!s){i=this.adjustPrecision(i);const r=this.normalizeValue(i);s=i!=r}if(s)return e(i)}return t(i)}getValue(){if(!this.eInput.validity.valid)return;const t=this.eInput.value;return this.isScientificNotation(t)?this.adjustPrecision(t,!0):super.getValue()}isScientificNotation(t){return typeof t=="string"&&t.includes("e")}},JG=class extends _M{conditionToString(t,e){const{numberOfInputs:i}=e||{};return t.type==Xi.IN_RANGE||i===2?`${this.formatValue(t.filter)}-${this.formatValue(t.filterTo)}`:t.filter!=null?this.formatValue(t.filter):`${t.type}`}};function P_(t){const{allowedCharPattern:e}=t??{};return e??null}var QG=class e4 extends ws{constructor(){super("numberFilter"),this.eValuesFrom=[],this.eValuesTo=[]}refresh(e){return this.numberFilterParams.allowedCharPattern!==e.allowedCharPattern?!1:super.refresh(e)}mapValuesFromModel(e){const{filter:i,filterTo:s,type:r}=e||{};return[this.processValue(i),this.processValue(s)].slice(0,this.getNumberOfInputs(r))}getDefaultDebounceMs(){return 500}comparator(){return(e,i)=>e===i?0:e<i?1:-1}setParams(e){this.numberFilterParams=e,super.setParams(e),this.filterModelFormatter=new JG(this.localeService,this.optionsFactory,this.numberFilterParams.numberFormatter)}getDefaultFilterOptions(){return e4.DEFAULT_FILTER_OPTIONS}setElementValue(e,i,s){const r=!s&&this.numberFilterParams.numberFormatter?this.numberFilterParams.numberFormatter(i??null):i;super.setElementValue(e,r)}createValueElement(){const e=P_(this.numberFilterParams),i=document.createElement("div");return i.classList.add("ag-filter-body"),as(i,"presentation"),this.createFromToElement(i,this.eValuesFrom,"from",e),this.createFromToElement(i,this.eValuesTo,"to",e),i}createFromToElement(e,i,s,r){const n=this.createManagedBean(r?new vl({allowedCharPattern:r}):new _C);n.addCssClass(`ag-filter-${s}`),n.addCssClass("ag-filter-filter"),i.push(n),e.appendChild(n.getGui())}removeValueElements(e,i){this.removeComponents(this.eValuesFrom,e,i),this.removeComponents(this.eValuesTo,e,i)}getValues(e){const i=[];return this.forEachPositionInput(e,(s,r,n,o)=>{r<o&&i.push(this.processValue(this.stringToFloat(s.getValue())))}),i}areSimpleModelsEqual(e,i){return e.filter===i.filter&&e.filterTo===i.filterTo&&e.type===i.type}getFilterType(){return"number"}processValue(e){return e==null||isNaN(e)?null:e}stringToFloat(e){if(typeof e=="number")return e;let i=tl(e);return i!=null&&i.trim()===""&&(i=null),this.numberFilterParams.numberParser?this.numberFilterParams.numberParser(i):i==null||i.trim()==="-"?null:parseFloat(i)}createCondition(e){const i=this.getConditionType(e),s={filterType:this.getFilterType(),type:i},r=this.getValues(e);return r.length>0&&(s.filter=r[0]),r.length>1&&(s.filterTo=r[1]),s}getInputs(e){return e>=this.eValuesFrom.length?[null,null]:[this.eValuesFrom[e],this.eValuesTo[e]]}getModelAsString(e){var i;return(i=this.filterModelFormatter.getModelAsString(e))!=null?i:""}hasInvalidInputs(){let e=!1;return this.forEachInput(i=>{if(!i.getInputElement().validity.valid){e=!0;return}}),e}};QG.DEFAULT_FILTER_OPTIONS=[ws.EQUALS,ws.NOT_EQUAL,ws.GREATER_THAN,ws.GREATER_THAN_OR_EQUAL,ws.LESS_THAN,ws.LESS_THAN_OR_EQUAL,ws.IN_RANGE,ws.BLANK,ws.NOT_BLANK];var DM=QG,t4=class extends _M{conditionToString(t,e){const{numberOfInputs:i}=e||{};return t.type==Xi.IN_RANGE||i===2?`${t.filter}-${t.filterTo}`:t.filter!=null?`${t.filter}`:`${t.type}`}},ra=class Np extends Xi{constructor(){super("textFilter"),this.eValuesFrom=[],this.eValuesTo=[]}static trimInput(e){const i=e&&e.trim();return i===""?e:i}getDefaultDebounceMs(){return 500}setParams(e){this.textFilterParams=e,super.setParams(e),this.matcher=this.getTextMatcher(),this.formatter=this.textFilterParams.textFormatter||(this.textFilterParams.caseSensitive?Np.DEFAULT_FORMATTER:Np.DEFAULT_LOWERCASE_FORMATTER),this.filterModelFormatter=new t4(this.localeService,this.optionsFactory)}getTextMatcher(){const e=this.textFilterParams.textCustomComparator;return e?(Q.warnOnce("textCustomComparator is deprecated, use textMatcher instead."),({filterOption:i,value:s,filterText:r})=>e(i,s,r)):this.textFilterParams.textMatcher||Np.DEFAULT_MATCHER}createCondition(e){const i=this.getConditionType(e),s={filterType:this.getFilterType(),type:i},r=this.getValuesWithSideEffects(e,!0);return r.length>0&&(s.filter=r[0]),r.length>1&&(s.filterTo=r[1]),s}getFilterType(){return"text"}areSimpleModelsEqual(e,i){return e.filter===i.filter&&e.filterTo===i.filterTo&&e.type===i.type}getInputs(e){return e>=this.eValuesFrom.length?[null,null]:[this.eValuesFrom[e],this.eValuesTo[e]]}getValues(e){return this.getValuesWithSideEffects(e,!1)}getValuesWithSideEffects(e,i){const s=[];return this.forEachPositionInput(e,(r,n,o,a)=>{var l;if(n<a){let c=tl(r.getValue());i&&this.textFilterParams.trimInput&&(c=(l=Np.trimInput(c))!=null?l:null,r.setValue(c,!0)),s.push(c)}}),s}getDefaultFilterOptions(){return Np.DEFAULT_FILTER_OPTIONS}createValueElement(){const e=document.createElement("div");return e.classList.add("ag-filter-body"),as(e,"presentation"),this.createFromToElement(e,this.eValuesFrom,"from"),this.createFromToElement(e,this.eValuesTo,"to"),e}createFromToElement(e,i,s){const r=this.createManagedBean(new vl);r.addCssClass(`ag-filter-${s}`),r.addCssClass("ag-filter-filter"),i.push(r),e.appendChild(r.getGui())}removeValueElements(e,i){this.removeComponents(this.eValuesFrom,e,i),this.removeComponents(this.eValuesTo,e,i)}mapValuesFromModel(e){const{filter:i,filterTo:s,type:r}=e||{};return[i||null,s||null].slice(0,this.getNumberOfInputs(r))}evaluateNullValue(e){const i=[Xi.NOT_EQUAL,Xi.NOT_CONTAINS,Xi.BLANK];return e?i.indexOf(e)>=0:!1}evaluateNonNullValue(e,i,s,r){const n=e.map(f=>this.formatter(f))||[],o=this.formatter(i),{api:a,colDef:l,column:c,columnApi:u,context:d,textFormatter:h}=this.textFilterParams;if(s.type===Xi.BLANK)return this.isBlank(i);if(s.type===Xi.NOT_BLANK)return!this.isBlank(i);const p={api:a,colDef:l,column:c,columnApi:u,context:d,node:r.node,data:r.data,filterOption:s.type,value:o,textFormatter:h};return n.some(f=>this.matcher($i(it({},p),{filterText:f})))}getModelAsString(e){var i;return(i=this.filterModelFormatter.getModelAsString(e))!=null?i:""}};ra.DEFAULT_FILTER_OPTIONS=[Xi.CONTAINS,Xi.NOT_CONTAINS,Xi.EQUALS,Xi.NOT_EQUAL,Xi.STARTS_WITH,Xi.ENDS_WITH,Xi.BLANK,Xi.NOT_BLANK];ra.DEFAULT_FORMATTER=t=>t;ra.DEFAULT_LOWERCASE_FORMATTER=t=>t==null?null:t.toString().toLowerCase();ra.DEFAULT_MATCHER=({filterOption:t,value:e,filterText:i})=>{if(i==null)return!1;switch(t){case ra.CONTAINS:return e.indexOf(i)>=0;case ra.NOT_CONTAINS:return e.indexOf(i)<0;case ra.EQUALS:return e===i;case ra.NOT_EQUAL:return e!=i;case ra.STARTS_WITH:return e.indexOf(i)===0;case ra.ENDS_WITH:const s=e.lastIndexOf(i);return s>=0&&s===e.length-i.length;default:return!1}};var og=ra,i4=class extends ye{constructor(t){super(),this.params=t,this.valueChangedListener=()=>{}}setupGui(t){var e;this.eFloatingFilterTextInput=this.createManagedBean(new vl((e=this.params)==null?void 0:e.config));const i=this.eFloatingFilterTextInput.getGui();t.appendChild(i),this.addManagedListener(i,"input",s=>this.valueChangedListener(s)),this.addManagedListener(i,"keydown",s=>this.valueChangedListener(s))}setEditable(t){this.eFloatingFilterTextInput.setDisabled(!t)}setAutoComplete(t){this.eFloatingFilterTextInput.setAutoComplete(t)}getValue(){return this.eFloatingFilterTextInput.getValue()}setValue(t,e){this.eFloatingFilterTextInput.setValue(t,e)}setValueChangedListener(t){this.valueChangedListener=t}setParams(t){this.setAriaLabel(t.ariaLabel),t.autoComplete!==void 0&&this.setAutoComplete(t.autoComplete)}setAriaLabel(t){this.eFloatingFilterTextInput.setInputAriaLabel(t)}},yx=class extends MM{postConstruct(){this.setTemplate(`
            <div class="ag-floating-filter-input" role="presentation" ref="eFloatingFilterInputContainer"></div>
        `)}getDefaultDebounceMs(){return 500}onParentModelChanged(t,e){this.isEventFromFloatingFilter(e)||this.isEventFromDataChange(e)||(this.setLastTypeFromModel(t),this.setEditable(this.canWeEditAfterModelFromParentFilter(t)),this.floatingFilterInputService.setValue(this.getFilterModelFormatter().getModelAsString(t)))}init(t){this.setupFloatingFilterInputService(t),super.init(t),this.setTextInputParams(t)}setupFloatingFilterInputService(t){this.floatingFilterInputService=this.createFloatingFilterInputService(t),this.floatingFilterInputService.setupGui(this.eFloatingFilterInputContainer)}setTextInputParams(t){var e;this.params=t;const i=(e=t.browserAutoComplete)!=null?e:!1;if(this.floatingFilterInputService.setParams({ariaLabel:this.getAriaLabel(t),autoComplete:i}),this.applyActive=Au.isUseApplyButton(this.params.filterParams),!this.isReadOnly()){const s=Au.getDebounceMs(this.params.filterParams,this.getDefaultDebounceMs()),r=qr(this.syncUpWithParentFilter.bind(this),s);this.floatingFilterInputService.setValueChangedListener(r)}}onParamsUpdated(t){this.refresh(t)}refresh(t){super.refresh(t),this.setTextInputParams(t)}recreateFloatingFilterInputService(t){const e=this.floatingFilterInputService.getValue();Cs(this.eFloatingFilterInputContainer),this.destroyBean(this.floatingFilterInputService),this.setupFloatingFilterInputService(t),this.floatingFilterInputService.setValue(e,!0)}syncUpWithParentFilter(t){const e=t.key===ce.ENTER;if(this.applyActive&&!e)return;let i=this.floatingFilterInputService.getValue();this.params.filterParams.trimInput&&(i=og.trimInput(i),this.floatingFilterInputService.setValue(i,!0)),this.params.parentFilterInstance(s=>{s&&s.onFloatingFilterChanged(this.getLastType()||null,i||null)})}setEditable(t){this.floatingFilterInputService.setEditable(t)}};z([pe("eFloatingFilterInputContainer")],yx.prototype,"eFloatingFilterInputContainer",2);z([de],yx.prototype,"postConstruct",1);var yK=class extends ye{constructor(){super(...arguments),this.valueChangedListener=()=>{},this.numberInputActive=!0}setupGui(t){this.eFloatingFilterNumberInput=this.createManagedBean(new _C),this.eFloatingFilterTextInput=this.createManagedBean(new vl),this.eFloatingFilterTextInput.setDisabled(!0);const e=this.eFloatingFilterNumberInput.getGui(),i=this.eFloatingFilterTextInput.getGui();t.appendChild(e),t.appendChild(i),this.setupListeners(e,s=>this.valueChangedListener(s)),this.setupListeners(i,s=>this.valueChangedListener(s))}setEditable(t){this.numberInputActive=t,this.eFloatingFilterNumberInput.setDisplayed(this.numberInputActive),this.eFloatingFilterTextInput.setDisplayed(!this.numberInputActive)}setAutoComplete(t){this.eFloatingFilterNumberInput.setAutoComplete(t),this.eFloatingFilterTextInput.setAutoComplete(t)}getValue(){return this.getActiveInputElement().getValue()}setValue(t,e){this.getActiveInputElement().setValue(t,e)}getActiveInputElement(){return this.numberInputActive?this.eFloatingFilterNumberInput:this.eFloatingFilterTextInput}setValueChangedListener(t){this.valueChangedListener=t}setupListeners(t,e){this.addManagedListener(t,"input",e),this.addManagedListener(t,"keydown",e)}setParams(t){this.setAriaLabel(t.ariaLabel),t.autoComplete!==void 0&&this.setAutoComplete(t.autoComplete)}setAriaLabel(t){this.eFloatingFilterNumberInput.setInputAriaLabel(t),this.eFloatingFilterTextInput.setInputAriaLabel(t)}},CK=class extends yx{init(t){var e;super.init(t),this.filterModelFormatter=new JG(this.localeService,this.optionsFactory,(e=t.filterParams)==null?void 0:e.numberFormatter)}onParamsUpdated(t){this.refresh(t)}refresh(t){P_(t.filterParams)!==this.allowedCharPattern&&this.recreateFloatingFilterInputService(t),super.refresh(t),this.filterModelFormatter.updateParams({optionsFactory:this.optionsFactory})}getDefaultFilterOptions(){return DM.DEFAULT_FILTER_OPTIONS}getFilterModelFormatter(){return this.filterModelFormatter}createFloatingFilterInputService(t){return this.allowedCharPattern=P_(t.filterParams),this.allowedCharPattern?this.createManagedBean(new i4({config:{allowedCharPattern:this.allowedCharPattern}})):this.createManagedBean(new yK)}},s4=class extends yx{init(t){super.init(t),this.filterModelFormatter=new t4(this.localeService,this.optionsFactory)}onParamsUpdated(t){this.refresh(t)}refresh(t){super.refresh(t),this.filterModelFormatter.updateParams({optionsFactory:this.optionsFactory})}getDefaultFilterOptions(){return og.DEFAULT_FILTER_OPTIONS}getFilterModelFormatter(){return this.filterModelFormatter}createFloatingFilterInputService(){return this.createManagedBean(new i4)}},AC=class iv{constructor(e,i=!1){this.destroyFuncs=[],this.touching=!1,this.eventService=new In,this.eElement=e,this.preventMouseClick=i;const s=this.onTouchStart.bind(this),r=this.onTouchMove.bind(this),n=this.onTouchEnd.bind(this);this.eElement.addEventListener("touchstart",s,{passive:!0}),this.eElement.addEventListener("touchmove",r,{passive:!0}),this.eElement.addEventListener("touchend",n,{passive:!1}),this.destroyFuncs.push(()=>{this.eElement.removeEventListener("touchstart",s,{passive:!0}),this.eElement.removeEventListener("touchmove",r,{passive:!0}),this.eElement.removeEventListener("touchend",n,{passive:!1})})}getActiveTouch(e){for(let i=0;i<e.length;i++)if(e[i].identifier===this.touchStart.identifier)return e[i];return null}addEventListener(e,i){this.eventService.addEventListener(e,i)}removeEventListener(e,i){this.eventService.removeEventListener(e,i)}onTouchStart(e){if(this.touching)return;this.touchStart=e.touches[0],this.touching=!0,this.moved=!1;const i=this.touchStart;window.setTimeout(()=>{const s=this.touchStart===i;if(this.touching&&s&&!this.moved){this.moved=!0;const r={type:iv.EVENT_LONG_TAP,touchStart:this.touchStart,touchEvent:e};this.eventService.dispatchEvent(r)}},500)}onTouchMove(e){if(!this.touching)return;const i=this.getActiveTouch(e.touches);if(!i)return;!SM(i,this.touchStart,4)&&(this.moved=!0)}onTouchEnd(e){if(this.touching){if(!this.moved){const i={type:iv.EVENT_TAP,touchStart:this.touchStart};this.eventService.dispatchEvent(i),this.checkForDoubleTap()}this.preventMouseClick&&e.cancelable&&e.preventDefault(),this.touching=!1}}checkForDoubleTap(){const e=new Date().getTime();if(this.lastTapTime&&this.lastTapTime>0)if(e-this.lastTapTime>iv.DOUBLE_TAP_MILLIS){const s={type:iv.EVENT_DOUBLE_TAP,touchStart:this.touchStart};this.eventService.dispatchEvent(s),this.lastTapTime=null}else this.lastTapTime=e;else this.lastTapTime=e}destroy(){this.destroyFuncs.forEach(e=>e())}};AC.EVENT_TAP="tap";AC.EVENT_DOUBLE_TAP="doubleTap";AC.EVENT_LONG_TAP="longTap";AC.DOUBLE_TAP_MILLIS=500;var Es=AC,_c=class r4 extends Te{constructor(e){super(),e||this.setTemplate(r4.TEMPLATE)}attachCustomElements(e,i,s,r,n){this.eSortOrder=e,this.eSortAsc=i,this.eSortDesc=s,this.eSortMixed=r,this.eSortNone=n}setupSort(e,i=!1){this.column=e,this.suppressOrder=i,this.setupMultiSortIndicator(),!(!this.column.isSortable()&&!this.column.getColDef().showRowGroup)&&(this.addInIcon("sortAscending",this.eSortAsc,e),this.addInIcon("sortDescending",this.eSortDesc,e),this.addInIcon("sortUnSort",this.eSortNone,e),this.addManagedPropertyListener("unSortIcon",()=>this.updateIcons()),this.addManagedListener(this.eventService,K.EVENT_NEW_COLUMNS_LOADED,()=>this.updateIcons()),this.addManagedListener(this.eventService,K.EVENT_SORT_CHANGED,()=>this.onSortChanged()),this.addManagedListener(this.eventService,K.EVENT_COLUMN_ROW_GROUP_CHANGED,()=>this.onSortChanged()),this.onSortChanged())}addInIcon(e,i,s){if(i==null)return;const r=ts(e,this.gos,s);r&&i.appendChild(r)}onSortChanged(){this.updateIcons(),this.suppressOrder||this.updateSortOrder()}updateIcons(){const e=this.sortController.getDisplaySortForColumn(this.column);if(this.eSortAsc){const i=e==="asc";Qt(this.eSortAsc,i,{skipAriaHidden:!0})}if(this.eSortDesc){const i=e==="desc";Qt(this.eSortDesc,i,{skipAriaHidden:!0})}if(this.eSortNone){const i=!this.column.getColDef().unSortIcon&&!this.gos.get("unSortIcon"),s=e==null;Qt(this.eSortNone,!i&&s,{skipAriaHidden:!0})}}setupMultiSortIndicator(){this.addInIcon("sortUnSort",this.eSortMixed,this.column);const e=this.column.getColDef().showRowGroup;this.gos.isColumnsSortingCoupledToGroup()&&e&&(this.addManagedListener(this.eventService,K.EVENT_SORT_CHANGED,()=>this.updateMultiSortIndicator()),this.addManagedListener(this.eventService,K.EVENT_COLUMN_ROW_GROUP_CHANGED,()=>this.updateMultiSortIndicator()),this.updateMultiSortIndicator())}updateMultiSortIndicator(){if(this.eSortMixed){const e=this.sortController.getDisplaySortForColumn(this.column)==="mixed";Qt(this.eSortMixed,e,{skipAriaHidden:!0})}}updateSortOrder(){var e;if(!this.eSortOrder)return;const i=this.sortController.getColumnsWithSortingOrdered(),s=(e=this.sortController.getDisplaySortIndexForColumn(this.column))!=null?e:-1,r=i.some(o=>{var a;return(a=this.sortController.getDisplaySortIndexForColumn(o))!=null?a:!1}),n=s>=0&&r;Qt(this.eSortOrder,n,{skipAriaHidden:!0}),s>=0?this.eSortOrder.textContent=(s+1).toString():Cs(this.eSortOrder)}};_c.TEMPLATE=`<span class="ag-sort-indicator-container">
            <span ref="eSortOrder" class="ag-sort-indicator-icon ag-sort-order ag-hidden" aria-hidden="true"></span>
            <span ref="eSortAsc" class="ag-sort-indicator-icon ag-sort-ascending-icon ag-hidden" aria-hidden="true"></span>
            <span ref="eSortDesc" class="ag-sort-indicator-icon ag-sort-descending-icon ag-hidden" aria-hidden="true"></span>
            <span ref="eSortMixed" class="ag-sort-indicator-icon ag-sort-mixed-icon ag-hidden" aria-hidden="true"></span>
            <span ref="eSortNone" class="ag-sort-indicator-icon ag-sort-none-icon ag-hidden" aria-hidden="true"></span>
        </span>`;z([pe("eSortOrder")],_c.prototype,"eSortOrder",2);z([pe("eSortAsc")],_c.prototype,"eSortAsc",2);z([pe("eSortDesc")],_c.prototype,"eSortDesc",2);z([pe("eSortMixed")],_c.prototype,"eSortMixed",2);z([pe("eSortNone")],_c.prototype,"eSortNone",2);z([W("columnModel")],_c.prototype,"columnModel",2);z([W("sortController")],_c.prototype,"sortController",2);var Cx=_c,Vr=class n4 extends Te{constructor(){super(...arguments),this.lastMovingChanged=0}destroy(){super.destroy()}refresh(e){const i=this.params;return this.params=e,this.workOutTemplate()!=this.currentTemplate||this.workOutShowMenu()!=this.currentShowMenu||this.workOutSort()!=this.currentSort||this.shouldSuppressMenuHide()!=this.currentSuppressMenuHide||i.enableFilterButton!=e.enableFilterButton||i.enableFilterIcon!=e.enableFilterIcon?!1:(this.setDisplayName(e),!0)}workOutTemplate(){var e;let i=(e=this.params.template)!=null?e:n4.TEMPLATE;return i=i&&i.trim?i.trim():i,i}init(e){this.params=e,this.currentTemplate=this.workOutTemplate(),this.setTemplate(this.currentTemplate),this.setupTap(),this.setMenu(),this.setupSort(),this.setupFilterIcon(),this.setupFilterButton(),this.setDisplayName(e)}setDisplayName(e){if(this.currentDisplayName!=e.displayName){this.currentDisplayName=e.displayName;const i=Ts(this.currentDisplayName,!0);this.eText&&(this.eText.textContent=i)}}addInIcon(e,i,s){if(i==null)return;const r=ts(e,this.gos,s);r&&i.appendChild(r)}setupTap(){const{gos:e}=this;if(e.get("suppressTouch"))return;const i=new Es(this.getGui(),!0),s=this.shouldSuppressMenuHide(),r=s&&Pe(this.eMenu),n=r?new Es(this.eMenu,!0):i;if(this.params.enableMenu){const o=r?"EVENT_TAP":"EVENT_LONG_TAP",a=l=>this.params.showColumnMenuAfterMouseClick(l.touchStart);this.addManagedListener(n,Es[o],a)}if(this.params.enableSorting){const o=a=>{var l,c;const u=a.touchStart.target;s&&((l=this.eMenu)!=null&&l.contains(u)||(c=this.eFilterButton)!=null&&c.contains(u))||this.sortController.progressSort(this.params.column,!1,"uiColumnSorted")};this.addManagedListener(i,Es.EVENT_TAP,o)}if(this.params.enableFilterButton){const o=new Es(this.eFilterButton,!0);this.addManagedListener(o,"tap",()=>this.params.showFilter(this.eFilterButton)),this.addDestroyFunc(()=>o.destroy())}this.addDestroyFunc(()=>i.destroy()),r&&this.addDestroyFunc(()=>n.destroy())}workOutShowMenu(){return this.params.enableMenu&&this.menuService.isHeaderMenuButtonEnabled()}shouldSuppressMenuHide(){return this.menuService.isHeaderMenuButtonAlwaysShowEnabled()}setMenu(){if(!this.eMenu)return;if(this.currentShowMenu=this.workOutShowMenu(),!this.currentShowMenu){la(this.eMenu),this.eMenu=void 0;return}const e=this.menuService.isLegacyMenuEnabled();this.addInIcon(e?"menu":"menuAlt",this.eMenu,this.params.column),this.eMenu.classList.toggle("ag-header-menu-icon",!e),this.currentSuppressMenuHide=this.shouldSuppressMenuHide(),this.addManagedListener(this.eMenu,"click",()=>this.params.showColumnMenu(this.eMenu)),this.eMenu.classList.toggle("ag-header-menu-always-show",this.currentSuppressMenuHide)}onMenuKeyboardShortcut(e){var i,s,r,n;const{column:o}=this.params,a=this.menuService.isLegacyMenuEnabled();if(e&&!a){if(this.menuService.isFilterMenuInHeaderEnabled(o))return this.params.showFilter((s=(i=this.eFilterButton)!=null?i:this.eMenu)!=null?s:this.getGui()),!0}else if(this.params.enableMenu)return this.params.showColumnMenu((n=(r=this.eMenu)!=null?r:this.eFilterButton)!=null?n:this.getGui()),!0;return!1}workOutSort(){return this.params.enableSorting}setupSort(){if(this.currentSort=this.params.enableSorting,this.eSortIndicator||(this.eSortIndicator=this.context.createBean(new Cx(!0)),this.eSortIndicator.attachCustomElements(this.eSortOrder,this.eSortAsc,this.eSortDesc,this.eSortMixed,this.eSortNone)),this.eSortIndicator.setupSort(this.params.column),!this.currentSort)return;this.addManagedListener(this.params.column,Nt.EVENT_MOVING_CHANGED,()=>{this.lastMovingChanged=new Date().getTime()}),this.eLabel&&this.addManagedListener(this.eLabel,"click",i=>{const s=this.params.column.isMoving(),n=new Date().getTime()-this.lastMovingChanged<50;if(!(s||n)){const l=this.gos.get("multiSortKey")==="ctrl"?i.ctrlKey||i.metaKey:i.shiftKey;this.params.progressSort(l)}});const e=()=>{if(this.addOrRemoveCssClass("ag-header-cell-sorted-asc",this.params.column.isSortAscending()),this.addOrRemoveCssClass("ag-header-cell-sorted-desc",this.params.column.isSortDescending()),this.addOrRemoveCssClass("ag-header-cell-sorted-none",this.params.column.isSortNone()),this.params.column.getColDef().showRowGroup){const i=this.columnModel.getSourceColumnsForGroupColumn(this.params.column),r=!(i==null?void 0:i.every(n=>this.params.column.getSort()==n.getSort()));this.addOrRemoveCssClass("ag-header-cell-sorted-mixed",r)}};this.addManagedListener(this.eventService,K.EVENT_SORT_CHANGED,e),this.addManagedListener(this.eventService,K.EVENT_COLUMN_ROW_GROUP_CHANGED,e)}setupFilterIcon(){this.eFilter&&this.configureFilter(this.params.enableFilterIcon,this.eFilter,this.onFilterChangedIcon.bind(this))}setupFilterButton(){if(!this.eFilterButton)return;this.configureFilter(this.params.enableFilterButton,this.eFilterButton,this.onFilterChangedButton.bind(this))?this.addManagedListener(this.eFilterButton,"click",()=>this.params.showFilter(this.eFilterButton)):this.eFilterButton=void 0}configureFilter(e,i,s){if(!e)return la(i),!1;const{column:r}=this.params;return this.addInIcon("filter",i,r),this.addManagedListener(r,Nt.EVENT_FILTER_CHANGED,s),s(),!0}onFilterChangedIcon(){const e=this.params.column.isFilterActive();Qt(this.eFilter,e,{skipAriaHidden:!0})}onFilterChangedButton(){const e=this.params.column.isFilterActive();this.eFilterButton.classList.toggle("ag-filter-active",e)}getAnchorElementForMenu(e){var i,s,r,n;return e?(s=(i=this.eFilterButton)!=null?i:this.eMenu)!=null?s:this.getGui():(n=(r=this.eMenu)!=null?r:this.eFilterButton)!=null?n:this.getGui()}};Vr.TEMPLATE=`<div class="ag-cell-label-container" role="presentation">
            <span ref="eMenu" class="ag-header-icon ag-header-cell-menu-button" aria-hidden="true"></span>
            <span ref="eFilterButton" class="ag-header-icon ag-header-cell-filter-button" aria-hidden="true"></span>
            <div ref="eLabel" class="ag-header-cell-label" role="presentation">
                <span ref="eText" class="ag-header-cell-text"></span>
                <span ref="eFilter" class="ag-header-icon ag-header-label-icon ag-filter-icon" aria-hidden="true"></span>
                <ag-sort-indicator ref="eSortIndicator"></ag-sort-indicator>
            </div>
        </div>`;z([W("sortController")],Vr.prototype,"sortController",2);z([W("menuService")],Vr.prototype,"menuService",2);z([W("columnModel")],Vr.prototype,"columnModel",2);z([pe("eFilter")],Vr.prototype,"eFilter",2);z([pe("eFilterButton")],Vr.prototype,"eFilterButton",2);z([pe("eSortIndicator")],Vr.prototype,"eSortIndicator",2);z([pe("eMenu")],Vr.prototype,"eMenu",2);z([pe("eLabel")],Vr.prototype,"eLabel",2);z([pe("eText")],Vr.prototype,"eText",2);z([pe("eSortOrder")],Vr.prototype,"eSortOrder",2);z([pe("eSortAsc")],Vr.prototype,"eSortAsc",2);z([pe("eSortDesc")],Vr.prototype,"eSortDesc",2);z([pe("eSortMixed")],Vr.prototype,"eSortMixed",2);z([pe("eSortNone")],Vr.prototype,"eSortNone",2);var I_=Vr,RC=class o4 extends Te{constructor(){super(o4.TEMPLATE)}destroy(){super.destroy()}init(e){this.params=e,this.checkWarnings(),this.setupLabel(),this.addGroupExpandIcon(),this.setupExpandIcons()}checkWarnings(){this.params.template&&ot("A template was provided for Header Group Comp - templates are only supported for Header Comps (not groups)")}setupExpandIcons(){this.addInIcon("columnGroupOpened","agOpened"),this.addInIcon("columnGroupClosed","agClosed");const e=r=>{if(ha(r))return;const n=!this.params.columnGroup.isExpanded();this.columnModel.setColumnGroupOpened(this.params.columnGroup.getProvidedColumnGroup(),n,"uiColumnExpanded")};this.addTouchAndClickListeners(this.eCloseIcon,e),this.addTouchAndClickListeners(this.eOpenIcon,e);const i=r=>{va(r)};this.addManagedListener(this.eCloseIcon,"dblclick",i),this.addManagedListener(this.eOpenIcon,"dblclick",i),this.addManagedListener(this.getGui(),"dblclick",e),this.updateIconVisibility();const s=this.params.columnGroup.getProvidedColumnGroup();this.addManagedListener(s,bi.EVENT_EXPANDED_CHANGED,this.updateIconVisibility.bind(this)),this.addManagedListener(s,bi.EVENT_EXPANDABLE_CHANGED,this.updateIconVisibility.bind(this))}addTouchAndClickListeners(e,i){const s=new Es(e,!0);this.addManagedListener(s,Es.EVENT_TAP,i),this.addDestroyFunc(()=>s.destroy()),this.addManagedListener(e,"click",i)}updateIconVisibility(){if(this.params.columnGroup.isExpandable()){const i=this.params.columnGroup.isExpanded();Qt(this.eOpenIcon,i),Qt(this.eCloseIcon,!i)}else Qt(this.eOpenIcon,!1),Qt(this.eCloseIcon,!1)}addInIcon(e,i){const s=ts(e,this.gos,null);s&&this.getRefElement(i).appendChild(s)}addGroupExpandIcon(){if(!this.params.columnGroup.isExpandable()){Qt(this.eOpenIcon,!1),Qt(this.eCloseIcon,!1);return}}setupLabel(){var e;const{displayName:i,columnGroup:s}=this.params;if(Pe(i)){const r=Ts(i,!0);this.getRefElement("agLabel").textContent=r}this.addOrRemoveCssClass("ag-sticky-label",!((e=s.getColGroupDef())!=null&&e.suppressStickyLabel))}};RC.TEMPLATE=`<div class="ag-header-group-cell-label" ref="agContainer" role="presentation">
            <span ref="agLabel" class="ag-header-group-text" role="presentation"></span>
            <span ref="agOpened" class="ag-header-icon ag-header-expand-icon ag-header-expand-icon-expanded"></span>
            <span ref="agClosed" class="ag-header-icon ag-header-expand-icon ag-header-expand-icon-collapsed"></span>
        </div>`;z([W("columnModel")],RC.prototype,"columnModel",2);z([pe("agOpened")],RC.prototype,"eOpenIcon",2);z([pe("agClosed")],RC.prototype,"eCloseIcon",2);var bK=RC,Ac=class extends Te{isPopup(){return!0}setParentComponent(t){t.addCssClass("ag-has-popup"),super.setParentComponent(t)}destroy(){const t=this.parentComponent;t&&t.isAlive()&&t.getGui().classList.remove("ag-has-popup"),super.destroy()}},PM=class a4 extends Ac{constructor(){super(a4.TEMPLATE)}init(e){this.params=e,this.focusAfterAttached=e.cellStartedEdit,this.eTextArea.setMaxLength(e.maxLength||200).setCols(e.cols||60).setRows(e.rows||10),Pe(e.value,!0)&&this.eTextArea.setValue(e.value.toString(),!0),this.addGuiEventListener("keydown",this.onKeyDown.bind(this)),this.activateTabIndex()}onKeyDown(e){const i=e.key;(i===ce.LEFT||i===ce.UP||i===ce.RIGHT||i===ce.DOWN||e.shiftKey&&i===ce.ENTER)&&e.stopPropagation()}afterGuiAttached(){const e=this.localeService.getLocaleTextFunc();this.eTextArea.setInputAriaLabel(e("ariaInputEditor","Input Editor")),this.focusAfterAttached&&this.eTextArea.getFocusableElement().focus()}getValue(){const e=this.eTextArea.getValue();return!Pe(e)&&!Pe(this.params.value)?this.params.value:this.params.parseValue(e)}};PM.TEMPLATE=`<div class="ag-large-text">
            <ag-input-text-area ref="eTextArea" class="ag-large-text-input"></ag-input-text-area>
        </div>`;z([pe("eTextArea")],PM.prototype,"eTextArea",2);var l4=PM,bx=class extends Ac{constructor(){super(`<div class="ag-cell-edit-wrapper">
                <ag-select class="ag-cell-editor" ref="eSelect"></ag-select>
            </div>`),this.startedByEnter=!1}init(t){this.focusAfterAttached=t.cellStartedEdit;const{eSelect:e,valueService:i,gos:s}=this,{values:r,value:n,eventKey:o}=t;if(St(r)){console.warn("AG Grid: no values found for select cellEditor");return}this.startedByEnter=o!=null?o===ce.ENTER:!1;let a=!1;r.forEach(d=>{const h={value:d},p=i.formatValue(t.column,null,d),f=p!=null;h.text=f?p:d,e.addOption(h),a=a||n===d}),a?e.setValue(t.value,!0):t.values.length&&e.setValue(t.values[0],!0);const{valueListGap:l,valueListMaxWidth:c,valueListMaxHeight:u}=t;l!=null&&e.setPickerGap(l),u!=null&&e.setPickerMaxHeight(u),c!=null&&e.setPickerMaxWidth(c),s.get("editType")!=="fullRow"&&this.addManagedListener(this.eSelect,Jr.EVENT_ITEM_SELECTED,()=>t.stopEditing())}afterGuiAttached(){this.focusAfterAttached&&this.eSelect.getFocusableElement().focus(),this.startedByEnter&&setTimeout(()=>{this.isAlive()&&this.eSelect.showPicker()})}focusIn(){this.eSelect.getFocusableElement().focus()}getValue(){return this.eSelect.getValue()}isPopup(){return!1}};z([W("valueService")],bx.prototype,"valueService",2);z([pe("eSelect")],bx.prototype,"eSelect",2);var MC=class extends Ac{constructor(t){super(`
            <div class="ag-cell-edit-wrapper">
                ${t.getTemplate()}
            </div>`),this.cellEditorInput=t}init(t){this.params=t;const e=this.eInput;this.cellEditorInput.init(e,t);let i;if(t.cellStartedEdit){this.focusAfterAttached=!0;const s=t.eventKey;s===ce.BACKSPACE||t.eventKey===ce.DELETE?i="":s&&s.length===1?i=s:(i=this.cellEditorInput.getStartValue(),s!==ce.F2&&(this.highlightAllOnFocus=!0))}else this.focusAfterAttached=!1,i=this.cellEditorInput.getStartValue();i!=null&&e.setStartValue(i),this.addManagedListener(e.getGui(),"keydown",s=>{const{key:r}=s;(r===ce.PAGE_UP||r===ce.PAGE_DOWN)&&s.preventDefault()})}afterGuiAttached(){var t,e;const i=this.localeService.getLocaleTextFunc(),s=this.eInput;if(s.setInputAriaLabel(i("ariaInputEditor","Input Editor")),!this.focusAfterAttached)return;ol()||s.getFocusableElement().focus();const r=s.getInputElement();this.highlightAllOnFocus?r.select():(e=(t=this.cellEditorInput).setCaret)==null||e.call(t)}focusIn(){const t=this.eInput,e=t.getFocusableElement(),i=t.getInputElement();e.focus(),i.select()}getValue(){return this.cellEditorInput.getValue()}isPopup(){return!1}};z([pe("eInput")],MC.prototype,"eInput",2);var wK=class{getTemplate(){return'<ag-input-text-field class="ag-cell-editor" ref="eInput"></ag-input-text-field>'}init(t,e){this.eInput=t,this.params=e,e.maxLength!=null&&t.setMaxLength(e.maxLength)}getValue(){const t=this.eInput.getValue();return!Pe(t)&&!Pe(this.params.value)?this.params.value:this.params.parseValue(t)}getStartValue(){return this.params.useFormatter||this.params.column.getColDef().refData?this.params.formatValue(this.params.value):this.params.value}setCaret(){const t=this.eInput.getValue(),e=Pe(t)&&t.length||0;e&&this.eInput.getInputElement().setSelectionRange(e,e)}},F_=class extends MC{constructor(){super(new wK)}},SK="",xK="",IM=class extends Te{constructor(){super(),this.refreshCount=0;const t=document.createElement("span"),e=document.createElement("span");e.setAttribute("class","ag-value-change-delta");const i=document.createElement("span");i.setAttribute("class","ag-value-change-value"),t.appendChild(e),t.appendChild(i),this.setTemplateFromElement(t)}init(t){this.eValue=this.queryForHtmlElement(".ag-value-change-value"),this.eDelta=this.queryForHtmlElement(".ag-value-change-delta"),this.refresh(t,!0)}showDelta(t,e){const i=Math.abs(e),s=t.formatValue(i),r=Pe(s)?s:i,n=e>=0;n?this.eDelta.textContent=SK+r:this.eDelta.textContent=xK+r,this.eDelta.classList.toggle("ag-value-change-delta-up",n),this.eDelta.classList.toggle("ag-value-change-delta-down",!n)}setTimerToRemoveDelta(){this.refreshCount++;const t=this.refreshCount;this.getFrameworkOverrides().wrapIncoming(()=>{window.setTimeout(()=>{t===this.refreshCount&&this.hideDeltaValue()},2e3)})}hideDeltaValue(){this.eValue.classList.remove("ag-value-change-value-highlight"),Cs(this.eDelta)}refresh(t,e=!1){const i=t.value;if(i===this.lastValue||(Pe(t.valueFormatted)?this.eValue.textContent=t.valueFormatted:Pe(t.value)?this.eValue.textContent=i:Cs(this.eValue),this.filterManager.isSuppressFlashingCellsBecauseFiltering()))return!1;if(typeof i=="number"&&typeof this.lastValue=="number"){const s=i-this.lastValue;this.showDelta(t,s)}return this.lastValue&&this.eValue.classList.add("ag-value-change-value-highlight"),e||this.setTimerToRemoveDelta(),this.lastValue=i,!0}};z([W("filterManager")],IM.prototype,"filterManager",2);var FM=class extends Te{constructor(){super(),this.refreshCount=0;const t=document.createElement("span"),e=document.createElement("span");e.setAttribute("class","ag-value-slide-current"),t.appendChild(e),this.setTemplateFromElement(t),this.eCurrent=this.queryForHtmlElement(".ag-value-slide-current")}init(t){this.refresh(t,!0)}addSlideAnimation(){this.refreshCount++;const t=this.refreshCount;this.ePrevious&&this.getGui().removeChild(this.ePrevious);const e=document.createElement("span");e.setAttribute("class","ag-value-slide-previous ag-value-slide-out"),this.ePrevious=e,this.ePrevious.textContent=this.eCurrent.textContent,this.getGui().insertBefore(this.ePrevious,this.eCurrent),this.getFrameworkOverrides().wrapIncoming(()=>{window.setTimeout(()=>{t===this.refreshCount&&this.ePrevious.classList.add("ag-value-slide-out-end")},50),window.setTimeout(()=>{t===this.refreshCount&&(this.getGui().removeChild(this.ePrevious),this.ePrevious=null)},3e3)})}refresh(t,e=!1){let i=t.value;return St(i)&&(i=""),i===this.lastValue||this.filterManager.isSuppressFlashingCellsBecauseFiltering()?!1:(e||this.addSlideAnimation(),this.lastValue=i,Pe(t.valueFormatted)?this.eCurrent.textContent=t.valueFormatted:Pe(t.value)?this.eCurrent.textContent=i:Cs(this.eCurrent),!0)}};z([W("filterManager")],FM.prototype,"filterManager",2);var Yi=class Bi{constructor(e){this.rowIndex=null,this.key=null,this.childrenMapped={},this.displayed=!1,this.rowTop=null,this.oldRowTop=null,this.selectable=!0,this.__objectId=Bi.OBJECT_ID_SEQUENCE++,this.__autoHeights={},this.alreadyRendered=!1,this.highlighted=null,this.hovered=!1,this.selected=!1,this.beans=e}setData(e){this.setDataCommon(e,!1)}updateData(e){this.setDataCommon(e,!0)}setDataCommon(e,i){const s=this.data;this.data=e,this.beans.valueCache.onDataChanged(),this.updateDataOnDetailNode(),this.checkRowSelectable(),this.resetQuickFilterAggregateText();const r=this.createDataChangedEvent(e,s,i);this.dispatchLocalEvent(r)}updateDataOnDetailNode(){this.detailNode&&(this.detailNode.data=this.data)}createDataChangedEvent(e,i,s){return{type:Bi.EVENT_DATA_CHANGED,node:this,oldData:i,newData:e,update:s}}createLocalRowEvent(e){return{type:e,node:this}}getRowIndexString(){return this.rowPinned==="top"?"t-"+this.rowIndex:this.rowPinned==="bottom"?"b-"+this.rowIndex:this.rowIndex.toString()}createDaemonNode(){const e=new Bi(this.beans);return e.id=this.id,e.data=this.data,e.__daemon=!0,e.selected=this.selected,e.level=this.level,e}setDataAndId(e,i){const s=Pe(this.id)?this.createDaemonNode():null,r=this.data;this.data=e,this.updateDataOnDetailNode(),this.setId(i),this.checkRowSelectable(),this.beans.selectionService.syncInRowNode(this,s);const n=this.createDataChangedEvent(e,r,!1);this.dispatchLocalEvent(n)}checkRowSelectable(){const e=this.beans.gos.get("isRowSelectable");this.setRowSelectable(e?e(this):!0)}setRowSelectable(e,i){if(this.selectable!==e){if(this.selectable=e,this.eventService&&this.eventService.dispatchEvent(this.createLocalRowEvent(Bi.EVENT_SELECTABLE_CHANGED)),i)return;if(this.beans.gos.get("groupSelectsChildren")){const r=this.calculateSelectedFromChildren();this.setSelectedParams({newValue:r??!1,source:"selectableChanged"});return}this.isSelected()&&!this.selectable&&this.setSelectedParams({newValue:!1,source:"selectableChanged"})}}setId(e){const i=this.beans.gos.getCallback("getRowId");if(i)if(this.data){const s=this.getGroupKeys(!0);this.id=i({data:this.data,parentKeys:s.length>0?s:void 0,level:this.level}),this.id!==null&&typeof this.id=="string"&&this.id.startsWith(Bi.ID_PREFIX_ROW_GROUP)&&console.error(`AG Grid: Row IDs cannot start with ${Bi.ID_PREFIX_ROW_GROUP}, this is a reserved prefix for AG Grid's row grouping feature.`),this.id!==null&&typeof this.id!="string"&&(this.id=""+this.id)}else this.id=void 0;else this.id=e}getGroupKeys(e=!1){const i=[];let s=this;for(e&&(s=s.parent);s&&s.level>=0;)i.push(s.key),s=s.parent;return i.reverse(),i}isPixelInRange(e){return!Pe(this.rowTop)||!Pe(this.rowHeight)?!1:e>=this.rowTop&&e<this.rowTop+this.rowHeight}setFirstChild(e){this.firstChild!==e&&(this.firstChild=e,this.eventService&&this.eventService.dispatchEvent(this.createLocalRowEvent(Bi.EVENT_FIRST_CHILD_CHANGED)))}setLastChild(e){this.lastChild!==e&&(this.lastChild=e,this.eventService&&this.eventService.dispatchEvent(this.createLocalRowEvent(Bi.EVENT_LAST_CHILD_CHANGED)))}setChildIndex(e){this.childIndex!==e&&(this.childIndex=e,this.eventService&&this.eventService.dispatchEvent(this.createLocalRowEvent(Bi.EVENT_CHILD_INDEX_CHANGED)))}setRowTop(e){this.oldRowTop=this.rowTop,this.rowTop!==e&&(this.rowTop=e,this.eventService&&this.eventService.dispatchEvent(this.createLocalRowEvent(Bi.EVENT_TOP_CHANGED)),this.setDisplayed(e!==null))}clearRowTopAndRowIndex(){this.oldRowTop=null,this.setRowTop(null),this.setRowIndex(null)}setDisplayed(e){this.displayed!==e&&(this.displayed=e,this.eventService&&this.eventService.dispatchEvent(this.createLocalRowEvent(Bi.EVENT_DISPLAYED_CHANGED)))}setDragging(e){this.dragging!==e&&(this.dragging=e,this.eventService&&this.eventService.dispatchEvent(this.createLocalRowEvent(Bi.EVENT_DRAGGING_CHANGED)))}setHighlighted(e){e!==this.highlighted&&(this.highlighted=e,this.eventService&&this.eventService.dispatchEvent(this.createLocalRowEvent(Bi.EVENT_HIGHLIGHT_CHANGED)))}setHovered(e){this.hovered!==e&&(this.hovered=e)}isHovered(){return this.hovered}setAllChildrenCount(e){this.allChildrenCount!==e&&(this.allChildrenCount=e,this.eventService&&this.eventService.dispatchEvent(this.createLocalRowEvent(Bi.EVENT_ALL_CHILDREN_COUNT_CHANGED)))}setMaster(e){this.master!==e&&(this.master&&!e&&(this.expanded=!1),this.master=e,this.eventService&&this.eventService.dispatchEvent(this.createLocalRowEvent(Bi.EVENT_MASTER_CHANGED)))}setGroup(e){this.group!==e&&(this.group&&!e&&(this.expanded=!1),this.group=e,this.updateHasChildren(),this.eventService&&this.eventService.dispatchEvent(this.createLocalRowEvent(Bi.EVENT_GROUP_CHANGED)))}setRowHeight(e,i=!1){this.rowHeight=e,this.rowHeightEstimated=i,this.eventService&&this.eventService.dispatchEvent(this.createLocalRowEvent(Bi.EVENT_HEIGHT_CHANGED))}setRowAutoHeight(e,i){this.__autoHeights||(this.__autoHeights={}),this.__autoHeights[i.getId()]=e,e!=null&&(this.checkAutoHeightsDebounced==null&&(this.checkAutoHeightsDebounced=qr(this.checkAutoHeights.bind(this),1)),this.checkAutoHeightsDebounced())}checkAutoHeights(){let e=!1,i=!0,s=0;const r=this.__autoHeights;if(r==null||(this.beans.columnModel.getAllDisplayedAutoHeightCols().forEach(a=>{let l=r[a.getId()];if(l==null)if(this.beans.columnModel.isColSpanActive()){let c=[];switch(a.getPinned()){case"left":c=this.beans.columnModel.getDisplayedLeftColumnsForRow(this);break;case"right":c=this.beans.columnModel.getDisplayedRightColumnsForRow(this);break;case null:c=this.beans.columnModel.getViewportCenterColumnsForRow(this);break}if(c.includes(a)){e=!0;return}l=-1}else{e=!0;return}else i=!1;l>s&&(s=l)}),e)||((i||s<10)&&(s=this.beans.gos.getRowHeightForNode(this).height),s==this.rowHeight))return;this.setRowHeight(s);const o=this.beans.rowModel;o.onRowHeightChangedDebounced&&o.onRowHeightChangedDebounced()}setRowIndex(e){this.rowIndex!==e&&(this.rowIndex=e,this.eventService&&this.eventService.dispatchEvent(this.createLocalRowEvent(Bi.EVENT_ROW_INDEX_CHANGED)))}setUiLevel(e){this.uiLevel!==e&&(this.uiLevel=e,this.eventService&&this.eventService.dispatchEvent(this.createLocalRowEvent(Bi.EVENT_UI_LEVEL_CHANGED)))}setExpanded(e,i,s){if(this.expanded===e)return;this.expanded=e,this.eventService&&this.eventService.dispatchEvent(this.createLocalRowEvent(Bi.EVENT_EXPANDED_CHANGED));const r=Object.assign({},this.createGlobalRowEvent(K.EVENT_ROW_GROUP_OPENED),{expanded:e,event:i||null});this.beans.rowNodeEventThrottle.dispatchExpanded(r,s),this.beans.rowRenderer.refreshCells({rowNodes:[this]})}createGlobalRowEvent(e){return this.beans.gos.addGridCommonParams({type:e,node:this,data:this.data,rowIndex:this.rowIndex,rowPinned:this.rowPinned})}dispatchLocalEvent(e){this.eventService&&this.eventService.dispatchEvent(e)}setDataValue(e,i,s){const n=(()=>{var l;return typeof e!="string"?e:(l=this.beans.columnModel.getGridColumn(e))!=null?l:this.beans.columnModel.getPrimaryColumn(e)})(),o=this.getValueFromValueService(n);if(this.beans.gos.get("readOnlyEdit"))return this.dispatchEventForSaveValueReadOnly(n,o,i,s),!1;const a=this.beans.valueService.setValue(this,n,i,s);return this.dispatchCellChangedEvent(n,i,o),this.checkRowSelectable(),a}getValueFromValueService(e){var i,s;const r=this.leafGroup&&this.beans.columnModel.isPivotMode(),n=this.group&&this.expanded&&!this.footer&&!r;let o=!1;const a=(i=this.beans.gos.get("groupTotalRow"))!=null?i:this.beans.gos.get("groupIncludeFooter");typeof a!="function"?o=!!a:o=!!((s=this.beans.gos.getCallback("groupTotalRow"))!=null?s:this.beans.gos.getCallback("groupIncludeFooter"))({node:this});const l=this.beans.gos.get("groupSuppressBlankHeader"),c=n&&o&&!l;return this.beans.valueService.getValue(e,this,!1,c)}dispatchEventForSaveValueReadOnly(e,i,s,r){const n=this.beans.gos.addGridCommonParams({type:K.EVENT_CELL_EDIT_REQUEST,event:null,rowIndex:this.rowIndex,rowPinned:this.rowPinned,column:e,colDef:e.getColDef(),data:this.data,node:this,oldValue:i,newValue:s,value:s,source:r});this.beans.eventService.dispatchEvent(n)}setGroupValue(e,i){const s=this.beans.columnModel.getGridColumn(e);St(this.groupData)&&(this.groupData={});const r=s.getColId(),n=this.groupData[r];n!==i&&(this.groupData[r]=i,this.dispatchCellChangedEvent(s,i,n))}setAggData(e){const i=this.aggData;if(this.aggData=e,this.eventService){const s=r=>{const n=this.aggData?this.aggData[r]:void 0,o=i?i[r]:void 0;if(n===o)return;const a=this.beans.columnModel.lookupGridColumn(r);a&&this.dispatchCellChangedEvent(a,n,o)};for(const r in this.aggData)s(r);for(const r in e)r in this.aggData||s(r)}}updateHasChildren(){let e=this.group&&!this.footer||this.childrenAfterGroup&&this.childrenAfterGroup.length>0;if(this.beans.gos.isRowModelType("serverSide")){const s=this.beans.gos.get("treeData"),r=this.beans.gos.get("isServerSideGroup");e=!this.stub&&!this.footer&&(s?!!r&&r(this.data):!!this.group)}e!==this.__hasChildren&&(this.__hasChildren=!!e,this.eventService&&this.eventService.dispatchEvent(this.createLocalRowEvent(Bi.EVENT_HAS_CHILDREN_CHANGED)))}hasChildren(){return this.__hasChildren==null&&this.updateHasChildren(),this.__hasChildren}isEmptyRowGroupNode(){return this.group&&Mo(this.childrenAfterGroup)}dispatchCellChangedEvent(e,i,s){const r={type:Bi.EVENT_CELL_CHANGED,node:this,column:e,newValue:i,oldValue:s};this.dispatchLocalEvent(r)}resetQuickFilterAggregateText(){this.quickFilterAggregateText=null}isExpandable(){return this.footer?!1:this.beans.columnModel.isPivotMode()?this.hasChildren()&&!this.leafGroup:this.hasChildren()||!!this.master}isSelected(){return this.footer?this.sibling.isSelected():this.selected}depthFirstSearch(e){this.childrenAfterGroup&&this.childrenAfterGroup.forEach(i=>i.depthFirstSearch(e)),e(this)}calculateSelectedFromChildren(){var e;let i=!1,s=!1,r=!1;if(!((e=this.childrenAfterGroup)!=null&&e.length))return this.selectable?this.selected:null;for(let n=0;n<this.childrenAfterGroup.length;n++){const o=this.childrenAfterGroup[n];let a=o.isSelected();if(!o.selectable){const l=o.calculateSelectedFromChildren();if(l===null)continue;a=l}switch(a){case!0:i=!0;break;case!1:s=!0;break;default:r=!0;break}}if(!(r||i&&s))return i?!0:s?!1:this.selectable?this.selected:null}setSelectedInitialValue(e){this.selected=e}selectThisNode(e,i,s="api"){const r=!this.selectable&&e,n=this.selected===e;if(r||n)return!1;this.selected=e,this.eventService&&this.dispatchLocalEvent(this.createLocalRowEvent(Bi.EVENT_ROW_SELECTED));const o=this.sibling;o&&o.footer&&o.eventService&&o.dispatchLocalEvent(o.createLocalRowEvent(Bi.EVENT_ROW_SELECTED));const a=$i(it({},this.createGlobalRowEvent(K.EVENT_ROW_SELECTED)),{event:i||null,source:s});return this.beans.eventService.dispatchEvent(a),!0}setSelected(e,i=!1,s="api"){if(typeof s=="boolean"){console.warn("AG Grid: since version v30, rowNode.setSelected() property `suppressFinishActions` has been removed, please use `gridApi.setNodesSelected()` for bulk actions, and the event `source` property for ignoring events instead.");return}this.setSelectedParams({newValue:e,clearSelection:i,rangeSelect:!1,source:s})}setSelectedParams(e){return this.rowPinned?(console.warn("AG Grid: cannot select pinned rows"),0):this.id===void 0?(console.warn("AG Grid: cannot select node until id for node is known"),0):this.beans.selectionService.setNodesSelected($i(it({},e),{nodes:[this.footer?this.sibling:this]}))}isRowPinned(){return this.rowPinned==="top"||this.rowPinned==="bottom"}isParentOfNode(e){let i=this.parent;for(;i;){if(i===e)return!0;i=i.parent}return!1}addEventListener(e,i){var s,r;this.eventService||(this.eventService=new In),this.beans.frameworkOverrides.shouldWrapOutgoing&&!this.frameworkEventListenerService&&(this.eventService.setFrameworkOverrides(this.beans.frameworkOverrides),this.frameworkEventListenerService=new YR(this.beans.frameworkOverrides));const n=(r=(s=this.frameworkEventListenerService)==null?void 0:s.wrap(i))!=null?r:i;this.eventService.addEventListener(e,n)}removeEventListener(e,i){var s,r;if(!this.eventService)return;const n=(r=(s=this.frameworkEventListenerService)==null?void 0:s.unwrap(i))!=null?r:i;this.eventService.removeEventListener(e,n),this.eventService.noRegisteredListenersExist()&&(this.eventService=null)}onMouseEnter(){this.dispatchLocalEvent(this.createLocalRowEvent(Bi.EVENT_MOUSE_ENTER))}onMouseLeave(){this.dispatchLocalEvent(this.createLocalRowEvent(Bi.EVENT_MOUSE_LEAVE))}getFirstChildOfFirstChild(e){let i=this,s=!0,r=!1,n=null;for(;s&&!r;){const o=i.parent;Pe(o)&&i.firstChild?o.rowGroupColumn===e&&(r=!0,n=o):s=!1,i=o}return r?n:null}isFullWidthCell(){if(this.detail)return!0;const e=this.beans.gos.getCallback("isFullWidthRow");return e?e({rowNode:this}):!1}getRoute(){if(this.key==null)return;const e=[];let i=this;for(;i.key!=null;)e.push(i.key),i=i.parent;return e.reverse()}createFooter(){if(this.sibling)return;const e=new Set(["eventService","__objectId","sticky"]),i=new Bi(this.beans);Object.keys(this).forEach(s=>{e.has(s)||(i[s]=this[s])}),i.footer=!0,i.setRowTop(null),i.setRowIndex(null),i.oldRowTop=null,i.id="rowGroupFooter_"+this.id,i.sibling=this,this.sibling=i}destroyFooter(){this.sibling&&(this.sibling.setRowTop(null),this.sibling.setRowIndex(null),this.sibling=void 0)}};Yi.ID_PREFIX_ROW_GROUP="row-group-";Yi.ID_PREFIX_TOP_PINNED="t-";Yi.ID_PREFIX_BOTTOM_PINNED="b-";Yi.OBJECT_ID_SEQUENCE=0;Yi.EVENT_ROW_SELECTED="rowSelected";Yi.EVENT_DATA_CHANGED="dataChanged";Yi.EVENT_CELL_CHANGED="cellChanged";Yi.EVENT_ALL_CHILDREN_COUNT_CHANGED="allChildrenCountChanged";Yi.EVENT_MASTER_CHANGED="masterChanged";Yi.EVENT_GROUP_CHANGED="groupChanged";Yi.EVENT_MOUSE_ENTER="mouseEnter";Yi.EVENT_MOUSE_LEAVE="mouseLeave";Yi.EVENT_HEIGHT_CHANGED="heightChanged";Yi.EVENT_TOP_CHANGED="topChanged";Yi.EVENT_DISPLAYED_CHANGED="displayedChanged";Yi.EVENT_FIRST_CHILD_CHANGED="firstChildChanged";Yi.EVENT_LAST_CHILD_CHANGED="lastChildChanged";Yi.EVENT_CHILD_INDEX_CHANGED="childIndexChanged";Yi.EVENT_ROW_INDEX_CHANGED="rowIndexChanged";Yi.EVENT_EXPANDED_CHANGED="expandedChanged";Yi.EVENT_HAS_CHILDREN_CHANGED="hasChildrenChanged";Yi.EVENT_SELECTABLE_CHANGED="selectableChanged";Yi.EVENT_UI_LEVEL_CHANGED="uiLevelChanged";Yi.EVENT_HIGHLIGHT_CHANGED="rowHighlightChanged";Yi.EVENT_DRAGGING_CHANGED="draggingChanged";var Tt=Yi,DC=class extends Te{constructor(){super(`
            <div class="ag-selection-checkbox" role="presentation">
                <ag-checkbox role="presentation" ref="eCheckbox"></ag-checkbox>
            </div>`)}postConstruct(){this.eCheckbox.setPassive(!0)}getCheckboxId(){return this.eCheckbox.getInputElement().id}onDataChanged(){this.onSelectionChanged()}onSelectableChanged(){this.showOrHideSelect()}onSelectionChanged(){const t=this.localeService.getLocaleTextFunc(),e=this.rowNode.isSelected(),i=cx(t,e),[s,r]=this.rowNode.selectable?["ariaRowToggleSelection","Press Space to toggle row selection"]:["ariaRowSelectionDisabled","Row Selection is disabled for this row"],n=t(s,r);this.eCheckbox.setValue(e,!0),this.eCheckbox.setInputAriaLabel(`${n} (${i})`)}onClicked(t,e,i){return this.rowNode.setSelectedParams({newValue:t,rangeSelect:i.shiftKey,groupSelectsFiltered:e,event:i,source:"checkboxSelected"})}init(t){if(this.rowNode=t.rowNode,this.column=t.column,this.overrides=t.overrides,this.onSelectionChanged(),this.addManagedListener(this.eCheckbox.getInputElement(),"dblclick",s=>{va(s)}),this.addManagedListener(this.eCheckbox.getInputElement(),"click",s=>{va(s);const r=this.gos.get("groupSelectsFiltered"),n=this.eCheckbox.getValue();this.shouldHandleIndeterminateState(n,r)?this.onClicked(!0,r,s||{})===0&&this.onClicked(!1,r,s):n?this.onClicked(!1,r,s):this.onClicked(!0,r,s||{})}),this.addManagedListener(this.rowNode,Tt.EVENT_ROW_SELECTED,this.onSelectionChanged.bind(this)),this.addManagedListener(this.rowNode,Tt.EVENT_DATA_CHANGED,this.onDataChanged.bind(this)),this.addManagedListener(this.rowNode,Tt.EVENT_SELECTABLE_CHANGED,this.onSelectableChanged.bind(this)),this.gos.get("isRowSelectable")||typeof this.getIsVisible()=="function"){const s=this.showOrHideSelect.bind(this);this.addManagedListener(this.eventService,K.EVENT_DISPLAYED_COLUMNS_CHANGED,s),this.addManagedListener(this.rowNode,Tt.EVENT_DATA_CHANGED,s),this.addManagedListener(this.rowNode,Tt.EVENT_CELL_CHANGED,s),this.showOrHideSelect()}this.eCheckbox.getInputElement().setAttribute("tabindex","-1")}shouldHandleIndeterminateState(t,e){return e&&(this.eCheckbox.getPreviousValue()===void 0||t===void 0)&&this.gos.isRowModelType("clientSide")}showOrHideSelect(){var t,e,i;let s=this.rowNode.selectable;const r=this.getIsVisible();if(s)if(typeof r=="function"){const o=(t=this.overrides)==null?void 0:t.callbackParams;if(!this.column)s=r($i(it({},o),{node:this.rowNode,data:this.rowNode.data}));else{const a=this.column.createColumnFunctionCallbackParams(this.rowNode);s=r(it(it({},o),a))}}else s=r??!1;if((e=this.column)==null?void 0:e.getColDef().showDisabledCheckboxes){this.eCheckbox.setDisabled(!s),this.setVisible(!0),this.setDisplayed(!0);return}if((i=this.overrides)!=null&&i.removeHidden){this.setDisplayed(s);return}this.setVisible(s)}getIsVisible(){var t,e;return this.overrides?this.overrides.isVisible:(e=(t=this.column)==null?void 0:t.getColDef())==null?void 0:e.checkboxSelection}};z([pe("eCheckbox")],DC.prototype,"eCheckbox",2);z([de],DC.prototype,"postConstruct",1);var c4=(t=>(t[t.Up=0]="Up",t[t.Down=1]="Down",t))(c4||{}),LM=(t=>(t[t.Left=0]="Left",t[t.Right=1]="Right",t))(LM||{}),Ln=(t=>(t[t.ToolPanel=0]="ToolPanel",t[t.HeaderCell=1]="HeaderCell",t[t.RowDrag=2]="RowDrag",t[t.ChartPanel=3]="ChartPanel",t[t.AdvancedFilterBuilder=4]="AdvancedFilterBuilder",t))(Ln||{}),st=class extends ye{constructor(){super(...arguments),this.dragSourceAndParamsList=[],this.dropTargets=[]}init(){this.ePinnedIcon=To("columnMovePin",this.gos,null),this.eHideIcon=To("columnMoveHide",this.gos,null),this.eMoveIcon=To("columnMoveMove",this.gos,null),this.eLeftIcon=To("columnMoveLeft",this.gos,null),this.eRightIcon=To("columnMoveRight",this.gos,null),this.eGroupIcon=To("columnMoveGroup",this.gos,null),this.eAggregateIcon=To("columnMoveValue",this.gos,null),this.ePivotIcon=To("columnMovePivot",this.gos,null),this.eDropNotAllowedIcon=To("dropNotAllowed",this.gos,null)}addDragSource(t,e=!1){const i={eElement:t.eElement,dragStartPixels:t.dragStartPixels,onDragStart:this.onDragStart.bind(this,t),onDragStop:this.onDragStop.bind(this),onDragging:this.onDragging.bind(this),includeTouch:e};this.dragSourceAndParamsList.push({params:i,dragSource:t}),this.dragService.addDragSource(i)}removeDragSource(t){const e=this.dragSourceAndParamsList.find(i=>i.dragSource===t);e&&(this.dragService.removeDragSource(e.params),vn(this.dragSourceAndParamsList,e))}clearDragSourceParamsList(){this.dragSourceAndParamsList.forEach(t=>this.dragService.removeDragSource(t.params)),this.dragSourceAndParamsList.length=0,this.dropTargets.length=0}nudge(){this.dragging&&this.onDragging(this.eventLastTime,!0)}onDragStart(t,e){this.dragging=!0,this.dragSource=t,this.eventLastTime=e,this.dragItem=this.dragSource.getDragItem(),this.lastDropTarget=void 0,this.dragSource.onDragStarted&&this.dragSource.onDragStarted(),this.createGhost()}onDragStop(t){if(this.eventLastTime=null,this.dragging=!1,this.dragSource.onDragStopped&&this.dragSource.onDragStopped(),this.lastDropTarget&&this.lastDropTarget.onDragStop){const e=this.createDropTargetEvent(this.lastDropTarget,t,null,null,!1);this.lastDropTarget.onDragStop(e)}this.lastDropTarget=null,this.dragItem=null,this.removeGhost()}onDragging(t,e){var i,s,r,n;const o=this.getHorizontalDirection(t),a=this.getVerticalDirection(t);this.eventLastTime=t,this.positionGhost(t);const l=this.dropTargets.filter(u=>this.isMouseOnDropTarget(t,u)),c=this.findCurrentDropTarget(t,l);if(c!==this.lastDropTarget)this.leaveLastTargetIfExists(t,o,a,e),this.lastDropTarget!==null&&c===null&&((s=(i=this.dragSource).onGridExit)==null||s.call(i,this.dragItem)),this.lastDropTarget===null&&c!==null&&((n=(r=this.dragSource).onGridEnter)==null||n.call(r,this.dragItem)),this.enterDragTargetIfExists(c,t,o,a,e),this.lastDropTarget=c;else if(c&&c.onDragging){const u=this.createDropTargetEvent(c,t,o,a,e);c.onDragging(u)}}getAllContainersFromDropTarget(t){const e=t.getSecondaryContainers?t.getSecondaryContainers():null,i=[[t.getContainer()]];return e?i.concat(e):i}allContainersIntersect(t,e){for(const i of e){const s=i.getBoundingClientRect();if(s.width===0||s.height===0)return!1;const r=t.clientX>=s.left&&t.clientX<s.right,n=t.clientY>=s.top&&t.clientY<s.bottom;if(!r||!n)return!1}return!0}isMouseOnDropTarget(t,e){const i=this.getAllContainersFromDropTarget(e);let s=!1;for(const r of i)if(this.allContainersIntersect(t,r)){s=!0;break}return e.targetContainsSource&&!e.getContainer().contains(this.dragSource.eElement)?!1:s&&e.isInterestedIn(this.dragSource.type,this.dragSource.eElement)}findCurrentDropTarget(t,e){const i=e.length;if(i===0)return null;if(i===1)return e[0];const r=this.gos.getRootNode().elementsFromPoint(t.clientX,t.clientY);for(const n of r)for(const o of e)if(B3(this.getAllContainersFromDropTarget(o)).indexOf(n)!==-1)return o;return null}enterDragTargetIfExists(t,e,i,s,r){if(t){if(t.onDragEnter){const n=this.createDropTargetEvent(t,e,i,s,r);t.onDragEnter(n)}this.setGhostIcon(t.getIconName?t.getIconName():null)}}leaveLastTargetIfExists(t,e,i,s){if(this.lastDropTarget){if(this.lastDropTarget.onDragLeave){const r=this.createDropTargetEvent(this.lastDropTarget,t,e,i,s);this.lastDropTarget.onDragLeave(r)}this.setGhostIcon(null)}}addDropTarget(t){this.dropTargets.push(t)}removeDropTarget(t){this.dropTargets=this.dropTargets.filter(e=>e.getContainer()!==t.getContainer())}hasExternalDropZones(){return this.dropTargets.some(t=>t.external)}findExternalZone(t){return this.dropTargets.filter(i=>i.external).find(i=>i.getContainer()===t.getContainer())||null}getHorizontalDirection(t){const e=this.eventLastTime&&this.eventLastTime.clientX,i=t.clientX;return e===i?null:e>i?0:1}getVerticalDirection(t){const e=this.eventLastTime&&this.eventLastTime.clientY,i=t.clientY;return e===i?null:e>i?0:1}createDropTargetEvent(t,e,i,s,r){const n=t.getContainer(),o=n.getBoundingClientRect(),{gridApi:a,columnApi:l,dragItem:c,dragSource:u}=this,d=e.clientX-o.left,h=e.clientY-o.top;return{event:e,x:d,y:h,vDirection:s,hDirection:i,dragSource:u,fromNudge:r,dragItem:c,api:a,columnApi:l,dropZoneTarget:n}}positionGhost(t){const e=this.eGhost;if(!e)return;const s=e.getBoundingClientRect().height,r=hG()-2,n=pG()-2,o=gM(e.offsetParent),{clientY:a,clientX:l}=t;let c=a-o.top-s/2,u=l-o.left-10;const d=this.gos.getDocument(),h=d.defaultView||window,p=h.pageYOffset||d.documentElement.scrollTop,f=h.pageXOffset||d.documentElement.scrollLeft;r>0&&u+e.clientWidth>r+f&&(u=r+f-e.clientWidth),u<0&&(u=0),n>0&&c+e.clientHeight>n+p&&(c=n+p-e.clientHeight),c<0&&(c=0),e.style.left=`${u}px`,e.style.top=`${c}px`}removeGhost(){this.eGhost&&this.eGhostParent&&this.eGhostParent.removeChild(this.eGhost),this.eGhost=null}createGhost(){this.eGhost=xn(st.GHOST_TEMPLATE),this.mouseEventService.stampTopLevelGridCompWithGridInstance(this.eGhost);const{theme:t}=this.environment.getTheme();t&&this.eGhost.classList.add(t),this.eGhostIcon=this.eGhost.querySelector(".ag-dnd-ghost-icon"),this.setGhostIcon(null);const e=this.eGhost.querySelector(".ag-dnd-ghost-label");let i=this.dragSource.dragItemName;sx(i)&&(i=i()),e.innerHTML=Ts(i)||"",this.eGhost.style.height="25px",this.eGhost.style.top="20px",this.eGhost.style.left="20px";const s=this.gos.getDocument();let r=null,n=null;try{r=s.fullscreenElement}catch{}finally{r||(r=this.gos.getRootNode());const o=r.querySelector("body");o?n=o:r instanceof ShadowRoot?n=r:r instanceof Document?n=r==null?void 0:r.documentElement:n=r}this.eGhostParent=n,this.eGhostParent?this.eGhostParent.appendChild(this.eGhost):console.warn("AG Grid: could not find document body, it is needed for dragging columns")}setGhostIcon(t,e=!1){Cs(this.eGhostIcon);let i=null;switch(t||(t=this.dragSource.getDefaultIconName?this.dragSource.getDefaultIconName():st.ICON_NOT_ALLOWED),t){case st.ICON_PINNED:i=this.ePinnedIcon;break;case st.ICON_MOVE:i=this.eMoveIcon;break;case st.ICON_LEFT:i=this.eLeftIcon;break;case st.ICON_RIGHT:i=this.eRightIcon;break;case st.ICON_GROUP:i=this.eGroupIcon;break;case st.ICON_AGGREGATE:i=this.eAggregateIcon;break;case st.ICON_PIVOT:i=this.ePivotIcon;break;case st.ICON_NOT_ALLOWED:i=this.eDropNotAllowedIcon;break;case st.ICON_HIDE:i=this.eHideIcon;break}this.eGhostIcon.classList.toggle("ag-shake-left-to-right",e),!(i===this.eHideIcon&&this.gos.get("suppressDragLeaveHidesColumns"))&&i&&this.eGhostIcon.appendChild(i)}};st.ICON_PINNED="pinned";st.ICON_MOVE="move";st.ICON_LEFT="left";st.ICON_RIGHT="right";st.ICON_GROUP="group";st.ICON_AGGREGATE="aggregate";st.ICON_PIVOT="pivot";st.ICON_NOT_ALLOWED="notAllowed";st.ICON_HIDE="hide";st.GHOST_TEMPLATE=`<div class="ag-dnd-ghost ag-unselectable">
            <span class="ag-dnd-ghost-icon ag-shake-left-to-right"></span>
            <div class="ag-dnd-ghost-label"></div>
        </div>`;z([W("dragService")],st.prototype,"dragService",2);z([W("mouseEventService")],st.prototype,"mouseEventService",2);z([W("columnApi")],st.prototype,"columnApi",2);z([W("gridApi")],st.prototype,"gridApi",2);z([de],st.prototype,"init",1);z([Hi],st.prototype,"clearDragSourceParamsList",1);st=z([Me("dragAndDropService")],st);var xh=class extends Te{constructor(t,e,i,s,r,n){super(),this.cellValueFn=t,this.rowNode=e,this.column=i,this.customGui=s,this.dragStartPixels=r,this.suppressVisibilityChange=n,this.dragSource=null}isCustomGui(){return this.customGui!=null}postConstruct(){if(this.customGui?this.setDragElement(this.customGui,this.dragStartPixels):(this.setTemplate('<div class="ag-drag-handle ag-row-drag" aria-hidden="true"></div>'),this.getGui().appendChild(ts("rowDrag",this.gos,null)),this.addDragSource()),this.checkCompatibility(),!this.suppressVisibilityChange){const t=this.gos.get("rowDragManaged")?new h4(this,this.beans,this.rowNode,this.column):new d4(this,this.beans,this.rowNode,this.column);this.createManagedBean(t,this.beans.context)}}setDragElement(t,e){this.setTemplateFromElement(t),this.addDragSource(e)}getSelectedNodes(){if(!this.gos.get("rowDragMultiRow"))return[this.rowNode];const e=this.beans.selectionService.getSelectedNodes();return e.indexOf(this.rowNode)!==-1?e:[this.rowNode]}checkCompatibility(){const t=this.gos.get("rowDragManaged");this.gos.get("treeData")&&t&&ot("If using row drag with tree data, you cannot have rowDragManaged=true")}getDragItem(){return{rowNode:this.rowNode,rowNodes:this.getSelectedNodes(),columns:this.column?[this.column]:void 0,defaultTextValue:this.cellValueFn()}}getRowDragText(t){if(t){const e=t.getColDef();if(e.rowDragText)return e.rowDragText}return this.gos.get("rowDragText")}addDragSource(t=4){this.dragSource&&this.removeDragSource();const e=this.localeService.getLocaleTextFunc();this.dragSource={type:2,eElement:this.getGui(),dragItemName:()=>{var i;const s=this.getDragItem(),r=((i=s.rowNodes)==null?void 0:i.length)||1,n=this.getRowDragText(this.column);return n?n(s,r):r===1?this.cellValueFn():`${r} ${e("rowDragRows","rows")}`},getDragItem:()=>this.getDragItem(),dragStartPixels:t,dragSourceDomDataKey:this.gos.getDomDataKey()},this.beans.dragAndDropService.addDragSource(this.dragSource,!0)}removeDragSource(){this.dragSource&&this.beans.dragAndDropService.removeDragSource(this.dragSource),this.dragSource=null}};z([W("beans")],xh.prototype,"beans",2);z([de],xh.prototype,"postConstruct",1);z([Hi],xh.prototype,"removeDragSource",1);var u4=class extends ye{constructor(t,e,i){super(),this.parent=t,this.rowNode=e,this.column=i}setDisplayedOrVisible(t){const e={skipAriaHidden:!0};if(t)this.parent.setDisplayed(!1,e);else{let i=!0,s=!1;this.column&&(i=this.column.isRowDrag(this.rowNode)||this.parent.isCustomGui(),s=sx(this.column.getColDef().rowDrag)),s?(this.parent.setDisplayed(!0,e),this.parent.setVisible(i,e)):(this.parent.setDisplayed(i,e),this.parent.setVisible(!0,e))}}},d4=class extends u4{constructor(t,e,i,s){super(t,i,s),this.beans=e}postConstruct(){this.addManagedPropertyListener("suppressRowDrag",this.onSuppressRowDrag.bind(this)),this.addManagedListener(this.rowNode,Tt.EVENT_DATA_CHANGED,this.workOutVisibility.bind(this)),this.addManagedListener(this.rowNode,Tt.EVENT_CELL_CHANGED,this.workOutVisibility.bind(this)),this.addManagedListener(this.rowNode,Tt.EVENT_CELL_CHANGED,this.workOutVisibility.bind(this)),this.addManagedListener(this.beans.eventService,K.EVENT_NEW_COLUMNS_LOADED,this.workOutVisibility.bind(this)),this.workOutVisibility()}onSuppressRowDrag(){this.workOutVisibility()}workOutVisibility(){const t=this.gos.get("suppressRowDrag");this.setDisplayedOrVisible(t)}};z([de],d4.prototype,"postConstruct",1);var h4=class extends u4{constructor(t,e,i,s){super(t,i,s),this.beans=e}postConstruct(){this.addManagedListener(this.beans.eventService,K.EVENT_SORT_CHANGED,this.workOutVisibility.bind(this)),this.addManagedListener(this.beans.eventService,K.EVENT_FILTER_CHANGED,this.workOutVisibility.bind(this)),this.addManagedListener(this.beans.eventService,K.EVENT_COLUMN_ROW_GROUP_CHANGED,this.workOutVisibility.bind(this)),this.addManagedListener(this.beans.eventService,K.EVENT_NEW_COLUMNS_LOADED,this.workOutVisibility.bind(this)),this.addManagedListener(this.rowNode,Tt.EVENT_DATA_CHANGED,this.workOutVisibility.bind(this)),this.addManagedListener(this.rowNode,Tt.EVENT_CELL_CHANGED,this.workOutVisibility.bind(this)),this.addManagedPropertyListener("suppressRowDrag",this.onSuppressRowDrag.bind(this)),this.workOutVisibility()}onSuppressRowDrag(){this.workOutVisibility()}workOutVisibility(){const e=this.beans.ctrlsService.getGridBodyCtrl().getRowDragFeature(),i=e&&e.shouldPreventRowMove(),s=this.gos.get("suppressRowDrag"),r=this.beans.dragAndDropService.hasExternalDropZones(),n=i&&!r||s;this.setDisplayedOrVisible(n)}};z([de],h4.prototype,"postConstruct",1);var $h=class extends ye{init(t,e,i,s,r,n,o){var a,l,c,u;this.params=o,this.eGui=e,this.eCheckbox=i,this.eExpanded=s,this.eContracted=r,this.comp=t,this.compClass=n;const{node:d,value:h,colDef:p}=o,f=this.isTopLevelFooter();if(!f){if(this.isEmbeddedRowMismatch())return;if(d.footer&&this.gos.get("groupHideOpenParents")){const g=p&&p.showRowGroup,y=d.rowGroupColumn&&d.rowGroupColumn.getColId();if(g!==y)return}}if(this.setupShowingValueForOpenedParent(),this.findDisplayedGroupNode(),!f){const m=o.node.footer&&o.node.rowGroupIndex===this.columnModel.getRowGroupColumns().findIndex(A=>{var I;return A.getColId()===((I=o.colDef)==null?void 0:I.showRowGroup)}),y=this.gos.get("groupDisplayType")!="multipleColumns"||this.gos.get("treeData")||this.gos.get("showOpenedGroup")&&!o.node.footer&&(!o.node.group||o.node.rowGroupIndex!=null&&o.node.rowGroupIndex>this.columnModel.getRowGroupColumns().findIndex(A=>{var I;return A.getColId()===((I=o.colDef)==null?void 0:I.showRowGroup)})),v=!d.group&&(((a=this.params.colDef)==null?void 0:a.field)||((l=this.params.colDef)==null?void 0:l.valueGetter)),C=this.isExpandable(),b=this.columnModel.isPivotMode()&&d.leafGroup&&((c=d.rowGroupColumn)==null?void 0:c.getColId())===((u=o.column)==null?void 0:u.getColDef().showRowGroup);if(!this.showingValueForOpenedParent&&!C&&!v&&!y&&!m&&!b)return}this.addExpandAndContract(),this.addFullWidthRowDraggerIfNeeded(),this.addCheckboxIfNeeded(),this.addValueElement(),this.setupIndent(),this.refreshAriaExpanded()}getCellAriaRole(){var t,e;const i=(t=this.params.colDef)==null?void 0:t.cellAriaRole,s=(e=this.params.column)==null?void 0:e.getColDef().cellAriaRole;return i||s||"gridcell"}destroy(){super.destroy(),this.expandListener=null}refreshAriaExpanded(){const{node:t,eGridCell:e}=this.params;if(this.expandListener&&(this.expandListener=this.expandListener()),!this.isExpandable()){sG(e);return}const i=()=>{nc(e,!!t.expanded)};this.expandListener=this.addManagedListener(t,Tt.EVENT_EXPANDED_CHANGED,i)||null,i()}isTopLevelFooter(){if(!this.gos.getGrandTotalRow()||this.params.value!=null||this.params.node.level!=-1)return!1;const e=this.params.colDef;if(e==null||e.showRowGroup===!0)return!0;const s=this.columnModel.getRowGroupColumns();return!s||s.length===0?!0:s[0].getId()===e.showRowGroup}isEmbeddedRowMismatch(){if(!this.params.fullWidth||!this.gos.get("embedFullWidthRows"))return!1;const t=this.params.pinned==="left",e=this.params.pinned==="right",i=!t&&!e;return this.gos.get("enableRtl")?this.columnModel.isPinningLeft()?!e:!i:this.columnModel.isPinningLeft()?!t:!i}findDisplayedGroupNode(){const t=this.params.column,e=this.params.node;if(this.showingValueForOpenedParent){let i=e.parent;for(;i!=null;){if(i.rowGroupColumn&&t.isRowGroupDisplayed(i.rowGroupColumn.getId())){this.displayedGroupNode=i;break}i=i.parent}}St(this.displayedGroupNode)&&(this.displayedGroupNode=e)}setupShowingValueForOpenedParent(){const t=this.params.node,e=this.params.column;if(!this.gos.get("groupHideOpenParents")){this.showingValueForOpenedParent=!1;return}if(!t.groupData){this.showingValueForOpenedParent=!1;return}if(t.rowGroupColumn!=null){const r=t.rowGroupColumn.getId();if(e.isRowGroupDisplayed(r)){this.showingValueForOpenedParent=!1;return}}const s=t.groupData[e.getId()]!=null;this.showingValueForOpenedParent=s}addValueElement(){this.displayedGroupNode.footer?this.addFooterValue():(this.addGroupValue(),this.addChildCount())}addGroupValue(){var t;const e=this.adjustParamsWithDetailsFromRelatedColumn(),i=this.getInnerCompDetails(e),{valueFormatted:s,value:r}=e;let n=s;if(n==null){const o=this.displayedGroupNode.rowGroupColumn&&((t=this.params.column)==null?void 0:t.isRowGroupDisplayed(this.displayedGroupNode.rowGroupColumn.getId()));this.displayedGroupNode.key===""&&this.displayedGroupNode.group&&o?n=this.localeService.getLocaleTextFunc()("blanks","(Blanks)"):n=r??null}this.comp.setInnerRenderer(i,n)}adjustParamsWithDetailsFromRelatedColumn(){const t=this.displayedGroupNode.rowGroupColumn,e=this.params.column;if(!t)return this.params;if(e!=null&&!e.isRowGroupDisplayed(t.getId()))return this.params;const s=this.params,{value:r,node:n}=this.params,o=this.valueService.formatValue(t,n,r);return $i(it({},s),{valueFormatted:o})}addFooterValue(){let t=this.params.totalValueGetter;if(!t){const s=this.params.footerValueGetter;s&&(t=s,ot("As of v31.3, footerValueGetter is deprecated. Use `totalValueGetter` instead."))}let e="";if(t){const s=$R(this.params);s.value=this.params.value,typeof t=="function"?e=t(s):typeof t=="string"?e=this.expressionService.evaluate(t,s):console.warn("AG Grid: footerValueGetter should be either a function or a string (expression)")}else e=this.localeService.getLocaleTextFunc()("footerTotal","Total")+" "+(this.params.value!=null?this.params.value:"");const i=this.getInnerCompDetails(this.params);this.comp.setInnerRenderer(i,e)}getInnerCompDetails(t){if(t.fullWidth)return this.userComponentFactory.getFullWidthGroupRowInnerCellRenderer(this.gos.get("groupRowRendererParams"),t);const e=this.userComponentFactory.getInnerRendererDetails(t,t),i=o=>o&&o.componentClass==this.compClass;if(e&&!i(e))return e;const s=this.displayedGroupNode.rowGroupColumn,r=s?s.getColDef():void 0;if(!r)return;const n=this.userComponentFactory.getCellRendererDetails(r,t);if(n&&!i(n))return n;if(i(n)&&r.cellRendererParams&&r.cellRendererParams.innerRenderer)return this.userComponentFactory.getInnerRendererDetails(r.cellRendererParams,t)}addChildCount(){this.params.suppressCount||(this.addManagedListener(this.displayedGroupNode,Tt.EVENT_ALL_CHILDREN_COUNT_CHANGED,this.updateChildCount.bind(this)),this.updateChildCount())}updateChildCount(){const t=this.displayedGroupNode.allChildrenCount,s=this.isShowRowGroupForThisRow()&&t!=null&&t>=0?`(${t})`:"";this.comp.setChildCount(s)}isShowRowGroupForThisRow(){if(this.gos.get("treeData"))return!0;const t=this.displayedGroupNode.rowGroupColumn;if(!t)return!1;const e=this.params.column;return e==null||e.isRowGroupDisplayed(t.getId())}addExpandAndContract(){var t;const e=this.params,i=ts("groupExpanded",this.gos,null),s=ts("groupContracted",this.gos,null);i&&this.eExpanded.appendChild(i),s&&this.eContracted.appendChild(s);const r=e.eGridCell;!(((t=this.params.column)==null?void 0:t.isCellEditable(e.node))&&this.gos.get("enableGroupEdit"))&&this.isExpandable()&&!e.suppressDoubleClickExpand&&this.addManagedListener(r,"dblclick",this.onCellDblClicked.bind(this)),this.addManagedListener(this.eExpanded,"click",this.onExpandClicked.bind(this)),this.addManagedListener(this.eContracted,"click",this.onExpandClicked.bind(this)),this.addManagedListener(r,"keydown",this.onKeyDown.bind(this)),this.addManagedListener(e.node,Tt.EVENT_EXPANDED_CHANGED,this.showExpandAndContractIcons.bind(this)),this.showExpandAndContractIcons();const o=this.onRowNodeIsExpandableChanged.bind(this);this.addManagedListener(this.displayedGroupNode,Tt.EVENT_ALL_CHILDREN_COUNT_CHANGED,o),this.addManagedListener(this.displayedGroupNode,Tt.EVENT_MASTER_CHANGED,o),this.addManagedListener(this.displayedGroupNode,Tt.EVENT_GROUP_CHANGED,o),this.addManagedListener(this.displayedGroupNode,Tt.EVENT_HAS_CHILDREN_CHANGED,o)}onExpandClicked(t){ha(t)||(va(t),this.onExpandOrContract(t))}onExpandOrContract(t){const e=this.displayedGroupNode,i=!e.expanded;!i&&e.sticky&&this.scrollToStickyNode(e),e.setExpanded(i,t)}scrollToStickyNode(t){this.ctrlsService.getGridBodyCtrl().getScrollFeature().setVerticalScrollPosition(t.rowTop-t.stickyRowTop)}isExpandable(){if(this.showingValueForOpenedParent)return!0;const t=this.displayedGroupNode,e=this.columnModel.isPivotMode()&&t.leafGroup;if(!(t.isExpandable()&&!t.footer&&!e))return!1;const s=this.params.column;return s!=null&&typeof s.getColDef().showRowGroup=="string"?this.isShowRowGroupForThisRow():!0}showExpandAndContractIcons(){const{params:t,displayedGroupNode:e,columnModel:i}=this,{node:s}=t,r=this.isExpandable();if(r){const c=this.showingValueForOpenedParent?!0:s.expanded;this.comp.setExpandedDisplayed(c),this.comp.setContractedDisplayed(!c)}else this.comp.setExpandedDisplayed(!1),this.comp.setContractedDisplayed(!1);const n=i.isPivotMode(),o=n&&e.leafGroup,a=r&&!o,l=s.footer&&s.level===-1;this.comp.addOrRemoveCssClass("ag-cell-expandable",a),this.comp.addOrRemoveCssClass("ag-row-group",a),n?this.comp.addOrRemoveCssClass("ag-pivot-leaf-group",o):l||this.comp.addOrRemoveCssClass("ag-row-group-leaf-indent",!a)}onRowNodeIsExpandableChanged(){this.showExpandAndContractIcons(),this.setIndent(),this.refreshAriaExpanded()}setupIndent(){const t=this.params.node;this.params.suppressPadding||(this.addManagedListener(t,Tt.EVENT_UI_LEVEL_CHANGED,this.setIndent.bind(this)),this.setIndent())}setIndent(){if(this.gos.get("groupHideOpenParents"))return;const t=this.params,e=t.node,i=!!t.colDef,s=this.gos.get("treeData"),n=!i||s||t.colDef.showRowGroup===!0?e.uiLevel:0;this.indentClass&&this.comp.addOrRemoveCssClass(this.indentClass,!1),this.indentClass="ag-row-group-indent-"+n,this.comp.addOrRemoveCssClass(this.indentClass,!0)}addFullWidthRowDraggerIfNeeded(){if(!this.params.fullWidth||!this.params.rowDrag)return;const t=new xh(()=>this.params.value,this.params.node);this.createManagedBean(t,this.context),this.eGui.insertAdjacentElement("afterbegin",t.getGui())}isUserWantsSelected(){const t=this.params.checkbox;return typeof t=="function"||t===!0}addCheckboxIfNeeded(){const t=this.displayedGroupNode,e=this.isUserWantsSelected()&&!t.footer&&!t.rowPinned&&!t.detail;if(e){const i=new DC;this.getContext().createBean(i),i.init({rowNode:this.params.node,column:this.params.column,overrides:{isVisible:this.params.checkbox,callbackParams:this.params,removeHidden:!0}}),this.eCheckbox.appendChild(i.getGui()),this.addDestroyFunc(()=>this.getContext().destroyBean(i))}this.comp.setCheckboxVisible(e)}onKeyDown(t){!(t.key===ce.ENTER)||this.params.suppressEnterExpand||this.params.column&&this.params.column.isCellEditable(this.params.node)||this.onExpandOrContract(t)}onCellDblClicked(t){if(ha(t))return;Hw(this.eExpanded,t)||Hw(this.eContracted,t)||this.onExpandOrContract(t)}};z([W("expressionService")],$h.prototype,"expressionService",2);z([W("valueService")],$h.prototype,"valueService",2);z([W("columnModel")],$h.prototype,"columnModel",2);z([W("userComponentFactory")],$h.prototype,"userComponentFactory",2);z([W("ctrlsService")],$h.prototype,"ctrlsService",2);var Kh=class p4 extends Te{constructor(){super(p4.TEMPLATE)}init(e){const i={setInnerRenderer:(o,a)=>this.setRenderDetails(o,a),setChildCount:o=>this.eChildCount.textContent=o,addOrRemoveCssClass:(o,a)=>this.addOrRemoveCssClass(o,a),setContractedDisplayed:o=>Qt(this.eContracted,o),setExpandedDisplayed:o=>Qt(this.eExpanded,o),setCheckboxVisible:o=>this.eCheckbox.classList.toggle("ag-invisible",!o)},s=this.createManagedBean(new $h),r=!e.colDef,n=this.getGui();s.init(i,n,this.eCheckbox,this.eExpanded,this.eContracted,this.constructor,e),r&&as(n,s.getCellAriaRole())}setRenderDetails(e,i){if(e){const s=e.newAgStackInstance();if(!s)return;s.then(r=>{if(!r)return;const n=()=>this.context.destroyBean(r);this.isAlive()?(this.eValue.appendChild(r.getGui()),this.addDestroyFunc(n)):n()})}else this.eValue.innerText=i}destroy(){this.getContext().destroyBean(this.innerCellRenderer),super.destroy()}refresh(){return!1}};Kh.TEMPLATE=`<span class="ag-cell-wrapper">
            <span class="ag-group-expanded" ref="eExpanded"></span>
            <span class="ag-group-contracted" ref="eContracted"></span>
            <span class="ag-group-checkbox ag-invisible" ref="eCheckbox"></span>
            <span class="ag-group-value" ref="eValue"></span>
            <span class="ag-group-child-count" ref="eChildCount"></span>
        </span>`;z([pe("eExpanded")],Kh.prototype,"eExpanded",2);z([pe("eContracted")],Kh.prototype,"eContracted",2);z([pe("eCheckbox")],Kh.prototype,"eCheckbox",2);z([pe("eValue")],Kh.prototype,"eValue",2);z([pe("eChildCount")],Kh.prototype,"eChildCount",2);var L_=Kh,wx=class f4 extends Te{constructor(){super(f4.TEMPLATE)}init(e){e.node.failedLoad?this.setupFailed():this.setupLoading()}setupFailed(){const e=this.localeService.getLocaleTextFunc();this.eLoadingText.innerText=e("loadingError","ERR")}setupLoading(){const e=ts("groupLoading",this.gos,null);e&&this.eLoadingIcon.appendChild(e);const i=this.localeService.getLocaleTextFunc();this.eLoadingText.innerText=i("loadingOoo","Loading")}refresh(e){return!1}destroy(){super.destroy()}};wx.TEMPLATE=`<div class="ag-loading">
            <span class="ag-loading-icon" ref="eLoadingIcon"></span>
            <span class="ag-loading-text" ref="eLoadingText"></span>
        </div>`;z([pe("eLoadingIcon")],wx.prototype,"eLoadingIcon",2);z([pe("eLoadingText")],wx.prototype,"eLoadingText",2);var EK=wx,g4=class m4 extends Te{constructor(){super(m4.TEMPLATE)}init(e){const i=`ag-cell-skeleton-renderer-${this.getCompId()}`;this.getGui().setAttribute("id",i),this.addDestroyFunc(()=>sg(e.eParentOfValue)),sg(e.eParentOfValue,i),e.node.failedLoad?this.setupFailed():this.setupLoading()}setupFailed(){const e=this.localeService.getLocaleTextFunc();this.getGui().innerText=e("loadingError","ERR");const i=e("ariaSkeletonCellLoadingFailed","Row failed to load");no(this.getGui(),i)}setupLoading(){const i=this.gos.getDocument().createElement("div");i.classList.add("ag-skeleton-effect"),this.getGui().appendChild(i);const r=this.localeService.getLocaleTextFunc()("ariaSkeletonCellLoading","Row data is loading");no(this.getGui(),r)}refresh(e){return!1}destroy(){super.destroy()}};g4.TEMPLATE='<div class="ag-skeleton-container"></div>';var TK=g4,v4=class y4 extends Te{constructor(){super()}destroy(){super.destroy()}init(e){const i=this.gos.get("overlayLoadingTemplate");if(this.setTemplate(i??y4.DEFAULT_LOADING_OVERLAY_TEMPLATE),!i){const s=this.localeService.getLocaleTextFunc();setTimeout(()=>{this.getGui().textContent=s("loadingOoo","Loading...")})}}};v4.DEFAULT_LOADING_OVERLAY_TEMPLATE='<span aria-live="polite" aria-atomic="true" class="ag-overlay-loading-center"></span>';var _K=v4,C4=class b4 extends Te{constructor(){super()}destroy(){super.destroy()}init(e){const i=this.gos.get("overlayNoRowsTemplate");if(this.setTemplate(i??b4.DEFAULT_NO_ROWS_TEMPLATE),!i){const s=this.localeService.getLocaleTextFunc();setTimeout(()=>{this.getGui().textContent=s("noRowsToShow","No Rows To Show")})}}};C4.DEFAULT_NO_ROWS_TEMPLATE='<span class="ag-overlay-no-rows-center"></span>';var AK=C4,RK=class extends Ac{constructor(){super('<div class="ag-tooltip"></div>')}init(t){const{value:e}=t;this.getGui().textContent=Ts(e,!0)}},MK=class{getTemplate(){return'<ag-input-number-field class="ag-cell-editor" ref="eInput"></ag-input-number-field>'}init(t,e){this.eInput=t,this.params=e,e.max!=null&&t.setMax(e.max),e.min!=null&&t.setMin(e.min),e.precision!=null&&t.setPrecision(e.precision),e.step!=null&&t.setStep(e.step);const i=t.getInputElement();e.preventStepping?t.addManagedListener(i,"keydown",this.preventStepping):e.showStepperButtons&&i.classList.add("ag-number-field-input-stepper")}preventStepping(t){(t.key===ce.UP||t.key===ce.DOWN)&&t.preventDefault()}getValue(){const t=this.eInput.getValue();if(!Pe(t)&&!Pe(this.params.value))return this.params.value;let e=this.params.parseValue(t);if(e==null)return e;if(typeof e=="string"){if(e==="")return null;e=Number(e)}return isNaN(e)?null:e}getStartValue(){return this.params.value}},w4=class extends MC{constructor(){super(new MK)}},DK=class{getTemplate(){return'<ag-input-date-field class="ag-cell-editor" ref="eInput"></ag-input-date-field>'}init(t,e){this.eInput=t,this.params=e,e.min!=null&&t.setMin(e.min),e.max!=null&&t.setMax(e.max),e.step!=null&&t.setStep(e.step)}getValue(){const t=this.eInput.getDate();return!Pe(t)&&!Pe(this.params.value)?this.params.value:t??null}getStartValue(){const{value:t}=this.params;if(t instanceof Date)return Fo(t,!1)}},S4=class extends MC{constructor(){super(new DK)}},PK=class{constructor(t){this.getDataTypeService=t}getTemplate(){return'<ag-input-date-field class="ag-cell-editor" ref="eInput"></ag-input-date-field>'}init(t,e){this.eInput=t,this.params=e,e.min!=null&&t.setMin(e.min),e.max!=null&&t.setMax(e.max),e.step!=null&&t.setStep(e.step)}getValue(){const t=this.formatDate(this.eInput.getDate());return!Pe(t)&&!Pe(this.params.value)?this.params.value:this.params.parseValue(t??"")}getStartValue(){var t,e;return Fo((e=this.parseDate((t=this.params.value)!=null?t:void 0))!=null?e:null,!1)}parseDate(t){return this.getDataTypeService().getDateParserFunction(this.params.column)(t)}formatDate(t){return this.getDataTypeService().getDateFormatterFunction(this.params.column)(t)}},kM=class extends MC{constructor(){super(new PK(()=>this.dataTypeService))}};z([W("dataTypeService")],kM.prototype,"dataTypeService",2);var NM=class x4 extends Te{constructor(){super(x4.TEMPLATE)}init(e){this.params=e,this.updateCheckbox(e);const i=this.eCheckbox.getInputElement();i.setAttribute("tabindex","-1"),eM(i,"polite"),this.addManagedListener(i,"click",s=>{if(va(s),this.eCheckbox.isDisabled())return;const r=this.eCheckbox.getValue();this.onCheckboxChanged(r)}),this.addManagedListener(i,"dblclick",s=>{va(s)}),this.addManagedListener(this.params.eGridCell,"keydown",s=>{if(s.key===ce.SPACE&&!this.eCheckbox.isDisabled()){this.params.eGridCell===this.gos.getActiveDomElement()&&this.eCheckbox.toggle();const r=this.eCheckbox.getValue();this.onCheckboxChanged(r),s.preventDefault()}})}refresh(e){return this.params=e,this.updateCheckbox(e),!0}updateCheckbox(e){var i,s,r;let n,o=!0;if(e.node.group&&e.column){const d=e.column.getColId();d.startsWith(rc)?n=e.value==null||e.value===""?void 0:e.value==="true":e.node.aggData&&e.node.aggData[d]!==void 0?n=(i=e.value)!=null?i:void 0:o=!1}else n=(s=e.value)!=null?s:void 0;if(!o){this.eCheckbox.setDisplayed(!1);return}this.eCheckbox.setValue(n);const a=e.disabled!=null?e.disabled:!((r=e.column)!=null&&r.isCellEditable(e.node));this.eCheckbox.setDisabled(a);const l=this.localeService.getLocaleTextFunc(),c=cx(l,n),u=a?c:`${l("ariaToggleCellValue","Press SPACE to toggle cell value")} (${c})`;this.eCheckbox.setInputAriaLabel(u)}onCheckboxChanged(e){const{column:i,node:s,rowIndex:r,value:n}=this.params,o={type:K.EVENT_CELL_EDITING_STARTED,column:i,colDef:i==null?void 0:i.getColDef(),data:s.data,node:s,rowIndex:r,rowPinned:s.rowPinned,value:n};this.eventService.dispatchEvent(o);const a=this.params.node.setDataValue(this.params.column,e,"edit"),l={type:K.EVENT_CELL_EDITING_STOPPED,column:i,colDef:i==null?void 0:i.getColDef(),data:s.data,node:s,rowIndex:r,rowPinned:s.rowPinned,value:n,oldValue:n,newValue:e,valueChanged:a};this.eventService.dispatchEvent(l)}};NM.TEMPLATE=`
        <div class="ag-cell-wrapper ag-checkbox-cell" role="presentation">
            <ag-checkbox role="presentation" ref="eCheckbox"></ag-checkbox>
        </div>`;z([pe("eCheckbox")],NM.prototype,"eCheckbox",2);var E4=NM,OM=class extends Ac{constructor(){super(`
            <div class="ag-cell-wrapper ag-cell-edit-wrapper ag-checkbox-edit">
                <ag-checkbox role="presentation" ref="eCheckbox"></ag-checkbox>
            </div>`)}init(t){var e;this.params=t;const i=(e=t.value)!=null?e:void 0;this.eCheckbox.setValue(i),this.eCheckbox.getInputElement().setAttribute("tabindex","-1"),this.setAriaLabel(i),this.addManagedListener(this.eCheckbox,K.EVENT_FIELD_VALUE_CHANGED,r=>this.setAriaLabel(r.selected))}getValue(){return this.eCheckbox.getValue()}focusIn(){this.eCheckbox.getFocusableElement().focus()}afterGuiAttached(){this.params.cellStartedEdit&&this.focusIn()}isPopup(){return!1}setAriaLabel(t){const e=this.localeService.getLocaleTextFunc(),i=cx(e,t),s=e("ariaToggleCellValue","Press SPACE to toggle cell value");this.eCheckbox.setInputAriaLabel(`${s} (${i})`)}};z([pe("eCheckbox")],OM.prototype,"eCheckbox",2);var GM=class extends Te{constructor(){super(),this.setTemplate("<div></div>")}init(t){var e;this.params=t,this.cssClassPrefix=(e=this.params.cssClassPrefix)!=null?e:"ag-menu-option",this.addIcon(),this.addName(),this.addShortcut(),this.addSubMenu()}configureDefaults(){return!0}addIcon(){if(this.params.isCompact)return;const t=xn(`<span ref="eIcon" class="${this.getClassName("part")} ${this.getClassName("icon")}" role="presentation"></span>`);this.params.checked?t.appendChild(ts("check",this.gos)):this.params.icon&&(wC(this.params.icon)?t.appendChild(this.params.icon):typeof this.params.icon=="string"?t.innerHTML=this.params.icon:console.warn("AG Grid: menu item icon must be DOM node or string")),this.getGui().appendChild(t)}addName(){const t=xn(`<span ref="eName" class="${this.getClassName("part")} ${this.getClassName("text")}">${this.params.name||""}</span>`);this.getGui().appendChild(t)}addShortcut(){if(this.params.isCompact)return;const t=xn(`<span ref="eShortcut" class="${this.getClassName("part")} ${this.getClassName("shortcut")}">${this.params.shortcut||""}</span>`);this.getGui().appendChild(t)}addSubMenu(){const t=xn(`<span ref="ePopupPointer" class="${this.getClassName("part")} ${this.getClassName("popup-pointer")}"></span>`),e=this.getGui();if(this.params.subMenu){const i=this.gos.get("enableRtl")?"smallLeft":"smallRight";nc(e,!1),t.appendChild(ts(i,this.gos))}e.appendChild(t)}getClassName(t){return`${this.cssClassPrefix}-${t}`}destroy(){super.destroy()}},py=class extends ye{constructor(){super(...arguments),this.agGridDefaults={agDateInput:ZG,agColumnHeader:I_,agColumnGroupHeader:bK,agSortIndicator:Cx,agTextColumnFloatingFilter:s4,agNumberColumnFloatingFilter:CK,agDateColumnFloatingFilter:vx,agReadOnlyFloatingFilter:EM,agAnimateShowChangeCellRenderer:IM,agAnimateSlideCellRenderer:FM,agGroupCellRenderer:L_,agGroupRowRenderer:L_,agLoadingCellRenderer:EK,agSkeletonCellRenderer:TK,agCheckboxCellRenderer:E4,agCellEditor:F_,agTextCellEditor:F_,agNumberCellEditor:w4,agDateCellEditor:S4,agDateStringCellEditor:kM,agSelectCellEditor:bx,agLargeTextCellEditor:l4,agCheckboxCellEditor:OM,agTextColumnFilter:og,agNumberColumnFilter:DM,agDateColumnFilter:RM,agLoadingOverlay:_K,agNoRowsOverlay:AK,agTooltipComponent:RK,agMenuItem:GM},this.enterpriseAgDefaultCompsModule={agSetColumnFilter:"@ag-grid-enterprise/set-filter",agSetColumnFloatingFilter:"@ag-grid-enterprise/set-filter",agMultiColumnFilter:"@ag-grid-enterprise/multi-filter",agMultiColumnFloatingFilter:"@ag-grid-enterprise/multi-filter",agGroupColumnFilter:"@ag-grid-enterprise/row-grouping",agGroupColumnFloatingFilter:"@ag-grid-enterprise/row-grouping",agRichSelect:"@ag-grid-enterprise/rich-select",agRichSelectCellEditor:"@ag-grid-enterprise/rich-select",agDetailCellRenderer:"@ag-grid-enterprise/master-detail",agSparklineCellRenderer:"@ag-grid-enterprise/sparklines"},this.jsComps={}}init(){const t=this.gos.get("components");t!=null&&Pr(t,(e,i)=>this.registerJsComponent(e,i))}registerDefaultComponent(t,e){if(this.agGridDefaults[t]){console.error("Trying to overwrite a default component. You should call registerComponent");return}this.agGridDefaults[t]=e}registerJsComponent(t,e){this.jsComps[t]=e}retrieve(t,e){const i=(a,l)=>({componentFromFramework:l,component:a}),s=this.getFrameworkOverrides().frameworkComponent(e,this.gos.get("components"));if(s!=null)return i(s,!0);const r=this.jsComps[e];if(r){const a=this.getFrameworkOverrides().isFrameworkComponent(r);return i(r,a)}const n=this.agGridDefaults[e];if(n)return i(n,!1);const o=this.enterpriseAgDefaultCompsModule[e];return o?vt.__assertRegistered(o,`AG Grid '${t}' component: ${e}`,this.context.getGridId()):eg(()=>{this.warnAboutMissingComponent(t,e)},"MissingComp"+e),null}warnAboutMissingComponent(t,e){const i=[...Object.keys(this.agGridDefaults).filter(r=>!["agCellEditor","agGroupRowRenderer","agSortIndicator"].includes(r)),...Object.keys(this.jsComps)],s=SC(e,i,!0,.8).values;console.warn(`AG Grid: Could not find '${e}' component. It was configured as "${t}: '${e}'" but it wasn't found in the list of registered components.`),s.length>0&&console.warn(`         Did you mean: [${s.slice(0,3)}]?`),console.warn(`If using a custom component check it has been registered as described in: ${this.getFrameworkOverrides().getDocLink("components/")}`)}};z([de],py.prototype,"init",1);py=z([Me("userComponentRegistry")],py);var IK={propertyName:"dateComponent",cellRenderer:!1},FK={propertyName:"headerComponent",cellRenderer:!1},LK={propertyName:"headerGroupComponent",cellRenderer:!1},pF={propertyName:"cellRenderer",cellRenderer:!0},kK={propertyName:"loadingCellRenderer",cellRenderer:!0},NK={propertyName:"cellEditor",cellRenderer:!1},fF={propertyName:"innerRenderer",cellRenderer:!0},OK={propertyName:"loadingOverlayComponent",cellRenderer:!1},GK={propertyName:"noRowsOverlayComponent",cellRenderer:!1},BK={propertyName:"tooltipComponent",cellRenderer:!1},k_={propertyName:"filter",cellRenderer:!1},VK={propertyName:"floatingFilterComponent",cellRenderer:!1},HK={propertyName:"toolPanel",cellRenderer:!1},jK={propertyName:"statusPanel",cellRenderer:!1},UK={propertyName:"fullWidthCellRenderer",cellRenderer:!0},WK={propertyName:"loadingCellRenderer",cellRenderer:!0},zK={propertyName:"groupRowRenderer",cellRenderer:!0},$K={propertyName:"detailCellRenderer",cellRenderer:!0},KK={propertyName:"menuItem",cellRenderer:!1},BM=class{static getFloatingFilterType(t){return this.filterToFloatingFilterMapping[t]}};BM.filterToFloatingFilterMapping={set:"agSetColumnFloatingFilter",agSetColumnFilter:"agSetColumnFloatingFilter",multi:"agMultiColumnFloatingFilter",agMultiColumnFilter:"agMultiColumnFloatingFilter",group:"agGroupColumnFloatingFilter",agGroupColumnFilter:"agGroupColumnFloatingFilter",number:"agNumberColumnFloatingFilter",agNumberColumnFilter:"agNumberColumnFloatingFilter",date:"agDateColumnFloatingFilter",agDateColumnFilter:"agDateColumnFloatingFilter",text:"agTextColumnFloatingFilter",agTextColumnFilter:"agTextColumnFloatingFilter"};var oc=class extends ye{getHeaderCompDetails(t,e){return this.getCompDetails(t,FK,"agColumnHeader",e)}getHeaderGroupCompDetails(t){const e=t.columnGroup.getColGroupDef();return this.getCompDetails(e,LK,"agColumnGroupHeader",t)}getFullWidthCellRendererDetails(t){return this.getCompDetails(this.gridOptions,UK,null,t,!0)}getFullWidthLoadingCellRendererDetails(t){return this.getCompDetails(this.gridOptions,WK,"agLoadingCellRenderer",t,!0)}getFullWidthGroupCellRendererDetails(t){return this.getCompDetails(this.gridOptions,zK,"agGroupRowRenderer",t,!0)}getFullWidthDetailCellRendererDetails(t){return this.getCompDetails(this.gridOptions,$K,"agDetailCellRenderer",t,!0)}getInnerRendererDetails(t,e){return this.getCompDetails(t,fF,null,e)}getFullWidthGroupRowInnerCellRenderer(t,e){return this.getCompDetails(t,fF,null,e)}getCellRendererDetails(t,e){return this.getCompDetails(t,pF,null,e)}getLoadingCellRendererDetails(t,e){return this.getCompDetails(t,kK,"agSkeletonCellRenderer",e,!0)}getCellEditorDetails(t,e){return this.getCompDetails(t,NK,"agCellEditor",e,!0)}getFilterDetails(t,e,i){return this.getCompDetails(t,k_,i,e,!0)}getDateCompDetails(t){return this.getCompDetails(this.gridOptions,IK,"agDateInput",t,!0)}getLoadingOverlayCompDetails(t){return this.getCompDetails(this.gridOptions,OK,"agLoadingOverlay",t,!0)}getNoRowsOverlayCompDetails(t){return this.getCompDetails(this.gridOptions,GK,"agNoRowsOverlay",t,!0)}getTooltipCompDetails(t){return this.getCompDetails(t.colDef,BK,"agTooltipComponent",t,!0)}getSetFilterCellRendererDetails(t,e){return this.getCompDetails(t,pF,null,e)}getFloatingFilterCompDetails(t,e,i){return this.getCompDetails(t,VK,i,e)}getToolPanelCompDetails(t,e){return this.getCompDetails(t,HK,null,e,!0)}getStatusPanelCompDetails(t,e){return this.getCompDetails(t,jK,null,e,!0)}getMenuItemCompDetails(t,e){return this.getCompDetails(t,KK,"agMenuItem",e,!0)}getCompDetails(t,e,i,s,r=!1){const{propertyName:n,cellRenderer:o}=e;let{compName:a,jsComp:l,fwComp:c,paramsFromSelector:u,popupFromSelector:d,popupPositionFromSelector:h}=this.getCompKeys(t,e,s);const p=y=>{const v=this.userComponentRegistry.retrieve(n,y);v&&(l=v.componentFromFramework?void 0:v.component,c=v.componentFromFramework?v.component:void 0)};if(a!=null&&p(a),l==null&&c==null&&i!=null&&p(i),l&&o&&!this.agComponentUtils.doesImplementIComponent(l)&&(l=this.agComponentUtils.adaptFunction(n,l)),!l&&!c){r&&console.error(`AG Grid: Could not find component ${a}, did you forget to configure this component?`);return}const f=this.mergeParamsWithApplicationProvidedParams(t,e,s,u),m=l==null,g=l||c;return{componentFromFramework:m,componentClass:g,params:f,type:e,popupFromSelector:d,popupPositionFromSelector:h,newAgStackInstance:()=>this.newAgStackInstance(g,m,f,e)}}getCompKeys(t,e,i){const{propertyName:s}=e;let r,n,o,a,l,c;if(t){const u=t,d=u[s+"Selector"],h=d?d(i):null,p=f=>{typeof f=="string"?r=f:f!=null&&f!==!0&&(this.getFrameworkOverrides().isFrameworkComponent(f)?o=f:n=f)};h?(p(h.component),a=h.params,l=h.popup,c=h.popupPosition):p(u[s])}return{compName:r,jsComp:n,fwComp:o,paramsFromSelector:a,popupFromSelector:l,popupPositionFromSelector:c}}newAgStackInstance(t,e,i,s){const r=s.propertyName,n=!e;let o;if(n)o=new t;else{const l=this.componentMetadataProvider.retrieve(r);o=this.frameworkComponentWrapper.wrap(t,l.mandatoryMethodList,l.optionalMethodList,s)}const a=this.initComponent(o,i);return a==null?Ft.resolve(o):a.then(()=>o)}mergeParamsWithApplicationProvidedParams(t,e,i,s=null){const r=this.gos.getGridCommonParams();wn(r,i);const n=t,o=n&&n[e.propertyName+"Params"];if(typeof o=="function"){const a=o(i);wn(r,a)}else typeof o=="object"&&wn(r,o);return wn(r,s),r}initComponent(t,e){if(this.context.createBean(t),t.init!=null)return t.init(e)}getDefaultFloatingFilterType(t,e){if(t==null)return null;let i=null,{compName:s,jsComp:r,fwComp:n}=this.getCompKeys(t,k_);return s?i=BM.getFloatingFilterType(s):r==null&&n==null&&t.filter===!0&&(i=e()),i}};z([W("gridOptions")],oc.prototype,"gridOptions",2);z([W("agComponentUtils")],oc.prototype,"agComponentUtils",2);z([W("componentMetadataProvider")],oc.prototype,"componentMetadataProvider",2);z([W("userComponentRegistry")],oc.prototype,"userComponentRegistry",2);z([Vt("frameworkComponentWrapper")],oc.prototype,"frameworkComponentWrapper",2);oc=z([Me("userComponentFactory")],oc);var Sx=(t=>(t[t.SINGLE_SHEET=0]="SINGLE_SHEET",t[t.MULTI_SHEET=1]="MULTI_SHEET",t))(Sx||{}),T4=(t=>(t[t.Above=0]="Above",t[t.Below=1]="Below",t))(T4||{}),PC=class{constructor(t){this.tickingInterval=null,this.onScrollCallback=null,this.scrollContainer=t.scrollContainer,this.scrollHorizontally=t.scrollAxis.indexOf("x")!==-1,this.scrollVertically=t.scrollAxis.indexOf("y")!==-1,this.scrollByTick=t.scrollByTick!=null?t.scrollByTick:20,t.onScrollCallback&&(this.onScrollCallback=t.onScrollCallback),this.scrollVertically&&(this.getVerticalPosition=t.getVerticalPosition,this.setVerticalPosition=t.setVerticalPosition),this.scrollHorizontally&&(this.getHorizontalPosition=t.getHorizontalPosition,this.setHorizontalPosition=t.setHorizontalPosition),this.shouldSkipVerticalScroll=t.shouldSkipVerticalScroll||(()=>!1),this.shouldSkipHorizontalScroll=t.shouldSkipHorizontalScroll||(()=>!1)}check(t,e=!1){const i=e||this.shouldSkipVerticalScroll();if(i&&this.shouldSkipHorizontalScroll())return;const s=this.scrollContainer.getBoundingClientRect(),r=this.scrollByTick;this.tickLeft=t.clientX<s.left+r,this.tickRight=t.clientX>s.right-r,this.tickUp=t.clientY<s.top+r&&!i,this.tickDown=t.clientY>s.bottom-r&&!i,this.tickLeft||this.tickRight||this.tickUp||this.tickDown?this.ensureTickingStarted():this.ensureCleared()}ensureTickingStarted(){this.tickingInterval===null&&(this.tickingInterval=window.setInterval(this.doTick.bind(this),100),this.tickCount=0)}doTick(){this.tickCount++;let t;if(t=this.tickCount>20?200:this.tickCount>10?80:40,this.scrollVertically){const e=this.getVerticalPosition();this.tickUp&&this.setVerticalPosition(e-t),this.tickDown&&this.setVerticalPosition(e+t)}if(this.scrollHorizontally){const e=this.getHorizontalPosition();this.tickLeft&&this.setHorizontalPosition(e-t),this.tickRight&&this.setHorizontalPosition(e+t)}this.onScrollCallback&&this.onScrollCallback()}ensureCleared(){this.tickingInterval&&(window.clearInterval(this.tickingInterval),this.tickingInterval=null)}},po=class extends ye{constructor(t){super(),this.eContainer=t}postConstruct(){this.gos.isRowModelType("clientSide")&&(this.clientSideRowModel=this.rowModel),this.ctrlsService.whenReady(t=>{const e=t.gridBodyCtrl;this.autoScrollService=new PC({scrollContainer:e.getBodyViewportElement(),scrollAxis:"y",getVerticalPosition:()=>e.getScrollFeature().getVScrollPosition().top,setVerticalPosition:i=>e.getScrollFeature().setVerticalScrollPosition(i),onScrollCallback:()=>{this.onDragging(this.lastDraggingEvent)}})})}getContainer(){return this.eContainer}isInterestedIn(t){return t===2}getIconName(){return this.gos.get("rowDragManaged")&&this.shouldPreventRowMove()?st.ICON_NOT_ALLOWED:st.ICON_MOVE}shouldPreventRowMove(){return!!(this.columnModel.getRowGroupColumns().length||this.filterManager.isAnyFilterPresent()||this.sortController.isSortActive())}getRowNodes(t){if(!this.isFromThisGrid(t))return t.dragItem.rowNodes||[];const e=t.dragItem.rowNode;if(this.gos.get("rowDragMultiRow")){const s=[...this.selectionService.getSelectedNodes()].sort((r,n)=>r.rowIndex==null||n.rowIndex==null?0:this.getRowIndexNumber(r)-this.getRowIndexNumber(n));if(s.indexOf(e)!==-1)return s}return[e]}onDragEnter(t){t.dragItem.rowNodes=this.getRowNodes(t),this.dispatchGridEvent(K.EVENT_ROW_DRAG_ENTER,t),this.getRowNodes(t).forEach(e=>{e.setDragging(!0)}),this.onEnterOrDragging(t)}onDragging(t){this.onEnterOrDragging(t)}isFromThisGrid(t){const{dragSourceDomDataKey:e}=t.dragSource;return e===this.gos.getDomDataKey()}isDropZoneWithinThisGrid(t){const i=this.ctrlsService.getGridBodyCtrl().getGui(),{dropZoneTarget:s}=t;return!i.contains(s)}onEnterOrDragging(t){this.dispatchGridEvent(K.EVENT_ROW_DRAG_MOVE,t),this.lastDraggingEvent=t;const e=this.mouseEventService.getNormalisedPosition(t).y;this.gos.get("rowDragManaged")&&this.doManagedDrag(t,e),this.autoScrollService.check(t.event)}doManagedDrag(t,e){const i=this.isFromThisGrid(t),s=this.gos.get("rowDragManaged"),r=t.dragItem.rowNodes;s&&this.shouldPreventRowMove()||(this.gos.get("suppressMoveWhenRowDragging")||!i?this.isDropZoneWithinThisGrid(t)||this.clientSideRowModel.highlightRowAtPixel(r[0],e):this.moveRows(r,e))}getRowIndexNumber(t){return parseInt(di(t.getRowIndexString().split("-")),10)}moveRowAndClearHighlight(t){const e=this.clientSideRowModel.getLastHighlightedRowNode(),i=e&&e.highlighted===1,s=this.mouseEventService.getNormalisedPosition(t).y,r=t.dragItem.rowNodes;let n=i?1:0;if(this.isFromThisGrid(t))r.forEach(o=>{o.rowTop<s&&(n-=1)}),this.moveRows(r,s,n);else{const o=this.gos.getCallback("getRowId");let a=this.clientSideRowModel.getRowIndexAtPixel(s)+1;this.clientSideRowModel.getHighlightPosition(s)===0&&a--,this.clientSideRowModel.updateRowData({add:r.map(l=>l.data).filter(l=>!this.clientSideRowModel.getRowNode(o?o({data:l,level:0}):l.id)),addIndex:a})}this.clearRowHighlight()}clearRowHighlight(){this.clientSideRowModel.highlightRowAtPixel(null)}moveRows(t,e,i=0){var s;this.clientSideRowModel.ensureRowsAtPixel(t,e,i)&&(this.focusService.clearFocusedCell(),(s=this.rangeService)==null||s.removeAllCellRanges())}addRowDropZone(t){if(!t.getContainer()){ot("addRowDropZone - A container target needs to be provided");return}if(this.dragAndDropService.findExternalZone(t)){console.warn("AG Grid: addRowDropZone - target already exists in the list of DropZones. Use `removeRowDropZone` before adding it again.");return}let e={getContainer:t.getContainer};t.fromGrid?e=t:(t.onDragEnter&&(e.onDragEnter=i=>{t.onDragEnter(this.draggingToRowDragEvent(K.EVENT_ROW_DRAG_ENTER,i))}),t.onDragLeave&&(e.onDragLeave=i=>{t.onDragLeave(this.draggingToRowDragEvent(K.EVENT_ROW_DRAG_LEAVE,i))}),t.onDragging&&(e.onDragging=i=>{t.onDragging(this.draggingToRowDragEvent(K.EVENT_ROW_DRAG_MOVE,i))}),t.onDragStop&&(e.onDragStop=i=>{t.onDragStop(this.draggingToRowDragEvent(K.EVENT_ROW_DRAG_END,i))})),this.dragAndDropService.addDropTarget(it({isInterestedIn:i=>i===2,getIconName:()=>st.ICON_MOVE,external:!0},e))}getRowDropZone(t){const e=this.getContainer.bind(this),i=this.onDragEnter.bind(this),s=this.onDragLeave.bind(this),r=this.onDragging.bind(this),n=this.onDragStop.bind(this);return t?{getContainer:e,onDragEnter:t.onDragEnter?o=>{i(o),t.onDragEnter(this.draggingToRowDragEvent(K.EVENT_ROW_DRAG_ENTER,o))}:i,onDragLeave:t.onDragLeave?o=>{s(o),t.onDragLeave(this.draggingToRowDragEvent(K.EVENT_ROW_DRAG_LEAVE,o))}:s,onDragging:t.onDragging?o=>{r(o),t.onDragging(this.draggingToRowDragEvent(K.EVENT_ROW_DRAG_MOVE,o))}:r,onDragStop:t.onDragStop?o=>{n(o),t.onDragStop(this.draggingToRowDragEvent(K.EVENT_ROW_DRAG_END,o))}:n,fromGrid:!0}:{getContainer:e,onDragEnter:i,onDragLeave:s,onDragging:r,onDragStop:n,fromGrid:!0}}draggingToRowDragEvent(t,e){const i=this.mouseEventService.getNormalisedPosition(e).y,s=i>this.paginationProxy.getCurrentPageHeight();let r=-1,n;s||(r=this.rowModel.getRowIndexAtPixel(i),n=this.rowModel.getRow(r));let o;switch(e.vDirection){case 1:o="down";break;case 0:o="up";break;default:o=null;break}return this.gos.addGridCommonParams({type:t,event:e.event,node:e.dragItem.rowNode,nodes:e.dragItem.rowNodes,overIndex:r,overNode:n,y:i,vDirection:o})}dispatchGridEvent(t,e){const i=this.draggingToRowDragEvent(t,e);this.eventService.dispatchEvent(i)}onDragLeave(t){this.dispatchGridEvent(K.EVENT_ROW_DRAG_LEAVE,t),this.stopDragging(t),this.gos.get("rowDragManaged")&&this.clearRowHighlight()}onDragStop(t){this.dispatchGridEvent(K.EVENT_ROW_DRAG_END,t),this.stopDragging(t),this.gos.get("rowDragManaged")&&(this.gos.get("suppressMoveWhenRowDragging")||!this.isFromThisGrid(t))&&!this.isDropZoneWithinThisGrid(t)&&this.moveRowAndClearHighlight(t)}stopDragging(t){this.autoScrollService.ensureCleared(),this.getRowNodes(t).forEach(e=>{e.setDragging(!1)})}};z([W("dragAndDropService")],po.prototype,"dragAndDropService",2);z([W("rowModel")],po.prototype,"rowModel",2);z([W("paginationProxy")],po.prototype,"paginationProxy",2);z([W("columnModel")],po.prototype,"columnModel",2);z([W("focusService")],po.prototype,"focusService",2);z([W("sortController")],po.prototype,"sortController",2);z([W("filterManager")],po.prototype,"filterManager",2);z([W("selectionService")],po.prototype,"selectionService",2);z([W("mouseEventService")],po.prototype,"mouseEventService",2);z([W("ctrlsService")],po.prototype,"ctrlsService",2);z([Vt("rangeService")],po.prototype,"rangeService",2);z([de],po.prototype,"postConstruct",1);var ag=class extends ye{constructor(){super(...arguments),this.dragEndFunctions=[],this.dragSources=[]}removeAllListeners(){this.dragSources.forEach(this.removeListener.bind(this)),this.dragSources.length=0}removeListener(t){const e=t.dragSource.eElement,i=t.mouseDownListener;if(e.removeEventListener("mousedown",i),t.touchEnabled){const s=t.touchStartListener;e.removeEventListener("touchstart",s,{passive:!0})}}removeDragSource(t){const e=this.dragSources.find(i=>i.dragSource===t);e&&(this.removeListener(e),vn(this.dragSources,e))}isDragging(){return this.dragging}addDragSource(t){const e=this.onMouseDown.bind(this,t),{eElement:i,includeTouch:s,stopPropagationForTouch:r}=t;i.addEventListener("mousedown",e);let n=null;const o=this.gos.get("suppressTouch");s&&!o&&(n=a=>{pM(a.target)||(a.cancelable&&(a.preventDefault(),r&&a.stopPropagation()),this.onTouchStart(t,a))},i.addEventListener("touchstart",n,{passive:!1})),this.dragSources.push({dragSource:t,mouseDownListener:e,touchStartListener:n,touchEnabled:!!s})}getStartTarget(){return this.startTarget}onTouchStart(t,e){this.currentDragParams=t,this.dragging=!1;const i=e.touches[0];this.touchLastTime=i,this.touchStart=i;const s=l=>this.onTouchMove(l,t.eElement),r=l=>this.onTouchUp(l,t.eElement),n=l=>{l.cancelable&&l.preventDefault()},o=e.target,a=[{target:this.gos.getRootNode(),type:"touchmove",listener:n,options:{passive:!1}},{target:o,type:"touchmove",listener:s,options:{passive:!0}},{target:o,type:"touchend",listener:r,options:{passive:!0}},{target:o,type:"touchcancel",listener:r,options:{passive:!0}}];this.addTemporaryEvents(a),t.dragStartPixels===0&&this.onCommonMove(i,this.touchStart,t.eElement)}onMouseDown(t,e){const i=e;if(t.skipMouseEvent&&t.skipMouseEvent(e)||i._alreadyProcessedByDragService||(i._alreadyProcessedByDragService=!0,e.button!==0))return;this.shouldPreventMouseEvent(e)&&e.preventDefault(),this.currentDragParams=t,this.dragging=!1,this.mouseStartEvent=e,this.startTarget=e.target;const s=l=>this.onMouseMove(l,t.eElement),r=l=>this.onMouseUp(l,t.eElement),n=l=>l.preventDefault(),o=this.gos.getRootNode(),a=[{target:o,type:"mousemove",listener:s},{target:o,type:"mouseup",listener:r},{target:o,type:"contextmenu",listener:n}];this.addTemporaryEvents(a),t.dragStartPixels===0&&this.onMouseMove(e,t.eElement)}addTemporaryEvents(t){t.forEach(e=>{const{target:i,type:s,listener:r,options:n}=e;i.addEventListener(s,r,n)}),this.dragEndFunctions.push(()=>{t.forEach(e=>{const{target:i,type:s,listener:r,options:n}=e;i.removeEventListener(s,r,n)})})}isEventNearStartEvent(t,e){const{dragStartPixels:i}=this.currentDragParams,s=Pe(i)?i:4;return SM(t,e,s)}getFirstActiveTouch(t){for(let e=0;e<t.length;e++)if(t[e].identifier===this.touchStart.identifier)return t[e];return null}onCommonMove(t,e,i){if(!this.dragging){if(!this.dragging&&this.isEventNearStartEvent(t,e))return;this.dragging=!0;const s={type:K.EVENT_DRAG_STARTED,target:i};this.eventService.dispatchEvent(s),this.currentDragParams.onDragStart(e),this.currentDragParams.onDragging(e)}this.currentDragParams.onDragging(t)}onTouchMove(t,e){const i=this.getFirstActiveTouch(t.touches);i&&this.onCommonMove(i,this.touchStart,e)}onMouseMove(t,e){var i;ol()&&((i=this.gos.getDocument().getSelection())==null||i.removeAllRanges()),this.shouldPreventMouseEvent(t)&&t.preventDefault(),this.onCommonMove(t,this.mouseStartEvent,e)}shouldPreventMouseEvent(t){const e=this.gos.get("enableCellTextSelection"),i=t.type==="mousemove";return e&&i&&t.cancelable&&this.mouseEventService.isEventFromThisGrid(t)&&!this.isOverFormFieldElement(t)}isOverFormFieldElement(t){const e=t.target,i=e==null?void 0:e.tagName.toLocaleLowerCase();return!!(i!=null&&i.match("^a$|textarea|input|select|button"))}onTouchUp(t,e){let i=this.getFirstActiveTouch(t.changedTouches);i||(i=this.touchLastTime),this.onUpCommon(i,e)}onMouseUp(t,e){this.onUpCommon(t,e)}onUpCommon(t,e){if(this.dragging){this.dragging=!1,this.currentDragParams.onDragStop(t);const i={type:K.EVENT_DRAG_STOPPED,target:e};this.eventService.dispatchEvent(i)}this.mouseStartEvent=null,this.startTarget=null,this.touchStart=null,this.touchLastTime=null,this.currentDragParams=null,this.dragEndFunctions.forEach(i=>i()),this.dragEndFunctions.length=0}};z([W("mouseEventService")],ag.prototype,"mouseEventService",2);z([Hi],ag.prototype,"removeAllListeners",1);ag=z([Me("dragService")],ag);var j1="ag-list-item-hovered",IC=class extends ye{constructor(t,e,i){super(),this.comp=t,this.virtualList=e,this.params=i,this.currentDragValue=null,this.lastHoveredListItem=null}postConstruct(){this.addManagedListener(this.params.eventSource,this.params.listItemDragStartEvent,this.listItemDragStart.bind(this)),this.addManagedListener(this.params.eventSource,this.params.listItemDragEndEvent,this.listItemDragEnd.bind(this)),this.createDropTarget(),this.createAutoScrollService()}listItemDragStart(t){this.currentDragValue=this.params.getCurrentDragValue(t),this.moveBlocked=this.params.isMoveBlocked(this.currentDragValue)}listItemDragEnd(){window.setTimeout(()=>{this.currentDragValue=null,this.moveBlocked=!1},10)}createDropTarget(){const t={isInterestedIn:e=>e===this.params.dragSourceType,getIconName:()=>this.moveBlocked?st.ICON_PINNED:st.ICON_MOVE,getContainer:()=>this.comp.getGui(),onDragging:e=>this.onDragging(e),onDragStop:()=>this.onDragStop(),onDragLeave:()=>this.onDragLeave()};this.dragAndDropService.addDropTarget(t)}createAutoScrollService(){const t=this.virtualList.getGui();this.autoScrollService=new PC({scrollContainer:t,scrollAxis:"y",getVerticalPosition:()=>t.scrollTop,setVerticalPosition:e=>t.scrollTop=e})}onDragging(t){if(!this.currentDragValue||this.moveBlocked)return;const e=this.getListDragItem(t),i=this.virtualList.getComponentAt(e.rowIndex);if(!i)return;const s=i.getGui().parentElement;this.lastHoveredListItem&&this.lastHoveredListItem.rowIndex===e.rowIndex&&this.lastHoveredListItem.position===e.position||(this.autoScrollService.check(t.event),this.clearHoveredItems(),this.lastHoveredListItem=e,M_(s,j1),M_(s,`ag-item-highlight-${e.position}`))}getListDragItem(t){const e=this.virtualList.getGui(),i=parseFloat(window.getComputedStyle(e).paddingTop),s=this.virtualList.getRowHeight(),r=this.virtualList.getScrollTop(),n=Math.max(0,(t.y-i+r)/s),o=this.params.getNumRows(this.comp)-1,a=Math.min(o,n)|0;return{rowIndex:a,position:Math.round(n)>n||n>o?"bottom":"top",component:this.virtualList.getComponentAt(a)}}onDragStop(){this.moveBlocked||(this.params.moveItem(this.currentDragValue,this.lastHoveredListItem),this.clearHoveredItems(),this.autoScrollService.ensureCleared())}onDragLeave(){this.clearHoveredItems(),this.autoScrollService.ensureCleared()}clearHoveredItems(){this.virtualList.getGui().querySelectorAll(`.${j1}`).forEach(e=>{[j1,"ag-item-highlight-top","ag-item-highlight-bottom"].forEach(i=>{e.classList.remove(i)})}),this.lastHoveredListItem=null}};z([W("dragAndDropService")],IC.prototype,"dragAndDropService",2);z([de],IC.prototype,"postConstruct",1);function Zd(t){const e=t;return e!=null&&e.getFrameworkComponentInstance!=null?e.getFrameworkComponentInstance():t}var Wt=class{constructor(){this.detailGridInfoMap={},this.destroyCalled=!1}init(){switch(this.rowModel.getType()){case"clientSide":this.clientSideRowModel=this.rowModel;break;case"infinite":this.infiniteRowModel=this.rowModel;break;case"serverSide":this.serverSideRowModel=this.rowModel;break}this.ctrlsService.whenReady(t=>{this.gridBodyCtrl=t.gridBodyCtrl})}__getAlignedGridService(){return this.alignedGridsService}getGridId(){return this.context.getGridId()}addDetailGridInfo(t,e){this.detailGridInfoMap[t]=e}removeDetailGridInfo(t){delete this.detailGridInfoMap[t]}getDetailGridInfo(t){return this.detailGridInfoMap[t]}forEachDetailGridInfo(t){let e=0;Pr(this.detailGridInfoMap,(i,s)=>{Pe(s)&&(t(s,e),e++)})}getDataAsCsv(t){if(vt.__assertRegistered("@ag-grid-community/csv-export","api.getDataAsCsv",this.context.getGridId()))return this.csvCreator.getDataAsCsv(t)}exportDataAsCsv(t){vt.__assertRegistered("@ag-grid-community/csv-export","api.exportDataAsCsv",this.context.getGridId())&&this.csvCreator.exportDataAsCsv(t)}assertNotExcelMultiSheet(t,e){return vt.__assertRegistered("@ag-grid-enterprise/excel-export","api."+t,this.context.getGridId())?this.excelCreator.getFactoryMode()===1?(console.warn("AG Grid: The Excel Exporter is currently on Multi Sheet mode. End that operation by calling 'api.getMultipleSheetAsExcel()' or 'api.exportMultipleSheetsAsExcel()'"),!1):!0:!1}getDataAsExcel(t){if(this.assertNotExcelMultiSheet("getDataAsExcel",t))return this.excelCreator.getDataAsExcel(t)}exportDataAsExcel(t){this.assertNotExcelMultiSheet("exportDataAsExcel",t)&&this.excelCreator.exportDataAsExcel(t)}getSheetDataForExcel(t){if(vt.__assertRegistered("@ag-grid-enterprise/excel-export","api.getSheetDataForExcel",this.context.getGridId()))return this.excelCreator.setFactoryMode(1),this.excelCreator.getSheetDataForExcel(t)}getMultipleSheetsAsExcel(t){if(vt.__assertRegistered("@ag-grid-enterprise/excel-export","api.getMultipleSheetsAsExcel",this.context.getGridId()))return this.excelCreator.getMultipleSheetsAsExcel(t)}exportMultipleSheetsAsExcel(t){vt.__assertRegistered("@ag-grid-enterprise/excel-export","api.exportMultipleSheetsAsExcel",this.context.getGridId())&&this.excelCreator.exportMultipleSheetsAsExcel(t)}setGridAriaProperty(t,e){if(!t)return;const i=this.ctrlsService.getGridBodyCtrl().getGui(),s=`aria-${t}`;e===null?i.removeAttribute(s):i.setAttribute(s,e)}logMissingRowModel(t,...e){console.error(`AG Grid: api.${t} can only be called when gridOptions.rowModelType is ${e.join(" or ")}`)}logDeprecation(t,e,i,s){ot(`Since ${t} api.${e} is deprecated. Please use ${i} instead. ${s??""}`)}getPinnedTopRowCount(){return this.pinnedRowModel.getPinnedTopRowCount()}getPinnedBottomRowCount(){return this.pinnedRowModel.getPinnedBottomRowCount()}getPinnedTopRow(t){return this.pinnedRowModel.getPinnedTopRow(t)}getPinnedBottomRow(t){return this.pinnedRowModel.getPinnedBottomRow(t)}expireValueCache(){this.valueCache.expire()}getVerticalPixelRange(){return this.gridBodyCtrl.getScrollFeature().getVScrollPosition()}getHorizontalPixelRange(){return this.gridBodyCtrl.getScrollFeature().getHScrollPosition()}refreshCells(t={}){this.frameworkOverrides.wrapIncoming(()=>this.rowRenderer.refreshCells(t))}flashCells(t={}){const e=i=>ot(`Since v31.1 api.flashCells parameter '${i}Delay' is deprecated. Please use '${i}Duration' instead.`);Pe(t.fadeDelay)&&e("fade"),Pe(t.flashDelay)&&e("flash"),this.frameworkOverrides.wrapIncoming(()=>this.rowRenderer.flashCells(t))}redrawRows(t={}){const e=t?t.rowNodes:void 0;this.frameworkOverrides.wrapIncoming(()=>this.rowRenderer.redrawRows(e))}refreshHeader(){this.frameworkOverrides.wrapIncoming(()=>this.ctrlsService.getHeaderRowContainerCtrls().forEach(t=>t.refresh()))}isAnyFilterPresent(){return this.filterManager.isAnyFilterPresent()}isColumnFilterPresent(){return this.filterManager.isColumnFilterPresent()||this.filterManager.isAggregateFilterPresent()}isQuickFilterPresent(){return this.filterManager.isQuickFilterPresent()}getModel(){return ot("Since v31.1 getModel() is deprecated. Please use the appropriate grid API methods instead."),this.rowModel}setRowNodeExpanded(t,e,i,s){this.expansionService.setRowNodeExpanded(t,e,i,s)}onGroupExpandedOrCollapsed(){if(St(this.clientSideRowModel)){this.logMissingRowModel("onGroupExpandedOrCollapsed","clientSide");return}this.expansionService.onGroupExpandedOrCollapsed()}refreshClientSideRowModel(t){if(St(this.clientSideRowModel)){this.logMissingRowModel("refreshClientSideRowModel","clientSide");return}this.clientSideRowModel.refreshModel(t)}isAnimationFrameQueueEmpty(){return this.animationFrameService.isQueueEmpty()}flushAllAnimationFrames(){this.animationFrameService.flushAllFrames()}getRowNode(t){return this.rowModel.getRowNode(t)}getSizesForCurrentTheme(){return{rowHeight:this.gos.getRowHeightAsNumber(),headerHeight:this.columnModel.getHeaderHeight()}}expandAll(){this.clientSideRowModel||this.serverSideRowModel?this.expansionService.expandAll(!0):this.logMissingRowModel("expandAll","clientSide","serverSide")}collapseAll(){this.clientSideRowModel||this.serverSideRowModel?this.expansionService.expandAll(!1):this.logMissingRowModel("collapseAll","clientSide","serverSide")}addRenderedRowListener(t,e,i){this.rowRenderer.addRenderedRowListener(t,e,i)}getQuickFilter(){return this.gos.get("quickFilterText")}getAdvancedFilterModel(){return vt.__assertRegistered("@ag-grid-enterprise/advanced-filter","api.getAdvancedFilterModel",this.context.getGridId())?this.filterManager.getAdvancedFilterModel():null}setAdvancedFilterModel(t){this.filterManager.setAdvancedFilterModel(t)}showAdvancedFilterBuilder(){vt.__assertRegistered("@ag-grid-enterprise/advanced-filter","api.setAdvancedFilterModel",this.context.getGridId())&&this.filterManager.showAdvancedFilterBuilder("api")}setNodesSelected(t){if(!t.nodes.every(o=>o.rowPinned?(console.warn("AG Grid: cannot select pinned rows"),!1):o.id===void 0?(console.warn("AG Grid: cannot select node until id for node is known"),!1):!0))return;const{nodes:i,source:s,newValue:r}=t,n=i;this.selectionService.setNodesSelected({nodes:n,source:s??"api",newValue:r})}selectAll(t="apiSelectAll"){this.selectionService.selectAllRowNodes({source:t})}deselectAll(t="apiSelectAll"){this.selectionService.deselectAllRowNodes({source:t})}selectAllFiltered(t="apiSelectAllFiltered"){this.selectionService.selectAllRowNodes({source:t,justFiltered:!0})}deselectAllFiltered(t="apiSelectAllFiltered"){this.selectionService.deselectAllRowNodes({source:t,justFiltered:!0})}getServerSideSelectionState(){return St(this.serverSideRowModel)?(this.logMissingRowModel("getServerSideSelectionState","serverSide"),null):this.selectionService.getSelectionState()}setServerSideSelectionState(t){if(St(this.serverSideRowModel)){this.logMissingRowModel("setServerSideSelectionState","serverSide");return}this.selectionService.setSelectionState(t,"api")}selectAllOnCurrentPage(t="apiSelectAllCurrentPage"){this.selectionService.selectAllRowNodes({source:t,justCurrentPage:!0})}deselectAllOnCurrentPage(t="apiSelectAllCurrentPage"){this.selectionService.deselectAllRowNodes({source:t,justCurrentPage:!0})}showLoadingOverlay(){this.overlayService.showLoadingOverlay()}showNoRowsOverlay(){this.overlayService.showNoRowsOverlay()}hideOverlay(){this.overlayService.hideOverlay()}getSelectedNodes(){return this.selectionService.getSelectedNodes()}getSelectedRows(){return this.selectionService.getSelectedRows()}getBestCostNodeSelection(){if(St(this.clientSideRowModel)){this.logMissingRowModel("getBestCostNodeSelection","clientSide");return}return this.selectionService.getBestCostNodeSelection()}getRenderedNodes(){return this.rowRenderer.getRenderedNodes()}ensureColumnVisible(t,e="auto"){this.frameworkOverrides.wrapIncoming(()=>this.gridBodyCtrl.getScrollFeature().ensureColumnVisible(t,e),"ensureVisible")}ensureIndexVisible(t,e){this.frameworkOverrides.wrapIncoming(()=>this.gridBodyCtrl.getScrollFeature().ensureIndexVisible(t,e),"ensureVisible")}ensureNodeVisible(t,e=null){this.frameworkOverrides.wrapIncoming(()=>this.gridBodyCtrl.getScrollFeature().ensureNodeVisible(t,e),"ensureVisible")}forEachLeafNode(t){if(St(this.clientSideRowModel)){this.logMissingRowModel("forEachLeafNode","clientSide");return}this.clientSideRowModel.forEachLeafNode(t)}forEachNode(t,e){this.rowModel.forEachNode(t,e)}forEachNodeAfterFilter(t){if(St(this.clientSideRowModel)){this.logMissingRowModel("forEachNodeAfterFilter","clientSide");return}this.clientSideRowModel.forEachNodeAfterFilter(t)}forEachNodeAfterFilterAndSort(t){if(St(this.clientSideRowModel)){this.logMissingRowModel("forEachNodeAfterFilterAndSort","clientSide");return}this.clientSideRowModel.forEachNodeAfterFilterAndSort(t)}getFilterInstance(t,e){return ot("'getFilterInstance' is deprecated. To get/set individual filter models, use 'getColumnFilterModel' or 'setColumnFilterModel' instead. To get hold of the filter instance, use 'getColumnFilterInstance' which returns the instance asynchronously."),this.filterManager.getFilterInstance(t,e)}getColumnFilterInstance(t){return this.filterManager.getColumnFilterInstance(t)}destroyFilter(t){const e=this.columnModel.getPrimaryColumn(t);if(e)return this.filterManager.destroyFilter(e,"api")}getStatusPanel(t){if(!vt.__assertRegistered("@ag-grid-enterprise/status-bar","api.getStatusPanel",this.context.getGridId()))return;const e=this.statusBarService.getStatusPanel(t);return Zd(e)}getColumnDef(t){const e=this.columnModel.getPrimaryColumn(t);return e?e.getColDef():null}getColumnDefs(){return this.columnModel.getColumnDefs()}onFilterChanged(t="api"){this.filterManager.onFilterChanged({source:t})}onSortChanged(){this.sortController.onSortChanged("api")}setFilterModel(t){this.frameworkOverrides.wrapIncoming(()=>this.filterManager.setFilterModel(t))}getFilterModel(){return this.filterManager.getFilterModel()}getColumnFilterModel(t){return this.filterManager.getColumnFilterModel(t)}setColumnFilterModel(t,e){return this.filterManager.setColumnFilterModel(t,e)}getFocusedCell(){return this.focusService.getFocusedCell()}clearFocusedCell(){return this.focusService.clearFocusedCell()}setFocusedCell(t,e,i){this.focusService.setFocusedCell({rowIndex:t,column:e,rowPinned:i,forceBrowserFocus:!0})}addRowDropZone(t){this.gridBodyCtrl.getRowDragFeature().addRowDropZone(t)}removeRowDropZone(t){const e=this.dragAndDropService.findExternalZone(t);e&&this.dragAndDropService.removeDropTarget(e)}getRowDropZoneParams(t){return this.gridBodyCtrl.getRowDragFeature().getRowDropZone(t)}assertSideBarLoaded(t){return vt.__assertRegistered("@ag-grid-enterprise/side-bar","api."+t,this.context.getGridId())}isSideBarVisible(){return this.assertSideBarLoaded("isSideBarVisible")&&this.sideBarService.getSideBarComp().isDisplayed()}setSideBarVisible(t){this.assertSideBarLoaded("setSideBarVisible")&&this.sideBarService.getSideBarComp().setDisplayed(t)}setSideBarPosition(t){this.assertSideBarLoaded("setSideBarPosition")&&this.sideBarService.getSideBarComp().setSideBarPosition(t)}openToolPanel(t){this.assertSideBarLoaded("openToolPanel")&&this.sideBarService.getSideBarComp().openToolPanel(t,"api")}closeToolPanel(){this.assertSideBarLoaded("closeToolPanel")&&this.sideBarService.getSideBarComp().close("api")}getOpenedToolPanel(){return this.assertSideBarLoaded("getOpenedToolPanel")?this.sideBarService.getSideBarComp().openedItem():null}refreshToolPanel(){this.assertSideBarLoaded("refreshToolPanel")&&this.sideBarService.getSideBarComp().refresh()}isToolPanelShowing(){return this.assertSideBarLoaded("isToolPanelShowing")&&this.sideBarService.getSideBarComp().isToolPanelShowing()}getToolPanelInstance(t){if(this.assertSideBarLoaded("getToolPanelInstance")){const e=this.sideBarService.getSideBarComp().getToolPanelInstance(t);return Zd(e)}}getSideBar(){if(this.assertSideBarLoaded("getSideBar"))return this.sideBarService.getSideBarComp().getDef()}resetRowHeights(){if(Pe(this.clientSideRowModel)){if(this.columnModel.isAutoRowHeightActive()){console.warn("AG Grid: calling gridApi.resetRowHeights() makes no sense when using Auto Row Height.");return}this.clientSideRowModel.resetRowHeights()}}setRowCount(t,e){if(this.serverSideRowModel){if(this.columnModel.isRowGroupEmpty()){this.serverSideRowModel.setRowCount(t,e);return}console.error("AG Grid: setRowCount cannot be used while using row grouping.");return}if(this.infiniteRowModel){this.infiniteRowModel.setRowCount(t,e);return}this.logMissingRowModel("setRowCount","infinite","serverSide")}onRowHeightChanged(){this.clientSideRowModel?this.clientSideRowModel.onRowHeightChanged():this.serverSideRowModel&&this.serverSideRowModel.onRowHeightChanged()}getValue(t,e){return this.logDeprecation("31.3","getValue","getCellValue"),this.getCellValue({colKey:t,rowNode:e})}getCellValue(t){var e;const{colKey:i,rowNode:s,useFormatter:r}=t;let n=(e=this.columnModel.getPrimaryColumn(i))!=null?e:this.columnModel.getGridColumn(i);if(St(n))return null;const o=this.valueService.getValue(n,s);if(r){const a=this.valueService.formatValue(n,s,o);return a??Ts(o,!0)}return o}addEventListener(t,e){this.apiEventService.addEventListener(t,e)}addGlobalListener(t){this.apiEventService.addGlobalListener(t)}removeEventListener(t,e){this.apiEventService.removeEventListener(t,e)}removeGlobalListener(t){this.apiEventService.removeGlobalListener(t)}dispatchEvent(t){this.eventService.dispatchEvent(t)}destroy(){var t;const e=`See ${this.frameworkOverrides.getDocLink("grid-lifecycle/#grid-pre-destroyed")}`;if(this.destroyCalled)return;const i={type:K.EVENT_GRID_PRE_DESTROYED,state:this.getState()};this.dispatchEvent(i),this.destroyCalled=!0,(t=this.ctrlsService.get("gridCtrl"))==null||t.destroyGridUi(),this.context.destroy(),this.detailGridInfoMap={},T3(this,["isDestroyed"],e)}isDestroyed(){return this.destroyCalled}resetQuickFilter(){this.filterManager.resetQuickFilterCache()}getCellRanges(){return this.rangeService?this.rangeService.getCellRanges():(vt.__assertRegistered("@ag-grid-enterprise/range-selection","api.getCellRanges",this.context.getGridId()),null)}addCellRange(t){if(this.rangeService){this.rangeService.addCellRange(t);return}vt.__assertRegistered("@ag-grid-enterprise/range-selection","api.addCellRange",this.context.getGridId())}clearRangeSelection(){this.rangeService&&this.rangeService.removeAllCellRanges(),vt.__assertRegistered("@ag-grid-enterprise/range-selection","gridApi.clearRangeSelection",this.context.getGridId())}undoCellEditing(){this.undoRedoService.undo("api")}redoCellEditing(){this.undoRedoService.redo("api")}getCurrentUndoSize(){return this.undoRedoService.getCurrentUndoStackSize()}getCurrentRedoSize(){return this.undoRedoService.getCurrentRedoStackSize()}assertChart(t,e){if(vt.__assertRegistered("@ag-grid-enterprise/charts","api."+t,this.context.getGridId()))return this.frameworkOverrides.wrapIncoming(()=>e())}getChartModels(){return this.assertChart("getChartModels",()=>this.chartService.getChartModels())}getChartRef(t){return this.assertChart("getChartRef",()=>this.chartService.getChartRef(t))}getChartImageDataURL(t){return this.assertChart("getChartImageDataURL",()=>this.chartService.getChartImageDataURL(t))}downloadChart(t){return this.assertChart("downloadChart",()=>this.chartService.downloadChart(t))}openChartToolPanel(t){return this.assertChart("openChartToolPanel",()=>this.chartService.openChartToolPanel(t))}closeChartToolPanel(t){return this.assertChart("closeChartToolPanel",()=>this.chartService.closeChartToolPanel(t.chartId))}createRangeChart(t){return this.assertChart("createRangeChart",()=>this.chartService.createRangeChart(t))}createPivotChart(t){return this.assertChart("createPivotChart",()=>this.chartService.createPivotChart(t))}createCrossFilterChart(t){return this.assertChart("createCrossFilterChart",()=>this.chartService.createCrossFilterChart(t))}updateChart(t){return this.assertChart("updateChart",()=>this.chartService.updateChart(t))}restoreChart(t,e){return this.assertChart("restoreChart",()=>this.chartService.restoreChart(t,e))}assertClipboard(t,e){vt.__assertRegistered("@ag-grid-enterprise/clipboard","api"+t,this.context.getGridId())&&e()}copyToClipboard(t){this.assertClipboard("copyToClipboard",()=>this.clipboardService.copyToClipboard(t))}cutToClipboard(t){this.assertClipboard("cutToClipboard",()=>this.clipboardService.cutToClipboard(t))}copySelectedRowsToClipboard(t){this.assertClipboard("copySelectedRowsToClipboard",()=>this.clipboardService.copySelectedRowsToClipboard(t))}copySelectedRangeToClipboard(t){this.assertClipboard("copySelectedRangeToClipboard",()=>this.clipboardService.copySelectedRangeToClipboard(t))}copySelectedRangeDown(){this.assertClipboard("copySelectedRangeDown",()=>this.clipboardService.copyRangeDown())}pasteFromClipboard(){this.assertClipboard("pasteFromClipboard",()=>this.clipboardService.pasteFromClipboard())}showColumnMenuAfterButtonClick(t,e){ot("'showColumnMenuAfterButtonClick' is deprecated. Use 'IHeaderParams.showColumnMenu' within a header component, or 'api.showColumnMenu' elsewhere.");const i=this.columnModel.getGridColumn(t);this.menuService.showColumnMenu({column:i,buttonElement:e,positionBy:"button"})}showColumnMenuAfterMouseClick(t,e){ot("'showColumnMenuAfterMouseClick' is deprecated. Use 'IHeaderParams.showColumnMenuAfterMouseClick' within a header component, or 'api.showColumnMenu' elsewhere.");let i=this.columnModel.getGridColumn(t);if(i||(i=this.columnModel.getPrimaryColumn(t)),!i){console.error(`AG Grid: column '${t}' not found`);return}this.menuService.showColumnMenu({column:i,mouseEvent:e,positionBy:"mouse"})}showContextMenu(t){const{rowNode:e,column:i,value:s,x:r,y:n}=t||{};let{x:o,y:a}=this.menuService.getContextMenuPosition(e,i);r!=null&&(o=r),n!=null&&(a=n),this.menuService.showContextMenu({mouseEvent:new MouseEvent("mousedown",{clientX:o,clientY:a}),rowNode:e,column:i,value:s})}showColumnChooser(t){this.menuService.showColumnChooser({chooserParams:t})}showColumnFilter(t){const e=this.columnModel.getGridColumn(t);if(!e){console.error(`AG Grid: column '${t}' not found`);return}this.menuService.showFilterMenu({column:e,containerType:"columnFilter",positionBy:"auto"})}showColumnMenu(t){const e=this.columnModel.getGridColumn(t);if(!e){console.error(`AG Grid: column '${t}' not found`);return}this.menuService.showColumnMenu({column:e,positionBy:"auto"})}hidePopupMenu(){this.menuService.hidePopupMenu()}hideColumnChooser(){this.menuService.hideColumnChooser()}tabToNextCell(t){return this.navigationService.tabToNextCell(!1,t)}tabToPreviousCell(t){return this.navigationService.tabToNextCell(!0,t)}getCellRendererInstances(t={}){return this.rowRenderer.getCellRendererInstances(t).map(Zd)}getCellEditorInstances(t={}){return this.rowRenderer.getCellEditorInstances(t).map(Zd)}getEditingCells(){return this.rowRenderer.getEditingCells()}stopEditing(t=!1){this.rowRenderer.stopEditing(t)}startEditingCell(t){const e=this.columnModel.getGridColumn(t.colKey);if(!e){console.warn(`AG Grid: no column found for ${t.colKey}`);return}const i={rowIndex:t.rowIndex,rowPinned:t.rowPinned||null,column:e};t.rowPinned==null&&this.ensureIndexVisible(t.rowIndex),this.ensureColumnVisible(t.colKey);const r=this.navigationService.getCellByPosition(i);r&&(this.focusService.isCellFocused(i)||this.focusService.setFocusedCell(i),r.startRowOrCellEdit(t.key))}addAggFunc(t,e){this.logDeprecation("v31.1","addAggFunc(key, func)","addAggFuncs({ key: func })"),this.aggFuncService&&this.aggFuncService.addAggFuncs({key:e})}addAggFuncs(t){this.aggFuncService&&this.aggFuncService.addAggFuncs(t)}clearAggFuncs(){this.aggFuncService&&this.aggFuncService.clear()}applyServerSideTransaction(t){if(!this.serverSideTransactionManager){this.logMissingRowModel("applyServerSideTransaction","serverSide");return}return this.serverSideTransactionManager.applyTransaction(t)}applyServerSideTransactionAsync(t,e){if(!this.serverSideTransactionManager){this.logMissingRowModel("applyServerSideTransactionAsync","serverSide");return}return this.serverSideTransactionManager.applyTransactionAsync(t,e)}applyServerSideRowData(t){var e,i;const s=(e=t.startRow)!=null?e:0,r=(i=t.route)!=null?i:[];if(s<0){console.warn(`AG Grid: invalid value ${t.startRow} for startRow, the value should be >= 0`);return}this.serverSideRowModel?this.serverSideRowModel.applyRowData(t.successParams,s,r):this.logMissingRowModel("setServerSideDatasource","serverSide")}retryServerSideLoads(){if(!this.serverSideRowModel){this.logMissingRowModel("retryServerSideLoads","serverSide");return}this.serverSideRowModel.retryLoads()}flushServerSideAsyncTransactions(){if(!this.serverSideTransactionManager){this.logMissingRowModel("flushServerSideAsyncTransactions","serverSide");return}return this.serverSideTransactionManager.flushAsyncTransactions()}applyTransaction(t){if(!this.clientSideRowModel){this.logMissingRowModel("applyTransaction","clientSide");return}return this.frameworkOverrides.wrapIncoming(()=>this.clientSideRowModel.updateRowData(t))}applyTransactionAsync(t,e){if(!this.clientSideRowModel){this.logMissingRowModel("applyTransactionAsync","clientSide");return}this.frameworkOverrides.wrapIncoming(()=>this.clientSideRowModel.batchUpdateRowData(t,e))}flushAsyncTransactions(){if(!this.clientSideRowModel){this.logMissingRowModel("flushAsyncTransactions","clientSide");return}this.frameworkOverrides.wrapIncoming(()=>this.clientSideRowModel.flushAsyncTransactions())}refreshInfiniteCache(){this.infiniteRowModel?this.infiniteRowModel.refreshCache():this.logMissingRowModel("refreshInfiniteCache","infinite")}purgeInfiniteCache(){this.infiniteRowModel?this.infiniteRowModel.purgeCache():this.logMissingRowModel("purgeInfiniteCache","infinite")}refreshServerSide(t){if(!this.serverSideRowModel){this.logMissingRowModel("refreshServerSide","serverSide");return}this.serverSideRowModel.refreshStore(t)}getServerSideGroupLevelState(){return this.serverSideRowModel?this.serverSideRowModel.getStoreState():(this.logMissingRowModel("getServerSideGroupLevelState","serverSide"),[])}getInfiniteRowCount(){if(this.infiniteRowModel)return this.infiniteRowModel.getRowCount();this.logMissingRowModel("getInfiniteRowCount","infinite")}isLastRowIndexKnown(){if(this.infiniteRowModel)return this.infiniteRowModel.isLastRowIndexKnown();this.logMissingRowModel("isLastRowIndexKnown","infinite")}getCacheBlockState(){return this.rowNodeBlockLoader.getBlockState()}getFirstDisplayedRow(){return this.logDeprecation("v31.1","getFirstDisplayedRow","getFirstDisplayedRowIndex"),this.getFirstDisplayedRowIndex()}getFirstDisplayedRowIndex(){return this.rowRenderer.getFirstVirtualRenderedRow()}getLastDisplayedRow(){return this.logDeprecation("v31.1","getLastDisplayedRow","getLastDisplayedRowIndex"),this.getLastDisplayedRowIndex()}getLastDisplayedRowIndex(){return this.rowRenderer.getLastVirtualRenderedRow()}getDisplayedRowAtIndex(t){return this.rowModel.getRow(t)}getDisplayedRowCount(){return this.rowModel.getRowCount()}paginationIsLastPageFound(){return this.paginationProxy.isLastPageFound()}paginationGetPageSize(){return this.paginationProxy.getPageSize()}paginationGetCurrentPage(){return this.paginationProxy.getCurrentPage()}paginationGetTotalPages(){return this.paginationProxy.getTotalPages()}paginationGetRowCount(){return this.paginationProxy.getMasterRowCount()}paginationGoToNextPage(){this.paginationProxy.goToNextPage()}paginationGoToPreviousPage(){this.paginationProxy.goToPreviousPage()}paginationGoToFirstPage(){this.paginationProxy.goToFirstPage()}paginationGoToLastPage(){this.paginationProxy.goToLastPage()}paginationGoToPage(t){this.paginationProxy.goToPage(t)}sizeColumnsToFit(t){typeof t=="number"?this.columnModel.sizeColumnsToFit(t,"api"):this.gridBodyCtrl.sizeColumnsToFit(t)}setColumnGroupOpened(t,e){this.columnModel.setColumnGroupOpened(t,e,"api")}getColumnGroup(t,e){return this.columnModel.getColumnGroup(t,e)}getProvidedColumnGroup(t){return this.columnModel.getProvidedColumnGroup(t)}getDisplayNameForColumn(t,e){return this.columnModel.getDisplayNameForColumn(t,e)||""}getDisplayNameForColumnGroup(t,e){return this.columnModel.getDisplayNameForColumnGroup(t,e)||""}getColumn(t){return this.columnModel.getPrimaryColumn(t)}getColumns(){return this.columnModel.getAllPrimaryColumns()}applyColumnState(t){return this.columnModel.applyColumnState(t,"api")}getColumnState(){return this.columnModel.getColumnState()}resetColumnState(){this.columnModel.resetColumnState("api")}getColumnGroupState(){return this.columnModel.getColumnGroupState()}setColumnGroupState(t){this.columnModel.setColumnGroupState(t,"api")}resetColumnGroupState(){this.columnModel.resetColumnGroupState("api")}isPinning(){return this.columnModel.isPinningLeft()||this.columnModel.isPinningRight()}isPinningLeft(){return this.columnModel.isPinningLeft()}isPinningRight(){return this.columnModel.isPinningRight()}getDisplayedColAfter(t){return this.columnModel.getDisplayedColAfter(t)}getDisplayedColBefore(t){return this.columnModel.getDisplayedColBefore(t)}setColumnVisible(t,e){this.logDeprecation("v31.1","setColumnVisible(key,visible)","setColumnsVisible([key],visible)"),this.columnModel.setColumnsVisible([t],e,"api")}setColumnsVisible(t,e){this.columnModel.setColumnsVisible(t,e,"api")}setColumnPinned(t,e){this.logDeprecation("v31.1","setColumnPinned(key,pinned)","setColumnsPinned([key],pinned)"),this.columnModel.setColumnsPinned([t],e,"api")}setColumnsPinned(t,e){this.columnModel.setColumnsPinned(t,e,"api")}getAllGridColumns(){return this.columnModel.getAllGridColumns()}getDisplayedLeftColumns(){return this.columnModel.getDisplayedLeftColumns()}getDisplayedCenterColumns(){return this.columnModel.getDisplayedCenterColumns()}getDisplayedRightColumns(){return this.columnModel.getDisplayedRightColumns()}getAllDisplayedColumns(){return this.columnModel.getAllDisplayedColumns()}getAllDisplayedVirtualColumns(){return this.columnModel.getViewportColumns()}moveColumn(t,e){this.logDeprecation("v31.1","moveColumn(key, toIndex)","moveColumns([key], toIndex)"),this.columnModel.moveColumns([t],e,"api")}moveColumnByIndex(t,e){this.columnModel.moveColumnByIndex(t,e,"api")}moveColumns(t,e){this.columnModel.moveColumns(t,e,"api")}moveRowGroupColumn(t,e){this.columnModel.moveRowGroupColumn(t,e,"api")}setColumnAggFunc(t,e){this.columnModel.setColumnAggFunc(t,e,"api")}setColumnWidth(t,e,i=!0,s="api"){this.logDeprecation("v31.1","setColumnWidth(col, width)","setColumnWidths([{key: col, newWidth: width}])"),this.columnModel.setColumnWidths([{key:t,newWidth:e}],!1,i,s)}setColumnWidths(t,e=!0,i="api"){this.columnModel.setColumnWidths(t,!1,e,i)}isPivotMode(){return this.columnModel.isPivotMode()}getPivotResultColumn(t,e){return this.columnModel.getSecondaryPivotColumn(t,e)}setValueColumns(t){this.columnModel.setValueColumns(t,"api")}getValueColumns(){return this.columnModel.getValueColumns()}removeValueColumn(t){this.logDeprecation("v31.1","removeValueColumn(colKey)","removeValueColumns([colKey])"),this.columnModel.removeValueColumns([t],"api")}removeValueColumns(t){this.columnModel.removeValueColumns(t,"api")}addValueColumn(t){this.logDeprecation("v31.1","addValueColumn(colKey)","addValueColumns([colKey])"),this.columnModel.addValueColumns([t],"api")}addValueColumns(t){this.columnModel.addValueColumns(t,"api")}setRowGroupColumns(t){this.columnModel.setRowGroupColumns(t,"api")}removeRowGroupColumn(t){this.logDeprecation("v31.1","removeRowGroupColumn(colKey)","removeRowGroupColumns([colKey])"),this.columnModel.removeRowGroupColumns([t],"api")}removeRowGroupColumns(t){this.columnModel.removeRowGroupColumns(t,"api")}addRowGroupColumn(t){this.logDeprecation("v31.1","addRowGroupColumn(colKey)","addRowGroupColumns([colKey])"),this.columnModel.addRowGroupColumns([t],"api")}addRowGroupColumns(t){this.columnModel.addRowGroupColumns(t,"api")}getRowGroupColumns(){return this.columnModel.getRowGroupColumns()}setPivotColumns(t){this.columnModel.setPivotColumns(t,"api")}removePivotColumn(t){this.logDeprecation("v31.1","removePivotColumn(colKey)","removePivotColumns([colKey])"),this.columnModel.removePivotColumns([t],"api")}removePivotColumns(t){this.columnModel.removePivotColumns(t,"api")}addPivotColumn(t){this.logDeprecation("v31.1","addPivotColumn(colKey)","addPivotColumns([colKey])"),this.columnModel.addPivotColumns([t],"api")}addPivotColumns(t){this.columnModel.addPivotColumns(t,"api")}getPivotColumns(){return this.columnModel.getPivotColumns()}getLeftDisplayedColumnGroups(){return this.columnModel.getDisplayedTreeLeft()}getCenterDisplayedColumnGroups(){return this.columnModel.getDisplayedTreeCentre()}getRightDisplayedColumnGroups(){return this.columnModel.getDisplayedTreeRight()}getAllDisplayedColumnGroups(){return this.columnModel.getAllDisplayedTrees()}autoSizeColumn(t,e){return this.logDeprecation("v31.1","autoSizeColumn(key, skipHeader)","autoSizeColumns([key], skipHeader)"),this.columnModel.autoSizeColumns({columns:[t],skipHeader:e,source:"api"})}autoSizeColumns(t,e){this.columnModel.autoSizeColumns({columns:t,skipHeader:e,source:"api"})}autoSizeAllColumns(t){this.columnModel.autoSizeAllColumns("api",t)}setPivotResultColumns(t){this.columnModel.setSecondaryColumns(t,"api")}getPivotResultColumns(){return this.columnModel.getSecondaryColumns()}getState(){return this.stateService.getState()}getGridOption(t){return this.gos.get(t)}setGridOption(t,e){this.updateGridOptions({[t]:e})}updateGridOptions(t){this.gos.updateGridOptions({options:t})}__internalUpdateGridOptions(t,e){this.gos.updateGridOptions({options:t,force:e,source:"gridOptionsUpdated"})}deprecatedUpdateGridOption(t,e){ot(`set${t.charAt(0).toUpperCase()}${t.slice(1,t.length)} is deprecated. Please use 'api.setGridOption('${t}', newValue)' or 'api.updateGridOptions({ ${t}: newValue })' instead.`),this.setGridOption(t,e)}setPivotMode(t){this.deprecatedUpdateGridOption("pivotMode",t)}setPinnedTopRowData(t){this.deprecatedUpdateGridOption("pinnedTopRowData",t)}setPinnedBottomRowData(t){this.deprecatedUpdateGridOption("pinnedBottomRowData",t)}setPopupParent(t){this.deprecatedUpdateGridOption("popupParent",t)}setSuppressModelUpdateAfterUpdateTransaction(t){this.deprecatedUpdateGridOption("suppressModelUpdateAfterUpdateTransaction",t)}setDataTypeDefinitions(t){this.deprecatedUpdateGridOption("dataTypeDefinitions",t)}setPagination(t){this.deprecatedUpdateGridOption("pagination",t)}paginationSetPageSize(t){this.deprecatedUpdateGridOption("paginationPageSize",t)}setSideBar(t){this.deprecatedUpdateGridOption("sideBar",t)}setSuppressClipboardPaste(t){this.deprecatedUpdateGridOption("suppressClipboardPaste",t)}setGroupRemoveSingleChildren(t){this.deprecatedUpdateGridOption("groupRemoveSingleChildren",t)}setGroupRemoveLowestSingleChildren(t){this.deprecatedUpdateGridOption("groupRemoveLowestSingleChildren",t)}setGroupDisplayType(t){this.deprecatedUpdateGridOption("groupDisplayType",t)}setGroupIncludeFooter(t){this.deprecatedUpdateGridOption("groupIncludeFooter",t)}setGroupIncludeTotalFooter(t){this.deprecatedUpdateGridOption("groupIncludeTotalFooter",t)}setRowClass(t){this.deprecatedUpdateGridOption("rowClass",t)}setDeltaSort(t){this.deprecatedUpdateGridOption("deltaSort",t)}setSuppressRowDrag(t){this.deprecatedUpdateGridOption("suppressRowDrag",t)}setSuppressMoveWhenRowDragging(t){this.deprecatedUpdateGridOption("suppressMoveWhenRowDragging",t)}setSuppressRowClickSelection(t){this.deprecatedUpdateGridOption("suppressRowClickSelection",t)}setEnableAdvancedFilter(t){this.deprecatedUpdateGridOption("enableAdvancedFilter",t)}setIncludeHiddenColumnsInAdvancedFilter(t){this.deprecatedUpdateGridOption("includeHiddenColumnsInAdvancedFilter",t)}setAdvancedFilterParent(t){this.deprecatedUpdateGridOption("advancedFilterParent",t)}setAdvancedFilterBuilderParams(t){this.deprecatedUpdateGridOption("advancedFilterBuilderParams",t)}setQuickFilter(t){ot("setQuickFilter is deprecated. Please use 'api.setGridOption('quickFilterText', newValue)' or 'api.updateGridOptions({ quickFilterText: newValue })' instead."),this.gos.updateGridOptions({options:{quickFilterText:t}})}setExcludeHiddenColumnsFromQuickFilter(t){this.deprecatedUpdateGridOption("includeHiddenColumnsInQuickFilter",!t)}setIncludeHiddenColumnsInQuickFilter(t){this.deprecatedUpdateGridOption("includeHiddenColumnsInQuickFilter",t)}setQuickFilterParser(t){this.deprecatedUpdateGridOption("quickFilterParser",t)}setQuickFilterMatcher(t){this.deprecatedUpdateGridOption("quickFilterMatcher",t)}setAlwaysShowHorizontalScroll(t){this.deprecatedUpdateGridOption("alwaysShowHorizontalScroll",t)}setAlwaysShowVerticalScroll(t){this.deprecatedUpdateGridOption("alwaysShowVerticalScroll",t)}setFunctionsReadOnly(t){this.deprecatedUpdateGridOption("functionsReadOnly",t)}setColumnDefs(t,e="api"){ot("setColumnDefs is deprecated. Please use 'api.setGridOption('columnDefs', newValue)' or 'api.updateGridOptions({ columnDefs: newValue })' instead."),this.gos.updateGridOptions({options:{columnDefs:t},source:e})}setAutoGroupColumnDef(t,e="api"){ot("setAutoGroupColumnDef is deprecated. Please use 'api.setGridOption('autoGroupColumnDef', newValue)' or 'api.updateGridOptions({ autoGroupColumnDef: newValue })' instead."),this.gos.updateGridOptions({options:{autoGroupColumnDef:t},source:e})}setDefaultColDef(t,e="api"){ot("setDefaultColDef is deprecated. Please use 'api.setGridOption('defaultColDef', newValue)' or 'api.updateGridOptions({ defaultColDef: newValue })' instead."),this.gos.updateGridOptions({options:{defaultColDef:t},source:e})}setColumnTypes(t,e="api"){ot("setColumnTypes is deprecated. Please use 'api.setGridOption('columnTypes', newValue)' or 'api.updateGridOptions({ columnTypes: newValue })' instead."),this.gos.updateGridOptions({options:{columnTypes:t},source:e})}setTreeData(t){this.deprecatedUpdateGridOption("treeData",t)}setServerSideDatasource(t){this.deprecatedUpdateGridOption("serverSideDatasource",t)}setCacheBlockSize(t){this.deprecatedUpdateGridOption("cacheBlockSize",t)}setDatasource(t){this.deprecatedUpdateGridOption("datasource",t)}setViewportDatasource(t){this.deprecatedUpdateGridOption("viewportDatasource",t)}setRowData(t){this.deprecatedUpdateGridOption("rowData",t)}setEnableCellTextSelection(t){this.deprecatedUpdateGridOption("enableCellTextSelection",t)}setHeaderHeight(t){this.deprecatedUpdateGridOption("headerHeight",t)}setDomLayout(t){this.deprecatedUpdateGridOption("domLayout",t)}setFillHandleDirection(t){this.deprecatedUpdateGridOption("fillHandleDirection",t)}setGroupHeaderHeight(t){this.deprecatedUpdateGridOption("groupHeaderHeight",t)}setFloatingFiltersHeight(t){this.deprecatedUpdateGridOption("floatingFiltersHeight",t)}setPivotHeaderHeight(t){this.deprecatedUpdateGridOption("pivotHeaderHeight",t)}setPivotGroupHeaderHeight(t){this.deprecatedUpdateGridOption("pivotGroupHeaderHeight",t)}setAnimateRows(t){this.deprecatedUpdateGridOption("animateRows",t)}setIsExternalFilterPresent(t){this.deprecatedUpdateGridOption("isExternalFilterPresent",t)}setDoesExternalFilterPass(t){this.deprecatedUpdateGridOption("doesExternalFilterPass",t)}setNavigateToNextCell(t){this.deprecatedUpdateGridOption("navigateToNextCell",t)}setTabToNextCell(t){this.deprecatedUpdateGridOption("tabToNextCell",t)}setTabToNextHeader(t){this.deprecatedUpdateGridOption("tabToNextHeader",t)}setNavigateToNextHeader(t){this.deprecatedUpdateGridOption("navigateToNextHeader",t)}setRowGroupPanelShow(t){this.deprecatedUpdateGridOption("rowGroupPanelShow",t)}setGetGroupRowAgg(t){this.deprecatedUpdateGridOption("getGroupRowAgg",t)}setGetBusinessKeyForNode(t){this.deprecatedUpdateGridOption("getBusinessKeyForNode",t)}setGetChildCount(t){this.deprecatedUpdateGridOption("getChildCount",t)}setProcessRowPostCreate(t){this.deprecatedUpdateGridOption("processRowPostCreate",t)}setGetRowId(t){ot("getRowId is a static property and can no longer be updated.")}setGetRowClass(t){this.deprecatedUpdateGridOption("getRowClass",t)}setIsFullWidthRow(t){this.deprecatedUpdateGridOption("isFullWidthRow",t)}setIsRowSelectable(t){this.deprecatedUpdateGridOption("isRowSelectable",t)}setIsRowMaster(t){this.deprecatedUpdateGridOption("isRowMaster",t)}setPostSortRows(t){this.deprecatedUpdateGridOption("postSortRows",t)}setGetDocument(t){this.deprecatedUpdateGridOption("getDocument",t)}setGetContextMenuItems(t){this.deprecatedUpdateGridOption("getContextMenuItems",t)}setGetMainMenuItems(t){this.deprecatedUpdateGridOption("getMainMenuItems",t)}setProcessCellForClipboard(t){this.deprecatedUpdateGridOption("processCellForClipboard",t)}setSendToClipboard(t){this.deprecatedUpdateGridOption("sendToClipboard",t)}setProcessCellFromClipboard(t){this.deprecatedUpdateGridOption("processCellFromClipboard",t)}setProcessPivotResultColDef(t){this.deprecatedUpdateGridOption("processPivotResultColDef",t)}setProcessPivotResultColGroupDef(t){this.deprecatedUpdateGridOption("processPivotResultColGroupDef",t)}setPostProcessPopup(t){this.deprecatedUpdateGridOption("postProcessPopup",t)}setInitialGroupOrderComparator(t){this.deprecatedUpdateGridOption("initialGroupOrderComparator",t)}setGetChartToolbarItems(t){this.deprecatedUpdateGridOption("getChartToolbarItems",t)}setPaginationNumberFormatter(t){this.deprecatedUpdateGridOption("paginationNumberFormatter",t)}setGetServerSideGroupLevelParams(t){this.deprecatedUpdateGridOption("getServerSideGroupLevelParams",t)}setIsServerSideGroupOpenByDefault(t){this.deprecatedUpdateGridOption("isServerSideGroupOpenByDefault",t)}setIsApplyServerSideTransaction(t){this.deprecatedUpdateGridOption("isApplyServerSideTransaction",t)}setIsServerSideGroup(t){this.deprecatedUpdateGridOption("isServerSideGroup",t)}setGetServerSideGroupKey(t){this.deprecatedUpdateGridOption("getServerSideGroupKey",t)}setGetRowStyle(t){this.deprecatedUpdateGridOption("getRowStyle",t)}setGetRowHeight(t){this.deprecatedUpdateGridOption("getRowHeight",t)}};z([W("rowRenderer")],Wt.prototype,"rowRenderer",2);z([W("navigationService")],Wt.prototype,"navigationService",2);z([W("filterManager")],Wt.prototype,"filterManager",2);z([W("columnModel")],Wt.prototype,"columnModel",2);z([W("selectionService")],Wt.prototype,"selectionService",2);z([W("gridOptionsService")],Wt.prototype,"gos",2);z([W("valueService")],Wt.prototype,"valueService",2);z([W("alignedGridsService")],Wt.prototype,"alignedGridsService",2);z([W("eventService")],Wt.prototype,"eventService",2);z([W("pinnedRowModel")],Wt.prototype,"pinnedRowModel",2);z([W("context")],Wt.prototype,"context",2);z([W("rowModel")],Wt.prototype,"rowModel",2);z([W("sortController")],Wt.prototype,"sortController",2);z([W("paginationProxy")],Wt.prototype,"paginationProxy",2);z([W("focusService")],Wt.prototype,"focusService",2);z([W("dragAndDropService")],Wt.prototype,"dragAndDropService",2);z([W("menuService")],Wt.prototype,"menuService",2);z([W("valueCache")],Wt.prototype,"valueCache",2);z([W("animationFrameService")],Wt.prototype,"animationFrameService",2);z([W("ctrlsService")],Wt.prototype,"ctrlsService",2);z([W("overlayService")],Wt.prototype,"overlayService",2);z([W("stateService")],Wt.prototype,"stateService",2);z([W("expansionService")],Wt.prototype,"expansionService",2);z([W("apiEventService")],Wt.prototype,"apiEventService",2);z([W("frameworkOverrides")],Wt.prototype,"frameworkOverrides",2);z([W("undoRedoService")],Wt.prototype,"undoRedoService",2);z([W("rowNodeBlockLoader")],Wt.prototype,"rowNodeBlockLoader",2);z([Vt("csvCreator")],Wt.prototype,"csvCreator",2);z([Vt("excelCreator")],Wt.prototype,"excelCreator",2);z([Vt("rangeService")],Wt.prototype,"rangeService",2);z([Vt("clipboardService")],Wt.prototype,"clipboardService",2);z([Vt("aggFuncService")],Wt.prototype,"aggFuncService",2);z([Vt("statusBarService")],Wt.prototype,"statusBarService",2);z([Vt("chartService")],Wt.prototype,"chartService",2);z([Vt("ssrmTransactionManager")],Wt.prototype,"serverSideTransactionManager",2);z([Vt("sideBarService")],Wt.prototype,"sideBarService",2);z([de],Wt.prototype,"init",1);Wt=z([Me("gridApi")],Wt);var En=class extends ye{constructor(){super(...arguments),this.quickFilter=null,this.quickFilterParts=null}postConstruct(){this.addManagedListener(this.eventService,K.EVENT_COLUMN_PIVOT_MODE_CHANGED,()=>this.resetQuickFilterCache()),this.addManagedListener(this.eventService,K.EVENT_NEW_COLUMNS_LOADED,()=>this.resetQuickFilterCache()),this.addManagedListener(this.eventService,K.EVENT_COLUMN_ROW_GROUP_CHANGED,()=>this.resetQuickFilterCache()),this.addManagedListener(this.eventService,K.EVENT_COLUMN_VISIBLE,()=>{this.gos.get("includeHiddenColumnsInQuickFilter")||this.resetQuickFilterCache()}),this.addManagedPropertyListener("quickFilterText",t=>this.setQuickFilter(t.currentValue)),this.addManagedPropertyListeners(["includeHiddenColumnsInQuickFilter","applyQuickFilterBeforePivotOrAgg"],()=>this.onQuickFilterColumnConfigChanged()),this.quickFilter=this.parseQuickFilter(this.gos.get("quickFilterText")),this.parser=this.gos.get("quickFilterParser"),this.matcher=this.gos.get("quickFilterMatcher"),this.setQuickFilterParts(),this.addManagedPropertyListeners(["quickFilterMatcher","quickFilterParser"],()=>this.setQuickFilterParserAndMatcher())}isQuickFilterPresent(){return this.quickFilter!==null}doesRowPassQuickFilter(t){const e=this.gos.get("cacheQuickFilter");return this.matcher?this.doesRowPassQuickFilterMatcher(e,t):this.quickFilterParts.every(i=>e?this.doesRowPassQuickFilterCache(t,i):this.doesRowPassQuickFilterNoCache(t,i))}resetQuickFilterCache(){this.rowModel.forEachNode(t=>t.quickFilterAggregateText=null)}setQuickFilterParts(){const{quickFilter:t,parser:e}=this;t?this.quickFilterParts=e?e(t):t.split(" "):this.quickFilterParts=null}parseQuickFilter(t){return Pe(t)?this.gos.isRowModelType("clientSide")?t.toUpperCase():(console.warn("AG Grid - Quick filtering only works with the Client-Side Row Model"),null):null}setQuickFilter(t){if(t!=null&&typeof t!="string"){console.warn(`AG Grid - Grid option quickFilterText only supports string inputs, received: ${typeof t}`);return}const e=this.parseQuickFilter(t);this.quickFilter!==e&&(this.quickFilter=e,this.setQuickFilterParts(),this.dispatchEvent({type:En.EVENT_QUICK_FILTER_CHANGED}))}setQuickFilterParserAndMatcher(){const t=this.gos.get("quickFilterParser"),e=this.gos.get("quickFilterMatcher"),i=t!==this.parser||e!==this.matcher;this.parser=t,this.matcher=e,i&&(this.setQuickFilterParts(),this.dispatchEvent({type:En.EVENT_QUICK_FILTER_CHANGED}))}onQuickFilterColumnConfigChanged(){this.columnModel.refreshQuickFilterColumns(),this.resetQuickFilterCache(),this.isQuickFilterPresent()&&this.dispatchEvent({type:En.EVENT_QUICK_FILTER_CHANGED})}doesRowPassQuickFilterNoCache(t,e){return this.columnModel.getAllColumnsForQuickFilter().some(s=>{const r=this.getQuickFilterTextForColumn(s,t);return Pe(r)&&r.indexOf(e)>=0})}doesRowPassQuickFilterCache(t,e){return this.checkGenerateQuickFilterAggregateText(t),t.quickFilterAggregateText.indexOf(e)>=0}doesRowPassQuickFilterMatcher(t,e){let i;t?(this.checkGenerateQuickFilterAggregateText(e),i=e.quickFilterAggregateText):i=this.getQuickFilterAggregateText(e);const{quickFilterParts:s,matcher:r}=this;return r(s,i)}checkGenerateQuickFilterAggregateText(t){t.quickFilterAggregateText||(t.quickFilterAggregateText=this.getQuickFilterAggregateText(t))}getQuickFilterTextForColumn(t,e){let i=this.valueService.getValue(t,e,!0);const s=t.getColDef();if(s.getQuickFilterText){const r=this.gos.addGridCommonParams({value:i,node:e,data:e.data,column:t,colDef:s});i=s.getQuickFilterText(r)}return Pe(i)?i.toString().toUpperCase():null}getQuickFilterAggregateText(t){const e=[];return this.columnModel.getAllColumnsForQuickFilter().forEach(s=>{const r=this.getQuickFilterTextForColumn(s,t);Pe(r)&&e.push(r)}),e.join(En.QUICK_FILTER_SEPARATOR)}};En.EVENT_QUICK_FILTER_CHANGED="quickFilterChanged";En.QUICK_FILTER_SEPARATOR=`
`;z([W("valueService")],En.prototype,"valueService",2);z([W("columnModel")],En.prototype,"columnModel",2);z([W("rowModel")],En.prototype,"rowModel",2);z([de],En.prototype,"postConstruct",1);En=z([Me("quickFilterService")],En);var oo=class extends ye{constructor(){super(...arguments),this.allColumnFilters=new Map,this.allColumnListeners=new Map,this.activeAggregateFilters=[],this.activeColumnFilters=[],this.processingFilterChange=!1,this.filterModelUpdateQueue=[],this.columnFilterModelUpdateQueue=[],this.advancedFilterModelUpdateQueue=[]}init(){var t,e,i;this.addManagedListener(this.eventService,K.EVENT_GRID_COLUMNS_CHANGED,()=>this.onColumnsChanged()),this.addManagedListener(this.eventService,K.EVENT_COLUMN_VALUE_CHANGED,()=>this.refreshFiltersForAggregations()),this.addManagedListener(this.eventService,K.EVENT_COLUMN_PIVOT_CHANGED,()=>this.refreshFiltersForAggregations()),this.addManagedListener(this.eventService,K.EVENT_COLUMN_PIVOT_MODE_CHANGED,()=>this.refreshFiltersForAggregations()),this.addManagedListener(this.eventService,K.EVENT_NEW_COLUMNS_LOADED,()=>this.updateAdvancedFilterColumns()),this.addManagedListener(this.eventService,K.EVENT_COLUMN_VISIBLE,()=>this.updateAdvancedFilterColumns()),this.addManagedListener(this.eventService,K.EVENT_ROW_DATA_UPDATED,()=>this.onNewRowsLoaded("rowDataUpdated")),this.externalFilterPresent=this.isExternalFilterPresentCallback(),this.addManagedPropertyListeners(["isExternalFilterPresent","doesExternalFilterPass"],()=>{this.onFilterChanged({source:"api"})}),this.updateAggFiltering(),this.addManagedPropertyListener("groupAggFiltering",()=>{this.updateAggFiltering(),this.onFilterChanged()}),this.addManagedPropertyListener("advancedFilterModel",s=>this.setAdvancedFilterModel(s.currentValue)),this.addManagedListener(this.eventService,K.EVENT_ADVANCED_FILTER_ENABLED_CHANGED,({enabled:s})=>this.onAdvancedFilterEnabledChanged(s)),this.addManagedListener(this.eventService,K.EVENT_DATA_TYPES_INFERRED,()=>this.processFilterModelUpdateQueue()),this.addManagedListener(this.quickFilterService,En.EVENT_QUICK_FILTER_CHANGED,()=>this.onFilterChanged({source:"quickFilter"})),this.initialFilterModel=it({},(i=(e=(t=this.gos.get("initialState"))==null?void 0:t.filter)==null?void 0:e.filterModel)!=null?i:{})}isExternalFilterPresentCallback(){const t=this.gos.getCallback("isExternalFilterPresent");return typeof t=="function"?t({}):!1}doesExternalFilterPass(t){const e=this.gos.get("doesExternalFilterPass");return typeof e=="function"?e(t):!1}setFilterModel(t,e="api"){if(this.isAdvancedFilterEnabled()){this.warnAdvancedFilters();return}if(this.dataTypeService.isPendingInference()){this.filterModelUpdateQueue.push({model:t,source:e});return}const i=[],s=this.getFilterModel();if(t){const r=xM(Object.keys(t));this.allColumnFilters.forEach((n,o)=>{const a=t[o];i.push(this.setModelOnFilterWrapper(n.filterPromise,a)),r.delete(o)}),r.forEach(n=>{const o=this.columnModel.getPrimaryColumn(n)||this.columnModel.getGridColumn(n);if(!o){console.warn("AG Grid: setFilterModel() - no column found for colId: "+n);return}if(!o.isFilterAllowed()){console.warn("AG Grid: setFilterModel() - unable to fully apply model, filtering disabled for colId: "+n);return}const a=this.getOrCreateFilterWrapper(o,"NO_UI");if(!a){console.warn("AG-Grid: setFilterModel() - unable to fully apply model, unable to create filter for colId: "+n);return}i.push(this.setModelOnFilterWrapper(a.filterPromise,t[n]))})}else this.allColumnFilters.forEach(r=>{i.push(this.setModelOnFilterWrapper(r.filterPromise,null))});Ft.all(i).then(()=>{const r=this.getFilterModel(),n=[];this.allColumnFilters.forEach((o,a)=>{const l=s?s[a]:null,c=r?r[a]:null;Q.jsonEquals(l,c)||n.push(o.column)}),n.length>0&&this.onFilterChanged({columns:n,source:e})})}setModelOnFilterWrapper(t,e){return new Ft(i=>{t.then(s=>{typeof s.setModel!="function"&&(console.warn("AG Grid: filter missing setModel method, which is needed for setFilterModel"),i()),(s.setModel(e)||Ft.resolve()).then(()=>i())})})}getFilterModel(){const t={};return this.allColumnFilters.forEach((e,i)=>{const s=this.getModelFromFilterWrapper(e);Pe(s)&&(t[i]=s)}),t}getModelFromFilterWrapper(t){var e;const s=t.filterPromise.resolveNow(null,r=>r);return s==null?(e=this.initialFilterModel[t.column.getColId()])!=null?e:null:typeof s.getModel!="function"?(console.warn("AG Grid: filter API missing getModel method, which is needed for getFilterModel"),null):s.getModel()}isColumnFilterPresent(){return this.activeColumnFilters.length>0}isAggregateFilterPresent(){return!!this.activeAggregateFilters.length}isExternalFilterPresent(){return this.externalFilterPresent}isChildFilterPresent(){return this.isColumnFilterPresent()||this.isQuickFilterPresent()||this.isExternalFilterPresent()||this.isAdvancedFilterPresent()}isAdvancedFilterPresent(){return this.isAdvancedFilterEnabled()&&this.advancedFilterService.isFilterPresent()}onAdvancedFilterEnabledChanged(t){var e;t?this.allColumnFilters.size&&(this.allColumnFilters.forEach(i=>this.disposeFilterWrapper(i,"advancedFilterEnabled")),this.onFilterChanged({source:"advancedFilter"})):(e=this.advancedFilterService)!=null&&e.isFilterPresent()&&(this.advancedFilterService.setModel(null),this.onFilterChanged({source:"advancedFilter"}))}isAdvancedFilterEnabled(){var t;return!!((t=this.advancedFilterService)!=null&&t.isEnabled())}isAdvancedFilterHeaderActive(){return this.isAdvancedFilterEnabled()&&this.advancedFilterService.isHeaderActive()}doAggregateFiltersPass(t,e){return this.doColumnFiltersPass(t,e,!0)}updateActiveFilters(){this.activeColumnFilters.length=0,this.activeAggregateFilters.length=0;const t=s=>s?s.isFilterActive?s.isFilterActive():(console.warn("AG Grid: Filter is missing isFilterActive() method"),!1):!1,e=!!this.gos.getGroupAggFiltering(),i=s=>{if(!s.isPrimary())return!0;const n=!this.columnModel.isPivotActive();return!s.isValueActive()||!n?!1:this.columnModel.isPivotMode()?!0:e};this.allColumnFilters.forEach(s=>{if(s.filterPromise.resolveNow(!1,t)){const r=s.filterPromise.resolveNow(null,n=>n);i(s.column)?this.activeAggregateFilters.push(r):this.activeColumnFilters.push(r)}})}updateFilterFlagInColumns(t,e){this.allColumnFilters.forEach(i=>{const s=i.filterPromise.resolveNow(!1,r=>r.isFilterActive());i.column.setFilterActive(s,t,e)})}isAnyFilterPresent(){return this.isQuickFilterPresent()||this.isColumnFilterPresent()||this.isAggregateFilterPresent()||this.isExternalFilterPresent()||this.isAdvancedFilterPresent()}doColumnFiltersPass(t,e,i){const{data:s,aggData:r}=t,n=i?this.activeAggregateFilters:this.activeColumnFilters,o=i?r:s;for(let a=0;a<n.length;a++){const l=n[a];if(!(l==null||l===e)){if(typeof l.doesFilterPass!="function")throw new Error("Filter is missing method doesFilterPass");if(!l.doesFilterPass({node:t,data:o}))return!1}}return!0}resetQuickFilterCache(){this.quickFilterService.resetQuickFilterCache()}refreshFiltersForAggregations(){this.gos.getGroupAggFiltering()&&this.onFilterChanged()}callOnFilterChangedOutsideRenderCycle(t){const e=()=>this.onFilterChanged(t);this.rowRenderer.isRefreshInProgress()?setTimeout(e,0):e()}onFilterChanged(t={}){const{source:e,filterInstance:i,additionalEventAttributes:s,columns:r}=t;this.updateDependantFilters(),this.updateActiveFilters(),this.updateFilterFlagInColumns("filterChanged",s),this.externalFilterPresent=this.isExternalFilterPresentCallback(),this.allColumnFilters.forEach(o=>{o.filterPromise&&o.filterPromise.then(a=>{a&&a!==i&&a.onAnyFilterChanged&&a.onAnyFilterChanged()})});const n={source:e,type:K.EVENT_FILTER_CHANGED,columns:r||[]};s&&wn(n,s),this.processingFilterChange=!0,this.eventService.dispatchEvent(n),this.processingFilterChange=!1}isSuppressFlashingCellsBecauseFiltering(){var t;return!((t=this.gos.get("allowShowChangeAfterFilter"))!=null?t:!1)&&this.processingFilterChange}isQuickFilterPresent(){return this.quickFilterService.isQuickFilterPresent()}updateAggFiltering(){this.aggFiltering=!!this.gos.getGroupAggFiltering()}isAggregateQuickFilterPresent(){return this.isQuickFilterPresent()&&this.shouldApplyQuickFilterAfterAgg()}isNonAggregateQuickFilterPresent(){return this.isQuickFilterPresent()&&!this.shouldApplyQuickFilterAfterAgg()}shouldApplyQuickFilterAfterAgg(){return(this.aggFiltering||this.columnModel.isPivotMode())&&!this.gos.get("applyQuickFilterBeforePivotOrAgg")}doesRowPassOtherFilters(t,e){return this.doesRowPassFilter({rowNode:e,filterInstanceToSkip:t})}doesRowPassAggregateFilters(t){return!(this.isAggregateQuickFilterPresent()&&!this.quickFilterService.doesRowPassQuickFilter(t.rowNode)||this.isAggregateFilterPresent()&&!this.doAggregateFiltersPass(t.rowNode,t.filterInstanceToSkip))}doesRowPassFilter(t){return!(this.isNonAggregateQuickFilterPresent()&&!this.quickFilterService.doesRowPassQuickFilter(t.rowNode)||this.isExternalFilterPresent()&&!this.doesExternalFilterPass(t.rowNode)||this.isColumnFilterPresent()&&!this.doColumnFiltersPass(t.rowNode,t.filterInstanceToSkip)||this.isAdvancedFilterPresent()&&!this.advancedFilterService.doesFilterPass(t.rowNode))}onNewRowsLoaded(t){this.allColumnFilters.forEach(e=>{e.filterPromise.then(i=>{i.onNewRowsLoaded&&i.onNewRowsLoaded()})}),this.updateFilterFlagInColumns(t,{afterDataChange:!0}),this.updateActiveFilters()}createValueGetter(t){return({node:e})=>this.valueService.getValue(t,e,!0)}createGetValue(t){return(e,i)=>{const s=i?this.columnModel.getGridColumn(i):t;return s?this.valueService.getValue(s,e,!0):void 0}}getFilterComponent(t,e,i=!0){var s;if(i)return((s=this.getOrCreateFilterWrapper(t,e))==null?void 0:s.filterPromise)||null;const r=this.cachedFilter(t);return r?r.filterPromise:null}isFilterActive(t){const e=this.cachedFilter(t);return!!e&&e.filterPromise.resolveNow(!1,i=>i.isFilterActive())}getOrCreateFilterWrapper(t,e){if(!t.isFilterAllowed())return null;let i=this.cachedFilter(t);return i||(i=this.createFilterWrapper(t,e),this.setColumnFilterWrapper(t,i)),i}cachedFilter(t){return this.allColumnFilters.get(t.getColId())}getDefaultFilter(t){let e;if(vt.__isRegistered("@ag-grid-enterprise/set-filter",this.context.getGridId()))e="agSetColumnFilter";else{const i=this.dataTypeService.getBaseDataType(t);i==="number"?e="agNumberColumnFilter":i==="date"||i==="dateString"?e="agDateColumnFilter":e="agTextColumnFilter"}return e}getDefaultFloatingFilter(t){let e;if(vt.__isRegistered("@ag-grid-enterprise/set-filter",this.context.getGridId()))e="agSetColumnFloatingFilter";else{const i=this.dataTypeService.getBaseDataType(t);i==="number"?e="agNumberColumnFloatingFilter":i==="date"||i==="dateString"?e="agDateColumnFloatingFilter":e="agTextColumnFloatingFilter"}return e}createFilterInstance(t){const e=this.getDefaultFilter(t),i=t.getColDef();let s;const r=$i(it({},this.createFilterParams(t,i)),{filterModifiedCallback:()=>this.filterModifiedCallbackFactory(s,t)(),filterChangedCallback:o=>this.filterChangedCallbackFactory(s,t)(o),doesRowPassOtherFilter:o=>this.doesRowPassOtherFilters(s,o)}),n=this.userComponentFactory.getFilterDetails(i,r,e);return n?{filterPromise:()=>{const o=n.newAgStackInstance();return o&&o.then(a=>s=a),o},compDetails:n}:{filterPromise:null,compDetails:null}}createFilterParams(t,e){return this.gos.addGridCommonParams({column:t,colDef:$R(e),rowModel:this.rowModel,filterChangedCallback:()=>{},filterModifiedCallback:()=>{},valueGetter:this.createValueGetter(t),getValue:this.createGetValue(t),doesRowPassOtherFilter:()=>!0})}createFilterWrapper(t,e){var i;const s={column:t,filterPromise:null,compiledElement:null,compDetails:null},{filterPromise:r,compDetails:n}=this.createFilterInstance(t);return s.filterPromise=(i=r==null?void 0:r())!=null?i:null,s.compDetails=n,s}onColumnsChanged(){const t=[];this.allColumnFilters.forEach((e,i)=>{let s;e.column.isPrimary()?s=this.columnModel.getPrimaryColumn(i):s=this.columnModel.getGridColumn(i),!(s&&s===e.column)&&(t.push(e.column),this.disposeFilterWrapper(e,"columnChanged"),this.disposeColumnListener(i))}),t.length>0?this.onFilterChanged({columns:t,source:"api"}):this.updateDependantFilters()}updateDependantFilters(){const t=this.columnModel.getGroupAutoColumns();t==null||t.forEach(e=>{e.getColDef().filter==="agGroupColumnFilter"&&this.getOrCreateFilterWrapper(e,"NO_UI")})}isFilterAllowed(t){var e,i;if(this.isAdvancedFilterEnabled()||!t.isFilterAllowed())return!1;const r=this.allColumnFilters.get(t.getColId());return(i=(e=r==null?void 0:r.filterPromise)==null?void 0:e.resolveNow(!0,n=>typeof(n==null?void 0:n.isFilterAllowed)=="function"?n==null?void 0:n.isFilterAllowed():!0))!=null?i:!0}getFloatingFilterCompDetails(t,e){const i=l=>{const c=this.getFilterComponent(t,"NO_UI");c!=null&&c.then(u=>{l(Zd(u))})},s=t.getColDef(),r=$i(it({},this.createFilterParams(t,s)),{filterChangedCallback:()=>i(l=>this.filterChangedCallbackFactory(l,t)())}),n=this.userComponentFactory.mergeParamsWithApplicationProvidedParams(s,k_,r);let o=this.userComponentFactory.getDefaultFloatingFilterType(s,()=>this.getDefaultFloatingFilter(t));o==null&&(o="agReadOnlyFloatingFilter");const a={column:t,filterParams:n,currentParentModel:()=>this.getCurrentFloatingFilterParentModel(t),parentFilterInstance:i,showParentFilter:e,suppressFilterButton:!1};return this.userComponentFactory.getFloatingFilterCompDetails(s,a,o)}getCurrentFloatingFilterParentModel(t){const e=this.getFilterComponent(t,"NO_UI",!1);return e?e.resolveNow(null,i=>i&&i.getModel()):null}destroyFilter(t,e="api"){const i=t.getColId(),s=this.allColumnFilters.get(i);this.disposeColumnListener(i),delete this.initialFilterModel[i],s&&(this.disposeFilterWrapper(s,e),this.onFilterChanged({columns:[t],source:"api"}))}disposeColumnListener(t){const e=this.allColumnListeners.get(t);e&&(this.allColumnListeners.delete(t),e())}disposeFilterWrapper(t,e){t.filterPromise.then(i=>{this.getContext().destroyBean(i),t.column.setFilterActive(!1,"filterDestroyed"),this.allColumnFilters.delete(t.column.getColId());const s={type:K.EVENT_FILTER_DESTROYED,source:e,column:t.column};this.eventService.dispatchEvent(s)})}filterModifiedCallbackFactory(t,e){return()=>{const i={type:K.EVENT_FILTER_MODIFIED,column:e,filterInstance:t};this.eventService.dispatchEvent(i)}}filterChangedCallbackFactory(t,e){return i=>{var s;const r=(s=i==null?void 0:i.source)!=null?s:"api",n={filter:t,additionalEventAttributes:i,columns:[e],source:r};this.callOnFilterChangedOutsideRenderCycle(n)}}checkDestroyFilter(t){const e=this.allColumnFilters.get(t);if(!e)return;const i=e.column,{compDetails:s}=i.isFilterAllowed()?this.createFilterInstance(i):{compDetails:null};if(this.areFilterCompsDifferent(e.compDetails,s)){this.destroyFilter(i,"paramsUpdated");return}const r=i.getColDef().filterParams;if(!e.filterPromise){this.destroyFilter(i,"paramsUpdated");return}e.filterPromise.then(n=>{(n!=null&&n.refresh?n.refresh(it($i(it({},this.createFilterParams(i,i.getColDef())),{filterModifiedCallback:this.filterModifiedCallbackFactory(n,i),filterChangedCallback:this.filterChangedCallbackFactory(n,i),doesRowPassOtherFilter:a=>this.doesRowPassOtherFilters(n,a)}),r)):!0)===!1&&this.destroyFilter(i,"paramsUpdated")})}setColumnFilterWrapper(t,e){const i=t.getColId();this.allColumnFilters.set(i,e),this.allColumnListeners.set(i,this.addManagedListener(t,Nt.EVENT_COL_DEF_CHANGED,()=>this.checkDestroyFilter(i)))}areFilterCompsDifferent(t,e){if(!e||!t)return!0;const{componentClass:i}=t,{componentClass:s}=e;return!(i===s||(i==null?void 0:i.render)&&(s==null?void 0:s.render)&&i.render===s.render)}getAdvancedFilterModel(){return this.isAdvancedFilterEnabled()?this.advancedFilterService.getModel():null}setAdvancedFilterModel(t){if(this.isAdvancedFilterEnabled()){if(this.dataTypeService.isPendingInference()){this.advancedFilterModelUpdateQueue.push(t);return}this.advancedFilterService.setModel(t??null),this.onFilterChanged({source:"advancedFilter"})}}showAdvancedFilterBuilder(t){this.isAdvancedFilterEnabled()&&this.advancedFilterService.getCtrl().toggleFilterBuilder(t,!0)}updateAdvancedFilterColumns(){this.isAdvancedFilterEnabled()&&this.advancedFilterService.updateValidity()&&this.onFilterChanged({source:"advancedFilter"})}hasFloatingFilters(){return this.isAdvancedFilterEnabled()?!1:this.columnModel.getAllGridColumns().some(e=>e.getColDef().floatingFilter)}getFilterInstance(t,e){if(this.isAdvancedFilterEnabled()){this.warnAdvancedFilters();return}const i=this.getFilterInstanceImpl(t,r=>{if(!e)return;const n=Zd(r);e(n)});return Zd(i)}getColumnFilterInstance(t){return new Promise(e=>{this.getFilterInstance(t,i=>{e(i)})})}getFilterInstanceImpl(t,e){const i=this.columnModel.getPrimaryColumn(t);if(!i)return;const s=this.getFilterComponent(i,"NO_UI"),r=s&&s.resolveNow(null,n=>n);return r?setTimeout(e,0,r):s&&s.then(n=>{e(n)}),r}warnAdvancedFilters(){ot("Column Filter API methods have been disabled as Advanced Filters are enabled.")}setupAdvancedFilterHeaderComp(t){var e;(e=this.advancedFilterService)==null||e.getCtrl().setupHeaderComp(t)}getHeaderRowCount(){return this.isAdvancedFilterHeaderActive()?1:0}getHeaderHeight(){return this.isAdvancedFilterHeaderActive()?this.advancedFilterService.getCtrl().getHeaderHeight():0}processFilterModelUpdateQueue(){this.filterModelUpdateQueue.forEach(({model:t,source:e})=>this.setFilterModel(t,e)),this.filterModelUpdateQueue=[],this.columnFilterModelUpdateQueue.forEach(({key:t,model:e,resolve:i})=>{this.setColumnFilterModel(t,e).then(()=>i())}),this.columnFilterModelUpdateQueue=[],this.advancedFilterModelUpdateQueue.forEach(t=>this.setAdvancedFilterModel(t)),this.advancedFilterModelUpdateQueue=[]}getColumnFilterModel(t){const e=this.getFilterWrapper(t);return e?this.getModelFromFilterWrapper(e):null}setColumnFilterModel(t,e){if(this.isAdvancedFilterEnabled())return this.warnAdvancedFilters(),Promise.resolve();if(this.dataTypeService.isPendingInference()){let n=()=>{};const o=new Promise(a=>{n=a});return this.columnFilterModelUpdateQueue.push({key:t,model:e,resolve:n}),o}const i=this.columnModel.getPrimaryColumn(t),s=i?this.getOrCreateFilterWrapper(i,"NO_UI"):null;return s?(n=>new Promise(o=>{n.then(a=>o(a))}))(this.setModelOnFilterWrapper(s.filterPromise,e)):Promise.resolve()}getFilterWrapper(t){var e;const i=this.columnModel.getPrimaryColumn(t);return i&&(e=this.cachedFilter(i))!=null?e:null}destroy(){super.destroy(),this.allColumnFilters.forEach(t=>this.disposeFilterWrapper(t,"gridDestroyed")),this.allColumnListeners.clear()}};z([W("valueService")],oo.prototype,"valueService",2);z([W("columnModel")],oo.prototype,"columnModel",2);z([W("rowModel")],oo.prototype,"rowModel",2);z([W("userComponentFactory")],oo.prototype,"userComponentFactory",2);z([W("rowRenderer")],oo.prototype,"rowRenderer",2);z([W("dataTypeService")],oo.prototype,"dataTypeService",2);z([W("quickFilterService")],oo.prototype,"quickFilterService",2);z([Vt("advancedFilterService")],oo.prototype,"advancedFilterService",2);z([de],oo.prototype,"init",1);oo=z([Me("filterManager")],oo);var ed=class extends Te{constructor(t,e){super('<div class="ag-filter"></div>'),this.column=t,this.source=e,this.filterWrapper=null}postConstruct(){this.createFilter(!0),this.addManagedListener(this.eventService,K.EVENT_FILTER_DESTROYED,this.onFilterDestroyed.bind(this))}hasFilter(){return!!this.filterWrapper}getFilter(){var t,e;return(e=(t=this.filterWrapper)==null?void 0:t.filterPromise)!=null?e:null}afterInit(){var t,e,i;return(i=(e=(t=this.filterWrapper)==null?void 0:t.filterPromise)==null?void 0:e.then(()=>{}))!=null?i:Ft.resolve()}afterGuiAttached(t){var e,i;(i=(e=this.filterWrapper)==null?void 0:e.filterPromise)==null||i.then(s=>{var r;(r=s==null?void 0:s.afterGuiAttached)==null||r.call(s,t)})}afterGuiDetached(){var t,e;(e=(t=this.filterWrapper)==null?void 0:t.filterPromise)==null||e.then(i=>{var s;(s=i==null?void 0:i.afterGuiDetached)==null||s.call(i)})}createFilter(t){var e;const{column:i,source:s}=this;this.filterWrapper=this.filterManager.getOrCreateFilterWrapper(i,s),(e=this.filterWrapper)!=null&&e.filterPromise&&this.filterWrapper.filterPromise.then(r=>{let n=r.getGui();if(Pe(n)||console.warn(`AG Grid: getGui method from filter returned ${n}, it should be a DOM element or an HTML template string.`),typeof n=="string"&&(n=xn(n)),this.appendChild(n),t){const o={type:K.EVENT_FILTER_OPENED,column:i,source:s,eGui:this.getGui()};this.eventService.dispatchEvent(o)}})}onFilterDestroyed(t){(t.source==="api"||t.source==="paramsUpdated")&&t.column.getId()===this.column.getId()&&this.columnModel.getPrimaryColumn(this.column)&&(Cs(this.getGui()),this.createFilter())}destroy(){this.filterWrapper=null,super.destroy()}};z([W("filterManager")],ed.prototype,"filterManager",2);z([W("columnModel")],ed.prototype,"columnModel",2);z([de],ed.prototype,"postConstruct",1);var VM=class extends Te{constructor(t,e){super(t),this.ctrl=e}getCtrl(){return this.ctrl}},Yh=class _4 extends VM{constructor(e){super(_4.TEMPLATE,e)}postConstruct(){const e=this.getGui(),i={addOrRemoveCssClass:(s,r)=>this.addOrRemoveCssClass(s,r),addOrRemoveBodyCssClass:(s,r)=>this.eFloatingFilterBody.classList.toggle(s,r),setButtonWrapperDisplayed:s=>Qt(this.eButtonWrapper,s),setCompDetails:s=>this.setCompDetails(s),getFloatingFilterComp:()=>this.compPromise,setWidth:s=>e.style.width=s,setMenuIcon:s=>this.eButtonShowMainFilter.appendChild(s)};this.ctrl.setComp(i,e,this.eButtonShowMainFilter,this.eFloatingFilterBody)}setCompDetails(e){if(!e){this.destroyFloatingFilterComp(),this.compPromise=null;return}this.compPromise=e.newAgStackInstance(),this.compPromise.then(i=>this.afterCompCreated(i))}destroyFloatingFilterComp(){this.floatingFilterComp&&(this.eFloatingFilterBody.removeChild(this.floatingFilterComp.getGui()),this.floatingFilterComp=this.destroyBean(this.floatingFilterComp))}afterCompCreated(e){if(e){if(!this.isAlive()){this.destroyBean(e);return}this.destroyFloatingFilterComp(),this.floatingFilterComp=e,this.eFloatingFilterBody.appendChild(e.getGui()),e.afterGuiAttached&&e.afterGuiAttached()}}};Yh.TEMPLATE=`<div class="ag-header-cell ag-floating-filter" role="gridcell">
            <div ref="eFloatingFilterBody" role="presentation"></div>
            <div class="ag-floating-filter-button ag-hidden" ref="eButtonWrapper" role="presentation">
                <button type="button" class="ag-button ag-floating-filter-button-button" ref="eButtonShowMainFilter" tabindex="-1"></button>
            </div>
        </div>`;z([pe("eFloatingFilterBody")],Yh.prototype,"eFloatingFilterBody",2);z([pe("eButtonWrapper")],Yh.prototype,"eButtonWrapper",2);z([pe("eButtonShowMainFilter")],Yh.prototype,"eButtonShowMainFilter",2);z([de],Yh.prototype,"postConstruct",1);z([Hi],Yh.prototype,"destroyFloatingFilterComp",1);var A4=Yh,R4=(t=>(t.AUTO_HEIGHT="ag-layout-auto-height",t.NORMAL="ag-layout-normal",t.PRINT="ag-layout-print",t))(R4||{}),xx=class extends ye{constructor(t){super(),this.view=t}postConstruct(){this.addManagedPropertyListener("domLayout",this.updateLayoutClasses.bind(this)),this.updateLayoutClasses()}updateLayoutClasses(){const t=this.getDomLayout(),e={autoHeight:t==="autoHeight",normal:t==="normal",print:t==="print"},i=e.autoHeight?"ag-layout-auto-height":e.print?"ag-layout-print":"ag-layout-normal";this.view.updateLayoutClasses(i,e)}getDomLayout(){var t;const e=(t=this.gos.get("domLayout"))!=null?t:"normal";return["normal","print","autoHeight"].indexOf(e)===-1?(ot(`${e} is not valid for DOM Layout, valid values are 'normal', 'autoHeight', 'print'.`),"normal"):e}};z([de],xx.prototype,"postConstruct",1);var Rc=class extends ye{constructor(t){super(),this.lastScrollSource=[null,null],this.scrollLeft=-1,this.nextScrollTop=-1,this.scrollTop=-1,this.lastOffsetHeight=-1,this.lastScrollTop=-1,this.eBodyViewport=t,this.resetLastHScrollDebounced=qr(()=>this.lastScrollSource[1]=null,500),this.resetLastVScrollDebounced=qr(()=>this.lastScrollSource[0]=null,500)}postConstruct(){this.enableRtl=this.gos.get("enableRtl"),this.addManagedListener(this.eventService,K.EVENT_DISPLAYED_COLUMNS_WIDTH_CHANGED,this.onDisplayedColumnsWidthChanged.bind(this)),this.ctrlsService.whenReady(t=>{this.centerRowsCtrl=t.center,this.onDisplayedColumnsWidthChanged(),this.addScrollListener()})}addScrollListener(){const{fakeHScrollComp:t,fakeVScrollComp:e}=this.ctrlsService.getParams();this.addManagedListener(this.centerRowsCtrl.getViewportElement(),"scroll",this.onHScroll.bind(this)),t.onScrollCallback(this.onFakeHScroll.bind(this));const i=this.gos.get("debounceVerticalScrollbar"),s=i?qr(this.onVScroll.bind(this),100):this.onVScroll.bind(this),r=i?qr(this.onFakeVScroll.bind(this),100):this.onFakeVScroll.bind(this);this.addManagedListener(this.eBodyViewport,"scroll",s),e.onScrollCallback(r)}onDisplayedColumnsWidthChanged(){this.enableRtl&&this.horizontallyScrollHeaderCenterAndFloatingCenter()}horizontallyScrollHeaderCenterAndFloatingCenter(t){if(this.centerRowsCtrl==null)return;t===void 0&&(t=this.centerRowsCtrl.getCenterViewportScrollLeft());const i=this.enableRtl?t:-t,{topCenter:s,stickyTopCenter:r,stickyBottomCenter:n,centerHeader:o,bottomCenter:a,fakeHScrollComp:l}=this.ctrlsService.getParams();o.setHorizontalScroll(-i),a.setContainerTranslateX(i),s.setContainerTranslateX(i),r.setContainerTranslateX(i),n.setContainerTranslateX(i);const c=this.centerRowsCtrl.getViewportElement(),u=this.lastScrollSource[1]===0;t=Math.abs(t),u?l.setScrollPosition(t):dy(c,t,this.enableRtl)}isControllingScroll(t,e){return this.lastScrollSource[e]==null?(this.lastScrollSource[e]=t,!0):this.lastScrollSource[e]===t}onFakeHScroll(){this.isControllingScroll(1,1)&&this.onHScrollCommon(1)}onHScroll(){this.isControllingScroll(0,1)&&this.onHScrollCommon(0)}onHScrollCommon(t){const e=this.centerRowsCtrl.getViewportElement(),{scrollLeft:i}=e;if(this.shouldBlockScrollUpdate(1,i,!0))return;let s;t===0?s=uy(e,this.enableRtl):s=this.ctrlsService.get("fakeHScrollComp").getScrollPosition(),this.doHorizontalScroll(Math.round(s)),this.resetLastHScrollDebounced()}onFakeVScroll(){this.isControllingScroll(1,0)&&this.onVScrollCommon(1)}onVScroll(){this.isControllingScroll(0,0)&&this.onVScrollCommon(0)}onVScrollCommon(t){let e;t===0?e=this.eBodyViewport.scrollTop:e=this.ctrlsService.get("fakeVScrollComp").getScrollPosition(),!this.shouldBlockScrollUpdate(0,e,!0)&&(this.animationFrameService.setScrollTop(e),this.nextScrollTop=e,t===0?this.ctrlsService.get("fakeVScrollComp").setScrollPosition(e):this.eBodyViewport.scrollTop=e,this.gos.get("suppressAnimationFrame")?this.scrollGridIfNeeded():this.animationFrameService.schedule(),this.resetLastVScrollDebounced())}doHorizontalScroll(t){const e=this.ctrlsService.get("fakeHScrollComp").getScrollPosition();this.scrollLeft===t&&t===e||(this.scrollLeft=t,this.fireScrollEvent(1),this.horizontallyScrollHeaderCenterAndFloatingCenter(t),this.centerRowsCtrl.onHorizontalViewportChanged(!0))}fireScrollEvent(t){const e={type:K.EVENT_BODY_SCROLL,direction:t===1?"horizontal":"vertical",left:this.scrollLeft,top:this.scrollTop};this.eventService.dispatchEvent(e),window.clearTimeout(this.scrollTimer),this.scrollTimer=void 0,this.scrollTimer=window.setTimeout(()=>{const i=$i(it({},e),{type:K.EVENT_BODY_SCROLL_END});this.eventService.dispatchEvent(i)},100)}shouldBlockScrollUpdate(t,e,i=!1){return i&&!xc()?!1:t===0?this.shouldBlockVerticalScroll(e):this.shouldBlockHorizontalScroll(e)}shouldBlockVerticalScroll(t){const e=bC(this.eBodyViewport),{scrollHeight:i}=this.eBodyViewport;return t<0||t+e>i}shouldBlockHorizontalScroll(t){const e=this.centerRowsCtrl.getCenterWidth(),{scrollWidth:i}=this.centerRowsCtrl.getViewportElement();if(this.enableRtl&&cy()){if(t>0)return!0}else if(t<0)return!0;return Math.abs(t)+e>i}redrawRowsAfterScroll(){this.fireScrollEvent(0)}checkScrollLeft(){this.scrollLeft!==this.centerRowsCtrl.getCenterViewportScrollLeft()&&this.onHScrollCommon(0)}scrollGridIfNeeded(){const t=this.scrollTop!=this.nextScrollTop;return t&&(this.scrollTop=this.nextScrollTop,this.redrawRowsAfterScroll()),t}setHorizontalScrollPosition(t,e=!1){const s=this.centerRowsCtrl.getViewportElement().scrollWidth-this.centerRowsCtrl.getCenterWidth();!e&&this.shouldBlockScrollUpdate(1,t)&&(this.enableRtl&&cy()?t=t>0?0:s:t=Math.min(Math.max(t,0),s)),dy(this.centerRowsCtrl.getViewportElement(),Math.abs(t),this.enableRtl),this.doHorizontalScroll(t)}setVerticalScrollPosition(t){this.eBodyViewport.scrollTop=t}getVScrollPosition(){return this.lastScrollTop=this.eBodyViewport.scrollTop,this.lastOffsetHeight=this.eBodyViewport.offsetHeight,{top:this.lastScrollTop,bottom:this.lastScrollTop+this.lastOffsetHeight}}getApproximateVScollPosition(){return this.lastScrollTop>=0&&this.lastOffsetHeight>=0?{top:this.scrollTop,bottom:this.scrollTop+this.lastOffsetHeight}:this.getVScrollPosition()}getHScrollPosition(){return this.centerRowsCtrl.getHScrollPosition()}isHorizontalScrollShowing(){return this.centerRowsCtrl.isHorizontalScrollShowing()}scrollHorizontally(t){const e=this.centerRowsCtrl.getViewportElement().scrollLeft;return this.setHorizontalScrollPosition(e+t),this.centerRowsCtrl.getViewportElement().scrollLeft-e}scrollToTop(){this.eBodyViewport.scrollTop=0}ensureNodeVisible(t,e=null){const i=this.rowModel.getRowCount();let s=-1;for(let r=0;r<i;r++){const n=this.rowModel.getRow(r);if(typeof t=="function"){if(n&&t(n)){s=r;break}}else if(t===n||t===n.data){s=r;break}}s>=0&&this.ensureIndexVisible(s,e)}ensureIndexVisible(t,e){if(this.gos.isDomLayout("print"))return;const i=this.paginationProxy.getRowCount();if(typeof t!="number"||t<0||t>=i){console.warn("AG Grid: Invalid row index for ensureIndexVisible: "+t);return}const r=this.gos.get("pagination")&&!this.gos.get("suppressPaginationPanel");this.getFrameworkOverrides().wrapIncoming(()=>{r||this.paginationProxy.goToPageWithIndex(t);const n=this.ctrlsService.getGridBodyCtrl(),o=n.getStickyTopHeight(),a=n.getStickyBottomHeight(),l=this.paginationProxy.getRow(t);let c;do{const u=l.rowTop,d=l.rowHeight,h=this.paginationProxy.getPixelOffset(),p=l.rowTop-h,f=p+l.rowHeight,m=this.getVScrollPosition(),g=this.heightScaler.getDivStretchOffset(),y=m.top+g,v=m.bottom+g,C=v-y,b=this.heightScaler.getScrollPositionForPixel(p),T=this.heightScaler.getScrollPositionForPixel(f-C),A=Math.min((b+T)/2,p),I=y+o>p,D=v-a<f;let F=null;e==="top"?F=b:e==="bottom"?F=T:e==="middle"?F=A:I?F=b-o:D&&(F=T+a),F!==null&&(this.setVerticalScrollPosition(F),this.rowRenderer.redraw({afterScroll:!0})),c=u!==l.rowTop||d!==l.rowHeight}while(c);this.animationFrameService.flushAllFrames()})}ensureColumnVisible(t,e="auto"){const i=this.columnModel.getGridColumn(t);if(!i||i.isPinned()||!this.columnModel.isColumnDisplayed(i))return;const s=this.getPositionedHorizontalScroll(i,e);this.getFrameworkOverrides().wrapIncoming(()=>{s!==null&&this.centerRowsCtrl.setCenterViewportScrollLeft(s),this.centerRowsCtrl.onHorizontalViewportChanged(),this.animationFrameService.flushAllFrames()})}setScrollPosition(t,e){this.getFrameworkOverrides().wrapIncoming(()=>{this.centerRowsCtrl.setCenterViewportScrollLeft(e),this.setVerticalScrollPosition(t),this.rowRenderer.redraw({afterScroll:!0}),this.animationFrameService.flushAllFrames()})}getPositionedHorizontalScroll(t,e){const{columnBeforeStart:i,columnAfterEnd:s}=this.isColumnOutsideViewport(t),r=this.centerRowsCtrl.getCenterWidth()<t.getActualWidth(),n=this.centerRowsCtrl.getCenterWidth(),o=this.enableRtl;let a=(o?i:s)||r,l=o?s:i;e!=="auto"&&(a=e==="start",l=e==="end");const c=e==="middle";if(a||l||c){const{colLeft:u,colMiddle:d,colRight:h}=this.getColumnBounds(t);return c?d-n/2:a?o?h:u:o?u-n:h-n}return null}isColumnOutsideViewport(t){const{start:e,end:i}=this.getViewportBounds(),{colLeft:s,colRight:r}=this.getColumnBounds(t),n=this.enableRtl,o=n?e>r:i<r,a=n?i<s:e>s;return{columnBeforeStart:o,columnAfterEnd:a}}getColumnBounds(t){const e=this.enableRtl,i=this.columnModel.getBodyContainerWidth(),s=t.getActualWidth(),r=t.getLeft(),n=e?-1:1,o=e?i-r:r,a=o+s*n,l=o+s/2*n;return{colLeft:o,colMiddle:l,colRight:a}}getViewportBounds(){const t=this.centerRowsCtrl.getCenterWidth(),e=this.centerRowsCtrl.getCenterViewportScrollLeft(),i=e,s=t+e;return{start:i,end:s,width:t}}};z([W("ctrlsService")],Rc.prototype,"ctrlsService",2);z([W("animationFrameService")],Rc.prototype,"animationFrameService",2);z([W("paginationProxy")],Rc.prototype,"paginationProxy",2);z([W("rowModel")],Rc.prototype,"rowModel",2);z([W("rowContainerHeightService")],Rc.prototype,"heightScaler",2);z([W("rowRenderer")],Rc.prototype,"rowRenderer",2);z([W("columnModel")],Rc.prototype,"columnModel",2);z([de],Rc.prototype,"postConstruct",1);var M4=(t=>(t.ANIMATION_ON="ag-row-animation",t.ANIMATION_OFF="ag-row-no-animation",t))(M4||{}),D4="ag-force-vertical-scroll",YK="ag-selectable",qK="ag-column-moving",Hr=class extends ye{constructor(){super(...arguments),this.stickyTopHeight=0,this.stickyBottomHeight=0}getScrollFeature(){return this.bodyScrollFeature}getBodyViewportElement(){return this.eBodyViewport}setComp(t,e,i,s,r,n,o){this.comp=t,this.eGridBody=e,this.eBodyViewport=i,this.eTop=s,this.eBottom=r,this.eStickyTop=n,this.eStickyBottom=o,this.setCellTextSelection(this.gos.get("enableCellTextSelection")),this.addManagedPropertyListener("enableCellTextSelection",a=>this.setCellTextSelection(a.currentValue)),this.createManagedBean(new xx(this.comp)),this.bodyScrollFeature=this.createManagedBean(new Rc(this.eBodyViewport)),this.addRowDragListener(),this.setupRowAnimationCssClass(),this.addEventListeners(),this.addFocusListeners([s,i,r,n,o]),this.onGridColumnsChanged(),this.addBodyViewportListener(),this.setFloatingHeights(),this.disableBrowserDragging(),this.addStopEditingWhenGridLosesFocus(),this.filterManager.setupAdvancedFilterHeaderComp(s),this.ctrlsService.register("gridBodyCtrl",this)}getComp(){return this.comp}addEventListeners(){this.addManagedListener(this.eventService,K.EVENT_GRID_COLUMNS_CHANGED,this.onGridColumnsChanged.bind(this)),this.addManagedListener(this.eventService,K.EVENT_SCROLL_VISIBILITY_CHANGED,this.onScrollVisibilityChanged.bind(this)),this.addManagedListener(this.eventService,K.EVENT_PINNED_ROW_DATA_CHANGED,this.onPinnedRowDataChanged.bind(this)),this.addManagedListener(this.eventService,K.EVENT_HEADER_HEIGHT_CHANGED,this.onHeaderHeightChanged.bind(this))}addFocusListeners(t){t.forEach(e=>{this.addManagedListener(e,"focusin",i=>{const{target:s}=i,r=lh(s,"ag-root",e);e.classList.toggle("ag-has-focus",!r)}),this.addManagedListener(e,"focusout",i=>{const{target:s,relatedTarget:r}=i,n=e.contains(r),o=lh(r,"ag-root",e);lh(s,"ag-root",e)||(!n||o)&&e.classList.remove("ag-has-focus")})})}setColumnMovingCss(t){this.comp.setColumnMovingCss(qK,t)}setCellTextSelection(t=!1){this.comp.setCellSelectableCss(YK,t)}onScrollVisibilityChanged(){const t=this.scrollVisibleService.isVerticalScrollShowing();this.setVerticalScrollPaddingVisible(t),this.setStickyWidth(t),this.setStickyBottomOffsetBottom();const e=t&&this.gos.getScrollbarWidth()||0,i=uM()?16:0,s=`calc(100% + ${e+i}px)`;this.animationFrameService.requestAnimationFrame(()=>this.comp.setBodyViewportWidth(s))}onGridColumnsChanged(){const t=this.columnModel.getAllGridColumns();this.comp.setColumnCount(t.length)}disableBrowserDragging(){this.addManagedListener(this.eGridBody,"dragstart",t=>{if(t.target instanceof HTMLImageElement)return t.preventDefault(),!1})}addStopEditingWhenGridLosesFocus(){if(!this.gos.get("stopEditingWhenCellsLoseFocus"))return;const t=i=>{const s=i.relatedTarget;if(Ww(s)===null){this.rowRenderer.stopEditing();return}let r=e.some(n=>n.contains(s))&&this.mouseEventService.isElementInThisGrid(s);if(!r){const n=this.popupService;r=n.getActivePopups().some(o=>o.contains(s))||n.isElementWithinCustomPopup(s)}r||this.rowRenderer.stopEditing()},e=[this.eBodyViewport,this.eBottom,this.eTop,this.eStickyTop,this.eStickyBottom];e.forEach(i=>this.addManagedListener(i,"focusout",t))}updateRowCount(){const t=this.headerNavigationService.getHeaderRowCount()+this.filterManager.getHeaderRowCount(),e=this.rowModel.isLastRowIndexKnown()?this.rowModel.getRowCount():-1,i=e===-1?-1:t+e;this.comp.setRowCount(i)}registerBodyViewportResizeListener(t){this.comp.registerBodyViewportResizeListener(t)}setVerticalScrollPaddingVisible(t){const e=t?"scroll":"hidden";this.comp.setPinnedTopBottomOverflowY(e)}isVerticalScrollShowing(){const t=this.gos.get("alwaysShowVerticalScroll"),e=t?D4:null,i=this.gos.isDomLayout("normal");return this.comp.setAlwaysVerticalScrollClass(e,t),t||i&&EG(this.eBodyViewport)}setupRowAnimationCssClass(){const t=()=>{const e=this.gos.isAnimateRows()&&!this.rowContainerHeightService.isStretching(),i=e?"ag-row-animation":"ag-row-no-animation";this.comp.setRowAnimationCssOnBodyViewport(i,e)};t(),this.addManagedListener(this.eventService,K.EVENT_HEIGHT_SCALE_CHANGED,t),this.addManagedPropertyListener("animateRows",t)}getGridBodyElement(){return this.eGridBody}addBodyViewportListener(){const t=this.onBodyViewportContextMenu.bind(this);this.addManagedListener(this.eBodyViewport,"contextmenu",t),this.mockContextMenuForIPad(t),this.addManagedListener(this.eBodyViewport,"wheel",this.onBodyViewportWheel.bind(this)),this.addManagedListener(this.eStickyTop,"wheel",this.onStickyWheel.bind(this)),this.addManagedListener(this.eStickyBottom,"wheel",this.onStickyWheel.bind(this)),this.addFullWidthContainerWheelListener()}addFullWidthContainerWheelListener(){const t=this.eBodyViewport.querySelector(".ag-full-width-container"),e=this.eBodyViewport.querySelector(".ag-center-cols-viewport");t&&e&&this.addManagedListener(t,"wheel",i=>this.onFullWidthContainerWheel(i,e))}onFullWidthContainerWheel(t,e){!t.deltaX||Math.abs(t.deltaY)>Math.abs(t.deltaX)||!this.mouseEventService.isEventFromThisGrid(t)||(t.preventDefault(),e.scrollBy({left:t.deltaX}))}onBodyViewportContextMenu(t,e,i){if(!t&&!i)return;this.gos.get("preventDefaultOnContextMenu")&&(t||i).preventDefault();const{target:s}=t||e;(s===this.eBodyViewport||s===this.ctrlsService.get("center").getViewportElement())&&this.menuService.showContextMenu({mouseEvent:t,touchEvent:i,value:null,anchorToElement:this.eGridBody})}mockContextMenuForIPad(t){if(!xc())return;const e=new Es(this.eBodyViewport),i=s=>{t(void 0,s.touchStart,s.touchEvent)};this.addManagedListener(e,Es.EVENT_LONG_TAP,i),this.addDestroyFunc(()=>e.destroy())}onBodyViewportWheel(t){this.gos.get("suppressScrollWhenPopupsAreOpen")&&this.popupService.hasAnchoredPopup()&&t.preventDefault()}onStickyWheel(t){t.preventDefault(),t.offsetY&&this.scrollVertically(t.deltaY)}getGui(){return this.eGridBody}scrollVertically(t){const e=this.eBodyViewport.scrollTop;return this.bodyScrollFeature.setVerticalScrollPosition(e+t),this.eBodyViewport.scrollTop-e}addRowDragListener(){this.rowDragFeature=this.createManagedBean(new po(this.eBodyViewport)),this.dragAndDropService.addDropTarget(this.rowDragFeature)}getRowDragFeature(){return this.rowDragFeature}onPinnedRowDataChanged(){this.setFloatingHeights()}setFloatingHeights(){const{pinnedRowModel:t}=this;let e=t.getPinnedTopTotalHeight(),i=t.getPinnedBottomTotalHeight();this.comp.setTopHeight(e),this.comp.setBottomHeight(i),this.comp.setTopDisplay(e?"inherit":"none"),this.comp.setBottomDisplay(i?"inherit":"none"),this.setStickyTopOffsetTop(),this.setStickyBottomOffsetBottom()}setStickyTopHeight(t=0){this.comp.setStickyTopHeight(`${t}px`),this.stickyTopHeight=t}getStickyTopHeight(){return this.stickyTopHeight}setStickyBottomHeight(t=0){this.comp.setStickyBottomHeight(`${t}px`),this.stickyBottomHeight=t}getStickyBottomHeight(){return this.stickyBottomHeight}setStickyWidth(t){if(!t)this.comp.setStickyTopWidth("100%"),this.comp.setStickyBottomWidth("100%");else{const e=this.gos.getScrollbarWidth();this.comp.setStickyTopWidth(`calc(100% - ${e}px)`),this.comp.setStickyBottomWidth(`calc(100% - ${e}px)`)}}onHeaderHeightChanged(){this.setStickyTopOffsetTop()}setStickyTopOffsetTop(){const e=this.ctrlsService.get("gridHeaderCtrl").getHeaderHeight()+this.filterManager.getHeaderHeight(),i=this.pinnedRowModel.getPinnedTopTotalHeight();let s=0;e>0&&(s+=e),i>0&&(s+=i),s>0&&(s+=1),this.comp.setStickyTopTop(`${s}px`)}setStickyBottomOffsetBottom(){const t=this.pinnedRowModel.getPinnedBottomTotalHeight(),i=this.scrollVisibleService.isHorizontalScrollShowing()&&this.gos.getScrollbarWidth()||0,s=t+i;this.comp.setStickyBottomBottom(`${s}px`)}sizeColumnsToFit(t,e){const s=this.isVerticalScrollShowing()?this.gos.getScrollbarWidth():0,n=zh(this.eGridBody)-s;if(n>0){this.columnModel.sizeColumnsToFit(n,"sizeColumnsToFit",!1,t);return}e===void 0?window.setTimeout(()=>{this.sizeColumnsToFit(t,100)},0):e===100?window.setTimeout(()=>{this.sizeColumnsToFit(t,500)},100):e===500?window.setTimeout(()=>{this.sizeColumnsToFit(t,-1)},500):console.warn("AG Grid: tried to call sizeColumnsToFit() but the grid is coming back with zero width, maybe the grid is not visible yet on the screen?")}addScrollEventListener(t){this.eBodyViewport.addEventListener("scroll",t,{passive:!0})}removeScrollEventListener(t){this.eBodyViewport.removeEventListener("scroll",t)}};z([W("animationFrameService")],Hr.prototype,"animationFrameService",2);z([W("rowContainerHeightService")],Hr.prototype,"rowContainerHeightService",2);z([W("ctrlsService")],Hr.prototype,"ctrlsService",2);z([W("columnModel")],Hr.prototype,"columnModel",2);z([W("scrollVisibleService")],Hr.prototype,"scrollVisibleService",2);z([W("menuService")],Hr.prototype,"menuService",2);z([W("headerNavigationService")],Hr.prototype,"headerNavigationService",2);z([W("dragAndDropService")],Hr.prototype,"dragAndDropService",2);z([W("pinnedRowModel")],Hr.prototype,"pinnedRowModel",2);z([W("rowRenderer")],Hr.prototype,"rowRenderer",2);z([W("popupService")],Hr.prototype,"popupService",2);z([W("mouseEventService")],Hr.prototype,"mouseEventService",2);z([W("rowModel")],Hr.prototype,"rowModel",2);z([W("filterManager")],Hr.prototype,"filterManager",2);var Gg=(t=>(t[t.FILL=0]="FILL",t[t.RANGE=1]="RANGE",t))(Gg||{}),jl=(t=>(t[t.VALUE=0]="VALUE",t[t.DIMENSION=1]="DIMENSION",t))(jl||{}),Bm="ag-cell-range-selected",XK="ag-cell-range-chart",ZK="ag-cell-range-single-cell",JK="ag-cell-range-chart-category",QK="ag-cell-range-handle",eY="ag-cell-range-top",tY="ag-cell-range-right",iY="ag-cell-range-bottom",sY="ag-cell-range-left",rY=class{constructor(t,e){this.beans=t,this.rangeService=t.rangeService,this.selectionHandleFactory=t.selectionHandleFactory,this.cellCtrl=e}setComp(t,e){this.cellComp=t,this.eGui=e,this.onRangeSelectionChanged()}onRangeSelectionChanged(){this.cellComp&&(this.rangeCount=this.rangeService.getCellRangeCount(this.cellCtrl.getCellPosition()),this.hasChartRange=this.getHasChartRange(),this.cellComp.addOrRemoveCssClass(Bm,this.rangeCount!==0),this.cellComp.addOrRemoveCssClass(`${Bm}-1`,this.rangeCount===1),this.cellComp.addOrRemoveCssClass(`${Bm}-2`,this.rangeCount===2),this.cellComp.addOrRemoveCssClass(`${Bm}-3`,this.rangeCount===3),this.cellComp.addOrRemoveCssClass(`${Bm}-4`,this.rangeCount>=4),this.cellComp.addOrRemoveCssClass(XK,this.hasChartRange),rg(this.eGui,this.rangeCount>0?!0:void 0),this.cellComp.addOrRemoveCssClass(ZK,this.isSingleCell()),this.updateRangeBorders(),this.refreshHandle())}updateRangeBorders(){const t=this.getRangeBorders(),e=this.isSingleCell(),i=!e&&t.top,s=!e&&t.right,r=!e&&t.bottom,n=!e&&t.left;this.cellComp.addOrRemoveCssClass(eY,i),this.cellComp.addOrRemoveCssClass(tY,s),this.cellComp.addOrRemoveCssClass(iY,r),this.cellComp.addOrRemoveCssClass(sY,n)}isSingleCell(){const{rangeService:t}=this.beans;return this.rangeCount===1&&!!t&&!t.isMoreThanOneCell()}getHasChartRange(){const{rangeService:t}=this.beans;if(!this.rangeCount||!t)return!1;const e=t.getCellRanges();return e.length>0&&e.every(i=>to([1,0],i.type))}updateRangeBordersIfRangeCount(){this.rangeCount>0&&(this.updateRangeBorders(),this.refreshHandle())}getRangeBorders(){const t=this.beans.gos.get("enableRtl");let e=!1,i=!1,s=!1,r=!1;const n=this.cellCtrl.getCellPosition().column,o=this.beans.columnModel;let a,l;t?(a=o.getDisplayedColAfter(n),l=o.getDisplayedColBefore(n)):(a=o.getDisplayedColBefore(n),l=o.getDisplayedColAfter(n));const c=this.rangeService.getCellRanges().filter(u=>this.rangeService.isCellInSpecificRange(this.cellCtrl.getCellPosition(),u));a||(r=!0),l||(i=!0);for(let u=0;u<c.length&&!(e&&i&&s&&r);u++){const d=c[u],h=this.rangeService.getRangeStartRow(d),p=this.rangeService.getRangeEndRow(d);!e&&this.beans.rowPositionUtils.sameRow(h,this.cellCtrl.getCellPosition())&&(e=!0),!s&&this.beans.rowPositionUtils.sameRow(p,this.cellCtrl.getCellPosition())&&(s=!0),!r&&a&&d.columns.indexOf(a)<0&&(r=!0),!i&&l&&d.columns.indexOf(l)<0&&(i=!0)}return{top:e,right:i,bottom:s,left:r}}refreshHandle(){if(this.beans.context.isDestroyed())return;const t=this.shouldHaveSelectionHandle();this.selectionHandle&&!t&&(this.selectionHandle=this.beans.context.destroyBean(this.selectionHandle)),t&&this.addSelectionHandle(),this.cellComp.addOrRemoveCssClass(QK,!!this.selectionHandle)}shouldHaveSelectionHandle(){const t=this.beans.gos,e=this.rangeService.getCellRanges(),i=e.length;if(this.rangeCount<1||i<1)return!1;const s=di(e),r=this.cellCtrl.getCellPosition(),n=t.get("enableFillHandle")&&!this.cellCtrl.isSuppressFillHandle(),o=t.get("enableRangeHandle");let a=i===1&&!this.cellCtrl.isEditing()&&(n||o);if(this.hasChartRange){const c=e[0].type===1&&this.rangeService.isCellInSpecificRange(r,e[0]);this.cellComp.addOrRemoveCssClass(JK,c),a=s.type===0}return a&&s.endRow!=null&&this.rangeService.isContiguousRange(s)&&this.rangeService.isBottomRightCell(s,r)}addSelectionHandle(){const t=this.beans.gos,e=di(this.rangeService.getCellRanges()).type,s=t.get("enableFillHandle")&&St(e)?0:1;this.selectionHandle&&this.selectionHandle.getType()!==s&&(this.selectionHandle=this.beans.context.destroyBean(this.selectionHandle)),this.selectionHandle||(this.selectionHandle=this.selectionHandleFactory.createSelectionHandle(s)),this.selectionHandle.refresh(this.cellCtrl)}destroy(){this.beans.context.destroyBean(this.selectionHandle)}},nY=class extends ye{constructor(t,e){super(),this.cellCtrl=t,this.beans=e,this.column=t.getColumn(),this.rowNode=t.getRowNode()}setupRowSpan(){this.rowSpan=this.column.getRowSpan(this.rowNode),this.addManagedListener(this.beans.eventService,K.EVENT_NEW_COLUMNS_LOADED,()=>this.onNewColumnsLoaded())}setComp(t){this.eGui=t,this.setupColSpan(),this.setupRowSpan(),this.onLeftChanged(),this.onWidthChanged(),this.applyRowSpan()}onNewColumnsLoaded(){const t=this.column.getRowSpan(this.rowNode);this.rowSpan!==t&&(this.rowSpan=t,this.applyRowSpan(!0))}onDisplayColumnsChanged(){const t=this.getColSpanningList();Ya(this.colsSpanning,t)||(this.colsSpanning=t,this.onWidthChanged(),this.onLeftChanged())}setupColSpan(){this.column.getColDef().colSpan!=null&&(this.colsSpanning=this.getColSpanningList(),this.addManagedListener(this.beans.eventService,K.EVENT_DISPLAYED_COLUMNS_CHANGED,this.onDisplayColumnsChanged.bind(this)),this.addManagedListener(this.beans.eventService,K.EVENT_DISPLAYED_COLUMNS_WIDTH_CHANGED,this.onWidthChanged.bind(this)))}onWidthChanged(){if(!this.eGui)return;const t=this.getCellWidth();this.eGui.style.width=`${t}px`}getCellWidth(){return this.colsSpanning?this.colsSpanning.reduce((t,e)=>t+e.getActualWidth(),0):this.column.getActualWidth()}getColSpanningList(){const t=this.column.getColSpan(this.rowNode),e=[];if(t===1)e.push(this.column);else{let i=this.column;const s=this.column.getPinned();for(let r=0;i&&r<t&&(e.push(i),i=this.beans.columnModel.getDisplayedColAfter(i),!(!i||St(i)||s!==i.getPinned()));r++);}return e}onLeftChanged(){if(!this.eGui)return;const t=this.modifyLeftForPrintLayout(this.getCellLeft());this.eGui.style.left=t+"px"}getCellLeft(){let t;return this.beans.gos.get("enableRtl")&&this.colsSpanning?t=di(this.colsSpanning):t=this.column,t.getLeft()}modifyLeftForPrintLayout(t){if(!this.cellCtrl.isPrintLayout()||this.column.getPinned()==="left")return t;const e=this.beans.columnModel.getDisplayedColumnsLeftWidth();if(this.column.getPinned()==="right"){const i=this.beans.columnModel.getBodyContainerWidth();return e+i+(t||0)}return e+(t||0)}applyRowSpan(t){if(this.rowSpan===1&&!t)return;const i=this.beans.gos.getRowHeightAsNumber()*this.rowSpan;this.eGui.style.height=`${i}px`,this.eGui.style.zIndex="1"}destroy(){super.destroy()}},oY=class extends ye{constructor(t,e){super(),this.staticClasses=[],this.cellCtrl=t,this.beans=e,this.column=t.getColumn(),this.rowNode=t.getRowNode()}setComp(t){this.cellComp=t,this.applyUserStyles(),this.applyCellClassRules(),this.applyClassesFromColDef()}applyCellClassRules(){const t=this.column.getColDef(),{cellClassRules:e}=t,i=this.beans.gos.addGridCommonParams({value:this.cellCtrl.getValue(),data:this.rowNode.data,node:this.rowNode,colDef:t,column:this.column,rowIndex:this.rowNode.rowIndex});this.beans.stylingService.processClassRules(e===this.cellClassRules?void 0:this.cellClassRules,e,i,s=>this.cellComp.addOrRemoveCssClass(s,!0),s=>this.cellComp.addOrRemoveCssClass(s,!1)),this.cellClassRules=e}applyUserStyles(){const t=this.column.getColDef();if(!t.cellStyle)return;let e;if(typeof t.cellStyle=="function"){const i=this.beans.gos.addGridCommonParams({column:this.column,value:this.cellCtrl.getValue(),colDef:t,data:this.rowNode.data,node:this.rowNode,rowIndex:this.rowNode.rowIndex}),s=t.cellStyle;e=s(i)}else e=t.cellStyle;e&&this.cellComp.setUserStyles(e)}applyClassesFromColDef(){const t=this.column.getColDef(),e=this.beans.gos.addGridCommonParams({value:this.cellCtrl.getValue(),data:this.rowNode.data,node:this.rowNode,column:this.column,colDef:t,rowIndex:this.rowNode.rowIndex});this.staticClasses.length&&this.staticClasses.forEach(i=>this.cellComp.addOrRemoveCssClass(i,!1)),this.staticClasses=this.beans.stylingService.getStaticCellClasses(t,e),this.staticClasses.length&&this.staticClasses.forEach(i=>this.cellComp.addOrRemoveCssClass(i,!0))}destroy(){super.destroy()}},Ot=class{postConstruct(){this.gos.isRowModelType("clientSide")&&(this.clientSideRowModel=this.rowModel),this.gos.isRowModelType("serverSide")&&(this.serverSideRowModel=this.rowModel)}};z([W("resizeObserverService")],Ot.prototype,"resizeObserverService",2);z([W("paginationProxy")],Ot.prototype,"paginationProxy",2);z([W("context")],Ot.prototype,"context",2);z([W("gridOptionsService")],Ot.prototype,"gos",2);z([W("environment")],Ot.prototype,"environment",2);z([W("rowRenderer")],Ot.prototype,"rowRenderer",2);z([W("valueService")],Ot.prototype,"valueService",2);z([W("eventService")],Ot.prototype,"eventService",2);z([W("columnModel")],Ot.prototype,"columnModel",2);z([W("headerNavigationService")],Ot.prototype,"headerNavigationService",2);z([W("navigationService")],Ot.prototype,"navigationService",2);z([W("columnAnimationService")],Ot.prototype,"columnAnimationService",2);z([W("focusService")],Ot.prototype,"focusService",2);z([W("popupService")],Ot.prototype,"popupService",2);z([W("stylingService")],Ot.prototype,"stylingService",2);z([W("columnHoverService")],Ot.prototype,"columnHoverService",2);z([W("userComponentFactory")],Ot.prototype,"userComponentFactory",2);z([W("userComponentRegistry")],Ot.prototype,"userComponentRegistry",2);z([W("animationFrameService")],Ot.prototype,"animationFrameService",2);z([W("dragService")],Ot.prototype,"dragService",2);z([W("dragAndDropService")],Ot.prototype,"dragAndDropService",2);z([W("sortController")],Ot.prototype,"sortController",2);z([W("filterManager")],Ot.prototype,"filterManager",2);z([W("rowContainerHeightService")],Ot.prototype,"rowContainerHeightService",2);z([W("frameworkOverrides")],Ot.prototype,"frameworkOverrides",2);z([W("cellPositionUtils")],Ot.prototype,"cellPositionUtils",2);z([W("rowPositionUtils")],Ot.prototype,"rowPositionUtils",2);z([W("selectionService")],Ot.prototype,"selectionService",2);z([W("rowCssClassCalculator")],Ot.prototype,"rowCssClassCalculator",2);z([W("rowModel")],Ot.prototype,"rowModel",2);z([W("ctrlsService")],Ot.prototype,"ctrlsService",2);z([W("ctrlsFactory")],Ot.prototype,"ctrlsFactory",2);z([W("agStackComponentsRegistry")],Ot.prototype,"agStackComponentsRegistry",2);z([W("valueCache")],Ot.prototype,"valueCache",2);z([W("rowNodeEventThrottle")],Ot.prototype,"rowNodeEventThrottle",2);z([W("localeService")],Ot.prototype,"localeService",2);z([W("syncService")],Ot.prototype,"syncService",2);z([W("ariaAnnouncementService")],Ot.prototype,"ariaAnnouncementService",2);z([Vt("rangeService")],Ot.prototype,"rangeService",2);z([Vt("selectionHandleFactory")],Ot.prototype,"selectionHandleFactory",2);z([de],Ot.prototype,"postConstruct",1);Ot=z([Me("beans")],Ot);var aY=class extends Ot{constructor(t,e,i){super(),this.cellCtrl=t,this.beans=e,this.column=i}onMouseEvent(t,e){if(!ha(e))switch(t){case"click":this.onCellClicked(e);break;case"mousedown":case"touchstart":this.onMouseDown(e);break;case"dblclick":this.onCellDoubleClicked(e);break;case"mouseout":this.onMouseOut(e);break;case"mouseover":this.onMouseOver(e);break}}onCellClicked(t){if(this.isDoubleClickOnIPad()){this.onCellDoubleClicked(t),t.preventDefault();return}const{eventService:e,rangeService:i,gos:s}=this.beans,r=t.ctrlKey||t.metaKey;i&&r&&i.getCellRangeCount(this.cellCtrl.getCellPosition())>1&&i.intersectLastRange(!0);const n=this.cellCtrl.createEvent(t,K.EVENT_CELL_CLICKED);e.dispatchEvent(n);const o=this.column.getColDef();o.onCellClicked&&window.setTimeout(()=>{this.beans.frameworkOverrides.wrapOutgoing(()=>{o.onCellClicked(n)})},0),(s.get("singleClickEdit")||o.singleClickEdit)&&!s.get("suppressClickEdit")&&!(t.shiftKey&&(i==null?void 0:i.getCellRanges().length)!=0)&&this.cellCtrl.startRowOrCellEdit()}isDoubleClickOnIPad(){if(!xc()||XR("dblclick"))return!1;const t=new Date().getTime(),e=t-this.lastIPadMouseClickEvent<200;return this.lastIPadMouseClickEvent=t,e}onCellDoubleClicked(t){const e=this.column.getColDef(),i=this.cellCtrl.createEvent(t,K.EVENT_CELL_DOUBLE_CLICKED);this.beans.eventService.dispatchEvent(i),typeof e.onCellDoubleClicked=="function"&&window.setTimeout(()=>{this.beans.frameworkOverrides.wrapOutgoing(()=>{e.onCellDoubleClicked(i)})},0),!this.beans.gos.get("singleClickEdit")&&!this.beans.gos.get("suppressClickEdit")&&this.cellCtrl.startRowOrCellEdit(null,t)}onMouseDown(t){const{ctrlKey:e,metaKey:i,shiftKey:s}=t,r=t.target,{cellCtrl:n,beans:o}=this,{eventService:a,rangeService:l,focusService:c}=o;if(this.isRightClickInExistingRange(t))return;const u=l&&l.getCellRanges().length!=0;if(!s||!u){const d=ol()&&!n.isEditing()&&!pM(r);n.focusCell(d)}if(s&&u&&!c.isCellFocused(n.getCellPosition())){t.preventDefault();const d=c.getFocusedCell();if(d){const{column:h,rowIndex:p,rowPinned:f}=d,m=o.rowRenderer.getRowByPosition({rowIndex:p,rowPinned:f}),g=m==null?void 0:m.getCellCtrl(h);g!=null&&g.isEditing()&&g.stopEditing(),c.setFocusedCell({column:h,rowIndex:p,rowPinned:f,forceBrowserFocus:!0,preventScrollOnBrowserFocus:!0})}}if(!this.containsWidget(r)){if(l){const d=this.cellCtrl.getCellPosition();if(s)l.extendLatestRangeToCell(d);else{const h=e||i;l.setRangeToCell(d,h)}}a.dispatchEvent(this.cellCtrl.createEvent(t,K.EVENT_CELL_MOUSE_DOWN))}}isRightClickInExistingRange(t){const{rangeService:e}=this.beans;if(e){const i=e.isCellInAnyRange(this.cellCtrl.getCellPosition()),s=t.button===2||t.ctrlKey&&this.beans.gos.get("allowContextMenuWithControlKey");if(i&&s)return!0}return!1}containsWidget(t){return lh(t,"ag-selection-checkbox",3)}onMouseOut(t){if(this.mouseStayingInsideCell(t))return;const e=this.cellCtrl.createEvent(t,K.EVENT_CELL_MOUSE_OUT);this.beans.eventService.dispatchEvent(e),this.beans.columnHoverService.clearMouseOver()}onMouseOver(t){if(this.mouseStayingInsideCell(t))return;const e=this.cellCtrl.createEvent(t,K.EVENT_CELL_MOUSE_OVER);this.beans.eventService.dispatchEvent(e),this.beans.columnHoverService.setMouseOver([this.column])}mouseStayingInsideCell(t){if(!t.target||!t.relatedTarget)return!1;const e=this.cellCtrl.getGui(),i=e.contains(t.target),s=e.contains(t.relatedTarget);return i&&s}destroy(){}},lY=class extends ye{constructor(t,e,i,s,r){super(),this.cellCtrl=t,this.beans=e,this.rowNode=s,this.rowCtrl=r}setComp(t){this.eGui=t}onKeyDown(t){const e=t.key;switch(e){case ce.ENTER:this.onEnterKeyDown(t);break;case ce.F2:this.onF2KeyDown(t);break;case ce.ESCAPE:this.onEscapeKeyDown(t);break;case ce.TAB:this.onTabKeyDown(t);break;case ce.BACKSPACE:case ce.DELETE:this.onBackspaceOrDeleteKeyDown(e,t);break;case ce.DOWN:case ce.UP:case ce.RIGHT:case ce.LEFT:this.onNavigationKeyDown(t,e);break}}onNavigationKeyDown(t,e){this.cellCtrl.isEditing()||(t.shiftKey&&this.cellCtrl.isRangeSelectionEnabled()?this.onShiftRangeSelect(t):this.beans.navigationService.navigateToNextCell(t,e,this.cellCtrl.getCellPosition(),!0),t.preventDefault())}onShiftRangeSelect(t){if(!this.beans.rangeService)return;const e=this.beans.rangeService.extendLatestRangeInDirection(t);e&&this.beans.navigationService.ensureCellVisible(e)}onTabKeyDown(t){this.beans.navigationService.onTabKeyDown(this.cellCtrl,t)}onBackspaceOrDeleteKeyDown(t,e){var i;const{cellCtrl:s,beans:r,rowNode:n}=this,{gos:o,rangeService:a,eventService:l}=r;if(!s.isEditing()){if(l.dispatchEvent({type:K.EVENT_KEY_SHORTCUT_CHANGED_CELL_START}),LG(t,o.get("enableCellEditingOnBackspace"))){if(a&&o.get("enableRangeSelection"))a.clearCellRangeCellValues({dispatchWrapperEvents:!0,wrapperEventSource:"deleteKey"});else if(s.isCellEditable()){const c=s.getColumn(),u=(i=this.beans.valueService.parseValue(c,n,"",n.getValueFromValueService(c)))!=null?i:null;n.setDataValue(c,u,"cellClear")}}else s.startRowOrCellEdit(t,e);l.dispatchEvent({type:K.EVENT_KEY_SHORTCUT_CHANGED_CELL_END})}}onEnterKeyDown(t){if(this.cellCtrl.isEditing()||this.rowCtrl.isEditing())this.cellCtrl.stopEditingAndFocus(!1,t.shiftKey);else if(this.beans.gos.get("enterNavigatesVertically")){const e=t.shiftKey?ce.UP:ce.DOWN;this.beans.navigationService.navigateToNextCell(null,e,this.cellCtrl.getCellPosition(),!1)}else this.cellCtrl.startRowOrCellEdit(ce.ENTER,t),this.cellCtrl.isEditing()&&t.preventDefault()}onF2KeyDown(t){this.cellCtrl.isEditing()||this.cellCtrl.startRowOrCellEdit(ce.F2,t)}onEscapeKeyDown(t){this.cellCtrl.isEditing()&&(this.cellCtrl.stopRowOrCellEdit(!0),this.cellCtrl.focusCell(!0))}processCharacter(t){if(t.target!==this.eGui||this.cellCtrl.isEditing())return;const s=t.key;s===" "?this.onSpaceKeyDown(t):(this.cellCtrl.startRowOrCellEdit(s,t),t.preventDefault())}onSpaceKeyDown(t){const{gos:e}=this.beans;if(!this.cellCtrl.isEditing()&&e.isRowSelection()){const i=this.rowNode.isSelected(),s=!i;if(s||!e.get("suppressRowDeselection")){const r=this.beans.gos.get("groupSelectsFiltered"),n=this.rowNode.setSelectedParams({newValue:s,rangeSelect:t.shiftKey,groupSelectsFiltered:r,event:t,source:"spaceKey"});i===void 0&&n===0&&this.rowNode.setSelectedParams({newValue:!1,rangeSelect:t.shiftKey,groupSelectsFiltered:r,event:t,source:"spaceKey"})}}t.preventDefault()}destroy(){super.destroy()}},P4=class extends Te{constructor(t,e,i){super('<div class="ag-drag-handle ag-row-drag" draggable="true"></div>'),this.rowNode=t,this.column=e,this.eCell=i}postConstruct(){this.getGui().appendChild(ts("rowDrag",this.gos,null)),this.addGuiEventListener("mousedown",e=>{e.stopPropagation()}),this.addDragSource(),this.checkVisibility()}addDragSource(){this.addGuiEventListener("dragstart",this.onDragStart.bind(this))}onDragStart(t){const e=this.column.getColDef().dndSourceOnRowDrag;t.dataTransfer.setDragImage(this.eCell,0,0);const i=()=>{try{const s=JSON.stringify(this.rowNode.data);t.dataTransfer.setData("application/json",s),t.dataTransfer.setData("text/plain",s)}catch{}};if(e){const s=this.gos.addGridCommonParams({rowNode:this.rowNode,dragEvent:t});e(s)}else i()}checkVisibility(){const t=this.column.isDndSource(this.rowNode);this.setDisplayed(t)}};z([de],P4.prototype,"postConstruct",1);var cY="ag-column-first",uY="ag-column-last",td=class{static getHeaderClassesFromColDef(t,e,i,s){return St(t)?[]:this.getColumnClassesFromCollDef(t.headerClass,t,e,i,s)}static getToolPanelClassesFromColDef(t,e,i,s){return St(t)?[]:this.getColumnClassesFromCollDef(t.toolPanelClass,t,e,i,s)}static refreshFirstAndLastStyles(t,e,i){t.addOrRemoveCssClass(cY,i.isColumnAtEdge(e,"first")),t.addOrRemoveCssClass(uY,i.isColumnAtEdge(e,"last"))}static getClassParams(t,e,i,s){return e.addGridCommonParams({colDef:t,column:i,columnGroup:s})}static getColumnClassesFromCollDef(t,e,i,s,r){if(St(t))return[];let n;if(typeof t=="function"){const o=this.getClassParams(e,i,s,r);n=t(o)}else n=t;return typeof n=="string"?[n]:Array.isArray(n)?[...n]:[]}},dY="ag-cell",hY="ag-cell-auto-height",pY="ag-cell-normal-height",fY="ag-cell-focus",gY="ag-cell-first-right-pinned",mY="ag-cell-last-left-pinned",vY="ag-cell-not-inline-editing",yY="ag-column-hover",CY="ag-cell-wrap-text",bY=0,I4=class N_ extends ye{constructor(e,i,s,r){super(),this.cellRangeFeature=null,this.cellPositionFeature=null,this.cellCustomStyleFeature=null,this.tooltipFeature=null,this.cellMouseListenerFeature=null,this.cellKeyboardListenerFeature=null,this.suppressRefreshCell=!1,this.onCellCompAttachedFuncs=[],this.column=e,this.rowNode=i,this.beans=s,this.rowCtrl=r,this.instanceId=e.getId()+"-"+bY++,this.colIdSanitised=Ts(this.column.getId()),s.gos.get("suppressCellFocus")||(this.tabIndex=-1),this.createCellPosition(),this.addFeatures(),this.updateAndFormatValue(!1)}shouldRestoreFocus(){return this.beans.focusService.shouldRestoreFocus(this.cellPosition)}addFeatures(){this.cellPositionFeature=new nY(this,this.beans),this.addDestroyFunc(()=>{var i;(i=this.cellPositionFeature)==null||i.destroy(),this.cellPositionFeature=null}),this.cellCustomStyleFeature=new oY(this,this.beans),this.addDestroyFunc(()=>{var i;(i=this.cellCustomStyleFeature)==null||i.destroy(),this.cellCustomStyleFeature=null}),this.cellMouseListenerFeature=new aY(this,this.beans,this.column),this.addDestroyFunc(()=>{var i;(i=this.cellMouseListenerFeature)==null||i.destroy(),this.cellMouseListenerFeature=null}),this.cellKeyboardListenerFeature=new lY(this,this.beans,this.column,this.rowNode,this.rowCtrl),this.addDestroyFunc(()=>{var i;(i=this.cellKeyboardListenerFeature)==null||i.destroy(),this.cellKeyboardListenerFeature=null}),this.column.isTooltipEnabled()&&(this.enableTooltipFeature(),this.addDestroyFunc(()=>{this.disableTooltipFeature()})),this.beans.rangeService&&this.beans.gos.get("enableRangeSelection")&&(this.cellRangeFeature=new rY(this.beans,this),this.addDestroyFunc(()=>{var i;(i=this.cellRangeFeature)==null||i.destroy(),this.cellRangeFeature=null}))}enableTooltipFeature(e,i){const s=()=>{const o=this.column.getColDef(),a=this.rowNode.data;if(o.tooltipField&&Pe(a))return Df(a,o.tooltipField,this.column.isTooltipFieldContainsDots());const l=o.tooltipValueGetter;return l?l(this.beans.gos.addGridCommonParams({location:"cell",colDef:this.column.getColDef(),column:this.column,rowIndex:this.cellPosition.rowIndex,node:this.rowNode,data:this.rowNode.data,value:this.value,valueFormatted:this.valueFormatted})):null},r=this.beans.gos.get("tooltipShowMode")==="whenTruncated";!i&&r&&!this.isCellRenderer()&&(i=()=>{const o=this.getGui(),a=o.children.length===0?o:o.querySelector(".ag-cell-value");return a?a.scrollWidth>a.clientWidth:!0});const n={getColumn:()=>this.column,getColDef:()=>this.column.getColDef(),getRowIndex:()=>this.cellPosition.rowIndex,getRowNode:()=>this.rowNode,getGui:()=>this.getGui(),getLocation:()=>"cell",getTooltipValue:e!=null?()=>e:s,getValueFormatted:()=>this.valueFormatted,shouldDisplayTooltip:i};this.tooltipFeature=new hr(n,this.beans)}disableTooltipFeature(){this.tooltipFeature&&(this.tooltipFeature.destroy(),this.tooltipFeature=null)}setComp(e,i,s,r,n){var o,a,l,c;this.cellComp=e,this.eGui=i,this.printLayout=r,this.addDomData(),this.onCellFocused(this.focusEventToRestore),this.applyStaticCssClasses(),this.setWrapText(),this.onFirstRightPinnedChanged(),this.onLastLeftPinnedChanged(),this.onColumnHover(),this.setupControlComps(),this.setupAutoHeight(s),this.refreshFirstAndLastStyles(),this.refreshAriaColIndex(),(o=this.cellPositionFeature)==null||o.setComp(i),(a=this.cellCustomStyleFeature)==null||a.setComp(e),(l=this.tooltipFeature)==null||l.refreshToolTip(),(c=this.cellKeyboardListenerFeature)==null||c.setComp(this.eGui),this.cellRangeFeature&&this.cellRangeFeature.setComp(e,i),n&&this.isCellEditable()?this.startEditing():this.showValue(),this.onCellCompAttachedFuncs.length&&(this.onCellCompAttachedFuncs.forEach(u=>u()),this.onCellCompAttachedFuncs=[])}setupAutoHeight(e){if(this.isAutoHeight=this.column.isAutoHeight(),!this.isAutoHeight||!e)return;const i=e.parentElement,s=this.beans.gos.getRowHeightForNode(this.rowNode).height,r=a=>{if(this.editing||!this.isAlive())return;const{paddingTop:l,paddingBottom:c,borderBottomWidth:u,borderTopWidth:d}=Ju(i),h=l+c+u+d,f=e.offsetHeight+h;if(a<5){const g=this.beans.gos.getDocument(),y=!g||!g.contains(e),v=f==0;if(y||v){window.setTimeout(()=>r(a+1),0);return}}const m=Math.max(f,s);this.rowNode.setRowAutoHeight(m,this.column)},n=()=>r(0);n();const o=this.beans.resizeObserverService.observeResize(e,n);this.addDestroyFunc(()=>{o(),this.rowNode.setRowAutoHeight(void 0,this.column)})}getCellAriaRole(){var e;return(e=this.column.getColDef().cellAriaRole)!=null?e:"gridcell"}getInstanceId(){return this.instanceId}getColumnIdSanitised(){return this.colIdSanitised}getTabIndex(){return this.tabIndex}isCellRenderer(){const e=this.column.getColDef();return e.cellRenderer!=null||e.cellRendererSelector!=null}getValueToDisplay(){var e;return(e=this.valueFormatted)!=null?e:this.value}showValue(e=!1){var i;const s=this.getValueToDisplay();let r;if(this.rowNode.stub){const n=this.createCellRendererParams();r=this.beans.userComponentFactory.getLoadingCellRendererDetails(this.column.getColDef(),n)}else if(this.isCellRenderer()){const n=this.createCellRendererParams();r=this.beans.userComponentFactory.getCellRendererDetails(this.column.getColDef(),n)}this.cellComp.setRenderDetails(r,s,e),(i=this.cellRangeFeature)==null||i.refreshHandle()}setupControlComps(){const e=this.column.getColDef();this.includeSelection=this.isIncludeControl(e.checkboxSelection),this.includeRowDrag=this.isIncludeControl(e.rowDrag),this.includeDndSource=this.isIncludeControl(e.dndSource),this.cellComp.setIncludeSelection(this.includeSelection),this.cellComp.setIncludeDndSource(this.includeDndSource),this.cellComp.setIncludeRowDrag(this.includeRowDrag)}isForceWrapper(){return this.beans.gos.get("enableCellTextSelection")||this.column.isAutoHeight()}isIncludeControl(e){return this.rowNode.rowPinned!=null?!1:typeof e=="function"||e===!0}refreshShouldDestroy(){const e=this.column.getColDef(),i=this.includeSelection!=this.isIncludeControl(e.checkboxSelection),s=this.includeRowDrag!=this.isIncludeControl(e.rowDrag),r=this.includeDndSource!=this.isIncludeControl(e.dndSource),n=this.isAutoHeight!=this.column.isAutoHeight();return i||s||r||n}startEditing(e=null,i=!1,s=null){if(!this.isCellEditable()||this.editing)return;if(!this.cellComp){this.onCellCompAttachedFuncs.push(()=>{this.startEditing(e,i,s)});return}const r=this.createCellEditorParams(e,i),n=this.column.getColDef(),o=this.beans.userComponentFactory.getCellEditorDetails(n,r);this.editCompDetails=o;const a=(o==null?void 0:o.popupFromSelector)!=null?o.popupFromSelector:!!n.cellEditorPopup,l=(o==null?void 0:o.popupPositionFromSelector)!=null?o.popupPositionFromSelector:n.cellEditorPopupPosition;this.setEditing(!0),this.cellComp.setEditDetails(o,a,l,this.beans.gos.get("reactiveCustomComponents"));const c=this.createEvent(s,K.EVENT_CELL_EDITING_STARTED);this.beans.eventService.dispatchEvent(c)}setEditing(e){var i;this.editing!==e&&(this.editing=e,(i=this.cellRangeFeature)==null||i.refreshHandle())}stopRowOrCellEdit(e=!1){this.beans.gos.get("editType")==="fullRow"?this.rowCtrl.stopEditing(e):this.stopEditing(e)}onPopupEditorClosed(){this.isEditing()&&this.stopEditingAndFocus()}takeValueFromCellEditor(e){const i={newValueExists:!1};if(e)return i;const s=this.cellComp.getCellEditor();return!s||s.isCancelAfterEnd&&s.isCancelAfterEnd()?i:{newValue:s.getValue(),newValueExists:!0}}saveNewValue(e,i){if(i===e)return!1;this.suppressRefreshCell=!0;const s=this.rowNode.setDataValue(this.column,i,"edit");return this.suppressRefreshCell=!1,s}stopEditing(e=!1){if(!this.editing)return!1;const{newValue:i,newValueExists:s}=this.takeValueFromCellEditor(e),r=this.rowNode.getValueFromValueService(this.column);let n=!1;return s&&(n=this.saveNewValue(r,i)),this.setEditing(!1),this.cellComp.setEditDetails(),this.editCompDetails=void 0,this.updateAndFormatValue(!1),this.refreshCell({forceRefresh:!0,suppressFlash:!0}),this.dispatchEditingStoppedEvent(r,i,!e&&!!n),n}dispatchEditingStoppedEvent(e,i,s){const r=$i(it({},this.createEvent(null,K.EVENT_CELL_EDITING_STOPPED)),{oldValue:e,newValue:i,valueChanged:s});this.beans.eventService.dispatchEvent(r)}createCellEditorParams(e,i){return this.beans.gos.addGridCommonParams({value:this.rowNode.getValueFromValueService(this.column),eventKey:e,column:this.column,colDef:this.column.getColDef(),rowIndex:this.getCellPosition().rowIndex,node:this.rowNode,data:this.rowNode.data,cellStartedEdit:i,onKeyDown:this.onKeyDown.bind(this),stopEditing:this.stopEditingAndFocus.bind(this),eGridCell:this.getGui(),parseValue:this.parseValue.bind(this),formatValue:this.formatValue.bind(this)})}createCellRendererParams(){return this.beans.gos.addGridCommonParams({value:this.value,valueFormatted:this.valueFormatted,getValue:()=>this.rowNode.getValueFromValueService(this.column),setValue:i=>this.beans.valueService.setValue(this.rowNode,this.column,i),formatValue:this.formatValue.bind(this),data:this.rowNode.data,node:this.rowNode,pinned:this.column.getPinned(),colDef:this.column.getColDef(),column:this.column,rowIndex:this.getCellPosition().rowIndex,refreshCell:this.refreshCell.bind(this),eGridCell:this.getGui(),eParentOfValue:this.cellComp.getParentOfValue(),registerRowDragger:(i,s,r,n)=>this.registerRowDragger(i,s,n),setTooltip:(i,s)=>{var r;this.tooltipFeature&&this.disableTooltipFeature(),this.enableTooltipFeature(i,s),(r=this.tooltipFeature)==null||r.refreshToolTip()}})}parseValue(e){return this.beans.valueService.parseValue(this.column,this.rowNode,e,this.getValue())}setFocusOutOnEditor(){if(!this.editing)return;const e=this.cellComp.getCellEditor();e&&e.focusOut&&e.focusOut()}setFocusInOnEditor(){if(!this.editing)return;const e=this.cellComp.getCellEditor();e&&e.focusIn?e.focusIn():this.focusCell(!0)}onCellChanged(e){e.column===this.column&&this.refreshCell({})}refreshOrDestroyCell(e){var i;this.refreshShouldDestroy()?(i=this.rowCtrl)==null||i.recreateCell(this):this.refreshCell(e)}refreshCell(e){var i,s,r,n;if(this.suppressRefreshCell||this.editing)return;const o=this.column.getColDef(),a=e!=null&&!!e.newData,l=e!=null&&!!e.suppressFlash||!!o.suppressCellFlash,c=o.field==null&&o.valueGetter==null&&o.showRowGroup==null,u=e&&e.forceRefresh||c||a,d=!!this.cellComp,h=this.updateAndFormatValue(d),p=u||h;if(d){if(p){this.showValue(a);const f=this.beans.filterManager.isSuppressFlashingCellsBecauseFiltering();!l&&!f&&(this.beans.gos.get("enableCellChangeFlash")||o.enableCellChangeFlash)&&this.flashCell(),(i=this.cellCustomStyleFeature)==null||i.applyUserStyles(),(s=this.cellCustomStyleFeature)==null||s.applyClassesFromColDef()}(r=this.tooltipFeature)==null||r.refreshToolTip(),(n=this.cellCustomStyleFeature)==null||n.applyCellClassRules()}}stopEditingAndFocus(e=!1,i=!1){this.stopRowOrCellEdit(),this.focusCell(!0),e||this.navigateAfterEdit(i)}navigateAfterEdit(e){if(this.beans.gos.get("enterNavigatesVerticallyAfterEdit")){const s=e?ce.UP:ce.DOWN;this.beans.navigationService.navigateToNextCell(null,s,this.getCellPosition(),!1)}}flashCell(e){var i,s;const r=(i=e==null?void 0:e.flashDuration)!=null?i:e==null?void 0:e.flashDelay,n=(s=e==null?void 0:e.fadeDuration)!=null?s:e==null?void 0:e.fadeDelay;this.animateCell("data-changed",r,n)}animateCell(e,i,s){if(!this.cellComp)return;const r=`ag-cell-${e}`,n=`ag-cell-${e}-animation`,{gos:o}=this.beans;i||(i=o.get("cellFlashDuration")),Pe(s)||(s=o.get("cellFadeDuration")),this.cellComp.addOrRemoveCssClass(r,!0),this.cellComp.addOrRemoveCssClass(n,!1),this.beans.frameworkOverrides.wrapIncoming(()=>{window.setTimeout(()=>{this.isAlive()&&(this.cellComp.addOrRemoveCssClass(r,!1),this.cellComp.addOrRemoveCssClass(n,!0),this.eGui.style.transition=`background-color ${s}ms`,window.setTimeout(()=>{this.isAlive()&&(this.cellComp.addOrRemoveCssClass(n,!1),this.eGui.style.transition="")},s))},i)})}onFlashCells(e){if(!this.cellComp)return;const i=this.beans.cellPositionUtils.createId(this.getCellPosition());e.cells[i]&&this.animateCell("highlight")}isCellEditable(){return this.column.isCellEditable(this.rowNode)}isSuppressFillHandle(){return this.column.isSuppressFillHandle()}formatValue(e){var i;return(i=this.callValueFormatter(e))!=null?i:e}callValueFormatter(e){return this.beans.valueService.formatValue(this.column,this.rowNode,e)}updateAndFormatValue(e){const i=this.value,s=this.valueFormatted;return this.value=this.rowNode.getValueFromValueService(this.column),this.valueFormatted=this.callValueFormatter(this.value),e?!this.valuesAreEqual(i,this.value)||this.valueFormatted!=s:!0}valuesAreEqual(e,i){const s=this.column.getColDef();return s.equals?s.equals(e,i):e===i}getComp(){return this.cellComp}getValue(){return this.value}addDomData(){const e=this.getGui();this.beans.gos.setDomData(e,N_.DOM_DATA_KEY_CELL_CTRL,this),this.addDestroyFunc(()=>this.beans.gos.setDomData(e,N_.DOM_DATA_KEY_CELL_CTRL,null))}createEvent(e,i){return this.beans.gos.addGridCommonParams({type:i,node:this.rowNode,data:this.rowNode.data,value:this.value,column:this.column,colDef:this.column.getColDef(),rowPinned:this.rowNode.rowPinned,event:e,rowIndex:this.rowNode.rowIndex})}processCharacter(e){var i;(i=this.cellKeyboardListenerFeature)==null||i.processCharacter(e)}onKeyDown(e){var i;(i=this.cellKeyboardListenerFeature)==null||i.onKeyDown(e)}onMouseEvent(e,i){var s;(s=this.cellMouseListenerFeature)==null||s.onMouseEvent(e,i)}getGui(){return this.eGui}getColSpanningList(){return this.cellPositionFeature.getColSpanningList()}onLeftChanged(){var e;this.cellComp&&((e=this.cellPositionFeature)==null||e.onLeftChanged())}onDisplayedColumnsChanged(){this.eGui&&(this.refreshAriaColIndex(),this.refreshFirstAndLastStyles())}refreshFirstAndLastStyles(){const{cellComp:e,column:i,beans:s}=this;td.refreshFirstAndLastStyles(e,i,s.columnModel)}refreshAriaColIndex(){const e=this.beans.columnModel.getAriaColumnIndex(this.column);rM(this.getGui(),e)}isSuppressNavigable(){return this.column.isSuppressNavigable(this.rowNode)}onWidthChanged(){var e;return(e=this.cellPositionFeature)==null?void 0:e.onWidthChanged()}getColumn(){return this.column}getRowNode(){return this.rowNode}isPrintLayout(){return this.printLayout}getCellPosition(){return this.cellPosition}isEditing(){return this.editing}startRowOrCellEdit(e,i=null){if(!this.cellComp){this.onCellCompAttachedFuncs.push(()=>{this.startRowOrCellEdit(e,i)});return}this.beans.gos.get("editType")==="fullRow"?this.rowCtrl.startRowEditing(e,this):this.startEditing(e,!0,i)}getRowCtrl(){return this.rowCtrl}getRowPosition(){return{rowIndex:this.cellPosition.rowIndex,rowPinned:this.cellPosition.rowPinned}}updateRangeBordersIfRangeCount(){this.cellComp&&this.cellRangeFeature&&this.cellRangeFeature.updateRangeBordersIfRangeCount()}onRangeSelectionChanged(){this.cellComp&&this.cellRangeFeature&&this.cellRangeFeature.onRangeSelectionChanged()}isRangeSelectionEnabled(){return this.cellRangeFeature!=null}focusCell(e=!1){this.beans.focusService.setFocusedCell({rowIndex:this.getCellPosition().rowIndex,column:this.column,rowPinned:this.rowNode.rowPinned,forceBrowserFocus:e})}onRowIndexChanged(){this.createCellPosition(),this.onCellFocused(),this.cellRangeFeature&&this.cellRangeFeature.onRangeSelectionChanged()}onFirstRightPinnedChanged(){if(!this.cellComp)return;const e=this.column.isFirstRightPinned();this.cellComp.addOrRemoveCssClass(gY,e)}onLastLeftPinnedChanged(){if(!this.cellComp)return;const e=this.column.isLastLeftPinned();this.cellComp.addOrRemoveCssClass(mY,e)}onCellFocused(e){if(this.beans.gos.get("suppressCellFocus"))return;const i=this.beans.focusService.isCellFocused(this.cellPosition);if(!this.cellComp){i&&(e!=null&&e.forceBrowserFocus)&&(this.focusEventToRestore=e);return}this.focusEventToRestore=void 0,this.cellComp.addOrRemoveCssClass(fY,i),i&&e&&e.forceBrowserFocus&&this.cellComp.getFocusableElement().focus({preventScroll:!!e.preventScrollOnBrowserFocus});const s=this.beans.gos.get("editType")==="fullRow";!i&&!s&&this.editing&&this.stopRowOrCellEdit(),i&&this.rowCtrl.announceDescription()}createCellPosition(){this.cellPosition={rowIndex:this.rowNode.rowIndex,rowPinned:tl(this.rowNode.rowPinned),column:this.column}}applyStaticCssClasses(){this.cellComp.addOrRemoveCssClass(dY,!0),this.cellComp.addOrRemoveCssClass(vY,!0);const e=this.column.isAutoHeight()==!0;this.cellComp.addOrRemoveCssClass(hY,e),this.cellComp.addOrRemoveCssClass(pY,!e)}onColumnHover(){if(!this.cellComp||!this.beans.gos.get("columnHoverHighlight"))return;const e=this.beans.columnHoverService.isHovered(this.column);this.cellComp.addOrRemoveCssClass(yY,e)}onColDefChanged(){if(!this.cellComp)return;if(this.column.isTooltipEnabled()?(this.disableTooltipFeature(),this.enableTooltipFeature()):this.disableTooltipFeature(),this.setWrapText(),!this.editing)this.refreshOrDestroyCell({forceRefresh:!0,suppressFlash:!0});else{const i=this.getCellEditor();if(i!=null&&i.refresh){const{eventKey:s,cellStartedEdit:r}=this.editCompDetails.params,n=this.createCellEditorParams(s,r),o=this.column.getColDef(),a=this.beans.userComponentFactory.getCellEditorDetails(o,n);i.refresh(a.params)}}}setWrapText(){const e=this.column.getColDef().wrapText==!0;this.cellComp.addOrRemoveCssClass(CY,e)}dispatchCellContextMenuEvent(e){const i=this.column.getColDef(),s=this.createEvent(e,K.EVENT_CELL_CONTEXT_MENU);this.beans.eventService.dispatchEvent(s),i.onCellContextMenu&&window.setTimeout(()=>{this.beans.frameworkOverrides.wrapOutgoing(()=>{i.onCellContextMenu(s)})},0)}getCellRenderer(){return this.cellComp?this.cellComp.getCellRenderer():null}getCellEditor(){return this.cellComp?this.cellComp.getCellEditor():null}destroy(){this.onCellCompAttachedFuncs=[],super.destroy()}createSelectionCheckbox(){const e=new DC;return this.beans.context.createBean(e),e.init({rowNode:this.rowNode,column:this.column}),e}createDndSource(){const e=new P4(this.rowNode,this.column,this.eGui);return this.beans.context.createBean(e),e}registerRowDragger(e,i,s){if(this.customRowDragComp){this.customRowDragComp.setDragElement(e,i);return}const r=this.createRowDragComp(e,i,s);r&&(this.customRowDragComp=r,this.addDestroyFunc(()=>{this.beans.context.destroyBean(r),this.customRowDragComp=null}))}createRowDragComp(e,i,s){const r=this.beans.gos.get("pagination"),n=this.beans.gos.get("rowDragManaged"),o=this.beans.gos.isRowModelType("clientSide");if(n){if(!o){ot("managed row dragging is only allowed in the Client Side Row Model");return}if(r){ot("managed row dragging is not possible when doing pagination");return}}const a=new xh(()=>this.value,this.rowNode,this.column,e,i,s);return this.beans.context.createBean(a),a}};I4.DOM_DATA_KEY_CELL_CTRL="cellCtrl";var Jl=I4,wY=0,F4=class O_ extends ye{constructor(e,i,s,r,n){super(),this.allRowGuis=[],this.active=!0,this.centerCellCtrls={list:[],map:{}},this.leftCellCtrls={list:[],map:{}},this.rightCellCtrls={list:[],map:{}},this.slideInAnimation={left:!1,center:!1,right:!1,fullWidth:!1},this.fadeInAnimation={left:!1,center:!1,right:!1,fullWidth:!1},this.rowDragComps=[],this.lastMouseDownOnDragger=!1,this.emptyStyle={},this.updateColumnListsPending=!1,this.rowId=null,this.businessKeySanitised=null,this.beans=i,this.gos=i.gos,this.rowNode=e,this.paginationPage=i.paginationProxy.getCurrentPage(),this.useAnimationFrameForCreate=r,this.printLayout=n,this.suppressRowTransform=this.gos.get("suppressRowTransform"),this.instanceId=e.id+"-"+wY++,this.rowId=Ts(e.id),this.initRowBusinessKey(),this.rowFocused=i.focusService.isRowFocused(this.rowNode.rowIndex,this.rowNode.rowPinned),this.rowLevel=i.rowCssClassCalculator.calculateRowLevel(this.rowNode),this.setRowType(),this.setAnimateFlags(s),this.rowStyles=this.processStylesFromGridOptions(),this.isFullWidth()&&!this.gos.get("suppressCellFocus")&&(this.tabIndex=-1),this.addListeners()}initRowBusinessKey(){this.businessKeyForNodeFunc=this.gos.get("getBusinessKeyForNode"),this.updateRowBusinessKey()}updateRowBusinessKey(){if(typeof this.businessKeyForNodeFunc!="function")return;const e=this.businessKeyForNodeFunc(this.rowNode);this.businessKeySanitised=Ts(e)}getRowId(){return this.rowId}getRowStyles(){return this.rowStyles}getTabIndex(){return this.tabIndex}isSticky(){return this.rowNode.sticky}getInstanceId(){return this.instanceId}setComp(e,i,s){const r={rowComp:e,element:i,containerType:s};this.allRowGuis.push(r),s==="left"?this.leftGui=r:s==="right"?this.rightGui=r:s==="fullWidth"?this.fullWidthGui=r:this.centerGui=r,this.initialiseRowComp(r),this.rowType!=="FullWidthLoading"&&!this.rowNode.rowPinned&&this.beans.rowRenderer.dispatchFirstDataRenderedEvent()}unsetComp(e){switch(this.allRowGuis=this.allRowGuis.filter(i=>i.containerType!==e),e){case"left":this.leftGui=void 0;break;case"right":this.rightGui=void 0;break;case"fullWidth":this.fullWidthGui=void 0;break;case"center":this.centerGui=void 0;break}}isCacheable(){return this.rowType==="FullWidthDetail"&&this.gos.get("keepDetailRows")}setCached(e){const i=e?"none":"";this.allRowGuis.forEach(s=>s.element.style.display=i)}initialiseRowComp(e){const i=this.gos;this.listenOnDomOrder(e),this.beans.columnModel.wasAutoRowHeightEverActive()&&this.rowNode.checkAutoHeights(),this.onRowHeightChanged(e),this.updateRowIndexes(e),this.setFocusedClasses(e),this.setStylesFromGridOptions(!1,e),i.isRowSelection()&&this.rowNode.selectable&&this.onRowSelected(e),this.updateColumnLists(!this.useAnimationFrameForCreate);const s=e.rowComp;this.getInitialRowClasses(e.containerType).forEach(n=>s.addOrRemoveCssClass(n,!0)),this.executeSlideAndFadeAnimations(e),this.rowNode.group&&nc(e.element,this.rowNode.expanded==!0),this.setRowCompRowId(s),this.setRowCompRowBusinessKey(s),i.setDomData(e.element,O_.DOM_DATA_KEY_ROW_CTRL,this),this.addDestroyFunc(()=>i.setDomData(e.element,O_.DOM_DATA_KEY_ROW_CTRL,null)),this.useAnimationFrameForCreate?this.beans.animationFrameService.createTask(this.addHoverFunctionality.bind(this,e.element),this.rowNode.rowIndex,"createTasksP2"):this.addHoverFunctionality(e.element),this.isFullWidth()&&this.setupFullWidth(e),i.get("rowDragEntireRow")&&this.addRowDraggerToRow(e),this.useAnimationFrameForCreate&&this.beans.animationFrameService.addDestroyTask(()=>{this.isAlive()&&e.rowComp.addOrRemoveCssClass("ag-after-created",!0)}),this.executeProcessRowPostCreateFunc()}setRowCompRowBusinessKey(e){this.businessKeySanitised!=null&&e.setRowBusinessKey(this.businessKeySanitised)}getBusinessKey(){return this.businessKeySanitised}setRowCompRowId(e){this.rowId=Ts(this.rowNode.id),this.rowId!=null&&e.setRowId(this.rowId)}executeSlideAndFadeAnimations(e){const{containerType:i}=e;this.slideInAnimation[i]&&(S_(()=>{this.onTopChanged()}),this.slideInAnimation[i]=!1),this.fadeInAnimation[i]&&(S_(()=>{e.rowComp.addOrRemoveCssClass("ag-opacity-zero",!1)}),this.fadeInAnimation[i]=!1)}addRowDraggerToRow(e){if(this.gos.get("enableRangeSelection")){ot("Setting `rowDragEntireRow: true` in the gridOptions doesn't work with `enableRangeSelection: true`");return}const i=this.beans.localeService.getLocaleTextFunc(),s=new xh(()=>`1 ${i("rowDragRow","row")}`,this.rowNode,void 0,e.element,void 0,!0),r=this.createBean(s,this.beans.context);this.rowDragComps.push(r)}setupFullWidth(e){const i=this.getPinnedForContainer(e.containerType);if(this.rowType=="FullWidthDetail"&&!vt.__assertRegistered("@ag-grid-enterprise/master-detail","cell renderer 'agDetailCellRenderer' (for master detail)",this.beans.context.getGridId()))return;const s=this.createFullWidthCompDetails(e.element,i);e.rowComp.showFullWidth(s)}isPrintLayout(){return this.printLayout}getFullWidthCellRenderers(){var e,i;return this.gos.get("embedFullWidthRows")?this.allRowGuis.map(s=>{var r;return(r=s==null?void 0:s.rowComp)==null?void 0:r.getFullWidthCellRenderer()}):[(i=(e=this.fullWidthGui)==null?void 0:e.rowComp)==null?void 0:i.getFullWidthCellRenderer()]}getCellElement(e){const i=this.getCellCtrl(e);return i?i.getGui():null}executeProcessRowPostCreateFunc(){const e=this.gos.getCallback("processRowPostCreate");if(!e||!this.areAllContainersReady())return;const i={eRow:this.centerGui.element,ePinnedLeftRow:this.leftGui?this.leftGui.element:void 0,ePinnedRightRow:this.rightGui?this.rightGui.element:void 0,node:this.rowNode,rowIndex:this.rowNode.rowIndex,addRenderedRowListener:this.addEventListener.bind(this)};e(i)}areAllContainersReady(){const e=!!this.leftGui||!this.beans.columnModel.isPinningLeft(),i=!!this.centerGui,s=!!this.rightGui||!this.beans.columnModel.isPinningRight();return e&&i&&s}setRowType(){const e=this.rowNode.stub&&!this.gos.get("suppressServerSideFullWidthLoadingRow"),i=this.rowNode.isFullWidthCell(),s=this.gos.get("masterDetail")&&this.rowNode.detail,r=this.beans.columnModel.isPivotMode(),o=!!this.rowNode.group&&!this.rowNode.footer&&this.gos.isGroupUseEntireRow(r);e?this.rowType="FullWidthLoading":s?this.rowType="FullWidthDetail":i?this.rowType="FullWidth":o?this.rowType="FullWidthGroup":this.rowType="Normal"}updateColumnLists(e=!1,i=!1){if(this.isFullWidth())return;if(e||this.gos.get("suppressAnimationFrame")||this.printLayout){this.updateColumnListsImpl(i);return}this.updateColumnListsPending||(this.beans.animationFrameService.createTask(()=>{this.active&&this.updateColumnListsImpl(!0)},this.rowNode.rowIndex,"createTasksP1"),this.updateColumnListsPending=!0)}createCellCtrls(e,i,s=null){const r={list:[],map:{}},n=(o,a)=>{r.list.push(a),r.map[o]=a};return i.forEach(o=>{const a=o.getInstanceId();let l=e.map[a];l||(l=new Jl(o,this.rowNode,this.beans,this)),n(a,l)}),e.list.forEach(o=>{if(r.map[o.getColumn().getInstanceId()]!=null)return;if(!this.isCellEligibleToBeRemoved(o,s)){n(o.getColumn().getInstanceId(),o);return}o.destroy()}),r}updateColumnListsImpl(e){this.updateColumnListsPending=!1,this.createAllCellCtrls(),this.setCellCtrls(e)}setCellCtrls(e){this.allRowGuis.forEach(i=>{const s=this.getCellCtrlsForContainer(i.containerType);i.rowComp.setCellCtrls(s,e)})}getCellCtrlsForContainer(e){switch(e){case"left":return this.leftCellCtrls.list;case"right":return this.rightCellCtrls.list;case"fullWidth":return[];case"center":return this.centerCellCtrls.list;default:const i=e;throw new Error(`Unhandled case: ${i}`)}}createAllCellCtrls(){const e=this.beans.columnModel;if(this.printLayout)this.centerCellCtrls=this.createCellCtrls(this.centerCellCtrls,e.getAllDisplayedColumns()),this.leftCellCtrls={list:[],map:{}},this.rightCellCtrls={list:[],map:{}};else{const i=e.getViewportCenterColumnsForRow(this.rowNode);this.centerCellCtrls=this.createCellCtrls(this.centerCellCtrls,i);const s=e.getDisplayedLeftColumnsForRow(this.rowNode);this.leftCellCtrls=this.createCellCtrls(this.leftCellCtrls,s,"left");const r=e.getDisplayedRightColumnsForRow(this.rowNode);this.rightCellCtrls=this.createCellCtrls(this.rightCellCtrls,r,"right")}}isCellEligibleToBeRemoved(e,i){if(e.getColumn().getPinned()!=i)return!0;const o=e.isEditing(),a=this.beans.focusService.isCellFocused(e.getCellPosition());if(o||a){const c=e.getColumn();return!(this.beans.columnModel.getAllDisplayedColumns().indexOf(c)>=0)}return!0}getDomOrder(){return this.gos.get("ensureDomOrder")||this.gos.isDomLayout("print")}listenOnDomOrder(e){const i=()=>{e.rowComp.setDomOrder(this.getDomOrder())};this.addManagedPropertyListener("domLayout",i),this.addManagedPropertyListener("ensureDomOrder",i)}setAnimateFlags(e){if(this.isSticky()||!e)return;const i=Pe(this.rowNode.oldRowTop),s=this.beans.columnModel.isPinningLeft(),r=this.beans.columnModel.isPinningRight();if(i){if(this.isFullWidth()&&!this.gos.get("embedFullWidthRows")){this.slideInAnimation.fullWidth=!0;return}this.slideInAnimation.center=!0,this.slideInAnimation.left=s,this.slideInAnimation.right=r}else{if(this.isFullWidth()&&!this.gos.get("embedFullWidthRows")){this.fadeInAnimation.fullWidth=!0;return}this.fadeInAnimation.center=!0,this.fadeInAnimation.left=s,this.fadeInAnimation.right=r}}isEditing(){return this.editingRow}isFullWidth(){return this.rowType!=="Normal"}refreshFullWidth(){const e=(a,l)=>a?a.rowComp.refreshFullWidth(()=>this.createFullWidthCompDetails(a.element,l).params):!0,i=e(this.fullWidthGui,null),s=e(this.centerGui,null),r=e(this.leftGui,"left"),n=e(this.rightGui,"right");return i&&s&&r&&n}addListeners(){this.addManagedListener(this.rowNode,Tt.EVENT_HEIGHT_CHANGED,()=>this.onRowHeightChanged()),this.addManagedListener(this.rowNode,Tt.EVENT_ROW_SELECTED,()=>this.onRowSelected()),this.addManagedListener(this.rowNode,Tt.EVENT_ROW_INDEX_CHANGED,this.onRowIndexChanged.bind(this)),this.addManagedListener(this.rowNode,Tt.EVENT_TOP_CHANGED,this.onTopChanged.bind(this)),this.addManagedListener(this.rowNode,Tt.EVENT_EXPANDED_CHANGED,this.updateExpandedCss.bind(this)),this.addManagedListener(this.rowNode,Tt.EVENT_HAS_CHILDREN_CHANGED,this.updateExpandedCss.bind(this)),this.rowNode.detail&&this.addManagedListener(this.rowNode.parent,Tt.EVENT_DATA_CHANGED,this.onRowNodeDataChanged.bind(this)),this.addManagedListener(this.rowNode,Tt.EVENT_DATA_CHANGED,this.onRowNodeDataChanged.bind(this)),this.addManagedListener(this.rowNode,Tt.EVENT_CELL_CHANGED,this.postProcessCss.bind(this)),this.addManagedListener(this.rowNode,Tt.EVENT_HIGHLIGHT_CHANGED,this.onRowNodeHighlightChanged.bind(this)),this.addManagedListener(this.rowNode,Tt.EVENT_DRAGGING_CHANGED,this.postProcessRowDragging.bind(this)),this.addManagedListener(this.rowNode,Tt.EVENT_UI_LEVEL_CHANGED,this.onUiLevelChanged.bind(this));const e=this.beans.eventService;this.addManagedListener(e,K.EVENT_PAGINATION_PIXEL_OFFSET_CHANGED,this.onPaginationPixelOffsetChanged.bind(this)),this.addManagedListener(e,K.EVENT_HEIGHT_SCALE_CHANGED,this.onTopChanged.bind(this)),this.addManagedListener(e,K.EVENT_DISPLAYED_COLUMNS_CHANGED,this.onDisplayedColumnsChanged.bind(this)),this.addManagedListener(e,K.EVENT_VIRTUAL_COLUMNS_CHANGED,this.onVirtualColumnsChanged.bind(this)),this.addManagedListener(e,K.EVENT_CELL_FOCUSED,this.onCellFocusChanged.bind(this)),this.addManagedListener(e,K.EVENT_CELL_FOCUS_CLEARED,this.onCellFocusChanged.bind(this)),this.addManagedListener(e,K.EVENT_PAGINATION_CHANGED,this.onPaginationChanged.bind(this)),this.addManagedListener(e,K.EVENT_MODEL_UPDATED,this.refreshFirstAndLastRowStyles.bind(this)),this.addManagedListener(e,K.EVENT_COLUMN_MOVED,this.updateColumnLists.bind(this)),this.addDestroyFunc(()=>{this.destroyBeans(this.rowDragComps,this.beans.context),this.tooltipFeature&&(this.tooltipFeature=this.destroyBean(this.tooltipFeature,this.beans.context))}),this.addManagedPropertyListeners(["rowDragEntireRow"],()=>{if(this.gos.get("rowDragEntireRow")){this.allRowGuis.forEach(s=>{this.addRowDraggerToRow(s)});return}this.destroyBeans(this.rowDragComps,this.beans.context),this.rowDragComps=[]}),this.addListenersForCellComps()}addListenersForCellComps(){this.addManagedListener(this.rowNode,Tt.EVENT_ROW_INDEX_CHANGED,()=>{this.getAllCellCtrls().forEach(e=>e.onRowIndexChanged())}),this.addManagedListener(this.rowNode,Tt.EVENT_CELL_CHANGED,e=>{this.getAllCellCtrls().forEach(i=>i.onCellChanged(e))})}onRowNodeDataChanged(e){if(this.isFullWidth()!==!!this.rowNode.isFullWidthCell()){this.beans.rowRenderer.redrawRow(this.rowNode);return}if(this.isFullWidth()){this.refreshFullWidth()||this.beans.rowRenderer.redrawRow(this.rowNode);return}this.getAllCellCtrls().forEach(s=>s.refreshCell({suppressFlash:!e.update,newData:!e.update})),this.allRowGuis.forEach(s=>{this.setRowCompRowId(s.rowComp),this.updateRowBusinessKey(),this.setRowCompRowBusinessKey(s.rowComp)}),this.onRowSelected(),this.postProcessCss()}postProcessCss(){this.setStylesFromGridOptions(!0),this.postProcessClassesFromGridOptions(),this.postProcessRowClassRules(),this.postProcessRowDragging()}onRowNodeHighlightChanged(){const e=this.rowNode.highlighted;this.allRowGuis.forEach(i=>{const s=e===0,r=e===1;i.rowComp.addOrRemoveCssClass("ag-row-highlight-above",s),i.rowComp.addOrRemoveCssClass("ag-row-highlight-below",r)})}postProcessRowDragging(){const e=this.rowNode.dragging;this.allRowGuis.forEach(i=>i.rowComp.addOrRemoveCssClass("ag-row-dragging",e))}updateExpandedCss(){const e=this.rowNode.isExpandable(),i=this.rowNode.expanded==!0;this.allRowGuis.forEach(s=>{s.rowComp.addOrRemoveCssClass("ag-row-group",e),s.rowComp.addOrRemoveCssClass("ag-row-group-expanded",e&&i),s.rowComp.addOrRemoveCssClass("ag-row-group-contracted",e&&!i),nc(s.element,e&&i)})}onDisplayedColumnsChanged(){this.updateColumnLists(!0),this.beans.columnModel.wasAutoRowHeightEverActive()&&this.rowNode.checkAutoHeights()}onVirtualColumnsChanged(){this.updateColumnLists(!1,!0)}getRowPosition(){return{rowPinned:tl(this.rowNode.rowPinned),rowIndex:this.rowNode.rowIndex}}onKeyboardNavigate(e){const i=this.allRowGuis.find(l=>l.element.contains(e.target));if(!((i?i.element:null)===e.target))return;const n=this.rowNode,o=this.beans.focusService.getFocusedCell(),a={rowIndex:n.rowIndex,rowPinned:n.rowPinned,column:o&&o.column};this.beans.navigationService.navigateToNextCell(e,e.key,a,!0),e.preventDefault()}onTabKeyDown(e){if(e.defaultPrevented||ha(e))return;const i=this.allRowGuis.find(o=>o.element.contains(e.target)),s=i?i.element:null,r=s===e.target;let n=null;r||(n=this.beans.focusService.findNextFocusableElement(s,!1,e.shiftKey)),(this.isFullWidth()&&r||!n)&&this.beans.navigationService.onTabKeyDown(this,e)}getFullWidthElement(){return this.fullWidthGui?this.fullWidthGui.element:null}getRowYPosition(){var e;const i=(e=this.allRowGuis.find(s=>Fn(s.element)))==null?void 0:e.element;return i?i.getBoundingClientRect().top:0}onFullWidthRowFocused(e){var i;const s=this.rowNode,r=e?this.isFullWidth()&&e.rowIndex===s.rowIndex&&e.rowPinned==s.rowPinned:!1,n=this.fullWidthGui?this.fullWidthGui.element:(i=this.centerGui)==null?void 0:i.element;n&&(n.classList.toggle("ag-full-width-focus",r),r&&n.focus({preventScroll:!0}))}recreateCell(e){this.centerCellCtrls=this.removeCellCtrl(this.centerCellCtrls,e),this.leftCellCtrls=this.removeCellCtrl(this.leftCellCtrls,e),this.rightCellCtrls=this.removeCellCtrl(this.rightCellCtrls,e),e.destroy(),this.updateColumnLists()}removeCellCtrl(e,i){const s={list:[],map:{}};return e.list.forEach(r=>{r!==i&&(s.list.push(r),s.map[r.getColumn().getInstanceId()]=r)}),s}onMouseEvent(e,i){switch(e){case"dblclick":this.onRowDblClick(i);break;case"click":this.onRowClick(i);break;case"touchstart":case"mousedown":this.onRowMouseDown(i);break}}createRowEvent(e,i){return this.gos.addGridCommonParams({type:e,node:this.rowNode,data:this.rowNode.data,rowIndex:this.rowNode.rowIndex,rowPinned:this.rowNode.rowPinned,event:i})}createRowEventWithSource(e,i){const s=this.createRowEvent(e,i);return s.source=this,s}onRowDblClick(e){if(ha(e))return;const i=this.createRowEventWithSource(K.EVENT_ROW_DOUBLE_CLICKED,e);this.beans.eventService.dispatchEvent(i)}onRowMouseDown(e){if(this.lastMouseDownOnDragger=lh(e.target,"ag-row-drag",3),!this.isFullWidth())return;const i=this.rowNode,s=this.beans.columnModel;this.beans.rangeService&&this.beans.rangeService.removeAllCellRanges(),this.beans.focusService.setFocusedCell({rowIndex:i.rowIndex,column:s.getAllDisplayedColumns()[0],rowPinned:i.rowPinned,forceBrowserFocus:!0})}onRowClick(e){if(ha(e)||this.lastMouseDownOnDragger)return;const s=this.createRowEventWithSource(K.EVENT_ROW_CLICKED,e);this.beans.eventService.dispatchEvent(s);const r=e.ctrlKey||e.metaKey,n=e.shiftKey;if(this.gos.get("groupSelectsChildren")&&this.rowNode.group||this.isRowSelectionBlocked()||this.gos.get("suppressRowClickSelection"))return;const a=this.gos.get("rowMultiSelectWithClick"),l=!this.gos.get("suppressRowDeselection"),c="rowClicked";if(this.rowNode.isSelected())a?this.rowNode.setSelectedParams({newValue:!1,event:e,source:c}):r?l&&this.rowNode.setSelectedParams({newValue:!1,event:e,source:c}):this.rowNode.setSelectedParams({newValue:!0,clearSelection:!n,rangeSelect:n,event:e,source:c});else{const u=a?!1:!r;this.rowNode.setSelectedParams({newValue:!0,clearSelection:u,rangeSelect:n,event:e,source:c})}}isRowSelectionBlocked(){return!this.rowNode.selectable||!!this.rowNode.rowPinned||!this.gos.isRowSelection()}setupDetailRowAutoHeight(e){if(this.rowType!=="FullWidthDetail"||!this.gos.get("detailRowAutoHeight"))return;const i=()=>{const r=e.clientHeight;if(r!=null&&r>0){const n=()=>{this.rowNode.setRowHeight(r),this.beans.clientSideRowModel?this.beans.clientSideRowModel.onRowHeightChanged():this.beans.serverSideRowModel&&this.beans.serverSideRowModel.onRowHeightChanged()};window.setTimeout(n,0)}},s=this.beans.resizeObserverService.observeResize(e,i);this.addDestroyFunc(s),i()}createFullWidthCompDetails(e,i){const s=this.gos.addGridCommonParams({fullWidth:!0,data:this.rowNode.data,node:this.rowNode,value:this.rowNode.key,valueFormatted:this.rowNode.key,rowIndex:this.rowNode.rowIndex,eGridCell:e,eParentOfValue:e,pinned:i,addRenderedRowListener:this.addEventListener.bind(this),registerRowDragger:(r,n,o,a)=>this.addFullWidthRowDragging(r,n,o,a),setTooltip:(r,n)=>this.refreshRowTooltip(r,n)});switch(this.rowType){case"FullWidthDetail":return this.beans.userComponentFactory.getFullWidthDetailCellRendererDetails(s);case"FullWidthGroup":return this.beans.userComponentFactory.getFullWidthGroupCellRendererDetails(s);case"FullWidthLoading":return this.beans.userComponentFactory.getFullWidthLoadingCellRendererDetails(s);default:return this.beans.userComponentFactory.getFullWidthCellRendererDetails(s)}}refreshRowTooltip(e,i){if(!this.fullWidthGui)return;const s={getGui:()=>this.fullWidthGui.element,getTooltipValue:()=>e,getLocation:()=>"fullWidthRow",shouldDisplayTooltip:i};this.tooltipFeature&&this.destroyBean(this.tooltipFeature,this.beans.context),this.tooltipFeature=this.createBean(new hr(s,this.beans))}addFullWidthRowDragging(e,i,s="",r){if(!this.isFullWidth())return;const n=new xh(()=>s,this.rowNode,void 0,e,i,r);this.createBean(n,this.beans.context),this.addDestroyFunc(()=>{this.destroyBean(n,this.beans.context)})}onUiLevelChanged(){const e=this.beans.rowCssClassCalculator.calculateRowLevel(this.rowNode);if(this.rowLevel!=e){const i="ag-row-level-"+e,s="ag-row-level-"+this.rowLevel;this.allRowGuis.forEach(r=>{r.rowComp.addOrRemoveCssClass(i,!0),r.rowComp.addOrRemoveCssClass(s,!1)})}this.rowLevel=e}isFirstRowOnPage(){return this.rowNode.rowIndex===this.beans.paginationProxy.getPageFirstRow()}isLastRowOnPage(){return this.rowNode.rowIndex===this.beans.paginationProxy.getPageLastRow()}refreshFirstAndLastRowStyles(){const e=this.isFirstRowOnPage(),i=this.isLastRowOnPage();this.firstRowOnPage!==e&&(this.firstRowOnPage=e,this.allRowGuis.forEach(s=>s.rowComp.addOrRemoveCssClass("ag-row-first",e))),this.lastRowOnPage!==i&&(this.lastRowOnPage=i,this.allRowGuis.forEach(s=>s.rowComp.addOrRemoveCssClass("ag-row-last",i)))}stopEditing(e=!1){if(this.stoppingRowEdit)return;const i=this.getAllCellCtrls(),s=this.editingRow;this.stoppingRowEdit=!0;let r=!1;for(const n of i){const o=n.stopEditing(e);s&&!e&&!r&&o&&(r=!0)}if(r){const n=this.createRowEvent(K.EVENT_ROW_VALUE_CHANGED);this.beans.eventService.dispatchEvent(n)}s&&this.setEditingRow(!1),this.stoppingRowEdit=!1}setInlineEditingCss(e){this.allRowGuis.forEach(i=>{i.rowComp.addOrRemoveCssClass("ag-row-inline-editing",e),i.rowComp.addOrRemoveCssClass("ag-row-not-inline-editing",!e)})}setEditingRow(e){this.editingRow=e,this.allRowGuis.forEach(s=>s.rowComp.addOrRemoveCssClass("ag-row-editing",e));const i=e?this.createRowEvent(K.EVENT_ROW_EDITING_STARTED):this.createRowEvent(K.EVENT_ROW_EDITING_STOPPED);this.beans.eventService.dispatchEvent(i)}startRowEditing(e=null,i=null,s=null){if(this.editingRow)return;this.getAllCellCtrls().reduce((n,o)=>{const a=o===i;return a?o.startEditing(e,a,s):o.startEditing(null,a,s),n?!0:o.isEditing()},!1)&&this.setEditingRow(!0)}getAllCellCtrls(){return this.leftCellCtrls.list.length===0&&this.rightCellCtrls.list.length===0?this.centerCellCtrls.list:[...this.centerCellCtrls.list,...this.leftCellCtrls.list,...this.rightCellCtrls.list]}postProcessClassesFromGridOptions(){const e=this.beans.rowCssClassCalculator.processClassesFromGridOptions(this.rowNode);!e||!e.length||e.forEach(i=>{this.allRowGuis.forEach(s=>s.rowComp.addOrRemoveCssClass(i,!0))})}postProcessRowClassRules(){this.beans.rowCssClassCalculator.processRowClassRules(this.rowNode,e=>{this.allRowGuis.forEach(i=>i.rowComp.addOrRemoveCssClass(e,!0))},e=>{this.allRowGuis.forEach(i=>i.rowComp.addOrRemoveCssClass(e,!1))})}setStylesFromGridOptions(e,i){e&&(this.rowStyles=this.processStylesFromGridOptions()),this.forEachGui(i,s=>s.rowComp.setUserStyles(this.rowStyles))}getPinnedForContainer(e){return e==="left"?"left":e==="right"?"right":null}getInitialRowClasses(e){const i=this.getPinnedForContainer(e),s={rowNode:this.rowNode,rowFocused:this.rowFocused,fadeRowIn:this.fadeInAnimation[e],rowIsEven:this.rowNode.rowIndex%2===0,rowLevel:this.rowLevel,fullWidthRow:this.isFullWidth(),firstRowOnPage:this.isFirstRowOnPage(),lastRowOnPage:this.isLastRowOnPage(),printLayout:this.printLayout,expandable:this.rowNode.isExpandable(),pinned:i};return this.beans.rowCssClassCalculator.getInitialRowClasses(s)}processStylesFromGridOptions(){const e=this.gos.get("rowStyle");if(e&&typeof e=="function"){console.warn("AG Grid: rowStyle should be an object of key/value styles, not be a function, use getRowStyle() instead");return}const i=this.gos.getCallback("getRowStyle");let s;if(i){const r={data:this.rowNode.data,node:this.rowNode,rowIndex:this.rowNode.rowIndex};s=i(r)}return s||e?Object.assign({},e,s):this.emptyStyle}onRowSelected(e){const i=!!this.rowNode.isSelected();this.forEachGui(e,s=>{s.rowComp.addOrRemoveCssClass("ag-row-selected",i),rg(s.element,i),s.element.contains(this.beans.gos.getActiveDomElement())&&(s===this.centerGui||s===this.fullWidthGui)&&this.announceDescription()})}announceDescription(){if(this.isRowSelectionBlocked())return;const e=this.rowNode.isSelected();if(e&&this.beans.gos.get("suppressRowDeselection"))return;const s=this.beans.localeService.getLocaleTextFunc()(e?"ariaRowDeselect":"ariaRowSelect",`Press SPACE to ${e?"deselect":"select"} this row.`);this.beans.ariaAnnouncementService.announceValue(s)}addHoverFunctionality(e){this.active&&(this.addManagedListener(e,"mouseenter",()=>this.rowNode.onMouseEnter()),this.addManagedListener(e,"mouseleave",()=>this.rowNode.onMouseLeave()),this.addManagedListener(this.rowNode,Tt.EVENT_MOUSE_ENTER,()=>{!this.beans.dragService.isDragging()&&!this.gos.get("suppressRowHoverHighlight")&&(e.classList.add("ag-row-hover"),this.rowNode.setHovered(!0))}),this.addManagedListener(this.rowNode,Tt.EVENT_MOUSE_LEAVE,()=>{e.classList.remove("ag-row-hover"),this.rowNode.setHovered(!1)}))}roundRowTopToBounds(e){const i=this.beans.ctrlsService.getGridBodyCtrl().getScrollFeature().getApproximateVScollPosition(),s=this.applyPaginationOffset(i.top,!0)-100,r=this.applyPaginationOffset(i.bottom,!0)+100;return Math.min(Math.max(s,e),r)}getFrameworkOverrides(){return this.beans.frameworkOverrides}forEachGui(e,i){e?i(e):this.allRowGuis.forEach(i)}onRowHeightChanged(e){if(this.rowNode.rowHeight==null)return;const i=this.rowNode.rowHeight,s=this.beans.environment.getDefaultRowHeight(),n=this.gos.isGetRowHeightFunction()?this.gos.getRowHeightForNode(this.rowNode).height:void 0,o=n?`${Math.min(s,n)-2}px`:void 0;this.forEachGui(e,a=>{a.element.style.height=`${i}px`,o&&a.element.style.setProperty("--ag-line-height",o)})}addEventListener(e,i){super.addEventListener(e,i)}removeEventListener(e,i){super.removeEventListener(e,i)}destroyFirstPass(e=!1){if(this.active=!1,!e&&this.gos.isAnimateRows()&&!this.isSticky())if(this.rowNode.rowTop!=null){const r=this.roundRowTopToBounds(this.rowNode.rowTop);this.setRowTop(r)}else this.allRowGuis.forEach(r=>r.rowComp.addOrRemoveCssClass("ag-opacity-zero",!0));this.rowNode.setHovered(!1);const i=this.createRowEvent(K.EVENT_VIRTUAL_ROW_REMOVED);this.dispatchEvent(i),this.beans.eventService.dispatchEvent(i),super.destroy()}destroySecondPass(){this.allRowGuis.length=0,this.stopEditing();const e=i=>(i.list.forEach(s=>s.destroy()),{list:[],map:{}});this.centerCellCtrls=e(this.centerCellCtrls),this.leftCellCtrls=e(this.leftCellCtrls),this.rightCellCtrls=e(this.rightCellCtrls)}setFocusedClasses(e){this.forEachGui(e,i=>{i.rowComp.addOrRemoveCssClass("ag-row-focus",this.rowFocused),i.rowComp.addOrRemoveCssClass("ag-row-no-focus",!this.rowFocused)})}onCellFocusChanged(){const e=this.beans.focusService.isRowFocused(this.rowNode.rowIndex,this.rowNode.rowPinned);e!==this.rowFocused&&(this.rowFocused=e,this.setFocusedClasses()),!e&&this.editingRow&&this.stopEditing(!1)}onPaginationChanged(){const e=this.beans.paginationProxy.getCurrentPage();this.paginationPage!==e&&(this.paginationPage=e,this.onTopChanged()),this.refreshFirstAndLastRowStyles()}onTopChanged(){this.setRowTop(this.rowNode.rowTop)}onPaginationPixelOffsetChanged(){this.onTopChanged()}applyPaginationOffset(e,i=!1){if(this.rowNode.isRowPinned()||this.rowNode.sticky)return e;const s=this.beans.paginationProxy.getPixelOffset();return e+s*(i?1:-1)}setRowTop(e){if(!this.printLayout&&Pe(e)){const i=this.applyPaginationOffset(e),n=`${this.rowNode.isRowPinned()||this.rowNode.sticky?i:this.beans.rowContainerHeightService.getRealPixelPosition(i)}px`;this.setRowTopStyle(n)}}getInitialRowTop(e){return this.suppressRowTransform?this.getInitialRowTopShared(e):void 0}getInitialTransform(e){return this.suppressRowTransform?void 0:`translateY(${this.getInitialRowTopShared(e)})`}getInitialRowTopShared(e){if(this.printLayout)return"";let i;if(this.isSticky())i=this.rowNode.stickyRowTop;else{const s=this.slideInAnimation[e]?this.roundRowTopToBounds(this.rowNode.oldRowTop):this.rowNode.rowTop,r=this.applyPaginationOffset(s);i=this.rowNode.isRowPinned()?r:this.beans.rowContainerHeightService.getRealPixelPosition(r)}return i+"px"}setRowTopStyle(e){this.allRowGuis.forEach(i=>this.suppressRowTransform?i.rowComp.setTop(e):i.rowComp.setTransform(`translateY(${e})`))}getRowNode(){return this.rowNode}getCellCtrl(e){let i=null;return this.getAllCellCtrls().forEach(s=>{s.getColumn()==e&&(i=s)}),i!=null||this.getAllCellCtrls().forEach(s=>{s.getColSpanningList().indexOf(e)>=0&&(i=s)}),i}onRowIndexChanged(){this.rowNode.rowIndex!=null&&(this.onCellFocusChanged(),this.updateRowIndexes(),this.postProcessCss())}getRowIndex(){return this.rowNode.getRowIndexString()}updateRowIndexes(e){const i=this.rowNode.getRowIndexString(),s=this.beans.headerNavigationService.getHeaderRowCount()+this.beans.filterManager.getHeaderRowCount(),r=this.rowNode.rowIndex%2===0,n=s+this.rowNode.rowIndex+1;this.forEachGui(e,o=>{o.rowComp.setRowIndex(i),o.rowComp.addOrRemoveCssClass("ag-row-even",r),o.rowComp.addOrRemoveCssClass("ag-row-odd",!r),sM(o.element,n)})}};F4.DOM_DATA_KEY_ROW_CTRL="renderedRow";var yu=F4,On=class extends ye{constructor(t){super(),this.element=t}postConstruct(){this.addKeyboardListeners(),this.addMouseListeners(),this.mockContextMenuForIPad()}addKeyboardListeners(){const t="keydown",e=this.processKeyboardEvent.bind(this,t);this.addManagedListener(this.element,t,e)}addMouseListeners(){["dblclick","contextmenu","mouseover","mouseout","click",XR("touchstart")?"touchstart":"mousedown"].forEach(i=>{const s=this.processMouseEvent.bind(this,i);this.addManagedListener(this.element,i,s)})}processMouseEvent(t,e){if(!this.mouseEventService.isEventFromThisGrid(e)||ha(e))return;const i=this.getRowForEvent(e),s=this.mouseEventService.getRenderedCellForEvent(e);t==="contextmenu"?this.handleContextMenuMouseEvent(e,void 0,i,s):(s&&s.onMouseEvent(t,e),i&&i.onMouseEvent(t,e))}mockContextMenuForIPad(){if(!xc())return;const t=new Es(this.element),e=i=>{const s=this.getRowForEvent(i.touchEvent),r=this.mouseEventService.getRenderedCellForEvent(i.touchEvent);this.handleContextMenuMouseEvent(void 0,i.touchEvent,s,r)};this.addManagedListener(t,Es.EVENT_LONG_TAP,e),this.addDestroyFunc(()=>t.destroy())}getRowForEvent(t){let e=t.target;for(;e;){const i=this.gos.getDomData(e,yu.DOM_DATA_KEY_ROW_CTRL);if(i)return i;e=e.parentElement}return null}handleContextMenuMouseEvent(t,e,i,s){const r=i?i.getRowNode():null,n=s?s.getColumn():null;let o=null;if(n){const c=t||e;s.dispatchCellContextMenuEvent(c??null),o=this.valueService.getValue(n,r)}const a=this.ctrlsService.getGridBodyCtrl(),l=s?s.getGui():a.getGridBodyElement();this.menuService.showContextMenu({mouseEvent:t,touchEvent:e,rowNode:r,column:n,value:o,anchorToElement:l})}getControlsForEventTarget(t){return{cellCtrl:Vw(this.gos,t,Jl.DOM_DATA_KEY_CELL_CTRL),rowCtrl:Vw(this.gos,t,yu.DOM_DATA_KEY_ROW_CTRL)}}processKeyboardEvent(t,e){const{cellCtrl:i,rowCtrl:s}=this.getControlsForEventTarget(e.target);e.defaultPrevented||(i?this.processCellKeyboardEvent(i,t,e):s&&s.isFullWidth()&&this.processFullWidthRowKeyboardEvent(s,t,e))}processCellKeyboardEvent(t,e,i){const s=t.getRowNode(),r=t.getColumn(),n=t.isEditing();if(!zw(this.gos,i,s,r,n)&&e==="keydown"&&(!n&&this.navigationService.handlePageScrollingKey(i)||t.onKeyDown(i),this.doGridOperations(i,t.isEditing()),hx(i)&&t.processCharacter(i)),e==="keydown"){const a=t.createEvent(i,K.EVENT_CELL_KEY_DOWN);this.eventService.dispatchEvent(a)}}processFullWidthRowKeyboardEvent(t,e,i){const s=t.getRowNode(),r=this.focusService.getFocusedCell(),n=r&&r.column;if(!zw(this.gos,i,s,n,!1)){const a=i.key;if(e==="keydown")switch(a){case ce.PAGE_HOME:case ce.PAGE_END:case ce.PAGE_UP:case ce.PAGE_DOWN:this.navigationService.handlePageScrollingKey(i,!0);break;case ce.UP:case ce.DOWN:t.onKeyboardNavigate(i);break;case ce.TAB:t.onTabKeyDown(i);break}}if(e==="keydown"){const a=t.createRowEvent(K.EVENT_CELL_KEY_DOWN,i);this.eventService.dispatchEvent(a)}}doGridOperations(t,e){if(!t.ctrlKey&&!t.metaKey||e||!this.mouseEventService.isEventFromThisGrid(t))return;const i=FG(t);if(i===ce.A)return this.onCtrlAndA(t);if(i===ce.C)return this.onCtrlAndC(t);if(i===ce.D)return this.onCtrlAndD(t);if(i===ce.V)return this.onCtrlAndV(t);if(i===ce.X)return this.onCtrlAndX(t);if(i===ce.Y)return this.onCtrlAndY();if(i===ce.Z)return this.onCtrlAndZ(t)}onCtrlAndA(t){const{pinnedRowModel:e,paginationProxy:i,rangeService:s}=this;if(s&&i.isRowsToRender()){const[r,n]=[e.isEmpty("top"),e.isEmpty("bottom")],o=r?null:"top";let a,l;n?(a=null,l=this.paginationProxy.getRowCount()-1):(a="bottom",l=e.getPinnedBottomRowData().length-1);const c=this.columnModel.getAllDisplayedColumns();if(Mo(c))return;s.setCellRange({rowStartIndex:0,rowStartPinned:o,rowEndIndex:l,rowEndPinned:a,columnStart:c[0],columnEnd:di(c)})}t.preventDefault()}onCtrlAndC(t){if(!this.clipboardService||this.gos.get("enableCellTextSelection"))return;const{cellCtrl:e,rowCtrl:i}=this.getControlsForEventTarget(t.target);e!=null&&e.isEditing()||i!=null&&i.isEditing()||(t.preventDefault(),this.clipboardService.copyToClipboard())}onCtrlAndX(t){if(!this.clipboardService||this.gos.get("enableCellTextSelection")||this.gos.get("suppressCutToClipboard"))return;const{cellCtrl:e,rowCtrl:i}=this.getControlsForEventTarget(t.target);e!=null&&e.isEditing()||i!=null&&i.isEditing()||(t.preventDefault(),this.clipboardService.cutToClipboard(void 0,"ui"))}onCtrlAndV(t){const{cellCtrl:e,rowCtrl:i}=this.getControlsForEventTarget(t.target);e!=null&&e.isEditing()||i!=null&&i.isEditing()||this.clipboardService&&!this.gos.get("suppressClipboardPaste")&&this.clipboardService.pasteFromClipboard()}onCtrlAndD(t){this.clipboardService&&!this.gos.get("suppressClipboardPaste")&&this.clipboardService.copyRangeDown(),t.preventDefault()}onCtrlAndZ(t){this.gos.get("undoRedoCellEditing")&&(t.preventDefault(),t.shiftKey?this.undoRedoService.redo("ui"):this.undoRedoService.undo("ui"))}onCtrlAndY(){this.undoRedoService.redo("ui")}};z([W("mouseEventService")],On.prototype,"mouseEventService",2);z([W("valueService")],On.prototype,"valueService",2);z([W("menuService")],On.prototype,"menuService",2);z([W("ctrlsService")],On.prototype,"ctrlsService",2);z([W("navigationService")],On.prototype,"navigationService",2);z([W("focusService")],On.prototype,"focusService",2);z([W("undoRedoService")],On.prototype,"undoRedoService",2);z([W("columnModel")],On.prototype,"columnModel",2);z([W("paginationProxy")],On.prototype,"paginationProxy",2);z([W("pinnedRowModel")],On.prototype,"pinnedRowModel",2);z([Vt("rangeService")],On.prototype,"rangeService",2);z([Vt("clipboardService")],On.prototype,"clipboardService",2);z([de],On.prototype,"postConstruct",1);var Bg=class extends ye{constructor(t){super(),this.centerContainerCtrl=t}postConstruct(){this.ctrlsService.whenReady(t=>{this.gridBodyCtrl=t.gridBodyCtrl,this.listenForResize()}),this.addManagedListener(this.eventService,K.EVENT_SCROLLBAR_WIDTH_CHANGED,this.onScrollbarWidthChanged.bind(this)),this.addManagedPropertyListeners(["alwaysShowHorizontalScroll","alwaysShowVerticalScroll"],()=>{this.checkViewportAndScrolls()})}listenForResize(){const t=()=>this.onCenterViewportResized();this.centerContainerCtrl.registerViewportResizeListener(t),this.gridBodyCtrl.registerBodyViewportResizeListener(t)}onScrollbarWidthChanged(){this.checkViewportAndScrolls()}onCenterViewportResized(){if(this.centerContainerCtrl.isViewportInTheDOMTree()){this.keepPinnedColumnsNarrowerThanViewport(),this.checkViewportAndScrolls();const t=this.centerContainerCtrl.getCenterWidth();t!==this.centerWidth&&(this.centerWidth=t,this.columnModel.refreshFlexedColumns({viewportWidth:this.centerWidth,updateBodyWidths:!0,fireResizedEvent:!0}))}else this.bodyHeight=0}keepPinnedColumnsNarrowerThanViewport(){const t=this.gridBodyCtrl.getBodyViewportElement(),e=zh(t);if(e<=50)return;let i=this.getPinnedColumnsOverflowingViewport(e-50);const s=this.gos.getCallback("processUnpinnedColumns");i.length&&(s&&(i=s({columns:i,viewportWidth:e})),this.columnModel.setColumnsPinned(i,null,"viewportSizeFeature"))}getPinnedColumnsOverflowingViewport(t){const e=this.pinnedWidthService.getPinnedRightWidth(),i=this.pinnedWidthService.getPinnedLeftWidth(),s=e+i;if(s<t)return[];const r=[...this.columnModel.getDisplayedLeftColumns()],n=[...this.columnModel.getDisplayedRightColumns()];let o=0,a=0,l=0;const c=[];let u=s-l-t;for(;(a<r.length||o<n.length)&&u>0;){if(o<n.length){const d=n[o++];u-=d.getActualWidth(),c.push(d)}if(a<r.length&&u>0){const d=r[a++];u-=d.getActualWidth(),c.push(d)}}return c}checkViewportAndScrolls(){this.updateScrollVisibleService(),this.checkBodyHeight(),this.onHorizontalViewportChanged(),this.gridBodyCtrl.getScrollFeature().checkScrollLeft()}getBodyHeight(){return this.bodyHeight}checkBodyHeight(){const t=this.gridBodyCtrl.getBodyViewportElement(),e=bC(t);if(this.bodyHeight!==e){this.bodyHeight=e;const i={type:K.EVENT_BODY_HEIGHT_CHANGED};this.eventService.dispatchEvent(i)}}updateScrollVisibleService(){this.updateScrollVisibleServiceImpl(),setTimeout(this.updateScrollVisibleServiceImpl.bind(this),500)}updateScrollVisibleServiceImpl(){const t={horizontalScrollShowing:this.isHorizontalScrollShowing(),verticalScrollShowing:this.gridBodyCtrl.isVerticalScrollShowing()};this.scrollVisibleService.setScrollsVisible(t)}isHorizontalScrollShowing(){return this.centerContainerCtrl.isHorizontalScrollShowing()}onHorizontalViewportChanged(){const t=this.centerContainerCtrl.getCenterWidth(),e=this.centerContainerCtrl.getViewportScrollLeft();this.columnModel.setViewportPosition(t,e)}};z([W("ctrlsService")],Bg.prototype,"ctrlsService",2);z([W("pinnedWidthService")],Bg.prototype,"pinnedWidthService",2);z([W("columnModel")],Bg.prototype,"columnModel",2);z([W("scrollVisibleService")],Bg.prototype,"scrollVisibleService",2);z([de],Bg.prototype,"postConstruct",1);var HM=class extends ye{constructor(t){super(),this.element=t}postConstruct(){this.addManagedListener(this.eventService,K.EVENT_LEFT_PINNED_WIDTH_CHANGED,this.onPinnedLeftWidthChanged.bind(this))}onPinnedLeftWidthChanged(){const t=this.pinnedWidthService.getPinnedLeftWidth(),e=t>0;Qt(this.element,e),Lo(this.element,t)}getWidth(){return this.pinnedWidthService.getPinnedLeftWidth()}};z([W("pinnedWidthService")],HM.prototype,"pinnedWidthService",2);z([de],HM.prototype,"postConstruct",1);var jM=class extends ye{constructor(t){super(),this.element=t}postConstruct(){this.addManagedListener(this.eventService,K.EVENT_RIGHT_PINNED_WIDTH_CHANGED,this.onPinnedRightWidthChanged.bind(this))}onPinnedRightWidthChanged(){const t=this.pinnedWidthService.getPinnedRightWidth(),e=t>0;Qt(this.element,e),Lo(this.element,t)}getWidth(){return this.pinnedWidthService.getPinnedRightWidth()}};z([W("pinnedWidthService")],jM.prototype,"pinnedWidthService",2);z([de],jM.prototype,"postConstruct",1);var Ex=class extends ye{constructor(t,e){super(),this.eContainer=t,this.eViewport=e}postConstruct(){this.addManagedListener(this.eventService,K.EVENT_ROW_CONTAINER_HEIGHT_CHANGED,this.onHeightChanged.bind(this))}onHeightChanged(){const t=this.maxDivHeightScaler.getUiContainerHeight(),e=t!=null?`${t}px`:"";this.eContainer.style.height=e,this.eViewport&&(this.eViewport.style.height=e)}};z([W("rowContainerHeightService")],Ex.prototype,"maxDivHeightScaler",2);z([de],Ex.prototype,"postConstruct",1);var Tx=class extends ye{constructor(t){super(),this.eContainer=t}postConstruct(){if(!this.rangeService)return;this.params={eElement:this.eContainer,onDragStart:this.rangeService.onDragStart.bind(this.rangeService),onDragStop:this.rangeService.onDragStop.bind(this.rangeService),onDragging:this.rangeService.onDragging.bind(this.rangeService)},this.addManagedPropertyListener("enableRangeSelection",e=>{if(e.currentValue){this.enableFeature();return}this.disableFeature()}),this.addDestroyFunc(()=>this.disableFeature()),this.gos.get("enableRangeSelection")&&this.enableFeature()}enableFeature(){this.dragService.addDragSource(this.params)}disableFeature(){this.dragService.removeDragSource(this.params)}};z([W("dragService")],Tx.prototype,"dragService",2);z([Vt("rangeService")],Tx.prototype,"rangeService",2);z([de],Tx.prototype,"postConstruct",1);var Vg=class extends ye{constructor(t,e=!1){super(),this.callback=t,this.addSpacer=e}postConstruct(){const t=this.setWidth.bind(this);this.addManagedPropertyListener("domLayout",t),this.addManagedListener(this.eventService,K.EVENT_COLUMN_CONTAINER_WIDTH_CHANGED,t),this.addManagedListener(this.eventService,K.EVENT_DISPLAYED_COLUMNS_CHANGED,t),this.addManagedListener(this.eventService,K.EVENT_LEFT_PINNED_WIDTH_CHANGED,t),this.addSpacer&&(this.addManagedListener(this.eventService,K.EVENT_RIGHT_PINNED_WIDTH_CHANGED,t),this.addManagedListener(this.eventService,K.EVENT_SCROLL_VISIBILITY_CHANGED,t),this.addManagedListener(this.eventService,K.EVENT_SCROLLBAR_WIDTH_CHANGED,t)),this.setWidth()}setWidth(){const{columnModel:t}=this,e=this.gos.isDomLayout("print"),i=t.getBodyContainerWidth(),s=t.getDisplayedColumnsLeftWidth(),r=t.getDisplayedColumnsRightWidth();let n;e?n=i+s+r:(n=i,this.addSpacer&&(this.gos.get("enableRtl")?s:r)===0&&this.scrollVisibleService.isVerticalScrollShowing()&&(n+=this.gos.getScrollbarWidth())),this.callback(n)}};z([W("columnModel")],Vg.prototype,"columnModel",2);z([W("scrollVisibleService")],Vg.prototype,"scrollVisibleService",2);z([de],Vg.prototype,"postConstruct",1);var L4=(t=>(t.LEFT="left",t.RIGHT="right",t.CENTER="center",t.FULL_WIDTH="fullWidth",t.TOP_LEFT="topLeft",t.TOP_RIGHT="topRight",t.TOP_CENTER="topCenter",t.TOP_FULL_WIDTH="topFullWidth",t.STICKY_TOP_LEFT="stickyTopLeft",t.STICKY_TOP_RIGHT="stickyTopRight",t.STICKY_TOP_CENTER="stickyTopCenter",t.STICKY_TOP_FULL_WIDTH="stickyTopFullWidth",t.STICKY_BOTTOM_LEFT="stickyBottomLeft",t.STICKY_BOTTOM_RIGHT="stickyBottomRight",t.STICKY_BOTTOM_CENTER="stickyBottomCenter",t.STICKY_BOTTOM_FULL_WIDTH="stickyBottomFullWidth",t.BOTTOM_LEFT="bottomLeft",t.BOTTOM_RIGHT="bottomRight",t.BOTTOM_CENTER="bottomCenter",t.BOTTOM_FULL_WIDTH="bottomFullWidth",t))(L4||{}),k4=(t=>(t.LEFT="left",t.RIGHT="right",t.CENTER="center",t.FULL_WIDTH="fullWidth",t))(k4||{});function N4(t){switch(t){case"center":case"topCenter":case"stickyTopCenter":case"bottomCenter":case"stickyBottomCenter":return"center";case"left":case"topLeft":case"stickyTopLeft":case"bottomLeft":case"stickyBottomLeft":return"left";case"right":case"topRight":case"stickyTopRight":case"bottomRight":case"stickyBottomRight":return"right";case"fullWidth":case"topFullWidth":case"stickyTopFullWidth":case"bottomFullWidth":case"stickyBottomFullWidth":return"fullWidth";default:throw Error("Invalid Row Container Type")}}var SY=tu([["center","ag-center-cols-container"],["left","ag-pinned-left-cols-container"],["right","ag-pinned-right-cols-container"],["fullWidth","ag-full-width-container"],["topCenter","ag-floating-top-container"],["topLeft","ag-pinned-left-floating-top"],["topRight","ag-pinned-right-floating-top"],["topFullWidth","ag-floating-top-full-width-container"],["stickyTopCenter","ag-sticky-top-container"],["stickyTopLeft","ag-pinned-left-sticky-top"],["stickyTopRight","ag-pinned-right-sticky-top"],["stickyTopFullWidth","ag-sticky-top-full-width-container"],["stickyBottomCenter","ag-sticky-bottom-container"],["stickyBottomLeft","ag-pinned-left-sticky-bottom"],["stickyBottomRight","ag-pinned-right-sticky-bottom"],["stickyBottomFullWidth","ag-sticky-bottom-full-width-container"],["bottomCenter","ag-floating-bottom-container"],["bottomLeft","ag-pinned-left-floating-bottom"],["bottomRight","ag-pinned-right-floating-bottom"],["bottomFullWidth","ag-floating-bottom-full-width-container"]]),xY=tu([["center","ag-center-cols-viewport"],["topCenter","ag-floating-top-viewport"],["stickyTopCenter","ag-sticky-top-viewport"],["bottomCenter","ag-floating-bottom-viewport"],["stickyBottomCenter","ag-sticky-bottom-viewport"]]),qh=class O4 extends ye{constructor(e){super(),this.visible=!0,this.EMPTY_CTRLS=[],this.name=e,this.isFullWithContainer=this.name==="topFullWidth"||this.name==="stickyTopFullWidth"||this.name==="stickyBottomFullWidth"||this.name==="bottomFullWidth"||this.name==="fullWidth"}static getRowContainerCssClasses(e){const i=SY.get(e),s=xY.get(e);return{container:i,viewport:s}}static getPinned(e){switch(e){case"bottomLeft":case"topLeft":case"stickyTopLeft":case"stickyBottomLeft":case"left":return"left";case"bottomRight":case"topRight":case"stickyTopRight":case"stickyBottomRight":case"right":return"right";default:return null}}postConstruct(){this.enableRtl=this.gos.get("enableRtl"),this.forContainers(["center"],()=>this.viewportSizeFeature=this.createManagedBean(new Bg(this)))}registerWithCtrlsService(){switch(this.name){case"fullWidth":case"topFullWidth":case"stickyTopFullWidth":case"bottomFullWidth":case"stickyBottomFullWidth":return;default:this.ctrlsService.register(this.name,this)}}forContainers(e,i){e.indexOf(this.name)>=0&&i()}getContainerElement(){return this.eContainer}getViewportSizeFeature(){return this.viewportSizeFeature}setComp(e,i,s){this.comp=e,this.eContainer=i,this.eViewport=s,this.createManagedBean(new On(this.eContainer)),this.addPreventScrollWhileDragging(),this.listenOnDomOrder(),this.stopHScrollOnPinnedRows();const r=["topCenter","topLeft","topRight"],n=["stickyTopCenter","stickyTopLeft","stickyTopRight"],o=["stickyBottomCenter","stickyBottomLeft","stickyBottomRight"],a=["bottomCenter","bottomLeft","bottomRight"],l=["center","left","right"],c=[...r,...a,...l,...n,...o],u=["center","left","right","fullWidth"],d=["center","topCenter","stickyTopCenter","bottomCenter","stickyBottomCenter"],h=["left","bottomLeft","topLeft","stickyTopLeft","stickyBottomLeft"],p=["right","bottomRight","topRight","stickyTopRight","stickyBottomRight"];this.forContainers(h,()=>{this.pinnedWidthFeature=this.createManagedBean(new HM(this.eContainer)),this.addManagedListener(this.eventService,K.EVENT_LEFT_PINNED_WIDTH_CHANGED,()=>this.onPinnedWidthChanged())}),this.forContainers(p,()=>{this.pinnedWidthFeature=this.createManagedBean(new jM(this.eContainer)),this.addManagedListener(this.eventService,K.EVENT_RIGHT_PINNED_WIDTH_CHANGED,()=>this.onPinnedWidthChanged())}),this.forContainers(u,()=>this.createManagedBean(new Ex(this.eContainer,this.name==="center"?s:void 0))),this.forContainers(c,()=>this.createManagedBean(new Tx(this.eContainer))),this.forContainers(d,()=>this.createManagedBean(new Vg(f=>this.comp.setContainerWidth(`${f}px`)))),this.addListeners(),this.registerWithCtrlsService()}addListeners(){this.addManagedListener(this.eventService,K.EVENT_DISPLAYED_COLUMNS_CHANGED,()=>this.onDisplayedColumnsChanged()),this.addManagedListener(this.eventService,K.EVENT_DISPLAYED_COLUMNS_WIDTH_CHANGED,()=>this.onDisplayedColumnsWidthChanged()),this.addManagedListener(this.eventService,K.EVENT_DISPLAYED_ROWS_CHANGED,e=>this.onDisplayedRowsChanged(e.afterScroll)),this.onDisplayedColumnsChanged(),this.onDisplayedColumnsWidthChanged(),this.onDisplayedRowsChanged()}listenOnDomOrder(){if(["stickyTopCenter","stickyTopLeft","stickyTopRight","stickyTopFullWidth","stickyBottomCenter","stickyBottomLeft","stickyBottomRight","stickyBottomFullWidth"].indexOf(this.name)>=0){this.comp.setDomOrder(!0);return}const s=()=>{const r=this.gos.get("ensureDomOrder"),n=this.gos.isDomLayout("print");this.comp.setDomOrder(r||n)};this.addManagedPropertyListener("domLayout",s),s()}stopHScrollOnPinnedRows(){this.forContainers(["topCenter","stickyTopCenter","bottomCenter","stickyBottomCenter"],()=>{const e=()=>this.eViewport.scrollLeft=0;this.addManagedListener(this.eViewport,"scroll",e)})}onDisplayedColumnsChanged(){this.forContainers(["center"],()=>this.onHorizontalViewportChanged())}onDisplayedColumnsWidthChanged(){this.forContainers(["center"],()=>this.onHorizontalViewportChanged())}addPreventScrollWhileDragging(){const e=i=>{this.dragService.isDragging()&&i.cancelable&&i.preventDefault()};this.eContainer.addEventListener("touchmove",e,{passive:!1}),this.addDestroyFunc(()=>this.eContainer.removeEventListener("touchmove",e))}onHorizontalViewportChanged(e=!1){const i=this.getCenterWidth(),s=this.getCenterViewportScrollLeft();this.columnModel.setViewportPosition(i,s,e)}getCenterWidth(){return zh(this.eViewport)}getCenterViewportScrollLeft(){return uy(this.eViewport,this.enableRtl)}registerViewportResizeListener(e){const i=this.resizeObserverService.observeResize(this.eViewport,e);this.addDestroyFunc(()=>i())}isViewportInTheDOMTree(){return mM(this.eViewport)}getViewportScrollLeft(){return uy(this.eViewport,this.enableRtl)}isHorizontalScrollShowing(){return this.gos.get("alwaysShowHorizontalScroll")||xG(this.eViewport)}getViewportElement(){return this.eViewport}setContainerTranslateX(e){this.eContainer.style.transform=`translateX(${e}px)`}getHScrollPosition(){return{left:this.eViewport.scrollLeft,right:this.eViewport.scrollLeft+this.eViewport.offsetWidth}}setCenterViewportScrollLeft(e){dy(this.eViewport,e,this.enableRtl)}isContainerVisible(){return!O4.getPinned(this.name)||!!this.pinnedWidthFeature&&this.pinnedWidthFeature.getWidth()>0}onPinnedWidthChanged(){const e=this.isContainerVisible();this.visible!=e&&(this.visible=e,this.onDisplayedRowsChanged())}onDisplayedRowsChanged(e=!1){const i=this.getRowCtrls();if(!this.visible||i.length===0){this.comp.setRowCtrls({rowCtrls:this.EMPTY_CTRLS});return}const s=this.gos.isDomLayout("print"),n=this.gos.get("embedFullWidthRows")||s,o=i.filter(a=>{const l=a.isFullWidth();return this.isFullWithContainer?!n&&l:n||!l});this.comp.setRowCtrls({rowCtrls:o,useFlushSync:e})}getRowCtrls(){switch(this.name){case"topCenter":case"topLeft":case"topRight":case"topFullWidth":return this.rowRenderer.getTopRowCtrls();case"stickyTopCenter":case"stickyTopLeft":case"stickyTopRight":case"stickyTopFullWidth":return this.rowRenderer.getStickyTopRowCtrls();case"stickyBottomCenter":case"stickyBottomLeft":case"stickyBottomRight":case"stickyBottomFullWidth":return this.rowRenderer.getStickyBottomRowCtrls();case"bottomCenter":case"bottomLeft":case"bottomRight":case"bottomFullWidth":return this.rowRenderer.getBottomRowCtrls();default:return this.rowRenderer.getCentreRowCtrls()}}};z([W("dragService")],qh.prototype,"dragService",2);z([W("ctrlsService")],qh.prototype,"ctrlsService",2);z([W("columnModel")],qh.prototype,"columnModel",2);z([W("resizeObserverService")],qh.prototype,"resizeObserverService",2);z([W("rowRenderer")],qh.prototype,"rowRenderer",2);z([de],qh.prototype,"postConstruct",1);var UM=qh,EY=`<div class="ag-root ag-unselectable" role="treegrid">
        <ag-header-root ref="gridHeader"></ag-header-root>
        <div class="ag-floating-top" ref="eTop" role="presentation">
            <ag-row-container ref="topLeftContainer" name="topLeft"></ag-row-container>
            <ag-row-container ref="topCenterContainer" name="topCenter"></ag-row-container>
            <ag-row-container ref="topRightContainer" name="topRight"></ag-row-container>
            <ag-row-container ref="topFullWidthContainer" name="topFullWidth"></ag-row-container>
        </div>
        <div class="ag-body" ref="eBody" role="presentation">
            <div class="ag-body-viewport" ref="eBodyViewport" role="presentation">
                <ag-row-container ref="leftContainer" name="left"></ag-row-container>
                <ag-row-container ref="centerContainer" name="center"></ag-row-container>
                <ag-row-container ref="rightContainer" name="right"></ag-row-container>
                <ag-row-container ref="fullWidthContainer" name="fullWidth"></ag-row-container>
            </div>
            <ag-fake-vertical-scroll></ag-fake-vertical-scroll>
        </div>
        <div class="ag-sticky-top" ref="eStickyTop" role="presentation">
            <ag-row-container ref="stickyTopLeftContainer" name="stickyTopLeft"></ag-row-container>
            <ag-row-container ref="stickyTopCenterContainer" name="stickyTopCenter"></ag-row-container>
            <ag-row-container ref="stickyTopRightContainer" name="stickyTopRight"></ag-row-container>
            <ag-row-container ref="stickyTopFullWidthContainer" name="stickyTopFullWidth"></ag-row-container>
        </div>
        <div class="ag-sticky-bottom" ref="eStickyBottom" role="presentation">
            <ag-row-container ref="stickyBottomLeftContainer" name="stickyBottomLeft"></ag-row-container>
            <ag-row-container ref="stickyBottomCenterContainer" name="stickyBottomCenter"></ag-row-container>
            <ag-row-container ref="stickyBottomRightContainer" name="stickyBottomRight"></ag-row-container>
            <ag-row-container ref="stickyBottomFullWidthContainer" name="stickyBottomFullWidth"></ag-row-container>
        </div>
        <div class="ag-floating-bottom" ref="eBottom" role="presentation">
            <ag-row-container ref="bottomLeftContainer" name="bottomLeft"></ag-row-container>
            <ag-row-container ref="bottomCenterContainer" name="bottomCenter"></ag-row-container>
            <ag-row-container ref="bottomRightContainer" name="bottomRight"></ag-row-container>
            <ag-row-container ref="bottomFullWidthContainer" name="bottomFullWidth"></ag-row-container>
        </div>
        <ag-fake-horizontal-scroll></ag-fake-horizontal-scroll>
        <ag-overlay-wrapper></ag-overlay-wrapper>
    </div>`,Ko=class extends Te{constructor(){super(EY)}init(){const t=(i,s)=>{const r=`${i}px`;s.style.minHeight=r,s.style.height=r},e={setRowAnimationCssOnBodyViewport:(i,s)=>this.setRowAnimationCssOnBodyViewport(i,s),setColumnCount:i=>oG(this.getGui(),i),setRowCount:i=>nG(this.getGui(),i),setTopHeight:i=>t(i,this.eTop),setBottomHeight:i=>t(i,this.eBottom),setTopDisplay:i=>this.eTop.style.display=i,setBottomDisplay:i=>this.eBottom.style.display=i,setStickyTopHeight:i=>this.eStickyTop.style.height=i,setStickyTopTop:i=>this.eStickyTop.style.top=i,setStickyTopWidth:i=>this.eStickyTop.style.width=i,setStickyBottomHeight:i=>this.eStickyBottom.style.height=i,setStickyBottomBottom:i=>this.eStickyBottom.style.bottom=i,setStickyBottomWidth:i=>this.eStickyBottom.style.width=i,setColumnMovingCss:(i,s)=>this.addOrRemoveCssClass(i,s),updateLayoutClasses:(i,s)=>{[this.eBodyViewport.classList,this.eBody.classList].forEach(n=>{n.toggle("ag-layout-auto-height",s.autoHeight),n.toggle("ag-layout-normal",s.normal),n.toggle("ag-layout-print",s.print)}),this.addOrRemoveCssClass("ag-layout-auto-height",s.autoHeight),this.addOrRemoveCssClass("ag-layout-normal",s.normal),this.addOrRemoveCssClass("ag-layout-print",s.print)},setAlwaysVerticalScrollClass:(i,s)=>this.eBodyViewport.classList.toggle(D4,s),registerBodyViewportResizeListener:i=>{const s=this.resizeObserverService.observeResize(this.eBodyViewport,i);this.addDestroyFunc(()=>s())},setPinnedTopBottomOverflowY:i=>this.eTop.style.overflowY=this.eBottom.style.overflowY=i,setCellSelectableCss:(i,s)=>{[this.eTop,this.eBodyViewport,this.eBottom].forEach(r=>r.classList.toggle(i,s))},setBodyViewportWidth:i=>this.eBodyViewport.style.width=i};this.ctrl=this.createManagedBean(new Hr),this.ctrl.setComp(e,this.getGui(),this.eBodyViewport,this.eTop,this.eBottom,this.eStickyTop,this.eStickyBottom),(this.rangeService&&this.gos.get("enableRangeSelection")||this.gos.get("rowSelection")==="multiple")&&rG(this.getGui(),!0)}setRowAnimationCssOnBodyViewport(t,e){const i=this.eBodyViewport.classList;i.toggle("ag-row-animation",e),i.toggle("ag-row-no-animation",!e)}getFloatingTopBottom(){return[this.eTop,this.eBottom]}};z([W("resizeObserverService")],Ko.prototype,"resizeObserverService",2);z([Vt("rangeService")],Ko.prototype,"rangeService",2);z([pe("eBodyViewport")],Ko.prototype,"eBodyViewport",2);z([pe("eStickyTop")],Ko.prototype,"eStickyTop",2);z([pe("eStickyBottom")],Ko.prototype,"eStickyBottom",2);z([pe("eTop")],Ko.prototype,"eTop",2);z([pe("eBottom")],Ko.prototype,"eBottom",2);z([pe("gridHeader")],Ko.prototype,"headerRootComp",2);z([pe("eBody")],Ko.prototype,"eBody",2);z([de],Ko.prototype,"init",1);var Eh=class extends ye{postConstruct(){this.addManagedListener(this.eventService,K.EVENT_DISPLAYED_COLUMNS_CHANGED,this.onDisplayedColumnsChanged.bind(this)),this.addManagedListener(this.eventService,K.EVENT_DISPLAYED_COLUMNS_WIDTH_CHANGED,this.onDisplayedColumnsWidthChanged.bind(this))}onDisplayedColumnsChanged(){this.update()}onDisplayedColumnsWidthChanged(){this.update()}update(){this.columnAnimationService.isActive()?this.columnAnimationService.executeLaterVMTurn(()=>{this.columnAnimationService.executeLaterVMTurn(()=>this.updateImpl())}):this.updateImpl()}updateImpl(){const t=this.ctrlsService.get("center");if(!t||this.columnAnimationService.isActive())return;const e={horizontalScrollShowing:t.isHorizontalScrollShowing(),verticalScrollShowing:this.isVerticalScrollShowing()};this.setScrollsVisible(e)}setScrollsVisible(t){if(this.horizontalScrollShowing!==t.horizontalScrollShowing||this.verticalScrollShowing!==t.verticalScrollShowing){this.horizontalScrollShowing=t.horizontalScrollShowing,this.verticalScrollShowing=t.verticalScrollShowing;const i={type:K.EVENT_SCROLL_VISIBILITY_CHANGED};this.eventService.dispatchEvent(i)}}isHorizontalScrollShowing(){return this.horizontalScrollShowing}isVerticalScrollShowing(){return this.verticalScrollShowing}};z([W("ctrlsService")],Eh.prototype,"ctrlsService",2);z([W("columnAnimationService")],Eh.prototype,"columnAnimationService",2);z([de],Eh.prototype,"postConstruct",1);Eh=z([Me("scrollVisibleService")],Eh);var sl=class extends ye{constructor(){super(...arguments),this.gridInstanceId=sl.gridInstanceSequence.next()}stampTopLevelGridCompWithGridInstance(t){t[sl.GRID_DOM_KEY]=this.gridInstanceId}getRenderedCellForEvent(t){return Vw(this.gos,t.target,Jl.DOM_DATA_KEY_CELL_CTRL)}isEventFromThisGrid(t){return this.isElementInThisGrid(t.target)}isElementInThisGrid(t){let e=t;for(;e;){const i=e[sl.GRID_DOM_KEY];if(Pe(i))return i===this.gridInstanceId;e=e.parentElement}return!1}getCellPositionForEvent(t){const e=this.getRenderedCellForEvent(t);return e?e.getCellPosition():null}getNormalisedPosition(t){const e=this.gos.isDomLayout("normal"),i=t;let s,r;if(i.clientX!=null||i.clientY!=null?(s=i.clientX,r=i.clientY):(s=i.x,r=i.y),e){const n=this.ctrlsService.getGridBodyCtrl(),o=n.getScrollFeature().getVScrollPosition(),a=n.getScrollFeature().getHScrollPosition();s+=a.left,r+=o.top}return{x:s,y:r}}};sl.gridInstanceSequence=new pr;sl.GRID_DOM_KEY="__ag_grid_instance";z([W("ctrlsService")],sl.prototype,"ctrlsService",2);sl=z([Me("mouseEventService")],sl);var Cr=class extends ye{constructor(){super(),this.onPageDown=x_(this.onPageDown,100),this.onPageUp=x_(this.onPageUp,100)}postConstruct(){this.ctrlsService.whenReady(t=>{this.gridBodyCon=t.gridBodyCtrl})}handlePageScrollingKey(t,e=!1){const i=t.key,s=t.altKey,r=t.ctrlKey||t.metaKey,n=!!this.rangeService&&t.shiftKey,o=this.mouseEventService.getCellPositionForEvent(t);let a=!1;switch(i){case ce.PAGE_HOME:case ce.PAGE_END:!r&&!s&&(this.onHomeOrEndKey(i),a=!0);break;case ce.LEFT:case ce.RIGHT:case ce.UP:case ce.DOWN:if(!o)return!1;r&&!s&&!n&&(this.onCtrlUpDownLeftRight(i,o),a=!0);break;case ce.PAGE_DOWN:case ce.PAGE_UP:!r&&!s&&(a=this.handlePageUpDown(i,o,e));break}return a&&t.preventDefault(),a}handlePageUpDown(t,e,i){return i&&(e=this.focusService.getFocusedCell()),e?(t===ce.PAGE_UP?this.onPageUp(e):this.onPageDown(e),!0):!1}navigateTo(t){var e;const{scrollIndex:i,scrollType:s,scrollColumn:r,focusIndex:n,focusColumn:o}=t;Pe(r)&&!r.isPinned()&&this.gridBodyCon.getScrollFeature().ensureColumnVisible(r),Pe(i)&&this.gridBodyCon.getScrollFeature().ensureIndexVisible(i,s),t.isAsync||this.gridBodyCon.getScrollFeature().ensureIndexVisible(n),this.focusService.setFocusedCell({rowIndex:n,column:o,rowPinned:null,forceBrowserFocus:!0}),(e=this.rangeService)==null||e.setRangeToCell({rowIndex:n,rowPinned:null,column:o})}onPageDown(t){const i=this.ctrlsService.getGridBodyCtrl().getScrollFeature().getVScrollPosition(),s=this.getViewportHeight(),r=this.paginationProxy.getPixelOffset(),n=i.top+s,o=this.paginationProxy.getRowIndexAtPixel(n+r);this.columnModel.isAutoRowHeightActive()?this.navigateToNextPageWithAutoHeight(t,o):this.navigateToNextPage(t,o)}onPageUp(t){const i=this.ctrlsService.getGridBodyCtrl().getScrollFeature().getVScrollPosition(),s=this.paginationProxy.getPixelOffset(),r=i.top,n=this.paginationProxy.getRowIndexAtPixel(r+s);this.columnModel.isAutoRowHeightActive()?this.navigateToNextPageWithAutoHeight(t,n,!0):this.navigateToNextPage(t,n,!0)}navigateToNextPage(t,e,i=!1){const s=this.getViewportHeight(),r=this.paginationProxy.getPageFirstRow(),n=this.paginationProxy.getPageLastRow(),o=this.paginationProxy.getPixelOffset(),a=this.paginationProxy.getRow(t.rowIndex),l=i?(a==null?void 0:a.rowHeight)-s-o:s-o,c=(a==null?void 0:a.rowTop)+l;let u=this.paginationProxy.getRowIndexAtPixel(c+o);if(u===t.rowIndex){const h=i?-1:1;e=u=t.rowIndex+h}let d;i?(d="bottom",u<r&&(u=r),e<r&&(e=r)):(d="top",u>n&&(u=n),e>n&&(e=n)),this.isRowTallerThanView(u)&&(e=u,d="top"),this.navigateTo({scrollIndex:e,scrollType:d,scrollColumn:null,focusIndex:u,focusColumn:t.column})}navigateToNextPageWithAutoHeight(t,e,i=!1){this.navigateTo({scrollIndex:e,scrollType:i?"bottom":"top",scrollColumn:null,focusIndex:e,focusColumn:t.column}),setTimeout(()=>{const s=this.getNextFocusIndexForAutoHeight(t,i);this.navigateTo({scrollIndex:e,scrollType:i?"bottom":"top",scrollColumn:null,focusIndex:s,focusColumn:t.column,isAsync:!0})},50)}getNextFocusIndexForAutoHeight(t,e=!1){var i;const s=e?-1:1,r=this.getViewportHeight(),n=this.paginationProxy.getPageLastRow();let o=0,a=t.rowIndex;for(;a>=0&&a<=n;){const l=this.paginationProxy.getRow(a);if(l){const c=(i=l.rowHeight)!=null?i:0;if(o+c>r)break;o+=c}a+=s}return Math.max(0,Math.min(a,n))}getViewportHeight(){const{gridBodyCtrl:t,center:e}=this.ctrlsService.getParams(),i=t.getScrollFeature().getVScrollPosition(),s=this.gos.getScrollbarWidth();let r=i.bottom-i.top;return e.isHorizontalScrollShowing()&&(r-=s),r}isRowTallerThanView(t){const e=this.paginationProxy.getRow(t);if(!e)return!1;const i=e.rowHeight;return typeof i!="number"?!1:i>this.getViewportHeight()}onCtrlUpDownLeftRight(t,e){const i=this.cellNavigationService.getNextCellToFocus(t,e,!0),{rowIndex:s,column:r}=i;this.navigateTo({scrollIndex:s,scrollType:null,scrollColumn:r,focusIndex:s,focusColumn:r})}onHomeOrEndKey(t){const e=t===ce.PAGE_HOME,i=this.columnModel.getAllDisplayedColumns(),s=e?i[0]:di(i),r=e?this.paginationProxy.getPageFirstRow():this.paginationProxy.getPageLastRow();this.navigateTo({scrollIndex:r,scrollType:null,scrollColumn:s,focusIndex:r,focusColumn:s})}onTabKeyDown(t,e){const i=e.shiftKey,s=this.tabToNextCellCommon(t,i,e);if(s!==!1){s&&e.preventDefault();return}if(i){const{rowIndex:r,rowPinned:n}=t.getRowPosition();(n?r===0:r===this.paginationProxy.getPageFirstRow())&&(this.gos.get("headerHeight")===0||this.gos.get("suppressHeaderFocus")?this.focusService.focusNextGridCoreContainer(!0,!0):(e.preventDefault(),this.focusService.focusPreviousFromFirstCell(e)))}else t instanceof Jl&&t.focusCell(!0),this.focusService.focusNextGridCoreContainer(i)&&e.preventDefault()}tabToNextCell(t,e){const i=this.focusService.getFocusedCell();if(!i)return!1;let s=this.getCellByPosition(i);return!s&&(s=this.rowRenderer.getRowByPosition(i),!s||!s.isFullWidth())?!1:!!this.tabToNextCellCommon(s,t,e)}tabToNextCellCommon(t,e,i){let s=t.isEditing();if(!s&&t instanceof Jl){const o=t.getRowCtrl();o&&(s=o.isEditing())}let r;return s?this.gos.get("editType")==="fullRow"?r=this.moveToNextEditingRow(t,e,i):r=this.moveToNextEditingCell(t,e,i):r=this.moveToNextCellNotEditing(t,e),r===null?r:r||!!this.focusService.getFocusedHeader()}moveToNextEditingCell(t,e,i=null){const s=t.getCellPosition();t.getGui().focus(),t.stopEditing();const r=this.findNextCellToFocusOn(s,e,!0);return r===!1?null:r==null?!1:(r.startEditing(null,!0,i),r.focusCell(!1),!0)}moveToNextEditingRow(t,e,i=null){const s=t.getCellPosition(),r=this.findNextCellToFocusOn(s,e,!0);if(r===!1)return null;if(r==null)return!1;const n=r.getCellPosition(),o=this.isCellEditable(s),a=this.isCellEditable(n),l=n&&s.rowIndex===n.rowIndex&&s.rowPinned===n.rowPinned;return o&&t.setFocusOutOnEditor(),l||(t.getRowCtrl().stopEditing(),r.getRowCtrl().startRowEditing(void 0,void 0,i)),a?(r.setFocusInOnEditor(),r.focusCell()):r.focusCell(!0),!0}moveToNextCellNotEditing(t,e){const i=this.columnModel.getAllDisplayedColumns();let s;t instanceof yu?s=$i(it({},t.getRowPosition()),{column:e?i[0]:di(i)}):s=t.getCellPosition();const r=this.findNextCellToFocusOn(s,e,!1);if(r===!1)return null;if(r instanceof Jl)r.focusCell(!0);else if(r)return this.tryToFocusFullWidthRow(r.getRowPosition(),e);return Pe(r)}findNextCellToFocusOn(t,e,i){var s;let r=t;for(;;){t!==r&&(t=r),e||(r=this.getLastCellOfColSpan(r)),r=this.cellNavigationService.getNextTabbedCell(r,e);const n=this.gos.getCallback("tabToNextCell");if(Pe(n)){const c=n({backwards:e,editing:i,previousCellPosition:t,nextCellPosition:r||null});if(c===!0||c===null)c===null&&ot("Returning `null` from tabToNextCell is deprecated. Return `true` to stay on the current cell, or `false` to let the browser handle the tab behaviour."),r=t;else{if(c===!1)return!1;c.floating&&(ot("tabToNextCellFunc return type should have attributes: rowIndex, rowPinned, column. However you had 'floating', maybe you meant 'rowPinned'?"),c.rowPinned=c.floating),r={rowIndex:c.rowIndex,column:c.column,rowPinned:c.rowPinned}}}if(!r)return null;if(r.rowIndex<0){const l=this.headerNavigationService.getHeaderRowCount();return this.focusService.focusHeaderPosition({headerPosition:{headerRowIndex:l+r.rowIndex,column:r.column},fromCell:!0}),null}const o=this.gos.get("editType")==="fullRow";if(i&&!o&&!this.isCellEditable(r))continue;this.ensureCellVisible(r);const a=this.getCellByPosition(r);if(!a){const l=this.rowRenderer.getRowByPosition(r);if(!l||!l.isFullWidth()||i)continue;return l}if(!a.isSuppressNavigable())return(s=this.rangeService)==null||s.setRangeToCell(r),a}}isCellEditable(t){const e=this.lookupRowNodeForCell(t);return e?t.column.isCellEditable(e):!1}getCellByPosition(t){const e=this.rowRenderer.getRowByPosition(t);return e?e.getCellCtrl(t.column):null}lookupRowNodeForCell(t){return t.rowPinned==="top"?this.pinnedRowModel.getPinnedTopRow(t.rowIndex):t.rowPinned==="bottom"?this.pinnedRowModel.getPinnedBottomRow(t.rowIndex):this.paginationProxy.getRow(t.rowIndex)}navigateToNextCell(t,e,i,s){let r=i,n=!1;for(;r&&(r===i||!this.isValidNavigateCell(r));)this.gos.get("enableRtl")?e===ce.LEFT&&(r=this.getLastCellOfColSpan(r)):e===ce.RIGHT&&(r=this.getLastCellOfColSpan(r)),r=this.cellNavigationService.getNextCellToFocus(e,r),n=St(r);if(n&&t&&t.key===ce.UP&&(r={rowIndex:-1,rowPinned:null,column:i.column}),s){const a=this.gos.getCallback("navigateToNextCell");if(Pe(a)){const c=a({key:e,previousCellPosition:i,nextCellPosition:r||null,event:t});Pe(c)?(c.floating&&(ot("tabToNextCellFunc return type should have attributes: rowIndex, rowPinned, column. However you had 'floating', maybe you meant 'rowPinned'?"),c.rowPinned=c.floating),r={rowPinned:c.rowPinned,rowIndex:c.rowIndex,column:c.column}):r=null}}if(!r)return;if(r.rowIndex<0){const a=this.headerNavigationService.getHeaderRowCount();this.focusService.focusHeaderPosition({headerPosition:{headerRowIndex:a+r.rowIndex,column:i.column},event:t||void 0,fromCell:!0});return}const o=this.getNormalisedPosition(r);o?this.focusPosition(o):this.tryToFocusFullWidthRow(r)}getNormalisedPosition(t){this.ensureCellVisible(t);const e=this.getCellByPosition(t);return e?(t=e.getCellPosition(),this.ensureCellVisible(t),t):null}tryToFocusFullWidthRow(t,e=!1){const i=this.columnModel.getAllDisplayedColumns(),s=this.rowRenderer.getRowByPosition(t);if(!s||!s.isFullWidth())return!1;const r=this.focusService.getFocusedCell(),n={rowIndex:t.rowIndex,rowPinned:t.rowPinned,column:t.column||(e?di(i):i[0])};this.focusPosition(n);const o=r!=null?this.rowPositionUtils.before(n,r):!1,a={type:K.EVENT_FULL_WIDTH_ROW_FOCUSED,rowIndex:n.rowIndex,rowPinned:n.rowPinned,column:n.column,isFullWidthCell:!0,floating:n.rowPinned,fromBelow:o};return this.eventService.dispatchEvent(a),!0}focusPosition(t){var e;this.focusService.setFocusedCell({rowIndex:t.rowIndex,column:t.column,rowPinned:t.rowPinned,forceBrowserFocus:!0}),(e=this.rangeService)==null||e.setRangeToCell(t)}isValidNavigateCell(t){return!!this.rowPositionUtils.getRowNode(t)}getLastCellOfColSpan(t){const e=this.getCellByPosition(t);if(!e)return t;const i=e.getColSpanningList();return i.length===1?t:{rowIndex:t.rowIndex,column:di(i),rowPinned:t.rowPinned}}ensureCellVisible(t){const e=this.gos.isGroupRowsSticky(),i=this.rowModel.getRow(t.rowIndex);!(e&&(i==null?void 0:i.sticky))&&St(t.rowPinned)&&this.gridBodyCon.getScrollFeature().ensureIndexVisible(t.rowIndex),t.column.isPinned()||this.gridBodyCon.getScrollFeature().ensureColumnVisible(t.column)}};z([W("mouseEventService")],Cr.prototype,"mouseEventService",2);z([W("paginationProxy")],Cr.prototype,"paginationProxy",2);z([W("focusService")],Cr.prototype,"focusService",2);z([W("columnModel")],Cr.prototype,"columnModel",2);z([W("rowModel")],Cr.prototype,"rowModel",2);z([W("ctrlsService")],Cr.prototype,"ctrlsService",2);z([W("rowRenderer")],Cr.prototype,"rowRenderer",2);z([W("headerNavigationService")],Cr.prototype,"headerNavigationService",2);z([W("rowPositionUtils")],Cr.prototype,"rowPositionUtils",2);z([W("cellNavigationService")],Cr.prototype,"cellNavigationService",2);z([W("pinnedRowModel")],Cr.prototype,"pinnedRowModel",2);z([Vt("rangeService")],Cr.prototype,"rangeService",2);z([de],Cr.prototype,"postConstruct",1);Cr=z([Me("navigationService")],Cr);var WM=class G4 extends Ac{constructor(e){super('<div class="ag-popup-editor" tabindex="-1"/>'),this.params=e}postConstruct(){this.gos.setDomData(this.getGui(),G4.DOM_KEY_POPUP_EDITOR_WRAPPER,!0),this.addKeyDownListener()}addKeyDownListener(){const e=this.getGui(),i=this.params,s=r=>{zw(this.gos,r,i.node,i.column,!0)||i.onKeyDown(r)};this.addManagedListener(e,"keydown",s)}};WM.DOM_KEY_POPUP_EDITOR_WRAPPER="popupEditorWrapper";z([de],WM.prototype,"postConstruct",1);var B4=WM,V4=class extends Te{constructor(t,e,i,s,r){super(),this.rendererVersion=0,this.editorVersion=0,this.beans=t,this.column=e.getColumn(),this.rowNode=e.getRowNode(),this.rowCtrl=e.getRowCtrl(),this.eRow=s,this.cellCtrl=e;const n=document.createElement("div");n.setAttribute("comp-id",`${this.getCompId()}`),this.setTemplateFromElement(n);const o=this.getGui();this.forceWrapper=e.isForceWrapper(),this.refreshWrapper(!1);const a=(u,d)=>{d!=null&&d!=""?o.setAttribute(u,d):o.removeAttribute(u)};as(o,e.getCellAriaRole()),a("col-id",e.getColumnIdSanitised());const l=e.getTabIndex();l!==void 0&&a("tabindex",l.toString());const c={addOrRemoveCssClass:(u,d)=>this.addOrRemoveCssClass(u,d),setUserStyles:u=>CM(o,u),getFocusableElement:()=>this.getFocusableElement(),setIncludeSelection:u=>this.includeSelection=u,setIncludeRowDrag:u=>this.includeRowDrag=u,setIncludeDndSource:u=>this.includeDndSource=u,setRenderDetails:(u,d,h)=>this.setRenderDetails(u,d,h),setEditDetails:(u,d,h)=>this.setEditDetails(u,d,h),getCellEditor:()=>this.cellEditor||null,getCellRenderer:()=>this.cellRenderer||null,getParentOfValue:()=>this.getParentOfValue()};e.setComp(c,this.getGui(),this.eCellWrapper,i,r)}getParentOfValue(){return this.eCellValue?this.eCellValue:this.eCellWrapper?this.eCellWrapper:this.getGui()}setRenderDetails(t,e,i){if(this.cellEditor&&!this.cellEditorPopupWrapper)return;this.firstRender=this.firstRender==null;const r=this.refreshWrapper(!1);this.refreshEditStyles(!1),t?!(i||r)&&this.refreshCellRenderer(t)||(this.destroyRenderer(),this.createCellRendererInstance(t)):(this.destroyRenderer(),this.insertValueWithoutCellRenderer(e))}setEditDetails(t,e,i){t?this.createCellEditorInstance(t,e,i):this.destroyEditor()}removeControls(){this.checkboxSelectionComp=this.beans.context.destroyBean(this.checkboxSelectionComp),this.dndSourceComp=this.beans.context.destroyBean(this.dndSourceComp),this.rowDraggingComp=this.beans.context.destroyBean(this.rowDraggingComp)}refreshWrapper(t){const e=this.includeRowDrag||this.includeDndSource||this.includeSelection,i=e||this.forceWrapper,s=i&&this.eCellWrapper==null;if(s){const c=document.createElement("div");c.setAttribute("role","presentation"),c.setAttribute("class","ag-cell-wrapper"),this.eCellWrapper=c,this.getGui().appendChild(this.eCellWrapper)}const r=!i&&this.eCellWrapper!=null;r&&(la(this.eCellWrapper),this.eCellWrapper=void 0),this.addOrRemoveCssClass("ag-cell-value",!i);const n=!t&&i,o=n&&this.eCellValue==null;if(o){const c=document.createElement("span");c.setAttribute("role","presentation"),c.setAttribute("class","ag-cell-value"),this.eCellValue=c,this.eCellWrapper.appendChild(this.eCellValue)}const a=!n&&this.eCellValue!=null;a&&(la(this.eCellValue),this.eCellValue=void 0);const l=s||r||o||a;return l&&this.removeControls(),t||e&&this.addControls(),l}addControls(){this.includeRowDrag&&this.rowDraggingComp==null&&(this.rowDraggingComp=this.cellCtrl.createRowDragComp(),this.rowDraggingComp&&this.eCellWrapper.insertBefore(this.rowDraggingComp.getGui(),this.eCellValue)),this.includeDndSource&&this.dndSourceComp==null&&(this.dndSourceComp=this.cellCtrl.createDndSource(),this.eCellWrapper.insertBefore(this.dndSourceComp.getGui(),this.eCellValue)),this.includeSelection&&this.checkboxSelectionComp==null&&(this.checkboxSelectionComp=this.cellCtrl.createSelectionCheckbox(),this.eCellWrapper.insertBefore(this.checkboxSelectionComp.getGui(),this.eCellValue))}createCellEditorInstance(t,e,i){const s=this.editorVersion,r=t.newAgStackInstance();if(!r)return;const{params:n}=t;r.then(a=>this.afterCellEditorCreated(s,a,n,e,i)),St(this.cellEditor)&&n.cellStartedEdit&&this.cellCtrl.focusCell(!0)}insertValueWithoutCellRenderer(t){const e=this.getParentOfValue();Cs(e);const i=t!=null?Ts(t,!0):null;i!=null&&(e.textContent=i)}destroyEditorAndRenderer(){this.destroyRenderer(),this.destroyEditor()}destroyRenderer(){const{context:t}=this.beans;this.cellRenderer=t.destroyBean(this.cellRenderer),la(this.cellRendererGui),this.cellRendererGui=null,this.rendererVersion++}destroyEditor(){const{context:t}=this.beans;this.hideEditorPopup&&this.hideEditorPopup(),this.hideEditorPopup=void 0,this.cellEditor=t.destroyBean(this.cellEditor),this.cellEditorPopupWrapper=t.destroyBean(this.cellEditorPopupWrapper),la(this.cellEditorGui),this.cellEditorGui=null,this.editorVersion++}refreshCellRenderer(t){if(this.cellRenderer==null||this.cellRenderer.refresh==null||this.cellRendererClass!==t.componentClass)return!1;const e=this.cellRenderer.refresh(t.params);return e===!0||e===void 0}createCellRendererInstance(t){const i=!this.beans.gos.get("suppressAnimationFrame"),s=this.rendererVersion,{componentClass:r}=t,n=()=>{if(this.rendererVersion!==s||!this.isAlive())return;const a=t.newAgStackInstance(),l=this.afterCellRendererCreated.bind(this,s,r);a&&a.then(l)};i&&this.firstRender?this.beans.animationFrameService.createTask(n,this.rowNode.rowIndex,"createTasksP2"):n()}getCtrl(){return this.cellCtrl}getRowCtrl(){return this.rowCtrl}getCellRenderer(){return this.cellRenderer}getCellEditor(){return this.cellEditor}afterCellRendererCreated(t,e,i){if(!this.isAlive()||t!==this.rendererVersion){this.beans.context.destroyBean(i);return}if(this.cellRenderer=i,this.cellRendererClass=e,this.cellRendererGui=this.cellRenderer.getGui(),this.cellRendererGui!=null){const r=this.getParentOfValue();Cs(r),r.appendChild(this.cellRendererGui)}}afterCellEditorCreated(t,e,i,s,r){if(t!==this.editorVersion){this.beans.context.destroyBean(e);return}if(e.isCancelBeforeStart&&e.isCancelBeforeStart()){this.beans.context.destroyBean(e),this.cellCtrl.stopEditing(!0);return}if(!e.getGui){console.warn(`AG Grid: cellEditor for column ${this.column.getId()} is missing getGui() method`),this.beans.context.destroyBean(e);return}this.cellEditor=e,this.cellEditorGui=e.getGui();const a=s||e.isPopup!==void 0&&e.isPopup();a?this.addPopupCellEditor(i,r):this.addInCellEditor(),this.refreshEditStyles(!0,a),e.afterGuiAttached&&e.afterGuiAttached()}refreshEditStyles(t,e){var i;this.addOrRemoveCssClass("ag-cell-inline-editing",t&&!e),this.addOrRemoveCssClass("ag-cell-popup-editing",t&&!!e),this.addOrRemoveCssClass("ag-cell-not-inline-editing",!t||!!e),(i=this.rowCtrl)==null||i.setInlineEditingCss(t)}addInCellEditor(){const t=this.getGui();t.contains(this.beans.gos.getActiveDomElement())&&t.focus(),this.destroyRenderer(),this.refreshWrapper(!0),this.clearParentOfValue(),this.cellEditorGui&&this.getParentOfValue().appendChild(this.cellEditorGui)}addPopupCellEditor(t,e){this.beans.gos.get("editType")==="fullRow"&&console.warn("AG Grid: popup cellEditor does not work with fullRowEdit - you cannot use them both - either turn off fullRowEdit, or stop using popup editors.");const i=this.cellEditor;this.cellEditorPopupWrapper=this.beans.context.createBean(new B4(t));const s=this.cellEditorPopupWrapper.getGui();this.cellEditorGui&&s.appendChild(this.cellEditorGui);const r=this.beans.popupService,n=this.beans.gos.get("stopEditingWhenCellsLoseFocus"),o=e??(i.getPopupPosition?i.getPopupPosition():"over"),a=this.beans.gos.get("enableRtl"),l={ePopup:s,column:this.column,rowNode:this.rowNode,type:"popupCellEditor",eventSource:this.getGui(),position:o,alignSide:a?"right":"left",keepWithinBounds:!0},c=r.positionPopupByComponent.bind(r,l),u=this.beans.localeService.getLocaleTextFunc(),d=r.addPopup({modal:n,eChild:s,closeOnEsc:!0,closedCallback:()=>{this.cellCtrl.onPopupEditorClosed()},anchorToElement:this.getGui(),positionCallback:c,ariaLabel:u("ariaLabelCellEditor","Cell Editor")});d&&(this.hideEditorPopup=d.hideFunc)}detach(){this.eRow.removeChild(this.getGui())}destroy(){this.cellCtrl.stopEditing(),this.destroyEditorAndRenderer(),this.removeControls(),super.destroy()}clearParentOfValue(){const t=this.getGui();t.contains(this.beans.gos.getActiveDomElement())&&cM()&&t.focus({preventScroll:!0}),Cs(this.getParentOfValue())}},TY=class extends Te{constructor(t,e,i){super(),this.cellComps={},this.beans=e,this.rowCtrl=t;const s=document.createElement("div");s.setAttribute("comp-id",`${this.getCompId()}`),s.setAttribute("style",this.getInitialStyle(i)),this.setTemplateFromElement(s);const r=this.getGui(),n=r.style;this.domOrder=this.rowCtrl.getDomOrder(),as(r,"row");const o=this.rowCtrl.getTabIndex();o!=null&&r.setAttribute("tabindex",o.toString());const a={setDomOrder:l=>this.domOrder=l,setCellCtrls:l=>this.setCellCtrls(l),showFullWidth:l=>this.showFullWidth(l),getFullWidthCellRenderer:()=>this.getFullWidthCellRenderer(),addOrRemoveCssClass:(l,c)=>this.addOrRemoveCssClass(l,c),setUserStyles:l=>CM(r,l),setTop:l=>n.top=l,setTransform:l=>n.transform=l,setRowIndex:l=>r.setAttribute("row-index",l),setRowId:l=>r.setAttribute("row-id",l),setRowBusinessKey:l=>r.setAttribute("row-business-key",l),refreshFullWidth:l=>this.refreshFullWidth(l)};t.setComp(a,this.getGui(),i),this.addDestroyFunc(()=>{t.unsetComp(i)})}getInitialStyle(t){const e=this.rowCtrl.getInitialTransform(t);return e?`transform: ${e}`:`top: ${this.rowCtrl.getInitialRowTop(t)}`}showFullWidth(t){const e=s=>{if(this.isAlive()){const r=s.getGui();this.getGui().appendChild(r),this.rowCtrl.setupDetailRowAutoHeight(r),this.setFullWidthRowComp(s)}else this.beans.context.destroyBean(s)},i=t.newAgStackInstance();i&&i.then(e)}setCellCtrls(t){const e=Object.assign({},this.cellComps);t.forEach(s=>{const r=s.getInstanceId();this.cellComps[r]==null?this.newCellComp(s):e[r]=null});const i=_u(e).filter(s=>s!=null);this.destroyCells(i),this.ensureDomOrder(t)}ensureDomOrder(t){if(!this.domOrder)return;const e=[];t.forEach(i=>{const s=this.cellComps[i.getInstanceId()];s&&e.push(s.getGui())}),yM(this.getGui(),e)}newCellComp(t){const e=new V4(this.beans,t,this.rowCtrl.isPrintLayout(),this.getGui(),this.rowCtrl.isEditing());this.cellComps[t.getInstanceId()]=e,this.getGui().appendChild(e.getGui())}destroy(){super.destroy(),this.destroyAllCells()}destroyAllCells(){const t=_u(this.cellComps).filter(e=>e!=null);this.destroyCells(t)}setFullWidthRowComp(t){this.fullWidthCellRenderer&&console.error("AG Grid - should not be setting fullWidthRowComponent twice"),this.fullWidthCellRenderer=t,this.addDestroyFunc(()=>{this.fullWidthCellRenderer=this.beans.context.destroyBean(this.fullWidthCellRenderer)})}getFullWidthCellRenderer(){return this.fullWidthCellRenderer}destroyCells(t){t.forEach(e=>{if(!e)return;const i=e.getCtrl().getInstanceId();this.cellComps[i]===e&&(e.detach(),e.destroy(),this.cellComps[i]=null)})}refreshFullWidth(t){const{fullWidthCellRenderer:e}=this;if(!e||!e.refresh)return!1;const i=t();return e.refresh(i)}};function _Y(){const t=Te.elementGettingCreated.getAttribute("name"),e=UM.getRowContainerCssClasses(t);let i;return t==="center"||t==="topCenter"||t==="stickyTopCenter"||t==="bottomCenter"||t==="stickyBottomCenter"?i=`<div class="${e.viewport}" ref="eViewport" role="presentation">
                <div class="${e.container}" ref="eContainer"></div>
            </div>`:i=`<div class="${e.container}" ref="eContainer"></div>`,i}var Xh=class extends Te{constructor(){super(_Y()),this.rowComps={},this.name=Te.elementGettingCreated.getAttribute("name"),this.type=N4(this.name)}postConstruct(){const t={setViewportHeight:i=>this.eViewport.style.height=i,setRowCtrls:({rowCtrls:i})=>this.setRowCtrls(i),setDomOrder:i=>{this.domOrder=i},setContainerWidth:i=>this.eContainer.style.width=i};this.createManagedBean(new UM(this.name)).setComp(t,this.eContainer,this.eViewport)}preDestroy(){this.setRowCtrls([])}setRowCtrls(t){const e=it({},this.rowComps);this.rowComps={},this.lastPlacedElement=null;const i=s=>{const r=s.getInstanceId(),n=e[r];if(n)this.rowComps[r]=n,delete e[r],this.ensureDomOrder(n.getGui());else{if(!s.getRowNode().displayed)return;const o=new TY(s,this.beans,this.type);this.rowComps[r]=o,this.appendRow(o.getGui())}};t.forEach(i),_u(e).forEach(s=>{this.eContainer.removeChild(s.getGui()),s.destroy()}),as(this.eContainer,"rowgroup")}appendRow(t){this.domOrder?SG(this.eContainer,t,this.lastPlacedElement):this.eContainer.appendChild(t),this.lastPlacedElement=t}ensureDomOrder(t){this.domOrder&&(vM(this.eContainer,t,this.lastPlacedElement),this.lastPlacedElement=t)}};z([W("beans")],Xh.prototype,"beans",2);z([pe("eViewport")],Xh.prototype,"eViewport",2);z([pe("eContainer")],Xh.prototype,"eContainer",2);z([de],Xh.prototype,"postConstruct",1);z([Hi],Xh.prototype,"preDestroy",1);var _x=class{constructor(t){this.columnsToAggregate=[],this.columnsToGroup=[],this.columnsToPivot=[],this.pinned=t}onDragEnter(t){if(this.clearColumnsList(),this.gos.get("functionsReadOnly"))return;const e=t.dragItem.columns;e&&e.forEach(i=>{i.isPrimary()&&(i.isAnyFunctionActive()||(i.isAllowValue()?this.columnsToAggregate.push(i):i.isAllowRowGroup()?this.columnsToGroup.push(i):i.isAllowPivot()&&this.columnsToPivot.push(i)))})}getIconName(){return this.columnsToAggregate.length+this.columnsToGroup.length+this.columnsToPivot.length>0?this.pinned?st.ICON_PINNED:st.ICON_MOVE:null}onDragLeave(t){this.clearColumnsList()}clearColumnsList(){this.columnsToAggregate.length=0,this.columnsToGroup.length=0,this.columnsToPivot.length=0}onDragging(t){}onDragStop(t){this.columnsToAggregate.length>0&&this.columnModel.addValueColumns(this.columnsToAggregate,"toolPanelDragAndDrop"),this.columnsToGroup.length>0&&this.columnModel.addRowGroupColumns(this.columnsToGroup,"toolPanelDragAndDrop"),this.columnsToPivot.length>0&&this.columnModel.addPivotColumns(this.columnsToPivot,"toolPanelDragAndDrop")}};z([W("columnModel")],_x.prototype,"columnModel",2);z([W("gridOptionsService")],_x.prototype,"gos",2);var uh=class{static attemptMoveColumns(t){const{isFromHeader:e,hDirection:i,xPosition:s,fromEnter:r,fakeEvent:n,pinned:o,gos:a,columnModel:l}=t,c=i===0,u=i===1;let{allMovingColumns:d}=t;if(e){let b=[];d.forEach(T=>{var A;let I=null,D=T.getParent();for(;D!=null&&D.getDisplayedLeafColumns().length===1;)I=D,D=D.getParent();I!=null?(!!((A=I.getColGroupDef())!=null&&A.marryChildren)?I.getProvidedColumnGroup().getLeafColumns():I.getLeafColumns()).forEach(U=>{b.includes(U)||b.push(U)}):b.includes(T)||b.push(T)}),d=b}const h=d.slice();l.sortColumnsLikeGridColumns(h);const p=this.calculateValidMoves({movingCols:h,draggingRight:u,xPosition:s,pinned:o,gos:a,columnModel:l}),f=this.calculateOldIndex(h,l);if(p.length===0)return;const m=p[0];let g=f!==null&&!r;if(e&&(g=f!==null),g&&!n&&(c&&m>=f||u&&m<=f))return;const y=l.getAllDisplayedColumns();let v=[],C=null;for(let b=0;b<p.length;b++){const T=p[b],A=l.getProposedColumnOrder(h,T);if(!l.doesOrderPassRules(A))continue;const I=A.filter(F=>y.includes(F));if(C===null)C=I;else if(!Ya(I,C))break;const D=this.groupFragCount(A);v.push({move:T,fragCount:D})}if(v.length!==0)return v.sort((b,T)=>b.fragCount-T.fragCount),this.moveColumns(d,v[0].move,"uiColumnMoved",!1,l)}static moveColumns(t,e,i,s,r){return r.moveColumns(t,e,i,s),s?null:{columns:t,toIndex:e}}static calculateOldIndex(t,e){const i=e.getAllGridColumns(),s=N3(t.map(l=>i.indexOf(l))),r=s[0];return di(s)-r!==s.length-1?null:r}static groupFragCount(t){function e(s){let r=[],n=s.getOriginalParent();for(;n!=null;)r.push(n),n=n.getOriginalParent();return r}let i=0;for(let s=0;s<t.length-1;s++){let r=e(t[s]),n=e(t[s+1]);[r,n]=r.length>n.length?[r,n]:[n,r],r.forEach(o=>{n.indexOf(o)===-1&&i++})}return i}static getDisplayedColumns(t,e){switch(e){case"left":return t.getDisplayedLeftColumns();case"right":return t.getDisplayedRightColumns();default:return t.getDisplayedCenterColumns()}}static calculateValidMoves(t){const{movingCols:e,draggingRight:i,xPosition:s,pinned:r,gos:n,columnModel:o}=t;if(n.get("suppressMovableColumns")||e.some(v=>v.getColDef().suppressMovable))return[];const l=this.getDisplayedColumns(o,r),c=o.getAllGridColumns(),u=l.filter(v=>to(e,v)),d=l.filter(v=>!to(e,v)),h=c.filter(v=>!to(e,v));let p=0,f=s;if(i){let v=0;u.forEach(C=>v+=C.getActualWidth()),f-=v}if(f>0){for(let v=0;v<d.length;v++){const C=d[v];if(f-=C.getActualWidth(),f<0)break;p++}i&&p++}let m;if(p>0){const v=d[p-1];m=h.indexOf(v)+1}else m=h.indexOf(d[0]),m===-1&&(m=0);const g=[m],y=(v,C)=>v-C;if(i){let v=m+1;const C=c.length-1;for(;v<=C;)g.push(v),v++;g.sort(y)}else{let v=m;const C=c.length-1;let b=c[v];for(;v<=C&&l.indexOf(b)<0;)v++,g.push(v),b=c[v];v=m-1;const T=0;for(;v>=T;)g.push(v),v--;g.sort(y).reverse()}return g}static normaliseX(t,e,i,s,r){const n=r.getHeaderRowContainerCtrl(e).getViewport();return i&&(t-=n.getBoundingClientRect().left),s.get("enableRtl")&&(t=n.clientWidth-t),e==null&&(t+=r.get("center").getCenterViewportScrollLeft()),t}},Zh=class{constructor(t){this.needToMoveLeft=!1,this.needToMoveRight=!1,this.lastMovedInfo=null,this.pinned=t,this.isCenterContainer=!Pe(t)}init(){this.ctrlsService.whenReady(t=>{this.gridBodyCon=t.gridBodyCtrl})}getIconName(){return this.pinned?st.ICON_PINNED:st.ICON_MOVE}onDragEnter(t){const e=t.dragItem.columns;if(t.dragSource.type===0)this.setColumnsVisible(e,!0,"uiColumnDragged");else{const s=t.dragItem.visibleState,r=(e||[]).filter(n=>s[n.getId()]);this.setColumnsVisible(r,!0,"uiColumnDragged")}this.setColumnsPinned(e,this.pinned,"uiColumnDragged"),this.onDragging(t,!0,!0)}onDragLeave(){this.ensureIntervalCleared(),this.lastMovedInfo=null}setColumnsVisible(t,e,i){if(t){const s=t.filter(r=>!r.getColDef().lockVisible);this.columnModel.setColumnsVisible(s,e,i)}}setColumnsPinned(t,e,i){if(t){const s=t.filter(r=>!r.getColDef().lockPinned);this.columnModel.setColumnsPinned(s,e,i)}}onDragStop(){this.onDragging(this.lastDraggingEvent,!1,!0,!0),this.ensureIntervalCleared(),this.lastMovedInfo=null}checkCenterForScrolling(t){if(this.isCenterContainer){const e=this.ctrlsService.get("center"),i=e.getCenterViewportScrollLeft(),s=i+e.getCenterWidth();this.gos.get("enableRtl")?(this.needToMoveRight=t<i+50,this.needToMoveLeft=t>s-50):(this.needToMoveLeft=t<i+50,this.needToMoveRight=t>s-50),this.needToMoveLeft||this.needToMoveRight?this.ensureIntervalStarted():this.ensureIntervalCleared()}}onDragging(t=this.lastDraggingEvent,e=!1,i=!1,s=!1){var r;if(s){if(this.lastMovedInfo){const{columns:u,toIndex:d}=this.lastMovedInfo;uh.moveColumns(u,d,"uiColumnMoved",!0,this.columnModel)}return}if(this.lastDraggingEvent=t,St(t.hDirection))return;const n=uh.normaliseX(t.x,this.pinned,!1,this.gos,this.ctrlsService);e||this.checkCenterForScrolling(n);const o=this.normaliseDirection(t.hDirection),a=t.dragSource.type,l=((r=t.dragSource.getDragItem().columns)==null?void 0:r.filter(u=>u.getColDef().lockPinned?u.getPinned()==this.pinned:!0))||[],c=uh.attemptMoveColumns({allMovingColumns:l,isFromHeader:a===1,hDirection:o,xPosition:n,pinned:this.pinned,fromEnter:e,fakeEvent:i,gos:this.gos,columnModel:this.columnModel});c&&(this.lastMovedInfo=c)}normaliseDirection(t){if(this.gos.get("enableRtl"))switch(t){case 0:return 1;case 1:return 0;default:console.error(`AG Grid: Unknown direction ${t}`)}else return t}ensureIntervalStarted(){this.movingIntervalId||(this.intervalCount=0,this.failedMoveAttempts=0,this.movingIntervalId=window.setInterval(this.moveInterval.bind(this),100),this.needToMoveLeft?this.dragAndDropService.setGhostIcon(st.ICON_LEFT,!0):this.dragAndDropService.setGhostIcon(st.ICON_RIGHT,!0))}ensureIntervalCleared(){this.movingIntervalId&&(window.clearInterval(this.movingIntervalId),this.movingIntervalId=null,this.dragAndDropService.setGhostIcon(st.ICON_MOVE))}moveInterval(){let t;this.intervalCount++,t=10+this.intervalCount*5,t>100&&(t=100);let e=null;const i=this.gridBodyCon.getScrollFeature();if(this.needToMoveLeft?e=i.scrollHorizontally(-t):this.needToMoveRight&&(e=i.scrollHorizontally(t)),e!==0)this.onDragging(this.lastDraggingEvent),this.failedMoveAttempts=0;else{this.failedMoveAttempts++;const r=this.lastDraggingEvent.dragItem.columns.filter(n=>!n.getColDef().lockPinned);if(r.length>0&&(this.dragAndDropService.setGhostIcon(st.ICON_PINNED),this.failedMoveAttempts>7)){const n=this.needToMoveLeft?"left":"right";this.setColumnsPinned(r,n,"uiColumnDragged"),this.dragAndDropService.nudge()}}}};z([W("columnModel")],Zh.prototype,"columnModel",2);z([W("dragAndDropService")],Zh.prototype,"dragAndDropService",2);z([W("gridOptionsService")],Zh.prototype,"gos",2);z([W("ctrlsService")],Zh.prototype,"ctrlsService",2);z([de],Zh.prototype,"init",1);var Jh=class extends ye{constructor(t,e){super(),this.pinned=t,this.eContainer=e}postConstruct(){this.ctrlsService.whenReady(t=>{switch(this.pinned){case"left":this.eSecondaryContainers=[[t.gridBodyCtrl.getBodyViewportElement(),t.left.getContainerElement()],[t.bottomLeft.getContainerElement()],[t.topLeft.getContainerElement()]];break;case"right":this.eSecondaryContainers=[[t.gridBodyCtrl.getBodyViewportElement(),t.right.getContainerElement()],[t.bottomRight.getContainerElement()],[t.topRight.getContainerElement()]];break;default:this.eSecondaryContainers=[[t.gridBodyCtrl.getBodyViewportElement(),t.center.getViewportElement()],[t.bottomCenter.getViewportElement()],[t.topCenter.getViewportElement()]];break}})}isInterestedIn(t){return t===1||t===0&&this.gos.get("allowDragFromColumnsToolPanel")}getSecondaryContainers(){return this.eSecondaryContainers}getContainer(){return this.eContainer}init(){this.moveColumnFeature=this.createManagedBean(new Zh(this.pinned)),this.bodyDropPivotTarget=this.createManagedBean(new _x(this.pinned)),this.dragAndDropService.addDropTarget(this)}getIconName(){return this.currentDropListener.getIconName()}isDropColumnInPivotMode(t){return this.columnModel.isPivotMode()&&t.dragSource.type===0}onDragEnter(t){this.currentDropListener=this.isDropColumnInPivotMode(t)?this.bodyDropPivotTarget:this.moveColumnFeature,this.currentDropListener.onDragEnter(t)}onDragLeave(t){this.currentDropListener.onDragLeave(t)}onDragging(t){this.currentDropListener.onDragging(t)}onDragStop(t){this.currentDropListener.onDragStop(t)}};z([W("dragAndDropService")],Jh.prototype,"dragAndDropService",2);z([W("columnModel")],Jh.prototype,"columnModel",2);z([W("ctrlsService")],Jh.prototype,"ctrlsService",2);z([de],Jh.prototype,"postConstruct",1);z([de],Jh.prototype,"init",1);var Hg=class H4 extends VM{constructor(e){super(H4.TEMPLATE,e),this.headerCompVersion=0,this.column=e.getColumnGroupChild(),this.pinned=e.getPinned()}postConstruct(){const e=this.getGui();((n,o)=>{o!=null&&o!=""?e.setAttribute(n,o):e.removeAttribute(n)})("col-id",this.column.getColId());const s={setWidth:n=>e.style.width=n,addOrRemoveCssClass:(n,o)=>this.addOrRemoveCssClass(n,o),setAriaSort:n=>n?lG(e,n):cG(e),setUserCompDetails:n=>this.setUserCompDetails(n),getUserCompInstance:()=>this.headerComp};this.ctrl.setComp(s,this.getGui(),this.eResize,this.eHeaderCompWrapper);const r=this.ctrl.getSelectAllGui();this.eResize.insertAdjacentElement("afterend",r)}destroyHeaderComp(){this.headerComp&&(this.eHeaderCompWrapper.removeChild(this.headerCompGui),this.headerComp=this.destroyBean(this.headerComp),this.headerCompGui=void 0)}setUserCompDetails(e){this.headerCompVersion++;const i=this.headerCompVersion;e.newAgStackInstance().then(s=>this.afterCompCreated(i,s))}afterCompCreated(e,i){if(e!=this.headerCompVersion||!this.isAlive()){this.destroyBean(i);return}this.destroyHeaderComp(),this.headerComp=i,this.headerCompGui=i.getGui(),this.eHeaderCompWrapper.appendChild(this.headerCompGui),this.ctrl.setDragSource(this.getGui())}};Hg.TEMPLATE=`<div class="ag-header-cell" role="columnheader">
            <div ref="eResize" class="ag-header-cell-resize" role="presentation"></div>
            <div ref="eHeaderCompWrapper" class="ag-header-cell-comp-wrapper" role="presentation"></div>
        </div>`;z([pe("eResize")],Hg.prototype,"eResize",2);z([pe("eHeaderCompWrapper")],Hg.prototype,"eHeaderCompWrapper",2);z([de],Hg.prototype,"postConstruct",1);z([Hi],Hg.prototype,"destroyHeaderComp",1);var AY=Hg,Ax=class j4 extends VM{constructor(e){super(j4.TEMPLATE,e)}postConstruct(){const e=this.getGui(),i=(r,n)=>n!=null?e.setAttribute(r,n):e.removeAttribute(r);e.setAttribute("col-id",this.ctrl.getColId());const s={addOrRemoveCssClass:(r,n)=>this.addOrRemoveCssClass(r,n),setResizableDisplayed:r=>Qt(this.eResize,r),setWidth:r=>e.style.width=r,setAriaExpanded:r=>i("aria-expanded",r),setUserCompDetails:r=>this.setUserCompDetails(r),getUserCompInstance:()=>this.headerGroupComp};this.ctrl.setComp(s,e,this.eResize)}setUserCompDetails(e){e.newAgStackInstance().then(i=>this.afterHeaderCompCreated(i))}afterHeaderCompCreated(e){const i=()=>this.destroyBean(e);if(!this.isAlive()){i();return}const s=this.getGui(),r=e.getGui();s.appendChild(r),this.addDestroyFunc(i),this.headerGroupComp=e,this.ctrl.setDragSource(s)}};Ax.TEMPLATE=`<div class="ag-header-group-cell" role="columnheader">
            <div ref="eResize" class="ag-header-cell-resize" role="presentation"></div>
        </div>`;z([pe("eResize")],Ax.prototype,"eResize",2);z([de],Ax.prototype,"postConstruct",1);var RY=Ax,U4=(t=>(t.COLUMN_GROUP="group",t.COLUMN="column",t.FLOATING_FILTER="filter",t))(U4||{}),Rx=class extends Te{constructor(t){super(),this.headerComps={},this.ctrl=t,this.setTemplate(`<div class="${this.ctrl.getHeaderRowClass()}" role="row"></div>`)}init(){sM(this.getGui(),this.ctrl.getAriaRowIndex());const t={setHeight:e=>this.getGui().style.height=e,setTop:e=>this.getGui().style.top=e,setHeaderCtrls:(e,i)=>this.setHeaderCtrls(e,i),setWidth:e=>this.getGui().style.width=e};this.ctrl.setComp(t)}destroyHeaderCtrls(){this.setHeaderCtrls([],!1)}setHeaderCtrls(t,e){if(!this.isAlive())return;const i=this.headerComps;if(this.headerComps={},t.forEach(s=>{const r=s.getInstanceId();let n=i[r];delete i[r],n==null&&(n=this.createHeaderComp(s),this.getGui().appendChild(n.getGui())),this.headerComps[r]=n}),Pr(i,(s,r)=>{this.getGui().removeChild(r.getGui()),this.destroyBean(r)}),e){const s=_u(this.headerComps);s.sort((n,o)=>{const a=n.getCtrl().getColumnGroupChild().getLeft(),l=o.getCtrl().getColumnGroupChild().getLeft();return a-l});const r=s.map(n=>n.getGui());yM(this.getGui(),r)}}createHeaderComp(t){let e;switch(this.ctrl.getType()){case"group":e=new RY(t);break;case"filter":e=new A4(t);break;default:e=new AY(t);break}return this.createBean(e),e.setParentComponent(this),e}};z([de],Rx.prototype,"init",1);z([Hi],Rx.prototype,"destroyHeaderCtrls",1);var MY=0,Mc=class W4 extends ye{constructor(e,i,s){super(),this.resizeToggleTimeout=0,this.resizeMultiplier=1,this.resizeFeature=null,this.lastFocusEvent=null,this.dragSource=null,this.columnGroupChild=e,this.parentRowCtrl=s,this.beans=i,this.instanceId=e.getUniqueId()+"-"+MY++}postConstruct(){this.addManagedPropertyListeners(["suppressHeaderFocus"],()=>this.refreshTabIndex())}shouldStopEventPropagation(e){const{headerRowIndex:i,column:s}=this.focusService.getFocusedHeader();return IG(this.gos,e,i,s)}getWrapperHasFocus(){return this.gos.getActiveDomElement()===this.eGui}setGui(e){this.eGui=e,this.addDomData(),this.addManagedListener(this.beans.eventService,K.EVENT_DISPLAYED_COLUMNS_CHANGED,this.onDisplayedColumnsChanged.bind(this)),this.onDisplayedColumnsChanged(),this.refreshTabIndex()}onDisplayedColumnsChanged(){!this.comp||!this.column||(this.refreshFirstAndLastStyles(),this.refreshAriaColIndex())}refreshFirstAndLastStyles(){const{comp:e,column:i,beans:s}=this;td.refreshFirstAndLastStyles(e,i,s.columnModel)}refreshAriaColIndex(){const{beans:e,column:i}=this,s=e.columnModel.getAriaColumnIndex(i);rM(this.eGui,s)}addResizeAndMoveKeyboardListeners(){this.resizeFeature&&(this.addManagedListener(this.eGui,"keydown",this.onGuiKeyDown.bind(this)),this.addManagedListener(this.eGui,"keyup",this.onGuiKeyUp.bind(this)))}refreshTabIndex(){this.gos.get("suppressHeaderFocus")?this.eGui.removeAttribute("tabindex"):this.eGui.setAttribute("tabindex","-1")}onGuiKeyDown(e){var i;const s=this.gos.getActiveDomElement(),r=e.key===ce.LEFT||e.key===ce.RIGHT;if(this.isResizing&&(e.preventDefault(),e.stopImmediatePropagation()),s!==this.eGui||!e.shiftKey&&!e.altKey||((this.isResizing||r)&&(e.preventDefault(),e.stopImmediatePropagation()),!r))return;const n=e.key===ce.LEFT!==this.gos.get("enableRtl"),o=LM[n?"Left":"Right"];if(e.altKey){this.isResizing=!0,this.resizeMultiplier+=1;const a=this.getViewportAdjustedResizeDiff(e);this.resizeHeader(a,e.shiftKey),(i=this.resizeFeature)==null||i.toggleColumnResizing(!0)}else this.moveHeader(o)}getViewportAdjustedResizeDiff(e){let i=this.getResizeDiff(e);if(this.column.getPinned()){const r=this.pinnedWidthService.getPinnedLeftWidth(),n=this.pinnedWidthService.getPinnedRightWidth(),o=zh(this.ctrlsService.getGridBodyCtrl().getBodyViewportElement())-50;if(r+n+i>o)if(o>r+n)i=o-r-n;else return 0}return i}getResizeDiff(e){let i=e.key===ce.LEFT!==this.gos.get("enableRtl");const s=this.column.getPinned(),r=this.gos.get("enableRtl");return s&&r!==(s==="right")&&(i=!i),(i?-1:1)*this.resizeMultiplier}onGuiKeyUp(){this.isResizing&&(this.resizeToggleTimeout&&(window.clearTimeout(this.resizeToggleTimeout),this.resizeToggleTimeout=0),this.isResizing=!1,this.resizeMultiplier=1,this.resizeToggleTimeout=setTimeout(()=>{var e;(e=this.resizeFeature)==null||e.toggleColumnResizing(!1)},150))}handleKeyDown(e){const i=this.getWrapperHasFocus();switch(e.key){case ce.PAGE_DOWN:case ce.PAGE_UP:case ce.PAGE_HOME:case ce.PAGE_END:i&&e.preventDefault()}}addDomData(){const e=W4.DOM_DATA_KEY_HEADER_CTRL;this.gos.setDomData(this.eGui,e,this),this.addDestroyFunc(()=>this.gos.setDomData(this.eGui,e,null))}getGui(){return this.eGui}focus(e){return this.eGui?(this.lastFocusEvent=e||null,this.eGui.focus(),!0):!1}getRowIndex(){return this.parentRowCtrl.getRowIndex()}getParentRowCtrl(){return this.parentRowCtrl}getPinned(){return this.parentRowCtrl.getPinned()}getInstanceId(){return this.instanceId}getColumnGroupChild(){return this.columnGroupChild}removeDragSource(){this.dragSource&&(this.dragAndDropService.removeDragSource(this.dragSource),this.dragSource=null)}handleContextMenuMouseEvent(e,i,s){const r=e??i;this.gos.get("preventDefaultOnContextMenu")&&r.preventDefault();const n=s instanceof Nt?s:void 0;this.menuService.isHeaderContextMenuEnabled(n)&&this.menuService.showHeaderContextMenu(n,e,i),this.dispatchColumnMouseEvent(K.EVENT_COLUMN_HEADER_CONTEXT_MENU,s)}dispatchColumnMouseEvent(e,i){const s={type:e,column:i};this.eventService.dispatchEvent(s)}destroy(){super.destroy(),this.removeDragSource(),this.comp=null,this.column=null,this.resizeFeature=null,this.lastFocusEvent=null,this.columnGroupChild=null,this.parentRowCtrl=null,this.eGui=null}};Mc.DOM_DATA_KEY_HEADER_CTRL="headerCtrl";z([W("pinnedWidthService")],Mc.prototype,"pinnedWidthService",2);z([W("focusService")],Mc.prototype,"focusService",2);z([W("userComponentFactory")],Mc.prototype,"userComponentFactory",2);z([W("ctrlsService")],Mc.prototype,"ctrlsService",2);z([W("dragAndDropService")],Mc.prototype,"dragAndDropService",2);z([W("menuService")],Mc.prototype,"menuService",2);z([de],Mc.prototype,"postConstruct",1);var FC=Mc,LC=class extends ye{constructor(t,e,i,s){super(),this.columnOrGroup=t,this.eCell=e,this.ariaEl=this.eCell.querySelector("[role=columnheader]")||this.eCell,this.colsSpanning=s,this.beans=i}setColsSpanning(t){this.colsSpanning=t,this.onLeftChanged()}getColumnOrGroup(){return this.beans.gos.get("enableRtl")&&this.colsSpanning?di(this.colsSpanning):this.columnOrGroup}postConstruct(){this.addManagedListener(this.columnOrGroup,Nt.EVENT_LEFT_CHANGED,this.onLeftChanged.bind(this)),this.setLeftFirstTime(),this.addManagedListener(this.eventService,K.EVENT_DISPLAYED_COLUMNS_WIDTH_CHANGED,this.onLeftChanged.bind(this)),this.addManagedPropertyListener("domLayout",this.onLeftChanged.bind(this))}setLeftFirstTime(){const t=this.beans.gos.get("suppressColumnMoveAnimation"),e=Pe(this.columnOrGroup.getOldLeft());this.beans.columnAnimationService.isActive()&&e&&!t?this.animateInLeft():this.onLeftChanged()}animateInLeft(){const t=this.getColumnOrGroup(),e=t.getLeft(),i=t.getOldLeft(),s=this.modifyLeftForPrintLayout(t,i),r=this.modifyLeftForPrintLayout(t,e);this.setLeft(s),this.actualLeft=r,this.beans.columnAnimationService.executeNextVMTurn(()=>{this.actualLeft===r&&this.setLeft(r)})}onLeftChanged(){const t=this.getColumnOrGroup(),e=t.getLeft();this.actualLeft=this.modifyLeftForPrintLayout(t,e),this.setLeft(this.actualLeft)}modifyLeftForPrintLayout(t,e){if(!this.beans.gos.isDomLayout("print")||t.getPinned()==="left")return e;const s=this.beans.columnModel.getDisplayedColumnsLeftWidth();if(t.getPinned()==="right"){const r=this.beans.columnModel.getBodyContainerWidth();return s+r+e}return s+e}setLeft(t){if(Pe(t)&&(this.eCell.style.left=`${t}px`),this.columnOrGroup instanceof Nt)this.columnOrGroup;else{const i=this.columnOrGroup.getLeafColumns();if(!i.length)return;i.length>1&&aG(this.ariaEl,i.length),i[0]}}};z([de],LC.prototype,"postConstruct",1);var kC=class extends ye{constructor(t,e){super(),this.columns=t,this.element=e}postConstruct(){this.gos.get("columnHoverHighlight")&&this.addMouseHoverListeners()}addMouseHoverListeners(){this.addManagedListener(this.element,"mouseout",this.onMouseOut.bind(this)),this.addManagedListener(this.element,"mouseover",this.onMouseOver.bind(this))}onMouseOut(){this.columnHoverService.clearMouseOver()}onMouseOver(){this.columnHoverService.setMouseOver(this.columns)}};z([W("columnHoverService")],kC.prototype,"columnHoverService",2);z([de],kC.prototype,"postConstruct",1);var z4=class extends FC{constructor(t,e,i){super(t,e,i),this.iconCreated=!1,this.column=t}setComp(t,e,i,s){this.comp=t,this.eButtonShowMainFilter=i,this.eFloatingFilterBody=s,this.setGui(e),this.setupActive(),this.setupWidth(),this.setupLeft(),this.setupHover(),this.setupFocus(),this.setupAria(),this.setupFilterButton(),this.setupUserComp(),this.setupSyncWithFilter(),this.setupUi(),this.addManagedListener(this.eButtonShowMainFilter,"click",this.showParentFilter.bind(this)),this.setupFilterChangedListener(),this.addManagedListener(this.column,Nt.EVENT_COL_DEF_CHANGED,this.onColDefChanged.bind(this))}resizeHeader(){}moveHeader(){}setupActive(){const t=this.column.getColDef(),e=!!t.filter,i=!!t.floatingFilter;this.active=e&&i}setupUi(){if(this.comp.setButtonWrapperDisplayed(!this.suppressFilterButton&&this.active),this.comp.addOrRemoveBodyCssClass("ag-floating-filter-full-body",this.suppressFilterButton),this.comp.addOrRemoveBodyCssClass("ag-floating-filter-body",!this.suppressFilterButton),!this.active||this.iconCreated)return;const t=ts("filter",this.gos,this.column);t&&(this.iconCreated=!0,this.eButtonShowMainFilter.appendChild(t))}setupFocus(){this.createManagedBean(new ml(this.eGui,{shouldStopEventPropagation:this.shouldStopEventPropagation.bind(this),onTabKeyDown:this.onTabKeyDown.bind(this),handleKeyDown:this.handleKeyDown.bind(this),onFocusIn:this.onFocusIn.bind(this)}))}setupAria(){const t=this.localeService.getLocaleTextFunc();no(this.eButtonShowMainFilter,t("ariaFilterMenuOpen","Open Filter Menu"))}onTabKeyDown(t){if(this.gos.getActiveDomElement()===this.eGui)return;const s=this.focusService.findNextFocusableElement(this.eGui,null,t.shiftKey);if(s){this.beans.headerNavigationService.scrollToColumn(this.column),t.preventDefault(),s.focus();return}const r=this.findNextColumnWithFloatingFilter(t.shiftKey);r&&this.focusService.focusHeaderPosition({headerPosition:{headerRowIndex:this.getParentRowCtrl().getRowIndex(),column:r},event:t})&&t.preventDefault()}findNextColumnWithFloatingFilter(t){const e=this.beans.columnModel;let i=this.column;do if(i=t?e.getDisplayedColBefore(i):e.getDisplayedColAfter(i),!i)break;while(!i.getColDef().filter||!i.getColDef().floatingFilter);return i}handleKeyDown(t){super.handleKeyDown(t);const e=this.getWrapperHasFocus();switch(t.key){case ce.UP:case ce.DOWN:e||t.preventDefault();case ce.LEFT:case ce.RIGHT:if(e)return;t.stopPropagation();case ce.ENTER:e&&this.focusService.focusInto(this.eGui)&&t.preventDefault();break;case ce.ESCAPE:e||this.eGui.focus()}}onFocusIn(t){if(this.eGui.contains(t.relatedTarget))return;const i=!!t.relatedTarget&&!t.relatedTarget.classList.contains("ag-floating-filter"),s=!!t.relatedTarget&&lh(t.relatedTarget,"ag-floating-filter");if(i&&s&&t.target===this.eGui){const n=this.lastFocusEvent,o=!!(n&&n.key===ce.TAB);if(n&&o){const a=n.shiftKey;this.focusService.focusInto(this.eGui,a)}}const r=this.getRowIndex();this.beans.focusService.setFocusedHeader(r,this.column)}setupHover(){this.createManagedBean(new kC([this.column],this.eGui));const t=()=>{if(!this.gos.get("columnHoverHighlight"))return;const e=this.beans.columnHoverService.isHovered(this.column);this.comp.addOrRemoveCssClass("ag-column-hover",e)};this.addManagedListener(this.eventService,K.EVENT_COLUMN_HOVER_CHANGED,t),t()}setupLeft(){const t=new LC(this.column,this.eGui,this.beans);this.createManagedBean(t)}setupFilterButton(){this.suppressFilterButton=!this.menuService.isFloatingFilterButtonEnabled(this.column),this.highlightFilterButtonWhenActive=!this.menuService.isLegacyMenuEnabled()}setupUserComp(){if(!this.active)return;const t=this.beans.filterManager.getFloatingFilterCompDetails(this.column,()=>this.showParentFilter());t&&this.setCompDetails(t)}setCompDetails(t){this.userCompDetails=t,this.comp.setCompDetails(t)}showParentFilter(){const t=this.suppressFilterButton?this.eFloatingFilterBody:this.eButtonShowMainFilter;this.menuService.showFilterMenu({column:this.column,buttonElement:t,containerType:"floatingFilter",positionBy:"button"})}setupSyncWithFilter(){if(!this.active)return;const{filterManager:t}=this.beans,e=i=>{if((i==null?void 0:i.source)==="filterDestroyed"&&this.context.isDestroyed())return;const s=this.comp.getFloatingFilterComp();s&&s.then(r=>{var n;if(r){const o=t.getCurrentFloatingFilterParentModel(this.column);r.onParentModelChanged(o,i?this.gos.addGridCommonParams({columns:(n=i.columns)!=null?n:[],type:K.EVENT_FILTER_CHANGED,source:i.source==="api"?"api":"columnFilter"}):null)}})};this.destroySyncListener=this.addManagedListener(this.column,Nt.EVENT_FILTER_CHANGED,e),t.isFilterActive(this.column)&&e(null)}setupWidth(){const t=()=>{const e=`${this.column.getActualWidth()}px`;this.comp.setWidth(e)};this.addManagedListener(this.column,Nt.EVENT_WIDTH_CHANGED,t),t()}setupFilterChangedListener(){this.active&&(this.destroyFilterChangedListener=this.addManagedListener(this.column,Nt.EVENT_FILTER_CHANGED,this.updateFilterButton.bind(this)),this.updateFilterButton())}updateFilterButton(){if(!this.suppressFilterButton&&this.comp){const t=this.beans.filterManager.isFilterAllowed(this.column);this.comp.setButtonWrapperDisplayed(t),this.highlightFilterButtonWhenActive&&t&&this.eButtonShowMainFilter.classList.toggle("ag-filter-active",this.column.isFilterActive())}}onColDefChanged(){var t,e;const i=this.active;this.setupActive();const s=!i&&this.active;i&&!this.active&&((t=this.destroySyncListener)==null||t.call(this),(e=this.destroyFilterChangedListener)==null||e.call(this));const r=this.active?this.beans.filterManager.getFloatingFilterCompDetails(this.column,()=>this.showParentFilter()):null,n=this.comp.getFloatingFilterComp();!n||!r?this.updateCompDetails(r,s):n.then(o=>{var a;!o||this.beans.filterManager.areFilterCompsDifferent((a=this.userCompDetails)!=null?a:null,r)?this.updateCompDetails(r,s):this.updateFloatingFilterParams(r)})}updateCompDetails(t,e){this.isAlive()&&(this.setCompDetails(t),this.setupFilterButton(),this.setupUi(),e&&(this.setupSyncWithFilter(),this.setupFilterChangedListener()))}updateFloatingFilterParams(t){var e;if(!t)return;const i=t.params;(e=this.comp.getFloatingFilterComp())==null||e.then(s=>{let r=!1;s!=null&&s.refresh&&typeof s.refresh=="function"&&s.refresh(i)!==null&&(r=!0),!r&&(s!=null&&s.onParamsUpdated)&&typeof s.onParamsUpdated=="function"&&s.onParamsUpdated(i)!==null&&ot("Custom floating filter method 'onParamsUpdated' is deprecated. Use 'refresh' instead.")})}destroy(){super.destroy(),this.eButtonShowMainFilter=null,this.eFloatingFilterBody=null,this.userCompDetails=null,this.destroySyncListener=null,this.destroyFilterChangedListener=null}},jg=class extends ye{constructor(t,e,i,s,r){super(),this.pinned=t,this.column=e,this.eResize=i,this.comp=s,this.ctrl=r}postConstruct(){const t=[];let e,i;const s=()=>{if(Qt(this.eResize,e),!e)return;const o=this.horizontalResizeService.addResizeBar({eResizeBar:this.eResize,onResizeStart:this.onResizeStart.bind(this),onResizing:this.onResizing.bind(this,!1),onResizeEnd:this.onResizing.bind(this,!0)});if(t.push(o),i){const a=this.gos.get("skipHeaderOnAutoSize"),l=()=>{this.columnModel.autoSizeColumn(this.column,"uiColumnResized",a)};this.eResize.addEventListener("dblclick",l);const c=new Es(this.eResize);c.addEventListener(Es.EVENT_DOUBLE_TAP,l),t.push(()=>{this.eResize.removeEventListener("dblclick",l),c.removeEventListener(Es.EVENT_DOUBLE_TAP,l),c.destroy()})}},r=()=>{t.forEach(o=>o()),t.length=0},n=()=>{const o=this.column.isResizable(),a=!this.gos.get("suppressAutoSize")&&!this.column.getColDef().suppressAutoSize;(o!==e||a!==i)&&(e=o,i=a,r(),s())};n(),this.addDestroyFunc(r),this.ctrl.addRefreshFunction(n)}onResizing(t,e){const{column:i,lastResizeAmount:s,resizeStartWidth:r}=this,n=this.normaliseResizeAmount(e),o=r+n,a=[{key:i,newWidth:o}];if(this.column.getPinned()){const l=this.pinnedWidthService.getPinnedLeftWidth(),c=this.pinnedWidthService.getPinnedRightWidth(),u=zh(this.ctrlsService.getGridBodyCtrl().getBodyViewportElement())-50;if(l+c+(n-s)>u)return}this.lastResizeAmount=n,this.columnModel.setColumnWidths(a,this.resizeWithShiftKey,t,"uiColumnResized"),t&&this.toggleColumnResizing(!1)}onResizeStart(t){this.resizeStartWidth=this.column.getActualWidth(),this.lastResizeAmount=0,this.resizeWithShiftKey=t,this.toggleColumnResizing(!0)}toggleColumnResizing(t){this.comp.addOrRemoveCssClass("ag-column-resizing",t)}normaliseResizeAmount(t){let e=t;const i=this.pinned!=="left",s=this.pinned==="right";return this.gos.get("enableRtl")?i&&(e*=-1):s&&(e*=-1),e}};z([W("horizontalResizeService")],jg.prototype,"horizontalResizeService",2);z([W("pinnedWidthService")],jg.prototype,"pinnedWidthService",2);z([W("ctrlsService")],jg.prototype,"ctrlsService",2);z([W("columnModel")],jg.prototype,"columnModel",2);z([de],jg.prototype,"postConstruct",1);var zM=class extends ye{constructor(t){super(),this.cbSelectAllVisible=!1,this.processingEventFromCheckbox=!1,this.column=t}onSpaceKeyDown(t){const e=this.cbSelectAll;e.isDisplayed()&&!e.getGui().contains(this.gos.getActiveDomElement())&&(t.preventDefault(),e.setValue(!e.getValue()))}getCheckboxGui(){return this.cbSelectAll.getGui()}setComp(t){this.headerCellCtrl=t,this.cbSelectAll=this.createManagedBean(new Tc),this.cbSelectAll.addCssClass("ag-header-select-all"),as(this.cbSelectAll.getGui(),"presentation"),this.showOrHideSelectAll(),this.addManagedListener(this.eventService,K.EVENT_NEW_COLUMNS_LOADED,this.onNewColumnsLoaded.bind(this)),this.addManagedListener(this.eventService,K.EVENT_DISPLAYED_COLUMNS_CHANGED,this.onDisplayedColumnsChanged.bind(this)),this.addManagedListener(this.eventService,K.EVENT_SELECTION_CHANGED,this.onSelectionChanged.bind(this)),this.addManagedListener(this.eventService,K.EVENT_PAGINATION_CHANGED,this.onSelectionChanged.bind(this)),this.addManagedListener(this.eventService,K.EVENT_MODEL_UPDATED,this.onModelChanged.bind(this)),this.addManagedListener(this.cbSelectAll,K.EVENT_FIELD_VALUE_CHANGED,this.onCbSelectAll.bind(this)),CC(this.cbSelectAll.getGui(),!0),this.cbSelectAll.getInputElement().setAttribute("tabindex","-1"),this.refreshSelectAllLabel()}onNewColumnsLoaded(){this.showOrHideSelectAll()}onDisplayedColumnsChanged(){this.isAlive()&&this.showOrHideSelectAll()}showOrHideSelectAll(){this.cbSelectAllVisible=this.isCheckboxSelection(),this.cbSelectAll.setDisplayed(this.cbSelectAllVisible,{skipAriaHidden:!0}),this.cbSelectAllVisible&&(this.checkRightRowModelType("selectAllCheckbox"),this.checkSelectionType("selectAllCheckbox"),this.updateStateOfCheckbox()),this.refreshSelectAllLabel()}onModelChanged(){this.cbSelectAllVisible&&this.updateStateOfCheckbox()}onSelectionChanged(){this.cbSelectAllVisible&&this.updateStateOfCheckbox()}updateStateOfCheckbox(){if(this.processingEventFromCheckbox)return;this.processingEventFromCheckbox=!0;const t=this.selectionService.getSelectAllState(this.isFilteredOnly(),this.isCurrentPageOnly());this.cbSelectAll.setValue(t);const e=this.selectionService.hasNodesToSelect(this.isFilteredOnly(),this.isCurrentPageOnly());this.cbSelectAll.setDisabled(!e),this.refreshSelectAllLabel(),this.processingEventFromCheckbox=!1}refreshSelectAllLabel(){const t=this.localeService.getLocaleTextFunc(),i=this.cbSelectAll.getValue()?t("ariaChecked","checked"):t("ariaUnchecked","unchecked"),s=t("ariaRowSelectAll","Press Space to toggle all rows selection");this.cbSelectAllVisible?this.headerCellCtrl.setAriaDescriptionProperty("selectAll",`${s} (${i})`):this.headerCellCtrl.setAriaDescriptionProperty("selectAll",null),this.cbSelectAll.setInputAriaLabel(`${s} (${i})`),this.headerCellCtrl.announceAriaDescription()}checkSelectionType(t){return this.gos.get("rowSelection")==="multiple"?!0:(console.warn(`AG Grid: ${t} is only available if using 'multiple' rowSelection.`),!1)}checkRightRowModelType(t){const e=this.rowModel.getType();return e==="clientSide"||e==="serverSide"?!0:(console.warn(`AG Grid: ${t} is only available if using 'clientSide' or 'serverSide' rowModelType, you are using ${e}.`),!1)}onCbSelectAll(){if(this.processingEventFromCheckbox||!this.cbSelectAllVisible)return;const t=this.cbSelectAll.getValue(),e=this.isFilteredOnly(),i=this.isCurrentPageOnly();let s="uiSelectAll";i?s="uiSelectAllCurrentPage":e&&(s="uiSelectAllFiltered");const r={source:s,justFiltered:e,justCurrentPage:i};t?this.selectionService.selectAllRowNodes(r):this.selectionService.deselectAllRowNodes(r)}isCheckboxSelection(){let t=this.column.getColDef().headerCheckboxSelection;if(typeof t=="function"){const e=t,i=this.gos.addGridCommonParams({column:this.column,colDef:this.column.getColDef()});t=e(i)}return t?this.checkRightRowModelType("headerCheckboxSelection")&&this.checkSelectionType("headerCheckboxSelection"):!1}isFilteredOnly(){return!!this.column.getColDef().headerCheckboxSelectionFilteredOnly}isCurrentPageOnly(){return!!this.column.getColDef().headerCheckboxSelectionCurrentPageOnly}};z([W("rowModel")],zM.prototype,"rowModel",2);z([W("selectionService")],zM.prototype,"selectionService",2);var $4=class extends FC{constructor(t,e,i){super(t,e,i),this.refreshFunctions=[],this.userHeaderClasses=new Set,this.ariaDescriptionProperties=new Map,this.column=t}setComp(t,e,i,s){this.comp=t,this.setGui(e),this.updateState(),this.setupWidth(),this.setupMovingCss(),this.setupMenuClass(),this.setupSortableClass(),this.setupWrapTextClass(),this.refreshSpanHeaderHeight(),this.setupAutoHeight(s),this.addColumnHoverListener(),this.setupFilterClass(),this.setupClassesFromColDef(),this.setupTooltip(),this.addActiveHeaderMouseListeners(),this.setupSelectAll(),this.setupUserComp(),this.refreshAria(),this.resizeFeature=this.createManagedBean(new jg(this.getPinned(),this.column,i,t,this)),this.createManagedBean(new kC([this.column],e)),this.createManagedBean(new LC(this.column,e,this.beans)),this.createManagedBean(new ml(e,{shouldStopEventPropagation:r=>this.shouldStopEventPropagation(r),onTabKeyDown:()=>null,handleKeyDown:this.handleKeyDown.bind(this),onFocusIn:this.onFocusIn.bind(this),onFocusOut:this.onFocusOut.bind(this)})),this.addResizeAndMoveKeyboardListeners(),this.addManagedPropertyListeners(["suppressMovableColumns","suppressMenuHide","suppressAggFuncInHeader"],this.refresh.bind(this)),this.addManagedListener(this.column,Nt.EVENT_COL_DEF_CHANGED,this.refresh.bind(this)),this.addManagedListener(this.eventService,K.EVENT_COLUMN_VALUE_CHANGED,this.onColumnValueChanged.bind(this)),this.addManagedListener(this.eventService,K.EVENT_COLUMN_ROW_GROUP_CHANGED,this.onColumnRowGroupChanged.bind(this)),this.addManagedListener(this.eventService,K.EVENT_COLUMN_PIVOT_CHANGED,this.onColumnPivotChanged.bind(this)),this.addManagedListener(this.eventService,K.EVENT_HEADER_HEIGHT_CHANGED,this.onHeaderHeightChanged.bind(this))}resizeHeader(t,e){var i,s;if(!this.column.isResizable())return;const r=this.column.getActualWidth(),n=(i=this.column.getMinWidth())!=null?i:0,o=(s=this.column.getMaxWidth())!=null?s:Number.MAX_SAFE_INTEGER,a=Math.min(Math.max(r+t,n),o);this.beans.columnModel.setColumnWidths([{key:this.column,newWidth:a}],e,!0,"uiColumnResized")}moveHeader(t){const{eGui:e,column:i,gos:s,ctrlsService:r}=this,n=this.getPinned(),o=e.getBoundingClientRect().left,a=i.getActualWidth(),l=s.get("enableRtl"),c=t===0!==l,u=uh.normaliseX(c?o-20:o+a+20,n,!0,s,r);uh.attemptMoveColumns({allMovingColumns:[i],isFromHeader:!0,hDirection:t,xPosition:u,pinned:n,fromEnter:!1,fakeEvent:!1,gos:s,columnModel:this.beans.columnModel}),r.getGridBodyCtrl().getScrollFeature().ensureColumnVisible(i,"auto")}setupUserComp(){const t=this.lookupUserCompDetails();this.setCompDetails(t)}setCompDetails(t){this.userCompDetails=t,this.comp.setUserCompDetails(t)}lookupUserCompDetails(){const t=this.createParams(),e=this.column.getColDef();return this.userComponentFactory.getHeaderCompDetails(e,t)}createParams(){return this.gos.addGridCommonParams({column:this.column,displayName:this.displayName,enableSorting:this.column.isSortable(),enableMenu:this.menuEnabled,enableFilterButton:this.openFilterEnabled&&this.menuService.isHeaderFilterButtonEnabled(this.column),enableFilterIcon:!this.openFilterEnabled||this.menuService.isLegacyMenuEnabled(),showColumnMenu:e=>{this.menuService.showColumnMenu({column:this.column,buttonElement:e,positionBy:"button"})},showColumnMenuAfterMouseClick:e=>{this.menuService.showColumnMenu({column:this.column,mouseEvent:e,positionBy:"mouse"})},showFilter:e=>{this.menuService.showFilterMenu({column:this.column,buttonElement:e,containerType:"columnFilter",positionBy:"button"})},progressSort:e=>{this.beans.sortController.progressSort(this.column,!!e,"uiColumnSorted")},setSort:(e,i)=>{this.beans.sortController.setSortForColumn(this.column,e,!!i,"uiColumnSorted")},eGridHeader:this.getGui(),setTooltip:(e,i)=>{this.setupTooltip(e,i)}})}setupSelectAll(){this.selectAllFeature=this.createManagedBean(new zM(this.column)),this.selectAllFeature.setComp(this)}getSelectAllGui(){return this.selectAllFeature.getCheckboxGui()}handleKeyDown(t){super.handleKeyDown(t),t.key===ce.SPACE&&this.selectAllFeature.onSpaceKeyDown(t),t.key===ce.ENTER&&this.onEnterKeyDown(t),t.key===ce.DOWN&&t.altKey&&this.showMenuOnKeyPress(t,!1)}onEnterKeyDown(t){if(t.ctrlKey||t.metaKey)this.showMenuOnKeyPress(t,!0);else if(this.sortable){const e=t.shiftKey;this.beans.sortController.progressSort(this.column,e,"uiColumnSorted")}}showMenuOnKeyPress(t,e){const i=this.comp.getUserCompInstance();!i||!(i instanceof I_)||i.onMenuKeyboardShortcut(e)&&t.preventDefault()}onFocusIn(t){if(!this.getGui().contains(t.relatedTarget)){const e=this.getRowIndex();this.focusService.setFocusedHeader(e,this.column),this.announceAriaDescription()}this.focusService.isKeyboardMode()&&this.setActiveHeader(!0)}onFocusOut(t){this.getGui().contains(t.relatedTarget)||this.setActiveHeader(!1)}setupTooltip(t,e){this.tooltipFeature&&(this.tooltipFeature=this.destroyBean(this.tooltipFeature));const i=this.gos.get("tooltipShowMode")==="whenTruncated",s=this.eGui,r=this.column.getColDef();!e&&i&&!r.headerComponent&&(e=()=>{const a=s.querySelector(".ag-header-cell-text");return a?a.scrollWidth>a.clientWidth:!0});const n={getColumn:()=>this.column,getColDef:()=>this.column.getColDef(),getGui:()=>s,getLocation:()=>"header",getTooltipValue:()=>t??this.column.getColDef().headerTooltip,shouldDisplayTooltip:e},o=this.createManagedBean(new hr(n));this.refreshFunctions.push(()=>o.refreshToolTip())}setupClassesFromColDef(){const t=()=>{const e=this.column.getColDef(),i=td.getHeaderClassesFromColDef(e,this.gos,this.column,null),s=this.userHeaderClasses;this.userHeaderClasses=new Set(i),i.forEach(r=>{s.has(r)?s.delete(r):this.comp.addOrRemoveCssClass(r,!0)}),s.forEach(r=>this.comp.addOrRemoveCssClass(r,!1))};this.refreshFunctions.push(t),t()}setDragSource(t){if(this.dragSourceElement=t,this.removeDragSource(),!t||!this.draggable)return;const{column:e,beans:i,displayName:s,dragAndDropService:r,gos:n}=this,{columnModel:o}=i;let a=!this.gos.get("suppressDragLeaveHidesColumns");const l=this.dragSource={type:1,eElement:t,getDefaultIconName:()=>a?st.ICON_HIDE:st.ICON_NOT_ALLOWED,getDragItem:()=>this.createDragItem(e),dragItemName:s,onDragStarted:()=>{a=!n.get("suppressDragLeaveHidesColumns"),e.setMoving(!0,"uiColumnMoved")},onDragStopped:()=>e.setMoving(!1,"uiColumnMoved"),onGridEnter:c=>{var u;if(a){const d=((u=c==null?void 0:c.columns)==null?void 0:u.filter(h=>!h.getColDef().lockVisible))||[];o.setColumnsVisible(d,!0,"uiColumnMoved")}},onGridExit:c=>{var u;if(a){const d=((u=c==null?void 0:c.columns)==null?void 0:u.filter(h=>!h.getColDef().lockVisible))||[];o.setColumnsVisible(d,!1,"uiColumnMoved")}}};r.addDragSource(l,!0)}createDragItem(t){const e={};return e[t.getId()]=t.isVisible(),{columns:[t],visibleState:e}}updateState(){this.menuEnabled=this.menuService.isColumnMenuInHeaderEnabled(this.column),this.openFilterEnabled=this.menuService.isFilterMenuInHeaderEnabled(this.column),this.sortable=this.column.isSortable(),this.displayName=this.calculateDisplayName(),this.draggable=this.workOutDraggable()}addRefreshFunction(t){this.refreshFunctions.push(t)}refresh(){this.updateState(),this.refreshHeaderComp(),this.refreshAria(),this.refreshFunctions.forEach(t=>t())}refreshHeaderComp(){const t=this.lookupUserCompDetails();(this.comp.getUserCompInstance()!=null&&this.userCompDetails.componentClass==t.componentClass?this.attemptHeaderCompRefresh(t.params):!1)?this.setDragSource(this.dragSourceElement):this.setCompDetails(t)}attemptHeaderCompRefresh(t){const e=this.comp.getUserCompInstance();return!e||!e.refresh?!1:e.refresh(t)}calculateDisplayName(){return this.beans.columnModel.getDisplayNameForColumn(this.column,"header",!0)}checkDisplayName(){this.displayName!==this.calculateDisplayName()&&this.refresh()}workOutDraggable(){const t=this.column.getColDef();return!!(!this.gos.get("suppressMovableColumns")&&!t.suppressMovable&&!t.lockPosition)||!!t.enableRowGroup||!!t.enablePivot}onColumnRowGroupChanged(){this.checkDisplayName()}onColumnPivotChanged(){this.checkDisplayName()}onColumnValueChanged(){this.checkDisplayName()}setupWidth(){const t=()=>{const e=this.column.getActualWidth();this.comp.setWidth(`${e}px`)};this.addManagedListener(this.column,Nt.EVENT_WIDTH_CHANGED,t),t()}setupMovingCss(){const t=()=>{this.comp.addOrRemoveCssClass("ag-header-cell-moving",this.column.isMoving())};this.addManagedListener(this.column,Nt.EVENT_MOVING_CHANGED,t),t()}setupMenuClass(){const t=()=>{this.comp.addOrRemoveCssClass("ag-column-menu-visible",this.column.isMenuVisible())};this.addManagedListener(this.column,Nt.EVENT_MENU_VISIBLE_CHANGED,t),t()}setupSortableClass(){const t=()=>{this.comp.addOrRemoveCssClass("ag-header-cell-sortable",!!this.sortable)};t(),this.addRefreshFunction(t),this.addManagedListener(this.eventService,Nt.EVENT_SORT_CHANGED,this.refreshAriaSort.bind(this))}setupFilterClass(){const t=()=>{const e=this.column.isFilterActive();this.comp.addOrRemoveCssClass("ag-header-cell-filtered",e),this.refreshAria()};this.addManagedListener(this.column,Nt.EVENT_FILTER_ACTIVE_CHANGED,t),t()}setupWrapTextClass(){const t=()=>{const e=!!this.column.getColDef().wrapHeaderText;this.comp.addOrRemoveCssClass("ag-header-cell-wrap-text",e)};t(),this.addRefreshFunction(t)}onDisplayedColumnsChanged(){super.onDisplayedColumnsChanged(),this.isAlive()&&this.onHeaderHeightChanged()}onHeaderHeightChanged(){this.refreshSpanHeaderHeight()}refreshSpanHeaderHeight(){const{eGui:t,column:e,comp:i,beans:s}=this;if(!e.isSpanHeaderHeight()){t.style.removeProperty("top"),t.style.removeProperty("height"),i.addOrRemoveCssClass("ag-header-span-height",!1),i.addOrRemoveCssClass("ag-header-span-total",!1);return}const{numberOfParents:r,isSpanningTotal:n}=this.column.getColumnGroupPaddingInfo();i.addOrRemoveCssClass("ag-header-span-height",r>0);const{columnModel:o}=s,a=o.getColumnHeaderRowHeight();if(r===0){i.addOrRemoveCssClass("ag-header-span-total",!1),t.style.setProperty("top","0px"),t.style.setProperty("height",`${a}px`);return}i.addOrRemoveCssClass("ag-header-span-total",n);const c=o.isPivotMode()?o.getPivotGroupHeaderHeight():o.getGroupHeaderHeight(),u=r*c;t.style.setProperty("top",`${-u}px`),t.style.setProperty("height",`${a+u}px`)}setupAutoHeight(t){const{columnModel:e,resizeObserverService:i}=this.beans,s=c=>{if(!this.isAlive())return;const{paddingTop:u,paddingBottom:d,borderBottomWidth:h,borderTopWidth:p}=Ju(this.getGui()),f=u+d+h+p,g=t.offsetHeight+f;if(c<5){const y=this.beans.gos.getDocument(),v=!y||!y.contains(t),C=g==0;if(v||C){window.setTimeout(()=>s(c+1),0);return}}e.setColumnHeaderHeight(this.column,g)};let r=!1,n;const o=()=>{const c=this.column.isAutoHeaderHeight();c&&!r&&a(),!c&&r&&l()},a=()=>{r=!0,s(0),this.comp.addOrRemoveCssClass("ag-header-cell-auto-height",!0),n=i.observeResize(t,()=>s(0))},l=()=>{r=!1,n&&n(),this.comp.addOrRemoveCssClass("ag-header-cell-auto-height",!1),n=void 0};o(),this.addDestroyFunc(()=>l()),this.addManagedListener(this.column,Nt.EVENT_WIDTH_CHANGED,()=>r&&s(0)),this.addManagedListener(this.eventService,Nt.EVENT_SORT_CHANGED,()=>{r&&window.setTimeout(()=>s(0))}),this.addRefreshFunction(o)}refreshAriaSort(){if(this.sortable){const t=this.localeService.getLocaleTextFunc(),e=this.beans.sortController.getDisplaySortForColumn(this.column)||null;this.comp.setAriaSort(Z3(e)),this.setAriaDescriptionProperty("sort",t("ariaSortableColumn","Press ENTER to sort"))}else this.comp.setAriaSort(),this.setAriaDescriptionProperty("sort",null)}refreshAriaMenu(){if(this.menuEnabled){const t=this.localeService.getLocaleTextFunc();this.setAriaDescriptionProperty("menu",t("ariaMenuColumn","Press ALT DOWN to open column menu"))}else this.setAriaDescriptionProperty("menu",null)}refreshAriaFilterButton(){if(this.openFilterEnabled&&!this.menuService.isLegacyMenuEnabled()){const t=this.localeService.getLocaleTextFunc();this.setAriaDescriptionProperty("filterButton",t("ariaFilterColumn","Press CTRL ENTER to open filter"))}else this.setAriaDescriptionProperty("filterButton",null)}refreshAriaFiltered(){const t=this.localeService.getLocaleTextFunc();this.column.isFilterActive()?this.setAriaDescriptionProperty("filter",t("ariaColumnFiltered","Column Filtered")):this.setAriaDescriptionProperty("filter",null)}setAriaDescriptionProperty(t,e){e!=null?this.ariaDescriptionProperties.set(t,e):this.ariaDescriptionProperties.delete(t)}announceAriaDescription(){if(!this.eGui.contains(this.beans.gos.getActiveDomElement()))return;const t=Array.from(this.ariaDescriptionProperties.keys()).sort((e,i)=>e==="filter"?-1:i.charCodeAt(0)-e.charCodeAt(0)).map(e=>this.ariaDescriptionProperties.get(e)).join(". ");this.beans.ariaAnnouncementService.announceValue(t)}refreshAria(){this.refreshAriaSort(),this.refreshAriaMenu(),this.refreshAriaFilterButton(),this.refreshAriaFiltered()}addColumnHoverListener(){const t=()=>{if(!this.gos.get("columnHoverHighlight"))return;const e=this.beans.columnHoverService.isHovered(this.column);this.comp.addOrRemoveCssClass("ag-column-hover",e)};this.addManagedListener(this.eventService,K.EVENT_COLUMN_HOVER_CHANGED,t),t()}getColId(){return this.column.getColId()}addActiveHeaderMouseListeners(){const t=s=>this.handleMouseOverChange(s.type==="mouseenter"),e=()=>this.dispatchColumnMouseEvent(K.EVENT_COLUMN_HEADER_CLICKED,this.column),i=s=>this.handleContextMenuMouseEvent(s,void 0,this.column);this.addManagedListener(this.getGui(),"mouseenter",t),this.addManagedListener(this.getGui(),"mouseleave",t),this.addManagedListener(this.getGui(),"click",e),this.addManagedListener(this.getGui(),"contextmenu",i)}handleMouseOverChange(t){this.setActiveHeader(t);const i={type:t?K.EVENT_COLUMN_HEADER_MOUSE_OVER:K.EVENT_COLUMN_HEADER_MOUSE_LEAVE,column:this.column};this.eventService.dispatchEvent(i)}setActiveHeader(t){this.comp.addOrRemoveCssClass("ag-header-active",t)}getAnchorElementForMenu(t){const e=this.comp.getUserCompInstance();return e instanceof I_?e.getAnchorElementForMenu(t):this.getGui()}destroy(){super.destroy(),this.refreshFunctions=null,this.selectAllFeature=null,this.dragSourceElement=null,this.userCompDetails=null,this.userHeaderClasses=null,this.ariaDescriptionProperties=null}},NC=class extends ye{constructor(t,e,i,s){super(),this.eResize=e,this.comp=t,this.pinned=i,this.columnGroup=s}postConstruct(){if(!this.columnGroup.isResizable()){this.comp.setResizableDisplayed(!1);return}const t=this.horizontalResizeService.addResizeBar({eResizeBar:this.eResize,onResizeStart:this.onResizeStart.bind(this),onResizing:this.onResizing.bind(this,!1),onResizeEnd:this.onResizing.bind(this,!0)});if(this.addDestroyFunc(t),!this.gos.get("suppressAutoSize")){const e=this.gos.get("skipHeaderOnAutoSize");this.eResize.addEventListener("dblclick",()=>{const i=[];this.columnGroup.getDisplayedLeafColumns().forEach(r=>{r.getColDef().suppressAutoSize||i.push(r.getColId())}),i.length>0&&this.columnModel.autoSizeColumns({columns:i,skipHeader:e,stopAtGroup:this.columnGroup,source:"uiColumnResized"}),this.resizeLeafColumnsToFit("uiColumnResized")})}}onResizeStart(t){const e=this.getInitialValues(t);this.storeLocalValues(e),this.toggleColumnResizing(!0)}onResizing(t,e,i="uiColumnResized"){const s=this.normaliseDragChange(e),r=this.resizeStartWidth+s;this.resizeColumnsFromLocalValues(r,i,t)}getInitialValues(t){const e=this.getColumnsToResize(),i=this.getInitialSizeOfColumns(e),s=this.getSizeRatiosOfColumns(e,i),r={columnsToResize:e,resizeStartWidth:i,resizeRatios:s};let n=null;if(t&&(n=this.columnModel.getDisplayedGroupAtDirection(this.columnGroup,"After")),n){const o=n.getDisplayedLeafColumns(),a=r.groupAfterColumns=o.filter(c=>c.isResizable()),l=r.groupAfterStartWidth=this.getInitialSizeOfColumns(a);r.groupAfterRatios=this.getSizeRatiosOfColumns(a,l)}else r.groupAfterColumns=void 0,r.groupAfterStartWidth=void 0,r.groupAfterRatios=void 0;return r}storeLocalValues(t){const{columnsToResize:e,resizeStartWidth:i,resizeRatios:s,groupAfterColumns:r,groupAfterStartWidth:n,groupAfterRatios:o}=t;this.resizeCols=e,this.resizeStartWidth=i,this.resizeRatios=s,this.resizeTakeFromCols=r,this.resizeTakeFromStartWidth=n,this.resizeTakeFromRatios=o}clearLocalValues(){this.resizeCols=void 0,this.resizeRatios=void 0,this.resizeTakeFromCols=void 0,this.resizeTakeFromRatios=void 0}resizeLeafColumnsToFit(t){const e=this.autoWidthCalculator.getPreferredWidthForColumnGroup(this.columnGroup),i=this.getInitialValues();e>i.resizeStartWidth&&this.resizeColumns(i,e,t,!0)}resizeColumnsFromLocalValues(t,e,i=!0){var s,r,n;if(!this.resizeCols||!this.resizeRatios)return;const o={columnsToResize:this.resizeCols,resizeStartWidth:this.resizeStartWidth,resizeRatios:this.resizeRatios,groupAfterColumns:(s=this.resizeTakeFromCols)!=null?s:void 0,groupAfterStartWidth:(r=this.resizeTakeFromStartWidth)!=null?r:void 0,groupAfterRatios:(n=this.resizeTakeFromRatios)!=null?n:void 0};this.resizeColumns(o,t,e,i)}resizeColumns(t,e,i,s=!0){const{columnsToResize:r,resizeStartWidth:n,resizeRatios:o,groupAfterColumns:a,groupAfterStartWidth:l,groupAfterRatios:c}=t,u=[];if(u.push({columns:r,ratios:o,width:e}),a){const d=e-n;u.push({columns:a,ratios:c,width:l-d})}this.columnModel.resizeColumnSets({resizeSets:u,finished:s,source:i}),s&&this.toggleColumnResizing(!1)}toggleColumnResizing(t){this.comp.addOrRemoveCssClass("ag-column-resizing",t)}getColumnsToResize(){return this.columnGroup.getDisplayedLeafColumns().filter(e=>e.isResizable())}getInitialSizeOfColumns(t){return t.reduce((e,i)=>e+i.getActualWidth(),0)}getSizeRatiosOfColumns(t,e){return t.map(i=>i.getActualWidth()/e)}normaliseDragChange(t){let e=t;return this.gos.get("enableRtl")?this.pinned!=="left"&&(e*=-1):this.pinned==="right"&&(e*=-1),e}destroy(){super.destroy(),this.clearLocalValues()}};z([W("horizontalResizeService")],NC.prototype,"horizontalResizeService",2);z([W("autoWidthCalculator")],NC.prototype,"autoWidthCalculator",2);z([W("columnModel")],NC.prototype,"columnModel",2);z([de],NC.prototype,"postConstruct",1);var K4=class extends ye{constructor(t,e){super(),this.removeChildListenersFuncs=[],this.columnGroup=e,this.comp=t}postConstruct(){this.addListenersToChildrenColumns(),this.addManagedListener(this.columnGroup,Fs.EVENT_DISPLAYED_CHILDREN_CHANGED,this.onDisplayedChildrenChanged.bind(this)),this.onWidthChanged(),this.addDestroyFunc(this.removeListenersOnChildrenColumns.bind(this))}addListenersToChildrenColumns(){this.removeListenersOnChildrenColumns();const t=this.onWidthChanged.bind(this);this.columnGroup.getLeafColumns().forEach(e=>{e.addEventListener("widthChanged",t),e.addEventListener("visibleChanged",t),this.removeChildListenersFuncs.push(()=>{e.removeEventListener("widthChanged",t),e.removeEventListener("visibleChanged",t)})})}removeListenersOnChildrenColumns(){this.removeChildListenersFuncs.forEach(t=>t()),this.removeChildListenersFuncs=[]}onDisplayedChildrenChanged(){this.addListenersToChildrenColumns(),this.onWidthChanged()}onWidthChanged(){const t=this.columnGroup.getActualWidth();this.comp.setWidth(`${t}px`),this.comp.addOrRemoveCssClass("ag-hidden",t===0)}};z([de],K4.prototype,"postConstruct",1);var Y4=class extends FC{constructor(t,e,i){super(t,e,i),this.onSuppressColMoveChange=()=>{if(!this.isAlive()||this.isSuppressMoving())this.removeDragSource();else if(!this.dragSource){const s=this.getGui();this.setDragSource(s)}},this.column=t}setComp(t,e,i){this.comp=t,this.setGui(e),this.displayName=this.beans.columnModel.getDisplayNameForColumnGroup(this.column,"header"),this.addClasses(),this.setupMovingCss(),this.setupExpandable(),this.setupTooltip(),this.addDestroyFunc(()=>{this.tooltipFeature&&(this.tooltipFeature=this.destroyBean(this.tooltipFeature))}),this.setupUserComp(),this.addHeaderMouseListeners();const s=this.getParentRowCtrl().getPinned(),r=this.column.getProvidedColumnGroup().getLeafColumns();this.createManagedBean(new kC(r,e)),this.createManagedBean(new LC(this.column,e,this.beans)),this.createManagedBean(new K4(t,this.column)),this.resizeFeature=this.createManagedBean(new NC(t,i,s,this.column)),this.createManagedBean(new ml(e,{shouldStopEventPropagation:this.shouldStopEventPropagation.bind(this),onTabKeyDown:()=>{},handleKeyDown:this.handleKeyDown.bind(this),onFocusIn:this.onFocusIn.bind(this)})),this.addManagedPropertyListener(K.EVENT_SUPPRESS_COLUMN_MOVE_CHANGED,this.onSuppressColMoveChange),this.addResizeAndMoveKeyboardListeners()}resizeHeader(t,e){if(!this.resizeFeature)return;const i=this.resizeFeature.getInitialValues(e);this.resizeFeature.resizeColumns(i,i.resizeStartWidth+t,"uiColumnResized",!0)}moveHeader(t){const{beans:e,eGui:i,column:s,gos:r,ctrlsService:n}=this,o=r.get("enableRtl"),a=t===0,l=this.getPinned(),c=i.getBoundingClientRect(),u=c.left,d=c.width,h=uh.normaliseX(a!==o?u-20:u+d+20,l,!0,r,n),p=s.getGroupId(),f=this.focusService.getFocusedHeader();uh.attemptMoveColumns({allMovingColumns:this.column.getLeafColumns(),isFromHeader:!0,hDirection:t,xPosition:h,pinned:l,fromEnter:!1,fakeEvent:!1,gos:r,columnModel:e.columnModel});const m=s.getDisplayedLeafColumns(),g=a?m[0]:di(m);this.ctrlsService.getGridBodyCtrl().getScrollFeature().ensureColumnVisible(g,"auto"),!this.isAlive()&&f&&this.restoreFocus(p,s,f)}restoreFocus(t,e,i){const s=e.getLeafColumns();if(!s.length)return;const r=s[0].getParent();if(!r)return;const n=this.findGroupWidthId(r,t);n&&this.focusService.focusHeaderPosition({headerPosition:$i(it({},i),{column:n})})}findGroupWidthId(t,e){for(;t;){if(t.getGroupId()===e)return t;t=t.getParent()}return null}resizeLeafColumnsToFit(t){this.resizeFeature&&this.resizeFeature.resizeLeafColumnsToFit(t)}setupUserComp(){const t=this.gos.addGridCommonParams({displayName:this.displayName,columnGroup:this.column,setExpanded:i=>{this.beans.columnModel.setColumnGroupOpened(this.column.getProvidedColumnGroup(),i,"gridInitializing")},setTooltip:(i,s)=>{this.setupTooltip(i,s)}}),e=this.userComponentFactory.getHeaderGroupCompDetails(t);this.comp.setUserCompDetails(e)}addHeaderMouseListeners(){const t=s=>this.handleMouseOverChange(s.type==="mouseenter"),e=()=>this.dispatchColumnMouseEvent(K.EVENT_COLUMN_HEADER_CLICKED,this.column.getProvidedColumnGroup()),i=s=>this.handleContextMenuMouseEvent(s,void 0,this.column.getProvidedColumnGroup());this.addManagedListener(this.getGui(),"mouseenter",t),this.addManagedListener(this.getGui(),"mouseleave",t),this.addManagedListener(this.getGui(),"click",e),this.addManagedListener(this.getGui(),"contextmenu",i)}handleMouseOverChange(t){const i={type:t?K.EVENT_COLUMN_HEADER_MOUSE_OVER:K.EVENT_COLUMN_HEADER_MOUSE_LEAVE,column:this.column.getProvidedColumnGroup()};this.eventService.dispatchEvent(i)}setupTooltip(t,e){this.tooltipFeature&&(this.tooltipFeature=this.destroyBean(this.tooltipFeature));const i=this.column.getColGroupDef(),s=this.gos.get("tooltipShowMode")==="whenTruncated",r=this.eGui;!e&&s&&!(i!=null&&i.headerGroupComponent)&&(e=()=>{const o=r.querySelector(".ag-header-group-text");return o?o.scrollWidth>o.clientWidth:!0});const n={getColumn:()=>this.column,getGui:()=>r,getLocation:()=>"headerGroup",getTooltipValue:()=>t??(i&&i.headerTooltip),shouldDisplayTooltip:e};i&&(n.getColDef=()=>i),this.createBean(new hr(n))}setupExpandable(){const t=this.column.getProvidedColumnGroup();this.refreshExpanded(),this.addManagedListener(t,bi.EVENT_EXPANDABLE_CHANGED,this.refreshExpanded.bind(this)),this.addManagedListener(t,bi.EVENT_EXPANDED_CHANGED,this.refreshExpanded.bind(this))}refreshExpanded(){const t=this.column;this.expandable=t.isExpandable();const e=t.isExpanded();this.expandable?this.comp.setAriaExpanded(e?"true":"false"):this.comp.setAriaExpanded(void 0)}getColId(){return this.column.getUniqueId()}addClasses(){const t=this.column.getColGroupDef(),e=td.getHeaderClassesFromColDef(t,this.gos,null,this.column);this.column.isPadding()?(e.push("ag-header-group-cell-no-group"),this.column.getLeafColumns().every(s=>s.isSpanHeaderHeight())&&e.push("ag-header-span-height")):e.push("ag-header-group-cell-with-group"),e.forEach(i=>this.comp.addOrRemoveCssClass(i,!0))}setupMovingCss(){const e=this.column.getProvidedColumnGroup().getLeafColumns(),i=()=>this.comp.addOrRemoveCssClass("ag-header-cell-moving",this.column.isMoving());e.forEach(s=>{this.addManagedListener(s,Nt.EVENT_MOVING_CHANGED,i)}),i()}onFocusIn(t){if(!this.eGui.contains(t.relatedTarget)){const e=this.getRowIndex();this.beans.focusService.setFocusedHeader(e,this.column)}}handleKeyDown(t){super.handleKeyDown(t);const e=this.getWrapperHasFocus();if(!(!this.expandable||!e)&&t.key===ce.ENTER){const i=this.column,s=!i.isExpanded();this.beans.columnModel.setColumnGroupOpened(i.getProvidedColumnGroup(),s,"uiColumnExpanded")}}setDragSource(t){if(!this.isAlive()||this.isSuppressMoving()||(this.removeDragSource(),!t))return;const{beans:e,column:i,displayName:s,gos:r,dragAndDropService:n}=this,{columnModel:o}=e,a=i.getProvidedColumnGroup().getLeafColumns();let l=!r.get("suppressDragLeaveHidesColumns");const c=this.dragSource={type:1,eElement:t,getDefaultIconName:()=>l?st.ICON_HIDE:st.ICON_NOT_ALLOWED,dragItemName:s,getDragItem:()=>this.getDragItemForGroup(i),onDragStarted:()=>{l=!r.get("suppressDragLeaveHidesColumns"),a.forEach(u=>u.setMoving(!0,"uiColumnDragged"))},onDragStopped:()=>a.forEach(u=>u.setMoving(!1,"uiColumnDragged")),onGridEnter:u=>{var d;if(l){const h=((d=u==null?void 0:u.columns)==null?void 0:d.filter(p=>!p.getColDef().lockVisible))||[];o.setColumnsVisible(h,!0,"uiColumnMoved")}},onGridExit:u=>{var d;if(l){const h=((d=u==null?void 0:u.columns)==null?void 0:d.filter(p=>!p.getColDef().lockVisible))||[];o.setColumnsVisible(h,!1,"uiColumnMoved")}}};n.addDragSource(c,!0)}getDragItemForGroup(t){const e=t.getProvidedColumnGroup().getLeafColumns(),i={};e.forEach(r=>i[r.getId()]=r.isVisible());const s=[];return this.beans.columnModel.getAllDisplayedColumns().forEach(r=>{e.indexOf(r)>=0&&(s.push(r),vn(e,r))}),e.forEach(r=>s.push(r)),{columns:s,visibleState:i}}isSuppressMoving(){let t=!1;return this.column.getLeafColumns().forEach(i=>{(i.getColDef().suppressMovable||i.getColDef().lockPosition)&&(t=!0)}),t||this.gos.get("suppressMovableColumns")}},DY=0,Ff=class extends ye{constructor(t,e,i){super(),this.instanceId=DY++,this.rowIndex=t,this.pinned=e,this.type=i;const s=i=="group"?"ag-header-row-column-group":i=="filter"?"ag-header-row-column-filter":"ag-header-row-column";this.headerRowClass=`ag-header-row ${s}`}postConstruct(){this.isPrintLayout=this.gos.isDomLayout("print"),this.isEnsureDomOrder=this.gos.get("ensureDomOrder")}getInstanceId(){return this.instanceId}setComp(t,e=!0){this.comp=t,e&&(this.onRowHeightChanged(),this.onVirtualColumnsChanged()),this.setWidth(),this.addEventListeners()}getHeaderRowClass(){return this.headerRowClass}getAriaRowIndex(){return this.rowIndex+1}addEventListeners(){this.addManagedListener(this.eventService,K.EVENT_COLUMN_RESIZED,this.onColumnResized.bind(this)),this.addManagedListener(this.eventService,K.EVENT_DISPLAYED_COLUMNS_CHANGED,this.onDisplayedColumnsChanged.bind(this)),this.addManagedListener(this.eventService,K.EVENT_VIRTUAL_COLUMNS_CHANGED,t=>this.onVirtualColumnsChanged(t.afterScroll)),this.addManagedListener(this.eventService,K.EVENT_COLUMN_HEADER_HEIGHT_CHANGED,this.onRowHeightChanged.bind(this)),this.addManagedListener(this.eventService,K.EVENT_GRID_STYLES_CHANGED,this.onRowHeightChanged.bind(this)),this.addManagedListener(this.eventService,K.EVENT_ADVANCED_FILTER_ENABLED_CHANGED,this.onRowHeightChanged.bind(this)),this.addManagedPropertyListener("domLayout",this.onDisplayedColumnsChanged.bind(this)),this.addManagedPropertyListener("ensureDomOrder",t=>this.isEnsureDomOrder=t.currentValue),this.addManagedPropertyListener("headerHeight",this.onRowHeightChanged.bind(this)),this.addManagedPropertyListener("pivotHeaderHeight",this.onRowHeightChanged.bind(this)),this.addManagedPropertyListener("groupHeaderHeight",this.onRowHeightChanged.bind(this)),this.addManagedPropertyListener("pivotGroupHeaderHeight",this.onRowHeightChanged.bind(this)),this.addManagedPropertyListener("floatingFiltersHeight",this.onRowHeightChanged.bind(this))}getHeaderCellCtrl(t){if(this.headerCellCtrls)return ah(this.headerCellCtrls).find(e=>e.getColumnGroupChild()===t)}onDisplayedColumnsChanged(){this.isPrintLayout=this.gos.isDomLayout("print"),this.onVirtualColumnsChanged(),this.setWidth(),this.onRowHeightChanged()}getType(){return this.type}onColumnResized(){this.setWidth()}setWidth(){const t=this.getWidthForRow();this.comp.setWidth(`${t}px`)}getWidthForRow(){const{columnModel:t}=this.beans;return this.isPrintLayout?this.pinned!=null?0:t.getContainerWidth("right")+t.getContainerWidth("left")+t.getContainerWidth(null):t.getContainerWidth(this.pinned)}onRowHeightChanged(){var{topOffset:t,rowHeight:e}=this.getTopAndHeight();this.comp.setTop(t+"px"),this.comp.setHeight(e+"px")}getTopAndHeight(){const{columnModel:t,filterManager:e}=this.beans;let i=t.getHeaderRowCount();const s=[];let r=0;e.hasFloatingFilters()&&(i++,r=1);const n=t.getColumnGroupHeaderRowHeight(),o=t.getColumnHeaderRowHeight(),a=1+r,l=i-a;for(let d=0;d<l;d++)s.push(n);s.push(o);for(let d=0;d<r;d++)s.push(t.getFloatingFiltersHeight());let c=0;for(let d=0;d<this.rowIndex;d++)c+=s[d];const u=s[this.rowIndex];return{topOffset:c,rowHeight:u}}getPinned(){return this.pinned}getRowIndex(){return this.rowIndex}onVirtualColumnsChanged(t=!1){const e=this.getHeaderCtrls(),i=this.isEnsureDomOrder||this.isPrintLayout;this.comp.setHeaderCtrls(e,i,t)}getHeaderCtrls(){const t=this.headerCellCtrls;this.headerCellCtrls=new Map;const e=this.getColumnsInViewport();for(const r of e)this.recycleAndCreateHeaderCtrls(r,t);const i=r=>{const{focusService:n,columnModel:o}=this.beans;return n.isHeaderWrapperFocused(r)?o.isDisplayed(r.getColumnGroupChild()):!1};if(t)for(const[r,n]of t)i(n)?this.headerCellCtrls.set(r,n):this.destroyBean(n);return Array.from(this.headerCellCtrls.values())}recycleAndCreateHeaderCtrls(t,e){if(!this.headerCellCtrls||t.isEmptyGroup())return;const i=t.getUniqueId();let s;if(e&&(s=e.get(i),e.delete(i)),s&&s.getColumnGroupChild()!=t&&(this.destroyBean(s),s=void 0),s==null)switch(this.type){case"filter":s=this.createBean(new z4(t,this.beans,this));break;case"group":s=this.createBean(new Y4(t,this.beans,this));break;default:s=this.createBean(new $4(t,this.beans,this));break}this.headerCellCtrls.set(i,s)}getColumnsInViewport(){return this.isPrintLayout?this.getColumnsInViewportPrintLayout():this.getColumnsInViewportNormalLayout()}getColumnsInViewportPrintLayout(){if(this.pinned!=null)return[];let t=[];const e=this.getActualDepth(),{columnModel:i}=this.beans;return["left",null,"right"].forEach(s=>{const r=i.getVirtualHeaderGroupRow(s,e);t=t.concat(r)}),t}getActualDepth(){return this.type=="filter"?this.rowIndex-1:this.rowIndex}getColumnsInViewportNormalLayout(){return this.beans.columnModel.getVirtualHeaderGroupRow(this.pinned,this.getActualDepth())}focusHeader(t,e){if(!this.headerCellCtrls)return!1;const s=Array.from(this.headerCellCtrls.values()).find(r=>r.getColumnGroupChild()==t);return s?s.focus(e):!1}destroy(){this.headerCellCtrls&&this.headerCellCtrls.forEach(t=>{this.destroyBean(t)}),this.headerCellCtrls=void 0,super.destroy()}};z([W("beans")],Ff.prototype,"beans",2);z([de],Ff.prototype,"postConstruct",1);var id=class extends ye{constructor(t){super(),this.hidden=!1,this.includeFloatingFilter=!1,this.groupsRowCtrls=[],this.pinned=t}setComp(t,e){this.comp=t,this.eViewport=e,this.setupCenterWidth(),this.setupPinnedWidth(),this.setupDragAndDrop(this.eViewport),this.addManagedListener(this.eventService,K.EVENT_GRID_COLUMNS_CHANGED,this.onGridColumnsChanged.bind(this)),this.addManagedListener(this.eventService,K.EVENT_DISPLAYED_COLUMNS_CHANGED,this.onDisplayedColumnsChanged.bind(this)),this.addManagedListener(this.eventService,K.EVENT_ADVANCED_FILTER_ENABLED_CHANGED,this.onDisplayedColumnsChanged.bind(this)),this.ctrlsService.registerHeaderContainer(this,this.pinned),this.columnModel.isReady()&&this.refresh()}setupDragAndDrop(t){const e=new Jh(this.pinned,t);this.createManagedBean(e)}refresh(t=!1){const e=new pr,i=this.focusService.getFocusHeaderToUseAfterRefresh(),s=()=>{const a=this.columnModel.getHeaderRowCount()-1;this.groupsRowCtrls=this.destroyBeans(this.groupsRowCtrls);for(let l=0;l<a;l++){const c=this.createBean(new Ff(e.next(),this.pinned,"group"));this.groupsRowCtrls.push(c)}},r=()=>{const a=e.next(),l=!this.hidden&&(this.columnsRowCtrl==null||!t||this.columnsRowCtrl.getRowIndex()!==a);(l||this.hidden)&&(this.columnsRowCtrl=this.destroyBean(this.columnsRowCtrl)),l&&(this.columnsRowCtrl=this.createBean(new Ff(a,this.pinned,"column")))},n=()=>{this.includeFloatingFilter=this.filterManager.hasFloatingFilters()&&!this.hidden;const a=()=>{this.filtersRowCtrl=this.destroyBean(this.filtersRowCtrl)};if(!this.includeFloatingFilter){a();return}const l=e.next();if(this.filtersRowCtrl){const c=this.filtersRowCtrl.getRowIndex()!==l;(!t||c)&&a()}this.filtersRowCtrl||(this.filtersRowCtrl=this.createBean(new Ff(l,this.pinned,"filter")))};s(),r(),n();const o=this.getAllCtrls();this.comp.setCtrls(o),this.restoreFocusOnHeader(i)}restoreFocusOnHeader(t){t==null||t.column.getPinned()!=this.pinned||this.focusService.focusHeaderPosition({headerPosition:t})}getAllCtrls(){const t=[...this.groupsRowCtrls];return this.columnsRowCtrl&&t.push(this.columnsRowCtrl),this.filtersRowCtrl&&t.push(this.filtersRowCtrl),t}onGridColumnsChanged(){this.refresh(!0)}onDisplayedColumnsChanged(){const t=this.filterManager.hasFloatingFilters()&&!this.hidden;this.includeFloatingFilter!==t&&this.refresh(!0)}setupCenterWidth(){this.pinned==null&&this.createManagedBean(new Vg(t=>this.comp.setCenterWidth(`${t}px`),!0))}setHorizontalScroll(t){this.comp.setViewportScrollLeft(t)}setupPinnedWidth(){if(this.pinned==null)return;const t=this.pinned==="left",e=this.pinned==="right";this.hidden=!0;const i=()=>{const s=t?this.pinnedWidthService.getPinnedLeftWidth():this.pinnedWidthService.getPinnedRightWidth();if(s==null)return;const r=s==0,n=this.hidden!==r,o=this.gos.get("enableRtl"),a=this.gos.getScrollbarWidth(),c=this.scrollVisibleService.isVerticalScrollShowing()&&(o&&t||!o&&e)?s+a:s;this.comp.setPinnedContainerWidth(`${c}px`),this.comp.setDisplayed(!r),n&&(this.hidden=r,this.refresh())};this.addManagedListener(this.eventService,K.EVENT_LEFT_PINNED_WIDTH_CHANGED,i),this.addManagedListener(this.eventService,K.EVENT_RIGHT_PINNED_WIDTH_CHANGED,i),this.addManagedListener(this.eventService,K.EVENT_SCROLL_VISIBILITY_CHANGED,i),this.addManagedListener(this.eventService,K.EVENT_SCROLLBAR_WIDTH_CHANGED,i)}getHeaderCtrlForColumn(t){if(t instanceof Nt)return this.columnsRowCtrl?this.columnsRowCtrl.getHeaderCellCtrl(t):void 0;if(this.groupsRowCtrls.length!==0)for(let e=0;e<this.groupsRowCtrls.length;e++){const i=this.groupsRowCtrls[e].getHeaderCellCtrl(t);if(i)return i}}getHtmlElementForColumnHeader(t){const e=this.getHeaderCtrlForColumn(t);return e?e.getGui():null}getRowType(t){const i=this.getAllCtrls()[t];return i?i.getType():void 0}focusHeader(t,e,i){const r=this.getAllCtrls()[t];return r?r.focusHeader(e,i):!1}getViewport(){return this.eViewport}getRowCount(){return this.groupsRowCtrls.length+(this.columnsRowCtrl?1:0)+(this.filtersRowCtrl?1:0)}destroy(){this.filtersRowCtrl&&(this.filtersRowCtrl=this.destroyBean(this.filtersRowCtrl)),this.columnsRowCtrl&&(this.columnsRowCtrl=this.destroyBean(this.columnsRowCtrl)),this.groupsRowCtrls&&this.groupsRowCtrls.length&&(this.groupsRowCtrls=this.destroyBeans(this.groupsRowCtrls)),super.destroy()}};z([W("ctrlsService")],id.prototype,"ctrlsService",2);z([W("scrollVisibleService")],id.prototype,"scrollVisibleService",2);z([W("pinnedWidthService")],id.prototype,"pinnedWidthService",2);z([W("columnModel")],id.prototype,"columnModel",2);z([W("focusService")],id.prototype,"focusService",2);z([W("filterManager")],id.prototype,"filterManager",2);var Qh=class Wb extends Te{constructor(e){super(),this.headerRowComps={},this.rowCompsList=[],this.pinned=e}init(){this.selectAndSetTemplate();const e={setDisplayed:s=>this.setDisplayed(s),setCtrls:s=>this.setCtrls(s),setCenterWidth:s=>this.eCenterContainer.style.width=s,setViewportScrollLeft:s=>this.getGui().scrollLeft=s,setPinnedContainerWidth:s=>{const r=this.getGui();r.style.width=s,r.style.maxWidth=s,r.style.minWidth=s}};this.createManagedBean(new id(this.pinned)).setComp(e,this.getGui())}selectAndSetTemplate(){const e=this.pinned=="left",i=this.pinned=="right",s=e?Wb.PINNED_LEFT_TEMPLATE:i?Wb.PINNED_RIGHT_TEMPLATE:Wb.CENTER_TEMPLATE;this.setTemplate(s),this.eRowContainer=this.eCenterContainer?this.eCenterContainer:this.getGui()}destroyRowComps(){this.setCtrls([])}destroyRowComp(e){this.destroyBean(e),this.eRowContainer.removeChild(e.getGui())}setCtrls(e){const i=this.headerRowComps;this.headerRowComps={},this.rowCompsList=[];let s;const r=n=>{const o=n.getGui();o.parentElement!=this.eRowContainer&&this.eRowContainer.appendChild(o),s&&vM(this.eRowContainer,o,s),s=o};e.forEach(n=>{const o=n.getInstanceId(),a=i[o];delete i[o];const l=a||this.createBean(new Rx(n));this.headerRowComps[o]=l,this.rowCompsList.push(l),r(l)}),_u(i).forEach(n=>this.destroyRowComp(n))}};Qh.PINNED_LEFT_TEMPLATE='<div class="ag-pinned-left-header" role="rowgroup"></div>';Qh.PINNED_RIGHT_TEMPLATE='<div class="ag-pinned-right-header" role="rowgroup"></div>';Qh.CENTER_TEMPLATE=`<div class="ag-header-viewport" role="presentation">
            <div class="ag-header-container" ref="eCenterContainer" role="rowgroup"></div>
        </div>`;z([pe("eCenterContainer")],Qh.prototype,"eCenterContainer",2);z([de],Qh.prototype,"init",1);z([Hi],Qh.prototype,"destroyRowComps",1);var zb=Qh,q4=(t=>(t[t.UP=0]="UP",t[t.DOWN=1]="DOWN",t[t.LEFT=2]="LEFT",t[t.RIGHT=3]="RIGHT",t))(q4||{}),Ru=class extends ye{constructor(){super(...arguments),this.currentHeaderRowWithoutSpan=-1}postConstruct(){this.ctrlsService.whenReady(e=>{this.gridBodyCon=e.gridBodyCtrl});const t=this.gos.getDocument();this.addManagedListener(t,"mousedown",()=>this.setCurrentHeaderRowWithoutSpan(-1))}getHeaderRowCount(){const t=this.ctrlsService.getHeaderRowContainerCtrl();return t?t.getRowCount():0}navigateVertically(t,e,i){if(e||(e=this.focusService.getFocusedHeader()),!e)return!1;const{headerRowIndex:s,column:r}=e,n=this.getHeaderRowCount(),o=t===0;let{headerRowIndex:a,column:l,headerRowIndexWithoutSpan:c}=o?this.headerPositionUtils.getColumnVisibleParent(r,s):this.headerPositionUtils.getColumnVisibleChild(r,s),u=!1;return a<0&&(a=0,l=r,u=!0),a>=n?(a=-1,this.setCurrentHeaderRowWithoutSpan(-1)):c!==void 0&&(this.currentHeaderRowWithoutSpan=c),!u&&!l?!1:this.focusService.focusHeaderPosition({headerPosition:{headerRowIndex:a,column:l},allowUserOverride:!0,event:i})}setCurrentHeaderRowWithoutSpan(t){this.currentHeaderRowWithoutSpan=t}navigateHorizontally(t,e=!1,i){const s=this.focusService.getFocusedHeader(),r=t===2,n=this.gos.get("enableRtl");let o,a;if(this.currentHeaderRowWithoutSpan!==-1?s.headerRowIndex=this.currentHeaderRowWithoutSpan:this.currentHeaderRowWithoutSpan=s.headerRowIndex,r!==n?(a="Before",o=this.headerPositionUtils.findHeader(s,a)):(a="After",o=this.headerPositionUtils.findHeader(s,a)),o||!e)return this.focusService.focusHeaderPosition({headerPosition:o,direction:a,fromTab:e,allowUserOverride:!0,event:i});if(e){const l=this.gos.getCallback("tabToNextHeader");if(l)return this.focusService.focusHeaderPositionFromUserFunc({userFunc:l,headerPosition:o,direction:a})}return this.focusNextHeaderRow(s,a,i)}focusNextHeaderRow(t,e,i){const s=t.headerRowIndex;let r=null,n;if(e==="Before"?s>0&&(n=s-1,this.currentHeaderRowWithoutSpan-=1,r=this.headerPositionUtils.findColAtEdgeForHeaderRow(n,"end")):(n=s+1,this.currentHeaderRowWithoutSpan<this.getHeaderRowCount()?this.currentHeaderRowWithoutSpan+=1:this.setCurrentHeaderRowWithoutSpan(-1),r=this.headerPositionUtils.findColAtEdgeForHeaderRow(n,"start")),!r)return!1;const{column:o,headerRowIndex:a}=this.headerPositionUtils.getHeaderIndexToFocus(r.column,r==null?void 0:r.headerRowIndex);return this.focusService.focusHeaderPosition({headerPosition:{column:o,headerRowIndex:a},direction:e,fromTab:!0,allowUserOverride:!0,event:i})}scrollToColumn(t,e="After"){if(t.getPinned())return;let i;if(t instanceof Fs){const s=t.getDisplayedLeafColumns();i=e==="Before"?di(s):s[0]}else i=t;this.gridBodyCon.getScrollFeature().ensureColumnVisible(i)}};z([W("focusService")],Ru.prototype,"focusService",2);z([W("headerPositionUtils")],Ru.prototype,"headerPositionUtils",2);z([W("ctrlsService")],Ru.prototype,"ctrlsService",2);z([de],Ru.prototype,"postConstruct",1);Ru=z([Me("headerNavigationService")],Ru);var sd=class extends ye{setComp(t,e,i){this.comp=t,this.eGui=e,this.createManagedBean(new ml(i,{onTabKeyDown:this.onTabKeyDown.bind(this),handleKeyDown:this.handleKeyDown.bind(this),onFocusOut:this.onFocusOut.bind(this)})),this.addManagedListener(this.eventService,K.EVENT_COLUMN_PIVOT_MODE_CHANGED,this.onPivotModeChanged.bind(this)),this.addManagedListener(this.eventService,K.EVENT_DISPLAYED_COLUMNS_CHANGED,this.onDisplayedColumnsChanged.bind(this)),this.onPivotModeChanged(),this.setupHeaderHeight();const s=this.onHeaderContextMenu.bind(this);this.addManagedListener(this.eGui,"contextmenu",s),this.mockContextMenuForIPad(s),this.ctrlsService.register("gridHeaderCtrl",this)}setupHeaderHeight(){const t=this.setHeaderHeight.bind(this);t(),this.addManagedPropertyListener("headerHeight",t),this.addManagedPropertyListener("pivotHeaderHeight",t),this.addManagedPropertyListener("groupHeaderHeight",t),this.addManagedPropertyListener("pivotGroupHeaderHeight",t),this.addManagedPropertyListener("floatingFiltersHeight",t),this.addManagedListener(this.eventService,K.EVENT_DISPLAYED_COLUMNS_CHANGED,t),this.addManagedListener(this.eventService,K.EVENT_COLUMN_HEADER_HEIGHT_CHANGED,t),this.addManagedListener(this.eventService,K.EVENT_GRID_STYLES_CHANGED,t),this.addManagedListener(this.eventService,K.EVENT_ADVANCED_FILTER_ENABLED_CHANGED,t)}getHeaderHeight(){return this.headerHeight}setHeaderHeight(){const{columnModel:t}=this;let e=0,i=t.getHeaderRowCount(),s;this.filterManager.hasFloatingFilters()&&(i++,e=1);const n=this.columnModel.getColumnGroupHeaderRowHeight(),o=this.columnModel.getColumnHeaderRowHeight(),a=1+e,l=i-a;if(s=e*t.getFloatingFiltersHeight(),s+=l*n,s+=o,this.headerHeight===s)return;this.headerHeight=s;const c=`${s+1}px`;this.comp.setHeightAndMinHeight(c),this.eventService.dispatchEvent({type:K.EVENT_HEADER_HEIGHT_CHANGED})}onPivotModeChanged(){const t=this.columnModel.isPivotMode();this.comp.addOrRemoveCssClass("ag-pivot-on",t),this.comp.addOrRemoveCssClass("ag-pivot-off",!t)}onDisplayedColumnsChanged(){const e=this.columnModel.getAllDisplayedColumns().some(i=>i.isSpanHeaderHeight());this.comp.addOrRemoveCssClass("ag-header-allow-overflow",e)}onTabKeyDown(t){const e=this.gos.get("enableRtl"),i=t.shiftKey!==e?2:3;(this.headerNavigationService.navigateHorizontally(i,!0,t)||this.focusService.focusNextGridCoreContainer(t.shiftKey))&&t.preventDefault()}handleKeyDown(t){let e=null;switch(t.key){case ce.LEFT:e=2;case ce.RIGHT:Pe(e)||(e=3),this.headerNavigationService.navigateHorizontally(e,!1,t);break;case ce.UP:e=0;case ce.DOWN:Pe(e)||(e=1),this.headerNavigationService.navigateVertically(e,null,t)&&t.preventDefault();break;default:return}}onFocusOut(t){const{relatedTarget:e}=t;!e&&this.eGui.contains(this.gos.getActiveDomElement())||this.eGui.contains(e)||this.focusService.clearFocusedHeader()}onHeaderContextMenu(t,e,i){if(!t&&!i||!this.menuService.isHeaderContextMenuEnabled())return;const{target:s}=t??e;(s===this.eGui||s===this.ctrlsService.getHeaderRowContainerCtrl().getViewport())&&this.menuService.showHeaderContextMenu(void 0,t,i)}mockContextMenuForIPad(t){if(!xc())return;const e=new Es(this.eGui),i=s=>{t(void 0,s.touchStart,s.touchEvent)};this.addManagedListener(e,Es.EVENT_LONG_TAP,i),this.addDestroyFunc(()=>e.destroy())}};z([W("headerNavigationService")],sd.prototype,"headerNavigationService",2);z([W("focusService")],sd.prototype,"focusService",2);z([W("columnModel")],sd.prototype,"columnModel",2);z([W("ctrlsService")],sd.prototype,"ctrlsService",2);z([W("filterManager")],sd.prototype,"filterManager",2);z([W("menuService")],sd.prototype,"menuService",2);var $M=class X4 extends Te{constructor(){super(X4.TEMPLATE)}postConstruct(){const e={addOrRemoveCssClass:(r,n)=>this.addOrRemoveCssClass(r,n),setHeightAndMinHeight:r=>{this.getGui().style.height=r,this.getGui().style.minHeight=r}};this.createManagedBean(new sd).setComp(e,this.getGui(),this.getFocusableElement());const s=r=>{this.createManagedBean(r),this.appendChild(r)};s(new zb("left")),s(new zb(null)),s(new zb("right"))}};$M.TEMPLATE='<div class="ag-header" role="presentation"/>';z([de],$M.prototype,"postConstruct",1);var Z4=$M,lg=class extends ye{addResizeBar(t){const e={dragStartPixels:t.dragStartPixels||0,eElement:t.eResizeBar,onDragStart:this.onDragStart.bind(this,t),onDragStop:this.onDragStop.bind(this,t),onDragging:this.onDragging.bind(this,t),includeTouch:!0,stopPropagationForTouch:!0};return this.dragService.addDragSource(e),()=>this.dragService.removeDragSource(e)}onDragStart(t,e){this.dragStartX=e.clientX,this.setResizeIcons();const i=e instanceof MouseEvent&&e.shiftKey===!0;t.onResizeStart(i)}setResizeIcons(){const t=this.ctrlsService.get("gridCtrl");t.setResizeCursor(!0),t.disableUserSelect(!0)}onDragStop(t,e){t.onResizeEnd(this.resizeAmount),this.resetIcons()}resetIcons(){const t=this.ctrlsService.get("gridCtrl");t.setResizeCursor(!1),t.disableUserSelect(!1)}onDragging(t,e){this.resizeAmount=e.clientX-this.dragStartX,t.onResizing(this.resizeAmount)}};z([W("dragService")],lg.prototype,"dragService",2);z([W("ctrlsService")],lg.prototype,"ctrlsService",2);lg=z([Me("horizontalResizeService")],lg);var ac=class extends ye{hideActiveMenu(){this.hidePopup&&this.hidePopup()}showMenuAfterMouseEvent(t,e,i){this.showPopup(t,s=>{this.popupService.positionPopupUnderMouseEvent({column:t,type:i,mouseEvent:e,ePopup:s})},i,e.target,this.menuService.isLegacyMenuEnabled())}showMenuAfterButtonClick(t,e,i){let s=-1,r="left";const n=this.menuService.isLegacyMenuEnabled();!n&&this.gos.get("enableRtl")&&(s=1,r="right");let o=n?void 0:4*s,a=n?void 0:4;this.showPopup(t,l=>{this.popupService.positionPopupByComponent({type:i,eventSource:e,ePopup:l,nudgeX:o,nudgeY:a,alignSide:r,keepWithinBounds:!0,position:"under",column:t})},i,e,n)}showPopup(t,e,i,s,r){const n=t?this.createBean(new ed(t,"COLUMN_MENU")):void 0;if(this.activeMenu=n,!(n!=null&&n.hasFilter())||!t)throw new Error("AG Grid - unable to show popup filter, filter instantiation failed");const o=document.createElement("div");as(o,"presentation"),o.classList.add("ag-menu"),r||o.classList.add("ag-filter-menu"),this.tabListener=this.addManagedListener(o,"keydown",f=>this.trapFocusWithin(f,o)),o.appendChild(n==null?void 0:n.getGui());let a;const l=()=>n==null?void 0:n.afterGuiDetached(),c=this.menuService.isColumnMenuAnchoringEnabled()?s??this.ctrlsService.getGridBodyCtrl().getGui():void 0,u=f=>{t.setMenuVisible(!1,"contextMenu");const m=f instanceof KeyboardEvent;if(this.tabListener&&(this.tabListener=this.tabListener()),m&&s&&Fn(s)){const g=this.focusService.findTabbableParent(s);g&&g.focus()}l(),this.destroyBean(this.activeMenu),this.dispatchVisibleChangedEvent(!1,i,t)},d=this.localeService.getLocaleTextFunc(),h=r&&i!=="columnFilter"?d("ariaLabelColumnMenu","Column Menu"):d("ariaLabelColumnFilter","Column Filter"),p=this.popupService.addPopup({modal:!0,eChild:o,closeOnEsc:!0,closedCallback:u,positionCallback:()=>e(o),anchorToElement:c,ariaLabel:h});p&&(this.hidePopup=a=p.hideFunc),n.afterInit().then(()=>{e(o),n.afterGuiAttached({container:i,hidePopup:a})}),t.setMenuVisible(!0,"contextMenu"),this.dispatchVisibleChangedEvent(!0,i,t)}trapFocusWithin(t,e){t.key!==ce.TAB||t.defaultPrevented||this.focusService.findNextFocusableElement(e,!1,t.shiftKey)||(t.preventDefault(),this.focusService.focusInto(e,t.shiftKey))}dispatchVisibleChangedEvent(t,e,i){const s={type:K.EVENT_COLUMN_MENU_VISIBLE_CHANGED,visible:t,switchingTab:!1,key:e,column:i??null};this.eventService.dispatchEvent(s)}isMenuEnabled(t){var e;return t.isFilterAllowed()&&((e=t.getColDef().menuTabs)!=null?e:["filterMenuTab"]).includes("filterMenuTab")}showMenuAfterContextMenuEvent(){}destroy(){this.destroyBean(this.activeMenu),super.destroy()}};z([W("filterManager")],ac.prototype,"filterManager",2);z([W("popupService")],ac.prototype,"popupService",2);z([W("focusService")],ac.prototype,"focusService",2);z([W("ctrlsService")],ac.prototype,"ctrlsService",2);z([W("menuService")],ac.prototype,"menuService",2);ac=z([Me("filterMenuFactory")],ac);var J4=(t=>(t.TAB_GUARD="ag-tab-guard",t.TAB_GUARD_TOP="ag-tab-guard-top",t.TAB_GUARD_BOTTOM="ag-tab-guard-bottom",t))(J4||{}),Mx=class extends ye{constructor(t){super(),this.skipTabGuardFocus=!1,this.forcingFocusOut=!1;const{comp:e,eTopGuard:i,eBottomGuard:s,focusTrapActive:r,forceFocusOutWhenTabGuardsAreEmpty:n,focusInnerElement:o,onFocusIn:a,onFocusOut:l,shouldStopEventPropagation:c,onTabKeyDown:u,handleKeyDown:d,eFocusableElement:h}=t;this.comp=e,this.eTopGuard=i,this.eBottomGuard=s,this.providedFocusInnerElement=o,this.eFocusableElement=h,this.focusTrapActive=!!r,this.forceFocusOutWhenTabGuardsAreEmpty=!!n,this.providedFocusIn=a,this.providedFocusOut=l,this.providedShouldStopEventPropagation=c,this.providedOnTabKeyDown=u,this.providedHandleKeyDown=d}postConstruct(){this.createManagedBean(new ml(this.eFocusableElement,{shouldStopEventPropagation:()=>this.shouldStopEventPropagation(),onTabKeyDown:t=>this.onTabKeyDown(t),handleKeyDown:t=>this.handleKeyDown(t),onFocusIn:t=>this.onFocusIn(t),onFocusOut:t=>this.onFocusOut(t)})),this.activateTabGuards(),[this.eTopGuard,this.eBottomGuard].forEach(t=>this.addManagedListener(t,"focus",this.onFocus.bind(this)))}handleKeyDown(t){this.providedHandleKeyDown&&this.providedHandleKeyDown(t)}tabGuardsAreActive(){return!!this.eTopGuard&&this.eTopGuard.hasAttribute("tabIndex")}shouldStopEventPropagation(){return this.providedShouldStopEventPropagation?this.providedShouldStopEventPropagation():!1}activateTabGuards(){if(this.forcingFocusOut)return;const t=this.gos.get("tabIndex");this.comp.setTabIndex(t.toString())}deactivateTabGuards(){this.comp.setTabIndex()}onFocus(t){if(this.skipTabGuardFocus){this.skipTabGuardFocus=!1;return}if(this.forceFocusOutWhenTabGuardsAreEmpty&&this.focusService.findFocusableElements(this.eFocusableElement,".ag-tab-guard").length===0){this.findNextElementOutsideAndFocus(t.target===this.eBottomGuard);return}const e=t.target===this.eBottomGuard;this.providedFocusInnerElement?this.providedFocusInnerElement(e):this.focusInnerElement(e)}findNextElementOutsideAndFocus(t){const e=this.gos.getDocument(),i=this.focusService.findFocusableElements(e.body,null,!0),s=i.indexOf(t?this.eTopGuard:this.eBottomGuard);if(s===-1)return;let r,n;t?(r=0,n=s):(r=s+1,n=i.length);const o=i.slice(r,n),a=this.gos.get("tabIndex");o.sort((l,c)=>{const u=parseInt(l.getAttribute("tabindex")||"0"),d=parseInt(c.getAttribute("tabindex")||"0");return d===a?1:u===a?-1:u===0?1:d===0?-1:u-d}),o[t?o.length-1:0].focus()}onFocusIn(t){this.focusTrapActive||(this.providedFocusIn&&this.providedFocusIn(t),this.deactivateTabGuards())}onFocusOut(t){this.focusTrapActive||(this.providedFocusOut&&this.providedFocusOut(t),this.eFocusableElement.contains(t.relatedTarget)||this.activateTabGuards())}onTabKeyDown(t){if(this.providedOnTabKeyDown){this.providedOnTabKeyDown(t);return}if(this.focusTrapActive||t.defaultPrevented)return;const e=this.tabGuardsAreActive();e&&this.deactivateTabGuards();const i=this.getNextFocusableElement(t.shiftKey);e&&setTimeout(()=>this.activateTabGuards(),0),i&&(i.focus(),t.preventDefault())}focusInnerElement(t=!1){const e=this.focusService.findFocusableElements(this.eFocusableElement);this.tabGuardsAreActive()&&(e.splice(0,1),e.splice(e.length-1,1)),e.length&&e[t?e.length-1:0].focus({preventScroll:!0})}getNextFocusableElement(t){return this.focusService.findNextFocusableElement(this.eFocusableElement,!1,t)}forceFocusOutOfContainer(t=!1){if(this.forcingFocusOut)return;const e=t?this.eTopGuard:this.eBottomGuard;this.activateTabGuards(),this.skipTabGuardFocus=!0,this.forcingFocusOut=!0,e.focus(),window.setTimeout(()=>{this.forcingFocusOut=!1,this.activateTabGuards()})}isTabGuard(t){return t===this.eTopGuard||t===this.eBottomGuard}};z([W("focusService")],Mx.prototype,"focusService",2);z([de],Mx.prototype,"postConstruct",1);var yl=class extends Te{initialiseTabGuard(t){this.eTopGuard=this.createTabGuard("top"),this.eBottomGuard=this.createTabGuard("bottom"),this.eFocusableElement=this.getFocusableElement();const e=[this.eTopGuard,this.eBottomGuard],i={setTabIndex:s=>{e.forEach(r=>s!=null?r.setAttribute("tabindex",s):r.removeAttribute("tabindex"))}};this.addTabGuards(this.eTopGuard,this.eBottomGuard),this.tabGuardCtrl=this.createManagedBean(new Mx({comp:i,focusTrapActive:!!t.focusTrapActive,eTopGuard:this.eTopGuard,eBottomGuard:this.eBottomGuard,eFocusableElement:this.eFocusableElement,onFocusIn:t.onFocusIn,onFocusOut:t.onFocusOut,focusInnerElement:t.focusInnerElement,handleKeyDown:t.handleKeyDown,onTabKeyDown:t.onTabKeyDown,shouldStopEventPropagation:t.shouldStopEventPropagation,forceFocusOutWhenTabGuardsAreEmpty:t.forceFocusOutWhenTabGuardsAreEmpty}))}createTabGuard(t){const e=document.createElement("div"),i=t==="top"?"ag-tab-guard-top":"ag-tab-guard-bottom";return e.classList.add("ag-tab-guard",i),as(e,"presentation"),e}addTabGuards(t,e){this.eFocusableElement.insertAdjacentElement("afterbegin",t),this.eFocusableElement.insertAdjacentElement("beforeend",e)}removeAllChildrenExceptTabGuards(){const t=[this.eTopGuard,this.eBottomGuard];Cs(this.getFocusableElement()),this.addTabGuards(...t)}forceFocusOutOfContainer(t=!1){this.tabGuardCtrl.forceFocusOutOfContainer(t)}appendChild(t,e){wC(t)||(t=t.getGui());const{eBottomGuard:i}=this;i?i.insertAdjacentElement("beforebegin",t):super.appendChild(t,e)}},OC=class Q4 extends yl{constructor(e){super(Q4.getTemplate(e.cssClass)),this.items=[],this.tabbedItemScrollMap=new Map,this.params=e}postConstruct(){this.setupHeader(),this.params.items&&this.params.items.forEach(e=>this.addItem(e)),this.initialiseTabGuard({onTabKeyDown:this.onTabKeyDown.bind(this),handleKeyDown:this.handleKeyDown.bind(this),focusInnerElement:this.focusInnerElement.bind(this),focusTrapActive:!0}),this.addDestroyFunc(()=>{var e,i,s;return(s=(i=(e=this.activeItem)==null?void 0:e.tabbedItem)==null?void 0:i.afterDetachedCallback)==null?void 0:s.call(i)})}static getTemplate(e){return`<div class="ag-tabs ${e}">
            <div ref="eHeader"></div>
            <div ref="eBody" role="presentation" class="ag-tabs-body ${e?`${e}-body`:""}"></div>
        </div>`}setupHeader(){const{enableCloseButton:e,cssClass:i}=this.params,s=(r,n)=>{r.classList.add(`ag-tabs-${n}`),i&&r.classList.add(`${i}-${n}`)};e?(this.setupCloseButton(s),this.eTabHeader=this.gos.getDocument().createElement("div"),s(this.eHeader,"header-wrapper"),as(this.eHeader,"presentation"),this.eHeader.appendChild(this.eTabHeader)):this.eTabHeader=this.eHeader,as(this.eTabHeader,"tablist"),s(this.eTabHeader,"header")}setupCloseButton(e){const i=this.gos.getDocument(),s=i.createElement("button");e(s,"close-button");const r=ts("close",this.gos,void 0,!0);no(s,this.params.closeButtonAriaLabel),s.appendChild(r),this.addManagedListener(s,"click",()=>{var o,a;return(a=(o=this.params).onCloseClicked)==null?void 0:a.call(o)});const n=i.createElement("div");e(n,"close-button-wrapper"),as(n,"presentation"),n.appendChild(s),this.eHeader.appendChild(n),this.eCloseButton=s}handleKeyDown(e){switch(e.key){case ce.RIGHT:case ce.LEFT:if(!this.eTabHeader.contains(this.gos.getActiveDomElement()))return;const i=e.key===ce.RIGHT,s=this.gos.get("enableRtl"),r=this.items.indexOf(this.activeItem),n=i!==s?Math.min(r+1,this.items.length-1):Math.max(r-1,0);if(r===n)return;e.preventDefault();const o=this.items[n];this.showItemWrapper(o),o.eHeaderButton.focus();break;case ce.UP:case ce.DOWN:e.stopPropagation();break}}onTabKeyDown(e){var i,s,r,n;if(e.defaultPrevented)return;const{focusService:o,eHeader:a,eBody:l,activeItem:c,params:u}=this,{suppressTrapFocus:d,enableCloseButton:h}=u,p=this.gos.getActiveDomElement(),f=e.target,m=e.shiftKey;if(a.contains(p)){e.preventDefault(),h&&m&&!((i=this.eCloseButton)!=null&&i.contains(p))?(s=this.eCloseButton)==null||s.focus():d&&m?(r=this.focusService.findFocusableElementBeforeTabGuard(this.gos.getDocument().body,f))==null||r.focus():this.focusBody(e.shiftKey);return}let g=null;if(o.isTargetUnderManagedComponent(l,f)&&(m&&(g=this.focusService.findFocusableElementBeforeTabGuard(l,f)),!g&&!d&&(g=c.eHeaderButton)),!g&&l.contains(p)&&(g=o.findNextFocusableElement(l,!1,m),!g)){e.preventDefault(),d&&!m?this.forceFocusOutOfContainer(m):h&&!m?(n=this.eCloseButton)==null||n.focus():this.focusHeader();return}g&&(e.preventDefault(),g.focus())}focusInnerElement(e){e?this.focusHeader():this.focusBody(!0)}focusHeader(e){this.activeItem.eHeaderButton.focus({preventScroll:e})}focusBody(e){this.focusService.focusInto(this.eBody,e)}setAfterAttachedParams(e){this.afterAttachedParams=e}showFirstItem(){this.items.length>0&&this.showItemWrapper(this.items[0])}addItem(e){const i=document.createElement("span");as(i,"tab"),i.setAttribute("tabindex","-1"),i.appendChild(e.title),i.classList.add("ag-tab"),this.eTabHeader.appendChild(i),no(i,e.titleLabel);const s={tabbedItem:e,eHeaderButton:i};this.items.push(s),i.addEventListener("click",this.showItemWrapper.bind(this,s))}showItem(e){const i=this.items.find(s=>s.tabbedItem===e);i&&this.showItemWrapper(i)}showItemWrapper(e){var i,s,r,n,o,a;const{tabbedItem:l,eHeaderButton:c}=e;if((s=(i=this.params).onItemClicked)==null||s.call(i,{item:l}),this.activeItem===e){(n=(r=this.params).onActiveItemClicked)==null||n.call(r);return}this.lastScrollListener&&(this.lastScrollListener=this.lastScrollListener()),Cs(this.eBody),l.bodyPromise.then(u=>{this.eBody.appendChild(u);const d=!this.focusService.isKeyboardMode();if(this.params.suppressFocusBodyOnOpen||this.focusService.focusInto(this.eBody,!1,d),l.afterAttachedCallback&&l.afterAttachedCallback(this.afterAttachedParams),this.params.keepScrollPosition){const h=l.getScrollableContainer&&l.getScrollableContainer()||u;this.lastScrollListener=this.addManagedListener(h,"scroll",()=>{this.tabbedItemScrollMap.set(l.name,h.scrollTop)});const p=this.tabbedItemScrollMap.get(l.name);p!==void 0&&setTimeout(()=>{h.scrollTop=p},0)}}),this.activeItem&&(this.activeItem.eHeaderButton.classList.remove("ag-tab-selected"),(a=(o=this.activeItem.tabbedItem).afterDetachedCallback)==null||a.call(o)),c.classList.add("ag-tab-selected"),this.activeItem=e}};z([W("focusService")],OC.prototype,"focusService",2);z([pe("eHeader")],OC.prototype,"eHeader",2);z([pe("eBody")],OC.prototype,"eBody",2);z([de],OC.prototype,"postConstruct",1);var KM=OC,PY=50,$w=class extends ye{constructor(){super(...arguments),this.polyfillFunctions=[]}observeResize(t,e){const i=this.gos.getWindow(),s=()=>{const a=new i.ResizeObserver(e);return a.observe(t),()=>a.disconnect()},r=()=>{var a,l;let c=(a=t==null?void 0:t.clientWidth)!=null?a:0,u=(l=t==null?void 0:t.clientHeight)!=null?l:0,d=!0;const h=()=>{var p,f;if(d){const m=(p=t==null?void 0:t.clientWidth)!=null?p:0,g=(f=t==null?void 0:t.clientHeight)!=null?f:0;(m!==c||g!==u)&&(c=m,u=g,e()),this.doNextPolyfillTurn(h)}};return h(),()=>d=!1},n=this.gos.get("suppressBrowserResizeObserver");return!!i.ResizeObserver&&!n?s():this.getFrameworkOverrides().wrapIncoming(()=>r(),"resize-observer")}doNextPolyfillTurn(t){this.polyfillFunctions.push(t),this.schedulePolyfill()}schedulePolyfill(){if(this.polyfillScheduled)return;const t=()=>{const e=this.polyfillFunctions;this.polyfillScheduled=!1,this.polyfillFunctions=[],e.forEach(i=>i())};this.polyfillScheduled=!0,window.setTimeout(t,PY)}};$w=z([Me("resizeObserverService")],$w);var Th=class extends ye{constructor(){super(...arguments),this.createTasksP1={list:[],sorted:!1},this.createTasksP2={list:[],sorted:!1},this.destroyTasks=[],this.ticking=!1,this.scrollGoingDown=!0,this.lastPage=0,this.lastScrollTop=0,this.taskCount=0,this.cancelledTasks=new Set}setScrollTop(t){const e=this.gos.get("pagination");if(this.scrollGoingDown=t>=this.lastScrollTop,e&&t===0){const i=this.paginationProxy.getCurrentPage();i!==this.lastPage&&(this.lastPage=i,this.scrollGoingDown=!0)}this.lastScrollTop=t}init(){this.useAnimationFrame=!this.gos.get("suppressAnimationFrame")}isOn(){return this.useAnimationFrame}verifyAnimationFrameOn(t){this.useAnimationFrame===!1&&console.warn(`AG Grid: AnimationFrameService.${t} called but animation frames are off`)}createTask(t,e,i){this.verifyAnimationFrameOn(i);const s={task:t,index:e,createOrder:++this.taskCount};this.addTaskToList(this[i],s),this.schedule()}cancelTask(t){this.cancelledTasks.add(t)}addTaskToList(t,e){t.list.push(e),t.sorted=!1}sortTaskList(t){if(t.sorted)return;const e=this.scrollGoingDown?1:-1;t.list.sort((i,s)=>i.index!==s.index?e*(s.index-i.index):s.createOrder-i.createOrder),t.sorted=!0}addDestroyTask(t){this.verifyAnimationFrameOn("createTasksP3"),this.destroyTasks.push(t),this.schedule()}executeFrame(t){this.verifyAnimationFrameOn("executeFrame");const e=this.createTasksP1,i=e.list,s=this.createTasksP2,r=s.list,n=this.destroyTasks,o=new Date().getTime();let a=new Date().getTime()-o;const l=t<=0,c=this.ctrlsService.getGridBodyCtrl();for(;l||a<t;){if(!c.getScrollFeature().scrollGridIfNeeded()){let d;if(i.length)this.sortTaskList(e),d=i.pop().task;else if(r.length)this.sortTaskList(s),d=r.pop().task;else if(n.length)d=n.pop();else{this.cancelledTasks.clear();break}this.cancelledTasks.has(d)||d()}a=new Date().getTime()-o}i.length||r.length||n.length?this.requestFrame():this.stopTicking()}stopTicking(){this.ticking=!1}flushAllFrames(){this.useAnimationFrame&&this.executeFrame(-1)}schedule(){this.useAnimationFrame&&(this.ticking||(this.ticking=!0,this.requestFrame()))}requestFrame(){const t=this.executeFrame.bind(this,60);this.requestAnimationFrame(t)}requestAnimationFrame(t){const e=this.gos.getWindow();e.requestAnimationFrame?e.requestAnimationFrame(t):e.webkitRequestAnimationFrame?e.webkitRequestAnimationFrame(t):e.setTimeout(t,0)}isQueueEmpty(){return!this.ticking}debounce(t){let e=!1;return()=>{if(!this.isOn()){window.setTimeout(t,0);return}e||(e=!0,this.addDestroyTask(()=>{e=!1,t()}))}}};z([W("ctrlsService")],Th.prototype,"ctrlsService",2);z([W("paginationProxy")],Th.prototype,"paginationProxy",2);z([de],Th.prototype,"init",1);Th=z([Me("animationFrameService")],Th);var e5=(t=>(t.EVERYTHING="group",t.FILTER="filter",t.SORT="sort",t.MAP="map",t.AGGREGATE="aggregate",t.FILTER_AGGREGATES="filter_aggregates",t.PIVOT="pivot",t.NOTHING="nothing",t))(e5||{}),_h=class extends ye{postConstruct(){this.isClientSideRowModel=this.rowModel.getType()==="clientSide"}expandRows(t){if(!this.isClientSideRowModel)return;const e=new Set(t);this.rowModel.forEachNode(i=>{i.id&&e.has(i.id)&&(i.expanded=!0)}),this.onGroupExpandedOrCollapsed()}getExpandedRows(){const t=[];return this.rowModel.forEachNode(({expanded:e,id:i})=>{e&&i&&t.push(i)}),t}expandAll(t){this.isClientSideRowModel&&this.rowModel.expandOrCollapseAll(t)}setRowNodeExpanded(t,e,i,s){t&&(i&&t.parent&&t.parent.level!==-1&&this.setRowNodeExpanded(t.parent,e,i,s),t.setExpanded(e,void 0,s))}onGroupExpandedOrCollapsed(){this.isClientSideRowModel&&this.rowModel.refreshModel({step:"map"})}};z([W("rowModel")],_h.prototype,"rowModel",2);z([de],_h.prototype,"postConstruct",1);_h=z([Me("expansionService")],_h);var ao=class extends ye{postConstruct(){var t;this.activeMenuFactory=(t=this.enterpriseMenuFactory)!=null?t:this.filterMenuFactory}showColumnMenu(t){this.showColumnMenuCommon(this.activeMenuFactory,t,"columnMenu")}showFilterMenu(t){const e=this.enterpriseMenuFactory&&this.isLegacyMenuEnabled()?this.enterpriseMenuFactory:this.filterMenuFactory;this.showColumnMenuCommon(e,t,t.containerType,!0)}showHeaderContextMenu(t,e,i){this.activeMenuFactory.showMenuAfterContextMenuEvent(t,e,i)}getContextMenuPosition(t,e){const i=this.getRowCtrl(t),s=this.getCellGui(i,e);if(!s)return i?{x:0,y:i.getRowYPosition()}:{x:0,y:0};const r=s.getBoundingClientRect();return{x:r.x+r.width/2,y:r.y+r.height/2}}showContextMenu(t){var e,i,s;const{column:r,rowNode:n}=t;let{anchorToElement:o,value:a}=t;n&&r&&a==null&&(a=n.getValueFromValueService(r)),o==null&&(o=this.getContextMenuAnchorElement(n,r)),(s=this.contextMenuFactory)==null||s.onContextMenu((e=t.mouseEvent)!=null?e:null,(i=t.touchEvent)!=null?i:null,n??null,r??null,a,o)}showColumnChooser(t){var e;(e=this.columnChooserFactory)==null||e.showColumnChooser(t)}hidePopupMenu(){var t;(t=this.contextMenuFactory)==null||t.hideActiveMenu(),this.activeMenuFactory.hideActiveMenu()}hideColumnChooser(){var t;(t=this.columnChooserFactory)==null||t.hideActiveColumnChooser()}isColumnMenuInHeaderEnabled(t){const{suppressMenu:e,suppressHeaderMenuButton:i}=t.getColDef();return!(i??e)&&this.activeMenuFactory.isMenuEnabled(t)&&(this.isLegacyMenuEnabled()||!!this.enterpriseMenuFactory)}isFilterMenuInHeaderEnabled(t){return!t.getColDef().suppressHeaderFilterButton&&this.filterManager.isFilterAllowed(t)}isHeaderContextMenuEnabled(t){return!(t!=null&&t.getColDef().suppressHeaderContextMenu)&&this.getColumnMenuType()==="new"}isHeaderMenuButtonAlwaysShowEnabled(){return this.isSuppressMenuHide()}isHeaderMenuButtonEnabled(){const t=!this.isSuppressMenuHide();return!(xc()&&t)}isHeaderFilterButtonEnabled(t){return this.isFilterMenuInHeaderEnabled(t)&&!this.isLegacyMenuEnabled()&&!this.isFloatingFilterButtonDisplayed(t)}isFilterMenuItemEnabled(t){return this.filterManager.isFilterAllowed(t)&&!this.isLegacyMenuEnabled()&&!this.isFilterMenuInHeaderEnabled(t)&&!this.isFloatingFilterButtonDisplayed(t)}isColumnMenuAnchoringEnabled(){return!this.isLegacyMenuEnabled()}areAdditionalColumnMenuItemsEnabled(){return this.getColumnMenuType()==="new"}isLegacyMenuEnabled(){return this.getColumnMenuType()==="legacy"}isFloatingFilterButtonEnabled(t){var e;const i=t.getColDef(),s=(e=i.floatingFilterComponentParams)==null?void 0:e.suppressFilterButton;return s!=null&&ot("As of v31.1, 'colDef.floatingFilterComponentParams.suppressFilterButton' is deprecated. Use 'colDef.suppressFloatingFilterButton' instead."),i.suppressFloatingFilterButton==null?!s:!i.suppressFloatingFilterButton}getColumnMenuType(){var t;return(t=this.gos.get("columnMenu"))!=null?t:"legacy"}isFloatingFilterButtonDisplayed(t){return!!t.getColDef().floatingFilter&&this.isFloatingFilterButtonEnabled(t)}isSuppressMenuHide(){const t=this.gos.get("suppressMenuHide");return this.isLegacyMenuEnabled()||this.gos.exists("suppressMenuHide")?t:!0}showColumnMenuCommon(t,e,i,s){const{column:r,positionBy:n}=e;if(n==="button"){const{buttonElement:o}=e;t.showMenuAfterButtonClick(r,o,i,s)}else if(n==="mouse"){const{mouseEvent:o}=e;t.showMenuAfterMouseEvent(r,o,i,s)}else r&&(this.ctrlsService.getGridBodyCtrl().getScrollFeature().ensureColumnVisible(r,"auto"),this.animationFrameService.requestAnimationFrame(()=>{const o=this.ctrlsService.getHeaderRowContainerCtrl(r.getPinned()).getHeaderCtrlForColumn(r);t.showMenuAfterButtonClick(r,o.getAnchorElementForMenu(s),i,!0)}))}getRowCtrl(t){const{rowIndex:e,rowPinned:i}=t||{};if(e!=null)return this.rowRenderer.getRowByPosition({rowIndex:e,rowPinned:i})||void 0}getCellGui(t,e){if(!t||!e)return;const i=t.getCellCtrl(e);return(i==null?void 0:i.getGui())||void 0}getContextMenuAnchorElement(t,e){const i=this.ctrlsService.getGridBodyCtrl().getGridBodyElement(),s=this.getRowCtrl(t);if(!s)return i;const r=this.getCellGui(s,e);return r||(s.isFullWidth()?s.getFullWidthElement():i)}};z([W("filterMenuFactory")],ao.prototype,"filterMenuFactory",2);z([W("ctrlsService")],ao.prototype,"ctrlsService",2);z([W("animationFrameService")],ao.prototype,"animationFrameService",2);z([W("filterManager")],ao.prototype,"filterManager",2);z([W("rowRenderer")],ao.prototype,"rowRenderer",2);z([Vt("columnChooserFactory")],ao.prototype,"columnChooserFactory",2);z([Vt("contextMenuFactory")],ao.prototype,"contextMenuFactory",2);z([Vt("enterpriseMenuFactory")],ao.prototype,"enterpriseMenuFactory",2);z([de],ao.prototype,"postConstruct",1);ao=z([Me("menuService")],ao);var Mu=class extends ye{postConstruct(){this.ctrlsService.whenReady(t=>{this.centerRowContainerCtrl=t.center})}getPreferredWidthForColumn(t,e){const i=this.getHeaderCellForColumn(t);if(!i)return-1;const s=this.rowRenderer.getAllCellsForColumn(t);return e||s.push(i),this.addElementsToContainerAndGetWidth(s)}getPreferredWidthForColumnGroup(t){const e=this.getHeaderCellForColumn(t);return e?this.addElementsToContainerAndGetWidth([e]):-1}addElementsToContainerAndGetWidth(t){const e=document.createElement("form");e.style.position="fixed";const i=this.centerRowContainerCtrl.getContainerElement();t.forEach(n=>this.cloneItemIntoDummy(n,e)),i.appendChild(e);const s=e.offsetWidth;i.removeChild(e);const r=this.getAutoSizePadding();return s+r}getAutoSizePadding(){return this.gos.get("autoSizePadding")}getHeaderCellForColumn(t){let e=null;return this.ctrlsService.getHeaderRowContainerCtrls().forEach(i=>{const s=i.getHtmlElementForColumnHeader(t);s!=null&&(e=s)}),e}cloneItemIntoDummy(t,e){const i=t.cloneNode(!0);i.style.width="",i.style.position="static",i.style.left="";const s=document.createElement("div"),r=s.classList;["ag-header-cell","ag-header-group-cell"].some(a=>i.classList.contains(a))?(r.add("ag-header","ag-header-row"),s.style.position="static"):r.add("ag-row");let o=t.parentElement;for(;o;){if(["ag-header-row","ag-row"].some(l=>o.classList.contains(l))){for(let l=0;l<o.classList.length;l++){const c=o.classList[l];c!="ag-row-position-absolute"&&r.add(c)}break}o=o.parentElement}s.appendChild(i),e.appendChild(s)}};z([W("rowRenderer")],Mu.prototype,"rowRenderer",2);z([W("ctrlsService")],Mu.prototype,"ctrlsService",2);z([W("rowCssClassCalculator")],Mu.prototype,"rowCssClassCalculator",2);z([de],Mu.prototype,"postConstruct",1);Mu=z([Me("autoWidthCalculator")],Mu);var GC=class extends ye{constructor(t,e){super(),this.createRowCon=t,this.destroyRowCtrls=e,this.stickyTopRowCtrls=[],this.stickyBottomRowCtrls=[],this.topContainerHeight=0,this.bottomContainerHeight=0}postConstruct(){this.isClientSide=this.rowModel.getType()==="clientSide",this.ctrlsService.whenReady(t=>{this.gridBodyCtrl=t.gridBodyCtrl})}getStickyTopRowCtrls(){return this.stickyTopRowCtrls}getStickyBottomRowCtrls(){return this.stickyBottomRowCtrls}getLastPixelOfGroup(t){return this.isClientSide?this.getClientSideLastPixelOfGroup(t):this.getServerSideLastPixelOfGroup(t)}getFirstPixelOfGroup(t){return t.footer?t.sibling.rowTop+t.sibling.rowHeight-1:t.hasChildren()?t.rowTop-1:0}getServerSideLastPixelOfGroup(t){var e,i,s,r;if(this.isClientSide)throw new Error("This func should only be called in server side row model.");if(t.isExpandable()||t.footer){if(t.master)return t.detailNode.rowTop+t.detailNode.rowHeight;if(!t.sibling||Math.abs(t.sibling.rowIndex-t.rowIndex)===1){let o=(e=t.childStore)==null?void 0:e.getStoreBounds();return t.footer&&(o=(i=t.sibling.childStore)==null?void 0:i.getStoreBounds()),((s=o==null?void 0:o.heightPx)!=null?s:0)+((r=o==null?void 0:o.topPx)!=null?r:0)}return t.footer?t.rowTop+t.rowHeight:t.sibling.rowTop+t.sibling.rowHeight}return Number.MAX_SAFE_INTEGER}getClientSideLastPixelOfGroup(t){if(!this.isClientSide)throw new Error("This func should only be called in client side row model.");if(t.isExpandable()||t.footer){const e=t.footer&&t.rowIndex===0,i=!t.sibling||Math.abs(t.sibling.rowIndex-t.rowIndex)===1;if(e||i){let s=t.footer?t.sibling:t;for(;s.isExpandable()&&s.expanded;)if(s.master)s=s.detailNode;else if(s.childrenAfterSort){if(s.childrenAfterSort.length===0)break;s=di(s.childrenAfterSort)}return s.rowTop+s.rowHeight}return t.footer?t.rowTop+t.rowHeight:t.sibling.rowTop+t.sibling.rowHeight}return Number.MAX_SAFE_INTEGER}updateStickyRows(t){const e=t==="top";let i=0;if(!this.canRowsBeSticky())return this.refreshNodesAndContainerHeight(t,new Set,i);const s=e?this.rowRenderer.getFirstVisibleVerticalPixel():this.rowRenderer.getLastVisibleVerticalPixel(),r=new Set,n=c=>{if(r.add(c),e){const u=this.getLastPixelOfGroup(c),d=s+i+c.rowHeight;u<d?c.stickyRowTop=i+(u-d):c.stickyRowTop=i}else{const u=this.getFirstPixelOfGroup(c),d=s-(i+c.rowHeight);u>d?c.stickyRowTop=i-(u-d):c.stickyRowTop=i}i=0,r.forEach(u=>{const d=u.stickyRowTop+u.rowHeight;i<d&&(i=d)})},o=this.areFooterRowsStickySuppressed(),a=this.gos.get("suppressGroupRowsSticky"),l=c=>c.displayed?c.footer?o===!0||o==="grand"&&c.level===-1||o==="group"&&c.level>-1?!1:!r.has(c):c.isExpandable()?a===!0?!1:!r.has(c)&&c.expanded:!1:!1;for(let c=0;c<100;c++){let u=s+i;e||(u=s-i);const d=this.rowModel.getRowIndexAtPixel(u),h=this.rowModel.getRow(d);if(h==null)break;const f=this.getStickyAncestors(h).find(g=>(e?g.rowIndex<d:g.rowIndex>d)&&l(g));if(f){n(f);continue}if((e?h.rowTop<u:h.rowTop+h.rowHeight>u)&&l(h)){n(h);continue}break}return e||r.forEach(c=>{c.stickyRowTop=i-(c.stickyRowTop+c.rowHeight)}),this.refreshNodesAndContainerHeight(t,r,i)}areFooterRowsStickySuppressed(){const t=this.gos.get("suppressStickyTotalRow");if(t===!0)return!0;const e=!!this.gos.get("groupIncludeFooter")||t==="group",i=!!this.gos.get("groupIncludeTotalFooter")||t==="grand";return e&&i?!0:i?"grand":e?"group":!1}canRowsBeSticky(){const t=this.gos.isGroupRowsSticky(),e=this.areFooterRowsStickySuppressed(),i=this.gos.get("suppressGroupRowsSticky");return t&&(!e||!i)}getStickyAncestors(t){const e=[];let i=t.footer?t.sibling:t.parent;for(;i;)i.sibling&&e.push(i.sibling),e.push(i),i=i.parent;return e.reverse()}checkStickyRows(){const t=this.updateStickyRows("top"),e=this.updateStickyRows("bottom");return t||e}destroyStickyCtrls(){this.refreshNodesAndContainerHeight("top",new Set,0),this.refreshNodesAndContainerHeight("bottom",new Set,0)}refreshStickyNode(t){const e=new Set;if(this.stickyTopRowCtrls.some(i=>i.getRowNode()===t)){for(let i=0;i<this.stickyTopRowCtrls.length;i++){const s=this.stickyTopRowCtrls[i].getRowNode();s!==t&&e.add(s)}this.refreshNodesAndContainerHeight("top",e,this.topContainerHeight)&&this.checkStickyRows();return}for(let i=0;i<this.stickyBottomRowCtrls.length;i++){const s=this.stickyBottomRowCtrls[i].getRowNode();s!==t&&e.add(s)}this.refreshNodesAndContainerHeight("bottom",e,this.bottomContainerHeight)&&this.checkStickyRows()}refreshNodesAndContainerHeight(t,e,i){const s=t==="top",r=s?this.stickyTopRowCtrls:this.stickyBottomRowCtrls,n={},o=[];for(let d=0;d<r.length;d++){const h=r[d].getRowNode();if(!e.has(h)){n[h.id]=r[d],h.sticky=!1;continue}o.push(r[d])}const a=new Set;for(let d=0;d<o.length;d++)a.add(o[d].getRowNode());const l=[];e.forEach(d=>{a.has(d)||(d.sticky=!0,l.push(this.createRowCon(d,!1,!1)))});let c=!!l.length||o.length!==r.length;s?this.topContainerHeight!==i&&(this.topContainerHeight=i,this.gridBodyCtrl.setStickyTopHeight(i),c=!0):this.bottomContainerHeight!==i&&(this.bottomContainerHeight=i,this.gridBodyCtrl.setStickyBottomHeight(i),c=!0),this.destroyRowCtrls(n,!1);const u=[...o,...l];return u.sort((d,h)=>h.getRowNode().rowIndex-d.getRowNode().rowIndex),s||u.reverse(),u.forEach(d=>d.setRowTop(d.getRowNode().stickyRowTop)),c?(s?this.stickyTopRowCtrls=u:this.stickyBottomRowCtrls=u,!0):!1}};z([W("rowModel")],GC.prototype,"rowModel",2);z([W("rowRenderer")],GC.prototype,"rowRenderer",2);z([W("ctrlsService")],GC.prototype,"ctrlsService",2);z([de],GC.prototype,"postConstruct",1);var kn=class extends ye{constructor(){super(...arguments),this.destroyFuncsForColumnListeners=[],this.rowCtrlsByRowIndex={},this.zombieRowCtrls={},this.allRowCtrls=[],this.topRowCtrls=[],this.bottomRowCtrls=[],this.refreshInProgress=!1,this.dataFirstRenderedFired=!1,this.setupRangeSelectionListeners=()=>{const t=()=>{this.getAllCellCtrls().forEach(n=>n.onRangeSelectionChanged())},e=()=>{this.getAllCellCtrls().forEach(n=>n.updateRangeBordersIfRangeCount())},i=()=>{this.eventService.addEventListener(K.EVENT_RANGE_SELECTION_CHANGED,t),this.eventService.addEventListener(K.EVENT_COLUMN_MOVED,e),this.eventService.addEventListener(K.EVENT_COLUMN_PINNED,e),this.eventService.addEventListener(K.EVENT_COLUMN_VISIBLE,e)},s=()=>{this.eventService.removeEventListener(K.EVENT_RANGE_SELECTION_CHANGED,t),this.eventService.removeEventListener(K.EVENT_COLUMN_MOVED,e),this.eventService.removeEventListener(K.EVENT_COLUMN_PINNED,e),this.eventService.removeEventListener(K.EVENT_COLUMN_VISIBLE,e)};this.addDestroyFunc(()=>s()),this.addManagedPropertyListener("enableRangeSelection",n=>{n.currentValue?i():s()}),this.gos.get("enableRangeSelection")&&i()}}postConstruct(){this.ctrlsService.whenReady(t=>{this.gridBodyCtrl=t.gridBodyCtrl,this.initialise()})}initialise(){if(this.addManagedListener(this.eventService,K.EVENT_PAGINATION_CHANGED,this.onPageLoaded.bind(this)),this.addManagedListener(this.eventService,K.EVENT_PINNED_ROW_DATA_CHANGED,this.onPinnedRowDataChanged.bind(this)),this.addManagedListener(this.eventService,K.EVENT_DISPLAYED_COLUMNS_CHANGED,this.onDisplayedColumnsChanged.bind(this)),this.addManagedListener(this.eventService,K.EVENT_BODY_SCROLL,this.onBodyScroll.bind(this)),this.addManagedListener(this.eventService,K.EVENT_BODY_HEIGHT_CHANGED,this.redraw.bind(this)),this.addManagedPropertyListeners(["domLayout","embedFullWidthRows"],()=>this.onDomLayoutChanged()),this.addManagedPropertyListeners(["suppressMaxRenderedRowRestriction","rowBuffer"],()=>this.redraw()),this.addManagedPropertyListeners(["suppressCellFocus","getBusinessKeyForNode","fullWidthCellRenderer","fullWidthCellRendererParams","rowStyle","getRowStyle","rowClass","getRowClass","rowClassRules","suppressStickyTotalRow","groupRowRenderer","groupRowRendererParams","loadingCellRenderer","loadingCellRendererParams","detailCellRenderer","detailCellRendererParams","enableRangeSelection","enableCellTextSelection"],()=>this.redrawRows()),this.gos.isGroupRowsSticky()){const t=this.rowModel.getType();(t==="clientSide"||t==="serverSide")&&(this.stickyRowFeature=this.createManagedBean(new GC(this.createRowCon.bind(this),this.destroyRowCtrls.bind(this))))}this.registerCellEventListeners(),this.initialiseCache(),this.printLayout=this.gos.isDomLayout("print"),this.embedFullWidthRows=this.printLayout||this.gos.get("embedFullWidthRows"),this.redrawAfterModelUpdate()}initialiseCache(){if(this.gos.get("keepDetailRows")){const t=this.getKeepDetailRowsCount(),e=t??3;this.cachedRowCtrls=new IY(e)}}getKeepDetailRowsCount(){return this.gos.get("keepDetailRowsCount")}getStickyTopRowCtrls(){return this.stickyRowFeature?this.stickyRowFeature.getStickyTopRowCtrls():[]}getStickyBottomRowCtrls(){return this.stickyRowFeature?this.stickyRowFeature.getStickyBottomRowCtrls():[]}updateAllRowCtrls(){const t=_u(this.rowCtrlsByRowIndex),e=_u(this.zombieRowCtrls),i=this.cachedRowCtrls?this.cachedRowCtrls.getEntries():[];e.length>0||i.length>0?this.allRowCtrls=[...t,...e,...i]:this.allRowCtrls=t}onCellFocusChanged(t){this.getAllCellCtrls().forEach(e=>e.onCellFocused(t)),this.getFullWidthRowCtrls().forEach(e=>e.onFullWidthRowFocused(t))}registerCellEventListeners(){this.addManagedListener(this.eventService,K.EVENT_CELL_FOCUSED,t=>{this.onCellFocusChanged(t)}),this.addManagedListener(this.eventService,K.EVENT_CELL_FOCUS_CLEARED,()=>{this.onCellFocusChanged()}),this.addManagedListener(this.eventService,K.EVENT_FLASH_CELLS,t=>{this.getAllCellCtrls().forEach(e=>e.onFlashCells(t))}),this.addManagedListener(this.eventService,K.EVENT_COLUMN_HOVER_CHANGED,()=>{this.getAllCellCtrls().forEach(t=>t.onColumnHover())}),this.addManagedListener(this.eventService,K.EVENT_DISPLAYED_COLUMNS_CHANGED,()=>{this.getAllCellCtrls().forEach(t=>t.onDisplayedColumnsChanged())}),this.addManagedListener(this.eventService,K.EVENT_DISPLAYED_COLUMNS_WIDTH_CHANGED,()=>{this.printLayout&&this.getAllCellCtrls().forEach(t=>t.onLeftChanged())}),this.setupRangeSelectionListeners(),this.refreshListenersToColumnsForCellComps(),this.addManagedListener(this.eventService,K.EVENT_GRID_COLUMNS_CHANGED,this.refreshListenersToColumnsForCellComps.bind(this)),this.addDestroyFunc(this.removeGridColumnListeners.bind(this))}removeGridColumnListeners(){this.destroyFuncsForColumnListeners.forEach(t=>t()),this.destroyFuncsForColumnListeners.length=0}refreshListenersToColumnsForCellComps(){this.removeGridColumnListeners(),this.columnModel.getAllGridColumns().forEach(e=>{const i=l=>{this.getAllCellCtrls().forEach(c=>{c.getColumn()===e&&l(c)})},s=()=>{i(l=>l.onLeftChanged())},r=()=>{i(l=>l.onWidthChanged())},n=()=>{i(l=>l.onFirstRightPinnedChanged())},o=()=>{i(l=>l.onLastLeftPinnedChanged())},a=()=>{i(l=>l.onColDefChanged())};e.addEventListener("leftChanged",s),e.addEventListener("widthChanged",r),e.addEventListener("firstRightPinnedChanged",n),e.addEventListener("lastLeftPinnedChanged",o),e.addEventListener("colDefChanged",a),this.destroyFuncsForColumnListeners.push(()=>{e.removeEventListener("leftChanged",s),e.removeEventListener("widthChanged",r),e.removeEventListener("firstRightPinnedChanged",n),e.removeEventListener("lastLeftPinnedChanged",o),e.removeEventListener("colDefChanged",a)})})}onDomLayoutChanged(){const t=this.gos.isDomLayout("print"),e=t||this.gos.get("embedFullWidthRows"),i=e!==this.embedFullWidthRows||this.printLayout!==t;this.printLayout=t,this.embedFullWidthRows=e,i&&this.redrawAfterModelUpdate({domLayoutChanged:!0})}datasourceChanged(){this.firstRenderedRow=0,this.lastRenderedRow=-1;const t=Object.keys(this.rowCtrlsByRowIndex);this.removeRowCtrls(t)}onPageLoaded(t){const e={recycleRows:t.keepRenderedRows,animate:t.animate,newData:t.newData,newPage:t.newPage,onlyBody:!0};this.redrawAfterModelUpdate(e)}getAllCellsForColumn(t){const e=[];return this.getAllRowCtrls().forEach(i=>{const s=i.getCellElement(t);s&&e.push(s)}),e}refreshFloatingRowComps(){this.refreshFloatingRows(this.topRowCtrls,this.pinnedRowModel.getPinnedTopRowData()),this.refreshFloatingRows(this.bottomRowCtrls,this.pinnedRowModel.getPinnedBottomRowData())}getTopRowCtrls(){return this.topRowCtrls}getCentreRowCtrls(){return this.allRowCtrls}getBottomRowCtrls(){return this.bottomRowCtrls}refreshFloatingRows(t,e){t.forEach(i=>{i.destroyFirstPass(),i.destroySecondPass()}),t.length=0,e&&e.forEach(i=>{const s=new yu(i,this.beans,!1,!1,this.printLayout);t.push(s)})}onPinnedRowDataChanged(){const t={recycleRows:!0};this.redrawAfterModelUpdate(t)}redrawRow(t,e=!1){var i;if(t.sticky)this.stickyRowFeature.refreshStickyNode(t);else if((i=this.cachedRowCtrls)!=null&&i.has(t)){this.cachedRowCtrls.removeRow(t);return}else{const s=r=>{const n=r[t.rowIndex];n&&n.getRowNode()===t&&(n.destroyFirstPass(),n.destroySecondPass(),r[t.rowIndex]=this.createRowCon(t,!1,!1))};switch(t.rowPinned){case"top":s(this.topRowCtrls);break;case"bottom":s(this.bottomRowCtrls);break;default:s(this.rowCtrlsByRowIndex),this.updateAllRowCtrls()}}e||this.dispatchDisplayedRowsChanged(!1)}redrawRows(t){if(t!=null){t==null||t.forEach(i=>this.redrawRow(i,!0)),this.dispatchDisplayedRowsChanged(!1);return}this.redrawAfterModelUpdate()}getCellToRestoreFocusToAfterRefresh(t){const e=t!=null&&t.suppressKeepFocus?null:this.focusService.getFocusCellToUseAfterRefresh();if(e==null)return null;const i=this.gos.getActiveDomElement(),s=this.gos.getDomData(i,Jl.DOM_DATA_KEY_CELL_CTRL),r=this.gos.getDomData(i,yu.DOM_DATA_KEY_ROW_CTRL);return s||r?e:null}redrawAfterModelUpdate(t={}){this.getLockOnRefresh();const e=this.getCellToRestoreFocusToAfterRefresh(t);this.updateContainerHeights(),this.scrollToTopIfNewData(t);const i=!t.domLayoutChanged&&!!t.recycleRows,s=t.animate&&this.gos.isAnimateRows(),r=i?this.getRowsToRecycle():null;i||this.removeAllRowComps(),this.workOutFirstAndLastRowsToRender(),this.stickyRowFeature&&this.stickyRowFeature.checkStickyRows(),this.recycleRows(r,s),this.gridBodyCtrl.updateRowCount(),t.onlyBody||this.refreshFloatingRowComps(),this.dispatchDisplayedRowsChanged(),e!=null&&this.restoreFocusedCell(e),this.releaseLockOnRefresh()}scrollToTopIfNewData(t){const e=t.newData||t.newPage,i=this.gos.get("suppressScrollOnNewData");e&&!i&&this.gridBodyCtrl.getScrollFeature().scrollToTop()}updateContainerHeights(){if(this.printLayout){this.rowContainerHeightService.setModelHeight(null);return}let t=this.paginationProxy.getCurrentPageHeight();t===0&&(t=1),this.rowContainerHeightService.setModelHeight(t)}getLockOnRefresh(){if(this.refreshInProgress)throw new Error("AG Grid: cannot get grid to draw rows when it is in the middle of drawing rows. Your code probably called a grid API method while the grid was in the render stage. To overcome this, put the API call into a timeout, e.g. instead of api.redrawRows(), call setTimeout(function() { api.redrawRows(); }, 0). To see what part of your code that caused the refresh check this stacktrace.");this.refreshInProgress=!0}releaseLockOnRefresh(){this.refreshInProgress=!1}isRefreshInProgress(){return this.refreshInProgress}restoreFocusedCell(t){t&&(this.focusService.setRestoreFocusedCell(t),this.onCellFocusChanged(this.beans.gos.addGridCommonParams({rowIndex:t.rowIndex,column:t.column,rowPinned:t.rowPinned,forceBrowserFocus:!0,preventScrollOnBrowserFocus:!0,type:"mock"})))}stopEditing(t=!1){this.getAllRowCtrls().forEach(e=>{e.stopEditing(t)})}getAllCellCtrls(){const t=[],e=this.getAllRowCtrls(),i=e.length;for(let s=0;s<i;s++){const r=e[s].getAllCellCtrls(),n=r.length;for(let o=0;o<n;o++)t.push(r[o])}return t}getAllRowCtrls(){const t=this.stickyRowFeature&&this.stickyRowFeature.getStickyTopRowCtrls()||[],e=this.stickyRowFeature&&this.stickyRowFeature.getStickyBottomRowCtrls()||[],i=[...this.topRowCtrls,...this.bottomRowCtrls,...t,...e];for(const s in this.rowCtrlsByRowIndex)i.push(this.rowCtrlsByRowIndex[s]);return i}addRenderedRowListener(t,e,i){const s=this.rowCtrlsByRowIndex[e];s&&s.addEventListener(t,i)}flashCells(t={}){this.getCellCtrls(t.rowNodes,t.columns).forEach(e=>e.flashCell(t))}refreshCells(t={}){const e={forceRefresh:t.force,newData:!1,suppressFlash:t.suppressFlash};this.getCellCtrls(t.rowNodes,t.columns).forEach(i=>i.refreshOrDestroyCell(e)),t.rowNodes&&(this.getRowCtrls(t.rowNodes).forEach(i=>{if(!i.isFullWidth())return;i.refreshFullWidth()||this.redrawRow(i.getRowNode(),!0)}),this.dispatchDisplayedRowsChanged(!1))}getCellRendererInstances(t){var e;const i=this.getCellCtrls(t.rowNodes,t.columns).map(n=>n.getCellRenderer()).filter(n=>n!=null);if((e=t.columns)!=null&&e.length)return i;const s=[],r=this.mapRowNodes(t.rowNodes);return this.getAllRowCtrls().forEach(n=>{if(r&&!this.isRowInMap(n.getRowNode(),r)||!n.isFullWidth())return;const o=n.getFullWidthCellRenderers();for(let a=0;a<o.length;a++){const l=o[a];l!=null&&s.push(l)}}),[...s,...i]}getCellEditorInstances(t){const e=[];return this.getCellCtrls(t.rowNodes,t.columns).forEach(i=>{const s=i.getCellEditor();s&&e.push(s)}),e}getEditingCells(){const t=[];return this.getAllCellCtrls().forEach(e=>{if(e.isEditing()){const i=e.getCellPosition();t.push(i)}}),t}mapRowNodes(t){if(!t)return;const e={top:{},bottom:{},normal:{}};return t.forEach(i=>{const s=i.id;switch(i.rowPinned){case"top":e.top[s]=i;break;case"bottom":e.bottom[s]=i;break;default:e.normal[s]=i;break}}),e}isRowInMap(t,e){const i=t.id;switch(t.rowPinned){case"top":return e.top[i]!=null;case"bottom":return e.bottom[i]!=null;default:return e.normal[i]!=null}}getRowCtrls(t){const e=this.mapRowNodes(t),i=this.getAllRowCtrls();return!t||!e?i:i.filter(s=>{const r=s.getRowNode();return this.isRowInMap(r,e)})}getCellCtrls(t,e){let i;Pe(e)&&(i={},e.forEach(r=>{const n=this.columnModel.getGridColumn(r);Pe(n)&&(i[n.getId()]=!0)}));const s=[];return this.getRowCtrls(t).forEach(r=>{r.getAllCellCtrls().forEach(n=>{const o=n.getColumn().getId();i&&!i[o]||s.push(n)})}),s}destroy(){this.removeAllRowComps(),super.destroy()}removeAllRowComps(){const t=Object.keys(this.rowCtrlsByRowIndex);this.removeRowCtrls(t),this.stickyRowFeature&&this.stickyRowFeature.destroyStickyCtrls()}getRowsToRecycle(){const t=[];Pr(this.rowCtrlsByRowIndex,(i,s)=>{s.getRowNode().id==null&&t.push(i)}),this.removeRowCtrls(t);const e={};return Pr(this.rowCtrlsByRowIndex,(i,s)=>{const r=s.getRowNode();e[r.id]=s}),this.rowCtrlsByRowIndex={},e}removeRowCtrls(t,e=!1){t.forEach(i=>{const s=this.rowCtrlsByRowIndex[i];s&&(s.destroyFirstPass(e),s.destroySecondPass()),delete this.rowCtrlsByRowIndex[i]})}onBodyScroll(t){t.direction==="vertical"&&this.redraw({afterScroll:!0})}redraw(t={}){const{afterScroll:e}=t;let i;this.stickyRowFeature&&cM()&&(i=this.getCellToRestoreFocusToAfterRefresh()||void 0);const s=this.firstRenderedRow,r=this.lastRenderedRow;this.workOutFirstAndLastRowsToRender();let n=!1;this.stickyRowFeature&&(n=this.stickyRowFeature.checkStickyRows());const o=this.firstRenderedRow!==s||this.lastRenderedRow!==r;if(!(e&&!n&&!o)&&(this.getLockOnRefresh(),this.recycleRows(null,!1,e),this.releaseLockOnRefresh(),this.dispatchDisplayedRowsChanged(e&&!n),i!=null)){const a=this.getCellToRestoreFocusToAfterRefresh();i!=null&&a==null&&(this.animationFrameService.flushAllFrames(),this.restoreFocusedCell(i))}}removeRowCompsNotToDraw(t,e){const i={};t.forEach(n=>i[n]=!0);const r=Object.keys(this.rowCtrlsByRowIndex).filter(n=>!i[n]);this.removeRowCtrls(r,e)}calculateIndexesToDraw(t){let e=yG(this.firstRenderedRow,this.lastRenderedRow);const i=(r,n)=>{const o=n.getRowNode().rowIndex;o!=null&&(o<this.firstRenderedRow||o>this.lastRenderedRow)&&this.doNotUnVirtualiseRow(n)&&e.push(o)};Pr(this.rowCtrlsByRowIndex,i),Pr(t,i),e.sort((r,n)=>r-n);const s=[];for(let r=0;r<e.length;r++){const n=e[r],o=this.paginationProxy.getRow(n);o&&!o.sticky&&s.push(n)}return s}recycleRows(t,e=!1,i=!1){const s=this.calculateIndexesToDraw(t);(this.printLayout||i)&&(e=!1),this.removeRowCompsNotToDraw(s,!e),s.forEach(r=>{this.createOrUpdateRowCtrl(r,t,e,i)}),t&&(i&&!this.gos.get("suppressAnimationFrame")&&!this.printLayout?this.beans.animationFrameService.addDestroyTask(()=>{this.destroyRowCtrls(t,e),this.updateAllRowCtrls(),this.dispatchDisplayedRowsChanged()}):this.destroyRowCtrls(t,e)),this.updateAllRowCtrls()}dispatchDisplayedRowsChanged(t=!1){const e={type:K.EVENT_DISPLAYED_ROWS_CHANGED,afterScroll:t};this.eventService.dispatchEvent(e)}onDisplayedColumnsChanged(){const t=this.columnModel.isPinningLeft(),e=this.columnModel.isPinningRight();(this.pinningLeft!==t||e!==this.pinningRight)&&(this.pinningLeft=t,this.pinningRight=e,this.embedFullWidthRows&&this.redrawFullWidthEmbeddedRows())}redrawFullWidthEmbeddedRows(){const t=[];this.getFullWidthRowCtrls().forEach(e=>{const i=e.getRowNode().rowIndex;t.push(i.toString())}),this.refreshFloatingRowComps(),this.removeRowCtrls(t),this.redraw({afterScroll:!0})}getFullWidthRowCtrls(t){const e=this.mapRowNodes(t);return this.getAllRowCtrls().filter(i=>{if(!i.isFullWidth())return!1;const s=i.getRowNode();return!(e!=null&&!this.isRowInMap(s,e))})}createOrUpdateRowCtrl(t,e,i,s){let r,n=this.rowCtrlsByRowIndex[t];if(n||(r=this.paginationProxy.getRow(t),Pe(r)&&Pe(e)&&e[r.id]&&r.alreadyRendered&&(n=e[r.id],e[r.id]=null)),!n)if(r||(r=this.paginationProxy.getRow(t)),Pe(r))n=this.createRowCon(r,i,s);else return;return r&&(r.alreadyRendered=!0),this.rowCtrlsByRowIndex[t]=n,n}destroyRowCtrls(t,e){const i=[];Pr(t,(s,r)=>{if(r){if(this.cachedRowCtrls&&r.isCacheable()){this.cachedRowCtrls.addRow(r);return}r.destroyFirstPass(!e),e?(this.zombieRowCtrls[r.getInstanceId()]=r,i.push(()=>{r.destroySecondPass(),delete this.zombieRowCtrls[r.getInstanceId()]})):r.destroySecondPass()}}),e&&(i.push(()=>{this.updateAllRowCtrls(),this.dispatchDisplayedRowsChanged()}),A3(i))}getRowBuffer(){return this.gos.get("rowBuffer")}getRowBufferInPixels(){const t=this.getRowBuffer(),e=this.gos.getRowHeightAsNumber();return t*e}workOutFirstAndLastRowsToRender(){this.rowContainerHeightService.updateOffset();let t,e;if(!this.paginationProxy.isRowsToRender())t=0,e=-1;else if(this.printLayout)this.environment.refreshRowHeightVariable(),t=this.paginationProxy.getPageFirstRow(),e=this.paginationProxy.getPageLastRow();else{const a=this.getRowBufferInPixels(),l=this.ctrlsService.getGridBodyCtrl(),c=this.gos.get("suppressRowVirtualisation");let u=!1,d,h;do{const y=this.paginationProxy.getPixelOffset(),{pageFirstPixel:v,pageLastPixel:C}=this.paginationProxy.getCurrentPagePixelRange(),b=this.rowContainerHeightService.getDivStretchOffset(),T=l.getScrollFeature().getVScrollPosition(),A=T.top,I=T.bottom;c?(d=v+b,h=C+b):(d=Math.max(A+y-a,v)+b,h=Math.min(I+y+a,C)+b),this.firstVisibleVPixel=Math.max(A+y,v)+b,this.lastVisibleVPixel=Math.min(I+y,C)+b,u=this.ensureAllRowsInRangeHaveHeightsCalculated(d,h)}while(u);let p=this.paginationProxy.getRowIndexAtPixel(d),f=this.paginationProxy.getRowIndexAtPixel(h);const m=this.paginationProxy.getPageFirstRow(),g=this.paginationProxy.getPageLastRow();p<m&&(p=m),f>g&&(f=g),t=p,e=f}const i=this.gos.isDomLayout("normal"),s=this.gos.get("suppressMaxRenderedRowRestriction"),r=Math.max(this.getRowBuffer(),500);i&&!s&&e-t>r&&(e=t+r);const n=t!==this.firstRenderedRow,o=e!==this.lastRenderedRow;if(n||o){this.firstRenderedRow=t,this.lastRenderedRow=e;const a={type:K.EVENT_VIEWPORT_CHANGED,firstRow:t,lastRow:e};this.eventService.dispatchEvent(a)}}dispatchFirstDataRenderedEvent(){if(this.dataFirstRenderedFired)return;this.dataFirstRenderedFired=!0;const t={type:K.EVENT_FIRST_DATA_RENDERED,firstRow:this.firstRenderedRow,lastRow:this.lastRenderedRow};window.requestAnimationFrame(()=>{this.beans.eventService.dispatchEvent(t)})}ensureAllRowsInRangeHaveHeightsCalculated(t,e){const i=this.paginationProxy.ensureRowHeightsValid(t,e,-1,-1);return i&&this.updateContainerHeights(),i}getFirstVisibleVerticalPixel(){return this.firstVisibleVPixel}getLastVisibleVerticalPixel(){return this.lastVisibleVPixel}getFirstVirtualRenderedRow(){return this.firstRenderedRow}getLastVirtualRenderedRow(){return this.lastRenderedRow}doNotUnVirtualiseRow(t){const s=t.getRowNode(),r=this.focusService.isRowNodeFocused(s),n=t.isEditing(),o=s.detail;return r||n||o?!!this.paginationProxy.isRowPresent(s):!1}createRowCon(t,e,i){const s=this.cachedRowCtrls?this.cachedRowCtrls.getRow(t):null;if(s)return s;const r=this.gos.get("suppressAnimationFrame"),n=i&&!r&&!this.printLayout;return new yu(t,this.beans,e,n,this.printLayout)}getRenderedNodes(){const t=this.rowCtrlsByRowIndex;return Object.values(t).map(e=>e.getRowNode())}getRowByPosition(t){let e;const{rowIndex:i}=t;switch(t.rowPinned){case"top":e=this.topRowCtrls[i];break;case"bottom":e=this.bottomRowCtrls[i];break;default:e=this.rowCtrlsByRowIndex[i],e||(e=this.getStickyTopRowCtrls().find(s=>s.getRowNode().rowIndex===i)||null,e||(e=this.getStickyBottomRowCtrls().find(s=>s.getRowNode().rowIndex===i)||null));break}return e}isRangeInRenderedViewport(t,e){if(t==null||e==null)return!1;const s=t>this.lastRenderedRow;return!(e<this.firstRenderedRow)&&!s}};z([W("animationFrameService")],kn.prototype,"animationFrameService",2);z([W("paginationProxy")],kn.prototype,"paginationProxy",2);z([W("columnModel")],kn.prototype,"columnModel",2);z([W("pinnedRowModel")],kn.prototype,"pinnedRowModel",2);z([W("rowModel")],kn.prototype,"rowModel",2);z([W("focusService")],kn.prototype,"focusService",2);z([W("beans")],kn.prototype,"beans",2);z([W("rowContainerHeightService")],kn.prototype,"rowContainerHeightService",2);z([W("ctrlsService")],kn.prototype,"ctrlsService",2);z([de],kn.prototype,"postConstruct",1);kn=z([Me("rowRenderer")],kn);var IY=class{constructor(t){this.entriesMap={},this.entriesList=[],this.maxCount=t}addRow(t){if(this.entriesMap[t.getRowNode().id]=t,this.entriesList.push(t),t.setCached(!0),this.entriesList.length>this.maxCount){const e=this.entriesList[0];e.destroyFirstPass(),e.destroySecondPass(),this.removeFromCache(e)}}getRow(t){if(t==null||t.id==null)return null;const e=this.entriesMap[t.id];return e?(this.removeFromCache(e),e.setCached(!1),e.getRowNode()!=t?null:e):null}has(t){return this.entriesMap[t.id]!=null}removeRow(t){const e=t.id,i=this.entriesMap[e];delete this.entriesMap[e],vn(this.entriesList,i)}removeFromCache(t){const e=t.getRowNode().id;delete this.entriesMap[e],vn(this.entriesList,t)}getEntries(){return this.entriesList}},cg=class extends ye{init(){this.setPinnedTopRowData(),this.setPinnedBottomRowData(),this.addManagedPropertyListener("pinnedTopRowData",()=>this.setPinnedTopRowData()),this.addManagedPropertyListener("pinnedBottomRowData",()=>this.setPinnedBottomRowData())}isEmpty(t){const e=t==="top"?this.pinnedTopRows:this.pinnedBottomRows;return Mo(e)}isRowsToRender(t){return!this.isEmpty(t)}getRowAtPixel(t,e){const i=e==="top"?this.pinnedTopRows:this.pinnedBottomRows;if(Mo(i))return 0;for(let s=0;s<i.length;s++){const r=i[s];if(r.rowTop+r.rowHeight-1>=t)return s}return i.length-1}setPinnedTopRowData(){const t=this.gos.get("pinnedTopRowData");this.pinnedTopRows=this.createNodesFromData(t,!0);const e={type:K.EVENT_PINNED_ROW_DATA_CHANGED};this.eventService.dispatchEvent(e)}setPinnedBottomRowData(){const t=this.gos.get("pinnedBottomRowData");this.pinnedBottomRows=this.createNodesFromData(t,!1);const e={type:K.EVENT_PINNED_ROW_DATA_CHANGED};this.eventService.dispatchEvent(e)}createNodesFromData(t,e){const i=[];if(t){let s=0;t.forEach((r,n)=>{const o=new Tt(this.beans);o.data=r;const a=e?Tt.ID_PREFIX_TOP_PINNED:Tt.ID_PREFIX_BOTTOM_PINNED;o.id=a+n,o.rowPinned=e?"top":"bottom",o.setRowTop(s),o.setRowHeight(this.gos.getRowHeightForNode(o).height),o.setRowIndex(n),s+=o.rowHeight,i.push(o)})}return i}getPinnedTopRowData(){return this.pinnedTopRows}getPinnedBottomRowData(){return this.pinnedBottomRows}getPinnedTopTotalHeight(){return this.getTotalHeight(this.pinnedTopRows)}getPinnedTopRowCount(){return this.pinnedTopRows?this.pinnedTopRows.length:0}getPinnedBottomRowCount(){return this.pinnedBottomRows?this.pinnedBottomRows.length:0}getPinnedTopRow(t){return this.pinnedTopRows[t]}getPinnedBottomRow(t){return this.pinnedBottomRows[t]}forEachPinnedTopRow(t){Mo(this.pinnedTopRows)||this.pinnedTopRows.forEach(t)}forEachPinnedBottomRow(t){Mo(this.pinnedBottomRows)||this.pinnedBottomRows.forEach(t)}getPinnedBottomTotalHeight(){return this.getTotalHeight(this.pinnedBottomRows)}getTotalHeight(t){if(!t||t.length===0)return 0;const e=di(t);return e.rowTop+e.rowHeight}};z([W("beans")],cg.prototype,"beans",2);z([de],cg.prototype,"init",1);cg=z([Me("pinnedRowModel")],cg);var Mr=(t=>(t.Applied="Applied",t.StoreNotFound="StoreNotFound",t.StoreLoading="StoreLoading",t.StoreWaitingToLoad="StoreWaitingToLoad",t.StoreLoadingFailed="StoreLoadingFailed",t.StoreWrongType="StoreWrongType",t.Cancelled="Cancelled",t.StoreNotStarted="StoreNotStarted",t))(Mr||{}),Ug=class{constructor(t,e){this.active=!0,this.nodeIdsToColumns={},this.mapToItems={},this.keepingColumns=t,this.pathRoot={rowNode:e,children:null},this.mapToItems[e.id]=this.pathRoot}setInactive(){this.active=!1}isActive(){return this.active}depthFirstSearchChangedPath(t,e){if(t.children)for(let i=0;i<t.children.length;i++)this.depthFirstSearchChangedPath(t.children[i],e);e(t.rowNode)}depthFirstSearchEverything(t,e,i){if(t.childrenAfterGroup)for(let s=0;s<t.childrenAfterGroup.length;s++){const r=t.childrenAfterGroup[s];r.childrenAfterGroup?this.depthFirstSearchEverything(t.childrenAfterGroup[s],e,i):i&&e(r)}e(t)}forEachChangedNodeDepthFirst(t,e=!1,i=!1){this.active&&!i?this.depthFirstSearchChangedPath(this.pathRoot,t):this.depthFirstSearchEverything(this.pathRoot.rowNode,t,e)}executeFromRootNode(t){t(this.pathRoot.rowNode)}createPathItems(t){let e=t,i=0;for(;!this.mapToItems[e.id];){const s={rowNode:e,children:null};this.mapToItems[e.id]=s,i++,e=e.parent}return i}populateColumnsMap(t,e){if(!this.keepingColumns||!e)return;let i=t;for(;i;)this.nodeIdsToColumns[i.id]||(this.nodeIdsToColumns[i.id]={}),e.forEach(s=>this.nodeIdsToColumns[i.id][s.getId()]=!0),i=i.parent}linkPathItems(t,e){let i=t;for(let s=0;s<e;s++){const r=this.mapToItems[i.id],n=this.mapToItems[i.parent.id];n.children||(n.children=[]),n.children.push(r),i=i.parent}}addParentNode(t,e){if(!t||t.isRowPinned())return;const i=this.createPathItems(t);this.linkPathItems(t,i),this.populateColumnsMap(t,e)}canSkip(t){return this.active&&!this.mapToItems[t.id]}getValueColumnsForNode(t,e){if(!this.keepingColumns)return e;const i=this.nodeIdsToColumns[t.id];return e.filter(r=>i[r.getId()])}getNotValueColumnsForNode(t,e){if(!this.keepingColumns)return null;const i=this.nodeIdsToColumns[t.id];return e.filter(r=>!i[r.getId()])}},Wg=class Nd extends ye{constructor(e){super(),this.state=Nd.STATE_WAITING_TO_LOAD,this.version=0,this.id=e}getId(){return this.id}load(){this.state=Nd.STATE_LOADING,this.loadFromDatasource()}getVersion(){return this.version}setStateWaitingToLoad(){this.version++,this.state=Nd.STATE_WAITING_TO_LOAD}getState(){return this.state}pageLoadFailed(e){this.isRequestMostRecentAndLive(e)&&(this.state=Nd.STATE_FAILED,this.processServerFail()),this.dispatchLoadCompleted(!1)}success(e,i){this.successCommon(e,i)}pageLoaded(e,i,s){this.successCommon(e,{rowData:i,rowCount:s})}isRequestMostRecentAndLive(e){const i=e===this.version,s=this.isAlive();return i&&s}successCommon(e,i){this.dispatchLoadCompleted(),this.isRequestMostRecentAndLive(e)&&(this.state=Nd.STATE_LOADED,this.processServerResult(i))}dispatchLoadCompleted(e=!0){const i={type:Nd.EVENT_LOAD_COMPLETE,success:e,block:this};this.dispatchEvent(i)}};Wg.EVENT_LOAD_COMPLETE="loadComplete";Wg.STATE_WAITING_TO_LOAD="needsLoading";Wg.STATE_LOADING="loading";Wg.STATE_LOADED="loaded";Wg.STATE_FAILED="failed";var za=Wg,Go=class extends ye{constructor(){super(...arguments),this.activeBlockLoadsCount=0,this.blocks=[],this.active=!0}postConstruct(){this.maxConcurrentRequests=this.getMaxConcurrentDatasourceRequests();const t=this.gos.get("blockLoadDebounceMillis");t&&t>0&&(this.checkBlockToLoadDebounce=Q.debounce(this.performCheckBlocksToLoad.bind(this),t))}setBeans(t){this.logger=t.create("RowNodeBlockLoader")}getMaxConcurrentDatasourceRequests(){const t=this.gos.get("maxConcurrentDatasourceRequests");if(t==null)return 2;if(!(t<=0))return t}addBlock(t){this.blocks.push(t),t.addEventListener(za.EVENT_LOAD_COMPLETE,this.loadComplete.bind(this)),this.checkBlockToLoad()}removeBlock(t){Q.removeFromArray(this.blocks,t)}destroy(){super.destroy(),this.active=!1}loadComplete(){this.activeBlockLoadsCount--,this.checkBlockToLoad(),this.dispatchEvent({type:Go.BLOCK_LOADED_EVENT}),this.activeBlockLoadsCount==0&&this.dispatchEvent({type:Go.BLOCK_LOADER_FINISHED_EVENT})}checkBlockToLoad(){this.checkBlockToLoadDebounce?this.checkBlockToLoadDebounce():this.performCheckBlocksToLoad()}performCheckBlocksToLoad(){if(!this.active)return;if(this.printCacheStatus(),this.maxConcurrentRequests!=null&&this.activeBlockLoadsCount>=this.maxConcurrentRequests){this.logger.log("checkBlockToLoad: max loads exceeded");return}const t=this.getAvailableLoadingCount(),e=this.blocks.filter(i=>i.getState()===za.STATE_WAITING_TO_LOAD).slice(0,t);this.registerLoads(e.length),e.forEach(i=>i.load()),this.printCacheStatus()}getBlockState(){if(this.gos.isRowModelType("serverSide"))return this.rowModel.getBlockStates();const t={};return this.blocks.forEach(e=>{const{id:i,state:s}=e.getBlockStateJson();t[i]=s}),t}printCacheStatus(){this.logger.isLogging()&&this.logger.log(`printCacheStatus: activePageLoadsCount = ${this.activeBlockLoadsCount}, blocks = ${JSON.stringify(this.getBlockState())}`)}isLoading(){return this.activeBlockLoadsCount>0}registerLoads(t){this.activeBlockLoadsCount+=t}getAvailableLoadingCount(){return this.maxConcurrentRequests!==void 0?this.maxConcurrentRequests-this.activeBlockLoadsCount:void 0}};Go.BLOCK_LOADED_EVENT="blockLoaded";Go.BLOCK_LOADER_FINISHED_EVENT="blockLoaderFinished";z([W("rowModel")],Go.prototype,"rowModel",2);z([de],Go.prototype,"postConstruct",1);z([oa(0,Zn("loggerFactory"))],Go.prototype,"setBeans",1);Go=z([Me("rowNodeBlockLoader")],Go);var ug=class extends ye{constructor(){super(...arguments),this.currentPage=0,this.topDisplayedRowIndex=0,this.bottomDisplayedRowIndex=0,this.pixelOffset=0,this.masterRowCount=0}postConstruct(){this.active=this.gos.get("pagination"),this.pageSizeFromGridOptions=this.gos.get("paginationPageSize"),this.paginateChildRows=this.isPaginateChildRows(),this.addManagedListener(this.eventService,K.EVENT_MODEL_UPDATED,this.onModelUpdated.bind(this)),this.addManagedPropertyListener("pagination",this.onPaginationGridOptionChanged.bind(this)),this.addManagedPropertyListener("paginationPageSize",this.onPageSizeGridOptionChanged.bind(this)),this.onModelUpdated()}ensureRowHeightsValid(t,e,i,s){const r=this.rowModel.ensureRowHeightsValid(t,e,this.getPageFirstRow(),this.getPageLastRow());return r&&this.calculatePages(),r}isPaginateChildRows(){return this.gos.get("groupRemoveSingleChildren")||this.gos.get("groupRemoveLowestSingleChildren")?!0:this.gos.get("paginateChildRows")}onModelUpdated(t){this.calculatePages();const e={type:K.EVENT_PAGINATION_CHANGED,animate:t?t.animate:!1,newData:t?t.newData:!1,newPage:t?t.newPage:!1,newPageSize:t?t.newPageSize:!1,keepRenderedRows:t?t.keepRenderedRows:!1};this.eventService.dispatchEvent(e)}onPaginationGridOptionChanged(){this.active=this.gos.get("pagination"),this.calculatePages();const t={type:K.EVENT_PAGINATION_CHANGED,animate:!1,newData:!1,newPage:!1,newPageSize:!1,keepRenderedRows:!0};this.eventService.dispatchEvent(t)}onPageSizeGridOptionChanged(){this.setPageSize(this.gos.get("paginationPageSize"),"gridOptions")}goToPage(t){if(!this.active||this.currentPage===t||typeof this.currentPage!="number")return;this.currentPage=t,this.calculatePages();const e={type:K.EVENT_PAGINATION_CHANGED,animate:!1,newData:!1,newPage:!0,newPageSize:!1,keepRenderedRows:!1};this.eventService.dispatchEvent(e)}getPixelOffset(){return this.pixelOffset}getRow(t){return this.rowModel.getRow(t)}getRowNode(t){return this.rowModel.getRowNode(t)}getRowIndexAtPixel(t){return this.rowModel.getRowIndexAtPixel(t)}getCurrentPageHeight(){return St(this.topRowBounds)||St(this.bottomRowBounds)?0:Math.max(this.bottomRowBounds.rowTop+this.bottomRowBounds.rowHeight-this.topRowBounds.rowTop,0)}getCurrentPagePixelRange(){const t=this.topRowBounds?this.topRowBounds.rowTop:0,e=this.bottomRowBounds?this.bottomRowBounds.rowTop+this.bottomRowBounds.rowHeight:0;return{pageFirstPixel:t,pageLastPixel:e}}isRowPresent(t){return this.rowModel.isRowPresent(t)?t.rowIndex>=this.topDisplayedRowIndex&&t.rowIndex<=this.bottomDisplayedRowIndex:!1}isEmpty(){return this.rowModel.isEmpty()}isRowsToRender(){return this.rowModel.isRowsToRender()}forEachNode(t){return this.rowModel.forEachNode(t)}forEachNodeOnPage(t){const e=this.getPageFirstRow(),i=this.getPageLastRow();for(let s=e;s<=i;s++){const r=this.getRow(s);r&&t(r)}}getType(){return this.rowModel.getType()}getRowBounds(t){const e=this.rowModel.getRowBounds(t);return e.rowIndex=t,e}getPageFirstRow(){return this.topRowBounds?this.topRowBounds.rowIndex:-1}getPageLastRow(){return this.bottomRowBounds?this.bottomRowBounds.rowIndex:-1}getRowCount(){return this.rowModel.getRowCount()}getPageForIndex(t){return Math.floor(t/this.pageSize)}goToPageWithIndex(t){if(!this.active)return;const e=this.getPageForIndex(t);this.goToPage(e)}isRowInPage(t){return this.active?this.getPageForIndex(t.rowIndex)===this.currentPage:!0}isLastPageFound(){return this.rowModel.isLastRowIndexKnown()}getCurrentPage(){return this.currentPage}goToNextPage(){this.goToPage(this.currentPage+1)}goToPreviousPage(){this.goToPage(this.currentPage-1)}goToFirstPage(){this.goToPage(0)}goToLastPage(){const t=this.rowModel.getRowCount(),e=Math.floor(t/this.pageSize);this.goToPage(e)}getPageSize(){return this.pageSize}getTotalPages(){return this.totalPages}setPage(t){this.currentPage=t}get pageSize(){return Pe(this.pageSizeAutoCalculated)?this.pageSizeAutoCalculated:Pe(this.pageSizeFromPageSizeSelector)?this.pageSizeFromPageSizeSelector:Pe(this.pageSizeFromInitialState)?this.pageSizeFromInitialState:Pe(this.pageSizeFromGridOptions)?this.pageSizeFromGridOptions:this.defaultPageSize}unsetAutoCalculatedPageSize(){if(this.pageSizeAutoCalculated===void 0)return;const t=this.pageSizeAutoCalculated;if(this.pageSizeAutoCalculated=void 0,this.pageSize===t)return;this.calculatePages();const e={type:K.EVENT_PAGINATION_CHANGED,animate:!1,newData:!1,newPage:!1,newPageSize:!0,keepRenderedRows:!1};this.eventService.dispatchEvent(e)}setPageSize(t,e){const i=this.pageSize;switch(e){case"autoCalculated":this.pageSizeAutoCalculated=t;break;case"pageSizeSelector":this.pageSizeFromPageSizeSelector=t,this.currentPage!==0&&this.goToFirstPage();break;case"initialState":this.pageSizeFromInitialState=t;break;case"gridOptions":this.pageSizeFromGridOptions=t,this.pageSizeFromInitialState=void 0,this.pageSizeFromPageSizeSelector=void 0,this.currentPage!==0&&this.goToFirstPage();break}if(i!==this.pageSize){this.calculatePages();const s={type:K.EVENT_PAGINATION_CHANGED,animate:!1,newData:!1,newPage:!1,newPageSize:!0,keepRenderedRows:!0};this.eventService.dispatchEvent(s)}}calculatePages(){this.active?this.paginateChildRows?this.calculatePagesAllRows():this.calculatePagesMasterRowsOnly():this.calculatedPagesNotActive(),this.topRowBounds=this.rowModel.getRowBounds(this.topDisplayedRowIndex),this.topRowBounds&&(this.topRowBounds.rowIndex=this.topDisplayedRowIndex),this.bottomRowBounds=this.rowModel.getRowBounds(this.bottomDisplayedRowIndex),this.bottomRowBounds&&(this.bottomRowBounds.rowIndex=this.bottomDisplayedRowIndex),this.setPixelOffset(Pe(this.topRowBounds)?this.topRowBounds.rowTop:0)}setPixelOffset(t){this.pixelOffset!==t&&(this.pixelOffset=t,this.eventService.dispatchEvent({type:K.EVENT_PAGINATION_PIXEL_OFFSET_CHANGED}))}setZeroRows(){this.masterRowCount=0,this.topDisplayedRowIndex=0,this.bottomDisplayedRowIndex=-1,this.currentPage=0,this.totalPages=0}adjustCurrentPageIfInvalid(){this.currentPage>=this.totalPages&&(this.currentPage=this.totalPages-1),(!isFinite(this.currentPage)||isNaN(this.currentPage)||this.currentPage<0)&&(this.currentPage=0)}calculatePagesMasterRowsOnly(){if(this.masterRowCount=this.rowModel.getTopLevelRowCount(),this.masterRowCount<=0){this.setZeroRows();return}const t=this.masterRowCount-1;this.totalPages=Math.floor(t/this.pageSize)+1,this.adjustCurrentPageIfInvalid();const e=this.pageSize*this.currentPage;let i=this.pageSize*(this.currentPage+1)-1;if(i>t&&(i=t),this.topDisplayedRowIndex=this.rowModel.getTopLevelRowDisplayedIndex(e),i===t)this.bottomDisplayedRowIndex=this.rowModel.getRowCount()-1;else{const s=this.rowModel.getTopLevelRowDisplayedIndex(i+1);this.bottomDisplayedRowIndex=s-1}}getMasterRowCount(){return this.masterRowCount}calculatePagesAllRows(){if(this.masterRowCount=this.rowModel.getRowCount(),this.masterRowCount===0){this.setZeroRows();return}const t=this.masterRowCount-1;this.totalPages=Math.floor(t/this.pageSize)+1,this.adjustCurrentPageIfInvalid(),this.topDisplayedRowIndex=this.pageSize*this.currentPage,this.bottomDisplayedRowIndex=this.pageSize*(this.currentPage+1)-1,this.bottomDisplayedRowIndex>t&&(this.bottomDisplayedRowIndex=t)}calculatedPagesNotActive(){this.setPageSize(void 0,"autoCalculated"),this.totalPages=1,this.currentPage=0,this.topDisplayedRowIndex=0,this.bottomDisplayedRowIndex=this.rowModel.getRowCount()-1}};z([W("rowModel")],ug.prototype,"rowModel",2);z([de],ug.prototype,"postConstruct",1);ug=z([Me("paginationProxy")],ug);var fy=class extends ye{processAllCellClasses(t,e,i,s){this.processClassRules(void 0,t.cellClassRules,e,i,s),this.processStaticCellClasses(t,e,i)}processClassRules(t,e,i,s,r){if(e==null&&t==null)return;const n={},o={},a=(l,c)=>{l.split(" ").forEach(u=>{u.trim()!=""&&c(u)})};if(e){const l=Object.keys(e);for(let c=0;c<l.length;c++){const u=l[c],d=e[u];let h;typeof d=="string"?h=this.expressionService.evaluate(d,i):typeof d=="function"&&(h=d(i)),a(u,p=>{h?n[p]=!0:o[p]=!0})}}t&&r&&Object.keys(t).forEach(l=>a(l,c=>{n[c]||(o[c]=!0)})),r&&Object.keys(o).forEach(r),Object.keys(n).forEach(s)}getStaticCellClasses(t,e){const{cellClass:i}=t;if(!i)return[];let s;return typeof i=="function"?s=i(e):s=i,typeof s=="string"&&(s=[s]),s||[]}processStaticCellClasses(t,e,i){this.getStaticCellClasses(t,e).forEach(r=>{i(r)})}};z([W("expressionService")],fy.prototype,"expressionService",2);fy=z([Me("stylingService")],fy);var ep=class extends Tc{constructor(t){super(t,"ag-toggle-button")}setValue(t,e){return super.setValue(t,e),this.addOrRemoveCssClass("ag-selected",this.getValue()),this}},t5=class extends ca{constructor(t){super(t,"ag-text-area",null,"textarea")}setValue(t,e){const i=super.setValue(t,e);return this.eInput.value=t,i}setCols(t){return this.eInput.cols=t,this}setRows(t){return this.eInput.rows=t,this}},YM=class extends vl{constructor(t){super(t,"ag-date-field","date")}postConstruct(){super.postConstruct(),this.addManagedListener(this.eInput,"wheel",this.onWheel.bind(this));const t=ol();this.addManagedListener(this.eInput,"mousedown",()=>{this.isDisabled()||t||this.eInput.focus()}),this.eInput.step="any"}onWheel(t){this.gos.getActiveDomElement()===this.eInput&&t.preventDefault()}setMin(t){var e;const i=t instanceof Date?(e=Fo(t??null,!1))!=null?e:void 0:t;return this.min===i?this:(this.min=i,il(this.eInput,"min",i),this)}setMax(t){var e;const i=t instanceof Date?(e=Fo(t??null,!1))!=null?e:void 0:t;return this.max===i?this:(this.max=i,il(this.eInput,"max",i),this)}setStep(t){return this.step===t?this:(this.step=t,il(this.eInput,"step",t),this)}getDate(){var t;if(this.eInput.validity.valid)return(t=Sn(this.getValue()))!=null?t:void 0}setDate(t,e){this.setValue(Fo(t??null,!1),e)}},i5=class extends ca{constructor(t){super(t,"ag-range-field","range")}postConstruct(){super.postConstruct();const{min:t,max:e,step:i}=this.config;t!=null&&this.setMinValue(t),e!=null&&this.setMaxValue(e),this.setStep(i||1)}addInputListeners(){this.addManagedListener(this.eInput,"input",t=>{const e=t.target.value;this.setValue(e)})}setMinValue(t){return this.min=t,this.eInput.setAttribute("min",t.toString()),this}setMaxValue(t){return this.max=t,this.eInput.setAttribute("max",t.toString()),this}setStep(t){return this.eInput.setAttribute("step",t.toString()),this}setValue(t,e){this.min!=null&&(t=Math.max(parseFloat(t),this.min).toString()),this.max!=null&&(t=Math.min(parseFloat(t),this.max).toString());const i=super.setValue(t,e);return this.eInput.value=t,i}},qM=class extends Te{constructor(t,e){super('<div class="ag-rich-select-row" role="presentation"></div>'),this.params=t,this.wrapperEl=e}postConstruct(){this.addManagedListener(this.getGui(),"click",this.onClick.bind(this))}setState(t){let e="";this.params.valueFormatter&&(e=this.params.valueFormatter(t)),this.populateWithRenderer(t,e)||this.populateWithoutRenderer(t,e),this.value=t}highlightString(t){const{parsedValue:e}=this;if(this.params.cellRenderer||!Pe(e))return;let i=Pe(t);if(i){const s=e==null?void 0:e.toLocaleLowerCase().indexOf(t.toLocaleLowerCase());if(s>=0){const r=s+t.length,n=Ts(e.slice(0,s),!0),o=Ts(e.slice(s,r),!0),a=Ts(e.slice(r));this.renderValueWithoutRenderer(`${n}<span class="ag-rich-select-row-text-highlight">${o}</span>${a}`)}else i=!1}i||this.renderValueWithoutRenderer(e)}updateHighlighted(t){var e;const i=this.getGui(),s=`ag-rich-select-row-${this.getCompId()}`;if((e=i.parentElement)==null||e.setAttribute("id",s),t){const r=this.getParentComponent().getAriaElement();iM(r,s),this.wrapperEl.setAttribute("data-active-option",s)}rg(i.parentElement,t),this.addOrRemoveCssClass("ag-rich-select-row-selected",t)}populateWithoutRenderer(t,e){const i=this.gos.getDocument(),s=this.getGui(),r=i.createElement("span");r.style.overflow="hidden",r.style.textOverflow="ellipsis";const n=Ts(Pe(e)?e:t,!0);this.parsedValue=Pe(n)?n:null,s.appendChild(r),this.renderValueWithoutRenderer(n),this.setTooltip({newTooltipText:this.parsedValue,shouldDisplayTooltip:()=>r.scrollWidth>r.clientWidth})}renderValueWithoutRenderer(t){const e=this.getGui().querySelector("span");e&&(e.innerHTML=Pe(t)?t:"&nbsp;")}populateWithRenderer(t,e){let i,s;return this.params.cellRenderer&&(s=this.userComponentFactory.getCellRendererDetails(this.params,{value:t,valueFormatted:e,setTooltip:(r,n)=>{this.setTooltip({newTooltipText:r,shouldDisplayTooltip:n})}})),s&&(i=s.newAgStackInstance()),i&&wM(i,this.getGui()),i?(i.then(r=>{this.addDestroyFunc(()=>{this.getContext().destroyBean(r)})}),!0):!1}onClick(){const t=this.getParentComponent(),e={type:K.EVENT_FIELD_PICKER_VALUE_SELECTED,fromEnterKey:!1,value:this.value};t==null||t.dispatchEvent(e)}};z([W("userComponentFactory")],qM.prototype,"userComponentFactory",2);z([de],qM.prototype,"postConstruct",1);var BC=class s5 extends yl{constructor(e){super(s5.getTemplate((e==null?void 0:e.cssIdentifier)||"default")),this.renderedRows=new Map,this.rowHeight=20,this.pageSize=-1,this.isScrolling=!1,this.isHeightFromTheme=!0;const{cssIdentifier:i="default",ariaRole:s="listbox",listName:r}=e||{};this.cssIdentifier=i,this.ariaRole=s,this.listName=r}postConstruct(){this.addScrollListener(),this.rowHeight=this.getItemHeight(),this.addResizeObserver(),this.initialiseTabGuard({onFocusIn:e=>this.onFocusIn(e),onFocusOut:e=>this.onFocusOut(e),focusInnerElement:e=>this.focusInnerElement(e),onTabKeyDown:e=>this.onTabKeyDown(e),handleKeyDown:e=>this.handleKeyDown(e)}),this.setAriaProperties(),this.addManagedListener(this.eventService,K.EVENT_GRID_STYLES_CHANGED,this.onGridStylesChanged.bind(this))}onGridStylesChanged(){this.rowHeight=this.getItemHeight(),this.refresh()}setAriaProperties(){const i=this.localeService.getLocaleTextFunc()("ariaDefaultListName",this.listName||"List"),s=this.eContainer;as(s,this.ariaRole),no(s,i)}addResizeObserver(){const e=()=>this.animationFrameService.requestAnimationFrame(()=>this.drawVirtualRows()),i=this.resizeObserverService.observeResize(this.getGui(),e);this.addDestroyFunc(i)}focusInnerElement(e){this.focusRow(e?this.model.getRowCount()-1:0)}onFocusIn(e){const i=e.target;i.classList.contains("ag-virtual-list-item")&&(this.lastFocusedRowIndex=J3(i)-1)}onFocusOut(e){this.getFocusableElement().contains(e.relatedTarget)||(this.lastFocusedRowIndex=null)}handleKeyDown(e){switch(e.key){case ce.UP:case ce.DOWN:this.navigate(e.key===ce.UP)&&e.preventDefault();break;case ce.PAGE_HOME:case ce.PAGE_END:case ce.PAGE_UP:case ce.PAGE_DOWN:this.navigateToPage(e.key)!==null&&e.preventDefault();break}}onTabKeyDown(e){this.navigate(e.shiftKey)?e.preventDefault():(va(e),this.forceFocusOutOfContainer(e.shiftKey))}navigate(e){if(this.lastFocusedRowIndex==null)return!1;const i=this.lastFocusedRowIndex+(e?-1:1);return i<0||i>=this.model.getRowCount()?!1:(this.focusRow(i),!0)}navigateToPage(e,i="focused"){let s=!1;i==="focused"&&(i=this.getLastFocusedRow(),s=!0);const r=this.model.getRowCount()-1;let n=-1;return e===ce.PAGE_HOME?n=0:e===ce.PAGE_END?n=r:e===ce.PAGE_DOWN?n=Math.min(i+this.pageSize,r):e===ce.PAGE_UP&&(n=Math.max(i-this.pageSize,0)),n===-1?null:(s?this.focusRow(n):this.ensureIndexVisible(n),n)}getLastFocusedRow(){return this.lastFocusedRowIndex}focusRow(e){this.isScrolling||(this.isScrolling=!0,this.ensureIndexVisible(e),this.animationFrameService.requestAnimationFrame(()=>{if(this.isScrolling=!1,!this.isAlive())return;const i=this.renderedRows.get(e);i&&i.eDiv.focus()}))}getComponentAt(e){const i=this.renderedRows.get(e);return i&&i.rowComponent}forEachRenderedRow(e){this.renderedRows.forEach((i,s)=>e(i.rowComponent,s))}static getTemplate(e){return`<div class="ag-virtual-list-viewport ag-${e}-virtual-list-viewport" role="presentation">
                <div class="ag-virtual-list-container ag-${e}-virtual-list-container" ref="eContainer"></div>
            </div>`}getItemHeight(){return this.isHeightFromTheme?this.environment.getListItemHeight():this.rowHeight}ensureIndexVisible(e,i=!0){const s=this.model.getRowCount();if(typeof e!="number"||e<0||e>=s)return console.warn("AG Grid: invalid row index for ensureIndexVisible: "+e),!1;const r=e*this.rowHeight,n=r+this.rowHeight,o=this.getGui(),a=o.scrollTop,l=o.offsetHeight,c=a+l,u=i?0:this.rowHeight,d=a>r+u,h=c<n-u;if(d)return o.scrollTop=r,!0;if(h){const p=n-l;return o.scrollTop=p,!0}return!1}setComponentCreator(e){this.componentCreator=e}setComponentUpdater(e){this.componentUpdater=e}getRowHeight(){return this.rowHeight}getScrollTop(){return this.getGui().scrollTop}setRowHeight(e){this.isHeightFromTheme=!1,this.rowHeight=e,this.refresh()}refresh(e){if(this.model==null||!this.isAlive())return;const i=this.model.getRowCount();this.eContainer.style.height=`${i*this.rowHeight}px`,KR(()=>this.eContainer.clientHeight>=i*this.rowHeight,()=>{this.isAlive()&&(this.canSoftRefresh(e)?this.drawVirtualRows(!0):(this.clearVirtualRows(),this.drawVirtualRows()))})}canSoftRefresh(e){return!!(e&&this.renderedRows.size&&typeof this.model.areRowsEqual=="function"&&this.componentUpdater)}clearVirtualRows(){this.renderedRows.forEach((e,i)=>this.removeRow(i))}drawVirtualRows(e){if(!this.isAlive()||!this.model)return;const i=this.getGui(),s=i.scrollTop,r=s+i.offsetHeight,n=Math.floor(s/this.rowHeight),o=Math.floor(r/this.rowHeight);this.pageSize=Math.floor((r-s)/this.rowHeight),this.ensureRowsRendered(n,o,e)}ensureRowsRendered(e,i,s){this.renderedRows.forEach((r,n)=>{(n<e||n>i)&&n!==this.lastFocusedRowIndex&&this.removeRow(n)}),s&&this.refreshRows();for(let r=e;r<=i;r++)this.renderedRows.has(r)||r<this.model.getRowCount()&&this.insertRow(r)}insertRow(e){const i=this.model.getRow(e),s=document.createElement("div");s.classList.add("ag-virtual-list-item",`ag-${this.cssIdentifier}-virtual-list-item`),as(s,this.ariaRole==="tree"?"treeitem":"option"),ax(s,this.model.getRowCount()),lx(s,e+1),s.setAttribute("tabindex","-1"),s.style.height=`${this.rowHeight}px`,s.style.top=`${this.rowHeight*e}px`;const r=this.componentCreator(i,s);r.addGuiEventListener("focusin",()=>this.lastFocusedRowIndex=e),s.appendChild(r.getGui()),this.renderedRows.has(e-1)?this.renderedRows.get(e-1).eDiv.insertAdjacentElement("afterend",s):this.renderedRows.has(e+1)?this.renderedRows.get(e+1).eDiv.insertAdjacentElement("beforebegin",s):this.eContainer.appendChild(s),this.renderedRows.set(e,{rowComponent:r,eDiv:s,value:i})}removeRow(e){const i=this.renderedRows.get(e);this.eContainer.removeChild(i.eDiv),this.destroyBean(i.rowComponent),this.renderedRows.delete(e)}refreshRows(){const e=this.model.getRowCount();this.renderedRows.forEach((i,s)=>{var r,n;if(s>=e)this.removeRow(s);else{const o=this.model.getRow(s);(n=(r=this.model).areRowsEqual)!=null&&n.call(r,i.value,o)?this.componentUpdater(o,i.rowComponent):this.removeRow(s)}})}addScrollListener(){this.addGuiEventListener("scroll",()=>this.drawVirtualRows(),{passive:!0})}setModel(e){this.model=e}getAriaElement(){return this.eContainer}destroy(){this.isAlive()&&(this.clearVirtualRows(),super.destroy())}};z([W("resizeObserverService")],BC.prototype,"resizeObserverService",2);z([W("animationFrameService")],BC.prototype,"animationFrameService",2);z([pe("eContainer")],BC.prototype,"eContainer",2);z([de],BC.prototype,"postConstruct",1);var tp=BC,FY=`
    <div class="ag-picker-field" role="presentation">
        <div ref="eLabel"></div>
            <div ref="eWrapper" class="ag-wrapper ag-picker-field-wrapper ag-rich-select-value ag-picker-collapsed">
            <div ref="eDisplayField" class="ag-picker-field-display"></div>
            <ag-input-text-field ref="eInput" class="ag-rich-select-field-input"></ag-input-text-field>
            <div ref="eIcon" class="ag-picker-field-icon" aria-hidden="true"></div>
        </div>
    </div>`,rd=class extends Ec{constructor(t){var e,i;super($i(it({pickerAriaLabelKey:"ariaLabelRichSelectField",pickerAriaLabelValue:"Rich Select Field",pickerType:"ag-list",className:"ag-rich-select",pickerIcon:"smallDown",ariaRole:"combobox",template:(e=t==null?void 0:t.template)!=null?e:FY,modalPicker:!1},t),{maxPickerHeight:(i=t==null?void 0:t.maxPickerHeight)!=null?i:"calc(var(--ag-row-height) * 6.5)"})),this.searchString="",this.highlightedItem=-1,this.lastRowHovered=-1,this.searchStringCreator=null;const{cellRowHeight:s,value:r,valueList:n,searchStringCreator:o}=t||{};s!=null&&(this.cellRowHeight=s),r!==void 0&&(this.value=r),n!=null&&(this.values=n),o&&(this.searchStringCreator=o)}postConstruct(){super.postConstruct(),this.createLoadingElement(),this.createListComponent();const{allowTyping:t,placeholder:e}=this.config;t?(this.eInput.setAutoComplete(!1).setInputPlaceholder(e),this.eDisplayField.classList.add("ag-hidden")):this.eInput.setDisplayed(!1),this.eWrapper.tabIndex=this.gos.get("tabIndex");const{searchDebounceDelay:i=300}=this.config;this.clearSearchString=qr(this.clearSearchString,i),this.renderSelectedValue(),t&&(this.eInput.onValueChange(s=>this.searchTextFromString(s)),this.addManagedListener(this.eWrapper,"focus",this.onWrapperFocus.bind(this))),this.addManagedListener(this.eWrapper,"focusout",this.onWrapperFocusOut.bind(this))}createLoadingElement(){const t=this.gos.getDocument(),e=this.localeService.getLocaleTextFunc(),i=t.createElement("div");i.classList.add("ag-loading-text"),i.innerText=e("loadingOoo","Loading..."),this.eLoading=i}createListComponent(){this.listComponent=this.createBean(new tp({cssIdentifier:"rich-select"})),this.listComponent.setComponentCreator(this.createRowComponent.bind(this));const t=(a,l)=>{};this.listComponent.setComponentUpdater(t),this.listComponent.setParentComponent(this),this.addManagedListener(this.listComponent,K.EVENT_FIELD_PICKER_VALUE_SELECTED,a=>{this.onListValueSelected(a.value,a.fromEnterKey)});const{cellRowHeight:e}=this;e&&this.listComponent.setRowHeight(e);const i=this.listComponent.getGui(),s=this.listComponent.getAriaElement();this.addManagedListener(i,"mousemove",this.onPickerMouseMove.bind(this)),this.addManagedListener(i,"mousedown",a=>a.preventDefault()),i.classList.add("ag-rich-select-list");const r=`ag-rich-select-list-${this.listComponent.getCompId()}`;s.setAttribute("id",r);const o=this.localeService.getLocaleTextFunc()(this.config.pickerAriaLabelKey,this.config.pickerAriaLabelValue);no(s,o),nM(this.eWrapper,s)}renderSelectedValue(){const{value:t,eDisplayField:e,config:i}=this,{allowTyping:s,initialInputValue:r}=this.config,n=this.config.valueFormatter?this.config.valueFormatter(t):t;if(s){this.eInput.setValue(r??n);return}let o;i.cellRenderer&&(o=this.userComponentFactory.getCellRendererDetails(this.config,{value:t,valueFormatted:n}));let a;if(o&&(a=o.newAgStackInstance()),a)Cs(e),wM(a,e),a.then(l=>{this.addDestroyFunc(()=>this.getContext().destroyBean(l))});else{if(Pe(this.value))e.innerText=n,e.classList.remove("ag-display-as-placeholder");else{const{placeholder:l}=i;Pe(l)?(e.innerHTML=`${Ts(l)}`,e.classList.add("ag-display-as-placeholder")):Cs(e)}this.setTooltip({newTooltipText:n??null,shouldDisplayTooltip:()=>this.eDisplayField.scrollWidth>this.eDisplayField.clientWidth})}}getCurrentValueIndex(){const{currentList:t,value:e}=this;if(e==null||!t)return-1;for(let i=0;i<t.length;i++)if(t[i]===e)return i;return-1}highlightFilterMatch(){var t;(t=this.listComponent)==null||t.forEachRenderedRow((e,i)=>{e.highlightString(this.searchString)})}highlightSelectedValue(t){var e;t==null&&(t=this.getCurrentValueIndex()),this.highlightedItem=t,(e=this.listComponent)==null||e.forEachRenderedRow((i,s)=>{const r=t===-1?!1:this.highlightedItem===s;i.updateHighlighted(r)})}setRowHeight(t){t!==this.cellRowHeight&&(this.cellRowHeight=t),this.listComponent&&this.listComponent.setRowHeight(t)}createPickerComponent(){const{values:t}=this;return t&&this.setValueList({valueList:t}),this.listComponent}setSearchStringCreator(t){this.searchStringCreator=t}setValueList(t){const{valueList:e,refresh:i}=t;this.listComponent&&this.currentList!==e&&(this.currentList=e,this.listComponent.setModel({getRowCount:()=>e.length,getRow:s=>e[s],areRowsEqual:(s,r)=>s===r}),i&&(this.values?this.listComponent.refresh(!0):(this.values=e,this.isPickerDisplayed&&this.showCurrentValueInPicker())))}showPicker(){super.showPicker(),this.showCurrentValueInPicker(),this.displayOrHidePicker()}showCurrentValueInPicker(){var t,e;if(!this.listComponent)return;if(!this.currentList){this.isPickerDisplayed&&this.eLoading&&this.listComponent.appendChild(this.eLoading);return}(t=this.eLoading)!=null&&t.offsetParent&&((e=this.eLoading.parentElement)==null||e.removeChild(this.eLoading));const i=this.getCurrentValueIndex();i!==-1?(this.listComponent.refresh(),this.listComponent.ensureIndexVisible(i),this.listComponent.refresh(!0),this.highlightSelectedValue(i)):this.listComponent.refresh()}beforeHidePicker(){this.highlightedItem=-1,super.beforeHidePicker()}onWrapperFocus(){if(!this.eInput)return;const t=this.eInput.getFocusableElement();t.focus(),t.select()}onWrapperFocusOut(t){this.eWrapper.contains(t.relatedTarget)||this.hidePicker()}buildSearchStringFromKeyboardEvent(t){let{key:e}=t;if(e===ce.BACKSPACE)this.searchString=this.searchString.slice(0,-1),e="";else if(!hx(t))return;t.preventDefault(),this.searchTextFromCharacter(e)}searchTextFromCharacter(t){this.searchString+=t,this.runSearch(),this.clearSearchString()}searchTextFromString(t){t==null&&(t=""),this.searchString=t,this.runSearch()}buildSearchStrings(t){const{valueFormatter:e=s=>s}=this.config;let i;return typeof t[0]=="number"||typeof t[0]=="string"?i=t.map(s=>e(s)):typeof t[0]=="object"&&this.searchStringCreator&&(i=this.searchStringCreator(t)),i}getSuggestionsAndFilteredValues(t,e){let i=[],s=[];if(!t.length)return{suggestions:i,filteredValues:s};const{searchType:r="fuzzy",filterList:n}=this.config;if(r==="fuzzy"){const o=SC(this.searchString,e,!0);i=o.values;const a=o.indices;if(n&&a.length)for(let l=0;l<a.length;l++)s.push(this.values[a[l]])}else i=e.filter((o,a)=>{const l=o.toLocaleLowerCase(),c=this.searchString.toLocaleLowerCase(),u=r==="match"?l.startsWith(c):l.indexOf(c)!==-1;return n&&u&&s.push(this.values[a]),u});return{suggestions:i,filteredValues:s}}filterListModel(t){const{filterList:e}=this.config;e&&(this.setValueList({valueList:t,refresh:!0}),this.alignPickerToComponent())}runSearch(){var t,e;const{values:i}=this,s=this.buildSearchStrings(i);if(!s){this.highlightSelectedValue(-1);return}const{suggestions:r,filteredValues:n}=this.getSuggestionsAndFilteredValues(this.searchString,s),{filterList:o,highlightMatch:a,searchType:l="fuzzy"}=this.config,c=n.length,u=!!(o&&this.searchString!=="");if(this.filterListModel(u?n:i),r.length){const d=u?0:s.indexOf(r[0]);this.selectListItem(d)}else if(this.highlightSelectedValue(-1),!u||c)(t=this.listComponent)==null||t.ensureIndexVisible(0);else if(u){this.getAriaElement().removeAttribute("data-active-option");const d=(e=this.listComponent)==null?void 0:e.getAriaElement();d&&iM(d,null)}a&&l!=="fuzzy"&&this.highlightFilterMatch(),this.displayOrHidePicker()}displayOrHidePicker(){var t;const e=(t=this.listComponent)==null?void 0:t.getGui(),i=this.currentList?this.currentList.length===0:!1;e==null||e.classList.toggle("ag-hidden",i)}clearSearchString(){this.searchString=""}selectListItem(t,e){if(!this.isPickerDisplayed||!this.currentList||!this.listComponent||t<0||t>=this.currentList.length)return;this.listComponent.ensureIndexVisible(t,!e)&&!e&&this.listComponent.refresh(!0),this.highlightSelectedValue(t)}setValue(t,e,i){const s=this.currentList?this.currentList.indexOf(t):-1;return s===-1?this:(this.value=t,i||this.selectListItem(s),this.renderSelectedValue(),super.setValue(t,e))}createRowComponent(t){const e=new qM(this.config,this.eWrapper);e.setParentComponent(this.listComponent),this.getContext().createBean(e),e.setState(t);const{highlightMatch:i,searchType:s="fuzzy"}=this.config;return i&&s!=="fuzzy"&&e.highlightString(this.searchString),e}getRowForMouseEvent(t){const{listComponent:e}=this;if(!e)return-1;const s=(e==null?void 0:e.getGui()).getBoundingClientRect(),r=e.getScrollTop(),n=t.clientY-s.top+r;return Math.floor(n/e.getRowHeight())}onPickerMouseMove(t){if(!this.listComponent)return;const e=this.getRowForMouseEvent(t);e!==-1&&e!=this.lastRowHovered&&(this.lastRowHovered=e,this.selectListItem(e,!0))}onNavigationKeyDown(t,e){t.preventDefault();const i=e===ce.DOWN;if(!this.isPickerDisplayed&&i){this.showPicker();return}const s=this.highlightedItem,n=s===-1?0:s+(i?1:-1);this.selectListItem(n)}onPageNavigation(t){var e;if(!this.isPickerDisplayed)return;const i=(e=this.listComponent)==null?void 0:e.navigateToPage(t,this.highlightedItem);i!=null&&this.animationFrameService.requestAnimationFrame(()=>{if(!this.isAlive())return null;this.highlightSelectedValue(i)})}onEnterKeyDown(t){this.isPickerDisplayed&&(t.preventDefault(),this.currentList&&this.onListValueSelected(this.currentList[this.highlightedItem],!0))}onTabKeyDown(){!this.isPickerDisplayed||!this.currentList||this.setValue(this.currentList[this.highlightedItem],!1,!0)}onListValueSelected(t,e){this.setValue(t,!1,!0),this.dispatchPickerEvent(t,e),this.hidePicker()}dispatchPickerEvent(t,e){const i={type:K.EVENT_FIELD_PICKER_VALUE_SELECTED,fromEnterKey:e,value:t};this.dispatchEvent(i)}getFocusableElement(){const{allowTyping:t}=this.config;return t?this.eInput.getFocusableElement():super.getFocusableElement()}onKeyDown(t){const e=t.key,{allowTyping:i}=this.config;switch(e){case ce.LEFT:case ce.RIGHT:i||t.preventDefault();break;case ce.PAGE_HOME:case ce.PAGE_END:if(i){t.preventDefault();const s=this.eInput.getInputElement(),r=e===ce.PAGE_HOME?0:s.value.length;s.setSelectionRange(r,r);break}case ce.PAGE_UP:case ce.PAGE_DOWN:t.preventDefault(),this.onPageNavigation(e);break;case ce.DOWN:case ce.UP:this.onNavigationKeyDown(t,e);break;case ce.ESCAPE:this.isPickerDisplayed&&(Fn(this.listComponent.getGui())&&(t.preventDefault(),va(t)),this.hidePicker());break;case ce.ENTER:this.onEnterKeyDown(t);break;case ce.TAB:this.onTabKeyDown();break;default:i||this.buildSearchStringFromKeyboardEvent(t)}}destroy(){this.listComponent&&(this.destroyBean(this.listComponent),this.listComponent=void 0),this.eLoading=void 0,super.destroy()}};z([W("userComponentFactory")],rd.prototype,"userComponentFactory",2);z([W("animationFrameService")],rd.prototype,"animationFrameService",2);z([pe("eInput")],rd.prototype,"eInput",2);var zg=class r5 extends TC{constructor(e){super(e,r5.TEMPLATE),this.labelAlignment="top"}init(){this.eSlider.addCssClass("ag-slider-field");const{minValue:e,maxValue:i,textFieldWidth:s,step:r,value:n,onValueChange:o}=this.config;e!=null&&this.setMinValue(e),i!=null&&this.setMaxValue(i),s!=null&&this.setTextFieldWidth(s),r!=null&&this.setStep(r),n!=null&&this.setValue(n),o!=null&&this.onValueChange(o)}onValueChange(e){const i=K.EVENT_FIELD_VALUE_CHANGED;return this.addManagedListener(this.eText,i,()=>{const s=parseFloat(this.eText.getValue());this.eSlider.setValue(s.toString(),!0),e(s||0)}),this.addManagedListener(this.eSlider,i,()=>{const s=this.eSlider.getValue();this.eText.setValue(s,!0),e(parseFloat(s))}),this}setSliderWidth(e){return this.eSlider.setWidth(e),this}setTextFieldWidth(e){return this.eText.setWidth(e),this}setMinValue(e){return this.eSlider.setMinValue(e),this.eText.setMin(e),this}setMaxValue(e){return this.eSlider.setMaxValue(e),this.eText.setMax(e),this}getValue(){return this.eText.getValue()}setValue(e,i){return this.getValue()===e?this:(this.eText.setValue(e,!0),this.eSlider.setValue(e,!0),i||this.dispatchEvent({type:K.EVENT_FIELD_VALUE_CHANGED}),this)}setStep(e){return this.eSlider.setStep(e),this.eText.setStep(e),this}};zg.TEMPLATE=`<div class="ag-slider">
            <label ref="eLabel"></label>
            <div class="ag-wrapper ag-slider-wrapper">
                <ag-input-range ref="eSlider"></ag-input-range>
                <ag-input-number-field ref="eText"></ag-input-number-field>
            </div>
        </div>`;z([pe("eLabel")],zg.prototype,"eLabel",2);z([pe("eSlider")],zg.prototype,"eSlider",2);z([pe("eText")],zg.prototype,"eText",2);z([de],zg.prototype,"init",1);var Yn=zg,nd=class Op extends Te{constructor(e={}){super(Op.getTemplate(e)),this.params=e,this.suppressEnabledCheckbox=!0,this.suppressToggleExpandOnEnableChange=!1;const{enabled:i,items:s,suppressEnabledCheckbox:r,expanded:n,suppressToggleExpandOnEnableChange:o,useToggle:a}=e;this.cssIdentifier=e.cssIdentifier||"default",this.enabled=i??!0,this.items=s||[],this.useToggle=a??!1,this.alignItems=e.alignItems||"center",this.expanded=n??!0,r!=null&&(this.suppressEnabledCheckbox=r),o!=null&&(this.suppressToggleExpandOnEnableChange=o)}static getTemplate(e){const i=e.cssIdentifier||"default",s=e.direction||"vertical";return`
            <div class="ag-group ag-${i}-group" role="presentation">
                <div ref="eToolbar" class="ag-group-toolbar ag-${i}-group-toolbar">
                    <ag-checkbox ref="cbGroupEnabled"></ag-checkbox>
                </div>
                <div ref="eContainer" class="ag-group-container ag-group-container-${s} ag-${i}-group-container"></div>
            </div>
        `}postConstruct(){if(this.setupTitleBar(),this.items.length){const r=this.items;this.items=[],this.addItems(r)}const e=this.localeService.getLocaleTextFunc();this.cbGroupEnabled.setLabel(e("enabled","Enabled")),this.enabled&&this.setEnabled(this.enabled,void 0,!0),this.setAlignItems(this.alignItems);const{onEnableChange:i,suppressOpenCloseIcons:s}=this.params;this.hideEnabledCheckbox(this.suppressEnabledCheckbox),this.hideOpenCloseIcons(s??!1),this.refreshChildDisplay(),Qt(this.eContainer,this.expanded),this.cbGroupEnabled.onValueChange(r=>{this.setEnabled(r,!0,this.suppressToggleExpandOnEnableChange),this.dispatchEnableChangeEvent(r)}),i!=null&&this.onEnableChange(i)}refreshChildDisplay(){var e;Qt(this.eToolbar,this.expanded&&!this.suppressEnabledCheckbox),(e=this.eTitleBar)==null||e.refreshOnExpand(this.expanded)}isExpanded(){return this.expanded}setAlignItems(e){this.alignItems!==e&&this.removeCssClass(`ag-group-item-alignment-${this.alignItems}`),this.alignItems=e;const i=`ag-group-item-alignment-${this.alignItems}`;return this.addCssClass(i),this}toggleGroupExpand(e){var i;let s=!1;if((i=this.eTitleBar)!=null&&i.isSuppressCollapse()&&!this.useToggle)e=!0,s=!0;else if(e=e??!this.expanded,this.expanded===e)return this;return this.expanded=e,this.refreshChildDisplay(),Qt(this.eContainer,e),s||this.dispatchEvent({type:e?Op.EVENT_EXPANDED:Op.EVENT_COLLAPSED}),this}addItems(e){e.forEach(i=>this.addItem(i))}prependItem(e){this.insertItem(e,!0)}addItem(e){this.insertItem(e,!1)}insertItem(e,i){const s=this.eContainer,r=e instanceof Te?e.getGui():e;r.classList.add("ag-group-item",`ag-${this.cssIdentifier}-group-item`),i?(s.insertAdjacentElement("afterbegin",r),this.items.unshift(r)):(s.appendChild(r),this.items.push(r))}hideItem(e,i){const s=this.items[i];Qt(s,!e)}getItemIndex(e){const i=e instanceof Te?e.getGui():e;return this.items.indexOf(i)}setTitle(e){var i;return(i=this.eTitleBar)==null||i.setTitle(e),this}addTitleBarWidget(e){var i;return(i=this.eTitleBar)==null||i.addWidget(e),this}addCssClassToTitleBar(e){var i;(i=this.eTitleBar)==null||i.addCssClass(e)}dispatchEnableChangeEvent(e){const i={type:Op.EVENT_ENABLE_CHANGE,enabled:e};this.dispatchEvent(i)}setEnabled(e,i,s){var r;return this.enabled=e,this.refreshDisabledStyles(),s||this.toggleGroupExpand(e),i||(this.cbGroupEnabled.setValue(e),(r=this.eToggle)==null||r.setValue(e)),this}isEnabled(){return this.enabled}onEnableChange(e){return this.addManagedListener(this,Op.EVENT_ENABLE_CHANGE,i=>e(i.enabled)),this}hideEnabledCheckbox(e){return this.suppressEnabledCheckbox=e,this.refreshChildDisplay(),this.refreshDisabledStyles(),this}hideOpenCloseIcons(e){var i;return(i=this.eTitleBar)==null||i.hideOpenCloseIcons(e),this}refreshDisabledStyles(){var e;const i=!this.enabled;this.eContainer.classList.toggle("ag-disabled",i),(e=this.eTitleBar)==null||e.refreshDisabledStyles(this.suppressEnabledCheckbox&&i),this.eContainer.classList.toggle("ag-disabled-group-container",i)}setupTitleBar(){const e=this.useToggle?this.createToggleTitleBar():this.createDefaultTitleBar();this.eToolbar.insertAdjacentElement("beforebegin",e.getGui())}createDefaultTitleBar(){const e=this.createManagedBean(new gF(this.params));return this.eTitleBar=e,e.refreshOnExpand(this.expanded),this.addManagedListener(e,gF.EVENT_EXPAND_CHANGED,i=>this.toggleGroupExpand(i.expanded)),e}createToggleTitleBar(){var e;const i=this.createManagedBean(new ep({value:this.enabled,label:this.params.title,labelAlignment:"left",labelWidth:"flex",onValueChange:s=>{this.setEnabled(s,!0),this.dispatchEnableChangeEvent(s)}}));return i.addCssClass("ag-group-title-bar"),i.addCssClass(`ag-${(e=this.params.cssIdentifier)!=null?e:"default"}-group-title-bar ag-unselectable`),this.eToggle=i,this.toggleGroupExpand(this.enabled),i}};nd.EVENT_EXPANDED="expanded";nd.EVENT_COLLAPSED="collapsed";nd.EVENT_ENABLE_CHANGE="enableChange";z([pe("eToolbar")],nd.prototype,"eToolbar",2);z([pe("cbGroupEnabled")],nd.prototype,"cbGroupEnabled",2);z([pe("eContainer")],nd.prototype,"eContainer",2);z([de],nd.prototype,"postConstruct",1);var Bo=nd,U1="ag-disabled-group-title-bar",$g=class G_ extends Te{constructor(e={}){super(G_.getTemplate(e)),this.suppressOpenCloseIcons=!1;const{title:i,suppressOpenCloseIcons:s}=e;i&&i.length>0&&(this.title=i),s!=null&&(this.suppressOpenCloseIcons=s)}static getTemplate(e){var i;const s=(i=e.cssIdentifier)!=null?i:"default";return`
            <div class="ag-group-title-bar ag-${s}-group-title-bar ag-unselectable" role="button">
                <span class="ag-group-title-bar-icon ag-${s}-group-title-bar-icon" ref="eGroupOpenedIcon" role="presentation"></span>
                <span class="ag-group-title-bar-icon ag-${s}-group-title-bar-icon" ref="eGroupClosedIcon" role="presentation"></span>
                <span ref="eTitle" class="ag-group-title ag-${s}-group-title"></span>
            </div>
        `}postConstruct(){this.setTitle(this.title),this.hideOpenCloseIcons(this.suppressOpenCloseIcons),this.setupExpandContract()}setupExpandContract(){this.eGroupClosedIcon.appendChild(To("columnSelectClosed",this.gos,null)),this.eGroupOpenedIcon.appendChild(To("columnSelectOpen",this.gos,null)),this.addManagedListener(this.getGui(),"click",()=>this.dispatchExpandChanged()),this.addManagedListener(this.getGui(),"keydown",e=>{switch(e.key){case ce.ENTER:case ce.SPACE:e.preventDefault(),this.dispatchExpandChanged();break;case ce.RIGHT:case ce.LEFT:e.preventDefault(),this.dispatchExpandChanged(e.key===ce.RIGHT);break}})}refreshOnExpand(e){this.refreshAriaStatus(e),this.refreshOpenCloseIcons(e)}refreshAriaStatus(e){this.suppressOpenCloseIcons||nc(this.getGui(),e)}refreshOpenCloseIcons(e){const i=!this.suppressOpenCloseIcons;Qt(this.eGroupOpenedIcon,i&&e),Qt(this.eGroupClosedIcon,i&&!e)}isSuppressCollapse(){return this.suppressOpenCloseIcons}dispatchExpandChanged(e){const i={type:G_.EVENT_EXPAND_CHANGED,expanded:e};this.dispatchEvent(i)}setTitle(e){const i=this.getGui(),s=!!e&&e.length>0;e=s?e:void 0,this.eTitle.textContent=e??"",Qt(i,s),e!==this.title&&(this.title=e);const r=i.classList.contains(U1);return this.refreshDisabledStyles(r),this}addWidget(e){return this.getGui().appendChild(e),this}hideOpenCloseIcons(e){return this.suppressOpenCloseIcons=e,e&&this.dispatchExpandChanged(!0),this}refreshDisabledStyles(e){const i=this.getGui();e?(i.classList.add(U1),i.removeAttribute("tabindex")):(i.classList.remove(U1),typeof this.title=="string"?i.setAttribute("tabindex","0"):i.removeAttribute("tabindex"))}};$g.EVENT_EXPAND_CHANGED="expandedChanged";z([pe("eGroupOpenedIcon")],$g.prototype,"eGroupOpenedIcon",2);z([pe("eGroupClosedIcon")],$g.prototype,"eGroupClosedIcon",2);z([pe("eTitle")],$g.prototype,"eTitle",2);z([de],$g.prototype,"postConstruct",1);var gF=$g,od=class extends yl{constructor(t=0,e){super('<div class="ag-menu-list" role="tree"></div>'),this.level=t,this.menuItems=[],this.params=e??{column:null,node:null,value:null}}postConstruct(){this.initialiseTabGuard({onTabKeyDown:t=>this.onTabKeyDown(t),handleKeyDown:t=>this.handleKeyDown(t),onFocusIn:t=>this.handleFocusIn(t),onFocusOut:t=>this.handleFocusOut(t)})}onTabKeyDown(t){const e=this.getParentComponent(),i=e&&e.getGui();i&&i.classList.contains("ag-focus-managed")||t.preventDefault(),t.shiftKey&&this.closeIfIsChild(t)}handleKeyDown(t){switch(t.key){case ce.UP:case ce.RIGHT:case ce.DOWN:case ce.LEFT:t.preventDefault(),this.handleNavKey(t.key);break;case ce.ESCAPE:this.closeIfIsChild()&&va(t);break}}handleFocusIn(t){var e,i;const s=t.relatedTarget;!this.tabGuardCtrl.isTabGuard(s)&&(this.getGui().contains(s)||(i=(e=this.activeMenuItem)==null?void 0:e.getSubMenuGui())!=null&&i.contains(s))||(this.activeMenuItem?this.activeMenuItem.activate():this.activateFirstItem())}handleFocusOut(t){var e;const i=t.relatedTarget;!this.activeMenuItem||this.getGui().contains(i)||(e=this.activeMenuItem.getSubMenuGui())!=null&&e.contains(i)||this.activeMenuItem.isSubMenuOpening()||this.activeMenuItem.deactivate()}clearActiveItem(){this.activeMenuItem&&(this.activeMenuItem.deactivate(),this.activeMenuItem=null)}addMenuItems(t){t!=null&&Ft.all(t.map(e=>e==="separator"?Ft.resolve({eGui:this.createSeparator()}):typeof e=="string"?(console.warn(`AG Grid: unrecognised menu item ${e}`),Ft.resolve({eGui:null})):this.addItem(e))).then(e=>{e.forEach(i=>{i!=null&&i.eGui&&(this.appendChild(i.eGui),i.comp&&this.menuItems.push(i.comp))})})}addItem(t){const e=this.createManagedBean(new Jn);return e.init({menuItemDef:t,isAnotherSubMenuOpen:()=>this.menuItems.some(i=>i.isSubMenuOpen()),level:this.level,contextParams:this.params}).then(()=>(e.setParentComponent(this),this.addManagedListener(e,Jn.EVENT_CLOSE_MENU,i=>{this.dispatchEvent(i)}),this.addManagedListener(e,Jn.EVENT_MENU_ITEM_ACTIVATED,i=>{this.activeMenuItem&&this.activeMenuItem!==i.menuItem&&this.activeMenuItem.deactivate(),this.activeMenuItem=i.menuItem}),{comp:e,eGui:e.getGui()}))}activateFirstItem(){const t=this.menuItems.filter(e=>!e.isDisabled())[0];t&&t.activate()}createSeparator(){return xn(`
            <div class="ag-menu-separator" aria-hidden="true">
                <div class="ag-menu-separator-part"></div>
                <div class="ag-menu-separator-part"></div>
                <div class="ag-menu-separator-part"></div>
                <div class="ag-menu-separator-part"></div>
            </div>`)}handleNavKey(t){switch(t){case ce.UP:case ce.DOWN:const i=this.findNextItem(t===ce.UP);i&&i!==this.activeMenuItem&&i.activate();return}const e=this.gos.get("enableRtl")?ce.RIGHT:ce.LEFT;t===e?this.closeIfIsChild():this.openChild()}closeIfIsChild(t){const e=this.getParentComponent();return e&&e instanceof Jn?(t&&t.preventDefault(),e.closeSubMenu(),e.getGui().focus(),!0):!1}openChild(){this.activeMenuItem&&this.activeMenuItem.openSubMenu(!0)}findNextItem(t){const e=this.menuItems.filter(r=>!r.isDisabled());if(!e.length)return;if(!this.activeMenuItem)return t?di(e):e[0];t&&e.reverse();let i,s=!1;for(let r=0;r<e.length;r++){const n=e[r];if(!s){n===this.activeMenuItem&&(s=!0);continue}i=n;break}return s&&!i?e[0]:i||this.activeMenuItem}destroy(){this.clearActiveItem(),super.destroy()}};z([W("focusService")],od.prototype,"focusService",2);z([de],od.prototype,"postConstruct",1);var XM=class extends yl{constructor(t){super(),this.wrappedComponent=t,this.setTemplateFromElement(t.getGui())}postConstruct(){this.initialiseTabGuard({onTabKeyDown:t=>this.onTabKeyDown(t),handleKeyDown:t=>this.handleKeyDown(t)})}handleKeyDown(t){t.key===ce.ESCAPE&&this.closePanel()}onTabKeyDown(t){t.defaultPrevented||(this.closePanel(),t.preventDefault())}closePanel(){const t=this.parentComponent;t.closeSubMenu(),setTimeout(()=>t.getGui().focus(),0)}};z([de],XM.prototype,"postConstruct",1);var Kg=class Gp extends ye{constructor(){super(...arguments),this.isActive=!1,this.subMenuIsOpen=!1,this.subMenuIsOpening=!1,this.suppressRootStyles=!0,this.suppressAria=!0,this.suppressFocus=!0}init(e){var i,s;const{menuItemDef:r,isAnotherSubMenuOpen:n,level:o,childComponent:a,contextParams:l}=e;return this.params=e.menuItemDef,this.level=o,this.isAnotherSubMenuOpen=n,this.childComponent=a,this.contextParams=l,this.cssClassPrefix=(s=(i=this.params.menuItemParams)==null?void 0:i.cssClassPrefix)!=null?s:"ag-menu-option",this.userComponentFactory.getMenuItemCompDetails(this.params,$i(it({},r),{level:o,isAnotherSubMenuOpen:n,openSubMenu:u=>this.openSubMenu(u),closeSubMenu:()=>this.closeSubMenu(),closeMenu:u=>this.closeMenu(u),updateTooltip:(u,d)=>this.refreshTooltip(u,d),onItemActivated:()=>this.onItemActivated()})).newAgStackInstance().then(u=>{var d;this.menuItemComp=u;const h=(d=u.configureDefaults)==null?void 0:d.call(u);h&&this.configureDefaults(h===!0?void 0:h)})}addListeners(e,i){i!=null&&i.suppressClick||this.addManagedListener(e,"click",s=>this.onItemSelected(s)),i!=null&&i.suppressKeyboardSelect||this.addManagedListener(e,"keydown",s=>{(s.key===ce.ENTER||s.key===ce.SPACE)&&(s.preventDefault(),this.onItemSelected(s))}),i!=null&&i.suppressMouseDown||this.addManagedListener(e,"mousedown",s=>{s.stopPropagation(),s.preventDefault()}),i!=null&&i.suppressMouseOver||(this.addManagedListener(e,"mouseenter",()=>this.onMouseEnter()),this.addManagedListener(e,"mouseleave",()=>this.onMouseLeave()))}isDisabled(){return!!this.params.disabled}openSubMenu(e=!1){var i,s;if(this.closeSubMenu(),!this.params.subMenu)return;this.subMenuIsOpening=!0;const r=xn('<div class="ag-menu" role="presentation"></div>');this.eSubMenuGui=r;let n,o=()=>{this.subMenuIsOpening=!1};if(this.childComponent){const u=this.createBean(new XM(this.childComponent));u.setParentComponent(this);const d=u.getGui(),h="mouseenter",p=()=>this.cancelDeactivate();d.addEventListener(h,p),n=()=>d.removeEventListener(h,p),r.appendChild(d),this.childComponent.afterGuiAttached&&(o=()=>{this.childComponent.afterGuiAttached(),this.subMenuIsOpening=!1})}else if(this.params.subMenu){const u=this.createBean(new od(this.level+1,this.contextParams));u.setParentComponent(this),u.addMenuItems(this.params.subMenu),r.appendChild(u.getGui()),this.addManagedListener(u,Gp.EVENT_CLOSE_MENU,d=>this.dispatchEvent(d)),u.addGuiEventListener("mouseenter",()=>this.cancelDeactivate()),n=()=>this.destroyBean(u),e&&(o=()=>{u.activateFirstItem(),this.subMenuIsOpening=!1})}const a=this.popupService.positionPopupForMenu.bind(this.popupService,{eventSource:this.eGui,ePopup:r}),l=this.localeService.getLocaleTextFunc(),c=this.popupService.addPopup({modal:!0,eChild:r,positionCallback:a,anchorToElement:this.eGui,ariaLabel:l("ariaLabelSubMenu","SubMenu"),afterGuiAttached:o});this.subMenuIsOpen=!0,this.setAriaExpanded(!0),this.hideSubMenu=()=>{var u,d;c&&c.hideFunc(),this.subMenuIsOpen=!1,this.setAriaExpanded(!1),n(),(d=(u=this.menuItemComp).setExpanded)==null||d.call(u,!1),this.eSubMenuGui=void 0},(s=(i=this.menuItemComp).setExpanded)==null||s.call(i,!0)}setAriaExpanded(e){this.suppressAria||nc(this.eGui,e)}closeSubMenu(){this.hideSubMenu&&(this.hideSubMenu(),this.hideSubMenu=null,this.setAriaExpanded(!1))}isSubMenuOpen(){return this.subMenuIsOpen}isSubMenuOpening(){return this.subMenuIsOpening}activate(e){var i,s;this.cancelActivate(),!this.params.disabled&&(this.isActive=!0,this.suppressRootStyles||this.eGui.classList.add(`${this.cssClassPrefix}-active`),(s=(i=this.menuItemComp).setActive)==null||s.call(i,!0),this.suppressFocus||this.eGui.focus({preventScroll:!0}),e&&this.params.subMenu&&window.setTimeout(()=>{this.isAlive()&&this.isActive&&this.openSubMenu()},300),this.onItemActivated())}deactivate(){var e,i;this.cancelDeactivate(),this.suppressRootStyles||this.eGui.classList.remove(`${this.cssClassPrefix}-active`),(i=(e=this.menuItemComp).setActive)==null||i.call(e,!1),this.isActive=!1,this.subMenuIsOpen&&this.hideSubMenu()}getGui(){return this.menuItemComp.getGui()}getParentComponent(){return this.parentComponent}setParentComponent(e){this.parentComponent=e}getSubMenuGui(){return this.eSubMenuGui}onItemSelected(e){var i,s;(s=(i=this.menuItemComp).select)==null||s.call(i),this.params.action?this.getFrameworkOverrides().wrapOutgoing(()=>this.params.action(this.gos.addGridCommonParams(it({},this.contextParams)))):this.openSubMenu(e&&e.type==="keydown"),!(this.params.subMenu&&!this.params.action||this.params.suppressCloseOnSelect)&&this.closeMenu(e)}closeMenu(e){const i={type:Gp.EVENT_CLOSE_MENU};e&&(e instanceof MouseEvent?i.mouseEvent=e:i.keyboardEvent=e),this.dispatchEvent(i)}onItemActivated(){const e={type:Gp.EVENT_MENU_ITEM_ACTIVATED,menuItem:this};this.dispatchEvent(e)}cancelActivate(){this.activateTimeoutId&&(window.clearTimeout(this.activateTimeoutId),this.activateTimeoutId=0)}cancelDeactivate(){this.deactivateTimeoutId&&(window.clearTimeout(this.deactivateTimeoutId),this.deactivateTimeoutId=0)}onMouseEnter(){this.cancelDeactivate(),this.isAnotherSubMenuOpen()?this.activateTimeoutId=window.setTimeout(()=>this.activate(!0),Gp.ACTIVATION_DELAY):this.activate(!0)}onMouseLeave(){this.cancelActivate(),this.isSubMenuOpen()?this.deactivateTimeoutId=window.setTimeout(()=>this.deactivate(),Gp.ACTIVATION_DELAY):this.deactivate()}configureDefaults(e){var i,s,r;if(!this.menuItemComp){setTimeout(()=>this.configureDefaults(e));return}let n=this.menuItemComp.getGui();const o=(s=(i=this.menuItemComp).getRootElement)==null?void 0:s.call(i);o&&(e!=null&&e.suppressRootStyles||n.classList.add("ag-menu-option-custom"),n=o),this.eGui=n,this.suppressRootStyles=!!(e!=null&&e.suppressRootStyles),this.suppressRootStyles||(n.classList.add(this.cssClassPrefix),(r=this.params.cssClasses)==null||r.forEach(a=>n.classList.add(a)),this.params.disabled&&n.classList.add(`${this.cssClassPrefix}-disabled`)),e!=null&&e.suppressTooltip||this.refreshTooltip(this.params.tooltip),this.suppressAria=!!(e!=null&&e.suppressAria),this.suppressAria||(as(n,"treeitem"),iG(n,this.level+1),this.params.disabled&&tM(n,!0)),e!=null&&e.suppressTabIndex||n.setAttribute("tabindex","-1"),this.params.disabled||this.addListeners(n,e),this.suppressFocus=!!(e!=null&&e.suppressFocus)}refreshTooltip(e,i){this.tooltip=e,this.tooltipFeature&&(this.tooltipFeature=this.destroyBean(this.tooltipFeature)),!(!e||!this.menuItemComp)&&(this.tooltipFeature=this.createBean(new hr({getGui:()=>this.getGui(),getTooltipValue:()=>this.tooltip,getLocation:()=>"menu",shouldDisplayTooltip:i})))}destroy(){this.tooltipFeature&&(this.tooltipFeature=this.destroyBean(this.tooltipFeature)),super.destroy()}};Kg.EVENT_CLOSE_MENU="closeMenu";Kg.EVENT_MENU_ITEM_ACTIVATED="menuItemActivated";Kg.ACTIVATION_DELAY=80;z([W("popupService")],Kg.prototype,"popupService",2);z([W("userComponentFactory")],Kg.prototype,"userComponentFactory",2);var Jn=Kg,ip=class B_ extends Te{constructor(e){super(B_.getTemplate(e)),this.config=e,this.closable=!0}static getTemplate(e){const i=e.cssIdentifier||"default";return`<div class="ag-panel ag-${i}-panel" tabindex="-1">
            <div ref="eTitleBar" class="ag-panel-title-bar ag-${i}-panel-title-bar ag-unselectable">
                <span ref="eTitle" class="ag-panel-title-bar-title ag-${i}-panel-title-bar-title"></span>
                <div ref="eTitleBarButtons" class="ag-panel-title-bar-buttons ag-${i}-panel-title-bar-buttons"></div>
            </div>
            <div ref="eContentWrapper" class="ag-panel-content-wrapper ag-${i}-panel-content-wrapper"></div>
        </div>`}postConstruct(){const{component:e,closable:i,hideTitleBar:s,title:r,minWidth:n=250,width:o,minHeight:a=250,height:l,centered:c,popup:u,x:d,y:h}=this.config;this.positionableFeature=new Qu(this.getGui(),{minWidth:n,width:o,minHeight:a,height:l,centered:c,x:d,y:h,popup:u,calculateTopBuffer:()=>this.positionableFeature.getHeight()-this.getBodyHeight()}),this.createManagedBean(this.positionableFeature);const p=this.getGui();e&&this.setBodyComponent(e),s?Qt(this.eTitleBar,!1):(r&&this.setTitle(r),this.setClosable(i??this.closable)),this.addManagedListener(this.eTitleBar,"mousedown",f=>{if(p.contains(f.relatedTarget)||p.contains(this.gos.getActiveDomElement())||this.eTitleBarButtons.contains(f.target)){f.preventDefault();return}const m=this.eContentWrapper.querySelector("button, [href], input, select, textarea, [tabindex]");m&&m.focus()}),!(u&&this.positionableFeature.isPositioned())&&(this.renderComponent&&this.renderComponent(),this.positionableFeature.initialisePosition(),this.eContentWrapper.style.height="0")}renderComponent(){const e=this.getGui();e.focus(),this.close=()=>{e.parentElement.removeChild(e),this.destroy()}}getHeight(){return this.positionableFeature.getHeight()}setHeight(e){this.positionableFeature.setHeight(e)}getWidth(){return this.positionableFeature.getWidth()}setWidth(e){this.positionableFeature.setWidth(e)}setClosable(e){if(e!==this.closable&&(this.closable=e),e){const i=this.closeButtonComp=new Te(B_.CLOSE_BTN_TEMPLATE);this.getContext().createBean(i);const s=i.getGui(),r=ts("close",this.gos);r.classList.add("ag-panel-title-bar-button-icon"),s.appendChild(r),this.addTitleBarButton(i),i.addManagedListener(s,"click",this.onBtClose.bind(this))}else if(this.closeButtonComp){const i=this.closeButtonComp.getGui();i.parentElement.removeChild(i),this.closeButtonComp=this.destroyBean(this.closeButtonComp)}}setBodyComponent(e){e.setParentComponent(this),this.eContentWrapper.appendChild(e.getGui())}addTitleBarButton(e,i){const s=this.eTitleBarButtons,r=s.children,n=r.length;i==null&&(i=n),i=Math.max(0,Math.min(i,n)),e.addCssClass("ag-panel-title-bar-button");const o=e.getGui();i===0?s.insertAdjacentElement("afterbegin",o):i===n?s.insertAdjacentElement("beforeend",o):r[i-1].insertAdjacentElement("afterend",o),e.setParentComponent(this)}getBodyHeight(){return bC(this.eContentWrapper)}getBodyWidth(){return zh(this.eContentWrapper)}setTitle(e){this.eTitle.innerText=e}onBtClose(){this.close()}destroy(){this.closeButtonComp&&(this.closeButtonComp=this.destroyBean(this.closeButtonComp));const e=this.getGui();e&&Fn(e)&&this.close(),super.destroy()}};ip.CLOSE_BTN_TEMPLATE='<div class="ag-button"></div>';z([pe("eContentWrapper")],ip.prototype,"eContentWrapper",2);z([pe("eTitleBar")],ip.prototype,"eTitleBar",2);z([pe("eTitleBarButtons")],ip.prototype,"eTitleBarButtons",2);z([pe("eTitle")],ip.prototype,"eTitle",2);z([de],ip.prototype,"postConstruct",1);var ZM=ip,lc=class extends ZM{constructor(t){super($i(it({},t),{popup:!0})),this.isMaximizable=!1,this.isMaximized=!1,this.maximizeListeners=[],this.resizeListenerDestroy=null,this.lastPosition={x:0,y:0,width:0,height:0}}postConstruct(){const t=this.getGui(),{movable:e,resizable:i,maximizable:s}=this.config;this.addCssClass("ag-dialog"),super.postConstruct(),this.addManagedListener(t,"focusin",r=>{this.popupService.bringPopupToFront(t)}),e&&this.setMovable(e),s&&this.setMaximizable(s),i&&this.setResizable(i)}renderComponent(){const t=this.getGui(),{alwaysOnTop:e,modal:i,title:s,afterGuiAttached:r}=this.config,n=this.localeService.getLocaleTextFunc(),o=this.popupService.addPopup({modal:i,eChild:t,closeOnEsc:!0,closedCallback:this.onClosed.bind(this),alwaysOnTop:e,ariaLabel:s||n("ariaLabelDialog","Dialog"),afterGuiAttached:r});o&&(this.close=o.hideFunc)}onClosed(t){var e,i;this.destroy(),(i=(e=this.config).closedCallback)==null||i.call(e,t)}toggleMaximize(){const t=this.positionableFeature.getPosition();if(this.isMaximized){const{x:e,y:i,width:s,height:r}=this.lastPosition;this.setWidth(s),this.setHeight(r),this.positionableFeature.offsetElement(e,i)}else this.lastPosition.width=this.getWidth(),this.lastPosition.height=this.getHeight(),this.lastPosition.x=t.x,this.lastPosition.y=t.y,this.positionableFeature.offsetElement(0,0),this.setHeight("100%"),this.setWidth("100%");this.isMaximized=!this.isMaximized,this.refreshMaximizeIcon()}refreshMaximizeIcon(){Qt(this.maximizeIcon,!this.isMaximized),Qt(this.minimizeIcon,this.isMaximized)}clearMaximizebleListeners(){this.maximizeListeners.length&&(this.maximizeListeners.forEach(t=>t()),this.maximizeListeners.length=0),this.resizeListenerDestroy&&(this.resizeListenerDestroy(),this.resizeListenerDestroy=null)}destroy(){this.maximizeButtonComp=this.destroyBean(this.maximizeButtonComp),this.clearMaximizebleListeners(),super.destroy()}setResizable(t){this.positionableFeature.setResizable(t)}setMovable(t){this.positionableFeature.setMovable(t,this.eTitleBar)}setMaximizable(t){if(!t){this.clearMaximizebleListeners(),this.maximizeButtonComp&&(this.destroyBean(this.maximizeButtonComp),this.maximizeButtonComp=this.maximizeIcon=this.minimizeIcon=void 0);return}const e=this.eTitleBar;if(!e||t===this.isMaximizable)return;const i=this.buildMaximizeAndMinimizeElements();this.refreshMaximizeIcon(),i.addManagedListener(i.getGui(),"click",this.toggleMaximize.bind(this)),this.addTitleBarButton(i,0),this.maximizeListeners.push(this.addManagedListener(e,"dblclick",this.toggleMaximize.bind(this))),this.resizeListenerDestroy=this.addManagedListener(this,"resize",()=>{this.isMaximized=!1,this.refreshMaximizeIcon()})}buildMaximizeAndMinimizeElements(){const t=this.maximizeButtonComp=this.createBean(new Te('<div class="ag-dialog-button"></span>')),e=t.getGui();return this.maximizeIcon=ts("maximize",this.gos),e.appendChild(this.maximizeIcon),this.maximizeIcon.classList.add("ag-panel-title-bar-button-icon"),this.minimizeIcon=ts("minimize",this.gos),e.appendChild(this.minimizeIcon),this.minimizeIcon.classList.add("ag-panel-title-bar-button-icon"),t}};z([W("popupService")],lc.prototype,"popupService",2);var LY=0,al=class extends ye{constructor(){super(...arguments),this.popupList=[]}postConstruct(){this.ctrlsService.whenReady(t=>{this.gridCtrl=t.gridCtrl}),this.addManagedListener(this.eventService,K.EVENT_GRID_STYLES_CHANGED,this.handleThemeChange.bind(this))}getPopupParent(){const t=this.gos.get("popupParent");return t||this.gridCtrl.getGui()}positionPopupForMenu(t){const{eventSource:e,ePopup:i}=t,s=this.getPopupIndex(i);if(s!==-1){const p=this.popupList[s];p.alignedToElement=e}const r=e.getBoundingClientRect(),n=this.getParentRect(),o=this.keepXYWithinBounds(i,r.top-n.top,0),a=i.clientWidth>0?i.clientWidth:200;i.style.minWidth=`${a}px`;const c=n.right-n.left-a;let u;this.gos.get("enableRtl")?(u=h(),u<0&&(u=d(),this.setAlignedStyles(i,"left")),u>c&&(u=0,this.setAlignedStyles(i,"right"))):(u=d(),u>c&&(u=h(),this.setAlignedStyles(i,"right")),u<0&&(u=0,this.setAlignedStyles(i,"left"))),i.style.left=`${u}px`,i.style.top=`${o}px`;function d(){return r.right-n.left-2}function h(){return r.left-n.left-a}}positionPopupUnderMouseEvent(t){const{ePopup:e,nudgeX:i,nudgeY:s,skipObserver:r}=t;this.positionPopup({ePopup:e,nudgeX:i,nudgeY:s,keepWithinBounds:!0,skipObserver:r,updatePosition:()=>this.calculatePointerAlign(t.mouseEvent),postProcessCallback:()=>this.callPostProcessPopup(t.type,t.ePopup,null,t.mouseEvent,t.column,t.rowNode)})}calculatePointerAlign(t){const e=this.getParentRect();return{x:t.clientX-e.left,y:t.clientY-e.top}}positionPopupByComponent(t){const{ePopup:e,nudgeX:i,nudgeY:s,keepWithinBounds:r,eventSource:n,alignSide:o="left",position:a="over",column:l,rowNode:c,type:u}=t,d=n.getBoundingClientRect(),h=this.getParentRect(),p=this.getPopupIndex(e);if(p!==-1){const m=this.popupList[p];m.alignedToElement=n}const f=()=>{let m=d.left-h.left;o==="right"&&(m-=e.offsetWidth-d.width);let g;return a==="over"?(g=d.top-h.top,this.setAlignedStyles(e,"over")):(this.setAlignedStyles(e,"under"),this.shouldRenderUnderOrAbove(e,d,h,t.nudgeY||0)==="under"?g=d.top-h.top+d.height:g=d.top-e.offsetHeight-(s||0)*2-h.top),{x:m,y:g}};this.positionPopup({ePopup:e,nudgeX:i,nudgeY:s,keepWithinBounds:r,updatePosition:f,postProcessCallback:()=>this.callPostProcessPopup(u,e,n,null,l,c)})}shouldRenderUnderOrAbove(t,e,i,s){const r=i.bottom-e.bottom,n=e.top-i.top,o=t.offsetHeight+s;return r>o?"under":n>o||n>r?"above":"under"}setAlignedStyles(t,e){const i=this.getPopupIndex(t);if(i===-1)return;const s=this.popupList[i],{alignedToElement:r}=s;!r||(["right","left","over","above","under"].forEach(o=>{r.classList.remove(`ag-has-popup-positioned-${o}`),t.classList.remove(`ag-popup-positioned-${o}`)}),!e)||(r.classList.add(`ag-has-popup-positioned-${e}`),t.classList.add(`ag-popup-positioned-${e}`))}callPostProcessPopup(t,e,i,s,r,n){const o=this.gos.getCallback("postProcessPopup");o&&o({column:r,rowNode:n,ePopup:e,type:t,eventSource:i,mouseEvent:s})}positionPopup(t){const{ePopup:e,keepWithinBounds:i,nudgeX:s,nudgeY:r,skipObserver:n,updatePosition:o}=t,a={width:0,height:0},l=(c=!1)=>{let{x:u,y:d}=o();c&&e.clientWidth===a.width&&e.clientHeight===a.height||(a.width=e.clientWidth,a.height=e.clientHeight,s&&(u+=s),r&&(d+=r),i&&(u=this.keepXYWithinBounds(e,u,1),d=this.keepXYWithinBounds(e,d,0)),e.style.left=`${u}px`,e.style.top=`${d}px`,t.postProcessCallback&&t.postProcessCallback())};if(l(),!n){const c=this.resizeObserverService.observeResize(e,()=>l(!0));setTimeout(()=>c(),al.WAIT_FOR_POPUP_CONTENT_RESIZE)}}getActivePopups(){return this.popupList.map(t=>t.element)}getPopupList(){return this.popupList}getParentRect(){const t=this.gos.getDocument();let e=this.getPopupParent();return e===t.body?e=t.documentElement:getComputedStyle(e).position==="static"&&(e=e.offsetParent),gM(e)}keepXYWithinBounds(t,e,i){const s=i===0,r=s?"clientHeight":"clientWidth",n=s?"top":"left",o=s?"offsetHeight":"offsetWidth",a=s?"scrollTop":"scrollLeft",l=this.gos.getDocument(),c=l.documentElement,u=this.getPopupParent(),d=u.getBoundingClientRect(),h=l.documentElement.getBoundingClientRect(),p=u===l.body,f=t[o];let g=p?(s?fM:ly)(c)+c[a]:u[r];p&&(g-=Math.abs(h[n]-d[n]));const y=g-f;return Math.min(Math.max(e,0),Math.abs(y))}addPopup(t){const e=this.gos.getDocument(),{eChild:i,ariaLabel:s,alwaysOnTop:r,positionCallback:n,anchorToElement:o}=t;if(!e)return console.warn("AG Grid: could not find the document, document is empty"),{hideFunc:()=>{}};const a=this.getPopupIndex(i);if(a!==-1)return{hideFunc:this.popupList[a].hideFunc};this.initialisePopupPosition(i);const l=this.createPopupWrapper(i,s,!!r),c=this.addEventListenersToPopup($i(it({},t),{wrapperEl:l}));return n&&n(),this.addPopupToPopupList(i,l,c,o),{hideFunc:c}}initialisePopupPosition(t){const i=this.getPopupParent().getBoundingClientRect();Pe(t.style.top)||(t.style.top=`${i.top*-1}px`),Pe(t.style.left)||(t.style.left=`${i.left*-1}px`)}createPopupWrapper(t,e,i){const s=this.getPopupParent(),r=document.createElement("div"),{allThemes:n}=this.environment.getTheme();return n.length&&r.classList.add(...n),r.classList.add("ag-popup"),t.classList.add(this.gos.get("enableRtl")?"ag-rtl":"ag-ltr","ag-popup-child"),t.hasAttribute("role")||as(t,"dialog"),no(t,e),r.appendChild(t),s.appendChild(r),i?this.setAlwaysOnTop(t,!0):this.bringPopupToFront(t),r}handleThemeChange(){const{allThemes:t}=this.environment.getTheme();for(const e of this.popupList){for(const i of Array.from(e.wrapper.classList))i.startsWith("ag-theme-")&&e.wrapper.classList.remove(i);t.length&&e.wrapper.classList.add(...t)}}addEventListenersToPopup(t){const e=this.gos.getDocument(),i=this.getPopupParent(),{wrapperEl:s,eChild:r,closedCallback:n,afterGuiAttached:o,closeOnEsc:a,modal:l}=t;let c=!1;const u=f=>{if(!s.contains(this.gos.getActiveDomElement()))return;f.key===ce.ESCAPE&&!ha(f)&&p({keyboardEvent:f})},d=f=>p({mouseEvent:f}),h=f=>p({touchEvent:f}),p=(f={})=>{const{mouseEvent:m,touchEvent:g,keyboardEvent:y,forceHide:v}=f;!v&&(this.isEventFromCurrentPopup({mouseEvent:m,touchEvent:g},r)||c)||(c=!0,i.removeChild(s),e.removeEventListener("keydown",u),e.removeEventListener("mousedown",d),e.removeEventListener("touchstart",h),e.removeEventListener("contextmenu",d),this.eventService.removeEventListener(K.EVENT_DRAG_STARTED,d),n&&n(m||g||y),this.removePopupFromPopupList(r))};return o&&o({hidePopup:p}),window.setTimeout(()=>{a&&e.addEventListener("keydown",u),l&&(e.addEventListener("mousedown",d),this.eventService.addEventListener(K.EVENT_DRAG_STARTED,d),e.addEventListener("touchstart",h),e.addEventListener("contextmenu",d))},0),p}addPopupToPopupList(t,e,i,s){this.popupList.push({element:t,wrapper:e,hideFunc:i,instanceId:LY++,isAnchored:!!s}),s&&this.setPopupPositionRelatedToElement(t,s)}getPopupIndex(t){return this.popupList.findIndex(e=>e.element===t)}setPopupPositionRelatedToElement(t,e){const i=this.getPopupIndex(t);if(i===-1)return;const s=this.popupList[i];if(s.stopAnchoringPromise&&s.stopAnchoringPromise.then(n=>n&&n()),s.stopAnchoringPromise=void 0,s.isAnchored=!1,!e)return;const r=this.keepPopupPositionedRelativeTo({element:e,ePopup:t,hidePopup:s.hideFunc});return s.stopAnchoringPromise=r,s.isAnchored=!0,r}removePopupFromPopupList(t){this.setAlignedStyles(t,null),this.setPopupPositionRelatedToElement(t,null),this.popupList=this.popupList.filter(e=>e.element!==t)}keepPopupPositionedRelativeTo(t){const e=this.getPopupParent(),i=e.getBoundingClientRect(),{element:s,ePopup:r}=t,n=s.getBoundingClientRect(),o=i.top-n.top,a=i.left-n.left;let l=o,c=a;const u=r.style.top,d=parseInt(u.substring(0,u.length-1),10),h=r.style.left,p=parseInt(h.substring(0,h.length-1),10);return new Ft(f=>{this.getFrameworkOverrides().setInterval(()=>{const m=e.getBoundingClientRect(),g=s.getBoundingClientRect();if(g.top==0&&g.left==0&&g.height==0&&g.width==0){t.hidePopup();return}const v=m.top-g.top;if(v!=l){const b=this.keepXYWithinBounds(r,d+o-v,0);r.style.top=`${b}px`}l=v;const C=m.left-g.left;if(C!=c){const b=this.keepXYWithinBounds(r,p+a-C,1);r.style.left=`${b}px`}c=C},200).then(m=>{f(()=>{m!=null&&window.clearInterval(m)})})})}hasAnchoredPopup(){return this.popupList.some(t=>t.isAnchored)}isEventFromCurrentPopup(t,e){const{mouseEvent:i,touchEvent:s}=t,r=i||s;if(!r)return!1;const n=this.getPopupIndex(e);if(n===-1)return!1;for(let o=n;o<this.popupList.length;o++){const a=this.popupList[o];if(Hw(a.element,r))return!0}return this.isElementWithinCustomPopup(r.target)}isElementWithinCustomPopup(t){const e=this.gos.getDocument();for(;t&&t!==e.body;){if(t.classList.contains("ag-custom-component-popup")||t.parentElement===null)return!0;t=t.parentElement}return!1}getWrapper(t){for(;!t.classList.contains("ag-popup")&&t.parentElement;)t=t.parentElement;return t.classList.contains("ag-popup")?t:null}setAlwaysOnTop(t,e){const i=this.getWrapper(t);i&&(i.classList.toggle("ag-always-on-top",!!e),e&&this.bringPopupToFront(i))}bringPopupToFront(t){const e=this.getPopupParent(),i=Array.prototype.slice.call(e.querySelectorAll(".ag-popup")),s=i.length,r=Array.prototype.slice.call(e.querySelectorAll(".ag-popup.ag-always-on-top")),n=r.length,o=this.getWrapper(t);if(!o||s<=1||!e.contains(t))return;const a=i.indexOf(o),l=o.querySelectorAll("div"),c=[];for(l.forEach(u=>{u.scrollTop!==0&&c.push([u,u.scrollTop])}),n?o.classList.contains("ag-always-on-top")?a!==s-1&&di(r).insertAdjacentElement("afterend",o):a!==s-n-1&&r[0].insertAdjacentElement("beforebegin",o):a!==s-1&&di(i).insertAdjacentElement("afterend",o);c.length;){const u=c.pop();u[0].scrollTop=u[1]}}};al.WAIT_FOR_POPUP_CONTENT_RESIZE=200;z([W("focusService")],al.prototype,"focusService",2);z([W("ctrlsService")],al.prototype,"ctrlsService",2);z([W("resizeObserverService")],al.prototype,"resizeObserverService",2);z([de],al.prototype,"postConstruct",1);al=z([Me("popupService")],al);var kY=class extends Te{constructor(){super(`
        <div class="ag-autocomplete-row" role="presentation">
            <div class="ag-autocomplete-row-label"></div>
        </div>`),this.hasHighlighting=!1}setState(t,e){this.value=t,this.render(),this.updateSelected(e)}updateSelected(t){this.addOrRemoveCssClass("ag-autocomplete-row-selected",t)}setSearchString(t){var e;let i=!1;if(Pe(t)){const s=(e=this.value)==null?void 0:e.toLocaleLowerCase().indexOf(t.toLocaleLowerCase());if(s>=0){i=!0,this.hasHighlighting=!0;const r=s+t.length,n=Ts(this.value.slice(0,s)),o=Ts(this.value.slice(s,r)),a=Ts(this.value.slice(r));this.getGui().lastElementChild.innerHTML=`${n}<b>${o}</b>${a}`}}!i&&this.hasHighlighting&&(this.hasHighlighting=!1,this.render())}render(){var t;this.getGui().lastElementChild.innerHTML=(t=Ts(this.value))!=null?t:"&nbsp;"}},Dx=class n5 extends Ac{constructor(e){super(n5.TEMPLATE),this.params=e,this.searchString=""}destroy(){super.destroy()}init(){this.autocompleteEntries=this.params.autocompleteEntries,this.virtualList=this.createManagedBean(new tp({cssIdentifier:"autocomplete"})),this.virtualList.setComponentCreator(this.createRowComponent.bind(this)),this.eList.appendChild(this.virtualList.getGui()),this.virtualList.setModel({getRowCount:()=>this.autocompleteEntries.length,getRow:i=>this.autocompleteEntries[i]});const e=this.virtualList.getGui();this.addManagedListener(e,"click",()=>this.params.onConfirmed()),this.addManagedListener(e,"mousemove",this.onMouseMove.bind(this)),this.addManagedListener(e,"mousedown",i=>i.preventDefault()),this.setSelectedValue(0)}onNavigationKeyDown(e,i){e.preventDefault();const s=this.autocompleteEntries.indexOf(this.selectedValue),r=i===ce.UP?s-1:s+1;this.checkSetSelectedValue(r)}setSearch(e){this.searchString=e,Pe(e)?this.runSearch():(this.autocompleteEntries=this.params.autocompleteEntries,this.virtualList.refresh(),this.checkSetSelectedValue(0)),this.updateSearchInList()}runContainsSearch(e,i){let s,r=!1;const n=e.toLocaleLowerCase(),o=i.filter(a=>{const c=a.toLocaleLowerCase().indexOf(n),u=c===0,d=c>=0;return d&&(!s||!r&&u||r===u&&a.length<s.length)&&(s=a,r=u),d});return!s&&o.length&&(s=o[0]),{topMatch:s,allMatches:o}}runSearch(){var e,i;const{autocompleteEntries:s}=this.params,r=s.map(c=>{var u;return(u=c.displayValue)!=null?u:c.key});let n,o;if(this.params.useFuzzySearch)n=SC(this.searchString,r,!0).values,o=n.length?n[0]:void 0;else{const c=this.runContainsSearch(this.searchString,r);n=c.allMatches,o=c.topMatch}let a=s.filter(({key:c,displayValue:u})=>n.includes(u??c));if(!a.length&&this.selectedValue&&((i=(e=this.params)==null?void 0:e.forceLastSelection)!=null&&i.call(e,this.selectedValue,this.searchString))&&(a=[this.selectedValue]),this.autocompleteEntries=a,this.virtualList.refresh(),!o)return;const l=n.indexOf(o);this.checkSetSelectedValue(l)}updateSearchInList(){this.virtualList.forEachRenderedRow(e=>e.setSearchString(this.searchString))}checkSetSelectedValue(e){e>=0&&e<this.autocompleteEntries.length&&this.setSelectedValue(e)}setSelectedValue(e){const i=this.autocompleteEntries[e];this.selectedValue!==i&&(this.selectedValue=i,this.virtualList.ensureIndexVisible(e),this.virtualList.forEachRenderedRow((s,r)=>{s.updateSelected(e===r)}))}createRowComponent(e){var i;const s=new kY;return this.getContext().createBean(s),s.setState((i=e.displayValue)!=null?i:e.key,e===this.selectedValue),s}onMouseMove(e){const i=this.virtualList.getGui().getBoundingClientRect(),s=this.virtualList.getScrollTop(),r=e.clientY-i.top+s,n=Math.floor(r/this.virtualList.getRowHeight());this.checkSetSelectedValue(n)}afterGuiAttached(){this.virtualList.refresh()}getSelectedValue(){var e;return this.autocompleteEntries.length&&(e=this.selectedValue)!=null?e:null}};Dx.TEMPLATE=`<div class="ag-autocomplete-list-popup">
            <div ref="eList" class="ag-autocomplete-list"></div>
        <div>`;z([pe("eList")],Dx.prototype,"eList",2);z([de],Dx.prototype,"init",1);var NY=Dx,ad=class sv extends Te{constructor(){super(`
            <div class="ag-autocomplete" role="presentation">
                <ag-input-text-field ref="eAutocompleteInput"></ag-input-text-field>
            </div>`),this.isListOpen=!1,this.lastPosition=0,this.valid=!0}postConstruct(){this.eAutocompleteInput.onValueChange(e=>this.onValueChanged(e)),this.eAutocompleteInput.getInputElement().setAttribute("autocomplete","off"),this.addGuiEventListener("keydown",this.onKeyDown.bind(this)),this.addGuiEventListener("click",this.updatePositionAndList.bind(this)),this.addDestroyFunc(()=>{this.destroyBean(this.autocompleteList)}),this.addGuiEventListener("focusout",()=>this.onFocusOut())}onValueChanged(e){const i=tl(e);this.updateValue(i),this.updateAutocompleteList(i)}updateValue(e){this.updateLastPosition(),this.dispatchEvent({type:sv.EVENT_VALUE_CHANGED,value:e}),this.validate(e)}updateAutocompleteList(e){var i,s,r,n;const o=(s=(i=this.listGenerator)==null?void 0:i.call(this,e,this.lastPosition))!=null?s:{enabled:!1};if((!o.type||o.type!==((r=this.autocompleteListParams)==null?void 0:r.type))&&this.isListOpen&&this.closeList(),this.autocompleteListParams=o,(n=this.autocompleteListParams)!=null&&n.enabled){this.isListOpen||this.openList();const{searchString:a}=this.autocompleteListParams;this.autocompleteList.setSearch(a??"")}else this.isListOpen&&this.closeList()}onKeyDown(e){const i=e.key;switch(this.updateLastPosition(),i){case ce.ENTER:this.onEnterKeyDown(e);break;case ce.TAB:this.onTabKeyDown(e);break;case ce.DOWN:case ce.UP:this.onUpDownKeyDown(e,i);break;case ce.LEFT:case ce.RIGHT:case ce.PAGE_HOME:case ce.PAGE_END:setTimeout(()=>{this.updatePositionAndList()});break;case ce.ESCAPE:this.onEscapeKeyDown(e);break;case ce.SPACE:e.ctrlKey&&!this.isListOpen&&(e.preventDefault(),this.forceOpenList());break}}confirmSelection(){var e;const i=(e=this.autocompleteList)==null?void 0:e.getSelectedValue();i&&(this.closeList(),this.dispatchEvent({type:sv.EVENT_OPTION_SELECTED,value:this.getValue(),position:this.lastPosition,updateEntry:i,autocompleteType:this.autocompleteListParams.type}))}onTabKeyDown(e){this.isListOpen&&(e.preventDefault(),e.stopPropagation(),this.confirmSelection())}onEnterKeyDown(e){e.preventDefault(),this.isListOpen?this.confirmSelection():this.onCompleted()}onUpDownKeyDown(e,i){var s;e.preventDefault(),this.isListOpen?(s=this.autocompleteList)==null||s.onNavigationKeyDown(e,i):this.forceOpenList()}onEscapeKeyDown(e){this.isListOpen&&(e.preventDefault(),e.stopPropagation(),this.closeList(),this.setCaret(this.lastPosition,!0))}onFocusOut(){this.isListOpen&&this.closeList()}updatePositionAndList(){var e;this.updateLastPosition(),this.updateAutocompleteList((e=this.eAutocompleteInput.getValue())!=null?e:null)}setCaret(e,i){const s=this.gos.getDocument(),r=this.gos.getActiveDomElement();i&&(!r||r===s.body)&&this.eAutocompleteInput.getFocusableElement().focus();const n=this.eAutocompleteInput.getInputElement();n.setSelectionRange(e,e),e===n.value.length&&(n.scrollLeft=n.scrollWidth)}forceOpenList(){this.onValueChanged(this.eAutocompleteInput.getValue())}updateLastPosition(){var e;this.lastPosition=(e=this.eAutocompleteInput.getInputElement().selectionStart)!=null?e:0}validate(e){var i;this.validator&&(this.validationMessage=this.validator(e),this.eAutocompleteInput.getInputElement().setCustomValidity((i=this.validationMessage)!=null?i:""),this.valid=!this.validationMessage,this.dispatchEvent({type:sv.EVENT_VALID_CHANGED,isValid:this.valid,validationMessage:this.validationMessage}))}openList(){this.isListOpen=!0,this.autocompleteList=this.createBean(new NY({autocompleteEntries:this.autocompleteListParams.entries,onConfirmed:()=>this.confirmSelection(),forceLastSelection:this.forceLastSelection}));const e=this.autocompleteList.getGui(),i={ePopup:e,type:"autocomplete",eventSource:this.getGui(),position:"under",alignSide:this.gos.get("enableRtl")?"right":"left",keepWithinBounds:!0},s=this.popupService.addPopup({eChild:e,anchorToElement:this.getGui(),positionCallback:()=>this.popupService.positionPopupByComponent(i),ariaLabel:this.listAriaLabel});this.hidePopup=s.hideFunc,this.autocompleteList.afterGuiAttached()}closeList(){this.isListOpen=!1,this.hidePopup(),this.destroyBean(this.autocompleteList),this.autocompleteList=null}onCompleted(){this.isListOpen&&this.closeList(),this.dispatchEvent({type:sv.EVENT_VALUE_CONFIRMED,value:this.getValue(),isValid:this.isValid()})}getValue(){return tl(this.eAutocompleteInput.getValue())}setInputPlaceholder(e){return this.eAutocompleteInput.setInputPlaceholder(e),this}setInputAriaLabel(e){return this.eAutocompleteInput.setInputAriaLabel(e),this}setListAriaLabel(e){return this.listAriaLabel=e,this}setListGenerator(e){return this.listGenerator=e,this}setValidator(e){return this.validator=e,this}isValid(){return this.valid}setValue(e){const{value:i,position:s,silent:r,updateListOnlyIfOpen:n,restoreFocus:o}=e;this.eAutocompleteInput.setValue(i,!0),this.setCaret(s??this.lastPosition,o),r||this.updateValue(i),(!n||this.isListOpen)&&this.updateAutocompleteList(i)}setForceLastSelection(e){return this.forceLastSelection=e,this}setInputDisabled(e){return this.eAutocompleteInput.setDisabled(e),this}};ad.EVENT_VALUE_CHANGED="eventValueChanged";ad.EVENT_VALUE_CONFIRMED="eventValueConfirmed";ad.EVENT_OPTION_SELECTED="eventOptionSelected";ad.EVENT_VALID_CHANGED="eventValidChanged";z([W("popupService")],ad.prototype,"popupService",2);z([pe("eAutocompleteInput")],ad.prototype,"eAutocompleteInput",2);z([de],ad.prototype,"postConstruct",1);var vf=ad,ld=class $b extends Te{constructor(e,i,s,r){super(),this.dragSourceDropTarget=e,this.ghost=i,this.horizontal=s,this.template=r}init(){var e;this.setTemplate((e=this.template)!=null?e:$b.TEMPLATE);const i=this.getGui();this.addElementClasses(i),this.addElementClasses(this.eDragHandle,"drag-handle"),this.addElementClasses(this.eText,"text"),this.addElementClasses(this.eButton,"button"),this.eDragHandle.appendChild(ts("columnDrag",this.gos)),this.eButton.appendChild(ts("cancel",this.gos)),this.setupComponents(),!this.ghost&&this.isDraggable()&&this.addDragSource(),this.setupAria(),this.setupTooltip(),this.activateTabIndex(),this.refreshDraggable()}isDraggable(){return!0}refreshDraggable(){this.eDragHandle.classList.toggle("ag-column-select-column-readonly",!this.isDraggable())}setupAria(){const e=this.localeService.getLocaleTextFunc(),i=[this.getAriaDisplayName()];this.addAdditionalAriaInstructions(i,e),no(this.getGui(),i.join(". "))}addAdditionalAriaInstructions(e,i){if(this.isRemovable()){const s=i("ariaDropZoneColumnComponentDescription","Press DELETE to remove");e.push(s)}}setupTooltip(){const e=()=>{const i=this.getTooltip();this.setTooltip({newTooltipText:i})};e(),this.addManagedListener(this.eventService,K.EVENT_NEW_COLUMNS_LOADED,e)}getDragSourceId(){}getDefaultIconName(){return st.ICON_NOT_ALLOWED}addDragSource(){const{dragAndDropService:e,eDragHandle:i}=this,s=this.createGetDragItem(),r=this.getDefaultIconName(),n={type:this.getDragSourceType(),sourceId:this.getDragSourceId(),eElement:i,getDefaultIconName:()=>r,getDragItem:s,dragItemName:this.getDisplayName()};e.addDragSource(n,!0),this.addDestroyFunc(()=>e.removeDragSource(n))}setupComponents(){this.setTextValue(),this.setupRemove(),this.ghost&&this.addCssClass("ag-column-drop-cell-ghost")}isRemovable(){return!0}refreshRemove(){Qt(this.eButton,this.isRemovable())}setupRemove(){this.refreshRemove();const e={type:$b.EVENT_COLUMN_REMOVE};this.addGuiEventListener("keydown",s=>this.onKeyDown(s)),this.addManagedListener(this.eButton,"click",s=>{this.dispatchEvent(e),s.stopPropagation()});const i=new Es(this.eButton);this.addManagedListener(i,Es.EVENT_TAP,()=>{this.dispatchEvent(e)}),this.addDestroyFunc(i.destroy.bind(i))}onKeyDown(e){e.key===ce.DELETE&&this.isRemovable()&&(e.preventDefault(),this.dispatchEvent({type:$b.EVENT_COLUMN_REMOVE}))}getDisplayValue(){return this.getDisplayName()}setTextValue(){const e=this.getDisplayValue(),i=Ts(e);this.eText.innerHTML=i}addElementClasses(e,i){i=i?`-${i}`:"";const s=this.horizontal?"horizontal":"vertical";e.classList.add(`ag-column-drop-cell${i}`,`ag-column-drop-${s}-cell${i}`)}destroy(){super.destroy(),this.dragSourceDropTarget=null}};ld.EVENT_COLUMN_REMOVE="columnRemove";ld.TEMPLATE=`<span role="option">
          <span ref="eDragHandle" class="ag-drag-handle ag-column-drop-cell-drag-handle" role="presentation"></span>
          <span ref="eText" class="ag-column-drop-cell-text" aria-hidden="true"></span>
          <span ref="eButton" class="ag-column-drop-cell-button" role="presentation"></span>
        </span>`;z([W("dragAndDropService")],ld.prototype,"dragAndDropService",2);z([pe("eText")],ld.prototype,"eText",2);z([pe("eDragHandle")],ld.prototype,"eDragHandle",2);z([pe("eButton")],ld.prototype,"eButton",2);z([de],ld.prototype,"init",1);var Px=ld,Yg=class Ba extends Te{constructor(e){super('<div class="ag-unselectable" role="presentation"></div>'),this.horizontal=e,this.state=Ba.STATE_NOT_DRAGGING,this.guiDestroyFunctions=[],this.childPillComponents=[],this.resizeEnabled=!1,this.addElementClasses(this.getGui()),this.ePillDropList=document.createElement("div"),this.addElementClasses(this.ePillDropList,"list"),as(this.ePillDropList,"listbox")}isHorizontal(){return this.horizontal}toggleResizable(e){this.positionableFeature.setResizable(e?{bottom:!0}:!1),this.resizeEnabled=e}isSourceEventFromTarget(e){const{dropZoneTarget:i,dragSource:s}=e;return i.contains(s.eElement)}destroy(){this.destroyGui(),super.destroy()}destroyGui(){this.guiDestroyFunctions.forEach(e=>e()),this.guiDestroyFunctions.length=0,this.childPillComponents.length=0,Cs(this.getGui()),Cs(this.ePillDropList)}init(e){this.params=e??{},this.createManagedBean(new ml(this.getFocusableElement(),{handleKeyDown:this.handleKeyDown.bind(this)})),this.setupDropTarget(),this.positionableFeature=new Qu(this.getGui(),{minHeight:100}),this.createManagedBean(this.positionableFeature),this.refreshGui(),no(this.ePillDropList,this.getAriaLabel())}handleKeyDown(e){const i=!this.horizontal;let s=e.key===ce.DOWN,r=e.key===ce.UP;if(!i){const o=this.gos.get("enableRtl");s=!o&&e.key===ce.RIGHT||o&&e.key===ce.LEFT,r=!o&&e.key===ce.LEFT||o&&e.key===ce.RIGHT}if(!s&&!r)return;const n=this.focusService.findNextFocusableElement(this.getFocusableElement(),!1,r);n&&(e.preventDefault(),n.focus())}addElementClasses(e,i){i=i?`-${i}`:"";const s=this.horizontal?"horizontal":"vertical";e.classList.add(`ag-column-drop${i}`,`ag-column-drop-${s}${i}`)}setupDropTarget(){this.dropTarget={getContainer:this.getGui.bind(this),getIconName:this.getIconName.bind(this),onDragging:this.onDragging.bind(this),onDragEnter:this.onDragEnter.bind(this),onDragLeave:this.onDragLeave.bind(this),onDragStop:this.onDragStop.bind(this),isInterestedIn:this.isInterestedIn.bind(this)},this.dragAndDropService.addDropTarget(this.dropTarget)}minimumAllowedNewInsertIndex(){return 0}checkInsertIndex(e){const i=this.getNewInsertIndex(e);if(i<0)return!1;const s=this.minimumAllowedNewInsertIndex(),r=Math.max(s,i),n=r!==this.insertIndex;return n&&(this.insertIndex=r),n}getNewInsertIndex(e){const i=e.event,s=this.horizontal?i.clientX:i.clientY,r=this.childPillComponents.map(o=>o.getGui().getBoundingClientRect()),n=r.findIndex(o=>this.horizontal?o.right>s&&o.left<s:o.top<s&&o.bottom>s);if(n===-1){const o=this.gos.get("enableRtl");return r.every(c=>s>(this.horizontal?c.right:c.bottom))?o&&this.horizontal?0:this.childPillComponents.length:r.every(c=>s<(this.horizontal?c.left:c.top))?o&&this.horizontal?this.childPillComponents.length:0:this.insertIndex}return this.insertIndex<=n?n+1:n}checkDragStartedBySelf(e){this.state===Ba.STATE_NOT_DRAGGING&&(this.state=Ba.STATE_REARRANGE_ITEMS,this.potentialDndItems=this.getItems(e.dragSource.getDragItem()),this.refreshGui(),this.checkInsertIndex(e),this.refreshGui())}onDragging(e){this.checkDragStartedBySelf(e),this.checkInsertIndex(e)&&this.refreshGui()}handleDragEnterEnd(e){}onDragEnter(e){const i=this.getItems(e.dragSource.getDragItem());this.state=Ba.STATE_NEW_ITEMS_IN;const s=i.filter(n=>this.isItemDroppable(n,e)),r=s.every(n=>this.childPillComponents.map(o=>o.getItem()).indexOf(n)!==-1);if(s.length!==0){if(this.potentialDndItems=s,r){this.state=Ba.STATE_NOT_DRAGGING;return}this.handleDragEnterEnd(e),this.checkInsertIndex(e),this.refreshGui()}}isPotentialDndItems(){return k3(this.potentialDndItems)}handleDragLeaveEnd(e){}onDragLeave(e){if(this.state===Ba.STATE_REARRANGE_ITEMS){const i=this.getItems(e.dragSource.getDragItem());this.removeItems(i)}this.isPotentialDndItems()&&(this.handleDragLeaveEnd(e),this.potentialDndItems=[],this.refreshGui()),this.state=Ba.STATE_NOT_DRAGGING}refreshOnDragStop(){return!0}onDragStop(){if(this.isPotentialDndItems()){let e=!1;this.state===Ba.STATE_NEW_ITEMS_IN?(this.addItems(this.potentialDndItems),e=!0):e=this.rearrangeItems(this.potentialDndItems),this.potentialDndItems=[],(this.refreshOnDragStop()||!e)&&this.refreshGui()}this.state=Ba.STATE_NOT_DRAGGING}removeItems(e){const i=this.getExistingItems().filter(s=>!to(e,s));this.updateItems(i)}addItems(e){if(!e)return;const i=this.getExistingItems().slice(),s=e.filter(r=>i.indexOf(r)<0);E_(i,s,this.insertIndex),this.updateItems(i)}addItem(e){this.insertIndex=this.getExistingItems().length,this.addItems([e]),this.refreshGui()}rearrangeItems(e){const i=this.getNonGhostItems().slice();return E_(i,e,this.insertIndex),Ya(i,this.getExistingItems())?!1:(this.updateItems(i),!0)}refreshGui(){const e=this.ePillDropList.scrollTop,i=this.resizeEnabled,s=this.getFocusedItem();let r=this.focusService.findNextFocusableElement();r||(r=this.focusService.findNextFocusableElement(void 0,!1,!0)),this.toggleResizable(!1),this.destroyGui(),this.addIconAndTitleToGui(),this.addEmptyMessageToGui(),this.addItemsToGui(),this.isHorizontal()||(this.ePillDropList.scrollTop=e),i&&this.toggleResizable(i),this.focusService.isKeyboardMode()&&this.restoreFocus(s,r)}getFocusedItem(){const e=this.getGui(),i=this.gos.getActiveDomElement();return e.contains(i)?Array.from(e.querySelectorAll(".ag-column-drop-cell")).indexOf(i):-1}restoreFocus(e,i){const s=this.getGui(),r=Array.from(s.querySelectorAll(".ag-column-drop-cell"));if(e===-1)return;r.length===0&&i.focus();const n=Math.min(r.length-1,e),o=r[n];o&&o.focus()}focusList(e){const i=e?this.childPillComponents.length-1:0;this.restoreFocus(i,this.getFocusableElement())}getNonGhostItems(){const e=this.getExistingItems();return this.isPotentialDndItems()?e.filter(i=>!to(this.potentialDndItems,i)):e}addItemsToGui(){const i=this.getNonGhostItems().map(s=>this.createItemComponent(s,!1));if(this.isPotentialDndItems()){const s=this.potentialDndItems.map(r=>this.createItemComponent(r,!0));this.insertIndex>=i.length?i.push(...s):i.splice(this.insertIndex,0,...s)}this.appendChild(this.ePillDropList),i.forEach((s,r)=>{r>0&&this.addArrow(this.ePillDropList),this.ePillDropList.appendChild(s.getGui())}),this.addAriaLabelsToComponents()}addAriaLabelsToComponents(){this.childPillComponents.forEach((e,i)=>{const s=e.getGui();lx(s,i+1),ax(s,this.childPillComponents.length)})}createItemComponent(e,i){const s=this.createPillComponent(e,this.dropTarget,i,this.horizontal);return s.addEventListener(Px.EVENT_COLUMN_REMOVE,this.removeItems.bind(this,[e])),this.context.createBean(s),this.guiDestroyFunctions.push(()=>this.destroyBean(s)),i||this.childPillComponents.push(s),s}addIconAndTitleToGui(){const{title:e,icon:i}=this.params;if(!e||!i)return;const s=document.createElement("div");if(CC(s,!0),this.addElementClasses(s,"title-bar"),this.addElementClasses(i,"icon"),this.addOrRemoveCssClass("ag-column-drop-empty",this.isExistingItemsEmpty()),s.appendChild(i),!this.horizontal){const r=document.createElement("span");this.addElementClasses(r,"title"),r.innerHTML=e,s.appendChild(r)}this.appendChild(s)}isExistingItemsEmpty(){return this.getExistingItems().length===0}addEmptyMessageToGui(){const{emptyMessage:e}=this.params;if(!e||!this.isExistingItemsEmpty()||this.isPotentialDndItems())return;const i=document.createElement("span");i.innerHTML=e,this.addElementClasses(i,"empty-message"),this.ePillDropList.appendChild(i)}addArrow(e){if(this.horizontal){const i=this.gos.get("enableRtl"),s=ts(i?"smallLeft":"smallRight",this.gos);this.addElementClasses(s,"cell-separator"),e.appendChild(s)}}};Yg.STATE_NOT_DRAGGING="notDragging";Yg.STATE_NEW_ITEMS_IN="newItemsIn";Yg.STATE_REARRANGE_ITEMS="rearrangeItems";z([W("focusService")],Yg.prototype,"focusService",2);z([W("dragAndDropService")],Yg.prototype,"dragAndDropService",2);var JM=Yg,OY=["touchstart","touchend","touchmove","touchcancel"],o5=class{constructor(t="javascript"){this.frameworkName=t,this.renderingEngine="vanilla",this.wrapIncoming=e=>e(),this.wrapOutgoing=e=>e()}setInterval(t,e){return new Ft(i=>{i(window.setInterval(t,e))})}addEventListener(t,e,i,s){const r=to(OY,e);t.addEventListener(e,i,{capture:!!s,passive:r})}get shouldWrapOutgoing(){return!1}frameworkComponent(t){return null}isFrameworkComponent(t){return!1}getDocLink(t){return`https://www.ag-grid.com/${this.frameworkName==="solid"?"react":this.frameworkName}-data-grid${t?`/${t}`:""}`}},cc=class extends ye{getNextCellToFocus(t,e,i=!1){return i?this.getNextCellToFocusWithCtrlPressed(t,e):this.getNextCellToFocusWithoutCtrlPressed(t,e)}getNextCellToFocusWithCtrlPressed(t,e){const i=t===ce.UP,s=t===ce.DOWN,r=t===ce.LEFT;let n,o;if(i||s)o=i?this.paginationProxy.getPageFirstRow():this.paginationProxy.getPageLastRow(),n=e.column;else{const a=this.columnModel.getAllDisplayedColumns(),l=this.gos.get("enableRtl");o=e.rowIndex,n=r!==l?a[0]:di(a)}return{rowIndex:o,rowPinned:null,column:n}}getNextCellToFocusWithoutCtrlPressed(t,e){let i=e,s=!1;for(;!s;){switch(t){case ce.UP:i=this.getCellAbove(i);break;case ce.DOWN:i=this.getCellBelow(i);break;case ce.RIGHT:this.gos.get("enableRtl")?i=this.getCellToLeft(i):i=this.getCellToRight(i);break;case ce.LEFT:this.gos.get("enableRtl")?i=this.getCellToRight(i):i=this.getCellToLeft(i);break;default:i=null,console.warn("AG Grid: unknown key for navigation "+t);break}i?s=this.isCellGoodToFocusOn(i):s=!0}return i}isCellGoodToFocusOn(t){const e=t.column;let i;switch(t.rowPinned){case"top":i=this.pinnedRowModel.getPinnedTopRow(t.rowIndex);break;case"bottom":i=this.pinnedRowModel.getPinnedBottomRow(t.rowIndex);break;default:i=this.rowModel.getRow(t.rowIndex);break}return i?!e.isSuppressNavigable(i):!1}getCellToLeft(t){if(!t)return null;const e=this.columnModel.getDisplayedColBefore(t.column);return e?{rowIndex:t.rowIndex,column:e,rowPinned:t.rowPinned}:null}getCellToRight(t){if(!t)return null;const e=this.columnModel.getDisplayedColAfter(t.column);return e?{rowIndex:t.rowIndex,column:e,rowPinned:t.rowPinned}:null}getRowBelow(t){const e=t.rowIndex,i=t.rowPinned;if(this.isLastRowInContainer(t))switch(i){case"bottom":return null;case"top":return this.rowModel.isRowsToRender()?{rowIndex:this.paginationProxy.getPageFirstRow(),rowPinned:null}:this.pinnedRowModel.isRowsToRender("bottom")?{rowIndex:0,rowPinned:"bottom"}:null;default:return this.pinnedRowModel.isRowsToRender("bottom")?{rowIndex:0,rowPinned:"bottom"}:null}const s=this.rowModel.getRow(t.rowIndex),r=this.getNextStickyPosition(s);return r||{rowIndex:e+1,rowPinned:i}}getNextStickyPosition(t,e){if(!this.gos.isGroupRowsSticky()||!t||!t.sticky)return;const i=this.rowRenderer.getStickyTopRowCtrls().some(a=>a.getRowNode().rowIndex===t.rowIndex);let s=[];i?s=[...this.rowRenderer.getStickyTopRowCtrls()].sort((a,l)=>a.getRowNode().rowIndex-l.getRowNode().rowIndex):s=[...this.rowRenderer.getStickyBottomRowCtrls()].sort((a,l)=>l.getRowNode().rowIndex-a.getRowNode().rowIndex);const r=e?-1:1,n=s.findIndex(a=>a.getRowNode().rowIndex===t.rowIndex),o=s[n+r];if(o)return{rowIndex:o.getRowNode().rowIndex,rowPinned:null}}getCellBelow(t){if(!t)return null;const e=this.getRowBelow(t);return e?{rowIndex:e.rowIndex,column:t.column,rowPinned:e.rowPinned}:null}isLastRowInContainer(t){const e=t.rowPinned,i=t.rowIndex;return e==="top"?this.pinnedRowModel.getPinnedTopRowData().length-1<=i:e==="bottom"?this.pinnedRowModel.getPinnedBottomRowData().length-1<=i:this.paginationProxy.getPageLastRow()<=i}getRowAbove(t){const e=t.rowIndex,i=t.rowPinned;if(i?e===0:e===this.paginationProxy.getPageFirstRow())return i==="top"?null:i?this.rowModel.isRowsToRender()?this.getLastBodyCell():this.pinnedRowModel.isRowsToRender("top")?this.getLastFloatingTopRow():null:this.pinnedRowModel.isRowsToRender("top")?this.getLastFloatingTopRow():null;const r=this.rowModel.getRow(t.rowIndex),n=this.getNextStickyPosition(r,!0);return n||{rowIndex:e-1,rowPinned:i}}getCellAbove(t){if(!t)return null;const e=this.getRowAbove({rowIndex:t.rowIndex,rowPinned:t.rowPinned});return e?{rowIndex:e.rowIndex,column:t.column,rowPinned:e.rowPinned}:null}getLastBodyCell(){return{rowIndex:this.paginationProxy.getPageLastRow(),rowPinned:null}}getLastFloatingTopRow(){return{rowIndex:this.pinnedRowModel.getPinnedTopRowData().length-1,rowPinned:"top"}}getNextTabbedCell(t,e){return e?this.getNextTabbedCellBackwards(t):this.getNextTabbedCellForwards(t)}getNextTabbedCellForwards(t){const e=this.columnModel.getAllDisplayedColumns();let i=t.rowIndex,s=t.rowPinned,r=this.columnModel.getDisplayedColAfter(t.column);if(!r){r=e[0];const n=this.getRowBelow(t);if(St(n)||!n.rowPinned&&!this.paginationProxy.isRowInPage(n))return null;i=n?n.rowIndex:null,s=n?n.rowPinned:null}return{rowIndex:i,column:r,rowPinned:s}}getNextTabbedCellBackwards(t){const e=this.columnModel.getAllDisplayedColumns();let i=t.rowIndex,s=t.rowPinned,r=this.columnModel.getDisplayedColBefore(t.column);if(!r){r=di(e);const n=this.getRowAbove({rowIndex:t.rowIndex,rowPinned:t.rowPinned});if(St(n)||!n.rowPinned&&!this.paginationProxy.isRowInPage(n))return null;i=n?n.rowIndex:null,s=n?n.rowPinned:null}return{rowIndex:i,column:r,rowPinned:s}}};z([W("columnModel")],cc.prototype,"columnModel",2);z([W("rowModel")],cc.prototype,"rowModel",2);z([W("rowRenderer")],cc.prototype,"rowRenderer",2);z([W("pinnedRowModel")],cc.prototype,"pinnedRowModel",2);z([W("paginationProxy")],cc.prototype,"paginationProxy",2);cc=z([Me("cellNavigationService")],cc);var Du=class extends ye{constructor(){super(...arguments),this.consuming=!1}setBeans(t){this.logger=t.create("AlignedGridsService")}getAlignedGridApis(){var t;let e=(t=this.gos.get("alignedGrids"))!=null?t:[];const i=typeof e=="function";typeof e=="function"&&(e=e());const s=()=>`See ${this.getFrameworkOverrides().getDocLink("aligned-grids")}`;return e.map(n=>{var o;if(!n){aa("alignedGrids contains an undefined option."),i||aa(`You may want to configure via a callback to avoid setup race conditions:
                     "alignedGrids: () => [linkedGrid]"`),aa(s());return}if(n instanceof Wt)return n;const a=n;return"current"in a?(o=a.current)==null?void 0:o.api:(a.api||aa(`alignedGrids - No api found on the linked grid. If you are passing gridOptions to alignedGrids since v31 this is no longer valid. ${s()}`),a.api)}).filter(n=>!!n&&!n.isDestroyed())}init(){this.addManagedListener(this.eventService,K.EVENT_COLUMN_MOVED,this.fireColumnEvent.bind(this)),this.addManagedListener(this.eventService,K.EVENT_COLUMN_VISIBLE,this.fireColumnEvent.bind(this)),this.addManagedListener(this.eventService,K.EVENT_COLUMN_PINNED,this.fireColumnEvent.bind(this)),this.addManagedListener(this.eventService,K.EVENT_COLUMN_GROUP_OPENED,this.fireColumnEvent.bind(this)),this.addManagedListener(this.eventService,K.EVENT_COLUMN_RESIZED,this.fireColumnEvent.bind(this)),this.addManagedListener(this.eventService,K.EVENT_BODY_SCROLL,this.fireScrollEvent.bind(this))}fireEvent(t){this.consuming||this.getAlignedGridApis().forEach(e=>{if(e.isDestroyed())return;const i=e.__getAlignedGridService();t(i)})}onEvent(t){this.consuming=!0,t(),this.consuming=!1}fireColumnEvent(t){this.fireEvent(e=>{e.onColumnEvent(t)})}fireScrollEvent(t){t.direction==="horizontal"&&this.fireEvent(e=>{e.onScrollEvent(t)})}onScrollEvent(t){this.onEvent(()=>{this.ctrlsService.getGridBodyCtrl().getScrollFeature().setHorizontalScrollPosition(t.left,!0)})}getMasterColumns(t){const e=[];return t.columns?t.columns.forEach(i=>{e.push(i)}):t.column&&e.push(t.column),e}getColumnIds(t){const e=[];return t.columns?t.columns.forEach(i=>{e.push(i.getColId())}):t.column&&e.push(t.column.getColId()),e}onColumnEvent(t){this.onEvent(()=>{switch(t.type){case K.EVENT_COLUMN_MOVED:case K.EVENT_COLUMN_VISIBLE:case K.EVENT_COLUMN_PINNED:case K.EVENT_COLUMN_RESIZED:const e=t;this.processColumnEvent(e);break;case K.EVENT_COLUMN_GROUP_OPENED:const i=t;this.processGroupOpenedEvent(i);break;case K.EVENT_COLUMN_PIVOT_CHANGED:console.warn("AG Grid: pivoting is not supported with aligned grids. You can only use one of these features at a time in a grid.");break}})}processGroupOpenedEvent(t){t.columnGroups.forEach(e=>{let i=null;if(e){const s=e.getGroupId();i=this.columnModel.getProvidedColumnGroup(s)}e&&!i||(this.logger.log("onColumnEvent-> processing "+t+" expanded = "+e.isExpanded()),this.columnModel.setColumnGroupOpened(i,e.isExpanded(),"alignedGridChanged"))})}processColumnEvent(t){var e;const i=t.column;let s=null;if(i&&(s=this.columnModel.getPrimaryColumn(i.getColId())),i&&!s)return;const r=this.getMasterColumns(t);switch(t.type){case K.EVENT_COLUMN_MOVED:{const c=t,d=t.api.getColumnState().map(h=>({colId:h.colId}));this.columnModel.applyColumnState({state:d,applyOrder:!0},"alignedGridChanged"),this.logger.log(`onColumnEvent-> processing ${t.type} toIndex = ${c.toIndex}`)}break;case K.EVENT_COLUMN_VISIBLE:{const c=t,d=t.api.getColumnState().map(h=>({colId:h.colId,hide:h.hide}));this.columnModel.applyColumnState({state:d},"alignedGridChanged"),this.logger.log(`onColumnEvent-> processing ${t.type} visible = ${c.visible}`)}break;case K.EVENT_COLUMN_PINNED:{const c=t,d=t.api.getColumnState().map(h=>({colId:h.colId,pinned:h.pinned}));this.columnModel.applyColumnState({state:d},"alignedGridChanged"),this.logger.log(`onColumnEvent-> processing ${t.type} pinned = ${c.pinned}`)}break;case K.EVENT_COLUMN_RESIZED:const a=t,l={};r.forEach(c=>{this.logger.log(`onColumnEvent-> processing ${t.type} actualWidth = ${c.getActualWidth()}`),l[c.getId()]={key:c.getColId(),newWidth:c.getActualWidth()}}),(e=a.flexColumns)==null||e.forEach(c=>{l[c.getId()]&&delete l[c.getId()]}),this.columnModel.setColumnWidths(Object.values(l),!1,a.finished,"alignedGridChanged");break}const o=this.ctrlsService.getGridBodyCtrl().isVerticalScrollShowing();this.getAlignedGridApis().forEach(a=>{a.setGridOption("alwaysShowVerticalScroll",o)})}};z([W("columnModel")],Du.prototype,"columnModel",2);z([W("ctrlsService")],Du.prototype,"ctrlsService",2);z([oa(0,Zn("loggerFactory"))],Du.prototype,"setBeans",1);z([de],Du.prototype,"init",1);Du=z([Me("alignedGridsService")],Du);var Ah=class extends ye{constructor(){super(...arguments),this.selectedNodes=new Map,this.lastRowNode=null}init(){this.rowSelection=this.gos.get("rowSelection"),this.groupSelectsChildren=this.gos.get("groupSelectsChildren"),this.addManagedPropertyListeners(["groupSelectsChildren","rowSelection"],()=>{this.groupSelectsChildren=this.gos.get("groupSelectsChildren"),this.rowSelection=this.gos.get("rowSelection"),this.deselectAllRowNodes({source:"api"})}),this.addManagedListener(this.eventService,K.EVENT_ROW_SELECTED,this.onRowSelected.bind(this))}destroy(){super.destroy(),this.resetNodes(),this.lastRowNode=null}isMultiselect(){return this.rowSelection==="multiple"}setNodesSelected(t){var e;const{newValue:i,clearSelection:s,suppressFinishActions:r,rangeSelect:n,nodes:o,event:a,source:l="api"}=t;if(o.length===0)return 0;if(o.length>1&&!this.isMultiselect())return console.warn("AG Grid: cannot multi select while rowSelection='single'"),0;const c=this.groupSelectsChildren&&t.groupSelectsFiltered===!0,u=o.map(h=>h.footer?h.sibling:h);if(n){if(o.length>1)return console.warn("AG Grid: cannot range select while selecting multiple rows"),0;let h=null;if(l==="checkboxSelected"&&i===!1&&this.lastRowNode&&(this.lastRowNode.id?h=this.lastRowNode:this.lastRowNode=null),h==null&&(h=this.getLastSelectedNode()),h){const p=u[0];if(p!==h&&this.isMultiselect())return this.selectRange(p,h,i,l)}}this.lastRowNode=i?null:u[0];let d=0;for(let h=0;h<u.length;h++){const p=u[h];c&&p.group||p.selectThisNode(i,a,l)&&d++,this.groupSelectsChildren&&((e=p.childrenAfterGroup)!=null&&e.length)&&(d+=this.selectChildren(p,i,c,l))}if(!r&&(i&&(s||!this.isMultiselect())&&(d+=this.clearOtherNodes(u[0],l)),d>0)){this.updateGroupsFromChildrenSelections(l);const p={type:K.EVENT_SELECTION_CHANGED,source:l};this.eventService.dispatchEvent(p)}return d}selectRange(t,e,i=!0,s){const r=this.rowModel.getNodesInRangeForSelection(t,e);let n=0;r.forEach(a=>{if(a.group&&this.groupSelectsChildren)return;a.selectThisNode(i,void 0,s)&&n++}),this.updateGroupsFromChildrenSelections(s);const o={type:K.EVENT_SELECTION_CHANGED,source:s};return this.eventService.dispatchEvent(o),n}selectChildren(t,e,i,s){const r=i?t.childrenAfterAggFilter:t.childrenAfterGroup;return St(r)?0:this.setNodesSelected({newValue:e,clearSelection:!1,suppressFinishActions:!0,groupSelectsFiltered:i,source:s,nodes:r})}getLastSelectedNode(){const t=Array.from(this.selectedNodes.keys());if(t.length==0)return null;const e=this.selectedNodes.get(di(t));return e||null}getSelectedNodes(){const t=[];return this.selectedNodes.forEach(e=>{e&&t.push(e)}),t}getSelectedRows(){const t=[];return this.selectedNodes.forEach(e=>{e&&e.data&&t.push(e.data)}),t}getSelectionCount(){return this.selectedNodes.size}filterFromSelection(t){const e=new Map;this.selectedNodes.forEach((i,s)=>{i&&t(i)&&e.set(s,i)}),this.selectedNodes=e}updateGroupsFromChildrenSelections(t,e){if(!this.groupSelectsChildren||this.rowModel.getType()!=="clientSide")return!1;const s=this.rowModel.getRootNode();e||(e=new Ug(!0,s),e.setInactive());let r=!1;return e.forEachChangedNodeDepthFirst(n=>{if(n!==s){const o=n.calculateSelectedFromChildren();r=n.selectThisNode(o===null?!1:o,void 0,t)||r}}),r}clearOtherNodes(t,e){const i=new Map;let s=0;return this.selectedNodes.forEach(r=>{if(r&&r.id!==t.id){const n=this.selectedNodes.get(r.id);s+=n.setSelectedParams({newValue:!1,clearSelection:!1,suppressFinishActions:!0,source:e}),this.groupSelectsChildren&&r.parent&&i.set(r.parent.id,r.parent)}}),i.forEach(r=>{const n=r.calculateSelectedFromChildren();r.selectThisNode(n===null?!1:n,void 0,e)}),s}onRowSelected(t){const e=t.node;this.groupSelectsChildren&&e.group||(e.isSelected()?this.selectedNodes.set(e.id,e):this.selectedNodes.delete(e.id))}syncInRowNode(t,e){this.syncInOldRowNode(t,e),this.syncInNewRowNode(t)}syncInOldRowNode(t,e){if(Pe(e)&&t.id!==e.id&&e){const s=e.id;this.selectedNodes.get(s)==t&&this.selectedNodes.set(e.id,e)}}syncInNewRowNode(t){this.selectedNodes.has(t.id)?(t.setSelectedInitialValue(!0),this.selectedNodes.set(t.id,t)):t.setSelectedInitialValue(!1)}reset(t){const e=this.getSelectionCount();if(this.resetNodes(),e){const i={type:K.EVENT_SELECTION_CHANGED,source:t};this.eventService.dispatchEvent(i)}}resetNodes(){var t;(t=this.selectedNodes)==null||t.clear()}getBestCostNodeSelection(){if(this.rowModel.getType()!=="clientSide")return;const e=this.rowModel.getTopLevelNodes();if(e===null)return;const i=[];function s(r){for(let n=0,o=r.length;n<o;n++){const a=r[n];if(a.isSelected())i.push(a);else{const l=a;l.group&&l.children&&s(l.children)}}}return s(e),i}isEmpty(){let t=0;return this.selectedNodes.forEach(e=>{e&&t++}),t===0}deselectAllRowNodes(t){const e=a=>a.selectThisNode(!1,void 0,s),i=this.rowModel.getType()==="clientSide",{source:s,justFiltered:r,justCurrentPage:n}=t;if(n||r){if(!i){console.error("AG Grid: selecting just filtered only works when gridOptions.rowModelType='clientSide'");return}this.getNodesToSelect(r,n).forEach(e)}else this.selectedNodes.forEach(a=>{a&&e(a)}),this.reset(s);i&&this.groupSelectsChildren&&this.updateGroupsFromChildrenSelections(s);const o={type:K.EVENT_SELECTION_CHANGED,source:s};this.eventService.dispatchEvent(o)}getSelectedCounts(t,e){let i=0,s=0;const r=n=>{this.groupSelectsChildren&&n.group||(n.isSelected()?i++:n.selectable&&s++)};return this.getNodesToSelect(t,e).forEach(r),{selectedCount:i,notSelectedCount:s}}getSelectAllState(t,e){const{selectedCount:i,notSelectedCount:s}=this.getSelectedCounts(t,e);return i===0&&s===0?!1:i>0&&s>0?null:i>0}hasNodesToSelect(t=!1,e=!1){return this.getNodesToSelect(t,e).filter(i=>i.selectable).length>0}getNodesToSelect(t=!1,e=!1){if(this.rowModel.getType()!=="clientSide")throw new Error(`selectAll only available when rowModelType='clientSide', ie not ${this.rowModel.getType()}`);const i=[];if(e)return this.paginationProxy.forEachNodeOnPage(r=>{if(!r.group){i.push(r);return}if(!r.expanded){const n=o=>{var a;i.push(o),(a=o.childrenAfterFilter)!=null&&a.length&&o.childrenAfterFilter.forEach(n)};n(r);return}this.groupSelectsChildren||i.push(r)}),i;const s=this.rowModel;return t?(s.forEachNodeAfterFilter(r=>{i.push(r)}),i):(s.forEachNode(r=>{i.push(r)}),i)}selectAllRowNodes(t){if(this.rowModel.getType()!=="clientSide")throw new Error(`selectAll only available when rowModelType='clientSide', ie not ${this.rowModel.getType()}`);const{source:e,justFiltered:i,justCurrentPage:s}=t,r=o=>o.selectThisNode(!0,void 0,e);this.getNodesToSelect(i,s).forEach(r),this.rowModel.getType()==="clientSide"&&this.groupSelectsChildren&&this.updateGroupsFromChildrenSelections(e);const n={type:K.EVENT_SELECTION_CHANGED,source:e};this.eventService.dispatchEvent(n)}getSelectionState(){const t=[];return this.selectedNodes.forEach(e=>{e!=null&&e.id&&t.push(e.id)}),t.length?t:null}setSelectionState(t,e){if(!Array.isArray(t))return;const i=new Set(t),s=[];this.rowModel.forEachNode(r=>{i.has(r.id)&&s.push(r)}),this.setNodesSelected({newValue:!0,nodes:s,source:e})}};z([W("rowModel")],Ah.prototype,"rowModel",2);z([W("paginationProxy")],Ah.prototype,"paginationProxy",2);z([de],Ah.prototype,"init",1);Ah=z([Me("selectionService")],Ah);var Pu=class{constructor(t){this.viaApi=(e,...i)=>(ot(`Since v31, 'columnApi.${e}' is deprecated and moved to 'api.${e}'.`),this.api[e](...i)),this.api=t}sizeColumnsToFit(t){this.viaApi("sizeColumnsToFit",t)}setColumnGroupOpened(t,e){this.viaApi("setColumnGroupOpened",t,e)}getColumnGroup(t,e){return this.viaApi("getColumnGroup",t,e)}getProvidedColumnGroup(t){return this.viaApi("getProvidedColumnGroup",t)}getDisplayNameForColumn(t,e){return this.viaApi("getDisplayNameForColumn",t,e)}getDisplayNameForColumnGroup(t,e){return this.viaApi("getDisplayNameForColumnGroup",t,e)}getColumn(t){return this.viaApi("getColumn",t)}getColumns(){return this.viaApi("getColumns")}applyColumnState(t){return this.viaApi("applyColumnState",t)}getColumnState(){return this.viaApi("getColumnState")}resetColumnState(){this.viaApi("resetColumnState")}getColumnGroupState(){return this.viaApi("getColumnGroupState")}setColumnGroupState(t){this.viaApi("setColumnGroupState",t)}resetColumnGroupState(){this.viaApi("resetColumnGroupState")}isPinning(){return this.viaApi("isPinning")}isPinningLeft(){return this.viaApi("isPinningLeft")}isPinningRight(){return this.viaApi("isPinningRight")}getDisplayedColAfter(t){return this.viaApi("getDisplayedColAfter",t)}getDisplayedColBefore(t){return this.viaApi("getDisplayedColBefore",t)}setColumnVisible(t,e){this.viaApi("setColumnVisible",t,e)}setColumnsVisible(t,e){this.viaApi("setColumnsVisible",t,e)}setColumnPinned(t,e){this.viaApi("setColumnPinned",t,e)}setColumnsPinned(t,e){this.viaApi("setColumnsPinned",t,e)}getAllGridColumns(){return this.viaApi("getAllGridColumns")}getDisplayedLeftColumns(){return this.viaApi("getDisplayedLeftColumns")}getDisplayedCenterColumns(){return this.viaApi("getDisplayedCenterColumns")}getDisplayedRightColumns(){return this.viaApi("getDisplayedRightColumns")}getAllDisplayedColumns(){return this.viaApi("getAllDisplayedColumns")}getAllDisplayedVirtualColumns(){return this.viaApi("getAllDisplayedVirtualColumns")}moveColumn(t,e){this.viaApi("moveColumn",t,e)}moveColumnByIndex(t,e){this.viaApi("moveColumnByIndex",t,e)}moveColumns(t,e){this.viaApi("moveColumns",t,e)}moveRowGroupColumn(t,e){this.viaApi("moveRowGroupColumn",t,e)}setColumnAggFunc(t,e){this.viaApi("setColumnAggFunc",t,e)}setColumnWidth(t,e,i=!0,s){this.viaApi("setColumnWidth",t,e,i,s)}setColumnWidths(t,e=!0,i){this.viaApi("setColumnWidths",t,e,i)}setPivotMode(t){this.viaApi("setPivotMode",t)}isPivotMode(){return this.viaApi("isPivotMode")}getPivotResultColumn(t,e){return this.viaApi("getPivotResultColumn",t,e)}setValueColumns(t){this.viaApi("setValueColumns",t)}getValueColumns(){return this.viaApi("getValueColumns")}removeValueColumn(t){this.viaApi("removeValueColumn",t)}removeValueColumns(t){this.viaApi("removeValueColumns",t)}addValueColumn(t){this.viaApi("addValueColumn",t)}addValueColumns(t){this.viaApi("addValueColumns",t)}setRowGroupColumns(t){this.viaApi("setRowGroupColumns",t)}removeRowGroupColumn(t){this.viaApi("removeRowGroupColumn",t)}removeRowGroupColumns(t){this.viaApi("removeRowGroupColumns",t)}addRowGroupColumn(t){this.viaApi("addRowGroupColumn",t)}addRowGroupColumns(t){this.viaApi("addRowGroupColumns",t)}getRowGroupColumns(){return this.viaApi("getRowGroupColumns")}setPivotColumns(t){this.viaApi("setPivotColumns",t)}removePivotColumn(t){this.viaApi("removePivotColumn",t)}removePivotColumns(t){this.viaApi("removePivotColumns",t)}addPivotColumn(t){this.viaApi("addPivotColumn",t)}addPivotColumns(t){this.viaApi("addPivotColumns",t)}getPivotColumns(){return this.viaApi("getPivotColumns")}getLeftDisplayedColumnGroups(){return this.viaApi("getLeftDisplayedColumnGroups")}getCenterDisplayedColumnGroups(){return this.viaApi("getCenterDisplayedColumnGroups")}getRightDisplayedColumnGroups(){return this.viaApi("getRightDisplayedColumnGroups")}getAllDisplayedColumnGroups(){return this.viaApi("getAllDisplayedColumnGroups")}autoSizeColumn(t,e){return this.viaApi("autoSizeColumn",t,e)}autoSizeColumns(t,e){this.viaApi("autoSizeColumns",t,e)}autoSizeAllColumns(t){this.viaApi("autoSizeAllColumns",t)}setPivotResultColumns(t){this.viaApi("setPivotResultColumns",t)}getPivotResultColumns(){return this.viaApi("getPivotResultColumns")}};z([W("gridApi")],Pu.prototype,"api",2);Pu=z([Me("columnApi")],Pu);var uc=class extends ye{constructor(){super(...arguments),this.initialised=!1,this.isSsrm=!1}init(){this.isSsrm=this.gos.isRowModelType("serverSide"),this.cellExpressions=this.gos.get("enableCellExpressions"),this.isTreeData=this.gos.get("treeData"),this.initialised=!0;const t=i=>this.callColumnCellValueChangedHandler(i),e=this.gos.useAsyncEvents();this.eventService.addEventListener(K.EVENT_CELL_VALUE_CHANGED,t,e),this.addDestroyFunc(()=>this.eventService.removeEventListener(K.EVENT_CELL_VALUE_CHANGED,t,e)),this.addManagedPropertyListener("treeData",i=>this.isTreeData=i.currentValue)}getValue(t,e,i=!1,s=!1){if(this.initialised||this.init(),!e)return;const r=t.getColDef(),n=r.field,o=t.getColId(),a=e.data;let l;const c=e.groupData&&e.groupData[o]!==void 0,u=!s&&e.aggData&&e.aggData[o]!==void 0,d=this.isSsrm&&s&&!!t.getColDef().aggFunc,h=this.isSsrm&&e.footer&&e.field&&(t.getColDef().showRowGroup===!0||t.getColDef().showRowGroup===e.field);if(i&&r.filterValueGetter?l=this.executeFilterValueGetter(r.filterValueGetter,a,t,e):this.isTreeData&&u?l=e.aggData[o]:this.isTreeData&&r.valueGetter?l=this.executeValueGetter(r.valueGetter,a,t,e):this.isTreeData&&n&&a?l=Df(a,n,t.isFieldContainsDots()):c?l=e.groupData[o]:u?l=e.aggData[o]:r.valueGetter?l=this.executeValueGetter(r.valueGetter,a,t,e):h?l=Df(a,e.field,t.isFieldContainsDots()):n&&a&&!d&&(l=Df(a,n,t.isFieldContainsDots())),this.cellExpressions&&typeof l=="string"&&l.indexOf("=")===0){const p=l.substring(1);l=this.executeValueGetter(p,a,t,e)}if(l==null){const p=this.getOpenedGroup(e,t);if(p!=null)return p}return l}parseValue(t,e,i,s){const r=t.getColDef(),n=this.gos.addGridCommonParams({node:e,data:e==null?void 0:e.data,oldValue:s,newValue:i,colDef:r,column:t}),o=r.valueParser;return Pe(o)?typeof o=="function"?o(n):this.expressionService.evaluate(o,n):i}formatValue(t,e,i,s,r=!0){let n=null,o;const a=t.getColDef();if(s?o=s:r&&(o=a.valueFormatter),o){const l=this.gos.addGridCommonParams({value:i,node:e,data:e?e.data:null,colDef:a,column:t});typeof o=="function"?n=o(l):n=this.expressionService.evaluate(o,l)}else if(a.refData)return a.refData[i]||"";return n==null&&Array.isArray(i)&&(n=i.join(", ")),n}getOpenedGroup(t,e){if(!this.gos.get("showOpenedGroup")||!e.getColDef().showRowGroup)return;const s=e.getColDef().showRowGroup;let r=t.parent;for(;r!=null;){if(r.rowGroupColumn&&(s===!0||s===r.rowGroupColumn.getColId()))return r.key;r=r.parent}}setValue(t,e,i,s){const r=this.columnModel.getPrimaryColumn(e);if(!t||!r)return!1;St(t.data)&&(t.data={});const{field:n,valueSetter:o}=r.getColDef();if(St(n)&&St(o))return console.warn("AG Grid: you need either field or valueSetter set on colDef for editing to work"),!1;if(!this.dataTypeService.checkType(r,i))return console.warn("AG Grid: Data type of the new value does not match the cell data type of the column"),!1;const a=this.gos.addGridCommonParams({node:t,data:t.data,oldValue:this.getValue(r,t),newValue:i,colDef:r.getColDef(),column:r});a.newValue=i;let l;if(Pe(o)?typeof o=="function"?l=o(a):l=this.expressionService.evaluate(o,a):l=this.setValueUsingField(t.data,n,i,r.isFieldContainsDots()),l===void 0&&(l=!0),!l)return!1;t.resetQuickFilterAggregateText(),this.valueCache.onDataChanged(),a.newValue=this.getValue(r,t);const c={type:K.EVENT_CELL_VALUE_CHANGED,event:null,rowIndex:t.rowIndex,rowPinned:t.rowPinned,column:a.column,api:a.api,columnApi:a.columnApi,colDef:a.colDef,context:a.context,data:t.data,node:t,oldValue:a.oldValue,newValue:a.newValue,value:a.newValue,source:s};return this.eventService.dispatchEvent(c),!0}callColumnCellValueChangedHandler(t){const e=t.colDef.onCellValueChanged;typeof e=="function"&&this.getFrameworkOverrides().wrapOutgoing(()=>{e({node:t.node,data:t.data,oldValue:t.oldValue,newValue:t.newValue,colDef:t.colDef,column:t.column,api:t.api,columnApi:t.columnApi,context:t.context})})}setValueUsingField(t,e,i,s){if(!e)return!1;let r=!1;if(!s)r=t[e]===i,r||(t[e]=i);else{const n=e.split(".");let o=t;for(;n.length>0&&o;){const a=n.shift();n.length===0?(r=o[a]===i,r||(o[a]=i)):o=o[a]}}return!r}executeFilterValueGetter(t,e,i,s){const r=this.gos.addGridCommonParams({data:e,node:s,column:i,colDef:i.getColDef(),getValue:this.getValueCallback.bind(this,s)});return typeof t=="function"?t(r):this.expressionService.evaluate(t,r)}executeValueGetter(t,e,i,s){const r=i.getColId(),n=this.valueCache.getValue(s,r);if(n!==void 0)return n;const o=this.gos.addGridCommonParams({data:e,node:s,column:i,colDef:i.getColDef(),getValue:this.getValueCallback.bind(this,s)});let a;return typeof t=="function"?a=t(o):a=this.expressionService.evaluate(t,o),this.valueCache.setValue(s,r,a),a}getValueCallback(t,e){const i=this.columnModel.getPrimaryColumn(e);return i?this.getValue(i,t):null}getKeyForNode(t,e){const i=this.getValue(t,e),s=t.getColDef().keyCreator;let r=i;if(s){const n=this.gos.addGridCommonParams({value:i,colDef:t.getColDef(),column:t,node:e,data:e.data});r=s(n)}return typeof r=="string"||r==null||(r=String(r),r==="[object Object]"&&ot("a column you are grouping or pivoting by has objects as values. If you want to group by complex objects then either a) use a colDef.keyCreator (se AG Grid docs) or b) to toString() on the object to return a key")),r}};z([W("expressionService")],uc.prototype,"expressionService",2);z([W("columnModel")],uc.prototype,"columnModel",2);z([W("valueCache")],uc.prototype,"valueCache",2);z([W("dataTypeService")],uc.prototype,"dataTypeService",2);z([de],uc.prototype,"init",1);uc=z([Me("valueService")],uc);var gy=class extends ye{constructor(){super(...arguments),this.expressionToFunctionCache={}}setBeans(t){this.logger=t.create("ExpressionService")}evaluate(t,e){if(typeof t=="string")return this.evaluateExpression(t,e);console.error("AG Grid: value should be either a string or a function",t)}evaluateExpression(t,e){try{return this.createExpressionFunction(t)(e.value,e.context,e.oldValue,e.newValue,e.value,e.node,e.data,e.colDef,e.rowIndex,e.api,e.columnApi,e.getValue,e.column,e.columnGroup)}catch(i){return console.log("Processing of the expression failed"),console.log("Expression = "+t),console.log("Params =",e),console.log("Exception = "+i),null}}createExpressionFunction(t){if(this.expressionToFunctionCache[t])return this.expressionToFunctionCache[t];const e=this.createFunctionBody(t),i=new Function("x, ctx, oldValue, newValue, value, node, data, colDef, rowIndex, api, columnApi, getValue, column, columnGroup",e);return this.expressionToFunctionCache[t]=i,i}createFunctionBody(t){return t.indexOf("return")>=0?t:"return "+t+";"}};z([oa(0,Zn("loggerFactory"))],gy.prototype,"setBeans",1);gy=z([Me("expressionService")],gy);var my=class extends ye{setBeans(t){this.logging=t.get("debug")}create(t){return new Ix(t,this.isLogging.bind(this))}isLogging(){return this.logging}};z([oa(0,Zn("gridOptionsService"))],my.prototype,"setBeans",1);my=z([Me("loggerFactory")],my);var Ix=class{constructor(e,i){this.name=e,this.isLoggingFunc=i}isLogging(){return this.isLoggingFunc()}log(e){this.isLoggingFunc()&&console.log("AG Grid."+this.name+": "+e)}},cd=class extends ye{setComp(t,e,i){this.view=t,this.eGridHostDiv=e,this.eGui=i,this.eGui.setAttribute("grid-id",this.context.getGridId()),this.dragAndDropService.addDropTarget({getContainer:()=>this.eGui,isInterestedIn:r=>r===1||r===0,getIconName:()=>st.ICON_NOT_ALLOWED}),this.mouseEventService.stampTopLevelGridCompWithGridInstance(e),this.createManagedBean(new xx(this.view)),this.addRtlSupport();const s=this.resizeObserverService.observeResize(this.eGridHostDiv,this.onGridSizeChanged.bind(this));this.addDestroyFunc(()=>s()),this.ctrlsService.register("gridCtrl",this)}isDetailGrid(){var t;const e=this.focusService.findTabbableParent(this.getGui());return((t=e==null?void 0:e.getAttribute("row-id"))==null?void 0:t.startsWith("detail"))||!1}showDropZones(){return vt.__isRegistered("@ag-grid-enterprise/row-grouping",this.context.getGridId())}showSideBar(){return vt.__isRegistered("@ag-grid-enterprise/side-bar",this.context.getGridId())}showStatusBar(){return vt.__isRegistered("@ag-grid-enterprise/status-bar",this.context.getGridId())}showWatermark(){return vt.__isRegistered("@ag-grid-enterprise/core",this.context.getGridId())}onGridSizeChanged(){const t={type:K.EVENT_GRID_SIZE_CHANGED,clientWidth:this.eGridHostDiv.clientWidth,clientHeight:this.eGridHostDiv.clientHeight};this.eventService.dispatchEvent(t)}addRtlSupport(){const t=this.gos.get("enableRtl")?"ag-rtl":"ag-ltr";this.view.setRtlClass(t)}destroyGridUi(){this.view.destroyGridUi()}getGui(){return this.eGui}setResizeCursor(t){this.view.setCursor(t?"ew-resize":null)}disableUserSelect(t){this.view.setUserSelect(t?"none":null)}focusNextInnerContainer(t){const e=this.view.getFocusableContainers(),i=this.gos.getActiveDomElement(),r=e.findIndex(n=>n.contains(i))+(t?-1:1);return r<=0||r>=e.length?!1:this.focusService.focusInto(e[r])}focusInnerElement(t){const e=this.view.getFocusableContainers(),i=this.columnModel.getAllDisplayedColumns();if(t){if(e.length>1)return this.focusService.focusInto(di(e),!0);const s=di(i);if(this.focusService.focusGridView(s,!0))return!0}if(this.gos.get("headerHeight")===0||this.gos.get("suppressHeaderFocus")){if(this.focusService.focusGridView(i[0]))return!0;for(let s=1;s<e.length;s++)if(this.focusService.focusInto(e[s]))return!0;return!1}return this.focusService.focusFirstHeader()}forceFocusOutOfContainer(t=!1){this.view.forceFocusOutOfContainer(t)}};z([W("focusService")],cd.prototype,"focusService",2);z([W("resizeObserverService")],cd.prototype,"resizeObserverService",2);z([W("columnModel")],cd.prototype,"columnModel",2);z([W("ctrlsService")],cd.prototype,"ctrlsService",2);z([W("mouseEventService")],cd.prototype,"mouseEventService",2);z([W("dragAndDropService")],cd.prototype,"dragAndDropService",2);var ud=class extends yl{constructor(t){super(),this.eGridDiv=t}postConstruct(){this.logger=this.loggerFactory.create("GridComp");const t={destroyGridUi:()=>this.destroyBean(this),setRtlClass:i=>this.addCssClass(i),forceFocusOutOfContainer:this.forceFocusOutOfContainer.bind(this),updateLayoutClasses:this.updateLayoutClasses.bind(this),getFocusableContainers:this.getFocusableContainers.bind(this),setUserSelect:i=>{this.getGui().style.userSelect=i??"",this.getGui().style.webkitUserSelect=i??""},setCursor:i=>{this.getGui().style.cursor=i??""}};this.ctrl=this.createManagedBean(new cd);const e=this.createTemplate();this.setTemplate(e),this.ctrl.setComp(t,this.eGridDiv,this.getGui()),this.insertGridIntoDom(),this.initialiseTabGuard({onTabKeyDown:()=>{},focusInnerElement:i=>this.ctrl.focusInnerElement(i),forceFocusOutWhenTabGuardsAreEmpty:!0})}insertGridIntoDom(){const t=this.getGui();this.eGridDiv.appendChild(t),this.addDestroyFunc(()=>{this.eGridDiv.removeChild(t),this.logger.log("Grid removed from DOM")})}updateLayoutClasses(t,e){const i=this.eRootWrapperBody.classList;i.toggle("ag-layout-auto-height",e.autoHeight),i.toggle("ag-layout-normal",e.normal),i.toggle("ag-layout-print",e.print),this.addOrRemoveCssClass("ag-layout-auto-height",e.autoHeight),this.addOrRemoveCssClass("ag-layout-normal",e.normal),this.addOrRemoveCssClass("ag-layout-print",e.print)}createTemplate(){const t=this.ctrl.showDropZones()?"<ag-grid-header-drop-zones></ag-grid-header-drop-zones>":"",e=this.ctrl.showSideBar()?'<ag-side-bar ref="sideBar"></ag-side-bar>':"",i=this.ctrl.showStatusBar()?'<ag-status-bar ref="statusBar"></ag-status-bar>':"",s=this.ctrl.showWatermark()?"<ag-watermark></ag-watermark>":"";return`<div class="ag-root-wrapper" role="presentation">
                ${t}
                <div class="ag-root-wrapper-body" ref="rootWrapperBody" role="presentation">
                    <ag-grid-body ref="gridBody"></ag-grid-body>
                    ${e}
                </div>
                ${i}
                <ag-pagination></ag-pagination>
                ${s}
            </div>`}getFocusableElement(){return this.eRootWrapperBody}getFocusableContainers(){const t=[this.gridBodyComp.getGui()];return this.sideBarComp&&t.push(this.sideBarComp.getGui()),t.filter(e=>Fn(e))}};z([W("loggerFactory")],ud.prototype,"loggerFactory",2);z([pe("gridBody")],ud.prototype,"gridBodyComp",2);z([pe("sideBar")],ud.prototype,"sideBarComp",2);z([pe("rootWrapperBody")],ud.prototype,"eRootWrapperBody",2);z([de],ud.prototype,"postConstruct",1);var Iu=class extends ye{progressSort(t,e,i){const s=this.getNextSortDirection(t);this.setSortForColumn(t,s,e,i)}setSortForColumn(t,e,i,s){e!=="asc"&&e!=="desc"&&(e=null);const r=this.gos.isColumnsSortingCoupledToGroup();let n=[t];if(r&&t.getColDef().showRowGroup){const l=this.columnModel.getSourceColumnsForGroupColumn(t),c=l==null?void 0:l.filter(u=>u.isSortable());c&&(n=[t,...c])}n.forEach(l=>l.setSort(e,s));const o=(i||this.gos.get("alwaysMultiSort"))&&!this.gos.get("suppressMultiSort"),a=[];if(!o){const l=this.clearSortBarTheseColumns(n,s);a.push(...l)}this.updateSortIndex(t),a.push(...n),this.dispatchSortChangedEvents(s,a)}updateSortIndex(t){const e=this.gos.isColumnsSortingCoupledToGroup(),i=this.columnModel.getGroupDisplayColumnForGroup(t.getId()),s=e&&i||t,r=this.getColumnsWithSortingOrdered();this.columnModel.getPrimaryAndSecondaryAndAutoColumns().forEach(a=>a.setSortIndex(null));const n=r.filter(a=>e&&a.getColDef().showRowGroup?!1:a!==s);(s.getSort()?[...n,s]:n).forEach((a,l)=>{a.setSortIndex(l)})}onSortChanged(t,e){this.dispatchSortChangedEvents(t,e)}isSortActive(){const e=this.columnModel.getPrimaryAndSecondaryAndAutoColumns().filter(i=>!!i.getSort());return e&&e.length>0}dispatchSortChangedEvents(t,e){const i={type:K.EVENT_SORT_CHANGED,source:t};e&&(i.columns=e),this.eventService.dispatchEvent(i)}clearSortBarTheseColumns(t,e){const i=[];return this.columnModel.getPrimaryAndSecondaryAndAutoColumns().forEach(s=>{t.includes(s)||(s.getSort()&&i.push(s),s.setSort(void 0,e))}),i}getNextSortDirection(t){let e;if(t.getColDef().sortingOrder?e=t.getColDef().sortingOrder:this.gos.get("sortingOrder")?e=this.gos.get("sortingOrder"):e=Iu.DEFAULT_SORTING_ORDER,!Array.isArray(e)||e.length<=0)return console.warn(`AG Grid: sortingOrder must be an array with at least one element, currently it's ${e}`),null;const i=e.indexOf(t.getSort()),s=i<0,r=i==e.length-1;let n;return s||r?n=e[0]:n=e[i+1],Iu.DEFAULT_SORTING_ORDER.indexOf(n)<0?(console.warn("AG Grid: invalid sort type "+n),null):n}getIndexedSortMap(){let t=this.columnModel.getPrimaryAndSecondaryAndAutoColumns().filter(n=>!!n.getSort());if(this.columnModel.isPivotMode()){const n=this.gos.isColumnsSortingCoupledToGroup();t=t.filter(o=>{const a=!!o.getAggFunc(),l=!o.isPrimary(),c=n?this.columnModel.getGroupDisplayColumnForGroup(o.getId()):o.getColDef().showRowGroup;return a||l||c})}const e=this.columnModel.getRowGroupColumns().filter(n=>!!n.getSort()),i={};t.forEach((n,o)=>i[n.getId()]=o),t.sort((n,o)=>{const a=n.getSortIndex(),l=o.getSortIndex();if(a!=null&&l!=null)return a-l;if(a==null&&l==null){const c=i[n.getId()],u=i[o.getId()];return c>u?1:-1}else return l==null?-1:1});const s=this.gos.isColumnsSortingCoupledToGroup()&&!!e.length;s&&(t=[...new Set(t.map(n=>{var o;return(o=this.columnModel.getGroupDisplayColumnForGroup(n.getId()))!=null?o:n}))]);const r=new Map;return t.forEach((n,o)=>r.set(n,o)),s&&e.forEach(n=>{const o=this.columnModel.getGroupDisplayColumnForGroup(n.getId());r.set(n,r.get(o))}),r}getColumnsWithSortingOrdered(){return[...this.getIndexedSortMap().entries()].sort(([t,e],[i,s])=>e-s).map(([t])=>t)}getSortModel(){return this.getColumnsWithSortingOrdered().filter(t=>t.getSort()).map(t=>({sort:t.getSort(),colId:t.getId()}))}getSortOptions(){return this.getColumnsWithSortingOrdered().filter(t=>t.getSort()).map(t=>({sort:t.getSort(),column:t}))}canColumnDisplayMixedSort(t){const e=this.gos.isColumnsSortingCoupledToGroup(),i=!!t.getColDef().showRowGroup;return e&&i}getDisplaySortForColumn(t){const e=this.columnModel.getSourceColumnsForGroupColumn(t);if(!this.canColumnDisplayMixedSort(t)||!(e!=null&&e.length))return t.getSort();const s=t.getColDef().field!=null||!!t.getColDef().valueGetter?[t,...e]:e,r=s[0].getSort();return s.every(o=>o.getSort()==r)?r:"mixed"}getDisplaySortIndexForColumn(t){return this.getIndexedSortMap().get(t)}};Iu.DEFAULT_SORTING_ORDER=["asc","desc",null];z([W("columnModel")],Iu.prototype,"columnModel",2);Iu=z([Me("sortController")],Iu);var Ri=class extends ye{static addKeyboardModeEvents(t){this.instanceCount>0||(t.addEventListener("keydown",Ri.toggleKeyboardMode),t.addEventListener("mousedown",Ri.toggleKeyboardMode))}static removeKeyboardModeEvents(t){this.instanceCount>0||(t.addEventListener("keydown",Ri.toggleKeyboardMode),t.addEventListener("mousedown",Ri.toggleKeyboardMode))}static toggleKeyboardMode(t){const e=Ri.keyboardModeActive,i=t.type==="keydown";i&&(t.ctrlKey||t.metaKey||t.altKey)||e!==i&&(Ri.keyboardModeActive=i)}static unregisterGridCompController(t){Ri.removeKeyboardModeEvents(t)}init(){const t=this.clearFocusedCell.bind(this);this.addManagedListener(this.eventService,K.EVENT_COLUMN_PIVOT_MODE_CHANGED,t),this.addManagedListener(this.eventService,K.EVENT_NEW_COLUMNS_LOADED,this.onColumnEverythingChanged.bind(this)),this.addManagedListener(this.eventService,K.EVENT_COLUMN_GROUP_OPENED,t),this.addManagedListener(this.eventService,K.EVENT_COLUMN_ROW_GROUP_CHANGED,t),this.registerKeyboardFocusEvents(),this.ctrlsService.whenReady(e=>{this.gridCtrl=e.gridCtrl})}registerKeyboardFocusEvents(){const t=this.gos.getDocument();Ri.addKeyboardModeEvents(t),Ri.instanceCount++,this.addDestroyFunc(()=>{Ri.instanceCount--,Ri.unregisterGridCompController(t)})}onColumnEverythingChanged(){if(!this.focusedCellPosition)return;const t=this.focusedCellPosition.column,e=this.columnModel.getGridColumn(t.getId());t!==e&&this.clearFocusedCell()}isKeyboardMode(){return Ri.keyboardModeActive}getFocusCellToUseAfterRefresh(){return this.gos.get("suppressFocusAfterRefresh")||!this.focusedCellPosition||this.isDomDataMissingInHierarchy(this.gos.getActiveDomElement(),yu.DOM_DATA_KEY_ROW_CTRL)?null:this.focusedCellPosition}getFocusHeaderToUseAfterRefresh(){return this.gos.get("suppressFocusAfterRefresh")||!this.focusedHeaderPosition||this.isDomDataMissingInHierarchy(this.gos.getActiveDomElement(),FC.DOM_DATA_KEY_HEADER_CTRL)?null:this.focusedHeaderPosition}isDomDataMissingInHierarchy(t,e){let i=t;for(;i;){if(this.gos.getDomData(i,e))return!1;i=i.parentNode}return!0}getFocusedCell(){return this.focusedCellPosition}shouldRestoreFocus(t){return this.isCellRestoreFocused(t)?(setTimeout(()=>{this.restoredFocusedCellPosition=null},0),!0):!1}isCellRestoreFocused(t){return this.restoredFocusedCellPosition==null?!1:this.cellPositionUtils.equals(t,this.restoredFocusedCellPosition)}setRestoreFocusedCell(t){this.getFrameworkOverrides().renderingEngine==="react"&&(this.restoredFocusedCellPosition=t)}getFocusEventParams(){const{rowIndex:t,rowPinned:e,column:i}=this.focusedCellPosition,s={rowIndex:t,rowPinned:e,column:i,isFullWidthCell:!1},r=this.rowRenderer.getRowByPosition({rowIndex:t,rowPinned:e});return r&&(s.isFullWidthCell=r.isFullWidth()),s}clearFocusedCell(){if(this.restoredFocusedCellPosition=null,this.focusedCellPosition==null)return;const t=it({type:K.EVENT_CELL_FOCUS_CLEARED},this.getFocusEventParams());this.focusedCellPosition=null,this.eventService.dispatchEvent(t)}setFocusedCell(t){const{column:e,rowIndex:i,rowPinned:s,forceBrowserFocus:r=!1,preventScrollOnBrowserFocus:n=!1}=t,o=this.columnModel.getGridColumn(e);if(!o){this.focusedCellPosition=null;return}this.focusedCellPosition=o?{rowIndex:i,rowPinned:tl(s),column:o}:null;const a=$i(it({type:K.EVENT_CELL_FOCUSED},this.getFocusEventParams()),{forceBrowserFocus:r,preventScrollOnBrowserFocus:n,floating:null});this.eventService.dispatchEvent(a)}isCellFocused(t){return this.focusedCellPosition==null?!1:this.cellPositionUtils.equals(t,this.focusedCellPosition)}isRowNodeFocused(t){return this.isRowFocused(t.rowIndex,t.rowPinned)}isHeaderWrapperFocused(t){if(this.focusedHeaderPosition==null)return!1;const e=t.getColumnGroupChild(),i=t.getRowIndex(),s=t.getPinned(),{column:r,headerRowIndex:n}=this.focusedHeaderPosition;return e===r&&i===n&&s==r.getPinned()}clearFocusedHeader(){this.focusedHeaderPosition=null}getFocusedHeader(){return this.focusedHeaderPosition}setFocusedHeader(t,e){this.focusedHeaderPosition={headerRowIndex:t,column:e}}focusHeaderPosition(t){if(this.gos.get("suppressHeaderFocus"))return!1;const{direction:e,fromTab:i,allowUserOverride:s,event:r,fromCell:n,rowWithoutSpanValue:o}=t;let{headerPosition:a}=t;if(n&&this.filterManager.isAdvancedFilterHeaderActive())return this.focusAdvancedFilter(a);if(s){const l=this.getFocusedHeader(),c=this.headerNavigationService.getHeaderRowCount();if(i){const u=this.gos.getCallback("tabToNextHeader");u&&(a=this.getHeaderPositionFromUserFunc({userFunc:u,direction:e,currentPosition:l,headerPosition:a,headerRowCount:c}))}else{const u=this.gos.getCallback("navigateToNextHeader");if(u&&r){const d={key:r.key,previousHeaderPosition:l,nextHeaderPosition:a,headerRowCount:c,event:r};a=u(d)}}}return a?this.focusProvidedHeaderPosition({headerPosition:a,direction:e,event:r,fromCell:n,rowWithoutSpanValue:o}):!1}focusHeaderPositionFromUserFunc(t){if(this.gos.get("suppressHeaderFocus"))return!1;const{userFunc:e,headerPosition:i,direction:s,event:r}=t,n=this.getFocusedHeader(),o=this.headerNavigationService.getHeaderRowCount(),a=this.getHeaderPositionFromUserFunc({userFunc:e,direction:s,currentPosition:n,headerPosition:i,headerRowCount:o});return!!a&&this.focusProvidedHeaderPosition({headerPosition:a,direction:s,event:r})}getHeaderPositionFromUserFunc(t){const{userFunc:e,direction:i,currentPosition:s,headerPosition:r,headerRowCount:n}=t,a=e({backwards:i==="Before",previousHeaderPosition:s,nextHeaderPosition:r,headerRowCount:n});return a===!0||a===null?(a===null&&ot("Returning `null` from tabToNextHeader is deprecated. Return `true` to stay on the current header, or `false` to let the browser handle the tab behaviour."),s):a===!1?null:a}focusProvidedHeaderPosition(t){const{headerPosition:e,direction:i,fromCell:s,rowWithoutSpanValue:r,event:n}=t;if(e.headerRowIndex===-1)return this.filterManager.isAdvancedFilterHeaderActive()?this.focusAdvancedFilter(e):this.focusGridView(e.column);this.headerNavigationService.scrollToColumn(e.column,i);const a=this.ctrlsService.getHeaderRowContainerCtrl(e.column.getPinned()).focusHeader(e.headerRowIndex,e.column,n);return a&&(r!=null||s)&&this.headerNavigationService.setCurrentHeaderRowWithoutSpan(r??-1),a}focusFirstHeader(){let t=this.columnModel.getAllDisplayedColumns()[0];if(!t)return!1;t.getParent()&&(t=this.columnModel.getColumnGroupAtLevel(t,0));const e=this.headerPositionUtils.getHeaderIndexToFocus(t,0);return this.focusHeaderPosition({headerPosition:e,rowWithoutSpanValue:0})}focusLastHeader(t){const e=this.headerNavigationService.getHeaderRowCount()-1,i=di(this.columnModel.getAllDisplayedColumns());return this.focusHeaderPosition({headerPosition:{headerRowIndex:e,column:i},rowWithoutSpanValue:-1,event:t})}focusPreviousFromFirstCell(t){return this.filterManager.isAdvancedFilterHeaderActive()?this.focusAdvancedFilter(null):this.focusLastHeader(t)}isAnyCellFocused(){return!!this.focusedCellPosition}isRowFocused(t,e){return this.focusedCellPosition==null?!1:this.focusedCellPosition.rowIndex===t&&this.focusedCellPosition.rowPinned===tl(e)}findFocusableElements(t,e,i=!1){const s=bG;let r=hM;e&&(r+=", "+e),i&&(r+=', [tabindex="-1"]');const n=Array.prototype.slice.apply(t.querySelectorAll(s)).filter(l=>Fn(l)),o=Array.prototype.slice.apply(t.querySelectorAll(r));return o.length?((l,c)=>l.filter(u=>c.indexOf(u)===-1))(n,o):n}focusInto(t,e=!1,i=!1){const s=this.findFocusableElements(t,null,i),r=e?di(s):s[0];return r?(r.focus({preventScroll:!0}),!0):!1}findFocusableElementBeforeTabGuard(t,e){if(!e)return null;const i=this.findFocusableElements(t),s=i.indexOf(e);if(s===-1)return null;let r=-1;for(let n=s-1;n>=0;n--)if(i[n].classList.contains("ag-tab-guard-top")){r=n;break}return r<=0?null:i[r-1]}findNextFocusableElement(t=this.eGridDiv,e,i){const s=this.findFocusableElements(t,e?':not([tabindex="-1"])':null),r=this.gos.getActiveDomElement();let n;e?n=s.findIndex(a=>a.contains(r)):n=s.indexOf(r);const o=n+(i?-1:1);return o<0||o>=s.length?null:s[o]}isTargetUnderManagedComponent(t,e){if(!e)return!1;const i=t.querySelectorAll(`.${ml.FOCUS_MANAGED_CLASS}`);if(!i.length)return!1;for(let s=0;s<i.length;s++)if(i[s].contains(e))return!0;return!1}findTabbableParent(t,e=5){let i=0;for(;t&&Ww(t)===null&&++i<=e;)t=t.parentElement;return Ww(t)===null?null:t}focusGridView(t,e){var i;if(this.gos.get("suppressCellFocus"))return e?this.gos.get("suppressHeaderFocus")?this.focusNextGridCoreContainer(!0,!0):this.focusLastHeader():this.focusNextGridCoreContainer(!1);const s=e?this.rowPositionUtils.getLastRow():this.rowPositionUtils.getFirstRow();if(!s)return!1;const{rowIndex:r,rowPinned:n}=s,o=this.getFocusedHeader();return!t&&o&&(t=o.column),r==null||!t?!1:(this.navigationService.ensureCellVisible({rowIndex:r,column:t,rowPinned:n}),this.setFocusedCell({rowIndex:r,column:t,rowPinned:tl(n),forceBrowserFocus:!0}),(i=this.rangeService)==null||i.setRangeToCell({rowIndex:r,rowPinned:n,column:t}),!0)}focusNextGridCoreContainer(t,e=!1){return!e&&this.gridCtrl.focusNextInnerContainer(t)?!0:((e||!t&&!this.gridCtrl.isDetailGrid())&&this.gridCtrl.forceFocusOutOfContainer(t),!1)}focusAdvancedFilter(t){var e,i;return this.advancedFilterFocusColumn=t==null?void 0:t.column,(i=(e=this.advancedFilterService)==null?void 0:e.getCtrl().focusHeaderComp())!=null?i:!1}focusNextFromAdvancedFilter(t,e){var i,s;const r=(s=e?void 0:this.advancedFilterFocusColumn)!=null?s:(i=this.columnModel.getAllDisplayedColumns())==null?void 0:i[0];return t?this.focusHeaderPosition({headerPosition:{column:r,headerRowIndex:this.headerNavigationService.getHeaderRowCount()-1}}):this.focusGridView(r)}clearAdvancedFilterColumn(){this.advancedFilterFocusColumn=void 0}};Ri.keyboardModeActive=!1;Ri.instanceCount=0;z([W("eGridDiv")],Ri.prototype,"eGridDiv",2);z([W("columnModel")],Ri.prototype,"columnModel",2);z([W("headerNavigationService")],Ri.prototype,"headerNavigationService",2);z([W("headerPositionUtils")],Ri.prototype,"headerPositionUtils",2);z([W("rowRenderer")],Ri.prototype,"rowRenderer",2);z([W("rowPositionUtils")],Ri.prototype,"rowPositionUtils",2);z([W("cellPositionUtils")],Ri.prototype,"cellPositionUtils",2);z([W("navigationService")],Ri.prototype,"navigationService",2);z([W("ctrlsService")],Ri.prototype,"ctrlsService",2);z([W("filterManager")],Ri.prototype,"filterManager",2);z([Vt("rangeService")],Ri.prototype,"rangeService",2);z([Vt("advancedFilterService")],Ri.prototype,"advancedFilterService",2);z([de],Ri.prototype,"init",1);Ri=z([Me("focusService")],Ri);var V_=class extends ye{setMouseOver(t){this.selectedColumns=t;const e={type:K.EVENT_COLUMN_HOVER_CHANGED};this.eventService.dispatchEvent(e)}clearMouseOver(){this.selectedColumns=null;const t={type:K.EVENT_COLUMN_HOVER_CHANGED};this.eventService.dispatchEvent(t)}isHovered(t){return!!this.selectedColumns&&this.selectedColumns.indexOf(t)>=0}};V_=z([Me("columnHoverService")],V_);var vy=class extends ye{constructor(){super(...arguments),this.executeNextFuncs=[],this.executeLaterFuncs=[],this.active=!1,this.suppressAnimation=!1,this.animationThreadCount=0}postConstruct(){this.ctrlsService.whenReady(t=>this.gridBodyCtrl=t.gridBodyCtrl)}isActive(){return this.active&&!this.suppressAnimation}setSuppressAnimation(t){this.suppressAnimation=t}start(){this.active||this.gos.get("suppressColumnMoveAnimation")||this.gos.get("enableRtl")||(this.ensureAnimationCssClassPresent(),this.active=!0)}finish(){this.active&&this.flush(()=>{this.active=!1})}executeNextVMTurn(t){this.active?this.executeNextFuncs.push(t):t()}executeLaterVMTurn(t){this.active?this.executeLaterFuncs.push(t):t()}ensureAnimationCssClassPresent(){this.animationThreadCount++;const t=this.animationThreadCount;this.gridBodyCtrl.setColumnMovingCss(!0),this.executeLaterFuncs.push(()=>{this.animationThreadCount===t&&this.gridBodyCtrl.setColumnMovingCss(!1)})}flush(t){if(this.executeNextFuncs.length===0&&this.executeLaterFuncs.length===0){t();return}const e=i=>{for(;i.length;){const s=i.pop();s&&s()}};this.getFrameworkOverrides().wrapIncoming(()=>{window.setTimeout(()=>e(this.executeNextFuncs),0),window.setTimeout(()=>{t(),e(this.executeLaterFuncs)},200)})}};z([W("ctrlsService")],vy.prototype,"ctrlsService",2);z([de],vy.prototype,"postConstruct",1);vy=z([Me("columnAnimationService")],vy);var dg=class extends ye{postConstruct(){this.ctrlsService.whenReady(t=>{this.centerRowsCtrl=t.center,this.addManagedListener(this.eventService,K.EVENT_BODY_HEIGHT_CHANGED,this.checkPageSize.bind(this)),this.addManagedListener(this.eventService,K.EVENT_SCROLL_VISIBILITY_CHANGED,this.checkPageSize.bind(this)),this.addManagedPropertyListener("paginationAutoPageSize",this.onPaginationAutoSizeChanged.bind(this)),this.checkPageSize()})}notActive(){return!this.gos.get("paginationAutoPageSize")||this.centerRowsCtrl==null}onPaginationAutoSizeChanged(){this.notActive()?this.paginationProxy.unsetAutoCalculatedPageSize():this.checkPageSize()}checkPageSize(){if(this.notActive())return;const t=this.centerRowsCtrl.getViewportSizeFeature().getBodyHeight();if(t>0){const e=()=>{const i=this.gos.getRowHeightAsNumber(),s=Math.floor(t/i);this.paginationProxy.setPageSize(s,"autoCalculated")};this.isBodyRendered?qr(()=>e(),50)():(e(),this.isBodyRendered=!0)}else this.isBodyRendered=!1}};z([W("ctrlsService")],dg.prototype,"ctrlsService",2);z([W("paginationProxy")],dg.prototype,"paginationProxy",2);z([de],dg.prototype,"postConstruct",1);dg=z([Me("paginationAutoPageSizeService")],dg);var yy=class extends ye{constructor(){super(...arguments),this.cacheVersion=0}init(){this.active=this.gos.get("valueCache"),this.neverExpires=this.gos.get("valueCacheNeverExpires")}onDataChanged(){this.neverExpires||this.expire()}expire(){this.cacheVersion++}setValue(t,e,i){this.active&&(t.__cacheVersion!==this.cacheVersion&&(t.__cacheVersion=this.cacheVersion,t.__cacheData={}),t.__cacheData[e]=i)}getValue(t,e){if(!(!this.active||t.__cacheVersion!==this.cacheVersion))return t.__cacheData[e]}};z([de],yy.prototype,"init",1);yy=z([Me("valueCache")],yy);var GY="paste",hg=class extends ye{init(){this.rowModel.getType()==="clientSide"&&(this.clientSideRowModel=this.rowModel),this.addManagedListener(this.eventService,K.EVENT_CELL_VALUE_CHANGED,this.onCellValueChanged.bind(this))}onCellValueChanged(t){t.source!==GY&&this.doChangeDetection(t.node,t.column)}doChangeDetection(t,e){if(this.gos.get("suppressChangeDetection"))return;const i=[t];if(this.clientSideRowModel&&!t.isRowPinned()){const s=this.gos.get("aggregateOnlyChangedColumns"),r=new Ug(s,this.clientSideRowModel.getRootNode());r.addParentNode(t.parent,[e]),this.clientSideRowModel.doAggregate(r),r.forEachChangedNodeDepthFirst(n=>{i.push(n)})}this.rowRenderer.refreshCells({rowNodes:i})}};z([W("rowModel")],hg.prototype,"rowModel",2);z([W("rowRenderer")],hg.prototype,"rowRenderer",2);z([de],hg.prototype,"init",1);hg=z([Me("changeDetectionService")],hg);var Kw=class extends ye{adaptFunction(t,e){const i=this.componentMetadataProvider.retrieve(t);return i&&i.functionAdapter?i.functionAdapter(e):null}adaptCellRendererFunction(t){class e{refresh(s){return!1}getGui(){return this.eGui}init(s){const r=t(s),n=typeof r;if(n==="string"||n==="number"||n==="boolean"){this.eGui=xn("<span>"+r+"</span>");return}if(r==null){this.eGui=xn("<span></span>");return}this.eGui=r}}return e}doesImplementIComponent(t){return t?t.prototype&&"getGui"in t.prototype:!1}};z([W("componentMetadataProvider")],Kw.prototype,"componentMetadataProvider",2);Kw=z([Me("agComponentUtils")],Kw);var Cy=class extends ye{postConstruct(){this.componentMetaData={dateComponent:{mandatoryMethodList:["getDate","setDate"],optionalMethodList:["afterGuiAttached","setInputPlaceholder","setInputAriaLabel","setDisabled","onParamsUpdated","refresh"]},detailCellRenderer:{mandatoryMethodList:[],optionalMethodList:["refresh"],functionAdapter:this.agComponentUtils.adaptCellRendererFunction.bind(this.agComponentUtils)},headerComponent:{mandatoryMethodList:[],optionalMethodList:["refresh"]},headerGroupComponent:{mandatoryMethodList:[],optionalMethodList:[]},loadingCellRenderer:{mandatoryMethodList:[],optionalMethodList:[],functionAdapter:this.agComponentUtils.adaptCellRendererFunction.bind(this.agComponentUtils)},loadingOverlayComponent:{mandatoryMethodList:[],optionalMethodList:["refresh"]},noRowsOverlayComponent:{mandatoryMethodList:[],optionalMethodList:["refresh"]},floatingFilterComponent:{mandatoryMethodList:["onParentModelChanged"],optionalMethodList:["afterGuiAttached","onParamsUpdated","refresh"]},cellRenderer:{mandatoryMethodList:[],optionalMethodList:["refresh","afterGuiAttached"],functionAdapter:this.agComponentUtils.adaptCellRendererFunction.bind(this.agComponentUtils)},cellEditor:{mandatoryMethodList:["getValue"],optionalMethodList:["isPopup","isCancelBeforeStart","isCancelAfterEnd","getPopupPosition","focusIn","focusOut","afterGuiAttached","refresh"]},innerRenderer:{mandatoryMethodList:[],optionalMethodList:["afterGuiAttached"],functionAdapter:this.agComponentUtils.adaptCellRendererFunction.bind(this.agComponentUtils)},fullWidthCellRenderer:{mandatoryMethodList:[],optionalMethodList:["refresh","afterGuiAttached"],functionAdapter:this.agComponentUtils.adaptCellRendererFunction.bind(this.agComponentUtils)},groupRowRenderer:{mandatoryMethodList:[],optionalMethodList:["afterGuiAttached"],functionAdapter:this.agComponentUtils.adaptCellRendererFunction.bind(this.agComponentUtils)},filter:{mandatoryMethodList:["isFilterActive","doesFilterPass","getModel","setModel"],optionalMethodList:["afterGuiAttached","afterGuiDetached","onNewRowsLoaded","getModelAsString","onFloatingFilterChanged","onAnyFilterChanged","refresh"]},statusPanel:{mandatoryMethodList:[],optionalMethodList:["refresh"]},toolPanel:{mandatoryMethodList:[],optionalMethodList:["refresh","getState"]},tooltipComponent:{mandatoryMethodList:[],optionalMethodList:[]},menuItem:{mandatoryMethodList:[],optionalMethodList:["setActive","select","setExpanded","configureDefaults"]}}}retrieve(t){return this.componentMetaData[t]}};z([W("agComponentUtils")],Cy.prototype,"agComponentUtils",2);z([de],Cy.prototype,"postConstruct",1);Cy=z([Me("componentMetadataProvider")],Cy);var BY=25,mF=10,W1=8,VY=4,z1=4,$1=6,HY=16,vF=14,K1=8,jY={"ag-theme-custom":{headerHeight:25,headerCellMinWidth:24,listItemHeight:VY*5,rowHeight:25,chartMenuPanelWidth:220},"ag-theme-material":{headerHeight:W1*7,headerCellMinWidth:48,listItemHeight:W1*4,rowHeight:W1*6,chartMenuPanelWidth:240},"ag-theme-balham":{headerHeight:z1*8,headerCellMinWidth:24,listItemHeight:z1*6,rowHeight:z1*7,chartMenuPanelWidth:220},"ag-theme-alpine":{headerHeight:$1*8,headerCellMinWidth:36,listItemHeight:$1*4,rowHeight:$1*7,chartMenuPanelWidth:240},"ag-theme-quartz":{headerHeight:vF+K1*4.25,headerCellMinWidth:36,listItemHeight:HY+K1,rowHeight:vF+K1*3.5,chartMenuPanelWidth:260}},yF={headerHeight:["ag-header-row"],headerCellMinWidth:["ag-header-cell"],listItemHeight:["ag-virtual-list-item"],rowHeight:["ag-row"],chartMenuPanelWidth:["ag-chart-docked-container"]},pg=class extends ye{constructor(){super(...arguments),this.calculatedSizes={},this.calculatedTheme=null}postConstruct(){var t;const e=(t=this.getTheme().el)!=null?t:this.eGridDiv;this.addManagedPropertyListener("rowHeight",()=>this.refreshRowHeightVariable()),this.mutationObserver=new MutationObserver(()=>{this.calculatedSizes={},this.calculatedTheme=null,this.calculatedTheme=this.getTheme(),this.fireGridStylesChangedEvent()}),this.mutationObserver.observe(e||this.eGridDiv,{attributes:!0,attributeFilter:["class"]})}fireGridStylesChangedEvent(){const t={type:K.EVENT_GRID_STYLES_CHANGED};this.eventService.dispatchEvent(t)}getSassVariable(t){const{themeFamily:e,el:i}=this.getTheme();if(!e||e.indexOf("ag-theme")!==0)return;this.calculatedSizes||(this.calculatedSizes={}),this.calculatedSizes[e]||(this.calculatedSizes[e]={});const s=this.calculatedSizes[e][t];return s??(this.calculatedSizes[e][t]=this.calculateValueForSassProperty(t,e,i),this.calculatedSizes[e][t])}calculateValueForSassProperty(t,e,i){const s="ag-theme-"+(e.match("material")?"material":e.match("balham")?"balham":e.match("alpine")?"alpine":"custom"),r=jY[s][t],n=this.gos.getDocument();if(i||(i=this.eGridDiv),!yF[t])return r;const o=yF[t],a=n.createElement("div"),l=Array.from(i.classList);a.classList.add(e,...l),a.style.position="absolute";const c=o.reduce((d,h)=>{const p=n.createElement("div");return p.style.position="static",p.classList.add(h),d.appendChild(p),p},a);let u=0;if(n.body){n.body.appendChild(a);const d=t.toLowerCase().indexOf("height")!==-1?"height":"width";u=parseInt(window.getComputedStyle(c)[d],10),n.body.removeChild(a)}return u||r}isThemeDark(){const{theme:t}=this.getTheme();return!!t&&t.indexOf("dark")>=0}chartMenuPanelWidth(){return this.getSassVariable("chartMenuPanelWidth")}getTheme(){if(this.calculatedTheme)return this.calculatedTheme;const t=/\bag-(material|(?:theme-([\w\-]*)))\b/g;let e=this.eGridDiv,i=null,s=[];for(;e;)if(i=t.exec(e.className),!i)e=e.parentElement||void 0;else{const n=e.className.match(t);n&&(s=n);break}if(!i)return{allThemes:s};const r=i[0];return this.calculatedTheme={theme:r,el:e,themeFamily:r.replace(/-dark$/,""),allThemes:s},this.calculatedTheme}getFromTheme(t,e){var i;return(i=this.getSassVariable(e))!=null?i:t}getDefaultRowHeight(){return this.getFromTheme(BY,"rowHeight")}getListItemHeight(){return this.getFromTheme(20,"listItemHeight")}refreshRowHeightVariable(){const t=this.eGridDiv.style.getPropertyValue("--ag-line-height").trim(),e=this.gos.get("rowHeight");if(e==null||isNaN(e)||!isFinite(e))return t!==null&&this.eGridDiv.style.setProperty("--ag-line-height",null),-1;const i=`${e}px`;return t!=i?(this.eGridDiv.style.setProperty("--ag-line-height",i),e):t!=""?parseFloat(t):-1}getMinColWidth(){const t=this.getFromTheme(null,"headerCellMinWidth");return Pe(t)?Math.max(t,mF):mF}destroy(){this.calculatedSizes=null,this.mutationObserver&&this.mutationObserver.disconnect(),super.destroy()}};z([W("eGridDiv")],pg.prototype,"eGridDiv",2);z([de],pg.prototype,"postConstruct",1);pg=z([Me("environment")],pg);var fg=class extends ye{constructor(){super(...arguments),this.scrollY=0,this.uiBodyHeight=0}agWire(t){this.logger=t.create("RowContainerHeightService")}postConstruct(){this.addManagedListener(this.eventService,K.EVENT_BODY_HEIGHT_CHANGED,this.updateOffset.bind(this)),this.maxDivHeight=dG(),this.logger.log("maxDivHeight = "+this.maxDivHeight)}isStretching(){return this.stretching}getDivStretchOffset(){return this.divStretchOffset}updateOffset(){if(!this.stretching)return;const e=this.ctrlsService.getGridBodyCtrl().getScrollFeature().getVScrollPosition().top,i=this.getUiBodyHeight();(e!==this.scrollY||i!==this.uiBodyHeight)&&(this.scrollY=e,this.uiBodyHeight=i,this.calculateOffset())}calculateOffset(){this.setUiContainerHeight(this.maxDivHeight),this.pixelsToShave=this.modelHeight-this.uiContainerHeight,this.maxScrollY=this.uiContainerHeight-this.uiBodyHeight;const t=this.scrollY/this.maxScrollY,e=t*this.pixelsToShave;this.logger.log(`Div Stretch Offset = ${e} (${this.pixelsToShave} * ${t})`),this.setDivStretchOffset(e)}setUiContainerHeight(t){t!==this.uiContainerHeight&&(this.uiContainerHeight=t,this.eventService.dispatchEvent({type:K.EVENT_ROW_CONTAINER_HEIGHT_CHANGED}))}clearOffset(){this.setUiContainerHeight(this.modelHeight),this.pixelsToShave=0,this.setDivStretchOffset(0)}setDivStretchOffset(t){const e=typeof t=="number"?Math.floor(t):null;this.divStretchOffset!==e&&(this.divStretchOffset=e,this.eventService.dispatchEvent({type:K.EVENT_HEIGHT_SCALE_CHANGED}))}setModelHeight(t){this.modelHeight=t,this.stretching=t!=null&&this.maxDivHeight>0&&t>this.maxDivHeight,this.stretching?this.calculateOffset():this.clearOffset()}getUiContainerHeight(){return this.uiContainerHeight}getRealPixelPosition(t){return t-this.divStretchOffset}getUiBodyHeight(){const e=this.ctrlsService.getGridBodyCtrl().getScrollFeature().getVScrollPosition();return e.bottom-e.top}getScrollPositionForPixel(t){if(this.pixelsToShave<=0)return t;const e=this.modelHeight-this.getUiBodyHeight(),i=t/e;return this.maxScrollY*i}};z([W("ctrlsService")],fg.prototype,"ctrlsService",2);z([oa(0,Zn("loggerFactory"))],fg.prototype,"agWire",1);z([de],fg.prototype,"postConstruct",1);fg=z([Me("rowContainerHeightService")],fg);var Rh=class extends ye{init(){this.addManagedPropertyListener("isRowSelectable",()=>this.updateSelectable())}updateSelectableAfterGrouping(){this.updateSelectable(!0)}updateSelectable(t=!1){const e=!!this.gos.get("rowSelection"),i=this.gos.get("isRowSelectable");if(!e||!i)return;const s=this.gos.get("groupSelectsChildren"),r=this.rowModel.getType()==="clientSide"&&s,n=[],o=a=>{if(t&&!a.group)return;if(r&&a.group){const c=a.childrenAfterGroup.some(u=>u.selectable===!0);a.setRowSelectable(c,!0);return}const l=i?i(a):!0;a.setRowSelectable(l,!0),!l&&a.isSelected()&&n.push(a)};if(r){const a=this.rowModel;new Ug(!1,a.getRootNode()).forEachChangedNodeDepthFirst(o,!0,!0)}else this.rowModel.forEachNode(o);n.length&&this.selectionService.setNodesSelected({nodes:n,newValue:!1,source:"selectableChanged"}),r&&this.selectionService instanceof Ah&&this.selectionService.updateGroupsFromChildrenSelections("selectableChanged")}};z([W("rowModel")],Rh.prototype,"rowModel",2);z([W("selectionService")],Rh.prototype,"selectionService",2);z([de],Rh.prototype,"init",1);Rh=z([Me("selectableService")],Rh);var Gn=class extends Te{constructor(){super(),this.previousAndFirstButtonsDisabled=!1,this.nextButtonDisabled=!1,this.lastButtonDisabled=!1,this.areListenersSetup=!1}postConstruct(){const t=this.gos.get("enableRtl");this.setTemplate(this.getTemplate());const{btFirst:e,btPrevious:i,btNext:s,btLast:r,pageSizeComp:n}=this;this.activateTabIndex([e,i,s,r]),e.insertAdjacentElement("afterbegin",ts(t?"last":"first",this.gos)),i.insertAdjacentElement("afterbegin",ts(t?"next":"previous",this.gos)),s.insertAdjacentElement("afterbegin",ts(t?"previous":"next",this.gos)),r.insertAdjacentElement("afterbegin",ts(t?"first":"last",this.gos)),this.addManagedPropertyListener("pagination",this.onPaginationChanged.bind(this)),this.addManagedPropertyListener("suppressPaginationPanel",this.onPaginationChanged.bind(this)),this.addManagedPropertyListeners(["paginationPageSizeSelector","paginationAutoPageSize","suppressPaginationPanel"],()=>this.onPageSizeRelatedOptionsChange()),this.pageSizeComp.toggleSelectDisplay(this.pageSizeComp.shouldShowPageSizeSelector()),this.onPaginationChanged()}onPaginationChanged(){const e=this.gos.get("pagination")&&!this.gos.get("suppressPaginationPanel");this.setDisplayed(e),e&&(this.setupListeners(),this.enableOrDisableButtons(),this.updateRowLabels(),this.setCurrentPageLabel(),this.setTotalLabels(),this.onPageSizeRelatedOptionsChange())}onPageSizeRelatedOptionsChange(){this.pageSizeComp.toggleSelectDisplay(this.pageSizeComp.shouldShowPageSizeSelector())}setupListeners(){this.areListenersSetup||(this.addManagedListener(this.eventService,K.EVENT_PAGINATION_CHANGED,this.onPaginationChanged.bind(this)),[{el:this.btFirst,fn:this.onBtFirst.bind(this)},{el:this.btPrevious,fn:this.onBtPrevious.bind(this)},{el:this.btNext,fn:this.onBtNext.bind(this)},{el:this.btLast,fn:this.onBtLast.bind(this)}].forEach(t=>{const{el:e,fn:i}=t;this.addManagedListener(e,"click",i),this.addManagedListener(e,"keydown",s=>{(s.key===ce.ENTER||s.key===ce.SPACE)&&(s.preventDefault(),i())})}),this.areListenersSetup=!0)}onBtFirst(){this.previousAndFirstButtonsDisabled||this.paginationProxy.goToFirstPage()}setCurrentPageLabel(){const t=this.paginationProxy.getTotalPages()>0,e=this.paginationProxy.getCurrentPage(),i=t?e+1:0;this.lbCurrent.textContent=this.formatNumber(i)}formatNumber(t){const e=this.gos.getCallback("paginationNumberFormatter");if(e)return e({value:t});const i=this.localeService.getLocaleTextFunc(),s=i("thousandSeparator",","),r=i("decimalSeparator",".");return dM(t,s,r)}getTemplate(){const t=this.localeService.getLocaleTextFunc(),e=t("page","Page"),i=t("to","to"),s=t("of","of"),r=t("firstPage","First Page"),n=t("previousPage","Previous Page"),o=t("nextPage","Next Page"),a=t("lastPage","Last Page"),l=this.getCompId();return`<div class="ag-paging-panel ag-unselectable" id="ag-${l}">
                <ag-page-size-selector ref="pageSizeComp"></ag-page-size-selector>
                <span class="ag-paging-row-summary-panel" role="status">
                    <span id="ag-${l}-first-row" ref="lbFirstRowOnPage" class="ag-paging-row-summary-panel-number"></span>
                    <span id="ag-${l}-to">${i}</span>
                    <span id="ag-${l}-last-row" ref="lbLastRowOnPage" class="ag-paging-row-summary-panel-number"></span>
                    <span id="ag-${l}-of">${s}</span>
                    <span id="ag-${l}-row-count" ref="lbRecordCount" class="ag-paging-row-summary-panel-number"></span>
                </span>
                <span class="ag-paging-page-summary-panel" role="presentation">
                    <div ref="btFirst" class="ag-button ag-paging-button" role="button" aria-label="${r}"></div>
                    <div ref="btPrevious" class="ag-button ag-paging-button" role="button" aria-label="${n}"></div>
                    <span class="ag-paging-description" role="status">
                        <span id="ag-${l}-start-page">${e}</span>
                        <span id="ag-${l}-start-page-number" ref="lbCurrent" class="ag-paging-number"></span>
                        <span id="ag-${l}-of-page">${s}</span>
                        <span id="ag-${l}-of-page-number" ref="lbTotal" class="ag-paging-number"></span>
                    </span>
                    <div ref="btNext" class="ag-button ag-paging-button" role="button" aria-label="${o}"></div>
                    <div ref="btLast" class="ag-button ag-paging-button" role="button" aria-label="${a}"></div>
                </span>
            </div>`}onBtNext(){this.nextButtonDisabled||this.paginationProxy.goToNextPage()}onBtPrevious(){this.previousAndFirstButtonsDisabled||this.paginationProxy.goToPreviousPage()}onBtLast(){this.lastButtonDisabled||this.paginationProxy.goToLastPage()}enableOrDisableButtons(){const t=this.paginationProxy.getCurrentPage(),e=this.paginationProxy.isLastPageFound(),i=this.paginationProxy.getTotalPages();this.previousAndFirstButtonsDisabled=t===0,this.toggleButtonDisabled(this.btFirst,this.previousAndFirstButtonsDisabled),this.toggleButtonDisabled(this.btPrevious,this.previousAndFirstButtonsDisabled);const s=this.isZeroPagesToDisplay(),r=t===i-1;this.nextButtonDisabled=r||s,this.lastButtonDisabled=!e||s||t===i-1,this.toggleButtonDisabled(this.btNext,this.nextButtonDisabled),this.toggleButtonDisabled(this.btLast,this.lastButtonDisabled)}toggleButtonDisabled(t,e){tM(t,e),t.classList.toggle("ag-disabled",e)}updateRowLabels(){const t=this.paginationProxy.getCurrentPage(),e=this.paginationProxy.getPageSize(),i=this.paginationProxy.isLastPageFound(),s=this.paginationProxy.isLastPageFound()?this.paginationProxy.getMasterRowCount():null;let r,n;if(this.isZeroPagesToDisplay()?r=n=0:(r=e*t+1,n=r+e-1,i&&n>s&&(n=s)),this.lbFirstRowOnPage.textContent=this.formatNumber(r),this.rowNodeBlockLoader.isLoading()){const o=this.localeService.getLocaleTextFunc();this.lbLastRowOnPage.innerHTML=o("pageLastRowUnknown","?")}else this.lbLastRowOnPage.textContent=this.formatNumber(n)}isZeroPagesToDisplay(){const t=this.paginationProxy.isLastPageFound(),e=this.paginationProxy.getTotalPages();return t&&e===0}setTotalLabels(){const t=this.paginationProxy.isLastPageFound(),e=this.paginationProxy.getTotalPages(),i=t?this.paginationProxy.getMasterRowCount():null;if(i===1){const s=this.paginationProxy.getRow(0);if(s&&s.group&&!(s.groupData||s.aggData)){this.setTotalLabelsToZero();return}}if(t)this.lbTotal.textContent=this.formatNumber(e),this.lbRecordCount.textContent=this.formatNumber(i);else{const s=this.localeService.getLocaleTextFunc()("more","more");this.lbTotal.innerHTML=s,this.lbRecordCount.innerHTML=s}}setTotalLabelsToZero(){this.lbFirstRowOnPage.textContent=this.formatNumber(0),this.lbCurrent.textContent=this.formatNumber(0),this.lbLastRowOnPage.textContent=this.formatNumber(0),this.lbTotal.textContent=this.formatNumber(0),this.lbRecordCount.textContent=this.formatNumber(0)}};z([W("paginationProxy")],Gn.prototype,"paginationProxy",2);z([W("rowNodeBlockLoader")],Gn.prototype,"rowNodeBlockLoader",2);z([pe("btFirst")],Gn.prototype,"btFirst",2);z([pe("btPrevious")],Gn.prototype,"btPrevious",2);z([pe("btNext")],Gn.prototype,"btNext",2);z([pe("btLast")],Gn.prototype,"btLast",2);z([pe("lbRecordCount")],Gn.prototype,"lbRecordCount",2);z([pe("lbFirstRowOnPage")],Gn.prototype,"lbFirstRowOnPage",2);z([pe("lbLastRowOnPage")],Gn.prototype,"lbLastRowOnPage",2);z([pe("lbCurrent")],Gn.prototype,"lbCurrent",2);z([pe("lbTotal")],Gn.prototype,"lbTotal",2);z([pe("pageSizeComp")],Gn.prototype,"pageSizeComp",2);z([de],Gn.prototype,"postConstruct",1);var VC=class a5 extends Te{constructor(){super(a5.TEMPLATE),this.inProgress=!1,this.destroyRequested=!1}updateLayoutClasses(e,i){const s=this.eOverlayWrapper.classList;s.toggle("ag-layout-auto-height",i.autoHeight),s.toggle("ag-layout-normal",i.normal),s.toggle("ag-layout-print",i.print)}postConstruct(){this.createManagedBean(new xx(this)),this.setDisplayed(!1,{skipAriaHidden:!0}),this.overlayService.registerOverlayWrapperComp(this)}setWrapperTypeClass(e){const i=this.eOverlayWrapper.classList;this.activeOverlayWrapperCssClass&&i.toggle(this.activeOverlayWrapperCssClass,!1),this.activeOverlayWrapperCssClass=e,i.toggle(e,!0)}showOverlay(e,i,s){this.inProgress||(this.setWrapperTypeClass(i),this.destroyActiveOverlay(),this.inProgress=!0,e&&e.then(r=>{this.inProgress=!1,this.eOverlayWrapper.appendChild(r.getGui()),this.activeOverlay=r,this.updateListenerDestroyFunc=s,this.destroyRequested&&(this.destroyRequested=!1,this.destroyActiveOverlay())}),this.setDisplayed(!0,{skipAriaHidden:!0}))}destroyActiveOverlay(){var e;if(this.inProgress){this.destroyRequested=!0;return}this.activeOverlay&&(this.activeOverlay=this.getContext().destroyBean(this.activeOverlay),(e=this.updateListenerDestroyFunc)==null||e.call(this),Cs(this.eOverlayWrapper))}hideOverlay(){this.destroyActiveOverlay(),this.setDisplayed(!1,{skipAriaHidden:!0})}destroy(){this.destroyActiveOverlay(),super.destroy()}};VC.TEMPLATE=`
        <div class="ag-overlay" role="presentation">
            <div class="ag-overlay-panel" role="presentation">
                <div class="ag-overlay-wrapper" ref="eOverlayWrapper" role="presentation"></div>
            </div>
        </div>`;z([W("overlayService")],VC.prototype,"overlayService",2);z([pe("eOverlayWrapper")],VC.prototype,"eOverlayWrapper",2);z([de],VC.prototype,"postConstruct",1);var UY=VC,Mh=class extends ye{getFirstRow(){let t=0,e;return this.pinnedRowModel.getPinnedTopRowCount()?e="top":this.rowModel.getRowCount()?(e=null,t=this.paginationProxy.getPageFirstRow()):this.pinnedRowModel.getPinnedBottomRowCount()&&(e="bottom"),e===void 0?null:{rowIndex:t,rowPinned:e}}getLastRow(){let t,e=null;const i=this.pinnedRowModel.getPinnedBottomRowCount(),s=this.pinnedRowModel.getPinnedTopRowCount();return i?(e="bottom",t=i-1):this.rowModel.getRowCount()?(e=null,t=this.paginationProxy.getPageLastRow()):s&&(e="top",t=s-1),t===void 0?null:{rowIndex:t,rowPinned:e}}getRowNode(t){switch(t.rowPinned){case"top":return this.pinnedRowModel.getPinnedTopRowData()[t.rowIndex];case"bottom":return this.pinnedRowModel.getPinnedBottomRowData()[t.rowIndex];default:return this.rowModel.getRow(t.rowIndex)}}sameRow(t,e){return!t&&!e?!0:t&&!e||!t&&e?!1:t.rowIndex===e.rowIndex&&t.rowPinned==e.rowPinned}before(t,e){switch(t.rowPinned){case"top":if(e.rowPinned!=="top")return!0;break;case"bottom":if(e.rowPinned!=="bottom")return!1;break;default:if(Pe(e.rowPinned))return e.rowPinned!=="top";break}return t.rowIndex<e.rowIndex}};z([W("rowModel")],Mh.prototype,"rowModel",2);z([W("pinnedRowModel")],Mh.prototype,"pinnedRowModel",2);z([W("paginationProxy")],Mh.prototype,"paginationProxy",2);Mh=z([Me("rowPositionUtils")],Mh);var Yw=class extends ye{createId(t){const{rowIndex:e,rowPinned:i,column:s}=t;return this.createIdFromValues({rowIndex:e,column:s,rowPinned:i})}createIdFromValues(t){const{rowIndex:e,rowPinned:i,column:s}=t;return`${e}.${i??"null"}.${s.getId()}`}equals(t,e){const i=t.column===e.column,s=t.rowPinned===e.rowPinned,r=t.rowIndex===e.rowIndex;return i&&s&&r}};Yw=z([Me("cellPositionUtils")],Yw);var rv=class{constructor(t){this.cellValueChanges=t}},Y1=class extends rv{constructor(t,e,i,s){super(t),this.initialRange=e,this.finalRange=i,this.ranges=s}},l5=class c5{constructor(e){this.actionStack=[],this.maxStackSize=e||c5.DEFAULT_STACK_SIZE,this.actionStack=new Array(this.maxStackSize)}pop(){return this.actionStack.pop()}push(e){e.cellValueChanges&&e.cellValueChanges.length>0&&(this.actionStack.length===this.maxStackSize&&this.actionStack.shift(),this.actionStack.push(e))}clear(){this.actionStack=[]}getCurrentStackSize(){return this.actionStack.length}};l5.DEFAULT_STACK_SIZE=10;var CF=l5,ll=class extends ye{constructor(){super(...arguments),this.cellValueChanges=[],this.activeCellEdit=null,this.activeRowEdit=null,this.isPasting=!1,this.isRangeInAction=!1,this.onCellValueChanged=t=>{const e={column:t.column,rowIndex:t.rowIndex,rowPinned:t.rowPinned},i=this.activeCellEdit!==null&&this.cellPositionUtils.equals(this.activeCellEdit,e),s=this.activeRowEdit!==null&&this.rowPositionUtils.sameRow(this.activeRowEdit,e);if(!(i||s||this.isPasting||this.isRangeInAction))return;const{rowPinned:n,rowIndex:o,column:a,oldValue:l,value:c}=t,u={rowPinned:n,rowIndex:o,columnId:a.getColId(),newValue:c,oldValue:l};this.cellValueChanges.push(u)},this.clearStacks=()=>{this.undoStack.clear(),this.redoStack.clear()}}init(){if(!this.gos.get("undoRedoCellEditing"))return;const t=this.gos.get("undoRedoCellEditingLimit");t<=0||(this.undoStack=new CF(t),this.redoStack=new CF(t),this.addRowEditingListeners(),this.addCellEditingListeners(),this.addPasteListeners(),this.addFillListeners(),this.addCellKeyListeners(),this.addManagedListener(this.eventService,K.EVENT_CELL_VALUE_CHANGED,this.onCellValueChanged),this.addManagedListener(this.eventService,K.EVENT_MODEL_UPDATED,e=>{e.keepUndoRedoStack||this.clearStacks()}),this.addManagedListener(this.eventService,K.EVENT_COLUMN_PIVOT_MODE_CHANGED,this.clearStacks),this.addManagedListener(this.eventService,K.EVENT_NEW_COLUMNS_LOADED,this.clearStacks),this.addManagedListener(this.eventService,K.EVENT_COLUMN_GROUP_OPENED,this.clearStacks),this.addManagedListener(this.eventService,K.EVENT_COLUMN_ROW_GROUP_CHANGED,this.clearStacks),this.addManagedListener(this.eventService,K.EVENT_COLUMN_MOVED,this.clearStacks),this.addManagedListener(this.eventService,K.EVENT_COLUMN_PINNED,this.clearStacks),this.addManagedListener(this.eventService,K.EVENT_COLUMN_VISIBLE,this.clearStacks),this.addManagedListener(this.eventService,K.EVENT_ROW_DRAG_END,this.clearStacks),this.ctrlsService.whenReady(e=>{this.gridBodyCtrl=e.gridBodyCtrl}))}getCurrentUndoStackSize(){return this.undoStack?this.undoStack.getCurrentStackSize():0}getCurrentRedoStackSize(){return this.redoStack?this.redoStack.getCurrentStackSize():0}undo(t){const e={type:K.EVENT_UNDO_STARTED,source:t};this.eventService.dispatchEvent(e);const i=this.undoRedo(this.undoStack,this.redoStack,"initialRange","oldValue","undo"),s={type:K.EVENT_UNDO_ENDED,source:t,operationPerformed:i};this.eventService.dispatchEvent(s)}redo(t){const e={type:K.EVENT_REDO_STARTED,source:t};this.eventService.dispatchEvent(e);const i=this.undoRedo(this.redoStack,this.undoStack,"finalRange","newValue","redo"),s={type:K.EVENT_REDO_ENDED,source:t,operationPerformed:i};this.eventService.dispatchEvent(s)}undoRedo(t,e,i,s,r){if(!t)return!1;const n=t.pop();return!n||!n.cellValueChanges?!1:(this.processAction(n,o=>o[s],r),n instanceof Y1?this.processRange(this.rangeService,n.ranges||[n[i]]):this.processCell(n.cellValueChanges),e.push(n),!0)}processAction(t,e,i){t.cellValueChanges.forEach(s=>{const{rowIndex:r,rowPinned:n,columnId:o}=s,a={rowIndex:r,rowPinned:n},l=this.rowPositionUtils.getRowNode(a);l.displayed&&l.setDataValue(o,e(s),i)})}processRange(t,e){let i;t.removeAllCellRanges(!0),e.forEach((s,r)=>{if(!s)return;const n=s.startRow,o=s.endRow;r===e.length-1&&(i={rowPinned:n.rowPinned,rowIndex:n.rowIndex,columnId:s.startColumn.getColId()},this.setLastFocusedCell(i));const a={rowStartIndex:n.rowIndex,rowStartPinned:n.rowPinned,rowEndIndex:o.rowIndex,rowEndPinned:o.rowPinned,columnStart:s.startColumn,columns:s.columns};t.addCellRange(a)})}processCell(t){const e=t[0],{rowIndex:i,rowPinned:s}=e,r={rowIndex:i,rowPinned:s},n=this.rowPositionUtils.getRowNode(r),o={rowPinned:e.rowPinned,rowIndex:n.rowIndex,columnId:e.columnId};this.setLastFocusedCell(o,this.rangeService)}setLastFocusedCell(t,e){const{rowIndex:i,columnId:s,rowPinned:r}=t,n=this.gridBodyCtrl.getScrollFeature(),o=this.columnModel.getGridColumn(s);if(!o)return;n.ensureIndexVisible(i),n.ensureColumnVisible(o);const a={rowIndex:i,column:o,rowPinned:r};this.focusService.setFocusedCell($i(it({},a),{forceBrowserFocus:!0})),e==null||e.setRangeToCell(a)}addRowEditingListeners(){this.addManagedListener(this.eventService,K.EVENT_ROW_EDITING_STARTED,t=>{this.activeRowEdit={rowIndex:t.rowIndex,rowPinned:t.rowPinned}}),this.addManagedListener(this.eventService,K.EVENT_ROW_EDITING_STOPPED,()=>{const t=new rv(this.cellValueChanges);this.pushActionsToUndoStack(t),this.activeRowEdit=null})}addCellEditingListeners(){this.addManagedListener(this.eventService,K.EVENT_CELL_EDITING_STARTED,t=>{this.activeCellEdit={column:t.column,rowIndex:t.rowIndex,rowPinned:t.rowPinned}}),this.addManagedListener(this.eventService,K.EVENT_CELL_EDITING_STOPPED,t=>{if(this.activeCellEdit=null,t.valueChanged&&!this.activeRowEdit&&!this.isPasting&&!this.isRangeInAction){const i=new rv(this.cellValueChanges);this.pushActionsToUndoStack(i)}})}addPasteListeners(){this.addManagedListener(this.eventService,K.EVENT_PASTE_START,()=>{this.isPasting=!0}),this.addManagedListener(this.eventService,K.EVENT_PASTE_END,()=>{const t=new rv(this.cellValueChanges);this.pushActionsToUndoStack(t),this.isPasting=!1})}addFillListeners(){this.addManagedListener(this.eventService,K.EVENT_FILL_START,()=>{this.isRangeInAction=!0}),this.addManagedListener(this.eventService,K.EVENT_FILL_END,t=>{const e=new Y1(this.cellValueChanges,t.initialRange,t.finalRange);this.pushActionsToUndoStack(e),this.isRangeInAction=!1})}addCellKeyListeners(){this.addManagedListener(this.eventService,K.EVENT_KEY_SHORTCUT_CHANGED_CELL_START,()=>{this.isRangeInAction=!0}),this.addManagedListener(this.eventService,K.EVENT_KEY_SHORTCUT_CHANGED_CELL_END,()=>{let t;this.rangeService&&this.gos.get("enableRangeSelection")?t=new Y1(this.cellValueChanges,void 0,void 0,[...this.rangeService.getCellRanges()]):t=new rv(this.cellValueChanges),this.pushActionsToUndoStack(t),this.isRangeInAction=!1})}pushActionsToUndoStack(t){this.undoStack.push(t),this.cellValueChanges=[],this.redoStack.clear()}};z([W("focusService")],ll.prototype,"focusService",2);z([W("ctrlsService")],ll.prototype,"ctrlsService",2);z([W("cellPositionUtils")],ll.prototype,"cellPositionUtils",2);z([W("rowPositionUtils")],ll.prototype,"rowPositionUtils",2);z([W("columnModel")],ll.prototype,"columnModel",2);z([Vt("rangeService")],ll.prototype,"rangeService",2);z([de],ll.prototype,"init",1);ll=z([Me("undoRedoService")],ll);var gg=class extends ye{findHeader(t,e){let i,s;if(t.column instanceof Fs?i=this.columnModel.getDisplayedGroupAtDirection(t.column,e):(s=`getDisplayedCol${e}`,i=this.columnModel[s](t.column)),!i)return;let{headerRowIndex:r}=t;if(this.getHeaderRowType(r)!=="filter"){const a=[i];for(;i.getParent();)i=i.getParent(),a.push(i);i=a[a.length-1-r]}const{column:n,headerRowIndex:o}=this.getHeaderIndexToFocus(i,r);return{column:n,headerRowIndex:o}}getHeaderIndexToFocus(t,e){let i;if(t instanceof Fs&&this.isAnyChildSpanningHeaderHeight(t)&&t.isPadding()){const s=t;i=s.getLeafColumns()[0];let r=i;for(;r!==s;)e++,r=r.getParent()}return{column:i||t,headerRowIndex:e}}isAnyChildSpanningHeaderHeight(t){return t?t.getLeafColumns().some(e=>e.isSpanHeaderHeight()):!1}getColumnVisibleParent(t,e){const i=this.getHeaderRowType(e),s=i==="filter",r=i==="column";let n=s?t:t.getParent(),o=e-1,a=o;if(r&&this.isAnyChildSpanningHeaderHeight(t.getParent())){for(;n&&n.isPadding();)n=n.getParent(),o--;a=o,o<0&&(n=t,o=e,a=void 0)}return{column:n,headerRowIndex:o,headerRowIndexWithoutSpan:a}}getColumnVisibleChild(t,e,i="After"){const s=this.getHeaderRowType(e);let r=t,n=e+1,o=n;if(s==="group"){const a=t.getDisplayedLeafColumns(),l=i==="After"?a[0]:di(a),c=[];let u=l;for(;u.getParent()!==t;)u=u.getParent(),c.push(u);if(r=l,l.isSpanHeaderHeight())for(let d=c.length-1;d>=0;d--){const h=c[d];if(!h.isPadding()){r=h;break}n++}else r=di(c),r||(r=l)}return{column:r,headerRowIndex:n,headerRowIndexWithoutSpan:o}}getHeaderRowType(t){const e=this.ctrlsService.getHeaderRowContainerCtrl();if(e)return e.getRowType(t)}findColAtEdgeForHeaderRow(t,e){const i=this.columnModel.getAllDisplayedColumns(),s=i[e==="start"?0:i.length-1];if(!s)return;const n=this.ctrlsService.getHeaderRowContainerCtrl(s.getPinned()).getRowType(t);if(n=="group"){const o=this.columnModel.getColumnGroupAtLevel(s,t);return{headerRowIndex:t,column:o}}return{headerRowIndex:n==null?-1:t,column:s}}};z([W("columnModel")],gg.prototype,"columnModel",2);z([W("ctrlsService")],gg.prototype,"ctrlsService",2);gg=z([Me("headerPositionUtils")],gg);var H_=class{buildColumnDefs(t,e,i){const s=[],r={};return t.forEach(n=>{const o=this.createDefFromColumn(n,e,i);let a=!0,l=o,c=n.getOriginalParent(),u=null;for(;c;){let d=null;if(c.isPadding()){c=c.getOriginalParent();continue}const h=r[c.getGroupId()];if(h){h.children.push(l),a=!1;break}if(d=this.createDefFromGroup(c),d&&(d.children=[l],r[d.groupId]=d,l=d,c=c.getOriginalParent()),c!=null&&u===c){a=!1;break}u=c}a&&s.push(l)}),s}createDefFromGroup(t){const e=Gw(t.getColGroupDef(),["children"]);return e&&(e.groupId=t.getGroupId()),e}createDefFromColumn(t,e,i){const s=Gw(t.getColDef());return s.colId=t.getColId(),s.width=t.getActualWidth(),s.rowGroup=t.isRowGroupActive(),s.rowGroupIndex=t.isRowGroupActive()?e.indexOf(t):null,s.pivot=t.isPivotActive(),s.pivotIndex=t.isPivotActive()?i.indexOf(t):null,s.aggFunc=t.isValueActive()?t.getAggFunc():null,s.hide=t.isVisible()?void 0:!0,s.pinned=t.isPinned()?t.getPinned():null,s.sort=t.getSort()?t.getSort():null,s.sortIndex=t.getSortIndex()!=null?t.getSortIndex():null,s}};H_=z([Me("columnDefFactory")],H_);var by=class{getInitialRowClasses(t){const e=[];return Pe(t.extraCssClass)&&e.push(t.extraCssClass),e.push("ag-row"),e.push(t.rowFocused?"ag-row-focus":"ag-row-no-focus"),t.fadeRowIn&&e.push("ag-opacity-zero"),e.push(t.rowIsEven?"ag-row-even":"ag-row-odd"),t.rowNode.isRowPinned()&&e.push("ag-row-pinned"),t.rowNode.isSelected()&&e.push("ag-row-selected"),t.rowNode.footer&&e.push("ag-row-footer"),e.push("ag-row-level-"+t.rowLevel),t.rowNode.stub&&e.push("ag-row-loading"),t.fullWidthRow&&e.push("ag-full-width-row"),t.expandable&&(e.push("ag-row-group"),e.push(t.rowNode.expanded?"ag-row-group-expanded":"ag-row-group-contracted")),t.rowNode.dragging&&e.push("ag-row-dragging"),__(e,this.processClassesFromGridOptions(t.rowNode)),__(e,this.preProcessRowClassRules(t.rowNode)),e.push(t.printLayout?"ag-row-position-relative":"ag-row-position-absolute"),t.firstRowOnPage&&e.push("ag-row-first"),t.lastRowOnPage&&e.push("ag-row-last"),t.fullWidthRow&&(t.pinned==="left"&&e.push("ag-cell-last-left-pinned"),t.pinned==="right"&&e.push("ag-cell-first-right-pinned")),e}processClassesFromGridOptions(t){const e=[],i=n=>{typeof n=="string"?e.push(n):Array.isArray(n)&&n.forEach(o=>e.push(o))},s=this.gos.get("rowClass");if(s){if(typeof s=="function")return console.warn("AG Grid: rowClass should not be a function, please use getRowClass instead"),[];i(s)}const r=this.gos.getCallback("getRowClass");if(r){const n={data:t.data,node:t,rowIndex:t.rowIndex},o=r(n);i(o)}return e}preProcessRowClassRules(t){const e=[];return this.processRowClassRules(t,i=>{e.push(i)},i=>{}),e}processRowClassRules(t,e,i){const s=this.gos.addGridCommonParams({data:t.data,node:t,rowIndex:t.rowIndex});this.stylingService.processClassRules(void 0,this.gos.get("rowClassRules"),s,e,i)}calculateRowLevel(t){return t.group?t.level:t.parent?t.parent.level+1:0}};z([W("stylingService")],by.prototype,"stylingService",2);z([W("gridOptionsService")],by.prototype,"gos",2);by=z([Me("rowCssClassCalculator")],by);var Dh=class extends ye{init(){this.isAccentedSort=this.gos.get("accentedSort"),this.primaryColumnsSortGroups=this.gos.isColumnsSortingCoupledToGroup(),this.addManagedPropertyListener("accentedSort",t=>this.isAccentedSort=t.currentValue),this.addManagedPropertyListener("autoGroupColumnDef",()=>this.primaryColumnsSortGroups=this.gos.isColumnsSortingCoupledToGroup())}doFullSort(t,e){const i=(r,n)=>({currentPos:n,rowNode:r}),s=t.map(i);return s.sort(this.compareRowNodes.bind(this,e)),s.map(r=>r.rowNode)}compareRowNodes(t,e,i){const s=e.rowNode,r=i.rowNode;for(let n=0,o=t.length;n<o;n++){const a=t[n],l=a.sort==="desc",c=this.getValue(s,a.column),u=this.getValue(r,a.column);let d;const h=this.getComparator(a,s);if(h?d=h(c,u,s,r,l):d=Q.defaultComparator(c,u,this.isAccentedSort),!isNaN(d)&&d!==0)return a.sort==="asc"?d:d*-1}return e.currentPos-i.currentPos}getComparator(t,e){const i=t.column,s=i.getColDef().comparator;if(s!=null)return s;if(!i.getColDef().showRowGroup)return;const r=!e.group&&i.getColDef().field;if(!r)return;const n=this.columnModel.getPrimaryColumn(r);if(n)return n.getColDef().comparator}getValue(t,e){var i,s;if(!this.primaryColumnsSortGroups)return this.valueService.getValue(e,t,!1,!1);if(t.rowGroupColumn===e){if(this.gos.isGroupUseEntireRow(this.columnModel.isPivotActive())){const a=(i=t.allLeafChildren)==null?void 0:i[0];return a?this.valueService.getValue(e,a,!1,!1):void 0}const o=this.columnModel.getGroupDisplayColumnForGroup(e.getId());return o?(s=t.groupData)==null?void 0:s[o.getId()]:void 0}if(!(t.group&&e.getColDef().showRowGroup))return this.valueService.getValue(e,t,!1,!1)}};z([W("valueService")],Dh.prototype,"valueService",2);z([W("columnModel")],Dh.prototype,"columnModel",2);z([de],Dh.prototype,"init",1);Dh=z([Me("rowNodeSorter")],Dh);var Lf=class extends ye{constructor(){super(...arguments),this.params={},this.ready=!1,this.readyCallbacks=[]}checkReady(){const t=this.params;this.ready=t.gridCtrl!=null&&t.gridBodyCtrl!=null&&t.center!=null&&t.left!=null&&t.right!=null&&t.bottomCenter!=null&&t.bottomLeft!=null&&t.bottomRight!=null&&t.topCenter!=null&&t.topLeft!=null&&t.topRight!=null&&t.stickyTopCenter!=null&&t.stickyTopLeft!=null&&t.stickyTopRight!=null&&t.stickyBottomCenter!=null&&t.stickyBottomLeft!=null&&t.stickyBottomRight!=null&&t.centerHeader!=null&&t.leftHeader!=null&&t.rightHeader!=null&&t.fakeHScrollComp!=null&&t.fakeVScrollComp!=null&&t.gridHeaderCtrl!=null,this.ready&&(this.readyCallbacks.forEach(e=>e(t)),this.readyCallbacks.length=0)}whenReady(t){this.ready?t(this.params):this.readyCallbacks.push(t)}register(t,e){this.params[t]=e,this.checkReady()}registerHeaderContainer(t,e){switch(e){case"left":this.params.leftHeader=t;break;case"right":this.params.rightHeader=t;break;default:this.params.centerHeader=t;break}this.checkReady()}get(t){return this.params[t]}getParams(){return this.params}getGridBodyCtrl(){return this.params.gridBodyCtrl}getHeaderRowContainerCtrls(){return[this.params.leftHeader,this.params.rightHeader,this.params.centerHeader]}getHeaderRowContainerCtrl(t){switch(t){case"left":return this.params.leftHeader;case"right":return this.params.rightHeader;default:return this.params.centerHeader}}};Lf.NAME="ctrlsService";Lf=z([Me(Lf.NAME)],Lf);var j_=class extends ye{constructor(){super(...arguments),this.registry={}}register(t){this.registry[t.controllerName]=t.controllerClass}getInstance(t){const e=this.registry[t];if(e!=null)return new e}};j_=z([Me("ctrlsFactory")],j_);var sp=class extends Te{constructor(t,e){super(t),this.direction=e,this.hideTimeout=null}postConstruct(){this.addManagedListener(this.eventService,K.EVENT_SCROLL_VISIBILITY_CHANGED,this.onScrollVisibilityChanged.bind(this)),this.onScrollVisibilityChanged(),this.addOrRemoveCssClass("ag-apple-scrollbar",lM()||xc())}initialiseInvisibleScrollbar(){this.invisibleScrollbar===void 0&&(this.invisibleScrollbar=uM(),this.invisibleScrollbar&&(this.hideAndShowInvisibleScrollAsNeeded(),this.addActiveListenerToggles()))}addActiveListenerToggles(){const t=["mouseenter","mousedown","touchstart"],e=["mouseleave","touchend"],i=this.getGui();t.forEach(s=>this.addManagedListener(i,s,()=>this.addOrRemoveCssClass("ag-scrollbar-active",!0))),e.forEach(s=>this.addManagedListener(i,s,()=>this.addOrRemoveCssClass("ag-scrollbar-active",!1)))}onScrollVisibilityChanged(){this.invisibleScrollbar===void 0&&this.initialiseInvisibleScrollbar(),this.animationFrameService.requestAnimationFrame(()=>this.setScrollVisible())}hideAndShowInvisibleScrollAsNeeded(){this.addManagedListener(this.eventService,K.EVENT_BODY_SCROLL,t=>{t.direction===this.direction&&(this.hideTimeout!==null&&(window.clearTimeout(this.hideTimeout),this.hideTimeout=null),this.addOrRemoveCssClass("ag-scrollbar-scrolling",!0))}),this.addManagedListener(this.eventService,K.EVENT_BODY_SCROLL_END,()=>{this.hideTimeout=window.setTimeout(()=>{this.addOrRemoveCssClass("ag-scrollbar-scrolling",!1),this.hideTimeout=null},400)})}attemptSettingScrollPosition(t){const e=this.getViewport();KR(()=>Fn(e),()=>this.setScrollPosition(t),100)}getViewport(){return this.eViewport}getContainer(){return this.eContainer}onScrollCallback(t){this.addManagedListener(this.getViewport(),"scroll",t)}};z([pe("eViewport")],sp.prototype,"eViewport",2);z([pe("eContainer")],sp.prototype,"eContainer",2);z([W("scrollVisibleService")],sp.prototype,"scrollVisibleService",2);z([W("ctrlsService")],sp.prototype,"ctrlsService",2);z([W("animationFrameService")],sp.prototype,"animationFrameService",2);var rp=class u5 extends sp{constructor(){super(u5.TEMPLATE,"horizontal")}postConstruct(){super.postConstruct();const e=this.setFakeHScrollSpacerWidths.bind(this);this.addManagedListener(this.eventService,K.EVENT_DISPLAYED_COLUMNS_CHANGED,e),this.addManagedListener(this.eventService,K.EVENT_DISPLAYED_COLUMNS_WIDTH_CHANGED,e),this.addManagedListener(this.eventService,K.EVENT_PINNED_ROW_DATA_CHANGED,this.onPinnedRowDataChanged.bind(this)),this.addManagedPropertyListener("domLayout",e),this.ctrlsService.register("fakeHScrollComp",this),this.createManagedBean(new Vg(i=>this.eContainer.style.width=`${i}px`)),this.addManagedPropertyListeners(["suppressHorizontalScroll"],this.onScrollVisibilityChanged.bind(this))}initialiseInvisibleScrollbar(){this.invisibleScrollbar===void 0&&(this.enableRtl=this.gos.get("enableRtl"),super.initialiseInvisibleScrollbar(),this.invisibleScrollbar&&this.refreshCompBottom())}onPinnedRowDataChanged(){this.refreshCompBottom()}refreshCompBottom(){if(!this.invisibleScrollbar)return;const e=this.pinnedRowModel.getPinnedBottomTotalHeight();this.getGui().style.bottom=`${e}px`}onScrollVisibilityChanged(){super.onScrollVisibilityChanged(),this.setFakeHScrollSpacerWidths()}setFakeHScrollSpacerWidths(){const e=this.scrollVisibleService.isVerticalScrollShowing();let i=this.columnModel.getDisplayedColumnsRightWidth();const s=!this.enableRtl&&e,r=this.gos.getScrollbarWidth();s&&(i+=r),Lo(this.eRightSpacer,i),this.eRightSpacer.classList.toggle("ag-scroller-corner",i<=r);let n=this.columnModel.getDisplayedColumnsLeftWidth();this.enableRtl&&e&&(n+=r),Lo(this.eLeftSpacer,n),this.eLeftSpacer.classList.toggle("ag-scroller-corner",n<=r)}setScrollVisible(){const e=this.scrollVisibleService.isHorizontalScrollShowing(),i=this.invisibleScrollbar,s=this.gos.get("suppressHorizontalScroll"),r=e&&this.gos.getScrollbarWidth()||0,o=s?0:r===0&&i?16:r;this.addOrRemoveCssClass("ag-scrollbar-invisible",i),ch(this.getGui(),o),ch(this.eViewport,o),ch(this.eContainer,o),this.setDisplayed(e,{skipAriaHidden:!0})}getScrollPosition(){return uy(this.getViewport(),this.enableRtl)}setScrollPosition(e){Fn(this.getViewport())||this.attemptSettingScrollPosition(e),dy(this.getViewport(),e,this.enableRtl)}};rp.TEMPLATE=`<div class="ag-body-horizontal-scroll" aria-hidden="true">
            <div class="ag-horizontal-left-spacer" ref="eLeftSpacer"></div>
            <div class="ag-body-horizontal-scroll-viewport" ref="eViewport">
                <div class="ag-body-horizontal-scroll-container" ref="eContainer"></div>
            </div>
            <div class="ag-horizontal-right-spacer" ref="eRightSpacer"></div>
        </div>`;z([pe("eLeftSpacer")],rp.prototype,"eLeftSpacer",2);z([pe("eRightSpacer")],rp.prototype,"eRightSpacer",2);z([W("columnModel")],rp.prototype,"columnModel",2);z([W("pinnedRowModel")],rp.prototype,"pinnedRowModel",2);z([de],rp.prototype,"postConstruct",1);var WY=rp,wy=class extends ye{postConstruct(){const t=this.checkContainerWidths.bind(this);this.addManagedListener(this.eventService,K.EVENT_DISPLAYED_COLUMNS_CHANGED,t),this.addManagedListener(this.eventService,K.EVENT_DISPLAYED_COLUMNS_WIDTH_CHANGED,t),this.addManagedPropertyListener("domLayout",t)}checkContainerWidths(){const t=this.gos.isDomLayout("print"),e=t?0:this.columnModel.getDisplayedColumnsLeftWidth(),i=t?0:this.columnModel.getDisplayedColumnsRightWidth();e!=this.leftWidth&&(this.leftWidth=e,this.eventService.dispatchEvent({type:K.EVENT_LEFT_PINNED_WIDTH_CHANGED})),i!=this.rightWidth&&(this.rightWidth=i,this.eventService.dispatchEvent({type:K.EVENT_RIGHT_PINNED_WIDTH_CHANGED}))}getPinnedRightWidth(){return this.rightWidth}getPinnedLeftWidth(){return this.leftWidth}};z([W("columnModel")],wy.prototype,"columnModel",2);z([de],wy.prototype,"postConstruct",1);wy=z([Me("pinnedWidthService")],wy);var mg=class extends ye{constructor(){super(...arguments),this.events=[]}postConstruct(){this.rowModel.getType()=="clientSide"&&(this.clientSideRowModel=this.rowModel)}dispatchExpanded(t,e){if(this.clientSideRowModel==null){this.eventService.dispatchEvent(t);return}this.events.push(t);const i=()=>{this.clientSideRowModel&&this.clientSideRowModel.onRowGroupOpened(),this.events.forEach(s=>this.eventService.dispatchEvent(s)),this.events=[]};e?i():(this.dispatchExpandedDebounced==null&&(this.dispatchExpandedDebounced=this.animationFrameService.debounce(i)),this.dispatchExpandedDebounced())}};z([W("animationFrameService")],mg.prototype,"animationFrameService",2);z([W("rowModel")],mg.prototype,"rowModel",2);z([de],mg.prototype,"postConstruct",1);mg=z([Me("rowNodeEventThrottle")],mg);var zY={columnsMenuParams:{version:"31.1",message:"Use `columnChooserParams` instead."},suppressMenu:{version:"31.1",message:"Use `suppressHeaderMenuButton` instead."},suppressCellFlash:{version:"31.2",message:"Use `enableCellChangeFlash={false}` in the ColDef"},dndSource:{version:"31.2",message:"This feature has been replaced by `Row Dragging to an External DropZone`."},dndSourceOnRowDrag:{version:"31.2",message:"This feature has been replaced by `Row Dragging to an External DropZone`."}},Yc=(t,e)=>{var i;return((i=e.rowModelType)!=null?i:"clientSide")==="clientSide"?{module:"@ag-grid-enterprise/row-grouping"}:null},$Y={enableRowGroup:Yc,rowGroup:Yc,rowGroupIndex:Yc,enablePivot:Yc,enableValue:Yc,pivot:Yc,pivotIndex:Yc,aggFunc:Yc,cellEditor:t=>t.cellEditor==="agRichSelect"||t.cellEditor==="agRichSelectCellEditor"?{module:"@ag-grid-enterprise/rich-select"}:null,menuTabs:t=>{var e;const i=["columnsMenuTab","generalMenuTab"];return(e=t.menuTabs)!=null&&e.some(s=>i.includes(s))?{module:"@ag-grid-enterprise/menu"}:null},columnsMenuParams:{module:["@ag-grid-enterprise/menu","@ag-grid-enterprise/column-tool-panel"]},columnChooserParams:{module:["@ag-grid-enterprise/menu","@ag-grid-enterprise/column-tool-panel"]},headerCheckboxSelection:{supportedRowModels:["clientSide","serverSide"],dependencies:(t,{rowSelection:e})=>e==="multiple"?null:"headerCheckboxSelection is only supported with rowSelection=multiple"},headerCheckboxSelectionFilteredOnly:{supportedRowModels:["clientSide"],dependencies:(t,{rowSelection:e})=>e==="multiple"?null:"headerCheckboxSelectionFilteredOnly is only supported with rowSelection=multiple"},headerCheckboxSelectionCurrentPageOnly:{supportedRowModels:["clientSide"],dependencies:(t,{rowSelection:e})=>e==="multiple"?null:"headerCheckboxSelectionCurrentPageOnly is only supported with rowSelection=multiple"},children:()=>yf},KY={headerName:void 0,columnGroupShow:void 0,headerClass:void 0,toolPanelClass:void 0,headerValueGetter:void 0,pivotKeys:void 0,groupId:void 0,colId:void 0,sort:void 0,initialSort:void 0,field:void 0,type:void 0,cellDataType:void 0,tooltipComponent:void 0,tooltipField:void 0,headerTooltip:void 0,cellClass:void 0,showRowGroup:void 0,filter:void 0,initialAggFunc:void 0,defaultAggFunc:void 0,aggFunc:void 0,pinned:void 0,initialPinned:void 0,chartDataType:void 0,cellAriaRole:void 0,cellEditorPopupPosition:void 0,headerGroupComponent:void 0,headerGroupComponentParams:void 0,cellStyle:void 0,cellRenderer:void 0,cellRendererParams:void 0,cellEditor:void 0,cellEditorParams:void 0,filterParams:void 0,pivotValueColumn:void 0,headerComponent:void 0,headerComponentParams:void 0,floatingFilterComponent:void 0,floatingFilterComponentParams:void 0,tooltipComponentParams:void 0,refData:void 0,columnsMenuParams:void 0,columnChooserParams:void 0,children:void 0,sortingOrder:void 0,allowedAggFuncs:void 0,menuTabs:void 0,pivotTotalColumnIds:void 0,cellClassRules:void 0,icons:void 0,sortIndex:void 0,initialSortIndex:void 0,flex:void 0,initialFlex:void 0,width:void 0,initialWidth:void 0,minWidth:void 0,maxWidth:void 0,rowGroupIndex:void 0,initialRowGroupIndex:void 0,pivotIndex:void 0,initialPivotIndex:void 0,suppressCellFlash:void 0,suppressColumnsToolPanel:void 0,suppressFiltersToolPanel:void 0,openByDefault:void 0,marryChildren:void 0,suppressStickyLabel:void 0,hide:void 0,initialHide:void 0,rowGroup:void 0,initialRowGroup:void 0,pivot:void 0,initialPivot:void 0,checkboxSelection:void 0,showDisabledCheckboxes:void 0,headerCheckboxSelection:void 0,headerCheckboxSelectionFilteredOnly:void 0,headerCheckboxSelectionCurrentPageOnly:void 0,suppressMenu:void 0,suppressHeaderMenuButton:void 0,suppressMovable:void 0,lockPosition:void 0,lockVisible:void 0,lockPinned:void 0,unSortIcon:void 0,suppressSizeToFit:void 0,suppressAutoSize:void 0,enableRowGroup:void 0,enablePivot:void 0,enableValue:void 0,editable:void 0,suppressPaste:void 0,suppressNavigable:void 0,enableCellChangeFlash:void 0,rowDrag:void 0,dndSource:void 0,autoHeight:void 0,wrapText:void 0,sortable:void 0,resizable:void 0,singleClickEdit:void 0,floatingFilter:void 0,cellEditorPopup:void 0,suppressFillHandle:void 0,wrapHeaderText:void 0,autoHeaderHeight:void 0,dndSourceOnRowDrag:void 0,valueGetter:void 0,valueSetter:void 0,filterValueGetter:void 0,keyCreator:void 0,valueFormatter:void 0,valueParser:void 0,comparator:void 0,equals:void 0,pivotComparator:void 0,suppressKeyboardEvent:void 0,suppressHeaderKeyboardEvent:void 0,colSpan:void 0,rowSpan:void 0,getQuickFilterText:void 0,onCellValueChanged:void 0,onCellClicked:void 0,onCellDoubleClicked:void 0,onCellContextMenu:void 0,rowDragText:void 0,tooltipValueGetter:void 0,cellRendererSelector:void 0,cellEditorSelector:void 0,suppressSpanHeaderHeight:void 0,useValueFormatterForExport:void 0,useValueParserForImport:void 0,mainMenuItems:void 0,contextMenuItems:void 0,suppressFloatingFilterButton:void 0,suppressHeaderFilterButton:void 0,suppressHeaderContextMenu:void 0,loadingCellRenderer:void 0,loadingCellRendererParams:void 0,loadingCellRendererSelector:void 0},YY=Object.keys(KY),yf={objectName:"colDef",allProperties:YY,docsUrl:"column-properties/",deprecations:zY,validations:$Y},qY={enableChartToolPanelsButton:{version:"29"},functionsPassive:{version:"29.2"},onColumnRowGroupChangeRequest:{version:"29.2"},onColumnPivotChangeRequest:{version:"29.2"},onColumnValueChangeRequest:{version:"29.2"},onColumnAggFuncChangeRequest:{version:"29.2"},serverSideFilterAllLevels:{version:"30",message:"All server-side group levels are now filtered by default. This can be toggled using `serverSideOnlyRefreshFilteredGroups`."},suppressAggAtRootLevel:{version:"30",message:"The root level aggregation is now suppressed by default. This can be toggled using  `alwaysAggregateAtRootLevel`."},excludeHiddenColumnsFromQuickFilter:{version:"30",message:"Hidden columns are now excluded from the Quick Filter by default. This can be toggled using `includeHiddenColumnsInQuickFilter`."},enterMovesDown:{version:"30",renamed:"enterNavigatesVertically"},enterMovesDownAfterEdit:{version:"30",renamed:"enterNavigatesVerticallyAfterEdit"},suppressParentsInRowNodes:{version:"30.2",message:"Using suppressParentsInRowNodes is no longer recommended. To serialize nodes it is now recommended to instead remove the parent node reference before serialization."},advancedFilterModel:{version:"31",message:"Use `initialState.filter.advancedFilterModel` instead."},suppressAsyncEvents:{version:"31",message:"Events should be handled asynchronously."},cellFadeDelay:{version:"31.1",renamed:"cellFadeDuration"},cellFlashDelay:{version:"31.1",renamed:"cellFlashDuration"},suppressServerSideInfiniteScroll:{version:"31.1"},serverSideSortOnServer:{version:"31.1"},serverSideFilterOnServer:{version:"31.1"},enableCellChangeFlash:{version:"31.2",message:"Use `enableCellChangeFlash` in the `ColDef` or `defaultColDef` for all columns."},groupIncludeFooter:{version:"31.3",message:"Use `groupTotalRow` instead."},groupIncludeTotalFooter:{version:"31.3",message:"Use `grandTotalRow` instead."}},XY={suppressContextMenu:!1,preventDefaultOnContextMenu:!1,allowContextMenuWithControlKey:!1,suppressMenuHide:!1,enableBrowserTooltips:!1,tooltipTrigger:"hover",tooltipShowDelay:2e3,tooltipHideDelay:1e4,tooltipMouseTrack:!1,tooltipShowMode:"standard",tooltipInteraction:!1,copyHeadersToClipboard:!1,copyGroupHeadersToClipboard:!1,clipboardDelimiter:"	",suppressCopyRowsToClipboard:!1,suppressCopySingleCellRanges:!1,suppressLastEmptyLineOnPaste:!1,suppressClipboardPaste:!1,suppressClipboardApi:!1,suppressCutToClipboard:!1,maintainColumnOrder:!1,suppressFieldDotNotation:!1,allowDragFromColumnsToolPanel:!1,suppressMovableColumns:!1,suppressColumnMoveAnimation:!1,suppressDragLeaveHidesColumns:!1,suppressRowGroupHidesColumns:!1,suppressAutoSize:!1,autoSizePadding:20,skipHeaderOnAutoSize:!1,singleClickEdit:!1,suppressClickEdit:!1,readOnlyEdit:!1,stopEditingWhenCellsLoseFocus:!1,enterNavigatesVertically:!1,enterNavigatesVerticallyAfterEdit:!1,enableCellEditingOnBackspace:!1,undoRedoCellEditing:!1,undoRedoCellEditingLimit:10,suppressCsvExport:!1,suppressExcelExport:!1,cacheQuickFilter:!1,includeHiddenColumnsInQuickFilter:!1,excludeChildrenWhenTreeDataFiltering:!1,enableAdvancedFilter:!1,includeHiddenColumnsInAdvancedFilter:!1,enableCharts:!1,suppressChartToolPanelsButton:!1,masterDetail:!1,keepDetailRows:!1,keepDetailRowsCount:10,detailRowAutoHeight:!1,tabIndex:0,rowBuffer:10,valueCache:!1,valueCacheNeverExpires:!1,enableCellExpressions:!1,suppressTouch:!1,suppressFocusAfterRefresh:!1,suppressAsyncEvents:!1,suppressBrowserResizeObserver:!1,suppressPropertyNamesCheck:!1,suppressChangeDetection:!1,debug:!1,suppressLoadingOverlay:!1,suppressNoRowsOverlay:!1,pagination:!1,paginationPageSize:100,paginationPageSizeSelector:!0,paginationAutoPageSize:!1,paginateChildRows:!1,suppressPaginationPanel:!1,pivotMode:!1,pivotPanelShow:"never",pivotDefaultExpanded:0,pivotSuppressAutoColumn:!1,suppressExpandablePivotGroups:!1,functionsReadOnly:!1,suppressAggFuncInHeader:!1,alwaysAggregateAtRootLevel:!1,aggregateOnlyChangedColumns:!1,suppressAggFilteredOnly:!1,removePivotHeaderRowWhenSingleValueColumn:!1,animateRows:!0,enableCellChangeFlash:!1,cellFlashDelay:500,cellFlashDuration:500,cellFadeDelay:1e3,cellFadeDuration:1e3,allowShowChangeAfterFilter:!1,domLayout:"normal",ensureDomOrder:!1,enableRtl:!1,suppressColumnVirtualisation:!1,suppressMaxRenderedRowRestriction:!1,suppressRowVirtualisation:!1,rowDragManaged:!1,suppressRowDrag:!1,suppressMoveWhenRowDragging:!1,rowDragEntireRow:!1,rowDragMultiRow:!1,embedFullWidthRows:!1,groupDisplayType:"singleColumn",groupDefaultExpanded:0,groupMaintainOrder:!1,groupSelectsChildren:!1,groupIncludeTotalFooter:!1,groupSuppressBlankHeader:!1,groupSelectsFiltered:!1,showOpenedGroup:!1,groupRemoveSingleChildren:!1,groupRemoveLowestSingleChildren:!1,groupHideOpenParents:!1,groupAllowUnbalanced:!1,rowGroupPanelShow:"never",suppressMakeColumnVisibleAfterUnGroup:!1,treeData:!1,rowGroupPanelSuppressSort:!1,suppressGroupRowsSticky:!1,rowModelType:"clientSide",asyncTransactionWaitMillis:50,suppressModelUpdateAfterUpdateTransaction:!1,cacheOverflowSize:1,infiniteInitialRowCount:1,serverSideInitialRowCount:1,suppressServerSideInfiniteScroll:!1,cacheBlockSize:100,maxBlocksInCache:-1,maxConcurrentDatasourceRequests:2,blockLoadDebounceMillis:0,purgeClosedRowNodes:!1,serverSideSortAllLevels:!1,serverSideOnlyRefreshFilteredGroups:!1,serverSideSortOnServer:!1,serverSideFilterOnServer:!1,serverSidePivotResultFieldSeparator:"_",viewportRowModelPageSize:5,viewportRowModelBufferSize:5,alwaysShowHorizontalScroll:!1,alwaysShowVerticalScroll:!1,debounceVerticalScrollbar:!1,suppressHorizontalScroll:!1,suppressScrollOnNewData:!1,suppressScrollWhenPopupsAreOpen:!1,suppressAnimationFrame:!1,suppressMiddleClickScrolls:!1,suppressPreventDefaultOnMouseWheel:!1,rowMultiSelectWithClick:!1,suppressRowDeselection:!1,suppressRowClickSelection:!1,suppressCellFocus:!1,suppressHeaderFocus:!1,suppressMultiRangeSelection:!1,enableCellTextSelection:!1,enableRangeSelection:!1,enableRangeHandle:!1,enableFillHandle:!1,fillHandleDirection:"xy",suppressClearOnFillReduction:!1,accentedSort:!1,unSortIcon:!1,suppressMultiSort:!1,alwaysMultiSort:!1,suppressMaintainUnsortedOrder:!1,suppressRowHoverHighlight:!1,suppressRowTransform:!1,columnHoverHighlight:!1,deltaSort:!1,enableGroupEdit:!1,suppressGroupMaintainValueType:!1,functionsPassive:!1,groupLockGroupColumns:0,serverSideEnableClientSideSort:!1,suppressServerSideFullWidthLoadingRow:!1,pivotMaxGeneratedColumns:-1},ZY={sideBar:{module:"@ag-grid-enterprise/side-bar"},statusBar:{module:"@ag-grid-enterprise/status-bar"},enableCharts:{module:"@ag-grid-enterprise/charts"},getMainMenuItems:{module:"@ag-grid-enterprise/menu"},getContextMenuItems:{module:"@ag-grid-enterprise/menu"},allowContextMenuWithControlKey:{module:"@ag-grid-enterprise/menu"},enableAdvancedFilter:{module:"@ag-grid-enterprise/advanced-filter"},treeData:{supportedRowModels:["clientSide","serverSide"],module:"@ag-grid-enterprise/row-grouping",dependencies:t=>{var e;const i=(e=t.rowModelType)!=null?e:"clientSide";switch(i){case"clientSide":const s=`treeData requires 'getDataPath' in the ${i} row model.`;return t.getDataPath?null:s;case"serverSide":const r=`treeData requires 'isServerSideGroup' and 'getServerSideGroupKey' in the ${i} row model.`;return t.isServerSideGroup&&t.getServerSideGroupKey?null:r}return null}},masterDetail:{module:"@ag-grid-enterprise/master-detail"},enableRangeSelection:{module:"@ag-grid-enterprise/range-selection"},enableRangeHandle:{dependencies:{enableRangeSelection:[!0]}},enableFillHandle:{dependencies:{enableRangeSelection:[!0]}},groupDefaultExpanded:{supportedRowModels:["clientSide"]},groupIncludeFooter:{supportedRowModels:["clientSide","serverSide"],dependencies:t=>{var e;switch((e=t.rowModelType)!=null?e:"clientSide"){case"clientSide":return null;case"serverSide":return t.suppressServerSideInfiniteScroll?"groupIncludeFooter is not supported alongside suppressServerSideInfiniteScroll":null}return null}},groupIncludeTotalFooter:{supportedRowModels:["clientSide"]},groupRemoveSingleChildren:{dependencies:{groupHideOpenParents:[void 0,!1],groupRemoveLowestSingleChildren:[void 0,!1]}},groupRemoveLowestSingleChildren:{dependencies:{groupHideOpenParents:[void 0,!1],groupRemoveSingleChildren:[void 0,!1]}},groupSelectsChildren:{dependencies:{rowSelection:["multiple"]}},suppressParentsInRowNodes:{dependencies:{groupSelectsChildren:[void 0,!1]}},viewportDatasource:{supportedRowModels:["viewport"],module:"@ag-grid-enterprise/viewport-row-model"},serverSideDatasource:{supportedRowModels:["serverSide"],module:"@ag-grid-enterprise/server-side-row-model"},cacheBlockSize:{supportedRowModels:["serverSide","infinite"]},datasource:{supportedRowModels:["infinite"],module:"@ag-grid-community/infinite-row-model"},rowData:{supportedRowModels:["clientSide"],module:"@ag-grid-community/client-side-row-model"},columnDefs:()=>yf,defaultColDef:()=>yf,defaultColGroupDef:()=>yf,autoGroupColumnDef:()=>yf},JY={objectName:"gridOptions",allProperties:[...ig.ALL_PROPERTIES,...JR.EVENT_CALLBACKS],propertyExceptions:["api","columnApi"],docsUrl:"grid-options/",deprecations:qY,validations:ZY},fi=class{constructor(){this.destroyed=!1,this.domDataKey="__AG_"+Math.random().toString(),this.propertyEventService=new In,this.globalEventHandlerFactory=t=>(e,i)=>{if(this.destroyed)return;const s=Rv.has(e);if(s&&!t||!s&&t)return;const r=JR.getCallbackForEvent(e),n=this.gridOptions[r];typeof n=="function"&&this.frameworkOverrides.wrapOutgoing(()=>{n(i)})}}get context(){return this.gridOptions.context}init(){this.columnApi=new Pu(this.api);const t=!this.get("suppressAsyncEvents");this.eventService.addGlobalListener(this.globalEventHandlerFactory().bind(this),t),this.eventService.addGlobalListener(this.globalEventHandlerFactory(!0).bind(this),!1),this.propertyEventService.setFrameworkOverrides(this.frameworkOverrides),this.getScrollbarWidth()}destroy(){this.destroyed=!0,this.columnApi=void 0}get(t){var e;return(e=this.gridOptions[t])!=null?e:XY[t]}getCallback(t){return this.mergeGridCommonParams(this.gridOptions[t])}exists(t){return Pe(this.gridOptions[t])}mergeGridCommonParams(t){return t&&(i=>{const s=i;return s.api=this.api,s.columnApi=this.columnApi,s.context=this.context,t(s)})}static toBoolean(t){return typeof t=="boolean"?t:typeof t=="string"?t.toUpperCase()==="TRUE"||t=="":!1}static toNumber(t){if(typeof t=="number")return t;if(typeof t=="string"){const e=parseInt(t);return isNaN(e)?void 0:e}}static toConstrainedNum(t,e){return i=>{const s=fi.toNumber(i);if(!(s==null||s<t||s>e))return s}}static getCoercedValue(t,e){const i=fi.PROPERTY_COERCIONS.get(t);return i?i(e):e}static getCoercedGridOptions(t){const e={};return Object.entries(t).forEach(([i,s])=>{const r=fi.getCoercedValue(i,s);e[i]=r}),e}updateGridOptions({options:t,force:e,source:i="api"}){const s={id:fi.changeSetId++,properties:[]},r=[];Object.entries(t).forEach(([n,o])=>{i==="api"&&K$[n]&&ot(`${n} is an initial property and cannot be updated.`);const a=fi.getCoercedValue(n,o),l=e||typeof a=="object"&&i==="api",c=this.gridOptions[n];if(l||c!==a){this.gridOptions[n]=a;const u={type:n,currentValue:a,previousValue:c,changeSet:s,source:i};r.push(u)}}),this.validationService.processGridOptions(this.gridOptions),s.properties=r.map(n=>n.type),r.forEach(n=>{this.gridOptions.debug&&console.log(`AG Grid: Updated property ${n.type} from `,n.previousValue," to  ",n.currentValue),this.propertyEventService.dispatchEvent(n)})}addEventListener(t,e){this.propertyEventService.addEventListener(t,e)}removeEventListener(t,e){this.propertyEventService.removeEventListener(t,e)}getScrollbarWidth(){if(this.scrollbarWidth==null){const e=typeof this.gridOptions.scrollbarWidth=="number"&&this.gridOptions.scrollbarWidth>=0?this.gridOptions.scrollbarWidth:fG();e!=null&&(this.scrollbarWidth=e,this.eventService.dispatchEvent({type:K.EVENT_SCROLLBAR_WIDTH_CHANGED}))}return this.scrollbarWidth}isRowModelType(t){return this.gridOptions.rowModelType===t||t==="clientSide"&&St(this.gridOptions.rowModelType)}isDomLayout(t){var e;return((e=this.gridOptions.domLayout)!=null?e:"normal")===t}isRowSelection(){return this.gridOptions.rowSelection==="single"||this.gridOptions.rowSelection==="multiple"}useAsyncEvents(){return!this.get("suppressAsyncEvents")}isGetRowHeightFunction(){return typeof this.gridOptions.getRowHeight=="function"}getRowHeightForNode(t,e=!1,i){if(i==null&&(i=this.environment.getDefaultRowHeight()),this.isGetRowHeightFunction()){if(e)return{height:i,estimated:!0};const r={node:t,data:t.data},n=this.getCallback("getRowHeight")(r);if(this.isNumeric(n))return n===0&&ot("The return of `getRowHeight` cannot be zero. If the intention is to hide rows, use a filter instead."),{height:Math.max(1,n),estimated:!1}}return t.detail&&this.get("masterDetail")?this.getMasterDetailRowHeight():{height:this.gridOptions.rowHeight&&this.isNumeric(this.gridOptions.rowHeight)?this.gridOptions.rowHeight:i,estimated:!1}}getMasterDetailRowHeight(){return this.get("detailRowAutoHeight")?{height:1,estimated:!1}:this.isNumeric(this.gridOptions.detailRowHeight)?{height:this.gridOptions.detailRowHeight,estimated:!1}:{height:300,estimated:!1}}getRowHeightAsNumber(){if(!this.gridOptions.rowHeight||St(this.gridOptions.rowHeight))return this.environment.getDefaultRowHeight();const t=this.environment.refreshRowHeightVariable();return t!==-1?t:(console.warn("AG Grid row height must be a number if not using standard row model"),this.environment.getDefaultRowHeight())}isNumeric(t){return!isNaN(t)&&typeof t=="number"&&isFinite(t)}getDomDataKey(){return this.domDataKey}getDomData(t,e){const i=t[this.getDomDataKey()];return i?i[e]:void 0}setDomData(t,e,i){const s=this.getDomDataKey();let r=t[s];St(r)&&(r={},t[s]=r),r[e]=i}getDocument(){let t=null;return this.gridOptions.getDocument&&Pe(this.gridOptions.getDocument)?t=this.gridOptions.getDocument():this.eGridDiv&&(t=this.eGridDiv.ownerDocument),t&&Pe(t)?t:document}getWindow(){return this.getDocument().defaultView||window}getRootNode(){return this.eGridDiv.getRootNode()}getActiveDomElement(){return this.getRootNode().activeElement}getAsyncTransactionWaitMillis(){return Pe(this.gridOptions.asyncTransactionWaitMillis)?this.gridOptions.asyncTransactionWaitMillis:50}isAnimateRows(){return this.get("ensureDomOrder")?!1:this.get("animateRows")}isGroupRowsSticky(){return!(this.get("paginateChildRows")||this.get("groupHideOpenParents")||this.isDomLayout("print"))}isColumnsSortingCoupledToGroup(){const t=this.gridOptions.autoGroupColumnDef;return!(t!=null&&t.comparator)&&!this.get("treeData")}getGroupAggFiltering(){const t=this.gridOptions.groupAggFiltering;if(typeof t=="function")return this.getCallback("groupAggFiltering");if(t===!0)return()=>!0}getGrandTotalRow(){const t=this.gridOptions.grandTotalRow;if(t)return t;if(this.gridOptions.groupIncludeTotalFooter)return"bottom"}getGroupTotalRowCallback(){const t=this.get("groupTotalRow");if(typeof t=="function")return this.getCallback("groupTotalRow");if(t)return()=>t;const e=this.get("groupIncludeFooter");if(typeof e=="function"){const i=this.getCallback("groupIncludeFooter");return s=>i(s)?"bottom":void 0}return()=>e?"bottom":void 0}isGroupMultiAutoColumn(){return this.gridOptions.groupDisplayType?this.gridOptions.groupDisplayType==="multipleColumns":this.get("groupHideOpenParents")}isGroupUseEntireRow(t){return t?!1:this.gridOptions.groupDisplayType==="groupRows"}getGridCommonParams(){return{api:this.api,columnApi:this.columnApi,context:this.context}}addGridCommonParams(t){const e=t;return e.api=this.api,e.columnApi=this.columnApi,e.context=this.context,e}};fi.PROPERTY_COERCIONS=new Map([...ig.BOOLEAN_PROPERTIES.map(t=>[t,fi.toBoolean]),...ig.NUMBER_PROPERTIES.map(t=>[t,fi.toNumber]),["groupAggFiltering",t=>typeof t=="function"?t:fi.toBoolean(t)],["pageSize",fi.toConstrainedNum(1,Number.MAX_VALUE)],["autoSizePadding",fi.toConstrainedNum(0,Number.MAX_VALUE)],["keepDetailRowsCount",fi.toConstrainedNum(1,Number.MAX_VALUE)],["rowBuffer",fi.toConstrainedNum(0,Number.MAX_VALUE)],["infiniteInitialRowCount",fi.toConstrainedNum(1,Number.MAX_VALUE)],["cacheOverflowSize",fi.toConstrainedNum(1,Number.MAX_VALUE)],["cacheBlockSize",fi.toConstrainedNum(1,Number.MAX_VALUE)],["serverSideInitialRowCount",fi.toConstrainedNum(1,Number.MAX_VALUE)],["viewportRowModelPageSize",fi.toConstrainedNum(1,Number.MAX_VALUE)],["viewportRowModelBufferSize",fi.toConstrainedNum(0,Number.MAX_VALUE)]]);fi.changeSetId=0;z([W("gridOptions")],fi.prototype,"gridOptions",2);z([W("eventService")],fi.prototype,"eventService",2);z([W("environment")],fi.prototype,"environment",2);z([W("frameworkOverrides")],fi.prototype,"frameworkOverrides",2);z([W("eGridDiv")],fi.prototype,"eGridDiv",2);z([W("validationService")],fi.prototype,"validationService",2);z([W("gridApi")],fi.prototype,"api",2);z([de],fi.prototype,"init",1);z([Hi],fi.prototype,"destroy",1);fi=z([Me("gridOptionsService")],fi);var qw=class extends ye{getLocaleTextFunc(){const t=this.gos.getCallback("getLocaleText");if(t)return(i,s,r)=>t({key:i,defaultValue:s,variableValues:r});const e=this.gos.get("localeText");return(i,s,r)=>{let n=e&&e[i];if(n&&r&&r.length){let o=0;for(;!(o>=r.length||n.indexOf("${variable}")===-1);)n=n.replace("${variable}",r[o++])}return n??s}}};qw=z([Me("localeService")],qw);var QM=class d5 extends sp{constructor(){super(d5.TEMPLATE,"vertical")}postConstruct(){super.postConstruct(),this.createManagedBean(new Ex(this.eContainer)),this.ctrlsService.register("fakeVScrollComp",this),this.addManagedListener(this.eventService,K.EVENT_ROW_CONTAINER_HEIGHT_CHANGED,this.onRowContainerHeightChanged.bind(this))}setScrollVisible(){const e=this.scrollVisibleService.isVerticalScrollShowing(),i=this.invisibleScrollbar,s=e&&this.gos.getScrollbarWidth()||0,r=s===0&&i?16:s;this.addOrRemoveCssClass("ag-scrollbar-invisible",i),Lo(this.getGui(),r),Lo(this.eViewport,r),Lo(this.eContainer,r),this.setDisplayed(e,{skipAriaHidden:!0})}onRowContainerHeightChanged(){const{ctrlsService:e}=this,s=e.getGridBodyCtrl().getBodyViewportElement(),r=this.getScrollPosition(),n=s.scrollTop;r!=n&&this.setScrollPosition(n,!0)}getScrollPosition(){return this.getViewport().scrollTop}setScrollPosition(e,i){!i&&!Fn(this.getViewport())&&this.attemptSettingScrollPosition(e),this.getViewport().scrollTop=e}};QM.TEMPLATE=`<div class="ag-body-vertical-scroll" aria-hidden="true">
            <div class="ag-body-vertical-scroll-viewport" ref="eViewport">
                <div class="ag-body-vertical-scroll-container" ref="eContainer"></div>
            </div>
        </div>`;z([de],QM.prototype,"postConstruct",1);var QY=QM,bF={january:"January",february:"February",march:"March",april:"April",may:"May",june:"June",july:"July",august:"August",september:"September",october:"October",november:"November",december:"December"},wF=["january","february","march","april","may","june","july","august","september","october","november","december"],Fu=class extends ye{constructor(){super(...arguments),this.dataTypeDefinitions={},this.isWaitingForRowData=!1,this.isColumnTypeOverrideInDataTypeDefinitions=!1,this.columnStateUpdatesPendingInference={},this.columnStateUpdateListenerDestroyFuncs=[]}init(){this.groupHideOpenParents=this.gos.get("groupHideOpenParents"),this.addManagedPropertyListener("groupHideOpenParents",()=>{this.groupHideOpenParents=this.gos.get("groupHideOpenParents")}),this.processDataTypeDefinitions(),this.addManagedPropertyListener("dataTypeDefinitions",t=>{this.processDataTypeDefinitions(),this.columnModel.recreateColumnDefs(mf(t.source))})}processDataTypeDefinitions(){var t;const e=this.getDefaultDataTypes();this.dataTypeDefinitions={},Object.entries(e).forEach(([s,r])=>{this.dataTypeDefinitions[s]=$i(it({},r),{groupSafeValueFormatter:this.createGroupSafeValueFormatter(r)})});const i=(t=this.gos.get("dataTypeDefinitions"))!=null?t:{};this.dataTypeMatchers={},Object.entries(i).forEach(([s,r])=>{const n=this.processDataTypeDefinition(r,i,[s],e);n&&(this.dataTypeDefinitions[s]=n,r.dataTypeMatcher&&(this.dataTypeMatchers[s]=r.dataTypeMatcher))}),this.checkObjectValueHandlers(e),["dateString","text","number","boolean","date"].forEach(s=>{const r=this.dataTypeMatchers[s];r&&delete this.dataTypeMatchers[s],this.dataTypeMatchers[s]=r??e[s].dataTypeMatcher})}mergeDataTypeDefinitions(t,e){const i=it(it({},t),e);return t.columnTypes&&e.columnTypes&&e.appendColumnTypes&&(i.columnTypes=[...this.convertColumnTypes(t.columnTypes),...this.convertColumnTypes(e.columnTypes)]),i}processDataTypeDefinition(t,e,i,s){let r;const n=t.extendsDataType;if(t.columnTypes&&(this.isColumnTypeOverrideInDataTypeDefinitions=!0),t.extendsDataType===t.baseDataType){let o=s[n];const a=e[n];if(o&&a&&(o=a),!this.validateDataTypeDefinition(t,o,n))return;r=this.mergeDataTypeDefinitions(o,t)}else{if(i.includes(n)){ot('Data type definition hierarchies (via the "extendsDataType" property) cannot contain circular references.');return}const o=e[n];if(!this.validateDataTypeDefinition(t,o,n))return;const a=this.processDataTypeDefinition(o,e,[...i,n],s);if(!a)return;r=this.mergeDataTypeDefinitions(a,t)}return $i(it({},r),{groupSafeValueFormatter:this.createGroupSafeValueFormatter(r)})}validateDataTypeDefinition(t,e,i){return e?e.baseDataType!==t.baseDataType?(ot('The "baseDataType" property of a data type definition must match that of its parent.'),!1):!0:(ot(`The data type definition ${i} does not exist.`),!1)}createGroupSafeValueFormatter(t){if(t.valueFormatter)return e=>{var i,s;if((i=e.node)!=null&&i.group){const r=e.column.getAggFunc();if(r){if(r==="first"||r==="last")return t.valueFormatter(e);if(t.baseDataType==="number"&&r!=="count"){if(typeof e.value=="number")return t.valueFormatter(e);if(typeof e.value=="object"){if(!e.value)return;if("toNumber"in e.value)return t.valueFormatter($i(it({},e),{value:e.value.toNumber()}));if("value"in e.value)return t.valueFormatter($i(it({},e),{value:e.value.value}))}}}if(!this.gos.get("suppressGroupMaintainValueType"))return}else if(this.groupHideOpenParents&&e.column.isRowGroupActive()){if(typeof e.value!="string"||(s=t.dataTypeMatcher)!=null&&s.call(t,e.value))return t.valueFormatter(e);if(!this.gos.get("suppressGroupMaintainValueType"))return}return t.valueFormatter(e)}}updateColDefAndGetDataTypeDefinitionColumnType(t,e,i){let{cellDataType:s}=e;const{field:r}=e;if(s===void 0&&(s=t.cellDataType),(s==null||s===!0)&&(s=this.canInferCellDataType(t,e)?this.inferCellDataType(r,i):!1),!s){t.cellDataType=!1;return}const n=this.dataTypeDefinitions[s];if(!n){ot(`Missing data type definition - "${s}"`);return}return t.cellDataType=s,n.groupSafeValueFormatter&&(t.valueFormatter=n.groupSafeValueFormatter),n.valueParser&&(t.valueParser=n.valueParser),n.suppressDefaultProperties||this.setColDefPropertiesForBaseDataType(t,n,i),n.columnTypes}updateColDefAndGetColumnType(t,e,i){var s,r;const n=this.updateColDefAndGetDataTypeDefinitionColumnType(t,e,i),o=(r=(s=e.type)!=null?s:n)!=null?r:t.type;return t.type=o,o?this.convertColumnTypes(o):void 0}addColumnListeners(t){if(!this.isWaitingForRowData)return;const e=this.columnStateUpdatesPendingInference[t.getColId()];if(!e)return;const i=s=>{e.add(s.key)};t.addEventListener(Nt.EVENT_STATE_UPDATED,i),this.columnStateUpdateListenerDestroyFuncs.push(()=>t.removeEventListener(Nt.EVENT_STATE_UPDATED,i))}canInferCellDataType(t,e){var i;if(this.rowModel.getType()!=="clientSide")return!1;const s={cellRenderer:!0,valueGetter:!0,valueParser:!0,refData:!0};if(this.doColDefPropsPreventInference(e,s))return!1;const r=e.type===null?t.type:e.type;if(r){const n=(i=this.gos.get("columnTypes"))!=null?i:{};if(this.convertColumnTypes(r).some(a=>{const l=n[a.trim()];return l&&this.doColDefPropsPreventInference(l,s)}))return!1}return!this.doColDefPropsPreventInference(t,s)}doColDefPropsPreventInference(t,e){return[["cellRenderer","agSparklineCellRenderer"],["valueGetter",void 0],["valueParser",void 0],["refData",void 0]].some(([i,s])=>this.doesColDefPropPreventInference(t,e,i,s))}doesColDefPropPreventInference(t,e,i,s){if(!e[i])return!1;const r=t[i];return r===null?(e[i]=!1,!1):s===void 0?!!r:r===s}inferCellDataType(t,e){var i;if(!t)return;let s;const r=this.getInitialData();if(r){const o=t.indexOf(".")>=0&&!this.gos.get("suppressFieldDotNotation");s=Df(r,t,o)}else this.initWaitForRowData(e);if(s==null)return;const[n]=(i=Object.entries(this.dataTypeMatchers).find(([o,a])=>a(s)))!=null?i:["object"];return n}getInitialData(){const t=this.gos.get("rowData");if(t!=null&&t.length)return t[0];if(this.initialData)return this.initialData;{const e=this.rowModel.getRootNode().allLeafChildren;if(e!=null&&e.length)return e[0].data}return null}initWaitForRowData(t){if(this.columnStateUpdatesPendingInference[t]=new Set,this.isWaitingForRowData)return;this.isWaitingForRowData=!0;const e=this.isColumnTypeOverrideInDataTypeDefinitions;e&&this.columnModel.queueResizeOperations();const i=this.addManagedListener(this.eventService,K.EVENT_ROW_DATA_UPDATE_STARTED,s=>{const{firstRowData:r}=s;if(!r)return;i==null||i(),this.isWaitingForRowData=!1,this.processColumnsPendingInference(r,e),this.columnStateUpdatesPendingInference={},e&&this.columnModel.processResizeOperations();const n={type:K.EVENT_DATA_TYPES_INFERRED};this.eventService.dispatchEvent(n)})}isPendingInference(){return this.isWaitingForRowData}processColumnsPendingInference(t,e){this.initialData=t;const i=[];this.columnStateUpdateListenerDestroyFuncs.forEach(n=>n()),this.columnStateUpdateListenerDestroyFuncs=[];const s={},r={};Object.entries(this.columnStateUpdatesPendingInference).forEach(([n,o])=>{const a=this.columnModel.getGridColumn(n);if(!a)return;const l=a.getColDef();if(!this.columnModel.resetColumnDefIntoColumn(a,"cellDataTypeInferred"))return;const c=a.getColDef();if(e&&c.type&&c.type!==l.type){const u=this.getUpdatedColumnState(a,o);u.rowGroup&&u.rowGroupIndex==null&&(s[n]=u),u.pivot&&u.pivotIndex==null&&(r[n]=u),i.push(u)}}),e&&i.push(...this.columnModel.generateColumnStateForRowGroupAndPivotIndexes(s,r)),i.length&&this.columnModel.applyColumnState({state:i},"cellDataTypeInferred"),this.initialData=null}getUpdatedColumnState(t,e){const i=this.columnModel.getColumnStateFromColDef(t);return e.forEach(s=>{delete i[s],s==="rowGroup"?delete i.rowGroupIndex:s==="pivot"&&delete i.pivotIndex}),i}checkObjectValueHandlers(t){const e=this.dataTypeDefinitions.object,i=t.object;this.hasObjectValueParser=e.valueParser!==i.valueParser,this.hasObjectValueFormatter=e.valueFormatter!==i.valueFormatter}convertColumnTypes(t){let e=[];return t instanceof Array?t.some(s=>typeof s!="string")?console.warn("if colDef.type is supplied an array it should be of type 'string[]'"):e=t:typeof t=="string"?e=t.split(","):console.warn("colDef.type should be of type 'string' | 'string[]'"),e}getDateStringTypeDefinition(t){var e;return t?(e=this.getDataTypeDefinition(t))!=null?e:this.dataTypeDefinitions.dateString:this.dataTypeDefinitions.dateString}getDateParserFunction(t){return this.getDateStringTypeDefinition(t).dateParser}getDateFormatterFunction(t){return this.getDateStringTypeDefinition(t).dateFormatter}getDataTypeDefinition(t){const e=t.getColDef();if(e.cellDataType)return this.dataTypeDefinitions[e.cellDataType]}getBaseDataType(t){var e;return(e=this.getDataTypeDefinition(t))==null?void 0:e.baseDataType}checkType(t,e){var i;if(e==null)return!0;const s=(i=this.getDataTypeDefinition(t))==null?void 0:i.dataTypeMatcher;return s?s(e):!0}validateColDef(t){t.cellDataType==="object"&&(t.valueFormatter===this.dataTypeDefinitions.object.groupSafeValueFormatter&&!this.hasObjectValueFormatter&&ot('Cell data type is "object" but no value formatter has been provided. Please either provide an object data type definition with a value formatter, or set "colDef.valueFormatter"'),t.editable&&t.valueParser===this.dataTypeDefinitions.object.valueParser&&!this.hasObjectValueParser&&ot('Cell data type is "object" but no value parser has been provided. Please either provide an object data type definition with a value parser, or set "colDef.valueParser"'))}setColDefPropertiesForBaseDataType(t,e,i){const s=(a,l,c)=>{let u=a.getColDef().valueFormatter;return u===e.groupSafeValueFormatter&&(u=e.valueFormatter),this.valueService.formatValue(a,l,c,u)},r=vt.__isRegistered("@ag-grid-enterprise/set-filter",this.context.getGridId()),n=this.localeService.getLocaleTextFunc(),o=a=>{const{filterParams:l}=t;t.filterParams=typeof l=="object"?it(it({},l),a):a};switch(e.baseDataType){case"number":{t.cellEditor="agNumberCellEditor",r&&o({comparator:(a,l)=>{const c=a==null?0:parseInt(a),u=l==null?0:parseInt(l);return c===u?0:c>u?1:-1}});break}case"boolean":{t.cellEditor="agCheckboxCellEditor",t.cellRenderer="agCheckboxCellRenderer",t.suppressKeyboardEvent=a=>!!a.colDef.editable&&a.event.key===ce.SPACE,o(r?{valueFormatter:a=>Pe(a.value)?n(String(a.value),a.value?"True":"False"):n("blanks","(Blanks)")}:{maxNumConditions:1,debounceMs:0,filterOptions:["empty",{displayKey:"true",displayName:"True",predicate:(a,l)=>l,numberOfInputs:0},{displayKey:"false",displayName:"False",predicate:(a,l)=>l===!1,numberOfInputs:0}]});break}case"date":{t.cellEditor="agDateCellEditor",t.keyCreator=a=>s(a.column,a.node,a.value),r&&o({valueFormatter:a=>{const l=s(a.column,a.node,a.value);return Pe(l)?l:n("blanks","(Blanks)")},treeList:!0,treeListFormatter:(a,l)=>{if(l===1&&a!=null){const c=wF[Number(a)-1];return n(c,bF[c])}return a??n("blanks","(Blanks)")}});break}case"dateString":{t.cellEditor="agDateStringCellEditor",t.keyCreator=l=>s(l.column,l.node,l.value);const a=e.dateParser;o(r?{valueFormatter:l=>{const c=s(l.column,l.node,l.value);return Pe(c)?c:n("blanks","(Blanks)")},treeList:!0,treeListPathGetter:l=>{const c=a(l??void 0);return c?[String(c.getFullYear()),String(c.getMonth()+1),String(c.getDate())]:null},treeListFormatter:(l,c)=>{if(c===1&&l!=null){const u=wF[Number(l)-1];return n(u,bF[u])}return l??n("blanks","(Blanks)")}}:{comparator:(l,c)=>{const u=a(c);return c==null||u<l?-1:u>l?1:0}});break}case"object":{t.cellEditorParams={useFormatter:!0},t.comparator=(a,l)=>{const c=this.columnModel.getPrimaryColumn(i),u=c==null?void 0:c.getColDef();if(!c||!u)return 0;const d=a==null?"":s(c,null,a),h=l==null?"":s(c,null,l);return d===h?0:d>h?1:-1},t.keyCreator=a=>s(a.column,a.node,a.value),r?o({valueFormatter:a=>{const l=s(a.column,a.node,a.value);return Pe(l)?l:n("blanks","(Blanks)")}}):t.filterValueGetter=a=>s(a.column,a.node,this.valueService.getValue(a.column,a.node));break}}}getDefaultDataTypes(){const t=i=>!!i.match("^\\d{4}-\\d{2}-\\d{2}$"),e=this.localeService.getLocaleTextFunc();return{number:{baseDataType:"number",valueParser:i=>{var s,r;return((r=(s=i.newValue)==null?void 0:s.trim)==null?void 0:r.call(s))===""?null:Number(i.newValue)},valueFormatter:i=>i.value==null?"":typeof i.value!="number"||isNaN(i.value)?e("invalidNumber","Invalid Number"):String(i.value),dataTypeMatcher:i=>typeof i=="number"},text:{baseDataType:"text",valueParser:i=>i.newValue===""?null:ny(i.newValue),dataTypeMatcher:i=>typeof i=="string"},boolean:{baseDataType:"boolean",valueParser:i=>{var s,r;return i.newValue==null?i.newValue:((r=(s=i.newValue)==null?void 0:s.trim)==null?void 0:r.call(s))===""?null:String(i.newValue).toLowerCase()==="true"},valueFormatter:i=>i.value==null?"":String(i.value),dataTypeMatcher:i=>typeof i=="boolean"},date:{baseDataType:"date",valueParser:i=>Sn(i.newValue==null?null:String(i.newValue)),valueFormatter:i=>{var s;return i.value==null?"":!(i.value instanceof Date)||isNaN(i.value.getTime())?e("invalidDate","Invalid Date"):(s=Fo(i.value,!1))!=null?s:""},dataTypeMatcher:i=>i instanceof Date},dateString:{baseDataType:"dateString",dateParser:i=>{var s;return(s=Sn(i))!=null?s:void 0},dateFormatter:i=>{var s;return(s=Fo(i??null,!1))!=null?s:void 0},valueParser:i=>t(String(i.newValue))?i.newValue:null,valueFormatter:i=>t(String(i.value))?i.value:"",dataTypeMatcher:i=>typeof i=="string"&&t(i)},object:{baseDataType:"object",valueParser:()=>null,valueFormatter:i=>{var s;return(s=ny(i.value))!=null?s:""}}}}};z([W("rowModel")],Fu.prototype,"rowModel",2);z([W("columnModel")],Fu.prototype,"columnModel",2);z([W("valueService")],Fu.prototype,"valueService",2);z([de],Fu.prototype,"init",1);Fu=z([Me("dataTypeService")],Fu);var Ph=class extends ye{constructor(){super(...arguments),this.waitingForColumns=!1}postConstruct(){this.addManagedPropertyListener("columnDefs",t=>this.setColumnDefs(t))}start(){this.ctrlsService.whenReady(()=>{const t=this.gos.get("columnDefs");t?this.setColumnsAndData(t):this.waitingForColumns=!0,this.gridReady()})}setColumnsAndData(t){this.columnModel.setColumnDefs(t??[],"gridInitializing"),this.rowModel.start()}gridReady(){this.dispatchGridReadyEvent();const t=vt.__isRegistered("@ag-grid-enterprise/core",this.context.getGridId());new Ix("AG Grid",()=>this.gos.get("debug")).log(`initialised successfully, enterprise = ${t}`)}dispatchGridReadyEvent(){const t={type:K.EVENT_GRID_READY};this.eventService.dispatchEvent(t)}setColumnDefs(t){const e=this.gos.get("columnDefs");if(e){if(this.waitingForColumns){this.waitingForColumns=!1,this.setColumnsAndData(e);return}this.columnModel.setColumnDefs(e,mf(t.source))}}};z([W("ctrlsService")],Ph.prototype,"ctrlsService",2);z([W("columnModel")],Ph.prototype,"columnModel",2);z([W("rowModel")],Ph.prototype,"rowModel",2);z([de],Ph.prototype,"postConstruct",1);Ph=z([Me("syncService")],Ph);var Ih=class extends ye{constructor(){super(...arguments),this.manuallyDisplayed=!1}postConstruct(){this.addManagedListener(this.eventService,K.EVENT_ROW_DATA_UPDATED,()=>this.onRowDataUpdated()),this.addManagedListener(this.eventService,K.EVENT_NEW_COLUMNS_LOADED,()=>this.onNewColumnsLoaded())}registerOverlayWrapperComp(t){this.overlayWrapperComp=t,(!this.gos.get("columnDefs")||this.gos.isRowModelType("clientSide")&&!this.gos.get("rowData"))&&this.showLoadingOverlay()}showLoadingOverlay(){if(this.gos.get("suppressLoadingOverlay"))return;const t={},e=this.userComponentFactory.getLoadingOverlayCompDetails(t);this.showOverlay(e,"ag-overlay-loading-wrapper","loadingOverlayComponentParams")}showNoRowsOverlay(){if(this.gos.get("suppressNoRowsOverlay"))return;const t={},e=this.userComponentFactory.getNoRowsOverlayCompDetails(t);this.showOverlay(e,"ag-overlay-no-rows-wrapper","noRowsOverlayComponentParams")}showOverlay(t,e,i){const s=t.newAgStackInstance(),r=this.addManagedPropertyListener(i,({currentValue:n})=>{s.then(o=>{o.refresh&&o.refresh(this.gos.addGridCommonParams(it({},n??{})))})});this.manuallyDisplayed=this.columnModel.isReady()&&!this.paginationProxy.isEmpty(),this.overlayWrapperComp.showOverlay(s,e,r)}hideOverlay(){this.manuallyDisplayed=!1,this.overlayWrapperComp.hideOverlay()}showOrHideOverlay(){const t=this.paginationProxy.isEmpty(),e=this.gos.get("suppressNoRowsOverlay");t&&!e?this.showNoRowsOverlay():this.hideOverlay()}onRowDataUpdated(){this.showOrHideOverlay()}onNewColumnsLoaded(){this.columnModel.isReady()&&!this.paginationProxy.isEmpty()&&!this.manuallyDisplayed&&this.hideOverlay()}};z([W("userComponentFactory")],Ih.prototype,"userComponentFactory",2);z([W("paginationProxy")],Ih.prototype,"paginationProxy",2);z([W("columnModel")],Ih.prototype,"columnModel",2);z([de],Ih.prototype,"postConstruct",1);Ih=z([Me("overlayService")],Ih);var Qr=class extends ye{constructor(){super(...arguments),this.suppressEvents=!0,this.queuedUpdateSources=new Set,this.dispatchStateUpdateEventDebounced=qr(()=>this.dispatchQueuedStateUpdateEvents(),0),this.onRowGroupOpenedDebounced=qr(()=>this.updateCachedState("rowGroupExpansion",this.getRowGroupExpansionState()),0),this.onRowSelectedDebounced=qr(()=>{this.staleStateKeys.delete("rowSelection"),this.updateCachedState("rowSelection",this.getRowSelectionState())},0),this.staleStateKeys=new Set}postConstruct(){var t;this.isClientSideRowModel=this.rowModel.getType()==="clientSide",this.cachedState=(t=this.gos.get("initialState"))!=null?t:{},this.ctrlsService.whenReady(()=>this.suppressEventsAndDispatchInitEvent(()=>this.setupStateOnGridReady()));const e=this.addManagedListener(this.eventService,K.EVENT_NEW_COLUMNS_LOADED,({source:r})=>{r==="gridInitializing"&&(e==null||e(),this.suppressEventsAndDispatchInitEvent(()=>this.setupStateOnColumnsInitialised()))}),i=this.addManagedListener(this.eventService,K.EVENT_ROW_COUNT_READY,()=>{i==null||i(),this.suppressEventsAndDispatchInitEvent(()=>this.setupStateOnRowCountReady())}),s=this.addManagedListener(this.eventService,K.EVENT_FIRST_DATA_RENDERED,()=>{s==null||s(),this.suppressEventsAndDispatchInitEvent(()=>this.setupStateOnFirstDataRendered())})}getState(){return this.staleStateKeys.size&&this.refreshStaleState(),this.cachedState}setupStateOnGridReady(){this.updateCachedState("sideBar",this.getSideBarState()),this.addManagedListener(this.eventService,K.EVENT_TOOL_PANEL_VISIBLE_CHANGED,()=>this.updateCachedState("sideBar",this.getSideBarState())),this.addManagedListener(this.eventService,K.EVENT_SIDE_BAR_UPDATED,()=>this.updateCachedState("sideBar",this.getSideBarState()))}setupStateOnColumnsInitialised(){var t;const e=(t=this.gos.get("initialState"))!=null?t:{};this.setColumnState(e),this.setColumnGroupState(e),this.updateColumnState(["aggregation","columnOrder","columnPinning","columnSizing","columnVisibility","pivot","pivot","rowGroup","sort"]),this.updateCachedState("columnGroup",this.getColumnGroupState()),this.addManagedListener(this.eventService,K.EVENT_COLUMN_VALUE_CHANGED,()=>this.updateColumnState(["aggregation"])),this.addManagedListener(this.eventService,K.EVENT_COLUMN_MOVED,()=>this.updateColumnState(["columnOrder"])),this.addManagedListener(this.eventService,K.EVENT_COLUMN_PINNED,()=>this.updateColumnState(["columnPinning"])),this.addManagedListener(this.eventService,K.EVENT_COLUMN_RESIZED,()=>this.updateColumnState(["columnSizing"])),this.addManagedListener(this.eventService,K.EVENT_COLUMN_VISIBLE,()=>this.updateColumnState(["columnVisibility"])),this.addManagedListener(this.eventService,K.EVENT_COLUMN_PIVOT_CHANGED,()=>this.updateColumnState(["pivot"])),this.addManagedListener(this.eventService,K.EVENT_COLUMN_PIVOT_MODE_CHANGED,()=>this.updateColumnState(["pivot"])),this.addManagedListener(this.eventService,K.EVENT_COLUMN_ROW_GROUP_CHANGED,()=>this.updateColumnState(["rowGroup"])),this.addManagedListener(this.eventService,K.EVENT_SORT_CHANGED,()=>this.updateColumnState(["sort"])),this.addManagedListener(this.eventService,K.EVENT_NEW_COLUMNS_LOADED,()=>this.updateColumnState(["aggregation","columnOrder","columnPinning","columnSizing","columnVisibility","pivot","pivot","rowGroup","sort"])),this.addManagedListener(this.eventService,K.EVENT_COLUMN_GROUP_OPENED,()=>this.updateCachedState("columnGroup",this.getColumnGroupState()))}setupStateOnRowCountReady(){var t;const{filter:e,rowGroupExpansion:i,rowSelection:s,pagination:r}=(t=this.gos.get("initialState"))!=null?t:{},n=this.gos.get("advancedFilterModel");(e||n)&&this.setFilterState(e,n),i&&this.setRowGroupExpansionState(i),s&&this.setRowSelectionState(s),r&&this.setPaginationState(r),this.updateCachedState("filter",this.getFilterState()),this.updateCachedState("rowGroupExpansion",this.getRowGroupExpansionState()),this.updateCachedState("rowSelection",this.getRowSelectionState()),this.updateCachedState("pagination",this.getPaginationState()),this.addManagedListener(this.eventService,K.EVENT_FILTER_CHANGED,()=>this.updateCachedState("filter",this.getFilterState())),this.addManagedListener(this.eventService,K.EVENT_ROW_GROUP_OPENED,()=>this.onRowGroupOpenedDebounced()),this.addManagedListener(this.eventService,K.EVENT_EXPAND_COLLAPSE_ALL,()=>this.updateCachedState("rowGroupExpansion",this.getRowGroupExpansionState())),this.addManagedListener(this.eventService,K.EVENT_SELECTION_CHANGED,()=>{this.staleStateKeys.add("rowSelection"),this.onRowSelectedDebounced()}),this.addManagedListener(this.eventService,K.EVENT_PAGINATION_CHANGED,o=>{(o.newPage||o.newPageSize)&&this.updateCachedState("pagination",this.getPaginationState())})}setupStateOnFirstDataRendered(){var t;const{scroll:e,rangeSelection:i,focusedCell:s,columnOrder:r}=(t=this.gos.get("initialState"))!=null?t:{};s&&this.setFocusedCellState(s),i&&this.setRangeSelectionState(i),e&&this.setScrollState(e),this.setColumnPivotState(!!(r!=null&&r.orderedColIds)),this.updateCachedState("sideBar",this.getSideBarState()),this.updateCachedState("focusedCell",this.getFocusedCellState()),this.updateCachedState("rangeSelection",this.getRangeSelectionState()),this.updateCachedState("scroll",this.getScrollState()),this.addManagedListener(this.eventService,K.EVENT_CELL_FOCUSED,()=>this.updateCachedState("focusedCell",this.getFocusedCellState())),this.addManagedListener(this.eventService,K.EVENT_RANGE_SELECTION_CHANGED,n=>{n.finished&&this.updateCachedState("rangeSelection",this.getRangeSelectionState())}),this.addManagedListener(this.eventService,K.EVENT_BODY_SCROLL_END,()=>this.updateCachedState("scroll",this.getScrollState()))}getColumnState(){const t=this.columnModel.isPivotMode(),e=[],i=[],s=[],r=[],n=[],o=[],a=[],l=[],c=[],u=this.columnModel.getColumnState();for(let d=0;d<u.length;d++){const{colId:h,sort:p,sortIndex:f,rowGroup:m,rowGroupIndex:g,aggFunc:y,pivot:v,pivotIndex:C,pinned:b,hide:T,width:A,flex:I}=u[d];c.push(h),p&&(e[f??0]={colId:h,sort:p}),m&&(i[g??0]=h),typeof y=="string"&&s.push({colId:h,aggFunc:y}),v&&(r[C??0]=h),b&&(b==="right"?o:n).push(h),T&&a.push(h),(I||A)&&l.push({colId:h,flex:I??void 0,width:A})}return{sort:e.length?{sortModel:e}:void 0,rowGroup:i.length?{groupColIds:i}:void 0,aggregation:s.length?{aggregationModel:s}:void 0,pivot:r.length||t?{pivotMode:t,pivotColIds:r}:void 0,columnPinning:n.length||o.length?{leftColIds:n,rightColIds:o}:void 0,columnVisibility:a.length?{hiddenColIds:a}:void 0,columnSizing:l.length?{columnSizingModel:l}:void 0,columnOrder:c.length?{orderedColIds:c}:void 0}}setColumnState(t){const{sort:e,rowGroup:i,aggregation:s,pivot:r,columnPinning:n,columnVisibility:o,columnSizing:a,columnOrder:l}=t,c={},u=f=>{let m=c[f];return m||(m={colId:f},c[f]=m,m)};e&&e.sortModel.forEach(({colId:f,sort:m},g)=>{const y=u(f);y.sort=m,y.sortIndex=g}),i&&i.groupColIds.forEach((f,m)=>{const g=u(f);g.rowGroup=!0,g.rowGroupIndex=m}),s&&s.aggregationModel.forEach(({colId:f,aggFunc:m})=>{u(f).aggFunc=m}),r&&(r.pivotColIds.forEach((f,m)=>{const g=u(f);g.pivot=!0,g.pivotIndex=m}),this.gos.updateGridOptions({options:{pivotMode:r.pivotMode},source:"gridInitializing"})),n&&(n.leftColIds.forEach(f=>{u(f).pinned="left"}),n.rightColIds.forEach(f=>{u(f).pinned="right"})),o&&o.hiddenColIds.forEach(f=>{u(f).hide=!0}),a&&a.columnSizingModel.forEach(({colId:f,flex:m,width:g})=>{const y=u(f);y.flex=m??null,y.width=g});const d=l==null?void 0:l.orderedColIds,h=!!(d!=null&&d.length),p=h?d.map(f=>u(f)):Object.values(c);if(p.length){this.columnStates=p;const f={sort:null,sortIndex:null,rowGroup:null,rowGroupIndex:null,aggFunc:null,pivot:null,pivotIndex:null,pinned:null,hide:null,flex:null};this.columnModel.applyColumnState({state:p,applyOrder:h,defaultState:f},"gridInitializing")}}setColumnPivotState(t){const e=this.columnStates;this.columnStates=void 0;const i=this.columnGroupStates;if(this.columnGroupStates=void 0,!!this.columnModel.isSecondaryColumnsPresent()){if(e){let s=[];for(const r of e)this.columnModel.getSecondaryColumn(r.colId)&&s.push(r);this.columnModel.applyColumnState({state:s,applyOrder:t},"gridInitializing")}i&&this.columnModel.setColumnGroupState(i,"gridInitializing")}}getColumnGroupState(){const t=this.columnModel.getColumnGroupState(),e=[];return t.forEach(({groupId:i,open:s})=>{s&&e.push(i)}),e.length?{openColumnGroupIds:e}:void 0}setColumnGroupState(t){var e;if(!t.hasOwnProperty("columnGroup"))return;const i=new Set((e=t.columnGroup)==null?void 0:e.openColumnGroupIds),r=this.columnModel.getColumnGroupState().map(({groupId:n})=>{const o=i.has(n);return o&&i.delete(n),{groupId:n,open:o}});i.forEach(n=>{r.push({groupId:n,open:!0})}),r.length&&(this.columnGroupStates=r),this.columnModel.setColumnGroupState(r,"gridInitializing")}getFilterState(){var t;let e=this.filterManager.getFilterModel();e&&Object.keys(e).length===0&&(e=void 0);const i=(t=this.filterManager.getAdvancedFilterModel())!=null?t:void 0;return e||i?{filterModel:e,advancedFilterModel:i}:void 0}setFilterState(t,e){const{filterModel:i,advancedFilterModel:s}=t??{advancedFilterModel:e};i&&this.filterManager.setFilterModel(i,"columnFilter"),s&&this.filterManager.setAdvancedFilterModel(s)}getRangeSelectionState(){var t;const e=(t=this.rangeService)==null?void 0:t.getCellRanges().map(i=>{const{id:s,type:r,startRow:n,endRow:o,columns:a,startColumn:l}=i;return{id:s,type:r,startRow:n,endRow:o,colIds:a.map(c=>c.getColId()),startColId:l.getColId()}});return e!=null&&e.length?{cellRanges:e}:void 0}setRangeSelectionState(t){if(!this.gos.get("enableRangeSelection")||!this.rangeService)return;const e=[];t.cellRanges.forEach(i=>{const s=[];if(i.colIds.forEach(n=>{const o=this.columnModel.getGridColumn(n);o&&s.push(o)}),!s.length)return;let r=this.columnModel.getGridColumn(i.startColId);if(!r){const n=this.columnModel.getAllDisplayedColumns(),o=new Set(s);r=n.find(a=>o.has(a))}e.push($i(it({},i),{columns:s,startColumn:r}))}),this.rangeService.setCellRanges(e)}getScrollState(){var t,e,i;if(!this.isClientSideRowModel)return;const s=(t=this.ctrlsService.getGridBodyCtrl())==null?void 0:t.getScrollFeature(),{left:r}=(e=s==null?void 0:s.getHScrollPosition())!=null?e:{left:0},{top:n}=(i=s==null?void 0:s.getVScrollPosition())!=null?i:{top:0};return n||r?{top:n,left:r}:void 0}setScrollState(t){var e;if(!this.isClientSideRowModel)return;const{top:i,left:s}=t;(e=this.ctrlsService.getGridBodyCtrl())==null||e.getScrollFeature().setScrollPosition(i,s)}getSideBarState(){var t,e;return(e=(t=this.sideBarService)==null?void 0:t.getSideBarComp())==null?void 0:e.getState()}getFocusedCellState(){if(!this.isClientSideRowModel)return;const t=this.focusService.getFocusedCell();if(t){const{column:e,rowIndex:i,rowPinned:s}=t;return{colId:e.getColId(),rowIndex:i,rowPinned:s}}}setFocusedCellState(t){if(!this.isClientSideRowModel)return;const{colId:e,rowIndex:i,rowPinned:s}=t;this.focusService.setFocusedCell({column:this.columnModel.getGridColumn(e),rowIndex:i,rowPinned:s,forceBrowserFocus:!0,preventScrollOnBrowserFocus:!0})}getPaginationState(){const t=this.paginationProxy.getCurrentPage(),e=this.gos.get("paginationAutoPageSize")?void 0:this.paginationProxy.getPageSize();if(!(!t&&!e))return{page:t,pageSize:e}}setPaginationState(t){t.pageSize&&!this.gos.get("paginationAutoPageSize")&&this.paginationProxy.setPageSize(t.pageSize,"initialState"),typeof t.page=="number"&&this.paginationProxy.setPage(t.page)}getRowSelectionState(){var t;const e=this.selectionService.getSelectionState();return!e||!Array.isArray(e)&&(e.selectAll===!1||e.selectAllChildren===!1)&&!((t=e==null?void 0:e.toggledNodes)!=null&&t.length)?void 0:e}setRowSelectionState(t){this.selectionService.setSelectionState(t,"gridInitializing")}getRowGroupExpansionState(){const t=this.expansionService.getExpandedRows();return t.length?{expandedRowGroupIds:t}:void 0}setRowGroupExpansionState(t){this.expansionService.expandRows(t.expandedRowGroupIds)}updateColumnState(t){const e=this.getColumnState();let i=!1;Object.entries(e).forEach(([s,r])=>{w_(r,this.cachedState[s])||(i=!0)}),this.cachedState=it(it({},this.cachedState),e),i&&this.dispatchStateUpdateEvent(t)}updateCachedState(t,e){const i=this.cachedState[t];this.setCachedStateValue(t,e),w_(e,i)||this.dispatchStateUpdateEvent([t])}setCachedStateValue(t,e){this.cachedState=$i(it({},this.cachedState),{[t]:e})}refreshStaleState(){this.staleStateKeys.forEach(t=>{switch(t){case"rowSelection":this.setCachedStateValue(t,this.getRowSelectionState());break}}),this.staleStateKeys.clear()}dispatchStateUpdateEvent(t){this.suppressEvents||(t.forEach(e=>this.queuedUpdateSources.add(e)),this.dispatchStateUpdateEventDebounced())}dispatchQueuedStateUpdateEvents(){const t=Array.from(this.queuedUpdateSources);this.queuedUpdateSources.clear();const e={type:K.EVENT_STATE_UPDATED,sources:t,state:this.cachedState};this.eventService.dispatchEvent(e)}suppressEventsAndDispatchInitEvent(t){this.suppressEvents=!0,this.columnAnimationService.setSuppressAnimation(!0),t(),setTimeout(()=>{this.suppressEvents=!1,this.queuedUpdateSources.clear(),this.isAlive()&&(this.columnAnimationService.setSuppressAnimation(!1),this.dispatchStateUpdateEvent(["gridInitializing"]))})}};z([W("filterManager")],Qr.prototype,"filterManager",2);z([W("ctrlsService")],Qr.prototype,"ctrlsService",2);z([W("focusService")],Qr.prototype,"focusService",2);z([W("columnModel")],Qr.prototype,"columnModel",2);z([W("paginationProxy")],Qr.prototype,"paginationProxy",2);z([W("rowModel")],Qr.prototype,"rowModel",2);z([W("selectionService")],Qr.prototype,"selectionService",2);z([W("expansionService")],Qr.prototype,"expansionService",2);z([W("columnAnimationService")],Qr.prototype,"columnAnimationService",2);z([Vt("sideBarService")],Qr.prototype,"sideBarService",2);z([Vt("rangeService")],Qr.prototype,"rangeService",2);z([de],Qr.prototype,"postConstruct",1);Qr=z([Me("stateService")],Qr);var Sy=class extends ye{init(){this.processGridOptions(this.gridOptions)}processGridOptions(t){this.processOptions(t,JY)}processColumnDefs(t){this.processOptions(t,yf)}processOptions(t,e){const{validations:i,deprecations:s,allProperties:r,propertyExceptions:n,objectName:o,docsUrl:a}=e;r&&this.gridOptions.suppressPropertyNamesCheck!==!0&&this.checkProperties(t,[...n??[],...Object.keys(s)],r,o,a);const l=new Set;Object.keys(t).forEach(u=>{var d;const h=s[u];if(h)if("renamed"in h){const{renamed:C,version:b}=h;l.add(`As of v${b}, ${String(u)} is deprecated. Please use ${String(C)} instead.`),t[C]=t[u]}else{const{message:C,version:b}=h;l.add(`As of v${b}, ${String(u)} is deprecated. ${C??""}`)}const p=t[u];if(p==null||p===!1)return;const f=i[u];let m;if(f)if(typeof f=="function"){const C=f(t,this.gridOptions);if(!C)return;if("objectName"in C){const b=t[u];if(Array.isArray(b)){b.forEach(T=>{this.processOptions(T,C)});return}this.processOptions(t[u],C);return}m=C}else m=f;else return;const{module:g,dependencies:y,supportedRowModels:v}=m;if(v){const C=(d=this.gridOptions.rowModelType)!=null?d:"clientSide";if(!v.includes(C)){l.add(`${String(u)} is not supported with the '${C}' row model.`);return}}if(g){const C=Array.isArray(g)?g:[g];let b=!0;if(C.forEach(T=>{vt.__assertRegistered(T,String(u),this.context.getGridId())||(b=!1,l.add(`${String(u)} is only available when ${T} is loaded.`))}),!b)return}if(y){const C=this.checkForWarning(u,y,t);if(C){l.add(C);return}}}),l.size>0&&l.forEach(u=>{ot(u)})}checkForWarning(t,e,i){if(typeof e=="function")return e(i,this.gridOptions);const r=Object.entries(e).find(([a,l])=>{const c=i[a];return!l.includes(c)});if(!r)return null;const[n,o]=r;return o.length>1?`'${String(t)}' requires '${n}' to be one of [${o.join(", ")}].`:`'${String(t)}' requires '${n}' to be ${o[0]}.`}checkProperties(t,e,i,s,r){const n=["__ob__","__v_skip","__metadata__"],o=RG(Object.getOwnPropertyNames(t),[...n,...e,...i],i);if(Pr(o,(a,l)=>{ot(`invalid ${s} property '${a}' did you mean any of these: ${l.slice(0,8).join(", ")}`)}),Object.keys(o).length>0&&r){const a=this.getFrameworkOverrides().getDocLink(r);ot(`to see all the valid ${s} properties please check: ${a}`)}}};z([W("gridOptions")],Sy.prototype,"gridOptions",2);z([de],Sy.prototype,"init",1);Sy=z([Me("validationService")],Sy);var Xw=class extends ye{constructor(){super(...arguments),this.syncEventListeners=new Map,this.asyncEventListeners=new Map,this.syncGlobalEventListeners=new Set,this.globalEventListenerPairs=new Map}postConstruct(){this.frameworkEventWrappingService=new YR(this.getFrameworkOverrides())}addEventListener(t,e){const i=this.frameworkEventWrappingService.wrap(e),s=this.gos.useAsyncEvents()&&!Rv.has(t),r=s?this.asyncEventListeners:this.syncEventListeners;r.has(t)||r.set(t,new Set),r.get(t).add(i),this.eventService.addEventListener(t,i,s)}removeEventListener(t,e){var i;const s=this.frameworkEventWrappingService.unwrap(e),r=this.asyncEventListeners.get(t),n=!!(r!=null&&r.delete(s));n||(i=this.syncEventListeners.get(t))==null||i.delete(s),this.eventService.removeEventListener(t,s,n)}addGlobalListener(t){const e=this.frameworkEventWrappingService.wrapGlobal(t);if(this.gos.useAsyncEvents()){const s=(n,o)=>{Rv.has(n)&&e(n,o)},r=(n,o)=>{Rv.has(n)||e(n,o)};this.globalEventListenerPairs.set(t,{syncListener:s,asyncListener:r}),this.eventService.addGlobalListener(s,!1),this.eventService.addGlobalListener(r,!0)}else this.syncGlobalEventListeners.add(e),this.eventService.addGlobalListener(e,!1)}removeGlobalListener(t){const e=this.frameworkEventWrappingService.unwrapGlobal(t);if(this.globalEventListenerPairs.has(e)){const{syncListener:s,asyncListener:r}=this.globalEventListenerPairs.get(e);this.eventService.removeGlobalListener(s,!1),this.eventService.removeGlobalListener(r,!0),this.globalEventListenerPairs.delete(t)}else this.syncGlobalEventListeners.delete(e),this.eventService.removeGlobalListener(e,!1)}destroyEventListeners(t,e){t.forEach((i,s)=>{i.forEach(r=>this.eventService.removeEventListener(s,r,e)),i.clear()}),t.clear()}destroyGlobalListeners(t,e){t.forEach(i=>this.eventService.removeGlobalListener(i,e)),t.clear()}destroy(){super.destroy(),this.destroyEventListeners(this.syncEventListeners,!1),this.destroyEventListeners(this.asyncEventListeners,!0),this.destroyGlobalListeners(this.syncGlobalEventListeners,!1),this.globalEventListenerPairs.forEach(({syncListener:t,asyncListener:e})=>{this.eventService.removeGlobalListener(t,!1),this.eventService.removeGlobalListener(e,!0)}),this.globalEventListenerPairs.clear()}};z([de],Xw.prototype,"postConstruct",1);Xw=z([Me("apiEventService")],Xw);var eD=class extends Te{constructor(){super('<span class="ag-paging-page-size"></span>'),this.hasEmptyOption=!1,this.handlePageSizeItemSelected=()=>{if(!this.selectPageSizeComp)return;const t=this.selectPageSizeComp.getValue();if(!t)return;const e=Number(t);isNaN(e)||e<1||e===this.paginationProxy.getPageSize()||(this.paginationProxy.setPageSize(e,"pageSizeSelector"),this.hasEmptyOption&&this.toggleSelectDisplay(!0),this.selectPageSizeComp.getFocusableElement().focus())}}init(){this.addManagedPropertyListener("paginationPageSizeSelector",()=>{this.onPageSizeSelectorValuesChange()}),this.addManagedListener(this.eventService,K.EVENT_PAGINATION_CHANGED,t=>this.handlePaginationChanged(t))}handlePaginationChanged(t){if(!this.selectPageSizeComp||!(t!=null&&t.newPageSize))return;const e=this.paginationProxy.getPageSize();this.getPageSizeSelectorValues().includes(e)?this.selectPageSizeComp.setValue(e.toString()):this.hasEmptyOption?this.selectPageSizeComp.setValue(""):this.toggleSelectDisplay(!0)}toggleSelectDisplay(t){this.selectPageSizeComp&&this.reset(),t&&(this.reloadPageSizesSelector(),this.selectPageSizeComp&&this.appendChild(this.selectPageSizeComp))}reset(){Cs(this.getGui()),this.selectPageSizeComp&&(this.destroyBean(this.selectPageSizeComp),this.selectPageSizeComp=void 0)}onPageSizeSelectorValuesChange(){this.selectPageSizeComp&&this.shouldShowPageSizeSelector()&&this.reloadPageSizesSelector()}shouldShowPageSizeSelector(){return this.gos.get("pagination")&&!this.gos.get("suppressPaginationPanel")&&!this.gos.get("paginationAutoPageSize")&&this.gos.get("paginationPageSizeSelector")!==!1}reloadPageSizesSelector(){const t=this.getPageSizeSelectorValues(),e=this.paginationProxy.getPageSize(),i=!e||!t.includes(e);i&&(t.unshift(""),ot(`The paginationPageSize grid option is set to a value that is not in the list of page size options.
                Please make sure that the paginationPageSize grid option is set to one of the values in the 
                paginationPageSizeSelector array, or set the paginationPageSizeSelector to false to hide the page size selector.`)),this.selectPageSizeComp&&(this.destroyBean(this.selectPageSizeComp),this.selectPageSizeComp=void 0);const s=this.localeService.getLocaleTextFunc(),r=s("pageSizeSelectorLabel","Page Size:"),n=t.map(a=>({value:String(a),text:String(a)})),o=s("ariaPageSizeSelectorLabel","Page Size");this.selectPageSizeComp=this.createManagedBean(new Jr).addOptions(n).setValue(String(i?"":e)).setAriaLabel(o).setLabel(r).onValueChange(()=>this.handlePageSizeItemSelected()),this.hasEmptyOption=i}getPageSizeSelectorValues(){const t=[20,50,100],e=this.gos.get("paginationPageSizeSelector");return!Array.isArray(e)||!this.validateValues(e)?t:[...e].sort((i,s)=>i-s)}validateValues(t){if(!t.length)return ot(`The paginationPageSizeSelector grid option is an empty array. This is most likely a mistake.
                If you want to hide the page size selector, please set the paginationPageSizeSelector to false.`),!1;for(let e=0;e<t.length;e++){const i=t[e],s=typeof i=="number",r=i>0;if(!s)return ot(`The paginationPageSizeSelector grid option contains a non-numeric value.
                    Please make sure that all values in the paginationPageSizeSelector array are numbers.`),!1;if(!r)return ot(`The paginationPageSizeSelector grid option contains a negative number or zero.
                    Please make sure that all values in the paginationPageSizeSelector array are positive.`),!1}return!0}destroy(){this.toggleSelectDisplay(!1),super.destroy()}};z([W("paginationProxy")],eD.prototype,"paginationProxy",2);z([de],eD.prototype,"init",1);var xy=class extends ye{constructor(){super(),this.descriptionContainer=null,this.announceValue=qr(this.announceValue.bind(this),200)}postConstruct(){const e=this.gos.getDocument(),i=this.descriptionContainer=e.createElement("div");i.classList.add("ag-aria-description-container"),eM(i,"polite"),tG(i,"additions text"),eG(i,!0),this.eGridDiv.appendChild(i)}announceValue(e){this.descriptionContainer&&(this.descriptionContainer.textContent="",setTimeout(()=>{this.isAlive()&&this.descriptionContainer&&(this.descriptionContainer.textContent=e)},50))}destroy(){super.destroy();const{descriptionContainer:e}=this;e&&(Cs(e),e.parentElement&&e.parentElement.removeChild(e)),this.descriptionContainer=null,this.eGridDiv=null}};z([W("eGridDiv")],xy.prototype,"eGridDiv",2);z([de],xy.prototype,"postConstruct",1);xy=z([Me("ariaAnnouncementService")],xy);var Zw=class{};Zw.gridOptions=void 0;function eq(t){Zw.gridOptions=t}function h5(t,e,i){if(!e)return aa("No gridOptions provided to createGrid"),{};const s=new tD().create(t,e,r=>{const n=new ud(t);r.createBean(n)},void 0,i);if(!Object.isFrozen(e)&&!(i!=null&&i.frameworkOverrides)){const r="https://ag-grid.com/javascript-data-grid/grid-interface/#grid-api";Object.defineProperty(e,"api",{get:()=>{aa(`gridOptions.api is no longer supported. See ${r}.`)},configurable:!0}),Object.defineProperty(e,"columnApi",{get:()=>{aa(`gridOptions.columnApi is no longer supported and all methods moved to the grid api. See ${r}.`)},configurable:!0})}return s}var tq=class{constructor(t,e,i){if(ot("Since v31 new Grid(...) is deprecated. Use createGrid instead: `const gridApi = createGrid(...)`. The grid api is returned from createGrid and will not be available on gridOptions."),!e){aa("No gridOptions provided to the grid");return}this.gridOptions=e;const s=new tD().create(t,e,r=>{const n=new ud(t);r.createBean(n).addDestroyFunc(()=>{this.destroy()})},void 0,i);this.gridOptions.api=s,this.gridOptions.columnApi=new Pu(s)}destroy(){var t;this.gridOptions&&((t=this.gridOptions.api)==null||t.destroy(),delete this.gridOptions.api,delete this.gridOptions.columnApi)}},iq=1,tD=class{create(t,e,i,s,r){var n;let o={};Zw.gridOptions?(wn(o,Zw.gridOptions,!0,!0),o=it(it({},o),e)):o=e;const a=fi.getCoercedGridOptions(o),l=!!a.debug,c=(n=a.gridId)!=null?n:String(iq++),u=this.getRegisteredModules(r,c),d=this.createBeansList(a.rowModelType,u,c),h=this.createProvidedBeans(t,a,r);if(!d){aa("Failed to create grid.");return}const p={providedBeanInstances:h,beanClasses:d,debug:l,gridId:c},f=new Ix("Context",()=>p.debug),m=new M3(p,f),g=m.getBean("beans");return this.registerModuleUserComponents(g,u),this.registerStackComponents(g,u),this.registerControllers(g,u),i(m),g.syncService.start(),s&&s(m),m.getBean("gridApi")}registerControllers(t,e){e.forEach(i=>{i.controllers&&i.controllers.forEach(s=>t.ctrlsFactory.register(s))})}registerStackComponents(t,e){const i=this.createAgStackComponentsList(e);t.agStackComponentsRegistry.setupComponents(i)}getRegisteredModules(t,e){const i=t?t.modules:null,s=vt.__getRegisteredModules(e),r=[],n={},o=(a,l,c)=>{(d=>{n[d.moduleName]||(n[d.moduleName]=!0,r.push(d),vt.__register(d,a,c))})(l),l.dependantModules&&l.dependantModules.forEach(d=>o(a,d,c))};return i&&i.forEach(a=>o(!0,a,e)),s&&s.forEach(a=>o(!vt.__isPackageBased(),a,void 0)),r}registerModuleUserComponents(t,e){this.extractModuleEntity(e,s=>s.userComponents?s.userComponents:[]).forEach(s=>{t.userComponentRegistry.registerDefaultComponent(s.componentName,s.componentClass)})}createProvidedBeans(t,e,i){let s=i?i.frameworkOverrides:null;St(s)&&(s=new o5);const r={gridOptions:e,eGridDiv:t,globalEventListener:i?i.globalEventListener:null,globalSyncEventListener:i?i.globalSyncEventListener:null,frameworkOverrides:s};return i&&i.providedBeanInstances&&Object.assign(r,i.providedBeanInstances),r}createAgStackComponentsList(t){let e=[{componentName:"AgCheckbox",componentClass:Tc},{componentName:"AgRadioButton",componentClass:mx},{componentName:"AgToggleButton",componentClass:ep},{componentName:"AgInputTextField",componentClass:vl},{componentName:"AgInputTextArea",componentClass:t5},{componentName:"AgInputNumberField",componentClass:_C},{componentName:"AgInputDateField",componentClass:YM},{componentName:"AgInputRange",componentClass:i5},{componentName:"AgRichSelect",componentClass:rd},{componentName:"AgSelect",componentClass:Jr},{componentName:"AgSlider",componentClass:Yn},{componentName:"AgGridBody",componentClass:Ko},{componentName:"AgHeaderRoot",componentClass:Z4},{componentName:"AgSortIndicator",componentClass:Cx},{componentName:"AgPagination",componentClass:Gn},{componentName:"AgPageSizeSelector",componentClass:eD},{componentName:"AgOverlayWrapper",componentClass:UY},{componentName:"AgGroupComponent",componentClass:Bo},{componentName:"AgRowContainer",componentClass:Xh},{componentName:"AgFakeHorizontalScroll",componentClass:WY},{componentName:"AgFakeVerticalScroll",componentClass:QY},{componentName:"AgAutocomplete",componentClass:vf}];const i=this.extractModuleEntity(t,s=>s.agStackComponents?s.agStackComponents:[]);return e=e.concat(i),e}createBeansList(t="clientSide",e,i){const s=e.filter(l=>!l.rowModel||l.rowModel===t),r={clientSide:"@ag-grid-community/client-side-row-model",infinite:"@ag-grid-community/infinite-row-model",serverSide:"@ag-grid-enterprise/server-side-row-model",viewport:"@ag-grid-enterprise/viewport-row-model"};if(!r[t]){aa("Could not find row model for rowModelType = "+t);return}if(!vt.__assertRegistered(r[t],`rowModelType = '${t}'`,i))return;const n=[Ot,Mh,Yw,gg,dg,Wt,py,Kw,Cy,$w,oc,fg,lg,qw,Sy,cg,ag,jw,In,fi,al,Ah,oo,Zs,Ru,ug,kn,gy,tg,Du,Cr,yy,uc,my,Mu,ac,st,Pu,Ri,sl,pg,cc,fy,Eh,Iu,V_,vy,Rh,ay,hg,Th,ll,Uw,H_,by,Go,Dh,Lf,wy,mg,j_,Fu,En,Ph,Ih,Qr,_h,Xw,xy,ao],o=this.extractModuleEntity(s,l=>l.beans?l.beans:[]);n.push(...o);const a=[];return n.forEach(l=>{a.indexOf(l)<0&&a.push(l)}),a}extractModuleEntity(t,e){return[].concat(...t.map(e))}},sq=class{wrap(t,e,i=[],s){const r=this.createWrapper(t,s);return e.forEach(n=>{this.createMethod(r,n,!0)}),i.forEach(n=>{this.createMethod(r,n,!1)}),r}unwrap(t){return t}createMethod(t,e,i){t.addMethod(e,this.createMethodProxy(t,e,i))}createMethodProxy(t,e,i){return function(){return t.hasMethod(e)?t.callMethod(e,arguments):(i&&console.warn("AG Grid: Framework component is missing the method "+e+"()"),null)}}},np=class{};np.CHART_TYPE_TO_SERIES_TYPE={column:"bar",groupedColumn:"bar",stackedColumn:"bar",normalizedColumn:"bar",bar:"bar",groupedBar:"bar",stackedBar:"bar",normalizedBar:"bar",line:"line",scatter:"scatter",bubble:"bubble",pie:"pie",donut:"donut",doughnut:"donut",area:"area",stackedArea:"area",normalizedArea:"area",histogram:"histogram",radarLine:"radar-line",radarArea:"radar-area",nightingale:"nightingale",radialColumn:"radial-column",radialBar:"radial-bar",sunburst:"sunburst",rangeBar:"range-bar",rangeArea:"range-area",boxPlot:"box-plot",treemap:"treemap",heatmap:"heatmap",waterfall:"waterfall"};np.COMBO_CHART_TYPES=["columnLineCombo","areaColumnCombo","customCombo"];np.SERIES_GROUP_TYPES=["grouped","stacked","normalized"];var p5=(t=>(t.InsideBase="insideBase",t.InsideEnd="insideEnd",t.Center="center",t.OutsideEnd="outsideEnd",t))(p5||{}),qg=typeof global>"u"?{}:global;qg.HTMLElement=typeof HTMLElement>"u"?{}:HTMLElement;qg.HTMLButtonElement=typeof HTMLButtonElement>"u"?{}:HTMLButtonElement;qg.HTMLSelectElement=typeof HTMLSelectElement>"u"?{}:HTMLSelectElement;qg.HTMLInputElement=typeof HTMLInputElement>"u"?{}:HTMLInputElement;qg.Node=typeof Node>"u"?{}:Node;qg.MouseEvent=typeof MouseEvent>"u"?{}:MouseEvent;var iD=class nv{constructor(e,i,s,r,n,o){this.nextId=0,this.rowCountReady=!1,this.allNodesMap={},this.rootNode=e,this.gos=i,this.eventService=s,this.columnModel=r,this.beans=o,this.selectionService=n,this.rootNode.group=!0,this.rootNode.level=-1,this.rootNode.id=nv.ROOT_NODE_ID,this.rootNode.allLeafChildren=[],this.rootNode.childrenAfterGroup=[],this.rootNode.childrenAfterSort=[],this.rootNode.childrenAfterAggFilter=[],this.rootNode.childrenAfterFilter=[]}getCopyOfNodesMap(){return Q.cloneObject(this.allNodesMap)}getRowNode(e){return this.allNodesMap[e]}setRowData(e){if(typeof e=="string"){console.warn("AG Grid: rowData must be an array.");return}this.rowCountReady=!0,this.dispatchRowDataUpdateStartedEvent(e);const i=this.rootNode,s=this.rootNode.sibling;i.childrenAfterFilter=null,i.childrenAfterGroup=null,i.childrenAfterAggFilter=null,i.childrenAfterSort=null,i.childrenMapped=null,i.updateHasChildren(),this.nextId=0,this.allNodesMap={},e?i.allLeafChildren=e.map(r=>this.createNode(r,this.rootNode,nv.TOP_LEVEL)):(i.allLeafChildren=[],i.childrenAfterGroup=[]),s&&(s.childrenAfterFilter=i.childrenAfterFilter,s.childrenAfterGroup=i.childrenAfterGroup,s.childrenAfterAggFilter=i.childrenAfterAggFilter,s.childrenAfterSort=i.childrenAfterSort,s.childrenMapped=i.childrenMapped,s.allLeafChildren=i.allLeafChildren)}updateRowData(e,i){this.rowCountReady=!0,this.dispatchRowDataUpdateStartedEvent(e.add);const s={remove:[],update:[],add:[]},r=[];return this.executeRemove(e,s,r),this.executeUpdate(e,s,r),this.executeAdd(e,s),this.updateSelection(r,"rowDataChanged"),i&&Q.sortRowNodesByOrder(this.rootNode.allLeafChildren,i),s}isRowCountReady(){return this.rowCountReady}dispatchRowDataUpdateStartedEvent(e){const i={type:K.EVENT_ROW_DATA_UPDATE_STARTED,firstRowData:e!=null&&e.length?e[0]:null};this.eventService.dispatchEvent(i)}updateSelection(e,i){const s=e.length>0;if(s&&this.selectionService.setNodesSelected({newValue:!1,nodes:e,suppressFinishActions:!0,source:i}),this.selectionService.updateGroupsFromChildrenSelections(i),s){const r={type:K.EVENT_SELECTION_CHANGED,source:i};this.eventService.dispatchEvent(r)}}executeAdd(e,i){var s;const{add:r,addIndex:n}=e;if(Q.missingOrEmpty(r))return;const o=r.map(a=>this.createNode(a,this.rootNode,nv.TOP_LEVEL));if(typeof n=="number"&&n>=0){const{allLeafChildren:a}=this.rootNode,l=a.length;let c=n;if(this.gos.get("treeData")&&n>0&&l>0){for(let p=0;p<l;p++)if(((s=a[p])==null?void 0:s.rowIndex)==n-1){c=p+1;break}}const d=a.slice(0,c),h=a.slice(c,a.length);this.rootNode.allLeafChildren=[...d,...o,...h]}else this.rootNode.allLeafChildren=[...this.rootNode.allLeafChildren,...o];this.rootNode.sibling&&(this.rootNode.sibling.allLeafChildren=this.rootNode.allLeafChildren),i.add=o}executeRemove(e,i,s){const{remove:r}=e;if(Q.missingOrEmpty(r))return;const n={};r.forEach(o=>{const a=this.lookupRowNode(o);a&&(a.isSelected()&&s.push(a),a.clearRowTopAndRowIndex(),n[a.id]=!0,delete this.allNodesMap[a.id],i.remove.push(a))}),this.rootNode.allLeafChildren=this.rootNode.allLeafChildren.filter(o=>!n[o.id]),this.rootNode.sibling&&(this.rootNode.sibling.allLeafChildren=this.rootNode.allLeafChildren)}executeUpdate(e,i,s){const{update:r}=e;Q.missingOrEmpty(r)||r.forEach(n=>{const o=this.lookupRowNode(n);o&&(o.updateData(n),!o.selectable&&o.isSelected()&&s.push(o),this.setMasterForRow(o,n,nv.TOP_LEVEL,!1),i.update.push(o))})}lookupRowNode(e){const i=this.gos.getCallback("getRowId");let s;if(i){const r=i({data:e,level:0});if(s=this.allNodesMap[r],!s)return console.error(`AG Grid: could not find row id=${r}, data item was not found for this id`),null}else if(s=this.rootNode.allLeafChildren.find(r=>r.data===e),!s)return console.error("AG Grid: could not find data item as object was not found",e),console.error("Consider using getRowId to help the Grid find matching row data"),null;return s||null}createNode(e,i,s){const r=new Tt(this.beans);r.group=!1,this.setMasterForRow(r,e,s,!0);const n=this.gos.get("suppressParentsInRowNodes");return i&&!n&&(r.parent=i),r.level=s,r.setDataAndId(e,this.nextId.toString()),this.allNodesMap[r.id]&&console.warn(`AG Grid: duplicate node id '${r.id}' detected from getRowId callback, this could cause issues in your grid.`),this.allNodesMap[r.id]=r,this.nextId++,r}setMasterForRow(e,i,s,r){if(this.gos.get("treeData"))e.setMaster(!1),r&&(e.expanded=!1);else{if(this.gos.get("masterDetail")){const a=this.gos.get("isRowMaster");a?e.setMaster(a(i)):e.setMaster(!0)}else e.setMaster(!1);if(r){const a=this.columnModel.getRowGroupColumns(),l=a?a.length:0,c=s+l;e.expanded=e.master?this.isExpanded(c):!1}}}isExpanded(e){const i=this.gos.get("groupDefaultExpanded");return i===-1?!0:e<i}};iD.TOP_LEVEL=0;iD.ROOT_NODE_ID="ROOT_NODE_ID";var rq=iD,en=class extends ye{constructor(){super(...arguments),this.onRowHeightChanged_debounced=Q.debounce(this.onRowHeightChanged.bind(this),100),this.rowsToDisplay=[],this.hasStarted=!1,this.shouldSkipSettingDataOnStart=!1,this.isRefreshingModel=!1,this.rowCountReady=!1}init(){const t=this.refreshModel.bind(this,{step:"group"}),e=!this.gos.get("suppressAnimationFrame"),i=this.refreshModel.bind(this,{step:"group",afterColumnsChanged:!0,keepRenderedRows:!0,animate:e});this.addManagedListener(this.eventService,K.EVENT_NEW_COLUMNS_LOADED,i),this.addManagedListener(this.eventService,K.EVENT_COLUMN_ROW_GROUP_CHANGED,t),this.addManagedListener(this.eventService,K.EVENT_COLUMN_VALUE_CHANGED,this.onValueChanged.bind(this)),this.addManagedListener(this.eventService,K.EVENT_COLUMN_PIVOT_CHANGED,this.refreshModel.bind(this,{step:"pivot"})),this.addManagedListener(this.eventService,K.EVENT_FILTER_CHANGED,this.onFilterChanged.bind(this)),this.addManagedListener(this.eventService,K.EVENT_SORT_CHANGED,this.onSortChanged.bind(this)),this.addManagedListener(this.eventService,K.EVENT_COLUMN_PIVOT_MODE_CHANGED,t),this.addManagedListener(this.eventService,K.EVENT_GRID_STYLES_CHANGED,this.onGridStylesChanges.bind(this)),this.addManagedListener(this.eventService,K.EVENT_GRID_READY,()=>this.onGridReady()),this.addPropertyListeners(),this.rootNode=new Tt(this.beans),this.nodeManager=new rq(this.rootNode,this.gos,this.eventService,this.columnModel,this.selectionService,this.beans)}addPropertyListeners(){const t=new Set(["treeData","masterDetail"]),e=new Set(["suppressParentsInRowNodes","groupDefaultExpanded","groupAllowUnbalanced","initialGroupOrderComparator","groupHideOpenParents","groupDisplayType"]),i=new Set(["excludeChildrenWhenTreeDataFiltering"]),s=new Set(["removePivotHeaderRowWhenSingleValueColumn","pivotRowTotals","pivotColumnGroupTotals","suppressExpandablePivotGroups"]),r=new Set(["getGroupRowAgg","alwaysAggregateAtRootLevel","groupIncludeTotalFooter","suppressAggFilteredOnly","grandTotalRow"]),n=new Set(["postSortRows","groupDisplayType","accentedSort"]),o=new Set([]),a=new Set(["groupRemoveSingleChildren","groupRemoveLowestSingleChildren","groupIncludeFooter","groupTotalRow"]),l=[...t,...e,...i,...s,...s,...r,...n,...o,...a];this.addManagedPropertyListeners(l,c=>{var u;const d=(u=c.changeSet)==null?void 0:u.properties;if(!d)return;const h=p=>d.some(f=>p.has(f));if(h(t)){this.setRowData(this.rootNode.allLeafChildren.map(p=>p.data));return}if(h(e)){this.refreshModel({step:"group"});return}if(h(i)){this.refreshModel({step:"filter"});return}if(h(s)){this.refreshModel({step:"pivot"});return}if(h(r)){this.refreshModel({step:"aggregate"});return}if(h(n)){this.refreshModel({step:"sort"});return}if(h(o)){this.refreshModel({step:"filter_aggregates"});return}h(a)&&this.refreshModel({step:"map"})}),this.addManagedPropertyListener("rowHeight",()=>this.resetRowHeights())}start(){this.hasStarted=!0,this.shouldSkipSettingDataOnStart?this.dispatchUpdateEventsAndRefresh():this.setInitialData()}setInitialData(){const t=this.gos.get("rowData");t&&(this.shouldSkipSettingDataOnStart=!0,this.setRowData(t))}ensureRowHeightsValid(t,e,i,s){let r,n=!1;do{r=!1;const o=this.getRowIndexAtPixel(t),a=this.getRowIndexAtPixel(e),l=Math.max(o,i),c=Math.min(a,s);for(let u=l;u<=c;u++){const d=this.getRow(u);if(d.rowHeightEstimated){const h=this.gos.getRowHeightForNode(d);d.setRowHeight(h.height),r=!0,n=!0}}r&&this.setRowTopAndRowIndex()}while(r);return n}setRowTopAndRowIndex(){const t=this.environment.getDefaultRowHeight();let e=0;const i=new Set,s=this.gos.isDomLayout("normal");for(let r=0;r<this.rowsToDisplay.length;r++){const n=this.rowsToDisplay[r];if(n.id!=null&&i.add(n.id),n.rowHeight==null){const o=this.gos.getRowHeightForNode(n,s,t);n.setRowHeight(o.height,o.estimated)}n.setRowTop(e),n.setRowIndex(r),e+=n.rowHeight}return i}clearRowTopAndRowIndex(t,e){const i=t.isActive(),s=n=>{n&&n.id!=null&&!e.has(n.id)&&n.clearRowTopAndRowIndex()},r=n=>{if(s(n),s(n.detailNode),s(n.sibling),n.hasChildren()&&n.childrenAfterGroup){const o=n.level==-1;i&&!o&&!n.expanded||n.childrenAfterGroup.forEach(r)}};r(this.rootNode)}ensureRowsAtPixel(t,e,i=0){const s=this.getRowIndexAtPixel(e),r=this.getRow(s),n=!this.gos.get("suppressAnimationFrame");return r===t[0]?!1:(t.forEach(o=>{Q.removeFromArray(this.rootNode.allLeafChildren,o)}),t.forEach((o,a)=>{Q.insertIntoArray(this.rootNode.allLeafChildren,o,Math.max(s+i,0)+a)}),this.refreshModel({step:"group",keepRenderedRows:!0,keepEditingRows:!0,animate:n}),!0)}highlightRowAtPixel(t,e){const i=e!=null?this.getRowIndexAtPixel(e):null,s=i!=null?this.getRow(i):null;if(!s||!t||s===t||e==null){this.lastHighlightedRow&&(this.lastHighlightedRow.setHighlighted(null),this.lastHighlightedRow=null);return}const r=this.getHighlightPosition(e,s);this.lastHighlightedRow&&this.lastHighlightedRow!==s&&(this.lastHighlightedRow.setHighlighted(null),this.lastHighlightedRow=null),s.setHighlighted(r),this.lastHighlightedRow=s}getHighlightPosition(t,e){if(!e){const r=this.getRowIndexAtPixel(t);if(e=this.getRow(r||0),!e)return 1}const{rowTop:i,rowHeight:s}=e;return t-i<s/2?0:1}getLastHighlightedRowNode(){return this.lastHighlightedRow}isLastRowIndexKnown(){return!0}getRowCount(){return this.rowsToDisplay?this.rowsToDisplay.length:0}getTopLevelRowCount(){if(this.rowsToDisplay&&this.rowsToDisplay[0]===this.rootNode)return 1;const e=this.rootNode.childrenAfterAggFilter;return e?e.length:0}getTopLevelRowDisplayedIndex(t){if(this.rowsToDisplay&&this.rowsToDisplay[0]===this.rootNode)return t;let i=this.rootNode.childrenAfterSort[t];if(this.gos.get("groupHideOpenParents"))for(;i.expanded&&i.childrenAfterSort&&i.childrenAfterSort.length>0;)i=i.childrenAfterSort[0];return i.rowIndex}getRowBounds(t){if(Q.missing(this.rowsToDisplay))return null;const e=this.rowsToDisplay[t];return e?{rowTop:e.rowTop,rowHeight:e.rowHeight}:null}onRowGroupOpened(){const t=this.gos.isAnimateRows();this.refreshModel({step:"map",keepRenderedRows:!0,animate:t})}onFilterChanged(t){if(t.afterDataChange)return;const e=this.gos.isAnimateRows(),s=t.columns.length===0||t.columns.some(r=>r.isPrimary())?"filter":"filter_aggregates";this.refreshModel({step:s,keepRenderedRows:!0,animate:e})}onSortChanged(){const t=this.gos.isAnimateRows();this.refreshModel({step:"sort",keepRenderedRows:!0,animate:t,keepEditingRows:!0})}getType(){return"clientSide"}onValueChanged(){this.columnModel.isPivotActive()?this.refreshModel({step:"pivot"}):this.refreshModel({step:"aggregate"})}createChangePath(t){const e=Q.missingOrEmpty(t),i=new Ug(!1,this.rootNode);return(e||this.gos.get("treeData"))&&i.setInactive(),i}isSuppressModelUpdateAfterUpdateTransaction(t){if(!this.gos.get("suppressModelUpdateAfterUpdateTransaction")||t.rowNodeTransactions==null)return!1;const e=t.rowNodeTransactions.filter(s=>s.add!=null&&s.add.length>0||s.remove!=null&&s.remove.length>0);return e==null||e.length==0}buildRefreshModelParams(t){let e="group";const i={everything:"group",group:"group",filter:"filter",map:"map",aggregate:"aggregate",sort:"sort",pivot:"pivot"};if(Q.exists(t)&&(e=i[t]),Q.missing(e)){console.error(`AG Grid: invalid step ${t}, available steps are ${Object.keys(i).join(", ")}`);return}const s=!this.gos.get("suppressAnimationFrame");return{step:e,keepRenderedRows:!0,keepEditingRows:!0,animate:s}}refreshModel(t){if(!this.hasStarted||this.isRefreshingModel||this.columnModel.shouldRowModelIgnoreRefresh())return;let e=typeof t=="object"&&"step"in t?t:this.buildRefreshModelParams(t);if(!e||this.isSuppressModelUpdateAfterUpdateTransaction(e))return;const i=this.createChangePath(e.rowNodeTransactions);switch(this.isRefreshingModel=!0,e.step){case"group":this.doRowGrouping(e.rowNodeTransactions,e.rowNodeOrder,i,!!e.afterColumnsChanged);case"filter":this.doFilter(i);case"pivot":this.doPivot(i);case"aggregate":this.doAggregate(i);case"filter_aggregates":this.doFilterAggregates(i);case"sort":this.doSort(e.rowNodeTransactions,i);case"map":this.doRowsToDisplay()}const s=this.setRowTopAndRowIndex();this.clearRowTopAndRowIndex(i,s),this.isRefreshingModel=!1;const r={type:K.EVENT_MODEL_UPDATED,animate:e.animate,keepRenderedRows:e.keepRenderedRows,newData:e.newData,newPage:!1,keepUndoRedoStack:e.keepUndoRedoStack};this.eventService.dispatchEvent(r)}isEmpty(){const t=Q.missing(this.rootNode.allLeafChildren)||this.rootNode.allLeafChildren.length===0;return Q.missing(this.rootNode)||t||!this.columnModel.isReady()}isRowsToRender(){return Q.exists(this.rowsToDisplay)&&this.rowsToDisplay.length>0}getNodesInRangeForSelection(t,e){let i=!e,s=!1;const r=[],n=this.gos.get("groupSelectsChildren");return this.forEachNodeAfterFilterAndSort(o=>{if(s)return;if(i&&(o===e||o===t)&&(s=!0,o.group&&n)){r.push(...o.allLeafChildren);return}if(!i){if(o!==e&&o!==t)return;i=!0}if(!o.group||!n){r.push(o);return}}),r}setDatasource(t){console.error("AG Grid: should never call setDatasource on clientSideRowController")}getTopLevelNodes(){return this.rootNode?this.rootNode.childrenAfterGroup:null}getRootNode(){return this.rootNode}getRow(t){return this.rowsToDisplay[t]}isRowPresent(t){return this.rowsToDisplay.indexOf(t)>=0}getRowIndexAtPixel(t){if(this.isEmpty()||this.rowsToDisplay.length===0)return-1;let e=0,i=this.rowsToDisplay.length-1;if(t<=0)return 0;if(Q.last(this.rowsToDisplay).rowTop<=t)return this.rowsToDisplay.length-1;let r=-1,n=-1;for(;;){const o=Math.floor((e+i)/2),a=this.rowsToDisplay[o];if(this.isRowInPixel(a,t)||(a.rowTop<t?e=o+1:a.rowTop>t&&(i=o-1),r===e&&n===i))return o;r=e,n=i}}isRowInPixel(t,e){const i=t.rowTop,s=t.rowTop+t.rowHeight;return i<=e&&s>e}forEachLeafNode(t){this.rootNode.allLeafChildren&&this.rootNode.allLeafChildren.forEach((e,i)=>t(e,i))}forEachNode(t,e=!1){this.recursivelyWalkNodesAndCallback({nodes:[...this.rootNode.childrenAfterGroup||[]],callback:t,recursionType:0,index:0,includeFooterNodes:e})}forEachNodeAfterFilter(t,e=!1){this.recursivelyWalkNodesAndCallback({nodes:[...this.rootNode.childrenAfterAggFilter||[]],callback:t,recursionType:1,index:0,includeFooterNodes:e})}forEachNodeAfterFilterAndSort(t,e=!1){this.recursivelyWalkNodesAndCallback({nodes:[...this.rootNode.childrenAfterSort||[]],callback:t,recursionType:2,index:0,includeFooterNodes:e})}forEachPivotNode(t,e=!1){this.recursivelyWalkNodesAndCallback({nodes:[this.rootNode],callback:t,recursionType:3,index:0,includeFooterNodes:e})}recursivelyWalkNodesAndCallback(t){const{nodes:e,callback:i,recursionType:s,includeFooterNodes:r}=t;let{index:n}=t;const o=a=>{var l;const c=(l=e[0])==null?void 0:l.parent;if(!c)return;const u=r&&this.gos.getGrandTotalRow(),d=this.gos.getGroupTotalRowCallback(),h=r&&d({node:c});if(c===this.rootNode){u===a&&(c.createFooter(),i(c.sibling,n++));return}h===a&&(c.createFooter(),i(c.sibling,n++))};o("top");for(let a=0;a<e.length;a++){const l=e[a];if(i(l,n++),l.hasChildren()&&!l.footer){let c=null;switch(s){case 0:c=l.childrenAfterGroup;break;case 1:c=l.childrenAfterAggFilter;break;case 2:c=l.childrenAfterSort;break;case 3:c=l.leafGroup?null:l.childrenAfterSort;break}c&&(n=this.recursivelyWalkNodesAndCallback({nodes:[...c],callback:i,recursionType:s,index:n,includeFooterNodes:r}))}}return o("bottom"),n}doAggregate(t){var e;(e=this.aggregationStage)==null||e.execute({rowNode:this.rootNode,changedPath:t})}doFilterAggregates(t){this.filterAggregatesStage?this.filterAggregatesStage.execute({rowNode:this.rootNode,changedPath:t}):this.rootNode.childrenAfterAggFilter=this.rootNode.childrenAfterFilter}expandOrCollapseAll(t){const e=this.gos.get("treeData"),i=this.columnModel.isPivotActive(),s=o=>{o&&o.forEach(a=>{const l=()=>{a.expanded=t,s(a.childrenAfterGroup)};if(e){Q.exists(a.childrenAfterGroup)&&l();return}if(i){!a.leafGroup&&l();return}a.group&&l()})};this.rootNode&&s(this.rootNode.childrenAfterGroup),this.refreshModel({step:"map"});const r=t?"expandAll":"collapseAll",n={type:K.EVENT_EXPAND_COLLAPSE_ALL,source:r};this.eventService.dispatchEvent(n)}doSort(t,e){this.sortStage.execute({rowNode:this.rootNode,rowNodeTransactions:t,changedPath:e})}doRowGrouping(t,e,i,s){if(this.groupStage){if(t?this.groupStage.execute({rowNode:this.rootNode,rowNodeTransactions:t,rowNodeOrder:e,changedPath:i}):this.groupStage.execute({rowNode:this.rootNode,changedPath:i,afterColumnsChanged:s}),this.gos.get("groupSelectsChildren")&&this.selectionService.updateGroupsFromChildrenSelections("rowGroupChanged",i)){const n={type:K.EVENT_SELECTION_CHANGED,source:"rowGroupChanged"};this.eventService.dispatchEvent(n)}}else this.rootNode.childrenAfterGroup=this.rootNode.allLeafChildren,this.rootNode.sibling&&(this.rootNode.sibling.childrenAfterGroup=this.rootNode.childrenAfterGroup),this.rootNode.updateHasChildren();this.nodeManager.isRowCountReady()&&(this.rowCountReady=!0,this.eventService.dispatchEventOnce({type:K.EVENT_ROW_COUNT_READY}))}doFilter(t){this.filterStage.execute({rowNode:this.rootNode,changedPath:t})}doPivot(t){var e;(e=this.pivotStage)==null||e.execute({rowNode:this.rootNode,changedPath:t})}getCopyOfNodesMap(){return this.nodeManager.getCopyOfNodesMap()}getRowNode(t){if(typeof t=="string"&&t.indexOf(Tt.ID_PREFIX_ROW_GROUP)==0){let i;return this.forEachNode(s=>{s.id===t&&(i=s)}),i}return this.nodeManager.getRowNode(t)}setRowData(t){this.selectionService.reset("rowDataChanged"),this.nodeManager.setRowData(t),this.hasStarted&&this.dispatchUpdateEventsAndRefresh()}dispatchUpdateEventsAndRefresh(){const t={type:K.EVENT_ROW_DATA_UPDATED};this.eventService.dispatchEvent(t),this.refreshModel({step:"group",newData:!0})}batchUpdateRowData(t,e){if(this.applyAsyncTransactionsTimeout==null){this.rowDataTransactionBatch=[];const i=this.gos.getAsyncTransactionWaitMillis();this.applyAsyncTransactionsTimeout=window.setTimeout(()=>{this.executeBatchUpdateRowData()},i)}this.rowDataTransactionBatch.push({rowDataTransaction:t,callback:e})}flushAsyncTransactions(){this.applyAsyncTransactionsTimeout!=null&&(clearTimeout(this.applyAsyncTransactionsTimeout),this.executeBatchUpdateRowData())}executeBatchUpdateRowData(){this.valueCache.onDataChanged();const t=[],e=[];let i=!1;if(this.rowDataTransactionBatch&&this.rowDataTransactionBatch.forEach(s=>{const r=this.nodeManager.updateRowData(s.rowDataTransaction,void 0);e.push(r),s.callback&&t.push(s.callback.bind(null,r)),typeof s.rowDataTransaction.addIndex=="number"&&(i=!0)}),this.commonUpdateRowData(e,void 0,i),t.length>0&&window.setTimeout(()=>{t.forEach(s=>s())},0),e.length>0){const s={type:K.EVENT_ASYNC_TRANSACTIONS_FLUSHED,results:e};this.eventService.dispatchEvent(s)}this.rowDataTransactionBatch=null,this.applyAsyncTransactionsTimeout=void 0}updateRowData(t,e){this.valueCache.onDataChanged();const i=this.nodeManager.updateRowData(t,e),s=typeof t.addIndex=="number";return this.commonUpdateRowData([i],e,s),i}createRowNodeOrder(){if(this.gos.get("suppressMaintainUnsortedOrder"))return;const e={};if(this.rootNode&&this.rootNode.allLeafChildren)for(let i=0;i<this.rootNode.allLeafChildren.length;i++){const s=this.rootNode.allLeafChildren[i];e[s.id]=i}return e}commonUpdateRowData(t,e,i){if(!this.hasStarted)return;const s=!this.gos.get("suppressAnimationFrame");i&&(e=this.createRowNodeOrder());const r={type:K.EVENT_ROW_DATA_UPDATED};this.eventService.dispatchEvent(r),this.refreshModel({step:"group",rowNodeTransactions:t,rowNodeOrder:e,keepRenderedRows:!0,keepEditingRows:!0,animate:s})}doRowsToDisplay(){this.rowsToDisplay=this.flattenStage.execute({rowNode:this.rootNode})}onRowHeightChanged(){this.refreshModel({step:"map",keepRenderedRows:!0,keepEditingRows:!0,keepUndoRedoStack:!0})}onRowHeightChangedDebounced(){this.onRowHeightChanged_debounced()}resetRowHeights(){const t=this.resetRowHeightsForAllRowNodes();this.rootNode.setRowHeight(this.rootNode.rowHeight,!0),this.rootNode.sibling&&this.rootNode.sibling.setRowHeight(this.rootNode.sibling.rowHeight,!0),t&&this.onRowHeightChanged()}resetRowHeightsForAllRowNodes(){let t=!1;return this.forEachNode(e=>{e.setRowHeight(e.rowHeight,!0);const i=e.detailNode;i&&i.setRowHeight(i.rowHeight,!0),e.sibling&&e.sibling.setRowHeight(e.sibling.rowHeight,!0),t=!0}),t}onGridStylesChanges(){this.columnModel.isAutoRowHeightActive()||this.resetRowHeights()}onGridReady(){this.hasStarted||this.setInitialData()}isRowDataLoaded(){return this.rowCountReady}};z([W("columnModel")],en.prototype,"columnModel",2);z([W("selectionService")],en.prototype,"selectionService",2);z([W("valueCache")],en.prototype,"valueCache",2);z([W("beans")],en.prototype,"beans",2);z([W("filterStage")],en.prototype,"filterStage",2);z([W("sortStage")],en.prototype,"sortStage",2);z([W("flattenStage")],en.prototype,"flattenStage",2);z([Vt("groupStage")],en.prototype,"groupStage",2);z([Vt("aggregationStage")],en.prototype,"aggregationStage",2);z([Vt("pivotStage")],en.prototype,"pivotStage",2);z([Vt("filterAggregatesStage")],en.prototype,"filterAggregatesStage",2);z([de],en.prototype,"init",1);en=z([Me("rowModel")],en);var Jw=class extends ye{execute(t){const{changedPath:e}=t;this.filterService.filter(e)}};z([W("filterService")],Jw.prototype,"filterService",2);Jw=z([Me("filterStage")],Jw);var Ey=class extends ye{execute(t){const e=this.sortController.getSortOptions(),i=Q.exists(e)&&e.length>0,s=i&&Q.exists(t.rowNodeTransactions)&&this.gos.get("deltaSort"),r=e.some(n=>this.gos.isColumnsSortingCoupledToGroup()?n.column.isPrimary()&&n.column.isRowGroupActive():!!n.column.getColDef().showRowGroup);this.sortService.sort(e,i,s,t.rowNodeTransactions,t.changedPath,r)}};z([W("sortService")],Ey.prototype,"sortService",2);z([W("sortController")],Ey.prototype,"sortController",2);Ey=z([Me("sortStage")],Ey);var Qw=class extends ye{execute(t){const e=t.rowNode,i=[],s=this.beans.columnModel.isPivotMode(),r=s&&e.leafGroup,n=r?[e]:e.childrenAfterSort,o=this.getFlattenDetails();this.recursivelyAddToRowsToDisplay(o,n,i,s,0);const a=i.length>0;if(!r&&a&&o.grandTotalRow){e.createFooter();const c=o.grandTotalRow==="top";this.addRowNodeToRowsToDisplay(o,e.sibling,i,0,c)}return i}getFlattenDetails(){const t=this.gos.get("groupRemoveSingleChildren");return{groupRemoveLowestSingleChildren:!t&&this.gos.get("groupRemoveLowestSingleChildren"),groupRemoveSingleChildren:t,isGroupMultiAutoColumn:this.gos.isGroupMultiAutoColumn(),hideOpenParents:this.gos.get("groupHideOpenParents"),grandTotalRow:this.gos.getGrandTotalRow(),groupTotalRow:this.gos.getGroupTotalRowCallback()}}recursivelyAddToRowsToDisplay(t,e,i,s,r){if(!Q.missingOrEmpty(e))for(let n=0;n<e.length;n++){const o=e[n],a=o.hasChildren(),l=s&&!a,c=t.groupRemoveSingleChildren&&a&&o.childrenAfterGroup.length===1,u=t.groupRemoveLowestSingleChildren&&a&&o.leafGroup&&o.childrenAfterGroup.length===1,d=s&&o.leafGroup,h=t.hideOpenParents&&o.expanded&&!o.master&&!d;if(!l&&!h&&!c&&!u&&this.addRowNodeToRowsToDisplay(t,o,i,r),!(s&&o.leafGroup)){if(a){const f=c||u;if(o.expanded||f){const m=t.groupTotalRow({node:o});m||o.destroyFooter();const g=f?r:r+1;m==="top"&&(o.createFooter(),this.addRowNodeToRowsToDisplay(t,o.sibling,i,g)),this.recursivelyAddToRowsToDisplay(t,o.childrenAfterSort,i,s,g),m==="bottom"&&(o.createFooter(),this.addRowNodeToRowsToDisplay(t,o.sibling,i,g))}}else if(o.master&&o.expanded){const f=this.createDetailNode(o);this.addRowNodeToRowsToDisplay(t,f,i,r)}}}}addRowNodeToRowsToDisplay(t,e,i,s,r){r?i.unshift(e):i.push(e),e.setUiLevel(t.isGroupMultiAutoColumn?0:s)}createDetailNode(t){if(Q.exists(t.detailNode))return t.detailNode;const e=new Tt(this.beans);return e.detail=!0,e.selectable=!1,e.parent=t,Q.exists(t.id)&&(e.id="detail_"+t.id),e.data=t.data,e.level=t.level+1,t.detailNode=e,e}};z([W("beans")],Qw.prototype,"beans",2);Qw=z([Me("flattenStage")],Qw);var Ty=class extends ye{sort(t,e,i,s,r,n){const o=this.gos.get("groupMaintainOrder"),a=this.columnModel.getAllGridColumns().some(h=>h.isRowGroupActive());let l={};i&&s&&(l=this.calculateDirtyNodes(s));const c=this.columnModel.isPivotMode(),u=this.gos.getCallback("postSortRows"),d=h=>{var p;this.pullDownGroupDataForHideOpenParents(h.childrenAfterAggFilter,!0);const f=c&&h.leafGroup;if(o&&a&&!h.leafGroup&&!n){const g=(p=this.columnModel.getRowGroupColumns())==null?void 0:p[h.level+1],y=(g==null?void 0:g.getSort())===null,v=h.childrenAfterAggFilter.slice(0);if(h.childrenAfterSort&&!y){const C={};h.childrenAfterSort.forEach((b,T)=>{C[b.id]=T}),v.sort((b,T)=>{var A,I;return((A=C[b.id])!=null?A:0)-((I=C[T.id])!=null?I:0)})}h.childrenAfterSort=v}else!e||f?h.childrenAfterSort=h.childrenAfterAggFilter.slice(0):i?h.childrenAfterSort=this.doDeltaSort(h,l,r,t):h.childrenAfterSort=this.rowNodeSorter.doFullSort(h.childrenAfterAggFilter,t);if(h.sibling&&(h.sibling.childrenAfterSort=h.childrenAfterSort),this.updateChildIndexes(h),u){const g={nodes:h.childrenAfterSort};u(g)}};r&&r.forEachChangedNodeDepthFirst(d),this.updateGroupDataForHideOpenParents(r)}calculateDirtyNodes(t){const e={},i=s=>{s&&s.forEach(r=>e[r.id]=!0)};return t&&t.forEach(s=>{i(s.add),i(s.update),i(s.remove)}),e}doDeltaSort(t,e,i,s){const r=t.childrenAfterAggFilter,n=t.childrenAfterSort;if(!n)return this.rowNodeSorter.doFullSort(r,s);const o={},a=[];r.forEach(d=>{e[d.id]||!i.canSkip(d)?a.push(d):o[d.id]=!0});const l=n.filter(d=>o[d.id]),c=(d,h)=>({currentPos:h,rowNode:d}),u=a.map(c).sort((d,h)=>this.rowNodeSorter.compareRowNodes(s,d,h));return this.mergeSortedArrays(s,u,l.map(c)).map(({rowNode:d})=>d)}mergeSortedArrays(t,e,i){const s=[];let r=0,n=0;for(;r<e.length&&n<i.length;)this.rowNodeSorter.compareRowNodes(t,e[r],i[n])<0?s.push(e[r++]):s.push(i[n++]);for(;r<e.length;)s.push(e[r++]);for(;n<i.length;)s.push(i[n++]);return s}updateChildIndexes(t){if(Q.missing(t.childrenAfterSort))return;const e=t.childrenAfterSort;for(let i=0;i<e.length;i++){const s=e[i],r=i===0,n=i===t.childrenAfterSort.length-1;s.setFirstChild(r),s.setLastChild(n),s.setChildIndex(i)}}updateGroupDataForHideOpenParents(t){if(!this.gos.get("groupHideOpenParents"))return;if(this.gos.get("treeData"))return Q.warnOnce("The property hideOpenParents dose not work with Tree Data. This is because Tree Data has values at the group level, it doesn't make sense to hide them."),!1;const e=i=>{this.pullDownGroupDataForHideOpenParents(i.childrenAfterSort,!1),i.childrenAfterSort.forEach(s=>{s.hasChildren()&&e(s)})};t&&t.executeFromRootNode(i=>e(i))}pullDownGroupDataForHideOpenParents(t,e){!this.gos.get("groupHideOpenParents")||Q.missing(t)||t.forEach(i=>{this.columnModel.getGroupDisplayColumns().forEach(r=>{const n=r.getColDef().showRowGroup;if(typeof n!="string"){console.error("AG Grid: groupHideOpenParents only works when specifying specific columns for colDef.showRowGroup");return}const o=n,a=this.columnModel.getPrimaryColumn(o);if(a!==i.rowGroupColumn)if(e)i.setGroupValue(r.getId(),void 0);else{const c=i.getFirstChildOfFirstChild(a);c&&i.setGroupValue(r.getId(),c.key)}})})}};z([W("columnModel")],Ty.prototype,"columnModel",2);z([W("rowNodeSorter")],Ty.prototype,"rowNodeSorter",2);Ty=z([Me("sortService")],Ty);var eS=class extends ye{filter(t){const e=this.filterManager.isChildFilterPresent();this.filterNodes(e,t)}filterNodes(t,e){const i=(s,r)=>{s.hasChildren()&&t&&!r?s.childrenAfterFilter=s.childrenAfterGroup.filter(n=>{const o=n.childrenAfterFilter&&n.childrenAfterFilter.length>0,a=n.data&&this.filterManager.doesRowPassFilter({rowNode:n});return o||a}):s.childrenAfterFilter=s.childrenAfterGroup,s.sibling&&(s.sibling.childrenAfterFilter=s.childrenAfterFilter)};if(this.doingTreeDataFiltering()){const s=(n,o)=>{if(n.childrenAfterGroup)for(let a=0;a<n.childrenAfterGroup.length;a++){const l=n.childrenAfterGroup[a],c=o||this.filterManager.doesRowPassFilter({rowNode:l});l.childrenAfterGroup?s(n.childrenAfterGroup[a],c):i(l,c)}i(n,o)},r=n=>s(n,!1);e.executeFromRootNode(r)}else{const s=r=>i(r,!1);e.forEachChangedNodeDepthFirst(s,!0)}}doingTreeDataFiltering(){return this.gos.get("treeData")&&!this.gos.get("excludeChildrenWhenTreeDataFiltering")}};z([W("filterManager")],eS.prototype,"filterManager",2);eS=z([Me("filterService")],eS);var Fh=class extends ye{postConstruct(){this.rowModel.getType()==="clientSide"&&(this.clientSideRowModel=this.rowModel,this.addManagedPropertyListener("rowData",()=>this.onRowDataUpdated()))}isActive(){const t=this.gos.exists("getRowId");return this.gos.get("resetRowDataOnUpdate")?!1:t}setRowData(t){const e=this.createTransactionForRowData(t);if(!e)return;const[i,s]=e;this.clientSideRowModel.updateRowData(i,s)}createTransactionForRowData(t){if(Q.missing(this.clientSideRowModel)){console.error("AG Grid: ImmutableService only works with ClientSideRowModel");return}const e=this.gos.getCallback("getRowId");if(e==null){console.error("AG Grid: ImmutableService requires getRowId() callback to be implemented, your row data needs IDs!");return}const i={remove:[],update:[],add:[]},s=this.clientSideRowModel.getCopyOfNodesMap(),n=this.gos.get("suppressMaintainUnsortedOrder")?void 0:{};return Q.exists(t)&&t.forEach((o,a)=>{const l=e({data:o,level:0}),c=s[l];n&&(n[l]=a),c?(c.data!==o&&i.update.push(o),s[l]=void 0):i.add.push(o)}),Q.iterateObject(s,(o,a)=>{a&&i.remove.push(a.data)}),[i,n]}onRowDataUpdated(){const t=this.gos.get("rowData");t&&(this.isActive()?this.setRowData(t):(this.selectionService.reset("rowDataChanged"),this.clientSideRowModel.setRowData(t)))}};z([W("rowModel")],Fh.prototype,"rowModel",2);z([W("rowRenderer")],Fh.prototype,"rowRenderer",2);z([W("selectionService")],Fh.prototype,"selectionService",2);z([de],Fh.prototype,"postConstruct",1);Fh=z([Me("immutableService")],Fh);var nq="31.3.4",f5={version:nq,moduleName:"@ag-grid-community/client-side-row-model",rowModel:"clientSide",beans:[en,Jw,Ey,Qw,Ty,eS,Fh]},oq=Object.defineProperty,aq=Object.getOwnPropertyDescriptor,nn=(t,e,i,s)=>{for(var r=s>1?void 0:s?aq(e,i):e,n=t.length-1,o;n>=0;n--)(o=t[n])&&(r=(s?o(e,i,r):o(r))||r);return s&&r&&oq(e,i,r),r},lq=(t,e)=>(i,s)=>e(i,s,t),_y=class extends za{constructor(t,e,i){super(t),this.parentCache=e,this.params=i,this.startRow=t*i.blockSize,this.endRow=this.startRow+i.blockSize}postConstruct(){this.createRowNodes()}getBlockStateJson(){return{id:""+this.getId(),state:{blockNumber:this.getId(),startRow:this.getStartRow(),endRow:this.getEndRow(),pageStatus:this.getState()}}}setDataAndId(t,e,i){Q.exists(e)?t.setDataAndId(e,i.toString()):t.setDataAndId(void 0,void 0)}loadFromDatasource(){const t=this.createLoadParams();if(Q.missing(this.params.datasource.getRows)){console.warn("AG Grid: datasource is missing getRows method");return}window.setTimeout(()=>{this.params.datasource.getRows(t)},0)}processServerFail(){}createLoadParams(){return{startRow:this.getStartRow(),endRow:this.getEndRow(),successCallback:this.pageLoaded.bind(this,this.getVersion()),failCallback:this.pageLoadFailed.bind(this,this.getVersion()),sortModel:this.params.sortModel,filterModel:this.params.filterModel,context:this.gos.getGridCommonParams().context}}forEachNode(t,e,i){this.rowNodes.forEach((s,r)=>{this.startRow+r<i&&t(s,e.next())})}getLastAccessed(){return this.lastAccessed}getRow(t,e=!1){e||(this.lastAccessed=this.params.lastAccessedSequence.next());const i=t-this.startRow;return this.rowNodes[i]}getStartRow(){return this.startRow}getEndRow(){return this.endRow}createRowNodes(){this.rowNodes=[];for(let t=0;t<this.params.blockSize;t++){const e=this.startRow+t,i=new Tt(this.beans);i.setRowHeight(this.params.rowHeight),i.uiLevel=0,i.setRowIndex(e),i.setRowTop(this.params.rowHeight*e),this.rowNodes.push(i)}}processServerResult(t){this.rowNodes.forEach((i,s)=>{const r=t.rowData?t.rowData[s]:void 0;!i.id&&i.alreadyRendered&&r&&(this.rowNodes[s]=new Tt(this.beans),this.rowNodes[s].setRowIndex(i.rowIndex),this.rowNodes[s].setRowTop(i.rowTop),this.rowNodes[s].setRowHeight(i.rowHeight),i.clearRowTopAndRowIndex()),this.setDataAndId(this.rowNodes[s],r,this.startRow+s)});const e=t.rowCount!=null&&t.rowCount>=0?t.rowCount:void 0;this.parentCache.pageLoaded(this,e)}destroyRowNodes(){this.rowNodes.forEach(t=>{t.clearRowTopAndRowIndex()})}};nn([W("beans")],_y.prototype,"beans",2);nn([de],_y.prototype,"postConstruct",1);nn([Hi],_y.prototype,"destroyRowNodes",1);var Xg=class g5 extends ye{constructor(e){super(),this.lastRowIndexKnown=!1,this.blocks={},this.blockCount=0,this.rowCount=e.initialRowCount,this.params=e}setBeans(e){this.logger=e.create("InfiniteCache")}getRow(e,i=!1){const s=Math.floor(e/this.params.blockSize);let r=this.blocks[s];if(!r){if(i)return;r=this.createBlock(s)}return r.getRow(e)}createBlock(e){const i=this.createBean(new _y(e,this,this.params));return this.blocks[i.getId()]=i,this.blockCount++,this.purgeBlocksIfNeeded(i),this.params.rowNodeBlockLoader.addBlock(i),i}refreshCache(){if(this.blockCount==0){this.purgeCache();return}this.getBlocksInOrder().forEach(i=>i.setStateWaitingToLoad()),this.params.rowNodeBlockLoader.checkBlockToLoad()}destroyAllBlocks(){this.getBlocksInOrder().forEach(e=>this.destroyBlock(e))}getRowCount(){return this.rowCount}isLastRowIndexKnown(){return this.lastRowIndexKnown}pageLoaded(e,i){this.isAlive()&&(this.logger.log(`onPageLoaded: page = ${e.getId()}, lastRow = ${i}`),this.checkRowCount(e,i),this.onCacheUpdated())}purgeBlocksIfNeeded(e){const i=this.getBlocksInOrder().filter(a=>a!=e),s=(a,l)=>l.getLastAccessed()-a.getLastAccessed();i.sort(s);const r=this.params.maxBlocksInCache>0,n=r?this.params.maxBlocksInCache-1:null,o=g5.MAX_EMPTY_BLOCKS_TO_KEEP-1;i.forEach((a,l)=>{const c=a.getState()===_y.STATE_WAITING_TO_LOAD&&l>=o,u=r?l>=n:!1;if(c||u){if(this.isBlockCurrentlyDisplayed(a)||this.isBlockFocused(a))return;this.removeBlockFromCache(a)}})}isBlockFocused(e){const i=this.focusService.getFocusCellToUseAfterRefresh();if(!i||i.rowPinned!=null)return!1;const s=e.getStartRow(),r=e.getEndRow();return i.rowIndex>=s&&i.rowIndex<r}isBlockCurrentlyDisplayed(e){const i=e.getStartRow(),s=e.getEndRow()-1;return this.rowRenderer.isRangeInRenderedViewport(i,s)}removeBlockFromCache(e){e&&this.destroyBlock(e)}checkRowCount(e,i){if(typeof i=="number"&&i>=0)this.rowCount=i,this.lastRowIndexKnown=!0;else if(!this.lastRowIndexKnown){const r=(e.getId()+1)*this.params.blockSize+this.params.overflowSize;this.rowCount<r&&(this.rowCount=r)}}setRowCount(e,i){this.rowCount=e,Q.exists(i)&&(this.lastRowIndexKnown=i),this.lastRowIndexKnown||this.rowCount%this.params.blockSize===0&&this.rowCount++,this.onCacheUpdated()}forEachNodeDeep(e){const i=new pr;this.getBlocksInOrder().forEach(s=>s.forEachNode(e,i,this.rowCount))}getBlocksInOrder(){const e=(s,r)=>s.getId()-r.getId();return Q.getAllValuesInObject(this.blocks).sort(e)}destroyBlock(e){delete this.blocks[e.getId()],this.destroyBean(e),this.blockCount--,this.params.rowNodeBlockLoader.removeBlock(e)}onCacheUpdated(){if(this.isAlive()){this.destroyAllBlocksPastVirtualRowCount();const e={type:K.EVENT_STORE_UPDATED};this.eventService.dispatchEvent(e)}}destroyAllBlocksPastVirtualRowCount(){const e=[];this.getBlocksInOrder().forEach(i=>{i.getId()*this.params.blockSize>=this.rowCount&&e.push(i)}),e.length>0&&e.forEach(i=>this.destroyBlock(i))}purgeCache(){this.getBlocksInOrder().forEach(e=>this.removeBlockFromCache(e)),this.lastRowIndexKnown=!1,this.rowCount===0&&(this.rowCount=this.params.initialRowCount),this.onCacheUpdated()}getRowNodesInRange(e,i){const s=[];let r=-1,n=!1;const o=new pr;Q.missing(e)&&(n=!0);let a=!1;return this.getBlocksInOrder().forEach(c=>{if(!a){if(n&&r+1!==c.getId()){a=!0;return}r=c.getId(),c.forEachNode(u=>{const d=u===e||u===i;(n||d)&&s.push(u),d&&(n=!n)},o,this.rowCount)}}),a||n?[]:s}};Xg.MAX_EMPTY_BLOCKS_TO_KEEP=2;nn([W("rowRenderer")],Xg.prototype,"rowRenderer",2);nn([W("focusService")],Xg.prototype,"focusService",2);nn([lq(0,Zn("loggerFactory"))],Xg.prototype,"setBeans",1);nn([Hi],Xg.prototype,"destroyAllBlocks",1);var cq=Xg,cl=class extends ye{getRowBounds(t){return{rowHeight:this.rowHeight,rowTop:this.rowHeight*t}}ensureRowHeightsValid(t,e,i,s){return!1}init(){this.gos.isRowModelType("infinite")&&(this.rowHeight=this.gos.getRowHeightAsNumber(),this.addEventListeners(),this.addDestroyFunc(()=>this.destroyCache()),this.verifyProps())}verifyProps(){this.gos.exists("initialGroupOrderComparator")&&Q.warnOnce("initialGroupOrderComparator cannot be used with Infinite Row Model as sorting is done on the server side")}start(){this.setDatasource(this.gos.get("datasource"))}destroyDatasource(){this.datasource&&(this.getContext().destroyBean(this.datasource),this.rowRenderer.datasourceChanged(),this.datasource=null)}addEventListeners(){this.addManagedListener(this.eventService,K.EVENT_FILTER_CHANGED,this.onFilterChanged.bind(this)),this.addManagedListener(this.eventService,K.EVENT_SORT_CHANGED,this.onSortChanged.bind(this)),this.addManagedListener(this.eventService,K.EVENT_NEW_COLUMNS_LOADED,this.onColumnEverything.bind(this)),this.addManagedListener(this.eventService,K.EVENT_STORE_UPDATED,this.onCacheUpdated.bind(this)),this.addManagedPropertyListener("datasource",()=>this.setDatasource(this.gos.get("datasource"))),this.addManagedPropertyListener("cacheBlockSize",()=>this.resetCache()),this.addManagedPropertyListener("rowHeight",()=>{this.rowHeight=this.gos.getRowHeightAsNumber(),this.cacheParams.rowHeight=this.rowHeight,this.updateRowHeights()})}onFilterChanged(){this.reset()}onSortChanged(){this.reset()}onColumnEverything(){let t;this.cacheParams?t=this.isSortModelDifferent():t=!0,t&&this.reset()}isSortModelDifferent(){return!Q.jsonEquals(this.cacheParams.sortModel,this.sortController.getSortModel())}getType(){return"infinite"}setDatasource(t){this.destroyDatasource(),this.datasource=t,t&&this.reset()}isEmpty(){return!this.infiniteCache}isRowsToRender(){return!!this.infiniteCache}getNodesInRangeForSelection(t,e){return this.infiniteCache?this.infiniteCache.getRowNodesInRange(t,e):[]}reset(){if(!this.datasource)return;this.gos.getCallback("getRowId")!=null||this.selectionService.reset("rowDataChanged"),this.resetCache()}createModelUpdatedEvent(){return{type:K.EVENT_MODEL_UPDATED,newPage:!1,newPageSize:!1,newData:!1,keepRenderedRows:!0,animate:!1}}resetCache(){this.destroyCache(),this.cacheParams={datasource:this.datasource,filterModel:this.filterManager.getFilterModel(),sortModel:this.sortController.getSortModel(),rowNodeBlockLoader:this.rowNodeBlockLoader,initialRowCount:this.gos.get("infiniteInitialRowCount"),maxBlocksInCache:this.gos.get("maxBlocksInCache"),rowHeight:this.gos.getRowHeightAsNumber(),overflowSize:this.gos.get("cacheOverflowSize"),blockSize:this.gos.get("cacheBlockSize"),lastAccessedSequence:new pr},this.infiniteCache=this.createBean(new cq(this.cacheParams)),this.eventService.dispatchEventOnce({type:K.EVENT_ROW_COUNT_READY});const t=this.createModelUpdatedEvent();this.eventService.dispatchEvent(t)}updateRowHeights(){this.forEachNode(e=>{e.setRowHeight(this.rowHeight),e.setRowTop(this.rowHeight*e.rowIndex)});const t=this.createModelUpdatedEvent();this.eventService.dispatchEvent(t)}destroyCache(){this.infiniteCache&&(this.infiniteCache=this.destroyBean(this.infiniteCache))}onCacheUpdated(){const t=this.createModelUpdatedEvent();this.eventService.dispatchEvent(t)}getRow(t){if(this.infiniteCache&&!(t>=this.infiniteCache.getRowCount()))return this.infiniteCache.getRow(t)}getRowNode(t){let e;return this.forEachNode(i=>{i.id===t&&(e=i)}),e}forEachNode(t){this.infiniteCache&&this.infiniteCache.forEachNodeDeep(t)}getTopLevelRowCount(){return this.getRowCount()}getTopLevelRowDisplayedIndex(t){return t}getRowIndexAtPixel(t){if(this.rowHeight!==0){const e=Math.floor(t/this.rowHeight),i=this.getRowCount()-1;return e>i?i:e}return 0}getRowCount(){return this.infiniteCache?this.infiniteCache.getRowCount():0}isRowPresent(t){return!!this.getRowNode(t.id)}refreshCache(){this.infiniteCache&&this.infiniteCache.refreshCache()}purgeCache(){this.infiniteCache&&this.infiniteCache.purgeCache()}isLastRowIndexKnown(){return this.infiniteCache?this.infiniteCache.isLastRowIndexKnown():!1}setRowCount(t,e){this.infiniteCache&&this.infiniteCache.setRowCount(t,e)}};nn([W("filterManager")],cl.prototype,"filterManager",2);nn([W("sortController")],cl.prototype,"sortController",2);nn([W("selectionService")],cl.prototype,"selectionService",2);nn([W("rowRenderer")],cl.prototype,"rowRenderer",2);nn([W("rowNodeBlockLoader")],cl.prototype,"rowNodeBlockLoader",2);nn([de],cl.prototype,"init",1);nn([Hi],cl.prototype,"destroyDatasource",1);cl=nn([Me("rowModel")],cl);var uq="31.3.4",m5={version:uq,moduleName:"@ag-grid-community/infinite-row-model",rowModel:"infinite",beans:[cl]},v5=Object.defineProperty,dq=Object.defineProperties,hq=Object.getOwnPropertyDescriptor,pq=Object.getOwnPropertyDescriptors,SF=Object.getOwnPropertySymbols,fq=Object.prototype.hasOwnProperty,gq=Object.prototype.propertyIsEnumerable,xF=(t,e,i)=>e in t?v5(t,e,{enumerable:!0,configurable:!0,writable:!0,value:i}):t[e]=i,y5=(t,e)=>{for(var i in e||(e={}))fq.call(e,i)&&xF(t,i,e[i]);if(SF)for(var i of SF(e))gq.call(e,i)&&xF(t,i,e[i]);return t},C5=(t,e)=>dq(t,pq(e)),Bn=(t,e,i,s)=>{for(var r=s>1?void 0:s?hq(e,i):e,n=t.length-1,o;n>=0;n--)(o=t[n])&&(r=(s?o(e,i,r):o(r))||r);return s&&r&&v5(e,i,r),r},Ay=(t,e,i)=>new Promise((s,r)=>{var n=l=>{try{a(i.next(l))}catch(c){r(c)}},o=l=>{try{a(i.throw(l))}catch(c){r(c)}},a=l=>l.done?s(l.value):Promise.resolve(l.value).then(n,o);a((i=i.apply(t,e)).next())}),b5=class{setBeans(t){this.beans=t}getFileName(t){const e=this.getDefaultFileExtension();return(t==null||!t.length)&&(t=this.getDefaultFileName()),t.indexOf(".")===-1?`${t}.${e}`:t}getData(t){const e=this.createSerializingSession(t);return this.beans.gridSerializer.serialize(e,t)}getDefaultFileName(){return`export.${this.getDefaultFileExtension()}`}},w5=class{constructor(t){this.groupColumns=[];const{columnModel:e,valueService:i,gos:s,processCellCallback:r,processHeaderCallback:n,processGroupHeaderCallback:o,processRowGroupCallback:a}=t;this.columnModel=e,this.valueService=i,this.gos=s,this.processCellCallback=r,this.processHeaderCallback=n,this.processGroupHeaderCallback=o,this.processRowGroupCallback=a}prepare(t){this.groupColumns=t.filter(e=>!!e.getColDef().showRowGroup)}extractHeaderValue(t){const e=this.getHeaderName(this.processHeaderCallback,t);return e??""}extractRowCellValue(t,e,i,s,r){const o=(!this.gos.get("groupHideOpenParents")||r.footer)&&this.shouldRenderGroupSummaryCell(r,t,e)?this.createValueForGroupNode(t,r):this.valueService.getValue(t,r);return this.processCell({accumulatedRowIndex:i,rowNode:r,column:t,value:o,processCellCallback:this.processCellCallback,type:s})}shouldRenderGroupSummaryCell(t,e,i){var s;if(!(t&&t.group))return!1;if(this.groupColumns.indexOf(e)!==-1){if(((s=t.groupData)==null?void 0:s[e.getId()])!=null||this.gos.isRowModelType("serverSide")&&t.group)return!0;if(t.footer&&t.level===-1){const a=e.getColDef();return a==null||a.showRowGroup===!0||a.showRowGroup===this.columnModel.getRowGroupColumns()[0].getId()}}const o=this.gos.isGroupUseEntireRow(this.columnModel.isPivotMode());return i===0&&o}getHeaderName(t,e){return t?t(this.gos.addGridCommonParams({column:e})):this.columnModel.getDisplayNameForColumn(e,"csv",!0)}createValueForGroupNode(t,e){if(this.processRowGroupCallback)return this.processRowGroupCallback(this.gos.addGridCommonParams({column:t,node:e}));const i=this.gos.get("treeData"),s=this.gos.get("suppressGroupMaintainValueType"),r=l=>{var c,u;if(i||s)return l.key;const d=(c=l.groupData)==null?void 0:c[t.getId()];return!d||!l.rowGroupColumn||l.rowGroupColumn.getColDef().useValueFormatterForExport===!1?d:(u=this.valueService.formatValue(l.rowGroupColumn,l,d))!=null?u:d},n=e.footer,o=[r(e)];if(!this.gos.isGroupMultiAutoColumn())for(;e.parent;)e=e.parent,o.push(r(e));const a=o.reverse().join(" -> ");return n?`Total ${a}`:a}processCell(t){var e;const{accumulatedRowIndex:i,rowNode:s,column:r,value:n,processCellCallback:o,type:a}=t;return o?{value:(e=o(this.gos.addGridCommonParams({accumulatedRowIndex:i,column:r,node:s,value:n,type:a,parseValue:l=>this.valueService.parseValue(r,s,l,this.valueService.getValue(r,s)),formatValue:l=>{var c;return(c=this.valueService.formatValue(r,s,l))!=null?c:l}})))!=null?e:""}:r.getColDef().useValueFormatterForExport!==!1?{value:n??"",valueFormatted:this.valueService.formatValue(r,s,n)}:{value:n??""}}},sD=class{static download(t,e){const i=document.defaultView||window;if(!i){console.warn("AG Grid: There is no `window` associated with the current `document`");return}const s=document.createElement("a"),r=i.URL.createObjectURL(e);s.setAttribute("href",r),s.setAttribute("download",t),s.style.display="none",document.body.appendChild(s),s.dispatchEvent(new MouseEvent("click",{bubbles:!1,cancelable:!0,view:i})),document.body.removeChild(s),i.setTimeout(()=>{i.URL.revokeObjectURL(r)},0)}},EF=`\r
`,mq=class extends w5{constructor(t){super(t),this.isFirstLine=!0,this.result="";const{suppressQuotes:e,columnSeparator:i}=t;this.suppressQuotes=e,this.columnSeparator=i}addCustomContent(t){t&&(typeof t=="string"?(/^\s*\n/.test(t)||this.beginNewLine(),t=t.replace(/\r?\n/g,EF),this.result+=t):t.forEach(e=>{this.beginNewLine(),e.forEach((i,s)=>{s!==0&&(this.result+=this.columnSeparator),this.result+=this.putInQuotes(i.data.value||""),i.mergeAcross&&this.appendEmptyCells(i.mergeAcross)})}))}onNewHeaderGroupingRow(){return this.beginNewLine(),{onColumn:this.onNewHeaderGroupingRowColumn.bind(this)}}onNewHeaderGroupingRowColumn(t,e,i,s){i!=0&&(this.result+=this.columnSeparator),this.result+=this.putInQuotes(e),this.appendEmptyCells(s)}appendEmptyCells(t){for(let e=1;e<=t;e++)this.result+=this.columnSeparator+this.putInQuotes("")}onNewHeaderRow(){return this.beginNewLine(),{onColumn:this.onNewHeaderRowColumn.bind(this)}}onNewHeaderRowColumn(t,e){e!=0&&(this.result+=this.columnSeparator),this.result+=this.putInQuotes(this.extractHeaderValue(t))}onNewBodyRow(){return this.beginNewLine(),{onColumn:this.onNewBodyRowColumn.bind(this)}}onNewBodyRowColumn(t,e,i){var s;e!=0&&(this.result+=this.columnSeparator);const r=this.extractRowCellValue(t,e,e,"csv",i);this.result+=this.putInQuotes((s=r.valueFormatted)!=null?s:r.value)}putInQuotes(t){if(this.suppressQuotes)return t;if(t==null)return'""';let e;return typeof t=="string"?e=t:typeof t.toString=="function"?e=t.toString():(console.warn("AG Grid: unknown value type during csv conversion"),e=""),'"'+e.replace(/"/g,'""')+'"'}parse(){return this.result}beginNewLine(){this.isFirstLine||(this.result+=EF),this.isFirstLine=!1}},dc=class extends b5{postConstruct(){this.setBeans({gridSerializer:this.gridSerializer,gos:this.gos})}getMergedParams(t){const e=this.gos.get("defaultCsvExportParams");return Object.assign({},e,t)}export(t){if(this.isExportSuppressed()){console.warn("AG Grid: Export cancelled. Export is not allowed as per your configuration.");return}const e=this.getMergedParams(t),i=this.getData(e),s=new Blob(["\uFEFF",i],{type:"text/plain"}),r=typeof e.fileName=="function"?e.fileName(this.gos.getGridCommonParams()):e.fileName;sD.download(this.getFileName(r),s)}exportDataAsCsv(t){this.export(t)}getDataAsCsv(t,e=!1){const i=e?Object.assign({},t):this.getMergedParams(t);return this.getData(i)}getDefaultFileExtension(){return"csv"}createSerializingSession(t){const{columnModel:e,valueService:i,gos:s}=this,{processCellCallback:r,processHeaderCallback:n,processGroupHeaderCallback:o,processRowGroupCallback:a,suppressQuotes:l,columnSeparator:c}=t;return new mq({columnModel:e,valueService:i,gos:s,processCellCallback:r||void 0,processHeaderCallback:n||void 0,processGroupHeaderCallback:o||void 0,processRowGroupCallback:a||void 0,suppressQuotes:l||!1,columnSeparator:c||","})}isExportSuppressed(){return this.gos.get("suppressCsvExport")}};Bn([W("columnModel")],dc.prototype,"columnModel",2);Bn([W("valueService")],dc.prototype,"valueService",2);Bn([W("gridSerializer")],dc.prototype,"gridSerializer",2);Bn([W("gridOptionsService")],dc.prototype,"gos",2);Bn([de],dc.prototype,"postConstruct",1);dc=Bn([Me("csvCreator")],dc);var kf=(t=>(t[t.HEADER_GROUPING=0]="HEADER_GROUPING",t[t.HEADER=1]="HEADER",t[t.BODY=2]="BODY",t))(kf||{}),ya=class extends ye{serialize(t,e={}){const{allColumns:i,columnKeys:s,skipRowGroups:r}=e,n=this.getColumnsToExport(i,r,s);return Q.compose(this.prepareSession(n),this.prependContent(e),this.exportColumnGroups(e,n),this.exportHeaders(e,n),this.processPinnedTopRows(e,n),this.processRows(e,n),this.processPinnedBottomRows(e,n),this.appendContent(e))(t).parse()}processRow(t,e,i,s){const r=e.shouldRowBeSkipped||(()=>!1),n=this.gos.get("groupRemoveSingleChildren"),o=this.gos.get("groupRemoveLowestSingleChildren"),l=e.rowPositions!=null||!!e.onlySelected,c=this.gos.get("groupHideOpenParents")&&!l,u=this.columnModel.isPivotMode()?s.leafGroup:!s.group,d=!!s.footer;e.skipRowGroups;const h=o&&s.leafGroup,p=s.allChildrenCount===1&&(n||h);if(!u&&!d&&(e.skipRowGroups||p||c)||e.onlySelected&&!s.isSelected()||e.skipPinnedTop&&s.rowPinned==="top"||e.skipPinnedBottom&&s.rowPinned==="bottom"||s.level===-1&&!u&&!d||r(this.gos.addGridCommonParams({node:s})))return;const g=t.onNewBodyRow(s);if(i.forEach((y,v)=>{g.onColumn(y,v,s)}),e.getCustomContentBelowRow){const y=e.getCustomContentBelowRow(this.gos.addGridCommonParams({node:s}));y&&t.addCustomContent(y)}}appendContent(t){return e=>{const i=t.appendContent;return i&&e.addCustomContent(i),e}}prependContent(t){return e=>{const i=t.prependContent;return i&&e.addCustomContent(i),e}}prepareSession(t){return e=>(e.prepare(t),e)}exportColumnGroups(t,e){return i=>{if(!t.skipColumnGroupHeaders){const s=new ZR,r=this.displayedGroupCreator.createDisplayedGroups(e,s,null);this.recursivelyAddHeaderGroups(r,i,t.processGroupHeaderCallback)}return i}}exportHeaders(t,e){return i=>{if(!t.skipColumnHeaders){const s=i.onNewHeaderRow();e.forEach((r,n)=>{s.onColumn(r,n,void 0)})}return i}}processPinnedTopRows(t,e){return i=>{const s=this.processRow.bind(this,i,t,e);return t.rowPositions?t.rowPositions.filter(r=>r.rowPinned==="top").sort((r,n)=>r.rowIndex-n.rowIndex).map(r=>this.pinnedRowModel.getPinnedTopRow(r.rowIndex)).forEach(s):this.pinnedRowModel.forEachPinnedTopRow(s),i}}processRows(t,e){return i=>{const s=this.rowModel,r=s.getType(),n=r==="clientSide",o=r==="serverSide",a=!n&&t.onlySelected,l=this.processRow.bind(this,i,t,e),{exportedRows:c="filteredAndSorted"}=t;if(t.rowPositions)t.rowPositions.filter(u=>u.rowPinned==null).sort((u,d)=>u.rowIndex-d.rowIndex).map(u=>s.getRow(u.rowIndex)).forEach(l);else if(this.columnModel.isPivotMode())n?s.forEachPivotNode(l,!0):o?s.forEachNodeAfterFilterAndSort(l,!0):s.forEachNode(l);else if(t.onlySelectedAllPages||a){const u=this.selectionService.getSelectedNodes();this.replicateSortedOrder(u),u.forEach(l)}else c==="all"?s.forEachNode(l):n||o?s.forEachNodeAfterFilterAndSort(l,!0):s.forEachNode(l);return i}}replicateSortedOrder(t){const e=this.sortController.getSortOptions(),i=(s,r)=>{var n,o,a,l;return s.rowIndex!=null&&r.rowIndex!=null?s.rowIndex-r.rowIndex:s.level===r.level?((n=s.parent)==null?void 0:n.id)===((o=r.parent)==null?void 0:o.id)?this.rowNodeSorter.compareRowNodes(e,{rowNode:s,currentPos:(a=s.rowIndex)!=null?a:-1},{rowNode:r,currentPos:(l=r.rowIndex)!=null?l:-1}):i(s.parent,r.parent):s.level>r.level?i(s.parent,r):i(s,r.parent)};t.sort(i)}processPinnedBottomRows(t,e){return i=>{const s=this.processRow.bind(this,i,t,e);return t.rowPositions?t.rowPositions.filter(r=>r.rowPinned==="bottom").sort((r,n)=>r.rowIndex-n.rowIndex).map(r=>this.pinnedRowModel.getPinnedBottomRow(r.rowIndex)).forEach(s):this.pinnedRowModel.forEachPinnedBottomRow(s),i}}getColumnsToExport(t=!1,e=!1,i){const s=this.columnModel.isPivotMode();if(i&&i.length)return this.columnModel.getGridColumns(i);const r=this.gos.get("treeData");let n=[];return t&&!s?n=this.columnModel.getAllGridColumns():n=this.columnModel.getAllDisplayedColumns(),e&&!r&&(n=n.filter(o=>o.getColId()!==rc)),n}recursivelyAddHeaderGroups(t,e,i){const s=[];t.forEach(r=>{const n=r;n.getChildren&&n.getChildren().forEach(o=>s.push(o))}),t.length>0&&t[0]instanceof Fs&&this.doAddHeaderHeader(e,t,i),s&&s.length>0&&this.recursivelyAddHeaderGroups(s,e,i)}doAddHeaderHeader(t,e,i){const s=t.onNewHeaderGroupingRow();let r=0;e.forEach(n=>{const o=n;let a;i?a=i(this.gos.addGridCommonParams({columnGroup:o})):a=this.columnModel.getDisplayNameForColumnGroup(o,"header");const l=o.getLeafColumns().reduce((c,u,d,h)=>{let p=Q.last(c);return u.getColumnGroupShow()==="open"?(!p||p[1]!=null)&&(p=[d],c.push(p)):p&&p[1]==null&&(p[1]=d-1),d===h.length-1&&p&&p[1]==null&&(p[1]=d),c},[]);s.onColumn(o,a||"",r++,o.getLeafColumns().length-1,l)})}};Bn([W("displayedGroupCreator")],ya.prototype,"displayedGroupCreator",2);Bn([W("columnModel")],ya.prototype,"columnModel",2);Bn([W("rowModel")],ya.prototype,"rowModel",2);Bn([W("pinnedRowModel")],ya.prototype,"pinnedRowModel",2);Bn([W("selectionService")],ya.prototype,"selectionService",2);Bn([W("rowNodeSorter")],ya.prototype,"rowNodeSorter",2);Bn([W("sortController")],ya.prototype,"sortController",2);ya=Bn([Me("gridSerializer")],ya);var vq="31.3.4",Fx={version:vq,moduleName:"@ag-grid-community/csv-export",beans:[dc,ya]},ab=`\r
`,TF=class{static createHeader(t={}){const e="<?",i="?>",s=["version"];t.version||(t.version="1.0"),t.encoding&&s.push("encoding"),t.standalone&&s.push("standalone");const r=s.map(n=>`${n}="${t[n]}"`).join(" ");return`${e}xml ${r} ${i}`}static createXml(t,e){let i="";t.properties&&(t.properties.prefixedAttributes&&t.properties.prefixedAttributes.forEach(r=>{Object.keys(r.map).forEach(n=>{i+=this.returnAttributeIfPopulated(r.prefix+n,r.map[n],e)})}),t.properties.rawMap&&Object.keys(t.properties.rawMap).forEach(r=>{i+=this.returnAttributeIfPopulated(r,t.properties.rawMap[r],e)}));let s="<"+t.name+i;return!t.children&&t.textNode==null?s+"/>"+ab:t.textNode!=null?s+">"+t.textNode+"</"+t.name+">"+ab:(s+=">"+ab,t.children&&t.children.forEach(r=>{s+=this.createXml(r,e)}),s+"</"+t.name+">"+ab)}static returnAttributeIfPopulated(t,e,i){if(!e&&e!==""&&e!==0)return"";let s=e;return typeof e=="boolean"&&i&&(s=i(e)),` ${t}="${s}"`}},yq=t=>{let e=t.getHours();return e<<=6,e=e|t.getMinutes(),e<<=5,e=e|t.getSeconds()/2,e},Cq=t=>{let e=t.getFullYear()-1980;return e<<=4,e=e|t.getMonth()+1,e<<=5,e=e|t.getDate(),e};function Tr(t,e){let i="";for(let s=0;s<e;s++)i+=String.fromCharCode(t&255),t>>>=8;return i}var _F=t=>{if(!t.length)return 0;let e=-1,i=0,s=0,r=0;for(let n=0;n<t.length;n++)i=t[n],s=(e^i)&255,r=bq[s],e=e>>>8^r;return e^-1},AF=t=>t.length?_F(typeof t=="string"?new TextEncoder().encode(t):t):0,bq=new Uint32Array([0,1996959894,3993919788,2567524794,124634137,1886057615,3915621685,2657392035,249268274,2044508324,3772115230,2547177864,162941995,2125561021,3887607047,2428444049,498536548,1789927666,4089016648,2227061214,450548861,1843258603,4107580753,2211677639,325883990,1684777152,4251122042,2321926636,335633487,1661365465,4195302755,2366115317,997073096,1281953886,3579855332,2724688242,1006888145,1258607687,3524101629,2768942443,901097722,1119000684,3686517206,2898065728,853044451,1172266101,3705015759,2882616665,651767980,1373503546,3369554304,3218104598,565507253,1454621731,3485111705,3099436303,671266974,1594198024,3322730930,2970347812,795835527,1483230225,3244367275,3060149565,1994146192,31158534,2563907772,4023717930,1907459465,112637215,2680153253,3904427059,2013776290,251722036,2517215374,3775830040,2137656763,141376813,2439277719,3865271297,1802195444,476864866,2238001368,4066508878,1812370925,453092731,2181625025,4111451223,1706088902,314042704,2344532202,4240017532,1658658271,366619977,2362670323,4224994405,1303535960,984961486,2747007092,3569037538,1256170817,1037604311,2765210733,3554079995,1131014506,879679996,2909243462,3663771856,1141124467,855842277,2852801631,3708648649,1342533948,654459306,3188396048,3373015174,1466479909,544179635,3110523913,3462522015,1591671054,702138776,2966460450,3352799412,1504918807,783551873,3082640443,3233442989,3988292384,2596254646,62317068,1957810842,3939845945,2647816111,81470997,1943803523,3814918930,2489596804,225274430,2053790376,3826175755,2466906013,167816743,2097651377,4027552580,2265490386,503444072,1762050814,4150417245,2154129355,426522225,1852507879,4275313526,2312317920,282753626,1742555852,4189708143,2394877945,397917763,1622183637,3604390888,2714866558,953729732,1340076626,3518719985,2797360999,1068828381,1219638859,3624741850,2936675148,906185462,1090812512,3747672003,2825379669,829329135,1181335161,3412177804,3160834842,628085408,1382605366,3423369109,3138078467,570562233,1426400815,3317316542,2998733608,733239954,1555261956,3268935591,3050360625,752459403,1541320221,2607071920,3965973030,1969922972,40735498,2617837225,3943577151,1913087877,83908371,2512341634,3803740692,2075208622,213261112,2463272603,3855990285,2094854071,198958881,2262029012,4057260610,1759359992,534414190,2176718541,4139329115,1873836001,414664567,2282248934,4279200368,1711684554,285281116,2405801727,4167216745,1634467795,376229701,2685067896,3608007406,1308918612,956543938,2808555105,3495958263,1231636301,1047427035,2932959818,3654703836,1088359270,936918e3,2847714899,3736837829,1202900863,817233897,3183342108,3401237130,1404277552,615818150,3134207493,3453421203,1423857449,601450431,3009837614,3294710456,1567103746,711928724,3020668471,3272380065,1510334235,755167117]),wq=t=>Ay(void 0,null,function*(){let e=0;const i=[],s=new WritableStream({write:o=>{i.push(o),e+=o.length}}),r=new ReadableStream({start:o=>{const a=new FileReader;a.onload=l=>{var c;(c=l.target)!=null&&c.result&&o.enqueue(l.target.result),o.close()},a.readAsArrayBuffer(t)}}),n=new window.CompressionStream("deflate-raw");return yield r.pipeThrough(n).pipeTo(s),{size:e,content:new Blob(i)}}),Sq=t=>Ay(void 0,null,function*(){const e=new Blob([t]),{size:i,content:s}=yield wq(e),r=new Uint8Array(yield s.arrayBuffer());return{size:i,content:r}}),{utf8_encode:xq}=Q,Eq=(t,e)=>Ay(void 0,null,function*(){const{content:i}=t,{size:s,content:r}=i?x5(i):{size:0,content:Uint8Array.from([])};let n,o,a=!1;if(t.type==="file"&&r&&s>0){const u=yield Sq(r);n=u.content,o=u.size,a=!0}const c=S5(t,a,e,s,r,o);return C5(y5({},c),{content:n||r,isCompressed:a})}),Tq=(t,e)=>{const{content:i}=t,{content:s}=i?x5(i):{content:Uint8Array.from([])},r=S5(t,!1,e,s.length,s,void 0);return C5(y5({},r),{content:s,isCompressed:!1})},S5=(t,e,i,s,r,n)=>{const{content:o,path:a,created:l}=t,c=yq(l),u=Cq(l),d=AF(r),h=n!==void 0?n:s,p=xq(a),f=p!==a;let m="";if(f){const C=Tr(1,1)+Tr(AF(p),4)+p;m="up"+Tr(C.length,2)+C}const g="\0"+(f?"\0\b":"\0\0")+Tr(e?8:0,2)+Tr(c,2)+Tr(u,2)+Tr(h?d:0,4)+Tr(n??s,4)+Tr(s,4)+Tr(p.length,2)+Tr(m.length,2),y="PK"+g+p+m,v="PK\0"+g+"\0\0\0\0\0\0"+(o?"\0\0\0\0":"\0\0\0")+Tr(i,4)+p+m;return{localFileHeader:Uint8Array.from(y,C=>C.charCodeAt(0)),centralDirectoryHeader:Uint8Array.from(v,C=>C.charCodeAt(0))}},_q=(t,e,i)=>{const s="PK\0\0\0\0"+Tr(t,2)+Tr(t,2)+Tr(e,4)+Tr(i,4)+"\0\0";return Uint8Array.from(s,r=>r.charCodeAt(0))},Aq=t=>{const e=new Uint8Array(t.length);for(let i=0;i<t.length;i++)e[i]=t.charCodeAt(i);return e},x5=t=>{let e;if(typeof t=="string"){const i=atob(t.split(";base64,")[1]);e=Aq(i)}else e=t;return{size:e.length,content:e}},vs=class{static addFolders(t){t.forEach(this.addFolder.bind(this))}static addFolder(t){this.folders.push({path:t,created:new Date,isBase64:!1,type:"folder"})}static addFile(t,e,i=!1){this.files.push({path:t,created:new Date,content:i?e:new TextEncoder().encode(e),isBase64:i,type:"file"})}static getZipFile(t="application/zip"){return Ay(this,null,function*(){const e=yield this.buildCompressedFileStream();return this.clearStream(),new Blob([e],{type:t})})}static getUncompressedZipFile(t="application/zip"){const e=this.buildFileStream();return this.clearStream(),new Blob([e],{type:t})}static clearStream(){this.folders=[],this.files=[]}static packageFiles(t){let e=new Uint8Array(0),i=new Uint8Array(0),s=0,r=0;for(const a of t){const{localFileHeader:l,centralDirectoryHeader:c,content:u}=a,d=new Uint8Array(e.length+l.length);d.set(e),d.set(l,e.length),e=d;const h=new Uint8Array(e.length+u.length);h.set(e),h.set(u,e.length),e=h;const p=new Uint8Array(i.length+c.length);p.set(i),p.set(c,i.length),i=p,s+=l.length+u.length,r+=c.length}const n=_q(t.length,r,s),o=new Uint8Array(e.length+i.length+n.length);return o.set(e),o.set(i,e.length),o.set(n,e.length+i.length),o}static buildCompressedFileStream(){return Ay(this,null,function*(){const t=[...this.folders,...this.files],e=[];let i=0;for(const s of t){const r=yield Eq(s,i),{localFileHeader:n,content:o}=r;e.push(r),i+=n.length+o.length}return this.packageFiles(e)})}static buildFileStream(){const t=[...this.folders,...this.files],e=[];let i=0;for(const s of t){const r=Tq(s,i),{localFileHeader:n,content:o}=r;e.push(r),i+=n.length+o.length}return this.packageFiles(e)}};vs.folders=[];vs.files=[];vt.__registerModules([f5,m5,Fx],!1,void 0);var rD=Object.defineProperty,Rq=Object.defineProperties,Mq=Object.getOwnPropertyDescriptor,Dq=Object.getOwnPropertyDescriptors,tS=Object.getOwnPropertySymbols,Pq=Object.getPrototypeOf,E5=Object.prototype.hasOwnProperty,T5=Object.prototype.propertyIsEnumerable,Iq=Reflect.get,q1=(t,e)=>(e=Symbol[t])?e:Symbol.for("Symbol."+t),_t=Math.pow,RF=(t,e,i)=>e in t?rD(t,e,{enumerable:!0,configurable:!0,writable:!0,value:i}):t[e]=i,Se=(t,e)=>{for(var i in e||(e={}))E5.call(e,i)&&RF(t,i,e[i]);if(tS)for(var i of tS(e))T5.call(e,i)&&RF(t,i,e[i]);return t},qe=(t,e)=>Rq(t,Dq(e)),xs=(t,e)=>{var i={};for(var s in t)E5.call(t,s)&&e.indexOf(s)<0&&(i[s]=t[s]);if(t!=null&&tS)for(var s of tS(t))e.indexOf(s)<0&&T5.call(t,s)&&(i[s]=t[s]);return i},Cl=(t,e)=>{for(var i in e)rD(t,i,{get:e[i],enumerable:!0})},q=(t,e,i,s)=>{for(var r=s>1?void 0:s?Mq(e,i):e,n=t.length-1,o;n>=0;n--)(o=t[n])&&(r=(s?o(e,i,r):o(r))||r);return s&&r&&rD(e,i,r),r},Ry=(t,e,i)=>Iq(Pq(t),i,e),Fe=(t,e,i)=>new Promise((s,r)=>{var n=l=>{try{a(i.next(l))}catch(c){r(c)}},o=l=>{try{a(i.throw(l))}catch(c){r(c)}},a=l=>l.done?s(l.value):Promise.resolve(l.value).then(n,o);a((i=i.apply(t,e)).next())}),Fq=function(t,e){this[0]=t,this[1]=e},nD=t=>{var e=t[q1("asyncIterator")],i=!1,s,r={};return e==null?(e=t[q1("iterator")](),s=n=>r[n]=o=>e[n](o)):(e=e.call(t),s=n=>r[n]=o=>{if(i){if(i=!1,n==="throw")throw o;return o}return i=!0,{done:!1,value:new Fq(new Promise(a=>{var l=e[n](o);if(!(l instanceof Object))throw TypeError("Object expected");a(l)}),1)}}),r[q1("iterator")]=()=>r,s("next"),"throw"in e?s("throw"):r.throw=n=>{throw n},"return"in e&&s("return"),r},Lq=["bar","line","scatter"],oD=(t=>(t.POINTER="pointer",t.NODE="node",t.TOP="top",t.RIGHT="right",t.BOTTOM="bottom",t.LEFT="left",t.TOP_LEFT="top-left",t.TOP_RIGHT="top-right",t.BOTTOM_RIGHT="bottom-right",t.BOTTOM_LEFT="bottom-left",t))(oD||{}),kq=0,aD={};Cl(aD,{day:()=>F5,friday:()=>Qq,hour:()=>I5,millisecond:()=>_5,minute:()=>D5,monday:()=>qq,month:()=>k5,saturday:()=>eX,second:()=>R5,sunday:()=>L5,thursday:()=>Jq,tuesday:()=>Xq,utcDay:()=>pX,utcHour:()=>uX,utcMinute:()=>aX,utcMonth:()=>mX,utcYear:()=>CX,wednesday:()=>Zq,year:()=>N5});var U_=new Map;function W_(t,e){U_.has(e)||(U_.set(e,!0),t())}W_.clear=()=>U_.clear();function MF(t){return t}function*ov(...t){for(const e of t)yield*nD(e)}function*Nq(t){for(let e=t.length-1;e>=0;e--)yield t[e]}function DF(t,e=0,i){const{leading:s=!0,trailing:r=!0}=i??{};let n,o,a=!1;function l(){r&&o?(n=setTimeout(l,e),t(...o)):a=!1,o=null}function c(...u){a?o=u:(a=!0,n=setTimeout(l,e),s?t(...u):o=u)}return Object.assign(c,{cancel(){clearTimeout(n),a=!1,o=null}})}function Oq(...t){return()=>{for(const e of t)e()}}var Be={log(...t){console.log(...t)},warn(t,...e){console.warn(`AG Charts - ${t}`,...e)},error(t,...e){typeof t=="object"?console.error("AG Charts error",t,...e):console.error(`AG Charts - ${t}`,...e)},table(...t){console.table(...t)},warnOnce(t,...e){W_(()=>Be.warn(t,...e),`Logger.warn: ${t}`)},errorOnce(t,...e){W_(()=>Be.error(t,...e),`Logger.error: ${t}`)}},My=class{constructor(t,e,i){this._encode=t,this._decode=e,this._rangeCallback=i}floor(t){const e=new Date(t),i=this._encode(e);return this._decode(i)}ceil(t){const e=new Date(Number(t)-1),i=this._encode(e);return this._decode(i+1)}range(t,e,i){var s;const r=(s=this._rangeCallback)==null?void 0:s.call(this,t,e),n=this._encode(i?this.floor(t):this.ceil(t)),o=this._encode(i?this.ceil(e):this.floor(e));if(o<n)return[];const a=[];for(let l=n;l<=o;l++){const c=this._decode(l);a.push(c)}return r==null||r(),a}},fo=class extends My{getOffset(t,e){const i=typeof t=="number"||t instanceof Date?this._encode(new Date(t)):0;return Math.floor(i)%e}every(t,e){let i=0,s;const r=t;t=Math.max(1,Math.round(t)),r!==t&&Be.warnOnce(`interval step of [${r}] rounded to [${t}].`);const{snapTo:n="start"}=e??{};if(typeof n=="string"){const l=i;s=(c,u)=>{const d=n==="start"?c:u;return i=this.getOffset(d,t),()=>i=l}}else typeof n=="number"?i=this.getOffset(new Date(n),t):n instanceof Date&&(i=this.getOffset(n,t));const o=l=>{const c=this._encode(l);return Math.floor((c-i)/t)},a=l=>this._decode(l*t+i);return new My(o,a,s)}};function Gq(t){return t.getTime()}function Bq(t){return new Date(t)}var _5=new fo(Gq,Bq),Vq=_5;new Date(0).getFullYear();var Jd=1e3,kr=Jd*60,Cn=kr*60,hc=Cn*24,nu=hc*7,Vm=hc*30,Dy=hc*365,A5=new Date().getTimezoneOffset()*kr;function Hq(t){return Math.floor((t.getTime()-A5)/Jd)}function jq(t){return new Date(A5+t*Jd)}var R5=new fo(Hq,jq),av=R5,M5=new Date().getTimezoneOffset()*kr;function Uq(t){return Math.floor((t.getTime()-M5)/kr)}function Wq(t){return new Date(M5+t*kr)}var D5=new fo(Uq,Wq),lv=D5,P5=new Date().getTimezoneOffset()*kr;function zq(t){return Math.floor((t.getTime()-P5)/Cn)}function $q(t){return new Date(P5+t*Cn)}var I5=new fo(zq,$q),cv=I5;function Kq(t){const e=t.getTimezoneOffset()*kr;return Math.floor((t.getTime()-e)/hc)}function Yq(t){const e=new Date(1970,0,1);return e.setDate(e.getDate()+t),e}var F5=new fo(Kq,Yq),z_=F5;function op(t){const i=(7+t-4)%7;function s(n){const o=n.getTimezoneOffset()*kr;return Math.floor((n.getTime()-o)/nu-i/7)}function r(n){const o=new Date(1970,0,1);return o.setDate(o.getDate()+n*7+i),o}return new fo(s,r)}var L5=op(0),qq=op(1),Xq=op(2),Zq=op(3),Jq=op(4),Qq=op(5),eX=op(6),Kb=L5;function tX(t){return t.getFullYear()*12+t.getMonth()}function iX(t){const e=Math.floor(t/12),i=t-e*12;return new Date(e,i,1)}var k5=new fo(tX,iX),Bp=k5;function sX(t){return t.getFullYear()}function rX(t){const e=new Date;return e.setFullYear(t),e.setMonth(0,1),e.setHours(0,0,0,0),e}var N5=new fo(sX,rX),lD=N5;function nX(t){return Math.floor(t.getTime()/kr)}function oX(t){return new Date(t*kr)}var aX=new fo(nX,oX);function lX(t){return Math.floor(t.getTime()/Cn)}function cX(t){return new Date(t*Cn)}var uX=new fo(lX,cX);function dX(t){return Math.floor(t.getTime()/hc)}function hX(t){const e=new Date(0);return e.setUTCDate(e.getUTCDate()+t),e.setUTCHours(0,0,0,0),e}var pX=new fo(dX,hX);function fX(t){return t.getUTCFullYear()*12+t.getUTCMonth()}function gX(t){const e=Math.floor(t/12),i=t-e*12;return new Date(Date.UTC(e,i,1))}var mX=new fo(fX,gX);function vX(t){return t.getUTCFullYear()}function yX(t){const e=new Date;return e.setUTCFullYear(t),e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0),e}var CX=new fo(vX,yX),Nf={isEnterprise:!1},Lx=class{constructor(){this.destroyFns=[]}destroy(){for(const t of this.destroyFns)t()}},bX=class{constructor(){this.modules=[],this.dependencies=new Set,this.dependents=new Set}register(...t){for(const e of t){this.registerDependencies(e);const i=this.modules.find(s=>e.type===s.type&&e.optionsKey===s.optionsKey&&e.identifier===s.identifier);if(i){if(e.packageType==="enterprise"&&i.packageType==="community"){const s=this.modules.indexOf(i);this.modules.splice(s,1,e)}}else this.modules.push(e)}}hasEnterpriseModules(){return this.modules.some(t=>t.packageType==="enterprise")}*byType(...t){for(const e of this.modules)t.includes(e.type)&&this.dependencies.has(e.optionsKey)&&(yield e);for(const e of this.modules)t.includes(e.type)&&!this.dependencies.has(e.optionsKey)&&!this.dependents.has(e.optionsKey)&&(yield e);for(const e of this.modules)t.includes(e.type)&&this.dependents.has(e.optionsKey)&&(yield e)}registerDependencies(t){if(!(t.dependencies==null||t.dependencies.length===0)){if(this.dependencies.has(t.optionsKey))throw new Error(`Module [${t.optionsKey}] can not both be depended upon by any module and have dependencies of [${t.dependencies}].`);for(const e of t.dependencies){if(this.dependents.has(e))throw new Error(`Module [${e}] can not both be depended upon by any module and have dependencies of [${t.optionsKey}].`);this.dependencies.add(e)}this.dependents.add(t.optionsKey)}}},Cu=new bX,wX=class{constructor(){this.axesMap=new Map,this.hidden=new Set,this.themeTemplates=new Map}register(t,e){this.axesMap.set(t,e.instanceConstructor),e.themeTemplate&&this.setThemeTemplate(t,e.themeTemplate),e.hidden&&this.hidden.add(t)}create(t,e){const i=this.axesMap.get(t);if(i)return new i(e);throw new Error(`AG Charts - unknown axis type: ${t}`)}has(t){return this.axesMap.has(t)}keys(){return this.axesMap.keys()}publicKeys(){return[...this.keys()].filter(t=>!this.hidden.has(t))}setThemeTemplate(t,e){return this.themeTemplates.set(t,e),this}getThemeTemplate(t){return this.themeTemplates.get(t)}},Lu=new wX,iS=Symbol("BREAK"),Of="__decorator_config";function O5(t,e){Object.getOwnPropertyDescriptor(t,Of)==null&&Object.defineProperty(t,Of,{value:{}});const i=t[Of],s=e.toString();if(typeof i[s]<"u")return i[s];const r=new WeakMap;i[s]={setters:[],getters:[],observers:[],valuesMap:r};const n=Object.getOwnPropertyDescriptor(t,e),o=n==null?void 0:n.set,a=n==null?void 0:n.get;return Object.defineProperty(t,e,{set:function(u){const{setters:d,observers:h}=i[s];let p;d.some(f=>f.length>2)&&(p=a?a.call(this):r.get(this));for(const f of d)if(u=f(this,e,u,p),u===iS)return;o?o.call(this,u):r.set(this,u);for(const f of h)f(this,u,p)},get:function(){let u=a?a.call(this):r.get(this);for(const d of i[s].getters)if(u=d(this,e,u),u===iS)return;return u},enumerable:!0,configurable:!1}),i[s]}function pc(t,e,i){return(s,r)=>{const n=O5(s,r);n.setters.push(t),e&&n.getters.unshift(e),i&&Object.assign(n,i)}}function SX(t){return(e,i)=>{O5(e,i).observers.push(t)}}function kx(t){return typeof t<"u"&&Of in t}function Gf(t){const e=new Set;for(;kx(t);)e.add(t==null?void 0:t[Of]),t=Object.getPrototypeOf(t);return Array.from(e).flatMap(i=>Object.keys(i))}function xX(t){return Gf(t).reduce((e,i)=>{var s;return e[i]=(s=t[i])!=null?s:null,e},{})}function EX(t,e){const i=e.toString();for(;kx(t);){const s=t[Of];if(Object.hasOwn(s,i))return s[i];t=Object.getPrototypeOf(t)}}function sS(t){return t!=null}function Ns(t){return Array.isArray(t)}function G5(t){return typeof t=="boolean"}function Nx(t){return t instanceof Date}function HC(t){return Nx(t)&&!isNaN(Number(t))}function B5(t){return t instanceof RegExp}function ap(t){return typeof t=="function"}function pa(t){return typeof t=="object"&&t!==null&&!Ns(t)}function TX(t){return Ns(t)||Vo(t)}function Vo(t){return typeof t=="object"&&t!==null&&t.constructor===Object}function io(t){return typeof t=="string"}function Qn(t){return typeof t=="number"}function gi(t){return Qn(t)&&Number.isFinite(t)}function V5(t){return typeof window<"u"&&t instanceof HTMLElement}function _X(t,e){return io(e)&&Object.keys(t).includes(e)}function H5(t,e){return Object.values(t).includes(e)}function j5(t){return typeof t=="symbol"}function AX(...t){return Jt(...t.reverse())}function Jt(...t){var e;const i={};for(const s of t){if(!pa(s))continue;const r=kx(s)?Gf(s):Object.keys(s);for(const n of r)Vo(i[n])&&Vo(s[n])?i[n]=Jt(i[n],s[n]):(e=i[n])!=null||(i[n]=s[n])}return i}function $_(t,...e){return e&&Ns(t)?t.map(i=>Jt(i,...e)):t}function Ox(t,e){return Object.entries(t).reduce((i,[s,r])=>(i[s]=e(r,s,t),i),{})}function K_(t,e){const i=Se({},t);for(const s of e)delete i[s];return i}function cD(t,e){return(Ns(e)?e:e.split(".")).reduce((s,r)=>s[r],t)}var uD=new Set(["__proto__","constructor","prototype"]);function dD(t,e,i){const s=Ns(e)?e.slice():e.split("."),r=s.pop();if(s.some(o=>uD.has(o)))return;const n=s.reduce((o,a)=>o[a],t);n[r]=i}function Qd(t,e,i){if(i===void 0)return e;for(const s of t){const r=i[s];r!==void 0&&(e[s]=r)}return e}var U5=class extends Map{get(t){var e;return(e=super.get(t))!=null?e:"unknown"}isCartesian(t){return this.get(t)==="cartesian"}isPolar(t){return this.get(t)==="polar"}isHierarchy(t){return this.get(t)==="hierarchy"}isTopology(t){return this.get(t)==="topology"}get seriesTypes(){return Array.from(this.keys())}get cartesianTypes(){return this.seriesTypes.filter(t=>this.isCartesian(t))}get polarTypes(){return this.seriesTypes.filter(t=>this.isPolar(t))}get hierarchyTypes(){return this.seriesTypes.filter(t=>this.isHierarchy(t))}get topologyTypes(){return this.seriesTypes.filter(t=>this.isTopology(t))}},RX=class extends Map{set(t,e){return super.set(t,Jt(e,this.get(t)))}},Ir=new U5,W5=new U5,Y_=new RX,Zg=[{type:"root",optionsKey:"animation",chartTypes:["cartesian","polar","hierarchy","topology"]},{type:"root",optionsKey:"annotations",chartTypes:["cartesian"]},{type:"root",optionsKey:"background",chartTypes:["cartesian","polar","hierarchy","topology"],optionsInnerKey:"image"},{type:"root",optionsKey:"contextMenu",chartTypes:["cartesian","polar","hierarchy","topology"]},{type:"root",optionsKey:"dataSource",chartTypes:["cartesian","polar","hierarchy","topology"]},{type:"root",optionsKey:"sync",chartTypes:["cartesian"]},{type:"root",optionsKey:"zoom",chartTypes:["cartesian","topology"]},{type:"legend",optionsKey:"gradientLegend",chartTypes:["cartesian","polar","hierarchy","topology"],identifier:"gradient"},{type:"root",optionsKey:"navigator",chartTypes:["cartesian"],optionsInnerKey:"miniChart"},{type:"axis",optionsKey:"axes[]",chartTypes:["polar"],identifier:"angle-category"},{type:"axis",optionsKey:"axes[]",chartTypes:["polar"],identifier:"angle-number"},{type:"axis",optionsKey:"axes[]",chartTypes:["polar"],identifier:"radius-category"},{type:"axis",optionsKey:"axes[]",chartTypes:["polar"],identifier:"radius-number"},{type:"axis",optionsKey:"axes[]",chartTypes:["cartesian"],identifier:"ordinal-time"},{type:"axis-option",optionsKey:"crosshair",chartTypes:["cartesian"]},{type:"series",optionsKey:"series[]",chartTypes:["cartesian"],identifier:"box-plot"},{type:"series",optionsKey:"series[]",chartTypes:["cartesian"],identifier:"candlestick"},{type:"series",optionsKey:"series[]",chartTypes:["cartesian"],identifier:"ohlc"},{type:"series",optionsKey:"series[]",chartTypes:["cartesian"],identifier:"bullet"},{type:"series",optionsKey:"series[]",chartTypes:["cartesian"],identifier:"heatmap"},{type:"series",optionsKey:"series[]",chartTypes:["cartesian"],identifier:"range-area"},{type:"series",optionsKey:"series[]",chartTypes:["cartesian"],identifier:"range-bar"},{type:"series",optionsKey:"series[]",chartTypes:["cartesian"],identifier:"waterfall"},{type:"series",optionsKey:"series[]",chartTypes:["polar"],identifier:"nightingale"},{type:"series",optionsKey:"series[]",chartTypes:["polar"],identifier:"radar-area"},{type:"series",optionsKey:"series[]",chartTypes:["polar"],identifier:"radar-line"},{type:"series",optionsKey:"series[]",chartTypes:["polar"],identifier:"radial-bar"},{type:"series",optionsKey:"series[]",chartTypes:["polar"],identifier:"radial-column"},{type:"series",optionsKey:"series[]",chartTypes:["hierarchy"],identifier:"sunburst"},{type:"series",optionsKey:"series[]",chartTypes:["hierarchy"],identifier:"treemap"},{type:"series",optionsKey:"series[]",chartTypes:["topology"],identifier:"map-shape"},{type:"series",optionsKey:"series[]",chartTypes:["topology"],identifier:"map-line"},{type:"series",optionsKey:"series[]",chartTypes:["topology"],identifier:"map-marker"},{type:"series",optionsKey:"series[]",chartTypes:["topology"],identifier:"map-shape-background"},{type:"series",optionsKey:"series[]",chartTypes:["topology"],identifier:"map-line-background"},{type:"series-option",optionsKey:"errorBar",chartTypes:["cartesian"],identifier:"error-bars"}];function MX(t){return Zg.some(e=>e.type==="series"&&e.identifier===t)}function Gx(t){var e;return(e=Zg.find(i=>i.type==="series"&&i.identifier===t))==null?void 0:e.chartTypes}function DX(t){var e;return((e=Gx(t))==null?void 0:e.find(s=>s==="cartesian"))==="cartesian"}function PX(t){var e;return((e=Gx(t))==null?void 0:e.find(s=>s==="polar"))==="polar"}function IX(t){var e;return((e=Gx(t))==null?void 0:e.find(s=>s==="hierarchy"))==="hierarchy"}function FX(t){var e;return((e=Gx(t))==null?void 0:e.find(s=>s==="topology"))==="topology"}function LX(t){return t.packageType==="enterprise"}function kX(t){var e;if(!LX(t))throw new Error("AG Charts - internal configuration error, only enterprise modules need verification.");const i=Zg.find(s=>s.type===t.type&&s.optionsKey===t.optionsKey&&s.identifier===t.identifier&&t.chartTypes.every(r=>s.chartTypes.includes(r)));return i&&((e=i.useCount)!=null||(i.useCount=0),i.useCount++),i!=null}function NX(){return Zg.filter(({useCount:t})=>t==null||t===0)}function Jg(t){var e,i,s;return(s=(i=(e=t.series)==null?void 0:e[0])==null?void 0:i.type)!=null?s:"line"}function eh(t){const e=Jg(t);return e==null?!0:e==="cartesian"?(Be.warnOnce(`type '${e}' is deprecated, use a series type instead`),!0):Ir.isCartesian(e)||DX(e)}function Bx(t){const e=Jg(t);return e==null?!1:e==="polar"?(Be.warnOnce(`type '${e}' is deprecated, use a series type instead`),!0):Ir.isPolar(e)||PX(e)}function hD(t){const e=Jg(t);return e==null?!1:e==="hierarchy"?(Be.warnOnce(`type '${e}' is deprecated, use a series type instead`),!0):Ir.isHierarchy(e)||IX(e)}function pD(t){const e=Jg(t);return e==null?!1:e==="topology"?(Be.warnOnce(`type '${e}' is deprecated, use a series type instead`),!0):Ir.isTopology(e)||FX(e)}function OX(t){const e=Jg(t);return Bx(t)&&e!=="pie"&&e!=="donut"}function GX(t){return t==null?!1:Ir.has(t)}function BX(t){return t==null?!1:Lu.has(t)}function VX(t){var e,i,s,r;const n=[],o=Ir.get(Jg(t));for(const{type:a,chartTypes:l,optionsKey:c,optionsInnerKey:u,identifier:d}of Zg)if(!(o!=="unknown"&&!l.includes(o))){if(a==="root"||a==="legend"){const h=t[c];if(h==null)continue;u?h[u]&&(n.push(`${c}.${u}`),delete h[u]):(n.push(c),delete t[c])}else if(a==="axis"){if(!("axes"in t)||!((e=t.axes)!=null&&e.some(h=>h.type===d)))continue;n.push(`axis[type=${d}]`),t.axes=t.axes.filter(h=>h.type!==d)}else if(a==="axis-option"){if(!("axes"in t)||!((i=t.axes)!=null&&i.some(h=>h[c])))continue;n.push(`axis.${c}`),t.axes.forEach(h=>{h[c]&&delete h[c]})}else if(a==="series"){if(!((s=t.series)!=null&&s.some(h=>h.type===d)))continue;n.push(`series[type=${d}]`),t.series=t.series.filter(h=>h.type!==d)}else if(a==="series-option"){if(!((r=t.series)!=null&&r.some(h=>h[c])))continue;n.push(`series.${c}`),t.series.forEach(h=>{h[c]&&delete h[c]})}}if(n.length){let a="ag-charts-enterprise",l="https://charts.ag-grid.com/javascript/installation/";t.mode==="integrated"&&(a="ag-grid-charts-enterprise' or 'ag-grid-enterprise/charts-enterprise",l="https://www.ag-grid.com/javascript-data-grid/integrated-charts-installation/"),Be.warnOnce([`unable to use these enterprise features as '${a}' has not been loaded:`,"",...n,"",`See: ${l}`].join(`
`))}}var ti=class{set(t){const{className:e=this.constructor.name}=this.constructor;if(typeof t!="object")return Be.warn(`unable to set ${e} - expecting a properties object`),this;const i=new Set(Object.keys(t));for(const s of Gf(this))if(i.has(s)){const r=t[s],n=this;ul(n[s])?n[s]=n[s]instanceof jC?n[s].reset(r):n[s].set(r):n[s]=r,i.delete(s)}for(const s of i)Be.warn(`unable to set [${s}] in ${e} - property is unknown`);return this}isValid(){return Gf(this).every(t=>{const{optional:e}=EX(this,t),i=e||typeof this[t]<"u";return i||Be.warnOnce(`[${t}] is required.`),i})}toJson(){return Gf(this).reduce((t,e)=>{const i=this[e];return t[e]=ul(i)?i.toJson():i,t},{})}},jC=class z5 extends Array{constructor(e,...i){super(i.length),Object.defineProperty(this,"itemFactory",{value:e,enumerable:!1,configurable:!1}),this.set(i)}set(e){if(Ns(e)){this.length=e.length;for(let i=0;i<e.length;i++)this[i]=new this.itemFactory().set(e[i])}return this}reset(e){return new z5(this.itemFactory,...e)}toJson(){return this.map(e=>{var i,s;return(s=(i=e==null?void 0:e.toJson)==null?void 0:i.call(e))!=null?s:e})}};function ul(t){return t instanceof ti||t instanceof jC}var Yb="class-instance";function Ho(t,e,i){if(Ns(e)){if(!Ns(t)||t.length!==e.length||e.some((s,r)=>Ho(t[r],s)!=null))return e}else if(Vo(e)){if(!Vo(t))return e;const s={},r=new Set([...Object.keys(t),...Object.keys(e)]);for(const n of r)if(!(t[n]===e[n]||i!=null&&i.includes(n)))if(typeof t[n]==typeof e[n]){const o=Ho(t[n],e[n]);o!==null&&(s[n]=o)}else s[n]=e[n];return Object.keys(s).length?s:null}else if(t!==e)return e;return null}function Fr(t,e){return Ns(t)?t.map(i=>Fr(i,e)):Vo(t)?Ox(t,(i,s)=>{var r;return(r=e==null?void 0:e.shallow)!=null&&r.includes(s)?rS(i):Fr(i,e)}):rS(t)}function rS(t){return Ns(t)?[...t]:Vo(t)?Se({},t):Nx(t)?new Date(t):B5(t)?new RegExp(t.source,t.flags):t}function qa(t,e,i,...s){var r;if(Ns(t))e(t,...s),t.forEach((n,o)=>{qa(n,e,i,...PF(s,o))});else if(Vo(t)){e(t,...s);for(const n of Object.keys(t)){if((r=i==null?void 0:i.skip)!=null&&r.includes(n))continue;const o=t[n];(Ns(o)||Vo(o))&&qa(o,e,i,...PF(s,n))}}}function Kl(t,e,i={}){const{path:s,constructedArrays:r,matcherPath:n=s==null?void 0:s.replace(/(\[[0-9+]+])/i,"[]"),skip:o=[]}=i;if(t==null)throw new Error(`AG Charts - target is uninitialised: ${s??"<root>"}`);if(e==null)return t;if(ul(t))return t.set(e);const a=t,l=X1(t);for(const c in e){if(uD.has(c))continue;const u=`${n?n+".":""}${c}`;if(o.includes(u))continue;const d=e[c],h=`${s?s+".":""}${c}`,p=a.constructor,f=a[c];let m;try{const g=X1(f),y=X1(d);if(l===Yb&&!(c in t)){Be.warn(`unable to set [${h}] in ${p==null?void 0:p.name} - property is unknown`);continue}if(g!=null&&y!=null&&y!==g&&(g!==Yb||y!=="object")){Be.warn(`unable to set [${h}] in ${p==null?void 0:p.name} - can't apply type of [${y}], allowed types are: [${g}]`);continue}if(ul(f))a[c].set(d);else if(y==="array")if(m??(m=r==null?void 0:r.get(f)),m==null)a[c]=d;else{const v=d;a[c]=v.map(C=>Kl(new m,C,qe(Se({},i),{path:h,matcherPath:u+"[]"})))}else y===Yb?a[c]=d:y==="object"?f!=null?Kl(f,d,qe(Se({},i),{path:h,matcherPath:u})):m==null?(a[c]={},Kl(a[c],d,qe(Se({},i),{path:h,matcherPath:u}))):a[c]=Kl(new m,d,qe(Se({},i),{path:h,matcherPath:u})):a[c]=d}catch(g){Be.warn(`unable to set [${h}] in [${p==null?void 0:p.name}]; nested error is: ${g.message}`)}}return t}function PF(t,e){return t.map(i=>i==null?void 0:i[e])}function X1(t){return t==null?null:V5(t)||Nx(t)?"primitive":Ns(t)?"array":pa(t)?Vo(t)?"object":Yb:ap(t)?"function":"primitive"}var HX=class{constructor(){this.seriesMap=new Map,this.themeTemplates=new Map}register(t,{chartTypes:[e],instanceConstructor:i,defaultAxes:s,themeTemplate:r,enterpriseThemeTemplate:n,paletteFactory:o,solo:a,stackable:l,groupable:c,stackedByDefault:u,swapDefaultAxesCondition:d,hidden:h}){this.setThemeTemplate(t,r,n),this.seriesMap.set(t,{instanceConstructor:i,defaultAxes:s,paletteFactory:o,solo:a,stackable:l,groupable:c,stackedByDefault:u,swapDefaultAxesCondition:d}),Ir.set(t,e),h||W5.set(t,e)}create(t,e){var i;const s=(i=this.seriesMap.get(t))==null?void 0:i.instanceConstructor;if(s)return new s(e);throw new Error(`AG Charts - unknown series type: ${t}`)}cloneDefaultAxes(t){var e;const i=(e=this.seriesMap.get(t))==null?void 0:e.defaultAxes;return i?{axes:Fr(i)}:null}setThemeTemplate(t,e,i={}){const s=this.themeTemplates.get(t);this.themeTemplates.set(t,{community:Jt(e,s==null?void 0:s.community),enterprise:Jt(i,e,s==null?void 0:s.community)})}getThemeTemplate(t){const e=this.themeTemplates.get(t);return Nf.isEnterprise?e==null?void 0:e.enterprise:e==null?void 0:e.community}getPaletteFactory(t){var e;return(e=this.seriesMap.get(t))==null?void 0:e.paletteFactory}isSolo(t){var e,i;return(i=(e=this.seriesMap.get(t))==null?void 0:e.solo)!=null?i:!1}isGroupable(t){var e,i;return(i=(e=this.seriesMap.get(t))==null?void 0:e.groupable)!=null?i:!1}isStackable(t){var e,i;return(i=(e=this.seriesMap.get(t))==null?void 0:e.stackable)!=null?i:!1}isStackedByDefault(t){var e,i;return(i=(e=this.seriesMap.get(t))==null?void 0:e.stackedByDefault)!=null?i:!1}isDefaultAxisSwapNeeded(t){var e,i,s;let r;for(const n of(e=t.series)!=null?e:[]){const{type:o="line"}=n,a=(s=(i=this.seriesMap.get(o))==null?void 0:i.swapDefaultAxesCondition)==null?void 0:s.call(i,n);if(a!=null){if(r!=null&&r!=a)throw new Error("AG Charts - The provided series have incompatible directions");r=a}}return r}},$n=new HX,jX=class{constructor(){this.legendMap=new Map,this.themeTemplates=new Map}register(t,{optionsKey:e,instanceConstructor:i,themeTemplate:s}){this.legendMap.set(t,{optionsKey:e,instanceConstructor:i}),this.themeTemplates.set(e,s)}create(t,e){var i;const s=(i=this.legendMap.get(t))==null?void 0:i.instanceConstructor;if(s)return new s(e);throw new Error(`AG Charts - unknown legend type: ${t}`)}getThemeTemplates(){return Object.fromEntries(this.themeTemplates)}getKeys(){return Array.from(this.legendMap.entries()).reduce((t,[e,i])=>(t[e]=i.optionsKey,t),{})}},fD=new jX,$5=(t=>(t[t.SMALL=12]="SMALL",t[t.MEDIUM=13]="MEDIUM",t[t.LARGE=17]="LARGE",t))($5||{}),K5=(t=>(t.NORMAL="normal",t.BOLD="bold",t.BOLDER="bolder",t.LIGHTER="lighter",t))(K5||{}),Y5=(t=>(t.TOP="top",t.RIGHT="right",t.BOTTOM="bottom",t.LEFT="left",t))(Y5||{}),q5=(t=>(t.CATEGORY="category",t.ORDINAL_TIME="ordinal-time",t.NUMBER="number",t.TIME="time",t.LOG="log",t))(q5||{}),X5=(t=>(t.ANGLE_CATEGORY="angle-category",t.ANGLE_NUMBER="angle-number",t.RADIUS_CATEGORY="radius-category",t.RADIUS_NUMBER="radius-number",t))(X5||{}),Z5=(t=>(t.CIRCLE="circle",t.POLYGON="polygon",t))(Z5||{}),_o={BLUE:"#5090dc",ORANGE:"#ffa03a",GREEN:"#459d55",CYAN:"#34bfe1",YELLOW:"#e1cc00",VIOLET:"#9669cb",GRAY:"#b5b5b5",MAGENTA:"#bd5aa7",BROWN:"#8a6224",RED:"#ef5452"},Ul={BLUE:"#2b5c95",ORANGE:"#cc6f10",GREEN:"#1e652e",CYAN:"#18859e",YELLOW:"#a69400",VIOLET:"#603c88",GRAY:"#575757",MAGENTA:"#7d2f6d",BROWN:"#4f3508",RED:"#a82529"},zd=Symbol("is-dark-theme"),J5=Symbol("extends-axes-defaults"),Q5=Symbol("extends-axes-line-defaults"),e6=Symbol("extends-axes-tick-defaults"),t6=Symbol("extends-axes-grid-line-defaults"),Dc=Symbol("extends-series-defaults"),Qg=Symbol("extends-cartesian-marker-defaults"),Ks=Symbol("default-font"),Ti=Symbol("default-label-colour"),i6=Symbol("default-inverted-label-colour"),em=Symbol("default-inside-series-label-colour"),Bf=Symbol("default-muted-label-colour"),nS=Symbol("default-axis-grid-colour"),qb=Symbol("default-axis-line-colour"),Mv=Symbol("default-cross-lines-colour"),Py=Symbol("default-background-colour"),tm=Symbol("default-shadow-colour"),ba=Symbol("default-colours"),wa=Symbol("default-waterfall-series-positive-colors"),Sa=Symbol("default-waterfall-series-negative-colors"),xa=Symbol("default-waterfall-series-total-colors"),Ea=Symbol("default-waterfall-series-connector-line-stroke"),gD=Symbol("default-polar-series-stroke"),Ta=Symbol("default-diverging-series-colour-range"),mD=Symbol("default-hierarchy-fills"),vD=Symbol("default-hierarchy-strokes"),_a=Symbol("default-annotation-stroke"),Aa=Symbol("default-annotation-background-fill"),yD=Symbol("default-annotation-handle-fill"),lb="white",UX={fills:Object.values(_o),strokes:Object.values(Ul)},q_={get cartesian(){return{seriesTypes:Ir.cartesianTypes,commonOptions:["zoom","navigator"]}},get polar(){return{seriesTypes:Ir.polarTypes,commonOptions:[]}},get hierarchy(){return{seriesTypes:Ir.hierarchyTypes,commonOptions:[]}},get topology(){return{seriesTypes:Ir.topologyTypes,commonOptions:[]}}},WX=Object.values(q_).reduce((t,{commonOptions:e})=>t.concat(e),[]),Od=class fn{getPalette(){return UX}static getAxisDefaults(e){return Jt(e,{title:{enabled:!1,text:"Axis Title",spacing:25,fontWeight:"normal",fontSize:13,fontFamily:Ks,color:Ti},label:{fontSize:12,fontFamily:Ks,padding:5,color:Ti,avoidCollisions:!0},line:{enabled:!0,width:1,color:qb},tick:{enabled:!1,width:1,color:qb},gridLine:{enabled:!0,style:[{stroke:nS,lineDash:[]}]},crossLines:{enabled:!1,fill:Mv,stroke:Mv,fillOpacity:.1,strokeWidth:1,label:{enabled:!1,fontSize:12,fontFamily:Ks,padding:5,color:Ti}}})}static getSeriesDefaults(){return{visible:!0,showInLegend:!0,highlightStyle:{item:{fill:"#ffffff54",stroke:"#0006",strokeWidth:2},series:{dimOpacity:1}},nodeClickRange:"exact",tooltip:{enabled:!0}}}static getCartesianSeriesMarkerDefaults(){return{enabled:!0,shape:"circle",size:7,strokeWidth:1}}static getChartDefaults(){return{background:{visible:!0,fill:Py},padding:{top:20,right:20,bottom:20,left:20},keyboard:{enabled:!0},title:{enabled:!1,text:"Title",fontWeight:"normal",fontSize:17,fontFamily:Ks,color:Ti,wrapping:"hyphenate"},subtitle:{enabled:!1,text:"Subtitle",spacing:20,fontSize:13,fontFamily:Ks,color:Bf,wrapping:"hyphenate"},footnote:{enabled:!1,text:"Footnote",spacing:20,fontSize:13,fontFamily:Ks,color:"rgb(140, 140, 140)",wrapping:"hyphenate"},legend:{position:"bottom",spacing:30,listeners:{},item:{paddingX:16,paddingY:8,marker:{size:15,padding:8},toggleSeriesVisible:!0,label:{color:Ti,fontSize:12,fontFamily:Ks}},reverseOrder:!1,pagination:{marker:{size:12},activeStyle:{fill:Ti},inactiveStyle:{fill:Bf},highlightStyle:{fill:Ti},label:{color:Ti}}},tooltip:{enabled:!0,darkTheme:zd,range:"nearest",delay:0},overlays:{loading:{darkTheme:zd},noData:{darkTheme:zd},noVisibleSeries:{darkTheme:zd}},listeners:{}}}constructor(e={}){const{overrides:i,palette:s}=Fr(e),r=this.createChartConfigPerChartType(this.getDefaults());i&&this.mergeOverrides(r,i),this.config=Object.freeze(this.templateTheme(r)),this.palette=Jt(s,this.getPalette())}mergeOverrides(e,i){for(const{seriesTypes:s,commonOptions:r}of Object.values(q_)){const n=Se({},i.common);for(const o of WX)r.includes(o)||delete n[o];if(n)for(const o of s){const a=o;e[a]=Jt(n,e[a])}}Ir.seriesTypes.forEach(s=>{const r=s;i[r]&&(e[r]=Jt(i[r],e[r]))})}createChartConfigPerChartType(e){for(const[i,{seriesTypes:s}]of Object.entries(q_)){const r=Y_.get(i);for(const n of s)e[n]||(e[n]=Fr(r))}return e}getDefaults(){const e=(i,s)=>{var r;const n={},o=Se(Se(Se({axes:{}},fD.getThemeTemplates()),fn.getChartDefaults()),Y_.get(i));for(const a of s){n[a]=Jt($n.getThemeTemplate(a),(r=n[a])!=null?r:Fr(o));const{axes:l}=n[a];for(const c of Lu.keys())l[c]=Jt(l[c],Lu.getThemeTemplate(c),i==="cartesian"&&fn.cartesianAxisDefault[c])}return n};return Jt(e("cartesian",Ir.cartesianTypes),e("polar",Ir.polarTypes),e("hierarchy",Ir.hierarchyTypes),e("topology",Ir.topologyTypes))}templateTheme(e){const i=Fr(e),{extensions:s,properties:r}=this.getTemplateParameters();return qa(i,n=>{if(n.__extends__){const o=n.__extends__,a=s.get(o);if(a==null)throw new Error(`AG Charts - no template variable provided for: ${o}`);Object.keys(a).forEach(l=>{l in n?pa(n[l])&&(n[l]=Jt(n[l],a[l])):n[l]=a[l]}),delete n.__extends__}if(Ns(n))for(let o=0;o<n.length;o++){const a=n[o];r.has(a)&&(n[o]=r.get(a))}else for(const[o,a]of Object.entries(n))r.has(a)&&(n[o]=r.get(a))}),Fr(i)}static getDefaultColors(){return{fills:_o,strokes:Ul}}static getWaterfallSeriesDefaultPositiveColors(){return{fill:_o.BLUE,stroke:Ul.BLUE,label:{color:Ti}}}static getWaterfallSeriesDefaultNegativeColors(){return{fill:_o.ORANGE,stroke:Ul.ORANGE,label:{color:Ti}}}static getWaterfallSeriesDefaultTotalColors(){return{fill:_o.GRAY,stroke:Ul.GRAY,label:{color:Ti}}}getTemplateParameters(){const e=new Map;e.set(J5,fn.getAxisDefaults()),e.set(Q5,fn.getAxisDefaults().line),e.set(e6,fn.getAxisDefaults().tick),e.set(t6,fn.getAxisDefaults().gridLine),e.set(Dc,fn.getSeriesDefaults()),e.set(Qg,fn.getCartesianSeriesMarkerDefaults());const i=new Map;return i.set(zd,!1),i.set(Ks,"Verdana, sans-serif"),i.set(Ti,"rgb(70, 70, 70)"),i.set(i6,"white"),i.set(Bf,"rgb(140, 140, 140)"),i.set(nS,"rgb(224,234,241)"),i.set(qb,"rgb(195, 195, 195)"),i.set(Mv,"rgb(70, 70, 70)"),i.set(em,lb),i.set(Py,lb),i.set(tm,"rgba(0, 0, 0, 0.5)"),i.set(Ta,[_o.ORANGE,_o.YELLOW,_o.GREEN]),i.set(mD,["#ffffff","#e0e5ea","#c1ccd5","#a3b4c1","#859cad"]),i.set(vD,["#ffffff","#c5cbd1","#a4b1bd","#8498a9","#648096"]),i.set(gD,lb),i.set(ba,fn.getDefaultColors()),i.set(wa,fn.getWaterfallSeriesDefaultPositiveColors()),i.set(Sa,fn.getWaterfallSeriesDefaultNegativeColors()),i.set(xa,fn.getWaterfallSeriesDefaultTotalColors()),i.set(Ea,fn.getWaterfallSeriesDefaultTotalColors().stroke),i.set(_a,Ul.BLUE),i.set(Aa,_o.BLUE),i.set(yD,lb),{extensions:e,properties:i}}};Od.cartesianAxisDefault={number:Od.getAxisDefaults({line:{enabled:!1}}),log:Od.getAxisDefaults({base:10,line:{enabled:!1}}),category:Od.getAxisDefaults({groupPaddingInner:.1,label:{autoRotate:!0},gridLine:{enabled:!1}}),time:Od.getAxisDefaults({gridLine:{enabled:!1}}),"grouped-category":Od.getAxisDefaults()};var Pc=Od,cb="#192232",Ml={BLUE:"#5090dc",ORANGE:"#ffa03a",GREEN:"#459d55",CYAN:"#34bfe1",YELLOW:"#e1cc00",VIOLET:"#9669cb",GRAY:"#b5b5b5",MAGENTA:"#bd5aa7",BROWN:"#8a6224",RED:"#ef5452"},Vp={BLUE:"#74a8e6",ORANGE:"#ffbe70",GREEN:"#6cb176",CYAN:"#75d4ef",YELLOW:"#f6e559",VIOLET:"#aa86d8",GRAY:"#a1a1a1",MAGENTA:"#ce7ab9",BROWN:"#997b52",RED:"#ff7872"},zX={fills:Object.values(Ml),strokes:Object.values(Vp)},UC=class Hp extends Pc{static getDefaultColors(){return{fills:Ml,strokes:Vp}}static getWaterfallSeriesDefaultPositiveColors(){return{fill:Ml.BLUE,stroke:Vp.BLUE,label:{color:"white"}}}static getWaterfallSeriesDefaultNegativeColors(){return{fill:Ml.ORANGE,stroke:Vp.ORANGE,label:{color:"white"}}}static getWaterfallSeriesDefaultTotalColors(){return{fill:Ml.GRAY,stroke:Vp.GRAY,label:{color:"white"}}}getTemplateParameters(){const e=super.getTemplateParameters();return e.properties.set(zd,!0),e.properties.set(ba,Hp.getDefaultColors()),e.properties.set(wa,Hp.getWaterfallSeriesDefaultPositiveColors()),e.properties.set(Sa,Hp.getWaterfallSeriesDefaultNegativeColors()),e.properties.set(xa,Hp.getWaterfallSeriesDefaultTotalColors()),e.properties.set(Ea,Hp.getWaterfallSeriesDefaultTotalColors().stroke),e.properties.set(gD,cb),e.properties.set(Ti,"white"),e.properties.set(Bf,"#7D91A0"),e.properties.set(nS,"#545A6E"),e.properties.set(Mv,"white"),e.properties.set(Ta,[Ml.ORANGE,Ml.YELLOW,Ml.GREEN]),e.properties.set(mD,["#192834","#253746","#324859","#3f596c","#4d6a80"]),e.properties.set(vD,["#192834","#3b5164","#496275","#577287","#668399"]),e.properties.set(Py,cb),e.properties.set(em,cb),e.properties.set(_a,Vp.BLUE),e.properties.set(Aa,Ml.BLUE),e.properties.set(yD,cb),e}getPalette(){return zX}constructor(e){super(e)}},Dl={BLUE:"#2196F3",ORANGE:"#FF9800",GREEN:"#4CAF50",CYAN:"#00BCD4",YELLOW:"#FFEB3B",VIOLET:"#7E57C2",GRAY:"#9E9E9E",MAGENTA:"#F06292",BROWN:"#795548",RED:"#F44336"},jp={BLUE:"#90CAF9",ORANGE:"#FFCC80",GREEN:"#A5D6A7",CYAN:"#80DEEA",YELLOW:"#FFF9C4",VIOLET:"#B39DDB",GRAY:"#E0E0E0",MAGENTA:"#F48FB1",BROWN:"#A1887F",RED:"#EF9A9A"},$X={fills:Object.values(Dl),strokes:Object.values(jp)},KX=class Up extends UC{static getDefaultColors(){return{fills:Dl,strokes:jp}}static getWaterfallSeriesDefaultPositiveColors(){return{fill:Dl.BLUE,stroke:jp.BLUE,label:{color:"white"}}}static getWaterfallSeriesDefaultNegativeColors(){return{fill:Dl.RED,stroke:jp.RED,label:{color:"white"}}}static getWaterfallSeriesDefaultTotalColors(){return{fill:Dl.GRAY,stroke:jp.GRAY,label:{color:"white"}}}getTemplateParameters(){const e=super.getTemplateParameters();return e.properties.set(ba,Up.getDefaultColors()),e.properties.set(wa,Up.getWaterfallSeriesDefaultPositiveColors()),e.properties.set(Sa,Up.getWaterfallSeriesDefaultNegativeColors()),e.properties.set(xa,Up.getWaterfallSeriesDefaultTotalColors()),e.properties.set(Ta,[Dl.ORANGE,Dl.YELLOW,Dl.GREEN]),e.properties.set(Ea,Up.getWaterfallSeriesDefaultTotalColors().stroke),e.properties.set(_a,jp.BLUE),e.properties.set(Aa,Dl.BLUE),e}getPalette(){return $X}},Pl={BLUE:"#2196F3",ORANGE:"#FF9800",GREEN:"#4CAF50",CYAN:"#00BCD4",YELLOW:"#FFEB3B",VIOLET:"#7E57C2",GRAY:"#9E9E9E",MAGENTA:"#F06292",BROWN:"#795548",RED:"#F44336"},Wp={BLUE:"#1565C0",ORANGE:"#E65100",GREEN:"#2E7D32",CYAN:"#00838F",YELLOW:"#F9A825",VIOLET:"#4527A0",GRAY:"#616161",MAGENTA:"#C2185B",BROWN:"#4E342E",RED:"#B71C1C"},YX={fills:Object.values(Pl),strokes:Object.values(Wp)},qX=class zp extends Pc{static getDefaultColors(){return{fills:Pl,strokes:Wp}}static getWaterfallSeriesDefaultPositiveColors(){return{fill:Pl.BLUE,stroke:Wp.BLUE,label:{color:Ti}}}static getWaterfallSeriesDefaultNegativeColors(){return{fill:Pl.RED,stroke:Wp.RED,label:{color:Ti}}}static getWaterfallSeriesDefaultTotalColors(){return{fill:Pl.GRAY,stroke:Wp.GRAY,label:{color:Ti}}}getTemplateParameters(){const e=super.getTemplateParameters();return e.properties.set(ba,zp.getDefaultColors()),e.properties.set(wa,zp.getWaterfallSeriesDefaultPositiveColors()),e.properties.set(Sa,zp.getWaterfallSeriesDefaultNegativeColors()),e.properties.set(xa,zp.getWaterfallSeriesDefaultTotalColors()),e.properties.set(Ta,[Pl.ORANGE,Pl.YELLOW,Pl.GREEN]),e.properties.set(Ea,zp.getWaterfallSeriesDefaultTotalColors().stroke),e.properties.set(_a,Wp.BLUE),e.properties.set(Aa,Pl.BLUE),e}getPalette(){return YX}},Gd={BLUE:"#436ff4",PURPLE:"#9a7bff",MAGENTA:"#d165d2",PINK:"#f0598b",RED:"#f47348",ORANGE:"#f2a602",YELLOW:"#e9e201",GREEN:"#21b448",CYAN:"#00b9a2",MODERATE_BLUE:"#00aee4"},uv={BLUE:"#6698ff",PURPLE:"#c0a3ff",MAGENTA:"#fc8dfc",PINK:"#ff82b1",RED:"#ff9b70",ORANGE:"#ffcf4e",YELLOW:"#ffff58",GREEN:"#58dd70",CYAN:"#51e2c9",MODERATE_BLUE:"#4fd7ff"},XX="#bbbbbb",ZX="#eeeeee",JX={fills:Object.values(Gd),strokes:Object.values(uv)},QX=class $p extends UC{static getDefaultColors(){return{fills:Gd,strokes:uv}}static getWaterfallSeriesDefaultPositiveColors(){return{fill:Gd.BLUE,stroke:uv.BLUE,label:{color:"white"}}}static getWaterfallSeriesDefaultNegativeColors(){return{fill:Gd.RED,stroke:uv.RED,label:{color:"white"}}}static getWaterfallSeriesDefaultTotalColors(){return{fill:XX,stroke:ZX,label:{color:"white"}}}getTemplateParameters(){const e=super.getTemplateParameters();return e.properties.set(ba,$p.getDefaultColors()),e.properties.set(wa,$p.getWaterfallSeriesDefaultPositiveColors()),e.properties.set(Sa,$p.getWaterfallSeriesDefaultNegativeColors()),e.properties.set(xa,$p.getWaterfallSeriesDefaultTotalColors()),e.properties.set(Ta,[Gd.BLUE,Gd.RED]),e.properties.set(Ea,$p.getWaterfallSeriesDefaultTotalColors().stroke),e.properties.set(_a,uv.BLUE),e.properties.set(Aa,Gd.BLUE),e}getPalette(){return JX}},Bd={BLUE:"#436ff4",PURPLE:"#9a7bff",MAGENTA:"#d165d2",PINK:"#f0598b",RED:"#f47348",ORANGE:"#f2a602",YELLOW:"#e9e201",GREEN:"#21b448",CYAN:"#00b9a2",MODERATE_BLUE:"#00aee4"},dv={BLUE:"#2346c9",PURPLE:"#7653d4",MAGENTA:"#a73da9",PINK:"#c32d66",RED:"#c84b1c",ORANGE:"#c87f00",YELLOW:"#c1b900",GREEN:"#008c1c",CYAN:"#00927c",MODERATE_BLUE:"#0087bb"},eZ="#bbbbbb",tZ="#888888",iZ={fills:Object.values(Bd),strokes:Object.values(dv)},sZ=class Kp extends Pc{static getDefaultColors(){return{fills:Bd,strokes:dv}}static getWaterfallSeriesDefaultPositiveColors(){return{fill:Bd.BLUE,stroke:dv.BLUE,label:{color:Ti}}}static getWaterfallSeriesDefaultNegativeColors(){return{fill:Bd.RED,stroke:dv.RED,label:{color:Ti}}}static getWaterfallSeriesDefaultTotalColors(){return{fill:eZ,stroke:tZ,label:{color:Ti}}}getTemplateParameters(){const e=super.getTemplateParameters();return e.properties.set(ba,Kp.getDefaultColors()),e.properties.set(wa,Kp.getWaterfallSeriesDefaultPositiveColors()),e.properties.set(Sa,Kp.getWaterfallSeriesDefaultNegativeColors()),e.properties.set(xa,Kp.getWaterfallSeriesDefaultTotalColors()),e.properties.set(Ta,[Bd.BLUE,Bd.RED]),e.properties.set(Ea,Kp.getWaterfallSeriesDefaultTotalColors().stroke),e.properties.set(_a,dv.BLUE),e.properties.set(Aa,Bd.BLUE),e}getPalette(){return iZ}},Va={BLUE:"#4472C4",ORANGE:"#ED7D31",GRAY:"#A5A5A5",YELLOW:"#FFC000",MODERATE_BLUE:"#5B9BD5",GREEN:"#70AD47",DARK_GRAY:"#7B7B7B",DARK_BLUE:"#264478",VERY_DARK_GRAY:"#636363",DARK_YELLOW:"#997300"},Vd={BLUE:"#6899ee",ORANGE:"#ffa55d",GRAY:"#cdcdcd",YELLOW:"#ffea53",MODERATE_BLUE:"#82c3ff",GREEN:"#96d56f",DARK_GRAY:"#a1a1a1",DARK_BLUE:"#47689f",VERY_DARK_GRAY:"#878787",DARK_YELLOW:"#c0993d"},rZ={fills:Object.values(Va),strokes:Object.values(Vd)},nZ=class Yp extends UC{static getDefaultColors(){return{fills:qe(Se({},Va),{RED:Va.ORANGE}),strokes:qe(Se({},Vd),{RED:Vd.ORANGE})}}static getWaterfallSeriesDefaultPositiveColors(){return{fill:Va.BLUE,stroke:Vd.BLUE,label:{color:"white"}}}static getWaterfallSeriesDefaultNegativeColors(){return{fill:Va.ORANGE,stroke:Vd.ORANGE,label:{color:"white"}}}static getWaterfallSeriesDefaultTotalColors(){return{fill:Va.GRAY,stroke:Vd.GRAY,label:{color:"white"}}}getTemplateParameters(){const e=super.getTemplateParameters();return e.properties.set(ba,Yp.getDefaultColors()),e.properties.set(wa,Yp.getWaterfallSeriesDefaultPositiveColors()),e.properties.set(Sa,Yp.getWaterfallSeriesDefaultNegativeColors()),e.properties.set(xa,Yp.getWaterfallSeriesDefaultTotalColors()),e.properties.set(Ta,[Va.ORANGE,Va.YELLOW,Va.GREEN]),e.properties.set(Ea,Yp.getWaterfallSeriesDefaultTotalColors().stroke),e.properties.set(_a,Vd.BLUE),e.properties.set(Aa,Va.BLUE),e}getPalette(){return rZ}},Ha={BLUE:"#5281d5",ORANGE:"#ff8d44",GRAY:"#b5b5b5",YELLOW:"#ffd02f",MODERATE_BLUE:"#6aabe6",GREEN:"#7fbd57",DARK_GRAY:"#8a8a8a",DARK_BLUE:"#335287",VERY_DARK_GRAY:"#717171",DARK_YELLOW:"#a98220"},Hd={BLUE:"#214d9b",ORANGE:"#c25600",GRAY:"#7f7f7f",YELLOW:"#d59800",MODERATE_BLUE:"#3575ac",GREEN:"#4b861a",DARK_GRAY:"#575757",DARK_BLUE:"#062253",VERY_DARK_GRAY:"#414141",DARK_YELLOW:"#734f00"},oZ={fills:Object.values(Ha),strokes:Object.values(Hd)},aZ=class qp extends Pc{static getDefaultColors(){return{fills:qe(Se({},Ha),{RED:Ha.ORANGE}),strokes:qe(Se({},Hd),{RED:Hd.ORANGE})}}static getWaterfallSeriesDefaultPositiveColors(){return{fill:Ha.BLUE,stroke:Hd.BLUE,label:{color:Ti}}}static getWaterfallSeriesDefaultNegativeColors(){return{fill:Ha.ORANGE,stroke:Hd.ORANGE,label:{color:Ti}}}static getWaterfallSeriesDefaultTotalColors(){return{fill:Ha.GRAY,stroke:Hd.GRAY,label:{color:Ti}}}getTemplateParameters(){const e=super.getTemplateParameters();return e.properties.set(ba,qp.getDefaultColors()),e.properties.set(wa,qp.getWaterfallSeriesDefaultPositiveColors()),e.properties.set(Sa,qp.getWaterfallSeriesDefaultNegativeColors()),e.properties.set(xa,qp.getWaterfallSeriesDefaultTotalColors()),e.properties.set(Ta,[Ha.ORANGE,Ha.YELLOW,Ha.GREEN]),e.properties.set(Ea,qp.getWaterfallSeriesDefaultTotalColors().stroke),e.properties.set(_a,Hd.BLUE),e.properties.set(Aa,Ha.BLUE),e}getPalette(){return oZ}},Il={BLUE:"#0083ff",ORANGE:"#ff6600",GREEN:"#00af00",CYAN:"#00ccff",YELLOW:"#f7c700",VIOLET:"#ac26ff",GRAY:"#a7a7b7",MAGENTA:"#e800c5",BROWN:"#b54300",RED:"#ff0000"},Xp={BLUE:"#67b7ff",ORANGE:"#ffc24d",GREEN:"#5cc86f",CYAN:"#54ebff",VIOLET:"#c18aff",YELLOW:"#fff653",GRAY:"#aeaeae",MAGENTA:"#f078d4",BROWN:"#ba8438",RED:"#ff726e"},lZ={fills:Object.values(Il),strokes:Object.values(Xp)},cZ=class Zp extends UC{static getDefaultColors(){return{fills:Il,strokes:Xp}}static getWaterfallSeriesDefaultPositiveColors(){return{fill:Il.BLUE,stroke:Xp.BLUE,label:{color:"white"}}}static getWaterfallSeriesDefaultNegativeColors(){return{fill:Il.ORANGE,stroke:Xp.ORANGE,label:{color:"white"}}}static getWaterfallSeriesDefaultTotalColors(){return{fill:Il.GRAY,stroke:Xp.GRAY,label:{color:"white"}}}getTemplateParameters(){const e=super.getTemplateParameters();return e.properties.set(ba,Zp.getDefaultColors()),e.properties.set(wa,Zp.getWaterfallSeriesDefaultPositiveColors()),e.properties.set(Sa,Zp.getWaterfallSeriesDefaultNegativeColors()),e.properties.set(xa,Zp.getWaterfallSeriesDefaultTotalColors()),e.properties.set(Ta,[Il.ORANGE,Il.YELLOW,Il.GREEN]),e.properties.set(Ea,Zp.getWaterfallSeriesDefaultTotalColors().stroke),e.properties.set(_a,Xp.BLUE),e.properties.set(Aa,Il.BLUE),e}getPalette(){return lZ}},Fl={BLUE:"#0083ff",ORANGE:"#ff6600",GREEN:"#00af00",CYAN:"#00ccff",YELLOW:"#f7c700",VIOLET:"#ac26ff",GRAY:"#a7a7b7",MAGENTA:"#e800c5",BROWN:"#b54300",RED:"#ff0000"},Jp={BLUE:"#0f68c0",ORANGE:"#d47100",GREEN:"#007922",CYAN:"#009ac2",VIOLET:"#bca400",YELLOW:"#753cac",GRAY:"#646464",MAGENTA:"#9b2685",BROWN:"#6c3b00",RED:"#cb0021"},uZ={fills:Object.values(Fl),strokes:Object.values(Jp)},dZ=class Qp extends Pc{static getDefaultColors(){return{fills:Fl,strokes:Jp}}static getWaterfallSeriesDefaultPositiveColors(){return{fill:Fl.BLUE,stroke:Jp.BLUE,label:{color:Ti}}}static getWaterfallSeriesDefaultNegativeColors(){return{fill:Fl.ORANGE,stroke:Jp.ORANGE,label:{color:Ti}}}static getWaterfallSeriesDefaultTotalColors(){return{fill:Fl.GRAY,stroke:Jp.GRAY,label:{color:Ti}}}getTemplateParameters(){const e=super.getTemplateParameters();return e.properties.set(ba,Qp.getDefaultColors()),e.properties.set(wa,Qp.getWaterfallSeriesDefaultPositiveColors()),e.properties.set(Sa,Qp.getWaterfallSeriesDefaultNegativeColors()),e.properties.set(xa,Qp.getWaterfallSeriesDefaultTotalColors()),e.properties.set(Ta,[Fl.ORANGE,Fl.YELLOW,Fl.GREEN]),e.properties.set(Ea,Qp.getWaterfallSeriesDefaultTotalColors().stroke),e.properties.set(_a,Jp.BLUE),e.properties.set(Aa,Fl.BLUE),e}getPalette(){return uZ}},Dv=()=>new Pc,Z1=()=>new UC,hZ={undefined:Dv,null:Dv,"ag-default":Dv,"ag-sheets":()=>new aZ,"ag-polychroma":()=>new sZ,"ag-vivid":()=>new dZ,"ag-material":()=>new qX},pZ={undefined:Z1,null:Z1,"ag-default-dark":Z1,"ag-sheets-dark":()=>new nZ,"ag-polychroma-dark":()=>new QX,"ag-vivid-dark":()=>new cZ,"ag-material-dark":()=>new KX},s6=Se(Se({},pZ),hZ);function fZ(t){if(t===null)return;let e=!0;const{baseTheme:i,palette:s,overrides:r}=t;if(i!==void 0&&typeof i!="string"&&typeof i!="object"&&(Be.warn(`invalid theme.baseTheme type ${typeof i}, expected (string | object).`),e=!1),r!==void 0&&typeof r!="object"&&(Be.warn(`invalid theme.overrides type ${typeof r}, expected object.`),e=!1),typeof s=="object"){if(s!==null){const{fills:n,strokes:o}=s;n!==void 0&&!Array.isArray(n)&&(Be.warn("theme.overrides.fills must be undefined or an array"),e=!1),o!==void 0&&!Array.isArray(o)&&(Be.warn("theme.overrides.strokes must be undefined or an array"),e=!1)}}else s!==void 0&&(Be.warn(`invalid theme.palette type ${typeof s}, expected object.`),e=!1);if(e)return t}function gZ(t){if(t===void 0||typeof t=="string"||t instanceof Pc)return t;if(typeof t=="object")return fZ(t);Be.warn(`invalid theme value type ${typeof t}, expected object or string.`)}function CD(t){let e=gZ(t);if(e instanceof Pc)return e;if(e==null||typeof e=="string"){const o=s6[e];return o?o():(Be.warnOnce(`the theme [${e}] is invalid, using [ag-default] instead.`),Dv())}const i=[];let s;for(;typeof e=="object";)i.push(e.overrides),s??(s=e.palette),e=e.baseTheme;const r={baseTheme:e,overrides:Jt(...i),palette:s},n=r.baseTheme?CD(r.baseTheme):Dv();return new n.constructor(r)}function bl(t){if(t.length===0)return;let e=1/0,i=-1/0;for(let r of t)r instanceof Date&&(r=r.getTime()),typeof r=="number"&&(r<e&&(e=r),r>i&&(i=r));const s=[e,i];if(s.every(isFinite))return s}function r6(t,e,i){return WC(t,e,i).extent}function WC(t,e,i){var s;let r=!1;return t.length>2&&(t=(s=bl(t))!=null?s:[NaN,NaN]),isNaN(e)||(r||(r=e>t[0]),t=[e,t[1]]),isNaN(i)||(r||(r=i<t[1]),t=[t[0],i]),t[0]>t[1]&&(t=[]),{extent:t,clipped:r}}function Pv(t,e){if(t==null||e==null||t.length!==e.length)return!1;for(let i=0;i<t.length;i++)if(Array.isArray(t[i])&&Array.isArray(e[i])){if(!Pv(t[i],e[i]))return!1}else if(t[i]!==e[i])return!1;return!0}function X_(t){return typeof t>"u"?[]:Array.isArray(t)?t:[t]}function bD(t){return Array.from(new Set(t))}function wD(t,e){return t.reduce((i,s)=>{var r;const n=e(s);return(r=i[n])!=null||(i[n]=[]),i[n].push(s),i},{})}function Z_(t,e,i=0){if(t.length===0)return[];const s=[];for(let r=0;r<e;r++)s.push(t.at((r+i)%t.length));return s}function n6(t,e){return e.reduce(([i,s],r)=>t(r)?[[...i,r],s]:[i,[...s,r]],[[],[]])}function*mZ(t,e){for(const i of t)yield e(i)}function vZ(t,e){return t.includes(e)}function yZ(t,e){return vZ(t,e)}function Xb(t,e){return!e.some(i=>!yZ(t,i))}var dl={},ub=new WeakMap;typeof window<"u"?dl.window=window:typeof global<"u"&&(dl.window=global.window);typeof document<"u"?dl.document=document:typeof global<"u"&&(dl.document=global.document);function hl(t){var e;return t?(e=dl.document)==null?void 0:e[t]:dl.document}function pl(t){var e;return t?(e=dl.window)==null?void 0:e[t]:dl.window}function hs(t,e,i){const s=hl().createElement(t);return typeof e=="object"&&(i=e,e=void 0),e&&s.classList.add(e),i&&Object.assign(s.style,i),s}function o6(t,e){const{body:i}=hl(),s=hs("a",{display:"none"});s.href=t,s.download=e,i.appendChild(s),s.click(),setTimeout(()=>i.removeChild(s))}function lp(t,e){var i,s;const r=hl();if(e&&((i=ub.get(r))!=null&&i.has(e)))return;const n=hs("style");n.innerHTML=t,r.head.insertBefore(n,r.head.querySelector("style")),e&&!ub.has(r)?ub.set(r,new Set([e])):e&&((s=ub.get(r))==null||s.add(e))}function a6(t){dl.document=t}function l6(t){dl.window=t}var CZ=2e3,IF=Date.now(),bZ=()=>{const t=Date.now()-IF;if(t>CZ){const e=(Math.floor(t/100)/10).toFixed(1);Be.log(`**** ${e}s since last log message ****`)}IF=Date.now()},is={create(...t){return Object.assign((...i)=>{is.check(...t)&&(typeof i[0]=="function"&&(i=X_(i[0]())),bZ(),Be.log(...i))},{check:()=>is.check(...t)})},check(...t){return t.length===0&&t.push(!0),X_(pl("agChartsDebug")).some(i=>t.includes(i))}},wZ=new Set(["map-shape-background","map-line-background"]),c6=class{constructor(t,e){var i,s,r;const n={shallow:["data"]},o=Fr(t,n),a=this.optionsType(o);this.sanityCheckAndCleanup(o),this.userOptions=o,this.activeTheme=CD(o.theme),this.defaultAxes=this.getDefaultAxes(o),this.specialOverrides=this.specialOverridesDefaults(Se({},e));const l=this.getSeriesThemeConfig(a),{axes:c={},annotations:u={},series:d}=l,h=xs(l,["axes","annotations","series"]);this.processedOptions=Fr(Jt(this.userOptions,h,this.defaultAxes),n),this.processAxesOptions(this.processedOptions,c),this.processSeriesOptions(this.processedOptions),this.processMiniChartSeriesOptions(this.processedOptions),this.processAnnotationsOptions(this.processedOptions,u),(eh(this.processedOptions)||OX(this.processedOptions))&&((i=this.processedOptions.legend)==null?void 0:i.enabled)==null&&((r=(s=this.processedOptions).legend)!=null||(s.legend={}),this.processedOptions.legend.enabled=this.processedOptions.series.length>1),this.enableConfiguredOptions(this.processedOptions),Nf.isEnterprise||VX(this.processedOptions)}getOptions(){var t;return(t=this.processedOptions)!=null?t:{}}diffOptions(t){return Ho(t,this.processedOptions)}getSeriesThemeConfig(t){var e,i;return Fr((i=(e=this.activeTheme)==null?void 0:e.config[t])!=null?i:{})}getDefaultAxes(t){const e=this.optionsType(t),i=$n.cloneDefaultAxes(e);return $n.isDefaultAxisSwapNeeded(t)&&this.swapAxesPosition(i),i}optionsType(t){var e,i,s;return(s=(i=(e=t.series)==null?void 0:e[0])==null?void 0:i.type)!=null?s:"line"}sanityCheckAndCleanup(t){var e;this.deprecationWarnings(t),this.axesTypeIntegrity(t),this.seriesTypeIntegrity(t),this.soloSeriesIntegrity(t),this.removeDisabledOptions(t),this.removeLeftoverSymbols(t),(e=t.series)!=null&&e.some(i=>i.type==="bullet")&&t.sync!=null&&t.sync.enabled!==!1&&(Be.warnOnce("bullet series cannot be synced, disabling synchronization."),delete t.sync)}swapAxesPosition(t){var e;if(eh(t)){const[i,s]=(e=t.axes)!=null?e:[];t.axes=[qe(Se({},i),{position:s.position}),qe(Se({},s),{position:i.position})]}}processAxesOptions(t,e){"axes"in t&&(t.axes=t.axes.map(i=>{var s,r,n;const o=Jt((s=e[i.type])==null?void 0:s[i.position],e[i.type]),{crossLines:a}=o,l=xs(o,["crossLines"]);i.crossLines&&(i.crossLines=$_(i.crossLines,a));const c=(r=l.gridLine)==null?void 0:r.style;(n=i.gridLine)!=null&&n.style&&(c!=null&&c.length)&&(i.gridLine.style=i.gridLine.style.map((g,y)=>g.stroke!=null||g.lineDash!=null?Jt(g,c.at(y%c.length)):g));const u=Jt(i,l),{top:d,right:h,bottom:p,left:f}=u;return xs(u,["top","right","bottom","left"])}))}processSeriesOptions(t){const e=this.getDefaultSeriesType(t),i=this.getTooltipPositionDefaults(t),s=!!(pa(t.theme)&&t.theme.palette),r={colourIndex:0,userPalette:s},n=t.series.map(o=>{var a,l;(a=o.type)!=null||(o.type=e);const c=(l=this.getSeriesThemeConfig(o.type).series)!=null?l:{},{innerLabels:u}=c,d=xs(c,["innerLabels"]),h=wZ.has(o.type)?{colourIndex:0,userPalette:s}:r,p=this.getSeriesPalette(o.type,h),f=Jt(this.getSeriesGroupingOptions(o),o,i,d,p);return f.innerLabels&&(f.innerLabels=$_(f.innerLabels,u)),this.activeTheme.templateTheme(f)});t.series=this.setSeriesGroupingOptions(n)}processMiniChartSeriesOptions(t){var e,i;let s=(i=(e=t.navigator)==null?void 0:e.miniChart)==null?void 0:i.series;if(s==null)return;const r={colourIndex:0,userPalette:!!(pa(t.theme)&&t.theme.palette)};s=s.map(n=>{var o,a;(o=n.type)!=null||(n.type="line");const l=(a=this.getSeriesThemeConfig(n.type).series)!=null?a:{},{innerLabels:c}=l,u=xs(l,["innerLabels"]),d=Jt(this.getSeriesGroupingOptions(n),n,u,this.getSeriesPalette(n.type,r));return this.activeTheme.templateTheme(d)}),t.navigator.miniChart.series=this.setSeriesGroupingOptions(s)}processAnnotationsOptions(t,e){eh(t)}getSeriesPalette(t,e){const i=$n.getPaletteFactory(t),{colourIndex:s,userPalette:r}=e,{fills:n=[],strokes:o=[]}=this.activeTheme.palette;return i==null?void 0:i({userPalette:r,colorsCount:Math.max(n.length,o.length),themeTemplateParameters:this.activeTheme.getTemplateParameters(),takeColors(a){return e.colourIndex+=a,{fills:Z_(n,a,s),strokes:Z_(o,a,s)}}})}getSeriesGroupingOptions(t){const e=$n.isGroupable(t.type),i=$n.isStackable(t.type),s=$n.isStackedByDefault(t.type);t.grouped&&!e&&Be.warnOnce(`unsupported grouping of series type "${t.type}".`),(t.stacked||t.stackGroup)&&!i&&Be.warnOnce(`unsupported stacking of series type "${t.type}".`);let{grouped:r,stacked:n}=t;return n??(n=(s||t.stackGroup!=null)&&!(e&&r)),r??(r=!0),{stacked:i&&n,grouped:e&&r&&!(i&&n)}}setSeriesGroupingOptions(t){const e=this.getSeriesGrouping(t);is.create(!0,"opts")("setSeriesGroupingOptions() - series grouping: ",e);const i={},s=e.reduce((r,n)=>{var o,a;return n.groupType==="default"||((a=r[o=n.seriesType])!=null||(r[o]=0),r[n.seriesType]+=n.groupType==="stack"?1:n.series.length),r},{});return e.flatMap(r=>{var n,o;switch((o=i[n=r.seriesType])!=null||(i[n]=0),r.groupType){case"stack":const a=i[r.seriesType]++;return r.series.map((l,c)=>Object.assign(l,{seriesGrouping:{groupIndex:a,groupCount:s[r.seriesType],stackIndex:c,stackCount:r.series.length}}));case"group":return r.series.map(l=>Object.assign(l,{seriesGrouping:{groupIndex:i[r.seriesType]++,groupCount:s[r.seriesType],stackIndex:0,stackCount:0}}))}return r.series}).map(r=>{var n=r,{stacked:o,grouped:a}=n,l=xs(n,["stacked","grouped"]);return l})}getSeriesGroupId(t){var e;return[t.type,t.xKey,t.stacked?(e=t.stackGroup)!=null?e:"stacked":"grouped"].filter(Boolean).join("-")}getSeriesGrouping(t){const e=new Map;return t.reduce((i,s)=>{const r=s.type;if(!s.stacked&&!s.grouped)i.push({groupType:"default",seriesType:r,series:[s]});else{const n=this.getSeriesGroupId(s);if(!e.has(n)){const a={groupType:s.stacked?"stack":"group",seriesType:r,series:[]};e.set(n,a),i.push(a)}e.get(n).series.push(s)}return i},[])}getDefaultSeriesType(t){if(eh(t))return"line";if(Bx(t))return"pie";if(hD(t))return"treemap";if(pD(t))return"map-shape";throw new Error("Invalid chart options type detected.")}getTooltipPositionDefaults(t){var e;const i=(e=t.tooltip)==null?void 0:e.position;if(!Vo(i))return;const{type:s,xOffset:r,yOffset:n}=i,o={};return io(s)&&H5(oD,s)&&(o.type=s),gi(r)&&(o.xOffset=r),gi(n)&&(o.yOffset=n),{tooltip:{position:o}}}deprecationWarnings(t){Object.entries({yKeys:"yKey",yNames:"yName"}).forEach(([i,s])=>{var r;(r=t.series)!=null&&r.some(n=>n[i]!=null)&&Be.warnOnce(`Property [series.${i}] is deprecated, please use [series.${s}] and multiple series instead.`)})}axesTypeIntegrity(t){var e;if("axes"in t){const i=(e=t.axes)!=null?e:[];for(const{type:s}of i)if(!BX(s)){delete t.axes;const r=Array.from(Lu.publicKeys()).join(", ");Be.warnOnce(`unknown axis type: ${s}; expected one of: ${r}`)}}}seriesTypeIntegrity(t){var e;const i=(e=t.series)!=null?e:[];t.series=i.filter(({type:s})=>{if(s==null||GX(s)||MX(s))return!0;Be.warnOnce(`unknown series type: ${s}; expected one of: ${W5.seriesTypes.join(", ")}`)})}soloSeriesIntegrity(t){const e=t.series;if(e&&e.length>1&&e.some(i=>$n.isSolo(i.type))){const i=this.optionsType(t);if($n.isSolo(i))Be.warn(`series[0] of type '${i}' is incompatible with other series types. Only processing series[0]`),t.series=e.slice(0,1);else{const{solo:s,nonSolo:r}=wD(e,o=>$n.isSolo(o.type)?"solo":"nonSolo"),n=bD(s.map(o=>o.type)).join(", ");Be.warn(`Unable to mix these series types with the lead series type: ${n}`),t.series=r}}}enableConfiguredOptions(t){qa(this.userOptions,(e,i)=>{i&&"enabled"in i&&!i._enabledFromTheme&&e.enabled==null&&(i.enabled=!0)},{skip:["data","theme"]},t),qa(t,e=>{e._enabledFromTheme!=null&&delete e._enabledFromTheme},{skip:["data","theme"]})}removeDisabledOptions(t){qa(t,e=>{"enabled"in e&&e.enabled===!1&&Object.keys(e).forEach(i=>{i!=="enabled"&&delete e[i]})},{skip:["data","theme"]})}removeLeftoverSymbols(t){qa(t,e=>{if(!(!e||!pa(e)))for(const[i,s]of Object.entries(e))j5(s)&&delete e[i]},{skip:["data"]})}specialOverridesDefaults(t){if(t.window!=null?l6(t.window):typeof window<"u"?t.window=window:typeof global<"u"&&(t.window=global.window),t.document!=null?a6(t.document):typeof document<"u"?t.document=document:typeof global<"u"&&(t.document=global.document),t.window==null)throw new Error("AG Charts - unable to resolve global window");if(t.document==null)throw new Error("AG Charts - unable to resolve global document");return t}};function Vx(){return(t,e)=>{const i=[`Property [${t}] is deprecated.`,e].filter(Boolean).join(" ");Be.warnOnce(i)}}function cp(t,e){const i=Vx(),s=e==null?void 0:e.default;return pc((r,n,o)=>(o!==s&&i(n.toString(),t),o))}function SZ(t,e){const i=Vx();return pc((s,r,n)=>(n!==s[t]&&(i(r.toString(),`Use [${t}] instead.`),dD(s,t,e?e(n):n)),iS),(s,r)=>(i(r.toString(),`Use [${t}] instead.`),cD(s,t)))}var u6={};Cl(u6,{NODE_UPDATE_STATE_TO_PHASE_MAPPING:()=>Xr,fromToMotion:()=>Ji,staticFromToMotion:()=>Sl});var J_=new Map;function d6(){J_.clear()}function wl(t){var e;const i=t.constructor,s=Object.hasOwn(i,"className")?i.className:i.name;if(!s)throw new Error(`The ${i} is missing the 'className' property.`);const r=((e=J_.get(s))!=null?e:0)+1;return J_.set(s,r),`${s}-${r}`}var Hx="$interpolate",FF=t=>t[Hx]!=null;function Zt(t,e,i){return Math.min(i,Math.max(t,e))}function oS(t,e){const[i,s]=fa(e);return Zt(i,t,s)}function fa(t){return t.length?[Math.min(...t),Math.max(...t)]:[]}function Iy(t){const[e,i]=fa(t);return i-e}function dh(t,e,i=1e-10){return Math.abs(t-e)<i}function zC(t){return Math.sign(t)===-1||Object.is(t,-0)}function SD(t,e=2){const i=_t(10,e);return Math.round(t*i)/i}function jx(t,e=2){const i=Math.floor(Math.log(Math.abs(t))/Math.LN10);return i>=0||!isFinite(i)?t.toFixed(e):t.toFixed(Math.abs(i)-1+e)}function Ux(t,e){return Math.floor(t%e+(t<0?e:0))}function xD(t,e=10){const[,i=""]=(Math.abs(t)%1).toLocaleString("en-GB",{minimumFractionDigits:0,maximumFractionDigits:e}).split(".");return i.length}function Wx(t,e,i,s=1/0){const r={nearest:void 0,distanceSquared:s};for(const n of i){const o=n.distanceSquared(t,e);if(o===0)return{nearest:n,distanceSquared:0};o<r.distanceSquared&&(r.nearest=n,r.distanceSquared=o)}return r}function xZ(t,e,i,s=1/0){const{x:r,y:n}=i.transformPoint(t,e),o={nearest:void 0,distanceSquared:s};for(const a of i.children){const{nearest:l,distanceSquared:c}=a.nearestSquared(r,n,o.distanceSquared);if(c===0)return{nearest:l,distanceSquared:c};c<o.distanceSquared&&(o.nearest=l,o.distanceSquared=c)}return o}var Fy=class Zb{constructor(e,i,s,r){this.x=e,this.y=i,this.width=s,this.height=r}clone(){const{x:e,y:i,width:s,height:r}=this;return new Zb(e,i,s,r)}equals(e){return this.x===e.x&&this.y===e.y&&this.width===e.width&&this.height===e.height}containsPoint(e,i){return e>=this.x&&e<=this.x+this.width&&i>=this.y&&i<=this.y+this.height}collidesBBox(e){return this.x<e.x+e.width&&this.x+this.width>e.x&&this.y<e.y+e.height&&this.y+this.height>e.y}computeCenter(){return{x:this.x+this.width/2,y:this.y+this.height/2}}isFinite(){return Number.isFinite(this.x)&&Number.isFinite(this.y)&&Number.isFinite(this.width)&&Number.isFinite(this.height)}distanceSquared(e,i){if(this.containsPoint(e,i))return 0;const s=e-Zt(this.x,e,this.x+this.width),r=i-Zt(this.y,i,this.y+this.height);return s*s+r*r}static nearestBox(e,i,s){return Wx(e,i,s)}clip(e){if(e===void 0)return this;const i=Math.max(this.x,e.x),s=Math.max(this.y,e.y),r=Math.min(this.x+this.width,e.x+e.width),n=Math.min(this.y+this.height,e.y+e.height);return this.x=i,this.y=s,this.width=Math.max(0,r-i),this.height=Math.max(0,n-s),this}shrink(e,i){const s=(r,n)=>{switch(r){case"top":this.y+=n;case"bottom":this.height-=n;break;case"left":this.x+=n;case"right":this.width-=n;break;case"vertical":this.y+=n,this.height-=n*2;break;case"horizontal":this.x+=n,this.width-=n*2;break;case void 0:this.x+=n,this.width-=n*2,this.y+=n,this.height-=n*2;break}};return typeof e=="number"?s(i,e):typeof e=="object"&&Object.entries(e).forEach(([r,n])=>s(r,n)),this}grow(e,i){if(typeof e=="number")this.shrink(-e,i);else{const s=Se({},e);for(const r in s)s[r]*=-1;this.shrink(s)}return this}combine(e){const{x:i,y:s,width:r,height:n}=this;this.x=Math.min(i,e.x),this.y=Math.min(s,e.y),this.width=Math.max(i+r,e.x+e.width)-this.x,this.height=Math.max(s+n,e.y+e.height)-this.y}static merge(e){let i=1/0,s=1/0,r=-1/0,n=-1/0;for(const o of e)o.x<i&&(i=o.x),o.y<s&&(s=o.y),o.x+o.width>r&&(r=o.x+o.width),o.y+o.height>n&&(n=o.y+o.height);return new Zb(i,s,r-i,n-s)}[Hx](e,i){return new Zb(this.x*(1-i)+e.x*i,this.y*(1-i)+e.y*i,this.width*(1-i)+e.width*i,this.height*(1-i)+e.height*i)}};Fy.zero=new Fy(0,0,0,0);Fy.NaN=new Fy(NaN,NaN,NaN,NaN);var lt=Fy,bu=(t=>(t[t.NONE=0]="NONE",t[t.TRIVIAL=1]="TRIVIAL",t[t.MINOR=2]="MINOR",t[t.MAJOR=3]="MAJOR",t))(bu||{});function EZ(){try{return new Function("return true"),!0}catch{return!1}}var TZ=EZ();function Qe(t){const{changeCb:e,convertor:i}=t??{};return function(s,r){const n=`__${r}`;s[r]||(TZ&&e==null&&i==null?_Z(s,r,n,t):AZ(s,r,n,t))}}function _Z(t,e,i,s){const{redraw:r=1,type:n="normal",checkDirtyOnAssignment:o=!1}=s??{},a=new Function("value",`
        const oldValue = this.${i};
        if (value !== oldValue) {
            this.${i} = value;
            ${n==="normal"?`this.markDirty(this, ${r});`:""}
            ${n==="transform"?`this.markDirtyTransform(${r});`:""}
            ${n==="path"?`if (!this._dirtyPath) { this._dirtyPath = true; this.markDirty(this, ${r}); }`:""}
            ${n==="font"?`if (!this._dirtyFont) { this._dirtyFont = true; this.markDirty(this, ${r}); }`:""}
        }
        ${o?"if (value != null && value._dirty > 0) { this.markDirty(value, value._dirty); }":""}
`),l=new Function(`return this.${i};`);Object.defineProperty(t,e,{set:a,get:l,enumerable:!0,configurable:!0})}function AZ(t,e,i,s){const{redraw:r=1,type:n="normal",changeCb:o,convertor:a,checkDirtyOnAssignment:l=!1}=s??{};Object.defineProperty(t,e,{set:function(d){const h=this[i];d=a?a(d):d,d!==h&&(this[i]=d,n==="normal"&&this.markDirty(this,r),n==="transform"&&this.markDirtyTransform(r),n==="path"&&!this._dirtyPath&&(this._dirtyPath=!0,this.markDirty(this,r)),n==="font"&&!this._dirtyFont&&(this._dirtyFont=!0,this.markDirty(this,r)),o==null||o(this)),l&&d!=null&&d._dirty>0&&this.markDirty(d,d._dirty)},get:function(){return this[i]},enumerable:!0,configurable:!0})}var RZ=class{constructor(){this._dirty=3}markDirty(t,e=1){this._dirty<e&&(this._dirty=e)}markClean(t){this._dirty=0}isDirty(){return this._dirty>0}},Q_=class hv{get e(){return[...this.elements]}constructor(e=[1,0,0,1,0,0]){this.elements=e}setElements(e){const i=this.elements;return i[0]=e[0],i[1]=e[1],i[2]=e[2],i[3]=e[3],i[4]=e[4],i[5]=e[5],this}get identity(){const e=this.elements;return e[0]===1&&e[1]===0&&e[2]===0&&e[3]===1&&e[4]===0&&e[5]===0}AxB(e,i,s){const r=e[0]*i[0]+e[2]*i[1],n=e[1]*i[0]+e[3]*i[1],o=e[0]*i[2]+e[2]*i[3],a=e[1]*i[2]+e[3]*i[3],l=e[0]*i[4]+e[2]*i[5]+e[4],c=e[1]*i[4]+e[3]*i[5]+e[5];s=s??e,s[0]=r,s[1]=n,s[2]=o,s[3]=a,s[4]=l,s[5]=c}multiplySelf(e){return this.AxB(this.elements,e.elements),this}multiply(e){const i=new Array(6);return this.AxB(this.elements,e.elements,i),new hv(i)}preMultiplySelf(e){return this.AxB(e.elements,this.elements,this.elements),this}inverse(){const e=this.elements;let i=e[0],s=e[1],r=e[2],n=e[3];const o=e[4],a=e[5],l=1/(i*n-s*r);return i*=l,s*=l,r*=l,n*=l,new hv([n,-s,-r,i,r*a-n*o,s*o-i*a])}inverseTo(e){const i=this.elements;let s=i[0],r=i[1],n=i[2],o=i[3];const a=i[4],l=i[5],c=1/(s*o-r*n);return s*=c,r*=c,n*=c,o*=c,e.setElements([o,-r,-n,s,n*l-o*a,r*a-s*l]),this}invertSelf(){const e=this.elements;let i=e[0],s=e[1],r=e[2],n=e[3];const o=e[4],a=e[5],l=1/(i*n-s*r);return i*=l,s*=l,r*=l,n*=l,e[0]=n,e[1]=-s,e[2]=-r,e[3]=i,e[4]=r*a-n*o,e[5]=s*o-i*a,this}transformPoint(e,i){const s=this.elements;return{x:e*s[0]+i*s[2]+s[4],y:e*s[1]+i*s[3]+s[5]}}transformBBox(e,i){const s=this.elements,r=s[0],n=s[1],o=s[2],a=s[3],l=e.width*.5,c=e.height*.5,u=e.x+l,d=e.y+c,h=Math.abs(l*r)+Math.abs(c*o),p=Math.abs(l*n)+Math.abs(c*a);return i||(i=new lt(0,0,0,0)),i.x=u*r+d*o+s[4]-h,i.y=u*n+d*a+s[5]-p,i.width=h+h,i.height=p+p,i}toContext(e){if(this.identity)return;const i=this.elements;e.transform(i[0],i[1],i[2],i[3],i[4],i[5])}static flyweight(e){return hv.instance.setElements(e.elements)}static updateTransformMatrix(e,i,s,r,n,o,a){const[l,c]=[0,0],u=i,d=s;let h,p;u===1&&d===1?(h=0,p=0):(h=(a==null?void 0:a.scalingCenterX)==null?l:a==null?void 0:a.scalingCenterX,p=(a==null?void 0:a.scalingCenterY)==null?c:a==null?void 0:a.scalingCenterY);const f=r,m=Math.cos(f),g=Math.sin(f);let y,v;f===0?(y=0,v=0):(y=(a==null?void 0:a.rotationCenterX)==null?l:a==null?void 0:a.rotationCenterX,v=(a==null?void 0:a.rotationCenterY)==null?c:a==null?void 0:a.rotationCenterY);const C=n,b=o,T=h*(1-u)-y,A=p*(1-d)-v;return e.setElements([m*u,g*u,-g*d,m*d,m*T-g*A+y+C,g*T+m*A+v+b]),e}static fromContext(e){const i=e.getTransform();return new hv([i.a,i.b,i.c,i.d,i.e,i.f])}};Q_.instance=new Q_;var Xa=Q_,h6=(t=>(t[t.All=0]="All",t[t.None=1]="None",t))(h6||{}),Vn=class p6 extends RZ{constructor({isVirtual:e,tag:i,zIndex:s}={}){super(),this.serialNumber=p6._nextSerialNumber++,this.id=wl(this),this.isContainerNode=!1,this._virtualChildren=[],this._children=[],this.childSet={},this.matrix=new Xa,this.dirtyTransform=!1,this.scalingX=1,this.scalingY=1,this.scalingCenterX=null,this.scalingCenterY=null,this.rotationCenterX=null,this.rotationCenterY=null,this.rotation=0,this.translationX=0,this.translationY=0,this._childNodeCounts={groups:0,nonGroups:0},this.visible=!0,this.dirtyZIndex=!1,this.zIndex=0,this.zIndexSubOrder=void 0,this.pointerEvents=0,this.isVirtual=e??!1,this.tag=i??NaN,this.zIndex=s??0}get datum(){var e,i;return(i=this._datum)!=null?i:(e=this._parent)==null?void 0:e.datum}get previousDatum(){return this._previousDatum}set datum(e){this._datum!==e&&(this._previousDatum=this._datum),this._datum=e}_setLayerManager(e){this._layerManager=e,this._debug=e==null?void 0:e.debug;for(const i of this._children)i._setLayerManager(e);for(const i of this._virtualChildren)i._setLayerManager(e)}get layerManager(){return this._layerManager}*ancestors(){let e=this;for(;e=e.parent;)yield e}*traverseUp(){yield this,yield*nD(this.ancestors())}get parent(){return this._parent}get children(){return this._virtualChildren.length?this._children.concat(this._virtualChildren.flatMap(e=>e.children)):this._children}get virtualChildren(){return this._virtualChildren}hasVirtualChildren(){return this._virtualChildren.length>0}setProperties(e,i){const s=i??Object.keys(e);for(const r of s)this[r]=e[r];return this}append(e){Array.isArray(e)||(e=[e]);for(const i of e){if(i.parent)throw new Error(`${i} already belongs to another parent: ${i.parent}.`);if(i.layerManager)throw new Error(`${i} already belongs to a scene: ${i.layerManager}.`);if(this.childSet[i.id])throw new Error(`Duplicate ${i.constructor.name} node: ${i}`);i.isVirtual?this._virtualChildren.push(i):this._children.push(i),this.childSet[i.id]=!0,i._parent=this,i._setLayerManager(this.layerManager)}this.dirtyZIndex=!0,this.markDirty(this,3)}appendChild(e){return this.append(e),e}removeChild(e){const i=()=>{throw new Error("The node to be removed is not a child of this node.")};if(e.parent!==this&&i(),e.isVirtual){const s=this._virtualChildren.indexOf(e);s<0&&i(),this._virtualChildren.splice(s,1)}else{const s=this._children.indexOf(e);s<0&&i(),this._children.splice(s,1)}return delete this.childSet[e.id],e._parent=void 0,e._setLayerManager(),this.dirtyZIndex=!0,this.markDirty(e,3),e}calculateCumulativeMatrix(){this.computeTransformMatrix();const e=Xa.flyweight(this.matrix);for(const i of this.ancestors())i.computeTransformMatrix(),e.preMultiplySelf(i.matrix);return e}transformPoint(e,i){return this.calculateCumulativeMatrix().invertSelf().transformPoint(e,i)}inverseTransformPoint(e,i){return this.calculateCumulativeMatrix().transformPoint(e,i)}transformBBox(e){return this.calculateCumulativeMatrix().invertSelf().transformBBox(e)}inverseTransformBBox(e){return this.calculateCumulativeMatrix().transformBBox(e)}markDirtyTransform(){this.dirtyTransform=!0,this.markDirty(this,3)}containsPoint(e,i){return!1}pickNode(e,i){var s;if(!this.visible||this.pointerEvents===1||!this.containsPoint(e,i))return;const{children:r}=this;if(r.length>1e3)for(let n=r.length-1;n>=0;n--){const o=r[n],l=((s=o.computeTransformedBBox())==null?void 0:s.containsPoint(e,i))?o.pickNode(e,i):void 0;if(l)return l}else if(r.length)for(let n=r.length-1;n>=0;n--){const o=r[n].pickNode(e,i);if(o)return o}else if(!this.isContainerNode)return this}getCachedBBox(){var e;return(e=this.cachedBBox)!=null?e:lt.zero}computeBBox(){}computeTransformedBBox(){const e=this.computeBBox();if(!e)return;this.computeTransformMatrix();const i=Xa.flyweight(this.matrix);for(const s of this.ancestors())s.computeTransformMatrix(),i.preMultiplySelf(s.matrix);return i.transformBBox(e,e),e}computeTransformMatrix(){if(!this.dirtyTransform)return;const{matrix:e,scalingX:i,scalingY:s,rotation:r,translationX:n,translationY:o,scalingCenterX:a,scalingCenterY:l,rotationCenterX:c,rotationCenterY:u}=this;Xa.updateTransformMatrix(e,i,s,r,n,o,{scalingCenterX:a,scalingCenterY:l,rotationCenterX:c,rotationCenterY:u}),this.dirtyTransform=!1}preRender(){this._childNodeCounts.groups=0,this._childNodeCounts.nonGroups=1;for(const e of this.children){const i=e.preRender();this._childNodeCounts.groups+=i.groups,this._childNodeCounts.nonGroups+=i.nonGroups}return this._childNodeCounts}render(e){const{stats:i}=e;this._dirty=0,this.cachedBBox=this.computeBBox(),i&&i.nodesRendered++}markDirty(e,i=1,s=i){this._dirty>i||this._dirty===i&&i===s||(this._dirty=i,this.parent?this.parent.markDirty(this,s):this.layerManager&&this.layerManager.markDirty())}get dirty(){return this._dirty}markClean(e){const{force:i=!1,recursive:s=!0}=e??{};if(!(this._dirty===0&&!i)){if(this._dirty=0,s!==!1)for(const r of this._virtualChildren)r.markClean({force:i});if(s===!0)for(const r of this._children)r.markClean({force:i})}}onVisibleChange(){}get nodeCount(){let e=1,i=this._dirty>=0||this.dirtyTransform?1:0,s=this.visible?1:0;const r=n=>{const{count:o,visibleCount:a,dirtyCount:l}=n.nodeCount;e+=o,s+=a,i+=l};for(const n of this._children)r(n);for(const n of this._virtualChildren)r(n);return{count:e,visibleCount:s,dirtyCount:i}}onZIndexChange(){this.parent&&(this.parent.dirtyZIndex=!0)}};Vn._nextSerialNumber=0;q([Qe({type:"transform"})],Vn.prototype,"scalingX",2);q([Qe({type:"transform"})],Vn.prototype,"scalingY",2);q([Qe({type:"transform"})],Vn.prototype,"scalingCenterX",2);q([Qe({type:"transform"})],Vn.prototype,"scalingCenterY",2);q([Qe({type:"transform"})],Vn.prototype,"rotationCenterX",2);q([Qe({type:"transform"})],Vn.prototype,"rotationCenterY",2);q([Qe({type:"transform"})],Vn.prototype,"rotation",2);q([Qe({type:"transform"})],Vn.prototype,"translationX",2);q([Qe({type:"transform"})],Vn.prototype,"translationY",2);q([Qe({redraw:3,changeCb:t=>t.onVisibleChange()})],Vn.prototype,"visible",2);q([Qe({redraw:1,changeCb:t=>t.onZIndexChange()})],Vn.prototype,"zIndex",2);q([Qe({redraw:1,changeCb:t=>t.onZIndexChange()})],Vn.prototype,"zIndexSubOrder",2);var im=Vn,J1=t=>{const e=t<0?-1:1,i=Math.abs(t);return i<=.04045?t/12.92:e*_t((i+.055)/1.055,2.4)},Q1=t=>{const e=t<0?-1:1,i=Math.abs(t);return i>.0031308?e*(1.055*_t(i,1/2.4)-.055):12.92*t},ED=class pi{constructor(e,i,s,r=1){this.r=Zt(0,e||0,1),this.g=Zt(0,i||0,1),this.b=Zt(0,s||0,1),this.a=Zt(0,r||0,1)}static validColorString(e){return e.indexOf("#")>=0?!!pi.parseHex(e):e.indexOf("rgb")>=0?!!pi.stringToRgba(e):!!pi.nameToHex[e.toLowerCase()]}static fromString(e){if(e.indexOf("#")>=0)return pi.fromHexString(e);const i=pi.nameToHex[e.toLowerCase()];if(i)return pi.fromHexString(i);if(e.indexOf("rgb")>=0)return pi.fromRgbaString(e);throw new Error(`Invalid color string: '${e}'`)}static tryParseFromString(e){try{return pi.fromString(e)}catch{return Be.warnOnce(`invalid color string: '${e}'.`),pi.fromArray([0,0,0])}}static parseHex(e){e=e.replace(/ /g,"").slice(1);let i;switch(e.length){case 6:case 8:i=[];for(let s=0;s<e.length;s+=2)i.push(parseInt(`${e[s]}${e[s+1]}`,16));break;case 3:case 4:i=e.split("").map(s=>parseInt(s,16)).map(s=>s+s*16);break}if((i==null?void 0:i.length)>=3&&i.every(s=>s>=0))return i.length===3&&i.push(255),i}static fromHexString(e){const i=pi.parseHex(e);if(i){const[s,r,n,o]=i;return new pi(s/255,r/255,n/255,o/255)}throw new Error(`Malformed hexadecimal color string: '${e}'`)}static stringToRgba(e){let[i,s]=[NaN,NaN];for(let a=0;a<e.length;a++){const l=e[a];if(!i&&l==="(")i=a;else if(l===")"){s=a;break}}const r=i&&s&&e.substring(i+1,s);if(!r)return;const n=r.split(","),o=[];for(let a=0;a<n.length;a++){const l=n[a];let c=parseFloat(l);if(isNaN(c))return;l.indexOf("%")>=0?(c=Zt(0,c,100),c/=100):a===3?c=Zt(0,c,1):(c=Zt(0,c,255),c/=255),o.push(c)}return o}static fromRgbaString(e){const i=pi.stringToRgba(e);if(i){if(i.length===3)return new pi(i[0],i[1],i[2]);if(i.length===4)return new pi(i[0],i[1],i[2],i[3])}throw new Error(`Malformed rgb/rgba color string: '${e}'`)}static fromArray(e){if(e.length===4)return new pi(e[0],e[1],e[2],e[3]);if(e.length===3)return new pi(e[0],e[1],e[2]);throw new Error("The given array should contain 3 or 4 color components (numbers).")}static fromHSB(e,i,s,r=1){const n=pi.HSBtoRGB(e,i,s);return new pi(n[0],n[1],n[2],r)}static fromHSL(e,i,s,r=1){const n=pi.HSLtoRGB(e,i,s);return new pi(n[0],n[1],n[2],r)}static fromOKLCH(e,i,s,r=1){const n=pi.OKLCHtoRGB(e,i,s);return new pi(n[0],n[1],n[2],r)}static padHex(e){return e.length===1?"0"+e:e}toHexString(){let e="#"+pi.padHex(Math.round(this.r*255).toString(16))+pi.padHex(Math.round(this.g*255).toString(16))+pi.padHex(Math.round(this.b*255).toString(16));return this.a<1&&(e+=pi.padHex(Math.round(this.a*255).toString(16))),e}toRgbaString(e=3){const i=[Math.round(this.r*255),Math.round(this.g*255),Math.round(this.b*255)],s=Math.pow(10,e);return this.a!==1?(i.push(Math.round(this.a*s)/s),`rgba(${i.join(", ")})`):`rgb(${i.join(", ")})`}toString(){return this.a===1?this.toHexString():this.toRgbaString()}toHSB(){return pi.RGBtoHSB(this.r,this.g,this.b)}static RGBtoOKLCH(e,i,s){const r=J1(e),n=J1(i),o=J1(s),a=Math.cbrt(.4122214708*r+.5363325363*n+.0514459929*o),l=Math.cbrt(.2119034982*r+.6806995451*n+.1073969566*o),c=Math.cbrt(.0883024619*r+.2817188376*n+.6299787005*o),u=.2104542553*a+.793617785*l-.0040720468*c,d=1.9779984951*a-2.428592205*l+.4505937099*c,h=.0259040371*a+.7827717662*l-.808675766*c,p=Math.atan2(h,d)*180/Math.PI,f=u,m=Math.hypot(d,h),g=p>=0?p:p+360;return[f,m,g]}static OKLCHtoRGB(e,i,s){const r=e,n=i*Math.cos(s*Math.PI/180),o=i*Math.sin(s*Math.PI/180),a=_t(r+.3963377774*n+.2158037573*o,3),l=_t(r-.1055613458*n-.0638541728*o,3),c=_t(r-.0894841775*n-1.291485548*o,3),u=4.0767416621*a-3.3077115913*l+.2309699292*c,d=-1.2684380046*a+2.6097574011*l-.3413193965*c,h=-.0041960863*a-.7034186147*l+1.707614701*c,p=Q1(u),f=Q1(d),m=Q1(h);return[p,f,m]}static RGBtoHSL(e,i,s){const r=Math.min(e,i,s),n=Math.max(e,i,s),o=(n+r)/2;let a,l;if(n===r)a=NaN,l=0;else{const c=n-r;l=o>.5?c/(2-n-r):c/(n+r),n===e?a=(i-s)/c+(i<s?6:0):n===i?a=(s-e)/c+2:a=(e-i)/c+4,a*=360/6}return[a,l,o]}static HSLtoRGB(e,i,s){if(i===0)return[s,s,s];const r=s<.5?s*(1+i):s+i-s*i,n=2*s-r;function o(u){return u<0&&(u+=1),u>1&&(u-=1),u<1/6?n+(r-n)*6*u:u<1/2?r:u<2/3?n+(r-n)*(2/3-u)*6:n}const a=o(e/360+1/3),l=o(e/360),c=o(e/360-1/3);return[a,l,c]}static RGBtoHSB(e,i,s){const r=Math.min(e,i,s),n=Math.max(e,i,s),o=n===0?0:(n-r)/n;let a=NaN;if(r!==n){const l=n-r,c=(n-e)/l,u=(n-i)/l,d=(n-s)/l;e===n?a=d-u:i===n?a=2+c-d:a=4+u-c,a/=6,a<0&&(a=a+1)}return[a*360,o,n]}static HSBtoRGB(e,i,s){isNaN(e)&&(e=0),e=(e%360+360)%360/360;let r=0,n=0,o=0;if(i===0)r=n=o=s;else{const a=(e-Math.floor(e))*6,l=a-Math.floor(a),c=s*(1-i),u=s*(1-i*l),d=s*(1-i*(1-l));switch(a>>0){case 0:r=s,n=d,o=c;break;case 1:r=u,n=s,o=c;break;case 2:r=c,n=s,o=d;break;case 3:r=c,n=u,o=s;break;case 4:r=d,n=c,o=s;break;case 5:r=s,n=c,o=u;break}}return[r,n,o]}derive(e,i,s,r){const n=pi.RGBtoHSB(this.r,this.g,this.b);let o=n[2];o==0&&s>1&&(o=.05);const a=((n[0]+e)%360+360)%360,l=Zt(0,n[1]*i,1);o=Zt(0,o*s,1);const c=Zt(0,this.a*r,1),u=pi.HSBtoRGB(a,l,o);return u.push(c),pi.fromArray(u)}brighter(){return this.derive(0,1,1/.7,1)}darker(){return this.derive(0,1,.7,1)}static interpolate(e,i){const s=pi.tryParseFromString(e),r=pi.tryParseFromString(i);return n=>{const o=(l,c)=>l*(1-n)+c*n;return new pi(o(s.r,r.r),o(s.g,r.g),o(s.b,r.b),o(s.a,r.a)).toString()}}};ED.didDebug=!1;ED.nameToHex=Object.freeze({aliceblue:"#F0F8FF",antiquewhite:"#FAEBD7",aqua:"#00FFFF",aquamarine:"#7FFFD4",azure:"#F0FFFF",beige:"#F5F5DC",bisque:"#FFE4C4",black:"#000000",blanchedalmond:"#FFEBCD",blue:"#0000FF",blueviolet:"#8A2BE2",brown:"#A52A2A",burlywood:"#DEB887",cadetblue:"#5F9EA0",chartreuse:"#7FFF00",chocolate:"#D2691E",coral:"#FF7F50",cornflowerblue:"#6495ED",cornsilk:"#FFF8DC",crimson:"#DC143C",cyan:"#00FFFF",darkblue:"#00008B",darkcyan:"#008B8B",darkgoldenrod:"#B8860B",darkgray:"#A9A9A9",darkgreen:"#006400",darkgrey:"#A9A9A9",darkkhaki:"#BDB76B",darkmagenta:"#8B008B",darkolivegreen:"#556B2F",darkorange:"#FF8C00",darkorchid:"#9932CC",darkred:"#8B0000",darksalmon:"#E9967A",darkseagreen:"#8FBC8F",darkslateblue:"#483D8B",darkslategray:"#2F4F4F",darkslategrey:"#2F4F4F",darkturquoise:"#00CED1",darkviolet:"#9400D3",deeppink:"#FF1493",deepskyblue:"#00BFFF",dimgray:"#696969",dimgrey:"#696969",dodgerblue:"#1E90FF",firebrick:"#B22222",floralwhite:"#FFFAF0",forestgreen:"#228B22",fuchsia:"#FF00FF",gainsboro:"#DCDCDC",ghostwhite:"#F8F8FF",gold:"#FFD700",goldenrod:"#DAA520",gray:"#808080",green:"#008000",greenyellow:"#ADFF2F",grey:"#808080",honeydew:"#F0FFF0",hotpink:"#FF69B4",indianred:"#CD5C5C",indigo:"#4B0082",ivory:"#FFFFF0",khaki:"#F0E68C",lavender:"#E6E6FA",lavenderblush:"#FFF0F5",lawngreen:"#7CFC00",lemonchiffon:"#FFFACD",lightblue:"#ADD8E6",lightcoral:"#F08080",lightcyan:"#E0FFFF",lightgoldenrodyellow:"#FAFAD2",lightgray:"#D3D3D3",lightgreen:"#90EE90",lightgrey:"#D3D3D3",lightpink:"#FFB6C1",lightsalmon:"#FFA07A",lightseagreen:"#20B2AA",lightskyblue:"#87CEFA",lightslategray:"#778899",lightslategrey:"#778899",lightsteelblue:"#B0C4DE",lightyellow:"#FFFFE0",lime:"#00FF00",limegreen:"#32CD32",linen:"#FAF0E6",magenta:"#FF00FF",maroon:"#800000",mediumaquamarine:"#66CDAA",mediumblue:"#0000CD",mediumorchid:"#BA55D3",mediumpurple:"#9370DB",mediumseagreen:"#3CB371",mediumslateblue:"#7B68EE",mediumspringgreen:"#00FA9A",mediumturquoise:"#48D1CC",mediumvioletred:"#C71585",midnightblue:"#191970",mintcream:"#F5FFFA",mistyrose:"#FFE4E1",moccasin:"#FFE4B5",navajowhite:"#FFDEAD",navy:"#000080",oldlace:"#FDF5E6",olive:"#808000",olivedrab:"#6B8E23",orange:"#FFA500",orangered:"#FF4500",orchid:"#DA70D6",palegoldenrod:"#EEE8AA",palegreen:"#98FB98",paleturquoise:"#AFEEEE",palevioletred:"#DB7093",papayawhip:"#FFEFD5",peachpuff:"#FFDAB9",peru:"#CD853F",pink:"#FFC0CB",plum:"#DDA0DD",powderblue:"#B0E0E6",purple:"#800080",rebeccapurple:"#663399",red:"#FF0000",rosybrown:"#BC8F8F",royalblue:"#4169E1",saddlebrown:"#8B4513",salmon:"#FA8072",sandybrown:"#F4A460",seagreen:"#2E8B57",seashell:"#FFF5EE",sienna:"#A0522D",silver:"#C0C0C0",skyblue:"#87CEEB",slateblue:"#6A5ACD",slategray:"#708090",slategrey:"#708090",snow:"#FFFAFA",springgreen:"#00FF7F",steelblue:"#4682B4",tan:"#D2B48C",teal:"#008080",thistle:"#D8BFD8",tomato:"#FF6347",transparent:"#00000000",turquoise:"#40E0D0",violet:"#EE82EE",wheat:"#F5DEB3",white:"#FFFFFF",whitesmoke:"#F5F5F5",yellow:"#FFFF00",yellowgreen:"#9ACD32"});var Ka=ED;function pv(t,e){return i=>Number(t)*(1-i)+Number(e)*i}function MZ(t,e){if(typeof t=="string")try{t=Ka.fromString(t)}catch{t=Ka.fromArray([0,0,0])}if(typeof e=="string")try{e=Ka.fromString(e)}catch{e=Ka.fromArray([0,0,0])}const i=pv(t.r,e.r),s=pv(t.g,e.g),r=pv(t.b,e.b),n=pv(t.a,e.a);return o=>Ka.fromArray([i(o),s(o),r(o),n(o)]).toRgbaString()}var TD={};Cl(TD,{easeIn:()=>DZ,easeInOut:()=>PZ,easeInOutQuad:()=>LZ,easeInQuad:()=>IZ,easeOut:()=>Ly,easeOutQuad:()=>FZ,inverseEaseOut:()=>g6,linear:()=>f6});var f6=t=>t,DZ=t=>1-Math.cos(t*Math.PI/2),Ly=t=>Math.sin(t*Math.PI/2),PZ=t=>-(Math.cos(t*Math.PI)-1)/2,IZ=t=>t*t,FZ=t=>1-_t(1-t,2),LZ=t=>t<.5?2*t*t:1-_t(-2*t+2,2)/2,g6=t=>2*Math.asin(t)/Math.PI,aS=.2,ef=["initial","remove","update","add","trailing","end","none"],ky={initial:{animationDuration:1,animationDelay:0},add:{animationDuration:.25,animationDelay:.75},remove:{animationDuration:.25,animationDelay:0},update:{animationDuration:.5,animationDelay:.25},trailing:{animationDuration:aS,animationDelay:1,skipIfNoEarlierAnimations:!0},end:{animationDelay:1+aS,animationDuration:0,skipIfNoEarlierAnimations:!0},none:{animationDuration:0,animationDelay:0}},m6=(t=>(t.Loop="loop",t.Reverse="reverse",t))(m6||{});function kZ(t){return t.every(e=>e instanceof im)}function zx(t){return kZ(t)?{nodes:t,selections:[]}:{nodes:[],selections:t}}var v6=class{constructor(t){this.isComplete=!1,this.elapsed=0,this.iteration=0,this.isPlaying=!1,this.isReverse=!1;var e,i,s,r,n,o,a;this.id=t.id,this.groupId=t.groupId,this.autoplay=(e=t.autoplay)!=null?e:!0,this.ease=(i=t.ease)!=null?i:f6,this.phase=t.phase;const l=(s=t.duration)!=null?s:ky[this.phase].animationDuration;this.duration=l*t.defaultDuration,this.delay=((r=t.delay)!=null?r:0)*t.defaultDuration,this.onComplete=t.onComplete,this.onPlay=t.onPlay,this.onStop=t.onStop,this.onUpdate=t.onUpdate,this.interpolate=this.createInterpolator(t.from,t.to),this.from=t.from,t.skip===!0&&((n=this.onUpdate)==null||n.call(this,t.to,!1,this),(o=this.onStop)==null||o.call(this,this),(a=this.onComplete)==null||a.call(this,this),this.isComplete=!0),t.collapsable!==!1&&(this.duration=this.checkCollapse(t,this.duration))}checkCollapse(t,e){return t.from===t.to?0:(typeof t.from=="object"?Ho(t.from,t.to):null)?e:0}play(t=!1){var e,i;this.isPlaying||this.isComplete||(this.isPlaying=!0,(e=this.onPlay)==null||e.call(this,this),this.autoplay&&(this.autoplay=!1,t&&((i=this.onUpdate)==null||i.call(this,this.from,!0,this))))}pause(){this.isPlaying=!1}stop(){var t;this.isPlaying=!1,this.isComplete||(this.isComplete=!0,(t=this.onStop)==null||t.call(this,this))}update(t){var e,i;if(this.isComplete)return t;!this.isPlaying&&this.autoplay&&this.play(!0);const s=this.elapsed;if(this.elapsed+=t,this.delay>this.elapsed)return 0;const r=this.interpolate(this.isReverse?1-this.delta:this.delta);(e=this.onUpdate)==null||e.call(this,r,!1,this);const n=this.delay+this.duration;return this.elapsed>=n?(this.stop(),this.isComplete=!0,(i=this.onComplete)==null||i.call(this,this),t-(n-s)):0}get delta(){return this.ease(Zt(0,(this.elapsed-this.delay)/this.duration,1))}createInterpolator(t,e){if(typeof e!="object"||FF(e))return this.interpolateValue(t,e);const i=[];for(const s in e){const r=this.interpolateValue(t[s],e[s]);r!=null&&i.push([s,r])}return s=>{const r={};for(const[n,o]of i)r[n]=o(s);return r}}interpolateValue(t,e){if(!(t===void 0||e===void 0)){if(FF(t))return i=>t[Hx](e,i);try{switch(typeof t){case"number":return pv(t,e);case"string":return MZ(t,e);case"boolean":if(t===e)return()=>t;break}}catch{}throw new Error(`Unable to interpolate values: ${t}, ${e}`)}}},Xr={added:"add",updated:"update",removed:"remove",unknown:"initial","no-op":"none"};function Ji(t,e,i,s,r,n,o){const{fromFn:a,toFn:l,intermediateFn:c}=r,{nodes:u,selections:d}=zx(s),h=(f,m)=>{var g;let y,v=0,C=0;for(const b of m){const T=f[v]===b,A={last:C>=m.length-1,lastLive:v>=f.length-1,prev:m[C-1],prevFromProps:y,prevLive:f[v-1],next:m[C+1],nextLive:f[v+(T?1:0)]},I=`${t}_${e}_${b.id}`;i.stopByAnimationId(I);let D="unknown";T?n&&o&&(D=NZ(b,b.datum,n,o)):D="removed";const F=a(b,b.datum,D,A),{phase:B,start:U,finish:H,delay:R,duration:L}=F,_=xs(F,["phase","start","finish","delay","duration"]),w=l(b,b.datum,D,A),{phase:S,start:x,finish:E,delay:M,duration:O}=w,V=xs(w,["phase","start","finish","delay","duration"]),Y=H==null&&E==null;i.animate({id:I,groupId:t,phase:(g=B??S)!=null?g:"update",duration:L??O,delay:R??M,from:_,to:V,ease:Ly,collapsable:Y,onPlay:()=>{b.setProperties(Se(Se({},U),x))},onUpdate($){b.setProperties($),c&&b.setProperties(c(b,b.datum,D,A))},onStop:()=>{b.setProperties(Se(Se(Se(Se(Se(Se({},U),x),_),V),H),E))}}),T&&v++,C++,y=_}};let p=0;for(const f of d){const m=f.nodes(),g=m.filter(y=>!f.isGarbage(y));h(g,m),i.animate({id:`${t}_${e}_selection_${p}`,groupId:t,phase:"end",from:0,to:1,ease:Ly,onStop(){f.cleanup()}}),p++}h(u,u)}function Sl(t,e,i,s,r,n,o){const{nodes:a,selections:l}=zx(s),{start:c,finish:u,phase:d}=o,h=u==null;i.animate({id:`${t}_${e}`,groupId:t,phase:d??"update",from:r,to:n,ease:Ly,collapsable:h,onPlay:()=>{if(c){for(const p of a)p.setProperties(c);for(const p of l)for(const f of p.nodes())f.setProperties(c)}},onUpdate(p){for(const f of a)f.setProperties(p);for(const f of l)for(const m of f.nodes())m.setProperties(p)},onStop:()=>{for(const p of a)p.setProperties(Se(Se({},n),u));for(const p of l)for(const f of p.nodes())f.setProperties(Se(Se({},n),u))}})}function NZ(t,e,i,s){const r=i(t,e);return s.added.has(r)?"added":s.removed.has(r)?"removed":"updated"}var Za=Math.PI*2;function ys(t){return t%=Za,t+=Za,t%=Za,t}function y6(t){return t%=Za,t+=Za,t!==Za&&(t%=Za),t}function Ny(t){return t%=Za,t<-Math.PI?t+=Za:t>=Math.PI&&(t-=Za),t}function $C(t,e,i){const s=ys(t),r=ys(e),n=y6(i);return r<=n?r<=s&&s<=n:r<=s||s<=n}function Nr(t){return t/180*Math.PI}function OZ(t){return t/Math.PI*180}function $x(t,e){return t=ys(t),e=ys(e),e-t+(t>e?2*Math.PI:0)}function C6(t,e,i,s){const r=t+i*Math.cos(s),n=e+i*Math.sin(s);return{x:r,y:n}}var lr=(t,e)=>{const i=Symbol(String(e));t[i]=void 0,Object.defineProperty(t,e,{get(){return this[i]},set(s){this[i]!==s&&(this[i]=s,this.invalid=!0)},enumerable:!0,configurable:!1})},Kx=class b6{constructor(){this.type="band",this.invalid=!0,this.interval=void 0,this.index=new Map,this.ordinalRange=[],this._domain=[],this.range=[0,1],this._bandwidth=1,this._step=1,this._rawBandwidth=1,this._paddingInner=0,this._paddingOuter=0,this.round=!1}static is(e){return e instanceof b6}refresh(){this.invalid&&(this.invalid=!1,this.update(),this.invalid&&Be.warnOnce("Expected update to not invalidate scale"))}set domain(e){this.invalid=!0;const i=[];this.index=new Map;const s=this.index;e.forEach(r=>{this.getIndex(r)===void 0&&s.set(r,i.push(r)-1)}),this._domain=i}get domain(){return this._domain}ticks(){this.refresh();let{interval:e=1}=this;typeof e!="number"&&(e=Number(e));const i=Math.abs(Math.round(e));return this._domain.filter((s,r)=>r%i===0)}convert(e){this.refresh();const i=this.getIndex(e);if(i===void 0)return NaN;const s=this.ordinalRange[i];return s===void 0?NaN:s}invert(e){this.refresh();const i=this.ordinalRange.findIndex(s=>s===e);return this.domain[i]}invertNearest(e){var i;this.refresh();let s=-1,r=1/0;const n=this.ordinalRange.findIndex((o,a)=>{if(o===e)return!0;const l=Math.abs(e-o);return l<r&&(r=l,s=a),!1});return(i=this.domain[n])!=null?i:this.domain[s]}get bandwidth(){return this.refresh(),this._bandwidth}get step(){return this.refresh(),this._step}get rawBandwidth(){return this.refresh(),this._rawBandwidth}set padding(e){e=Zt(0,e,1),this._paddingInner=e,this._paddingOuter=e}get padding(){return this._paddingInner}set paddingInner(e){this._paddingInner=Zt(0,e,1)}get paddingInner(){return this._paddingInner}set paddingOuter(e){this._paddingOuter=Zt(0,e,1)}get paddingOuter(){return this._paddingOuter}update(){const e=this._domain.length;if(e===0)return;const i=this.round,s=this._paddingInner,r=this._paddingOuter,[n,o]=this.range,a=o-n,l=a/Math.max(1,e+2*r-s),c=i?Math.floor(l):l,u=c*(e-s),d=n+(a-u)/2,h=i?Math.round(d):d,p=c*(1-s),f=i?Math.round(p):p,m=l*(1-s),g=[];for(let y=0;y<e;y++)g.push(h+c*y);this._bandwidth=f,this._rawBandwidth=m,this._step=c,this.ordinalRange=g}getIndex(e){if(!(e instanceof Date))return this.index.get(e);const i=e.valueOf();let s=0;for(const r of this.index.keys()){if(r instanceof Date&&r.valueOf()===i)return s;s++}}};q([lr],Kx.prototype,"interval",2);q([lr],Kx.prototype,"range",2);q([lr],Kx.prototype,"round",2);var ku=Kx;function Ra(t,e=[void 0]){return pc((i,s,r)=>e.includes(r)?ap(t)?t(r):t:r)}function te(t,e={}){const{optional:i=!1,property:s}=e;return pc((r,n,o)=>{var a;const l=qe(Se({},e),{target:r,property:n});if(i&&typeof o>"u"||t(o,l))return ul(r[n])&&!ul(o)?(r[n].set(o),r[n]):o;const c=s??String(n).replace(/^_*/,""),u=(a=r.constructor.className)!=null?a:r.constructor.name.replace(/Properties$/,"");let d=Iv(o);const h=50;if(d!=null&&d.length>h){const p=d.length-h;d=d.slice(0,h)+`... (+${p} characters)`}return Be.warn(`Property [${c}] of [${u}] cannot be set to [${d}]${t.message?`; expecting ${KC(t,l)}`:""}, ignoring.`),iS},void 0,{optional:i})}var Yo=(...t)=>{const e=[];return Oi((i,s)=>(e.length=0,t.every(r=>{const n=r(i,s);return n||e.push(KC(r,s)),n})),()=>e.filter(Boolean).join(" AND "))},up=(...t)=>Oi((e,i)=>t.some(s=>s(e,i)),e=>t.map(zZ(e)).filter(Boolean).join(" OR ")),rt=A6(Oi((t,e)=>ul(t)||pa(t)&&ul(e.target[e.property]),"a properties object")),GZ=A6(Oi(t=>pa(t),"an object")),Et=Oi(G5,"a boolean"),go=Oi(ap,"a function"),$e=Oi(io,"a string"),Ui=KZ(Oi(gi,"a number")),Yx=Oi(t=>Qn(t)&&isNaN(t),"NaN"),Ge=Ui.restrict({min:0}),Si=Ui.restrict({min:0,max:1}),dd=Ui.restrict({min:-360,max:360}),sm=up(Ui,Yx),rm=$Z(Oi(Ns,"an array")),Ic=(t,e)=>Oi((i,s)=>Ns(i)&&i.every(r=>t(r,s)),i=>{var s;const r=(s=KC(rm,i))!=null?s:"";return e?`${r} of ${e}`:r}),lS=t=>gi(t)||HC(t),nm=t=>Oi((e,i)=>!lS(e)||!lS(i.target[t])||e<i.target[t],`to be less than ${t}`),om=t=>Oi((e,i)=>!lS(e)||!lS(i.target[t])||e>i.target[t],`to be greater than ${t}`),_D=Oi(HC,"Date object"),AD=up(_D,Ge),w6="A color string can be in one of the following formats to be valid: #rgb, #rrggbb, rgb(r, g, b), rgba(r, g, b, a) or a CSS color name such as 'white', 'orange', 'cyan', etc",mi=Oi(t=>io(t)&&Ka.validColorString(t),`color String. ${w6}`),qo=Oi(Ic(mi),`color strings. ${w6}`),BZ=Ic(Et,"boolean values"),qx=Ic(Ui,"numbers"),S6=Ic($e,"strings"),VZ=Oi(Ic(_D),"Date objects"),RD=Oi(Ic(rt),"objects"),x6=ls(["butt","round","square"],"a line cap"),HZ=ls(["round","bevel","miter"],"a line join"),Fc=Oi(Ic(Ge),"numbers specifying the length in pixels of alternating dashes and gaps, for example, [6, 3] means dashes with a length of 6 pixels with gaps between of 3 pixels."),MD=ls(["top","right","bottom","left"],"a position"),hd=ls(["normal","italic","oblique"],"a font style"),pd=up(ls(["normal","bold","bolder","lighter"],"a font weight"),Ui.restrict({min:1,max:1e3})),Xx=ls(["never","always","hyphenate","on-space"],"a text wrap strategy"),E6=ls(["left","center","right"],"a text align"),jZ=ls(["top","middle","bottom"],"a vertical align"),UZ=ls(["ellipsis","hide"],"an overflow strategy"),T6=ls(["horizontal","vertical"],"a direction"),_6=ls(["inside","outside"],"a placement"),DD=up(ls(["exact","nearest"],"interaction range"),Ui),PD=ls(["top","bottom","left","right"]);function ls(t,e="a"){return Oi(i=>t.includes(i),`${e} keyword such as ${WZ(t)}`)}var Zx=up(Yo(Ui.restrict({min:1}),nm("maxSpacing")),Yx),ID=up(Yo(Ui.restrict({min:1}),om("minSpacing")),Yx);function Oi(t,e){return t.message=e,t}function WZ(t){const e=t.map(s=>`'${s}'`);if(e.length===1)return e[0];const i=e.pop();return`${e.join(", ")} or ${i}`}function KC(t,e){return ap(t.message)?t.message(e):t.message}function zZ(t){return e=>KC(e,t)}function $Z(t){return Object.assign(t,{restrict({length:e,minLength:i}={}){let s="an array";return Qn(i)&&i>0?s="a non-empty array":Qn(e)&&(s=`an array of length ${e}`),Oi(r=>Ns(r)&&(Qn(e)?r.length===e:!0)&&(Qn(i)?r.length>=i:!0),s)}})}function KZ(t){return Object.assign(t,{restrict({min:e,max:i}={}){const s=["a number"],r=Qn(e),n=Qn(i);return r&&n?s.push(`between ${e} and ${i} inclusive`):r?s.push(`greater than or equal to ${e}`):n&&s.push(`less than or equal to ${i}`),Oi(o=>gi(o)&&(r?o>=e:!0)&&(n?o<=i:!0),s.join(" "))}})}function A6(t){return Object.assign(t,{restrict(e){return Oi(i=>i instanceof e,i=>{var s;return(s=KC(t,i))!=null?s:`an instance of ${e.name}`})}})}function Iv(t){if(typeof t=="number"){if(isNaN(t))return"NaN";if(t===1/0)return"Infinity";if(t===-1/0)return"-Infinity"}return JSON.stringify(t)}var YZ=Oi(t=>gi(t)&&t>0||t instanceof My,"a non-zero positive Number value or, for a time axis, a Time Interval such as 'agCharts.time.month'"),xl=class extends ti{constructor(){super(...arguments),this.enabled=!0,this.width=1,this.size=6,this.color=void 0,this.interval=void 0,this.values=void 0}};q([te(Et)],xl.prototype,"enabled",2);q([te(Ge)],xl.prototype,"width",2);q([te(Ge)],xl.prototype,"size",2);q([te(mi,{optional:!0})],xl.prototype,"color",2);q([te(YZ,{optional:!0})],xl.prototype,"interval",2);q([te(rm,{optional:!0})],xl.prototype,"values",2);var FD=(t=>(t.X="x",t.Y="y",t))(FD||{}),eA={constructedArrays:new WeakMap};function R6(t,e){var i;(i=eA.constructedArrays)==null||i.set(t,e)}var El=class tA{constructor(e,i){this.invalid=!0,this.nice=!1,this.interval=void 0,this.tickCount=tA.defaultTickCount,this.minTickCount=0,this.maxTickCount=1/0,this.niceDomain=[],this.defaultClampMode="raw",this.domain=e,this.range=i}static is(e){return e instanceof tA}transform(e){return e}transformInvert(e){return e}calcBandwidth(e=1){const{range:i}=this,s=this.getDomain(),r=Math.abs(i[1]-i[0]),n=Math.abs(s[1]-s[0])/e+1,o=Math.floor(r),a=Math.min(n,o);return r/Math.max(1,a)}getDomain(){return this.nice&&(this.refresh(),this.niceDomain.length)?this.niceDomain:this.domain}convert(e,i){var s;const r=(s=i==null?void 0:i.clampMode)!=null?s:this.defaultClampMode;if(!this.domain||this.domain.length<2)return NaN;this.refresh();const n=this.getDomain().map(d=>this.transform(d)),[o,a]=n,{range:l}=this,[c,u]=l;if(e=this.transform(e),r==="clamped"){const[d,h]=fa(n.map(Number));if(Number(e)<d)return c;if(Number(e)>h)return u}return o===a?(c+u)/2:e===o?c:e===a?u:c+(Number(e)-Number(o))/(Number(a)-Number(o))*(u-c)}invert(e){this.refresh();const i=this.getDomain().map(h=>this.transform(h)),[s,r]=i,{range:n}=this,[o,a]=n,l=o>a,c=l?a:o,u=l?o:a;let d;return e<c?l?r:s:e>u?l?s:r:(o===a?d=this.toDomain((Number(s)+Number(r))/2):d=this.toDomain(Number(s)+(e-o)/(a-o)*(Number(r)-Number(s))),this.transformInvert(d))}refresh(){this.invalid&&(this.invalid=!1,this.update(),this.invalid&&Be.warnOnce("Expected update to not invalidate scale"))}getPixelRange(){const[e,i]=this.range;return Math.abs(i-e)}};El.defaultTickCount=5;El.defaultMaxTickCount=6;q([lr],El.prototype,"domain",2);q([lr],El.prototype,"range",2);q([lr],El.prototype,"nice",2);q([lr],El.prototype,"interval",2);q([lr],El.prototype,"tickCount",2);q([lr],El.prototype,"minTickCount",2);q([lr],El.prototype,"maxTickCount",2);var Ei=El,db={days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]};function LD(t,e=new Date(t.getFullYear(),0,1)){const i=t.getTimezoneOffset()-e.getTimezoneOffset(),s=t.getTime()-e.getTime()+i*6e4,r=36e5*24;return Math.floor(s/r)}function LF(t,e){const s=new Date(t.getFullYear(),0,1).getDay(),r=(e-s+7)%7,n=new Date(t.getFullYear(),0,r+1);return n<=t?Math.floor(LD(t,n)/7)+1:0}var qZ=0,M6=1,kF=4;function D6(t,e=t.getFullYear()){const s=new Date(e,0,1).getDay(),r=(kF-s+7)%7,n=new Date(e,0,r-(kF-M6)+1);return n<=t?Math.floor(LD(t,n)/7)+1:D6(t,e-1)}function XZ(t){const e=t.getTimezoneOffset(),i=Math.abs(e);return`${e>0?"-":"+"}${ur(Math.floor(i/60),2,"0")}${ur(Math.floor(i%60),2,"0")}`}var ZZ={a:t=>db.shortDays[t.getDay()],A:t=>db.days[t.getDay()],b:t=>db.shortMonths[t.getMonth()],B:t=>db.months[t.getMonth()],c:"%x, %X",d:(t,e)=>ur(t.getDate(),2,e??"0"),e:"%_d",f:(t,e)=>ur(t.getMilliseconds()*1e3,6,e??"0"),H:(t,e)=>ur(t.getHours(),2,e??"0"),I:(t,e)=>{const i=t.getHours()%12;return i===0?"12":ur(i,2,e??"0")},j:(t,e)=>ur(LD(t)+1,3,e??"0"),m:(t,e)=>ur(t.getMonth()+1,2,e??"0"),M:(t,e)=>ur(t.getMinutes(),2,e??"0"),L:(t,e)=>ur(t.getMilliseconds(),3,e??"0"),p:t=>t.getHours()<12?"AM":"PM",Q:t=>String(t.getTime()),s:t=>String(Math.floor(t.getTime()/1e3)),S:(t,e)=>ur(t.getSeconds(),2,e??"0"),u:t=>{let e=t.getDay();return e<1&&(e+=7),String(e%7)},U:(t,e)=>ur(LF(t,qZ),2,e??"0"),V:(t,e)=>ur(D6(t),2,e??"0"),w:(t,e)=>ur(t.getDay(),2,e??"0"),W:(t,e)=>ur(LF(t,M6),2,e??"0"),x:"%-m/%-d/%Y",X:"%-I:%M:%S %p",y:(t,e)=>ur(t.getFullYear()%100,2,e??"0"),Y:(t,e)=>ur(t.getFullYear(),4,e??"0"),Z:t=>XZ(t),"%":()=>"%"},JZ={_:" ",0:"0","-":""};function ur(t,e,i){const s=String(Math.floor(t));return s.length>=e?s:`${i.repeat(e-s.length)}${s}`}function YC(t){const e=[];for(;t.length>0;){let i=t.indexOf("%");if(i!==0){const a=i>0?t.substring(0,i):t;e.push(a)}if(i<0)break;const s=t[i+1],r=JZ[s];r!=null&&i++;const n=t[i+1],o=ZZ[n];if(typeof o=="function")e.push([o,r]);else if(typeof o=="string"){const a=YC(o);e.push([a,r])}else e.push(`${r??""}${n}`);t=t.substring(i+2)}return i=>{const s=typeof i=="number"?new Date(i):i;return e.map(r=>typeof r=="string"?r:r[0](s,r[1])).join("")}}function Ds(t){return t instanceof Date?t.getTime():t}function kD(t,e){const i=P6(t,e);return s=>YC(i)(s)}function P6(t=[],e=t){let i=8;const s=c=>{c<i&&(i=c)};for(const c of t){const u=QZ(c);s(u)}const r=Ds(e[0]),n=Ds(e.at(-1)),o=new Date(r).getFullYear(),l=new Date(n).getFullYear()-o>0;return eJ(i,l,t)}function QZ(t){return av.floor(t)<t?0:lv.floor(t)<t?1:cv.floor(t)<t?2:z_.floor(t)<t?3:Bp.floor(t)<t?Kb.floor(t)<t?4:5:lD.floor(t)<t?6:8}function eJ(t,e,i){const s=Ds(i[0]),r=Ds(i.at(-1)),n=Math.abs(r-s),o=e||t===8,a=n===0,c=[["hour",6*Cn,14*hc,3,"%I %p"],["hour",kr,6*Cn,3,"%I:%M"],["second",1e3,6*Cn,1,":%S"],["ms",0,6*Cn,0,".%L"],["am/pm",kr,6*Cn,3,"%p"]," ",["day",hc,1*nu,4,"%a"],["month",a?0:nu,52*nu,5,"%b %d"],["month",5*nu,10*Dy,6,"%B"]," ",["year",o?0:Dy,1/0,8,"%Y"]].filter(h=>{if(typeof h=="string")return!0;const[p,f,m,g]=h;return g>=t&&f<=n&&n<m}).reduce((h,p)=>(typeof p=="string"?h.result.push(p):h.used.has(p[0])||(h.result.push(p),h.used.add(p[0])),h),{result:[],used:new Set}).result,u=c.findIndex(h=>typeof h!="string"),d=c.length-[...c].reverse().findIndex(h=>typeof h!="string");return c.slice(u,d).map(h=>typeof h=="string"?h:h[4]).join("").replaceAll(/\s+/g," ").trim()}var Oy=(t,e=[])=>Object.assign(e,{fractionDigits:t});function Jx(t,e,i,s,r){if(i<2)return Gy(t,e,e-t);const n=vg(t,e,i,s,r);return isNaN(n)?Oy(0):(t=Math.ceil(t/n)*n,e=Math.floor(e/n)*n,Gy(t,e,n))}var I6=[1,2,5,10];function vg(t,e,i,s=0,r=1/0){const n=Math.abs(e-t),o=n/i,a=Math.floor(Math.log10(o)),l=Math.pow(10,a),c=I6.map(u=>{const d=u*l,h=Math.ceil(n/d),p=h>=s&&h<=r,f=Math.abs(h-i);return{multiplier:u,isWithinBounds:p,diffCount:f}}).sort((u,d)=>u.isWithinBounds!==d.isWithinBounds?u.isWithinBounds?-1:1:u.diffCount-d.diffCount)[0].multiplier;return!c||isNaN(c)?NaN:c*l}function tJ(t,e){const i=Math.abs(e-t),s=Math.floor(Math.log10(i)),r=Math.pow(10,s),n=t>e?Math.ceil:Math.floor,o=e<t?Math.floor:Math.ceil;return I6.map(a=>{const l=a*r,c=n(t/l)*l,u=o(e/l)*l;return{error:1-i/Math.abs(u-c),domain:[c,u]}}).sort((a,l)=>a.error-l.error)[0].domain}function Gy(t,e,i){const s=Math.min(t,e),r=Math.max(t,e),n=xD(i),o=Math.pow(10,n),a=Math.ceil((r-s)/i),l=Oy(n);for(let c=0;c<=a;c++){const u=s+i*c;l.push(Math.round(u*o)/o)}return l}function By({start:t,stop:e,interval:i,count:s,availableRange:r}){const n=e-t;return s??(s=n/(typeof i=="number"?i:1)),s>=r?(Be.warnOnce("the configured interval results in more than 1 item per pixel, ignoring. Supply a larger interval or omit this configuration"),!0):!1}var F6=class gn extends Ei{constructor(){super([],[0,1]),this.type="time"}toDomain(e){return new Date(e)}static getTickInterval({start:e,stop:i,count:s,minCount:r,maxCount:n,target:o}){let a,l;const c=s??Ei.defaultTickCount,u=o??Math.abs(i-e)/Math.max(c,1),d=gn.getIntervalIndex(u);if(d===0)l=Math.max(vg(e,i,c,r,n),1),a=Vq;else if(d===gn.tickIntervals.length){const h=e/Dy,p=i/Dy;l=o===void 0?vg(h,p,c,r,n):1,a=lD}else{const h=u-gn.tickIntervals[d-1][2],p=gn.tickIntervals[d][2]-u,f=h<p?d-1:d;[a,l]=gn.tickIntervals[f]}return a.every(l)}static getIntervalIndex(e){let i=0;for(;i<gn.tickIntervals.length&&e>gn.tickIntervals[i][2];)i++;return i}invert(e){return new Date(super.invert(e))}ticks(){if(!this.domain||this.domain.length<2)return[];this.refresh();const[e,i]=this.getDomain().map(Ds),s=Math.min(e,i),r=Math.max(e,i),{interval:n,nice:o,tickCount:a,minTickCount:l,maxTickCount:c}=this;if(n!==void 0){const u=this.getPixelRange(),d=gn.getTicksForInterval({start:s,stop:r,interval:n,availableRange:u});return d??gn.getDefaultTicks({start:s,stop:r,tickCount:a,minTickCount:l,maxTickCount:c})}if(o){if(a===2)return this.niceDomain;if(a===1)return this.niceDomain.slice(0,1)}return gn.getDefaultTicks({start:s,stop:r,tickCount:a,minTickCount:l,maxTickCount:c})}static getDefaultTicks({start:e,stop:i,tickCount:s,minTickCount:r,maxTickCount:n}){const o=gn.getTickInterval({start:e,stop:i,count:s,minCount:r,maxCount:n});return o?o.range(new Date(e),new Date(i)):[]}static getTicksForInterval({start:e,stop:i,interval:s,availableRange:r}){if(!s)return[];if(s instanceof My){const d=s.range(new Date(e),new Date(i));return By({start:e,stop:i,interval:s,count:d.length,availableRange:r})?void 0:d}const n=Math.abs(s);if(By({start:e,stop:i,interval:n,availableRange:r}))return;const o=[...gn.tickIntervals];o.reverse();const a=o.find(d=>n%d[2]===0);if(a)return a[0].every(n/(a[2]/a[1])).range(new Date(e),new Date(i));let l=new Date(e);const c=new Date(i),u=[];for(;l<=c;)u.push(l),l=new Date(l),l.setMilliseconds(l.getMilliseconds()+n);return u}tickFormat({ticks:e,domain:i,specifier:s}){return s==null?kD(e,i):YC(s)}update(){!this.domain||this.domain.length<2||this.nice&&this.updateNiceDomain()}updateNiceDomain(){let[i,s]=this.domain;for(let r=0;r<4;r++){this.updateNiceDomainIteration(i,s);const[n,o]=this.niceDomain;if(Ds(i)===Ds(n)&&Ds(s)===Ds(o))break;i=n,s=o}}updateNiceDomainIteration(e,i){const s=Math.min(Ds(e),Ds(i)),r=Math.max(Ds(e),Ds(i)),n=e>i,{interval:o}=this;let a;if(o instanceof My)a=o;else{const l=typeof o=="number"?(r-s)/Math.max(o,1):this.tickCount;a=gn.getTickInterval({start:s,stop:r,count:l,minCount:this.minTickCount,maxCount:this.maxTickCount})}if(a){const l=a.range(new Date(s),new Date(r),!0),c=n?[...l].reverse():l,u=c[0],d=c.at(-1);this.niceDomain=[u,d]}}};F6.tickIntervals=[[av,1,Jd],[av,5,5*Jd],[av,15,15*Jd],[av,30,30*Jd],[lv,1,kr],[lv,5,5*kr],[lv,15,15*kr],[lv,30,30*kr],[cv,1,Cn],[cv,3,3*Cn],[cv,6,6*Cn],[cv,12,12*Cn],[z_,1,hc],[z_,2,2*hc],[Kb,1,nu],[Kb,2,2*nu],[Kb,3,3*nu],[Bp,1,Vm],[Bp,2,2*Vm],[Bp,3,3*Vm],[Bp,4,4*Vm],[Bp,6,6*Vm],[lD,1,Dy]];var th=F6,qC=class L6 extends ku{constructor(){super(...arguments),this.type="ordinal-time",this.tickCount=Ei.defaultTickCount,this.minTickCount=0,this.maxTickCount=1/0,this.interval=void 0,this.index=new Map,this._domain=[]}static is(e){return e instanceof L6}toDomain(e){return new Date(e)}set domain(e){if(this.invalid=!0,e.length===0){this._domain=[];return}const i=this.updateIndex(e);this._domain=i}get domain(){return this._domain}updateIndex(e){this.index=new Map;const{index:i}=this,s=[],r=[],n=e[0]>e.at(-1),o=n?0:1;e.forEach((y,v)=>{const C=e[v+1],b=n?y:this.toDomain(Ds(y)+1),T=n?this.toDomain(Ds(C)+1):C,A=n?[T,b]:[b,T];s.push(y),C!==void 0&&i.get(A)===void 0&&(r.push(Math.abs(Ds(T)-Ds(b))),i.set(A,v+o))}),r.sort((y,v)=>y-v);const a=r.length,l=Math.floor(a/2);this.medianInterval=a>2&&a%2===0?(r[l-1]+r[l+1])/2:r[l];const c=Math.max(0,th.getIntervalIndex(this.medianInterval)-1),[u,d]=th.tickIntervals[c],h=u.every(d),p=n?e.length-1:0,f=e[p],g=[h.floor(e[p]),f];return i.set(g,p),s}ticks(){if(!this.domain)return[];this.refresh();const[e,i]=[Ds(this.domain[0]),Ds(this.domain.at(-1))],s=Math.min(e,i),r=Math.max(e,i),n=e>i;let o;this.interval!==void 0&&(o=this.getTicksForInterval({start:s,stop:r,interval:this.interval}));const a=this.domain.length,{maxTickCount:l,tickCount:c}=this;let{minTickCount:u}=this,d;isFinite(l)&&a<=l&&(u=Math.max(1,a),d=this.medianInterval),o??(o=this.getDefaultTicks({start:s,stop:r,tickCount:c,minTickCount:u,maxTickCount:l,isReversed:n,interval:d}));const h=new Set;return o.filter(p=>{const f=this.convert(p);return isNaN(f)||h.has(f)?!1:(h.add(f),!0)})}getDefaultTicks({start:e,stop:i,tickCount:s,minTickCount:r,maxTickCount:n,isReversed:o,interval:a}){const l=th.getTickInterval({start:e,stop:i,count:s,minCount:r,maxCount:n,target:a});if(!l)return[];const c=Math.ceil(this.domain.length/n),u=[];for(const[d,h]of this.index.entries()){if(h%c>0)continue;const p=o?l.ceil(d[0]):l.floor(d[1]);u.splice(h,0,p)}return u}getTicksForInterval({start:e,stop:i,interval:s}){var r;const[n,o]=this.range,a=Math.abs(o-n);return(r=th.getTicksForInterval({start:e,stop:i,interval:s,availableRange:a}))!=null?r:[]}convert(e){if(typeof e=="number"&&(e=new Date(e)),!(e instanceof Date))return NaN;this.refresh();let i;for(const[r,n]of this.index.entries())if(e>=r[0]&&e<=r[1]){i=n;break}if(i===void 0)return NaN;const s=this.ordinalRange[i];return s===void 0?NaN:s}tickFormat({ticks:e,domain:i,specifier:s}){return s==null?kD(e,i):YC(s)}invert(e){return new Date(super.invert(e))}invertNearest(e){return new Date(super.invertNearest(e))}};q([lr],qC.prototype,"tickCount",2);q([lr],qC.prototype,"minTickCount",2);q([lr],qC.prototype,"maxTickCount",2);q([lr],qC.prototype,"interval",2);var Yl=qC;function k6(t,e){return typeof t=="number"&&typeof e=="number"?t-e:typeof t=="string"&&typeof e=="string"?t.localeCompare(e):t==null&&e==null?0:t==null?-1:e==null?1:String(t).localeCompare(String(e))}function NF(t){return typeof t=="function"?t():t}function N6(t,e,i){for(const s in t){const r=i(NF(t[s]),NF(e[s]));if(r!==0)return r}return 0}var ND=class Jb extends im{constructor(e){var i;super({isVirtual:e==null?void 0:e.isVirtual}),this.opts=e,this.opacity=1,this.lastBBox=void 0;const{zIndex:s,zIndexSubOrder:r}=e??{};this.isContainerNode=!0,s!==void 0&&(this.zIndex=s),r!==void 0&&(this.zIndexSubOrder=r),this.name=(i=this.opts)==null?void 0:i.name}static is(e){return e instanceof Jb}onZIndexChange(){var e;super.onZIndexChange(),this.layer&&((e=this._layerManager)==null||e.moveLayer(this.layer,this.zIndex,this.zIndexSubOrder))}isLayer(){return this.layer!=null}_setLayerManager(e){if(this._layerManager&&this.layer&&(this._layerManager.removeLayer(this.layer),this.layer=void 0),this.layer)throw new Error("AG Charts - unable to deregister scene rendering layer!");super._setLayerManager(e)}initialiseLayer(){var e;this.layer||!this._layerManager||((e=this.opts)==null?void 0:e.layer)!==!0||(this.layer=this._layerManager.addLayer({name:this.name,zIndex:this.zIndex,zIndexSubOrder:this.zIndexSubOrder,getComputedOpacity:()=>this.getComputedOpacity(),getVisibility:()=>this.getVisibility()}))}getComputedOpacity(){let e=1;for(const i of this.traverseUp())i instanceof Jb&&(e*=i.opacity);return e}getVisibility(){for(const e of this.traverseUp())if(!e.visible)return!1;return!0}onVisibleChange(){this.layer&&(this.layer.enabled=this.visible)}markDirty(e,i=1){if(this.isVirtual){super.markDirty(e,i);return}let s=i;(i<2||this.layer!=null)&&(s=1),super.markDirty(e,i,s)}containsPoint(e,i){return!0}computeBBox(){return this.computeTransformMatrix(),Jb.computeBBox(this.children)}computeTransformedBBox(){return this.computeBBox()}preRender(){var e,i;const s=super.preRender();return s.groups+=1,s.nonGroups-=1,((e=this.opts)==null?void 0:e.layer)!==!0||this.layer!=null||(s.nonGroups>0&&this.initialiseLayer(),(i=this.opts)!=null&&i.nonEmptyChildDerivedZIndex&&s.nonGroups>0&&this.deriveZIndexFromChildren()),s}deriveZIndexFromChildren(){var e;const i=this.children.filter(r=>r._childNodeCounts.nonGroups>0);this.sortChildren(i);const s=i.at(-1);this.zIndex=(e=s==null?void 0:s.zIndex)!=null?e:-1/0,this.zIndexSubOrder=s==null?void 0:s.zIndexSubOrder}render(e){var i,s;const{opts:{name:r=void 0}={},_debug:n}=this,{dirty:o,dirtyZIndex:a,layer:l,children:c,clipRect:u,dirtyTransform:d}=this;let{ctx:h,forceRender:p,clipBBox:f}=e;const{resized:m,stats:g}=e,y=h.getTransform(),v=o>=2||a||m;let C=v,b=!1;for(const B of c)if(C||(C=B.layerManager==null&&B.dirty>=1),b||(b=B.layerManager!=null&&B.dirty>=1),C)break;if(r&&(n==null||n({name:r,group:this,isDirty:v,isChildDirty:C,dirtyTransform:d,renderCtx:e,forceRender:p})),d)p="dirtyTransform";else if(l){const B=this.computeBBox();(this.lastBBox===void 0||!this.lastBBox.equals(B))&&(p="dirtyTransform",this.lastBBox=B)}if(!v&&!C&&!b&&!p){r&&g&&(n==null||n({name:r,result:"skipping",renderCtx:e,counts:this.nodeCount,group:this})),l&&g&&(g.layersSkipped++,g.nodesSkipped+=this.nodeCount.count),this.markClean({recursive:!1});return}const T=this.visible;if(l){if(h=l.context,h.save(),h.setTransform(l.pixelRatio,0,0,l.pixelRatio,0,0),p!=="dirtyTransform"&&(p=C||a),p&&l.clear(),f){const{width:B,height:U,x:H,y:R}=f;n==null||n(()=>({name:r,clipBBox:f,ctxTransform:h.getTransform(),renderCtx:e,group:this})),h.beginPath(),h.rect(H,R,B,U),h.clip()}h.setTransform(y)}else h.globalAlpha*=this.opacity;if(this.computeTransformMatrix(),this.matrix.toContext(h),u){const{x:B,y:U,width:H,height:R}=u;h.save(),n==null||n(()=>({name:r,clipRect:u,ctxTransform:h.getTransform(),renderCtx:e,group:this})),h.beginPath(),h.rect(B,U,H,R),h.clip(),f=this.matrix.transformBBox(u)}const A=this.hasVirtualChildren();a?(this.sortChildren(c),p!=="dirtyTransform"&&(p=!0)):A&&this.sortChildren(c);const D=p!==e.forceRender||f!==e.clipBBox||h!==e.ctx?qe(Se({},e),{ctx:h,forceRender:p,clipBBox:f}):e;let F=0;for(const B of c){if(!B.visible||!T){B.markClean(),g&&(F+=B.nodeCount.count);continue}if(!p&&B.dirty===0){g&&(F+=B.nodeCount.count);continue}h.save(),B.render(D),h.restore()}if(g&&(g.nodesSkipped+=F),super.render(e),u&&h.restore(),A)for(const B of this.virtualChildren)B.markClean({recursive:"virtual"});l&&(g&&g.layersRendered++,h.restore(),p&&l.snapshot(),(s=(i=l.context).verifyDepthZero)==null||s.call(i)),r&&g&&(n==null||n({name:r,result:"rendered",skipped:F,renderCtx:e,counts:this.nodeCount,group:this}))}sortChildren(e){this.dirtyZIndex=!1,e.sort((i,s)=>{var r,n;return N6([i.zIndex,...(r=i.zIndexSubOrder)!=null?r:[void 0,void 0],i.serialNumber],[s.zIndex,...(n=s.zIndexSubOrder)!=null?n:[void 0,void 0],s.serialNumber],k6)})}static computeBBox(e){let i=1/0,s=-1/0,r=1/0,n=-1/0;for(const o of e){if(!o.visible)continue;const a=o.computeTransformedBBox();if(!a)continue;const{x:l,y:c,width:u,height:d}=a;l<i&&(i=l),c<r&&(r=c),l+u>s&&(s=l+u),c+d>n&&(n=c+d)}return new lt(i,r,s-i,n-r)}setClipRectInGroupCoordinateSpace(e){this.clipRect=e?this.transformBBox(e):void 0}};ND.className="Group";q([Qe({redraw:3,convertor:t=>Zt(0,t,1)})],ND.prototype,"opacity",2);var ft=ND,iJ=class{constructor(t=[]){this.stops=t}},sJ=class extends iJ{constructor(t,e=0){super(t),this.angle=e}createGradient(t,e){const{stops:s,angle:r}=this,n=ys(Nr(r+90)),o=Math.cos(n),a=Math.sin(n),l=e.width,c=e.height,u=e.x+l*.5,d=e.y+c*.5;if(l>0&&c>0){const h=Math.sqrt(c*c+l*l)/2,p=Math.atan2(c,l);let f;n<Math.PI/2?f=n:n<Math.PI?f=Math.PI-n:n<1.5*Math.PI?f=n-Math.PI:f=2*Math.PI-n;const m=h*Math.abs(Math.cos(f-p)),g=t.createLinearGradient(u+o*m,d+a*m,u-o*m,d-a*m);for(const y of s)g.addColorStop(y.offset,y.color);return g}return"black"}},rJ=/^linear-gradient\((.*?)deg,\s*(.*?)\s*\)$/i,mo=class ja extends im{constructor(){super(...arguments),this.fillOpacity=1,this.strokeOpacity=1,this.fill=ja.defaultStyles.fill,this.stroke=ja.defaultStyles.stroke,this.strokeWidth=ja.defaultStyles.strokeWidth,this.lineDash=ja.defaultStyles.lineDash,this.lineDashOffset=ja.defaultStyles.lineDashOffset,this.lineCap=ja.defaultStyles.lineCap,this.lineJoin=ja.defaultStyles.lineJoin,this.opacity=ja.defaultStyles.opacity,this.fillShadow=ja.defaultStyles.fillShadow}restoreOwnStyles(){const{defaultStyles:e}=this.constructor;Object.assign(this,e)}onFillChange(){const{fill:e}=this;let i;if(e!=null&&e.startsWith("linear-gradient")&&(i=rJ.exec(e))){const s=parseFloat(i[1]),r=[],n=i[2],o=/(#[0-9a-f]+)|(rgba?\(.+?\))|([a-z]+)/gi;let a;for(;a=o.exec(n);)r.push(a[0]);this.gradient=new sJ(r.map((l,c)=>({color:l,offset:c/(r.length-1)})),s)}else this.gradient=void 0}align(e,i){var s,r,n;const o=(n=(r=(s=this.layerManager)==null?void 0:s.canvas)==null?void 0:r.pixelRatio)!=null?n:1,a=Math.round(e*o)/o;return i==null?a:i===0?0:i<1?Math.ceil(i*o)/o:Math.round((i+e)*o)/o-a}fillStroke(e,i){this.renderFill(e,i),this.renderStroke(e,i)}renderFill(e,i){if(this.fill){const{globalAlpha:s}=e;this.applyFill(e),this.applyFillAlpha(e),this.applyShadow(e),this.executeFill(e,i),e.globalAlpha=s}e.shadowColor="rgba(0, 0, 0, 0)"}executeFill(e,i){i?e.fill(i):e.fill()}applyFill(e){var i,s;e.fillStyle=(s=(i=this.gradient)==null?void 0:i.createGradient(e,this.computeBBox()))!=null?s:this.fill}applyFillAlpha(e){e.globalAlpha*=this.opacity*this.fillOpacity}applyShadow(e){var i,s;const r=(s=(i=this.layerManager)==null?void 0:i.canvas.pixelRatio)!=null?s:1,n=this.fillShadow;n!=null&&n.enabled&&(e.shadowColor=n.color,e.shadowOffsetX=n.xOffset*r,e.shadowOffsetY=n.yOffset*r,e.shadowBlur=n.blur*r)}renderStroke(e,i){if(this.stroke&&this.strokeWidth){const{globalAlpha:s}=e;e.strokeStyle=this.stroke,e.globalAlpha*=this.opacity*this.strokeOpacity,e.lineWidth=this.strokeWidth,this.lineDash&&e.setLineDash(this.lineDash),this.lineDashOffset&&(e.lineDashOffset=this.lineDashOffset),this.lineCap&&(e.lineCap=this.lineCap),this.lineJoin&&(e.lineJoin=this.lineJoin),this.executeStroke(e,i),e.globalAlpha=s}}executeStroke(e,i){i?e.stroke(i):e.stroke()}containsPoint(e,i){return this.isPointInPath(e,i)}};mo.defaultStyles={fill:"black",stroke:void 0,strokeWidth:0,lineDash:void 0,lineDashOffset:0,lineCap:void 0,lineJoin:void 0,opacity:1,fillShadow:void 0};q([Qe({redraw:2})],mo.prototype,"fillOpacity",2);q([Qe({redraw:2})],mo.prototype,"strokeOpacity",2);q([Qe({redraw:2,changeCb:t=>t.onFillChange()})],mo.prototype,"fill",2);q([Qe({redraw:2})],mo.prototype,"stroke",2);q([Qe({redraw:2})],mo.prototype,"strokeWidth",2);q([Qe({redraw:2})],mo.prototype,"lineDash",2);q([Qe({redraw:2})],mo.prototype,"lineDashOffset",2);q([Qe({redraw:2})],mo.prototype,"lineCap",2);q([Qe({redraw:2})],mo.prototype,"lineJoin",2);q([Qe({redraw:2,convertor:t=>Zt(0,t,1)})],mo.prototype,"opacity",2);q([Qe({redraw:2,checkDirtyOnAssignment:!0})],mo.prototype,"fillShadow",2);var jo=mo,Tl=class extends jo{constructor(t={}){super(t),this.x1=0,this.y1=0,this.x2=0,this.y2=0,this.startLine=!1,this.endLine=!1,this.isRange=!1,this.restoreOwnStyles()}computeBBox(){return new lt(this.x1,this.y1,this.x2-this.x1,this.y2-this.y1)}isPointInPath(t,e){return!1}render(t){var e;const{ctx:i,forceRender:s,stats:r}=t;if(this.dirty===0&&!s){r&&(r.nodesSkipped+=this.nodeCount.count);return}this.computeTransformMatrix(),this.matrix.toContext(i);let{x1:n,y1:o,x2:a,y2:l}=this;n=this.align(n),o=this.align(o),a=this.align(a),l=this.align(l);const{fill:c,opacity:u,isRange:d}=this;if(!!(d&&c)){const{fillOpacity:v}=this;i.fillStyle=c,i.globalAlpha=u*v,i.beginPath(),i.moveTo(n,o),i.lineTo(a,o),i.lineTo(a,l),i.lineTo(n,l),i.closePath(),i.fill()}const{stroke:p,strokeWidth:f,startLine:m,endLine:g}=this;if(!!((m||g)&&p&&f)){const{strokeOpacity:v,lineDash:C,lineDashOffset:b,lineCap:T,lineJoin:A}=this;i.strokeStyle=p,i.globalAlpha=u*v,i.lineWidth=f,C&&i.setLineDash(C),b&&(i.lineDashOffset=b),T&&(i.lineCap=T),A&&(i.lineJoin=A),i.beginPath(),m&&(i.moveTo(n,o),i.lineTo(a,o)),g&&(i.moveTo(a,l),i.lineTo(n,l)),i.stroke()}(e=this.fillShadow)==null||e.markClean(),super.render(t)}};Tl.className="Range";Tl.defaultStyles=qe(Se({},jo.defaultStyles),{strokeWidth:1});q([Qe({redraw:2})],Tl.prototype,"x1",2);q([Qe({redraw:2})],Tl.prototype,"y1",2);q([Qe({redraw:2})],Tl.prototype,"x2",2);q([Qe({redraw:2})],Tl.prototype,"y2",2);q([Qe({redraw:2})],Tl.prototype,"startLine",2);q([Qe({redraw:2})],Tl.prototype,"endLine",2);q([Qe({redraw:2})],Tl.prototype,"isRange",2);var Hm=new WeakMap,jm=new WeakMap;function cS(t,e){var i,s,r;const n=JSON.stringify(t,null,0);return Hm.has(e)||Hm.set(e,new Map),(i=Hm.get(e))!=null&&i.has(n)||(s=Hm.get(e))==null||s.set(n,e(t)),(r=Hm.get(e))==null?void 0:r.get(n)}function O6(t){return(e,...i)=>{var s,r,n;const o=JSON.stringify(e,null,0);return jm.has(t)||jm.set(t,new Map),(s=jm.get(t))!=null&&s.has(o)||(r=jm.get(t))==null||r.set(o,t(e,...i)),(n=jm.get(t))==null?void 0:n.get(o)}}var iA="";function Qx(t){const{redraw:e=3,changeCb:i}={};return Qe({redraw:e,type:"font",changeCb:i})}var Os=class zs extends jo{constructor(){super(...arguments),this.x=0,this.y=0,this.lines=[],this.text=void 0,this._dirtyFont=!0,this.fontSize=10,this.fontFamily="sans-serif",this.textAlign=zs.defaultStyles.textAlign,this.textBaseline=zs.defaultStyles.textBaseline}onTextChange(){var e,i;this.lines=(i=(e=this.text)==null?void 0:e.split(`
`).map(s=>s.trim()))!=null?i:[]}get font(){return(this._font==null||this._dirtyFont)&&(this._dirtyFont=!1,this._font=yg(this)),this._font}computeBBox(){const{x:e,y:i,lines:s,lineHeight:r,textBaseline:n,textAlign:o}=this,{top:a,left:l,width:c,height:u}=zs.getTextSizeMultiline(s,yg(this),n,o,r);return new lt(e-l,i-a,c,u)}getLineHeight(e){var i,s;if(this.lineHeight)return this.lineHeight;const r=zs.measureText(e,this.font,this.textBaseline,this.textAlign);return((i=r.fontBoundingBoxAscent)!=null?i:r.emHeightAscent)+((s=r.fontBoundingBoxDescent)!=null?s:r.emHeightDescent)}isPointInPath(e,i){const s=this.transformPoint(e,i),r=this.computeBBox();return r?r.containsPoint(s.x,s.y):!1}render(e){const{ctx:i,forceRender:s,stats:r}=e;if(this.dirty===0&&!s){r&&(r.nodesSkipped+=this.nodeCount.count);return}if(!this.lines.length||!this.layerManager){r&&(r.nodesSkipped+=this.nodeCount.count);return}this.computeTransformMatrix(),this.matrix.toContext(i);const{fill:n,stroke:o,strokeWidth:a}=this;i.font=this.font,i.textAlign=this.textAlign,i.textBaseline=this.textBaseline;const l=this.layerManager.canvas.pixelRatio||1,{globalAlpha:c}=i;if(n){i.fillStyle=n,i.globalAlpha=c*this.opacity*this.fillOpacity;const{fillShadow:u}=this;u!=null&&u.enabled&&(i.shadowColor=u.color,i.shadowOffsetX=u.xOffset*l,i.shadowOffsetY=u.yOffset*l,i.shadowBlur=u.blur*l),this.renderLines((d,h,p)=>i.fillText(d,h,p))}if(o&&a){i.strokeStyle=o,i.lineWidth=a,i.globalAlpha=c*this.opacity*this.strokeOpacity;const{lineDash:u,lineDashOffset:d,lineCap:h,lineJoin:p}=this;u&&i.setLineDash(u),d&&(i.lineDashOffset=d),h&&(i.lineCap=h),p&&(i.lineJoin=p),this.renderLines((f,m,g)=>i.strokeText(f,m,g))}super.render(e)}renderLines(e){const{lines:i,x:s,y:r}=this,n=i.map(l=>this.getLineHeight(l)),o=n.reduce((l,c)=>l+c,0);let a=(n[0]-o)*zs.getVerticalModifier(this.textBaseline);for(let l=0;l<i.length;l++)e(i[l],s,r+a),a+=n[l]}static wrapLines(e,i,s,r,n,o){const a=o!=="hide",l=new G6(r),c=e.split(/\r?\n/g);if(c.length===0)return{lines:void 0,truncated:!1};if(n==="never"){const{text:p,truncated:f}=zs.truncateLine(c[0],i,l,a?"auto":"never");return{lines:p!=null?[p]:void 0,truncated:f}}const u=[];let d=0,h=!1;for(const p of c){const f=zs.wrapLine(p,i,s,l,r,n,d,a);if(f==null)return{lines:void 0,truncated:!1};if(u.push(...f.result),d=f.cumulativeHeight,f.truncated){h=!0;break}}return{lines:u,truncated:h}}static wrap(e,i,s,r,n,o="ellipsis"){var a;const{lines:l,truncated:c}=zs.wrapLines(e,i,s,r,n,o);return{text:(a=l==null?void 0:l.join(`
`).trim())!=null?a:"",truncated:c}}static wrapLine(e,i,s,r,n,o,a,l){if(e=e.trim(),!e)return{result:[],truncated:!1,cumulativeHeight:a};const c=r.size(e);if(c.width<=i)return{result:[e],truncated:!1,cumulativeHeight:a+c.height};if(c.height>s||r.width("W")>i)return l?{result:[],truncated:!0,cumulativeHeight:a}:void 0;const u=e.split(/\s+/g),d=zs.wrapLineSequentially(u,i,s,r,n,o,a,l);if(d==null)return;a=d.cumulativeHeight;let{lines:h}=d;if(!(d.wordsBrokenOrTruncated||d.linesTruncated)){const f=d.lines.length,m=zs.wrapLineBalanced(u,i,r,f);m.length===h.length&&(h=m)}return{result:h.map(f=>f.join(" ")),truncated:d.linesTruncated,cumulativeHeight:a}}static breakWord(e,i,s,r,n){const o=p=>zs.punctuationMarks.includes(e[p]),a=r?n.width("-"):0,l=[];let c=0,u=0;for(let p=0;p<e.length;p++){const f=e[p],m=n.width(f),g=u===0?i:s;c+m+a>g&&(l.push(p),c=0,u++),c+=m}const d=[];let h=0;for(const p of l){let f=e.substring(h,p);r&&f.length>0&&!o(p-1)&&!o(p)&&(f+="-"),d.push(f),h=p}return d.push(e.substring(h)),d}static truncateLine(e,i,s,r){e=e.trimEnd();const n=s.width(e);if(n>i&&r==="never")return{text:void 0,truncated:!1};if(n<=i&&r!=="force")return{text:e,truncated:!1};const o=s.width(iA);let a=e,l=n;for(;a.length>0&&l+o>i;)a=a.slice(0,-1).trimEnd(),l=s.width(a);return l+o<=i?{text:`${a}${iA}`,truncated:!0}:{text:void 0,truncated:!1}}static wrapLineSequentially(e,i,s,r,n,o,a,l){const{fontSize:c=0,lineHeight:u=c*zs.defaultLineHeightRatio}=n,d=o==="always"||o==="hyphenate",h=o==="hyphenate",p=r.width(" ");let f=!1,m=!1;const g=[];let y=[],v=0;const C=()=>({lines:g,linesTruncated:m,wordsBrokenOrTruncated:f,cumulativeHeight:a}),b=()=>{if(!l)return;const A=y.join(" "),{text:I}=zs.truncateLine(A,i,r,"force");if(I!=null)return y.splice(0,y.length,I),m=!0,C()},T=()=>{const A=a+u;return A>=s?!1:(y=[],v=0,a=A,g.push(y),!0)};if(!T())return b();for(let A=0;A<e.length;A++){const I=e[A],D=r.width(I),F=y.length===0?0:p,B=v+F+D;if(B<=i){y.push(I),v=B;continue}if(D<=i){if(!T())return b();y.push(I),v=D;continue}if(f=!0,d){const U=i-v-F,H=zs.breakWord(I,U,i,h,r);for(let R=0;R<H.length;R++){const L=H[R];if(L&&y.push(L),R===H.length-1)v=r.width(L);else if(!T())return b()}}else if(l){if(!T())return b();const{text:U}=zs.truncateLine(I,i,r,"force");if(U==null)return;y.push(U),A<e.length-1&&(m=!0);break}else return}return C()}static wrapLineBalanced(e,i,s,r){const n=e.reduce((p,f)=>p+s.width(f),0),o=s.width(" "),a=o*(e.length-r-2),l=(n+a)/r,c=[];let u=[],d=s.width(e[0]),h=!0;for(const p of e){const f=s.width(p);if(h){u=[],u.push(p),d=f,h=!1,c.push(u);continue}const m=d+o+f;m<=l?(u.push(p),d=m):m<=i?(u.push(p),h=!0):(u=[p],d=f,c.push(u))}return c}setFont(e){this.fontFamily=e.fontFamily,this.fontSize=e.fontSize,this.fontStyle=e.fontStyle,this.fontWeight=e.fontWeight}setAlign(e){this.textAlign=e.textAlign,this.textBaseline=e.textBaseline}static getVerticalModifier(e){switch(e){case"top":case"hanging":return 0;case"bottom":case"alphabetic":case"ideographic":return 1;case"middle":return .5}}static get textContext(){if(!this._textContext){const e=hs("canvas");e.width=0,e.height=0,this._textContext=e.getContext("2d")}return this._textContext}static measureText(e,i,s,r){return this._measureText({text:e,font:i,textBaseline:s,textAlign:r})}static getTextSize(e,i){return this._getTextSize({text:e,font:i})}static getTextSizeMultiline(e,i,s=zs.defaultStyles.textBaseline,r=zs.defaultStyles.textAlign,n){var o,a;let l=0,c=0,u=0,d=0,h=0;for(const[p,f]of e.entries()){const m=this._measureText({text:f,font:i,textBaseline:s,textAlign:r});c=Math.max(c,m.actualBoundingBoxLeft),u=Math.max(u,m.width),p==0?(l+=m.actualBoundingBoxAscent,d+=m.actualBoundingBoxAscent):h+=(o=m.fontBoundingBoxAscent)!=null?o:m.emHeightAscent,p==e.length-1?d+=m.actualBoundingBoxDescent:h+=(a=m.fontBoundingBoxDescent)!=null?a:m.emHeightDescent}return n!=null&&(h=(e.length-1)*n),d+=h,l+=h*zs.getVerticalModifier(s),{top:l,left:c,width:u,height:d}}};Os.className="Text";Os.defaultLineHeightRatio=1.15;Os.defaultStyles=Object.assign({},jo.defaultStyles,{textAlign:"start",fontStyle:void 0,fontWeight:void 0,fontSize:10,fontFamily:"sans-serif",textBaseline:"alphabetic"});Os.ellipsis=iA;Os.punctuationMarks=[".",",","-",":",";","!","?","'",'"',"(",")"];Os._measureText=O6(({text:t,font:e,textBaseline:i,textAlign:s})=>{const r=Os.textContext;return r.font!==e&&(r.font=e),r.textBaseline!==i&&(r.textBaseline=i),r.textAlign!==s&&(r.textAlign=s),r.measureText(t)});Os._getTextSize=O6(({text:t,font:e})=>{const i=Os.textContext;i.font!==e&&(i.font=e);const s=i.measureText(t);return{width:s.width,height:s.actualBoundingBoxAscent+s.actualBoundingBoxDescent}});q([Qe({redraw:3})],Os.prototype,"x",2);q([Qe({redraw:3})],Os.prototype,"y",2);q([Qe({redraw:3,changeCb:t=>t.onTextChange()})],Os.prototype,"text",2);q([Qx()],Os.prototype,"fontStyle",2);q([Qx()],Os.prototype,"fontWeight",2);q([Qx()],Os.prototype,"fontSize",2);q([Qx()],Os.prototype,"fontFamily",2);q([Qe({redraw:3})],Os.prototype,"textAlign",2);q([Qe({redraw:3})],Os.prototype,"textBaseline",2);q([Qe({redraw:3})],Os.prototype,"lineHeight",2);var ri=Os,G6=class{constructor(t){this.font=io(t)?t:yg(t)}size(t){return t.includes(`
`)?ri.getTextSizeMultiline(t.split(`
`).map(e=>e.trim()),this.font):ri.getTextSize(t,this.font)}width(t){const{width:e}=this.size(t);return e}};function yg(t){const{fontFamily:e,fontSize:i,fontStyle:s,fontWeight:r}=t;return[s??"",r??"",i+"px",e].join(" ").trim()}var Bs=class extends ti{constructor(){super(...arguments),this.enabled=!0,this.fontSize=12,this.fontFamily="Verdana, sans-serif"}getFont(){return yg(this)}};q([te(Et)],Bs.prototype,"enabled",2);q([te(mi,{optional:!0})],Bs.prototype,"color",2);q([te(hd,{optional:!0})],Bs.prototype,"fontStyle",2);q([te(pd,{optional:!0})],Bs.prototype,"fontWeight",2);q([te(Ge)],Bs.prototype,"fontSize",2);q([te($e)],Bs.prototype,"fontFamily",2);q([te(go,{optional:!0})],Bs.prototype,"formatter",2);function uS(t){const{parallelFlipRotation:e=0,regularFlipRotation:i=0}=t,s=t.rotation?ys(Nr(t.rotation)):0,r=!s&&e>=0&&e<=Math.PI?-1:1,n=!s&&i>=0&&i<=Math.PI?-1:1;let o=0;return t.parallel?o=r*Math.PI/2:n===-1&&(o=Math.PI),{configuredRotation:s,defaultRotation:o,parallelFlipFlag:r,regularFlipFlag:n}}function nJ(t,e){return isNaN(t)?e?0:10:t}function oJ(t,e,i,s){return t&&!e?i*s===-1?"hanging":"bottom":"middle"}function eT(t,e,i,s,r){const n=e>0&&e<=Math.PI,o=i>0&&i<=Math.PI,a=n||o?-1:1;if(t)if(e||i){if(s*a===-1)return"end"}else return"center";else if(s*r===-1)return"end";return"start"}function aJ(t,e,i,s,r){const{width:n,height:o}=e,a=new lt(i,s,0,0);r.transformBBox(a,e);const{x:l,y:c}=e;return e.width=n,e.height=o,{point:{x:l,y:c},label:{text:t,width:n,height:o}}}var B6=(t=>(t[t.SERIES_BACKGROUND_ZINDEX=0]="SERIES_BACKGROUND_ZINDEX",t[t.AXIS_GRID_ZINDEX=1]="AXIS_GRID_ZINDEX",t[t.AXIS_ZINDEX=2]="AXIS_ZINDEX",t[t.SERIES_CROSSLINE_RANGE_ZINDEX=3]="SERIES_CROSSLINE_RANGE_ZINDEX",t[t.SERIES_LAYER_ZINDEX=4]="SERIES_LAYER_ZINDEX",t[t.SERIES_HIGHLIGHT_ZINDEX=5]="SERIES_HIGHLIGHT_ZINDEX",t[t.AXIS_FOREGROUND_ZINDEX=6]="AXIS_FOREGROUND_ZINDEX",t[t.SERIES_CROSSHAIR_ZINDEX=7]="SERIES_CROSSHAIR_ZINDEX",t[t.SERIES_LABEL_ZINDEX=8]="SERIES_LABEL_ZINDEX",t[t.SERIES_CROSSLINE_LINE_ZINDEX=9]="SERIES_CROSSLINE_LINE_ZINDEX",t[t.SERIES_ANNOTATION_ZINDEX=10]="SERIES_ANNOTATION_ZINDEX",t[t.LEGEND_ZINDEX=11]="LEGEND_ZINDEX",t[t.NAVIGATOR_ZINDEX=12]="NAVIGATOR_ZINDEX",t))(B6||{});function V6(t){return t!=null&&Object.hasOwn(t,"toString")&&io(t.toString())}function H6(t){return t!=null&&Object.hasOwn(t,"valueOf")&&gi(t.valueOf())}function eE(t){return gi(t)||HC(t)||H6(t)}function sA(t,e){return t!=null&&(!e||eE(t))}function Vf(t){return V6(t)&&Object.hasOwn(t,"id")?t.id:t}var OD=t=>t==="value"?Oi((e,i)=>i.target.type==="line",e=>e.target.type==="range"?"crossLine type 'range' to have a 'range' property instead of 'value'":"crossLine property 'type' to be 'line'"):Oi((e,i)=>i.target.type==="range",e=>e.target.type==="line"?"crossLine type 'line' to have a 'value' property instead of 'range'":"crossLine property 'type' to be 'range'"),j6=(t,e,i,s)=>{const r=t==="line"&&e!==void 0,n=t==="range"&&i!==void 0;if(!r&&!n)return!0;const[o,a]=i??[e,void 0],l=Ei.is(s)||Yl.is(s),c=sA(o,l)&&!isNaN(s.convert(o)),u=sA(a,l)&&!isNaN(s.convert(a));if(r&&c||n&&c&&u)return!0;const d=["Expecting crossLine"];return n?(c||d.push(`range start ${Iv(o)}`),u||d.push(`${c?"":"and "}range end ${Iv(a)}`)):d.push(`value ${Iv(o)}`),d.push("to match the axis scale domain."),Be.warnOnce(d.join(" ")),!1},lJ={top:{xTranslationDirection:0,yTranslationDirection:-1},bottom:{xTranslationDirection:0,yTranslationDirection:1},left:{xTranslationDirection:-1,yTranslationDirection:0},right:{xTranslationDirection:1,yTranslationDirection:0},topLeft:{xTranslationDirection:1,yTranslationDirection:-1},topRight:{xTranslationDirection:-1,yTranslationDirection:-1},bottomLeft:{xTranslationDirection:1,yTranslationDirection:1},bottomRight:{xTranslationDirection:-1,yTranslationDirection:1},inside:{xTranslationDirection:0,yTranslationDirection:0},insideLeft:{xTranslationDirection:1,yTranslationDirection:0},insideRight:{xTranslationDirection:-1,yTranslationDirection:0},insideTop:{xTranslationDirection:0,yTranslationDirection:1},insideBottom:{xTranslationDirection:0,yTranslationDirection:-1},insideTopLeft:{xTranslationDirection:1,yTranslationDirection:1},insideBottomLeft:{xTranslationDirection:1,yTranslationDirection:-1},insideTopRight:{xTranslationDirection:-1,yTranslationDirection:1},insideBottomRight:{xTranslationDirection:-1,yTranslationDirection:-1}},cJ={top:{xTranslationDirection:1,yTranslationDirection:0},bottom:{xTranslationDirection:-1,yTranslationDirection:0},left:{xTranslationDirection:0,yTranslationDirection:-1},right:{xTranslationDirection:0,yTranslationDirection:1},topLeft:{xTranslationDirection:-1,yTranslationDirection:-1},topRight:{xTranslationDirection:-1,yTranslationDirection:1},bottomLeft:{xTranslationDirection:1,yTranslationDirection:-1},bottomRight:{xTranslationDirection:1,yTranslationDirection:1},inside:{xTranslationDirection:0,yTranslationDirection:0},insideLeft:{xTranslationDirection:0,yTranslationDirection:1},insideRight:{xTranslationDirection:0,yTranslationDirection:-1},insideTop:{xTranslationDirection:-1,yTranslationDirection:0},insideBottom:{xTranslationDirection:1,yTranslationDirection:0},insideTopLeft:{xTranslationDirection:-1,yTranslationDirection:1},insideBottomLeft:{xTranslationDirection:1,yTranslationDirection:1},insideTopRight:{xTranslationDirection:-1,yTranslationDirection:-1},insideBottomRight:{xTranslationDirection:1,yTranslationDirection:-1}};function OF({yDirection:t,padding:e=0,position:i="top",bbox:s}){const r=t?lJ:cJ,{xTranslationDirection:n,yTranslationDirection:o}=r[i],a=t?s.width:s.height,l=t?s.height:s.width,c=n*(e+a/2),u=o*(e+l/2);return{xTranslation:c,yTranslation:u}}function uJ({yDirection:t,bbox:e,padding:i=0,position:s="top"}){const r={};return s.startsWith("inside")||(s==="top"&&!t?r.top=i+e.height:s==="bottom"&&!t?r.bottom=i+e.height:s==="left"&&t?r.left=i+e.width:s==="right"&&t&&(r.right=i+e.width)),r}var rA=({yDirection:t,xEnd:e,yStart:i,yEnd:s})=>t?{x:e/2,y:i}:{x:e,y:isNaN(s)?i:(i+s)/2},GF=({yDirection:t,xStart:e,xEnd:i,yStart:s,yEnd:r})=>t?{x:e,y:isNaN(r)?s:(s+r)/2}:{x:i/2,y:s},BF=({yDirection:t,xEnd:e,yStart:i,yEnd:s})=>t?{x:e,y:isNaN(s)?i:(i+s)/2}:{x:e/2,y:isNaN(s)?i:s},VF=({yDirection:t,xStart:e,xEnd:i,yStart:s,yEnd:r})=>t?{x:i/2,y:isNaN(r)?s:r}:{x:e,y:isNaN(r)?s:(s+r)/2},dJ=({xEnd:t,yStart:e,yEnd:i})=>({x:t/2,y:isNaN(i)?e:(e+i)/2}),HF=({yDirection:t,xStart:e,xEnd:i,yStart:s})=>t?{x:e/2,y:s}:{x:i,y:s},jF=({yDirection:t,xStart:e,yStart:i,yEnd:s})=>t?{x:e,y:isNaN(s)?i:s}:{x:e,y:i},UF=({yDirection:t,xEnd:e,yStart:i,yEnd:s})=>t?{x:e,y:i}:{x:e,y:isNaN(s)?i:s},WF=({yDirection:t,xStart:e,xEnd:i,yStart:s,yEnd:r})=>t?{x:i,y:isNaN(r)?s:r}:{x:e,y:isNaN(r)?s:r},hJ={top:{c:rA},bottom:{c:VF},left:{c:GF},right:{c:BF},topLeft:{c:HF},topRight:{c:UF},bottomLeft:{c:jF},bottomRight:{c:WF},inside:{c:dJ},insideLeft:{c:GF},insideRight:{c:BF},insideTop:{c:rA},insideBottom:{c:VF},insideTopLeft:{c:HF},insideBottomLeft:{c:jF},insideTopRight:{c:UF},insideBottomRight:{c:WF}},pJ=ls(["top","left","right","bottom","topLeft","topRight","bottomLeft","bottomRight","inside","insideLeft","insideRight","insideTop","insideBottom","insideTopLeft","insideBottomLeft","insideTopRight","insideBottomRight"],"crossLine label position"),Xo=class{constructor(){this.enabled=void 0,this.text=void 0,this.fontStyle=void 0,this.fontWeight=void 0,this.fontSize=14,this.fontFamily="Verdana, sans-serif",this.padding=5,this.color="rgba(87, 87, 87, 1)",this.position=void 0,this.rotation=void 0,this.parallel=void 0}};q([te(Et,{optional:!0})],Xo.prototype,"enabled",2);q([te($e,{optional:!0})],Xo.prototype,"text",2);q([te(hd,{optional:!0})],Xo.prototype,"fontStyle",2);q([te(pd,{optional:!0})],Xo.prototype,"fontWeight",2);q([te(Ge)],Xo.prototype,"fontSize",2);q([te($e)],Xo.prototype,"fontFamily",2);q([te(Ui)],Xo.prototype,"padding",2);q([te(mi,{optional:!0})],Xo.prototype,"color",2);q([te(pJ,{optional:!0})],Xo.prototype,"position",2);q([te(dd,{optional:!0})],Xo.prototype,"rotation",2);q([te(Et,{optional:!0})],Xo.prototype,"parallel",2);var on=class fv{constructor(){this.id=wl(this),this.enabled=void 0,this.type=void 0,this.range=void 0,this.value=void 0,this.fill=void 0,this.fillOpacity=void 0,this.stroke=void 0,this.strokeWidth=void 0,this.strokeOpacity=void 0,this.lineDash=void 0,this.label=new Xo,this.scale=void 0,this.clippedRange=[-1/0,1/0],this.gridLength=0,this.sideFlag=-1,this.parallelFlipRotation=0,this.regularFlipRotation=0,this.direction="x",this.group=new ft({name:`${this.id}`,layer:!0,zIndex:fv.LINE_LAYER_ZINDEX}),this.labelGroup=new ft({name:`${this.id}`,layer:!0,zIndex:fv.LABEL_LAYER_ZINDEX}),this.crossLineRange=new Tl,this.crossLineLabel=new ri,this.labelPoint=void 0,this.data=[],this.startLine=!1,this.endLine=!1,this.isRange=!1;const{group:e,labelGroup:i,crossLineRange:s,crossLineLabel:r}=this;e.append(s),i.append(r),s.pointerEvents=1}update(e){const{enabled:i,data:s,type:r,value:n,range:o,scale:a}=this;if(!r||!a||!i||!e||!j6(r,n,o,a)||s.length===0){this.group.visible=!1,this.labelGroup.visible=!1;return}this.group.visible=e,this.labelGroup.visible=e,this.group.zIndex=this.getZIndex(this.isRange),this.updateNodes()}calculateLayout(e,i){if(!e||!this.createNodeData(i))return;const{sideFlag:r,gridLength:n,data:o}=this,a=[],l=0,c=r*n,u=o[0],d=o[1],h=new lt(Math.min(l,c),Math.min(u,d),Math.abs(l-c),Math.abs(u-d));a.push(h);const p=this.computeLabelBBox();return p&&a.push(p),lt.merge(a)}updateNodes(){this.updateRangeNode(),this.label.enabled&&(this.updateLabel(),this.positionLabel())}createNodeData(e){var i,s,r;const{scale:n,gridLength:o,sideFlag:a,direction:l,label:{position:c="top"},clippedRange:u,strokeWidth:d=0}=this;if(this.data=[],!n)return!1;const h=(i=n.bandwidth)!=null?i:0,p=(s=n.step)!=null?s:0,f=(e?-1:1)*(n instanceof ku?(p-h)/2:0),[m,g]=[0,a*o];let[y,v]=this.getRange();const C=v===void 0&&Yl.is(n)?h/2+f:0;let[b,T]=[Number(n.convert(y,{clampMode:"clamped"}))-f+C,n.convert(v,{clampMode:"clamped"})+h+f];b=oS(b,u),T=oS(T,u),[y,v]=[Number(n.convert(y))+C,n.convert(v)+h];const A=(y===b||v===T||b!==T)&&Math.abs(T-b)>0;if(A&&b>T&&([b,T]=[T,b],[y,v]=[v,y]),y-f>=b&&(y-=f),v+f<=T&&(v+=f),this.isRange=A,this.startLine=d>0&&y>=b&&y<=b+f,this.endLine=d>0&&v>=T-h-f&&v<=T,!A&&!this.startLine&&!this.endLine)return!1;if(this.data=[b,T],this.label.enabled){const I=l==="y",{c:D=rA}=(r=hJ[c])!=null?r:{},{x:F,y:B}=D({yDirection:I,xStart:m,xEnd:g,yStart:b,yEnd:T});this.labelPoint={x:F,y:B}}return!0}updateRangeNode(){var e;const{crossLineRange:i,sideFlag:s,gridLength:r,data:n,startLine:o,endLine:a,isRange:l,fill:c,fillOpacity:u,stroke:d,strokeWidth:h,lineDash:p}=this;i.x1=0,i.x2=s*r,i.y1=n[0],i.y2=n[1],i.startLine=o,i.endLine=a,i.isRange=l,i.fill=c,i.fillOpacity=u??1,i.stroke=d,i.strokeWidth=h??1,i.strokeOpacity=(e=this.strokeOpacity)!=null?e:1,i.lineDash=p}updateLabel(){const{crossLineLabel:e,label:i}=this;i.text&&(e.fontStyle=i.fontStyle,e.fontWeight=i.fontWeight,e.fontSize=i.fontSize,e.fontFamily=i.fontFamily,e.fill=i.color,e.text=i.text)}positionLabel(){const{crossLineLabel:e,labelPoint:{x:i=void 0,y:s=void 0}={},label:{parallel:r,rotation:n,position:o="top",padding:a=0},direction:l,parallelFlipRotation:c,regularFlipRotation:u}=this;if(i===void 0||s===void 0)return;const{defaultRotation:d,configuredRotation:h}=uS({rotation:n,parallel:r,regularFlipRotation:u,parallelFlipRotation:c});e.rotation=d+h,e.textBaseline="middle",e.textAlign="center";const p=e.computeTransformedBBox();if(!p)return;const f=l==="y",{xTranslation:m,yTranslation:g}=OF({yDirection:f,padding:a,position:o,bbox:p});e.translationX=i+m,e.translationY=s+g}getZIndex(e=!1){return e?fv.RANGE_LAYER_ZINDEX:fv.LINE_LAYER_ZINDEX}getRange(){var e;const{value:i,range:s,scale:r}=this,n=Ei.is(r)||Yl.is(r),o=(e=s==null?void 0:s[0])!=null?e:i;let a=s==null?void 0:s[1];return!n&&a===void 0&&(a=o),n&&o===a&&(a=void 0),[o,a]}computeLabelBBox(){const{label:e}=this;if(!e.enabled)return;const i=new ri;i.fontFamily=e.fontFamily,i.fontSize=e.fontSize,i.fontStyle=e.fontStyle,i.fontWeight=e.fontWeight,i.text=e.text;const{labelPoint:{x:s=void 0,y:r=void 0}={},label:{parallel:n,rotation:o,position:a="top",padding:l=0},direction:c,parallelFlipRotation:u,regularFlipRotation:d}=this;if(s===void 0||r===void 0)return;const{configuredRotation:h}=uS({rotation:o,parallel:n,regularFlipRotation:d,parallelFlipRotation:u});i.rotation=h,i.textBaseline="middle",i.textAlign="center";const p=i.computeTransformedBBox();if(!p)return;const f=c==="y",{xTranslation:m,yTranslation:g}=OF({yDirection:f,padding:l,position:a,bbox:p});return i.translationX=s+m,i.translationY=r+g,i.computeTransformedBBox()}calculatePadding(e){var i,s,r,n,o,a,l,c;const{isRange:u,startLine:d,endLine:h,direction:p,label:{padding:f=0,position:m="top"}}=this;if(!u&&!d&&!h)return;const g=this.computeLabelBBox();if((g==null?void 0:g.x)==null||(g==null?void 0:g.y)==null)return;const y=uJ({yDirection:p==="y",padding:f,position:m,bbox:g});e.left=Math.max((i=e.left)!=null?i:0,(s=y.left)!=null?s:0),e.right=Math.max((r=e.right)!=null?r:0,(n=y.right)!=null?n:0),e.top=Math.max((o=e.top)!=null?o:0,(a=y.top)!=null?a:0),e.bottom=Math.max((l=e.bottom)!=null?l:0,(c=y.bottom)!=null?c:0)}};on.LINE_LAYER_ZINDEX=9;on.RANGE_LAYER_ZINDEX=3;on.LABEL_LAYER_ZINDEX=8;on.className="CrossLine";q([te(Et,{optional:!0})],on.prototype,"enabled",2);q([te(ls(["range","line"],"a crossLine type"),{optional:!0})],on.prototype,"type",2);q([te(Yo(OD("range"),rm.restrict({length:2})),{optional:!0})],on.prototype,"range",2);q([te(OD("value"),{optional:!0})],on.prototype,"value",2);q([te(mi,{optional:!0})],on.prototype,"fill",2);q([te(Si,{optional:!0})],on.prototype,"fillOpacity",2);q([te(mi,{optional:!0})],on.prototype,"stroke",2);q([te(Ui,{optional:!0})],on.prototype,"strokeWidth",2);q([te(Si,{optional:!0})],on.prototype,"strokeOpacity",2);q([te(Fc,{optional:!0})],on.prototype,"lineDash",2);var nA=on,GD=class{constructor(){this.moduleMap=new Map}*modules(){for(const t of this.moduleMap.values())yield t.moduleInstance}addModule(t,e){if(this.moduleMap.has(t.optionsKey))throw new Error(`AG Charts - module already initialised: ${t.optionsKey}`);this.moduleMap.set(t.optionsKey,{module:t,moduleInstance:e(t)})}removeModule(t){var e;const i=io(t)?t:t.optionsKey;(e=this.moduleMap.get(i))==null||e.moduleInstance.destroy(),this.moduleMap.delete(i)}getModule(t){var e;return(e=this.moduleMap.get(io(t)?t:t.optionsKey))==null?void 0:e.moduleInstance}isEnabled(t){return this.moduleMap.has(io(t)?t:t.optionsKey)}mapModules(t){return Array.from(this.moduleMap.values(),(e,i)=>t(e.moduleInstance,i))}destroy(){var t;for(const e of this.moduleMap.keys())(t=this.moduleMap.get(e))==null||t.moduleInstance.destroy();this.moduleMap.clear()}},U6={};Cl(U6,{resetMotion:()=>Ys});function Ys(t,e){const{nodes:i,selections:s}=zx(t);for(const r of s){for(const n of r.nodes()){const o=e(n,n.datum);n.setProperties(o)}r.cleanup()}for(const r of i){const n=e(r,r.datum);r.setProperties(n)}}var XC=class{constructor(t,e,i){this.states=e,this.preTransitionCb=i,this.debug=is.create(!0,"animation"),this.state=t,this.debug(`%c${this.constructor.name} | init -> ${t}`,"color: green")}transition(t,e){var i,s;const r=this.states[this.state],n=r==null?void 0:r[t];if(!n){this.debug(`%c${this.constructor.name} | ${this.state} -> ${t} -> ${this.state}`,"color: grey");return}let o=this.state;return typeof n=="string"?o=n:typeof n=="object"&&(o=n.target),this.debug(`%c${this.constructor.name} | ${this.state} -> ${t} -> ${o}`,"color: green"),(i=this.preTransitionCb)==null||i.call(this,this.state,o),this.state=o,typeof n=="function"?n(e):typeof n=="object"&&((s=n.action)==null||s.call(n,e)),this.state}},Hf=t=>`(${t})`,Ll=t=>`${Hf(t)}?`,zF=t=>Ll(`?:${t}`),fJ=(()=>{const t=".",e="[<>=^]",i="[+\\-( ]",s="[$#]",r="0",n="\\d+",o=",",a="\\d+",l="~",c="[%a-z]";return new RegExp(["^",zF(`${Ll(t)}${Hf(e)}`),Ll(i),Ll(s),Ll(r),Ll(n),Ll(o),zF(`\\.${Hf(a)}`),Ll(l),Ll(c),"$"].join(""),"i")})(),gJ=(()=>{const t=".*?",e=".+?",i=".*?";return new RegExp(["^",Hf(t),`#\\{${Hf(e)}\\}`,Hf(i),"$"].join(""))})();function W6(t){let e,i;const s=gJ.exec(t);s&&([,e,t,i]=s);const r=fJ.exec(t);if(!r)throw new Error(`The number formatter is invalid: ${t}`);const[,n,o,a,l,c,u,d,h,p,f]=r;return{fill:n,align:o,sign:a,symbol:l,zero:c,width:parseInt(u),comma:d,precision:parseInt(h),trim:!!p,type:f,prefix:e,suffix:i}}function z6(t){const e=typeof t=="string"?W6(t):t,{fill:i,align:s,sign:r="-",symbol:n,zero:o,width:a,comma:l,type:c,prefix:u="",suffix:d="",precision:h}=e;let{trim:p}=e;const f=h===void 0||isNaN(h);let m;if(!c)m=qn.g,p=!0;else if(c in qn&&c in Cf)m=f?Cf[c]:qn[c];else if(c in qn)m=qn[c];else if(c in Cf)m=Cf[c];else throw new Error(`The number formatter type is invalid: ${c}`);let g;return h==null||f?g=c?6:12:g=h,y=>{let v=m(y,g);return p&&(v=mJ(v)),l&&(v=vJ(v,l)),v=wJ(y,v,r),n&&n!=="#"&&(v=`${n}${v}`),n==="#"&&c==="x"&&(v=`0x${v}`),c==="s"&&(v=`${v}${yJ(y)}`),(c==="%"||c==="p")&&(v=`${v}%`),a!=null&&!isNaN(a)&&(v=SJ(v,a,i??o,s)),v=`${u}${v}${d}`,v}}var hb=t=>Math.floor(Math.abs(t)),Cf={b:t=>hb(t).toString(2),c:t=>String.fromCharCode(t),d:t=>Math.round(Math.abs(t)).toFixed(0),o:t=>hb(t).toString(8),x:t=>hb(t).toString(16),X:t=>Cf.x(t).toUpperCase(),n:t=>Cf.d(t),"%":t=>`${hb(t*100).toFixed(0)}`},qn={e:(t,e)=>Math.abs(t).toExponential(e),E:(t,e)=>qn.e(t,e).toUpperCase(),f:(t,e)=>Math.abs(t).toFixed(e),F:(t,e)=>qn.f(t,e).toUpperCase(),g:(t,e)=>{if(t===0)return"0";const i=Math.abs(t),s=Math.floor(Math.log10(i));return s>=-4&&s<e?i.toFixed(e-1-s):i.toExponential(e-1)},G:(t,e)=>qn.g(t,e).toUpperCase(),n:(t,e)=>qn.g(t,e),p:(t,e)=>qn.r(t*100,e),r:(t,e)=>{if(t===0)return"0";const i=Math.abs(t),r=Math.floor(Math.log10(i))-(e-1);if(r<=0)return i.toFixed(-r);const n=Math.pow(10,r);return(Math.round(i/n)*n).toFixed()},s:(t,e)=>{const i=$6(t);return qn.r(t/Math.pow(10,i),e)},"%":(t,e)=>qn.f(t*100,e)};function mJ(t){return t.replace(/\.0+$/,"").replace(/(\.[1-9])0+$/,"$1")}function vJ(t,e){let i=t.indexOf(".");i<0&&(i=t.length);const s=t.substring(0,i).split(""),r=t.substring(i);for(let n=s.length-3;n>0;n-=3)s.splice(n,0,e);return`${s.join("")}${r}`}function yJ(t){return CJ[$6(t)]}function $6(t){return Zt(K6,t?Math.floor(Math.log10(Math.abs(t))/3)*3:0,Y6)}var K6=-24,Y6=24,CJ={[K6]:"y",[-21]:"z",[-18]:"a",[-15]:"f",[-12]:"p",[-9]:"n",[-6]:"",[-3]:"m",0:"",3:"k",6:"M",9:"G",12:"T",15:"P",18:"E",21:"Z",[Y6]:"Y"},bJ="";function wJ(t,e,i=""){if(i==="(")return t>=0?e:`(${e})`;const s=i==="+"?"+":"";return`${t>=0?s:bJ}${e}`}function SJ(t,e,i=" ",s=">"){let r=t;if(s===">"||!s)r=r.padStart(e,i);else if(s==="<")r=r.padEnd(e,i);else if(s==="^"){const n=Math.max(0,e-r.length),o=Math.ceil(n/2),a=Math.floor(n/2);r=r.padStart(o+r.length,i),r=r.padEnd(a+r.length,i)}return r}function q6(t,e){const i=W6(e??",f"),{precision:s}=i;(s==null||isNaN(s))&&(i.type==="f"||i.type==="%"?i.precision=Math.max(...t.map(n=>{if(typeof n!="number"||n===0)return 0;const o=Math.floor(Math.log10(Math.abs(n))),a=i.type?6:12,l=n.toExponential(a-1).replace(/\.?0+e/,"e"),c=l.indexOf(".");if(c<0)return o>=0?0:-o;const u=l.indexOf("e")-c;return Math.max(0,u-o-1)})):(!i.type||i.type in qn)&&(i.precision=Math.max(...t.map(n=>{if(typeof n!="number")return 0;const o=n.toExponential((i.type?6:12)-1).replace(/\.?0+e/,"e");return o.substring(0,o.indexOf("e")).replace(".","").length}))));const r=z6(i);return n=>r(Number(n))}var X6=class oA extends Ei{constructor(){super([1,10],[0,1]),this.type="log",this.base=10,this.baseLog=MF,this.basePow=MF,this.log=e=>Math.min(...this.domain)>=0?this.baseLog(e):-this.baseLog(-e),this.pow=e=>Math.min(...this.domain)>=0?this.basePow(e):-this.basePow(-e),this.defaultClampMode="clamped"}toDomain(e){return e}transform(e){return Math.min(...this.domain)>=0?Math.log(e):-Math.log(-e)}transformInvert(e){return Math.min(...this.domain)>=0?Math.exp(e):-Math.exp(-e)}refresh(){this.base<=0&&(this.base=0,Be.warnOnce("expecting a finite Number greater than to 0")),super.refresh()}update(){!this.domain||this.domain.length<2||(this.baseLog=oA.getBaseLogMethod(this.base),this.basePow=oA.getBasePowerMethod(this.base),this.nice&&this.updateNiceDomain())}updateNiceDomain(){const[e,i]=this.domain,s=e>i?Math.ceil:Math.floor,r=e>i?Math.floor:Math.ceil,n=this.pow(s(this.log(e))),o=this.pow(r(this.log(i)));this.niceDomain=[n,o]}ticks(){var e;const i=(e=this.tickCount)!=null?e:10;if(!this.domain||this.domain.length<2||i<1)return[];this.refresh();const s=this.base,[r,n]=this.getDomain(),o=Math.min(r,n),a=Math.max(r,n);let l=this.log(o),c=this.log(a);if(this.interval){const g=Math.abs(this.interval),y=Math.abs(c-l);let v=Gy(l,c,Math.min(y,g));v=Oy(v.fractionDigits,v.map(b=>this.pow(b)).filter(b=>b>=o&&b<=a));const C=this.getPixelRange();if(!By({start:o,stop:a,interval:g,count:v.length,availableRange:C}))return v}const u=s%1===0,d=c-l>=i;if(!u||d){let g=Jx(l,c,Math.min(c-l,i));return g=Oy(g.fractionDigits,g.map(y=>this.pow(y))),g}const h=[],p=o>0;l=Math.floor(l)-1,c=Math.round(c)+1;const f=Iy(this.range)/i;let m=1/0;for(let g=l;g<=c;g++){const y=this.convert(this.pow(g+1));for(let v=1;v<s;v++){const C=p?v:s-v+1,b=this.pow(g)*C,T=this.convert(b),A=Math.abs(m-T),I=Math.abs(T-y),D=A>=f&&I>=f;b>=o&&b<=a&&(v===1||D||h.length===0)&&(h.push(b),m=T)}}return h}tickFormat({count:e,ticks:i,specifier:s}){return e!==1/0&&i==null&&this.ticks(),s??(s=this.base===10?".0e":","),io(s)?z6(s):s}static getBaseLogMethod(e){switch(e){case 10:return Math.log10;case Math.E:return Math.log;case 2:return Math.log2;default:const i=Math.log(e);return s=>Math.log(s)/i}}static getBasePowerMethod(e){switch(e){case 10:return i=>i>=0?_t(10,i):1/_t(10,-i);case Math.E:return Math.exp;default:return i=>_t(e,i)}}};q([lr],X6.prototype,"base",2);var BD=X6,Qi=class jd{constructor(e,i,s=!0){this.parentNode=e,this.autoCleanup=s,this.garbageBin=new Set,this._nodesMap=new Map,this._nodes=[],this.data=[],this.debug=is.create(!0,"scene","scene:selections"),this.nodeFactory=Object.prototype.isPrototypeOf.call(im,i)?()=>new i:i}static select(e,i,s=!0){return new jd(e,i,s)}static selectAll(e,i){const s=[],r=n=>{i(n)&&s.push(n),n.children.forEach(r)};return r(e),s}static selectByClass(e,i,...s){return jd.selectAll(e,r=>r instanceof i||s.some(n=>r instanceof n))}static selectByTag(e,i){return jd.selectAll(e,s=>s.tag===i)}createNode(e,i,s){const r=this.nodeFactory(e);return r.datum=e,i==null||i(r),s==null?this._nodes.push(r):this._nodes.splice(s,0,r),this.parentNode.appendChild(r),r}update(e,i,s){if(this.garbageBin.size>0&&this.debug(`Selection - update() called with pending garbage: ${e}`),s){const r=new Map(e.map((n,o)=>[s(n),[n,o]]));for(const[n,o]of this._nodesMap.entries())if(r.has(o)){const[a]=r.get(o);n.datum=a,this.garbageBin.delete(n),r.delete(o)}else this.garbageBin.add(n);for(const[n,[o,a]]of r.entries())this._nodesMap.set(this.createNode(o,i,a),n)}else{const r=Math.max(e.length,this.data.length);for(let n=0;n<r;n++)n>=e.length?this.garbageBin.add(this._nodes[n]):n>=this._nodes.length?this.createNode(e[n],i):(this._nodes[n].datum=e[n],this.garbageBin.delete(this._nodes[n]))}return this.data=e.slice(),this.autoCleanup&&this.cleanup(),this}cleanup(){return this.garbageBin.size===0?this:(this._nodes=this._nodes.filter(e=>this.garbageBin.has(e)?(this._nodesMap.delete(e),this.garbageBin.delete(e),this.parentNode.removeChild(e),!1):!0),this)}clear(){return this.update([]),this}isGarbage(e){return this.garbageBin.has(e)}hasGarbage(){return this.garbageBin.size>0}each(e){for(const i of this._nodes.entries())e(i[1],i[1].datum,i[0]);return this}*[Symbol.iterator](){for(let e=0;e<this._nodes.length;e++){const i=this._nodes[e],s=this._nodes[e].datum;yield{node:i,datum:s,index:e}}}select(e){return jd.selectAll(this.parentNode,e)}selectByClass(e){return jd.selectByClass(this.parentNode,e)}selectByTag(e){return jd.selectByTag(this.parentNode,e)}nodes(){return this._nodes}};function Fv(t,e,i,s){const r=t-i,n=e-s;return r*r+n*n}function Qb(t,e,i,s,r,n,o){if(i===r&&s===n)return Math.min(o,Fv(t,e,i,s));const a=r-i,l=n-s,c=Math.max(0,Math.min(1,((t-i)*a+(e-s)*l)/(a*a+l*l))),u=i+c*a,d=s+c*l;return Math.min(o,Fv(t,e,u,d))}function xJ(t,e,i,s,r,n,o,a,l){a&&([o,n]=[n,o]);const c=Math.atan2(e-s,t-i);if(!$C(c,n,o)){const d=i+Math.cos(n)*r,h=s+Math.sin(n)*r,p=i+Math.cos(n)*r,f=s+Math.sin(n)*r;return Math.min(l,Fv(t,e,d,h),Fv(t,e,p,f))}const u=r-Math.sqrt(Fv(t,e,i,s));return Math.min(l,u*u)}var sr=class extends jo{constructor(t={}){super(t),this.x1=0,this.y1=0,this.x2=0,this.y2=0,this.restoreOwnStyles()}set x(t){this.x1=t,this.x2=t}set y(t){this.y1=t,this.y2=t}computeBBox(){return new lt(Math.min(this.x1,this.x2),Math.min(this.y1,this.y2),Math.abs(this.x2-this.x1),Math.abs(this.y2-this.y1))}isPointInPath(t,e){if(this.x1===this.x2||this.y1===this.y2){const{x:i,y:s}=this.transformPoint(t,e);return this.computeBBox().grow(this.strokeWidth/2).containsPoint(i,s)}return!1}distanceSquared(t,e){const{x1:i,y1:s,x2:r,y2:n}=this;return Qb(t,e,i,s,r,n,1/0)}render(t){var e;const{ctx:i,forceRender:s,stats:r,devicePixelRatio:n}=t;if(this.dirty===0&&!s){r&&(r.nodesSkipped+=this.nodeCount.count);return}this.computeTransformMatrix(),this.matrix.toContext(i);let{x1:o,y1:a,x2:l,y2:c}=this;if(o===l){const{strokeWidth:u}=this,d=Math.round(o*n)/n+Math.trunc(u*n)%2/(n*2);o=d,l=d}else if(a===c){const{strokeWidth:u}=this,d=Math.round(a*n)/n+Math.trunc(u*n)%2/(n*2);a=d,c=d}i.beginPath(),i.moveTo(o,a),i.lineTo(l,c),this.fillStroke(i),(e=this.fillShadow)==null||e.markClean(),super.render(t)}};sr.className="Line";sr.defaultStyles=Object.assign({},jo.defaultStyles,{fill:void 0,strokeWidth:1});q([Qe({redraw:3})],sr.prototype,"x1",2);q([Qe({redraw:3})],sr.prototype,"y1",2);q([Qe({redraw:3})],sr.prototype,"x2",2);q([Qe({redraw:3})],sr.prototype,"y2",2);function EJ(t,e,i,s,r,n){if(t.size===0)return!1;let o=t.x,a=t.y;e!=null&&(o-=(e.x-.5)*t.size,a-=(e.y-.5)*t.size);let l=o;o<i?l=i:o>i+r&&(l=i+r);let c=a;a<s?c=s:a>s+n&&(c=s+n);const u=o-l,d=a-c;return Math.sqrt(u*u+d*d)<=t.size*.5}function Z6(t,e,i,s,r){const n=t.x+t.width>e&&t.x<e+s,o=t.y+t.height>i&&t.y<i+r;return n&&o}function TJ(t,e,i,s,r){return e+s<t.x+t.width&&e>t.x&&i>t.y&&i+r<t.y+t.height}function _J(t){return t!=null&&typeof t.point=="object"&&typeof t.label=="object"}var AJ={top:{x:0,y:-1},bottom:{x:0,y:1},left:{x:-1,y:0},right:{x:1,y:0}};function RJ(t,e,i=5){var s,r;const n=[];t=t.map(o=>o.slice().sort((a,l)=>l.point.size-a.point.size));for(let o=0;o<t.length;o++){const a=n[o]=[],l=t[o];if(l!=null&&l.length&&l[0].label)for(let c=0,u=l.length;c<u;c++){const d=l[c],{point:h,label:p,marker:f}=d,{text:m,width:g,height:y}=p,v=h.size*.5;let C=0,b=0;if(v>0&&d.placement!=null){const B=AJ[d.placement];C=(g*.5+v+i)*B.x,b=(y*.5+v+i)*B.y}const T=h.x-g*.5+C-(((s=f==null?void 0:f.center.x)!=null?s:.5)-.5)*h.size,A=h.y-y*.5+b-(((r=f==null?void 0:f.center.y)!=null?r:.5)-.5)*h.size;!(!e||TJ(e,T,A,g,y))||t.some(B=>B.some(U=>{var H;return EJ(U.point,(H=U.marker)==null?void 0:H.center,T,A,g,y)}))||n.some(B=>B.some(U=>Z6(U,T,A,g,y)))||a.push({index:c,text:m,x:T,y:A,width:g,height:y,datum:d})}}return n}function MJ(t,e){const i=[];for(let s=0;s<t.length;s++){const r=t[s],{point:{x:n,y:o},label:{text:a}}=r;let{label:{width:l,height:c}}=r;if(l+=e??0,c+=e??0,i.some(d=>Z6(d,n,o,l,c)))return!0;i.push({index:s,text:a,x:n,y:o,width:l,height:c,datum:r})}return!1}function J6(t,e){return t.length===e.length&&t.every((i,s)=>{const r=e[s];return Array.isArray(i)&&Array.isArray(r)?J6(i,r):i===r})}function Q6(t,e){return t.length===e.length&&t.every((i,s)=>Number(i)===Number(e[s]))}function DJ(t){const e=Ns(t)?t:t.split(".");if(e.length===1){const[i]=e;return pc((s,r,n)=>s[i]=n,s=>s[i])}return pc((i,s,r)=>dD(i,e,r),i=>cD(i,e))}function PJ(t){return pc((e,i,s)=>e[t]=s)}function Wi(t,e){return pc((i,s,r)=>i[t][e??s]=r)}function Hn(t){const{newValue:e,oldValue:i,changeValue:s}=t;return pc((r,n,o,a)=>(o!==a&&(a!==void 0&&(i==null||i.call(r,a)),o!==void 0&&(e==null||e.call(r,o)),s==null||s.call(r,o,a)),o))}function vo(t){return SX(t)}function Cg(t,e,i){i===void 0||i===""?t==null||t.removeAttribute(e):t==null||t.setAttribute(e,i.toString())}function e8(t,e,i,s,r){let{top:n,right:o,bottom:a,left:l,width:c,height:u}=r;return l!=null?c!=null?o=i-l+c:o!=null&&(c=i-l-o):o!=null&&c!=null&&(l=i-o-c),n!=null?u!=null?a=s-n-u:a!=null&&(u=s-a-n):a!=null&&u!=null&&(n=s-a-u),c==null?u==null?(c=t,u=e):c=Math.ceil(t*u/e):u==null&&(u=Math.ceil(e*c/t)),l==null&&(o==null?l=Math.floor((i-c)/2):l=i-o-c),n==null&&(a==null?n=Math.floor((s-u)/2):n=s-u-a),{x:l,y:n,width:c,height:u}}var bs="ag-chart-tooltip",t8="ag-chart-dark-tooltip",Lc={html:"",ariaLabel:""};function IJ(t){const e=(i,s,r)=>s===0||r[s-1]!=="."?". ":" ";return t.replace(/<br\s*\/?>/g,e).replace(/<\/p\s+>/g,e).replace(/<\/li\s*\/>/g,e).replace(/<[^>]+>/g,"")}function bg(t,e){var i,s,r;if(typeof t=="string")return{html:t,ariaLabel:t};const{content:n=(i=e==null?void 0:e.content)!=null?i:"",title:o=e==null?void 0:e.title,color:a=(s=e==null?void 0:e.color)!=null?s:"white",backgroundColor:l=(r=e==null?void 0:e.backgroundColor)!=null?r:"#888"}=t,c=o?`<div class="${bs}-title"
        style="color: ${a}; background-color: ${l}">${o}</div>`:"",u=o?`${o}: `:"",d=n?`<div class="${bs}-content">${n}</div>`:"";return{html:`${c}${d}`,ariaLabel:IJ(`${u}${n}`)}}var am=class extends ti{constructor(){super(...arguments),this.type="pointer",this.xOffset=0,this.yOffset=0}};q([te(ls(["pointer","node","top","right","bottom","left","top-left","top-right","bottom-right","bottom-left"],"a position type"))],am.prototype,"type",2);q([te(Ui)],am.prototype,"xOffset",2);q([te(Ui)],am.prototype,"yOffset",2);var Ma=class extends ti{constructor(){super(),this.enabled=!0,this.delay=0,this.range="nearest",this.wrapping="hyphenate",this.position=new am,this.darkTheme=!1,this.enableInteraction=!1,this.lastVisibilityChange=Date.now(),this.wrapTypes=["always","hyphenate","on-space","never"],this.showTimeout=0,this._showArrow=!0,this.element=hs("div",bs),Cg(this.element,"aria-hidden",!0),this.root=hl("body"),this.root.appendChild(this.element)}destroy(){this.element.remove()}isVisible(){return!this.element.classList.contains(bs+"-hidden")}show(t,e,i,s=!1){var r,n,o,a,l,c,u,d,h;const{element:p}=this;if(i!=null)p.innerHTML=i.html;else if(!p.innerHTML){this.toggle(!1);return}const f=(n=(r=e.position)==null?void 0:r.type)!=null?n:this.position.type,m=(a=(o=e.position)==null?void 0:o.xOffset)!=null?a:0,g=(c=(l=e.position)==null?void 0:l.yOffset)!=null?c:0,y=this.getTooltipBounds({positionType:f,meta:e,yOffset:g,xOffset:m,canvasRect:t}),v=this.getWindowSize(),C=e8(p.clientWidth,p.clientHeight,t.width,t.height,y);C.x+=t.x,C.y+=t.y;const b=Zt(0,C.x,v.width-p.clientWidth-1),T=Zt(0,C.y,v.height-p.clientHeight),A=b!==C.x||T!==C.y,I=(f==="node"||f==="pointer")&&!A&&!m&&!g,D=(d=(u=e.showArrow)!=null?u:this.showArrow)!=null?d:I;this.updateShowArrow(D),p.style.transform=`translate(${Math.round(b)}px, ${Math.round(T)}px)`,this.enableInteraction=(h=e.enableInteraction)!=null?h:!1,this.delay>0&&!s?(this.toggle(!1),this.showTimeout=setTimeout(()=>{this.toggle(!0)},this.delay)):this.toggle(!0)}getWindowSize(){const{innerWidth:t,innerHeight:e}=pl();return{width:t,height:e}}toggle(t){const{classList:e}=this.element,i=(l,c)=>e.toggle(`${bs}-${l}`,c),s=this.isVisible();let r=1/0;if(t||clearTimeout(this.showTimeout),s!==t){const l=Date.now();r=l-this.lastVisibilityChange,this.lastVisibilityChange=l}const n=100,o=5,a=!s&&t&&r>n;r>o&&i("no-animation",a),i("no-interaction",!this.enableInteraction),i("hidden",!t),i("arrow",this._showArrow),e.toggle(t8,this.darkTheme);for(const l of this.wrapTypes)e.toggle(`${bs}-wrap-${l}`,l===this.wrapping)}pointerLeftOntoTooltip(t){var e;if(!this.enableInteraction)return!1;const i=(e=t.sourceEvent.relatedTarget)==null?void 0:e.classList,r=!!["","-title","-content"].filter(n=>i==null?void 0:i.contains(`${bs}${n}`));return i!==void 0&&r}updateShowArrow(t){this._showArrow=t}getTooltipBounds({positionType:t,meta:e,yOffset:i,xOffset:s,canvasRect:r}){const{clientWidth:n,clientHeight:o}=this.element,a={width:n,height:o};switch(t){case"node":case"pointer":return a.top=e.offsetY+i-o-8,a.left=e.offsetX+s-n/2,a;case"top":return a.top=i,a.left=r.width/2-n/2+s,a;case"right":return a.top=r.height/2-o/2+i,a.left=r.width-n/2+s,a;case"left":return a.top=r.height/2-o/2+i,a.left=s,a;case"bottom":return a.top=r.height-o+i,a.left=r.width/2-n/2+s,a;case"top-left":return a.top=i,a.left=s,a;case"top-right":return a.top=i,a.left=r.width-n+s,a;case"bottom-right":return a.top=r.height-o+i,a.left=r.width-n+s,a;case"bottom-left":return a.top=r.height-o+i,a.left=s,a}}};q([te(Et)],Ma.prototype,"enabled",2);q([te(Et,{optional:!0})],Ma.prototype,"showArrow",2);q([vo((t,e,i)=>{e&&t.element.classList.add(e),i&&t.element.classList.remove(i)}),te($e,{optional:!0})],Ma.prototype,"class",2);q([te(Ge)],Ma.prototype,"delay",2);q([te(DD)],Ma.prototype,"range",2);q([te(Xx)],Ma.prototype,"wrapping",2);q([te(rt)],Ma.prototype,"position",2);q([te(Et)],Ma.prototype,"darkTheme",2);var Ki=class extends ti{constructor(){super(...arguments),this.id=wl(this),this.node=new ri({zIndex:1}).setProperties({textAlign:"center",pointerEvents:1}),this.enabled=!1,this.textAlign="center",this.fontSize=10,this.fontFamily="sans-serif",this.wrapping="always",this.truncated=!1}getOrAddRegion(t,e){return e==="root"?t.regionManager.getRegion("root"):t.regionManager.addRegionFromProperties({name:e,bboxproviders:[this.node],canInteraction:()=>this.enabled&&this.node.visible})}registerInteraction(t,e){const i=this.getOrAddRegion(t,e),s=[i.addListener("hover",r=>this.handleMouseMove(t,r)),i.addListener("leave",r=>this.handleMouseLeave(t,r))];return Oq(...s)}computeTextWrap(t,e){var i,s;const{text:r,wrapping:n}=this,o=Math.min((i=this.maxWidth)!=null?i:1/0,t),a=(s=this.maxHeight)!=null?s:e;if(!isFinite(o)&&!isFinite(a)){this.node.text=r;return}const{text:l,truncated:c}=ri.wrap(r??"",o,a,this,n);this.node.text=l,this.truncated=c}updateTooltip(t,e){if(e!==void 0&&this.enabled&&this.node.visible&&this.truncated){const{offsetX:i,offsetY:s}=e;return t.tooltipManager.updateTooltip(this.id,{offsetX:i,offsetY:s,lastPointerEvent:e,showArrow:!1},bg({content:this.text})),!0}return!1}handleMouseMove(t,e){this.updateTooltip(t,e)&&e.consume()}handleMouseLeave(t,e){t.tooltipManager.removeTooltip(this.id)}};Ki.SMALL_PADDING=10;Ki.LARGE_PADDING=20;q([te(Et)],Ki.prototype,"enabled",2);q([te($e,{optional:!0}),Wi("node")],Ki.prototype,"text",2);q([te(E6,{optional:!0}),Wi("node")],Ki.prototype,"textAlign",2);q([te(hd,{optional:!0}),Wi("node")],Ki.prototype,"fontStyle",2);q([te(pd,{optional:!0}),Wi("node")],Ki.prototype,"fontWeight",2);q([te(Ge),Wi("node")],Ki.prototype,"fontSize",2);q([te($e),Wi("node")],Ki.prototype,"fontFamily",2);q([te(mi,{optional:!0}),Wi("node","fill")],Ki.prototype,"color",2);q([te(Ge,{optional:!0})],Ki.prototype,"spacing",2);q([te(Ge,{optional:!0})],Ki.prototype,"lineHeight",2);q([te(Ge,{optional:!0})],Ki.prototype,"maxWidth",2);q([te(Ge,{optional:!0})],Ki.prototype,"maxHeight",2);q([te(Xx)],Ki.prototype,"wrapping",2);var FJ=["stroke","lineDash"],LJ=Ic(t=>pa(t)&&Object.keys(t).every(e=>FJ.includes(e)),"objects with gridline style properties such as 'stroke' or 'lineDash'"),tE=class{constructor(){this.enabled=!0,this.width=1,this.style=[{stroke:void 0,lineDash:[]}]}};q([te(Et)],tE.prototype,"enabled",2);q([te(Ge)],tE.prototype,"width",2);q([te(LJ)],tE.prototype,"style",2);var As=class extends ti{constructor(){super(...arguments),this.enabled=!0,this.autoWrap=!1,this.fontSize=12,this.fontFamily="Verdana, sans-serif",this.padding=5,this.minSpacing=NaN,this.color="rgba(87, 87, 87, 1)",this.avoidCollisions=!0,this.mirrored=!1,this.parallel=!1}getSideFlag(){return this.mirrored?1:-1}};q([te(Et)],As.prototype,"enabled",2);q([te(Et,{optional:!0})],As.prototype,"autoWrap",2);q([te(Ge,{optional:!0})],As.prototype,"maxWidth",2);q([te(Ge,{optional:!0})],As.prototype,"maxHeight",2);q([te(hd,{optional:!0})],As.prototype,"fontStyle",2);q([te(pd,{optional:!0})],As.prototype,"fontWeight",2);q([te(Ui.restrict({min:1}))],As.prototype,"fontSize",2);q([te($e)],As.prototype,"fontFamily",2);q([te(Ge)],As.prototype,"padding",2);q([te(sm),Ra(NaN)],As.prototype,"minSpacing",2);q([te(mi,{optional:!0})],As.prototype,"color",2);q([te(dd,{optional:!0})],As.prototype,"rotation",2);q([te(Et)],As.prototype,"avoidCollisions",2);q([te(Et)],As.prototype,"mirrored",2);q([te(Et)],As.prototype,"parallel",2);q([te(go,{optional:!0})],As.prototype,"formatter",2);q([te($e,{optional:!0})],As.prototype,"format",2);var ZC=class{constructor(){this.enabled=!0,this.width=1,this.color=void 0}};q([te(Et)],ZC.prototype,"enabled",2);q([te(Ge)],ZC.prototype,"width",2);q([te(mi,{optional:!0})],ZC.prototype,"color",2);var Da=class extends ti{constructor(){super(...arguments),this.enabled=!1,this.spacing=Ki.SMALL_PADDING,this.fontSize=10,this.fontFamily="sans-serif",this.wrapping="always"}};q([te(Et)],Da.prototype,"enabled",2);q([te($e,{optional:!0})],Da.prototype,"text",2);q([te(Ge,{optional:!0})],Da.prototype,"spacing",2);q([te(hd,{optional:!0})],Da.prototype,"fontStyle",2);q([te(pd,{optional:!0})],Da.prototype,"fontWeight",2);q([te(Ge)],Da.prototype,"fontSize",2);q([te($e)],Da.prototype,"fontFamily",2);q([te(mi,{optional:!0})],Da.prototype,"color",2);q([te(Xx)],Da.prototype,"wrapping",2);q([te(go,{optional:!0})],Da.prototype,"formatter",2);function aA(t){const[e,i]=fa(t.range),s=Math.floor(e),r=Math.ceil(i);return{min:s,max:r,visible:s!==r}}var lA=Math.PI*2,kJ=lA/2;function NJ(t,e){return Math.abs(e-t)<kJ?e:t>e?e+lA:e-lA}function i8(t){const e=(o,a)=>{const[l=t.min,c=t.max]=fa(a??[]);return o<l||o>c};return{tick:{fromFn(o,a,l){let c=o.y1+o.translationY,u=o.opacity;return(l==="added"||e(o.datum.translationY,o.datum.range))&&(c=a.translationY,u=0),{y:0,translationY:c,opacity:u,phase:Xr[l]}},toFn(o,a,l){const c=a.translationY;let u=1;return l==="removed"&&(u=0),{y:0,translationY:c,opacity:u,finish:{y:c,translationY:0}}},intermediateFn(o,a,l){return{visible:!e(o.y)}}},line:{fromFn(o,a){var l;return qe(Se({},(l=o.previousDatum)!=null?l:a),{phase:Xr.updated})},toFn(o,a){return Se({},a)}},label:{fromFn(o,a,l){var c;const u=(c=o.previousDatum)!=null?c:a,d=u.x,h=u.y,p=u.rotationCenterX;let f=Math.round(o.translationY),m=u.rotation,g=o.opacity;return l==="removed"||e(u.y,u.range)?m=a.rotation:(l==="added"||e(o.datum.y,o.datum.range))&&(f=Math.round(u.translationY),g=0,m=a.rotation),{x:d,y:h,rotationCenterX:p,translationY:f,rotation:m,opacity:g,phase:Xr[l]}},toFn(o,a,l){var c,u;const d=a.x,h=a.y,p=a.rotationCenterX,f=Math.round(a.translationY);let m=0,g=1;return l==="added"?(g=1,m=a.rotation):l==="removed"?(g=0,m=a.rotation):m=NJ((u=(c=o.previousDatum)==null?void 0:c.rotation)!=null?u:a.rotation,a.rotation),{x:d,y:h,rotationCenterX:p,translationY:f,rotation:m,opacity:g,finish:{rotation:a.rotation}}}},group:{fromFn(o,a){const{rotation:l,translationX:c,translationY:u}=o;return{rotation:l,translationX:c,translationY:u,phase:Xr.updated}},toFn(o,a){const{rotation:l,translationX:c,translationY:u}=a;return{rotation:l,translationX:c,translationY:u}}}}}function s8(){return(t,e)=>({rotation:e.rotation,rotationCenterX:e.rotationCenterX,rotationCenterY:e.rotationCenterY,translationX:e.translationX,translationY:e.translationY})}function r8(t){const{visible:e,min:i,max:s}=t;return(r,n)=>{const o=n.translationY,a=e&&o>=i&&o<=s;return{y:o,translationY:0,opacity:1,visible:a}}}function n8(){return(t,e)=>({x:e.x,y:e.y,translationY:e.translationY,rotation:e.rotation,rotationCenterX:e.rotationCenterX})}function o8(){return(t,e)=>Se({},e)}var dp=class a8{constructor(e,i,s){this.moduleCtx=e,this.scale=i,this.id=wl(this),this.nice=!0,this.reverse=!1,this.keys=[],this.dataDomain={domain:[],clipped:!1},this.boundSeries=[],this.includeInvisibleDomains=!1,this.interactionEnabled=!0,this.axisGroup=new ft({name:`${this.id}-axis`,zIndex:2}),this.lineNode=this.axisGroup.appendChild(new sr),this.tickLineGroup=this.axisGroup.appendChild(new ft({name:`${this.id}-Axis-tick-lines`,zIndex:2})),this.tickLabelGroup=this.axisGroup.appendChild(new ft({name:`${this.id}-Axis-tick-labels`,zIndex:2})),this.crossLineGroup=new ft({name:`${this.id}-CrossLines`}),this.gridGroup=new ft({name:`${this.id}-Axis-grid`}),this.gridLineGroup=this.gridGroup.appendChild(new ft({name:`${this.id}-gridLines`,zIndex:1})),this.tickLineGroupSelection=Qi.select(this.tickLineGroup,sr,!1),this.tickLabelGroupSelection=Qi.select(this.tickLabelGroup,ri,!1),this.gridLineGroupSelection=Qi.select(this.gridLineGroup,sr,!1),this.line=new ZC,this.tick=this.createTick(),this.gridLine=new tE,this.label=this.createLabel(),this.defaultTickMinSpacing=a8.defaultTickMinSpacing,this.translation={x:0,y:0},this.rotation=0,this.layout={label:{fractionDigits:0,padding:this.label.padding,format:this.label.format}},this.destroyFns=[],this.range=[0,1],this.visibleRange=[0,1],this.title=new Da,this._titleCaption=new Ki,this.gridLength=0,this.fractionDigits=0,this.gridPadding=0,this.seriesAreaPadding=0,this.tickGenerationResult=void 0,this.maxThickness=1/0,this.moduleMap=new GD,this.refreshScale(),this.destroyFns.push(this._titleCaption.registerInteraction(this.moduleCtx,"root")),this._titleCaption.node.rotation=-Math.PI/2,this.axisGroup.appendChild(this._titleCaption.node),this.destroyFns.push(e.regionManager.getRegion("series").addListener("hover",n=>this.checkAxisHover(n))),this.animationManager=e.animationManager,this.animationState=new XC("empty",{empty:{update:{target:"ready",action:()=>this.resetSelectionNodes()},reset:"empty"},ready:{update:n=>this.animateReadyUpdate(n),resize:()=>this.resetSelectionNodes(),reset:"empty"}}),this._crossLines=[],this.assignCrossLineArrayConstructor(this._crossLines);let r;this.destroyFns.push(e.layoutService.addListener("layout-complete",n=>{r!=null&&Ho(n.chart,r)!=null&&this.animationState.transition("resize"),r=Se({},n.chart)})),(s==null?void 0:s.respondsToZoom)!==!1&&this.destroyFns.push(e.updateService.addListener("update-complete",n=>{this.minRect=n.minRect}))}get type(){var e;return(e=this.constructor.type)!=null?e:""}set crossLines(e){var i,s;(i=this._crossLines)==null||i.forEach(r=>this.detachCrossLine(r)),e&&this.assignCrossLineArrayConstructor(e),this._crossLines=e,(s=this._crossLines)==null||s.forEach(r=>{this.attachCrossLine(r),this.initCrossLine(r)})}get crossLines(){return this._crossLines}resetAnimation(e){e==="initial"&&this.animationState.transition("reset")}attachCrossLine(e){this.crossLineGroup.appendChild(e.group),this.crossLineGroup.appendChild(e.labelGroup)}detachCrossLine(e){this.crossLineGroup.removeChild(e.group),this.crossLineGroup.removeChild(e.labelGroup)}destroy(){this.moduleMap.destroy(),this.destroyFns.forEach(e=>e())}refreshScale(){var e;this.range=this.scale.range.slice(),(e=this.crossLines)==null||e.forEach(this.initCrossLine,this)}updateRange(){var e;const{range:i,visibleRange:s,scale:r}=this,n=(i[1]-i[0])/(s[1]-s[0]),o=n*s[0],a=i[0]-o;r.range=[a,a+n],(e=this.crossLines)==null||e.forEach(l=>{l.clippedRange=[i[0],i[1]]})}setCrossLinesVisible(e){this.crossLineGroup.visible=e}attachAxis(e,i){i.appendChild(this.gridGroup),e.appendChild(this.axisGroup),e.appendChild(this.crossLineGroup)}detachAxis(e,i){i.removeChild(this.gridGroup),e.removeChild(this.axisGroup),e.removeChild(this.crossLineGroup)}inRange(e,i=0,s=0){const[r,n]=fa(this.range);return e+i>=r-s&&e<=n+s}onLabelFormatChange(e,i,s){const{scale:r,fractionDigits:n}=this,a=!(r instanceof BD)&&n>0?l=>typeof l=="number"?l.toFixed(n):String(l):l=>String(l);if(s&&r&&r.tickFormat)try{this.labelFormatter=r.tickFormat({ticks:e,specifier:s})}catch{this.labelFormatter=a,Be.warnOnce(`the axis label format string ${s} is invalid. No formatting will be applied`)}else this.labelFormatter=a}setTickInterval(e){var i;this.scale.interval=(i=this.tick.interval)!=null?i:e}setTickCount(e,i,s){const{scale:r}=this,n=Ei.is(r)||Yl.is(r);if(e&&n){if(typeof e=="number"){r.tickCount=e,r.minTickCount=i??0,r.maxTickCount=s??1/0;return}r instanceof th&&this.setTickInterval(e)}}onGridLengthChange(e,i){var s;(i&&!e||!i&&e)&&this.onGridVisibilityChange(),(s=this.crossLines)==null||s.forEach(this.initCrossLine,this)}onGridVisibilityChange(){this.gridLineGroupSelection.clear()}createLabel(){return new As}checkAxisHover(e){!this.interactionEnabled||!this.computeBBox().containsPoint(e.offsetX,e.offsetY)||this.moduleCtx.chartEventManager.axisHover(this.id,this.direction)}update(e=0,i=!0){if(!this.tickGenerationResult)return;const{rotation:s,parallelFlipRotation:r,regularFlipRotation:n}=this.calculateRotations(),o=this.label.getSideFlag();this.updatePosition();const a=this.getAxisLineCoordinates(),{tickData:l,combinedRotation:c,textBaseline:u,textAlign:d,primaryTickCount:h}=this.tickGenerationResult,p=this.tickLabelGroupSelection.nodes().map(f=>f.datum.tickId);if(this.updateSelections(a,l.ticks,{combinedRotation:c,textAlign:d,textBaseline:u,range:this.scale.range}),!i||this.animationManager.isSkipped())this.resetSelectionNodes();else{const f=this.calculateUpdateDiff(p,l);this.animationState.transition("update",f)}return this.updateAxisLine(),this.updateLabels(),this.updateVisibility(),this.updateGridLines(o),this.updateTickLines(),this.updateTitle({anyTickVisible:l.ticks.length>0}),this.updateCrossLines({rotation:s,parallelFlipRotation:r,regularFlipRotation:n}),this.updateLayoutState(),h}getAxisLineCoordinates(){const[e,i]=fa(this.range);return{x:0,y1:e,y2:i}}getTickLineCoordinates(e){const s=this.label.getSideFlag()*this.getTickSize(),r=Math.min(0,s),n=r+Math.abs(s),o=e.translationY;return{x1:r,x2:n,y:o}}getTickLabelProps(e,i){const{label:s}=this,{combinedRotation:r,textBaseline:n,textAlign:o,range:a}=i,l=e.tickLabel,u=s.getSideFlag()*(this.getTickSize()+s.padding+this.seriesAreaPadding),d=l!==""&&l!=null;return{tickId:e.tickId,translationY:e.translationY,fill:s.color,fontFamily:s.fontFamily,fontSize:s.fontSize,fontStyle:s.fontStyle,fontWeight:s.fontWeight,rotation:r,rotationCenterX:u,text:l,textAlign:o,textBaseline:n,visible:d,x:u,y:0,range:a}}getTickSize(){return this.tick.enabled?this.tick.size:this.createTick().size}setTitleProps(e,i){var s;const{title:r}=this;if(!r.enabled){e.enabled=!1;return}if(e.color=r.color,e.fontFamily=r.fontFamily,e.fontSize=r.fontSize,e.fontStyle=r.fontStyle,e.fontWeight=r.fontWeight,e.enabled=r.enabled,e.wrapping=r.wrapping,r.enabled){const n=e.node,o=((s=r.spacing)!=null?s:0)+i.spacing,a=this.label.getSideFlag(),l=ys(this.rotation),c=a===-1&&l>Math.PI&&l<Math.PI*2?-1:1,u=c*a*Math.PI/2,d=c===1?"bottom":"top",{range:h}=this,p=Math.floor(c*a*(h[0]+h[1])/2),f=Math.floor(a===-1?c*-o:-o),{callbackCache:m}=this.moduleCtx,{formatter:g=v=>v.defaultValue}=r,y=m.call(g,this.getTitleFormatterParams());n.setProperties({rotation:u,text:y,textBaseline:d,visible:!0,x:p,y:f})}}calculateLayout(e){var i,s;const{rotation:r,parallelFlipRotation:n,regularFlipRotation:o}=this.calculateRotations(),a=this.label.getSideFlag(),l=a*(this.getTickSize()+this.label.padding+this.seriesAreaPadding);this.updateScale(),this.tickGenerationResult=this.generateTicks({primaryTickCount:e,parallelFlipRotation:n,regularFlipRotation:o,labelX:l,sideFlag:a}),this.updateLayoutState();const c=this.tickGenerationResult,{tickData:u,combinedRotation:d,textBaseline:h,textAlign:p}=c,f=xs(c,["tickData","combinedRotation","textBaseline","textAlign"]),m=[],{x:g,y1:y,y2:v}=this.getAxisLineCoordinates(),C=new lt(g+Math.min(a*this.seriesAreaPadding,0),y,this.seriesAreaPadding,v-y);if(m.push(C),this.tick.enabled&&u.ticks.forEach(D=>{const{x1:F,x2:B,y:U}=this.getTickLineCoordinates(D),H=new lt(F,U,B-F,0);m.push(H)}),this.label.enabled){const D=new ri;u.ticks.forEach(F=>{const B=this.getTickLabelProps(F,{combinedRotation:d,textAlign:p,textBaseline:h,range:this.scale.range});if(!B.visible)return;D.setProperties(qe(Se({},B),{translationY:Math.round(F.translationY)}));const U=D.computeTransformedBBox();U&&m.push(U)})}const b=D=>{const F=new Xa,{rotation:B,translationX:U,translationY:H,rotationCenterX:R,rotationCenterY:L}=this.getAxisTransform();return Xa.updateTransformMatrix(F,1,1,B,U,H,{scalingCenterX:0,scalingCenterY:0,rotationCenterX:R,rotationCenterY:L}),F.transformBBox(D)};if((i=this.title)!=null&&i.enabled){const D=new Ki,F=lt.merge(m).width;this.setTitleProps(D,{spacing:F});const U=D.node.computeTransformedBBox();U&&m.push(U)}const T=lt.merge(m),A=b(T),I=this.isAnySeriesActive();return(s=this.crossLines)==null||s.forEach(D=>{var F;D.sideFlag=-a,D.direction=r===-Math.PI/2?"x":"y",D instanceof nA&&(D.label.parallel=(F=D.label.parallel)!=null?F:this.label.parallel),D.parallelFlipRotation=n,D.regularFlipRotation=o,D.calculateLayout(I,this.reverse)}),e=f.primaryTickCount,{primaryTickCount:e,bbox:A}}updateLayoutState(){this.layout.label={fractionDigits:this.fractionDigits,padding:this.label.padding,format:this.label.format}}setDomain(e){this.dataDomain=this.normaliseDataDomain(e),this.reverse&&this.dataDomain.domain.reverse(),this.scale.domain=this.dataDomain.domain}updateScale(){this.updateRange(),this.calculateDomain(),this.setTickInterval(this.tick.interval);const{scale:e,nice:i}=this;Ei.is(e)&&(e.nice=i,e.update())}calculateRotations(){const e=Nr(this.rotation),i=ys(e),s=ys(e-Math.PI/2);return{rotation:e,parallelFlipRotation:i,regularFlipRotation:s}}generateTicks({primaryTickCount:e,parallelFlipRotation:i,regularFlipRotation:s,labelX:r,sideFlag:n}){var o;const{scale:a,tick:l,label:{parallel:c,rotation:u,fontFamily:d,fontSize:h,fontStyle:p,fontWeight:f}}=this,m=e!==void 0,{defaultRotation:g,configuredRotation:y,parallelFlipFlag:v,regularFlipFlag:C}=uS({rotation:u,parallel:c,regularFlipRotation:s,parallelFlipRotation:i}),b=y+g,T=new Xa,{maxTickCount:A}=this.estimateTickCount({minSpacing:l.minSpacing,maxSpacing:(o=l.maxSpacing)!=null?o:NaN}),D=!(Ei.is(a)||Yl.is(a))||isNaN(A)?10:A;let F=eT(c,y,0,n,C);const B=oJ(c,y,n,v),U={fontFamily:d,fontSize:h,fontStyle:p,fontWeight:f,textBaseline:B,textAlign:F};let H={rawTicks:[],ticks:[],labelCount:0},R=0,L=0,_=!0,w=!1;for(;_&&R<=D&&!w;){L=0,F=eT(c,y,0,n,C);const x=this.getTickStrategies({secondaryAxis:m,index:R});for(const E of x){({tickData:H,index:R,autoRotation:L,terminate:w}=E({index:R,tickData:H,textProps:U,labelOverlap:_,terminate:w,primaryTickCount:e}));const M=y!==0||L!==0,O=b+L;F=eT(c,y,L,n,C),_=this.label.avoidCollisions?this.checkLabelOverlap(O,M,T,H.ticks,r,qe(Se({},U),{textAlign:F})):!1}}const S=g+y+L;return!m&&H.rawTicks.length>0&&(e=H.rawTicks.length),{tickData:H,primaryTickCount:e,combinedRotation:S,textBaseline:B,textAlign:F}}getTickStrategies({index:e,secondaryAxis:i}){const{scale:s,label:r,tick:n}=this,o=Ei.is(s)||Yl.is(s),a=r.enabled&&r.avoidCollisions,l=!o&&e!==0&&a,c=r.autoRotate===!0&&r.rotation===void 0,u=[];let d;this.tick.values?d=3:i?d=1:l?d=2:d=0;const h=({index:p,tickData:f,primaryTickCount:m,terminate:g})=>this.createTickData(d,p,f,g,m);if(u.push(h),!o&&!isNaN(n.minSpacing)){const p=({index:f,tickData:m,primaryTickCount:g,terminate:y})=>this.createTickData(2,f,m,y,g);u.push(p)}if(!a)return u;if(r.autoWrap){const p=({index:f,tickData:m,textProps:g})=>this.wrapLabels(m,f,g);u.push(p)}else if(c){const p=({index:f,tickData:m,labelOverlap:g,terminate:y})=>({index:f,tickData:m,autoRotation:this.getAutoRotation(g),terminate:y});u.push(p)}return u}createTickData(e,i,s,r,n){var o;const{scale:a,tick:l}=this,{maxTickCount:c,minTickCount:u,defaultTickCount:d}=this.estimateTickCount({minSpacing:l.minSpacing,maxSpacing:(o=l.maxSpacing)!=null?o:NaN}),h=Ei.is(a)||Yl.is(a),p=!h||isNaN(c)?10:c;let f=h?Math.max(d-i,u):c;const m=l.interval===void 0&&l.values===void 0&&f>u&&(h||e===2);let g=!0;for(;g&&i<=p;){const v=s.rawTicks;f=h?Math.max(d-i,u):c;const{rawTicks:C,ticks:b,labelCount:T}=this.getTicks({tickGenerationType:e,previousTicks:v,tickCount:f,minTickCount:u,maxTickCount:c,primaryTickCount:n});s.rawTicks=C,s.ticks=b,s.labelCount=T,g=m?Q6(C,v):!1,i++}const y=l.interval!==void 0||l.values!==void 0;return r||(r=y),{tickData:s,index:i,autoRotation:0,terminate:r}}checkLabelOverlap(e,i,s,r,n,o){Xa.updateTransformMatrix(s,1,1,e,0,0);const a=this.createLabelData(r,n,o,s),l=nJ(this.label.minSpacing,i);return MJ(a,l)}createLabelData(e,i,s,r){const n=[],o=new G6(s);for(const{tickLabel:a,translationY:l}of e){if(a===""||a==null)continue;const{width:c,height:u}=o.size(a),d=new lt(i,l,c,u),h=aJ(a,d,i,l,r);n.push(h)}return n}getAutoRotation(e){var i;return e?ys(Nr((i=this.label.autoRotateAngle)!=null?i:0)):0}getTicks({tickGenerationType:e,previousTicks:i,tickCount:s,minTickCount:r,maxTickCount:n,primaryTickCount:o}){var a;const{range:l,scale:c,visibleRange:u}=this;let d;switch(e){case 3:if(Ei.is(c)){const[C,b]=fa(c.getDomain().map(Number));d=this.tick.values.filter(T=>T>=C&&T<=b).sort((T,A)=>T-A)}else d=this.tick.values;break;case 1:Ei.is(c)?d=this.updateSecondaryAxisTicks(o):d=this.createTicks(s,r,n);break;case 2:d=this.filterTicks(i,s);break;default:d=this.createTicks(s,r,n);break}this.fractionDigits=d.fractionDigits>=0?d.fractionDigits:0;const h=((a=c.bandwidth)!=null?a:0)/2,p=[];let f=0;const m=new Map,g=Math.max(0,Math.floor(u[0]*d.length)),y=Math.min(d.length,Math.ceil(u[1]*d.length)),v=d.slice(g,y);this.onLabelFormatChange(v,d,this.label.format);for(let C=0;C<v.length;C++){const b=v[C],T=c.convert(b)+h;if(l.length>0&&!this.inRange(T,0,.001))continue;const A=this.formatTick(b,g+C);let I=A;if(m.has(I)){const D=m.get(I);m.set(I,D+1),I=`${I}_${D}`}else m.set(I,1);p.push({tick:b,tickId:I,tickLabel:A,translationY:Math.floor(T)}),!(A===""||A==null)&&f++}return{rawTicks:d,ticks:p,labelCount:f}}filterTicks(e,i){var s;const n=!isNaN(this.tick.minSpacing)||!isNaN((s=this.tick.maxSpacing)!=null?s:NaN)?Math.ceil(e.length/i):2;return e.filter((o,a)=>a%n===0)}createTicks(e,i,s){var r,n,o;return this.setTickCount(e,i,s),(o=(n=(r=this.scale).ticks)==null?void 0:n.call(r))!=null?o:[]}estimateTickCount({minSpacing:e,maxSpacing:i}){const{minRect:s,label:{avoidCollisions:r}}=this;if(!r)return{minTickCount:Ei.defaultMaxTickCount,maxTickCount:Ei.defaultMaxTickCount,defaultTickCount:Ei.defaultMaxTickCount};const n=this.calculateRangeWithBleed(),o=Math.max(this.defaultTickMinSpacing,n/Ei.defaultMaxTickCount);let a=!isNaN(i);isNaN(e)&&(e=o),isNaN(i)&&(i=n),e>i&&(e===o?e=i:i=e);let l=1;s&&(l=this.direction==="x"?s.width:s.height),a&&(a=l<o);const c=Zt(1,Math.floor(n/e),a?Math.min(Math.floor(n/l),100):100),u=Math.min(c,Math.ceil(n/i)),d=Zt(u,Ei.defaultTickCount,c);return{minTickCount:u,maxTickCount:c,defaultTickCount:d}}updateVisibility(){this.moduleCtx.animationManager.isSkipped()&&this.resetSelectionNodes(),this.tickLineGroup.visible=this.tick.enabled,this.gridLineGroup.visible=this.gridLine.enabled,this.tickLabelGroup.visible=this.label.enabled}updateCrossLines({rotation:e,parallelFlipRotation:i,regularFlipRotation:s}){var r;const n=this.label.getSideFlag(),o=this.isAnySeriesActive();(r=this.crossLines)==null||r.forEach(a=>{var l;a.sideFlag=-n,a.direction=e===-Math.PI/2?"x":"y",a instanceof nA&&(a.label.parallel=(l=a.label.parallel)!=null?l:this.label.parallel),a.parallelFlipRotation=i,a.regularFlipRotation=s,a.update(o)})}updateTickLines(){const{tick:e,label:i}=this,s=i.getSideFlag();this.tickLineGroupSelection.each(r=>{r.strokeWidth=e.width,r.stroke=e.color,r.x1=s*this.getTickSize(),r.x2=0})}calculateAvailableRange(){return Iy(this.range)}calculateRangeWithBleed(){const e=1/Iy(this.visibleRange);return SD(this.calculateAvailableRange()*e,2)}calculateDomain(){const i=this.boundSeries.filter(s=>this.includeInvisibleDomains||s.isEnabled()).flatMap(s=>s.getDomain(this.direction));this.setDomain(i)}getAxisTransform(){return{rotation:Nr(this.rotation),rotationCenterX:0,rotationCenterY:0,translationX:Math.floor(this.translation.x),translationY:Math.floor(this.translation.y)}}updatePosition(){const{crossLineGroup:e,axisGroup:i,gridGroup:s,translation:r,gridLineGroupSelection:n,gridPadding:o,gridLength:a}=this,{rotation:l}=this.calculateRotations(),c=this.label.getSideFlag(),u=Math.floor(r.x),d=Math.floor(r.y);e.setProperties({rotation:l,translationX:u,translationY:d}),s.setProperties({rotation:l,translationX:u,translationY:d}),i.datum=this.getAxisTransform(),n.each(h=>{h.x1=o,h.x2=-c*a+o})}updateSecondaryAxisTicks(e){throw new Error("AG Charts - unexpected call to updateSecondaryAxisTicks() - check axes configuration.")}updateSelections(e,i,s){this.lineNode.datum=e,this.gridLineGroupSelection.update(this.gridLength?i:[],r=>r.append(new sr),r=>r.tickId),this.tickLineGroupSelection.update(i,r=>r.appendChild(new sr),r=>r.tickId),this.tickLabelGroupSelection.update(i.map(r=>this.getTickLabelProps(r,s)),r=>r.appendChild(new ri),r=>r.tickId)}updateAxisLine(){const{line:e}=this,i=e.enabled?e.width:0;this.lineNode.setProperties({stroke:e.color,strokeWidth:i})}updateGridLines(e){const{gridLine:{style:i,width:s},gridPadding:r,gridLength:n}=this;n===0||i.length===0||this.gridLineGroupSelection.each((o,a,l)=>{const{stroke:c,lineDash:u}=i[l%i.length];o.setProperties({x1:r,x2:-e*n+r,fill:void 0,stroke:c,strokeWidth:s,lineDash:u})})}updateLabels(){const{label:e}=this;e.enabled&&this.tickLabelGroupSelection.each((i,s)=>{i.setProperties(s,["fill","fontFamily","fontSize","fontStyle","fontWeight","text","textAlign","textBaseline"])})}wrapLabels(e,i,s){const{parallel:r,maxWidth:n,maxHeight:o}=this.label;let a=this.maxThickness,l=Math.round(this.calculateAvailableRange()/e.labelCount);return r&&([a,l]=[l,a]),e.ticks.forEach(c=>{const{text:u}=ri.wrap(c.tickLabel,n??a,o??l,s,"hyphenate");c.tickLabel=u}),{tickData:e,index:i,autoRotation:0,terminate:!0}}updateTitle(e){const{rotation:i,title:s,_titleCaption:r,lineNode:n,tickLineGroup:o,tickLabelGroup:a}=this;if(!s){r.enabled=!1;return}let l=0;if(s.enabled&&e.anyTickVisible){const c=ft.computeBBox([o,a,n]),u=i===0?c.width:c.height;l+=u+(this.tickLabelGroup.visible?0:this.seriesAreaPadding)}this.setTitleProps(r,{spacing:l})}formatTick(e,i){return this.datumFormatter(i)(e)}formatDatum(e){return String(e)}datumFormatter(e=0){const{label:i,labelFormatter:s,fractionDigits:r,moduleCtx:{callbackCache:n}}=this;return i.formatter?o=>{var a;return(a=n.call(i.formatter,{value:r>0?o:String(o),index:e,fractionDigits:r,formatter:s}))!=null?a:o}:s?o=>{var a;return(a=n.call(s,o))!=null?a:String(o)}:o=>String(o)}computeBBox(){return this.axisGroup.computeBBox()}initCrossLine(e){e.scale=this.scale,e.gridLength=this.gridLength}isAnySeriesActive(){return this.boundSeries.some(e=>this.includeInvisibleDomains||e.isEnabled())}clipTickLines(e,i,s,r){this.tickLineGroup.setClipRectInGroupCoordinateSpace(new lt(e,i,s,r))}clipGrid(e,i,s,r){this.gridGroup.setClipRectInGroupCoordinateSpace(new lt(e,i,s,r))}calculatePadding(e,i){const s=Math.abs(this.reverse?i:e)*.01;return[s,s]}getTitleFormatterParams(){var e;const i=this.boundSeries.reduce((s,r)=>{const n=r.getKeys(this.direction),o=r.getNames(this.direction);for(let a=0;a<n.length;a++)s.push({key:n[a],name:o[a]});return s},[]);return{direction:this.direction,boundSeries:i,defaultValue:(e=this.title)==null?void 0:e.text}}normaliseDataDomain(e){return{domain:[...e],clipped:!1}}getLayoutState(){return Se({rect:this.computeBBox(),gridPadding:this.gridPadding,seriesAreaPadding:this.seriesAreaPadding,tickSize:this.getTickSize(),direction:this.direction,domain:this.dataDomain.domain,scale:this.scale},this.layout)}getModuleMap(){return this.moduleMap}createModuleContext(){var e;return(e=this.axisContext)!=null||(this.axisContext=this.createAxisContext()),qe(Se({},this.moduleCtx),{parent:this.axisContext})}createAxisContext(){return{axisId:this.id,direction:this.direction,continuous:Ei.is(this.scale),keys:()=>this.boundSeries.flatMap(e=>e.getKeys(this.direction)),seriesKeyProperties:()=>this.boundSeries.reduce((e,i)=>(i.getKeyProperties(this.direction).forEach(r=>{e.indexOf(r)<0&&e.push(r)}),e),[]),scaleValueFormatter:e=>{var i,s;return e?(s=(i=this.scale).tickFormat)==null?void 0:s.call(i,{specifier:e}):this.formatDatum},scaleBandwidth:()=>{var e;return(e=this.scale.bandwidth)!=null?e:0},scaleConvert:e=>this.scale.convert(e),scaleInvert:e=>{var i,s;return(s=(i=this.scale).invert)==null?void 0:s.call(i,e)}}}animateReadyUpdate(e){const{animationManager:i}=this.moduleCtx,s=aA(this),r=i8(s);Ji(this.id,"axis-group",i,[this.axisGroup],r.group),Ji(this.id,"line",i,[this.lineNode],r.line),Ji(this.id,"line-paths",i,[this.gridLineGroupSelection,this.tickLineGroupSelection],r.tick,(n,o)=>o.tickId,e),Ji(this.id,"tick-labels",i,[this.tickLabelGroupSelection],r.label,(n,o)=>o.tickId,e)}resetSelectionNodes(){const{gridLineGroupSelection:e,tickLineGroupSelection:i,tickLabelGroupSelection:s,lineNode:r}=this,n=aA(this);Ys([this.axisGroup],s8()),Ys([e,i],r8(n)),Ys([s],n8()),Ys([r],o8())}calculateUpdateDiff(e,i){const s=new Set,r=new Set,n=Math.max(e.length,i.ticks.length);for(let o=0;o<n;o++){const a=i.ticks[o],l=e[o],c=a==null?void 0:a.tickId;l!==c&&(r.has(c)?r.delete(c):c&&s.add(c),s.has(l)?s.delete(l):l&&r.add(l))}return{changed:s.size>0||r.size>0,added:s,removed:r}}isReversed(){return this.reverse}};dp.defaultTickMinSpacing=50;q([te(Et)],dp.prototype,"nice",2);q([te(Et)],dp.prototype,"reverse",2);q([te(S6)],dp.prototype,"keys",2);q([te(rt,{optional:!0})],dp.prototype,"title",2);q([vo((t,e,i)=>t.onGridLengthChange(e,i))],dp.prototype,"gridLength",2);var VD=dp,HD=class extends As{constructor(){super(...arguments),this.autoRotateAngle=335}};q([te(Et,{optional:!0})],HD.prototype,"autoRotate",2);q([te(dd)],HD.prototype,"autoRotateAngle",2);var jD=class l8 extends VD{constructor(){super(...arguments),this.thickness=0,this.position="left"}static is(e){return e instanceof l8}get direction(){return["top","bottom"].includes(this.position)?"x":"y"}updateDirection(){switch(this.position){case"top":this.rotation=-90,this.label.mirrored=!0,this.label.parallel=!0;break;case"right":this.rotation=0,this.label.mirrored=!0,this.label.parallel=!1;break;case"bottom":this.rotation=-90,this.label.mirrored=!1,this.label.parallel=!0;break;case"left":this.rotation=0,this.label.mirrored=!1,this.label.parallel=!1;break}this.axisContext&&(this.axisContext.position=this.position,this.axisContext.direction=this.direction)}update(e,i){return this.updateDirection(),super.update(e,i)}calculateLayout(e){return this.updateDirection(),super.calculateLayout(e)}createAxisContext(){return qe(Se({},super.createAxisContext()),{position:this.position})}assignCrossLineArrayConstructor(e){R6(e,nA)}createLabel(){return new HD}};q([te(Ge)],jD.prototype,"thickness",2);q([te(MD)],jD.prototype,"position",2);var JC=jD,iE=class extends xl{constructor(){super(...arguments),this.minSpacing=NaN}};q([te(Zx),Ra(NaN)],iE.prototype,"minSpacing",2);var fd=class extends JC{constructor(t,e=new ku){super(t,e),this._paddingOverrideEnabled=!1,this.groupPaddingInner=.1,this.includeInvisibleDomains=!0}set paddingInner(t){this._paddingOverrideEnabled=!0,this.scale.paddingInner=t}get paddingInner(){return this._paddingOverrideEnabled=!0,this.scale.paddingInner}set paddingOuter(t){this.scale.paddingOuter=t}get paddingOuter(){return this.scale.paddingOuter}createTick(){return new iE}normaliseDataDomain(t){const e=[],i=new Set;for(const s of t){const r=s instanceof Date?s.getTime():s;i.has(r)||(i.add(r),e.push(s))}return{domain:e,clipped:!1}}calculateDomain(){if(!this._paddingOverrideEnabled){const t=this.boundSeries.map(e=>{var i;return(i=e.getBandScalePadding)==null?void 0:i.call(e)}).filter(e=>e!=null);t.length>0&&(this.scale.paddingInner=Math.min(...t.map(e=>e.inner)),this.scale.paddingOuter=Math.max(...t.map(e=>e.outer)))}return super.calculateDomain()}};fd.className="CategoryAxis";fd.type="category";q([te(Si)],fd.prototype,"groupPaddingInner",2);var c8=class{constructor(t="",e,i=0){this.x=0,this.y=0,this.subtreeLeft=NaN,this.subtreeRight=NaN,this.screenX=0,this.screenY=0,this.children=[],this.leafCount=0,this.prelim=0,this.mod=0,this.ancestor=this,this.change=0,this.shift=0,this.label=t,this.parent=e,this.depth=e?e.depth+1:0,this.number=i}getLeftSibling(){return this.number>0&&this.parent?this.parent.children[this.number-1]:void 0}getLeftmostSibling(){return this.number>0&&this.parent?this.parent.children[0]:void 0}nextLeft(){return this.children?this.children[0]:this.thread}nextRight(){return this.children?this.children[this.children.length-1]:this.thread}getSiblings(){return this.parent?this.parent.children.filter((t,e)=>e!==this.number):[]}};function OJ(t,e=!0){const i=new c8;let s=0;return e&&t.forEach(r=>s=Math.max(s,r.labels.length)),t.forEach(r=>{if(e)for(;r.labels.length<s;)r.labels.unshift("");GJ(i,r)}),i}function GJ(t,e){const i=e.labels.slice().reverse(),s=i.length-1;i.forEach((r,n)=>{const o=t.children,a=o.find(c=>c.label===r),l=n!==s;if(a&&l)t=a;else{const c=new c8(r,t);c.number=o.length,o.push(c),l&&(t=c)}})}function BJ(t,e,i){const s=e.number-t.number,r=i/s;e.change-=r,e.shift+=i,t.change+=r,e.prelim+=i,e.mod+=i}function VJ(t,e,i){return e.getSiblings().indexOf(t.ancestor)>=0?t.ancestor:i}function HJ(t){const e=t.children;if(e){let i=0,s=0;for(let r=e.length-1;r>=0;r--){const n=e[r];n.prelim+=i,n.mod+=i,s+=n.change,i+=n.shift+s}}}function jJ(t,e,i){const s=t.getLeftSibling();if(s){let r=t,n=t,o=s,a=n.getLeftmostSibling(),l=n.mod,c=r.mod,u=o.mod,d=a.mod;for(;o.nextRight()&&n.nextLeft();){o=o.nextRight(),n=n.nextLeft(),a=a.nextLeft(),r=r.nextRight(),r.ancestor=t;const h=o.prelim+u-(n.prelim+l)+i;h>0&&(BJ(VJ(o,t,e),t,h),l+=h,c+=h),u+=o.mod,l+=n.mod,d+=a.mod,c+=r.mod}o.nextRight()&&!r.nextRight()?(r.thread=o.nextRight(),r.mod+=u-c):(n.nextLeft()&&!a.nextLeft()&&(a.thread=n.nextLeft(),a.mod+=l-d),e=t)}return e}function u8(t,e){const i=t.children;if(i.length){let s=i[0];i.forEach(o=>{u8(o,e),s=jJ(o,s,e)}),HJ(t);const r=(i[0].prelim+i.at(-1).prelim)/2,n=t.getLeftSibling();n?(t.prelim=n.prelim+e,t.mod=t.prelim-r):t.prelim=r}else{const s=t.getLeftSibling();t.prelim=s?s.prelim+e:0}}var $F=class{constructor(){this.top=1/0,this.right=-1/0,this.bottom=-1/0,this.left=1/0}update(t,e){const{x:i,y:s}=e(t);i>this.right&&(this.right=i),i<this.left&&(this.left=i),s>this.bottom&&(this.bottom=s),s<this.top&&(this.top=s)}};function d8(t,e,i){t.x=t.prelim+e,t.y=t.depth,i.update(t),t.children.forEach(s=>d8(s,e+t.mod,i))}function h8(t){const e=t.children;let i=0;e.forEach(s=>{h8(s),s.children.length?i+=s.leafCount:i++}),t.leafCount=i,e.length?(t.subtreeLeft=e[0].subtreeLeft,t.subtreeRight=e[t.children.length-1].subtreeRight,t.x=(t.subtreeLeft+t.subtreeRight)/2):(t.subtreeLeft=t.x,t.subtreeRight=t.x)}function UJ(t){const e=new WJ;return u8(t,1),d8(t,-t.prelim,e),h8(t),e}var WJ=class{constructor(){this.dimensions=new $F,this.leafCount=0,this.nodes=[],this.leafNodes=[],this.nonLeafNodes=[],this.depth=0}update(t){this.dimensions.update(t,e=>({x:e.x,y:e.y})),t.children.length?this.nonLeafNodes.push(t):(this.leafCount++,this.leafNodes.push(t)),t.depth>this.depth&&(this.depth=t.depth),this.nodes.push(t)}resize(t,e,i=0,s=0,r=!1){const n=this.leafCount-1,o=this.depth,a=this.dimensions;let l=1,c=1;if(t>0&&n){const p=(a.right-a.left)/n;l=t/n/p,r&&(l=-l)}if(e>0&&o){const p=(a.bottom-a.top)/o;c=e/o/p}const u=new $F;this.nodes.forEach(p=>{p.screenX=p.x*l,p.screenY=p.y*c,u.update(p,f=>({x:f.screenX,y:f.screenY}))});const d=-u.left,h=-u.top;this.nodes.forEach(p=>{p.screenX+=d+i,p.screenY+=h+s})}},p8=class extends As{constructor(){super(...arguments),this.grid=!1}};q([te(Et)],p8.prototype,"grid",2);var Nu=class extends JC{constructor(t){super(t,new ku),this.tickScale=new ku,this.line=new ZC,this.label=new p8,this.labelColor="rgba(87, 87, 87, 1)",this.includeInvisibleDomains=!0;const{tickLineGroup:e,tickLabelGroup:i,gridLineGroup:s,tickScale:r,scale:n}=this;n.paddingOuter=.1,n.paddingInner=n.paddingOuter*2,this.refreshScale(),r.paddingInner=1,r.paddingOuter=0,this.gridLineSelection=Qi.select(s,sr),this.axisLineSelection=Qi.select(e,sr),this.separatorSelection=Qi.select(e,sr),this.labelSelection=Qi.select(i,ri)}updateRange(){const{range:t,visibleRange:e,scale:i}=this,s=(t[1]-t[0])/(e[1]-e[0]),r=s*e[0],n=t[0]-r;this.tickScale.range=i.range=[n,n+s],this.resizeTickTree()}resizeTickTree(){var t;const e=this.scale,i=e.domain.length?[e.convert(e.domain[0]),e.convert(e.domain[e.domain.length-1])]:e.range,s=this.tickTreeLayout,r=this.lineHeight;s&&s.resize(Math.abs(i[1]-i[0]),s.depth*r,(Math.min(i[0],i[1])||0)+((t=e.bandwidth)!=null?t:0)/2,-s.depth*r,i[1]-i[0]<0)}get lineHeight(){return this.label.fontSize*1.5}onGridVisibilityChange(){this.gridLineSelection.clear(),this.labelSelection.clear()}createTick(){return new iE}calculateDomain(){var t;const{direction:e}=this;let i=null;const s=this.boundSeries.filter(n=>n.visible).flatMap(n=>{if(e==="y"||i)return n.getDomain(e);if(i===null){const o=n.getDomain(e);return i=Qn(o[0]),o}return[]});this.setDomain((t=bl(s))!=null?t:bD(s));const{domain:r}=this.dataDomain;this.tickTreeLayout=UJ(OJ(r)),this.tickScale.domain=r.concat(""),this.resizeTickTree()}update(){this.computedLayout&&(this.updatePosition(),this.updateTitleCaption(),this.updateCategoryLabels(),this.updateSeparators(),this.updateAxisLines(),this.updateCategoryGridLines(),this.resetSelectionNodes())}updateTitleCaption(){const{_titleCaption:t}=this;t.node.visible=!1}updateCategoryLabels(){if(!this.computedLayout)return;const{tickLabelLayout:t}=this.computedLayout;this.labelSelection.update(t).each((i,s)=>{i.setProperties(s)})}updateSeparators(){if(!this.computedLayout)return;const{separatorLayout:t}=this.computedLayout,{range:e}=this,i=1e-7;this.separatorSelection.update(t).each((r,n)=>{r.x1=n.x1,r.x2=n.x2,r.y1=n.y,r.y2=n.y,r.visible=n.y>=e[0]-i&&n.y<=e[1]+i,r.stroke=this.tick.color,r.fill=void 0,r.strokeWidth=1})}updateAxisLines(){if(!this.computedLayout)return;const{axisLineLayout:t}=this.computedLayout;this.axisLineSelection.update(t).each((i,s)=>{i.setProperties(qe(Se({},s),{stroke:this.line.color,strokeWidth:this.line.width})),i.x1=s.x,i.x2=s.x,i.y1=s.y1,i.y2=s.y2,i.strokeWidth=this.line.width,i.stroke=this.line.color})}updateCategoryGridLines(){const{gridLength:t,gridLine:e,label:i,range:s,tickScale:r}=this,n=r.ticks(),o=i.getSideFlag(),a=this.gridLineSelection.update(t?n:[]);if(t){const{width:l,style:c}=e,u=c.length;a.each((d,h,p)=>{const f=Math.round(r.convert(h));d.x1=0,d.x2=-o*t,d.y1=f,d.y2=f,d.visible=f>=s[0]&&f<=s[1];const{stroke:m,lineDash:g}=c[p%u];d.stroke=m,d.strokeWidth=l,d.lineDash=g,d.fill=void 0})}}computeLayout(){this.updateDirection(),this.calculateDomain(),this.updateRange();const{scale:t,label:e,label:{parallel:i},moduleCtx:{callbackCache:s},range:r,title:n,title:{formatter:o=G=>G.defaultValue}={}}=this,a=t.range[0],l=t.range[1],u=Math.abs(l-a)/t.domain.length||0,d=Math.ceil(e.fontSize/u),h=Nr(this.rotation),p=Math.abs(Math.cos(h))<1e-8,f=e.getSideFlag(),m=this.lineHeight,g=this.tickTreeLayout,y=t.ticks(),v=g?g.nodes:[],C=g?g.depth>1:!1,{defaultRotation:b,configuredRotation:T,parallelFlipFlag:A}=uS({rotation:e.rotation,parallel:i,regularFlipRotation:ys(h-Math.PI/2),parallelFlipRotation:ys(h)}),I=[],D=G=>({fill:G.fill,fontFamily:G.fontFamily,fontSize:G.fontSize,fontStyle:G.fontStyle,fontWeight:G.fontWeight,rotation:G.rotation,rotationCenterX:G.rotationCenterX,rotationCenterY:G.rotationCenterY,text:G.text,textAlign:G.textAlign,textBaseline:G.textBaseline,translationX:G.translationX,translationY:G.translationY,visible:G.visible,x:G.x,y:G.y}),F=new Map;let B=0;const U=new ri,H=(G,Z)=>{var N;if(U.setProperties({fill:e.color,fontFamily:e.fontFamily,fontSize:e.fontSize,fontStyle:e.fontStyle,fontWeight:e.fontWeight,textAlign:"center",textBaseline:A===-1?"bottom":"hanging",translationX:G.screenY-e.fontSize*.25,translationY:G.screenX}),Z===0){if(!((n==null?void 0:n.enabled)&&y.length>0))return!1;const j=s.call(o,this.getTitleFormatterParams());U.setProperties({fill:n.color,fontFamily:n.fontFamily,fontSize:n.fontSize,fontStyle:n.fontStyle,fontWeight:n.fontWeight,text:j,textBaseline:"hanging",translationX:G.screenY-e.fontSize*.25,translationY:G.screenX})}else if(Z%d===0){if(!(G.screenX>=r[0]&&G.screenX<=r[1]))return!1;e.formatter?U.text=(N=s.call(e.formatter,{value:String(G.label),index:Z}))!=null?N:String(G.label):U.text=String(G.label)}else return!1;return!0};v.forEach((G,Z)=>{if(!H(G,Z))return;const P=U.computeTransformedBBox();if(!P)return;F.set(Z,P),!G.children.length&&P.width>B&&(B=P.width)});const R=f*e.padding,L=this.label.grid,_=[];v.forEach((G,Z)=>{let N=H(G,Z);const P=Z;U.x=R,U.rotationCenterX=R;const j=!G.children.length;if(j)U.rotation=T,U.textAlign="end",U.textBaseline="middle";else{U.translationX-=B-m+this.label.padding;const ie=G.leafCount*u,ee=F.get(P);ee&&ee.width>ie?(N=!1,F.delete(P)):p?U.rotation=b:U.rotation=-Math.PI/2}if(G.parent&&C){const ie=j?G.screenX-u/2:G.screenX-G.leafCount*u/2;if(j)(G.number!==G.children.length-1||L)&&_.push({y:ie,x1:0,x2:-B-this.label.padding*2});else{const ee=-B-this.label.padding*2+G.screenY;_.push({y:ie,x1:ee+m,x2:ee})}}let X;if(N){const ie=U.computeTransformedBBox();ie&&F.set(Z,ie),X=qe(Se({},D(U)),{visible:N})}else F.delete(Z),X={visible:N};I.push(X)});let w=0;_.forEach(G=>w=Math.min(w,G.x2)),_.push({y:Math.max(a,l),x1:0,x2:w});const S=[],x=[],E=1e-7;_.forEach(G=>{if(G.y>=r[0]-E&&G.y<=r[1]+E){const{x1:Z,x2:N,y:P}=G,j=new lt(Math.min(Z,N),P,Math.abs(Z-N),0);x.push(j),S.push({x1:Z,x2:N,y:P})}});const M=[],O=[],V=g?g.depth+1:1;for(let G=0;G<V;G++){const Z=y.length>0&&(G===0||L&&C),N=G>0?-B-this.label.padding*2-(G-1)*m:0,P=new lt(N,Math.min(...r),0,Math.abs(r[1]-r[0]));O.push(P),M.push({x:N,y1:r[0],y2:r[1],visible:Z})}const Y=G=>{const Z=new Xa,{rotation:N,translationX:P,translationY:j,rotationCenterX:X,rotationCenterY:ie}=this.getAxisTransform();return Xa.updateTransformMatrix(Z,1,1,N,P,j,{scalingCenterX:0,scalingCenterY:0,rotationCenterX:X,rotationCenterY:ie}),Z.transformBBox(G)},$=lt.merge([...F.values(),...x,...O]);return{bbox:Y($),tickLabelLayout:I,separatorLayout:S,axisLineLayout:M}}calculateLayout(){const{axisLineLayout:t,separatorLayout:e,tickLabelLayout:i,bbox:s}=this.computeLayout();return this.computedLayout={axisLineLayout:t,separatorLayout:e,tickLabelLayout:i},{bbox:s,primaryTickCount:void 0}}};Nu.className="GroupedCategoryAxis";Nu.type="grouped-category";q([te(mi,{optional:!0})],Nu.prototype,"labelColor",2);function zJ(){if(typeof navigator>"u")return!1;const t=navigator.userAgent.match(/\(iPhone; CPU iPhone OS (\d+_\d+_\d+) like Mac OS X\)/);if(t==null)return!1;const[e,i]=t[1].split("_").map(Number);return e<16||e===16&&i<6}var UD=class cA{constructor(e){this.enabled=!0,this.width=600,this.height=300;const{width:i,height:s,pixelRatio:r,position:n,insertAsFirstChild:o}=e;this.insertAsFirstChild=o??!1,this.pixelRatio=zJ()?1:r??pl("devicePixelRatio"),this.element=hs("canvas"),this.element.width=Math.round((i??this.width)*this.pixelRatio),this.element.height=Math.round((s??this.height)*this.pixelRatio),n&&(this.element.style.position=n),this.context=this.element.getContext("2d"),this.onEnabledChange(),this.resize(i??0,s??0),cA.debugContext(this.context)}static is(e){return e instanceof cA}drawImage(e,i=0,s=0){return e.drawImage(this.context.canvas,i,s)}toDataURL(e){return this.element.toDataURL(e)}resize(e,i){if(!(e>0&&i>0))return;const{element:s,context:r,pixelRatio:n}=this;s.width=Math.round(e*n),s.height=Math.round(i*n),r.setTransform(n,0,0,n,0,0),s.style.width=e+"px",s.style.height=i+"px",this.width=e,this.height=i}snapshot(){}clear(){this.context.save(),this.context.setTransform(this.pixelRatio,0,0,this.pixelRatio,0,0),this.context.clearRect(0,0,this.width,this.height),this.context.restore()}destroy(){this.element.remove(),this.element.width=0,this.element.height=0,this.context.clearRect(0,0,0,0),Object.freeze(this)}onContainerChange(e,i){var s,r,n,o;e!==i&&((s=this.element.parentNode)==null||s.removeChild(this.element),this.insertAsFirstChild&&((r=this.container)!=null&&r.firstChild)?(n=this.container)==null||n.insertBefore(this.element,this.container.firstChild):(o=this.container)==null||o.appendChild(this.element))}onEnabledChange(){this.element&&(this.element.style.display=this.enabled?"block":"none")}static debugContext(e){if(is.check("canvas")){const i=e.save.bind(e),s=e.restore.bind(e);let r=0;Object.assign(e,{save(){i(),r++},restore(){if(r===0)throw new Error("AG Charts - Unable to restore() past depth 0");s(),r--},verifyDepthZero(){if(r!==0)throw new Error(`AG Charts - Save/restore depth is non-zero: ${r}`)}})}}};q([vo(t=>t.onEnabledChange())],UD.prototype,"enabled",2);q([vo((t,e,i)=>t.onContainerChange(e,i))],UD.prototype,"container",2);var WD=UD,$J=class f8{constructor(e,i){this.canvas=e,this.markDirty=i,this.debug=is.create(!0,"scene"),this.layersMap=new Map,this.nextZIndex=0,this.nextLayerId=0}static sortLayers(e,i){var s,r;return N6([e.zIndex,...(s=e.zIndexSubOrder)!=null?s:[void 0,void 0],e.id],[i.zIndex,...(r=i.zIndexSubOrder)!=null?r:[void 0,void 0],i.id],k6)}get size(){return this.layersMap.size}forEach(e){Array.from(this.layersMap.values()).sort(f8.sortLayers).forEach(e)}resize(e,i){this.canvas.resize(e,i),this.layersMap.forEach(({canvas:s})=>s.resize(e,i))}addLayer(e){const{width:i,height:s,pixelRatio:r}=this.canvas,{zIndex:n=this.nextZIndex++,name:o,zIndexSubOrder:a,getComputedOpacity:l,getVisibility:c}=e,u=new WD({width:i,height:s,pixelRatio:r,position:"absolute"}),d={id:this.nextLayerId++,name:o,canvas:u,zIndex:n,zIndexSubOrder:a,getComputedOpacity:l,getVisibility:c};return n>=this.nextZIndex&&(this.nextZIndex=n+1),this.layersMap.set(u,d),this.debug("Scene.addLayer() - layers",this.layersMap),d.canvas}removeLayer(e){this.layersMap.has(e)&&(this.layersMap.delete(e),e.destroy(),this.markDirty(),this.debug("Scene.removeLayer() -  layers",this.layersMap))}moveLayer(e,i,s){const r=this.layersMap.get(e);r&&(r.zIndex=i,r.zIndexSubOrder=s,this.markDirty(),this.debug("Scene.moveLayer() -  layers",this.layersMap))}clear(){this.layersMap.clear()}};function KF(t,e,i,s,r={}){if(!is.check("scene:stats","scene:stats:verbose"))return;const{layersRendered:n=0,layersSkipped:o=0,nodesRendered:a=0,nodesSkipped:l=0}=s??{},c=performance.now(),u=e,{start:d}=u,h=xs(u,["start"]),p=Object.entries(h).map(([T,A])=>qF(T,A)).filter(T=>T!=null).join(" + "),f=Object.entries(r).map(([T,A])=>`${T}: ${A}`).join(" ; "),m=is.check("scene:stats:verbose"),g=[`${qF("",d,c)} (${p})`,`${f}`,`Layers: ${m?YF(n,o):t.size}`,m?`Nodes: ${YF(a,l)}`:null].filter(io),y=new Map(g.map(T=>[T,ri.getTextSize(T,i.font)])),v=Math.max(...Array.from(y.values(),T=>T.width)),C=YJ(y.values(),T=>T.height);i.save(),i.fillStyle="white",i.fillRect(0,0,v,C),i.fillStyle="black";let b=0;for(const[T,A]of y.entries())b+=A.height,i.fillText(T,2,b);i.restore()}function KJ(t,e){t.save();for(const[i,s]of Object.entries(e)){const r=s.computeTransformedBBox();if(!r){Be.log(`Scene.render() - no bbox for debugged node [${i}].`);continue}t.globalAlpha=.8,t.strokeStyle="red",t.lineWidth=1,t.strokeRect(r.x,r.y,r.width,r.height),t.fillStyle="red",t.strokeStyle="white",t.font="16px sans-serif",t.textBaseline="top",t.textAlign="left",t.lineWidth=2,t.strokeText(i,r.x,r.y,r.width),t.fillText(i,r.x,r.y,r.width)}t.restore()}function ew(t){var e,i;return is.check(!0,"scene")?Se(Se({node:t,name:(e=t instanceof ft?t.name:null)!=null?e:t.id,dirty:bu[t.dirty]},(i=t.parent)!=null&&i.isVirtual?{virtualParentDirty:bu[t.parent.dirty],virtualParent:t.parent}:{}),t.children.map(s=>ew(s)).reduce((s,r)=>{let{name:n}=r;const{node:{visible:o,opacity:a,zIndex:l,zIndexSubOrder:c},node:u,virtualParent:d}=r;(!o||a<=0)&&(n=`(${n})`),u instanceof ft&&u.isLayer()&&(n=`*${n}*`);const h=[`${n??"<unknown>"}`,`z: ${l}`,c&&`zo: ${c.map(m=>typeof m=="function"?`${m()} (fn)`:m).join(" / ")}`,d&&"(virtual parent)"].filter(m=>!!m).join(" ");let p=h,f=1;for(;s[p]!=null&&f<100;)p=`${h} (${f++})`;return s[p]=r,s},{})):{}}function g8(t){var e;if(t.dirty===0)return{dirtyTree:{},paths:[]};const i=t.children.map(n=>g8(n)).filter(n=>n.paths.length>0),s=ft.is(t)&&(e=t.name)!=null?e:t.id,r=i.length?i.flatMap(n=>n.paths).map(n=>`${s}.${n}`):[s];return{dirtyTree:Se({name:s,node:t,dirty:bu[t.dirty]},i.map(n=>n.dirtyTree).filter(n=>n.dirty!=null).reduce((n,o)=>{var a;return n[(a=o.name)!=null?a:"<unknown>"]=o,n},{})),paths:r}}function YF(t,e){const i=t+e;return`${t} / ${i} (${Math.round(100*t/i)}%)`}function qF(t,e,i){const s=i!=null?i-e:e;return`${t}: ${Math.round(s*100)/100}ms`}function YJ(t,e){let i=0;for(const s of t)i+=e(s);return i}var zD=class{constructor({width:t,height:e,pixelRatio:i,canvasPosition:s}){this.debug=is.create(!0,"scene"),this.id=wl(this),this.root=null,this.isDirty=!1,this.canvas=new WD({width:t,height:e,pixelRatio:i,position:s,insertAsFirstChild:s==="absolute"}),this.layersManager=new $J(this.canvas,()=>{this.isDirty=!0})}get width(){var t,e;return(e=(t=this.pendingSize)==null?void 0:t[0])!=null?e:this.canvas.width}get height(){var t,e;return(e=(t=this.pendingSize)==null?void 0:t[1])!=null?e:this.canvas.height}setContainer(t){return this.canvas.container=t,this}setRoot(t){var e;return this.root===t?this:(this.isDirty=!0,(e=this.root)==null||e._setLayerManager(),this.root=t,t&&(t.visible=!0,t._setLayerManager(this.layersManager)),this)}attachNode(t){var e;return(e=this.root)==null||e.appendChild(t),()=>this.removeChild(t)}appendChild(t){var e;return(e=this.root)==null||e.appendChild(t),this}removeChild(t){var e;return(e=this.root)==null||e.removeChild(t),this}download(t,e){var i;o6(this.canvas.toDataURL(e),(i=t==null?void 0:t.trim())!=null?i:"image")}getDataURL(t){return this.canvas.toDataURL(t)}resize(t,e){return t=Math.round(t),e=Math.round(e),t>0&&e>0&&(t!==this.width||e!==this.height)?(this.pendingSize=[t,e],this.isDirty=!0,!0):!1}render(t){return Fe(this,null,function*(){var e,i;const{debugSplitTimes:s={start:performance.now()},extraDebugStats:r}=t??{},{canvas:n,canvas:{context:o}={},root:a,pendingSize:l}=this;if(!o)return;const c=performance.now();if(l&&(this.layersManager.resize(...l),this.pendingSize=void 0),a&&!a.visible){this.isDirty=!1;return}if(a&&!this.isDirty){this.debug.check()&&this.debug("Scene.render() - no-op",{redrawType:bu[a.dirty],tree:ew(a)}),KF(this.layersManager,s,o,void 0,r);return}const u={ctx:o,devicePixelRatio:(e=this.canvas.pixelRatio)!=null?e:1,forceRender:!0,resized:!!l,debugNodes:{}};is.check("scene:stats:verbose")&&(u.stats={layersRendered:0,layersSkipped:0,nodesRendered:0,nodesSkipped:0});let d=!1;if((!a||a.dirty>=1)&&(d=!0,n.clear()),a&&is.check("scene:dirtyTree")){const{dirtyTree:h,paths:p}=g8(a);is.create("scene:dirtyTree")("Scene.render() - dirtyTree",{dirtyTree:h,paths:p})}if(a&&d&&(this.debug("Scene.render() - before",{redrawType:bu[a.dirty],canvasCleared:d,tree:ew(a)}),a.visible&&(a.preRender(),o.save(),a.render(u),o.restore())),s[""]=performance.now()-c,this.layersManager.size&&d){const h=performance.now();o.save(),o.resetTransform(),this.layersManager.forEach(p=>{p.canvas.enabled&&p.getVisibility()&&(o.globalAlpha=p.getComputedOpacity(),p.canvas.drawImage(o))}),o.restore(),s[""]=performance.now()-h}(i=o.verifyDepthZero)==null||i.call(o),this.isDirty=!1,KF(this.layersManager,s,o,u.stats,r),KJ(o,u.debugNodes),a&&this.debug.check()&&this.debug("Scene.render() - after",{redrawType:bu[a.dirty],tree:ew(a),canvasCleared:d})})}strip(){const{context:t,pixelRatio:e}=this.canvas;t.setTransform(e,0,0,e,0,0),this.layersManager.clear(),this.setRoot(null),this.isDirty=!1}destroy(){this.canvas.container=void 0,this.strip(),this.canvas.destroy(),Object.assign(this,{canvas:void 0})}};zD.className="Scene";var qJ=`
[class^='ag-charts-icon'] {
    display: block;
    /* speak: none; */
    mask-size: contain;
    mask-repeat: no-repeat;
    background-color: currentColor;
}

.ag-charts-icon-zoom-in {
    mask-image: url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyNCIgaGVpZ2h0PSIyNCIgdmlld0JveD0iMCAwIDI0IDI0IiBmaWxsPSJub25lIiBzdHJva2U9ImN1cnJlbnRDb2xvciIgc3Ryb2tlLXdpZHRoPSIyIiBzdHJva2UtbGluZWNhcD0icm91bmQiIHN0cm9rZS1saW5lam9pbj0icm91bmQiIGNsYXNzPSJsdWNpZGUgbHVjaWRlLXpvb20taW4iPjxjaXJjbGUgY3g9IjExIiBjeT0iMTEiIHI9IjgiLz48bGluZSB4MT0iMjEiIHgyPSIxNi42NSIgeTE9IjIxIiB5Mj0iMTYuNjUiLz48bGluZSB4MT0iMTEiIHgyPSIxMSIgeTE9IjgiIHkyPSIxNCIvPjxsaW5lIHgxPSI4IiB4Mj0iMTQiIHkxPSIxMSIgeTI9IjExIi8+PC9zdmc+);
}

.ag-charts-icon-zoom-out {
    mask-image: url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyNCIgaGVpZ2h0PSIyNCIgdmlld0JveD0iMCAwIDI0IDI0IiBmaWxsPSJub25lIiBzdHJva2U9ImN1cnJlbnRDb2xvciIgc3Ryb2tlLXdpZHRoPSIyIiBzdHJva2UtbGluZWNhcD0icm91bmQiIHN0cm9rZS1saW5lam9pbj0icm91bmQiIGNsYXNzPSJsdWNpZGUgbHVjaWRlLXpvb20tb3V0Ij48Y2lyY2xlIGN4PSIxMSIgY3k9IjExIiByPSI4Ii8+PGxpbmUgeDE9IjIxIiB4Mj0iMTYuNjUiIHkxPSIyMSIgeTI9IjE2LjY1Ii8+PGxpbmUgeDE9IjgiIHgyPSIxNCIgeTE9IjExIiB5Mj0iMTEiLz48L3N2Zz4=);
}

.ag-charts-icon-reset {
    mask-image: url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyNCIgaGVpZ2h0PSIyNCIgdmlld0JveD0iMCAwIDI0IDI0IiBmaWxsPSJub25lIiBzdHJva2U9ImN1cnJlbnRDb2xvciIgc3Ryb2tlLXdpZHRoPSIyIiBzdHJva2UtbGluZWNhcD0icm91bmQiIHN0cm9rZS1saW5lam9pbj0icm91bmQiIGNsYXNzPSJsdWNpZGUgbHVjaWRlLXJvdGF0ZS1jY3ciPjxwYXRoIGQ9Ik0zIDEyYTkgOSAwIDEgMCA5LTkgOS43NSA5Ljc1IDAgMCAwLTYuNzQgMi43NEwzIDgiLz48cGF0aCBkPSJNMyAzdjVoNSIvPjwvc3ZnPg==);
}

.ag-charts-icon-pan-left {
    mask-image: url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyNCIgaGVpZ2h0PSIyNCIgdmlld0JveD0iMCAwIDI0IDI0IiBmaWxsPSJub25lIiBzdHJva2U9ImN1cnJlbnRDb2xvciIgc3Ryb2tlLXdpZHRoPSIyIiBzdHJva2UtbGluZWNhcD0icm91bmQiIHN0cm9rZS1saW5lam9pbj0icm91bmQiIGNsYXNzPSJsdWNpZGUgbHVjaWRlLWNoZXZyb24tbGVmdCI+PHBhdGggZD0ibTE1IDE4LTYtNiA2LTYiLz48L3N2Zz4=);
}

.ag-charts-icon-pan-right {
    mask-image: url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyNCIgaGVpZ2h0PSIyNCIgdmlld0JveD0iMCAwIDI0IDI0IiBmaWxsPSJub25lIiBzdHJva2U9ImN1cnJlbnRDb2xvciIgc3Ryb2tlLXdpZHRoPSIyIiBzdHJva2UtbGluZWNhcD0icm91bmQiIHN0cm9rZS1saW5lam9pbj0icm91bmQiIGNsYXNzPSJsdWNpZGUgbHVjaWRlLWNoZXZyb24tcmlnaHQiPjxwYXRoIGQ9Im05IDE4IDYtNi02LTYiLz48L3N2Zz4=);
}

.ag-charts-icon-pan-start {
    mask-image: url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyNCIgaGVpZ2h0PSIyNCIgdmlld0JveD0iMCAwIDI0IDI0IiBmaWxsPSJub25lIiBzdHJva2U9ImN1cnJlbnRDb2xvciIgc3Ryb2tlLXdpZHRoPSIyIiBzdHJva2UtbGluZWNhcD0icm91bmQiIHN0cm9rZS1saW5lam9pbj0icm91bmQiIGNsYXNzPSJsdWNpZGUgbHVjaWRlLWNoZXZyb24tZmlyc3QiPjxwYXRoIGQ9Im0xNyAxOC02LTYgNi02Ii8+PHBhdGggZD0iTTcgNnYxMiIvPjwvc3ZnPg==);
}

.ag-charts-icon-pan-end {
    mask-image: url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyNCIgaGVpZ2h0PSIyNCIgdmlld0JveD0iMCAwIDI0IDI0IiBmaWxsPSJub25lIiBzdHJva2U9ImN1cnJlbnRDb2xvciIgc3Ryb2tlLXdpZHRoPSIyIiBzdHJva2UtbGluZWNhcD0icm91bmQiIHN0cm9rZS1saW5lam9pbj0icm91bmQiIGNsYXNzPSJsdWNpZGUgbHVjaWRlLWNoZXZyb24tbGFzdCI+PHBhdGggZD0ibTcgMTggNi02LTYtNiIvPjxwYXRoIGQ9Ik0xNyA2djEyIi8+PC9zdmc+);
}

`,XJ=`
[class^='ag-charts'],
[class^='ag-charts']:focus,
[class^='ag-charts']:after,
[class^='ag-charts']:before {
    box-sizing: border-box;
    outline: none;
}

button[class^='ag-charts'] {
    background: none;
    border: 0;
}

`,ZJ=`
.ag-charts-theme-default,
.ag-charts-theme-default-dark {
    /* Colors */
    --ag-charts-active-color: var(--ag-active-color, #2196f3);
    --ag-charts-background-color: var(--ag-background-color, #fff);
    --ag-charts-foreground-color: var(--ag-foreground-color, #181d1f);
    --ag-charts-border-color: var(--ag-border-color, #dddddd);

    /* Sizing */
    --ag-charts-font-size: var(--ag-font-size, 14px);
    --ag-charts-size: var(--ag-grid-size, 8px);

    /* Borders */
    --ag-charts-border: var(--ag-borders, solid 1px);
    --ag-charts-border-critical: var(--ag-borders-critical, solid 1px);

    /* Toolbar */
    --ag-charts-toolbar-foreground-color: var(--ag-header-foreground-color, var(--ag-charts-foreground-color));
    --ag-charts-toolbar-background-color: var(
        --ag-header-background-color,
        color-mix(in srgb, var(--ag-charts-background-color), var(--ag-charts-foreground-color) 2%)
    );
    --ag-charts-toolbar-size: var(--ag-header-height, 48px);
    --ag-charts-toolbar-padding: calc(var(--ag-charts-size) * 2);
    --ag-charts-toolbar-border: var(--ag-charts-border, solid 1px) var(--ag-charts-border-color);
    --ag-charts-toolbar-border-critical: var(--ag-charts-border-critical, solid 1px) var(--ag-charts-border-color);
    --ag-charts-toolbar-hover-color: color-mix(in srgb, var(--ag-charts-background-color), var(--ag-charts-active-color) 12%);
    --ag-charts-toolbar-disabled-foreground-color: var(
        --ag-disabled-foreground-color,
        color-mix(in srgb, transparent, var(--ag-charts-toolbar-foreground-color) 50%)
    );
    --ag-charts-toolbar-disabled-background-color: var(
        --ag-input-disabled-background-color,
        color-mix(in srgb, var(--ag-charts-toolbar-background-color), var(--ag-charts-toolbar-foreground-color) 6%)
    );
    --ag-charts-toolbar-gap: var(--ag-charts-size);

    /* Buttons */
    --ag-charts-button-padding: var(--ag-charts-size);
    --ag-charts-button-radius: var(--ag-border-radius, 4px);

    /* Focus Indicator */
    --ag-charts-focus-border: solid 2px var(--ag-input-focus-border-color, var(--ag-charts-active-color));
    --ag-charts-focus-border-shadow: var(--ag-input-focus-box-shadow, 0 0 0 3px color-mix(in srgb, transparent, var(--ag-charts-focus-border) 47%));

    /* Icons */
    --ag-charts-icon-font-family: 'agChartsDefault';
    --ag-charts-icon-font-weight: normal;
    --ag-charts-icon-font-color: color-mix(in srgb, transparent, var(--ag-charts-foreground-color), 90%);
}

`,JJ=`
.ag-charts-theme-default-dark {
    /* Colors */
    --ag-charts-background-color: var(--ag-background-color, color-mix(in srgb, #fff, #182230 97%));
    --ag-charts-foreground-color: var(--ag-foreground-color, #fff);
    --ag-charts-border-color: var(--ag-border-color, rgba(255, 255, 255, 0.16));
    --ag-charts-hover-color: var(
        --ag-row-hover-color,
        color-mix(in srgb, transparent, var(--ag-charts-active-color) 20%)
    );

    /* Toolbar */
    --ag-charts-toolbar-background-color: var(--ag-header-background-color, color-mix(in srgb, #fff, #182230 93%));
}

`,QJ=`
/* Reset */
${XJ}

/* Icons */
${qJ}

/* AG Charts Theme Default */
${ZJ}

/* AG Charts Theme Default Dark */
${JJ}
`;function eQ(t){return new Promise(e=>{setTimeout(()=>e(void 0),t)})}var tQ=class{constructor(){this.available=!0,this.acquireQueue=[]}acquire(t){return new Promise(e=>{this.acquireQueue.push([t,e]),this.available&&this.dispatchNext().catch(i=>Be.errorOnce(i))})}acquireImmediately(t){return Fe(this,null,function*(){return this.available?(yield this.acquire(t),!0):!1})}waitForClearAcquireQueue(){return Fe(this,null,function*(){return this.acquire(()=>Fe(this,null,function*(){}))})}dispatchNext(){return Fe(this,null,function*(){var t,e;this.available=!1;let[i,s]=(t=this.acquireQueue.shift())!=null?t:[];for(;i;){try{yield i(),s==null||s()}catch(r){Be.error("mutex callback error",r),s==null||s()}[i,s]=(e=this.acquireQueue.shift())!=null?e:[]}this.available=!0})}},m8=class{constructor(){this.eventListeners=new Map}addEventListener(t,e){if(typeof e!="function")throw new Error("AG Charts - listener must be a Function");const i=this.eventListeners.get(t);i?i.add(e):this.eventListeners.set(t,new Set([e]))}removeEventListener(t,e){var i;(i=this.eventListeners.get(t))==null||i.delete(e),this.eventListeners.size===0&&this.eventListeners.delete(t)}hasEventListener(t){return this.eventListeners.has(t)}clearEventListeners(){this.eventListeners.clear()}fireEvent(t){var e;(e=this.eventListeners.get(t.type))==null||e.forEach(i=>i(t))}},gd=class extends ti{constructor(e=0,i=e,s=e,r=i){super(),this.top=e,this.right=i,this.bottom=s,this.left=r}clear(){this.top=this.right=this.bottom=this.left=0}};q([te(Ge)],gd.prototype,"top",2);q([te(Ge)],gd.prototype,"right",2);q([te(Ge)],gd.prototype,"bottom",2);q([te(Ge)],gd.prototype,"left",2);function iQ(t){return v8((e,i)=>requestAnimationFrame(e),t)}function sQ(t){return v8((e,i=0)=>setTimeout(e,i),t)}function v8(t,e){let i=0,s=!1,r,n;const o=()=>s,a=()=>{s=!1,n==null||n(),n=void 0,r=void 0,i>0&&t(l)},l=()=>{const c=i;i=0,s=!0;const u=e({count:c});if(!u){a();return}u.then(a,a)};return{schedule(c){i===0&&!o()&&t(l,c),i++},await(){return Fe(this,null,function*(){if(o())for(r==null&&(r=new Promise(c=>{n=c}));o();)yield r})}}}var rQ=class{constructor(){this.elements=new Map,this.documentReady=!1,this.queuedObserveRequests=[],this.onLoad=()=>{this.documentReady=!0,this.queuedObserveRequests.forEach(([e,i])=>this.observe(e,i)),this.queuedObserveRequests=[]};var t;typeof ResizeObserver>"u"||(this.resizeObserver=new ResizeObserver(e=>{for(const{target:i,contentRect:s}of e){const{width:r,height:n}=s;this.checkSize(this.elements.get(i),i,r,n)}}),this.documentReady=hl("readyState")==="complete",this.documentReady||(t=pl())==null||t.addEventListener("load",this.onLoad))}destroy(){var t,e;(t=pl())==null||t.removeEventListener("load",this.onLoad),(e=this.resizeObserver)==null||e.disconnect(),this.resizeObserver=null}checkSize(t,e,i,s){var r,n;t&&(i!==((r=t.size)==null?void 0:r.width)||s!==((n=t.size)==null?void 0:n.height))&&(t.size={width:i,height:s},t.cb(t.size,e))}observe(t,e){var i;if(!this.documentReady){this.queuedObserveRequests.push([t,e]);return}this.elements.has(t)?this.removeFromQueue(t):(i=this.resizeObserver)==null||i.observe(t),this.elements.set(t,{cb:e})}unobserve(t){var e;(e=this.resizeObserver)==null||e.unobserve(t),this.elements.delete(t),this.removeFromQueue(t),this.elements.size||this.destroy()}removeFromQueue(t){this.queuedObserveRequests=this.queuedObserveRequests.filter(([e])=>e!==t)}},nQ=class{constructor(){this.cache=new WeakMap}call(t,...e){let i,s=this.cache.get(t);const r=()=>{try{const n=t(...e);return s&&i!=null&&s.set(i,n),n}catch(n){Be.warnOnce("User callback errored, ignoring",n);return}};try{i=JSON.stringify(e)}catch{return r()}return s==null&&(s=new Map,this.cache.set(t,s)),s.has(i)?s.get(i):r()}invalidateCache(){this.cache=new WeakMap}},oQ=class{constructor(t){this.annotationRoot=t}attachNode(t){return this.annotationRoot.append(t),()=>{var e;return(e=this.annotationRoot)==null||e.removeChild(t),this}}setAnnotationStyles(t){this.styles=t}getAnnotationTypeStyles(t){var e;return(e=this.styles)==null?void 0:e[t]}},lm=class{constructor(){this.registeredListeners=new Map}addListener(t,e){const i={symbol:Symbol(t),handler:e};return this.registeredListeners.has(t)?this.registeredListeners.get(t).push(i):this.registeredListeners.set(t,[i]),()=>this.removeListener(i.symbol)}removeListener(t){for(const[e,i]of this.registeredListeners.entries()){const s=i.findIndex(r=>r.symbol===t);if(s>=0){i.splice(s,1),i.length===0&&this.registeredListeners.delete(e);break}}}dispatch(t,...e){for(const i of this.getListenersByType(t))try{i.handler(...e)}catch(s){Be.errorOnce(s)}}dispatchWrapHandlers(t,e,...i){for(const s of this.getListenersByType(t))try{e(s.handler,...i)}catch(r){Be.errorOnce(r)}}getListenersByType(t){var e;return(e=this.registeredListeners.get(t))!=null?e:[]}destroy(){this.registeredListeners.clear()}},sE=class extends lm{constructor(t){super(),this.animationManager=t,this.dispatchOnlyLatest=!0,this.dispatchThrottle=0,this.requestThrottle=300,this.isLoadingInitialData=!1,this.isLoadingData=!1,this.freshRequests=[],this.requestCounter=0,this.debug=is.create(!0,"data-model","data-source"),this.throttledFetch=this.createThrottledFetch(this.requestThrottle),this.throttledDispatch=this.createThrottledDispatch(this.dispatchThrottle)}updateCallback(t){typeof t=="function"&&(this.debug("DataService - updated data source callback"),this.dataSourceCallback=t,this.isLoadingInitialData=!0,this.animationManager.skip(),this.dispatch("data-source-change"))}clearCallback(){this.dataSourceCallback=void 0}load(t){this.isLoadingData=!0,this.throttledFetch(t)}isLazy(){return this.dataSourceCallback!=null}isLoading(){return this.isLazy()&&(this.isLoadingInitialData||this.isLoadingData)}createThrottledFetch(t){return DF(e=>this.fetch(e),t,{leading:!1,trailing:!0})}createThrottledDispatch(t){return DF((e,i)=>{this.debug(`DataService - dispatching 'data-load' | ${e}`),this.dispatch("data-load",{type:"data-load",data:i})},t,{leading:!0,trailing:!0})}fetch(t){return Fe(this,null,function*(){if(!this.dataSourceCallback)throw new Error("DataService - [dataSource.getData] callback not initialised");const e=performance.now(),i=this.requestCounter++;this.debug(`DataService - requesting | ${i}`),this.freshRequests.push(i);let s;try{s=yield this.dataSourceCallback(t),this.debug(`DataService - response | ${performance.now()-e}ms | ${i}`)}catch(n){this.debug(`DataService - request failed | ${i}`),Be.errorOnce(`DataService - request failed | [${n}]`)}this.isLoadingInitialData=!1;const r=this.freshRequests.findIndex(n=>n===i);if(r===-1||this.dispatchOnlyLatest&&r!==this.freshRequests.length-1){this.debug(`DataService - discarding stale request | ${i}`);return}this.freshRequests=this.freshRequests.slice(r+1),this.freshRequests.length===0&&(this.isLoadingData=!1),Array.isArray(s)?this.throttledDispatch(i,s):this.dispatch("data-error")})}};q([Hn({newValue(t){this.throttledDispatch=this.createThrottledDispatch(t)}})],sE.prototype,"dispatchThrottle",2);q([Hn({newValue(t){this.throttledFetch=this.createThrottledFetch(t)}})],sE.prototype,"requestThrottle",2);var XF=class{constructor(t){this.maxAnimationTime=t,this.debug=is.create(!0,"animation"),this.controllers=new Map,this.stoppedCbs=new Set,this.currentPhase=0,this.phases=new Map(ef.map(e=>[e,[]])),this.skipAnimations=!1,this.animationTimeConsumed=0,this.isReady=!1}get size(){return this.controllers.size}get consumedTimeMs(){return this.animationTimeConsumed}isActive(){return this.controllers.size>0}getActiveControllers(){var t;return(t=this.phases.get(ef[this.currentPhase]))!=null?t:[]}checkOverlappingId(t){t!=null&&this.controllers.has(t)&&(this.controllers.get(t).stop(),this.debug(`Skipping animation batch due to update of existing animation: ${t}`),this.skip())}addAnimation(t){var e;if(t.isComplete)return;if(ef.indexOf(t.phase)<this.currentPhase){this.debug("Skipping animation due to being for an earlier phase",t.id),t.stop();return}this.controllers.set(t.id,t),(e=this.phases.get(t.phase))==null||e.push(t)}removeAnimation(t){this.controllers.delete(t.id);const e=this.phases.get(t.phase),i=e==null?void 0:e.indexOf(t);i!=null&&i>=0&&(e==null||e.splice(i,1))}progress(t){if(!this.isReady)return;let e=t===0?.01:t;const i=()=>{const c=ef[this.currentPhase];return{phaseControllers:[...this.getActiveControllers()],phase:c,phaseMeta:ky[c]}};let{phase:s,phaseControllers:r,phaseMeta:n}=i();const o=()=>ef[this.currentPhase]==null,a=()=>{for({phase:s,phaseControllers:r,phaseMeta:n}=i();!o()&&r.length===0;)this.currentPhase++,{phase:s,phaseControllers:r,phaseMeta:n}=i(),this.debug(`AnimationBatch - phase changing to ${s}`,{unusedTime:e},r)},l=this.controllers.size;this.debug(`AnimationBatch - ${t}ms; phase ${s} with ${r==null?void 0:r.length} of ${l}`);do{const c=e,u=n.skipIfNoEarlierAnimations&&this.animationTimeConsumed===0;let d=0;for(const h of r)u?h.stop():e=Math.min(h.update(c),e),h.isComplete&&(d++,this.removeAnimation(h));this.animationTimeConsumed+=c-e,this.debug(`AnimationBatch - updated ${r.length} controllers; ${d} completed`),this.debug(`AnimationBatch - animationTimeConsumed: ${this.animationTimeConsumed}`),a()}while(e>0&&!o());this.animationTimeConsumed>this.maxAnimationTime&&(Be.warnOnce("Animation batch exceeded max animation time, skipping.",new Map(this.controllers.entries())),this.stop())}ready(){if(this.isReady)return;this.isReady=!0,this.debug(`AnimationBatch - ready; skipped: ${this.skipAnimations}`,[...this.controllers]);let t=!0;for(const[,e]of this.controllers)if(e.duration>0&&ky[e.phase].skipIfNoEarlierAnimations!==!0){t=!1;break}if(!t)for(const[,e]of this.controllers)e.autoplay&&e.play(!0)}skip(t=!0){if(this.skipAnimations===!1&&t===!0){for(const e of this.controllers.values())e.stop();this.controllers.clear()}this.skipAnimations=t}play(){for(const t of this.controllers.values())t.play()}pause(){for(const t of this.controllers.values())t.pause()}stop(){for(const t of this.controllers.values())try{t.stop(),this.removeAnimation(t)}catch(e){Be.error("Error during animation stop",e)}this.dispatchStopped()}stopByAnimationId(t){if(t!=null&&this.controllers.has(t)){const e=this.controllers.get(t);e&&(e.stop(),this.removeAnimation(e))}}stopByAnimationGroupId(t){for(const e of this.controllers.values())e.groupId===t&&this.stopByAnimationId(e.id)}dispatchStopped(){this.stoppedCbs.forEach(t=>t()),this.stoppedCbs.clear()}isSkipped(){return this.skipAnimations}destroy(){this.stop(),this.controllers.clear()}},kc=class{constructor(){this.listeners=new lm,this.destroyFns=[]}addListener(t,e){return this.listeners.addListener(t,e)}removeListener(t){this.listeners.removeListener(t)}destroy(){this.listeners.destroy(),this.destroyFns.forEach(t=>t())}};function hh(t){const e=qe(Se({},t),{consumed:!1,consume(){var i,s;e.consumed=!0,t.sourceEvent instanceof Event?(i=t.sourceEvent)==null||i.preventDefault():(s=t.sourceEvent)==null||s.consume()}});return e}function aQ(){return(t,e)=>{e.consumed||t(e)}}function tw(t,e,i){t.dispatchWrapHandlers(e,aQ(),i)}var $D=["click","dblclick","contextmenu","hover","drag-start","drag","drag-end","leave","enter","page-left","wheel"],lQ=["blur","focus"],cQ=["keydown","keyup"],ZF=["pagehide","mousemove","mouseup"],JF=["click","dblclick","contextmenu","mousedown","mouseout","mouseenter","touchstart","touchmove","touchend","touchcancel","wheel","blur","focus","keydown","keyup"],uQ=`
.ag-chart-wrapper {
    touch-action: none;
}
`,dS=(t=>(t[t.Default=16]="Default",t[t.ZoomDrag=8]="ZoomDrag",t[t.Annotations=4]="Annotations",t[t.ContextMenu=2]="ContextMenu",t[t.Animation=1]="Animation",t[t.All=31]="All",t))(dS||{}),y8=class uA extends kc{constructor(e,i){super(),this.keyboardOptions=e,this.debug=is.create(!0,"interaction"),this.eventHandler=s=>this.processEvent(s),this.mouseDown=!1,this.touchDown=!1,this.clickHistory=[{offsetX:NaN,offsetY:NaN,type:"mousedown"}],this.dblclickHistory=[{offsetX:NaN,offsetY:NaN,type:"mousedown"},{offsetX:NaN,offsetY:NaN,type:"mouseup"},{offsetX:NaN,offsetY:NaN,type:"mousedown"}],this.stateQueue=17,this.rootElement=hl("body"),this.element=i;for(const s of JF)s.startsWith("touch")?i.addEventListener(s,this.eventHandler,{passive:!0}):s==="wheel"?i.addEventListener(s,this.eventHandler,{passive:!1}):i.addEventListener(s,this.eventHandler);for(const s of ZF)pl().addEventListener(s,this.eventHandler);lp(uQ,"interactionManager")}destroy(){super.destroy();for(const e of ZF)pl().removeEventListener(e,this.eventHandler);for(const e of JF)this.element.removeEventListener(e,this.eventHandler)}addListener(e,i,s=16){return super.addListener(e,r=>{this.getState()&s&&i(r)})}pushState(e){this.stateQueue|=e}popState(e){this.stateQueue&=~e}getState(){return this.stateQueue&-this.stateQueue}processEvent(e){const i=this.decideInteractionEventTypes(e);i.length>0&&this.dispatchEvent(e,i).catch(s=>Be.errorOnce(s))}dispatchEvent(e,i){return Fe(this,null,function*(){if(Xb($D,i))this.dispatchPointerEvent(e,i);else if(Xb(lQ,i))for(const s of i)tw(this.listeners,s,hh({type:s,sourceEvent:e}));else if(Xb(cQ,i))for(const s of i)tw(this.listeners,s,hh({type:s,sourceEvent:e}))})}dispatchPointerEvent(e,i){const s=this.calculateCoordinates(e);if(s!=null)for(const r of i)tw(this.listeners,r,this.buildPointerEvent(Se({type:r,event:e},s)))}recordDown(e){e instanceof MouseEvent&&(Qd(["offsetX","offsetY"],this.clickHistory[0],e),Qd(["offsetX","offsetY"],this.dblclickHistory[2],this.dblclickHistory[0]),Qd(["offsetX","offsetY"],this.dblclickHistory[0],e)),this.dragStartElement=e.target}recordUp(e){e instanceof MouseEvent&&Qd(["offsetX","offsetY"],this.dblclickHistory[1],e),this.dragStartElement=void 0}decideInteractionEventTypes(e){const i="drag-start";switch(e.type){case"blur":case"focus":case"keydown":case"keyup":return this.keyboardOptions.enabled?[e.type]:[];case"click":case"dblclick":case"contextmenu":case"wheel":return[e.type];case"mousedown":return this.isEventOverElement(e)?(this.mouseDown=!0,this.recordDown(e),[i]):[];case"touchstart":return this.isEventOverElement(e)?(this.touchDown=!0,this.recordDown(e),[i]):[];case"touchmove":case"mousemove":return!this.mouseDown&&!this.touchDown&&!this.isEventOverElement(e)?[]:this.mouseDown||this.touchDown?["drag"]:["hover"];case"mouseup":return!this.mouseDown&&!this.isEventOverElement(e)?[]:(this.mouseDown=!1,this.recordUp(e),["drag-end"]);case"touchend":return!this.touchDown&&!this.isEventOverElement(e)?[]:(this.touchDown=!1,this.recordUp(e),["drag-end"]);case"mouseout":case"touchcancel":return["leave"];case"mouseenter":const s=e instanceof MouseEvent&&(e.buttons&1)===1;return this.mouseDown!==s?(this.mouseDown=s,[s?i:"drag-end"]):["enter"];case"pagehide":return["page-left"]}return[]}isEventOverElement(e){var i,s,r;return e.target===this.element||((i=e.target)==null?void 0:i.parentElement)===this.element||((r=(s=e.target)==null?void 0:s.parentElement)==null?void 0:r.parentElement)===this.element}calculateCoordinates(e){var i;if(e instanceof MouseEvent)return this.getMouseEventCoords(e);if(typeof TouchEvent<"u"&&e instanceof TouchEvent){const s=(i=e.touches[0])!=null?i:e.changedTouches[0],{clientX:r,clientY:n,pageX:o,pageY:a}=s;return qe(Se({},uA.NULL_COORDS),{clientX:r,clientY:n,pageX:o,pageY:a})}else if(e instanceof PageTransitionEvent)return e.persisted?void 0:uA.NULL_COORDS}getMouseEventCoords(e){const{clientX:i,clientY:s,pageX:r,pageY:n}=e;let{offsetX:o,offsetY:a}=e;const l=c=>{let u=0,d=0;for(;c;)u+=c.offsetLeft,d+=c.offsetTop,c=c.offsetParent;return{x:u,y:d}};if(this.dragStartElement!=null&&e.target!==this.dragStartElement){const c=l(this.dragStartElement),u=l(e.target);o-=c.x-u.x,a-=c.y-u.y}return{clientX:i,clientY:s,pageX:r,pageY:n,offsetX:o,offsetY:a}}isWheelEvent(e){return e.type==="wheel"}buildPointerEvent(e){const{type:i,event:s,clientX:r,clientY:n}=e;let{offsetX:o,offsetY:a,pageX:l,pageY:c}=e;if(!gi(o)||!gi(a)){const f=this.element.getBoundingClientRect();o=r-f.left,a=n-f.top}if(!gi(l)||!gi(c)){const f=this.rootElement.getBoundingClientRect();l=r-f.left,c=n-f.top}let[u,d]=[NaN,NaN];if(this.isWheelEvent(s)){const f=s.deltaMode===0?.01:1;u=s.deltaX*f,d=s.deltaY*f}let h=[];s.type==="click"?h=this.clickHistory:s.type==="dblclick"&&(h=this.dblclickHistory);const p=hh({type:i,offsetX:o,offsetY:a,pageX:l,pageY:c,deltaX:u,deltaY:d,pointerHistory:h,sourceEvent:s});return this.debug("InteractionManager - builtEvent: ",p),p}};y8.NULL_COORDS={clientX:-1/0,clientY:-1/0,pageX:-1/0,pageY:-1/0,offsetX:-1/0,offsetY:-1/0};var C8=y8;function QF(t){return t==null?!0:!isNaN(t)&&t>=0&&t<=2}var b8=class extends kc{constructor(t,e){super(),this.interactionManager=t,this.chartUpdateMutex=e,this.defaultDuration=1e3,this.batch=new XF(this.defaultDuration*1.5),this.debug=is.create(!0,"animation"),this.rafAvailable=typeof requestAnimationFrame<"u",this.isPlaying=!1,this.requestId=null,this.skipAnimations=!1}animate(t){var e=xs(t,[]),i;const s=this.batch;try{s.checkOverlappingId(e.id)}catch(c){this.failsafeOnError(c);return}const r=(i=e.id)!=null?i:Math.random().toString(),n=this.isSkipped()||e.phase==="none";n&&this.debug("AnimationManager - skipping animation");const{delay:o,duration:a}=e;if(!QF(o))throw new Error(`Animation delay of ${o} is unsupported (${r})`);if(!QF(a))throw new Error(`Animation duration of ${a} is unsupported (${r})`);const l=new v6(qe(Se({},e),{id:r,skip:n,autoplay:this.isPlaying?e.autoplay:!1,phase:e.phase,defaultDuration:this.defaultDuration}));if(!this.forceTimeJump(l,this.defaultDuration))return this.batch.addAnimation(l),l}play(){if(!this.isPlaying){this.isPlaying=!0,this.debug("AnimationManager.play()");try{this.batch.play()}catch(t){this.failsafeOnError(t)}this.requestAnimation()}}pause(){if(this.isPlaying){this.isPlaying=!1,this.cancelAnimation(),this.debug("AnimationManager.pause()");try{this.batch.pause()}catch(t){this.failsafeOnError(t)}}}stop(){this.isPlaying=!1,this.cancelAnimation(),this.debug("AnimationManager.stop()"),this.batch.stop()}stopByAnimationId(t){try{this.batch.stopByAnimationId(t)}catch(e){this.failsafeOnError(e)}}stopByAnimationGroupId(t){try{this.batch.stopByAnimationGroupId(t)}catch(e){this.failsafeOnError(e)}}reset(){this.isPlaying?(this.stop(),this.play()):this.stop()}skip(t=!0){this.skipAnimations=t}isSkipped(){return!this.rafAvailable||this.skipAnimations||this.batch.isSkipped()}isActive(){return this.isPlaying&&this.batch.isActive()}skipCurrentBatch(){this.debug.check()&&this.debug("AnimationManager - skipCurrentBatch()",{stack:new Error().stack}),this.batch.skip()}isSkippingFrames(){return!0}scheduleAnimationFrame(t){this.requestId=requestAnimationFrame(t)}forceTimeJump(t,e){return!1}requestAnimation(){if(!this.rafAvailable||!this.batch.isActive()||this.requestId!==null)return;let t;const e=i=>Fe(this,null,function*(){const s=()=>Fe(this,null,function*(){const r=i-(t??i);t=i,this.debug("AnimationManager - onAnimationFrame()",{controllersCount:this.batch.size,deltaTime:r}),this.interactionManager.pushState(1);try{this.batch.progress(r)}catch(n){this.failsafeOnError(n)}this.listeners.dispatch("animation-frame",{type:"animation-frame",deltaMs:r})});this.isSkippingFrames()?yield this.chartUpdateMutex.acquireImmediately(s):yield this.chartUpdateMutex.acquire(s),this.batch.isActive()?this.scheduleAnimationFrame(e):(this.batch.stop(),this.listeners.dispatch("animation-stop",{type:"animation-stop",deltaMs:this.batch.consumedTimeMs}))});this.listeners.dispatch("animation-start",{type:"animation-start",deltaMs:0}),this.scheduleAnimationFrame(e)}cancelAnimation(){this.requestId!==null&&(cancelAnimationFrame(this.requestId),this.requestId=null,this.startBatch())}failsafeOnError(t,e=!0){Be.error("Error during animation, skipping animations",t),e&&this.cancelAnimation()}startBatch(t){this.debug(`AnimationManager - startBatch() with skipAnimations=${t}.`),this.reset(),this.batch.stop(),this.batch.destroy(),this.batch=new XF(this.defaultDuration*1.5),t===!0&&this.batch.skip()}endBatch(){this.batch.isActive()?(this.batch.ready(),this.requestAnimation()):(this.interactionManager.popState(1),this.batch.isSkipped()&&this.batch.skip(!1))}onBatchStop(t){this.batch.stoppedCbs.add(t)}},dQ=class w8{constructor(e){this.canvas=e,this.debug=is.create(!0,"aria"),this.canvas.appendChild(this.liveElem=w8.createAnnouncer())}static createAnnouncer(){const e=hl().createElement("div");return e.classList.add("ag-charts-aria-announcer"),Cg(e,"role","status"),Cg(e,"aria-live","assertive"),e}destroy(){this.canvas.removeChild(this.liveElem)}announceValue(e){this.debug(`AriaAnnouncementService - announceValue: ${e}`),this.liveElem.textContent=e}},S8=class extends kc{legendItemClick(t,e,i,s){const r={type:"legend-item-click",series:t,itemId:e,enabled:i,legendItemName:s};this.listeners.dispatch("legend-item-click",r)}legendItemDoubleClick(t,e,i,s,r){const n={type:"legend-item-double-click",series:t,itemId:e,enabled:i,legendItemName:r,numVisibleItems:s};this.listeners.dispatch("legend-item-double-click",n)}axisHover(t,e){const i={type:"axis-hover",axisId:t,direction:e};this.listeners.dispatch("axis-hover",i)}},x8=class{constructor(){this.defaultActions=[],this.disabledActions=new Set}copyDefaultActions(){return[...this.defaultActions]}registerDefaultAction(t){t.id&&this.defaultActions.find(({id:e})=>e===t.id)||this.defaultActions.push(t)}enableAction(t){this.disabledActions.delete(t)}disableAction(t){this.disabledActions.add(t)}isDisabled(t){return this.disabledActions.has(t)}},wg=class extends Map{constructor(t,e){super(),this.defaultValue=t,this.defaultState=e}set(t,e){return this.delete(t),typeof e<"u"&&super.set(t,e),this}stateId(){var t;return(t=Array.from(this.keys()).pop())!=null?t:this.defaultState}stateValue(){var t;return(t=Array.from(this.values()).pop())!=null?t:this.defaultValue}},E8=class{constructor(t){this.element=t,this.stateTracker=new wg("default")}updateCursor(t,e){this.stateTracker.set(t,e),this.element.style.cursor=this.stateTracker.stateValue()}getCursor(){return this.element.style.cursor}};function hQ(t,e){const i=t.screenX-e.screenX,s=t.screenY-e.screenY;return i*i+s*s}function eL(t,e){return Math.sqrt(hQ(t,e))}var pQ=1,T8=class extends kc{constructor(t){super(),this.touchstart=e=>this.onTouchStart(e),this.touchmove=e=>this.onTouchMove(e),this.touchend=e=>this.onTouchEnd(e),this.touchcancel=e=>this.onTouchCancel(e),this.pinch={finger1:{identifier:NaN,screenX:NaN,screenY:NaN},finger2:{identifier:NaN,screenX:NaN,screenY:NaN},origin:{x:NaN,y:NaN},distance:NaN,status:0},this.element=t,t.addEventListener("touchstart",this.touchstart,{passive:!0}),t.addEventListener("touchmove",this.touchmove,{passive:!0}),t.addEventListener("touchend",this.touchend),t.addEventListener("touchcancel",this.touchcancel)}destroy(){const{element:t}=this;t.removeEventListener("touchstart",this.touchstart),t.removeEventListener("touchmove",this.touchmove),t.removeEventListener("touchend",this.touchend),t.removeEventListener("touchcancel",this.touchcancel)}findPinchTouches(t){const{touches:e}=t,{finger1:i,finger2:s}=this.pinch;if(this.pinch.status!==0&&e.length===2){if(e[0].identifier===i.identifier&&e[1].identifier===s.identifier)return[e[0],e[1]];if(e[0].identifier===s.identifier&&e[1].identifier===i.identifier)return[e[1],e[0]]}}copyTouchData(t){const e=["identifier","screenX","screenY"];Qd(e,this.pinch.finger1,t.touches[0]),Qd(e,this.pinch.finger2,t.touches[1]),this.pinch.distance=eL(this.pinch.finger1,this.pinch.finger2)}dispatchPinchEvent(t,e){const{finger1:i,finger2:s,origin:r}=this.pinch,n={type:t,finger1:i,finger2:s,deltaDistance:e,origin:r};this.listeners.dispatch(t,n)}onTouchStart(t){this.stopPinchTracking();const{pinch:e}=this;t.touches.length===2&&(e.status=1,this.copyTouchData(t),e.origin.x=(t.touches[0].clientX+t.touches[1].clientX)/2,e.origin.y=(t.touches[0].clientY+t.touches[1].clientY)/2)}onTouchMove(t){const e=this.findPinchTouches(t);if(e!==void 0){const[i,s]=e,{pinch:r}=this,n=eL(i,s),o=n-r.distance;r.status===1?Math.abs(o)>pQ&&(r.status=2,this.copyTouchData(t),this.dispatchPinchEvent("pinch-start",0)):r.status===2?(r.distance=n,this.copyTouchData(t),this.dispatchPinchEvent("pinch-move",o)):Be.error(`unexpected pinch.status: ${r.status}`)}}onTouchEnd(t){this.stopPinchTracking()}onTouchCancel(t){this.stopPinchTracking()}stopPinchTracking(){const{pinch:t}=this;t.status===2&&this.dispatchPinchEvent("pinch-end",0),this.pinch.status=0}},_8=class extends kc{constructor(){super(...arguments),this.highlightStates=new wg,this.pickedStates=new wg}updateHighlight(t,e){const{activeHighlight:i}=this;this.highlightStates.set(t,e),this.activeHighlight=this.highlightStates.stateValue(),this.isEqual(this.activeHighlight,i)||this.listeners.dispatch("highlight-change",{type:"highlight-change",currentHighlight:this.activeHighlight,previousHighlight:i})}getActiveHighlight(){return this.activeHighlight}updatePicked(t,e){this.pickedStates.set(t,e),this.activePicked=this.pickedStates.stateValue()}getActivePicked(){return this.activePicked}isEqual(t,e){return t===e||(t==null?void 0:t.series)===(e==null?void 0:e.series)&&(t==null?void 0:t.itemId)===(e==null?void 0:e.itemId)&&(t==null?void 0:t.datum)===(e==null?void 0:e.datum)}},fQ=class extends kc{constructor(t){super(),this.hasBrowserFocus=!1,this.isMouseBlurred=!1,this.isClicking=!1,this.destroyFns.push(t.addListener("drag-start",e=>this.onClickStart(e),31),t.addListener("click",e=>this.onClickStop(e),31),t.addListener("drag-end",e=>this.onClickStop(e),31),t.addListener("wheel",e=>this.mouseBlur(e)),t.addListener("hover",e=>this.mouseBlur(e)),t.addListener("drag",e=>this.mouseBlur(e)),t.addListener("blur",e=>this.onBlur(e),31),t.addListener("focus",e=>this.onFocus(e),31),t.addListener("keydown",e=>this.onKeyDown(e),31))}destroy(){super.destroy()}onClickStart(t){this.isClicking=!0,this.mouseBlur(t)}onClickStop(t){this.isClicking=!1,this.mouseBlur(t)}mouseBlur(t){this.hasBrowserFocus&&(this.isMouseBlurred||(this.dispatch("blur",0,t),this.isMouseBlurred=!0))}onBlur(t){this.hasBrowserFocus=!1,this.isMouseBlurred=!1,this.dispatch("blur",0,t)}onFocus(t){this.hasBrowserFocus=!0,this.isClicking?this.isMouseBlurred=!0:(this.dispatch("browserfocus",1,t),this.dispatch("tab",0,t))}onKeyDown(t){if(!(!this.hasBrowserFocus||this.isClicking))switch(this.isMouseBlurred=!1,t.sourceEvent.code){case"Tab":return t.sourceEvent.shiftKey?this.dispatch("tab",-1,t):this.dispatch("tab",1,t);case"ArrowDown":return this.dispatch("nav-vert",1,t);case"ArrowUp":return this.dispatch("nav-vert",-1,t);case"ArrowLeft":return this.dispatch("nav-hori",-1,t);case"ArrowRight":return this.dispatch("nav-hori",1,t);case"Space":case"Enter":return this.dispatch("submit",0,t)}}dispatch(t,e,i){const s=hh({type:t,delta:e,sourceEvent:i});tw(this.listeners,t,s)}},A8={};Cl(A8,{block:()=>Lh,css:()=>R8,elements:()=>dA,modifiers:()=>hS});var Lh="ag-charts-focus",dA={wrapper:`${Lh}__wrapper`,indicator:`${Lh}__indicator`},hS={hidden:`${Lh}--hidden`},R8=`
.${Lh}.${dA.wrapper} {
    position: relative;
    display: block;
    pointer-events: none;
    user-select: none;
    overflow: hidden;
    top: 0;
    left: 0;
}

.${Lh}.${dA.indicator} {
    position: absolute;
    display: block;
    pointer-events: none;
    user-select: none;
    border: var(--ag-charts-focus-border);
    box-shadow: var(--ag-charts-focus-border-shadow);
}

.${hS.hidden} {
    visibility: hidden;
}
`,tT=["series","legend"],gQ=class extends lm{},mQ=class{constructor(t,e,i,s){this.interactionManager=t,this.keyNavManager=e,this.canvasElement=i,this.currentTabIndex=0,this.isDragging=!1,this.leftCanvas=!1,this.regions=new Map,this.destroyFns=[],this.destroyFns.push(...$D.map(a=>t.addListener(a,this.processPointerEvent.bind(this),31)),this.keyNavManager.addListener("blur",this.onNav.bind(this)),this.keyNavManager.addListener("browserfocus",this.onFocus.bind(this)),this.keyNavManager.addListener("tab",this.onTab.bind(this)),this.keyNavManager.addListener("nav-vert",this.onNav.bind(this)),this.keyNavManager.addListener("nav-hori",this.onNav.bind(this)),this.keyNavManager.addListener("submit",this.onNav.bind(this))),lp(R8,Lh),this.focusWrapper=hl().createElement("div"),this.focusIndicator=hl().createElement("div"),this.focusWrapper.appendChild(this.focusIndicator),s.appendChild(this.focusWrapper);const{block:r,elements:n,modifiers:o}=A8;this.focusWrapper.classList.add(r,n.wrapper),this.focusIndicator.classList.add(r,n.indicator,o.hidden)}destroy(){this.destroyFns.forEach(t=>t()),this.currentRegion=void 0;for(const t of this.regions.values())t.listeners.destroy();this.focusWrapper.remove(),this.regions.clear()}addRegionFromProperties(t){const e={properties:t,listeners:new gQ};return this.regions.set(t.name,e),this.makeObserver(e)}addRegion(t,e,...i){return this.addRegionFromProperties({name:t,bboxproviders:[e,...i],canInteraction:()=>!0})}getRegion(t){return this.makeObserver(this.regions.get(t))}find(t,e){const i=[];for(const[s,r]of this.regions.entries())for(const n of r.properties.bboxproviders){const o=n.getCachedBBox();o.containsPoint(t,e)&&i.push([r,o.width*o.height])}return i.sort((s,r)=>s[1]-r[1]).map(s=>s[0])}makeObserver(t){const{interactionManager:e}=this;class i{addListener(r,n,o=16){var a;return(a=t==null?void 0:t.listeners.addListener(r,l=>{l.consumed||e.getState()&o&&n(l)}))!=null?a:()=>{}}}return new i}checkPointerHistory(t,e){for(const i of e.pointerHistory){const s=this.pickRegion(i.offsetX,i.offsetY);if(t.properties.name!==(s==null?void 0:s.properties.name))return!1}return!0}dispatch(t,e){t==null||t.listeners.dispatch(e.type,e)}handleDragging(t){const{currentRegion:e}=this;switch(t.type){case"drag-start":this.isDragging=!0,this.leftCanvas=!1;break;case"leave":return this.leftCanvas=!0,this.isDragging;case"enter":return this.leftCanvas=!1,this.isDragging;case"drag":if(this.isDragging)return this.dispatch(e,t),!0;break;case"drag-end":if(this.isDragging)return this.isDragging=!1,this.dispatch(e,t),this.leftCanvas&&this.dispatch(e,qe(Se({},t),{type:"leave"})),!0;break}return!1}processPointerEvent(t){if(this.handleDragging(t))return;const{currentRegion:e}=this,i=this.pickRegion(t.offsetX,t.offsetY);e!==void 0&&(i==null?void 0:i.properties.name)!==e.properties.name&&this.dispatch(e,qe(Se({},t),{type:"leave"})),i!==void 0&&i.properties.name!==(e==null?void 0:e.properties.name)&&this.dispatch(i,qe(Se({},t),{type:"enter"})),i!==void 0&&this.checkPointerHistory(i,t)&&this.dispatch(i,t),this.currentRegion=i}pickRegion(t,e){const i=this.find(t,e);return i.length>0?i[0]:void 0}getTabRegion(t){if(t!==void 0&&t>=0&&t<tT.length)return this.regions.get(tT[t])}dispatchTabStart(t){const{delta:e,sourceEvent:i}=t,s=hh({type:"tab-start",delta:e,sourceEvent:i}),r=this.getTabRegion(this.currentTabIndex);return this.dispatch(r,s),!!s.consumed}getNextInteractableTabIndex(t,e){const i=e<0?-1:1;let s=t;for(;e!==0;){const r=this.getTabRegion(s+i);if(r===void 0)return;r.properties.canInteraction()&&(e=e-i),s=s+i}return s}validateCurrentTabIndex(){var t;const e=this.getTabRegion(this.currentTabIndex);e!==void 0&&!e.properties.canInteraction()&&(this.currentTabIndex=(t=this.getNextInteractableTabIndex(-1,1))!=null?t:0)}onFocus(t){const{delta:e,sourceEvent:i}=t,s=e>0?this.getNextInteractableTabIndex(-1,1):this.getNextInteractableTabIndex(tT.length,-1);this.currentTabIndex=s??0;const r=this.getTabRegion(this.currentTabIndex);r&&this.dispatch(r,hh({type:"tab",delta:e,sourceEvent:i}))}onTab(t){if(this.dispatchTabStart(t))return;this.validateCurrentTabIndex();const i=this.getNextInteractableTabIndex(this.currentTabIndex,t.delta),s=this.getTabRegion(i),r=this.getTabRegion(this.currentTabIndex);if(i!==void 0&&(this.currentTabIndex=i),r!==void 0&&(s==null?void 0:s.properties.name)!==r.properties.name){const{delta:n,sourceEvent:o}=t,a=hh({type:"blur",delta:n,sourceEvent:o});this.dispatch(r,a)}s===void 0||!s.properties.canInteraction()?this.updateFocusIndicatorRect(void 0):this.dispatch(s,t)}onNav(t){const e=this.getTabRegion(this.currentTabIndex);this.dispatch(e,t)}updateFocusWrapperRect(){this.focusWrapper.style.width=this.canvasElement.style.width,this.focusWrapper.style.height=this.canvasElement.style.height}updateFocusIndicatorRect(t){if(t==null){this.focusIndicator.classList.add(hS.hidden);return}this.updateFocusWrapperRect(),this.focusIndicator.classList.remove(hS.hidden),this.focusIndicator.style.width=`${t.width}px`,this.focusIndicator.style.height=`${t.height}px`,this.focusIndicator.style.left=`${t.x}px`,this.focusIndicator.style.top=`${t.y}px`}},M8=class extends kc{constructor(t){super(),this.element=t}static isGroup(t,e){return e.group===t}pressButton(t,e){this.listeners.dispatch("button-pressed",{type:"button-pressed",group:t,value:e})}toggleGroup(t,e){this.listeners.dispatch("group-toggled",{type:"group-toggled",group:t,visible:e})}toggleButton(t,e,i){this.listeners.dispatch("button-toggled",{type:"button-toggled",group:t,value:e,enabled:i})}proxyGroupOptions(t,e){this.listeners.dispatch("proxy-group-options",{type:"proxy-group-options",group:t,options:e})}},vQ=`
.${bs} {
    transition: transform 0.1s ease;
    max-width: 100%;
    position: fixed;
    left: 0px;
    top: 0px;
    z-index: 99999;
    font: 12px Verdana, sans-serif;
    color: rgb(70, 70, 70);
    box-shadow: 0 4px 8px rgba(0, 0, 0, 0.08);
}

.${bs}-wrap-always {
    overflow-wrap: break-word;
    word-break: break-word;
    hyphens: none;
}

.${bs}-wrap-hyphenate {
    overflow-wrap: break-word;
    word-break: break-word;
    hyphens: auto;
}

.${bs}-wrap-on-space {
    overflow-wrap: normal;
    word-break: normal;
}

.${bs}-wrap-never {
    white-space: pre;
    text-overflow: ellipsis;
}

.${bs}-no-interaction {
    pointer-events: none;
    user-select: none;
}

.${bs}-no-animation {
    transition: none !important;
}

.${bs}-hidden {
    visibility: hidden;
}

.${bs}-title {
    overflow: hidden;
    position: relative;
    padding: 8px 14px;
    border-top-left-radius: 2px;
    border-top-right-radius: 2px;
    color: white;
    background-color: #888888;
    z-index: 1;
    text-overflow: inherit;
}

.${bs}-title:only-child {
    border-bottom-left-radius: 2px;
    border-bottom-right-radius: 2px;
}

.${bs}-content {
    overflow: hidden;
    padding: 6px 14px;
    line-height: 1.7em;
    background: white;
    border-bottom-left-radius: 2px;
    border-bottom-right-radius: 2px;
    border: 1px solid rgba(0, 0, 0, 0.15);
    overflow: hidden;
    text-overflow: inherit;
}

.${bs}-arrow::before {
    content: "";

    position: absolute;
    top: 100%;
    left: 50%;
    transform: translateX(-50%);

    border: 5px solid #d9d9d9;

    border-left-color: transparent;
    border-right-color: transparent;
    border-bottom-color: transparent;

    width: 0;
    height: 0;

    margin: 0 auto;
}

.${bs}-arrow::after {
    content: "";

    position: absolute;
    top: calc(100% - 1px);
    left: 50%;
    transform: translateX(-50%);

    border: 5px solid white;

    border-left-color: transparent;
    border-right-color: transparent;
    border-bottom-color: transparent;

    width: 0;
    height: 0;

    margin: 0 auto;
}

.ag-chart-wrapper {
    box-sizing: border-box;
    overflow: hidden;
}
`,pS=class{constructor(t,e){if(this.canvasElement=t,this.tooltip=e,this.stateTracker=new wg,this.appliedState=null,typeof IntersectionObserver<"u"){const i=new IntersectionObserver(s=>{for(const r of s)r.target===this.canvasElement&&r.intersectionRatio===0&&this.tooltip.toggle(!1)},{root:this.tooltip.root});i.observe(this.canvasElement),this.observer=i}lp(vQ,"tooltip")}updateTooltip(t,e,i){var s;this.tooltip.enabled&&(i??(i=(s=this.stateTracker.get(t))==null?void 0:s.content),this.stateTracker.set(t,{content:i,meta:e}),this.applyStates())}removeTooltip(t){this.tooltip.enabled&&(this.stateTracker.delete(t),this.applyStates())}getTooltipMeta(t){var e;return(e=this.stateTracker.get(t))==null?void 0:e.meta}destroy(){var t;(t=this.observer)==null||t.unobserve(this.canvasElement)}applyStates(){var t;const e=this.stateTracker.stateId(),i=e?this.stateTracker.get(e):null;if((i==null?void 0:i.meta)==null||(i==null?void 0:i.content)==null){this.appliedState=null,this.tooltip.toggle(!1);return}const s=this.canvasElement.getBoundingClientRect();if(((t=this.appliedState)==null?void 0:t.content)===(i==null?void 0:i.content)){const r=this.tooltip.isVisible();this.tooltip.show(s,i==null?void 0:i.meta,null,r)}else this.tooltip.show(s,i==null?void 0:i.meta,i==null?void 0:i.content);this.appliedState=i}static makeTooltipMeta(t,e){var i,s,r,n,o,a,l;const{offsetX:c,offsetY:u}=t,{tooltip:d}=e.series.properties,h={offsetX:c,offsetY:u,enableInteraction:(s=(i=d.interaction)==null?void 0:i.enabled)!=null?s:!1,lastPointerEvent:{type:t.type,offsetX:c,offsetY:u},showArrow:d.showArrow,position:{type:d.position.type,xOffset:d.position.xOffset,yOffset:d.position.yOffset}},p=(l=(n=(r=e.yBar)==null?void 0:r.upperPoint)!=null?n:e.midPoint)!=null?l:(a=(o=e.series).datumMidPoint)==null?void 0:a.call(o,e);if(d.position.type==="node"&&p){const{x:f,y:m}=p,g=e.series.contentGroup.inverseTransformPoint(f,m);return qe(Se({},h),{offsetX:Math.round(g.x),offsetY:Math.round(g.y)})}return h}},D8=class extends lm{constructor(){super(...arguments),this.layoutComplete="layout-complete"}addListener(t,e){if(this.isLayoutStage(t)||this.isLayoutComplete(t))return super.addListener(t,e);throw new Error(`AG Charts - unsupported listener type: ${t}`)}dispatchPerformLayout(t,e){return this.isLayoutStage(t)?this.getListenersByType(t).reduce((i,s)=>{try{return s.handler(i)}catch(r){return Be.errorOnce(r),i}},e):e}dispatchLayoutComplete(t){this.dispatch(this.layoutComplete,t)}isLayoutStage(t){return t!==this.layoutComplete}isLayoutComplete(t){return t===this.layoutComplete}},yQ=class{constructor(){this.groups={}}registerSeries({id:t,seriesGrouping:e,visible:i,type:s}){var r,n;e&&((n=(r=this.groups)[s])!=null||(r[s]={}),this.groups[s][t]={grouping:e,visible:i})}deregisterSeries({id:t,type:e}){this.groups[e]&&delete this.groups[e][t],this.groups[e]&&Object.keys(this.groups[e]).length===0&&delete this.groups[e]}getVisiblePeerGroupIndex({type:t,seriesGrouping:e,visible:i}){var s;if(!e)return{visibleGroupCount:i?1:0,visibleSameStackCount:i?1:0,index:0};const r=new Set,n=new Set;for(const a of Object.values((s=this.groups[t])!=null?s:{}))a.visible&&(r.add(a.grouping.groupIndex),a.grouping.groupIndex===e.groupIndex&&n.add(a.grouping.stackIndex));const o=Array.from(r);return o.sort((a,l)=>a-l),{visibleGroupCount:o.length,visibleSameStackCount:n.size,index:o.indexOf(e.groupIndex)}}},Lv=(t=>(t[t.FULL=0]="FULL",t[t.UPDATE_DATA=1]="UPDATE_DATA",t[t.PROCESS_DATA=2]="PROCESS_DATA",t[t.PERFORM_LAYOUT=3]="PERFORM_LAYOUT",t[t.SERIES_UPDATE=4]="SERIES_UPDATE",t[t.TOOLTIP_RECALCULATION=5]="TOOLTIP_RECALCULATION",t[t.SCENE_RENDER=6]="SCENE_RENDER",t[t.NONE=7]="NONE",t))(Lv||{}),P8=class extends lm{constructor(t){super(),this.updateCallback=t}update(t=0,e){this.updateCallback(t,e)}dispatchUpdateComplete(t){this.dispatch("update-complete",{type:"update-complete",minRect:t==null?void 0:t.minRect,minVisibleRect:t==null?void 0:t.minVisibleRect})}},CQ=class{constructor(t,e){const{scene:i,syncManager:s,element:r,updateCallback:n,updateMutex:o}=e;this.chartService=t,this.scene=i,this.syncManager=s,this.zoomManager=t.zoomManager,this.annotationManager=new oQ(t.annotationRoot),this.ariaAnnouncementService=new dQ(i.canvas.element),this.chartEventManager=new S8,this.contextMenuRegistry=new x8,this.cursorManager=new E8(r),this.highlightManager=new _8,this.interactionManager=new C8(t.keyboard,r),this.keyNavManager=new fQ(this.interactionManager),this.regionManager=new mQ(this.interactionManager,this.keyNavManager,this.scene.canvas.element,r),this.toolbarManager=new M8(r),this.gestureDetector=new T8(r),this.layoutService=new D8,this.updateService=new P8(n),this.seriesStateManager=new yQ,this.callbackCache=new nQ,this.animationManager=new b8(this.interactionManager,o),this.animationManager.skip(),this.animationManager.play(),this.dataService=new sE(this.animationManager),this.tooltipManager=new pS(this.scene.canvas.element,t.tooltip)}destroy(){this.tooltipManager.destroy(),this.regionManager.destroy(),this.keyNavManager.destroy(),this.interactionManager.destroy(),this.animationManager.stop(),this.animationManager.destroy(),this.ariaAnnouncementService.destroy(),this.chartEventManager.destroy(),this.highlightManager.destroy(),this.callbackCache.invalidateCache(),this.animationManager.reset(),this.syncManager.destroy()}},I8=class extends ti{constructor(){super(...arguments),this.range="tooltip"}};q([te(ls(["tooltip","node"],"a range"))],I8.prototype,"range",2);var tL=class F8{constructor(){this.domain=new Set}static is(e){return e instanceof F8}extend(e){this.domain.add(e)}getDomain(){return Array.from(this.domain)}},tf=class L8{constructor(){this.domain=[1/0,-1/0]}static is(e){return e instanceof L8}static extendDomain(e,i=[1/0,-1/0]){for(const s of e)typeof s=="number"&&(i[0]>s&&(i[0]=s),i[1]<s&&(i[1]=s));return i}extend(e){this.domain[0]>e&&(this.domain[0]=e),this.domain[1]<e&&(this.domain[1]=e)}getDomain(){return[...this.domain]}};function bQ(t){return t.map(e=>pa(e)?JSON.stringify(e):e).join("-")}function wQ(t){return Number.isInteger(t)?t:Math.abs(t)>1e4?Math.trunc(t):Math.round(t*1e4)/1e4}function SQ(t){if(t==null)return[];let[e,i]=t.map(Number);return e===0&&i===0?[0,1]:e===1/0&&i===-1/0?[]:(e===1/0?e=0:i===-1/0&&(i=0),gi(e)&&gi(i)?[e,i]:[])}function Pn(t,e){var i;const s=SQ(t);if(s.length===0)return s;let[r,n]=s;if(r===n){const[o,a]=(i=e==null?void 0:e.calculatePadding(r,n))!=null?i:[1,1];r-=o,n+=a}return[r,n]}function KD(t,e){var i;return(i=e==null?void 0:e.get(t.id))!=null?i:0}var Pd=Symbol("invalid"),k8=class{constructor(t,e="standalone"){this.opts=t,this.mode=e,this.debug=is.create(!0,"data-model"),this.scopeCache=new Map,this.keys=[],this.values=[],this.aggregates=[],this.groupProcessors=[],this.propertyProcessors=[],this.reducers=[],this.processors=[];let i=!0;for(const r of t.props){if(r.type==="key"&&!i)throw new Error("AG Charts - internal config error: keys must come before values.");r.type==="value"&&i&&(i=!1)}const s=({matchGroupIds:r=[]})=>{for(const n of r)if(this.values.every(o=>o.groupId!==n))throw new Error(`AG Charts - internal config error: matchGroupIds properties must match defined groups (${n}).`)};for(const r of t.props)switch(r.type){case"key":this.keys.push(qe(Se({},r),{index:this.keys.length,missing:new Map}));break;case"value":if(r.property==null)throw new Error(`AG Charts - internal config error: no properties specified for value definitions: ${JSON.stringify(r)}`);this.values.push(qe(Se({},r),{index:this.values.length,missing:new Map}));break;case"aggregate":s(r),this.aggregates.push(qe(Se({},r),{index:this.aggregates.length}));break;case"group-value-processor":s(r),this.groupProcessors.push(qe(Se({},r),{index:this.groupProcessors.length}));break;case"property-value-processor":this.propertyProcessors.push(qe(Se({},r),{index:this.propertyProcessors.length}));break;case"reducer":this.reducers.push(qe(Se({},r),{index:this.reducers.length}));break;case"processor":this.processors.push(qe(Se({},r),{index:this.processors.length}));break}}resolveProcessedDataDefById(t,e){var i;const s=(i=this.scopeCache.get(t.id))==null?void 0:i.get(e);if(!s)throw new Error(`AG Charts - didn't find property definition for [${e}, ${t.id}]`);return{index:s.index,def:s}}resolveProcessedDataIndexById(t,e){return this.resolveProcessedDataDefById(t,e).index}resolveProcessedDataDefsByIds(t,e){return e.map(i=>[i,this.resolveProcessedDataDefById(t,i)])}resolveProcessedDataDefsValues(t,{keys:e,values:i}){const s={};for(const[r,{index:n,def:o}]of t){const a=o.type==="key"?e:i;s[r]=a[n]}return s}getDomain(t,e,i="value",s){var r;const n=this.getDomainsByType(i,s);return(r=n==null?void 0:n[this.resolveProcessedDataIndexById(t,e)])!=null?r:[]}getDomainsByType(t,e){switch(t){case"key":return e.domain.keys;case"value":return e.domain.values;case"aggregate":return e.domain.aggValues;case"group-value-processor":return e.domain.groups;default:return null}}processData(t,e){var i;const{opts:{groupByKeys:s,groupByFn:r},aggregates:n,groupProcessors:o,reducers:a,processors:l,propertyProcessors:c}=this,u=performance.now();if(s&&this.keys.length===0)return;let d=this.extractData(t,e);if(s?d=this.groupData(d):r&&(d=this.groupData(d,r(d))),o.length>0&&this.postProcessGroups(d),n.length>0&&this.aggregateData(d),c.length>0&&this.postProcessProperties(d),a.length>0&&this.reduceData(d),l.length>0&&this.postProcessData(d),t.length>0){for(const p of ov(this.keys,this.values))for(const[f,m]of p.missing)if(m>=t.length){const g=f==null?"":` for ${f}`;Be.warnOnce(`the key '${p.property}' was not found in any data element${g}.`)}}const h=performance.now();d.time=h-u,this.debug.check()&&xQ(d),this.scopeCache.clear();for(const p of ov(this.keys,this.values,this.aggregates))if(p.idsMap)for(const[f,m]of p.idsMap)for(const g of m)if(!this.scopeCache.has(f))this.scopeCache.set(f,new Map([[g,p]]));else{if((i=this.scopeCache.get(f))!=null&&i.has(g))throw new Error("duplicate definition ids on the same scope are not allowed.");this.scopeCache.get(f).set(g,p)}return d}valueGroupIdxLookup({matchGroupIds:t}){const e=[];for(const[i,s]of this.values.entries())(!t||s.groupId&&t.includes(s.groupId))&&e.push(i);return e}valueIdxLookup(t,e){const i=t==null||t.length===0,s=typeof e=="string"?e:e.id,r=o=>{if(o.idsMap){for(const[a,l]of o.idsMap)if(t!=null&&t.includes(a)&&l.has(s))return!0}return!1},n=this.values.findIndex(o=>(o.scopes==null||i&&!o.scopes.length||o.scopes.some(l=>t==null?void 0:t.includes(l)))&&(o.property===s||o.id===s||r(o)));if(n===-1)throw new Error(`AG Charts - configuration error, unknown property ${JSON.stringify(e)} in scope(s) ${JSON.stringify(t)}`);return n}extractData(t,e){var i,s,r,n;const{dataDomain:o,processValue:a,scopes:l,allScopesHaveSameDefs:c}=this.initDataDomainProcessor(),u=new Map(e==null?void 0:e.map(y=>[y.id,y])),{keys:d,values:h}=this,p=new Array(t.length);let f=0,m=0;for(const[y,v]of t.entries()){const C={},b=l.size>0?new Set(l):void 0,T=new Array(d.length);let A=0,I;for(const U of d){if(I=a(U,v,I),I===Pd)break;T&&(T[A++]=I)}if(I===Pd)continue;const D=h.length>0?new Array(h.length):void 0;let F;for(const[U,H]of h.entries()){for(const R of(i=H.scopes)!=null?i:l){const L=u.get(R),_=(s=L==null?void 0:L.data[y])!=null?s:v;if(F=a(H,_,F,R),!(F===Pd||!D)){if(L!=null&&H.includeProperty!==!1){const w=H.includeProperty&&H.id!=null?H.id:H.property;(r=C[R])!=null||(C[R]={}),C[R][w]=F}D[U]=F}}if(F===Pd){if(c)break;for(const R of(n=H.scopes)!=null?n:l)b==null||b.delete(R);if((b==null?void 0:b.size)===0)break}}if(F===Pd&&c||(b==null?void 0:b.size)===0)continue;const B={datum:Se(Se({},v),C),keys:T,values:D};!c&&b&&b.size<l.size&&(m++,B.validScopes=new Set(b)),p[f++]=B}p.length=f;const g=y=>{const v=o.get(y),C=v.getDomain();return tf.is(v)&&C[0]>C[1]?[]:C};return{type:"ungrouped",input:{count:t.length},data:p,domain:{keys:d.map(g),values:h.map(g)},defs:{allScopesHaveSameDefs:c,keys:d,values:h},partialValidDataCount:m,time:0}}groupData(t,e){var i;const s=new Map;for(const a of t.data){const{keys:l,values:c,datum:u,validScopes:d}=a,h=(i=e==null?void 0:e(a))!=null?i:l,p=bQ(h);if(s.has(p)){const f=s.get(p);if(f.values.push(c),f.datum.push(u),d!=null&&f.validScopes!=null)for(const m of f.validScopes)d.has(m)||f.validScopes.delete(m)}else s.set(p,{keys:h,values:[c],datum:[u],validScopes:d})}const r=new Array(s.size),n=new Array(s.size);let o=0;for(const{keys:a,values:l,datum:c,validScopes:u}of s.values())(u==null?void 0:u.size)!==0&&(n[o]=a,r[o++]={keys:a,values:l,datum:c,validScopes:u});return qe(Se({},t),{type:"grouped",data:r,domain:qe(Se({},t.domain),{groups:n})})}aggregateData(t){var e,i,s,r,n,o,a;const l=t.type==="ungrouped";t.domain.aggValues=[];for(const[c,u]of this.aggregates.entries()){const d=this.valueGroupIdxLookup(u),h=[1/0,-1/0];for(const p of t.data){if((e=p.aggValues)!=null||(p.aggValues=new Array(this.aggregates.length)),p.validScopes)continue;const f=l?[p.values]:p.values;let m=(s=(i=u.groupAggregateFunction)==null?void 0:i.call(u))!=null?s:[1/0,-1/0];for(const y of f){const v=d.map(b=>y[b]),C=u.aggregateFunction(v,p.keys);C&&(m=(n=(r=u.groupAggregateFunction)==null?void 0:r.call(u,C,m))!=null?n:tf.extendDomain(C,m))}const g=((a=(o=u.finalFunction)==null?void 0:o.call(u,m))!=null?a:m).map(y=>wQ(y));p.aggValues[c]=g,tf.extendDomain(g,h)}t.domain.aggValues.push(h)}}postProcessGroups(t){var e,i;const{groupProcessors:s}=this,r=new Set,n=new Map,o=new Map,a=new Map;for(const c of s){const u=this.valueGroupIdxLookup(c);o.set(c,u),a.set(c,c.adjust());for(const d of u){const p=this.values[d].valueType==="category";r.add(d),n.set(d,p?new tL:new tf)}}const l=c=>{var u;for(const d of r)(u=n.get(d))==null||u.extend(c[d])};for(const c of t.data){for(const u of s){if(c.validScopes)continue;const d=(e=o.get(u))!=null?e:[],h=(i=a.get(u))==null?void 0:i();if(h)if(t.type==="grouped")for(const p of c.values)p&&h(p,d);else c.values&&h(c.values,d)}if(t.type==="grouped")for(const u of c.values)l(u);else l(c.values)}for(const[c,u]of n)t.domain.values[c]=u.getDomain()}postProcessProperties(t){for(const{adjust:e,property:i,scopes:s}of this.propertyProcessors)e()(t,this.valueIdxLookup(s,i))}reduceData(t){var e,i;(e=t.reduced)!=null||(t.reduced={});for(const s of this.reducers){const r=s.reducer();let n=s.initialValue;for(const o of t.data)(!o.validScopes||(i=s.scopes)!=null&&i.some(a=>{var l;return(l=o.validScopes)==null?void 0:l.has(a)}))&&(n=r(n,o));t.reduced[s.property]=n}}postProcessData(t){var e;(e=t.reduced)!=null||(t.reduced={});for(const i of this.processors)t.reduced[i.property]=i.calculate(t)}initDataDomainProcessor(){const{keys:t,values:e}=this,i=new Set;for(const c of e)if(c.scopes)for(const u of c.scopes)i.add(u);const s=new Map,r=new Map;let n=!0;const o=()=>{var c;for(const u of ov(t,e))u.valueType==="category"?s.set(u,new tL):(s.set(u,new tf),n&&(n=((c=u.scopes)!=null?c:[]).length===i.size))};o();const a=this.buildAccessors(ov(t,e));return{dataDomain:s,processValue:(c,u,d,h)=>{var p,f,m,g,y;let v,C;if(a.has(c.property)){try{C=a.get(c.property)(u)}catch{}v=C!=null}else v=c.property in u,C=v?u[c.property]:c.missingValue;c.forceValue!=null&&(C=v&&zC(C)?-1*c.forceValue:c.forceValue,v=!0);const b="missingValue"in c;if(!v&&!b){const T=(p=c.missing.get(h))!=null?p:0;c.missing.set(h,T+1)}if(s.has(c)||o(),v&&!((m=(f=c.validation)==null?void 0:f.call(c,C,u))==null||m))if("invalidValue"in c)C=c.invalidValue;else return this.mode!=="integrated"&&Be.warnOnce(`invalid value of type [${typeof C}] ignored:`,`[${C}]`),Pd;return c.processor&&(r.has(c)||r.set(c,c.processor()),C=(g=r.get(c))==null?void 0:g(C,d===Pd?void 0:d)),(y=s.get(c))==null||y.extend(C),C},initDataDomain:o,scopes:i,allScopesHaveSameDefs:n}}buildAccessors(t){const e=new Map;if(this.mode==="integrated")return e;for(const i of t){if(!(i.property.includes(".")||i.property.includes("[")))continue;let r;i.property.startsWith("[")?r=`return datum${i.property};`:r=`return datum.${i.property};`,e.set(i.property,new Function("datum",r))}return e}};function xQ(t){var e,i;const s=(r,n)=>{n.length>0&&(Be.log(`DataModel.processData() - ${r}`),Be.table(n))};if(Be.log("DataModel.processData() - processedData",t),s("Key Domains",t.domain.keys),s("Group Domains",(e=t.domain.groups)!=null?e:[]),s("Value Domains",t.domain.values),s("Aggregate Domains",(i=t.domain.aggValues)!=null?i:[]),t.type==="grouped"){const r=t.data.reduce((n,o)=>{var a,l;const c=(a=o.keys)!=null?a:[],u=(l=o.aggValues)!=null?l:[],d=o.keys.map(()=>{}),h=u==null?void 0:u.map(()=>{});return n.push(...o.values.map((p,f)=>[...f===0?c:d,...p??[],...f==0?u:h])),n},[]);s("Values",r)}else{const r=t.data.reduce((n,o)=>{var a;const l=(a=o.aggValues)!=null?a:[];return n.push([...o.keys,...o.values,...l]),n},[]);s("Values",r)}}var N8=class kl{constructor(e){this.mode=e,this.debug=is.create(!0,"data-model"),this.requested=[],this.status="setup"}request(e,i,s){return Fe(this,null,function*(){if(this.status!=="setup")throw new Error("AG Charts - data request after data setup phase.");return new Promise((r,n)=>{this.requested.push({id:e,opts:s,data:i,resolve:r,reject:n})})})}execute(){if(this.status!=="setup")throw new Error("AG Charts - data request after data setup phase.");this.status="executed",this.debug("DataController.execute() - requested",this.requested);const e=this.validateRequests(this.requested);this.debug("DataController.execute() - validated",e);const i=this.mergeRequested(e);this.debug("DataController.execute() - merged",i),this.debug.check()&&(pl().processedData=[]);const s=this.requested.map(({id:n})=>n),r=this.hasMultipleDataSources(e);for(const{opts:n,data:o,resolves:a,rejects:l,ids:c}of i)try{const u=new k8(n,this.mode),d=u.processData(o,e);this.debug.check()&&pl("processedData").push(d),(d==null?void 0:d.partialValidDataCount)===0?a.forEach((h,p)=>h({dataModel:u,processedData:this.processScopedData(c[p],d,s,r)})):d?this.splitResult(u,d,c,a):l.forEach(h=>h(new Error("AG Charts - no processed data generated")))}catch(u){l.forEach(d=>d(u))}}hasMultipleDataSources(e){if(e.length){const[{data:i},...s]=e;return s.some(r=>i!==r.data)}return!1}processScopedData(e,i,s,r){const n=a=>{if(Array.isArray(a))return a.map(n);const l=r?Se(Se({},a),a[e]):a;for(const c of s)delete l[c];return l},o=a=>{var l;return Array.isArray(a)?a.map(o):(l=a==null?void 0:a[e])!=null?l:a};return qe(Se({},i),{data:i.data.map(a=>{var l;return qe(Se({},a),{datum:n(a.datum),values:r?(l=a.values)==null?void 0:l.map(o):a.values})})})}validateRequests(e){const i=[];for(const[s,r]of e.entries())s>0&&r.data.length!==e[0].data.length&&r.opts.groupByData===!1?r.reject(new Error("all series[].data arrays must be of the same length and have matching keys.")):i.push(r);return i}mergeRequested(e){const i=[];for(const s of e){const r=i.find(kl.groupMatch(s));r?r.push(s):i.push([s])}return i.map(kl.mergeRequests)}splitResult(e,i,s,r){for(let n=0;n<s.length;n++){const o=s[n],a=r[n];a({dataModel:e,processedData:qe(Se({},i),{data:i.data.filter(({validScopes:l})=>{var c;return(c=l==null?void 0:l.has(o))!=null?c:!0})})})}}static groupMatch({data:e,opts:i}){function s(r){return r.filter(n=>n.type==="key").map(n=>n.property).join(";")}return([r])=>(i.groupByData===!1||r.data===e)&&r.opts.groupByKeys===i.groupByKeys&&r.opts.groupByFn===i.groupByFn&&s(r.opts.props)===s(i.props)}static mergeRequests(e){return e.reduce((i,s)=>{var{id:r,data:n,resolve:o,reject:a,opts:l}=s,c=l,{props:u}=c,d=xs(c,["props"]),h,p,f,m,g;i.ids.push(r),i.rejects.push(a),i.resolves.push(o),(h=i.data)!=null||(i.data=n),(p=i.opts)!=null||(i.opts=qe(Se({},d),{props:[]}));for(const y of u){const v=qe(Se({},y),{scopes:[r]});kl.createIdsMap(r,v);const C=i.opts.props.find(b=>b.type===v.type&&kl.deepEqual(b,v));if(!C){i.opts.props.push(v);continue}(f=C.scopes)!=null||(C.scopes=[]),C.scopes.push(...(m=v.scopes)!=null?m:[]),(C.type==="key"||C.type==="value")&&((g=v.idsMap)!=null&&g.size)&&kl.mergeIdsMap(v.idsMap,C.idsMap)}return i},{ids:[],rejects:[],resolves:[],data:null,opts:null})}static mergeIdsMap(e,i){for(const[s,r]of e)if(i.has(s))for(const n of r)i.get(s).add(n);else i.set(s,new Set(r))}static createIdsMap(e,i){var s;i.id!=null&&((s=i.idsMap)!=null||(i.idsMap=new Map),i.idsMap.has(e)?i.idsMap.get(e).add(i.id):i.idsMap.set(e,new Set([i.id])))}static deepEqual(e,i){if(e===i)return!0;if(e&&i&&typeof e=="object"&&typeof i=="object"){if(e.constructor!==i.constructor)return!1;let s,r;if(Array.isArray(e)){if(r=e.length,r!==i.length)return!1;for(s=r-1;s>=0;s--)if(!kl.deepEqual(e[s],i[s]))return!1;return!0}const n=Object.keys(e);if(r=n.length,r!==Object.keys(i).length)return!1;for(s=r-1;s>=0;s--){const o=n[s];if(!kl.skipKeys.has(o)&&(!Object.hasOwn(i,o)||!kl.deepEqual(e[o],i[o])))return!1}return!0}return!1}};N8.skipKeys=new Set(["id","idsMap","type","scopes"]);var O8=N8,YD=class Ud extends kc{constructor(e){super(),this.chart=e}subscribe(e=Ud.DEFAULT_GROUP){let i=this.get(e);return i||(i=new Set,Ud.chartsGroups.set(e,i)),i.add(this.chart),this}unsubscribe(e=Ud.DEFAULT_GROUP){var i;return(i=this.get(e))==null||i.delete(this.chart),this}getChart(){return this.chart}getGroup(e=Ud.DEFAULT_GROUP){const i=this.get(e);return i?Array.from(i):[]}getGroupSiblings(e=Ud.DEFAULT_GROUP){return this.getGroup(e).filter(i=>i!==this.chart)}get(e){return Ud.chartsGroups.get(e)}};YD.chartsGroups=new Map;YD.DEFAULT_GROUP=Symbol("sync-group-default");var EQ=YD,G8=class extends kc{constructor(){super(...arguments),this.axisZoomManagers=new Map,this.state=new wg(void 0,"initial"),this.rejectCallbacks=new Map}updateAxes(t){var e;const i=new Map(t.map(s=>[s.id,this.axisZoomManagers.get(s.id)]));this.axisZoomManagers.clear();for(const s of t)this.axisZoomManagers.set(s.id,(e=i.get(s.id))!=null?e:new TQ(s));this.state.size>0&&t.length>0&&this.updateZoom(this.state.stateId(),this.state.stateValue())}updateZoom(t,e,i=!0,s){var r;if(s&&this.rejectCallbacks.set(t,s),this.axisZoomManagers.size===0){const n=this.state.stateId();n==="initial"||n===t||i?(this.state.set(t,e),n!==t&&((r=this.rejectCallbacks.get(n))==null||r(t))):s==null||s(n);return}this.state.set(t,e),this.axisZoomManagers.forEach(n=>{n.updateZoom(t,e==null?void 0:e[n.getDirection()])}),this.applyChanges(t)}updateAxisZoom(t,e,i){var s;(s=this.axisZoomManagers.get(e))==null||s.updateZoom(t,i),this.applyChanges(t)}fireZoomPanStartEvent(t){this.listeners.dispatch("zoom-pan-start",{type:"zoom-pan-start",callerId:t})}getZoom(){let t,e;if(this.axisZoomManagers.forEach(i=>{i.getDirection()==="x"?t??(t=i.getZoom()):i.getDirection()==="y"&&(e??(e=i.getZoom()))}),t||e)return{x:t,y:e}}getAxisZoom(t){var e,i;return(i=(e=this.axisZoomManagers.get(t))==null?void 0:e.getZoom())!=null?i:{min:0,max:1}}getAxisZooms(){const t={};for(const[e,i]of this.axisZoomManagers.entries())t[e]={direction:i.getDirection(),zoom:i.getZoom()};return t}applyChanges(t){if(!Array.from(this.axisZoomManagers.values(),s=>s.applyChanges()).some(Boolean))return;const i={};for(const[s,r]of this.axisZoomManagers.entries())i[s]=r.getZoom();this.listeners.dispatch("zoom-change",qe(Se({type:"zoom-change"},this.getZoom()),{axes:i,callerId:t}))}},TQ=class{constructor(t){this.axis=t;const[e=0,i=1]=t.visibleRange;this.state=new wg({min:e,max:i}),this.currentZoom=this.state.stateValue()}getDirection(){return this.axis.direction}updateZoom(t,e){this.state.set(t,e)}getZoom(){return Fr(this.state.stateValue())}applyChanges(){const t=this.currentZoom;return this.currentZoom=this.state.stateValue(),t.min!==this.currentZoom.min||t.max!==this.currentZoom.max}},qD=class extends ti{constructor(){super(...arguments),this.enabled=!1}};q([te(Et)],qD.prototype,"enabled",2);q([te(Ui)],qD.prototype,"tabIndex",2);function B8(t,e){const{bbox:i,showFocusBox:s}=e;if(s&&t.updateFocusIndicatorRect(e.bbox),i!==void 0){const{x:r,y:n}=i.computeCenter();return{type:"keyboard",offsetX:r,offsetY:n}}}var _Q=["top","right","bottom","left"],V8=["category","grouped-category","ordinal-time","number","log","time"];function AQ(t){return V8.includes(t.type)}function RQ(t){return V8.includes(t.type)}function MQ(t){return typeof t=="string"&&_Q.includes(t)}var DQ=class{constructor(){this.result=[],this.valid=[],this.invalid=[]}push(t,e){const{result:i,valid:s,invalid:r}=this;RQ(e)&&(MQ(e.position)?s.push(t):r.push(t)),i.push(t)}guessInvalidPositions(){const t=this.valid.filter(i=>AQ(i)).map(i=>i.position).filter(i=>i!==void 0),e=["top","right","bottom","left"];for(const i of this.invalid){let s=e.pop();for(;t.includes(s)&&s!==void 0;)s=e.pop();if(s===void 0)break;i.position=s}return this.result}},PQ=["direction","xKey","yKey","sizeKey","angleKey","radiusKey","normalizedTo","stacked","grouped","stackGroup"];function IQ(t,e,i){var s,r,n,o;const a=(f,m)=>{const g=[f];for(const y of PQ)y in m&&m[y]!=null&&g.push(`${y}=${m[y]}`);return g.join(";")},l=new Map;let c=0;for(const f of t){const m=a(f.type,f.properties);l.has(m)||l.set(m,[]),(s=l.get(m))==null||s.push([f,c++])}const u=new Map;for(const f of e){const m=a(f.type,f);u.has(m)||u.set(m,[]),(r=u.get(m))==null||r.push(f)}if(![...l.keys()].some(f=>u.has(f)))return{status:"no-overlap",oldKeys:l.keys(),newKeys:u.keys()};const h=[];let p=-1;for(const[f,m]of u.entries())for(const g of m){p++;const y=l.get(f);if(y==null||y.length<1){h.push({opts:g,idx:p,status:"add"}),l.delete(f);continue}const[v,C]=y.shift(),b=(n=i==null?void 0:i[C])!=null?n:{},T=Ho(b,g??{}),{groupIndex:A,stackIndex:I}=(o=T==null?void 0:T.seriesGrouping)!=null?o:{};A!=null||I!=null?h.push({opts:g,series:v,diff:T,idx:C,status:"series-grouping"}):T?h.push({opts:g,series:v,diff:T,idx:C,status:"update"}):h.push({opts:g,series:v,idx:C,status:"no-op"}),y.length===0&&l.delete(f)}for(const f of l.values())for(const[m,g]of f)h.push({series:m,idx:g,status:"remove"});return{status:"overlap",changes:h}}var FQ=class extends GD{applyOptions(t){for(const e of this.moduleMap.values())e.module.optionsKey in t&&ul(e.moduleInstance)&&e.moduleInstance.set(t[e.module.optionsKey])}*legends(){for(const{module:t,moduleInstance:e}of this.moduleMap.values())t.type==="legend"&&(yield{legendType:t.identifier,legend:e})}},Vl="ag-chart-overlay",hA="ag-chart-dark-overlay",jf=class extends ti{constructor(t,e){super(),this.className=t,this.defaultText=e,this.darkTheme=!1}getText(){var t;return(t=this.text)!=null?t:this.defaultText}getElement(t,e){var i;(i=this.element)!=null||(this.element=hs("div",Vl,{position:"absolute"})),this.element.classList.toggle(hA,this.darkTheme),this.focusBox=e;const s=this.element;if(s.style.left=`${e.x}px`,s.style.top=`${e.y}px`,s.style.width=`${e.width}px`,s.style.height=`${e.height}px`,this.renderer){const r=this.renderer();r instanceof HTMLElement?s.replaceChildren(r):s.innerHTML=r}else{const r=hs("div",{display:"flex",alignItems:"center",justifyContent:"center",boxSizing:"border-box",height:"100%",margin:"8px",font:"12px Verdana, sans-serif"});r.innerText=this.getText(),s.replaceChildren(r),t==null||t.animate({from:0,to:1,id:"overlay",phase:"add",groupId:"opacity",onUpdate(n){s.style.opacity=String(n)},onStop(){s.style.opacity="1"}})}return this.element}removeElement(t){if(this.element){if(t){const{element:e}=this;t.animate({from:1,to:0,phase:"remove",id:"overlay",groupId:"opacity",onUpdate(i){e.style.opacity=String(i)},onStop(){e.remove()}})}else this.element.remove();this.element=void 0,this.focusBox=void 0}}};q([te($e,{optional:!0})],jf.prototype,"text",2);q([te(go,{optional:!0})],jf.prototype,"renderer",2);q([te(Et)],jf.prototype,"darkTheme",2);var rE=class extends ti{constructor(){super(...arguments),this.loading=new jf("ag-chart-loading-overlay","Loading data..."),this.noData=new jf("ag-chart-no-data-overlay","No data to display"),this.noVisibleSeries=new jf("ag-chart-no-visible-series","No visible series")}getFocusInfo(){for(const t of[this.loading,this.noData,this.noVisibleSeries])if(t.focusBox!==void 0)return{text:t.getText(),rect:t.focusBox}}destroy(){this.loading.removeElement(),this.noData.removeElement(),this.noVisibleSeries.removeElement()}};q([te(rt)],rE.prototype,"loading",2);q([te(rt)],rE.prototype,"noData",2);q([te(rt)],rE.prototype,"noVisibleSeries",2);var LQ=`
.${Vl} {
    color: #181d1f;
}

.${Vl}.${hA} {
    color: #ffffff;
}

.${Vl}--loading {
    color: rgb(140, 140, 140); /* DEFAULT_MUTED_LABEL_COLOUR */
}

.${Vl}__loading-background {
    background: white; /* DEFAULT_BACKGROUND_FILL */
}

.${Vl}.${hA} .${Vl}__loading-background {
    background: #192232; /* DEFAULT_DARK_BACKGROUND_FILL */
}
`;function kQ(t,e){const{animationDuration:i}=ky.add,s=i*e,r=hs("div",`${Vl}--loading`,{display:"flex",alignItems:"center",justifyContent:"center",flexDirection:"column",height:"100%",boxSizing:"border-box",font:"13px Verdana, sans-serif",userSelect:"none",animation:`ag-charts-loading ${s}ms linear 50ms both`}),n=hs("span",{width:"45px",height:"40px",backgroundImage:["linear-gradient(#0000 calc(1 * 100% / 6), #ccc 0 calc(3 * 100% / 6), #0000 0), ","linear-gradient(#0000 calc(2 * 100% / 6), #ccc 0 calc(4 * 100% / 6), #0000 0), ","linear-gradient(#0000 calc(3 * 100% / 6), #ccc 0 calc(5 * 100% / 6), #0000 0)"].join(""),backgroundSize:"10px 400%",backgroundRepeat:"no-repeat",animation:"ag-charts-loading-matrix 1s infinite linear"}),o=hs("p",{marginTop:"1em"});o.innerText=t;const a=hs("div",`${Vl}__loading-background`,{position:"absolute",inset:"0",opacity:"0.5",zIndex:"-1"}),l=hs("style");return l.innerText=["@keyframes ag-charts-loading { from { opacity: 0 } to { opacity: 1 } }","@keyframes ag-charts-loading-matrix {","0% { background-position: 0% 0%, 50% 0%, 100% 0%; }","100% { background-position: 0% 100%, 50% 100%, 100% 100%; }","}"].join(" "),r.replaceChildren(l,n,o,a),lp(LQ,"chartOverlays"),r}function nE(t,e=[0,0]){for(const i of t)typeof i=="number"&&(i<0&&(e[0]+=i),i>0&&(e[1]+=i));return e}function NQ(t,e){return{id:t,matchGroupIds:[e],type:"aggregate",aggregateFunction:s=>nE(s)}}function H8(t,e){return{id:t,type:"aggregate",matchGroupIds:e?[e]:void 0,aggregateFunction:i=>nE(i),groupAggregateFunction:(i,s=[0,0])=>{var r,n;return s[0]+=(r=i==null?void 0:i[0])!=null?r:0,s[1]+=(n=i==null?void 0:i[1])!=null?n:0,s}}}function j8(t,e){return{id:t,matchGroupIds:[e],type:"aggregate",aggregateFunction:s=>tf.extendDomain(s)}}function pA(t){return{id:t,type:"aggregate",aggregateFunction:()=>[0,1],groupAggregateFunction:(e,i=[0,0])=>{var s,r;return i[0]+=(s=e==null?void 0:e[0])!=null?s:0,i[1]+=(r=e==null?void 0:e[1])!=null?r:0,i}}}function U8(t,e){return{id:t,matchGroupIds:e?[e]:void 0,type:"aggregate",aggregateFunction:s=>nE(s),groupAggregateFunction:(s,r=[0,0,-1])=>{var n,o;return r[0]+=(n=s==null?void 0:s[0])!=null?n:0,r[1]+=(o=s==null?void 0:s[1])!=null?o:0,r[2]++,r},finalFunction:(s=[0,0,0])=>{const r=s[0]+s[1];return r>=0?[0,r/s[2]]:[r/s[2],0]}}}function fA(t,e,i){const s={id:t,matchGroupIds:i?[i]:void 0,type:"aggregate",aggregateFunction:(r,n=[])=>{const o=n[1]-n[0];return e.aggregateFunction(r).map(a=>a/o)}};return e.groupAggregateFunction&&(s.groupAggregateFunction=e.groupAggregateFunction),s}function W8(t){return()=>{let e=0;return i=>gi(i)?(e+=t?Math.max(0,i):i,e):i}}function z8(){return()=>{let t=0;return e=>{if(!gi(e))return e;const i=t;return t+=e,i}}}var $8={type:"reducer",property:"smallestKeyInterval",initialValue:1/0,reducer:()=>{let t=NaN;return(e=1/0,i)=>{const s=i.keys[0],r=Math.abs(s-t);return t=s,!isNaN(r)&&r>0&&r<e?r:e}}},K8={type:"processor",property:"sortedGroupDomain",calculate:({domain:{groups:t}})=>t==null?void 0:t.slice().sort((e,i)=>{for(let s=0;s<e.length;s++){const r=e[s]-i[s];if(r!==0)return r}return 0})};function OQ({normaliseTo:t,mode:e}){const i=(s,r)=>{const n=s*t/r;return n>=0?Math.min(t,n):Math.max(-t,n)};return()=>()=>(s,r)=>{const n=[0,0];for(const a of r){const l=s[a],c=l<0?0:1;e==="sum"?n[c]+=l:c===0?n[c]=Math.min(n[c],l):n[c]=Math.max(n[c],l)}const o=Math.max(Math.abs(n[0]),n[1]);for(const a of r)s[a]=i(s[a],o)}}function fS(t,e,i="sum"){return{type:"group-value-processor",matchGroupIds:t,adjust:cS({normaliseTo:e,mode:i},OQ)}}function GQ({normaliseTo:t,zeroDomain:e,rangeMin:i,rangeMax:s}){const r=t[1]-t[0],n=(o,a,l)=>{const c=t[0]+(o-a)/l*r;return l===0?e:c>=t[1]?t[1]:c<t[0]?t[0]:c};return()=>(o,a)=>{let[l,c]=o.domain.values[a];i!=null&&(l=i),s!=null&&(c=s);const u=c-l;o.domain.values[a]=[t[0],t[1]];for(const d of o.data){let h=d.values;o.type==="ungrouped"&&(h=[h]);for(const p of h)p[a]=n(p[a],l,u)}}}function Vy(t,e,i,s,r){return{type:"property-value-processor",property:t,adjust:cS({normaliseTo:e,rangeMin:s,rangeMax:r,zeroDomain:i},GQ)}}function cm(t){return{type:"processor",property:"animationValidation",calculate(e){const{keys:i,values:s}=e.defs,{input:r,data:n}=e;let o=!0,a=!0;const l=[];for(let u=0;u<s.length;u++)t!=null&&t.includes(s[u].id)&&l.push([u,s[u]]);const c=(u,d,h)=>{var p;if(d.valueType==="category"){const m=e.domain[h][u];o&&(o=m.length===r.count);return}let f=(p=n[0])==null?void 0:p[h][u];for(let m=1;(o||a)&&m<n.length;m++){const g=n[m][h][u];a&&(a=f<=g),o&&(o=f!==g),f=g}};for(let u=0;(o||a)&&u<i.length;u++)c(u,i[u],"keys");for(let u=0;(o||a)&&u<l.length;u++){const[d,h]=l[u];c(d,h,"values")}return{uniqueKeys:o,orderedKeys:a}}}}function BQ({mode:t,separateNegative:e}){return()=>()=>(i,s)=>{const r=[0,0];for(const n of s){const o=i[n],a=zC(o)&&e?0:1;gi(o)&&(t==="normal"&&(r[a]+=o),i[n]=r[a],t==="trailing"&&(r[a]+=o))}}}function VQ({mode:t,sum:e}){return()=>{const i=[];let s=!0;return()=>(r,n)=>{let o=0;for(const a of n){const l=r[a],c=s&&e==="current"?0:i[a];i[a]=l;const u=e==="current"?l:c;if(!gi(l)||!gi(c)){r[a]=o;continue}t==="normal"&&(o+=u),r[a]=o,t==="trailing"&&(o+=u)}s=!1}}}function Y8(t,e,i,s=!1){let r;if(e.startsWith("window")){const n=e.endsWith("-trailing")?"trailing":"normal";r=cS({mode:n,sum:i},VQ)}else r=cS({mode:e,separateNegative:s},BQ);return{type:"group-value-processor",matchGroupIds:[t],adjust:r}}function hp(t,e=!0){return{type:"processor",property:"diff",calculate:i=>{const s=new Map,r=new Map,n=new Map,o=new Map,a=Math.max(t.data.length,i.data.length);for(let c=0;c<a;c++){const u=t.data[c],d=i.data[c],h=u?Ou(u.keys):"",p=d?Ou(d.keys):"";if(d&&u&&h===p){Pv(u.values,d.values)||n.set(p,d);continue}o.has(p)?((e||!Pv(o.get(p).values,d.values))&&(n.set(p,d),s.set(p,d)),o.delete(p)):d&&r.set(p,d),r.has(h)?((e||!Pv(r.get(h).values,u.values))&&(n.set(h,u),s.set(h,u)),r.delete(h)):u&&(n.delete(h),o.set(h,u))}return{changed:r.size>0||n.size>0||o.size>0,added:r,updated:n,removed:o,moved:s}}}}function Ou(t,...e){let i;return Ns(t)?i=t.map(r=>Vf(r)).join("___"):i=Vf(t),(typeof i=="string"||typeof i=="number"||i instanceof Date)&&e.length>0&&(i+=`___${e.join("___")}`),i}var q8=(t=>(t[t.EXACT_SHAPE_MATCH=0]="EXACT_SHAPE_MATCH",t[t.NEAREST_BY_MAIN_AXIS_FIRST=1]="NEAREST_BY_MAIN_AXIS_FIRST",t[t.NEAREST_BY_MAIN_CATEGORY_AXIS_FIRST=2]="NEAREST_BY_MAIN_CATEGORY_AXIS_FIRST",t[t.NEAREST_NODE=3]="NEAREST_NODE",t))(q8||{});function XD(t){return t!=null&&eE(t)}function HQ(t){return t!=null}function X8(t){switch(t){case"number":case"log":case"ordinal-time":case"time":case"color":return XD;default:return HQ}}function Z8(t){switch(t){case"number":case"log":case"time":case"color":return"range";default:return"category"}}function mr(t,e,i={}){return Se({property:t,type:"key",valueType:Z8(e),validation:X8(e)},i)}function Vi(t,e,i={}){return Se({property:t,type:"value",valueType:Z8(e),validation:X8(e)},i)}function ZD(t,e={}){const i=e,{min:s=-1/0,max:r=1/0}=i,n=xs(i,["min","max"]);return Se({type:"value",property:t,valueType:"range",validation:XD,processor:()=>o=>gi(o)?Zt(s,o,r):o},n)}function JD(t,e,i={}){const s=i,{onlyPositive:r}=s,n=xs(s,["onlyPositive"]);return qe(Se({},Vi(t,e,n)),{processor:W8(r)})}function jQ(t,e,i={}){return qe(Se({},Vi(t,e,i)),{processor:z8()})}function iu(t,e,i="current",s,r){return[Vi(t,r,s),Y8(s.groupId,e,i,s.separateNegative),...s.rangeId!=null?[j8(s.rangeId,s.groupId)]:[]]}var QC=class{constructor(t,e,{datum:i},s){this.type=t,this.event=e,this.datum=i,this.seriesId=s.id}},QD=class{constructor(t,e,i){this.series=t,this.seriesGrouping=e,this.oldGrouping=i,this.type="groupingChanged"}},um=class extends m8{constructor(t){super(),this.destroyFns=[],this.seriesGrouping=void 0,this.NodeEvent=QC,this.internalId=wl(this),this.rootGroup=new ft({name:"seriesRoot",isVirtual:!0}),this.axes={x:void 0,y:void 0},this.directions=["x","y"],this.nodeDataRefresh=!0,this.moduleMap=new GD,this._declarationOrder=-1,this.seriesListeners=new lm;const{moduleCtx:e,pickModes:i=[1],directionKeys:s={},directionNames:r={},contentGroupVirtual:n=!0,canHaveAxes:o=!1}=t;this.ctx=e,this.directionKeys=s,this.directionNames=r,this.canHaveAxes=o,this.contentGroup=this.rootGroup.appendChild(new ft({name:`${this.internalId}-content`,isVirtual:n,zIndex:4,zIndexSubOrder:this.getGroupZIndexSubOrder("data")})),this.highlightGroup=new ft({name:`${this.internalId}-highlight`,isVirtual:n,zIndex:4,zIndexSubOrder:this.getGroupZIndexSubOrder("highlight")}),this.highlightNode=this.highlightGroup.appendChild(new ft({name:"highlightNode",zIndex:0})),this.highlightLabel=this.highlightGroup.appendChild(new ft({name:"highlightLabel",zIndex:10})),this.pickModes=i,this.labelGroup=this.rootGroup.appendChild(new ft({name:`${this.internalId}-series-labels`,zIndex:8})),this.annotationGroup=new ft({name:`${this.id}-annotation`,isVirtual:n,zIndex:4,zIndexSubOrder:this.getGroupZIndexSubOrder("annotation")})}get id(){var t,e;return(e=(t=this.properties)==null?void 0:t.id)!=null?e:this.internalId}get type(){var t;return(t=this.constructor.type)!=null?t:""}get data(){var t;return(t=this._data)!=null?t:this._chartData}set visible(t){this.properties.visible=t,this.visibleChanged()}get visible(){return this.properties.visible}get hasData(){return this.data!=null&&this.data.length>0}get tooltipEnabled(){var t,e;return(e=(t=this.properties.tooltip)==null?void 0:t.enabled)!=null?e:!1}onDataChange(){this.nodeDataRefresh=!0}setOptionsData(t){this._data=t,this.onDataChange()}setChartData(t){this._chartData=t,this.data===t&&this.onDataChange()}onSeriesGroupingChange(t,e){const{internalId:i,type:s,visible:r}=this;t&&this.ctx.seriesStateManager.deregisterSeries({id:i,type:s}),e&&this.ctx.seriesStateManager.registerSeries({id:i,type:s,visible:r,seriesGrouping:e}),this.fireEvent(new QD(this,e,t))}getBandScalePadding(){return{inner:1,outer:0}}getGroupZIndexSubOrder(t,e=0){let i=0;switch(t){case"data":case"paths":break;case"labels":i+=2e4;break;case"marker":i+=1e4;break;case"highlight":e+=15e3;break;case"annotation":i+=15e3;break}return[()=>this._declarationOrder+i,e]}addListener(t,e){return this.seriesListeners.addListener(t,e)}dispatch(t,e){this.seriesListeners.dispatch(t,e)}addChartEventListeners(){}destroy(){this.destroyFns.forEach(t=>t()),this.destroyFns=[],this.ctx.seriesStateManager.deregisterSeries(this)}getDirectionValues(t,e){const i=this.resolveKeyDirection(t),s=e==null?void 0:e[i],r=[];if(!s)return r;const n=(...o)=>{for(const a of o)Array.isArray(a)?n(...a):typeof a=="object"?n(...Object.values(a)):r.push(a)};return n(...s.map(o=>this.properties[o])),r}getKeys(t){return this.getDirectionValues(t,this.directionKeys)}getKeyProperties(t){var e;return(e=this.directionKeys[this.resolveKeyDirection(t)])!=null?e:[]}getNames(t){return this.getDirectionValues(t,this.directionNames)}resolveKeyDirection(t){return t}getDomain(t){const e=this.getSeriesDomain(t),i=this.moduleMap.mapModules(s=>s.getDomain(t));return e.concat(i.flat())}markNodeDataDirty(){this.nodeDataRefresh=!0}visibleChanged(){this.ctx.seriesStateManager.registerSeries(this)}getOpacity(){const{dimOpacity:e=1,enabled:i=!0}=this.properties.highlightStyle.series;if(!i||e===1)return 1;switch(this.isItemIdHighlighted()){case 0:case 1:return 1;case 2:default:return e}}getStrokeWidth(t){const{strokeWidth:e,enabled:i=!0}=this.properties.highlightStyle.series;if(!i||e===void 0)return t;switch(this.isItemIdHighlighted()){case 1:return e;case 0:case 2:return t}}isItemIdHighlighted(){var t,e;const i=(e=(t=this.ctx.highlightManager)==null?void 0:t.getActiveHighlight())==null?void 0:e.series;return i==null?0:i!==this?2:1}getModuleTooltipParams(){return this.moduleMap.mapModules(t=>t.getTooltipParams()).reduce((t,e)=>Object.assign(t,e),{})}pickNode(t,e){const{pickModes:i,visible:s,rootGroup:r}=this;if(!(!s||!r.visible))for(const n of i){if(e&&!e.includes(n))continue;let o;switch(n){case 0:o=this.pickNodeExactShape(t);break;case 1:case 2:o=this.pickNodeMainAxisFirst(t,n===2);break;case 3:o=this.pickNodeClosestDatum(t);break}if(o)return{pickMode:n,match:o.datum,distance:o.distance}}}pickNodeExactShape(t){const e=this.contentGroup.pickNode(t.x,t.y);if(e&&e.datum.missing!==!0)return{datum:e.datum,distance:0}}pickNodeClosestDatum(t){throw new Error("AG Charts - Series.pickNodeClosestDatum() not implemented")}pickNodeNearestDistantObject(t,e){const i=Wx(t.x,t.y,e);if(i.nearest!==void 0&&i.nearest.datum.missing!==!0)return{datum:i.nearest.datum,distance:Math.sqrt(i.distanceSquared)}}pickNodeMainAxisFirst(t,e){throw new Error("AG Charts - Series.pickNodeMainAxisFirst() not implemented")}fireNodeClickEvent(t,e){this.fireEvent(new this.NodeEvent("nodeClick",t,e,this))}fireNodeDoubleClickEvent(t,e){this.fireEvent(new this.NodeEvent("nodeDoubleClick",t,e,this))}createNodeContextMenuActionEvent(t,e){return new this.NodeEvent("nodeContextMenuAction",t,e,this)}toggleSeriesItem(t,e){this.visible=e,this.nodeDataRefresh=!0,this.dispatch("visibility-changed",{itemId:t,enabled:e})}isEnabled(){return this.visible}getModuleMap(){return this.moduleMap}createModuleContext(){return qe(Se({},this.ctx),{series:this})}getLabelText(t,e,i=String){var s;return t.formatter&&(s=this.ctx.callbackCache.call(t.formatter,Se({seriesId:this.id},e)))!=null?s:i(e.value)}getMarkerStyle(t,e,i=t.getStyle()){var s,r;const n={size:(r=(s=e.datum.point)==null?void 0:s.size)!=null?r:0},o=Jt(n,i);if(t.formatter){const a=this.ctx.callbackCache.call(t.formatter,qe(Se(Se({seriesId:this.id},o),e),{datum:e.datum.datum}));return Jt(a,o)}return o}updateMarkerStyle(t,e,i,s=e.getStyle(),{applyTranslation:r=!0}={}){const{point:n}=i.datum,o=this.getMarkerStyle(e,i,s),a=this.visible&&o.size>0&&n&&!isNaN(n.x)&&!isNaN(n.y);r?t.setProperties(qe(Se({visible:a},o),{translationX:n==null?void 0:n.x,translationY:n==null?void 0:n.y})):t.setProperties(Se({visible:a},o)),typeof e.shape=="function"&&!t.dirtyPath&&(t.path.clear(!0),t.updatePath(),t.checkPathDirty())}getMinRects(t,e){}get nodeDataDependencies(){var t;return(t=this._nodeDataDependencies)!=null?t:{seriesRectWidth:NaN,seriesRectHeight:NaN}}checkResize(t){const{width:e,height:i}=t??{width:NaN,height:NaN},s=t?{seriesRectWidth:e,seriesRectHeight:i}:void 0,r=Ho(this.nodeDataDependencies,s)!=null;return r&&(this._nodeDataDependencies=s,this.markNodeDataDirty()),r}pickFocus(t){}};um.highlightedZIndex=1e12;q([Hn({changeValue:function(t,e){this.onSeriesGroupingChange(e,t)}})],um.prototype,"seriesGrouping",2);var iL=30,UQ=class{constructor(t,e,i){this.seriesRoot=t,this.highlightRoot=e,this.annotationRoot=i,this.groups={},this.series={},this.expectedSeriesCount=1,this.mode="normal"}setSeriesCount(t){this.expectedSeriesCount=t}requestGroup(t){var e,i,s,r;const{internalId:n,type:o,rootGroup:a,highlightGroup:l,annotationGroup:c,seriesGrouping:u}=t,{groupIndex:d=n}=u??{};if(this.series[n]!=null)throw new Error(`AG Charts - series already has an allocated layer: ${this.series[n]}`);Object.keys(this.series).length===0&&(this.mode=this.expectedSeriesCount>=iL?"aggressive-grouping":"normal"),(i=(e=this.groups)[o])!=null||(e[o]={});const h=this.lookupIdx(d);let p=this.groups[o][h];return p||(p=(r=(s=this.groups[o])[h])!=null?r:s[h]={seriesIds:[],group:this.seriesRoot.appendChild(new ft({name:`${o}-content`,layer:!0,zIndex:4,zIndexSubOrder:t.getGroupZIndexSubOrder("data")})),highlight:this.highlightRoot.appendChild(new ft({name:`${o}-highlight`,zIndex:4,zIndexSubOrder:t.getGroupZIndexSubOrder("highlight")})),annotation:this.annotationRoot.appendChild(new ft({name:`${o}-annotation`,zIndex:4,zIndexSubOrder:t.getGroupZIndexSubOrder("annotation")}))}),this.series[n]={layerState:p,seriesConfig:t},p.seriesIds.push(n),p.group.appendChild(a),p.highlight.appendChild(l),p.annotation.appendChild(c),p.group}changeGroup(t){var e,i;const{internalId:s,seriesGrouping:r,type:n,rootGroup:o,highlightGroup:a,annotationGroup:l,oldGrouping:c}=t,{groupIndex:u=s}=r??{};(i=(e=this.groups[n])==null?void 0:e[u])!=null&&i.seriesIds.includes(s)||(this.series[s]!=null&&this.releaseGroup({internalId:s,seriesGrouping:c,type:n,rootGroup:o,highlightGroup:a,annotationGroup:l}),this.requestGroup(t))}releaseGroup(t){var e,i,s,r,n;const{internalId:o,seriesGrouping:a,rootGroup:l,highlightGroup:c,annotationGroup:u,type:d}=t,{groupIndex:h=o}=a??{};if(this.series[o]==null)throw new Error(`AG Charts - series doesn't have an allocated layer: ${o}`);const p=this.lookupIdx(h),f=(s=(e=this.groups[d])==null?void 0:e[p])!=null?s:(i=this.series[o])==null?void 0:i.layerState;if(f&&(f.seriesIds=f.seriesIds.filter(m=>m!==o),f.group.removeChild(l),f.highlight.removeChild(c),f.annotation.removeChild(u)),(f==null?void 0:f.seriesIds.length)===0)this.seriesRoot.removeChild(f.group),this.highlightRoot.removeChild(f.highlight),this.annotationRoot.removeChild(f.annotation),delete this.groups[d][p],delete this.groups[d][o];else if((f==null?void 0:f.seriesIds.length)>0){const m=(n=this.series[(r=f==null?void 0:f.seriesIds)==null?void 0:r[0]])==null?void 0:n.seriesConfig;f.group.zIndexSubOrder=m==null?void 0:m.getGroupZIndexSubOrder("data"),f.highlight.zIndexSubOrder=m==null?void 0:m.getGroupZIndexSubOrder("highlight"),f.annotation.zIndexSubOrder=m==null?void 0:m.getGroupZIndexSubOrder("annotation")}delete this.series[o]}lookupIdx(t){return this.mode==="normal"?t:typeof t=="string"&&(t=Number(t.split("-").slice(-1)[0]),!t)?0:Math.floor(Zt(0,t/this.expectedSeriesCount,1)*iL)}destroy(){for(const t of Object.values(this.groups))for(const e of Object.values(t))this.seriesRoot.removeChild(e.group),this.highlightRoot.removeChild(e.highlight),this.annotationRoot.removeChild(e.annotation);this.groups={},this.series={}}},WQ=class{constructor(t,e){this.chartLike=t,this.layoutService=e,this.destroyFns=[],this.destroyFns.push(this.layoutService.addListener("start-layout",i=>this.positionPadding(i.shrinkRect)),this.layoutService.addListener("start-layout",i=>this.positionCaptions(i.shrinkRect)))}destroy(){this.destroyFns.forEach(t=>t())}positionPadding(t){const{padding:e}=this.chartLike;return t.shrink(e.left,"left"),t.shrink(e.top,"top"),t.shrink(e.right,"right"),t.shrink(e.bottom,"bottom"),{shrinkRect:t}}positionCaptions(t){var e,i;const{title:s,subtitle:r,footnote:n}=this.chartLike,o=t.clone(),a=d=>{var h;const p=t.height/10,f=(h=d.lineHeight)!=null?h:d.fontSize*ri.defaultLineHeightRatio,m=t.width,g=Math.max(f,p);d.computeTextWrap(m,g)},l=d=>d==="left"?o.x:d==="right"?o.x+o.width:(d!=="center"&&Be.error(`invalid textAlign value: ${d}`),o.x+o.width/2),c=(d,h)=>{const p=o.y;d.node.x=l(d.textAlign),d.node.y=p,d.node.textBaseline="top",a(d);const f=d.node.computeBBox(),m=Math.ceil(f.y-p+f.height+h);o.shrink(m,"top")},u=(d,h)=>{const p=o.y+o.height;d.node.x=l(d.textAlign),d.node.y=p,d.node.textBaseline="bottom",a(d);const f=d.node.computeBBox(),m=Math.ceil(p-f.y+h);o.shrink(m,"bottom")};if(s.node.visible=s.enabled,r.node.visible=r.enabled,n.node.visible=n.enabled,s.enabled){const{spacing:d=r.enabled?Ki.SMALL_PADDING:Ki.LARGE_PADDING}=s;c(s,d)}return r.enabled&&c(r,(e=r.spacing)!=null?e:0),n.enabled&&u(n,(i=n.spacing)!=null?i:0),{shrinkRect:o}}},zQ=class{constructor(t,e,i,s){this.chart=t,this.dataService=e,this.updateService=i,this.zoomManager=s,this.dirtyZoom=!1,this.dirtyDataSource=!1,this.lastAxisZooms=new Map,this.destroyFns=[],this.destroyFns.push(this.dataService.addListener("data-source-change",()=>this.onDataSourceChange()),this.dataService.addListener("data-load",()=>this.onDataLoad()),this.dataService.addListener("data-error",()=>this.onDataError()),this.updateService.addListener("update-complete",()=>this.onUpdateComplete()),this.zoomManager.addListener("zoom-change",()=>this.onZoomChange()))}destroy(){this.destroyFns.forEach(t=>t())}onDataLoad(){this.updateService.update(1)}onDataError(){this.updateService.update(3)}onDataSourceChange(){this.dirtyDataSource=!0}onUpdateComplete(){!this.dirtyZoom&&!this.dirtyDataSource||this.updateWindow().catch(t=>Be.errorOnce(t))}onZoomChange(){this.dirtyZoom=!0}updateWindow(){return Fe(this,null,function*(){if(!this.dataService.isLazy())return;const t=this.getValidAxis();let e,i=!0;if(t){const s=this.zoomManager.getAxisZoom(t.id);e=this.getAxisWindow(t,s),i=this.shouldRefresh(t,s)}this.dirtyZoom=!1,this.dirtyDataSource=!1,i&&this.dataService.load({windowStart:e==null?void 0:e.min,windowEnd:e==null?void 0:e.max})})}getValidAxis(){return this.chart.axes.find(t=>t.type==="time")}shouldRefresh(t,e){if(this.dirtyDataSource)return!0;if(!this.dirtyZoom)return!1;const i=this.lastAxisZooms.get(t.id);return i&&e.min===i.min&&e.max===i.max?!1:(this.lastAxisZooms.set(t.id,e),!0)}getAxisWindow(t,e){var i,s;const r=(s=(i=t.scale).getDomain)==null?void 0:s.call(i);if(!e||!r||r.length===0||isNaN(Number(r[0])))return;const n=Number(r[1])-Number(r[0]),o=new Date(Number(r[0])+n*e.min),a=new Date(Number(r[0])+n*e.max);return{min:o,max:a}}},$Q=class{constructor(t,e,i,s,r){this.chartLike=t,this.overlays=e,this.dataService=i,this.layoutService=s,this.animationManager=r,this.destroyFns=[],this.destroyFns.push(this.layoutService.addListener("layout-complete",n=>this.onLayoutComplete(n)))}destroy(){this.destroyFns.forEach(t=>t())}onLayoutComplete({series:{rect:t}}){const e=this.dataService.isLoading(),i=this.chartLike.series.some(r=>r.hasData),s=this.chartLike.series.some(r=>r.visible);this.toggleOverlay(this.overlays.loading,t,e),this.toggleOverlay(this.overlays.noData,t,!e&&!i),this.toggleOverlay(this.overlays.noVisibleSeries,t,i&&!s)}toggleOverlay(t,e,i){if(i){const s=t.getElement(this.animationManager,e);this.chartLike.element.append(s)}else t.removeElement(this.animationManager)}},ta=is.create(!0,"opts"),eP=class extends ti{constructor(){super(...arguments),this.padding=new gd(0)}};q([te(Et,{optional:!0})],eP.prototype,"clip",2);q([te(rt)],eP.prototype,"padding",2);var vr=class gA extends m8{constructor(e,i){var s,r,n;super(),this.id=wl(this),this.seriesRoot=new ft({name:`${this.id}-series-root`}),this.highlightRoot=new ft({name:`${this.id}-highlight-root`,layer:!0,zIndex:5,nonEmptyChildDerivedZIndex:!0}),this.annotationRoot=new ft({name:`${this.id}-annotation-root`,layer:!0,zIndex:10}),this.debug=is.create(),this.extraDebugStats={},this.data=[],this._firstAutoSize=!0,this.padding=new gd(20),this.seriesArea=new eP,this.title=new Ki,this.subtitle=new Ki,this.footnote=new Ki,this.keyboard=new qD,this.mode="standalone",this.destroyed=!1,this._skipSync=!1,this._destroyFns=[],this.chartAnimationPhase="initial",this.modulesManager=new FQ,this.zoomManager=new G8,this.processors=[],this.processedOptions={},this.userOptions={},this.queuedUserOptions=[],this._pendingFactoryUpdatesCount=0,this._performUpdateNoRenderCount=0,this._performUpdateSkipAnimations=!1,this.performUpdateType=7,this.updateShortcutCount=0,this.seriesToUpdate=new Set,this.updateMutex=new tQ,this.updateRequestors={},this.performUpdateTrigger=sQ(m=>Fe(this,[m],function*({count:g}){this.destroyed||this.updateMutex.acquire(()=>Fe(this,null,function*(){try{yield this.performUpdate(g)}catch(y){Be.error("update error",y)}})).catch(y=>Be.errorOnce(y))})),this._performUpdateSplits={},this.axes=[],this.series=[],this.focus={hasFocus:!1,series:void 0,seriesIndex:0,datumIndex:0,datum:void 0},this.pointerScheduler=iQ(()=>{if(this.lastInteractionEvent){if(this.performUpdateType<=4){this.pointerScheduler.schedule();return}this.handlePointer(this.lastInteractionEvent,!1),this.lastInteractionEvent=void 0}}),this.onSeriesNodeClick=m=>{const g=qe(Se({},m),{type:"seriesNodeClick"});Object.defineProperty(g,"series",{enumerable:!1,get:()=>m.series}),this.fireEvent(g)},this.onSeriesNodeDoubleClick=m=>{const g=qe(Se({},m),{type:"seriesNodeDoubleClick"});this.fireEvent(g)},this.seriesGroupingChanged=m=>{if(!(m instanceof QD))return;const{series:g,seriesGrouping:y,oldGrouping:v}=m;g.rootGroup.parent!=null&&this.seriesLayerManager.changeGroup({internalId:g.internalId,type:g.type,rootGroup:g.rootGroup,highlightGroup:g.highlightGroup,annotationGroup:g.annotationGroup,getGroupZIndexSubOrder:C=>g.getGroupZIndexSubOrder(C),seriesGrouping:y,oldGrouping:v})},this.dataProcessListeners=new Set,this.chartOptions=e;let o=i==null?void 0:i.scene;const a=(s=i==null?void 0:i.element)!=null?s:hs("div","ag-chart-wrapper",{position:"relative",userSelect:"none"}),l=i==null?void 0:i.container;this.element=a;const c=new ft({name:"root"});c.visible=!1,c.append(this.seriesRoot),c.append(this.highlightRoot),c.append(this.annotationRoot),this.axisGridGroup=new ft({name:"Axes-Grids",layer:!0,zIndex:1}),c.appendChild(this.axisGridGroup),this.axisGroup=new ft({name:"Axes",layer:!0,zIndex:2}),c.appendChild(this.axisGroup),this.sizeMonitor=new rQ,this.sizeMonitor.observe(this.element,m=>this.rawResize(m));const{overrideDevicePixelRatio:u}=e.specialOverrides;o??(o=new zD({pixelRatio:u,canvasPosition:"absolute"})),o.setRoot(c).setContainer(a),this.autoSize=!0,this.tooltip=new Ma,this.seriesLayerManager=new UQ(this.seriesRoot,this.highlightRoot,this.annotationRoot);const d=this.ctx=new CQ(this,{scene:o,syncManager:new EQ(this),element:a,updateCallback:(m=0,g)=>this.update(m,g),updateMutex:this.updateMutex});this.overlays=new rE,(n=(r=this.overlays.loading).renderer)!=null||(r.renderer=()=>kQ(this.overlays.loading.getText(),d.animationManager.defaultDuration)),this.processors=[new WQ(this,d.layoutService),new zQ(this,d.dataService,d.updateService,d.zoomManager),new $Q(this,this.overlays,d.dataService,d.layoutService,d.animationManager)],this.highlight=new I8,this.container=l;const{All:h}=dS,p=this.getModuleContext(),f=d.regionManager.addRegion("series",this.seriesRoot,this.axisGroup);d.regionManager.addRegion("root",c),this._destroyFns.push(d.dataService.addListener("data-load",m=>{this.data=m.data}),d.scene.attachNode(this.title.node),d.scene.attachNode(this.subtitle.node),d.scene.attachNode(this.footnote.node),this.title.registerInteraction(p,"title"),this.subtitle.registerInteraction(p,"subtitle"),this.footnote.registerInteraction(p,"footnote"),d.interactionManager.addListener("click",m=>this.onClick(m)),d.interactionManager.addListener("dblclick",m=>this.onDoubleClick(m)),f.addListener("hover",m=>this.onMouseMove(m)),f.addListener("leave",m=>this.onLeave(m)),f.addListener("blur",()=>this.onBlur()),f.addListener("tab",m=>this.onTab(m)),f.addListener("nav-vert",m=>this.onNavVert(m)),f.addListener("nav-hori",m=>this.onNavHori(m)),f.addListener("submit",m=>this.onSubmit(m)),d.keyNavManager.addListener("browserfocus",m=>this.onBrowserFocus(m)),d.interactionManager.addListener("page-left",()=>this.destroy()),d.interactionManager.addListener("contextmenu",m=>this.onContextMenu(m),h),d.animationManager.addListener("animation-start",()=>this.onAnimationStart()),d.animationManager.addListener("animation-frame",()=>{this.update(6)}),d.highlightManager.addListener("highlight-change",m=>this.changeHighlightDatum(m)),d.zoomManager.addListener("zoom-pan-start",()=>this.resetPointer()),d.zoomManager.addListener("zoom-change",()=>{this.resetPointer(),this.series.map(g=>{var y;return(y=g.animationState)==null?void 0:y.transition("updateData")});const m=this.chartAnimationPhase!=="initial";this.update(3,{forceNodeDataRefresh:!0,skipAnimations:m})}))}static getInstance(e){return gA.chartsInstances.get(e)}get canvasElement(){return this.ctx.scene.canvas.element}getCanvasDataURL(e){return this.ctx.scene.getDataURL(e)}onAutoSizeChange(e){const{style:i}=this.element;if(e){if(i.display="block",i.width="100%",i.height="100%",!this._lastAutoSize)return;this.resize(void 0,void 0,"autoSize option")}else i.display="inline-block",i.width="auto",i.height="auto"}download(e,i){this.ctx.scene.download(e,i)}getOptions(){var e;return(e=this.queuedUserOptions.at(-1))!=null?e:this.userOptions}getModuleContext(){return this.ctx}getAriaLabel(){var e;const i=[this.title,this.subtitle,this.footnote].filter(r=>r.enabled&&r.text).map(r=>r.text).join(". ");return`chart, ${(e=this.series.length)!=null?e:0} series, ${i}`}resetAnimations(){this.chartAnimationPhase="initial";for(const e of this.series)e.resetAnimation(this.chartAnimationPhase);for(const e of this.axes)e.resetAnimation(this.chartAnimationPhase);this.animationRect=void 0,this.ctx.animationManager.reset()}skipAnimations(){this.ctx.animationManager.skipCurrentBatch(),this._performUpdateSkipAnimations=!0}destroy(e){if(this.destroyed)return;const i=e==null?void 0:e.keepTransferableResources;let s;return this.performUpdateType=7,this._destroyFns.forEach(r=>r()),this.processors.forEach(r=>r.destroy()),this.tooltip.destroy(),this.overlays.destroy(),this.sizeMonitor.unobserve(this.element),this.modulesManager.destroy(),i?(this.ctx.scene.strip(),s={container:this.container,scene:this.ctx.scene,element:this.element}):(this.ctx.scene.destroy(),this.container=void 0),this.destroySeries(this.series),this.seriesLayerManager.destroy(),this.axes.forEach(r=>r.destroy()),this.axes=[],this.animationRect=void 0,this.ctx.destroy(),this.zoomManager.destroy(),this.destroyed=!0,Object.freeze(this),s}resetPointer(e=!1){e||this.ctx.tooltipManager.removeTooltip(this.id),this.ctx.highlightManager.updateHighlight(this.id),this.lastInteractionEvent=void 0}requestFactoryUpdate(e){this.destroyed||(this._pendingFactoryUpdatesCount++,this.updateMutex.acquire(()=>Fe(this,null,function*(){this.destroyed||(yield e(this),!this.destroyed&&this._pendingFactoryUpdatesCount--)})).catch(i=>Be.errorOnce(i)))}update(e=0,i){var s,r;const{forceNodeDataRefresh:n=!1,skipAnimations:o,seriesToUpdate:a=this.series,newAnimationBatch:l}=i??{};n&&this.series.forEach(c=>c.markNodeDataDirty());for(const c of a)this.seriesToUpdate.add(c);if(o&&(this.ctx.animationManager.skipCurrentBatch(),this._performUpdateSkipAnimations=!0),l&&this.ctx.animationManager.isActive()&&(this._performUpdateSkipAnimations=!0),this._skipSync=(s=i==null?void 0:i.skipSync)!=null?s:!1,this.debug.check()){let c=(r=new Error().stack)!=null?r:"<unknown>";c=c.replace(/\([^)]*/g,""),this.updateRequestors[c]=e}e<this.performUpdateType&&(this.performUpdateType=e,this.performUpdateTrigger.schedule(i==null?void 0:i.backOffMs))}performUpdate(e){return Fe(this,null,function*(){var i;const{performUpdateType:s,extraDebugStats:r,_performUpdateSplits:n,ctx:o}=this,a=[...this.seriesToUpdate];this.performUpdateType=7,this.seriesToUpdate.clear(),this.updateShortcutCount===0&&s<6&&(o.animationManager.startBatch(this._performUpdateSkipAnimations),o.animationManager.onBatchStop(()=>this.chartAnimationPhase="ready")),this.debug("Chart.performUpdate() - start",Lv[s]);let l=performance.now();(i=n.start)!=null||(n.start=l);const c=h=>{var p;(p=n[h])!=null||(n[h]=0),n[h]+=performance.now()-l,l=performance.now()};let u=!1;switch(s){case 0:this.updateDOM();case 1:yield this.updateData(),c("");case 2:yield this.processData(),this.resetPointer(!0),c("");case 3:if(this.checkUpdateShortcut(3))break;if(!this.checkFirstAutoSize(a)){u=!0;break}yield this.processLayout(),c("");case 4:if(this.checkUpdateShortcut(4))break;const{seriesRect:h}=this;yield Promise.all(a.map(f=>f.update({seriesRect:h}))),c("");case 5:if(this.checkUpdateShortcut(5))break;const p=o.tooltipManager.getTooltipMeta(this.id);s<=4&&(p==null?void 0:p.lastPointerEvent)!=null&&this.handlePointer(p.lastPointerEvent,!0),c("");case 6:if(this.checkUpdateShortcut(6))break;o.animationManager.endBatch(),r.updateShortcutCount=this.updateShortcutCount,yield o.scene.render({debugSplitTimes:n,extraDebugStats:r}),this.ctx.regionManager.updateFocusWrapperRect(),this.extraDebugStats={};for(const f in n)delete n[f];case 7:this.updateShortcutCount=0,this.updateRequestors={},this._performUpdateSkipAnimations=!1,o.animationManager.endBatch()}u||o.updateService.dispatchUpdateComplete(this.getMinRects());const d=performance.now();this.debug("Chart.performUpdate() - end",{chart:this,durationMs:Math.round((d-n.start)*100)/100,count:e,performUpdateType:Lv[s]})})}updateThemeClassName(){const{element:e,processedOptions:{theme:i}}=this,s="ag-charts-theme-",r=[`${s}default`,`${s}default-dark`];let n=r[0],o=!1;typeof i=="string"?(n=i.replace("ag-",s),o=i.includes("-dark")):typeof(i==null?void 0:i.baseTheme)=="string"&&(n=i.baseTheme.replace("ag-",s),o=i.baseTheme.includes("-dark")),r.includes(n)||(n=o?r[1]:r[0]),e.classList.forEach(a=>{a.startsWith(s)&&a!==n&&e.classList.remove(a)}),e.classList.add(n)}updateDOM(){this.updateThemeClassName();const{enabled:e,tabIndex:i}=this.keyboard;this.element.tabIndex=e?i??0:-1,Cg(this.ctx.scene.canvas.element,"role","figure"),Cg(this.ctx.scene.canvas.element,"aria-label",this.getAriaLabel())}checkUpdateShortcut(e){return this.updateShortcutCount>3?(Be.warn("exceeded the maximum number of simultaneous updates (4), discarding changes and rendering",this.updateRequestors),!1):this.performUpdateType<=e?(this.updateShortcutCount++,!0):!1}checkFirstAutoSize(e){if(this.autoSize&&!this._lastAutoSize){const i=this._performUpdateNoRenderCount++,s=_t(i+1,2)*40;if(i<8)return this.update(3,{seriesToUpdate:e,backOffMs:s}),this.debug("Chart.checkFirstAutoSize() - backing off until first size update",s),!1;this.debug("Chart.checkFirstAutoSize() - timeout for first size update.")}return this._performUpdateNoRenderCount=0,!0}onAxisChange(e,i=[]){for(const s of i)e.includes(s)||(s.detachAxis(this.axisGroup,this.axisGridGroup),s.destroy());for(const s of e)i!=null&&i.includes(s)||s.attachAxis(this.axisGroup,this.axisGridGroup)}onSeriesChange(e,i){var s,r;const n=(s=i==null?void 0:i.filter(o=>!e.includes(o)))!=null?s:[];this.destroySeries(n),(r=this.seriesLayerManager)==null||r.setSeriesCount(e.length);for(const o of e){if(i!=null&&i.includes(o))continue;o.rootGroup.parent==null&&this.seriesLayerManager.requestGroup(o);const a=this;o.chart={get mode(){return a.mode},get isMiniChart(){return!1},get seriesRect(){return a.seriesRect},placeLabels(){return a.placeLabels()}},o.resetAnimation(this.chartAnimationPhase),this.addSeriesListeners(o),o.addChartEventListeners()}}destroySeries(e){e==null||e.forEach(i=>{i.removeEventListener("nodeClick",this.onSeriesNodeClick),i.removeEventListener("nodeDoubleClick",this.onSeriesNodeDoubleClick),i.removeEventListener("groupingChanged",this.seriesGroupingChanged),i.destroy(),this.seriesLayerManager.releaseGroup(i),i.chart=void 0})}addSeriesListeners(e){this.hasEventListener("seriesNodeClick")&&e.addEventListener("nodeClick",this.onSeriesNodeClick),this.hasEventListener("seriesNodeDoubleClick")&&e.addEventListener("nodeDoubleClick",this.onSeriesNodeDoubleClick),e.addEventListener("groupingChanged",this.seriesGroupingChanged)}updateAllSeriesListeners(){this.series.forEach(e=>{e.removeEventListener("nodeClick",this.onSeriesNodeClick),e.removeEventListener("nodeDoubleClick",this.onSeriesNodeDoubleClick),this.addSeriesListeners(e)})}assignSeriesToAxes(){this.axes.forEach(e=>{e.boundSeries=this.series.filter(i=>i.axes[e.direction]===e)})}assignAxesToSeries(){const e=wD(this.axes,i=>i.direction);this.series.forEach(i=>{i.directions.forEach(s=>{const r=e[s];if(!r){Be.warnOnce(`no available axis for direction [${s}]; check series and axes configuration.`);return}const n=i.getKeys(s),o=r.find(a=>!a.keys.length||n.some(l=>a.keys.includes(l)));if(!o){Be.warnOnce(`no matching axis for direction [${s}] and keys [${n}]; check series and axes configuration.`);return}i.axes[s]=o})})}rawResize({width:e,height:i}){var s;if(!this.autoSize||(e=Math.floor(e),i=Math.floor(i),e===0&&i===0))return;const[r=0,n=0]=(s=this._lastAutoSize)!=null?s:[];r===e&&n===i||(this._lastAutoSize=[e,i],this.resize(void 0,void 0,"SizeMonitor"))}resize(e,i,s){var r,n,o,a;const{scene:l,animationManager:c}=this.ctx;if(e??(e=(n=this.width)!=null?n:this.autoSize?(r=this._lastAutoSize)==null?void 0:r[0]:l.canvas.width),i??(i=(a=this.height)!=null?a:this.autoSize?(o=this._lastAutoSize)==null?void 0:o[1]:l.canvas.height),this.debug(`Chart.resize() from ${s}`,{width:e,height:i,stack:new Error().stack}),!(!e||!i||!gi(e)||!gi(i))&&l.resize(e,i)){this.resetPointer(),c.reset();let u=!0;this.autoSize&&this._firstAutoSize&&(u=!1,this._firstAutoSize=!1),this.update(3,{forceNodeDataRefresh:!0,skipAnimations:u})}}updateData(){return Fe(this,null,function*(){this.series.forEach(i=>i.setChartData(this.data));const e=this.modulesManager.mapModules(i=>{var s;return(s=i.updateData)==null?void 0:s.call(i,{data:this.data})});yield Promise.all(e)})}processData(){return Fe(this,null,function*(){if(this.series.some(r=>r.canHaveAxes)){this.assignAxesToSeries();const r=this.modulesManager.getModule("sync");r!=null&&r.enabled?r.syncAxes(this._skipSync):this.assignSeriesToAxes()}const e=new O8(this.mode),i=this.series.map(r=>r.processData(e)),s=this.modulesManager.mapModules(r=>{var n;return(n=r.processData)==null?void 0:n.call(r,{dataController:e})});e.execute(),yield Promise.all([...i,...s]);for(const{legendType:r,legend:n}of this.modulesManager.legends())n.data=this.getLegendData(r,this.mode!=="integrated");this.dataProcessListeners.forEach(r=>r()),this.dataProcessListeners.clear()})}placeLabels(){const e=[],i=[];for(const c of this.series){if(!c.visible)continue;const u=c.getLabelData();_J(u==null?void 0:u[0])&&(i.push(u),e.push(c))}const{seriesRect:s}=this,{top:r,right:n,bottom:o,left:a}=this.seriesArea.padding,l=s&&i.length>0?RJ(i,{x:-a,y:-r,width:s.width+a+n,height:s.height+r+o}):[];return new Map(l.map((c,u)=>[e[u],c]))}getLegendData(e,i){var s,r,n;const o=this.series.filter(l=>l.properties.showInLegend).flatMap(l=>l.getLegendData(e));if(i&&(l=>l.every(c=>c.legendType==="category"))(o)){const l={},c=new Map(this.series.map(u=>[u.id,u.type]));for(const{seriesId:u,marker:d,label:h}of o){if(d.fill==null)continue;const p=c.get(u),f=(s=l[p])!=null?s:l[p]={};(n=f[r=h.text])!=null||(f[r]=d.fill),f[h.text]!==d.fill&&Be.warnOnce(`legend item '${h.text}' has multiple fill colors, this may cause unexpected behaviour.`)}}return o}processLayout(){return Fe(this,null,function*(){var e;const i=this.animationRect;yield this.performLayout(),i&&!((e=this.animationRect)!=null&&e.equals(i))&&this.ctx.animationManager.skipCurrentBatch(),this.debug("Chart.performUpdate() - seriesRect",this.seriesRect)})}performLayout(){return Fe(this,null,function*(){const{width:e,height:i}=this.ctx.scene;let s={shrinkRect:new lt(0,0,e,i)};s=this.ctx.layoutService.dispatchPerformLayout("start-layout",s),s=this.ctx.layoutService.dispatchPerformLayout("before-series",s);const r=this.modulesManager.mapModules(n=>Fe(this,null,function*(){n.performLayout!=null&&(s=yield n.performLayout(s))}));return yield Promise.all(r),s.shrinkRect})}pickSeriesNode(e,i,s){var r,n;const o=performance.now(),a=i?[0]:void 0,l=[...this.series].reverse();let c;for(const u of l){if(!u.visible||!u.rootGroup.visible)continue;const{match:d,distance:h}=(r=u.pickNode(e,a))!=null?r:{};if(!(!d||h==null)&&((!c||c.distance>h)&&h<=(s??1/0)&&(c={series:u,distance:h,datum:d}),h===0))break}return this.extraDebugStats.pickSeriesNode=Math.round(((n=this.extraDebugStats.pickSeriesNode)!=null?n:0)+(performance.now()-o)),c}onMouseMove(e){this.lastInteractionEvent=e,this.pointerScheduler.schedule(),this.extraDebugStats.mouseX=e.offsetX,this.extraDebugStats.mouseY=e.offsetY,this.update(6)}onLeave(e){this.tooltip.pointerLeftOntoTooltip(e)||(this.resetPointer(),this.update(6),this.ctx.cursorManager.updateCursor("chart"))}onBrowserFocus(e){e.delta>0?(this.focus.datum=void 0,this.focus.series=void 0,this.focus.datumIndex=0,this.focus.seriesIndex=0):(this.focus.datum=void 0,this.focus.series=void 0,this.focus.datumIndex=1/0,this.focus.seriesIndex=1/0)}onAnimationStart(){this.focus.hasFocus&&this.onBlur()}onBlur(){this.ctx.regionManager.updateFocusIndicatorRect(void 0),this.resetPointer(),this.focus.hasFocus=!1}onTab(e){this.handleFocus(),e.consume(),this.focus.hasFocus=!0}onNavVert(e){this.focus.seriesIndex+=e.delta,this.handleFocus(),e.consume()}onNavHori(e){this.focus.datumIndex+=e.delta,this.handleFocus(e.delta),e.consume()}onSubmit(e){const{series:i,datum:s}=this.focus,r=e.sourceEvent.sourceEvent;i!==void 0&&s!==void 0?i.fireNodeClickEvent(r,s):this.fireEvent({type:"click",event:r})}onContextMenu(e){this.ctx.tooltipManager.removeTooltip(this.id);const{Default:i,ContextMenu:s}=dS;this.ctx.interactionManager.getState()&(i|s)&&this.checkSeriesNodeRange(e,()=>{this.ctx.highlightManager.updateHighlight(this.id)})}handleFocus(e){this.focus.hasFocus=!0;const i=this.overlays.getFocusInfo();i==null?this.handleSeriesFocus(e??0):(this.ctx.regionManager.updateFocusIndicatorRect(i.rect),this.ctx.ariaAnnouncementService.announceValue(i.text))}handleSeriesFocus(e){const{series:i,seriesRect:s,focus:r}=this,n=i.filter(u=>u.visible);if(n.length===0)return;r.seriesIndex=Zt(0,r.seriesIndex,n.length-1),r.series=n[r.seriesIndex];const o=r.series.pickFocus({datumIndex:r.datumIndex,datumIndexDelta:e,seriesRect:s});if(o===void 0)return;const{datum:a,datumIndex:l}=o;r.datumIndex=l,r.datum=a;const c=B8(this.ctx.regionManager,o);if(c!==void 0){this.lastInteractionEvent=c;const u=r.series.getTooltipHtml(a),d=pS.makeTooltipMeta(this.lastInteractionEvent,a);this.ctx.highlightManager.updateHighlight(this.id,a),this.ctx.tooltipManager.updateTooltip(this.id,d,u),this.ctx.ariaAnnouncementService.announceValue(u.ariaLabel)}}static isHoverEvent(e){return e!==void 0&&e.type==="hover"}handlePointer(e,i){if(this.ctx.interactionManager.getState()!==16||!gA.isHoverEvent(e))return;const{lastPick:s,hoverRect:r}=this,{offsetX:n,offsetY:o}=e,a=(l=!1)=>{s&&this.resetPointer(l)};if(i?this.ctx.animationManager.isActive():!(r!=null&&r.containsPoint(n,o))){a();return}this.handlePointerTooltip(e,a),this.handlePointerNode(e)}handlePointerTooltip(e,i){const{lastPick:s,tooltip:r}=this,{range:n}=r,{offsetX:o,offsetY:a}=e;let l;gi(n)&&(l=n);const c=this.pickSeriesNode({x:o,y:a},n==="exact",l);if(!c){this.ctx.tooltipManager.removeTooltip(this.id),this.highlight.range==="tooltip"&&i(!0);return}const u=this.highlight.range==="node"||!s||s!==c.datum;let d;u&&(d=c.series.getTooltipHtml(c.datum),this.highlight.range==="tooltip"&&this.ctx.highlightManager.updateHighlight(this.id,c.datum));const h=l!=null,p=this.tooltip.enabled&&c.series.tooltipEnabled,f=n==="exact"&&c.distance===0,g=p&&(n==="nearest"||h||f)&&(!u||d!==void 0),y=pS.makeTooltipMeta(e,c.datum);g&&this.ctx.tooltipManager.updateTooltip(this.id,y,d)}handlePointerNode(e){this.checkSeriesNodeRange(e,(s,r)=>{(s.hasEventListener("nodeClick")||s.hasEventListener("nodeDoubleClick"))&&this.ctx.cursorManager.updateCursor("chart","pointer"),this.highlight.range==="node"&&this.ctx.highlightManager.updateHighlight(this.id,r)})||(this.ctx.cursorManager.updateCursor("chart"),this.highlight.range==="node"&&this.ctx.highlightManager.updateHighlight(this.id))}onClick(e){if(this.checkSeriesNodeClick(e)){this.update(4);return}this.fireEvent({type:"click",event:e.sourceEvent})}onDoubleClick(e){if(this.checkSeriesNodeDoubleClick(e)){this.update(4);return}this.fireEvent({type:"doubleClick",event:e.sourceEvent})}checkSeriesNodeClick(e){return this.checkSeriesNodeRange(e,(i,s)=>i.fireNodeClickEvent(e.sourceEvent,s))}checkSeriesNodeDoubleClick(e){return this.checkSeriesNodeRange(e,(i,s)=>i.fireNodeDoubleClickEvent(e.sourceEvent,s))}checkSeriesNodeRange(e,i){var s;const r=this.pickSeriesNode({x:e.offsetX,y:e.offsetY},!1),n=r==null?void 0:r.datum,o=n==null?void 0:n.series.properties.nodeClickRange;let a;gi(o)&&(a=o);let l=this.pickSeriesNode({x:e.offsetX,y:e.offsetY},!0);if(l?this.ctx.highlightManager.updatePicked(this.id,l.datum):this.ctx.highlightManager.updatePicked(this.id),n&&o==="nearest")return i(n.series,n),!0;if(o!=="exact"&&(l=this.pickSeriesNode({x:e.offsetX,y:e.offsetY},!1,a)),!l)return!1;const c=a!=null,u=o==="exact"&&l.distance===0;return(c||u)&&(e.pointerHistory===void 0||((s=e.pointerHistory)==null?void 0:s.every(h=>{const p={x:h.offsetX,y:h.offsetY},f=this.pickSeriesNode(p,!1,a);return(f==null?void 0:f.datum)===(l==null?void 0:l.datum)})))?(i(l.series,l.datum),!0):!1}changeHighlightDatum(e){var i,s;const r=new Set,{series:n=void 0,datum:o}=(i=e.currentHighlight)!=null?i:{},{series:a=void 0,datum:l}=(s=e.previousHighlight)!=null?s:{};a&&r.add(a),n&&r.add(n),a!=null&&a.properties.cursor&&l&&this.ctx.cursorManager.updateCursor(a.id),n!=null&&n.properties.cursor&&o&&this.ctx.cursorManager.updateCursor(n.id,n.properties.cursor),this.lastPick=e.currentHighlight,n==null||a==null?this.update(4):this.update(4,{seriesToUpdate:r})}waitForUpdate(e=1e4,i=!1){return Fe(this,null,function*(){const s=performance.now();for(this._pendingFactoryUpdatesCount>0&&(yield this.updateMutex.waitForClearAcquireQueue());this.performUpdateType!==7;){if(performance.now()-s>e){const r=`Chart.waitForUpdate() timeout of ${e} reached - first chart update taking too long.`;if(i)throw new Error(r);Be.warnOnce(r)}yield eQ(50)}yield this.updateMutex.waitForClearAcquireQueue()})}waitForDataProcess(e){return new Promise(i=>{this.dataProcessListeners.add(i),Qn(e)&&setTimeout(()=>{this.dataProcessListeners.has(i)&&(this.dataProcessListeners.delete(i),i())},e)})}getMinRects(){const{width:e,height:i}=this.ctx.scene,s=this.series.map(u=>u.getMinRects(e,i)).filter(sS);if(s.length===0)return;let r=0,n=0,o=0,a=0;for(const{minRect:u,minVisibleRect:d}of s)r=Math.max(r,u.width),n=Math.max(n,u.height),o=Math.max(o,d.width),a=Math.max(a,d.height);const l=new lt(0,0,r,n);let c=l.clone();return o>0&&a>0&&(c=new lt(0,0,o,a)),{minRect:l,minVisibleRect:c}}filterMiniChartSeries(e){return e==null?void 0:e.filter(i=>i.showInMiniChart!==!1)}applyOptions(e){var i,s,r,n,o;const a=this.processedOptions,l=e.diffOptions(a),c=e.userOptions;if(l==null)return;ta("AgChartV2.updateDelta() - applying delta",l);const u=Jt(l,a),d=this.applyModules(u),h=["type","data","series","listeners","theme","legend.listeners","navigator.miniChart.series","navigator.miniChart.label","axes","topology"];l.listeners&&this.registerListeners(this,l.listeners),Kl(this,l,{skip:h});let p=!1,f="no-op";(i=l.series)!=null&&i.length&&(f=this.applySeries(this,l.series,a==null?void 0:a.series),p=!0),f==="replaced"&&this.resetAnimations(),this.applyAxes(this,u,a,f)&&(p=!0),l.data&&(this.data=l.data),(s=l.legend)!=null&&s.listeners&&this.modulesManager.isEnabled("legend")&&Object.assign(this.legend.listeners,l.legend.listeners),l.listeners&&this.updateAllSeriesListeners(),this.chartOptions=e,this.processedOptions=u,this.userOptions=Jt(c,this.userOptions);const m=this.modulesManager.getModule("navigator"),g=this.modulesManager.getModule("zoom");!(m!=null&&m.enabled)&&!(g!=null&&g.enabled)&&this.ctx.zoomManager.updateZoom("chart");const y=m==null?void 0:m.miniChart,v=(o=(n=(r=u.navigator)==null?void 0:r.miniChart)==null?void 0:n.series)!=null?o:u.series;(y==null?void 0:y.enabled)===!0&&v!=null?this.applyMiniChartOptions(y,v,u,a):(y==null?void 0:y.enabled)===!1&&(y.series=[],y.axes=[]),lp(QJ,"chart"),this.ctx.annotationManager.setAnnotationStyles(e.annotationThemes),p||(p=this.shouldForceNodeDataRefresh(l,f));const b=p||d?0:3;this.maybeResetAnimations(f),ta("AgChartV2.applyChartOptions() - update type",Lv[b],{seriesStatus:f,forceNodeDataRefresh:p}),this.update(b,{forceNodeDataRefresh:p,newAnimationBatch:!0})}maybeResetAnimations(e){if(this.mode==="standalone")switch(e){case"series-grouping-change":case"replaced":this.resetAnimations();break}}shouldForceNodeDataRefresh(e,i){const s=!!e.data||i==="data-change"||i==="replaced",r=fD.getKeys(),n=Object.values(r).some(a=>e[a]!=null),o=e.title!=null&&e.subtitle!=null;return s||n||o}applyMiniChartOptions(e,i,s,r){var n,o,a,l,c;const u=(a=(o=(n=r==null?void 0:r.navigator)==null?void 0:n.miniChart)==null?void 0:o.series)!=null?a:r==null?void 0:r.series,d=this.applySeries(e,this.filterMiniChartSeries(i),this.filterMiniChartSeries(u));this.applyAxes(e,s,r,d,["axes[].tick","axes[].thickness","axes[].title","axes[].crosshair","axes[].gridLine","axes[].label"]);const h=e.axes,p=h.find(f=>f.direction==="x");for(const f of h)f.gridLine.enabled=!1,f.label.enabled=f===p,f.tick.enabled=!1,f.interactionEnabled=!1;if(p!=null){const f=(l=s.navigator)==null?void 0:l.miniChart,m=f==null?void 0:f.label,g=(c=f==null?void 0:f.label)==null?void 0:c.interval;p.line.enabled=!1,p.label.set(K_(m,["interval","rotation","minSpacing","autoRotate","autoRotateAngle"])),p.tick.set(K_(g,["enabled","width","size","color","interval","step"]));const y=g==null?void 0:g.step;y!=null&&(p.tick.interval=y)}}applyModules(e){var i;const{type:s}=this.constructor;let r=!1;for(const n of Cu.byType("root","legend")){const a=e[n.optionsKey]!=null&&n.chartTypes.includes(s);a!==this.modulesManager.isEnabled(n)&&(a?(this.modulesManager.addModule(n,l=>new l.instanceConstructor(this.getModuleContext())),n.type==="legend"&&((i=this.modulesManager.getModule(n))==null||i.attachLegend(this.ctx.scene)),this[n.optionsKey]=this.modulesManager.getModule(n)):(this.modulesManager.removeModule(n),delete this[n.optionsKey]),r=!0)}return r}applySeries(e,i,s){var r;if(!i)return"no-change";const n=IQ(e.series,i,s);if(n.status==="no-overlap")return ta(`AgChartV2.applySeries() - creating new series instances, status: ${n.status}`,n),e.series=i.map(u=>this.createSeries(u)),"replaced";ta("AgChartV2.applySeries() - matchResult",n);const o=[];let a=!1,l=!1,c=!1;for(const u of n.changes)switch(l||(l=u.status==="series-grouping"),a||(a=((r=u.diff)==null?void 0:r.data)!=null),c||(c=u.status!=="no-op"),u.status){case"add":const d=this.createSeries(u.opts);o.push(d),ta("AgChartV2.applySeries() - created new series",d);break;case"remove":ta(`AgChartV2.applySeries() - removing series at previous idx ${u.idx}`,u.series);break;case"no-op":o.push(u.series),ta(`AgChartV2.applySeries() - no change to series at previous idx ${u.idx}`,u.series);break;case"series-grouping":case"update":default:const{series:h,diff:p,idx:f}=u;ta(`AgChartV2.applySeries() - applying series diff previous idx ${f}`,p,h),this.applySeriesValues(h,p),h.markNodeDataDirty(),o.push(h)}for(let u=0;u<o.length;u++)o[u]._declarationOrder=u;return ta("AgChartV2.applySeries() - final series instances",o),e.series=o,l?"series-grouping-change":a?"data-change":c?"updated":"no-op"}applyAxes(e,i,s,r,n=[]){if(!("axes"in i)||!i.axes)return!1;n=["axes[].type",...n];const{axes:o}=i;return!(r==="replaced")&&e.axes.length===o.length&&e.axes.every((c,u)=>c.type===o[u].type)&&eh(s)?(e.axes.forEach((c,u)=>{var d,h;const p=(h=(d=s.axes)==null?void 0:d[u])!=null?h:{},f=Ho(p,o[u]);ta(`AgChartV2.applyAxes() - applying axis diff idx ${u}`,f);const m=`axes[${u}]`;Kl(c,f,qe(Se({},eA),{path:m,skip:n}))}),!0):(ta(`AgChartV2.applyAxes() - creating new axes instances; seriesStatus: ${r}`),e.axes=this.createAxis(o,n),!0)}createSeries(e){const i=$n.create(e.type,this.getModuleContext());return this.applySeriesOptionModules(i,e),this.applySeriesValues(i,e),i}applySeriesOptionModules(e,i){const s=e.createModuleContext(),r=e.getModuleMap();for(const n of Cu.byType("series-option"))n.optionsKey in i&&n.seriesTypes.includes(e.type)&&r.addModule(n,o=>new o.instanceConstructor(s))}applySeriesValues(e,i){const s=e.getModuleMap(),r=i,{type:n,data:o,listeners:a,seriesGrouping:l,showInMiniChart:c}=r,u=xs(r,["type","data","listeners","seriesGrouping","showInMiniChart"]);for(const d of Zg)if(d.type==="series-option"&&d.optionsKey in u){const h=s.getModule(d.optionsKey),p=u[d.optionsKey];delete u[d.optionsKey],h.properties.set(p)}e.properties.set(u),"data"in i&&e.setOptionsData(o),a&&this.registerListeners(e,a),"seriesGrouping"in i&&(l==null?e.seriesGrouping=void 0:e.seriesGrouping=Se(Se({},e.seriesGrouping),l))}createAxis(e,i){const s=new DQ,r=this.getModuleContext();for(let n=0;n<e.length;n++){const o=e[n],a=Lu.create(o.type,r);this.applyAxisModules(a,o),Kl(a,o,qe(Se({},eA),{path:`axes[${n}]`,skip:i})),s.push(a,o)}return s.guessInvalidPositions()}applyAxisModules(e,i){const s=e.createModuleContext(),r=e.getModuleMap();for(const n of Cu.byType("axis-option")){const o=i[n.optionsKey]!=null;o!==r.isEnabled(n)&&(o?(r.addModule(n,a=>new a.instanceConstructor(s)),e[n.optionsKey]=r.getModule(n)):(r.removeModule(n),delete e[n.optionsKey]))}}registerListeners(e,i){e.clearEventListeners();for(const[s,r]of Object.entries(i))ap(r)&&e.addEventListener(s,r)}};vr.chartsInstances=new WeakMap;q([Hn({newValue(t){this.destroyed||(t.setAttribute("data-ag-charts",""),t.appendChild(this.element),vr.chartsInstances.set(t,this))},oldValue(t){t.removeAttribute("data-ag-charts"),t.removeChild(this.element),vr.chartsInstances.delete(t)}})],vr.prototype,"container",2);q([Hn({newValue(t){this.resize(t,void 0,"width option")}})],vr.prototype,"width",2);q([Hn({newValue(t){this.resize(void 0,t,"height option")}})],vr.prototype,"height",2);q([Hn({newValue(t){this.onAutoSizeChange(t)}}),te(Et)],vr.prototype,"autoSize",2);q([te(rt)],vr.prototype,"padding",2);q([te(rt)],vr.prototype,"seriesArea",2);q([te(rt)],vr.prototype,"title",2);q([te(rt)],vr.prototype,"subtitle",2);q([te(rt)],vr.prototype,"footnote",2);q([te(rt)],vr.prototype,"keyboard",2);q([te(ls(["standalone","integrated"],"a chart mode"))],vr.prototype,"mode",2);q([Hn({changeValue(t,e){this.onAxisChange(t,e)}})],vr.prototype,"axes",2);q([Hn({changeValue(t,e){this.onSeriesChange(t,e)}})],vr.prototype,"series",2);var e0=vr;function KQ(t,e){const i=-e/t;return t!==0&&i>=0&&i<=1?[i]:[]}function YQ(t,e,i){if(t===0)return KQ(e,i);const s=e*e-4*t*i,r=[];if(s===0){const n=-e/(2*t);n>=0&&n<=1&&r.push(n)}else if(s>0){const n=Math.sqrt(s),o=(-e-n)/(2*t),a=(-e+n)/(2*t);o>=0&&o<=1&&r.push(o),a>=0&&a<=1&&r.push(a)}return r}function qQ(t,e,i,s){if(t===0)return YQ(e,i,s);const r=e/t,n=i/t,o=s/t,a=(3*n-r*r)/9,l=(9*r*n-27*o-2*r*r*r)/54,c=a*a*a+l*l,u=1/3,d=[];if(c>=0){const h=Math.sqrt(c),p=Math.sign(l+h)*Math.pow(Math.abs(l+h),u),f=Math.sign(l-h)*Math.pow(Math.abs(l-h),u),m=Math.abs(Math.sqrt(3)*(p-f)/2),g=-u*r+(p+f);if(g>=0&&g<=1&&d.push(g),m===0){const y=-u*r-(p+f)/2;y>=0&&y<=1&&d.push(y)}}else{const h=Math.acos(l/Math.sqrt(-a*a*a)),p=u*r,f=2*Math.sqrt(-a),m=f*Math.cos(u*h)-p,g=f*Math.cos(u*(h+2*Math.PI))-p,y=f*Math.cos(u*(h+4*Math.PI))-p;m>=0&&m<=1&&d.push(m),g>=0&&g<=1&&d.push(g),y>=0&&y<=1&&d.push(y)}return d}function bf(t,e,i,s,r,n,o,a){const l=(i-t)*(a-n)-(s-e)*(o-r);if(l===0)return 0;const c=((o-r)*(e-n)-(t-r)*(a-n))/l,u=((i-t)*(e-n)-(s-e)*(t-r))/l;return c>=0&&c<=1&&u>=0&&u<=1?1:0}function XQ(t,e,i,s,r,n,o,a,l,c,u,d){let h=0;const p=c-d,f=u-l,m=l*(d-c)-c*(u-l),g=sL(t,i,r,o),y=sL(e,s,n,a),v=p*g[0]+f*y[0],C=p*g[1]+f*y[1],b=p*g[2]+f*y[2],T=p*g[3]+f*y[3]+m,A=qQ(v,C,b,T);for(const I of A){const D=I*I,F=I*D,B=g[0]*F+g[1]*D+g[2]*I+g[3],U=y[0]*F+y[1]*D+y[2]*I+y[3];let H;l===u?H=(U-c)/(d-c):H=(B-l)/(u-l),H>=0&&H<=1&&h++}return h}function sL(t,e,i,s){return[-t+3*e-3*i+s,3*t-6*e+3*i,-3*t+3*e,t]}function J8(t,e,i,s,r,n,o,a,l,c){if(isNaN(t)||isNaN(e))return 0;n&&([r,s]=[s,r]);const u=(c-a)/(l-o),d=a-u*o,h=Math.pow(u,2)+1,p=2*(u*(d-e)-t),f=Math.pow(t,2)+Math.pow(d-e,2)-Math.pow(i,2),m=Math.pow(p,2)-4*h*f;if(m<0)return 0;const g=(-p+Math.sqrt(m))/2/h,y=(-p-Math.sqrt(m))/2/h;let v=0;return[g,y].forEach(C=>{if(!(C>=Math.min(o,l)&&C<=Math.max(o,l)))return;const T=u*C+d,A=C-t,I=T-e,D=Math.atan2(I,A);$C(D,s,r)&&v++}),v}var Sg=class{constructor(){this.path2d=new Path2D,this.previousCommands=[],this.previousParams=[],this.previousClosedPath=!1,this.commands=[],this.params=[],this.openedPath=!1,this.closedPath=!1}isDirty(){return this.closedPath!==this.previousClosedPath||this.previousCommands.length!==this.commands.length||this.previousParams.length!==this.params.length||this.previousCommands.toString()!==this.commands.toString()||this.previousParams.toString()!==this.params.toString()}getPath2D(){return this.path2d}moveTo(t,e){this.openedPath=!0,this.path2d.moveTo(t,e),this.commands.push(0),this.params.push(t,e)}lineTo(t,e){this.openedPath?(this.path2d.lineTo(t,e),this.commands.push(1),this.params.push(t,e)):this.moveTo(t,e)}rect(t,e,i,s){this.moveTo(t,e),this.lineTo(t+i,e),this.lineTo(t+i,e+s),this.lineTo(t,e+s),this.closePath()}roundRect(t,e,i,s,r){r=Math.min(r,i/2,s/2),this.moveTo(t,e+r),this.arc(t+r,e+r,r,Math.PI,1.5*Math.PI),this.lineTo(t+r,e),this.lineTo(t+i-r,e),this.arc(t+i-r,e+r,r,1.5*Math.PI,2*Math.PI),this.lineTo(t+i,e+r),this.lineTo(t+i,e+s-r),this.arc(t+i-r,e+s-r,r,0,Math.PI/2),this.lineTo(t+i-r,e+s),this.lineTo(t+r,e+s),this.arc(t+ +r,e+s-r,r,Math.PI/2,Math.PI),this.lineTo(t,e+s-r),this.closePath()}arc(t,e,i,s,r,n){this.openedPath=!0,this.path2d.arc(t,e,i,s,r,n),this.commands.push(2),this.params.push(t,e,i,s,r,n?1:0)}cubicCurveTo(t,e,i,s,r,n){this.openedPath||this.moveTo(t,e),this.path2d.bezierCurveTo(t,e,i,s,r,n),this.commands.push(3),this.params.push(t,e,i,s,r,n)}closePath(){this.openedPath&&(this.path2d.closePath(),this.commands.push(4),this.openedPath=!1,this.closedPath=!0)}clear(t){t&&(this.previousCommands=this.commands,this.previousParams=this.params,this.previousClosedPath=this.closedPath),this.path2d=new Path2D,this.openedPath=!1,this.closedPath=!1,this.commands=[],this.params=[]}isPointInPath(t,e){const i=this.commands,s=this.params,r=i.length,n=-1e4,o=-1e4;let a=NaN,l=NaN,c=0,u=0,d=0;for(let h=0,p=0;h<r;h++)switch(i[h]){case 0:d+=bf(a,l,c,u,n,o,t,e),c=s[p++],a=c,u=s[p++],l=u;break;case 1:d+=bf(c,u,s[p++],s[p++],n,o,t,e),c=s[p-2],u=s[p-1];break;case 3:d+=XQ(c,u,s[p++],s[p++],s[p++],s[p++],s[p++],s[p++],n,o,t,e),c=s[p-2],u=s[p-1];break;case 2:const f=s[p++],m=s[p++],g=s[p++],y=s[p++],v=s[p++],C=!!s[p++];if(d+=J8(f,m,g,y,v,C,n,o,t,e),!isNaN(a)){const b=f+Math.cos(y)*g,T=m+Math.sin(y)*g;d+=bf(c,u,b,T,n,o,t,e)}c=f+Math.cos(v)*g,u=m+Math.sin(v)*g;break;case 4:d+=bf(a,l,c,u,n,o,t,e);break}return d%2===1}distanceSquared(t,e){let i=1/0;const s=this.commands,r=this.params,n=s.length;let o=NaN,a=NaN,l=0,c=0;for(let u=0,d=0;u<n;u++)switch(s[u]){case 0:l=o=r[d++],c=a=r[d++];break;case 1:{const h=r[d++],p=r[d++];i=Qb(t,e,l,c,h,p,i);break}case 3:Be.error("Command.Curve distanceSquare not implemented");break;case 2:{const h=r[d++],p=r[d++],f=r[d++],m=r[d++],g=r[d++],y=h+Math.cos(m)*f,v=p+Math.sin(m)*f,C=!!r[d++];i=Qb(t,e,l,c,y,v,i),i=xJ(t,e,h,p,f,m,g,C,i),l=h+Math.cos(g)*f,c=p+Math.sin(g)*f;break}case 4:i=Qb(t,e,l,c,o,a,i);break}return i}getPoints(){const{commands:t,params:e}=this,i=[];let s=0;for(let r=0;r<t.length;r++)switch(t[r]){case 0:case 1:i.push({x:e[s++],y:e[s++]});break;case 3:s+=4,i.push({x:e[s++],y:e[s++]});break;case 2:i.push({x:e[s++],y:e[s++]}),s+=4;break}return i}};function Lt(t){const{redraw:e=3,changeCb:i,convertor:s}=t??{};return Qe({redraw:e,type:"path",convertor:s,changeCb:i})}var yo=class extends jo{constructor(){super(...arguments),this.path=new Sg,this._clipX=NaN,this._clipY=NaN,this._dirtyPath=!0}set clipX(t){this._clipX=t,this.dirtyPath=!0}set clipY(t){this._clipY=t,this.dirtyPath=!0}set dirtyPath(t){this._dirtyPath!==t&&(this._dirtyPath=t,t&&this.markDirty(this,3))}get dirtyPath(){return this._dirtyPath}checkPathDirty(){var t,e,i,s;this._dirtyPath||(this.dirtyPath=this.path.isDirty()||((e=(t=this.fillShadow)==null?void 0:t.isDirty())!=null?e:!1)||((s=(i=this._clipPath)==null?void 0:i.isDirty())!=null?s:!1))}isPointInPath(t,e){const i=this.transformPoint(t,e);return this.path.closedPath&&this.path.isPointInPath(i.x,i.y)}distanceSquared(t,e){const i=this.transformPoint(t,e);return this.path.distanceSquared(i.x,i.y)}isDirtyPath(){return!1}updatePath(){}render(t){var e,i,s,r,n;const{ctx:o,forceRender:a,stats:l}=t;if(this.dirty===0&&!a){l&&(l.nodesSkipped+=this.nodeCount.count);return}if(this.computeTransformMatrix(),this.matrix.toContext(o),(this.dirtyPath||this.isDirtyPath())&&(this.updatePath(),this.dirtyPath=!1),!isNaN(this._clipX)&&!isNaN(this._clipY)&&this.clipMode!=null){o.save();const c=this.strokeWidth/2;if((e=this._clipPath)!=null||(this._clipPath=new Sg),this._clipPath.clear(),this._clipPath.rect(-c,-c,this._clipX+c,this._clipY+c+c),this.clipMode==="normal"&&o.clip((i=this._clipPath)==null?void 0:i.getPath2D()),this._clipX>0&&this._clipY>0&&this.drawPath(o),this.clipMode==="punch-out"){o.clip((s=this._clipPath)==null?void 0:s.getPath2D());const{x:u=-1e4,y:d=-1e4,width:h=2e4,height:p=2e4}=(r=this.computeBBox())!=null?r:{};o.clearRect(u,d,h,p)}o.restore()}else this.drawPath(o);(n=this.fillShadow)==null||n.markClean(),super.render(t)}drawPath(t){this.fillStroke(t,this.path.getPath2D())}};yo.className="Path";q([Lt()],yo.prototype,"clipMode",2);q([Lt()],yo.prototype,"clipX",1);q([Lt()],yo.prototype,"clipY",1);var ZQ=class{constructor(t,e,i){this.root=new eee(t,e,i)}clear(t){this.root.clear(t)}addValue(t,e){const i={hitTester:t,value:e,distanceSquared:(s,r)=>t.distanceSquared(s,r)};this.root.addElem(i)}find(t,e){const i={best:{nearest:void 0,distanceSquared:1/0}};return this.root.find(t,e,i),i.best}},JQ=class{constructor(t,e,i,s){this.nw=t,this.ne=e,this.sw=i,this.se=s}addElem(t){this.nw.addElem(t),this.ne.addElem(t),this.sw.addElem(t),this.se.addElem(t)}find(t,e,i){this.nw.find(t,e,i),this.ne.find(t,e,i),this.sw.find(t,e,i),this.se.find(t,e,i)}},QQ=class{constructor(t,e,i){this.capacity=t,this.maxdepth=e,this.boundary=i??lt.NaN,this.elems=[],this.subdivisions=void 0}clear(t){this.elems.length=0,this.boundary=t,this.subdivisions=void 0}addElem(t){this.addCondition(t)&&(this.subdivisions===void 0?this.maxdepth===0||this.elems.length<this.capacity?this.elems.push(t):this.subdivide(t):this.subdivisions.addElem(t))}find(t,e,i){this.findCondition(t,e,i)&&(this.subdivisions===void 0?this.findAction(t,e,i):this.subdivisions.find(t,e,i))}subdivide(t){this.subdivisions=this.makeSubdivisions();for(const e of this.elems)this.subdivisions.addElem(e);this.subdivisions.addElem(t),this.elems.length=0}makeSubdivisions(){const{x:t,y:e,width:i,height:s}=this.boundary,{capacity:r}=this,n=this.maxdepth-1,o=i/2,a=s/2,l=new lt(t,e,o,a),c=new lt(t+o,e,o,a),u=new lt(t,e+a,o,a),d=new lt(t+o,e+a,o,a);return new JQ(this.child(r,n,l),this.child(r,n,c),this.child(r,n,u),this.child(r,n,d))}},eee=class Q8 extends QQ{addCondition(e){const{x:i,y:s}=e.hitTester.midPoint;return this.boundary.containsPoint(i,s)}findCondition(e,i,s){const{best:r}=s;return r.distanceSquared!==0&&this.boundary.distanceSquared(e,i)<r.distanceSquared}findAction(e,i,s){const r=Wx(e,i,this.elems,s.best.distanceSquared);r.nearest!==void 0&&r.distanceSquared<s.best.distanceSquared&&(s.best=r)}child(e,i,s){return new Q8(e,i,s)}},nr=class extends yo{constructor(){super(...arguments),this.x=0,this.y=0,this.size=12}computeBBox(){const{x:t,y:e,size:i}=this,{center:s}=this.constructor;return new lt(t-i*s.x,e-i*s.y,i,i)}applyPath(t,e){const{path:i}=this;let{x:s,y:r}=this;this.repeat!=null&&(s=0,r=0),i.clear();for(const{x:n,y:o,t:a}of e)s+=n*t,r+=o*t,a==="move"?i.moveTo(s,r):i.lineTo(s,r);i.closePath()}executeFill(t,e){if(!e)return;if(this.repeat==null)return super.executeFill(t,e);t.save();let i=this.translationX,s=this.translationY;for(const r of this.repeat)t.translate(r.x-i,r.y-s),t.fill(e),i=r.x,s=r.y;t.restore()}executeStroke(t,e){if(!e)return;if(this.repeat==null)return super.executeStroke(t,e);t.save();let i=this.translationX,s=this.translationY;for(const r of this.repeat)t.translate(r.x-i,r.y-s),t.stroke(e),i=r.x,s=r.y;t.restore()}};nr.center={x:.5,y:.5};q([Lt()],nr.prototype,"x",2);q([Lt()],nr.prototype,"y",2);q([Lt({convertor:Math.abs})],nr.prototype,"size",2);q([Lt()],nr.prototype,"repeat",2);var rl=class extends nr{updatePath(){const{x:t,y:e,path:i,size:s}=this,r=s/2;i.clear(),i.arc(t,e,r,0,Math.PI*2),i.closePath()}};rl.className="Circle";var tP=class eB extends nr{updatePath(){const e=this.size/4.2;super.applyPath(e,eB.moves)}};tP.className="Cross";tP.moves=[{x:-1,y:0,t:"move"},{x:-1,y:-1},{x:1,y:-1},{x:1,y:1},{x:1,y:-1},{x:1,y:1},{x:-1,y:1},{x:1,y:1},{x:-1,y:1},{x:-1,y:-1},{x:-1,y:1},{x:-1,y:-1}];var tee=tP,iP=class tB extends nr{updatePath(){const e=this.size/2;super.applyPath(e,tB.moves)}};iP.className="Diamond";iP.moves=[{x:0,y:-1,t:"move"},{x:1,y:1},{x:-1,y:1},{x:-1,y:-1},{x:1,y:-1}];var iB=iP,sB=class extends nr{rad(t){return t/180*Math.PI}updatePath(){const{x:t,path:e,size:i,rad:s}=this,r=i/4,n=this.y+r/2;e.clear(),e.arc(t-r,n-r,r,s(130),s(330)),e.arc(t+r,n-r,r,s(220),s(50)),e.lineTo(t,n+r),e.closePath()}};sB.className="Heart";var sP=class extends nr{updatePath(){const{path:t,x:e,y:i}=this,s=this.size,r=.5,n=1;t.clear(),t.moveTo(e+(.15625-r)*s,i+(.34375-n)*s),t.cubicCurveTo(e+(.15625-r)*s,i+(.151491-n)*s,e+(.307741-r)*s,i+(0-n)*s,e+(.5-r)*s,i+(0-n)*s),t.cubicCurveTo(e+(.692259-r)*s,i+(0-n)*s,e+(.84375-r)*s,i+(.151491-n)*s,e+(.84375-r)*s,i+(.34375-n)*s),t.cubicCurveTo(e+(.84375-r)*s,i+(.493824-n)*s,e+(.784625-r)*s,i+(.600181-n)*s,e+(.716461-r)*s,i+(.695393-n)*s),t.cubicCurveTo(e+(.699009-r)*s,i+(.719769-n)*s,e+(.681271-r)*s,i+(.743104-n)*s,e+(.663785-r)*s,i+(.766105-n)*s),t.cubicCurveTo(e+(.611893-r)*s,i+(.834367-n)*s,e+(.562228-r)*s,i+(.899699-n)*s,e+(.528896-r)*s,i+(.980648-n)*s),t.cubicCurveTo(e+(.524075-r)*s,i+(.992358-n)*s,e+(.512663-r)*s,i+(1-n)*s,e+(.5-r)*s,i+(1-n)*s),t.cubicCurveTo(e+(.487337-r)*s,i+(1-n)*s,e+(.475925-r)*s,i+(.992358-n)*s,e+(.471104-r)*s,i+(.980648-n)*s),t.cubicCurveTo(e+(.487337-r)*s,i+(1-n)*s,e+(.475925-r)*s,i+(.992358-n)*s,e+(.471104-r)*s,i+(.980648-n)*s),t.cubicCurveTo(e+(.437772-r)*s,i+(.899699-n)*s,e+(.388107-r)*s,i+(.834367-n)*s,e+(.336215-r)*s,i+(.766105-n)*s),t.cubicCurveTo(e+(.318729-r)*s,i+(.743104-n)*s,e+(.300991-r)*s,i+(.719769-n)*s,e+(.283539-r)*s,i+(.695393-n)*s),t.cubicCurveTo(e+(.215375-r)*s,i+(.600181-n)*s,e+(.15625-r)*s,i+(.493824-n)*s,e+(.15625-r)*s,i+(.34375-n)*s),t.closePath()}};sP.className="MapPin";sP.center={x:.5,y:1};var rP=class rB extends nr{updatePath(){const e=this.size/3;super.applyPath(e,rB.moves)}};rP.className="Plus";rP.moves=[{x:-.5,y:-.5,t:"move"},{x:0,y:-1},{x:1,y:0},{x:0,y:1},{x:1,y:0},{x:0,y:1},{x:-1,y:0},{x:0,y:1},{x:-1,y:0},{x:0,y:-1},{x:-1,y:0},{x:0,y:-1}];var iee=rP,xg=class extends nr{updatePath(){const{path:t,x:e,y:i}=this,s=this.size/2;t.clear(),t.moveTo(this.align(e-s),this.align(i-s)),t.lineTo(this.align(e+s),this.align(i-s)),t.lineTo(this.align(e+s),this.align(i+s)),t.lineTo(this.align(e-s),this.align(i+s)),t.closePath()}};xg.className="Square";var nB=class extends nr{updatePath(){const{x:t,y:e,path:i,size:s}=this,r=5,n=s/2,o=Math.PI/2;i.clear();for(let a=0;a<r*2;a++){const l=a%2===0?s:n,c=a*Math.PI/r-o,u=t+Math.cos(c)*l,d=e+Math.sin(c)*l;i.lineTo(u,d)}i.closePath()}};nB.className="Star";var nP=class oB extends nr{updatePath(){const e=this.size*1.1;super.applyPath(e,oB.moves)}};nP.className="Triangle";nP.moves=[{x:0,y:-.48,t:"move"},{x:.5,y:.87},{x:-1,y:0}];var Uf=nP,aB={circle:rl,cross:tee,diamond:iB,heart:sB,pin:sP,plus:iee,square:xg,star:nB,triangle:Uf},see=Object.keys(aB);function lB(t){return typeof t=="string"&&see.includes(t)}function fl(t=xg){return lB(t)?aB[t]:typeof t=="function"?t:xg}var oP=class extends um{constructor(){super(...arguments),this.showFocusBox=!0}getScaleInformation({xScale:t,yScale:e}){const i=Ei.is(t),s=Ei.is(e);return{isContinuousX:i,isContinuousY:s,xScaleType:t==null?void 0:t.type,yScaleType:e==null?void 0:e.type}}getModulePropertyDefinitions(){var t,e;const i=(t=this.axes.x)==null?void 0:t.scale,s=(e=this.axes.y)==null?void 0:e.scale;return this.moduleMap.mapModules(r=>r.getPropertyDefinitions(this.getScaleInformation({xScale:i,yScale:s}))).flat()}requestDataModel(t,e,i){return Fe(this,null,function*(){i.props.push(...this.getModulePropertyDefinitions());const{dataModel:s,processedData:r}=yield t.request(this.id,e??[],i);return this.dataModel=s,this.processedData=r,this.dispatch("data-processed",{dataModel:s,processedData:r}),{dataModel:s,processedData:r}})}isProcessedDataAnimatable(){var t,e;const i=(e=(t=this.processedData)==null?void 0:t.reduced)==null?void 0:e.animationValidation;if(!i)return!0;const{orderedKeys:s,uniqueKeys:r}=i;return s&&r}checkProcessedDataAnimatable(){this.isProcessedDataAnimatable()||this.ctx.animationManager.skipCurrentBatch()}pickFocus(t){return this.doPickFocus(t,this)}doPickFocus(t,e){const i=this.getNodeData();if(i===void 0||i.length===0)return;const{datumIndexDelta:s,seriesRect:r}=t,n=this.computeFocusDatumIndex(t,i,e.seriesItemEnabled);if(n===void 0)return;const{showFocusBox:o}=this,a=i[n],l=this.computeFocusBounds({datumIndex:n,datumIndexDelta:s,seriesRect:r});if(l!==void 0)return{bbox:l,showFocusBox:o,datum:a,datumIndex:n}}computeFocusDatumIndex(t,e,i){i&&e.length!==i.length&&Be.error(`invalid state: nodeData.length (${e.length} !== seriesItemEnabled.length (${i==null?void 0:i.length})`);const s=l=>{const c=e[l];return(c.missing===void 0||c.missing===!1)&&(i===void 0||i[l])},r=l=>{for(;l>=0&&!s(l);)l--;return l===-1?void 0:l},n=l=>{for(;l<e.length&&!s(l);)l++;return l===e.length?void 0:l};let o;const a=Zt(0,t.datumIndex,e.length-1);return t.datumIndexDelta<0?o=r(a):t.datumIndexDelta>0?o=n(a):(o??(o=n(a)),o??(o=r(a))),o===void 0?t.datumIndexDelta===0?void 0:t.datumIndex-t.datumIndexDelta:o}},Nc=class extends ti{constructor(){super(...arguments),this.fill="rgba(255,255,255, 0.33)",this.stroke="rgba(0, 0, 0, 0.4)",this.strokeWidth=2}};q([te(mi,{optional:!0})],Nc.prototype,"fill",2);q([te(Si,{optional:!0})],Nc.prototype,"fillOpacity",2);q([te(mi,{optional:!0})],Nc.prototype,"stroke",2);q([te(Ge,{optional:!0})],Nc.prototype,"strokeWidth",2);q([te(Si,{optional:!0})],Nc.prototype,"strokeOpacity",2);q([te(Fc,{optional:!0})],Nc.prototype,"lineDash",2);q([te(Ge,{optional:!0})],Nc.prototype,"lineDashOffset",2);var oE=class extends ti{};q([te(Ge,{optional:!0})],oE.prototype,"strokeWidth",2);q([te(Si,{optional:!0})],oE.prototype,"dimOpacity",2);q([te(Et,{optional:!0})],oE.prototype,"enabled",2);var cB=class extends ti{constructor(){super(...arguments),this.color="black"}};q([te(mi,{optional:!0})],cB.prototype,"color",2);var t0=class extends ti{constructor(){super(...arguments),this.item=new Nc,this.series=new oE,this.text=new cB}};q([te(rt)],t0.prototype,"item",2);q([te(rt)],t0.prototype,"series",2);q([te(rt)],t0.prototype,"text",2);var Pa=class extends ti{constructor(){super(...arguments),this.visible=!0,this.showInLegend=!0,this.cursor="default",this.nodeClickRange="exact",this.highlightStyle=new t0}};q([te($e,{optional:!0})],Pa.prototype,"id",2);q([te(Et)],Pa.prototype,"visible",2);q([te(Et)],Pa.prototype,"showInLegend",2);q([te($e)],Pa.prototype,"cursor",2);q([te(DD)],Pa.prototype,"nodeClickRange",2);q([te(rt)],Pa.prototype,"highlightStyle",2);var pp={x:["xKey"],y:["yKey"]},fp={x:["xName"],y:["yName"]},aP=class extends QC{constructor(t,e,i,s){super(t,e,i,s),this.xKey=s.properties.xKey,this.yKey=s.properties.yKey}},md=class extends Pa{};q([te($e,{optional:!0})],md.prototype,"legendItemName",2);var vd=class extends oP{constructor(t){var e=t,{pathsPerSeries:i=1,hasMarkers:s=!1,hasHighlightedLabels:r=!1,pathsZIndexSubOrderOffset:n=[],datumSelectionGarbageCollection:o=!0,markerSelectionGarbageCollection:a=!0,animationAlwaysUpdateSelections:l=!1,animationResetFns:c,directionKeys:u,directionNames:d}=e,h=xs(e,["pathsPerSeries","hasMarkers","hasHighlightedLabels","pathsZIndexSubOrderOffset","datumSelectionGarbageCollection","markerSelectionGarbageCollection","animationAlwaysUpdateSelections","animationResetFns","directionKeys","directionNames"]);if(super(Se({directionKeys:u,directionNames:d,canHaveAxes:!0},h)),this.NodeEvent=aP,this.dataNodeGroup=this.contentGroup.appendChild(new ft({name:`${this.id}-series-dataNodes`,zIndex:4,zIndexSubOrder:this.getGroupZIndexSubOrder("data")})),this.markerGroup=this.contentGroup.appendChild(new ft({name:`${this.id}-series-markers`,zIndex:4,zIndexSubOrder:this.getGroupZIndexSubOrder("marker")})),this.labelGroup=this.contentGroup.appendChild(new ft({name:`${this.id}-series-labels`,zIndex:8,zIndexSubOrder:this.getGroupZIndexSubOrder("labels")})),this.labelSelection=Qi.select(this.labelGroup,ri),this.highlightSelection=Qi.select(this.highlightNode,()=>this.opts.hasMarkers?this.markerFactory():this.nodeFactory()),this.highlightLabelSelection=Qi.select(this.highlightLabel,ri),this.annotationSelections=new Set,this.minRectsCache={dirtyNodeData:!0},this.debug=is.create(),!u||!d)throw new Error(`Unable to initialise series type ${this.type}`);this.opts={pathsPerSeries:i,hasMarkers:s,hasHighlightedLabels:r,pathsZIndexSubOrderOffset:n,directionKeys:u,directionNames:d,animationResetFns:c,animationAlwaysUpdateSelections:l,datumSelectionGarbageCollection:o,markerSelectionGarbageCollection:a},this.paths=[];for(let p=0;p<i;p++)this.paths[p]=new yo,this.paths[p].zIndex=4,this.paths[p].zIndexSubOrder=this.getGroupZIndexSubOrder("paths",p),this.contentGroup.appendChild(this.paths[p]);this.datumSelection=Qi.select(this.dataNodeGroup,()=>this.nodeFactory(),o),this.markerSelection=Qi.select(this.markerGroup,()=>this.markerFactory(),a),this.animationState=new XC("empty",{empty:{update:{target:"ready",action:p=>this.animateEmptyUpdateReady(p)},reset:"empty",skip:"ready",disable:"disabled"},ready:{updateData:"waiting",clear:"clearing",highlight:p=>this.animateReadyHighlight(p),highlightMarkers:p=>this.animateReadyHighlightMarkers(p),resize:p=>this.animateReadyResize(p),reset:"empty",skip:"ready",disable:"disabled"},waiting:{update:{target:"ready",action:p=>this.animateWaitingUpdateReady(p)},reset:"empty",skip:"ready",disable:"disabled"},disabled:{update:p=>this.resetAllAnimation(p),reset:"empty"},clearing:{update:{target:"empty",action:p=>this.animateClearingUpdateEmpty(p)},reset:"empty",skip:"ready"}},()=>this.checkProcessedDataAnimatable())}get contextNodeData(){return this._contextNodeData}getNodeData(){var t;return(t=this.contextNodeData)==null?void 0:t.nodeData}resetAnimation(t){t==="initial"?this.animationState.transition("reset"):t==="ready"?this.animationState.transition("skip"):t==="disabled"&&this.animationState.transition("disable")}addChartEventListeners(){this.destroyFns.push(this.ctx.chartEventManager.addListener("legend-item-click",t=>this.onLegendItemClick(t)),this.ctx.chartEventManager.addListener("legend-item-double-click",t=>this.onLegendItemDoubleClick(t)))}destroy(){super.destroy(),this._contextNodeData=void 0}update(t){return Fe(this,arguments,function*({seriesRect:e}){var i,s;const{visible:r,_contextNodeData:n}=this,a=((s=(i=this.ctx.highlightManager)==null?void 0:i.getActiveHighlight())==null?void 0:s.series)===this,l=this.checkResize(e),c=yield this.updateHighlightSelection(a);yield this.updateSelections(r),yield this.updateNodes(c,a,r);const u=this.getAnimationData(e,n);u&&(l&&this.animationState.transition("resize",u),this.animationState.transition("update",u))})}updateSelections(t){return Fe(this,null,function*(){var e,i;const s=!this.opts.animationAlwaysUpdateSelections&&this.ctx.animationManager.isSkipped();if(!(!t&&s)&&!(!this.nodeDataRefresh&&!this.isPathOrSelectionDirty())){if(this.nodeDataRefresh){this.nodeDataRefresh=!1,this.debug("CartesianSeries.updateSelections() - calling createNodeData() for",this.id),this.markQuadtreeDirty(),this._contextNodeData=yield this.createNodeData();const r=this.isProcessedDataAnimatable();this._contextNodeData&&((i=(e=this._contextNodeData).animationValid)!=null||(e.animationValid=r)),this.minRectsCache.dirtyNodeData=!0;const{dataModel:n,processedData:o}=this;n!==void 0&&o!==void 0&&this.dispatch("data-update",{dataModel:n,processedData:o})}yield this.updateSeriesSelections()}})}updateSeriesSelections(t){return Fe(this,null,function*(){const{datumSelection:e,labelSelection:i,markerSelection:s,paths:r}=this,n=this._contextNodeData;if(!n)return;const{nodeData:o,labelData:a,itemId:l}=n;yield this.updatePaths({seriesHighlighted:t,itemId:l,contextData:n,paths:r}),this.datumSelection=yield this.updateDatumSelection({nodeData:o,datumSelection:e}),this.labelSelection=yield this.updateLabelSelection({labelData:a,labelSelection:i}),this.opts.hasMarkers&&(this.markerSelection=yield this.updateMarkerSelection({nodeData:o,markerSelection:s}))})}markerFactory(){const t=fl();return new t}getGroupZIndexSubOrder(t,e=0){var i;const s=super.getGroupZIndexSubOrder(t,e);if(t==="paths"){const[r]=s,n=(i=this.opts.pathsZIndexSubOrderOffset[e])!=null?i:0;s[0]=ap(r)?()=>Number(r())+n:Number(r)+n}return s}updateNodes(t,e,i){return Fe(this,null,function*(){var s;const{highlightSelection:r,highlightLabelSelection:n,opts:{hasMarkers:o,hasHighlightedLabels:a}}=this,l=!this.ctx.animationManager.isSkipped(),c=this.visible&&this._contextNodeData!=null&&i;this.rootGroup.visible=l||c,this.contentGroup.visible=l||c,this.highlightGroup.visible=(l||c)&&e;const u=this.getOpacity();o?(yield this.updateMarkerNodes({markerSelection:r,isHighlight:!0}),this.animationState.transition("highlightMarkers",r)):(yield this.updateDatumNodes({datumSelection:r,isHighlight:!0}),this.animationState.transition("highlight",r)),a&&(yield this.updateLabelNodes({labelSelection:n}));const{dataNodeGroup:d,markerGroup:h,datumSelection:p,labelSelection:f,markerSelection:m,paths:g,labelGroup:y}=this,{itemId:v}=(s=this.contextNodeData)!=null?s:{};d.opacity=u,d.visible=l||c,y.visible=c,o&&(h.opacity=u,h.zIndex=d.zIndex>=4?d.zIndex:d.zIndex+1,h.visible=c),y&&(y.opacity=u),yield this.updatePathNodes({seriesHighlighted:e,itemId:v,paths:g,opacity:u,visible:c,animationEnabled:l}),d.visible&&(yield this.updateDatumNodes({datumSelection:p,highlightedItems:t,isHighlight:!1}),yield this.updateLabelNodes({labelSelection:f}),o&&(yield this.updateMarkerNodes({markerSelection:m,isHighlight:!1})))})}getHighlightLabelData(t,e){const i=t.filter(s=>s.datum===e.datum&&s.itemId===e.itemId);return i.length===0?void 0:i}getHighlightData(t,e){return e?[e]:void 0}updateHighlightSelection(t){return Fe(this,null,function*(){var e;const{highlightSelection:i,highlightLabelSelection:s,_contextNodeData:r}=this;if(!r)return;const n=(e=this.ctx.highlightManager)==null?void 0:e.getActiveHighlight(),o=t&&(n!=null&&n.datum)?n:void 0;let a,l;if(o!=null){const c=this.isLabelEnabled(),{labelData:u,nodeData:d}=r;l=this.getHighlightData(d,o),a=c?this.getHighlightLabelData(u,o):void 0}return this.highlightSelection=yield this.updateHighlightSelectionItem({items:l,highlightSelection:i}),this.highlightLabelSelection=yield this.updateHighlightSelectionLabel({items:a,highlightLabelSelection:s}),l})}markQuadtreeDirty(){this.quadtree=void 0}*datumNodesIter(){for(const{node:t}of this.datumSelection)t.datum.missing!==!0&&(yield t)}getQuadTree(){if(this.quadtree===void 0){const{width:t,height:e}=this.ctx.scene.canvas,i=new lt(0,0,t,e);this.quadtree=new ZQ(100,10,i),this.initQuadTree(this.quadtree)}return this.quadtree}initQuadTree(t){}pickNodeExactShape(t){var e;const i=super.pickNodeExactShape(t);if(i)return i;const{x:s,y:r}=t,{opts:{hasMarkers:n}}=this;let o;const{dataNodeGroup:a,markerGroup:l}=this;if(o=a.pickNode(s,r),!o&&n&&(o=l==null?void 0:l.pickNode(s,r)),o&&o.datum.missing!==!0)return{datum:o.datum,distance:0};for(const c of this.moduleMap.modules()){const{datum:u}=(e=c.pickNodeExact(t))!=null?e:{};if(u!=null&&(u==null?void 0:u.missing)!==!0)return{datum:u,distance:0}}}pickNodeClosestDatum(t){var e,i;const{x:s,y:r}=t,{axes:n,rootGroup:o,_contextNodeData:a}=this;if(!a)return;const l=n.x,c=n.y,u=o.transformPoint(s,r);let d=1/0,h;for(const p of a.nodeData){const{point:{x:f=NaN,y:m=NaN}={}}=p;if(isNaN(f)||isNaN(m)||!((l==null?void 0:l.inRange(f))&&(c==null?void 0:c.inRange(m))))continue;const y=Math.max(_t(u.x-f,2)+_t(u.y-m,2),0);y<d&&(d=y,h=p)}for(const p of this.moduleMap.modules()){const f=p.pickNodeNearest(t);if(f!==void 0&&f.distanceSquared<d){d=f.distanceSquared,h=f.datum;break}}if(h){const p=Math.max(Math.sqrt(d)-((i=(e=h.point)==null?void 0:e.size)!=null?i:0),0);return{datum:h,distance:p}}}pickNodeMainAxisFirst(t,e){var i,s,r,n;const{x:o,y:a}=t,{axes:l,rootGroup:c,_contextNodeData:u}=this;if(!u)return;const d=l.x,h=l.y,p=[d,h].filter(C=>C instanceof fd).map(C=>C.direction);if(e&&p.length===0)return;const[f="x"]=p,m=c.transformPoint(o,a),g=f==="x"?[m.x,m.y]:[m.y,m.x],y=[1/0,1/0];let v;for(const C of u.nodeData){const{x:b=NaN,y:T=NaN}=(s=(i=C.point)!=null?i:C.midPoint)!=null?s:{};if(isNaN(b)||isNaN(T)||C.missing===!0||!((d==null?void 0:d.inRange(b))&&(h==null?void 0:h.inRange(T))))continue;const I=f==="x"?[b,T]:[T,b];let D=!0;for(let F=0;F<I.length;F++){const B=Math.abs(I[F]-g[F]);if(B>y[F]){D=!1;break}B<y[F]&&(y[F]=B,y.fill(1/0,F+1,y.length))}D&&(v=C)}if(v){let C=Math.max(_t(y[0],2)+_t(y[1],2)-((n=(r=v.point)==null?void 0:r.size)!=null?n:0),0);for(const b of this.moduleMap.modules()){const T=b.pickNodeMainAxisFirst(t);if(T!==void 0&&T.distanceSquared<C){v=T.datum,C=T.distanceSquared;break}}return{datum:v,distance:Math.sqrt(C)}}}onLegendItemClick(t){const{legendItemName:e}=this.properties,{enabled:i,itemId:s,series:r}=t,n=e!=null&&e===t.legendItemName;(r.id===this.id||n)&&this.toggleSeriesItem(s,i)}onLegendItemDoubleClick(t){const{enabled:e,itemId:i,series:s,numVisibleItems:r}=t,{legendItemName:n}=this.properties,o=n!=null&&n===t.legendItemName;s.id===this.id||o?this.toggleSeriesItem(i,!0):e&&r===1?this.toggleSeriesItem(i,!0):this.toggleSeriesItem(i,!1)}isPathOrSelectionDirty(){return!1}getLabelData(){return[]}shouldFlipXY(){return!1}getMinRects(t,e){const{dirtyNodeData:i,sizeCache:s,minRect:r,minVisibleRect:n}=this.minRectsCache,o=JSON.stringify({width:t,height:e});if(!(o!==s)&&!i&&r&&n)return{minRect:r,minVisibleRect:n};const l=this.computeMinRects(t,e);return this.minRectsCache={dirtyNodeData:!1,sizeCache:o,minRect:l==null?void 0:l.minRect,minVisibleRect:l==null?void 0:l.minVisibleRect},l}computeMinRects(t,e){var i,s;const r=this._contextNodeData;if(!(r!=null&&r.nodeData.length))return;const{nodeData:n}=r,o=Array(n.length),a=Array(n.length);for(const[b,{midPoint:T}]of n.entries())o[b]=(i=T==null?void 0:T.x)!=null?i:0,a[b]=(s=T==null?void 0:T.y)!=null?s:0;o.sort((b,T)=>b-T),a.sort((b,T)=>b-T);let l,c,u,d,h=0,p=0;for(let b=1;b<n.length;b++)o[b]>=0&&(l??(l=b)),o[b]>t&&(c??(c=b)),a[b]>=0&&(u??(u=b)),a[b]>e&&(d??(d=b)),h=Math.max(h,o[b]-o[b-1]),p=Math.max(p,a[b]-a[b-1]);c??(c=n.length),d??(d=n.length);const f=l!=null&&c!=null?o.slice(l,c):[],m=u!=null&&d!=null?a.slice(u,d):[];let g=0,y=0;for(let b=1;b<Math.max(f.length,m.length);b++){const T=f[b],A=f[b-1],I=m[b],D=m[b-1];T!=null&&A!=null&&(g=Math.max(g,T-A)),I!=null&&D!=null&&(y=Math.max(y,I-D))}const v=new lt(0,0,h,p),C=new lt(0,0,g,y);return{minRect:v,minVisibleRect:C}}updateHighlightSelectionItem(t){const{opts:{hasMarkers:e}}=this,{items:i,highlightSelection:s}=t,r=i??[];if(e){const n=s;return this.updateMarkerSelection({nodeData:r,markerSelection:n})}else return this.updateDatumSelection({nodeData:r,datumSelection:s})}updateHighlightSelectionLabel(t){var e;return this.updateLabelSelection({labelData:(e=t.items)!=null?e:[],labelSelection:t.highlightLabelSelection})}updateDatumSelection(t){return Fe(this,null,function*(){return t.datumSelection})}updateDatumNodes(t){return Fe(this,null,function*(){})}updateMarkerSelection(t){return Fe(this,null,function*(){return t.markerSelection})}updateMarkerNodes(t){return Fe(this,null,function*(){})}updatePaths(t){return Fe(this,null,function*(){t.paths.forEach(e=>e.visible=!1)})}updatePathNodes(t){return Fe(this,null,function*(){const{paths:e,opacity:i,visible:s}=t;for(const r of e)r.opacity=i,r.visible=s})}resetAllAnimation(t){var e,i,s;const{path:r,datum:n,label:o,marker:a}=(i=(e=this.opts)==null?void 0:e.animationResetFns)!=null?i:{};this.ctx.animationManager.stopByAnimationGroupId(this.id),r&&t.paths.forEach(l=>{Ys([l],r)}),n&&Ys([t.datumSelection],n),o&&Ys([t.labelSelection],o),a&&this.opts.hasMarkers&&Ys([t.markerSelection],a),((s=t.contextData)==null?void 0:s.animationValid)===!1&&this.ctx.animationManager.skipCurrentBatch()}animateEmptyUpdateReady(t){this.ctx.animationManager.skipCurrentBatch(),this.resetAllAnimation(t)}animateWaitingUpdateReady(t){this.ctx.animationManager.skipCurrentBatch(),this.resetAllAnimation(t)}animateReadyHighlight(t){var e,i;const{datum:s}=(i=(e=this.opts)==null?void 0:e.animationResetFns)!=null?i:{};s&&Ys([t],s)}animateReadyHighlightMarkers(t){var e,i;const{marker:s}=(i=(e=this.opts)==null?void 0:e.animationResetFns)!=null?i:{};s&&Ys([t],s)}animateReadyResize(t){this.resetAllAnimation(t)}animateClearingUpdateEmpty(t){this.ctx.animationManager.skipCurrentBatch(),this.resetAllAnimation(t)}animationTransitionClear(){const t=this.getAnimationData();t&&this.animationState.transition("clear",t)}getAnimationData(t,e){const{_contextNodeData:i}=this;return i?{datumSelection:this.datumSelection,markerSelection:this.markerSelection,labelSelection:this.labelSelection,annotationSelections:[...this.annotationSelections],contextData:i,previousContextData:e,paths:this.paths,seriesRect:t}:void 0}calculateScaling(){const t={};for(const e of Object.values(FD)){const i=this.axes[e];if(i){if(i.scale instanceof BD){const{range:s,domain:r}=i.scale;t[e]={type:"log",convert:n=>i.scale.convert(n),domain:[r[0],r[1]],range:[s[0],s[1]]}}else if(i.scale instanceof Ei){const{range:s}=i.scale,r=i.scale.getDomain();t[e]={type:"continuous",domain:[r[0],r[1]],range:[s[0],s[1]]}}else if(i.scale){const{domain:s}=i.scale;t[e]={type:"category",domain:s,range:s.map(r=>i.scale.convert(r))}}}}return t}},ree=["top","right","bottom","left"],lP=class uB extends e0{constructor(e,i){super(e,i),this.paired=!0,this.firstSeriesTranslation=!0,this._lastCrossLineIds=void 0,this._lastAxisWidths={top:0,bottom:0,left:0,right:0},this._lastClipSeries=!1,this._lastVisibility={crossLines:!0,series:!0}}onAxisChange(e,i){super.onAxisChange(e,i),this.zoomManager.updateAxes(e)}destroySeries(e){super.destroySeries(e),this.firstSeriesTranslation=!0}performLayout(){return Fe(this,null,function*(){const e=yield Ry(uB.prototype,this,"performLayout").call(this),{firstSeriesTranslation:i,seriesRoot:s,annotationRoot:r,highlightRoot:n}=this,{animationRect:o,seriesRect:a,visibility:l,clipSeries:c}=this.updateAxes(e);this.seriesRoot.visible=l.series,this.seriesRect=a,this.animationRect=o;const{x:u,y:d}=a;if(i){for(const m of[s,r,n])m.translationX=Math.floor(u),m.translationY=Math.floor(d);this.firstSeriesTranslation=!1}else{const{translationX:m,translationY:g}=s;Sl(this.id,"seriesRect",this.ctx.animationManager,[s,n,r],{translationX:m,translationY:g},{translationX:Math.floor(u),translationY:Math.floor(d)},{phase:"update"})}const h=a.clone().grow(this.seriesArea.padding);this.hoverRect=h;const p=this.seriesArea.clip||c?h:void 0;s.setClipRectInGroupCoordinateSpace(p),n.setClipRectInGroupCoordinateSpace(p),r.setClipRectInGroupCoordinateSpace(p),this.ctx.layoutService.dispatchLayoutComplete({type:"layout-complete",chart:{width:this.ctx.scene.width,height:this.ctx.scene.height},clipSeries:c,series:{rect:a,paddedRect:h,visible:l.series,shouldFlipXY:this.shouldFlipXY()},axes:this.axes.map(m=>Se({id:m.id},m.getLayoutState()))});const f=this.modulesManager.mapModules(m=>{var g;return(g=m.performCartesianLayout)==null?void 0:g.call(m,{seriesRect:a})});return yield Promise.all(f),e})}updateAxes(e){var i;const s=this.axes.flatMap(v=>{var C;return(C=v.crossLines)!=null?C:[]}).map(v=>v.id),r=this._lastCrossLineIds!=null&&this._lastCrossLineIds.length===s.length&&this._lastCrossLineIds.every((v,C)=>s[C]===v);let n,o,a;r?(n=Se({},this._lastAxisWidths),o=this._lastClipSeries,a=Se({},this._lastVisibility)):(n={top:0,bottom:0,left:0,right:0},o=!1,a={crossLines:!0,series:!0},this._lastCrossLineIds=s);const l=new Set(this.axes.map(v=>v.position));for(const v of Object.keys(n))l.has(v)||delete n[v];const c=(v,C,b)=>Object.keys(v).some(T=>n[T]==null)?!1:a.crossLines===b.crossLines&&a.series===b.series&&Object.entries(n).every(([T,A])=>{const I=v[T];return A!=null||I!=null?A===I:!0})&&o===C,u=v=>Ox(v,C=>C&&Math.abs(C)===1/0?0:C!=null?Math.ceil(C):C);let d={},h={},p=!1,f=(i=this.seriesRect)==null?void 0:i.clone(),m=0,g={};do{Object.assign(n,d),o=p,Object.assign(a,h);const v=this.updateAxesPass(n,e.clone(),f);if(d=u(v.axisWidths),h=v.visibility,p=v.clipSeries,f=v.seriesRect,g=v.primaryTickCounts,m++>10){Be.warn("unable to find stable axis layout.");break}}while(!c(d,p,h));this.axes.forEach(v=>{v.update(g[v.direction])});const y=5;return this.axes.forEach(v=>{if(v.setCrossLinesVisible(a.crossLines),!!f)switch(v.clipGrid(f.x,f.y,f.width+y,f.height+y),v.position){case"left":case"right":v.clipTickLines(e.x,f.y,e.width+y,f.height+y);break;case"top":case"bottom":v.clipTickLines(f.x,e.y,f.width+y,e.height+y);break}}),this._lastAxisWidths=n,this._lastVisibility=a,{seriesRect:f,animationRect:e,visibility:a,clipSeries:o}}updateAxesPass(e,i,s){const r={},n={},o={series:!0,crossLines:!0};let a=!1;const l={},c=this.applySeriesPadding(i),u=s?this.buildCrossLinePadding(e):{},d=this.buildAxisBound(c,e,u,o),h=this.buildSeriesRect(d,e);return this.axes.forEach(p=>{var f,m;const{position:g="left"}=p,{clipSeries:y,axisThickness:v,axisOffset:C}=this.calculateAxisDimensions({axis:p,seriesRect:h,paddedBounds:c,axisWidths:e,newAxisWidths:n,primaryTickCounts:l,clipSeries:a,addInterAxisPadding:((f=r[g])!=null?f:0)>0});r[g]=((m=r[g])!=null?m:0)+1,a=a||y,this.positionAxis({axis:p,axisBound:d,axisOffset:C,axisThickness:v,axisWidths:e,primaryTickCounts:l,seriesRect:h})}),{clipSeries:a,seriesRect:h,axisWidths:n,visibility:o,primaryTickCounts:l}}buildCrossLinePadding(e){var i;const s={};this.axes.forEach(r=>{r.crossLines&&r.crossLines.forEach(n=>{var o;(o=n.calculatePadding)==null||o.call(n,s)})});for(const[r,n=0]of Object.entries(s))s[r]=Math.max(n-((i=e[r])!=null?i:0),0);return s}applySeriesPadding(e){const i=e.clone(),s=this.axes.slice().reverse();return ree.forEach(r=>{const n=this.seriesArea.padding[r],o=s.find(a=>a.position===r);o?o.seriesAreaPadding=n:i.shrink(n,r)}),i}buildAxisBound(e,i,s,r){var n,o,a,l;const c=e.clone(),{top:u=0,right:d=0,bottom:h=0,left:p=0}=s,f=p+d,m=u+h,g=((n=i.left)!=null?n:0)+((o=i.right)!=null?o:0)+f,y=((a=i.top)!=null?a:0)+((l=i.bottom)!=null?l:0)+m;return c.width<=g||c.height<=y?(r.crossLines=!1,r.series=!1,c):(c.x+=p,c.y+=u,c.width-=f,c.height-=m,c)}buildSeriesRect(e,i){const s=e.clone(),{top:r,bottom:n,left:o,right:a}=i;return s.x+=o??0,s.y+=r??0,s.width-=(o??0)+(a??0),s.height-=(r??0)+(n??0),s.width=Math.max(0,s.width),s.height=Math.max(0,s.height),s}clampToOutsideSeriesRect(e,i,s,r){const{x:n,y:o,width:a,height:l}=e,u=[n,o,n+a,o+l][(s==="x"?0:1)+(r===1?0:2)];return(r===1?Math.min:Math.max)(i,u)}calculateAxisDimensions(e){var i,s,r,n;const{axis:o,seriesRect:a,paddedBounds:l,axisWidths:c,newAxisWidths:u,primaryTickCounts:d,addInterAxisPadding:h}=e;let{clipSeries:p}=e;const{position:f="left",direction:m}=o,g=o instanceof fd||o instanceof Nu,y=f==="left"||f==="right",v=(i=u[f])!=null?i:0,{min:C,max:b}=this.ctx.zoomManager.getAxisZoom(o.id);y?(g?(o.range=[0,a.height],o.visibleRange=[1-b,1-C]):(o.range=[a.height,0],o.visibleRange=[C,b]),o.gridLength=a.width):(o.range=[0,a.width],o.visibleRange=[C,b],o.gridLength=a.height);let T=o.nice?d[m]:void 0;const A=m==="y",I=.3;o.thickness?o.maxThickness=o.thickness:o.maxThickness=(A?l.width:l.height)*I;const D=o.calculateLayout(T);T=D.primaryTickCount,(s=d[m])!=null||(d[m]=T),p||(p=o.dataDomain.clipped||o.visibleRange[0]>0||o.visibleRange[1]<1);let F;if(o.thickness!=null&&o.thickness>0)F=o.thickness;else{const{bbox:U}=D;F=A?U.width:U.height}return h&&(F+=15),F=Math.ceil(F),u[f]=((r=u[f])!=null?r:0)+F,o.gridPadding=((n=c[f])!=null?n:0)-u[f],{clipSeries:p,axisThickness:F,axisOffset:v,primaryTickCount:T}}positionAxis(e){var i,s,r,n;const{axis:o,axisBound:a,axisWidths:l,seriesRect:c,axisOffset:u,axisThickness:d}=e,{position:h}=o;switch(h){case"top":o.translation.x=a.x+((i=l.left)!=null?i:0),o.translation.y=this.clampToOutsideSeriesRect(c,a.y+1+u+d,"y",1);break;case"bottom":o.translation.x=a.x+((s=l.left)!=null?s:0),o.translation.y=this.clampToOutsideSeriesRect(c,a.y+a.height+1-d-u,"y",-1);break;case"left":o.translation.y=a.y+((r=l.top)!=null?r:0),o.translation.x=this.clampToOutsideSeriesRect(c,a.x+u+d,"x",1);break;case"right":o.translation.y=a.y+((n=l.top)!=null?n:0),o.translation.x=this.clampToOutsideSeriesRect(c,a.x+a.width-d-u,"x",-1);break}o.updatePosition({rotation:Nr(o.rotation),sideFlag:o.label.getSideFlag()})}shouldFlipXY(){return!this.series.some(e=>!(e instanceof vd&&e.shouldFlipXY()))}};lP.className="CartesianChart";lP.type="cartesian";var nee=lP,kv=class dB{static isInstance(e){var i;return e instanceof dB||((i=e.constructor)==null?void 0:i.name)==="AgChartInstanceProxy"&&e.chart!=null?!0:e.chart!=null&&this.validateImplementation(e)}static validateImplementation(e){var i;const s=["getOptions","destroy"],r=Object.keys((i=Object.getPrototypeOf(e))!=null?i:{});return s.every(n=>r.includes(n))}constructor(e){this.chart=e}getOptions(){return Fr(this.chart.getOptions())}resetAnimations(){this.chart.resetAnimations()}skipAnimations(){this.chart.skipAnimations()}destroy(){this.chart.destroy()}};kv.chartInstances=new WeakMap;q([Hn({oldValue(t){kv.chartInstances.delete(t)},newValue(t){kv.chartInstances.set(t,this)}})],kv.prototype,"chart",2);var wf=kv,nl=class extends Ei{constructor(){super([0,1],[0,1]),this.type="number"}toDomain(e){return e}ticks(){var e;const i=(e=this.tickCount)!=null?e:Ei.defaultTickCount;if(!this.domain||this.domain.length<2||i<1||this.domain.some(o=>!isFinite(o)))return[];this.refresh();const[s,r]=this.getDomain(),{interval:n}=this;if(n){const o=Math.abs(n),a=this.getPixelRange();if(!By({start:s,stop:r,interval:o,availableRange:a}))return Gy(s,r,o)}return Jx(s,r,i,this.minTickCount,this.maxTickCount)}update(){!this.domain||this.domain.length<2||this.nice&&this.updateNiceDomain()}getTickStep(e,i){var s,r;const n=(s=this.tickCount)!=null?s:Ei.defaultTickCount;return(r=this.interval)!=null?r:vg(e,i,n,this.minTickCount,this.maxTickCount)}updateNiceDomain(){var e;const i=(e=this.tickCount)!=null?e:Ei.defaultTickCount;if(i<1){this.niceDomain=[...this.domain];return}let[s,r]=this.domain;if(i===1)[s,r]=tJ(s,r);else{const n=s>r?Math.ceil:Math.floor,o=r<s?Math.floor:Math.ceil,a=4;for(let l=0;l<a;l++){const c=s,u=r,d=this.getTickStep(s,r),[h,p]=this.domain;if(d>=1)s=n(h/d)*d,r=o(p/d)*d;else{const f=1/d;s=n(h*f)/f,r=o(p*f)/f}if(s===c&&r===u)break}}this.niceDomain=[s,r]}tickFormat({ticks:e,specifier:i}){return q6(e??this.ticks(),i)}};function oee(t,e,i){let[s,r]=fa(t);s=aee(Math.floor(s),r,e);const n=cee(s,r,e),o=e-1;r=s+o*n;const a=i?[r,s]:[s,r],l=lee(s,n,e);return[a,l]}function aee(t,e,i){const s=Math.abs(e-t)/(i-1),r=Math.floor(Math.log10(s)),n=Math.pow(10,r);return Math.floor(t/n)*n}function lee(t,e,i){const s=Math.floor(Math.log10(e)),r=e>0&&e<1?Math.abs(s):0,n=Math.pow(10,r),o=Oy(r);for(let a=0;a<i;a++){const l=t+e*a;o[a]=Math.round(l*n)/n}return o}function cee(t,e,i){const s=i-1,r=(e-t)/s;return uee(r)}function uee(t){const e=Math.floor(Math.log10(t)),i=Math.pow(10,e),s=t/i*10;return s>0&&s<=1?i/10:s>1&&s<=2?2*i/10:s>1&&s<=5?5*i/10:s>5&&s<=10?10*i/10:s>10&&s<=20?20*i/10:s>20&&s<=40?40*i/10:s>40&&s<=50?50*i/10:s>50&&s<=100?100*i/10:s}var cP=class extends xl{constructor(){super(...arguments),this.minSpacing=NaN,this.maxSpacing=NaN}};q([te(Zx),Ra(NaN)],cP.prototype,"minSpacing",2);q([te(ID),Ra(NaN)],cP.prototype,"maxSpacing",2);var Gu=class extends JC{constructor(t,e=new nl){super(t,e),this.min=NaN,this.max=NaN}normaliseDataDomain(t){const{min:e,max:i}=this,{extent:s,clipped:r}=WC(t,e,i);return{domain:s,clipped:r}}createTick(){return new cP}updateSecondaryAxisTicks(t){if(this.dataDomain==null)throw new Error("AG Charts - dataDomain not calculated, cannot perform tick calculation.");if(this.dataDomain.domain.length===0)return[];const[e,i]=oee(this.dataDomain.domain,t??0,this.reverse);return this.scale.nice=!1,this.scale.domain=e,this.scale.update(),i}formatDatum(t){return typeof t=="number"?t.toFixed(2):String(t)}};Gu.className="NumberAxis";Gu.type="number";q([te(Yo(sm,nm("max"))),Ra(NaN)],Gu.prototype,"min",2);q([te(Yo(sm,om("min"))),Ra(NaN)],Gu.prototype,"max",2);var hB=Oi(t=>Qn(t)&&t!==0,"a non-zero number"),gp=class extends Gu{constructor(t){super(t,new BD),this.min=NaN,this.max=NaN}normaliseDataDomain(t){const{min:e,max:i}=this,{extent:s,clipped:r}=WC(t,e,i),n=s[0]>s[1],o=s[0]<0&&s[1]>0,a=s[0]===0&&s[1]===0;return(n||o||a)&&(o?Be.warn("the data domain crosses zero, the chart data cannot be rendered. See log axis documentation for more information."):a&&Be.warn("the data domain has 0 extent, no data is rendered.")),s[0]===0&&(s[0]=1),s[1]===0&&(s[1]=-1),{domain:s,clipped:r}}set base(t){this.scale.base=t}get base(){return this.scale.base}};gp.className="LogAxis";gp.type="log";q([te(Yo(sm,hB,nm("max"))),Ra(NaN)],gp.prototype,"min",2);q([te(Yo(sm,hB,om("min"))),Ra(NaN)],gp.prototype,"max",2);var uP=class extends xl{constructor(){super(...arguments),this.minSpacing=NaN,this.maxSpacing=NaN}};q([te(Zx),Ra(NaN)],uP.prototype,"minSpacing",2);q([te(ID),Ra(NaN)],uP.prototype,"maxSpacing",2);var dm=class extends JC{constructor(t){super(t,new th),this.min=void 0,this.max=void 0,this.refreshScale()}normaliseDataDomain(t){var e;let{min:i,max:s}=this,r=!1;return typeof i=="number"&&(i=new Date(i)),typeof s=="number"&&(s=new Date(s)),t.length>2&&(t=((e=bl(t))!=null?e:[0,1e3]).map(n=>new Date(n))),i instanceof Date&&(r||(r=i>t[0]),t=[i,t[1]]),s instanceof Date&&(r||(r=s<t[1]),t=[t[0],s]),t[0]>t[1]&&(t=[]),{domain:t,clipped:r}}createTick(){return new uP}onLabelFormatChange(t,e,i){i?super.onLabelFormatChange(t,e,i):this.labelFormatter=this.scale.tickFormat({ticks:t,domain:e})}calculatePadding(){return[0,0]}formatDatum(t){var e;const i=this.scale.tickFormat({specifier:"%m/%d/%y, %H:%M:%S"});return(e=this.moduleCtx.callbackCache.call(i,t))!=null?e:String(t)}};dm.className="TimeAxis";dm.type="time";q([te(Yo(AD,nm("max")),{optional:!0})],dm.prototype,"min",2);q([te(Yo(AD,om("min")),{optional:!0})],dm.prototype,"max",2);var rL=1e-6,pb=(t,e,i,s,r)=>{let n=!1,o=!1,a=s-Math.sqrt(Math.max(_t(r,2)-_t(i,2),0)),l=0,c=0,u=i-Math.sqrt(Math.max(_t(r,2)-_t(s,2),0));return a>t?(n=!0,a=t,l=i-Math.sqrt(Math.max(_t(r,2)-_t(s-t,2)))):a<rL&&(a=0),u>e?(o=!0,c=s-Math.sqrt(Math.max(_t(r,2)-_t(i-e,2))),u=e):u<rL&&(u=0),{leading0:a,leading1:l,trailing0:c,trailing1:u,leadingClipped:n,trailingClipped:o}},fb=(t,{x0:e,y0:i,x1:s,y1:r,cx:n,cy:o},a,l)=>{if(l&&t.moveTo(e,i),e!==s||i!==r){const c=Math.atan2(i-o,e-n),u=Math.atan2(r-o,s-n);t.arc(n,o,a,c,u)}else t.lineTo(e,i)},iT=(t,e,i,s,r,n,o)=>{let{topLeft:a,topRight:l,bottomRight:c,bottomLeft:u}=n;const d=Math.max(a+u,l+c),h=Math.max(a+l,u+c);if(d<=0&&h<=0){o==null?t.rect(e,i,s,r):t.rect(o.x,o.y,o.width,o.height);return}else if(o==null&&a===l&&a===c&&a===u){t.roundRect(e,i,s,r,a);return}if(s<0&&(e+=s,s=Math.abs(s)),r<0&&(i+=r,r=Math.abs(r)),s<=0||r<=0)return;if(o==null)o=new lt(e,i,s,r);else{const I=Math.max(e,o.x),D=Math.min(e+s,o.x+o.width),F=Math.max(i,o.y),B=Math.min(i+r,o.y+o.height);o=new lt(I,F,D-I,B-F)}const p=Math.max(d/r,h/s,1);p>1&&(a/=p,l/=p,c/=p,u/=p);let f=!0,m=!0,g=!0,y=!0,v,C,b,T;if(f){const I=pb(o.height,o.width,Math.max(e+a-o.x,0),Math.max(i+a-o.y,0),a);I.leadingClipped&&(y=!1),I.trailingClipped&&(m=!1);const D=Math.max(o.x+I.leading1,o.x),F=Math.max(o.y+I.leading0,o.y),B=Math.max(o.x+I.trailing1,o.x),U=Math.max(o.y+I.trailing0,o.y),H=e+a,R=i+a;v={x0:D,y0:F,x1:B,y1:U,cx:H,cy:R}}if(m){const I=pb(o.width,o.height,Math.max(i+l-o.y,0),Math.max(o.x+o.width-(e+s-l),0),l);I.leadingClipped&&(f=!1),I.trailingClipped&&(g=!1);const D=Math.min(o.x+o.width-I.leading0,o.x+o.width),F=Math.max(o.y+I.leading1,o.y),B=Math.min(o.x+o.width-I.trailing0,o.x+o.width),U=Math.max(o.y+I.trailing1,o.y),H=e+s-l,R=i+l;C={x0:D,y0:F,x1:B,y1:U,cx:H,cy:R}}if(g){const I=pb(o.height,o.width,Math.max(o.x+o.width-(e+s-c),0),Math.max(o.y+o.height-(i+r-c),0),c);I.leadingClipped&&(m=!1),I.trailingClipped&&(y=!1);const D=Math.min(o.x+o.width-I.leading1,o.x+o.width),F=Math.min(o.y+o.height-I.leading0,o.y+o.height),B=Math.min(o.x+o.width-I.trailing1,o.x+o.width),U=Math.min(o.y+o.height-I.trailing0,o.y+o.height),H=e+s-c,R=i+r-c;b={x0:D,y0:F,x1:B,y1:U,cx:H,cy:R}}if(y){const I=pb(o.width,o.height,Math.max(o.y+o.height-(i+r-u),0),Math.max(e+u-o.x,0),u);I.leadingClipped&&(g=!1),I.trailingClipped&&(f=!1);const D=Math.max(o.x+I.leading0,o.x),F=Math.min(o.y+o.height-I.leading1,o.y+o.height),B=Math.max(o.x+I.trailing0,o.x),U=Math.min(o.y+o.height-I.trailing1,o.y+o.height),H=e+u,R=i+r-u;T={x0:D,y0:F,x1:B,y1:U,cx:H,cy:R}}let A=!1;f&&v!=null&&(fb(t,v,a,!A),A||(A=!0)),m&&C!=null&&(fb(t,C,l,!A),A||(A=!0)),g&&b!=null&&(fb(t,b,c,!A),A||(A=!0)),y&&T!=null&&(fb(t,T,u,!A),A||(A=!0)),t.closePath()},an=class extends yo{constructor(){super(...arguments),this.borderPath=new Sg,this.x=0,this.y=0,this.width=10,this.height=10,this.topLeftCornerRadius=0,this.topRightCornerRadius=0,this.bottomRightCornerRadius=0,this.bottomLeftCornerRadius=0,this.clipBBox=void 0,this.crisp=!1,this.lastUpdatePathStrokeWidth=jo.defaultStyles.strokeWidth,this.effectiveStrokeWidth=jo.defaultStyles.strokeWidth,this.hittester=super.isPointInPath,this.distanceCalculator=super.distanceSquared,this.microPixelEffectOpacity=1}set cornerRadius(t){this.topLeftCornerRadius=t,this.topRightCornerRadius=t,this.bottomRightCornerRadius=t,this.bottomLeftCornerRadius=t}isDirtyPath(){return this.lastUpdatePathStrokeWidth!==this.strokeWidth||!!(this.path.isDirty()||this.borderPath.isDirty())}updatePath(){var t,e,i;const{path:s,borderPath:r,crisp:n,topLeftCornerRadius:o,topRightCornerRadius:a,bottomRightCornerRadius:l,bottomLeftCornerRadius:c}=this;let{x:u,y:d,width:h,height:p,strokeWidth:f,clipBBox:m}=this;const y=1/((e=(t=this.layerManager)==null?void 0:t.canvas.pixelRatio)!=null?e:1);let v=1;if(s.clear(!0),r.clear(!0),n&&(h<=y&&(v*=h/y),p<=y&&(v*=p/y),h=this.align(u,h),p=this.align(d,p),u=this.align(u),d=this.align(d),m=m!=null?new lt(this.align(m.x),this.align(m.y),this.align(m.x,m.width),this.align(m.y,m.height)):void 0),f)if(h<y){const C=u+y/2;r.moveTo(C,d),r.lineTo(C,d+p),f=y,this.borderClipPath=void 0}else if(p<y){const C=d+y/2;r.moveTo(u,C),r.lineTo(u+h,C),f=y,this.borderClipPath=void 0}else if(f<h&&f<p){const C=f/2;u+=C,d+=C,h-=f,p-=f;const b=m==null?void 0:m.clone().shrink(C),T={topLeft:o>0?o-f:0,topRight:a>0?a-f:0,bottomRight:l>0?l-f:0,bottomLeft:c>0?c-f:0};this.borderClipPath=void 0,h>0&&p>0&&(b==null||(b==null?void 0:b.width)>0&&(b==null?void 0:b.height)>0)&&(iT(s,u,d,h,p,T,b),iT(r,u,d,h,p,T,b))}else this.borderClipPath=(i=this.borderClipPath)!=null?i:new Sg,this.borderClipPath.clear(!0),this.borderClipPath.rect(u,d,h,p),r.rect(u,d,h,p);else{const C={topLeft:o,topRight:a,bottomRight:l,bottomLeft:c};this.borderClipPath=void 0,iT(s,u,d,h,p,C,m)}[o,a,l,c].every(C=>C===0)?(this.hittester=(C,b)=>{const T=this.transformPoint(C,b);return this.getCachedBBox().containsPoint(T.x,T.y)},this.distanceSquared=(C,b)=>this.getCachedBBox().distanceSquared(C,b)):(this.hittester=super.isPointInPath,this.distanceCalculator=super.distanceSquared),this.effectiveStrokeWidth=f,this.lastUpdatePathStrokeWidth=f,this.microPixelEffectOpacity=v}computeBBox(){var t;const{x:e,y:i,width:s,height:r,clipBBox:n}=this;return(t=n==null?void 0:n.clone())!=null?t:new lt(e,i,s,r)}isPointInPath(t,e){return this.hittester(t,e)}get midPoint(){return{x:this.x+this.width/2,y:this.y+this.height/2}}distanceSquared(t,e){return this.distanceCalculator(t,e)}applyFillAlpha(t){const{fillOpacity:e,microPixelEffectOpacity:i,opacity:s}=this;t.globalAlpha*=s*e*i}renderStroke(t){const{stroke:e,effectiveStrokeWidth:i}=this;if(e&&i){const{globalAlpha:s}=t,{strokeOpacity:r,lineDash:n,lineDashOffset:o,lineCap:a,lineJoin:l,borderPath:c,borderClipPath:u,opacity:d,microPixelEffectOpacity:h}=this;u&&t.clip(u.getPath2D()),t.strokeStyle=e,t.globalAlpha*=d*r*h,t.lineWidth=i,n&&t.setLineDash(n),o&&(t.lineDashOffset=o),a&&(t.lineCap=a),l&&(t.lineJoin=l),t.stroke(c.getPath2D()),t.globalAlpha=s}}};an.className="Rect";q([Lt()],an.prototype,"x",2);q([Lt()],an.prototype,"y",2);q([Lt()],an.prototype,"width",2);q([Lt()],an.prototype,"height",2);q([Lt()],an.prototype,"topLeftCornerRadius",2);q([Lt()],an.prototype,"topRightCornerRadius",2);q([Lt()],an.prototype,"bottomRightCornerRadius",2);q([Lt()],an.prototype,"bottomLeftCornerRadius",2);q([Lt()],an.prototype,"clipBBox",2);q([Lt()],an.prototype,"crisp",2);var i0=class extends Lx{constructor(t){super(),this.node=new ft({name:"background",zIndex:0}),this.rectNode=new an,this.visible=!0,this.fill="white",this.node.appendChild(this.rectNode),this.destroyFns.push(t.scene.attachNode(this.node),t.layoutService.addListener("layout-complete",e=>this.onLayoutComplete(e)))}onLayoutComplete(t){const{width:e,height:i}=t.chart;this.rectNode.width=e,this.rectNode.height=i}};q([te(Et),Wi("node","visible")],i0.prototype,"visible",2);q([te(mi,{optional:!0}),Wi("rectNode","fill")],i0.prototype,"fill",2);q([te(rt,{optional:!0})],i0.prototype,"image",2);var pB={type:"root",optionsKey:"background",packageType:"community",chartTypes:["cartesian","polar","hierarchy","topology"],instanceConstructor:i0};function dee({orientation:t,bboxes:e,maxHeight:i,maxWidth:s,itemPaddingY:r=0,itemPaddingX:n=0,forceResult:o=!1}){const a=t==="horizontal",l={max:a?s:i,fn:a?h=>h.width:h=>h.height,padding:a?n:r},c={max:a?i:s,fn:a?h=>h.height:h=>h.width,padding:a?r:n};let u=0;const d=[];for(;u<e.length;){const h=e.slice(u),p=hee(h,u,l,c,o);if(!p)return;u+=p.processedBBoxCount,d.push(p.pageIndices)}return fee(d,t,e,r,n)}function hee(t,e,i,s,r){let o=mee(t,i);if(o<1){if(!r)return;o=1}let a=o;for(;a>=1;){const l=pee(t,e,a,i,s,r);if(l==null&&a<=1)return;if(l==null){a--;continue}if(typeof l=="number"){if(l<=1)return;a=l<a&&l>1?l:a,a--;continue}return{processedBBoxCount:l.length*l[0].length,pageIndices:l}}}function pee(t,e,i,s,r,n){var o;const a=[];let l=0,c=0,u=[];const d=[];for(let h=0;h<t.length;h++){const p=(h+i)%i;p===0&&(l+=c,c=0,u.length>0&&a.push(u),u=[]);const f=s.fn(t[h])+s.padding;d[p]=Math.max((o=d[p])!=null?o:0,f),c=Math.max(c,r.fn(t[h])+r.padding);const m=l+c,g=!n||a.length>0;if(m>r.max&&g){u=[];break}if(d.reduce((v,C)=>v+C,0)>s.max&&!n)return d.length<i?d.length:void 0;u.push(h+e)}return u.length>0&&a.push(u),a.length>0?a:void 0}function fee(t,e,i,s,r){let n=0,o=0;return{pages:t.map(l=>{e==="horizontal"&&(l=gee(l));let c=0;const u=l.map(p=>{const f=p.map(y=>(c=Math.max(y,c),i[y]));let m=0,g=0;return f.forEach(y=>{m+=y.height+s,g=Math.max(g,y.width+r)}),{indices:p,bboxes:f,columnHeight:Math.ceil(m),columnWidth:Math.ceil(g)}});let d=0,h=0;return u.forEach(p=>{d+=p.columnWidth,h=Math.max(h,p.columnHeight)}),n=Math.max(d,n),o=Math.max(h,o),{columns:u,startIndex:l[0][0],endIndex:c,pageWidth:d,pageHeight:h}}),maxPageWidth:n,maxPageHeight:o}}function gee(t){const e=[];for(const i of t[0])e.push([]);return t.forEach((i,s)=>{i.forEach((r,n)=>{e[n][s]=r})}),e}function mee(t,e){const i=t.length;let s=0;for(let r=0;r<i;r++)if(s+=e.fn(t[r])+e.padding,s>e.max)return i/r<2?Math.ceil(i/2):r;return i}var Gs=class extends ft{constructor(){super({name:"markerLabelGroup"}),this.label=new ri,this.line=new sr,this._marker=new xg,this._markerSize=15,this._spacing=8;const{marker:t,label:e,line:i}=this;e.textBaseline="middle",e.fontSize=12,e.fontFamily="Verdana, sans-serif",e.fill="black",e.y=1,this.append([i,t,e]),this.update()}set marker(t){this._marker!==t&&(this.removeChild(this._marker),this._marker=t,this.appendChild(t),this.update())}get marker(){return this._marker}set markerSize(t){this._markerSize!==t&&(this._markerSize=t,this.update())}get markerSize(){return this._markerSize}set spacing(t){this._spacing!==t&&(this._spacing=t,this.update())}get spacing(){return this._spacing}setSeriesStrokeOffset(t){const e=this.marker.size/2+t;this.line.x1=-e,this.line.x2=e,this.line.y1=0,this.line.y2=0,this.line.markDirtyTransform(),this.update()}update(){const{markerSize:t}=this,e=this.marker.constructor.center;this.marker.size=t,this.marker.x=(e.x-.5)*t,this.marker.y=(e.y-.5)*t;const i=this.line.visible?this.line.x2:-1/0,s=t/2;this.label.x=Math.max(i,s)+this.spacing}render(t){this.marker.opacity=this.opacity,this.label.opacity=this.opacity,this.line.opacity=this.opacity,super.render(t)}};Gs.className="MarkerLabel";q([Wi("label")],Gs.prototype,"text",2);q([Wi("label")],Gs.prototype,"fontStyle",2);q([Wi("label")],Gs.prototype,"fontWeight",2);q([Wi("label")],Gs.prototype,"fontSize",2);q([Wi("label")],Gs.prototype,"fontFamily",2);q([Wi("label","fill")],Gs.prototype,"color",2);q([Wi("marker","fill")],Gs.prototype,"markerFill",2);q([Wi("marker","stroke")],Gs.prototype,"markerStroke",2);q([Wi("marker","strokeWidth")],Gs.prototype,"markerStrokeWidth",2);q([Wi("marker","fillOpacity")],Gs.prototype,"markerFillOpacity",2);q([Wi("marker","strokeOpacity")],Gs.prototype,"markerStrokeOpacity",2);q([Wi("marker","visible")],Gs.prototype,"markerVisible",2);q([Wi("line","stroke")],Gs.prototype,"lineStroke",2);q([Wi("line","strokeWidth")],Gs.prototype,"lineStrokeWidth",2);q([Wi("line","strokeOpacity")],Gs.prototype,"lineStrokeOpacity",2);q([Wi("line","lineDash")],Gs.prototype,"lineLineDash",2);q([Wi("line","visible")],Gs.prototype,"lineVisible",2);var hm=class extends ti{constructor(){super(...arguments),this.color="black",this.fontStyle=void 0,this.fontWeight=void 0,this.fontSize=12,this.fontFamily="Verdana, sans-serif"}};q([te(mi)],hm.prototype,"color",2);q([te(hd,{optional:!0})],hm.prototype,"fontStyle",2);q([te(pd,{optional:!0})],hm.prototype,"fontWeight",2);q([te(Ge)],hm.prototype,"fontSize",2);q([te($e)],hm.prototype,"fontFamily",2);var Ql=class extends ti{constructor(){super(...arguments),this.size=15,this.fill=void 0,this.fillOpacity=void 0,this.stroke=void 0,this.strokeWidth=1,this.strokeOpacity=1}};q([te(Ge)],Ql.prototype,"size",2);q([te(mi,{optional:!0})],Ql.prototype,"fill",2);q([te(Si,{optional:!0})],Ql.prototype,"fillOpacity",2);q([te(mi,{optional:!0})],Ql.prototype,"stroke",2);q([te(Ge)],Ql.prototype,"strokeWidth",2);q([te(Si)],Ql.prototype,"strokeOpacity",2);var aE=class extends ti{constructor(t){super(),this.parent=t,this.shape=Uf,this.size=15,this.padding=8}};q([Hn({changeValue(){this.parent.marker===this&&this.parent.onMarkerShapeChange()}})],aE.prototype,"shape",2);q([te(Ge)],aE.prototype,"size",2);q([te(Ge)],aE.prototype,"padding",2);var mp=class extends ti{constructor(t,e,i,s){super(),this.chartUpdateCallback=t,this.pageUpdateCallback=e,this.regionManager=i,this.cursorManager=s,this.id=wl(this),this.marker=new aE(this),this.activeStyle=new Ql,this.inactiveStyle=new Ql,this.highlightStyle=new Ql,this.label=new hm,this.group=new ft({name:"pagination"}),this.labelNode=new ri,this.destroyFns=[],this.totalPages=0,this.currentPage=0,this.translationX=0,this.translationY=0,this.nextButtonDisabled=!1,this.previousButtonDisabled=!1,this._visible=!0,this._enabled=!0,this._orientation="vertical",this._nextButton=new Uf,this._previousButton=new Uf,this.labelNode.setProperties({textBaseline:"middle",fontSize:12,fontFamily:"Verdana, sans-serif",fill:"black",y:1}),this.group.append([this.nextButton,this.previousButton,this.labelNode]);const r=this.regionManager.addRegion("pagination",this.group);this.destroyFns.push(r.addListener("click",n=>this.onPaginationClick(n)),r.addListener("hover",n=>this.onPaginationMouseMove(n))),this.update(),this.updateMarkers()}destroy(){this.destroyFns.forEach(t=>t())}set visible(t){this._visible=t,this.updateGroupVisibility()}get visible(){return this._visible}set enabled(t){this._enabled=t,this.updateGroupVisibility()}get enabled(){return this._enabled}updateGroupVisibility(){this.group.visible=this.enabled&&this.visible}set orientation(t){switch(this._orientation=t,t){case"horizontal":{this.previousButton.rotation=-Math.PI/2,this.nextButton.rotation=Math.PI/2;break}case"vertical":default:this.previousButton.rotation=0,this.nextButton.rotation=Math.PI}}get orientation(){return this._orientation}set nextButton(t){this._nextButton!==t&&(this.group.removeChild(this._nextButton),this._nextButton=t,this.group.appendChild(t))}get nextButton(){return this._nextButton}set previousButton(t){this._previousButton!==t&&(this.group.removeChild(this._previousButton),this._previousButton=t,this.group.appendChild(t))}get previousButton(){return this._previousButton}update(){this.updateLabel(),this.updatePositions(),this.enableOrDisableButtons()}updatePositions(){this.group.translationX=this.translationX,this.group.translationY=this.translationY,this.updateLabelPosition(),this.updateNextButtonPosition()}updateLabelPosition(){const{size:t,padding:e}=this.marker;this.nextButton.size=t,this.previousButton.size=t,this.labelNode.x=t/2+e}updateNextButtonPosition(){const t=this.labelNode.computeBBox();this.nextButton.translationX=t.x+t.width+this.marker.size/2+this.marker.padding}updateLabel(){const{currentPage:t,totalPages:e,labelNode:i,label:{color:s,fontStyle:r,fontWeight:n,fontSize:o,fontFamily:a}}=this;i.text=`${t+1} / ${e}`,i.fill=s,i.fontStyle=r,i.fontWeight=n,i.fontSize=o,i.fontFamily=a}updateMarkers(){const{nextButton:t,previousButton:e,nextButtonDisabled:i,previousButtonDisabled:s,activeStyle:r,inactiveStyle:n,highlightStyle:o,highlightActive:a}=this,l=(c,u)=>u?n:c===a?o:r;this.updateMarker(t,l("next",i)),this.updateMarker(e,l("previous",s))}updateMarker(t,e){var i;const{size:s}=this.marker;t.size=s,t.fill=e.fill,t.fillOpacity=(i=e.fillOpacity)!=null?i:1,t.stroke=e.stroke,t.strokeWidth=e.strokeWidth,t.strokeOpacity=e.strokeOpacity}enableOrDisableButtons(){const{currentPage:t,totalPages:e}=this,i=e===0,s=t===e-1,r=t===0;this.nextButtonDisabled=s||i,this.previousButtonDisabled=r||i}nextButtonContainsPoint(t,e){return!this.nextButtonDisabled&&this.nextButton.containsPoint(t,e)}previousButtonContainsPoint(t,e){return!this.previousButtonDisabled&&this.previousButton.containsPoint(t,e)}clickNext(){this.incrementPage(),this.onPaginationChanged()}clickPrevious(){this.decrementPage(),this.onPaginationChanged()}setPage(t){t=Zt(0,t,this.totalPages-1),this.currentPage!==t&&(this.currentPage=t,this.onPaginationChanged())}onPaginationClick(t){const{offsetX:e,offsetY:i}=t;this.nextButtonContainsPoint(e,i)?(this.clickNext(),t.consume()):this.previousButtonContainsPoint(e,i)&&(this.clickPrevious(),t.consume())}onPaginationMouseMove(t){const{offsetX:e,offsetY:i}=t;this.nextButtonContainsPoint(e,i)?(this.cursorManager.updateCursor(this.id,"pointer"),this.highlightActive="next"):this.previousButtonContainsPoint(e,i)?(this.cursorManager.updateCursor(this.id,"pointer"),this.highlightActive="previous"):(this.cursorManager.updateCursor(this.id),this.highlightActive=void 0),this.updateMarkers(),this.chartUpdateCallback(6)}onPaginationChanged(){this.pageUpdateCallback(this.currentPage)}incrementPage(){this.currentPage=Math.min(this.currentPage+1,this.totalPages-1)}decrementPage(){this.currentPage=Math.max(this.currentPage-1,0)}onMarkerShapeChange(){const t=fl(this.marker.shape||Uf);this.previousButton=new t,this.nextButton=new t,this.updatePositions(),this.updateMarkers(),this.chartUpdateCallback(6)}attachPagination(t){t.append(this.group)}computeBBox(){return this.group.computeBBox()}};mp.className="Pagination";q([te(rt)],mp.prototype,"marker",2);q([te(rt)],mp.prototype,"activeStyle",2);q([te(rt)],mp.prototype,"inactiveStyle",2);q([te(rt)],mp.prototype,"highlightStyle",2);q([te(rt)],mp.prototype,"label",2);var yd=class extends ti{constructor(){super(...arguments),this.maxLength=void 0,this.color="black",this.fontStyle=void 0,this.fontWeight=void 0,this.fontSize=12,this.fontFamily="Verdana, sans-serif",this.formatter=void 0}};q([te(Ge,{optional:!0})],yd.prototype,"maxLength",2);q([te(mi)],yd.prototype,"color",2);q([te(hd,{optional:!0})],yd.prototype,"fontStyle",2);q([te(pd,{optional:!0})],yd.prototype,"fontWeight",2);q([te(Ge)],yd.prototype,"fontSize",2);q([te($e)],yd.prototype,"fontFamily",2);q([te(go,{optional:!0})],yd.prototype,"formatter",2);var pm=class extends ti{constructor(){super(...arguments),this.size=15,this.padding=8,this.enabled=!0}};q([vo(t=>{var e;return(e=t.parent)==null?void 0:e.onMarkerShapeChange()})],pm.prototype,"shape",2);q([te(Ge)],pm.prototype,"size",2);q([te(Ge)],pm.prototype,"padding",2);q([te(Ge,{optional:!0})],pm.prototype,"strokeWidth",2);q([te(Et)],pm.prototype,"enabled",2);var dP=class extends ti{};q([te(Ge,{optional:!0})],dP.prototype,"strokeWidth",2);q([te(Ge,{optional:!0})],dP.prototype,"length",2);var Oc=class extends ti{constructor(){super(...arguments),this.paddingX=16,this.paddingY=8,this.toggleSeriesVisible=!0,this.showSeriesStroke=!1,this.marker=new pm,this.label=new yd,this.line=new dP}};q([te(Ge,{optional:!0})],Oc.prototype,"maxWidth",2);q([te(Ge)],Oc.prototype,"paddingX",2);q([te(Ge)],Oc.prototype,"paddingY",2);q([te(Et)],Oc.prototype,"toggleSeriesVisible",2);q([te(Et)],Oc.prototype,"showSeriesStroke",2);q([te(rt)],Oc.prototype,"marker",2);q([te(rt)],Oc.prototype,"label",2);q([te(rt)],Oc.prototype,"line",2);var hP=class extends ti{};q([te(go,{optional:!0})],hP.prototype,"legendItemClick",2);q([te(go,{optional:!0})],hP.prototype,"legendItemDoubleClick",2);var Co=class extends ti{constructor(t){super(),this.ctx=t,this.id=wl(this),this.group=new ft({name:"legend",layer:!0,zIndex:11}),this.itemSelection=Qi.select(this.group,Gs),this.oldSize=[0,0],this.pages=[],this.maxPageSize=[0,0],this.paginationTrackingIndex=0,this.truncatedItems=new Set,this._data=[],this.item=new Oc,this.listeners=new hP,this.enabled=!0,this.position="bottom",this.spacing=20,this.characterWidths=new Map,this.destroyFns=[],this.size=[0,0],this._visible=!0,this.focus={mode:"item",index:0},this.item.marker.parent=this,this.pagination=new mp(s=>t.updateService.update(s),s=>this.updatePageNumber(s),t.regionManager,t.cursorManager),this.pagination.attachPagination(this.group),this.item.marker.parent=this;const e=17,i=t.regionManager.addRegionFromProperties({name:"legend",bboxproviders:[this.group],canInteraction:()=>this.enabled&&this.group.visible});this.destroyFns.push(i.addListener("click",s=>this.checkLegendClick(s),e),i.addListener("dblclick",s=>this.checkLegendDoubleClick(s),e),i.addListener("hover",s=>this.handleLegendMouseMove(s)),i.addListener("leave",s=>this.handleLegendMouseExit(s),e),i.addListener("enter",s=>this.handleLegendMouseEnter(s),e),i.addListener("blur",s=>this.onBlur(s)),i.addListener("tab",s=>this.onTab(s)),i.addListener("tab-start",s=>this.onTabStart(s)),i.addListener("nav-vert",s=>this.onNav(s)),i.addListener("nav-hori",s=>this.onNav(s)),i.addListener("submit",s=>this.onSubmit(s)),t.layoutService.addListener("start-layout",s=>this.positionLegend(s.shrinkRect)),()=>this.detachLegend())}set data(t){this._data=t,this.updateGroupVisibility()}get data(){return this._data}destroy(){this.destroyFns.forEach(t=>t()),this.pagination.destroy()}onMarkerShapeChange(){this.itemSelection.clear(),this.group.markDirty(this.group,2)}getOrientation(){if(this.orientation!==void 0)return this.orientation;switch(this.position){case"right":case"left":return"vertical";case"bottom":case"top":return"horizontal"}}getCharacterWidths(t){const{characterWidths:e}=this;if(e.has(t))return e.get(t);const i={"...":ri.getTextSize("...",t).width};return e.set(t,i),i}set visible(t){this._visible=t,this.updateGroupVisibility()}get visible(){return this._visible}updateGroupVisibility(){this.group.visible=this.enabled&&this.visible&&this.data.length>0}attachLegend(t){t.appendChild(this.group)}detachLegend(){var t;(t=this.group.parent)==null||t.removeChild(this.group)}getItemLabel(t){const{ctx:{callbackCache:e}}=this,{formatter:i}=this.item.label;return i?e.call(i,{itemId:t.itemId,value:t.label.text,seriesId:t.seriesId}):t.label.text}calcLayout(t,e){const{paddingX:i,paddingY:s,label:r,maxWidth:n,marker:{size:o,padding:a,shape:l},label:{maxLength:c=1/0,fontStyle:u,fontWeight:d,fontSize:h,fontFamily:p},line:f,showSeriesStroke:m}=this.item,g=[...this.data];this.reverseOrder&&g.reverse(),this.itemSelection.update(g);const y=[],v=yg(r),b=n??t*.8,T=o+a+i;if(this.itemSelection.each((R,L)=>{var _,w,S;const x=fl(l??L.marker.shape),E=(_=L.marker.enabled)!=null?_:this.item.marker.enabled;R.marker&&R.marker instanceof x||(R.marker=new x),R.markerSize=o,R.spacing=a,R.fontStyle=u,R.fontWeight=d,R.fontSize=h,R.fontFamily=p;const M=(w=L.itemId)!=null?w:L.id,O=this.getItemLabel(L),V=(O??"<unknown>").replace(/\r?\n/g," ");R.text=this.truncate(V,c,b,T,v,M),m&&L.line!==void 0?(R.lineVisible=!0,R.markerVisible=E,R.setSeriesStrokeOffset((S=f.length)!=null?S:5)):(R.lineVisible=!1,R.markerVisible=!0),y.push(R.computeBBox())}),t=Math.max(1,t),e=Math.max(1,e),!isFinite(t))return!1;const A=this.size,I=this.oldSize;A[0]=t,A[1]=e,(A[0]!==I[0]||A[1]!==I[1])&&(I[0]=A[0],I[1]=A[1]);const{pages:D,maxPageHeight:F,maxPageWidth:B}=this.updatePagination(y,t,e);this.pages=D,this.maxPageSize=[B-i,F-s];const U=this.pagination.currentPage,H=this.pages[U];if(this.pages.length<1||!H){this.visible=!1;return}this.visible=!0,this.updatePositions(U),this.update()}truncate(t,e,i,s,r,n){const o="...",a=t.split("");let l=!1;if(t.length>e&&(t=`${t.substring(0,e)}`,l=!0),Math.floor(s+ri.getTextSize(t,r).width)>i){let u="";const d=this.getCharacterWidths(r);let h=s+d[o];for(const p of a){if(d[p]||(d[p]=ri.getTextSize(p,r).width),h+=d[p],h>i)break;u+=p}t=u,l=!0}return l?(t+=o,this.truncatedItems.add(n)):this.truncatedItems.delete(n),t}updatePagination(t,e,i){const s=this.getOrientation(),r=Math.min(this.paginationTrackingIndex,t.length);this.pagination.orientation=s,this.pagination.translationX=0,this.pagination.translationY=0;const{pages:n,maxPageHeight:o,maxPageWidth:a,paginationBBox:l,paginationVertical:c}=this.calculatePagination(t,e,i),u=n.findIndex(v=>v.endIndex>=r);this.pagination.currentPage=Zt(0,u,n.length-1);const{paddingX:d,paddingY:h}=this.item,p=8,f=a-d,m=o-h;let g=0,y=-l.y-this.item.marker.size/2;return c?y+=m+p:(g+=-l.x+f+p,y+=(m-l.height)/2),this.pagination.translationX=g,this.pagination.translationY=y,this.pagination.update(),this.pagination.updateMarkers(),{maxPageHeight:o,maxPageWidth:a,pages:n}}calculatePagination(t,e,i){var s,r,n;const{paddingX:o,paddingY:a}=this.item,l=this.getOrientation(),c=["left","right"].includes(this.position);let u=this.pagination.computeBBox(),d=new lt(0,0,0,0),h=[],p=0,f=0,m=0;const g=v=>v.width===u.width&&v.height===u.height,y=this.maxWidth!==void 0&&this.maxHeight!==void 0;do{if(m++>10){Be.warn("unable to find stable legend layout.");break}u=d;const v=e-(c?0:u.width),C=i-(c?u.height:0),b=dee({orientation:l,bboxes:t,maxHeight:C,maxWidth:v,itemPaddingY:a,itemPaddingX:o,forceResult:y});h=(s=b==null?void 0:b.pages)!=null?s:[],p=(r=b==null?void 0:b.maxPageWidth)!=null?r:0,f=(n=b==null?void 0:b.maxPageHeight)!=null?n:0;const T=h.length;if(this.pagination.visible=T>1,this.pagination.totalPages=T,this.pagination.update(),d=this.pagination.computeBBox(),!this.pagination.visible)break}while(!g(d));return{maxPageWidth:p,maxPageHeight:f,pages:h,paginationBBox:u,paginationVertical:c}}getPageItemCount(t){let e=0;for(const i of this.pages[t].columns)e+=i.indices.length;return e}getNodeIndexFromFocusIndex(){const{index:t}=this.focus,e=this.pages[this.pagination.currentPage];let i=0;for(const s of e.columns){if(t<i+s.indices.length)return s.indices[t-i];i+=s.indices.length}return-1}updatePositions(t=0){const{item:{paddingY:e},itemSelection:i,pages:s}=this;if(s.length<1||!s[t])return;const{columns:r,startIndex:n,endIndex:o}=s[t];let a=0,l=0;const c=r.length,u=r[0].indices.length,d=this.getOrientation()==="horizontal",h=r[0].bboxes[0].height+e,p=[];i.each((f,m,g)=>{var y,v;if(g<n||g>o){f.visible=!1;return}const C=g-n;let b=0,T=0;d?(b=C%c,T=Math.floor(C/c)):(b=Math.floor(C/u),T=C%u),f.visible=!0;const A=r[b];A&&(l=h*T,a=(y=p[T])!=null?y:0,p[T]=((v=p[T])!=null?v:0)+A.columnWidth,f.translationX=Math.floor(a),f.translationY=Math.floor(l))})}updatePageNumber(t){const{pages:e}=this,{startIndex:i,endIndex:s}=e[t];i===0?this.paginationTrackingIndex=0:t===e.length-1?this.paginationTrackingIndex=s:this.paginationTrackingIndex=Math.floor((i+s)/2),this.pagination.update(),this.pagination.updateMarkers(),this.updatePositions(t),this.ctx.updateService.update(6)}update(){const{label:{color:t},marker:e,line:i,showSeriesStroke:s}=this.item;this.itemSelection.each((r,n)=>{var o,a;const l=n.marker;r.markerFill=l.fill,r.markerStroke=l.stroke,r.markerStrokeWidth=(o=e.strokeWidth)!=null?o:Math.min(2,l.strokeWidth),r.markerFillOpacity=l.fillOpacity,r.markerStrokeOpacity=l.strokeOpacity,r.opacity=n.enabled?1:.5,r.color=t;const{line:c}=n;s&&c!==void 0&&(r.lineStroke=c.stroke,r.lineStrokeOpacity=c.strokeOpacity,r.lineStrokeWidth=(a=i.strokeWidth)!=null?a:Math.min(2,c.strokeWidth),r.lineLineDash=c.lineDash)})}getDatumForPoint(t,e){const i=[],s={dist:1/0,datum:void 0};for(const n of this.group.children){if(!n.visible||!(n instanceof Gs))continue;const o=n.computeBBox();if(o.grow(this.item.paddingX/2,"horizontal"),o.grow(this.item.paddingY/2,"vertical"),o.containsPoint(t,e))return n.datum;const a=t-o.x-this.item.paddingX/2,l=e-o.y-this.item.paddingY/2,c=_t(a,2)+_t(l,2);a>=0&&l>=0&&c<s.dist&&(s.dist=c,s.datum=n.datum),i.push(o)}if(lt.merge(i).containsPoint(t,e))return s.datum}computePagedBBox(){const t=this.group.computeBBox();if(this.pages.length<=1)return t;const[e,i]=this.maxPageSize;return t.height=Math.max(i,t.height),t.width=Math.max(e,t.width),t}checkLegendClick(t){const e=this.getDatumForPoint(t.offsetX,t.offsetY);this.doClick(e)&&t.consume()}doClick(t){const{listeners:{legendItemClick:e},ctx:{chartService:i,highlightManager:s},item:{toggleSeriesVisible:r},preventHidingAll:n}=this;if(!t)return!1;const{id:o,itemId:a,enabled:l}=t,c=i.series.find(d=>d.id===o);if(!c)return!1;let u=l;if(r){u=!l,n&&!u&&i.series.flatMap(p=>p.getLegendData("category")).filter(p=>p.enabled).length<2&&(u=!0);const d=u?"visible":"hidden";this.ctx.ariaAnnouncementService.announceValue(`${d}`),this.ctx.chartEventManager.legendItemClick(c,a,u,t.legendItemName)}return u?s.updateHighlight(this.id,{series:c,itemId:a,datum:void 0}):s.updateHighlight(this.id),this.ctx.updateService.update(2,{forceNodeDataRefresh:!0}),e==null||e({type:"click",enabled:u,itemId:a,seriesId:c.id}),!0}checkLegendDoubleClick(t){var e;const{listeners:{legendItemDoubleClick:i},ctx:{chartService:s},item:{toggleSeriesVisible:r}}=this;if(s.mode==="integrated")return;const n=this.getDatumForPoint(t.offsetX,t.offsetY);if(!n)return;const{id:o,itemId:a,seriesId:l}=n,c=s.series.find(u=>u.id===o);if(c){if(t.consume(),r){const u=s.series.flatMap(p=>p.getLegendData("category")),d=u.filter(p=>p.enabled).length,h=u.find(p=>p.itemId===a&&p.seriesId===l);this.ctx.chartEventManager.legendItemDoubleClick(c,a,(e=h==null?void 0:h.enabled)!=null?e:!1,d,h==null?void 0:h.legendItemName)}this.ctx.updateService.update(2,{forceNodeDataRefresh:!0}),i==null||i({type:"dblclick",enabled:!0,itemId:a,seriesId:c.id})}}handleLegendMouseMove(t){if(!this.enabled)return;const{offsetX:e,offsetY:i}=t;t.consume();const s=this.getDatumForPoint(e,i);this.doHover(t,s)}doHover(t,e){var i;const{item:{toggleSeriesVisible:s},listeners:r}=this;if(t===void 0||e===void 0){this.ctx.cursorManager.updateCursor(this.id),this.ctx.highlightManager.updateHighlight(this.id);return}const n=e?this.ctx.chartService.series.find(o=>o.id===(e==null?void 0:e.id)):void 0;if(e&&this.truncatedItems.has((i=e.itemId)!=null?i:e.id)){const{offsetX:o,offsetY:a}=t;this.ctx.tooltipManager.updateTooltip(this.id,{offsetX:o,offsetY:a,lastPointerEvent:t,showArrow:!1},bg({content:this.getItemLabel(e)}))}else this.ctx.tooltipManager.removeTooltip(this.id);(s||r.legendItemClick!=null||r.legendItemDoubleClick!=null)&&this.ctx.cursorManager.updateCursor(this.id,"pointer"),e!=null&&e.enabled&&n?this.ctx.highlightManager.updateHighlight(this.id,{series:n,itemId:e==null?void 0:e.itemId,datum:void 0}):this.ctx.highlightManager.updateHighlight(this.id)}handleLegendMouseExit(t){this.doMouseExit()}doMouseExit(){this.ctx.cursorManager.updateCursor(this.id),this.ctx.tooltipManager.removeTooltip(this.id),this.ctx.interactionManager.getState()===16&&this.ctx.highlightManager.updateHighlight(this.id)}handleLegendMouseEnter(t){const{enabled:e,item:{toggleSeriesVisible:i},listeners:{legendItemClick:s,legendItemDoubleClick:r}}=this,n=this.getDatumForPoint(t.offsetX,t.offsetY);e&&n!==void 0&&(i||s!=null||r!=null)&&this.ctx.cursorManager.updateCursor(this.id,"pointer")}onBlur(t){this.doMouseExit(),this.focus.mode="item",this.ctx.regionManager.updateFocusIndicatorRect(void 0)}onTab(t){this.updateFocus(),t.consume()}onTabStart(t){if(!this.pagination.visible||!this.pagination.enabled)return;const e=i=>{this.focus.mode=i,this.updateFocus(),t.consume()};this.focus.mode==="item"&&t.delta===1?(this.focus.index=this.pagination.currentPage===0?1:0,e("page")):this.focus.mode==="page"&&t.delta===-1&&(this.focus.index=0,e("item"))}onNav(t){if(this.focus.mode==="item"){const e=this.focus.index+t.delta,i=this.getPageItemCount(this.pagination.currentPage);this.focus.index=Zt(-1,e,i),this.updateFocus(),t.consume()}else this.focus.mode==="page"&&(t.delta<0&&(this.focus.index=0),t.delta>0&&(this.focus.index=1),this.updateFocus(),t.consume())}onSubmit(t){this.focus.mode==="item"?this.doClick(this.getFocusedItem().datum):this.focus.mode==="page"&&(this.focus.index===0&&this.pagination.clickPrevious(),this.focus.index===1&&this.pagination.clickNext(),this.ctx.ariaAnnouncementService.announceValue(`Legend page ${this.pagination.currentPage+1} of ${this.pages.length}`))}maybeChangeFocusPage(){const t=this.pagination.currentPage,e=this.getPageItemCount(t);if(this.focus.index===-1)this.pagination.setPage(t-1);else if(this.focus.index===e)this.pagination.setPage(t+1);else return;const{currentPage:i}=this.pagination;t===i?this.focus.index=Zt(0,this.focus.index,e-1):this.focus.index===-1?this.focus.index=this.getPageItemCount(i)-1:this.focus.index=0}getFocusedItem(){if(this.focus.mode!=="item")return Be.error("getFocusedItem() should be called only when focus.mode is 'item'"),{nodeIndex:-1,node:void 0,datum:void 0};this.maybeChangeFocusPage();const t=this.getNodeIndexFromFocusIndex();if(t<0)return Be.error(`Cannot access negative nodeIndex ${t}`),{nodeIndex:-1,node:void 0,datum:void 0};const e=this.itemSelection.nodes()[t],i=this.data;let s;return t<i.length?s=this.data[t]:Be.error(`Cannot access datum[${t}]`),{nodeIndex:t,node:e,datum:s}}updateFocus(){const{focus:t,pagination:e}=this;if(t.mode==="item"){const{nodeIndex:i,node:s,datum:r}=this.getFocusedItem();if(r===void 0)return;const n=s==null?void 0:s.computeTransformedBBox();this.doHover(B8(this.ctx.regionManager,{bbox:n,showFocusBox:!0}),r);const o=r&&this.getItemLabel(r);if(o){const a=r.enabled?"visible":"hidden";this.ctx.ariaAnnouncementService.announceValue(`Legend item ${i+1} of ${this.data.length}, ${o}, ${a}`)}}else if(t.mode==="page"){const i=t.index===0?e.previousButton:e.nextButton;this.ctx.regionManager.updateFocusIndicatorRect(i.computeTransformedBBox());const s=["Previous legend page","Next legend page"][t.index];this.ctx.ariaAnnouncementService.announceValue(`${s}, button`)}}positionLegend(t){const e=t.clone();if(!this.enabled||!this.data.length)return{shrinkRect:e};const[i,s]=this.calculateLegendDimensions(t);this.group.translationX=0,this.group.translationY=0,this.calcLayout(i,s);const r=this.computePagedBBox(),n=()=>{switch(this.position){case"top":case"left":return 0;case"bottom":return t.height-r.height;case"right":default:return t.width-r.width}};if(this.visible){let o,a;switch(this.position){case"top":case"bottom":o=(t.width-r.width)/2,a=n(),e.shrink(r.height,this.position);break;case"left":case"right":default:o=n(),a=(t.height-r.height)/2,e.shrink(r.width,this.position)}this.group.translationX=Math.floor(-r.x+t.x+o),this.group.translationY=Math.floor(-r.y+t.y+a)}if(this.visible&&this.enabled&&this.data.length){const o=this.spacing;e.shrink(o,this.position);const a=r.clone();a.x+=this.group.translationX,a.y+=this.group.translationY}return{shrinkRect:e}}calculateLegendDimensions(t){const{width:e,height:i}=t,s=e/i,r=.5,n=.2,o=.25;let a,l;switch(this.position){case"top":case"bottom":const c=s<1?Math.min(r,n*(1/s)):n;a=this.maxWidth?Math.min(this.maxWidth,e):e,l=this.maxHeight?Math.min(this.maxHeight,i):Math.round(i*c);break;case"left":case"right":default:const u=s>1?Math.min(r,o*s):o;a=this.maxWidth?Math.min(this.maxWidth,e):Math.round(e*u),l=this.maxHeight?Math.min(this.maxHeight,i):i}return[a,l]}};Co.className="Legend";q([te(rt)],Co.prototype,"pagination",2);q([te(rt)],Co.prototype,"item",2);q([te(rt)],Co.prototype,"listeners",2);q([vo(t=>t.updateGroupVisibility()),te(Et)],Co.prototype,"enabled",2);q([te(MD)],Co.prototype,"position",2);q([te(Ge,{optional:!0})],Co.prototype,"maxWidth",2);q([te(Ge,{optional:!0})],Co.prototype,"maxHeight",2);q([te(Et,{optional:!0})],Co.prototype,"reverseOrder",2);q([te(ls(["horizontal","vertical"],"an orientation"),{optional:!0})],Co.prototype,"orientation",2);q([te(Et,{optional:!0})],Co.prototype,"preventHidingAll",2);q([te(Ge)],Co.prototype,"spacing",2);var vee={type:"legend",optionsKey:"legend",identifier:"category",chartTypes:["cartesian","polar","hierarchy","topology"],instanceConstructor:Co,packageType:"community"},ko=class extends yo{constructor(){super(...arguments),this.zIndex=3,this._fill="#f2f2f2",this._stroke="#999999",this._strokeWidth=1,this._lineCap="square",this._centerX=0,this._centerY=0,this._width=8,this._gripLineGap=2,this._gripLineLength=8,this._height=16}set centerX(e){this._centerX!==e&&(this._centerX=e,this.dirtyPath=!0)}get centerX(){return this._centerX}set centerY(e){this._centerY!==e&&(this._centerY=e,this.dirtyPath=!0)}get centerY(){return this._centerY}set width(e){this._width!==e&&(this._width=e,this.dirtyPath=!0)}get width(){return this._width}set gripLineGap(e){this._gripLineGap!==e&&(this._gripLineGap=e,this.dirtyPath=!0)}get gripLineGap(){return this._gripLineGap}set gripLineLength(e){this._gripLineLength!==e&&(this._gripLineLength=e,this.dirtyPath=!0)}get gripLineLength(){return this._gripLineLength}set height(e){this._height!==e&&(this._height=e,this.dirtyPath=!0)}get height(){return this._height}layout(e,i){this.centerX=e,this.centerY=i}static align(e,i,s,r,n,o,a,l){const c=e.strokeWidth/2,u=e.align(s+n*a)+c,d=u+e.align(s+n*a,n*(l-a))-2*c,h=e.align(r+o/2)+c;e.layout(u,h),i.layout(d,h)}computeBBox(){const{centerX:e,centerY:i,width:s,height:r}=this,n=e-s/2,o=i-r/2;return new lt(n,o,s,r)}isPointInPath(e,i){const s=this.transformPoint(e,i);return this.computeBBox().containsPoint(s.x,s.y)}updatePath(){var e,i,s;const{centerX:r,centerY:n,path:o,strokeWidth:a,gripLineGap:l,gripLineLength:c}=this,u=(s=(i=(e=this.layerManager)==null?void 0:e.canvas)==null?void 0:i.pixelRatio)!=null?s:1;o.clear();const d=Math.floor(this.width/2*u)/u,h=Math.floor(this.height/2*u)/u;o.moveTo(r-d,n-h),o.lineTo(r+d,n-h),o.lineTo(r+d,n+h),o.lineTo(r-d,n+h),o.closePath();const p=Math.floor((l+a)/2*u)/u,f=Math.floor(c/2*u)/u;o.moveTo(r-p,n-f),o.lineTo(r-p,n+f),o.moveTo(r+p,n-f),o.lineTo(r+p,n+f)}};ko.className="RangeHandle";q([te(mi)],ko.prototype,"_fill",2);q([te(mi)],ko.prototype,"_stroke",2);q([te(Ge)],ko.prototype,"_strokeWidth",2);q([te(x6)],ko.prototype,"_lineCap",2);q([te(Ge)],ko.prototype,"_width",2);q([te(Ge)],ko.prototype,"_gripLineGap",2);q([te(Ge)],ko.prototype,"_gripLineLength",2);q([te(Ge)],ko.prototype,"_height",2);var fB=class extends yo{constructor(){super(...arguments),this.zIndex=2,this.x=0,this.y=0,this.width=200,this.height=30,this.min=0,this.max=1}layout(t,e,i,s){this.x=t,this.y=e,this.width=i,this.height=s,this.dirtyPath=!0}update(t,e){this.min=isNaN(t)?this.min:t,this.max=isNaN(e)?this.max:e,this.dirtyPath=!0}computeBBox(){const{x:t,y:e,width:i,height:s}=this;return new lt(t,e,i,s)}computeVisibleRangeBBox(){const{x:t,y:e,width:i,height:s,min:r,max:n}=this,o=t+i*r,a=t+i*n;return new lt(o,e,a-o,s)}updatePath(){const{path:t,x:e,y:i,width:s,height:r,min:n,max:o,strokeWidth:a}=this,l=a/2;t.clear();const c=this.align(e)+l,u=this.align(i)+l,d=c+this.align(e,s)-2*l,h=u+this.align(i,r)-2*l;t.moveTo(c,u),t.lineTo(d,u),t.lineTo(d,h),t.lineTo(c,h),t.closePath();const p=this.align(e+s*n)+l,f=p+this.align(e+s*n,s*(o-n))-2*l;t.moveTo(p,u),t.lineTo(p,h),t.lineTo(f,h),t.lineTo(f,u),t.closePath()}};fB.className="RangeMask";var yee=class extends ft{constructor(t){super({name:"rangeSelectorGroup",layer:!0,zIndex:12}),this.x=0,this.y=0,this.width=200,this.height=30,this.lOffset=0,this.rOffset=0,this.isContainerNode=!0,this.background=new ft({name:"navigator-background"}),this.background.zIndex=1,this.appendChild(this.background),this.append(t)}layout(t,e,i,s,r,n){this.x=t,this.y=e,this.width=i,this.height=s,this.lOffset=r,this.rOffset=n,this.background.translationX=t,this.background.translationY=e}updateBackground(t,e){t!=null&&this.background.removeChild(t),e!=null&&this.background.appendChild(e)}computeBBox(){const{x:t,y:e,width:i,height:s,lOffset:r,rOffset:n}=this;return new lt(t-r,e,i+(r+n),s)}},Cd=class extends Lx{constructor(t){super(),this.ctx=t,this.miniChart=void 0,this.enabled=!1,this.mask=new fB,this.minHandle=new ko,this.maxHandle=new ko,this.height=30,this.margin=10,this.x=0,this.y=0,this.width=0,this.rangeSelector=new yee([this.mask,this.minHandle,this.maxHandle]),this._min=0,this._max=1,this.minRange=.001;const e=t.regionManager.addRegion("navigator",this.rangeSelector),i=25;this.destroyFns.push(t.scene.attachNode(this.rangeSelector),e.addListener("hover",s=>this.onHover(s),i),e.addListener("drag-start",s=>this.onDragStart(s),i),e.addListener("drag",s=>this.onDrag(s),i),e.addListener("drag-end",()=>this.onDragEnd(),i),e.addListener("leave",s=>this.onLeave(s),i),t.zoomManager.addListener("zoom-change",s=>this.onZoomChange(s))),this.updateGroupVisibility()}updateBackground(t,e){var i;(i=this.rangeSelector)==null||i.updateBackground(t,e)}updateGroupVisibility(){const{enabled:t}=this;this.rangeSelector==null||t===this.rangeSelector.visible||(this.rangeSelector.visible=t,t?this.updateZoom():this.ctx.zoomManager.updateZoom("navigator"))}performLayout(t){return Fe(this,arguments,function*({shrinkRect:e}){if(this.enabled){const i=this.height+this.margin;e.shrink(i,"bottom"),this.y=e.y+e.height+this.margin}else this.y=0;return{shrinkRect:e}})}performCartesianLayout(t){return Fe(this,null,function*(){const{x:e,width:i}=t.seriesRect;if(this.enabled){const{y:s,height:r}=this;this.layoutNodes(e,s,i,r)}this.x=e,this.width=i})}onHover(t){if(!this.enabled)return;const{mask:e,minHandle:i,maxHandle:s}=this,{offsetX:r,offsetY:n}=t;i.containsPoint(r,n)||s.containsPoint(r,n)?this.ctx.cursorManager.updateCursor("navigator","ew-resize"):e.computeVisibleRangeBBox().containsPoint(r,n)?this.ctx.cursorManager.updateCursor("navigator","grab"):this.ctx.cursorManager.updateCursor("navigator")}onDragStart(t){if(!this.enabled)return;const{mask:e,minHandle:i,maxHandle:s,x:r,width:n,_min:o}=this,{offsetX:a,offsetY:l}=t;i.zIndex<s.zIndex?s.containsPoint(a,l)?this.dragging="max":i.containsPoint(a,l)&&(this.dragging="min"):i.containsPoint(a,l)?this.dragging="min":s.containsPoint(a,l)&&(this.dragging="max"),this.dragging==null&&e.computeVisibleRangeBBox().containsPoint(a,l)&&(this.dragging="pan",this.panStart=(a-r)/n-o),this.dragging!=null&&this.ctx.zoomManager.fireZoomPanStartEvent("navigator")}onDrag(t){if(!this.enabled||this.dragging==null)return;const{dragging:e,minRange:i,panStart:s,x:r,width:n}=this;let{_min:o,_max:a}=this;const{offsetX:l}=t,c=(l-r)/n;if(e==="min")o=Zt(0,c,a-i);else if(e==="max")a=Zt(o+i,c,1);else if(e==="pan"&&s!=null){const u=a-o;o=Zt(0,c-s,1-u),a=o+u}this._min=o,this._max=a,this.updateZoom()}onDragEnd(){this.dragging=void 0}onLeave(t){this.ctx.cursorManager.updateCursor("navigator")}onZoomChange(t){const{x:e}=t;e&&(this._min=e.min,this._max=e.max,this.updateNodes(e.min,e.max))}layoutNodes(t,e,i,s){const{rangeSelector:r,mask:n,minHandle:o,maxHandle:a,_min:l,_max:c}=this;r.layout(t,e,i,s,o.width/2,a.width/2),n.layout(t,e,i,s),ko.align(o,a,t,e,i,s,l,c),l+(c-l)/2<.5?(o.zIndex=3,a.zIndex=4):(o.zIndex=4,a.zIndex=3)}updateNodes(t,e){this.mask.update(t,e)}updateZoom(){if(!this.enabled)return;const{_min:t,_max:e}=this,i=this.ctx.zoomManager.getZoom();if(t==null||e==null)return;const s=r=>{this.min==null&&this.max==null||Be.warnOnce(`Could not apply [navigator.min] or [navigator.max] as [${r}] has modified the initial zoom state.`)};return this.ctx.zoomManager.updateZoom("navigator",{x:{min:t,max:e},y:i==null?void 0:i.y},!1,s)}};q([te(rt,{optional:!0})],Cd.prototype,"miniChart",2);q([te(Et),vo(t=>t.updateGroupVisibility())],Cd.prototype,"enabled",2);q([te(Ge)],Cd.prototype,"height",2);q([te(Ge)],Cd.prototype,"margin",2);q([Hn({newValue(t){this._min=t,this.updateZoom()}}),te(Yo(Si,nm("max")),{optional:!0})],Cd.prototype,"min",2);q([Hn({newValue(t){this._max=t,this.updateZoom()}}),te(Yo(Si,om("min")),{optional:!0})],Cd.prototype,"max",2);var gB={type:"root",optionsKey:"navigator",packageType:"community",chartTypes:["cartesian"],instanceConstructor:Cd,themeTemplate:{navigator:{enabled:!1,height:30,mask:{fill:"#999999",stroke:"#999999",strokeWidth:1,fillOpacity:.2},minHandle:{fill:"#f2f2f2",stroke:"#999999",strokeWidth:1,width:9,height:16,gripLineGap:1,gripLineLength:8},maxHandle:{fill:"#f2f2f2",stroke:"#999999",strokeWidth:1,width:9,height:16,gripLineGap:1,gripLineLength:8}}}},lE=({takeColors:t})=>{const{fills:[e],strokes:[i]}=t(1);return{fill:e,stroke:i}},fm=t=>{const{fill:e,stroke:i}=lE(t);return{marker:{fill:e,stroke:i}}};function mB(t,e,i,s,r){const{addPhaseFn:n,updatePhaseFn:o,removePhaseFn:a}=r,l=(c,u,d)=>{i.animate({id:`${t}_${e}_${u.id}_${c}`,groupId:t,from:0,to:1,ease:Ly,collapsable:!1,onUpdate(h,p){p&&c!=="removed"||(u.path.clear(!0),d(h,u),u.checkPathDirty())},onStop(){c==="added"&&(u.path.clear(!0),d(1,u),u.checkPathDirty())},phase:Xr[c]})};for(const c of s)i.isSkipped()||(l("removed",c,a),l("updated",c,o)),l("added",c,n)}var Um=null;function Zi(t){if(t!=null)return t===""?"":(Um??(Um=hs("div")),Um.textContent=String(t),Um.innerHTML)}function Mi({id:t},e,i,...s){Sl(t,e,i,s,{opacity:0},{opacity:1},{phase:"trailing"})}function ph({id:t},e,i,...s){Sl(t,e,i,s,{opacity:1},{opacity:0},{phase:"remove"})}function Gc(t){return{opacity:1}}var pP=class extends ti{constructor(){super(...arguments),this._dirty=3}markDirty(t,e=1){this._dirty<e&&(this._dirty=e)}markClean(t){this._dirty=0}isDirty(){return this._dirty>0}},Ia=class extends pP{constructor(){super(...arguments),this.enabled=!0,this.color="rgba(0, 0, 0, 0.5)",this.xOffset=0,this.yOffset=0,this.blur=5}};q([te(Et),Qe({redraw:3})],Ia.prototype,"enabled",2);q([te(mi),Qe({redraw:3})],Ia.prototype,"color",2);q([te(Ui),Qe({redraw:3})],Ia.prototype,"xOffset",2);q([te(Ui),Qe({redraw:3})],Ia.prototype,"yOffset",2);q([te(Ge),Qe({redraw:3})],Ia.prototype,"blur",2);var vB=Oi(t=>lB(t)||typeof nr=="function"&&Object.create(t.prototype)instanceof nr,"a marker shape keyword such as 'circle', 'diamond' or 'square' or an object extending the Marker class"),jn=class extends pP{constructor(){super(...arguments),this.enabled=!0,this.shape=rl,this.size=6,this.fillOpacity=1,this.strokeWidth=1,this.strokeOpacity=1}getStyle(){const{size:t,fill:e,fillOpacity:i,stroke:s,strokeWidth:r,strokeOpacity:n}=this;return{size:t,fill:e,fillOpacity:i,stroke:s,strokeWidth:r,strokeOpacity:n}}getDiameter(){return this.size+this.strokeWidth}};q([te(Et),Qe({redraw:3})],jn.prototype,"enabled",2);q([te(vB),Qe({redraw:3})],jn.prototype,"shape",2);q([te(Ge),Qe({redraw:3})],jn.prototype,"size",2);q([te(mi,{optional:!0}),Qe({redraw:3})],jn.prototype,"fill",2);q([te(Si),Qe({redraw:3})],jn.prototype,"fillOpacity",2);q([te(mi,{optional:!0}),Qe({redraw:3})],jn.prototype,"stroke",2);q([te(Ge),Qe({redraw:3})],jn.prototype,"strokeWidth",2);q([te(Si),Qe({redraw:3})],jn.prototype,"strokeOpacity",2);q([te(go,{optional:!0}),Qe({redraw:3})],jn.prototype,"formatter",2);var yB=class extends ti{constructor(){super(...arguments),this.enabled=!1}};q([te(Et)],yB.prototype,"enabled",2);var Un=class extends ti{constructor(){super(...arguments),this.enabled=!0,this.interaction=new yB,this.position=new am}toTooltipHtml(t,e){return this.renderer?bg(this.renderer(e),t):bg(t)}};q([te(Et)],Un.prototype,"enabled",2);q([te(Et,{optional:!0})],Un.prototype,"showArrow",2);q([te(go,{optional:!0})],Un.prototype,"renderer",2);q([te(rt)],Un.prototype,"interaction",2);q([te(rt)],Un.prototype,"position",2);var cr=class extends md{constructor(){super(...arguments),this.xName=void 0,this.fill="#c16068",this.fillOpacity=1,this.stroke="#874349",this.strokeWidth=2,this.strokeOpacity=1,this.lineDash=[0],this.lineDashOffset=0,this.shadow=new Ia,this.marker=new jn,this.label=new Bs,this.tooltip=new Un,this.connectMissingData=!1}};q([te($e)],cr.prototype,"xKey",2);q([te($e,{optional:!0})],cr.prototype,"xName",2);q([te($e)],cr.prototype,"yKey",2);q([te($e,{optional:!0})],cr.prototype,"yName",2);q([te(Ge,{optional:!0})],cr.prototype,"normalizedTo",2);q([te(mi)],cr.prototype,"fill",2);q([te(Si)],cr.prototype,"fillOpacity",2);q([te(mi)],cr.prototype,"stroke",2);q([te(Ge)],cr.prototype,"strokeWidth",2);q([te(Si)],cr.prototype,"strokeOpacity",2);q([te(Fc)],cr.prototype,"lineDash",2);q([te(Ge)],cr.prototype,"lineDashOffset",2);q([te(rt)],cr.prototype,"shadow",2);q([te(rt)],cr.prototype,"marker",2);q([te(rt)],cr.prototype,"label",2);q([te(rt)],cr.prototype,"tooltip",2);q([te(Et)],cr.prototype,"connectMissingData",2);function Hy({id:t},e,i,...s){const r={phase:i?Xr[i]:"trailing"};Sl(t,"markers",e,s,{opacity:0},{opacity:1},r),s.forEach(n=>n.cleanup())}function fP({id:t},e,...i){Sl(t,"markers",e,i,{scalingX:0,scalingY:0},{scalingX:1,scalingY:1},{phase:"initial"}),i.forEach(s=>s.cleanup())}function gP({id:t,nodeDataDependencies:e},i,...s){const r=e.seriesRectWidth;Ji(t,"markers",i,s,{fromFn:(a,l)=>{var c,u;const d=(u=(c=l.midPoint)==null?void 0:c.x)!=null?u:r;let h=Zt(0,g6(d/r),1);return isNaN(h)&&(h=0),{scalingX:0,scalingY:0,delay:h,duration:aS,phase:"initial"}},toFn:()=>({scalingX:1,scalingY:1})})}function s0(t){return{opacity:1,scalingX:1,scalingY:1}}function jy(t,e){var i,s,r,n;return{translationX:(s=(i=e.point)==null?void 0:i.x)!=null?s:NaN,translationY:(n=(r=e.point)==null?void 0:r.y)!=null?n:NaN}}function mP(t,e){const i=(o,a)=>{const l=t[a][o];return Array.isArray(l)?l[0]:l},s=o=>{const{xValue:a}=o;return t.moved[a]?{point:i(a,"moved"),status:"updated"}:t.removed[a]?{point:i(a,"removed"),status:"removed"}:t.added[a]?{point:i(a,"added"),status:"added"}:{status:"unknown"}};return{fromFn:(o,a)=>{var l,c,u,d,h,p;const{status:f,point:m}=s(a);if(f==="unknown")return{opacity:0};const g={translationX:(c=(l=m==null?void 0:m.from)==null?void 0:l.x)!=null?c:o.translationX,translationY:(d=(u=m==null?void 0:m.from)==null?void 0:u.y)!=null?d:o.translationY,opacity:o.opacity,phase:Xr[f]};return e==="added"?qe(Se({},g),{opacity:0,translationX:(h=m==null?void 0:m.to)==null?void 0:h.x,translationY:(p=m==null?void 0:m.to)==null?void 0:p.y,phase:Xr.added}):(f==="added"&&(g.opacity=0),g)},toFn:(o,a)=>{var l,c;const{status:u,point:d}=s(a);if(u==="unknown")return{opacity:0};const h={translationX:a.point.x,translationY:a.point.y,opacity:1,phase:Xr[u]};return u==="removed"||e==="removed"?qe(Se({},h),{translationX:(l=d==null?void 0:d.to)==null?void 0:l.x,translationY:(c=d==null?void 0:d.to)==null?void 0:c.y,opacity:0,phase:Xr.removed}):h}}}function r0(t,{datumIndex:e}){const i=t.getNodeData();if(i===void 0)return;const s=i[e];if(s===void 0||s.point===void 0)return;const r=t.getFormattedMarkerStyle(s).size,n=r/2,{x:o,y:a}=t.contentGroup.inverseTransformPoint(s.point.x-n,s.point.y-n);return new lt(o,a,r,r)}function mA(t){return t.reduce(({min:e,max:i},s)=>((e==null||e.point.x>s.point.x)&&(e=s),(i==null||i.point.x<s.point.x)&&(i=s),{min:e,max:i}),{})}function nL(t,e,i){const s=(e.y-t.y)/(e.x-t.x),r=(i-t.x)*s+t.y;return{x:i,y:r}}function oL(t,e,i,s){let r=-1,n=0;const o=[];for(;n<t.length;){if(t[n].change===e){o.push(t[n]),n++;continue}if(t[n].change===i){n++;continue}o.length>0&&(s(o,r,n),o.length=0),r=n,n++}o.length>0&&s(o,r,n)}function vP(t,e){oL(t,"out","in",(i,s,r)=>{var n,o;s===-1&&t[r]?i.forEach(a=>a.to=t[r].from):r===t.length&&t[s]?i.forEach(a=>a.to=t[s].from):e==="intersect"&&((n=t[s])!=null&&n.from)&&((o=t[r])!=null&&o.from)?i.forEach(a=>a.to=nL(t[s].from,t[r].from,a.from.x)):i.forEach(a=>a.to=a.from)}),oL(t,"in","out",(i,s,r)=>{var n,o;s===-1&&t[r]?i.forEach(a=>a.from=t[r].to):r===t.length&&t[s]?i.forEach(a=>a.from=t[s].to):e==="intersect"&&((n=t[s])!=null&&n.to)&&((o=t[r])!=null&&o.to)?i.forEach(a=>a.from=nL(t[s].to,t[r].to,a.to.x)):i.forEach(a=>a.from=a.to)})}function aL(t,e,i){const s=isNaN(t.x)?e.x:t.x,r=isNaN(t.y)?e.y:t.y,n=e.x-t.x,o=e.y-t.y,a=isNaN(n)?0:n*i,l=isNaN(o)?0:o*i;return{x:s+a,y:r+l}}function yP(t,e,i){const{path:s}=i;let r;for(const n of t){const{from:o,to:a}=n,l=e[n.change];if(l==null||o==null||a==null)continue;const{x:c,y:u}=aL(o,a,l);if(n.moveTo===!1)s.lineTo(c,u);else if(n.moveTo===!0||!r)s.moveTo(c,u);else if(r){const d=n.moveTo==="in"?l:1-l,{x:h,y:p}=aL(r,{x:c,y:u},d);s.lineTo(h,p),s.moveTo(c,u)}r={x:c,y:u}}}function CP({id:t,visible:e,nodeDataDependencies:i},s,...r){const{seriesRectWidth:n,seriesRectHeight:o}=i;Sl(t,"path_properties",s,r,{clipX:0},{clipX:n},{phase:"initial",start:{clipMode:"normal",clipY:o,visible:e},finish:{clipMode:void 0,visible:e}})}function Nv({id:t},e,i,s="add",...r){Sl(t,e,i,r,{opacity:0},{opacity:1},{phase:s})}function Cee({id:t},e,i,...s){Sl(t,e,i,s,{opacity:1},{opacity:0},{phase:"remove"})}function bP(t){return e=>({opacity:t.getOpacity(),clipScalingX:1,clipMode:void 0})}function gS({nodeDataDependencies:t},e){const i=s=>isFinite(s)?s:0;e.clipX=i(t.seriesRectWidth),e.clipY=i(t.seriesRectHeight)}function lL(t){return t.type==="continuous"||t.type==="log"}function cL(t){return t.type==="category"}function uL(t,e){return t.domain.length===e.domain.length&&t.range.length===e.range.length&&t.domain.every((i,s)=>i===e.domain[s])&&t.range.every((i,s)=>i===e.range[s])}function dL(t,e){return t===void 0||e===void 0?t!==void 0||e!==void 0:lL(t)&&lL(e)?t.type===e.type&&uL(t,e):cL(t)&&cL(e)?uL(t,e):!1}function gb(t,e){if(!e)return NaN;if(t instanceof Date&&(t=t.getTime()),e.type==="continuous"&&typeof t=="number")return(t-e.domain[0])/(e.domain[1]-e.domain[0])*(e.range[1]-e.range[0])+e.range[0];if(e.type==="log"&&typeof t=="number")return e.convert(t);const i=e.domain.findIndex(s=>s===t);return i>=0?e.range[i]:NaN}function bee(t,e){return!dL(t.scales.x,e.scales.x)||!dL(t.scales.y,e.scales.y)}function wee(t,e){const i=Number(t),s=Number(e);return!isNaN(i)&&!isNaN(s)?Math.abs(s-i)<.25:t===e}function CB(t=!1,e=!1){return t===e?!!t:t?"in":"out"}function Uy(t,e,i={}){var s,r,n,o;const{backfillSplitMode:a="intersect"}=i,l=C=>{var b,T;return{x:gb((b=C.xValue)!=null?b:NaN,t.scales.x),y:gb((T=C.yValue)!=null?T:NaN,t.scales.y)}},c=C=>{var b,T;return{x:gb((b=C.xValue)!=null?b:NaN,e.scales.x),y:gb((T=C.yValue)!=null?T:NaN,e.scales.y)}},u=[],d={added:{},moved:{},removed:{}},h=(C,b,T,A="move")=>{C&&(isNaN(C.point.x)||isNaN(C.point.y))&&(C=b);const I={from:C==null?void 0:C.point,to:b==null?void 0:b.point,moveTo:CB(C==null?void 0:C.point.moveTo,b==null?void 0:b.point.moveTo),change:A};A==="move"?(d.moved[T]=I,y++,v++):A==="in"?(d.added[T]=I,v++):A==="out"&&(d.removed[T]=I,y++),u.push(I)},{min:p,max:f}=mA(e.nodeData),{min:m,max:g}=mA(t.nodeData);let y=0,v=0;for(;y<e.nodeData.length||v<t.nodeData.length;){const C=e.nodeData[y],b=t.nodeData[v],T=C?l(C):void 0,A=b?c(b):void 0,I=void 0;if(T&&wee(T.x,b==null?void 0:b.point.x))h(C,b,b.xValue,"move");else if(T&&T.x<((s=m==null?void 0:m.point.x)!=null?s:-1/0))h(C,I,C.xValue,"out");else if(T&&T.x>((r=g==null?void 0:g.point.x)!=null?r:1/0))h(C,I,C.xValue,"out");else if(A&&A.x<((n=p==null?void 0:p.point.x)!=null?n:-1/0))h(I,b,b.xValue,"in");else if(A&&A.x>((o=f==null?void 0:f.point.x)!=null?o:1/0))h(I,b,b.xValue,"in");else if(T&&T.x<(b==null?void 0:b.point.x))h(C,I,C.xValue,"out");else if(A&&A.x<(C==null?void 0:C.point.x))h(I,b,b.xValue,"in");else if(C)h(C,I,C.xValue,"out");else if(b)h(I,b,b.xValue,"in");else throw new Error("Unable to process points")}return vP(u,a),{result:u,resultMap:d}}function Wy(t,e,i,s={}){var r,n,o;const{backfillSplitMode:a="intersect",multiDatum:l=!1}=s,c=[],u={added:{},moved:{},removed:{}},d={added:{},moved:{},removed:{}},h={in:"added",move:"moved",out:"removed"};let p,f;const m=(b,T)=>{var A,I;const D=h[T.change];l?((I=(A=d[D])[b])!=null||(A[b]=[]),d[D][b].push(T)):u[D][b]=T,p=T,f=Vf(b)};let g=0,y=0,v=!1;for(;g<e.nodeData.length||y<t.nodeData.length;){const b=e.nodeData[g],T=t.nodeData[y],A=Vf(b==null?void 0:b.xValue),I=Vf(T==null?void 0:T.xValue);let D;if(A===I)D={change:"move",moveTo:CB((r=b.point.moveTo)!=null?r:!1,T.point.moveTo),from:b.point,to:T.point},m(b==null?void 0:b.xValue,D),g++,y++;else if(i!=null&&i.removed.has(String(A)))D={change:"out",moveTo:(n=b.point.moveTo)!=null?n:!1,from:b.point},m(b==null?void 0:b.xValue,D),g++;else if(i!=null&&i.added.has(String(I)))D={change:"in",moveTo:(o=T.point.moveTo)!=null?o:!1,to:T.point},m(T==null?void 0:T.xValue,D),y++;else if(l&&p&&f===A)D=Se({},p),m(b==null?void 0:b.xValue,D),g++;else if(l&&p&&f===I)D=Se({},p),m(T==null?void 0:T.xValue,D),y++;else{v=!0;break}c.push(D)}let C=-1/0;return v||(v=c.some(b=>{const{change:T,to:{x:A=-1/0}={}}=b;if(T==="out")return;const I=A<C;return C=A,I})),v?{result:void 0,resultMap:void 0}:(vP(c,a),{result:c,resultMap:l?d:u})}function bB(t,e,i){var s,r,n,o;let a="updated";const l=c=>c.visible;if(!l(e)&&l(t))a="added";else if(l(e)&&!l(t))a="removed";else for(let c=0;c<i.length&&!(i[c].change!=="move"||((s=i[c].from)==null?void 0:s.x)!==((r=i[c].to)==null?void 0:r.x)||((n=i[c].from)==null?void 0:n.y)!==((o=i[c].to)==null?void 0:o.y));c++)if(c===i.length-1)return"no-op";return a}function See(t,e){const i=e==="none"?"updated":t,s={fromFn:r=>{let n;return t==="removed"?n={finish:{visible:!1}}:t==="added"?n={start:{visible:!0}}:n={},Se({phase:Xr[i]},n)},toFn:r=>({phase:Xr[i]})};return e==="fade"?{fromFn:r=>{const n=t==="added"?0:r.opacity;return Se({opacity:n},s.fromFn(r))},toFn:r=>Se({opacity:t==="removed"?0:1},s.toFn(r))}:s}function wP(t,e,i,s,r){const n=bB(t,e,i),o=(u,d)=>{r(i,{move:0,out:u},d)},a=(u,d)=>{r(i,{move:u},d)},l=(u,d)=>{r(i,{move:1,in:u},d)},c=See(n,s);return{status:n,path:{addPhaseFn:l,updatePhaseFn:a,removePhaseFn:o},pathProperties:c}}function wB(t,e,i){var s,r,n;const o=((s=t.scales.x)==null?void 0:s.type)==="category",a=((r=e.scales.x)==null?void 0:r.type)==="category";if(o!==a)return;const{result:l,resultMap:c}=o?Wy(t,e,i):Uy(t,e);let u="updated";if(e.visible&&!t.visible?u="removed":!e.visible&&t.visible&&(u="added"),l===void 0||c===void 0)return;const d=((n=i==null?void 0:i.changed)!=null?n:!0)||bee(t,e)||u!=="updated",h=wP(t,e,l,"fade",yP),p=mP(c,u);return qe(Se({},h),{marker:p,hasMotion:d})}var SB=(t=>(t[t.Fill=0]="Fill",t[t.Stroke=1]="Stroke",t[t.Marker=2]="Marker",t[t.Label=3]="Label",t))(SB||{});function mS(t){const{points:e,phantomPoints:i}=t.fillData;return{top:e,bottom:i}}function ou(t,e,i){return{scales:e.scales,nodeData:i[t],visible:e.visible}}function xee(t,e,i){const s=mS(e),r=mS(t),n={multiDatum:!0};return{top:Wy(ou("top",t,r),ou("top",e,s),i,n),bottom:Wy(ou("bottom",t,r),ou("bottom",e,s),i,n)}}function Eee(t,e){const i=mS(e),s=mS(t);return{top:Uy(ou("top",t,s),ou("top",e,i)),bottom:Uy(ou("bottom",t,s),ou("bottom",e,i))}}function xB(t,e,i){var s,r;const n=((s=t.scales.x)==null?void 0:s.type)==="category",o=((r=e.scales.x)==null?void 0:r.type)==="category";if(n!==o)return;let a="updated";e.visible&&!t.visible?a="removed":!e.visible&&t.visible&&(a="added");const l=()=>n?Wy(t,e,i,{backfillSplitMode:"static",multiDatum:!0}):Uy(t,e,{backfillSplitMode:"static"}),c=()=>n?xee(t,e,i):Eee(t,e),{resultMap:u}=l(),{top:d,bottom:h}=c();if(u===void 0||d.result===void 0||h.result===void 0)return;const p=[...d.result,...h.result.reverse()],m=(e.stackVisible?t.stackVisible:!1)?"none":"fade",g=wP(t,e,p,m,yP),y=mP(u,a);return{status:g.status,fill:g,marker:y}}var SP=class extends vd{constructor(t){super({moduleCtx:t,directionKeys:pp,directionNames:fp,pathsPerSeries:2,pathsZIndexSubOrderOffset:[0,1e3],hasMarkers:!0,markerSelectionGarbageCollection:!1,pickModes:[1,0],animationResetFns:{path:bP({getOpacity:()=>this.getOpacity()}),label:Gc,marker:(e,i)=>Se(Se({},s0()),jy(e,i))}}),this.properties=new cr}processData(t){return Fe(this,null,function*(){var e,i;if(this.data==null||!this.properties.isValid())return;const{data:s,visible:r,seriesGrouping:{groupIndex:n=this.id,stackCount:o=1}={}}=this,{xKey:a,yKey:l,connectMissingData:c,normalizedTo:u}=this.properties,d=!this.ctx.animationManager.isSkipped(),h=(e=this.axes.x)==null?void 0:e.scale,p=(i=this.axes.y)==null?void 0:i.scale,{isContinuousX:f,xScaleType:m,yScaleType:g}=this.getScaleInformation({xScale:h,yScale:p}),y=[`area-stack-${n}-yValues`,`area-stack-${n}-yValues-trailing`,`area-stack-${n}-yValues-prev`,`area-stack-${n}-yValues-trailing-prev`,`area-stack-${n}-yValues-marker`],v=[];sS(u)&&(v.push(fS([y[0],y[1],y[4]],u,"range")),v.push(fS([y[2],y[3]],u,"range"))),!f&&d&&this.processedData&&v.push(hp(this.processedData)),d&&v.push(cm());const C={invalidValue:null};c&&o>1&&(C.invalidValue=0),r||(C.forceValue=0),yield this.requestDataModel(t,s,{props:[mr(a,m,{id:"xValue"}),Vi(l,g,Se({id:"yValueRaw"},C)),...iu(l,"window","current",qe(Se({id:"yValueEnd"},C),{groupId:y[0]}),g),...iu(l,"window-trailing","current",qe(Se({id:"yValueStart"},C),{groupId:y[1]}),g),...iu(l,"window","last",qe(Se({id:"yValuePreviousEnd"},C),{groupId:y[2]}),g),...iu(l,"window-trailing","last",qe(Se({id:"yValuePreviousStart"},C),{groupId:y[3]}),g),...iu(l,"normal","current",qe(Se({id:"yValueCumulative"},C),{groupId:y[4]}),g),...v],groupByKeys:!0,groupByData:!1}),this.animationState.transition("updateData")})}getSeriesDomain(t){const{processedData:e,dataModel:i,axes:s}=this;if(!e||!i||e.data.length===0)return[];const r=s.x,n=s.y,o=i.resolveProcessedDataDefById(this,"xValue"),a=i.getDomain(this,"xValue","key",e),l=i.getDomain(this,"yValueEnd","value",e);if(t==="x")return(o==null?void 0:o.def.type)==="key"&&o.def.valueType==="category"?a:Pn(bl(a),r);if(n instanceof gp||n instanceof dm)return Pn(l,n);{const c=[l[0]>0?0:l[0],l[1]<0?0:l[1]];return Pn(c,n)}}createNodeData(){return Fe(this,null,function*(){var t;const{axes:e,data:i,processedData:{data:s}={},dataModel:r}=this,n=e.x,o=e.y;if(!n||!o||!i||!r||!this.properties.isValid())return;const{yKey:a,xKey:l,marker:c,label:u,fill:d,stroke:h,connectMissingData:p}=this.properties,{scale:f}=n,{scale:m}=o,{isContinuousY:g}=this.getScaleInformation({xScale:f,yScale:m}),y=((t=f.bandwidth)!=null?t:0)/2,v=r.resolveProcessedDataDefsByIds(this,["yValueStart","yValueEnd","yValueRaw","yValuePreviousStart","yValuePreviousEnd","yValueCumulative"]),C=S=>qe(Se({},S),{point:qe(Se({},S.point),{moveTo:!0})}),b=(S,x,E)=>{const M=f.convert(S)+y,O=m.convert(x),V=m.convert(E);return[{point:{x:M,y:V},yValue:E,xValue:S},{point:{x:M,y:O},yValue:x,xValue:S}]},T=(S,x,E)=>{let M;return(sS(this.properties.normalizedTo)?g&&eE(E):!isNaN(E))&&(M=x),{x:f.convert(S)+y,y:m.convert(M),size:c.size}},A=a,I=[],D=[],{visibleSameStackCount:F}=this.ctx.seriesStateManager.getVisiblePeerGroupIndex(this),B={itemId:A,fillData:{itemId:A,points:[],phantomPoints:[]},strokeData:{itemId:A,points:[]},labelData:I,nodeData:D,scales:this.calculateScaling(),visible:this.visible,stackVisible:F>0},U=B.fillData.points,H=B.fillData.phantomPoints,R=B.strokeData.points;let L=-1,_,w=-1/0;return s==null||s.forEach(S=>{const{keys:x,keys:[E],datum:M,values:O}=S;O.forEach((V,Y)=>{var $,J,G;L++;const Z=M[Y],N=r.resolveProcessedDataDefsValues(v,{keys:x,values:V}),{yValueRaw:P,yValueCumulative:j}=N;let{yValueStart:X,yValueEnd:ie,yValuePreviousStart:ee,yValuePreviousEnd:re}=N;const oe=P!=null,ue=T(E,+j,P);if(oe&&c&&D.push({index:L,series:this,itemId:A,datum:Z,midPoint:{x:ue.x,y:ue.y},cumulativeValue:ie,yValue:P,xValue:E,yKey:a,xKey:l,point:ue,fill:($=c.fill)!=null?$:d,stroke:(J=c.stroke)!=null?J:h,strokeWidth:(G=c.strokeWidth)!=null?G:this.getStrokeWidth(this.properties.strokeWidth)}),oe&&u){const ve=this.getLabelText(u,{value:P,datum:Z,xKey:l,yKey:a,xName:this.properties.xName,yName:this.properties.yName},xe=>gi(xe)?xe.toFixed(2):String(xe));I.push({index:L,series:this,itemId:a,datum:Z,x:ue.x,y:ue.y,label:ve?{text:ve,fontStyle:u.fontStyle,fontWeight:u.fontWeight,fontSize:u.fontSize,fontFamily:u.fontFamily,textAlign:"center",textBaseline:"bottom",fill:u.color}:void 0})}const se=_!=null&&E!=null,le=w!=null&&oe;le||(X=X??0,ie=X??0,ee=ee??0,re=ee??0);const[ne,fe]=b(_,ee,re),[me,ge]=b(E,X,ie);se&&(!p||le)&&(U.push(ne,me),H.push(fe,ge)),le&&L>0&&R.push(C(ne),me),_=E,w=P})}),R.length>0&&(R[0]=C(R[0])),B})}isPathOrSelectionDirty(){return this.properties.marker.isDirty()}markerFactory(){const{shape:t}=this.properties.marker,e=fl(t);return new e}updatePathNodes(t){return Fe(this,null,function*(){const{opacity:e,visible:i,animationEnabled:s}=t,[r,n]=t.paths,o=this.getStrokeWidth(this.properties.strokeWidth);n.setProperties({tag:1,fill:void 0,lineJoin:n.lineCap="round",pointerEvents:1,stroke:this.properties.stroke,strokeWidth:o,strokeOpacity:this.properties.strokeOpacity,lineDash:this.properties.lineDash,lineDashOffset:this.properties.lineDashOffset,opacity:e,visible:i}),r.setProperties({tag:0,stroke:void 0,lineJoin:"round",pointerEvents:1,fill:this.properties.fill,fillOpacity:this.properties.fillOpacity,lineDash:this.properties.lineDash,lineDashOffset:this.properties.lineDashOffset,strokeOpacity:this.properties.strokeOpacity,fillShadow:this.properties.shadow,opacity:e,visible:i||s,strokeWidth:o}),gS(this,n),gS(this,r)})}updatePaths(t){return Fe(this,null,function*(){this.updateAreaPaths(t.paths,t.contextData)})}updateAreaPaths(t,e){this.updateFillPath(t,e),this.updateStrokePath(t,e)}updateFillPath(t,e){const{fillData:i}=e,[s]=t,{path:r}=s;r.clear(!0);let n;for(const{point:o}of ov(i.points,Nq(i.phantomPoints)))o.moveTo?r.moveTo(o.x,o.y):(n==null?void 0:n.y)!==o.y&&(n&&r.lineTo(n.x,n.y),r.lineTo(o.x,o.y)),n=o;n&&r.lineTo(n.x,n.y),r.closePath(),s.checkPathDirty()}updateStrokePath(t,e){const{strokeData:i}=e,[,s]=t,{path:r}=s;r.clear(!0);for(const{point:n}of i.points)n.moveTo?r.moveTo(n.x,n.y):r.lineTo(n.x,n.y);s.checkPathDirty()}updateMarkerSelection(t){return Fe(this,null,function*(){const{nodeData:e,markerSelection:i}=t;return this.properties.marker.isDirty()&&(i.clear(),i.cleanup()),i.update(this.properties.marker.enabled?e:[])})}updateMarkerNodes(t){return Fe(this,null,function*(){const{markerSelection:e,isHighlight:i}=t,{xKey:s,yKey:r,marker:n,fill:o,stroke:a,strokeWidth:l,fillOpacity:c,strokeOpacity:u,highlightStyle:d}=this.properties,h=Jt(i&&d.item,n.getStyle(),{fill:o,stroke:a,strokeWidth:l,fillOpacity:c,strokeOpacity:u});e.each((p,f)=>{this.updateMarkerStyle(p,n,{datum:f,highlighted:i,xKey:s,yKey:r},h)}),i||this.properties.marker.markClean()})}updateLabelSelection(t){return Fe(this,null,function*(){const{labelData:e,labelSelection:i}=t;return i.update(e,s=>{s.tag=3})})}updateLabelNodes(t){return Fe(this,null,function*(){const{labelSelection:e}=t,{enabled:i,fontStyle:s,fontWeight:r,fontSize:n,fontFamily:o,color:a}=this.properties.label;e.each((l,c)=>{const{x:u,y:d,label:h}=c;h&&i&&this.visible?(l.fontStyle=s,l.fontWeight=r,l.fontSize=n,l.fontFamily=o,l.textAlign=h.textAlign,l.textBaseline=h.textBaseline,l.text=h.text,l.x=u,l.y=d-10,l.fill=a,l.visible=!0):l.visible=!1})})}getTooltipHtml(t){const{id:e,axes:i,dataModel:s}=this,{xKey:r,xName:n,yName:o,tooltip:a,marker:l}=this.properties,{yKey:c,xValue:u,yValue:d,datum:h,itemId:p}=t,f=i.x,m=i.y;if(!this.properties.isValid()||!(f&&m&&gi(d))||!s)return Lc;const g=f.formatDatum(u),y=m.formatDatum(d),v=Zi(o),C=Zi(g+": "+y),b=Jt({fill:this.properties.fill},l.getStyle(),{stroke:this.properties.stroke,strokeWidth:this.properties.strokeWidth}),{fill:T}=this.getMarkerStyle(l,{datum:t,xKey:r,yKey:c,highlighted:!1},b);return a.toTooltipHtml({title:v,content:C,backgroundColor:T},{datum:h,itemId:p,xKey:r,xName:n,yKey:c,yName:o,color:T,title:v,seriesId:e})}getLegendData(t){var e,i,s,r;if(!((e=this.data)!=null&&e.length)||!this.properties.isValid()||t!=="category")return[];const{yKey:n,yName:o,fill:a,stroke:l,fillOpacity:c,strokeOpacity:u,strokeWidth:d,lineDash:h,marker:p,visible:f}=this.properties,m=!p.enabled||p.fill===void 0;return[{legendType:t,id:this.id,itemId:n,seriesId:this.id,enabled:f,label:{text:o??n},marker:{shape:p.shape,fill:m?a:p.fill,fillOpacity:m?c:p.fillOpacity,stroke:(i=p.stroke)!=null?i:l,strokeOpacity:(s=p.strokeOpacity)!=null?s:u,strokeWidth:(r=p.strokeWidth)!=null?r:0,enabled:p.enabled||d<=0},line:{stroke:l,strokeOpacity:u,strokeWidth:d,lineDash:h}}]}animateEmptyUpdateReady(t){const{markerSelection:e,labelSelection:i,contextData:s,paths:r}=t,{animationManager:n}=this.ctx;this.updateAreaPaths(r,s),CP(this,n,...r),Ys([e],jy),gP(this,n,e),Mi(this,"labels",n,i)}animateReadyResize(t){const{contextData:e,paths:i}=t;this.updateAreaPaths(i,e),super.animateReadyResize(t)}animateWaitingUpdateReady(t){var e,i;const{animationManager:s}=this.ctx,{markerSelection:r,labelSelection:n,contextData:o,paths:a,previousContextData:l}=t,[c,u]=a;if(c==null&&u==null)return;super.resetAllAnimation(t);const d=()=>{this.updateAreaPaths(a,o),this.updateStrokePath(a,o)},h=()=>{s.skipCurrentBatch(),d()};if(o==null||l==null){d(),Hy(this,s,"added",r),Nv(this,"fill_path_properties",s,"add",c),Nv(this,"stroke",s,"trailing",u),Mi(this,"labels",s,n);return}const p=xB(o,l,(i=(e=this.processedData)==null?void 0:e.reduced)==null?void 0:i.diff);if(p===void 0){h();return}else if(p.status==="no-op")return;Hy(this,s,void 0,r),Ji(this.id,"fill_path_properties",s,[c],p.fill.pathProperties),mB(this.id,"fill_path_update",s,[c],p.fill.path),this.updateStrokePath(a,o),Nv(this,"stroke",s,"trailing",u),Mi(this,"labels",s,n)}isLabelEnabled(){return this.properties.label.enabled}nodeFactory(){return new ft}getFormattedMarkerStyle(t){const{xKey:e,yKey:i}=t;return this.getMarkerStyle(this.properties.marker,{datum:t,xKey:e,yKey:i,highlighted:!0})}computeFocusBounds(t){return r0(this,t)}};SP.className="AreaSeries";SP.type="area";var Tee={type:"series",optionsKey:"series[]",packageType:"community",chartTypes:["cartesian"],identifier:"area",instanceConstructor:SP,stackable:!0,defaultAxes:[{type:"number",position:"left"},{type:"category",position:"bottom"}],themeTemplate:{series:{__extends__:Dc,nodeClickRange:"nearest",tooltip:{position:{type:"node"}},fillOpacity:.8,strokeOpacity:1,strokeWidth:0,lineDash:[0],lineDashOffset:0,shadow:{enabled:!1,color:tm,xOffset:3,yOffset:3,blur:5},marker:{__extends__:Qg,enabled:!1,fillOpacity:1,strokeOpacity:1,strokeWidth:0},label:{enabled:!1,fontSize:12,fontFamily:Ks,color:Ti}}},paletteFactory:t=>{const{marker:e}=fm(t);return{fill:e.fill,stroke:e.stroke,marker:e}}};function*EB(t){for(const e of t.children)yield e}function xP(t,e){for(const i of e){const s=i.datum;s===void 0?Be.error("undefined datum"):t.addValue(i,s)}}function EP(t,e){const{x:i,y:s}=t.contentGroup.transformPoint(e.x,e.y),{nearest:r,distanceSquared:n}=t.getQuadTree().find(i,s);if(r!==void 0)return{datum:r.value,distance:Math.sqrt(n)}}var TP=class extends md{constructor(){super(...arguments),this.direction="vertical"}};q([te(T6)],TP.prototype,"direction",2);var TB=class extends vd{constructor(){super(...arguments),this.groupScale=new ku,this.smallestDataInterval=void 0}getBandScalePadding(){return{inner:.2,outer:.1}}shouldFlipXY(){return!this.isVertical()}isVertical(){return this.properties.direction==="vertical"}getBarDirection(){return this.shouldFlipXY()?"x":"y"}getCategoryDirection(){return this.shouldFlipXY()?"y":"x"}getValueAxis(){const t=this.getBarDirection();return this.axes[t]}getCategoryAxis(){const t=this.getCategoryDirection();return this.axes[t]}updateGroupScale(t){const{groupScale:e,smallestDataInterval:i,ctx:{seriesStateManager:s}}=this,r=t.scale,n=Ei.is(r)?r.calcBandwidth(i):r.bandwidth,o=[],{index:a,visibleGroupCount:l}=s.getVisiblePeerGroupIndex(this);for(let u=0;u<l;u++)o.push(String(u));return e.domain=o,e.range=[0,n??0],t instanceof fd?e.paddingInner=t.groupPaddingInner:t instanceof Nu?e.padding=.1:e.padding=0,e.round=e.padding!==0,{barWidth:e.bandwidth>=1?e.bandwidth:e.rawBandwidth,groupIndex:a}}resolveKeyDirection(t){return this.getBarDirection()==="x"?t==="x"?"y":"x":t}initQuadTree(t){xP(t,this.datumNodesIter())}pickNodeClosestDatum(t){return EP(this,t)}},_B=class extends Bs{constructor(){super(...arguments),this.placement="inside"}};q([te(_6)],_B.prototype,"placement",2);var Js=class extends TP{constructor(){super(...arguments),this.fill="#c16068",this.fillOpacity=1,this.stroke="#874349",this.strokeWidth=1,this.strokeOpacity=1,this.lineDash=[0],this.lineDashOffset=0,this.cornerRadius=0,this.shadow=new Ia,this.label=new _B,this.tooltip=new Un}};q([te($e)],Js.prototype,"xKey",2);q([te($e,{optional:!0})],Js.prototype,"xName",2);q([te($e)],Js.prototype,"yKey",2);q([te($e,{optional:!0})],Js.prototype,"yName",2);q([te($e,{optional:!0})],Js.prototype,"stackGroup",2);q([te(Ui,{optional:!0})],Js.prototype,"normalizedTo",2);q([te(mi)],Js.prototype,"fill",2);q([te(Si)],Js.prototype,"fillOpacity",2);q([te(mi)],Js.prototype,"stroke",2);q([te(Ge)],Js.prototype,"strokeWidth",2);q([te(Si)],Js.prototype,"strokeOpacity",2);q([te(Fc)],Js.prototype,"lineDash",2);q([te(Ge)],Js.prototype,"lineDashOffset",2);q([te(Ge)],Js.prototype,"cornerRadius",2);q([te(go,{optional:!0})],Js.prototype,"formatter",2);q([te(rt,{optional:!0})],Js.prototype,"shadow",2);q([te(rt)],Js.prototype,"label",2);q([te(rt)],Js.prototype,"tooltip",2);function AB({rect:t,config:e}){const{crisp:i=!0,fill:s,stroke:r,strokeWidth:n,fillOpacity:o,strokeOpacity:a,lineDash:l,lineDashOffset:c,fillShadow:u,cornerRadius:d=0,topLeftCornerRadius:h=!0,topRightCornerRadius:p=!0,bottomRightCornerRadius:f=!0,bottomLeftCornerRadius:m=!0,visible:g=!0}=e;t.crisp=i,t.fill=s,t.stroke=r,t.strokeWidth=n,t.fillOpacity=o,t.strokeOpacity=a,t.lineDash=l,t.lineDashOffset=c,t.fillShadow=u,t.topLeftCornerRadius=h?d:0,t.topRightCornerRadius=p?d:0,t.bottomRightCornerRadius=f?d:0,t.bottomLeftCornerRadius=m?d:0,t.visible=g}function RB(t){var e=t,{datum:i,isHighlighted:s,style:r,highlightStyle:n,formatter:o,seriesId:a,ctx:{callbackCache:l}}=e,c=xs(e,["datum","isHighlighted","style","highlightStyle","formatter","seriesId","ctx"]),u,d,h,p,f,m;const{fill:g,fillOpacity:y,stroke:v,strokeWidth:C}=Jt(s&&n,r),{strokeOpacity:b,fillShadow:T,lineDash:A,lineDashOffset:I,cornerRadius:D=0,topLeftCornerRadius:F=!0,topRightCornerRadius:B=!0,bottomRightCornerRadius:U=!0,bottomLeftCornerRadius:H=!0}=r;let R;return o&&(R=l.call(o,Se({datum:i.datum,xKey:i.xKey,fill:g,stroke:v,strokeWidth:C,cornerRadius:D,highlighted:s,seriesId:a},c))),{fill:(u=R==null?void 0:R.fill)!=null?u:g,stroke:(d=R==null?void 0:R.stroke)!=null?d:v,strokeWidth:(h=R==null?void 0:R.strokeWidth)!=null?h:C,fillOpacity:(p=R==null?void 0:R.fillOpacity)!=null?p:y,strokeOpacity:(f=R==null?void 0:R.strokeOpacity)!=null?f:b,lineDash:A,lineDashOffset:I,fillShadow:T,cornerRadius:(m=R==null?void 0:R.cornerRadius)!=null?m:D,topLeftCornerRadius:F,topRightCornerRadius:B,bottomRightCornerRadius:U,bottomLeftCornerRadius:H}}function MB(t=[]){const[e,i]=t;return!(e!==0||i!==1)}var sT=t=>{var e;return zC((e=t.yValue)!=null?e:0)};function zy(t,e,i){const{startingX:s,startingY:r}=Aee(t,e);return{isVertical:t,calculate:(o,a)=>{let l=t?o.x:s,c=t?r:o.y,u=t?o.width:0,d=t?0:o.height;const{opacity:h}=o;a&&(isNaN(l)||isNaN(c))&&({x:l,y:c}=a,u=t?a.width:0,d=t?0:a.height,t&&!sT(a)?c+=a.height:!t&&sT(a)&&(l+=a.width));let p;return o.clipBBox==null?p=void 0:sT(o)?p=t?new lt(l,c-d,u,d):new lt(l-u,c,u,d):p=new lt(l,c,u,d),{x:l,y:c,width:u,height:d,clipBBox:p,opacity:h}},mode:i}}function _ee(t,e){return{isVertical:t,calculate:i=>({x:t?i.x:i.x+i.width/2,y:t?i.y+i.height/2:i.y,width:t?i.width:0,height:t?0:i.height,clipBBox:i.clipBBox,opacity:i.opacity}),mode:e}}function $y(t){const e=r=>r==null||isNaN(r.x)||isNaN(r.y);return{toFn:(r,n,o)=>{let a;return o==="removed"&&r.datum==null&&t.mode==="fade"?a=qe(Se({},Ky(r,n)),{opacity:0}):o==="removed"||e(n)?a=t.calculate(n,r.previousDatum):a={x:n.x,y:n.y,width:n.width,height:n.height,clipBBox:n.clipBBox,opacity:n.opacity},a},fromFn:(r,n,o)=>{o==="updated"&&e(n)?o="removed":o==="updated"&&e(r.previousDatum)&&(o="added");let a;o==="added"&&r.previousDatum==null&&t.mode==="fade"?a=qe(Se({},Ky(r,n)),{opacity:0}):o==="unknown"||o==="added"?a=t.calculate(n,r.previousDatum):a={x:r.x,y:r.y,width:r.width,height:r.height,clipBBox:r.clipBBox,opacity:r.opacity};const l=Xr[o];return qe(Se({},a),{phase:l})}}}function Aee(t,e){const i=e[t?"y":"x"];let s=1/0,r=0;return i?(t?r=i.scale.convert(Ei.is(i.scale)?0:Math.max(...i.range)):s=i.scale.convert(Ei.is(i.scale)?0:Math.min(...i.range)),{startingX:s,startingY:r}):{startingX:s,startingY:r}}function Ky(t,{x:e,y:i,width:s,height:r,clipBBox:n,opacity:o}){return{x:e,y:i,width:s,height:r,clipBBox:n,opacity:o}}function _P(t,e,i){if(t===void 0)return;const{x:s,y:r,width:n,height:o}=t;return e.inverseTransformBBox(new lt(s,r,n,o)).clip(i)}function DB(t,e,i){if(e.enabled&&i){const{x:s,y:r,text:n,textAlign:o,textBaseline:a}=i,{color:l,fontStyle:c,fontWeight:u,fontSize:d,fontFamily:h}=e;t.setProperties({visible:!0,x:s,y:r,text:n,fill:l,fontStyle:c,fontWeight:u,fontSize:d,fontFamily:h,textAlign:o,textBaseline:a})}else t.visible=!1}function PB({isPositive:t,isVertical:e,placement:i,padding:s=0,rect:r}){let n=r.x+r.width/2,o=r.y+r.height/2,a="center",l="middle";switch(i){case"start":{e?(o=t?r.y+r.height+s:r.y-s,l=t?"top":"bottom"):(n=t?r.x-s:r.x+r.width+s,a=t?"start":"end");break}case"outside":case"end":{e?(o=t?r.y-s:r.y+r.height+s,l=t?"bottom":"top"):(n=t?r.x+r.width+s:r.x-s,a=t?"start":"end");break}}return{x:n,y:o,textAlign:a,textBaseline:l}}var AP=class extends TB{constructor(t){super({moduleCtx:t,directionKeys:pp,directionNames:fp,pickModes:[0],pathsPerSeries:0,hasHighlightedLabels:!0,datumSelectionGarbageCollection:!1,animationAlwaysUpdateSelections:!0,animationResetFns:{datum:Ky,label:Gc}}),this.properties=new Js}processData(t){return Fe(this,null,function*(){var e,i,s;if(!this.properties.isValid()||!this.data)return;const{seriesGrouping:{groupIndex:r=this.id}={},data:n=[]}=this,{xKey:o,yKey:a,normalizedTo:l}=this.properties,c=!this.ctx.animationManager.isSkipped(),u=(e=this.getCategoryAxis())==null?void 0:e.scale,d=(i=this.getValueAxis())==null?void 0:i.scale,{isContinuousX:h,xScaleType:p,yScaleType:f}=this.getScaleInformation({xScale:u,yScale:d}),m=`bar-stack-${r}-yValues`,g=`${m}-trailing`,y=[];gi(l)&&y.push(fS([m,g],Math.abs(l),"range")),c&&this.processedData&&y.push(hp(this.processedData)),c&&y.push(cm());const v=this.visible?{}:{forceValue:0},{processedData:C}=yield this.requestDataModel(t,n,{props:[mr(o,p,{id:"xValue"}),Vi(a,f,Se({id:"yValue-raw",invalidValue:null},v)),...iu(a,"normal","current",Se({id:"yValue-end",rangeId:"yValue-range",invalidValue:null,missingValue:0,groupId:m,separateNegative:!0},v),f),...iu(a,"trailing","current",Se({id:"yValue-start",invalidValue:null,missingValue:0,groupId:g,separateNegative:!0},v),f),...h?[$8]:[],...y],groupByKeys:!0,groupByData:!1});this.smallestDataInterval=(s=C.reduced)==null?void 0:s.smallestKeyInterval,this.animationState.transition("updateData")})}getSeriesDomain(t){var e;const{processedData:i,dataModel:s,smallestDataInterval:r}=this;if(!i||!s||i.data.length===0)return[];const n=this.getCategoryAxis(),o=this.getValueAxis(),a=s.resolveProcessedDataDefById(this,"xValue"),l=s.getDomain(this,"xValue","key",i),c=s.getDomain(this,"yValue-end","value",i);if(t===this.getCategoryDirection()){if((a==null?void 0:a.def.type)==="key"&&a.def.valueType==="category")return l;const u=gi(r)?r*.5:0,d=(e=bl(l))!=null?e:[NaN,NaN],h=d[0]+-u,p=d[1]+u;return Pn([h,p],n)}else{if(this.getValueAxis()instanceof gp)return Pn(c,o);{const u=[Math.min(0,c[0]),Math.max(0,c[1])];return Pn(u,o)}}}createNodeData(){return Fe(this,null,function*(){const{dataModel:t}=this,e=this.getCategoryAxis(),i=this.getValueAxis();if(!t||!e||!i||!this.properties.isValid())return;const s=e.scale,r=i.scale,{xKey:n,yKey:o,xName:a,yName:l,fill:c,stroke:u,strokeWidth:d,cornerRadius:h,legendItemName:p,label:f}=this.properties,m=i.isReversed(),{barWidth:g,groupIndex:y}=this.updateGroupScale(e),v=Ei.is(s)?g*-.5:0,C=t.resolveProcessedDataIndexById(this,"xValue"),b=t.resolveProcessedDataIndexById(this,"yValue-raw"),T=t.resolveProcessedDataIndexById(this,"yValue-start"),A=t.resolveProcessedDataIndexById(this,"yValue-end"),I=t.resolveProcessedDataIndexById(this,"yValue-range"),D=!this.ctx.animationManager.isSkipped(),F={itemId:o,nodeData:[],labelData:[],scales:this.calculateScaling(),visible:this.visible||D},{groupScale:B,processedData:U}=this;return U==null||U.data.forEach(({keys:H,datum:R,values:L,aggValues:_})=>{L.forEach((w,S)=>{var x;const E=H[C],M=s.convert(E),O=+w[A],V=+w[T],Y=w[b],$=Y>=0&&!Object.is(Y,-0),J=$!==m,G=(x=_==null?void 0:_[I][$?1:0])!=null?x:0,Z=M+B.convert(String(y))+v;if(isNaN(O))return;const N=r.convert(O),P=r.convert(V),j=this.getBarDirection()==="x",X=r.convert(G),ie=r.convert(0),ee={x:j?Math.min(N,P):Z,y:j?Z:Math.min(N,P),width:j?Math.abs(P-N):g,height:j?g:Math.abs(P-N)},re=new lt(ee.x,ee.y,ee.width,ee.height),oe={x:j?Math.min(ie,X):Z,y:j?Z:Math.min(ie,X),width:j?Math.abs(ie-X):g,height:j?g:Math.abs(ie-X)},{fontStyle:ue,fontWeight:se,fontSize:le,fontFamily:ne,color:fe,placement:me}=f,ge=this.getLabelText(this.properties.label,{datum:R[S],value:Y,xKey:n,yKey:o,xName:a,yName:l,legendItemName:p},ze=>gi(ze)?ze.toFixed(2):String(ze)),ve=ge?Se({text:ge,fill:fe,fontStyle:ue,fontWeight:se,fontSize:le,fontFamily:ne},PB({isPositive:$,isVertical:!j,placement:me,rect:ee})):void 0,xe=this.shouldFlipXY()?ee.height:ee.width,De={series:this,itemId:o,datum:R[S],valueIndex:S,cumulativeValue:O,xValue:E,yValue:Y,yKey:o,xKey:n,capDefaults:{lengthRatioMultiplier:xe,lengthMax:xe},x:oe.x,y:oe.y,width:oe.width,height:oe.height,midPoint:{x:ee.x+ee.width/2,y:ee.y+ee.height/2},fill:c,stroke:u,opacity:1,strokeWidth:d,cornerRadius:h,topLeftCornerRadius:j!==J,topRightCornerRadius:J,bottomRightCornerRadius:j===J,bottomLeftCornerRadius:!J,clipBBox:re,label:ve,missing:Y==null};F.nodeData.push(De),F.labelData.push(De)})}),F})}nodeFactory(){return new an}updateDatumSelection(t){return Fe(this,null,function*(){return t.datumSelection.update(t.nodeData,e=>{e.tag=0},e=>Ou(e.xValue,e.valueIndex))})}updateDatumNodes(t){return Fe(this,null,function*(){if(!this.properties.isValid())return;const{yKey:e,stackGroup:i,fill:s,fillOpacity:r,stroke:n,strokeWidth:o,strokeOpacity:a,lineDash:l,lineDashOffset:c,formatter:u,shadow:d,highlightStyle:{item:h}}=this.properties,p=this.axes.x,f=MB(p==null?void 0:p.visibleRange),m=this.getCategoryDirection()==="x";t.datumSelection.each((g,y)=>{var v,C,b,T;const A={fill:s,stroke:n,fillOpacity:r,strokeOpacity:a,lineDash:l,lineDashOffset:c,fillShadow:d,strokeWidth:this.getStrokeWidth(o),cornerRadius:y.cornerRadius,topLeftCornerRadius:y.topLeftCornerRadius,topRightCornerRadius:y.topRightCornerRadius,bottomRightCornerRadius:y.bottomRightCornerRadius,bottomLeftCornerRadius:y.bottomLeftCornerRadius},I=m?((C=(v=y.clipBBox)==null?void 0:v.width)!=null?C:y.width)>0:((T=(b=y.clipBBox)==null?void 0:b.height)!=null?T:y.height)>0,D=RB({datum:y,ctx:this.ctx,seriesId:this.id,isHighlighted:t.isHighlight,highlightStyle:h,yKey:e,style:A,formatter:u,stackGroup:i});D.crisp=f,D.visible=I,AB({rect:g,config:D})})})}updateLabelSelection(t){return Fe(this,null,function*(){const e=this.isLabelEnabled()?t.labelData:[];return t.labelSelection.update(e,i=>{i.tag=1,i.pointerEvents=1})})}updateLabelNodes(t){return Fe(this,null,function*(){t.labelSelection.each((e,i)=>{DB(e,this.properties.label,i.label)})})}getTooltipHtml(t){var e;const{id:i,processedData:s,ctx:{callbackCache:r}}=this,n=this.getCategoryAxis(),o=this.getValueAxis();if(!s||!this.properties.isValid()||!n||!o)return Lc;const{xKey:a,yKey:l,xName:c,yName:u,fill:d,stroke:h,strokeWidth:p,tooltip:f,formatter:m,stackGroup:g,legendItemName:y}=this.properties,{xValue:v,yValue:C,datum:b,itemId:T}=t,A=n.formatDatum(v),I=o.formatDatum(C),D=Zi(u),F=Zi(A+": "+I);let B;m&&(B=r.call(m,{seriesId:i,datum:b,xKey:a,yKey:l,stackGroup:g,fill:d,stroke:h,strokeWidth:this.getStrokeWidth(p),highlighted:!1}));const U=(e=B==null?void 0:B.fill)!=null?e:d;return f.toTooltipHtml({title:D,content:F,backgroundColor:U},Se({seriesId:i,itemId:T,datum:b,xKey:a,yKey:l,xName:c,yName:u,stackGroup:g,title:D,color:U,legendItemName:y},this.getModuleTooltipParams()))}getLegendData(t){var e,i;const{showInLegend:s}=this.properties;if(t!=="category"||!((e=this.data)!=null&&e.length)||!this.properties.isValid()||!s)return[];const{yKey:r,yName:n,fill:o,stroke:a,strokeWidth:l,fillOpacity:c,strokeOpacity:u,legendItemName:d,visible:h}=this.properties;return[{legendType:"category",id:this.id,itemId:r,seriesId:this.id,enabled:h,label:{text:(i=d??n)!=null?i:r},marker:{fill:o,fillOpacity:c,stroke:a,strokeWidth:l,strokeOpacity:u},legendItemName:d}]}animateEmptyUpdateReady({datumSelection:t,labelSelection:e,annotationSelections:i}){const s=$y(zy(this.isVertical(),this.axes,"normal"));Ji(this.id,"nodes",this.ctx.animationManager,[t],s),Mi(this,"labels",this.ctx.animationManager,e),Mi(this,"annotations",this.ctx.animationManager,...i)}animateWaitingUpdateReady(t){var e,i,s;const{datumSelection:r,labelSelection:n,annotationSelections:o,previousContextData:a}=t;this.ctx.animationManager.stopByAnimationGroupId(this.id);const l=(i=(e=this.processedData)==null?void 0:e.reduced)==null?void 0:i.diff,c=a==null?"fade":"normal",u=$y(zy(this.isVertical(),this.axes,c));Ji(this.id,"nodes",this.ctx.animationManager,[r],u,(h,p)=>Ou(p.xValue,p.valueIndex),l),((s=l==null?void 0:l.changed)!=null?s:!0)&&(Mi(this,"labels",this.ctx.animationManager,n),Mi(this,"annotations",this.ctx.animationManager,...o))}isLabelEnabled(){return this.properties.label.enabled}computeFocusBounds({datumIndex:t,seriesRect:e}){var i;const s=(i=this.contextNodeData)==null?void 0:i.nodeData[t].clipBBox;return _P(s,this.contentGroup,e)}};AP.className="BarSeries";AP.type="bar";var Ree={type:"series",optionsKey:"series[]",packageType:"community",chartTypes:["cartesian"],identifier:"bar",instanceConstructor:AP,stackable:!0,groupable:!0,defaultAxes:[{type:"number",position:"left"},{type:"category",position:"bottom"}],swapDefaultAxesCondition:t=>(t==null?void 0:t.direction)==="horizontal",themeTemplate:{series:{__extends__:Dc,direction:"vertical",fillOpacity:1,strokeWidth:0,lineDash:[0],lineDashOffset:0,label:{enabled:!1,fontWeight:"normal",fontSize:12,fontFamily:Ks,color:em,placement:"inside"},shadow:{enabled:!1,color:tm,xOffset:3,yOffset:3,blur:5}}},enterpriseThemeTemplate:{series:{errorBar:{cap:{lengthRatio:.3}}}},paletteFactory:lE},hL=t=>{const e=Ka.fromString(t),[i,s,r]=Ka.RGBtoOKLCH(e.r,e.g,e.b);return{l:i,c:s,h:r,a:e.a}},Mee=(t,e,i)=>{i=Zt(0,i,1);let s,r;if(Number.isNaN(t.h)&&Number.isNaN(e.h))s=0,r=0;else if(Number.isNaN(t.h))s=e.h,r=e.c;else if(Number.isNaN(e.h))s=t.h,r=t.c;else{const a=t.h;let l=e.h;const c=e.h-t.h;c>180?l-=360:c<-180&&(l+=360),s=a*(1-i)+l*i,r=t.c*(1-i)+e.c*i}const n=t.l*(1-i)+e.l*i,o=t.a*(1-i)+e.a*i;return Ka.fromOKLCH(n,r,s,o)},vp=class{constructor(){this.type="color",this.invalid=!0,this.domain=[0,1],this.range=["red","blue"],this.parsedRange=this.range.map(hL)}update(){const{domain:t,range:e}=this;t.length<2&&(Be.warnOnce("`colorDomain` should have at least 2 values."),t.length===0?t.push(0,1):t.length===1&&t.push(t[0]+1));for(let i=1;i<t.length;i++){const s=t[i-1],r=t[i];if(s>=r){Be.warnOnce("`colorDomain` values should be supplied in ascending order."),t.sort((n,o)=>n-o);break}}if(e.length<t.length)for(let i=e.length;i<t.length;i++)e.push(e.length>0?e[0]:"black");this.parsedRange=this.range.map(hL)}convert(t){this.refresh();const{domain:e,range:i,parsedRange:s}=this,r=e[0],n=e.at(-1),o=i[0],a=i[i.length-1];if(t<=r)return o;if(t>=n)return a;let l,c;if(e.length===2){const h=(t-r)/(n-r),p=1/(i.length-1);l=i.length<=2?0:Math.min(Math.floor(h*(i.length-1)),i.length-2),c=(h-l*p)/p}else{for(l=0;l<e.length-2&&!(t<e[l+1]);l++);const h=e[l],p=e[l+1];c=(t-h)/(p-h)}const u=s[l],d=s[l+1];return Mee(u,d,c).toRgbaString()}refresh(){this.invalid&&(this.invalid=!1,this.update(),this.invalid&&Be.warnOnce("Expected update to not invalidate scale"))}};q([lr],vp.prototype,"domain",2);q([lr],vp.prototype,"range",2);var RP=class extends jn{constructor(){super(...arguments),this.maxSize=30}};q([te(Ge),Qe({redraw:3})],RP.prototype,"maxSize",2);q([te(qx,{optional:!0}),Qe({redraw:3})],RP.prototype,"domain",2);var IB=class extends Bs{constructor(){super(...arguments),this.placement="top"}};q([te(PD)],IB.prototype,"placement",2);var br=class extends md{constructor(){super(...arguments),this.colorRange=["#ffff00","#00ff00","#0000ff"],this.marker=new RP,this.label=new IB,this.tooltip=new Un}};q([te($e)],br.prototype,"xKey",2);q([te($e)],br.prototype,"yKey",2);q([te($e)],br.prototype,"sizeKey",2);q([te($e,{optional:!0})],br.prototype,"labelKey",2);q([te($e,{optional:!0})],br.prototype,"colorKey",2);q([te($e,{optional:!0})],br.prototype,"xName",2);q([te($e,{optional:!0})],br.prototype,"yName",2);q([te($e,{optional:!0})],br.prototype,"sizeName",2);q([te($e,{optional:!0})],br.prototype,"labelName",2);q([te($e,{optional:!0})],br.prototype,"colorName",2);q([te(qx,{optional:!0})],br.prototype,"colorDomain",2);q([te(qo)],br.prototype,"colorRange",2);q([te($e,{optional:!0})],br.prototype,"title",2);q([te(rt)],br.prototype,"marker",2);q([te(rt)],br.prototype,"label",2);q([te(rt)],br.prototype,"tooltip",2);var Dee=class extends aP{constructor(t,e,i,s){super(t,e,i,s),this.sizeKey=s.properties.sizeKey}},MP=class extends vd{constructor(t){super({moduleCtx:t,directionKeys:pp,directionNames:fp,pickModes:[2,3,0],pathsPerSeries:0,hasMarkers:!0,markerSelectionGarbageCollection:!1,animationResetFns:{label:Gc,marker:s0}}),this.NodeEvent=Dee,this.properties=new br,this.sizeScale=new nl,this.colorScale=new vp}processData(t){return Fe(this,null,function*(){var e,i,s,r;if(!this.properties.isValid()||this.data==null||!this.visible)return;const n=(e=this.axes.x)==null?void 0:e.scale,o=(i=this.axes.y)==null?void 0:i.scale,{xScaleType:a,yScaleType:l}=this.getScaleInformation({xScale:n,yScale:o}),c=this.colorScale.type,u=this.sizeScale.type,{xKey:d,yKey:h,sizeKey:p,labelKey:f,colorDomain:m,colorRange:g,colorKey:y,marker:v}=this.properties,{dataModel:C,processedData:b}=yield this.requestDataModel(t,this.data,{props:[mr(d,a,{id:"xKey-raw"}),mr(h,l,{id:"yKey-raw"}),...f?[mr(f,"band",{id:"labelKey-raw"})]:[],Vi(d,a,{id:"xValue"}),Vi(h,l,{id:"yValue"}),Vi(p,u,{id:"sizeValue"}),...y?[Vi(y,c,{id:"colorValue"})]:[],...f?[Vi(f,"band",{id:"labelValue"})]:[]]}),T=C.resolveProcessedDataIndexById(this,"sizeValue"),A=(s=b.domain.values[T])!=null?s:[];if(this.sizeScale.domain=v.domain?v.domain:A,y){const I=C.resolveProcessedDataIndexById(this,"colorValue");this.colorScale.domain=(r=m??b.domain.values[I])!=null?r:[],this.colorScale.range=g,this.colorScale.update()}this.animationState.transition("updateData")})}getSeriesDomain(t){const{dataModel:e,processedData:i}=this;if(!i||!e)return[];const s=t==="x"?"xValue":"yValue",r=e.resolveProcessedDataDefById(this,s),n=e.getDomain(this,s,"value",i);if((r==null?void 0:r.def.type)==="value"&&(r==null?void 0:r.def.valueType)==="category")return n;const o=this.axes[t];return Pn(bl(n),o)}createNodeData(){return Fe(this,null,function*(){var t,e,i;const{axes:s,dataModel:r,processedData:n,colorScale:o,sizeScale:a}=this,{xKey:l,yKey:c,sizeKey:u,labelKey:d,xName:h,yName:p,sizeName:f,labelName:m,label:g,colorKey:y,marker:v,visible:C}=this.properties,b=fl(v.shape),{placement:T}=g,A=s.x,I=s.y;if(!(r&&n&&C&&A&&I))return;const D=r.resolveProcessedDataIndexById(this,"xValue"),F=r.resolveProcessedDataIndexById(this,"yValue"),B=u?r.resolveProcessedDataIndexById(this,"sizeValue"):-1,U=y?r.resolveProcessedDataIndexById(this,"colorValue"):-1,H=d?r.resolveProcessedDataIndexById(this,"labelValue"):-1,R=A.scale,L=I.scale,_=((t=R.bandwidth)!=null?t:0)/2,w=((e=L.bandwidth)!=null?e:0)/2,S=[];a.range=[v.size,v.maxSize];const x=g.getFont();for(const{values:E,datum:M}of(i=n.data)!=null?i:[]){const O=E[D],V=E[F],Y=R.convert(O)+_,$=L.convert(V)+w,J=this.getLabelText(g,{value:d?E[H]:V,datum:M,xKey:l,yKey:c,sizeKey:u,labelKey:d,xName:h,yName:p,sizeName:f,labelName:m}),G=ri.getTextSize(String(J),x),Z=u?a.convert(E[B]):v.size,N=y?o.convert(E[U]):void 0;S.push({series:this,itemId:c,yKey:c,xKey:l,datum:M,xValue:O,yValue:V,sizeValue:E[B],point:{x:Y,y:$,size:Z},midPoint:{x:Y,y:$},fill:N,label:Se({text:J},G),marker:b,placement:T})}return{itemId:c,nodeData:S,labelData:S,scales:this.calculateScaling(),visible:this.visible}})}isPathOrSelectionDirty(){return this.properties.marker.isDirty()}getLabelData(){var t,e;return(e=(t=this.contextNodeData)==null?void 0:t.labelData)!=null?e:[]}markerFactory(){const{shape:t}=this.properties.marker,e=fl(t);return new e}updateMarkerSelection(t){return Fe(this,null,function*(){const{nodeData:e,markerSelection:i}=t;this.properties.marker.isDirty()&&(i.clear(),i.cleanup());const s=this.properties.marker.enabled?e:[];return i.update(s,void 0,r=>Ou([r.xValue,r.yValue,r.label.text]))})}updateMarkerNodes(t){return Fe(this,null,function*(){const{markerSelection:e,isHighlight:i}=t,{xKey:s,yKey:r,sizeKey:n,labelKey:o,marker:a}=this.properties,l=Jt(i&&this.properties.highlightStyle.item,a.getStyle());this.sizeScale.range=[a.size,a.maxSize],e.each((c,u)=>{this.updateMarkerStyle(c,a,{datum:u,highlighted:i,xKey:s,yKey:r,sizeKey:n,labelKey:o},l)}),i||this.properties.marker.markClean()})}updateLabelSelection(t){return Fe(this,null,function*(){var e,i;const s=this.properties.label.enabled?(i=(e=this.chart)==null?void 0:e.placeLabels().get(this))!=null?i:[]:[];return t.labelSelection.update(s.map(r=>qe(Se({},r.datum),{point:{x:r.x,y:r.y,size:r.datum.point.size}})))})}updateLabelNodes(t){return Fe(this,null,function*(){const{label:e}=this.properties;t.labelSelection.each((i,s)=>{var r,n,o,a;i.text=s.label.text,i.fill=e.color,i.x=(n=(r=s.point)==null?void 0:r.x)!=null?n:0,i.y=(a=(o=s.point)==null?void 0:o.y)!=null?a:0,i.fontStyle=e.fontStyle,i.fontWeight=e.fontWeight,i.fontSize=e.fontSize,i.fontFamily=e.fontFamily,i.textAlign="left",i.textBaseline="top"})})}getTooltipHtml(t){var e;const i=this.axes.x,s=this.axes.y;if(!this.properties.isValid()||!i||!s)return Lc;const{xKey:r,yKey:n,sizeKey:o,labelKey:a,xName:l,yName:c,sizeName:u,labelName:d,marker:h,tooltip:p}=this.properties,f=(e=this.properties.title)!=null?e:c,m=Jt({fill:t.fill,strokeWidth:this.getStrokeWidth(h.strokeWidth)},h.getStyle()),{fill:g="gray"}=this.getMarkerStyle(h,{datum:t,highlighted:!1,xKey:r,yKey:n,sizeKey:o,labelKey:a},m),{datum:y,xValue:v,yValue:C,sizeValue:b,label:{text:T},itemId:A}=t,I=Zi(i.formatDatum(v)),D=Zi(s.formatDatum(C));let F=`<b>${Zi(l??r)}</b>: ${I}<br><b>${Zi(c??n)}</b>: ${D}`;return o&&(F+=`<br><b>${Zi(u??o)}</b>: ${Zi(String(b))}`),a&&(F=`<b>${Zi(d??a)}</b>: ${Zi(T)}<br>`+F),p.toTooltipHtml({title:f,content:F,backgroundColor:g},{datum:y,itemId:A,xKey:r,xName:l,yKey:n,yName:c,sizeKey:o,sizeName:u,labelKey:a,labelName:d,title:f,color:g,seriesId:this.id})}getLegendData(){var t,e;if(!((t=this.data)!=null&&t.length)||!this.properties.isValid())return[];const{yKey:i,yName:s,title:r,marker:n,visible:o}=this.properties,{shape:a,fill:l,stroke:c,fillOpacity:u,strokeOpacity:d,strokeWidth:h}=n;return[{legendType:"category",id:this.id,itemId:i,seriesId:this.id,enabled:o,label:{text:(e=r??s)!=null?e:i},marker:{shape:a,fill:l??"rgba(0, 0, 0, 0)",stroke:c??"rgba(0, 0, 0, 0)",fillOpacity:u??1,strokeOpacity:d??1,strokeWidth:h??0}}]}animateEmptyUpdateReady({markerSelection:t,labelSelection:e}){fP(this,this.ctx.animationManager,t),Mi(this,"labels",this.ctx.animationManager,e)}isLabelEnabled(){return this.properties.label.enabled}nodeFactory(){return new ft}getFormattedMarkerStyle(t){const{xKey:e,yKey:i,sizeKey:s,labelKey:r}=this.properties;return this.getMarkerStyle(this.properties.marker,{datum:t,xKey:e,yKey:i,sizeKey:s,labelKey:r,highlighted:!1})}computeFocusBounds(t){return r0(this,t)}};MP.className="BubbleSeries";MP.type="bubble";var Pee={type:"series",optionsKey:"series[]",packageType:"community",chartTypes:["cartesian"],identifier:"bubble",instanceConstructor:MP,defaultAxes:[{type:"number",position:"bottom"},{type:"number",position:"left"}],themeTemplate:{series:{__extends__:Dc,tooltip:{position:{type:"node"}},marker:{__extends__:Qg,maxSize:30,fillOpacity:.8},label:{enabled:!1,fontSize:12,fontFamily:Ks,color:Ti}}},paletteFactory:fm},Vs=class extends md{constructor(){super(...arguments),this.fillOpacity=1,this.strokeWidth=1,this.strokeOpacity=1,this.lineDash=[0],this.lineDashOffset=0,this.cornerRadius=0,this.areaPlot=!1,this.aggregation="sum",this.shadow=new Ia,this.label=new Bs,this.tooltip=new Un}};q([te($e)],Vs.prototype,"xKey",2);q([te($e,{optional:!0})],Vs.prototype,"yKey",2);q([te($e,{optional:!0})],Vs.prototype,"xName",2);q([te($e,{optional:!0})],Vs.prototype,"yName",2);q([te(mi,{optional:!0})],Vs.prototype,"fill",2);q([te(Si)],Vs.prototype,"fillOpacity",2);q([te(mi,{optional:!0})],Vs.prototype,"stroke",2);q([te(Ge)],Vs.prototype,"strokeWidth",2);q([te(Si)],Vs.prototype,"strokeOpacity",2);q([te(Fc)],Vs.prototype,"lineDash",2);q([te(Ge)],Vs.prototype,"lineDashOffset",2);q([te(Ge)],Vs.prototype,"cornerRadius",2);q([te(Et)],Vs.prototype,"areaPlot",2);q([te(rm,{optional:!0})],Vs.prototype,"bins",2);q([te(ls(["count","sum","mean"],"a histogram aggregation"))],Vs.prototype,"aggregation",2);q([te(Ge,{optional:!0})],Vs.prototype,"binCount",2);q([te(rt)],Vs.prototype,"shadow",2);q([te(rt)],Vs.prototype,"label",2);q([te(rt)],Vs.prototype,"tooltip",2);var pL=10,DP=class extends vd{constructor(t){super({moduleCtx:t,directionKeys:pp,directionNames:fp,pickModes:[0],datumSelectionGarbageCollection:!1,animationResetFns:{datum:Ky,label:Gc}}),this.properties=new Vs,this.calculatedBins=[]}deriveBins(t){const e=Jx(t[0],t[1],pL),i=vg(t[0],t[1],pL),[s]=e,r=n=>[n,n+i];return[[s-i,s],...e.map(r)]}calculateNiceBins(t,e){const i=Math.floor(t[0]),s=t[1],r=e||1,{start:n,binSize:o}=this.calculateNiceStart(i,s,r);return this.getBins(n,s,o,r)}getBins(t,e,i,s){const r=[],n=this.calculatePrecision(i);for(let o=0;o<s;o++){const a=Math.round((t+o*i)*n)/n;let l=Math.round((t+(o+1)*i)*n)/n;o===s-1&&(l=Math.max(l,e)),r[o]=[a,l]}return r}calculatePrecision(t){let e=10;if(isFinite(t)&&t>0)for(;t<1;)e*=10,t*=10;return e}calculateNiceStart(t,e,i){const s=Math.abs(e-t)/i,r=Math.floor(Math.log10(s)),n=Math.pow(10,r);return{start:Math.floor(t/n)*n,binSize:s}}processData(t){return Fe(this,null,function*(){var e,i;this.visible||(this.processedData=void 0,this.animationState.transition("updateData"));const{xKey:s,yKey:r,areaPlot:n,aggregation:o}=this.properties,a=(e=this.axes.x)==null?void 0:e.scale,l=(i=this.axes.y)==null?void 0:i.scale,{xScaleType:c,yScaleType:u}=this.getScaleInformation({yScale:l,xScale:a}),d=[mr(s,c),K8];if(r){let p=pA("groupAgg");o==="count"||(o==="sum"?p=H8("groupAgg"):o==="mean"&&(p=U8("groupAgg"))),n&&(p=fA("groupAgg",p)),d.push(Vi(r,u,{invalidValue:void 0}),p)}else{let p=pA("groupAgg");n&&(p=fA("groupAgg",p)),d.push(p)}const h=p=>{var f;const m=Pn(p.domain.keys[0]);if(m.length===0)return p.domain.groups=[],()=>[];const g=Qn(this.properties.binCount)?this.calculateNiceBins(m,this.properties.binCount):(f=this.properties.bins)!=null?f:this.deriveBins(m),y=g.length;return this.calculatedBins=[...g],v=>{const C=v.keys[0];for(let b=0;b<y;b++){const T=g[b];if(C>=T[0]&&C<T[1]||b===y-1&&C<=T[1])return T}return[]}};!this.ctx.animationManager.isSkipped()&&this.processedData&&d.push(hp(this.processedData,!1)),yield this.requestDataModel(t,this.data,{props:d,groupByFn:h}),this.animationState.transition("updateData")})}getSeriesDomain(t){var e,i,s,r;const{processedData:n,dataModel:o}=this;if(!n||!o||!this.calculatedBins.length)return[];const a=o.getDomain(this,"groupAgg","aggregate",n),l=(e=this.calculatedBins)==null?void 0:e[0][0],c=(r=this.calculatedBins)==null?void 0:r[((s=(i=this.calculatedBins)==null?void 0:i.length)!=null?s:0)-1][1];return Pn(t==="x"?[l,c]:a)}createNodeData(){return Fe(this,null,function*(){var t;const{id:e,axes:i,processedData:s,ctx:{callbackCache:r}}=this,n=i.x,o=i.y;if(!n||!o)return;const{scale:a}=n,{scale:l}=o,{xKey:c,yKey:u,xName:d,yName:h,fill:p,stroke:f,strokeWidth:m,cornerRadius:g}=this.properties,{formatter:y=F=>String(F.value),fontStyle:v,fontWeight:C,fontSize:b,fontFamily:T,color:A}=this.properties.label,I=[],D={itemId:(t=this.properties.yKey)!=null?t:this.id,nodeData:I,labelData:I,scales:this.calculateScaling(),animationValid:!0,visible:this.visible};return!this.visible||!s||s.type!=="grouped"||(s.data.forEach(F=>{var B;const{aggValues:[[U,H]]=[[0,0]],datum:R,datum:{length:L},keys:_,keys:[w,S]}=F,x=a.convert(w),E=a.convert(S),M=U+H,O=l.convert(0),V=l.convert(M),Y=Math.abs(E-x),$=Math.abs(V-O),J=Math.min(x,E),G=Math.min(O,V);let Z;M!==0&&(Z={text:(B=r.call(y,{value:M,datum:R,seriesId:e,xKey:c,yKey:u,xName:d,yName:h}))!=null?B:String(M),fontStyle:v,fontWeight:C,fontSize:b,fontFamily:T,fill:A,x:J+Y/2,y:G+$/2});const N={x:J+Y/2,y:G+$/2},P=o.isReversed();I.push({series:this,datum:R,aggregatedValue:M,frequency:L,domain:_,yKey:u,xKey:c,x:J,y:G,xValue:x,yValue:V,width:Y,height:$,midPoint:N,fill:p,stroke:f,cornerRadius:g,topLeftCornerRadius:!P,topRightCornerRadius:!P,bottomRightCornerRadius:P,bottomLeftCornerRadius:P,opacity:1,strokeWidth:m,label:Z})}),I.sort((F,B)=>F.x-B.x)),D})}nodeFactory(){return new an}updateDatumSelection(t){return Fe(this,null,function*(){const{nodeData:e,datumSelection:i}=t;return i.update(e,s=>{s.tag=0,s.crisp=!0},s=>s.domain.join("_"))})}updateDatumNodes(t){return Fe(this,null,function*(){const{isHighlight:e}=t,{fillOpacity:i,strokeOpacity:s,lineDash:r,lineDashOffset:n,shadow:o,highlightStyle:{item:{fill:a,fillOpacity:l=i,stroke:c,strokeWidth:u}}}=this.properties;t.datumSelection.each((d,h,p)=>{var f,m;const{cornerRadius:g,topLeftCornerRadius:y,topRightCornerRadius:v,bottomRightCornerRadius:C,bottomLeftCornerRadius:b}=h,T=e&&u!==void 0?u:h.strokeWidth,A=e?l:i;d.fill=(f=e?a:void 0)!=null?f:h.fill,d.stroke=(m=e?c:void 0)!=null?m:h.stroke,d.fillOpacity=A,d.strokeOpacity=s,d.strokeWidth=T,d.lineDash=r,d.lineDashOffset=n,d.topLeftCornerRadius=y?g:0,d.topRightCornerRadius=v?g:0,d.bottomRightCornerRadius=C?g:0,d.bottomLeftCornerRadius=b?g:0,d.fillShadow=o,d.zIndex=e?um.highlightedZIndex:p,d.visible=h.height>0})})}updateLabelSelection(t){return Fe(this,null,function*(){const{labelData:e,labelSelection:i}=t;return i.update(e,s=>{s.tag=1,s.pointerEvents=1,s.textAlign="center",s.textBaseline="middle"})})}updateLabelNodes(t){return Fe(this,null,function*(){const e=this.isLabelEnabled();t.labelSelection.each((i,s)=>{const r=s.label;r&&e?(i.text=r.text,i.x=r.x,i.y=r.y,i.fontStyle=r.fontStyle,i.fontWeight=r.fontWeight,i.fontSize=r.fontSize,i.fontFamily=r.fontFamily,i.fill=r.fill,i.visible=!0):i.visible=!1})})}initQuadTree(t){xP(t,EB(this.contentGroup.children[0]))}pickNodeClosestDatum(t){return EP(this,t)}getTooltipHtml(t){const e=this.axes.x,i=this.axes.y;if(!this.properties.isValid()||!e||!i)return Lc;const{xKey:s,yKey:r,xName:n,yName:o,fill:a,aggregation:l,tooltip:c}=this.properties,{aggregatedValue:u,frequency:d,domain:[h,p],itemId:f}=t,m=`${Zi(n??s)}: ${e.formatDatum(h)} - ${e.formatDatum(p)}`;let g=r?`<b>${Zi(o??r)} (${l})</b>: ${i.formatDatum(u)}<br>`:"";g+=`<b>Frequency</b>: ${d}`;const y={title:m,backgroundColor:a,content:g};return c.toTooltipHtml(y,{datum:{data:t.datum,aggregatedValue:t.aggregatedValue,domain:t.domain,frequency:t.frequency},itemId:f,xKey:s,xName:n,yKey:r,yName:o,color:a,title:m,seriesId:this.id})}getLegendData(t){var e,i;if(!((e=this.data)!=null&&e.length)||t!=="category")return[];const{xKey:s,yName:r,fill:n,fillOpacity:o,stroke:a,strokeWidth:l,strokeOpacity:c,visible:u}=this.properties;return[{legendType:"category",id:this.id,itemId:s,seriesId:this.id,enabled:u,label:{text:(i=r??s)!=null?i:"Frequency"},marker:{fill:n??"rgba(0, 0, 0, 0)",stroke:a??"rgba(0, 0, 0, 0)",fillOpacity:o,strokeOpacity:c,strokeWidth:l}}]}animateEmptyUpdateReady({datumSelection:t,labelSelection:e}){const i=$y(zy(!0,this.axes,"normal"));Ji(this.id,"datums",this.ctx.animationManager,[t],i),Mi(this,"labels",this.ctx.animationManager,e)}animateWaitingUpdateReady(t){var e,i;const s=(i=(e=this.processedData)==null?void 0:e.reduced)==null?void 0:i.diff,r=$y(zy(!0,this.axes,"normal"));Ji(this.id,"datums",this.ctx.animationManager,[t.datumSelection],r,(n,o)=>Ou(o.domain),s),Mi(this,"labels",this.ctx.animationManager,t.labelSelection)}isLabelEnabled(){return this.properties.label.enabled}computeFocusBounds({datumIndex:t,seriesRect:e}){var i;return _P((i=this.contextNodeData)==null?void 0:i.nodeData[t],this.contentGroup,e)}};DP.className="HistogramSeries";DP.type="histogram";var Iee={type:"series",optionsKey:"series[]",packageType:"community",chartTypes:["cartesian"],identifier:"histogram",instanceConstructor:DP,defaultAxes:[{type:"number",position:"bottom"},{type:"number",position:"left"}],themeTemplate:{series:{__extends__:Dc,strokeWidth:1,fillOpacity:1,strokeOpacity:1,lineDash:[0],lineDashOffset:0,label:{enabled:!1,fontSize:12,fontFamily:Ks,color:em},shadow:{enabled:!1,color:tm,xOffset:3,yOffset:3,blur:5}}},paletteFactory:({takeColors:t})=>{const{fills:[e],strokes:[i]}=t(1);return{fill:e,stroke:i}}},ln=class extends md{constructor(){super(...arguments),this.stroke="#874349",this.strokeWidth=2,this.strokeOpacity=1,this.lineDash=[0],this.lineDashOffset=0,this.marker=new jn,this.label=new Bs,this.tooltip=new Un,this.connectMissingData=!1}};q([te($e)],ln.prototype,"xKey",2);q([te($e)],ln.prototype,"yKey",2);q([te($e,{optional:!0})],ln.prototype,"xName",2);q([te($e,{optional:!0})],ln.prototype,"yName",2);q([te($e,{optional:!0})],ln.prototype,"title",2);q([te(mi)],ln.prototype,"stroke",2);q([te(Ge)],ln.prototype,"strokeWidth",2);q([te(Si)],ln.prototype,"strokeOpacity",2);q([te(Fc)],ln.prototype,"lineDash",2);q([te(Ge)],ln.prototype,"lineDashOffset",2);q([te(rt)],ln.prototype,"marker",2);q([te(rt)],ln.prototype,"label",2);q([te(rt)],ln.prototype,"tooltip",2);q([te(Et)],ln.prototype,"connectMissingData",2);var PP=class extends vd{constructor(t){super({moduleCtx:t,directionKeys:pp,directionNames:fp,hasMarkers:!0,pickModes:[2,3,0],markerSelectionGarbageCollection:!1,animationResetFns:{path:bP({getOpacity:()=>this.getOpacity()}),label:Gc,marker:(e,i)=>Se(Se({},s0()),jy(e,i))}}),this.properties=new ln}processData(t){return Fe(this,null,function*(){var e,i;if(!this.properties.isValid()||this.data==null)return;const{xKey:s,yKey:r}=this.properties,n=!this.ctx.animationManager.isSkipped(),o=(e=this.axes.x)==null?void 0:e.scale,a=(i=this.axes.y)==null?void 0:i.scale,{isContinuousX:l,xScaleType:c,yScaleType:u}=this.getScaleInformation({xScale:o,yScale:a}),d=[];l||d.push(mr(s,c,{id:"xKey"})),n&&(d.push(cm(l?["xValue"]:void 0)),this.processedData&&d.push(hp(this.processedData))),d.push(Vi(s,c,{id:"xValue"}),Vi(r,u,{id:"yValue",invalidValue:void 0})),yield this.requestDataModel(t,this.data,{props:d}),this.animationState.transition("updateData")})}getSeriesDomain(t){const{axes:e,dataModel:i,processedData:s}=this;if(!s||!i)return[];const r=e.x,n=e.y,o=i.resolveProcessedDataDefById(this,"xValue");if(t==="x"){const a=i.getDomain(this,"xValue","value",s);return(o==null?void 0:o.def.type)==="value"&&o.def.valueType==="category"?a:Pn(bl(a),r)}else{const a=i.getDomain(this,"yValue","value",s);return Pn(a,n)}}createNodeData(){return Fe(this,null,function*(){var t,e,i;const{processedData:s,dataModel:r,axes:n}=this,o=n.x,a=n.y;if(!s||!r||!o||!a)return;const{xKey:l,yKey:c,xName:u,yName:d,marker:h,label:p,connectMissingData:f,legendItemName:m}=this.properties,g=o.scale,y=a.scale,v=((t=g.bandwidth)!=null?t:0)/2,C=((e=y.bandwidth)!=null?e:0)/2,b=[],T=h.enabled?h.size:0,A=r.resolveProcessedDataIndexById(this,"xValue"),I=r.resolveProcessedDataIndexById(this,"yValue");let D=!0,F;for(let B=0;B<s.data.length;B++){const{datum:U,values:H}=F??s.data[B],R=H[A],L=H[I];if(L===void 0)D=!f;else{const _=g.convert(R)+v;if(isNaN(_)){D=!f,F=void 0;continue}F=((i=s.data[B+1])==null?void 0:i.values[I])===void 0?void 0:s.data[B+1];const w=y.convert(L)+C,S=this.getLabelText(p,{value:L,datum:U,xKey:l,yKey:c,xName:u,yName:d,legendItemName:m},x=>gi(x)?x.toFixed(2):String(x));b.push({series:this,datum:U,yKey:c,xKey:l,point:{x:_,y:w,moveTo:D,size:T},midPoint:{x:_,y:w},yValue:L,xValue:R,capDefaults:{lengthRatioMultiplier:this.properties.marker.getDiameter(),lengthMax:1/0},label:S?{text:S,fontStyle:p.fontStyle,fontWeight:p.fontWeight,fontSize:p.fontSize,fontFamily:p.fontFamily,textAlign:"center",textBaseline:"bottom",fill:p.color}:void 0}),D=!1}}return{itemId:c,nodeData:b,labelData:b,scales:this.calculateScaling(),visible:this.visible}})}isPathOrSelectionDirty(){return this.properties.marker.isDirty()}markerFactory(){const{shape:t}=this.properties.marker,e=fl(t);return new e}updatePathNodes(t){return Fe(this,null,function*(){const{paths:[e],opacity:i,visible:s,animationEnabled:r}=t;e.setProperties({fill:void 0,lineJoin:"round",pointerEvents:1,opacity:i,stroke:this.properties.stroke,strokeWidth:this.getStrokeWidth(this.properties.strokeWidth),strokeOpacity:this.properties.strokeOpacity,lineDash:this.properties.lineDash,lineDashOffset:this.properties.lineDashOffset}),r||(e.visible=s),gS(this,e)})}updateMarkerSelection(t){return Fe(this,null,function*(){let{nodeData:e}=t;const{markerSelection:i}=t,{shape:s,enabled:r}=this.properties.marker;return e=s&&r?e:[],this.properties.marker.isDirty()&&(i.clear(),i.cleanup()),i.update(e,void 0,n=>Ou(n.xValue))})}updateMarkerNodes(t){return Fe(this,null,function*(){const{markerSelection:e,isHighlight:i}=t,{xKey:s,yKey:r,stroke:n,strokeWidth:o,strokeOpacity:a,marker:l,highlightStyle:c}=this.properties,u=Jt(i&&c.item,l.getStyle(),{stroke:n,strokeWidth:o,strokeOpacity:a}),d=this.ctx.animationManager.isSkipped();e.each((h,p)=>{this.updateMarkerStyle(h,l,{datum:p,highlighted:i,xKey:s,yKey:r},u,{applyTranslation:d})}),i||l.markClean()})}updateLabelSelection(t){return Fe(this,null,function*(){return t.labelSelection.update(this.isLabelEnabled()?t.labelData:[])})}updateLabelNodes(t){return Fe(this,null,function*(){const{enabled:e,fontStyle:i,fontWeight:s,fontSize:r,fontFamily:n,color:o}=this.properties.label;t.labelSelection.each((a,l)=>{const{point:c,label:u}=l;l&&u&&e?(a.fontStyle=i,a.fontWeight=s,a.fontSize=r,a.fontFamily=n,a.textAlign=u.textAlign,a.textBaseline=u.textBaseline,a.text=u.text,a.x=c.x,a.y=c.y-10,a.fill=o,a.visible=!0):a.visible=!1})})}getTooltipHtml(t){var e;const i=this.axes.x,s=this.axes.y;if(!this.properties.isValid()||!i||!s)return Lc;const{xKey:r,yKey:n,xName:o,yName:a,strokeWidth:l,marker:c,tooltip:u}=this.properties,{datum:d,xValue:h,yValue:p,itemId:f}=t,m=i.formatDatum(h),g=s.formatDatum(p),y=Zi((e=this.properties.title)!=null?e:a),v=Zi(m+": "+g),C=Jt({fill:c.stroke},c.getStyle(),{strokeWidth:l}),{fill:b}=this.getMarkerStyle(c,{datum:t,xKey:r,yKey:n,highlighted:!1},C);return u.toTooltipHtml({title:y,content:v,backgroundColor:b},Se({datum:d,itemId:f,xKey:r,xName:o,yKey:n,yName:a,title:y,color:b,seriesId:this.id},this.getModuleTooltipParams()))}getLegendData(t){var e,i,s,r,n,o,a,l,c,u;if(!((e=this.data)!=null&&e.length&&this.properties.isValid()&&t==="category"))return[];const{yKey:d,yName:h,stroke:p,strokeOpacity:f,strokeWidth:m,lineDash:g,title:y,marker:v,visible:C,legendItemName:b}=this.properties,T="rgba(0, 0, 0, 0)";return[{legendType:"category",id:this.id,itemId:d,legendItemName:b,seriesId:this.id,enabled:C,label:{text:(s=(i=b??y)!=null?i:h)!=null?s:d},marker:{shape:v.shape,fill:(r=v.fill)!=null?r:T,stroke:(o=(n=v.stroke)!=null?n:p)!=null?o:T,fillOpacity:(a=v.fillOpacity)!=null?a:1,strokeOpacity:(c=(l=v.strokeOpacity)!=null?l:f)!=null?c:1,strokeWidth:(u=v.strokeWidth)!=null?u:0,enabled:v.enabled},line:{stroke:p??T,strokeOpacity:f,strokeWidth:m,lineDash:g}}]}updatePaths(t){return Fe(this,null,function*(){this.updateLinePaths(t.paths,t.contextData)})}updateLinePaths(t,e){const{nodeData:i}=e,[s]=t,{path:r}=s;r.clear(!0);for(const n of i)n.point.moveTo?r.moveTo(n.point.x,n.point.y):r.lineTo(n.point.x,n.point.y);s.checkPathDirty()}animateEmptyUpdateReady(t){const{markerSelection:e,labelSelection:i,annotationSelections:s,contextData:r,paths:n}=t,{animationManager:o}=this.ctx;this.updateLinePaths(n,r),CP(this,o,...n),Ys([e],jy),gP(this,o,e),Mi(this,"labels",o,i),Mi(this,"annotations",o,...s)}animateReadyResize(t){const{contextData:e,paths:i}=t;this.updateLinePaths(i,e),super.animateReadyResize(t)}animateWaitingUpdateReady(t){var e,i;const{animationManager:s}=this.ctx,{markerSelection:r,labelSelection:n,annotationSelections:o,contextData:a,paths:l,previousContextData:c}=t,[u]=l;super.resetAllAnimation(t);const d=()=>{this.updateLinePaths(l,a)},h=()=>{s.skipCurrentBatch(),d()};if(a==null||c==null){d(),Hy(this,s,"added",r),Nv(this,"path_properties",s,"add",u),Mi(this,"labels",s,n),Mi(this,"annotations",s,...o);return}const p=wB(a,c,(i=(e=this.processedData)==null?void 0:e.reduced)==null?void 0:i.diff);if(p===void 0){h();return}else if(p.status==="no-op")return;Hy(this,s,void 0,r),Ji(this.id,"path_properties",s,[u],p.pathProperties),mB(this.id,"path_update",s,[u],p.path),p.hasMotion&&(Mi(this,"labels",s,n),Mi(this,"annotations",s,...o))}isLabelEnabled(){return this.properties.label.enabled}getBandScalePadding(){return{inner:1,outer:.1}}nodeFactory(){return new ft}getFormattedMarkerStyle(t){const{xKey:e,yKey:i}=this.properties;return this.getMarkerStyle(this.properties.marker,{datum:t,xKey:e,yKey:i,highlighted:!0})}computeFocusBounds(t){return r0(this,t)}};PP.className="LineSeries";PP.type="line";var Fee={type:"series",optionsKey:"series[]",packageType:"community",chartTypes:["cartesian"],identifier:"line",instanceConstructor:PP,defaultAxes:[{type:"number",position:"left"},{type:"category",position:"bottom"}],themeTemplate:{series:{__extends__:Dc,tooltip:{position:{type:"node"}},strokeWidth:2,strokeOpacity:1,lineDash:[0],lineDashOffset:0,marker:{__extends__:Qg,fillOpacity:1,strokeOpacity:1,strokeWidth:0},label:{enabled:!1,fontSize:12,fontFamily:Ks,color:Ti}}},enterpriseThemeTemplate:{series:{errorBar:{cap:{lengthRatio:1}}}},paletteFactory:t=>{const{marker:e}=fm(t);return{stroke:e.fill,marker:e}}},FB=class extends Bs{constructor(){super(...arguments),this.placement="top"}};q([te(PD)],FB.prototype,"placement",2);var cn=class extends md{constructor(){super(...arguments),this.colorRange=["#ffff00","#00ff00","#0000ff"],this.marker=new jn,this.label=new FB,this.tooltip=new Un}};q([te($e)],cn.prototype,"xKey",2);q([te($e)],cn.prototype,"yKey",2);q([te($e,{optional:!0})],cn.prototype,"labelKey",2);q([te($e,{optional:!0})],cn.prototype,"colorKey",2);q([te($e,{optional:!0})],cn.prototype,"xName",2);q([te($e,{optional:!0})],cn.prototype,"yName",2);q([te($e,{optional:!0})],cn.prototype,"labelName",2);q([te($e,{optional:!0})],cn.prototype,"colorName",2);q([te(qx,{optional:!0})],cn.prototype,"colorDomain",2);q([te(qo)],cn.prototype,"colorRange",2);q([te($e,{optional:!0})],cn.prototype,"title",2);q([te(rt)],cn.prototype,"marker",2);q([te(rt)],cn.prototype,"label",2);q([te(rt)],cn.prototype,"tooltip",2);var IP=class extends vd{constructor(t){super({moduleCtx:t,directionKeys:pp,directionNames:fp,pickModes:[2,3,0],pathsPerSeries:0,hasMarkers:!0,markerSelectionGarbageCollection:!1,animationResetFns:{marker:s0,label:Gc}}),this.properties=new cn,this.colorScale=new vp}processData(t){return Fe(this,null,function*(){var e,i,s;if(!this.properties.isValid()||this.data==null||!this.visible)return;const r=(e=this.axes.x)==null?void 0:e.scale,n=(i=this.axes.y)==null?void 0:i.scale,{xScaleType:o,yScaleType:a}=this.getScaleInformation({xScale:r,yScale:n}),l=this.colorScale.type,{xKey:c,yKey:u,labelKey:d,colorKey:h,colorDomain:p,colorRange:f}=this.properties,{dataModel:m,processedData:g}=yield this.requestDataModel(t,this.data,{props:[mr(c,o,{id:"xKey-raw"}),mr(u,a,{id:"yKey-raw"}),...d?[mr(d,"band",{id:"labelKey-raw"})]:[],Vi(c,o,{id:"xValue"}),Vi(u,a,{id:"yValue"}),...h?[Vi(h,l,{id:"colorValue"})]:[],...d?[Vi(d,"band",{id:"labelValue"})]:[]]});if(h){const y=m.resolveProcessedDataIndexById(this,"colorValue");this.colorScale.domain=(s=p??g.domain.values[y])!=null?s:[],this.colorScale.range=f,this.colorScale.update()}this.animationState.transition("updateData")})}getSeriesDomain(t){const{dataModel:e,processedData:i}=this;if(!i||!e)return[];const s=t==="x"?"xValue":"yValue",r=e.resolveProcessedDataDefById(this,s),n=e.getDomain(this,s,"value",i);if((r==null?void 0:r.def.type)==="value"&&(r==null?void 0:r.def.valueType)==="category")return n;const o=this.axes[t];return Pn(bl(n),o)}createNodeData(){return Fe(this,null,function*(){var t,e,i;const{axes:s,dataModel:r,processedData:n,colorScale:o}=this,{xKey:a,yKey:l,labelKey:c,colorKey:u,xName:d,yName:h,labelName:p,marker:f,label:m,visible:g}=this.properties,{placement:y}=m,v=fl(f.shape),C=s.x,b=s.y;if(!(r&&n&&g&&C&&b))return;const T=r.resolveProcessedDataIndexById(this,"xValue"),A=r.resolveProcessedDataIndexById(this,"yValue"),I=u?r.resolveProcessedDataIndexById(this,"colorValue"):-1,D=c?r.resolveProcessedDataIndexById(this,"labelValue"):-1,F=C.scale,B=b.scale,U=((t=F.bandwidth)!=null?t:0)/2,H=((e=B.bandwidth)!=null?e:0)/2,R=[],L=m.getFont();for(const{values:_,datum:w}of(i=n.data)!=null?i:[]){const S=_[T],x=_[A],E=F.convert(S)+U,M=B.convert(x)+H,O=this.getLabelText(m,{value:c?_[D]:x,datum:w,xKey:a,yKey:l,labelKey:c,xName:d,yName:h,labelName:p}),V=ri.getTextSize(O,L),Y=u?o.convert(_[I]):void 0;R.push({series:this,itemId:l,yKey:l,xKey:a,datum:w,xValue:S,yValue:x,capDefaults:{lengthRatioMultiplier:f.getDiameter(),lengthMax:1/0},point:{x:E,y:M,size:f.size},midPoint:{x:E,y:M},fill:Y,label:Se({text:O},V),marker:v,placement:y})}return{itemId:l,nodeData:R,labelData:R,scales:this.calculateScaling(),visible:this.visible}})}isPathOrSelectionDirty(){return this.properties.marker.isDirty()}getLabelData(){var t,e;return(e=(t=this.contextNodeData)==null?void 0:t.labelData)!=null?e:[]}markerFactory(){const{shape:t}=this.properties.marker,e=fl(t);return new e}updateMarkerSelection(t){return Fe(this,null,function*(){const{nodeData:e,markerSelection:i}=t;return this.properties.marker.isDirty()&&(i.clear(),i.cleanup()),i.update(this.properties.marker.enabled?e:[])})}updateMarkerNodes(t){return Fe(this,null,function*(){const{markerSelection:e,isHighlight:i}=t,{xKey:s,yKey:r,labelKey:n,marker:o,highlightStyle:a}=this.properties,l=Jt(i&&a.item,o.getStyle());e.each((c,u)=>{this.updateMarkerStyle(c,o,{datum:u,highlighted:i,xKey:s,yKey:r,labelKey:n},l)}),i||o.markClean()})}updateLabelSelection(t){return Fe(this,null,function*(){var e,i;const s=this.isLabelEnabled()?(i=(e=this.chart)==null?void 0:e.placeLabels().get(this))!=null?i:[]:[];return t.labelSelection.update(s.map(({datum:r,x:n,y:o})=>qe(Se({},r),{point:{x:n,y:o,size:r.point.size},placement:"top"})),r=>{r.pointerEvents=1})})}updateLabelNodes(t){return Fe(this,null,function*(){const{label:e}=this.properties;t.labelSelection.each((i,s)=>{var r,n,o,a;i.text=s.label.text,i.fill=e.color,i.x=(n=(r=s.point)==null?void 0:r.x)!=null?n:0,i.y=(a=(o=s.point)==null?void 0:o.y)!=null?a:0,i.fontStyle=e.fontStyle,i.fontWeight=e.fontWeight,i.fontSize=e.fontSize,i.fontFamily=e.fontFamily,i.textAlign="left",i.textBaseline="top"})})}getTooltipHtml(t){const e=this.axes.x,i=this.axes.y;if(!this.properties.isValid()||!e||!i)return Lc;const{xKey:s,yKey:r,labelKey:n,xName:o,yName:a,labelName:l,title:c=a,marker:u,tooltip:d}=this.properties,{datum:h,xValue:p,yValue:f,label:m,itemId:g}=t,y=Jt({fill:t.fill,strokeWidth:this.getStrokeWidth(u.strokeWidth)},u.getStyle()),{fill:v="gray"}=this.getMarkerStyle(u,{datum:t,highlighted:!1,xKey:s,yKey:r,labelKey:n},y),C=Zi(e.formatDatum(p)),b=Zi(i.formatDatum(f));let T=`<b>${Zi(o??s)}</b>: ${C}<br><b>${Zi(a??r)}</b>: ${b}`;return n&&(T=`<b>${Zi(l??n)}</b>: ${Zi(m.text)}<br>`+T),d.toTooltipHtml({title:c,content:T,backgroundColor:v},Se({datum:h,itemId:g,xKey:s,xName:o,yKey:r,yName:a,labelKey:n,labelName:l,title:c,color:v,seriesId:this.id},this.getModuleTooltipParams()))}getLegendData(t){var e,i,s,r,n,o;const{yKey:a,yName:l,title:c,marker:u,visible:d}=this.properties,{fill:h,stroke:p,fillOpacity:f,strokeOpacity:m,strokeWidth:g}=u;return!((e=this.data)!=null&&e.length)||!this.properties.isValid()||t!=="category"?[]:[{legendType:"category",id:this.id,itemId:a,seriesId:this.id,enabled:d,label:{text:(i=c??l)!=null?i:a},marker:{shape:u.shape,fill:(r=(s=u.fill)!=null?s:h)!=null?r:"rgba(0, 0, 0, 0)",stroke:(o=(n=u.stroke)!=null?n:p)!=null?o:"rgba(0, 0, 0, 0)",fillOpacity:f??1,strokeOpacity:m??1,strokeWidth:g??0}}]}animateEmptyUpdateReady(t){const{markerSelection:e,labelSelection:i,annotationSelections:s}=t;fP(this,this.ctx.animationManager,e),Mi(this,"labels",this.ctx.animationManager,i),Mi(this,"annotations",this.ctx.animationManager,...s)}isLabelEnabled(){return this.properties.label.enabled}nodeFactory(){return new ft}getFormattedMarkerStyle(t){const{xKey:e,yKey:i,labelKey:s}=this.properties;return this.getMarkerStyle(this.properties.marker,{datum:t,xKey:e,yKey:i,labelKey:s,highlighted:!0})}computeFocusBounds(t){return r0(this,t)}};IP.className="ScatterSeries";IP.type="scatter";var Lee={type:"series",optionsKey:"series[]",packageType:"community",chartTypes:["cartesian"],identifier:"scatter",instanceConstructor:IP,defaultAxes:[{type:"number",position:"bottom"},{type:"number",position:"left"}],themeTemplate:{series:{__extends__:Dc,tooltip:{position:{type:"node"}},marker:{__extends__:Qg,fillOpacity:.8},label:{enabled:!1,fontSize:12,fontFamily:Ks,color:Ti}}},enterpriseThemeTemplate:{series:{errorBar:{cap:{lengthRatio:1}}}},paletteFactory:fm},LB=class vA{constructor(e,i,s,r){this.startAngle=e,this.endAngle=i,this.innerRadius=s,this.outerRadius=r}clone(){const{startAngle:e,endAngle:i,innerRadius:s,outerRadius:r}=this;return new vA(e,i,s,r)}[Hx](e,i){return new vA(this.startAngle*(1-i)+e.startAngle*i,this.endAngle*(1-i)+e.endAngle*i,this.innerRadius*(1-i)+e.innerRadius*i,this.outerRadius*(1-i)+e.outerRadius*i)}};function vS(t,e,i){const s=Math.sqrt(Math.pow(t,2)+Math.pow(e,2)),{innerRadius:r,outerRadius:n}=i;if(i.startAngle===i.endAngle||s<Math.min(r,n)||s>Math.max(r,n))return!1;const o=Ny(i.startAngle),a=Ny(i.endAngle),l=Math.atan2(e,t);return o<a?l<=a&&l>=o:l<=a&&l>=-Math.PI||l>=o&&l<=Math.PI}function fL(t,e){const{startAngle:i,endAngle:s,innerRadius:r,outerRadius:n}=e,o={x:n*Math.cos(i),y:n*Math.sin(i)},a={x:n*Math.cos(s),y:n*Math.sin(s)},l=r===0?{x:0,y:0}:{x:r*Math.cos(i),y:r*Math.sin(i)},c=r===0?{x:0,y:0}:{x:r*Math.cos(s),y:r*Math.sin(s)};return bf(t.start.x,t.start.y,t.end.x,t.end.y,o.x,o.y,l.x,l.y)||bf(t.start.x,t.start.y,t.end.x,t.end.y,a.x,a.y,c.x,c.y)||J8(0,0,n,i,s,!0,t.start.x,t.start.y,t.end.x,t.end.y)}function kB(t,e){const i={x:t.x,y:t.y},s={x:t.x+t.width,y:t.y},r={x:t.x,y:t.y+t.height},n={x:t.x+t.width,y:t.y+t.height};return fL({start:i,end:s},e)||fL({start:r,end:n},e)}function gL(t,e,i,s){if(i===0&&s===0)return 0;if(Math.asin(Math.abs(1*i)/(t+1*i))+Math.asin(Math.abs(1*s)/(t+1*s))-e<0)return 1;let n=0,o=1;for(let a=0;a<8;a+=1){const l=(n+o)/2;Math.asin(Math.abs(l*i)/(t+l*i))+Math.asin(Math.abs(l*s)/(t+l*s))-e<0?n=l:o=l}return n}var kee=1e-6;function wu(t,e){return $x(t,e)<kee?e:ys(t-e)+e}function mb(t,e,i=0){const r=Math.abs(e-t)>=2*Math.PI?2*Math.PI:ys(e-t);return t=wu(t,i),e=t+r,{startAngle:t,endAngle:e}}function vb(t,e,i,s,r,n){const o=Math.sin(n),a=Math.cos(n),l=_t(t,2)+_t(e,2)-_t(i,2);let c=NaN,u=NaN,d=NaN,h=NaN;if(a>.5){const C=o/a,b=1+_t(C,2),T=-2*(t+e*C),A=_t(T,2)-4*b*l;if(A<0)return;const I=(-T+Math.sqrt(A))/(2*b),D=(-T-Math.sqrt(A))/(2*b);c=I,u=I*C,d=D,h=D*C}else{const C=a/o,b=1+_t(C,2),T=-2*(e+t*C),A=_t(T,2)-4*b*l;if(A<0)return;const I=(-T+Math.sqrt(A))/(2*b),D=(-T-Math.sqrt(A))/(2*b);c=I*C,u=I,d=D*C,h=D}const p=a,f=o,m=c*p+u*f,g=d*p+h*f,y=m>0?wu(Math.atan2(u-e,c-t),s):NaN,v=g>0?wu(Math.atan2(h-e,d-t),s):NaN;if(y>=s&&y<=r)return y;if(v>=s&&v<=r)return v}function yb(t,e,i,s,r,n){const o=Math.hypot(t,e),a=(_t(o,2)-_t(i,2)+_t(n,2))/(2*o),l=o-a,c=Math.atan2(e,t),u=Math.acos(-l/i),d=wu(c+u,s),h=wu(c-u,s);if(d>=s&&d<=r)return d;if(h>=s&&h<=r)return h}var rT=class{constructor(t,e,i,s,r){this.cx=t,this.cy=e,this.r=i,this.a0=s,this.a1=r,this.a0>=this.a1&&(this.a0=NaN,this.a1=NaN)}isValid(){return Number.isFinite(this.a0)&&Number.isFinite(this.a1)}pointAt(t){return{x:this.cx+this.r*Math.cos(t),y:this.cy+this.r*Math.sin(t)}}clipStart(t){t==null||!this.isValid()||t<this.a0||(this.a0=t,(Number.isNaN(t)||this.a0>=this.a1)&&(this.a0=NaN,this.a1=NaN))}clipEnd(t){t==null||!this.isValid()||t>this.a1||(this.a1=t,(Number.isNaN(t)||this.a0>=this.a1)&&(this.a0=NaN,this.a1=NaN))}},wr=class extends yo{constructor(){super(...arguments),this.centerX=0,this.centerY=0,this.innerRadius=10,this.outerRadius=20,this.startAngle=0,this.endAngle=Math.PI*2,this.clipSector=void 0,this.concentricEdgeInset=0,this.radialEdgeInset=0,this.startOuterCornerRadius=0,this.endOuterCornerRadius=0,this.startInnerCornerRadius=0,this.endInnerCornerRadius=0}set inset(t){this.concentricEdgeInset=t,this.radialEdgeInset=t}set cornerRadius(t){this.startOuterCornerRadius=t,this.endOuterCornerRadius=t,this.startInnerCornerRadius=t,this.endInnerCornerRadius=t}computeBBox(){const t=this.outerRadius;return new lt(this.centerX-t,this.centerY-t,t*2,t*2)}normalizedRadii(){const{concentricEdgeInset:t}=this;return{innerRadius:Math.max(Math.min(this.innerRadius,this.outerRadius)+t,0),outerRadius:Math.max(Math.max(this.innerRadius,this.outerRadius)-t,0)}}normalizedClipSector(){const{clipSector:t}=this;if(t==null)return;const{startAngle:e,endAngle:i}=mb(this.startAngle,this.endAngle),{innerRadius:s,outerRadius:r}=this.normalizedRadii(),n=mb(t.startAngle,t.endAngle,e);return new LB(Math.max(e,n.startAngle),Math.min(i,n.endAngle),Math.max(s,t.innerRadius),Math.min(r,t.outerRadius))}getAngleOffset(t){return t>0?this.radialEdgeInset/t:0}arc(t,e,i,s,r,n,o,a){if(t<=0)return;const{startAngle:l,endAngle:c}=mb(this.startAngle,this.endAngle),{innerRadius:u,outerRadius:d}=this.normalizedRadii(),h=this.normalizedClipSector();if(a&&u<=0)return;const p=this.getAngleOffset(u),f=this.getAngleOffset(d),m=a?this.getAngleOffset(u+t):this.getAngleOffset(d-t),g=o?l+m+e:c-m-e,y=a?u+t:d-t,v=y*Math.cos(g),C=y*Math.sin(g);if(h!=null&&(!o&&!(g>=l-1e-6&&g<=h.endAngle-1e-6)||o&&!(g>=h.startAngle+1e-6&&g<=c-1e-6)||a&&!(y>=h.innerRadius-1e-6)||!a&&!(y<=h.outerRadius+1e-6)))return;const b=new rT(v,C,t,i,s);if(h!=null){a?(b.clipStart(vb(v,C,t,i,s,h.endAngle-p)),b.clipEnd(vb(v,C,t,i,s,h.startAngle+p))):(b.clipStart(vb(v,C,t,i,s,h.startAngle+f)),b.clipEnd(vb(v,C,t,i,s,h.endAngle-f)));let F,B;if(o?(F=yb(v,C,t,i,s,h.innerRadius),B=yb(v,C,t,i,s,h.outerRadius)):(F=yb(v,C,t,i,s,h.outerRadius),B=yb(v,C,t,i,s,h.innerRadius)),b.clipStart(F),b.clipEnd(B),F!=null){const{x:U,y:H}=b.pointAt(F),R=wu(Math.atan2(H,U),l);o?n==null||n.clipStart(R):r.clipEnd(R)}if(B!=null){const{x:U,y:H}=b.pointAt(B),R=wu(Math.atan2(H,U),l);o?r.clipStart(R):n==null||n.clipEnd(R)}}if(h!=null){const{x:F,y:B}=b.pointAt((b.a0+b.a1)/2);if(!vS(F,B,h))return}const{x:T,y:A}=b.pointAt(o===a?b.a0:b.a1),I=wu(Math.atan2(A,T),l),D=a?n:r;return o?D==null||D.clipStart(I):D==null||D.clipEnd(I),b}updatePath(){var t,e,i,s,r;const{path:o,centerX:a,centerY:l,concentricEdgeInset:c,radialEdgeInset:u}=this;let{startOuterCornerRadius:d,endOuterCornerRadius:h,startInnerCornerRadius:p,endInnerCornerRadius:f}=this;const{startAngle:m,endAngle:g}=mb(this.startAngle,this.endAngle),{innerRadius:y,outerRadius:v}=this.normalizedRadii(),C=this.normalizedClipSector(),b=g-m,T=b>=2*Math.PI-1e-6;if(o.clear(),((t=C==null?void 0:C.startAngle)!=null?t:m)===((e=C==null?void 0:C.endAngle)!=null?e:g))return;if(T&&this.clipSector==null&&d===0&&h===0&&p===0&&f===0){o.moveTo(a+v*Math.cos(m),l+v*Math.sin(m)),o.arc(a,l,v,m,g),y>c&&(o.moveTo(a+y*Math.cos(g),l+y*Math.sin(g)),o.arc(a,l,y,g,m,!0)),o.closePath();return}const A=this.getAngleOffset(y),I=this.getAngleOffset(v);if(b<2*I)return;const F=((i=C==null?void 0:C.innerRadius)!=null?i:y)>c,B=y<c||b<2*A,U=v-y,H=Math.max(d,p,h,f),R=H>0?Math.min(U/H,1):1;d*=R,h*=R,p*=R,f*=R;const L=gL(v,b-2*I,-d,-h);if(d*=L,h*=L,!B&&F){const ee=gL(y,b-2*A,p,f);p*=ee,f*=ee}else p=0,f=0;const _=Math.max(d+p,h+f),w=_>0?Math.min(U/_,1):1;d*=w,h*=w,p*=w,f*=w;let S=0,x=0;const E=d/(v-d),M=h/(v-h);if(E>=0&&E<1-1e-6)S=Math.asin(E);else{S=b/2;const ee=v/(1/Math.sin(S)+1);d=Math.min(ee,d)}if(M>=0&&M<1-1e-6)x=Math.asin(M);else{x=b/2;const ee=v/(1/Math.sin(x)+1);h=Math.min(ee,h)}const O=Math.asin(p/(y+p)),V=Math.asin(f/(y+f)),Y=(s=C==null?void 0:C.outerRadius)!=null?s:v,$=this.getAngleOffset(Y),J=new rT(0,0,Y,m+$,g-$),G=(r=C==null?void 0:C.innerRadius)!=null?r:y,Z=this.getAngleOffset(G),N=F?new rT(0,0,G,m+Z,g-Z):void 0;C!=null&&(J.clipStart(C.startAngle),J.clipEnd(C.endAngle),N==null||N.clipStart(C.startAngle),N==null||N.clipEnd(C.endAngle));const P=this.arc(d,S,m-Math.PI*.5,m+S,J,N,!0,!1),j=this.arc(h,x,g-x,g+Math.PI*.5,J,N,!1,!1),X=this.arc(f,V,g+Math.PI*.5,g+Math.PI-V,J,N,!1,!0),ie=this.arc(p,O,m+Math.PI+O,m+Math.PI*1.5,J,N,!0,!0);if(B){const ee=b<Math.PI*.5?u*(1+Math.cos(b))/Math.sin(b):NaN;let re;ee>0&&ee<v?re=Math.max(Math.hypot(u,ee),y):re=y;const oe=m+b*.5;o.moveTo(a+re*Math.cos(oe),l+re*Math.sin(oe))}else if((ie==null?void 0:ie.isValid())===!0){const{x:ee,y:re}=ie.pointAt(ie.a1);o.moveTo(a+ee,l+re)}else if((N==null?void 0:N.isValid())===!0){const{x:ee,y:re}=N.pointAt(N.a0);o.moveTo(a+ee,l+re)}else{const ee=m+b/2,re=y*Math.cos(ee),oe=y*Math.sin(ee);o.moveTo(a+re,l+oe)}if((P==null?void 0:P.isValid())===!0){const{cx:ee,cy:re,r:oe,a0:ue,a1:se}=P;o.arc(a+ee,l+re,oe,ue,se)}if(J.isValid()){const{r:ee,a0:re,a1:oe}=J;o.arc(a,l,ee,re,oe)}if((j==null?void 0:j.isValid())===!0){const{cx:ee,cy:re,r:oe,a0:ue,a1:se}=j;o.arc(a+ee,l+re,oe,ue,se)}if(!B){if((X==null?void 0:X.isValid())===!0){const{cx:ee,cy:re,r:oe,a0:ue,a1:se}=X;o.arc(a+ee,l+re,oe,ue,se)}if((N==null?void 0:N.isValid())===!0){const{r:ee,a0:re,a1:oe}=N;o.arc(a,l,ee,oe,re,!0)}if((ie==null?void 0:ie.isValid())===!0){const{cx:ee,cy:re,r:oe,a0:ue,a1:se}=ie;o.arc(a+ee,l+re,oe,ue,se)}}o.closePath()}isPointInPath(t,e){var i;const s=this.transformPoint(t,e),{startAngle:r,endAngle:n,innerRadius:o,outerRadius:a}=(i=this.clipSector)!=null?i:this;return vS(s.x,s.y,{startAngle:r,endAngle:n,innerRadius:Math.min(o,a),outerRadius:Math.max(o,a)})}};wr.className="Sector";q([Lt()],wr.prototype,"centerX",2);q([Lt()],wr.prototype,"centerY",2);q([Lt()],wr.prototype,"innerRadius",2);q([Lt()],wr.prototype,"outerRadius",2);q([Lt()],wr.prototype,"startAngle",2);q([Lt()],wr.prototype,"endAngle",2);q([Lt()],wr.prototype,"clipSector",2);q([Lt()],wr.prototype,"concentricEdgeInset",2);q([Lt()],wr.prototype,"radialEdgeInset",2);q([Lt()],wr.prototype,"startOuterCornerRadius",2);q([Lt()],wr.prototype,"endOuterCornerRadius",2);q([Lt()],wr.prototype,"startInnerCornerRadius",2);q([Lt()],wr.prototype,"endInnerCornerRadius",2);var NB=class extends Ki{constructor(){super(...arguments),this.showInLegend=!1}};q([te(Et)],NB.prototype,"showInLegend",2);var FP=class extends Bs{constructor(){super(...arguments),this.margin=2}set(t,e){return super.set(t)}};q([te($e)],FP.prototype,"text",2);q([te(Ui)],FP.prototype,"margin",2);var LP=class extends ti{constructor(){super(...arguments),this.fill="transparent",this.fillOpacity=1}};q([te(mi)],LP.prototype,"fill",2);q([te(Si)],LP.prototype,"fillOpacity",2);var gm=class extends Bs{constructor(){super(...arguments),this.offset=3,this.minAngle=0,this.minSpacing=4,this.maxCollisionOffset=50,this.avoidCollisions=!0}};q([te(Ge)],gm.prototype,"offset",2);q([te(dd)],gm.prototype,"minAngle",2);q([te(Ge)],gm.prototype,"minSpacing",2);q([te(Ge)],gm.prototype,"maxCollisionOffset",2);q([te(Et)],gm.prototype,"avoidCollisions",2);var kP=class extends Bs{constructor(){super(...arguments),this.positionOffset=0,this.positionRatio=.5}};q([te(Ui)],kP.prototype,"positionOffset",2);q([te(Si)],kP.prototype,"positionRatio",2);var cE=class extends ti{constructor(){super(...arguments),this.length=10,this.strokeWidth=1}};q([te(qo,{optional:!0})],cE.prototype,"colors",2);q([te(Ge)],cE.prototype,"length",2);q([te(Ge)],cE.prototype,"strokeWidth",2);var ai=class extends Pa{constructor(){super(...arguments),this.fills=Object.values(_o),this.strokes=Object.values(Ul),this.fillOpacity=1,this.strokeOpacity=1,this.lineDash=[0],this.lineDashOffset=0,this.cornerRadius=0,this.rotation=0,this.outerRadiusOffset=0,this.outerRadiusRatio=1,this.strokeWidth=1,this.sectorSpacing=void 0,this.innerLabels=new jC(FP),this.title=new NB,this.innerCircle=new LP,this.shadow=new Ia,this.calloutLabel=new gm,this.sectorLabel=new kP,this.calloutLine=new cE,this.tooltip=new Un,this.__BACKGROUND_COLOR_DO_NOT_USE=void 0}isValid(){const t=super.isValid();return this.innerRadiusRatio==null&&this.innerRadiusOffset==null?(Be.warnOnce("Either an [innerRadiusRatio] or an [innerRadiusOffset] must be set to render a donut series."),!1):t}};q([te($e)],ai.prototype,"angleKey",2);q([te($e,{optional:!0})],ai.prototype,"angleName",2);q([te($e,{optional:!0})],ai.prototype,"radiusKey",2);q([te($e,{optional:!0})],ai.prototype,"radiusName",2);q([te(Ge,{optional:!0})],ai.prototype,"radiusMin",2);q([te(Ge,{optional:!0})],ai.prototype,"radiusMax",2);q([te($e,{optional:!0})],ai.prototype,"calloutLabelKey",2);q([te($e,{optional:!0})],ai.prototype,"calloutLabelName",2);q([te($e,{optional:!0})],ai.prototype,"sectorLabelKey",2);q([te($e,{optional:!0})],ai.prototype,"sectorLabelName",2);q([te($e,{optional:!0})],ai.prototype,"legendItemKey",2);q([te(qo)],ai.prototype,"fills",2);q([te(qo)],ai.prototype,"strokes",2);q([te(Si)],ai.prototype,"fillOpacity",2);q([te(Si)],ai.prototype,"strokeOpacity",2);q([te(Fc)],ai.prototype,"lineDash",2);q([te(Ge)],ai.prototype,"lineDashOffset",2);q([te(Ge)],ai.prototype,"cornerRadius",2);q([te(go,{optional:!0})],ai.prototype,"formatter",2);q([te(dd)],ai.prototype,"rotation",2);q([te(Ui)],ai.prototype,"outerRadiusOffset",2);q([te(Si)],ai.prototype,"outerRadiusRatio",2);q([te(Ui,{optional:!0})],ai.prototype,"innerRadiusOffset",2);q([te(Si,{optional:!0})],ai.prototype,"innerRadiusRatio",2);q([te(Ge)],ai.prototype,"strokeWidth",2);q([te(Ge,{optional:!0})],ai.prototype,"sectorSpacing",2);q([te(RD)],ai.prototype,"innerLabels",2);q([te(rt)],ai.prototype,"title",2);q([te(rt)],ai.prototype,"innerCircle",2);q([te(rt)],ai.prototype,"shadow",2);q([te(rt)],ai.prototype,"calloutLabel",2);q([te(rt)],ai.prototype,"sectorLabel",2);q([te(rt)],ai.prototype,"calloutLine",2);q([te(rt)],ai.prototype,"tooltip",2);q([te($e,{optional:!0})],ai.prototype,"__BACKGROUND_COLOR_DO_NOT_USE",2);function fh(t,e,i,s){const r=[i.convert(0),i.convert(1)],n=[s.convert(0),s.convert(1)],o=Math.PI/-2+Nr(e),a=t?"initial":"update",l=({radius:f})=>({innerRadius:r[0],outerRadius:r[0]+(r[1]-r[0])*f}),c=({radius:f})=>({innerRadius:n[0],outerRadius:n[0]+(n[1]-n[0])*f});return{nodes:{toFn:(f,m,g,{prevLive:y})=>{var v,C;let{startAngle:b,endAngle:T,innerRadius:A,outerRadius:I}=m;const{stroke:D,fill:F}=m.sectorFormat;if(g==="removed"&&y?(b=(v=y.datum)==null?void 0:v.endAngle,T=(C=y.datum)==null?void 0:C.endAngle):g==="removed"&&!y&&(b=o,T=o),g==="removed"){const B=l(m);A=B.innerRadius,I=B.outerRadius}return{startAngle:b,endAngle:T,outerRadius:I,innerRadius:A,stroke:D,fill:F}},fromFn:(f,m,g,{prevFromProps:y})=>{var v,C,b,T,A,I;let{startAngle:D,endAngle:F,innerRadius:B,outerRadius:U}=f,{fill:H,stroke:R}=m.sectorFormat;if(g==="unknown"||g==="added"&&!y?(D=o,F=o,B=m.innerRadius,U=m.outerRadius):g==="added"&&y&&(D=(v=y.endAngle)!=null?v:o,F=(C=y.endAngle)!=null?C:o,B=(b=y.innerRadius)!=null?b:m.innerRadius,U=(T=y.outerRadius)!=null?T:m.outerRadius),g==="added"&&!t){const L=c(m);B=L.innerRadius,U=L.outerRadius}return g==="updated"&&(H=(A=f.fill)!=null?A:H,R=(I=f.stroke)!=null?I:R),{startAngle:D,endAngle:F,innerRadius:B,outerRadius:U,fill:H,stroke:R,phase:a}}},innerCircle:{fromFn:(f,m)=>{var g,y,v;return{size:(v=(y=(g=f.previousDatum)==null?void 0:g.radius)!=null?y:f.size)!=null?v:0,phase:a}},toFn:(f,m)=>{var g;return{size:(g=m.radius)!=null?g:0}}}}}function NP(t,e){return{startAngle:e.startAngle,endAngle:e.endAngle,innerRadius:e.innerRadius,outerRadius:e.outerRadius,fill:e.sectorFormat.fill,stroke:e.sectorFormat.stroke}}function OP(t,e){const i=e.y-t.centerY,s=e.x-t.centerX,r=Math.atan2(i,s),n=t.getItemNodes();for(const o of n)if(o.datum.missing!==!0&&$C(r,o.startAngle,o.endAngle)){const a=Math.sqrt(s*s+i*i);let l=0;return a<o.innerRadius?l=o.innerRadius-a:a>o.outerRadius&&(l=a-o.outerRadius),{datum:o.datum,distance:l}}}function GP(t,e){const i=t.getNodeData();if(i===void 0)return;const{centerX:s,centerY:r}=t,n=i[e.datumIndex],o=[{radius:n.innerRadius,angle:n.startAngle},{radius:n.innerRadius,angle:n.endAngle},{radius:n.outerRadius,angle:n.startAngle},{radius:n.outerRadius,angle:n.endAngle}],a=[0,Math.PI/2,Math.PI,3*Math.PI/2];for(const m of a)$C(m,n.startAngle,n.endAngle)&&o.push({radius:n.outerRadius,angle:m});const l=o.map(({radius:m,angle:g})=>C6(s,r,m,g)),c=l.map(m=>m.x),u=l.map(m=>m.y),d=Math.min(...c),h=Math.min(...u),p=Math.max(...c)-d,f=Math.max(...u)-h;return new lt(d,h,p,f)}var uE=class extends oP{constructor(t){var e=t,{useLabelLayer:i=!1,pickModes:s=[0],canHaveAxes:r=!1,animationResetFns:n}=e,o=xs(e,["useLabelLayer","pickModes","canHaveAxes","animationResetFns"]);super(qe(Se({},o),{useLabelLayer:i,pickModes:s,contentGroupVirtual:!1,directionKeys:{x:["angleKey"],y:["radiusKey"]},directionNames:{x:["angleName"],y:["radiusName"]},canHaveAxes:r})),this.itemGroup=this.contentGroup.appendChild(new ft),this.nodeData=[],this.itemSelection=Qi.select(this.itemGroup,()=>this.nodeFactory(),!1),this.labelSelection=Qi.select(this.labelGroup,ri,!1),this.highlightSelection=Qi.select(this.highlightGroup,()=>this.nodeFactory()),this.centerX=0,this.centerY=0,this.radius=0,this.showFocusBox=!1,this.itemGroup.zIndexSubOrder=[()=>this._declarationOrder,1],this.animationResetFns=n,this.animationState=new XC("empty",{empty:{update:{target:"ready",action:a=>this.animateEmptyUpdateReady(a)},reset:"empty",skip:"ready"},ready:{updateData:"waiting",clear:"clearing",highlight:a=>this.animateReadyHighlight(a),highlightMarkers:a=>this.animateReadyHighlightMarkers(a),resize:a=>this.animateReadyResize(a),reset:"empty",skip:"ready"},waiting:{update:{target:"ready",action:a=>this.animateWaitingUpdateReady(a)},reset:"empty",skip:"ready"},clearing:{update:{target:"empty",action:a=>this.animateClearingUpdateEmpty(a)},reset:"empty",skip:"ready"}},()=>this.checkProcessedDataAnimatable())}getItemNodes(){return this.itemGroup.children}getNodeData(){return this.nodeData}resetAnimation(t){t==="initial"?this.animationState.transition("reset"):t==="ready"&&this.animationState.transition("skip")}getLabelData(){return[]}computeLabelsBBox(t,e){return null}resetAllAnimation(){var t;const{item:e,label:i}=(t=this.animationResetFns)!=null?t:{};this.ctx.animationManager.stopByAnimationGroupId(this.id),e&&Ys([this.itemSelection,this.highlightSelection],e),i&&Ys([this.labelSelection],i),this.itemSelection.cleanup(),this.labelSelection.cleanup(),this.highlightSelection.cleanup()}animateEmptyUpdateReady(t){this.ctx.animationManager.skipCurrentBatch(),this.resetAllAnimation()}animateWaitingUpdateReady(t){this.ctx.animationManager.skipCurrentBatch(),this.resetAllAnimation()}animateReadyHighlight(t){var e;const{item:i}=(e=this.animationResetFns)!=null?e:{};i&&Ys([this.highlightSelection],i)}animateReadyHighlightMarkers(t){}animateReadyResize(t){this.resetAllAnimation()}animateClearingUpdateEmpty(t){this.ctx.animationManager.skipCurrentBatch(),this.resetAllAnimation()}animationTransitionClear(){this.animationState.transition("clear",this.getAnimationData())}getAnimationData(t){return{seriesRect:t}}},Nee=class extends QC{constructor(t,e,i,s){super(t,e,i,s),this.angleKey=s.properties.angleKey,this.radiusKey=s.properties.radiusKey,this.calloutLabelKey=s.properties.calloutLabelKey,this.sectorLabelKey=s.properties.sectorLabelKey}},dE=class extends uE{constructor(t){super({moduleCtx:t,pickModes:[0],useLabelLayer:!0,animationResetFns:{item:NP,label:Gc}}),this.properties=new ai,this.previousRadiusScale=new nl,this.radiusScale=new nl,this.backgroundGroup=this.rootGroup.appendChild(new ft({name:`${this.id}-background`,layer:!0,zIndex:0})),this.zerosumRingsGroup=this.backgroundGroup.appendChild(new ft({name:`${this.id}-zerosumRings`})),this.zerosumOuterRing=this.zerosumRingsGroup.appendChild(new rl),this.zerosumInnerRing=this.zerosumRingsGroup.appendChild(new rl),this.innerCircleGroup=this.backgroundGroup.appendChild(new ft({name:`${this.id}-innerCircle`})),this.seriesItemEnabled=[],this.surroundingRadius=void 0,this.NodeEvent=Nee,this.angleScale=new nl,this.angleScale.domain=[0,1],this.angleScale.range=[-Math.PI,Math.PI].map(r=>r+Math.PI/2);const e=new ft({name:"pieCalloutLabels"}),i=new ft({name:"pieSectorLabels"}),s=new ft({name:"innerLabels"});this.labelGroup.append(e),this.labelGroup.append(i),this.labelGroup.append(s),this.calloutLabelSelection=Qi.select(e,ft),this.sectorLabelSelection=Qi.select(i,ri),this.innerLabelsSelection=Qi.select(s,ri),this.innerCircleSelection=Qi.select(this.innerCircleGroup,rl)}addChartEventListeners(){var t;this.destroyFns.push((t=this.ctx.chartEventManager)==null?void 0:t.addListener("legend-item-click",e=>this.onLegendItemClick(e)))}get visible(){return super.visible&&(this.seriesItemEnabled.length===0||this.seriesItemEnabled.some(t=>t))}nodeFactory(){return new wr}getSeriesDomain(t){return t==="x"?this.angleScale.domain:this.radiusScale.domain}processData(t){return Fe(this,null,function*(){var e,i,s,r,n;if(this.data==null||!this.properties.isValid())return;let{data:o}=this;const{visible:a,seriesItemEnabled:l}=this,{angleKey:c,radiusKey:u,calloutLabelKey:d,sectorLabelKey:h,legendItemKey:p}=this.properties,f=!this.ctx.animationManager.isSkipped(),m=[],g=[];p?m.push(mr(p,"band",{id:"legendItemKey"})):d?m.push(mr(d,"band",{id:"calloutLabelKey"})):h&&m.push(mr(h,"band",{id:"sectorLabelKey"}));const y=this.radiusScale.type,v=this.radiusScale.type;u&&g.push(ZD(u,{id:"radiusValue",min:(e=this.properties.radiusMin)!=null?e:0,max:this.properties.radiusMax}),Vi(u,y,{id:"radiusRaw"}),Vy({id:"radiusValue"},[0,1],1,(i=this.properties.radiusMin)!=null?i:0,this.properties.radiusMax)),d&&g.push(Vi(d,"band",{id:"calloutLabelValue"})),h&&g.push(Vi(h,"band",{id:"sectorLabelValue"})),p&&g.push(Vi(p,"band",{id:"legendItemValue"})),f&&this.processedData&&m.length>0&&g.push(hp(this.processedData)),g.push(cm()),o=o.map((C,b)=>a&&l[b]?C:qe(Se({},C),{[c]:0})),yield this.requestDataModel(t,o,{props:[...m,JD(c,v,{id:"angleValue",onlyPositive:!0}),Vi(c,v,{id:"angleRaw"}),Vy({id:"angleValue"},[0,1],0,0),...g]});for(const C of(n=(r=(s=this.processedData)==null?void 0:s.defs)==null?void 0:r.values)!=null?n:[]){const{id:b,missing:T,property:A}=C,I=KD(this,T);b!=="angleRaw"&&I>0&&Be.warnOnce(`no value was found for the key '${String(A)}' on ${I} data element${I>1?"s":""}`)}this.animationState.transition("updateData")})}maybeRefreshNodeData(){return Fe(this,null,function*(){var t;if(!this.nodeDataRefresh)return;const{nodeData:e=[]}=(t=yield this.createNodeData())!=null?t:{};this.nodeData=e,this.nodeDataRefresh=!1})}getProcessedDataIndexes(t){const e=t.resolveProcessedDataIndexById(this,"angleValue"),i=this.properties.radiusKey?t.resolveProcessedDataIndexById(this,"radiusValue"):-1,s=this.properties.calloutLabelKey?t.resolveProcessedDataIndexById(this,"calloutLabelValue"):-1,r=this.properties.sectorLabelKey?t.resolveProcessedDataIndexById(this,"sectorLabelValue"):-1,n=this.properties.legendItemKey?t.resolveProcessedDataIndexById(this,"legendItemValue"):-1;return{angleIdx:e,radiusIdx:i,calloutLabelIdx:s,sectorLabelIdx:r,legendItemIdx:n}}createNodeData(){return Fe(this,null,function*(){const{id:t,processedData:e,dataModel:i,angleScale:s}=this,{rotation:r,innerRadiusRatio:n}=this.properties;if(!this.properties.isValid())return this.zerosumOuterRing.visible=!0,this.zerosumInnerRing.visible=!0,{itemId:t,nodeData:[],labelData:[]};if(!e||!i||e.type!=="ungrouped")return;const{angleIdx:o,radiusIdx:a,calloutLabelIdx:l,sectorLabelIdx:c,legendItemIdx:u}=this.getProcessedDataIndexes(i);let d=0,h=0;const p=e.data.map((f,m)=>{var g;const{datum:y,values:v}=f,C=v[o],b=s.convert(d)+Nr(r);d=C,h+=C;const T=s.convert(d)+Nr(r),A=Math.abs(T-b),I=b+A/2,D=v[o+1],F=a>=0&&(g=v[a])!=null?g:1,B=a>=0?v[a+1]:void 0,U=u>=0?v[u]:void 0,H=this.getLabels(y,I,A,!0,v[l],v[c],U),R=this.getSectorFormat(y,m,!1);return Se({itemId:m,series:this,datum:y,index:m,angleValue:D,midAngle:I,midCos:Math.cos(I),midSin:Math.sin(I),startAngle:b,endAngle:T,sectorFormat:R,radiusValue:B,radius:F,innerRadius:Math.max(this.radiusScale.convert(0),0),outerRadius:Math.max(this.radiusScale.convert(F),0),legendItemValue:U},H)});return this.zerosumOuterRing.visible=h===0,this.zerosumInnerRing.visible=h===0&&n!=null&&n!==1&&n>0,{itemId:t,nodeData:p,labelData:p}})}getLabels(t,e,i,s,r,n,o){const{calloutLabel:a,sectorLabel:l,legendItemKey:c}=this.properties,u=!s||a.enabled?this.properties.calloutLabelKey:void 0,d=!s||l.enabled?this.properties.sectorLabelKey:void 0;if(!u&&!d&&!c)return{};const h={datum:t,angleKey:this.properties.angleKey,angleName:this.properties.angleName,radiusKey:this.properties.radiusKey,radiusName:this.properties.radiusName,calloutLabelKey:this.properties.calloutLabelKey,calloutLabelName:this.properties.calloutLabelName,sectorLabelKey:this.properties.sectorLabelKey,sectorLabelName:this.properties.sectorLabelName,legendItemKey:this.properties.legendItemKey},p={};return u&&i>Nr(a.minAngle)&&(p.calloutLabel=qe(Se({},this.getTextAlignment(e)),{text:this.getLabelText(a,qe(Se({},h),{value:r})),hidden:!1,collisionTextAlign:void 0,collisionOffsetY:0,box:void 0})),d&&(p.sectorLabel={text:this.getLabelText(l,qe(Se({},h),{value:n}))}),c!=null&&o!=null&&(p.legendItem={key:c,text:o}),p}getTextAlignment(t){const e=[{textAlign:"center",textBaseline:"bottom"},{textAlign:"left",textBaseline:"middle"},{textAlign:"center",textBaseline:"hanging"},{textAlign:"right",textBaseline:"middle"}],i=Ny(t),s=-.75*Math.PI,r=i-s,n=Math.floor(r/(Math.PI/2)),o=Ux(n,e.length);return e[o]}getSectorFormat(t,e,i){var s,r,n,o,a;const{callbackCache:l,highlightManager:c}=this.ctx,{angleKey:u,radiusKey:d,fills:h,strokes:p,formatter:f,sectorSpacing:m,__BACKGROUND_COLOR_DO_NOT_USE:g}=this.properties,y=c.getActiveHighlight(),v=i&&(y==null?void 0:y.series)===this&&e===y.itemId;let C=p[e%p.length];m==null&&C==null&&(C=g);const{fill:b,fillOpacity:T,stroke:A,strokeWidth:I,strokeOpacity:D}=Jt(v&&this.properties.highlightStyle.item,{fill:h.length>0?h[e%h.length]:void 0,fillOpacity:this.properties.fillOpacity,stroke:C,strokeWidth:this.getStrokeWidth(this.properties.strokeWidth),strokeOpacity:this.getOpacity()});let F;return f&&(F=l.call(f,{datum:t,angleKey:u,radiusKey:d,fill:b,stroke:A,fills:h,strokes:p,strokeWidth:I,highlighted:v,seriesId:this.id})),{fill:(s=F==null?void 0:F.fill)!=null?s:b,fillOpacity:(r=F==null?void 0:F.fillOpacity)!=null?r:T,stroke:(n=F==null?void 0:F.stroke)!=null?n:A,strokeWidth:(o=F==null?void 0:F.strokeWidth)!=null?o:I,strokeOpacity:(a=F==null?void 0:F.strokeOpacity)!=null?a:D}}getInnerRadius(){const{radius:t}=this,{innerRadiusRatio:e=1,innerRadiusOffset:i=0}=this.properties,s=t*e+i;return s===t||s<0?0:s}getOuterRadius(){const{outerRadiusRatio:t,outerRadiusOffset:e}=this.properties;return Math.max(this.radius*t+e,0)}updateRadiusScale(t){const e=[this.getInnerRadius(),this.getOuterRadius()];this.radiusScale.range=e,t&&(this.previousRadiusScale.range=e),this.nodeData=this.nodeData.map(i=>{var s=i,{radius:r}=s,n=xs(s,["radius"]);return qe(Se({},n),{radius:r,innerRadius:Math.max(this.radiusScale.convert(0),0),outerRadius:Math.max(this.radiusScale.convert(r),0)})})}getTitleTranslationY(){var t,e;const i=Math.max(0,this.radiusScale.range[1]);if(i===0)return NaN;const r=2+((e=(t=this.properties.title)==null?void 0:t.spacing)!=null?e:0),n=Math.max(0,-i);return-i-r-n}update(t){return Fe(this,arguments,function*({seriesRect:e}){const{title:i}=this.properties,s={seriesRectWidth:e==null?void 0:e.width,seriesRectHeight:e==null?void 0:e.height},r=Ho(this.nodeDataDependencies,s)!=null;if(r&&(this._nodeDataDependencies=s),yield this.maybeRefreshNodeData(),this.updateTitleNodes(),this.updateRadiusScale(r),this.contentGroup.translationX=this.centerX,this.contentGroup.translationY=this.centerY,this.highlightGroup.translationX=this.centerX,this.highlightGroup.translationY=this.centerY,this.backgroundGroup.translationX=this.centerX,this.backgroundGroup.translationY=this.centerY,this.labelGroup&&(this.labelGroup.translationX=this.centerX,this.labelGroup.translationY=this.centerY),i){const n=this.getTitleTranslationY(),o=i.node.computeBBox();i.node.visible=i.enabled&&isFinite(n)&&!this.bboxIntersectsSurroundingSeries(o,0,n),i.node.translationY=isFinite(n)?n:0}for(const n of[this.zerosumInnerRing,this.zerosumOuterRing])n.fillOpacity=0,n.stroke=this.properties.calloutLabel.color,n.strokeWidth=1,n.strokeOpacity=1;this.updateNodeMidPoint(),yield this.updateSelections(),yield this.updateNodes(e)})}updateTitleNodes(){var t,e;const{oldTitle:i}=this,{title:s}=this.properties;i!==s&&(i&&((t=this.labelGroup)==null||t.removeChild(i.node)),s&&(s.node.textBaseline="bottom",(e=this.labelGroup)==null||e.appendChild(s.node)),this.oldTitle=s)}updateNodeMidPoint(){this.nodeData.forEach(t=>{const e=t.innerRadius+(t.outerRadius-t.innerRadius)/2;t.midPoint={x:t.midCos*Math.max(0,e),y:t.midSin*Math.max(0,e)}})}updateSelections(){return Fe(this,null,function*(){yield this.updateGroupSelection(),this.updateInnerCircleSelection()})}updateGroupSelection(){return Fe(this,null,function*(){const{itemSelection:t,highlightSelection:e,calloutLabelSelection:i,sectorLabelSelection:s,innerLabelsSelection:r}=this,n=(o,a)=>{let l=this.nodeData;a&&(l=l.map(c=>qe(Se({},c),{sectorFormat:Se({},c.sectorFormat)}))),o.update(l,void 0,c=>this.getDatumId(c)),this.ctx.animationManager.isSkipped()&&o.cleanup()};n(t,!1),n(e,!0),i.update(this.nodeData,o=>{const a=new sr;a.tag=0,a.pointerEvents=1,o.appendChild(a);const l=new ri;l.tag=1,l.pointerEvents=1,o.appendChild(l)}),s.update(this.nodeData,o=>{o.pointerEvents=1}),r.update(this.properties.innerLabels,o=>{o.pointerEvents=1})})}updateInnerCircleSelection(){const{innerCircle:t}=this.properties;let e=0;const i=this.getInnerRadius();if(i>0){const r=Math.min(i,this.getOuterRadius());e=Math.ceil(r*2+1)}const s=t?[{radius:e}]:[];this.innerCircleSelection.update(s)}updateNodes(t){return Fe(this,null,function*(){const e=this.ctx.highlightManager.getActiveHighlight(),i=this.visible&&this.seriesItemEnabled.indexOf(!0)>=0;this.rootGroup.visible=i,this.backgroundGroup.visible=i,this.contentGroup.visible=i,this.highlightGroup.visible=i&&(e==null?void 0:e.series)===this,this.labelGroup&&(this.labelGroup.visible=i),this.contentGroup.opacity=this.getOpacity(),this.innerCircleSelection.each((r,{radius:n})=>{var o,a;r.setProperties({fill:(o=this.properties.innerCircle)==null?void 0:o.fill,opacity:(a=this.properties.innerCircle)==null?void 0:a.fillOpacity,size:n})});const s=(r,n,o,a)=>{const l=this.getSectorFormat(n.datum,n.itemId,a);n.sectorFormat.fill=l.fill,n.sectorFormat.stroke=l.stroke;const c=this.ctx.animationManager.isSkipped();c&&(r.startAngle=n.startAngle,r.endAngle=n.endAngle,r.innerRadius=n.innerRadius,r.outerRadius=n.outerRadius),(a||c)&&(r.fill=l.fill,r.stroke=l.stroke),r.strokeWidth=l.strokeWidth,r.fillOpacity=l.fillOpacity,r.strokeOpacity=this.properties.strokeOpacity,r.lineDash=this.properties.lineDash,r.lineDashOffset=this.properties.lineDashOffset,r.fillShadow=this.properties.shadow,r.cornerRadius=this.properties.cornerRadius,r.inset=this.properties.sectorSpacing!=null?(this.properties.sectorSpacing+(l.stroke!=null?l.strokeWidth:0))/2:0,r.lineJoin=this.properties.sectorSpacing!=null?"miter":"round"};this.itemSelection.each((r,n,o)=>s(r,n,o,!1)),this.highlightSelection.each((r,n,o)=>{const a=(e==null?void 0:e.series)===this&&r.datum.itemId===e.itemId;s(r,n,o,!0),r.visible=a}),this.updateCalloutLineNodes(),this.updateCalloutLabelNodes(t),this.updateSectorLabelNodes(),this.updateInnerLabelNodes(),this.updateZerosumRings(),this.animationState.transition("update")})}updateCalloutLineNodes(){var t;const{calloutLine:e}=this.properties,i=e.length,s=e.strokeWidth,r=(t=e.colors)!=null?t:this.properties.strokes,{offset:n}=this.properties.calloutLabel;this.calloutLabelSelection.selectByTag(0).forEach((o,a)=>{var l;const c=o.datum,{calloutLabel:u,outerRadius:d}=c;if(u!=null&&u.text&&!u.hidden&&d!==0){o.visible=!0,o.strokeWidth=s,o.stroke=r[a%r.length],o.fill=void 0;const h=c.midCos*d,p=c.midSin*d;let f=c.midCos*(d+i),m=c.midSin*(d+i);if(((l=u.collisionTextAlign)!=null?l:u.collisionOffsetY!==0)&&u.box!=null){const y=u.box;let v=f,C=m;f<y.x?v=y.x:f>y.x+y.width&&(v=y.x+y.width),m<y.y?C=y.y:m>y.y+y.height&&(C=y.y+y.height);const b=v-f,T=C-m,A=Math.sqrt(Math.pow(b,2)+Math.pow(T,2)),I=A-n;I>0&&(f=f+b*I/A,m=m+T*I/A)}o.x1=h,o.y1=p,o.x2=f,o.y2=m}else o.visible=!1})}getLabelOverflow(t,e,i){const s=i.x-this.centerX,r=i.x+i.width-this.centerX,n=i.y-this.centerY,o=i.y+i.height-this.centerY,a=1;let l=1;e.x+a<s?l=(e.x+e.width-s)/e.width:e.x+e.width-a>r&&(l=(r-e.x)/e.width);const c=e.y+a<n||e.y+e.height-a>o,u=l===1?t.length:Math.floor(t.length*l)-1,d=this.bboxIntersectsSurroundingSeries(e);return{textLength:u,hasVerticalOverflow:c,hasSurroundingSeriesOverflow:d}}bboxIntersectsSurroundingSeries(t,e=0,i=0){const{surroundingRadius:s}=this;if(s==null)return!1;const r=[{x:t.x+e,y:t.y+i},{x:t.x+t.width+e,y:t.y+i},{x:t.x+t.width+e,y:t.y+t.height+i},{x:t.x+e,y:t.y+t.height+i}],n=_t(s,2);return r.some(o=>_t(o.x,2)+_t(o.y,2)>n)}computeCalloutLabelCollisionOffsets(){const{radiusScale:t}=this,{calloutLabel:e,calloutLine:i}=this.properties,{offset:s,minSpacing:r}=e,n=t.convert(0),o=v=>!v.calloutLabel||v.outerRadius===0,a=this.nodeData,l=this.nodeData.filter(v=>!o(v));if(l.forEach(v=>{const C=v.calloutLabel;C!=null&&(C.hidden=!1,C.collisionTextAlign=void 0,C.collisionOffsetY=0)}),l.length<=1)return;const c=l.filter(v=>v.midCos<0).sort((v,C)=>v.midSin-C.midSin),u=l.filter(v=>v.midCos>=0).sort((v,C)=>v.midSin-C.midSin),d=l.filter(v=>{var C;return v.midSin<0&&((C=v.calloutLabel)==null?void 0:C.textAlign)==="center"}).sort((v,C)=>v.midCos-C.midCos),h=l.filter(v=>{var C;return v.midSin>=0&&((C=v.calloutLabel)==null?void 0:C.textAlign)==="center"}).sort((v,C)=>v.midCos-C.midCos),p=new ri,f=v=>{var C;const b=v.calloutLabel;if(b==null)return new lt(0,0,0,0);const T=v.outerRadius+i.length+s,A=v.midCos*T,I=v.midSin*T+b.collisionOffsetY;return p.text=b.text,p.x=A,p.y=I,p.setFont(this.properties.calloutLabel),p.setAlign({textAlign:(C=b.collisionTextAlign)!=null?C:b.textAlign,textBaseline:b.textBaseline}),p.computeBBox()},m=(v,C,b)=>{const T=f(v).grow(r/2),A=f(C).grow(r/2);if(T.x<A.x+A.width&&T.x+T.width>A.x&&(b==="to-top"?T.y<A.y+A.height:T.y+T.height>A.y)){const D=b==="to-top"?T.y-A.y-A.height:T.y+T.height-A.y;C.calloutLabel.collisionOffsetY=D}},g=v=>{const C=v.slice().sort((T,A)=>Math.abs(T.midSin)-Math.abs(A.midSin))[0],b=v.indexOf(C);for(let T=b-1;T>=0;T--){const A=v[T+1],I=v[T];m(A,I,"to-top")}for(let T=b+1;T<v.length;T++){const A=v[T-1],I=v[T];m(A,I,"to-bottom")}},y=v=>{const C=l.some(F=>F.calloutLabel.collisionOffsetY!==0),b=v.map(F=>f(F)),T=b.map(F=>F.clone().grow(r/2));let A=!1;for(let F=0;F<T.length&&!A;F++){const B=T[F];for(let U=F+1;U<v.length;U++){const H=T[U];if(B.collidesBBox(H)){A=!0;break}}}const I=a.map(F=>{const{startAngle:B,endAngle:U,outerRadius:H}=F;return{startAngle:B,endAngle:U,innerRadius:n,outerRadius:H}}),D=b.some(F=>I.some(B=>kB(F,B)));!A&&!C&&!D||v.filter(F=>F.calloutLabel.textAlign==="center").forEach(F=>{const B=F.calloutLabel;F.midCos<0?B.collisionTextAlign="right":F.midCos>0?B.collisionTextAlign="left":B.collisionTextAlign="center"})};g(c),g(u),y(d),y(h)}updateCalloutLabelNodes(t){const{radiusScale:e}=this,{calloutLabel:i,calloutLine:s}=this.properties,r=s.length,{offset:n,color:o}=i,a=new ri;this.calloutLabelSelection.selectByTag(1).forEach(l=>{var c;const{datum:u}=l,d=u.calloutLabel,h=e.convert(u.radius),p=Math.max(0,h);if(!(d!=null&&d.text)||p===0||d.hidden){l.visible=!1;return}const f=p+r+n,m=u.midCos*f,g=u.midSin*f+d.collisionOffsetY,y={textAlign:(c=d.collisionTextAlign)!=null?c:d.textAlign,textBaseline:d.textBaseline};a.text=d.text,a.x=m,a.y=g,a.setFont(this.properties.calloutLabel),a.setAlign(y);const v=a.computeBBox();let C=d.text,b=!0;if(i.avoidCollisions){const{textLength:T,hasVerticalOverflow:A}=this.getLabelOverflow(d.text,v,t);C=d.text.length===T?d.text:`${d.text.substring(0,T)}`,b=!A}l.text=C,l.x=m,l.y=g,l.setFont(this.properties.calloutLabel),l.setAlign(y),l.fill=o,l.visible=b})}computeLabelsBBox(t,e){return Fe(this,null,function*(){const{calloutLabel:i,calloutLine:s}=this.properties,r=s.length,{offset:n,maxCollisionOffset:o,minSpacing:a}=i;if(!i.avoidCollisions)return null;yield this.maybeRefreshNodeData(),this.updateRadiusScale(!1),this.computeCalloutLabelCollisionOffsets();const l=[],c=new ri;let u;const{title:d}=this.properties;if(d!=null&&d.text&&d.enabled){const h=this.getTitleTranslationY();isFinite(h)&&(c.text=d.text,c.x=0,c.y=h,c.setFont(d),c.setAlign({textBaseline:"bottom",textAlign:"center"}),u=c.computeBBox(),l.push(u))}return this.nodeData.forEach(h=>{var p;const f=h.calloutLabel;if(!f||h.outerRadius===0)return null;const m=h.outerRadius+r+n,g=h.midCos*m,y=h.midSin*m+f.collisionOffsetY;c.text=f.text,c.x=g,c.y=y,c.setFont(this.properties.calloutLabel),c.setAlign({textAlign:(p=f.collisionTextAlign)!=null?p:f.textAlign,textBaseline:f.textBaseline});const v=c.computeBBox();if(f.box=v,Math.abs(f.collisionOffsetY)>o){f.hidden=!0;return}if(u){const C=e.y-this.centerY,b=new lt(u.x-a,C,u.width+2*a,u.y+u.height+a-C);if(v.collidesBBox(b)){f.hidden=!0;return}}if(t.hideWhenNecessary){const{textLength:C,hasVerticalOverflow:b,hasSurroundingSeriesOverflow:T}=this.getLabelOverflow(f.text,v,e),A=f.text.length>2&&C<2;if(b||A||T){f.hidden=!0;return}}f.hidden=!1,l.push(v)}),l.length===0?null:lt.merge(l)})}updateSectorLabelNodes(){const{radiusScale:t}=this,e=t.convert(0),{fontSize:i,fontStyle:s,fontWeight:r,fontFamily:n,positionOffset:o,positionRatio:a,color:l}=this.properties.sectorLabel;this.sectorLabelSelection.each((c,u)=>{const{sectorLabel:d,outerRadius:h}=u;let p=!1;if(d&&h!==0){const f=e*(1-a)+h*a+o;c.fill=l,c.fontStyle=s,c.fontWeight=r,c.fontSize=i,c.fontFamily=n,c.text=d.text,c.x=u.midCos*f,c.y=u.midSin*f,c.textAlign="center",c.textBaseline="middle";const m=c.computeBBox(),g=[[m.x,m.y],[m.x+m.width,m.y],[m.x+m.width,m.y+m.height],[m.x,m.y+m.height]],{startAngle:y,endAngle:v}=u,C={startAngle:y,endAngle:v,innerRadius:e,outerRadius:h};g.every(([b,T])=>vS(b,T,C))&&(p=!0)}c.visible=p})}updateInnerLabelNodes(){const t=[],e=[];this.innerLabelsSelection.each((u,d)=>{const{fontStyle:h,fontWeight:p,fontSize:f,fontFamily:m,color:g}=d;u.fontStyle=h,u.fontWeight=p,u.fontSize=f,u.fontFamily=m,u.text=d.text,u.x=0,u.y=0,u.fill=g,u.textAlign="center",u.textBaseline="alphabetic",t.push(u.computeBBox()),e.push(d.margin)});const i=u=>u===0?0:e[u],s=u=>u===e.length-1?0:e[u],r=t.reduce((u,d,h)=>u+d.height+i(h)+s(h),0),n=Math.max(...t.map(u=>u.width)),o=this.getInnerRadius(),l=Math.sqrt(Math.pow(n/2,2)+Math.pow(r/2,2))<=(o>0?o:this.getOuterRadius()),c=[];for(let u=0,d=-r/2;u<t.length;u++){const p=t[u].height+d+i(u);c.push(p),d=p+s(u)}this.innerLabelsSelection.each((u,d,h)=>{u.y=c[h],u.visible=l})}updateZerosumRings(){this.zerosumOuterRing.size=this.getOuterRadius()*2,this.zerosumInnerRing.size=this.getInnerRadius()*2}getDatumLegendName(t){const{angleKey:e,calloutLabelKey:i,sectorLabelKey:s,legendItemKey:r}=this.properties,{sectorLabel:n,calloutLabel:o,legendItem:a}=t;if(r&&a!==void 0)return a.text;if(i&&i!==e&&(o==null?void 0:o.text)!==void 0)return o.text;if(s&&s!==e&&(n==null?void 0:n.text)!==void 0)return n.text}pickNodeClosestDatum(t){return OP(this,t)}getTooltipHtml(t){var e;if(!this.properties.isValid())return Lc;const{datum:i,angleValue:s,sectorFormat:{fill:r},itemId:n}=t,o=Zi((e=this.properties.title)==null?void 0:e.text),a=gi(s)?jx(s):String(s),l=this.getDatumLegendName(t);return this.properties.tooltip.toTooltipHtml({title:o??l,content:o&&l?`${l}: ${a}`:a,backgroundColor:r},{datum:i,itemId:n,title:o,color:r,seriesId:this.id,angleKey:this.properties.angleKey,angleName:this.properties.angleName,radiusKey:this.properties.radiusKey,radiusName:this.properties.radiusName,calloutLabelKey:this.properties.calloutLabelKey,calloutLabelName:this.properties.calloutLabelName,sectorLabelKey:this.properties.sectorLabelKey,sectorLabelName:this.properties.sectorLabelName,legendItemKey:this.properties.legendItemKey})}getLegendData(t){var e,i,s,r,n;const{visible:o,processedData:a,dataModel:l}=this;if(!l||!(a!=null&&a.data.length)||!this.properties.isValid()||t!=="category")return[];const{angleKey:c,calloutLabelKey:u,sectorLabelKey:d,legendItemKey:h}=this.properties;if(!h&&(!u||u===c)&&(!d||d===c))return[];const{calloutLabelIdx:p,sectorLabelIdx:f,legendItemIdx:m}=this.getProcessedDataIndexes(l),g=((e=this.properties.title)==null?void 0:e.showInLegend)&&this.properties.title.text,y=[];for(let v=0;v<a.data.length;v++){const{datum:C,values:b}=a.data[v],T=[];g&&T.push(g);const A=this.getLabels(C,2*Math.PI,2*Math.PI,!1,b[p],b[f],b[m]);if(h&&A.legendItem!==void 0?T.push(A.legendItem.text):u&&u!==c&&((i=A.calloutLabel)==null?void 0:i.text)!==void 0?T.push((s=A.calloutLabel)==null?void 0:s.text):d&&d!==c&&((r=A.sectorLabel)==null?void 0:r.text)!==void 0&&T.push((n=A.sectorLabel)==null?void 0:n.text),T.length===0)continue;const I=this.getSectorFormat(C,v,!1);y.push({legendType:"category",id:this.id,itemId:v,seriesId:this.id,enabled:o&&this.seriesItemEnabled[v],label:{text:T.join(" - ")},marker:{fill:I.fill,stroke:I.stroke,fillOpacity:this.properties.fillOpacity,strokeOpacity:this.properties.strokeOpacity,strokeWidth:this.properties.strokeWidth},legendItemName:h!=null?C[h]:void 0})}return y}onLegendItemClick(t){const{enabled:e,itemId:i,series:s,legendItemName:r}=t;s.id===this.id?this.toggleSeriesItem(i,e):r!=null&&this.toggleOtherSeriesItems(r,e)}toggleSeriesItem(t,e){this.seriesItemEnabled[t]=e,this.nodeDataRefresh=!0}toggleOtherSeriesItems(t,e){var i;if(!this.properties.legendItemKey||!this.dataModel)return;const s=this.dataModel.resolveProcessedDataIndexById(this,"legendItemValue");(i=this.processedData)==null||i.data.forEach(({values:r},n)=>{r[s]===t&&this.toggleSeriesItem(n,e)})}animateEmptyUpdateReady(t){const{animationManager:e}=this.ctx,i=fh(!0,this.properties.rotation,this.radiusScale,this.previousRadiusScale);Ji(this.id,"nodes",e,[this.itemSelection,this.highlightSelection],i.nodes),Ji(this.id,"innerCircle",e,[this.innerCircleSelection],i.innerCircle),Mi(this,"callout",e,this.calloutLabelSelection),Mi(this,"sector",e,this.sectorLabelSelection),Mi(this,"inner",e,this.innerLabelsSelection),this.previousRadiusScale.range=this.radiusScale.range}animateWaitingUpdateReady(){var t,e,i,s,r,n;const{itemSelection:o,highlightSelection:a,processedData:l,radiusScale:c,previousRadiusScale:u}=this,{animationManager:d}=this.ctx,h=(t=l==null?void 0:l.reduced)==null?void 0:t.diff;this.ctx.animationManager.stopByAnimationGroupId(this.id);const p=((e=h==null?void 0:h.moved.size)!=null?e:0)===0,f=((i=l==null?void 0:l.defs.keys.length)!=null?i:0)>0,m=(n=(r=(s=l==null?void 0:l.reduced)==null?void 0:s.animationValidation)==null?void 0:r.uniqueKeys)!=null?n:!0;(!p||!f||!m)&&this.ctx.animationManager.skipCurrentBatch();const g=fh(!1,this.properties.rotation,c,u);Ji(this.id,"nodes",d,[o,a],g.nodes,(y,v)=>this.getDatumId(v),h),Ji(this.id,"innerCircle",d,[this.innerCircleSelection],g.innerCircle),Mi(this,"callout",this.ctx.animationManager,this.calloutLabelSelection),Mi(this,"sector",this.ctx.animationManager,this.sectorLabelSelection),Mi(this,"inner",this.ctx.animationManager,this.innerLabelsSelection),this.previousRadiusScale.range=this.radiusScale.range}animateClearingUpdateEmpty(){const{itemSelection:t,highlightSelection:e,radiusScale:i,previousRadiusScale:s}=this,{animationManager:r}=this.ctx,n=fh(!1,this.properties.rotation,i,s);Ji(this.id,"nodes",r,[t,e],n.nodes),Ji(this.id,"innerCircle",r,[this.innerCircleSelection],n.innerCircle),ph(this,"callout",this.ctx.animationManager,this.calloutLabelSelection),ph(this,"sector",this.ctx.animationManager,this.sectorLabelSelection),ph(this,"inner",this.ctx.animationManager,this.innerLabelsSelection),this.previousRadiusScale.range=this.radiusScale.range}getDatumIdFromData(t){var e,i,s;const{calloutLabelKey:r,sectorLabelKey:n,legendItemKey:o}=this.properties;if((s=(i=(e=this.processedData)==null?void 0:e.reduced)==null?void 0:i.animationValidation)!=null&&s.uniqueKeys){if(o)return t[o];if(r)return t[r];if(n)return t[n]}}getDatumId(t){const{index:e}=t,i=this.getDatumIdFromData(t.datum);return i!=null?String(i):`${e}`}onDataChange(){var t;const{data:e,seriesItemEnabled:i}=this;this.seriesItemEnabled=(t=e==null?void 0:e.map((s,r)=>{var n;return(n=i[r])!=null?n:!0}))!=null?t:[]}computeFocusBounds(t){return GP(this,t)}};dE.className="DonutSeries";dE.type="donut";var OB={series:{__extends__:Dc,title:{enabled:!0,fontStyle:void 0,fontWeight:"normal",fontSize:14,fontFamily:Ks,color:Bf,spacing:5},calloutLabel:{enabled:!0,fontStyle:void 0,fontWeight:void 0,fontSize:12,fontFamily:Ks,color:Ti,offset:3,minAngle:0},sectorLabel:{enabled:!0,fontStyle:void 0,fontWeight:"normal",fontSize:12,fontFamily:Ks,color:em,positionOffset:0,positionRatio:.5},calloutLine:{length:10,strokeWidth:2},fillOpacity:1,strokeOpacity:1,strokeWidth:1,lineDash:[0],lineDashOffset:0,rotation:0,shadow:{enabled:!1,color:tm,xOffset:3,yOffset:3,blur:5},innerLabels:{fontStyle:void 0,fontWeight:void 0,fontSize:12,fontFamily:Ks,color:Ti,margin:2},__BACKGROUND_COLOR_DO_NOT_USE:Py}},GB=({takeColors:t,colorsCount:e,userPalette:i})=>{const{fills:s,strokes:r}=t(e);return{fills:s,strokes:i?r:[],calloutLine:{colors:r}}},Oee={type:"series",optionsKey:"series[]",packageType:"community",chartTypes:["polar"],identifier:"donut",instanceConstructor:dE,themeTemplate:OB,paletteFactory:GB},BB=class extends Ki{constructor(){super(...arguments),this.showInLegend=!1}};q([te(Et)],BB.prototype,"showInLegend",2);var BP=class extends Bs{set(t,e){return super.set(t)}};q([cp("Use a Donut Series instead"),te($e,{optional:!0})],BP.prototype,"text",2);q([cp("Use a Donut Series instead"),te(Ui,{optional:!0})],BP.prototype,"margin",2);var VP=class extends ti{};q([cp("Use a Donut Series instead"),te(mi,{optional:!0})],VP.prototype,"fill",2);q([cp("Use a Donut Series instead"),te(Si,{optional:!0})],VP.prototype,"fillOpacity",2);var mm=class extends Bs{constructor(){super(...arguments),this.offset=3,this.minAngle=0,this.minSpacing=4,this.maxCollisionOffset=50,this.avoidCollisions=!0}};q([te(Ge)],mm.prototype,"offset",2);q([te(dd)],mm.prototype,"minAngle",2);q([te(Ge)],mm.prototype,"minSpacing",2);q([te(Ge)],mm.prototype,"maxCollisionOffset",2);q([te(Et)],mm.prototype,"avoidCollisions",2);var HP=class extends Bs{constructor(){super(...arguments),this.positionOffset=0,this.positionRatio=.5}};q([te(Ui)],HP.prototype,"positionOffset",2);q([te(Si)],HP.prototype,"positionRatio",2);var hE=class extends ti{constructor(){super(...arguments),this.length=10,this.strokeWidth=1}};q([te(qo,{optional:!0})],hE.prototype,"colors",2);q([te(Ge)],hE.prototype,"length",2);q([te(Ge)],hE.prototype,"strokeWidth",2);var li=class extends Pa{constructor(){super(...arguments),this.fills=Object.values(_o),this.strokes=Object.values(Ul),this.fillOpacity=1,this.strokeOpacity=1,this.lineDash=[0],this.lineDashOffset=0,this.cornerRadius=0,this.rotation=0,this.outerRadiusOffset=0,this.outerRadiusRatio=1,this.strokeWidth=1,this.sectorSpacing=void 0,this.innerLabels=new jC(BP),this.title=new BB,this.innerCircle=new VP,this.shadow=new Ia,this.calloutLabel=new mm,this.sectorLabel=new HP,this.calloutLine=new hE,this.tooltip=new Un,this.__BACKGROUND_COLOR_DO_NOT_USE=void 0}};q([te($e)],li.prototype,"angleKey",2);q([te($e,{optional:!0})],li.prototype,"angleName",2);q([te($e,{optional:!0})],li.prototype,"radiusKey",2);q([te($e,{optional:!0})],li.prototype,"radiusName",2);q([te(Ge,{optional:!0})],li.prototype,"radiusMin",2);q([te(Ge,{optional:!0})],li.prototype,"radiusMax",2);q([te($e,{optional:!0})],li.prototype,"calloutLabelKey",2);q([te($e,{optional:!0})],li.prototype,"calloutLabelName",2);q([te($e,{optional:!0})],li.prototype,"sectorLabelKey",2);q([te($e,{optional:!0})],li.prototype,"sectorLabelName",2);q([te($e,{optional:!0})],li.prototype,"legendItemKey",2);q([te(qo)],li.prototype,"fills",2);q([te(qo)],li.prototype,"strokes",2);q([te(Si)],li.prototype,"fillOpacity",2);q([te(Si)],li.prototype,"strokeOpacity",2);q([te(Fc)],li.prototype,"lineDash",2);q([te(Ge)],li.prototype,"lineDashOffset",2);q([te(Ge)],li.prototype,"cornerRadius",2);q([te(go,{optional:!0})],li.prototype,"formatter",2);q([te(dd)],li.prototype,"rotation",2);q([te(Ui)],li.prototype,"outerRadiusOffset",2);q([te(Si)],li.prototype,"outerRadiusRatio",2);q([cp("Use a Donut Series instead"),te(Ui,{optional:!0})],li.prototype,"innerRadiusOffset",2);q([cp("Use a Donut Series instead"),te(Si,{optional:!0})],li.prototype,"innerRadiusRatio",2);q([te(Ge)],li.prototype,"strokeWidth",2);q([te(Ge,{optional:!0})],li.prototype,"sectorSpacing",2);q([te(RD)],li.prototype,"innerLabels",2);q([te(rt)],li.prototype,"title",2);q([te(rt)],li.prototype,"innerCircle",2);q([te(rt)],li.prototype,"shadow",2);q([te(rt)],li.prototype,"calloutLabel",2);q([te(rt)],li.prototype,"sectorLabel",2);q([te(rt)],li.prototype,"calloutLine",2);q([te(rt)],li.prototype,"tooltip",2);q([te($e,{optional:!0})],li.prototype,"__BACKGROUND_COLOR_DO_NOT_USE",2);var Gee=class extends QC{constructor(t,e,i,s){super(t,e,i,s),this.angleKey=s.properties.angleKey,this.radiusKey=s.properties.radiusKey,this.calloutLabelKey=s.properties.calloutLabelKey,this.sectorLabelKey=s.properties.sectorLabelKey}},pE=class extends uE{constructor(t){super({moduleCtx:t,pickModes:[0],useLabelLayer:!0,animationResetFns:{item:NP,label:Gc}}),this.properties=new li,this.previousRadiusScale=new nl,this.radiusScale=new nl,this.backgroundGroup=this.rootGroup.appendChild(new ft({name:`${this.id}-background`,layer:!0,zIndex:0})),this.zerosumRingsGroup=this.backgroundGroup.appendChild(new ft({name:`${this.id}-zerosumRings`})),this.zerosumOuterRing=this.zerosumRingsGroup.appendChild(new rl),this.zerosumInnerRing=this.zerosumRingsGroup.appendChild(new rl),this.innerCircleGroup=this.backgroundGroup.appendChild(new ft({name:`${this.id}-innerCircle`})),this.seriesItemEnabled=[],this.surroundingRadius=void 0,this.NodeEvent=Gee,this.angleScale=new nl,this.angleScale.domain=[0,1],this.angleScale.range=[-Math.PI,Math.PI].map(r=>r+Math.PI/2);const e=new ft({name:"pieCalloutLabels"}),i=new ft({name:"pieSectorLabels"}),s=new ft({name:"innerLabels"});this.labelGroup.append(e),this.labelGroup.append(i),this.labelGroup.append(s),this.calloutLabelSelection=Qi.select(e,ft),this.sectorLabelSelection=Qi.select(i,ri),this.innerLabelsSelection=Qi.select(s,ri),this.innerCircleSelection=Qi.select(this.innerCircleGroup,rl)}addChartEventListeners(){var t;this.destroyFns.push((t=this.ctx.chartEventManager)==null?void 0:t.addListener("legend-item-click",e=>this.onLegendItemClick(e)))}get visible(){return super.visible&&(this.seriesItemEnabled.length===0||this.seriesItemEnabled.some(t=>t))}nodeFactory(){return new wr}getSeriesDomain(t){return t==="x"?this.angleScale.domain:this.radiusScale.domain}processData(t){return Fe(this,null,function*(){var e,i,s,r,n;if(this.data==null||!this.properties.isValid())return;let{data:o}=this;const{visible:a,seriesItemEnabled:l}=this,{angleKey:c,radiusKey:u,calloutLabelKey:d,sectorLabelKey:h,legendItemKey:p}=this.properties,f=!this.ctx.animationManager.isSkipped(),m=[],g=[];p?m.push(mr(p,"band",{id:"legendItemKey"})):d?m.push(mr(d,"band",{id:"calloutLabelKey"})):h&&m.push(mr(h,"band",{id:"sectorLabelKey"}));const y=this.radiusScale.type,v=this.radiusScale.type;u&&g.push(ZD(u,{id:"radiusValue",min:(e=this.properties.radiusMin)!=null?e:0,max:this.properties.radiusMax}),Vi(u,y,{id:"radiusRaw"}),Vy({id:"radiusValue"},[0,1],1,(i=this.properties.radiusMin)!=null?i:0,this.properties.radiusMax)),d&&g.push(Vi(d,"band",{id:"calloutLabelValue"})),h&&g.push(Vi(h,"band",{id:"sectorLabelValue"})),p&&g.push(Vi(p,"band",{id:"legendItemValue"})),f&&this.processedData&&m.length>0&&g.push(hp(this.processedData)),g.push(cm()),o=o.map((C,b)=>a&&l[b]?C:qe(Se({},C),{[c]:0})),yield this.requestDataModel(t,o,{props:[...m,JD(c,v,{id:"angleValue",onlyPositive:!0}),Vi(c,v,{id:"angleRaw"}),Vy({id:"angleValue"},[0,1],0,0),...g]});for(const C of(n=(r=(s=this.processedData)==null?void 0:s.defs)==null?void 0:r.values)!=null?n:[]){const{id:b,missing:T,property:A}=C,I=KD(this,T);b!=="angleRaw"&&I>0&&Be.warnOnce(`no value was found for the key '${String(A)}' on ${I} data element${I>1?"s":""}`)}this.animationState.transition("updateData")})}maybeRefreshNodeData(){return Fe(this,null,function*(){var t;if(!this.nodeDataRefresh)return;const{nodeData:e=[]}=(t=yield this.createNodeData())!=null?t:{};this.nodeData=e,this.nodeDataRefresh=!1})}getProcessedDataIndexes(t){const e=t.resolveProcessedDataIndexById(this,"angleValue"),i=this.properties.radiusKey?t.resolveProcessedDataIndexById(this,"radiusValue"):-1,s=this.properties.calloutLabelKey?t.resolveProcessedDataIndexById(this,"calloutLabelValue"):-1,r=this.properties.sectorLabelKey?t.resolveProcessedDataIndexById(this,"sectorLabelValue"):-1,n=this.properties.legendItemKey?t.resolveProcessedDataIndexById(this,"legendItemValue"):-1;return{angleIdx:e,radiusIdx:i,calloutLabelIdx:s,sectorLabelIdx:r,legendItemIdx:n}}createNodeData(){return Fe(this,null,function*(){const{id:t,processedData:e,dataModel:i,angleScale:s}=this,{rotation:r}=this.properties;if(!e||!i||e.type!=="ungrouped")return;const{angleIdx:n,radiusIdx:o,calloutLabelIdx:a,sectorLabelIdx:l,legendItemIdx:c}=this.getProcessedDataIndexes(i);let u=0,d=0;const h=e.data.map((f,m)=>{var g;const{datum:y,values:v}=f,C=v[n],b=s.convert(u)+Nr(r);u=C,d+=C;const T=s.convert(u)+Nr(r),A=Math.abs(T-b),I=b+A/2,D=v[n+1],F=o>=0&&(g=v[o])!=null?g:1,B=o>=0?v[o+1]:void 0,U=c>=0?v[c]:void 0,H=this.getLabels(y,I,A,!0,v[a],v[l],U),R=this.getSectorFormat(y,m,!1);return Se({itemId:m,series:this,datum:y,index:m,angleValue:D,midAngle:I,midCos:Math.cos(I),midSin:Math.sin(I),startAngle:b,endAngle:T,sectorFormat:R,radiusValue:B,radius:F,innerRadius:Math.max(this.radiusScale.convert(0),0),outerRadius:Math.max(this.radiusScale.convert(F),0),legendItemValue:U},H)});this.zerosumOuterRing.visible=d===0;const{innerRadiusRatio:p=1}=this.properties;return this.zerosumInnerRing.visible=d===0&&p!==1&&p>0,{itemId:t,nodeData:h,labelData:h}})}getLabels(t,e,i,s,r,n,o){const{calloutLabel:a,sectorLabel:l,legendItemKey:c}=this.properties,u=!s||a.enabled?this.properties.calloutLabelKey:void 0,d=!s||l.enabled?this.properties.sectorLabelKey:void 0;if(!u&&!d&&!c)return{};const h={datum:t,angleKey:this.properties.angleKey,angleName:this.properties.angleName,radiusKey:this.properties.radiusKey,radiusName:this.properties.radiusName,calloutLabelKey:this.properties.calloutLabelKey,calloutLabelName:this.properties.calloutLabelName,sectorLabelKey:this.properties.sectorLabelKey,sectorLabelName:this.properties.sectorLabelName,legendItemKey:this.properties.legendItemKey},p={};return u&&i>Nr(a.minAngle)&&(p.calloutLabel=qe(Se({},this.getTextAlignment(e)),{text:this.getLabelText(a,qe(Se({},h),{value:r})),hidden:!1,collisionTextAlign:void 0,collisionOffsetY:0,box:void 0})),d&&(p.sectorLabel={text:this.getLabelText(l,qe(Se({},h),{value:n}))}),c!=null&&o!=null&&(p.legendItem={key:c,text:o}),p}getTextAlignment(t){const e=[{textAlign:"center",textBaseline:"bottom"},{textAlign:"left",textBaseline:"middle"},{textAlign:"center",textBaseline:"hanging"},{textAlign:"right",textBaseline:"middle"}],i=Ny(t),s=-.75*Math.PI,r=i-s,n=Math.floor(r/(Math.PI/2)),o=Ux(n,e.length);return e[o]}getSectorFormat(t,e,i){var s,r,n,o,a;const{callbackCache:l,highlightManager:c}=this.ctx,{angleKey:u,radiusKey:d,fills:h,strokes:p,formatter:f,sectorSpacing:m,__BACKGROUND_COLOR_DO_NOT_USE:g}=this.properties,y=c.getActiveHighlight(),v=i&&(y==null?void 0:y.series)===this&&e===y.itemId;let C=p[e%p.length];m!=null&&(C??(C=g));const{fill:b,fillOpacity:T,stroke:A,strokeWidth:I,strokeOpacity:D}=Jt(v&&this.properties.highlightStyle.item,{fill:h.length>0?h[e%h.length]:void 0,fillOpacity:this.properties.fillOpacity,stroke:C,strokeWidth:this.getStrokeWidth(this.properties.strokeWidth),strokeOpacity:this.getOpacity()});let F;return f&&(F=l.call(f,{datum:t,angleKey:u,radiusKey:d,fill:b,stroke:A,fills:h,strokes:p,strokeWidth:I,highlighted:v,seriesId:this.id})),{fill:(s=F==null?void 0:F.fill)!=null?s:b,fillOpacity:(r=F==null?void 0:F.fillOpacity)!=null?r:T,stroke:(n=F==null?void 0:F.stroke)!=null?n:A,strokeWidth:(o=F==null?void 0:F.strokeWidth)!=null?o:I,strokeOpacity:(a=F==null?void 0:F.strokeOpacity)!=null?a:D}}getInnerRadius(){const{radius:t}=this,{innerRadiusRatio:e=1,innerRadiusOffset:i=0}=this.properties,s=t*e+i;return s===t||s<0?0:s}getOuterRadius(){return Math.max(this.radius*this.properties.outerRadiusRatio+this.properties.outerRadiusOffset,0)}updateRadiusScale(t){const e=[this.getInnerRadius(),this.getOuterRadius()];this.radiusScale.range=e,t&&(this.previousRadiusScale.range=e),this.nodeData=this.nodeData.map(i=>{var s=i,{radius:r}=s,n=xs(s,["radius"]);return qe(Se({},n),{radius:r,innerRadius:Math.max(this.radiusScale.convert(0),0),outerRadius:Math.max(this.radiusScale.convert(r),0)})})}getTitleTranslationY(){var t,e;const i=Math.max(0,this.radiusScale.range[1]);if(i===0)return NaN;const r=2+((e=(t=this.properties.title)==null?void 0:t.spacing)!=null?e:0),n=Math.max(0,-i);return-i-r-n}update(t){return Fe(this,arguments,function*({seriesRect:e}){const{title:i}=this.properties,s={seriesRectWidth:e==null?void 0:e.width,seriesRectHeight:e==null?void 0:e.height},r=Ho(this.nodeDataDependencies,s)!=null;if(r&&(this._nodeDataDependencies=s),yield this.maybeRefreshNodeData(),this.updateTitleNodes(),this.updateRadiusScale(r),this.contentGroup.translationX=this.centerX,this.contentGroup.translationY=this.centerY,this.highlightGroup.translationX=this.centerX,this.highlightGroup.translationY=this.centerY,this.backgroundGroup.translationX=this.centerX,this.backgroundGroup.translationY=this.centerY,this.labelGroup&&(this.labelGroup.translationX=this.centerX,this.labelGroup.translationY=this.centerY),i){const n=this.getTitleTranslationY(),o=i.node.computeBBox();i.node.visible=i.enabled&&isFinite(n)&&!this.bboxIntersectsSurroundingSeries(o,0,n),i.node.translationY=isFinite(n)?n:0}for(const n of[this.zerosumInnerRing,this.zerosumOuterRing])n.fillOpacity=0,n.stroke=this.properties.calloutLabel.color,n.strokeWidth=1,n.strokeOpacity=1;this.updateNodeMidPoint(),yield this.updateSelections(),yield this.updateNodes(e)})}updateTitleNodes(){var t,e;const{oldTitle:i}=this,{title:s}=this.properties;i!==s&&(i&&((t=this.labelGroup)==null||t.removeChild(i.node)),s&&(s.node.textBaseline="bottom",(e=this.labelGroup)==null||e.appendChild(s.node)),this.oldTitle=s)}updateNodeMidPoint(){this.nodeData.forEach(t=>{const e=t.innerRadius+(t.outerRadius-t.innerRadius)/2;t.midPoint={x:t.midCos*Math.max(0,e),y:t.midSin*Math.max(0,e)}})}updateSelections(){return Fe(this,null,function*(){yield this.updateGroupSelection(),this.updateInnerCircleSelection()})}updateGroupSelection(){return Fe(this,null,function*(){const{itemSelection:t,highlightSelection:e,calloutLabelSelection:i,sectorLabelSelection:s,innerLabelsSelection:r}=this,n=(o,a)=>{let l=this.nodeData;a&&(l=l.map(c=>qe(Se({},c),{sectorFormat:Se({},c.sectorFormat)}))),o.update(l,void 0,c=>this.getDatumId(c)),this.ctx.animationManager.isSkipped()&&o.cleanup()};n(t,!1),n(e,!0),i.update(this.nodeData,o=>{const a=new sr;a.tag=0,a.pointerEvents=1,o.appendChild(a);const l=new ri;l.tag=1,l.pointerEvents=1,o.appendChild(l)}),s.update(this.nodeData,o=>{o.pointerEvents=1}),r.update(this.properties.innerLabels,o=>{o.pointerEvents=1})})}updateInnerCircleSelection(){const{innerCircle:t}=this.properties;let e=0;const i=this.getInnerRadius();if(i>0){const r=Math.min(i,this.getOuterRadius());e=Math.ceil(r*2+1)}const s=t?[{radius:e}]:[];this.innerCircleSelection.update(s)}updateNodes(t){return Fe(this,null,function*(){const e=this.ctx.highlightManager.getActiveHighlight(),i=this.visible&&this.seriesItemEnabled.indexOf(!0)>=0;this.rootGroup.visible=i,this.backgroundGroup.visible=i,this.contentGroup.visible=i,this.highlightGroup.visible=i&&(e==null?void 0:e.series)===this,this.labelGroup&&(this.labelGroup.visible=i),this.contentGroup.opacity=this.getOpacity(),this.innerCircleSelection.each((r,{radius:n})=>{var o,a;r.setProperties({fill:(o=this.properties.innerCircle)==null?void 0:o.fill,opacity:(a=this.properties.innerCircle)==null?void 0:a.fillOpacity,size:n})});const s=(r,n,o,a)=>{const l=this.getSectorFormat(n.datum,n.itemId,a);n.sectorFormat.fill=l.fill,n.sectorFormat.stroke=l.stroke;const c=this.ctx.animationManager.isSkipped();c&&(r.startAngle=n.startAngle,r.endAngle=n.endAngle,r.innerRadius=n.innerRadius,r.outerRadius=n.outerRadius),(a||c)&&(r.fill=l.fill,r.stroke=l.stroke),r.strokeWidth=l.strokeWidth,r.fillOpacity=l.fillOpacity,r.strokeOpacity=this.properties.strokeOpacity,r.lineDash=this.properties.lineDash,r.lineDashOffset=this.properties.lineDashOffset,r.fillShadow=this.properties.shadow,r.cornerRadius=this.properties.cornerRadius,r.inset=this.properties.sectorSpacing!=null?(this.properties.sectorSpacing+(l.stroke!=null?l.strokeWidth:0))/2:0,r.lineJoin=this.properties.sectorSpacing!=null?"miter":"round"};this.itemSelection.each((r,n,o)=>s(r,n,o,!1)),this.highlightSelection.each((r,n,o)=>{const a=(e==null?void 0:e.series)===this&&r.datum.itemId===e.itemId;s(r,n,o,!0),r.visible=a}),this.updateCalloutLineNodes(),this.updateCalloutLabelNodes(t),this.updateSectorLabelNodes(),this.updateInnerLabelNodes(),this.updateZerosumRings(),this.animationState.transition("update")})}updateCalloutLineNodes(){var t;const{calloutLine:e}=this.properties,i=e.length,s=e.strokeWidth,r=(t=e.colors)!=null?t:this.properties.strokes,{offset:n}=this.properties.calloutLabel;this.calloutLabelSelection.selectByTag(0).forEach((o,a)=>{var l;const c=o.datum,{calloutLabel:u,outerRadius:d}=c;if(u!=null&&u.text&&!u.hidden&&d!==0){o.visible=!0,o.strokeWidth=s,o.stroke=r[a%r.length],o.fill=void 0;const h=c.midCos*d,p=c.midSin*d;let f=c.midCos*(d+i),m=c.midSin*(d+i);if(((l=u.collisionTextAlign)!=null?l:u.collisionOffsetY!==0)&&u.box!=null){const y=u.box;let v=f,C=m;f<y.x?v=y.x:f>y.x+y.width&&(v=y.x+y.width),m<y.y?C=y.y:m>y.y+y.height&&(C=y.y+y.height);const b=v-f,T=C-m,A=Math.sqrt(Math.pow(b,2)+Math.pow(T,2)),I=A-n;I>0&&(f=f+b*I/A,m=m+T*I/A)}o.x1=h,o.y1=p,o.x2=f,o.y2=m}else o.visible=!1})}getLabelOverflow(t,e,i){const s=i.x-this.centerX,r=i.x+i.width-this.centerX,n=i.y-this.centerY,o=i.y+i.height-this.centerY,a=1;let l=1;e.x+a<s?l=(e.x+e.width-s)/e.width:e.x+e.width-a>r&&(l=(r-e.x)/e.width);const c=e.y+a<n||e.y+e.height-a>o,u=l===1?t.length:Math.floor(t.length*l)-1,d=this.bboxIntersectsSurroundingSeries(e);return{textLength:u,hasVerticalOverflow:c,hasSurroundingSeriesOverflow:d}}bboxIntersectsSurroundingSeries(t,e=0,i=0){const{surroundingRadius:s}=this;if(s==null)return!1;const r=[{x:t.x+e,y:t.y+i},{x:t.x+t.width+e,y:t.y+i},{x:t.x+t.width+e,y:t.y+t.height+i},{x:t.x+e,y:t.y+t.height+i}],n=_t(s,2);return r.some(o=>_t(o.x,2)+_t(o.y,2)>n)}computeCalloutLabelCollisionOffsets(){const{radiusScale:t}=this,{calloutLabel:e,calloutLine:i}=this.properties,{offset:s,minSpacing:r}=e,n=t.convert(0),o=v=>!v.calloutLabel||v.outerRadius===0,a=this.nodeData,l=this.nodeData.filter(v=>!o(v));if(l.forEach(v=>{const C=v.calloutLabel;C!=null&&(C.hidden=!1,C.collisionTextAlign=void 0,C.collisionOffsetY=0)}),l.length<=1)return;const c=l.filter(v=>v.midCos<0).sort((v,C)=>v.midSin-C.midSin),u=l.filter(v=>v.midCos>=0).sort((v,C)=>v.midSin-C.midSin),d=l.filter(v=>{var C;return v.midSin<0&&((C=v.calloutLabel)==null?void 0:C.textAlign)==="center"}).sort((v,C)=>v.midCos-C.midCos),h=l.filter(v=>{var C;return v.midSin>=0&&((C=v.calloutLabel)==null?void 0:C.textAlign)==="center"}).sort((v,C)=>v.midCos-C.midCos),p=new ri,f=v=>{var C;const b=v.calloutLabel;if(b==null)return new lt(0,0,0,0);const T=v.outerRadius+i.length+s,A=v.midCos*T,I=v.midSin*T+b.collisionOffsetY;return p.text=b.text,p.x=A,p.y=I,p.setFont(this.properties.calloutLabel),p.setAlign({textAlign:(C=b.collisionTextAlign)!=null?C:b.textAlign,textBaseline:b.textBaseline}),p.computeBBox()},m=(v,C,b)=>{const T=f(v).grow(r/2),A=f(C).grow(r/2);if(T.x<A.x+A.width&&T.x+T.width>A.x&&(b==="to-top"?T.y<A.y+A.height:T.y+T.height>A.y)){const D=b==="to-top"?T.y-A.y-A.height:T.y+T.height-A.y;C.calloutLabel.collisionOffsetY=D}},g=v=>{const C=v.slice().sort((T,A)=>Math.abs(T.midSin)-Math.abs(A.midSin))[0],b=v.indexOf(C);for(let T=b-1;T>=0;T--){const A=v[T+1],I=v[T];m(A,I,"to-top")}for(let T=b+1;T<v.length;T++){const A=v[T-1],I=v[T];m(A,I,"to-bottom")}},y=v=>{const C=l.some(F=>F.calloutLabel.collisionOffsetY!==0),b=v.map(F=>f(F)),T=b.map(F=>F.clone().grow(r/2));let A=!1;for(let F=0;F<T.length&&!A;F++){const B=T[F];for(let U=F+1;U<v.length;U++){const H=T[U];if(B.collidesBBox(H)){A=!0;break}}}const I=a.map(F=>{const{startAngle:B,endAngle:U,outerRadius:H}=F;return{startAngle:B,endAngle:U,innerRadius:n,outerRadius:H}}),D=b.some(F=>I.some(B=>kB(F,B)));!A&&!C&&!D||v.filter(F=>F.calloutLabel.textAlign==="center").forEach(F=>{const B=F.calloutLabel;F.midCos<0?B.collisionTextAlign="right":F.midCos>0?B.collisionTextAlign="left":B.collisionTextAlign="center"})};g(c),g(u),y(d),y(h)}updateCalloutLabelNodes(t){const{radiusScale:e}=this,{calloutLabel:i,calloutLine:s}=this.properties,r=s.length,{offset:n,color:o}=i,a=new ri;this.calloutLabelSelection.selectByTag(1).forEach(l=>{var c;const{datum:u}=l,d=u.calloutLabel,h=e.convert(u.radius),p=Math.max(0,h);if(!(d!=null&&d.text)||p===0||d.hidden){l.visible=!1;return}const f=p+r+n,m=u.midCos*f,g=u.midSin*f+d.collisionOffsetY,y={textAlign:(c=d.collisionTextAlign)!=null?c:d.textAlign,textBaseline:d.textBaseline};a.text=d.text,a.x=m,a.y=g,a.setFont(this.properties.calloutLabel),a.setAlign(y);const v=a.computeBBox();let C=d.text,b=!0;if(i.avoidCollisions){const{textLength:T,hasVerticalOverflow:A}=this.getLabelOverflow(d.text,v,t);C=d.text.length===T?d.text:`${d.text.substring(0,T)}`,b=!A}l.text=C,l.x=m,l.y=g,l.setFont(this.properties.calloutLabel),l.setAlign(y),l.fill=o,l.visible=b})}computeLabelsBBox(t,e){return Fe(this,null,function*(){const{calloutLabel:i,calloutLine:s}=this.properties,r=s.length,{offset:n,maxCollisionOffset:o,minSpacing:a}=i;if(!i.avoidCollisions)return null;yield this.maybeRefreshNodeData(),this.updateRadiusScale(!1),this.computeCalloutLabelCollisionOffsets();const l=[],c=new ri;let u;const{title:d}=this.properties;if(d!=null&&d.text&&d.enabled){const h=this.getTitleTranslationY();isFinite(h)&&(c.text=d.text,c.x=0,c.y=h,c.setFont(d),c.setAlign({textBaseline:"bottom",textAlign:"center"}),u=c.computeBBox(),l.push(u))}return this.nodeData.forEach(h=>{var p;const f=h.calloutLabel;if(!f||h.outerRadius===0)return null;const m=h.outerRadius+r+n,g=h.midCos*m,y=h.midSin*m+f.collisionOffsetY;c.text=f.text,c.x=g,c.y=y,c.setFont(this.properties.calloutLabel),c.setAlign({textAlign:(p=f.collisionTextAlign)!=null?p:f.textAlign,textBaseline:f.textBaseline});const v=c.computeBBox();if(f.box=v,Math.abs(f.collisionOffsetY)>o){f.hidden=!0;return}if(u){const C=e.y-this.centerY,b=new lt(u.x-a,C,u.width+2*a,u.y+u.height+a-C);if(v.collidesBBox(b)){f.hidden=!0;return}}if(t.hideWhenNecessary){const{textLength:C,hasVerticalOverflow:b,hasSurroundingSeriesOverflow:T}=this.getLabelOverflow(f.text,v,e),A=f.text.length>2&&C<2;if(b||A||T){f.hidden=!0;return}}f.hidden=!1,l.push(v)}),l.length===0?null:lt.merge(l)})}updateSectorLabelNodes(){const{radiusScale:t}=this,e=t.convert(0),{fontSize:i,fontStyle:s,fontWeight:r,fontFamily:n,positionOffset:o,positionRatio:a,color:l}=this.properties.sectorLabel,c=e>0,u=this.seriesItemEnabled.filter(Boolean).length===1;this.sectorLabelSelection.each((d,h)=>{const{sectorLabel:p,outerRadius:f}=h;let m=!1;if(p&&f!==0){const g=e*(1-a)+f*a+o;d.fill=l,d.fontStyle=s,d.fontWeight=r,d.fontSize=i,d.fontFamily=n,d.text=p.text,!c&&u?(d.x=0,d.y=0):(d.x=h.midCos*g,d.y=h.midSin*g),d.textAlign="center",d.textBaseline="middle";const v=d.computeBBox(),C=[[v.x,v.y],[v.x+v.width,v.y],[v.x+v.width,v.y+v.height],[v.x,v.y+v.height]],{startAngle:b,endAngle:T}=h,A={startAngle:b,endAngle:T,innerRadius:e,outerRadius:f};C.every(([I,D])=>vS(I,D,A))&&(m=!0)}d.visible=m})}updateInnerLabelNodes(){const t=[],e=[];this.innerLabelsSelection.each((u,d)=>{const{fontStyle:h,fontWeight:p,fontSize:f,fontFamily:m,color:g,margin:y=2}=d;u.fontStyle=h,u.fontWeight=p,u.fontSize=f,u.fontFamily=m,u.text=d.text,u.x=0,u.y=0,u.fill=g,u.textAlign="center",u.textBaseline="alphabetic",t.push(u.computeBBox()),e.push(y)});const i=u=>u===0?0:e[u],s=u=>u===e.length-1?0:e[u],r=t.reduce((u,d,h)=>u+d.height+i(h)+s(h),0),n=Math.max(...t.map(u=>u.width)),o=this.getInnerRadius(),l=Math.sqrt(Math.pow(n/2,2)+Math.pow(r/2,2))<=(o>0?o:this.getOuterRadius()),c=[];for(let u=0,d=-r/2;u<t.length;u++){const p=t[u].height+d+i(u);c.push(p),d=p+s(u)}this.innerLabelsSelection.each((u,d,h)=>{u.y=c[h],u.visible=l})}updateZerosumRings(){this.zerosumOuterRing.size=this.getOuterRadius()*2,this.zerosumInnerRing.size=this.getInnerRadius()*2}getDatumLegendName(t){const{angleKey:e,calloutLabelKey:i,sectorLabelKey:s,legendItemKey:r}=this.properties,{sectorLabel:n,calloutLabel:o,legendItem:a}=t;if(r&&a!==void 0)return a.text;if(i&&i!==e&&(o==null?void 0:o.text)!==void 0)return o.text;if(s&&s!==e&&(n==null?void 0:n.text)!==void 0)return n.text}pickNodeClosestDatum(t){return OP(this,t)}getTooltipHtml(t){var e;if(!this.properties.isValid())return Lc;const{datum:i,angleValue:s,sectorFormat:{fill:r},itemId:n}=t,o=Zi((e=this.properties.title)==null?void 0:e.text),a=gi(s)?jx(s):String(s),l=this.getDatumLegendName(t);return this.properties.tooltip.toTooltipHtml({title:o??l,content:o&&l?`${l}: ${a}`:a,backgroundColor:r},{datum:i,itemId:n,title:o,color:r,seriesId:this.id,angleKey:this.properties.angleKey,angleName:this.properties.angleName,radiusKey:this.properties.radiusKey,radiusName:this.properties.radiusName,calloutLabelKey:this.properties.calloutLabelKey,calloutLabelName:this.properties.calloutLabelName,sectorLabelKey:this.properties.sectorLabelKey,sectorLabelName:this.properties.sectorLabelName,legendItemKey:this.properties.legendItemKey})}getLegendData(t){var e,i,s,r,n;const{visible:o,processedData:a,dataModel:l}=this;if(!l||!(a!=null&&a.data.length)||t!=="category")return[];const{angleKey:c,calloutLabelKey:u,sectorLabelKey:d,legendItemKey:h}=this.properties;if(!h&&(!u||u===c)&&(!d||d===c))return[];const{calloutLabelIdx:p,sectorLabelIdx:f,legendItemIdx:m}=this.getProcessedDataIndexes(l),g=((e=this.properties.title)==null?void 0:e.showInLegend)&&this.properties.title.text,y=[];for(let v=0;v<a.data.length;v++){const{datum:C,values:b}=a.data[v],T=[];g&&T.push(g);const A=this.getLabels(C,2*Math.PI,2*Math.PI,!1,b[p],b[f],b[m]);if(h&&A.legendItem!==void 0?T.push(A.legendItem.text):u&&u!==c&&((i=A.calloutLabel)==null?void 0:i.text)!==void 0?T.push((s=A.calloutLabel)==null?void 0:s.text):d&&d!==c&&((r=A.sectorLabel)==null?void 0:r.text)!==void 0&&T.push((n=A.sectorLabel)==null?void 0:n.text),T.length===0)continue;const I=this.getSectorFormat(C,v,!1);y.push({legendType:"category",id:this.id,itemId:v,seriesId:this.id,enabled:o&&this.seriesItemEnabled[v],label:{text:T.join(" - ")},marker:{fill:I.fill,stroke:I.stroke,fillOpacity:this.properties.fillOpacity,strokeOpacity:this.properties.strokeOpacity,strokeWidth:this.properties.strokeWidth},legendItemName:h!=null?C[h]:void 0})}return y}onLegendItemClick(t){const{enabled:e,itemId:i,series:s,legendItemName:r}=t;s.id===this.id?this.toggleSeriesItem(i,e):r!=null&&this.toggleOtherSeriesItems(r,e)}toggleSeriesItem(t,e){this.seriesItemEnabled[t]=e,this.nodeDataRefresh=!0}toggleOtherSeriesItems(t,e){var i;if(!this.properties.legendItemKey||!this.dataModel)return;const s=this.dataModel.resolveProcessedDataIndexById(this,"legendItemValue");(i=this.processedData)==null||i.data.forEach(({values:r},n)=>{r[s]===t&&this.toggleSeriesItem(n,e)})}animateEmptyUpdateReady(t){const{animationManager:e}=this.ctx,i=fh(!0,this.properties.rotation,this.radiusScale,this.previousRadiusScale);Ji(this.id,"nodes",e,[this.itemSelection,this.highlightSelection],i.nodes),Ji(this.id,"innerCircle",e,[this.innerCircleSelection],i.innerCircle),Mi(this,"callout",e,this.calloutLabelSelection),Mi(this,"sector",e,this.sectorLabelSelection),Mi(this,"inner",e,this.innerLabelsSelection),this.previousRadiusScale.range=this.radiusScale.range}animateWaitingUpdateReady(){var t,e,i,s,r,n;const{itemSelection:o,highlightSelection:a,processedData:l,radiusScale:c,previousRadiusScale:u}=this,{animationManager:d}=this.ctx,h=(t=l==null?void 0:l.reduced)==null?void 0:t.diff;this.ctx.animationManager.stopByAnimationGroupId(this.id);const p=((e=h==null?void 0:h.moved.size)!=null?e:0)===0,f=((i=l==null?void 0:l.defs.keys.length)!=null?i:0)>0,m=(n=(r=(s=l==null?void 0:l.reduced)==null?void 0:s.animationValidation)==null?void 0:r.uniqueKeys)!=null?n:!0;(!p||!f||!m)&&this.ctx.animationManager.skipCurrentBatch();const g=fh(!1,this.properties.rotation,c,u);Ji(this.id,"nodes",d,[o,a],g.nodes,(y,v)=>this.getDatumId(v),h),Ji(this.id,"innerCircle",d,[this.innerCircleSelection],g.innerCircle),Mi(this,"callout",this.ctx.animationManager,this.calloutLabelSelection),Mi(this,"sector",this.ctx.animationManager,this.sectorLabelSelection),Mi(this,"inner",this.ctx.animationManager,this.innerLabelsSelection),this.previousRadiusScale.range=this.radiusScale.range}animateClearingUpdateEmpty(){const{itemSelection:t,highlightSelection:e,radiusScale:i,previousRadiusScale:s}=this,{animationManager:r}=this.ctx,n=fh(!1,this.properties.rotation,i,s);Ji(this.id,"nodes",r,[t,e],n.nodes),Ji(this.id,"innerCircle",r,[this.innerCircleSelection],n.innerCircle),ph(this,"callout",this.ctx.animationManager,this.calloutLabelSelection),ph(this,"sector",this.ctx.animationManager,this.sectorLabelSelection),ph(this,"inner",this.ctx.animationManager,this.innerLabelsSelection),this.previousRadiusScale.range=this.radiusScale.range}getDatumIdFromData(t){var e,i,s;const{calloutLabelKey:r,sectorLabelKey:n,legendItemKey:o}=this.properties;if((s=(i=(e=this.processedData)==null?void 0:e.reduced)==null?void 0:i.animationValidation)!=null&&s.uniqueKeys){if(o)return t[o];if(r)return t[r];if(n)return t[n]}}getDatumId(t){const{index:e}=t,i=this.getDatumIdFromData(t.datum);return i!=null?String(i):`${e}`}onDataChange(){var t;const{data:e,seriesItemEnabled:i}=this;this.seriesItemEnabled=(t=e==null?void 0:e.map((s,r)=>{var n;return(n=i[r])!=null?n:!0}))!=null?t:[]}computeFocusBounds(t){return GP(this,t)}};pE.className="PieSeries";pE.type="pie";var Bee={type:"series",optionsKey:"series[]",packageType:"community",chartTypes:["polar"],identifier:"pie",instanceConstructor:pE,themeTemplate:OB,paletteFactory:GB},Vee=["start","center","end"],mL=["annotations","ranges","zoom"],Ov=(t=>(t.Top="top",t.Right="right",t.Bottom="bottom",t.Left="left",t.FloatingTop="floating-top",t.FloatingBottom="floating-bottom",t))(Ov||{}),nT=Object.values(Ov),gh=class extends ti{constructor(t,e){super(),this.onChange=t,this.onButtonsChange=e,this.align="start",this.position="top"}};q([vo(t=>{t.onChange(t.enabled)}),te(Et)],gh.prototype,"enabled",2);q([vo(t=>{t.onChange(t.enabled)}),te(ls(["start","center","end"]),{optional:!0})],gh.prototype,"align",2);q([vo(t=>{t.onChange(t.enabled)}),te(ls(["top","right","bottom","left","floating-top","floating-bottom"]),{optional:!0})],gh.prototype,"position",2);q([vo(t=>{t.onButtonsChange(t.buttons)}),te(rm,{optional:!0})],gh.prototype,"buttons",2);var _r="ag-charts-toolbar",ns={align:`${_r}__align`,button:`${_r}__button`,icon:`${_r}__icon`,label:`${_r}__label`},$t={top:`${_r}--top`,right:`${_r}--right`,bottom:`${_r}--bottom`,left:`${_r}--left`,"floating-top":`${_r}--floating-top`,"floating-bottom":`${_r}--floating-bottom`,hidden:`${_r}--hidden`,preventFlash:`${_r}--prevent-flash`,floatingHidden:`${_r}--floating-hidden`,align:{start:`${ns.align}--start`,center:`${ns.align}--center`,end:`${ns.align}--end`},button:{hidden:`${ns.button}--hidden`}},Hee=`
.${_r} {
    align-items: center;
    background: var(--ag-charts-toolbar-background-color);
    border-bottom: var(--ag-charts-toolbar-border-critical);
    border-top: var(--ag-charts-toolbar-border-critical);
    border-left: var(--ag-charts-toolbar-border);
    border-right: var(--ag-charts-toolbar-border);
    display: flex;
    flex-wrap: nowrap;
    opacity: 1;
    position: absolute;
    transform: translateY(0);
    transition: opacity 0.2s ease-in-out, transform 0.2s ease-in-out;
}

.${$t.hidden},
.${$t.preventFlash} {
    visibility: hidden;
}

.${$t.floatingHidden} {
    opacity: 0;
    transition: opacity 0.4s ease-in-out;
}

.${$t.top},
.${$t.bottom} {
    flex-direction: row;
    height: var(--ag-charts-toolbar-size);
    padding: 0 var(--ag-charts-toolbar-padding);
    width: 100%;
}

.${$t.left},
.${$t.right} {
    flex-direction: column;
    padding: var(--ag-charts-toolbar-padding) 0;
    width: var(--ag-charts-toolbar-size);
}

.${$t["floating-top"]},
.${$t["floating-bottom"]} {
    background: none;
    border: none;
    flex-direction: row;
    height: var(--ag-charts-toolbar-size);
    overflow: hidden;
    padding: 0 var(--ag-charts-toolbar-padding);
    pointer-events: none;
    width: 100%;
}

.${ns.align} {
    display: flex;
    flex-direction: inherit;
    flex-wrap: inherit;
    max-width: 100%;
}

.${$t.align.center},
.${$t.align.end} {
    margin-left: auto;
}

.${$t.left} .${$t.align.center},
.${$t.left} .${$t.align.end},
.${$t.right} .${$t.align.center},
.${$t.right} .${$t.align.end} {
    margin-left: 0;
    margin-top: auto;
}

.${$t["floating-top"]} .${ns.align},
.${$t["floating-bottom"]} .${ns.align} {
    gap: var(--ag-charts-toolbar-gap);
    transition: transform 0.4s ease-in-out;
}

.${ns.button} {
    align-items: center;
    border-radius: var(--ag-charts-button-radius);
    color: var(--ag-charts-toolbar-foreground-color);
    display: flex;
    font-size: 14px;
    font-weight: 500;
    justify-content: center;
    margin: 0;
    padding: var(--ag-charts-button-padding);
    pointer-events: all;
    transition: background-color .25s ease-in-out;
}

.${$t.left} .${ns.button},
.${$t.right} .${ns.button} {
    height: var(--ag-charts-toolbar-size);
    max-width: 100%;
    overflow: hidden;
}

.${$t["floating-top"]} .${ns.button},
.${$t["floating-bottom"]} .${ns.button} {
    background: var(--ag-charts-toolbar-background-color);
    border: var(--ag-charts-toolbar-border-critical);
}

.${$t.button.hidden} {
    display: none;
}

.${ns.button}:hover {
    background: var(--ag-charts-toolbar-hover-color);
}

.${ns.button}:disabled {
    background: var(--ag-charts-toolbar-disabled-background-color);
    color: var(--ag-charts-toolbar-disabled-foreground-color);
}

.${ns.button}:not([disabled]) {
    cursor: pointer;
}

.${ns.icon} {
    height: 1.2em;
    width: 1.2em;
}

.${ns.icon} + .${ns.label} {
    margin-left: var(--ag-charts-size);
}

.${ns.icon},
.${ns.label} {
    pointer-events: none;
}

`,VB=class extends Lx{constructor(t){super(),this.ctx=t,this.enabled=!0,this.annotations=new gh(this.onGroupChanged.bind(this,"annotations"),this.onGroupButtonsChanged.bind(this,"annotations")),this.ranges=new gh(this.onGroupChanged.bind(this,"ranges"),this.onGroupButtonsChanged.bind(this,"ranges")),this.zoom=new gh(this.onGroupChanged.bind(this,"zoom"),this.onGroupButtonsChanged.bind(this,"zoom")),this.margin=10,this.floatingDetectionRange=28,this.positions={top:new Set,right:new Set,bottom:new Set,left:new Set,"floating-top":new Set,"floating-bottom":new Set},this.positionAlignments={top:{},right:{},bottom:{},left:{},"floating-top":{},"floating-bottom":{}},this.groupCallers={annotations:0,ranges:0,zoom:0},this.groupButtons={annotations:[],ranges:[],zoom:[]},this.pendingButtonToggledEvents=[],this.groupProxied=new Set,this.container=t.toolbarManager.element,this.elements={top:this.container.appendChild(hs("div")),right:this.container.appendChild(hs("div")),bottom:this.container.appendChild(hs("div")),left:this.container.appendChild(hs("div")),"floating-top":this.container.appendChild(hs("div")),"floating-bottom":this.container.appendChild(hs("div"))},lp(Hee,_r),this.renderToolbar("top"),this.renderToolbar("right"),this.renderToolbar("bottom"),this.renderToolbar("left"),this.renderToolbar("floating-top"),this.renderToolbar("floating-bottom"),this.toggleVisibilities(),this.destroyFns.push(t.interactionManager.addListener("hover",this.onHover.bind(this),31),t.interactionManager.addListener("leave",this.onLeave.bind(this),31),t.toolbarManager.addListener("button-toggled",this.onButtonToggled.bind(this)),t.toolbarManager.addListener("group-toggled",this.onGroupToggled.bind(this)),t.toolbarManager.addListener("proxy-group-options",this.onProxyGroupOptions.bind(this)),t.layoutService.addListener("layout-complete",this.onLayoutComplete.bind(this)),()=>this.destroyElements())}destroyElements(){for(const t of Object.values(this.elements))t.remove()}onHover(t){const{enabled:e,elements:i,floatingDetectionRange:s,ctx:{scene:r}}=this,{offsetY:n,sourceEvent:{target:o}}=t,{FloatingBottom:a,FloatingTop:l}=Ov;if(!e)return;const c=i[a],u=i[l],d=c.offsetTop-s,h=n>d&&n<r.canvas.element.offsetHeight||o===c,p=u.offsetTop+u.offsetHeight+s,f=n>0&&n<p||o===u;c.classList.toggle($t.floatingHidden,!h),u.classList.toggle($t.floatingHidden,!f),this.translateFloatingElements(a,h),this.translateFloatingElements(l,f)}onLeave(t){const{enabled:e,elements:i,ctx:{scene:s}}=this,{relatedTarget:r,target:n}=t.sourceEvent,{FloatingBottom:o,FloatingTop:a}=Ov;!e||n!==s.canvas.element||mL.some(c=>this.groupButtons[c].some(u=>u===r))||(i[o].classList.add($t.floatingHidden),i[a].classList.add($t.floatingHidden),this.translateFloatingElements(o,!1),this.translateFloatingElements(a,!1))}onGroupChanged(t){this[t]==null||this.groupProxied.has(t)||(this.createGroup(t),this.toggleVisibilities())}onGroupButtonsChanged(t,e){!this.enabled||this.groupProxied.has(t)||(this.createGroupButtons(t,e),this.toggleVisibilities())}onLayoutComplete(){for(const t of nT)this.elements[t].classList.remove($t.preventFlash)}onButtonToggled(t){const{group:e,value:i,enabled:s}=t;if(this.groupButtons[e].length===0){this.pendingButtonToggledEvents.push(t);return}for(const r of this.groupButtons[e])r.dataset.toolbarValue===`${i}`&&(r.disabled=!s)}onGroupToggled(t){const{group:e,visible:i}=t;this.toggleGroup(e,i),this.toggleVisibilities()}onProxyGroupOptions(t){const{group:e,options:i}=t;this.groupProxied.add(e),this.createGroup(e,i.enabled,i.position),this.createGroupButtons(e,i.buttons),this.toggleGroup(e,i.enabled),this[e].set(i)}createGroup(t,e,i){e??(e=this[t].enabled),i??(i=this[t].position);for(const s of nT)e&&i===s?this.positions[s].add(t):this.positions[s].delete(t)}createGroupButtons(t,e){var i,s;for(const a of this.groupButtons[t])a.remove();this.groupButtons[t]=[];const r=(i=this[t].align)!=null?i:"start",n=(s=this[t].position)!=null?s:"top",o=this.positionAlignments[n][r];for(const a of e??[]){const l=this.createButtonElement(t,a);o==null||o.appendChild(l),this.groupButtons[t].push(l)}}toggleGroup(t,e){e?this.groupCallers[t]+=1:this.groupCallers[t]=Math.max(0,this.groupCallers[t]-1)}processPendingEvents(){var t;const e=((t=this.pendingButtonToggledEvents)!=null?t:[]).slice();for(const i of e)this.onButtonToggled(i);this.pendingButtonToggledEvents=[]}performLayout(t){return Fe(this,arguments,function*({shrinkRect:e}){const{elements:i,margin:s}=this;return i.top.classList.contains($t.hidden)||e.shrink(i.top.offsetHeight+s*2,"top"),i.right.classList.contains($t.hidden)||e.shrink(i.right.offsetWidth+s,"right"),i.bottom.classList.contains($t.hidden)||e.shrink(i.bottom.offsetHeight+s*2,"bottom"),i.left.classList.contains($t.hidden)||e.shrink(i.left.offsetWidth+s,"left"),{shrinkRect:e}})}performCartesianLayout(t){return Fe(this,null,function*(){const{elements:e,margin:i}=this,{seriesRect:s}=t,{FloatingBottom:r,FloatingTop:n}=Ov;e.top.style.top=`${s.y-e.top.offsetHeight-i*2}px`,e.top.style.left=`${i}px`,e.top.style.width=`calc(100% - ${i*2}px)`,e.right.style.top=`${s.y+i}px`,e.right.style.right=`${i}px`,e.right.style.height=`calc(100% - ${s.y+i*2}px)`,e.bottom.style.bottom=`${i}px`,e.bottom.style.left=`${i}px`,e.bottom.style.width=`calc(100% - ${i*2}px)`,e.left.style.top=`${s.y}px`,e.left.style.left=`${i}px`,e.left.style.height=`calc(100% - ${s.y+i*2}px)`,e[n].style.top=`${s.y}px`,e[n].style.paddingTop=`${i}px`,e[r].style.top=`${s.y+s.height-e[r].offsetHeight}px`,e[r].style.paddingBottom=`${i}px`})}toggleVisibilities(){var t;if(this.elements==null)return;const e=s=>this[s].enabled&&this.groupCallers[s]>0,i=s=>r=>typeof r.value!="string"&&typeof r.value!="number"||`${r.value}`===s.dataset.toolbarValue;for(const s of nT){const r=this.enabled&&Array.from(this.positions[s].values()).some(e);this.elements[s].classList.toggle($t.hidden,!r)}for(const s of mL){if(this[s]==null)continue;const r=e(s);for(const n of this.groupButtons[s]){const o=r&&((t=this[s].buttons)==null?void 0:t.some(i(n)));n.classList.toggle($t.button.hidden,!o)}}}translateFloatingElements(t,e){const{elements:i,margin:s,positionAlignments:r}=this,n=i[t],o=Object.values(r[t]);for(const a of o)a.style.transform=e&&a.style.transform!==""?"translateY(0)":`translateY(${n.offsetHeight+s}px)`}renderToolbar(t="top"){const e=this.elements[t];e.classList.add(_r,$t[t],$t.preventFlash),(t==="floating-top"||t==="floating-bottom")&&e.classList.add($t.floatingHidden);for(const i of Vee){const s=hs("div");s.classList.add(ns.align,$t.align[i]),e.appendChild(s),this.positionAlignments[t][i]=s}}createButtonElement(t,e){const i=hs("button");i.classList.add(ns.button),i.dataset.toolbarGroup=t,i.tabIndex=-1,(typeof e.value=="string"||typeof e.value=="number")&&(i.dataset.toolbarValue=`${e.value}`),e.tooltip&&(i.title=e.tooltip);let s="";return e.icon!=null&&(s=`<span class="ag-charts-icon-${e.icon} ${ns.icon}"></span>`),e.label!=null&&(s=`${s}<span class="${ns.label}">${e.label}</span>`),i.innerHTML=s,i.onclick=this.onButtonPress.bind(this,t,e.value),this.destroyFns.push(()=>i.remove()),i}onButtonPress(t,e){this.ctx.toolbarManager.pressButton(t,e)}};q([vo(t=>{t.processPendingEvents(),t.toggleVisibilities()}),te(Et)],VB.prototype,"enabled",2);var HB=1e3*60*60*24,oT=HB*30,jee=HB*365,Uee={enabled:!1,position:"left",align:"start",buttons:[{label:"Li",value:"line"},{label:"PCh",value:"parallel-channel"}]},Wee={enabled:!1,position:"top",align:"start",buttons:[{label:"1m",value:oT},{label:"3m",value:3*oT},{label:"6m",value:6*oT},{label:"YTD",value:(t,e)=>[new Date(`${new Date(e).getFullYear()}-01-01`).getTime(),e]},{label:"1y",value:jee},{label:"All",value:(t,e)=>[t,e]}]},zee={enabled:!1,position:"top",align:"end",buttons:[{icon:"zoom-out",tooltip:"Zoom out",value:"zoom-out"},{icon:"zoom-in",tooltip:"Zoom in",value:"zoom-in"},{icon:"pan-left",tooltip:"Pan left",value:"pan-left"},{icon:"pan-right",tooltip:"Pan right",value:"pan-right"},{icon:"pan-start",tooltip:"Pan to the start",value:"pan-start"},{icon:"pan-end",tooltip:"Pan to the end",value:"pan-end"},{icon:"reset",tooltip:"Reset the zoom",value:"reset"}]},$ee={type:"root",optionsKey:"toolbar",packageType:"community",chartTypes:["cartesian"],instanceConstructor:VB,themeTemplate:{toolbar:{enabled:!0,annotations:Uee,ranges:Wee,zoom:zee}}};function Kee(){Cu.register(pB,vee,gB,$ee,Tee,Ree,Pee,Fee,Lee,Oee,Bee,Iee);for(const t of[Gu,fd,dm,Nu,gp])Lu.register(t.type,{instanceConstructor:t,hidden:t===Nu})}function Yee(){for(const t of Cu.modules){if(t.packageType==="enterprise"&&!kX(t)&&Be.errorOnce("Unexpected enterprise module registered: "+t.identifier),t.type==="root"&&t.themeTemplate)for(const e of t.chartTypes)Y_.set(e,t.themeTemplate);if(t.type==="series"){if(t.chartTypes.length>1)throw new Error(`AG Charts - Module definition error: ${t.identifier}`);$n.register(t.identifier,t)}if(t.type==="series-option"&&t.themeTemplate)for(const e of t.seriesTypes)$n.setThemeTemplate(e,t.themeTemplate);if(t.type==="axis-option"&&t.themeTemplate)for(const e of t.axisTypes){const i=t.themeTemplate[e],s=Se(Se({},t.themeTemplate),i);for(const r of t.axisTypes)delete s[r];Lu.setThemeTemplate(e,s)}t.type==="axis"&&Lu.register(t.identifier,t),t.type==="legend"&&fD.register(t.identifier,t)}if(Cu.hasEnterpriseModules()){const t=NX();t.length>0&&Be.errorOnce("Enterprise modules expected but not registered: ",t)}}var jP=class jB extends e0{constructor(e,i){super(e,i)}performLayout(){return Fe(this,null,function*(){const e=yield Ry(jB.prototype,this,"performLayout").call(this),{seriesArea:{padding:i},seriesRoot:s,annotationRoot:r,highlightRoot:n}=this,o=e.clone();e.shrink(i.left,"left"),e.shrink(i.top,"top"),e.shrink(i.right,"right"),e.shrink(i.bottom,"bottom"),this.seriesRect=e,this.animationRect=e,this.hoverRect=e;for(const a of[s,r,n])a.translationX=Math.floor(e.x),a.translationY=Math.floor(e.y);return yield Promise.all(this.series.map(a=>Fe(this,null,function*(){yield a.update({seriesRect:e})}))),s.visible=this.series[0].visible,s.setClipRectInGroupCoordinateSpace(new lt(e.x,e.y,e.width,e.height)),this.ctx.layoutService.dispatchLayoutComplete({type:"layout-complete",chart:{width:this.ctx.scene.width,height:this.ctx.scene.height},clipSeries:!1,series:{rect:o,paddedRect:e,visible:!0},axes:[]}),e})}};jP.className="HierarchyChart";jP.type="hierarchy";var qee=jP,Wf=class extends VD{constructor(){super(...arguments),this.shape="polygon",this.innerRadiusRatio=0,this.defaultTickMinSpacing=20}computeLabelsBBox(t,e){return null}};q([te(ls(["polygon","circle"],"a polar axis shape"))],Wf.prototype,"shape",2);q([te(Si)],Wf.prototype,"innerRadiusRatio",2);var UP=class UB extends e0{constructor(e,i){super(e,i),this.padding=new gd(40),this.axisGroup.zIndex=6}performLayout(){return Fe(this,null,function*(){const e=yield Ry(UB.prototype,this,"performLayout").call(this),i=e.clone();return this.computeSeriesRect(e),yield this.computeCircle(e),this.axes.forEach(s=>s.update()),this.hoverRect=e,this.ctx.layoutService.dispatchLayoutComplete({type:"layout-complete",chart:{width:this.ctx.scene.width,height:this.ctx.scene.height},clipSeries:!1,series:{rect:i,paddedRect:e,visible:!0},axes:[]}),e})}updateAxes(e,i,s){var r,n;const o=this.axes.find(d=>d.direction==="x"),a=this.axes.find(d=>d.direction==="y");if(!(o instanceof Wf)||!(a instanceof Wf))return;const l=o.scale,c=(r=l.ticks)==null?void 0:r.call(l).map(d=>l.convert(d)),u=a.innerRadiusRatio;o.innerRadiusRatio=u,(n=o.computeRange)==null||n.call(o),o.gridLength=s,a.gridAngles=c,a.gridRange=o.range,a.range=[s,s*u],[o,a].forEach(d=>{d.translation.x=e,d.translation.y=i,d.calculateLayout()})}computeSeriesRect(e){const{seriesArea:{padding:i}}=this;e.shrink(i.left,"left"),e.shrink(i.top,"top"),e.shrink(i.right,"right"),e.shrink(i.bottom,"bottom"),this.seriesRect=e,this.animationRect=e}computeCircle(e){return Fe(this,null,function*(){const i=this.series.filter(u=>u instanceof uE),s=this.axes.filter(u=>u instanceof Wf),r=(u,d,h)=>{this.updateAxes(u,d,h),i.forEach(f=>{f.centerX=u,f.centerY=d,f.radius=h});const p=i.filter(f=>f instanceof pE||f instanceof dE);if(p.length>1){const f=p.map(m=>{const g=m.getInnerRadius();return{series:m,innerRadius:g}}).sort((m,g)=>m.innerRadius-g.innerRadius);f.at(-1).series.surroundingRadius=void 0;for(let m=0;m<f.length-1;m++)f[m].series.surroundingRadius=f[m+1].innerRadius}},n=e.x+e.width/2,o=e.y+e.height/2,a=Math.max(0,Math.min(e.width,e.height)/2);let l=a;r(n,o,l);const c=(...u)=>Fe(this,[...u],function*({hideWhenNecessary:d=!1}={}){const h=[];for(const m of[...s,...i]){const g=yield m.computeLabelsBBox({hideWhenNecessary:d},e);g&&h.push(g)}if(h.length===0){r(n,o,a);return}const p=lt.merge(h),f=this.refineCircle(p,l,e);r(f.centerX,f.centerY,f.radius),f.radius!==l&&(l=f.radius)});return yield c(),yield c(),yield c(),yield c({hideWhenNecessary:!0}),yield c({hideWhenNecessary:!0}),{radius:l,centerX:n,centerY:o}})}refineCircle(e,i,s){const n=-i,o=-i,a=i,l=i;let c=Math.max(0,n-e.x),u=Math.max(0,o-e.y),d=Math.max(0,e.x+e.width-a),h=Math.max(0,e.y+e.height-l);c=d=Math.max(c,d),u=h=Math.max(u,h);const p=s.width-c-d,f=s.height-u-h;let m=Math.min(p,f)/2;const g=.5*s.width/2,y=.5*s.height/2,v=Math.min(g,y);if(m<v){m=v;const T=c+d,A=u+h;if(2*m+A>s.height){const I=s.height-2*m;Math.min(u,h)*2>I?(u=I/2,h=I/2):u>h?u=I-h:h=I-u}if(2*m+T>s.width){const I=s.width-2*m;Math.min(c,d)*2>I?(c=I/2,d=I/2):c>d?c=I-d:d=I-c}}const C=c+2*m+d,b=u+2*m+h;return{centerX:s.x+(s.width-C)/2+c+m,centerY:s.y+(s.height-b)/2+u+m,radius:m}}};UP.className="PolarChart";UP.type="polar";var Xee=UP,fE=Math.PI/180,aT=t=>t*fE,lT=t=>-Math.log(Math.tan(Math.PI*.25+t*fE*.5)),cT=t=>t/fE,uT=t=>(Math.atan(Math.exp(-t))-Math.PI*.25)/(fE*.5),yA=class CA{constructor(e,i){this.domain=e,this.range=i,this.type="mercator",this.bounds=CA.bounds(e)}static bounds(e){const[[i,s],[r,n]]=e,o=aT(i),a=lT(s),l=aT(r),c=lT(n);return new lt(Math.min(o,l),Math.min(a,c),Math.abs(l-o),Math.abs(c-a))}static fixedScale(){return new CA([[cT(0),uT(0)],[cT(1),uT(1)]],[[0,0],[1,1]])}convert([e,i]){const[[s,r],[n,o]]=this.range,a=(n-s)/this.bounds.width,l=(o-r)/this.bounds.height;return[(aT(e)-this.bounds.x)*a+s,(lT(i)-this.bounds.y)*l+r]}invert([e,i]){const[[s,r],[n,o]]=this.range,a=(n-s)/this.bounds.width,l=(o-r)/this.bounds.height;return[cT((e-s)/a+this.bounds.x),uT((i-r)/l+this.bounds.y)]}};function vL(t){return t.type==="map-shape"||t.type==="map-line"||t.type==="map-marker"||t.type==="map-shape-background"||t.type==="map-line-background"}var WP=class bA extends e0{constructor(e,i){super(e,i),this.xAxis=new Gu(this.getModuleContext()),this.xAxis.position="bottom",this.yAxis=new Gu(this.getModuleContext()),this.yAxis.position="left",this.ctx.zoomManager.updateAxes([this.xAxis,this.yAxis])}updateData(){return Fe(this,null,function*(){yield Ry(bA.prototype,this,"updateData").call(this);const{topology:e}=this.getOptions();this.series.forEach(i=>{vL(i)&&i.setChartTopology(e)})})}performLayout(){return Fe(this,null,function*(){const e=yield Ry(bA.prototype,this,"performLayout").call(this),{seriesArea:{padding:i},seriesRoot:s,annotationRoot:r,highlightRoot:n}=this,o=e.clone();e.shrink(i.left,"left"),e.shrink(i.top,"top"),e.shrink(i.right,"right"),e.shrink(i.bottom,"bottom"),this.seriesRect=e,this.animationRect=e,this.hoverRect=e;const a=this.series.filter(vL),l=a.reduce((d,h)=>{if(!h.visible)return d;const p=h.topologyBounds;return p==null?d:d==null?p:(d.merge(p),d)},void 0);let c;if(l!=null){const{lon0:d,lat0:h,lon1:p,lat1:f}=l,m=[[d,h],[p,f]],g=yA.bounds(m),{width:y,height:v}=e,C=Math.min(y/g.width,v/g.height),b=g.width*C,T=g.height*C,A=(y-b)/2,I=(v-T)/2,D=A,F=I,B=A+b,U=I+T,H=this.ctx.zoomManager.getAxisZoom(this.xAxis.id),R=this.ctx.zoomManager.getAxisZoom(this.yAxis.id),L=(B-D)/(H.max-H.min),_=D-L*H.min,w=(U-F)/(1-R.min-(1-R.max)),S=F-w*(1-R.max);c=new yA(m,[[_,S],[_+L,S+w]])}a.forEach(d=>{d.scale=c});const u=this.series.some(d=>d.visible);s.visible=u;for(const d of[s,r,n])d.translationX=Math.floor(e.x),d.translationY=Math.floor(e.y),d.setClipRectInGroupCoordinateSpace(new lt(e.x,e.y,e.width,e.height));return this.ctx.layoutService.dispatchLayoutComplete({type:"layout-complete",chart:{width:this.ctx.scene.width,height:this.ctx.scene.height},clipSeries:!1,series:{rect:o,paddedRect:e,visible:u},axes:[]}),e})}};WP.className="TopologyChart";WP.type="topology";var Zee=WP,Cb=is.create(!0,"opts");function yL(t){if(eh(t))return"cartesian";if(Bx(t))return"polar";if(hD(t))return"hierarchy";if(pD(t))return"topology";throw new Error(`AG Chart - unknown type of chart for options with type: ${t.type}`)}var gE=class gv{static licenseCheck(e){var i,s,r,n;this.licenseChecked||(this.licenseManager=(s=(i=Nf).licenseManager)==null?void 0:s.call(i,e),(r=this.licenseManager)==null||r.setLicenseKey(this.licenseKey,this.gridContext),(n=this.licenseManager)==null||n.validateLicense(),this.licenseChecked=!0)}static setLicenseKey(e){this.licenseKey=e}static setGridContext(e){this.gridContext=e}static getLicenseDetails(e){var i,s;return(s=(i=Nf).licenseManager)==null?void 0:s.call(i,{}).getLicenseDetails(e)}static getInstance(e){return Fp.getInstance(e)}static create(e){var i,s,r;this.licenseCheck(e);const n=Fp.createOrUpdate(e);return(i=this.licenseManager)!=null&&i.isDisplayWatermark()&&((r=(s=Nf).injectWatermark)==null||r.call(s,n.chart.element,this.licenseManager.getWatermarkMessage())),n}static update(e,i){if(!wf.isInstance(e))throw new Error(gv.INVALID_CHART_REF_MESSAGE);Fp.createOrUpdate(i,e)}static updateDelta(e,i){if(!wf.isInstance(e))throw new Error(gv.INVALID_CHART_REF_MESSAGE);Fp.updateUserDelta(e,i)}static download(e,i){if(!(e instanceof wf))throw new Error(gv.INVALID_CHART_REF_MESSAGE);Fp.download(e,i).catch(s=>Be.errorOnce(s))}static getImageDataURL(e,i){if(!(e instanceof wf))throw new Error(gv.INVALID_CHART_REF_MESSAGE);return Fp.getImageDataURL(e,i)}};gE.INVALID_CHART_REF_MESSAGE="AG Charts - invalid chart reference passed";gE.licenseChecked=!1;gE.gridContext=!1;var Do=gE,WB=class{static warnDeprecated(t){Vx()(`AgChart.${t}`,`Use AgCharts.${t} instead`)}static create(t){return this.warnDeprecated("create"),Do.create(t)}static update(t,e){return this.warnDeprecated("update"),Do.update(t,e)}static updateDelta(t,e){return this.warnDeprecated("updateDelta"),Do.updateDelta(t,e)}static download(t,e){return this.warnDeprecated("download"),Do.download(t,e)}static getImageDataURL(t,e){return this.warnDeprecated("getImageDataURL"),Do.getImageDataURL(t,e)}},zB=class Ua{static getInstance(e){const i=e0.getInstance(e);return i?wf.chartInstances.get(i):void 0}static initialiseModules(){Ua.initialised||(Kee(),Yee(),Ua.initialised=!0)}static createOrUpdate(e,i){var s;Ua.initialiseModules(),Cb(">>> AgChartV2.createOrUpdate() user options",e);const r=e,{overrideDevicePixelRatio:n,document:o,window:a}=r,l=xs(r,["overrideDevicePixelRatio","document","window"]),c=new c6(l,{overrideDevicePixelRatio:n,document:o,window:a});let u=i==null?void 0:i.chart;return(u==null||yL(l)!==yL(u.processedOptions))&&(u=Ua.createChartInstance(c,u)),i==null?i=new wf(u):i.chart=u,Cb.check()&&typeof window<"u"&&((s=window.agChartInstances)!=null||(window.agChartInstances={}),window.agChartInstances[u.id]=u),u.queuedUserOptions.push(l),u.requestFactoryUpdate(d=>{d.applyOptions(c),d.queuedUserOptions.splice(0,d.queuedUserOptions.indexOf(l))}),i}static updateUserDelta(e,i){i=Fr(i,{shallow:["data"]}),qa(i,o=>{if(typeof o=="object")for(const[a,l]of Object.entries(o))typeof l>"u"&&Object.assign(o,{[a]:Symbol("UNSET")})},{skip:["data"]});const{chart:s}=e,r=s.getOptions(),n=Jt(i,r);Cb(">>> AgChartV2.updateUserDelta() user delta",i),Cb("AgChartV2.updateUserDelta() - base options",r),Ua.createOrUpdate(n,e)}static download(e,i){return Fe(this,null,function*(){try{const s=yield Ua.prepareResizedChart(e,i);s.chart.ctx.scene.download(i==null?void 0:i.fileName,i==null?void 0:i.fileFormat),s.destroy()}catch(s){Be.errorOnce(s)}})}static getImageDataURL(e,i){return Fe(this,null,function*(){const s=yield Ua.prepareResizedChart(e,i),r=s.chart.ctx.scene.getDataURL(i==null?void 0:i.fileFormat);return s.destroy(),r})}static prepareResizedChart(e){return Fe(this,arguments,function*({chart:i},s={}){var r,n,o,a;const l=(n=(r=s.width)!=null?r:i.width)!=null?n:i.ctx.scene.canvas.width,c=(a=(o=s.height)!=null?o:i.height)!=null?a:i.ctx.scene.canvas.height,u=Jt({container:document.createElement("div"),overrideDevicePixelRatio:1,autoSize:!1,width:l,height:c},Cu.hasEnterpriseModules()&&{animation:{enabled:!1}},i.userOptions),d=Ua.createOrUpdate(u);return d.chart.ctx.zoomManager.updateZoom("agChartV2",i.ctx.zoomManager.getZoom()),i.series.forEach((h,p)=>{h.visible||(d.chart.series[p].visible=!1)}),i.update(0,{forceNodeDataRefresh:!0}),yield d.chart.waitForUpdate(),d})}static createChartInstance(e,i){const s=i==null?void 0:i.destroy({keepTransferableResources:!0}),r=Ua.getChartByOptions(e.processedOptions);return new r(e,s)}static getChartByOptions(e){if(eh(e))return nee;if(hD(e))return qee;if(Bx(e))return Xee;if(pD(e))return Zee;throw new Error("AG Charts - couldn't apply configuration, check options are correctly structured and series types are specified")}};zB.initialised=!1;var Fp=zB,$B="9.3.2",Ae={};Cl(Ae,{Arc:()=>_l,BBox:()=>lt,BandScale:()=>ku,Caption:()=>Ki,ChangeDetectableProperties:()=>pP,Circle:()=>rl,ContinuousScale:()=>Ei,Diamond:()=>iB,DropShadow:()=>Ia,ExtendedPath2D:()=>Sg,Group:()=>ft,HdpiCanvas:()=>WD,Image:()=>vm,Label:()=>Bs,Line:()=>sr,LinearGradientFill:()=>mE,LinearScale:()=>nl,Marker:()=>nr,Node:()=>im,OrdinalTimeScale:()=>Yl,Path:()=>yo,PointerEvents:()=>h6,RadialColumnShape:()=>Fa,Rect:()=>an,RedrawType:()=>bu,Scene:()=>zD,SceneChangeDetection:()=>Qe,ScenePathChangeDetection:()=>Lt,Sector:()=>wr,SectorBox:()=>LB,Selection:()=>Qi,Shape:()=>jo,Square:()=>xg,Text:()=>ri,Tooltip:()=>Ma,Triangle:()=>Uf,easing:()=>TD,getFont:()=>yg,getMarker:()=>fl,getRadialColumnWidth:()=>Jee,motion:()=>Qee,nearestSquared:()=>Wx,nearestSquaredInContainer:()=>xZ,toRadians:()=>Nr,toTooltipHtml:()=>bg});var _l=class extends yo{constructor(){super(),this.centerX=0,this.centerY=0,this.radius=10,this.startAngle=0,this.endAngle=Math.PI*2,this.counterClockwise=!1,this.type=0,this.restoreOwnStyles()}get fullPie(){return dh(ys(this.startAngle),ys(this.endAngle))}updatePath(){const t=this.path;t.clear(),t.arc(this.centerX,this.centerY,this.radius,this.startAngle,this.endAngle,this.counterClockwise),this.type===1?t.closePath():this.type===2&&!this.fullPie&&(t.lineTo(this.centerX,this.centerY),t.closePath())}computeBBox(){return new lt(this.centerX-this.radius,this.centerY-this.radius,this.radius*2,this.radius*2)}isPointInPath(t,e){const i=this.transformPoint(t,e),s=this.computeBBox();return this.type!==0&&s.containsPoint(i.x,i.y)&&this.path.isPointInPath(i.x,i.y)}};_l.className="Arc";_l.defaultStyles=Object.assign({},jo.defaultStyles,{lineWidth:1,fillStyle:null});q([Lt()],_l.prototype,"centerX",2);q([Lt()],_l.prototype,"centerY",2);q([Lt()],_l.prototype,"radius",2);q([Lt()],_l.prototype,"startAngle",2);q([Lt()],_l.prototype,"endAngle",2);q([Lt()],_l.prototype,"counterClockwise",2);q([Lt()],_l.prototype,"type",2);var mE=class extends jo{constructor(){super(...arguments),this.direction="to-right",this.stops=void 0,this._mask=void 0}get mask(){return this._mask}set mask(t){this._mask!=null&&this.removeChild(this._mask),t!=null&&this.appendChild(t),this._mask=t}isPointInPath(t,e){var i,s;return(s=(i=this.mask)==null?void 0:i.isPointInPath(t,e))!=null?s:!1}computeBBox(){var t;return(t=this.mask)==null?void 0:t.computeBBox()}render(t){const{mask:e,stops:i}=this,{ctx:s,devicePixelRatio:r}=t,n=1/r,o=e==null?void 0:e.computeTransformedBBox();if(e==null||i==null||o==null)return;e.dirtyPath&&(e.updatePath(),e.dirtyPath=!1),s.save(),s.clip(e.path.getPath2D()),s.setTransform(r,0,0,r,0,0);const a=Math.floor(o.x),l=Math.ceil(o.x+o.width),c=Math.floor(o.y),u=Math.ceil(o.y+o.height),d=new vp,[h,p]=this.direction==="to-right"?[a,l]:[c,u];if(d.domain=i.map((f,m)=>h+(p-h)*m/(i.length-1)),d.range=i,d.update(),this.direction==="to-right"){const f=u-c;for(let m=a;m<=l;m+=n)s.fillStyle=d.convert(m),s.fillRect(m,c,n,f)}else{const f=l-a;for(let m=c;m<=u;m+=n)s.fillStyle=d.convert(m),s.fillRect(a,m,f,n)}s.restore()}};q([Qe({redraw:3})],mE.prototype,"direction",2);q([Qe({redraw:3})],mE.prototype,"stops",2);q([Qe({redraw:3})],mE.prototype,"_mask",2);function CL(t,e,i){const s=Math.sqrt(_t(t,2)+_t(e,2)),n=Math.atan2(e,t)+i;return{x:Math.cos(n)*s,y:Math.sin(n)*s}}var Fa=class extends yo{constructor(){super(...arguments),this.borderPath=new Sg,this.isBeveled=!0,this.columnWidth=0,this.startAngle=0,this.endAngle=0,this.outerRadius=0,this.innerRadius=0,this.axisInnerRadius=0,this.axisOuterRadius=0,this.isRadiusAxisReversed=!1}getRotation(){const{startAngle:t,endAngle:e}=this,i=$x(t,e);return ys(t+i/2+Math.PI/2)}updatePath(){const{isBeveled:t}=this;t?this.updateBeveledPath():this.updateRectangularPath(),this.checkPathDirty()}updateRectangularPath(){const{columnWidth:t,innerRadius:e,outerRadius:i,path:s}=this,r=-t/2,n=t/2,o=-i,a=-e,l=this.getRotation(),c=[[r,a],[r,o],[n,o],[n,a],[r,a]].map(([u,d])=>CL(u,d,l));s.clear(!0),s.moveTo(c[0].x,c[0].y),s.lineTo(c[1].x,c[1].y),s.lineTo(c[2].x,c[2].y),s.lineTo(c[3].x,c[3].y),s.lineTo(c[0].x,c[0].y),s.closePath()}updateBeveledPath(){const{columnWidth:t,path:e,outerRadius:i,innerRadius:s,axisInnerRadius:r,axisOuterRadius:n,isRadiusAxisReversed:o}=this,a=dh(s,r),l=Math.asin(t/2/s),c=this.getRotation(),u=(D,F)=>CL(D,F,c),d=(D,F)=>Math.sqrt(_t(D,2)+_t(F,2)),h=(D,F)=>F>D?0:Math.sqrt(_t(D,2)-_t(F,2)),p=(D,F,B)=>B?D<F:D>F,f=a&&!isNaN(l)&&l<Math.PI/6;let m=-t/2,g=t/2;const y=-i,v=-s*(f?Math.cos(l):1),C=p(n,d(s,t/2),!o);if(C){const D=h(n,s);m=-D,g=D}e.clear(!0);const b=u(m,v);e.moveTo(b.x,b.y);const T=dh(s,i),A=p(n,d(i,t/2),!o);if(T&&f)e.arc(0,0,s,ys(-l-Math.PI/2)+c,ys(l-Math.PI/2)+c,!1);else if(A){const D=-h(n,t/2),F=h(n,i);if(!C){const B=u(m,D);e.lineTo(B.x,B.y)}if(e.arc(0,0,n,Math.atan2(D,m)+c,Math.atan2(y,-F)+c,!1),!dh(F,0)){const B=u(F,y);e.lineTo(B.x,B.y)}e.arc(0,0,n,Math.atan2(y,F)+c,Math.atan2(D,g)+c,!1)}else{const D=u(m,y),F=u(g,y);e.lineTo(D.x,D.y),e.lineTo(F.x,F.y)}const I=u(g,v);if(e.lineTo(I.x,I.y),f)e.arc(0,0,s,ys(l-Math.PI/2)+c,ys(-l-Math.PI/2)+c,!0);else{const D=u(m,v);e.lineTo(D.x,D.y)}e.closePath()}};Fa.className="RadialColumnShape";q([Lt()],Fa.prototype,"isBeveled",2);q([Lt()],Fa.prototype,"columnWidth",2);q([Lt()],Fa.prototype,"startAngle",2);q([Lt()],Fa.prototype,"endAngle",2);q([Lt()],Fa.prototype,"outerRadius",2);q([Lt()],Fa.prototype,"innerRadius",2);q([Lt()],Fa.prototype,"axisInnerRadius",2);q([Lt()],Fa.prototype,"axisOuterRadius",2);q([Lt()],Fa.prototype,"isRadiusAxisReversed",2);function Jee(t,e,i,s,r){const n=$x(t,e),o=n*(1-s)/2;if(t+=o,e-=o,n<.001)return 2*i*r;if(n>=2*Math.PI){const p=t+n/2;t=p-Math.PI,e=p+Math.PI}const a=i*Math.cos(t),l=i*Math.sin(t),c=i*Math.cos(e),u=i*Math.sin(e),d=Math.floor(Math.sqrt(_t(a-c,2)+_t(l-u,2))),h=2*i*r;return Math.max(1,Math.min(h,d))}var vm=class extends im{constructor(t){super(),this.x=0,this.y=0,this.width=0,this.height=0,this.opacity=1,this.sourceImage=t}render(t){const{ctx:e,forceRender:i,stats:s}=t;if(this.dirty===0&&!i){s&&s.nodesSkipped++;return}this.computeTransformMatrix(),this.matrix.toContext(e);const r=this.sourceImage;e.globalAlpha=this.opacity,e.drawImage(r,0,0,r.width,r.height,this.x,this.y,this.width,this.height),super.render(t)}};q([Qe({redraw:3})],vm.prototype,"x",2);q([Qe({redraw:3})],vm.prototype,"y",2);q([Qe({redraw:3})],vm.prototype,"width",2);q([Qe({redraw:3})],vm.prototype,"height",2);q([Qe({redraw:3})],vm.prototype,"opacity",2);var Qee=Se(Se({},u6),U6),Uo={};Cl(Uo,{CARTESIAN_AXIS_TYPE:()=>q5,ChartTheme:()=>Pc,DEFAULT_ANNOTATION_BACKGROUND_FILL:()=>Aa,DEFAULT_ANNOTATION_HANDLE_FILL:()=>yD,DEFAULT_ANNOTATION_STROKE:()=>_a,DEFAULT_AXIS_GRID_COLOUR:()=>nS,DEFAULT_AXIS_LINE_COLOUR:()=>qb,DEFAULT_BACKGROUND_COLOUR:()=>Py,DEFAULT_COLOURS:()=>ba,DEFAULT_CROSS_LINES_COLOUR:()=>Mv,DEFAULT_DIVERGING_SERIES_COLOUR_RANGE:()=>Ta,DEFAULT_FONT_FAMILY:()=>Ks,DEFAULT_HIERARCHY_FILLS:()=>mD,DEFAULT_HIERARCHY_STROKES:()=>vD,DEFAULT_INSIDE_SERIES_LABEL_COLOUR:()=>em,DEFAULT_INVERTED_LABEL_COLOUR:()=>i6,DEFAULT_LABEL_COLOUR:()=>Ti,DEFAULT_MUTED_LABEL_COLOUR:()=>Bf,DEFAULT_POLAR_SERIES_STROKE:()=>gD,DEFAULT_SHADOW_COLOUR:()=>tm,DEFAULT_WATERFALL_SERIES_CONNECTOR_LINE_STROKE:()=>Ea,DEFAULT_WATERFALL_SERIES_NEGATIVE_COLOURS:()=>Sa,DEFAULT_WATERFALL_SERIES_POSITIVE_COLOURS:()=>wa,DEFAULT_WATERFALL_SERIES_TOTAL_COLOURS:()=>xa,EXTENDS_AXES_DEFAULTS:()=>J5,EXTENDS_AXES_GRID_LINE_DEFAULTS:()=>t6,EXTENDS_AXES_LINE_DEFAULTS:()=>Q5,EXTENDS_AXES_TICK_DEFAULTS:()=>e6,EXTENDS_CARTESIAN_MARKER_DEFAULTS:()=>Qg,EXTENDS_SERIES_DEFAULTS:()=>Dc,FONT_SIZE:()=>$5,FONT_WEIGHT:()=>K5,IS_DARK_THEME:()=>zd,POLAR_AXIS_SHAPE:()=>Z5,POLAR_AXIS_TYPE:()=>X5,POSITION:()=>Y5,getChartTheme:()=>CD,markerPaletteFactory:()=>fm,singleSeriesPaletteFactory:()=>lE,themes:()=>ete});var ete=Ox(s6,t=>t==null?void 0:t()),yp={};Cl(yp,{BandScale:()=>ku,ColorScale:()=>vp,ContinuousScale:()=>Ei,Invalidating:()=>lr,LinearScale:()=>nl,OrdinalTimeScale:()=>Yl,TimeScale:()=>th});var qs={};Cl(qs,{Color:()=>Ka,Logger:()=>Be,Padding:()=>gd,angleBetween:()=>$x,areArrayItemsStrictlyEqual:()=>J6,areArrayNumbersEqual:()=>Q6,bifurcate:()=>n6,checkDatum:()=>sA,clamp:()=>Zt,clampArray:()=>oS,countFractionDigits:()=>xD,createId:()=>wl,deepClone:()=>Fr,displacePointFromVector:()=>C6,extent:()=>bl,findMinMax:()=>fa,findRangeExtent:()=>Iy,isBetweenAngles:()=>$C,isContinuous:()=>eE,isDate:()=>HC,isDenseInterval:()=>By,isEqual:()=>dh,isNegative:()=>zC,isNumber:()=>gi,isNumberEqual:()=>dh,isNumberObject:()=>H6,isString:()=>io,isStringObject:()=>V6,jsonApply:()=>Kl,jsonDiff:()=>Ho,jsonWalk:()=>qa,mod:()=>Ux,normalisedExtent:()=>r6,normalisedExtentWithMetadata:()=>WC,normalizeAngle180:()=>Ny,normalizeAngle360:()=>ys,normalizeAngle360Inclusive:()=>y6,range:()=>Gy,resetIds:()=>d6,round:()=>SD,sanitizeHtml:()=>Zi,setAttribute:()=>Cg,shallowClone:()=>rS,tickFormat:()=>q6,tickStep:()=>vg,ticks:()=>Jx,toDegrees:()=>OZ,toFixed:()=>jx,toRadians:()=>Nr,transformIntegratedCategoryValue:()=>Vf,zipObject:()=>tte});function tte(t,e){const i={};if(Array.isArray(e))for(let s=0;s<t.length;s++)i[`${t[s]}`]=e[s];else for(let s=0;s<t.length;s++)i[`${t[s]}`]=e;return i}var ym={};Cl(ym,{AND:()=>Yo,ARRAY:()=>rm,ARRAY_OF:()=>Ic,AbstractBarSeries:()=>TB,AbstractBarSeriesProperties:()=>TP,ActionOnSet:()=>Hn,Animation:()=>v6,AnimationManager:()=>b8,AreaSeriesTag:()=>SB,Axis:()=>VD,AxisLabel:()=>As,AxisTick:()=>xl,BOOLEAN:()=>Et,BOOLEAN_ARRAY:()=>BZ,Background:()=>i0,BackgroundModule:()=>pB,BaseModuleInstance:()=>Lx,BaseProperties:()=>ti,COLOR_STRING:()=>mi,COLOR_STRING_ARRAY:()=>qo,CartesianAxis:()=>JC,CartesianSeries:()=>vd,CartesianSeriesNodeEvent:()=>aP,CartesianSeriesProperties:()=>md,CategoryAxis:()=>fd,CategoryAxisTick:()=>iE,ChartAxisDirection:()=>FD,ChartEventManager:()=>S8,ChartOptions:()=>c6,ChartUpdateType:()=>Lv,ContextMenuRegistry:()=>x8,CursorManager:()=>E8,DATE:()=>_D,DATE_ARRAY:()=>VZ,DATE_OR_DATETIME_MS:()=>AD,DEFAULT_CARTESIAN_DIRECTION_KEYS:()=>pp,DEFAULT_CARTESIAN_DIRECTION_NAMES:()=>fp,DEFAULT_TOOLTIP_CLASS:()=>bs,DEFAULT_TOOLTIP_DARK_CLASS:()=>t8,DEGREE:()=>dd,DIRECTION:()=>T6,DataController:()=>O8,DataModel:()=>k8,DataModelSeries:()=>oP,DataService:()=>sE,Default:()=>Ra,Deprecated:()=>cp,DeprecatedAndRenamedTo:()=>SZ,EMPTY_TOOLTIP_CONTENT:()=>Lc,FONT_STYLE:()=>hd,FONT_WEIGHT:()=>pd,FUNCTION:()=>go,GREATER_THAN:()=>om,GestureDetector:()=>T8,GroupedCategoryAxis:()=>Nu,HierarchyNode:()=>sw,HierarchySeries:()=>ste,HierarchySeriesProperties:()=>bd,HighlightManager:()=>_8,HighlightStyle:()=>t0,INTERACTION_RANGE:()=>DD,InteractionManager:()=>C8,InteractionState:()=>dS,LABEL_PLACEMENT:()=>PD,LESS_THAN:()=>nm,LINE_CAP:()=>x6,LINE_DASH:()=>Fc,LINE_JOIN:()=>HZ,Layers:()=>B6,LayoutService:()=>D8,LonLatBBox:()=>rte,MARKER_SHAPE:()=>vB,MATCHING_CROSSLINE_TYPE:()=>OD,MAX_SPACING:()=>ID,MIN_SPACING:()=>Zx,MercatorScale:()=>yA,Motion:()=>TD,NAN:()=>Yx,NODE_UPDATE_STATE_TO_PHASE_MAPPING:()=>Xr,NUMBER:()=>Ui,NUMBER_ARRAY:()=>qx,NUMBER_OR_NAN:()=>sm,Navigator:()=>Cd,NavigatorModule:()=>gB,OBJECT:()=>rt,OBJECT_ARRAY:()=>RD,OR:()=>up,OVERFLOW_STRATEGY:()=>UZ,ObserveChanges:()=>vo,PHASE_METADATA:()=>ky,PHASE_ORDER:()=>ef,PLACEMENT:()=>_6,PLAIN_OBJECT:()=>GZ,POINTER_INTERACTION_TYPES:()=>$D,POSITION:()=>MD,POSITIVE_NUMBER:()=>Ge,PolarAxis:()=>Wf,PolarSeries:()=>uE,PropertiesArray:()=>jC,ProxyOnWrite:()=>PJ,ProxyProperty:()=>DJ,ProxyPropertyOnWrite:()=>Wi,QUICK_TRANSITION:()=>aS,RATIO:()=>Si,RepeatType:()=>m6,SKIP_JS_BUILTINS:()=>uD,SMALLEST_KEY_INTERVAL:()=>$8,SORT_DOMAIN_GROUPS:()=>K8,STRING:()=>$e,STRING_ARRAY:()=>S6,Series:()=>um,SeriesGroupingChangedEvent:()=>QD,SeriesItemHighlightStyle:()=>Nc,SeriesMarker:()=>jn,SeriesNodeEvent:()=>QC,SeriesNodePickMode:()=>q8,SeriesProperties:()=>Pa,SeriesTooltip:()=>Un,StateMachine:()=>XC,TEXT_ALIGN:()=>E6,TEXT_WRAP:()=>Xx,ToolbarManager:()=>M8,Tooltip:()=>Ma,TooltipManager:()=>pS,TooltipPosition:()=>am,UNION:()=>ls,UpdateService:()=>P8,VERTICAL_ALIGN:()=>jZ,Validate:()=>te,ZoomManager:()=>G8,__FORCE_MODULE_DETECTION:()=>nte,accumulateGroup:()=>Y8,accumulatedValue:()=>W8,accumulativeValueProperty:()=>JD,addHitTestersToQuadtree:()=>xP,adjustLabelPlacement:()=>PB,allInStringUnion:()=>Xb,animationValidation:()=>cm,area:()=>fA,arraysEqual:()=>Pv,assignJsonApplyConstructedArray:()=>R6,backfillPathPointData:()=>vP,basicContinuousCheckDatumValidation:()=>XD,bifurcate:()=>n6,buildFormatter:()=>YC,buildResetPathFn:()=>bP,calculateDefaultTimeTickFormat:()=>P6,calculatePlacement:()=>e8,checkCrisp:()=>MB,childrenIter:()=>EB,circularSliceArray:()=>Z_,clamp:()=>Zt,clampArray:()=>oS,collapsedStartingBarPosition:()=>zy,computeBarFocusBounds:()=>_P,computeMarkerFocusBounds:()=>r0,computeSectorFocusBounds:()=>GP,convertValuesToScaleByDefs:()=>ite,countFractionDigits:()=>xD,createDatumId:()=>Ou,createDeprecationWarning:()=>Vx,createElement:()=>hs,dateToNumber:()=>Ds,deconstructSelectionsOrNodes:()=>zx,deepClone:()=>Fr,deepMerge:()=>AX,defaultTimeTickFormat:()=>kD,determinePathStatus:()=>bB,diff:()=>hp,downloadUrl:()=>o6,enterpriseModule:()=>Nf,extent:()=>bl,extractDecoratedProperties:()=>xX,findMinMax:()=>fa,findQuadtreeMatch:()=>EP,findRangeExtent:()=>Iy,fixNumericExtent:()=>Pn,fromToMotion:()=>Ji,getDocument:()=>hl,getMissCount:()=>KD,getPath:()=>cD,getRectConfig:()=>RB,getWindow:()=>pl,groupAccumulativeValueProperty:()=>iu,groupAverage:()=>U8,groupBy:()=>wD,groupCount:()=>pA,groupSum:()=>H8,injectStyle:()=>lp,isArray:()=>Ns,isBoolean:()=>G5,isDate:()=>Nx,isDecoratedObject:()=>kx,isDefined:()=>sS,isEnumKey:()=>_X,isEnumValue:()=>H5,isEqual:()=>dh,isFiniteNumber:()=>gi,isFunction:()=>ap,isHtmlElement:()=>V5,isNegative:()=>zC,isNumber:()=>Qn,isObject:()=>pa,isObjectLike:()=>TX,isPlainObject:()=>Vo,isProperties:()=>ul,isRegExp:()=>B5,isString:()=>io,isSymbol:()=>j5,isValidDate:()=>HC,jsonApply:()=>Kl,jsonDiff:()=>Ho,jsonWalk:()=>qa,keyProperty:()=>mr,listDecoratedProperties:()=>Gf,mapIterable:()=>mZ,mapValues:()=>Ox,markerFadeInAnimation:()=>Hy,markerPaletteFactory:()=>fm,markerScaleInAnimation:()=>fP,markerSwipeScaleInAnimation:()=>gP,mergeArrayDefaults:()=>$_,mergeDefaults:()=>Jt,midpointStartingBarPosition:()=>_ee,minMax:()=>mA,mod:()=>Ux,moduleRegistry:()=>Cu,normaliseGroupTo:()=>fS,normalisePropertyTo:()=>Vy,normalisedExtent:()=>r6,normalisedExtentWithMetadata:()=>WC,pairCategoryData:()=>Wy,pairContinuousData:()=>Uy,partialAssign:()=>Qd,pathFadeInAnimation:()=>Nv,pathFadeOutAnimation:()=>Cee,pathSwipeInAnimation:()=>CP,pickByMatchingAngle:()=>OP,predicateWithMessage:()=>Oi,prepareAreaPathAnimation:()=>xB,prepareAxisAnimationContext:()=>aA,prepareAxisAnimationFunctions:()=>i8,prepareBarAnimationFunctions:()=>$y,prepareLinePathAnimation:()=>wB,prepareLinePathAnimationFns:()=>wP,prepareMarkerAnimation:()=>mP,preparePieSeriesAnimationFunctions:()=>fh,range:()=>j8,rangedValueProperty:()=>ZD,renderPartialPath:()=>yP,resetAxisGroupFn:()=>s8,resetAxisLabelSelectionFn:()=>n8,resetAxisLineSelectionFn:()=>o8,resetAxisSelectionFn:()=>r8,resetBarSelectionsFn:()=>Ky,resetIds:()=>d6,resetLabelFn:()=>Gc,resetMarkerFn:()=>s0,resetMarkerPositionFn:()=>jy,resetMotion:()=>Ys,resetPieSelectionsFn:()=>NP,round:()=>SD,seriesLabelFadeInAnimation:()=>Mi,seriesLabelFadeOutAnimation:()=>ph,setDocument:()=>a6,setPath:()=>dD,setWindow:()=>l6,shallowClone:()=>rS,singleSeriesPaletteFactory:()=>lE,staticFromToMotion:()=>Sl,stringify:()=>Iv,sum:()=>NQ,sumValues:()=>nE,toArray:()=>X_,toFixed:()=>jx,toTooltipHtml:()=>bg,trailingAccumulatedValue:()=>z8,trailingAccumulatedValueProperty:()=>jQ,unique:()=>bD,updateClipPath:()=>gS,updateLabelNode:()=>DB,updateRect:()=>AB,validateCrossLineValues:()=>j6,valueProperty:()=>Vi,without:()=>K_});function ite({defs:t,values:e,xAxis:i,yAxis:s}){if(!(i&&s))throw new Error("Axes must be defined");const r={};for(const[n,{def:o}]of t)if(Object.hasOwn(e,n)){const{scale:a}=o.type==="key"?i:s;r[n]=Math.round(a.convert(e[n]))}return r}var KB=class iw{constructor(e,i,s,r,n,o,a,l,c,u,d){this.series=e,this.index=i,this.datum=s,this.size=r,this.colorValue=n,this.fill=o,this.stroke=a,this.sumSize=l,this.depth=c,this.parent=u,this.children=d,this.midPoint={x:0,y:0}}contains(e){let i=e;for(;i!=null&&i.index>=this.index;){if(i===this)return!0;i=i.parent}return!1}walk(e,i=iw.Walk.PreOrder){i===iw.Walk.PreOrder&&e(this),this.children.forEach(s=>{s.walk(e,i)}),i===iw.Walk.PostOrder&&e(this)}*[Symbol.iterator](){yield this;for(const e of this.children)yield*nD(e)}};KB.Walk={PreOrder:0,PostOrder:1};var sw=KB,ste=class extends um{constructor(t){super({moduleCtx:t,pickModes:[0],contentGroupVirtual:!1}),this.rootNode=new sw(this,0,void 0,0,void 0,void 0,void 0,0,void 0,void 0,[]),this.colorDomain=[0,0],this.maxDepth=0,this.animationState=new XC("empty",{empty:{update:{target:"ready",action:e=>this.animateEmptyUpdateReady(e)},reset:"empty",skip:"ready"},ready:{updateData:"waiting",clear:"clearing",highlight:e=>this.animateReadyHighlight(e),resize:e=>this.animateReadyResize(e),reset:"empty",skip:"ready"},waiting:{update:{target:"ready",action:e=>this.animateWaitingUpdateReady(e)},reset:"empty",skip:"ready"},clearing:{update:{target:"empty",action:e=>this.animateClearingUpdateEmpty(e)},reset:"empty",skip:"ready"}},()=>this.checkProcessedDataAnimatable())}resetAnimation(t){t==="initial"?this.animationState.transition("reset"):t==="ready"&&this.animationState.transition("skip")}processData(){return Fe(this,null,function*(){var t,e;const{childrenKey:i,sizeKey:s,colorKey:r,fills:n,strokes:o,colorRange:a}=this.properties;let l=0;const c=()=>(l+=1,l);let u=0,d=1/0,h=-1/0;const p=new Array(((e=(t=this.data)==null?void 0:t.length)!=null?e:0)+1).fill(void 0),f=(C,b)=>{const T=c(),A=b.depth!=null?b.depth+1:0,I=i!=null?C[i]:void 0,D=I==null||I.length===0;let F=s!=null?C[s]:void 0;Number.isFinite(F)?F=Math.max(F,0):F=D?1:0;const B=F;u=Math.max(u,A);const U=r!=null?C[r]:void 0;return typeof U=="number"&&(p[T]=U,d=Math.min(d,U),h=Math.max(h,U)),m(new sw(this,T,C,F,U,void 0,void 0,B,A,b,[]),I)},m=(C,b)=>(b==null||b.forEach(T=>{const A=f(T,C);C.children.push(A),C.sumSize+=A.sumSize}),C),g=m(new sw(this,0,void 0,0,void 0,void 0,void 0,0,void 0,void 0,[]),this.data),y=[d,h];let v;a!=null&&Number.isFinite(d)&&Number.isFinite(h)&&(v=new vp,v.domain=y,v.range=a,v.update()),g.children.forEach((C,b)=>{C.walk(T=>{let A;const I=p[T.index];I!=null&&(A=v==null?void 0:v.convert(I)),A??(A=n==null?void 0:n[b%n.length]),T.fill=A,T.stroke=v==null?o==null?void 0:o[b%o.length]:"rgba(0, 0, 0, 0.2)"})}),this.rootNode=g,this.maxDepth=u,this.colorDomain=y})}update(t){return Fe(this,arguments,function*({seriesRect:e}){yield this.updateSelections(),yield this.updateNodes();const i=this.getAnimationData();this.checkResize(e)&&this.animationState.transition("resize",i),this.animationState.transition("update",i)})}resetAllAnimation(t){var e;const i=(e=this.animationResetFns)==null?void 0:e.datum;this.ctx.animationManager.stopByAnimationGroupId(this.id),i!=null&&Ys(t.datumSelections,i)}animateEmptyUpdateReady(t){this.ctx.animationManager.skipCurrentBatch(),this.resetAllAnimation(t)}animateWaitingUpdateReady(t){this.ctx.animationManager.skipCurrentBatch(),this.resetAllAnimation(t)}animateReadyHighlight(t){var e;const i=(e=this.animationResetFns)==null?void 0:e.datum;i!=null&&Ys([t],i)}animateReadyResize(t){this.resetAllAnimation(t)}animateClearingUpdateEmpty(t){this.ctx.animationManager.skipCurrentBatch(),this.resetAllAnimation(t)}animationTransitionClear(){this.animationState.transition("clear",this.getAnimationData())}getAnimationData(){return{datumSelections:[this.groupSelection]}}isProcessedDataAnimatable(){return!0}checkProcessedDataAnimatable(){this.isProcessedDataAnimatable()||this.ctx.animationManager.skipCurrentBatch()}getLabelData(){return[]}getSeriesDomain(){return[NaN,NaN]}getLegendData(t){const{colorKey:e,colorName:i,colorRange:s,visible:r}=this.properties;return t==="gradient"&&e!=null&&s!=null?[{legendType:"gradient",enabled:r,seriesId:this.id,colorName:i,colorRange:s,colorDomain:this.colorDomain}]:[]}getDatumIdFromData(t){return`${t.index}`}getDatumId(t){return this.getDatumIdFromData(t)}},bd=class extends Pa{constructor(){super(...arguments),this.childrenKey="children",this.fills=Object.values(_o),this.strokes=Object.values(Ul)}};q([te($e)],bd.prototype,"childrenKey",2);q([te($e,{optional:!0})],bd.prototype,"sizeKey",2);q([te($e,{optional:!0})],bd.prototype,"colorKey",2);q([te($e,{optional:!0})],bd.prototype,"colorName",2);q([te(qo)],bd.prototype,"fills",2);q([te(qo)],bd.prototype,"strokes",2);q([te(qo,{optional:!0})],bd.prototype,"colorRange",2);var rte=class{constructor(t,e,i,s){this.lon0=t,this.lat0=e,this.lon1=i,this.lat1=s}merge(t){this.lon0=Math.min(this.lon0,t.lon0),this.lat0=Math.min(this.lat0,t.lat0),this.lon1=Math.max(this.lon1,t.lon1),this.lat1=Math.max(this.lat1,t.lat1)}},nte=0;const ote=Object.freeze(Object.defineProperty({__proto__:null,AgChart:WB,AgCharts:Do,AgErrorBarSupportedSeriesTypes:Lq,AgTooltipPositionType:oD,Marker:nr,VERSION:$B,_ModuleSupport:ym,_Scale:yp,_Scene:Ae,_Theme:Uo,_Util:qs,__FORCE_MODULE_DETECTION:kq,time:aD},Symbol.toStringTag,{value:"Module"}));var zP=Object.defineProperty,YB=Object.getOwnPropertyDescriptor,ate=Object.getOwnPropertyNames,lte=Object.prototype.hasOwnProperty,qB=(t,e)=>{for(var i in e)zP(t,i,{get:e[i],enumerable:!0})},cte=(t,e,i,s)=>{if(e&&typeof e=="object"||typeof e=="function")for(let r of ate(e))!lte.call(t,r)&&r!==i&&zP(t,r,{get:()=>e[r],enumerable:!(s=YB(e,r))||s.enumerable});return t},XB=(t,e,i)=>(cte(t,e,"default"),i),ci=(t,e,i,s)=>{for(var r=s>1?void 0:s?YB(e,i):e,n=t.length-1,o;n>=0;n--)(o=t[n])&&(r=(s?o(e,i,r):o(r))||r);return s&&r&&zP(e,i,r),r},ZB={};qB(ZB,{ALWAYS_SYNC_GLOBAL_EVENTS:()=>Rv,AbstractHeaderCellCtrl:()=>FC,AdvancedFilterModule:()=>oV,AgAbstractField:()=>TM,AgAbstractLabel:()=>TC,AgAutocomplete:()=>vf,AgCheckbox:()=>Tc,AgDialog:()=>lc,AgGroupComponent:()=>Bo,AgInputDateField:()=>YM,AgInputNumberField:()=>_C,AgInputRange:()=>i5,AgInputTextArea:()=>t5,AgInputTextField:()=>vl,AgMenuItemComponent:()=>Jn,AgMenuItemRenderer:()=>GM,AgMenuList:()=>od,AgMenuPanel:()=>XM,AgPanel:()=>ZM,AgPickerField:()=>Ec,AgPromise:()=>Ft,AgPromiseStatus:()=>GG,AgRadioButton:()=>mx,AgRichSelect:()=>rd,AgSelect:()=>Jr,AgSlider:()=>Yn,AgStackComponentsRegistry:()=>Uw,AgToggleButton:()=>ep,AlignedGridsService:()=>Du,AnimateShowChangeCellRenderer:()=>IM,AnimateSlideCellRenderer:()=>FM,AnimationFrameService:()=>Th,AutoScrollService:()=>PC,AutoWidthCalculator:()=>Mu,Autowired:()=>W,BarColumnLabelPlacement:()=>p5,BaseComponentWrapper:()=>sq,Bean:()=>Me,BeanStub:()=>ye,Beans:()=>Ot,BodyDropPivotTarget:()=>_x,BodyDropTarget:()=>Jh,CellComp:()=>V4,CellCtrl:()=>Jl,CellNavigationService:()=>cc,CellPositionUtils:()=>Yw,CellRangeType:()=>jl,ChangedPath:()=>Ug,ChartMappings:()=>np,CheckboxCellEditor:()=>OM,CheckboxCellRenderer:()=>E4,CheckboxSelectionComponent:()=>DC,ClientSideRowModelSteps:()=>e5,ClipboardModule:()=>l9,Column:()=>Nt,ColumnApi:()=>Pu,ColumnFactory:()=>tg,ColumnGroup:()=>Fs,ColumnKeyCreator:()=>x3,ColumnModel:()=>Zs,ColumnsToolPanelModule:()=>T9,Component:()=>Te,ComponentUtil:()=>JR,Context:()=>M3,CssClassApplier:()=>td,CssClassManager:()=>BG,CtrlsService:()=>Lf,DataTypeService:()=>Fu,DateCellEditor:()=>S4,DateFilter:()=>RM,DateStringCellEditor:()=>kM,DisplayedGroupCreator:()=>jw,DragAndDropService:()=>st,DragService:()=>ag,DragSourceType:()=>Ln,EnterpriseCoreModule:()=>Qs,Environment:()=>pg,EventService:()=>In,Events:()=>K,ExcelExportModule:()=>O9,ExcelFactoryMode:()=>Sx,ExpansionService:()=>_h,ExpressionService:()=>gy,FilterManager:()=>oo,FilterWrapperComp:()=>ed,FiltersToolPanelModule:()=>U9,FloatingFilterMapper:()=>BM,FocusService:()=>Ri,GROUP_AUTO_COLUMN_ID:()=>rc,Grid:()=>tq,GridApi:()=>Wt,GridBodyComp:()=>Ko,GridBodyCtrl:()=>Hr,GridChartsModule:()=>y2,GridComp:()=>ud,GridCoreCreator:()=>tD,GridCtrl:()=>cd,GridHeaderComp:()=>Z4,GridHeaderCtrl:()=>sd,GridOptionsService:()=>fi,GroupCellRenderer:()=>L_,GroupCellRendererCtrl:()=>$h,GroupInstanceIdCreator:()=>ZR,HeaderCellCtrl:()=>$4,HeaderFilterCellComp:()=>A4,HeaderFilterCellCtrl:()=>z4,HeaderGroupCellCtrl:()=>Y4,HeaderNavigationDirection:()=>q4,HeaderNavigationService:()=>Ru,HeaderPositionUtils:()=>gg,HeaderRowComp:()=>Rx,HeaderRowContainerComp:()=>zb,HeaderRowContainerCtrl:()=>id,HeaderRowCtrl:()=>Ff,HeaderRowType:()=>U4,HorizontalDirection:()=>LM,HorizontalResizeService:()=>lg,KeyCode:()=>ce,LargeTextCellEditor:()=>l4,LayoutCssClasses:()=>R4,LicenseManager:()=>Yy,LocaleService:()=>qw,Logger:()=>Ix,LoggerFactory:()=>my,ManagedFocusFeature:()=>ml,MasterDetailModule:()=>$9,MenuModule:()=>Y9,MenuService:()=>ao,ModuleNames:()=>Ut,ModuleRegistry:()=>vt,MouseEventService:()=>sl,MoveColumnFeature:()=>Zh,MultiFilter:()=>_S,MultiFilterModule:()=>Z9,NavigationService:()=>Cr,NumberCellEditor:()=>w4,NumberFilter:()=>DM,NumberSequence:()=>pr,Optional:()=>Vt,PaginationProxy:()=>ug,PillDragComp:()=>Px,PillDropZonePanel:()=>JM,PinnedRowModel:()=>cg,PivotDropZonePanel:()=>iC,PopupComponent:()=>Ac,PopupEditorWrapper:()=>B4,PopupService:()=>al,PositionableFeature:()=>Qu,PostConstruct:()=>de,PreConstruct:()=>Wh,PreDestroy:()=>Hi,PrimaryColsPanel:()=>XE,PropertyKeys:()=>ig,ProvidedColumnGroup:()=>bi,ProvidedFilter:()=>Au,Qualifier:()=>Zn,QuerySelector:()=>pK,RangeSelectionModule:()=>e2,RefSelector:()=>pe,ResizeObserverService:()=>$w,RichSelectModule:()=>J9,RowAnimationCssClasses:()=>M4,RowContainerComp:()=>Xh,RowContainerCtrl:()=>UM,RowContainerName:()=>L4,RowContainerType:()=>k4,RowCtrl:()=>yu,RowGroupDropZonePanel:()=>tC,RowGroupingModule:()=>b2,RowHighlightPosition:()=>T4,RowNode:()=>Tt,RowNodeBlock:()=>za,RowNodeBlockLoader:()=>Go,RowNodeSorter:()=>Dh,RowPositionUtils:()=>Mh,RowRenderer:()=>kn,ScalarFilter:()=>ws,ScrollVisibleService:()=>Eh,SelectCellEditor:()=>bx,SelectableService:()=>Rh,SelectionHandleType:()=>Gg,ServerSideRowModelModule:()=>sH,ServerSideTransactionResultStatus:()=>Mr,SetFilter:()=>Hc,SetFilterModule:()=>uH,SetLeftFeature:()=>LC,SideBarModule:()=>YE,SimpleFilter:()=>Xi,SortController:()=>Iu,SortIndicatorComp:()=>Cx,SparklinesModule:()=>EH,StandardMenuFactory:()=>ac,StatusBarModule:()=>RH,StylingService:()=>fy,TabGuardClassNames:()=>J4,TabGuardComp:()=>yl,TabGuardCtrl:()=>Mx,TabbedLayout:()=>KM,TextCellEditor:()=>F_,TextFilter:()=>og,TextFloatingFilter:()=>s4,Timer:()=>dK,ToolPanelColDefService:()=>rC,TooltipFeature:()=>hr,TooltipStateManager:()=>VG,TouchListener:()=>Es,UserComponentFactory:()=>oc,UserComponentRegistry:()=>py,ValueCache:()=>yy,ValueService:()=>uc,ValuesDropZonePanel:()=>wS,VanillaFrameworkOverrides:()=>o5,VerticalDirection:()=>c4,ViewportRowModelModule:()=>MH,VirtualList:()=>tp,VirtualListDragFeature:()=>IC,_:()=>Q,__FORCE_MODULE_DETECTION_AG_GRID_CORE_EXT:()=>o9,agCharts:()=>a9,createGrid:()=>h5,exportMultipleSheetsAsExcel:()=>N9,getMultipleSheetsAsExcel:()=>OA,getRowContainerTypeForName:()=>N4,provideGlobalGridOptions:()=>eq});var ute=class{constructor(){this.ieCompatibility=!1}init(){this.ieCompatibility=this.md5("hello")!="5d41402abc4b2a76b9719d911017c592"}md5cycle(t,e){let i=t[0],s=t[1],r=t[2],n=t[3];i=this.ff(i,s,r,n,e[0],7,-680876936),n=this.ff(n,i,s,r,e[1],12,-389564586),r=this.ff(r,n,i,s,e[2],17,606105819),s=this.ff(s,r,n,i,e[3],22,-1044525330),i=this.ff(i,s,r,n,e[4],7,-176418897),n=this.ff(n,i,s,r,e[5],12,1200080426),r=this.ff(r,n,i,s,e[6],17,-1473231341),s=this.ff(s,r,n,i,e[7],22,-45705983),i=this.ff(i,s,r,n,e[8],7,1770035416),n=this.ff(n,i,s,r,e[9],12,-1958414417),r=this.ff(r,n,i,s,e[10],17,-42063),s=this.ff(s,r,n,i,e[11],22,-1990404162),i=this.ff(i,s,r,n,e[12],7,1804603682),n=this.ff(n,i,s,r,e[13],12,-40341101),r=this.ff(r,n,i,s,e[14],17,-1502002290),s=this.ff(s,r,n,i,e[15],22,1236535329),i=this.gg(i,s,r,n,e[1],5,-165796510),n=this.gg(n,i,s,r,e[6],9,-1069501632),r=this.gg(r,n,i,s,e[11],14,643717713),s=this.gg(s,r,n,i,e[0],20,-373897302),i=this.gg(i,s,r,n,e[5],5,-701558691),n=this.gg(n,i,s,r,e[10],9,38016083),r=this.gg(r,n,i,s,e[15],14,-660478335),s=this.gg(s,r,n,i,e[4],20,-405537848),i=this.gg(i,s,r,n,e[9],5,568446438),n=this.gg(n,i,s,r,e[14],9,-1019803690),r=this.gg(r,n,i,s,e[3],14,-187363961),s=this.gg(s,r,n,i,e[8],20,1163531501),i=this.gg(i,s,r,n,e[13],5,-1444681467),n=this.gg(n,i,s,r,e[2],9,-51403784),r=this.gg(r,n,i,s,e[7],14,1735328473),s=this.gg(s,r,n,i,e[12],20,-1926607734),i=this.hh(i,s,r,n,e[5],4,-378558),n=this.hh(n,i,s,r,e[8],11,-2022574463),r=this.hh(r,n,i,s,e[11],16,1839030562),s=this.hh(s,r,n,i,e[14],23,-35309556),i=this.hh(i,s,r,n,e[1],4,-1530992060),n=this.hh(n,i,s,r,e[4],11,1272893353),r=this.hh(r,n,i,s,e[7],16,-155497632),s=this.hh(s,r,n,i,e[10],23,-1094730640),i=this.hh(i,s,r,n,e[13],4,681279174),n=this.hh(n,i,s,r,e[0],11,-358537222),r=this.hh(r,n,i,s,e[3],16,-722521979),s=this.hh(s,r,n,i,e[6],23,76029189),i=this.hh(i,s,r,n,e[9],4,-640364487),n=this.hh(n,i,s,r,e[12],11,-421815835),r=this.hh(r,n,i,s,e[15],16,530742520),s=this.hh(s,r,n,i,e[2],23,-995338651),i=this.ii(i,s,r,n,e[0],6,-198630844),n=this.ii(n,i,s,r,e[7],10,1126891415),r=this.ii(r,n,i,s,e[14],15,-1416354905),s=this.ii(s,r,n,i,e[5],21,-57434055),i=this.ii(i,s,r,n,e[12],6,1700485571),n=this.ii(n,i,s,r,e[3],10,-1894986606),r=this.ii(r,n,i,s,e[10],15,-1051523),s=this.ii(s,r,n,i,e[1],21,-2054922799),i=this.ii(i,s,r,n,e[8],6,1873313359),n=this.ii(n,i,s,r,e[15],10,-30611744),r=this.ii(r,n,i,s,e[6],15,-1560198380),s=this.ii(s,r,n,i,e[13],21,1309151649),i=this.ii(i,s,r,n,e[4],6,-145523070),n=this.ii(n,i,s,r,e[11],10,-1120210379),r=this.ii(r,n,i,s,e[2],15,718787259),s=this.ii(s,r,n,i,e[9],21,-343485551),t[0]=this.add32(i,t[0]),t[1]=this.add32(s,t[1]),t[2]=this.add32(r,t[2]),t[3]=this.add32(n,t[3])}cmn(t,e,i,s,r,n){return e=this.add32(this.add32(e,t),this.add32(s,n)),this.add32(e<<r|e>>>32-r,i)}ff(t,e,i,s,r,n,o){return this.cmn(e&i|~e&s,t,e,r,n,o)}gg(t,e,i,s,r,n,o){return this.cmn(e&s|i&~s,t,e,r,n,o)}hh(t,e,i,s,r,n,o){return this.cmn(e^i^s,t,e,r,n,o)}ii(t,e,i,s,r,n,o){return this.cmn(i^(e|~s),t,e,r,n,o)}md51(t){const e=t.length,i=[1732584193,-271733879,-1732584194,271733878];let s;for(s=64;s<=t.length;s+=64)this.md5cycle(i,this.md5blk(t.substring(s-64,s)));t=t.substring(s-64);const r=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];for(s=0;s<t.length;s++)r[s>>2]|=t.charCodeAt(s)<<(s%4<<3);if(r[s>>2]|=128<<(s%4<<3),s>55)for(this.md5cycle(i,r),s=0;s<16;s++)r[s]=0;return r[14]=e*8,this.md5cycle(i,r),i}md5blk(t){const e=[];for(let i=0;i<64;i+=4)e[i>>2]=t.charCodeAt(i)+(t.charCodeAt(i+1)<<8)+(t.charCodeAt(i+2)<<16)+(t.charCodeAt(i+3)<<24);return e}rhex(t){const e="0123456789abcdef".split("");let i="",s=0;for(;s<4;s++)i+=e[t>>s*8+4&15]+e[t>>s*8&15];return i}hex(t){for(let e=0;e<t.length;e++)t[e]=this.rhex(t[e]);return t.join("")}md5(t){return this.hex(this.md51(t))}add32(t,e){return this.ieCompatibility?this.add32Compat(t,e):this.add32Std(t,e)}add32Std(t,e){return t+e&4294967295}add32Compat(t,e){const i=(t&65535)+(e&65535);return(t>>16)+(e>>16)+(i>>16)<<16|i&65535}};function dT(t){return t==null||t.length===0}var bb={"01":"GRID","02":"CHARTS","0102":"BOTH"},JB=class mn{constructor(e){this.watermarkMessage=void 0,this.totalMessageLength=124,this.document=e,this.md5=new ute,this.md5.init()}validateLicense(){const e=this.getLicenseDetails(mn.licenseKey),i=`AG Grid ${e.currentLicenseType==="BOTH"?"and AG Charts ":""}Enterprise`,s=e.suppliedLicenseType===void 0?"":`AG ${e.suppliedLicenseType==="BOTH"?"Grid and AG Charts":e.suppliedLicenseType==="GRID"?"Grid":"Charts"} Enterprise`;if(e.missing)(!this.isWebsiteUrl()||this.isForceWatermark())&&this.outputMissingLicenseKey(i);else if(e.expired){const r=mn.getGridReleaseDate(),n=mn.formatDate(r);this.outputExpiredKey(e.expiry,n,i,s)}else e.valid?e.isTrial&&e.trialExpired&&this.outputExpiredTrialKey(e.expiry,i,s):this.outputInvalidLicenseKey(!!e.incorrectLicenseType,i,s)}static extractExpiry(e){const i=e.substring(e.lastIndexOf("_")+1,e.length);return new Date(parseInt(mn.decode(i),10))}static extractLicenseComponents(e){let i=e.replace(/[\u200B-\u200D\uFEFF]/g,"");if(i=i.replace(/\r?\n|\r/g,""),e.length<=32)return{md5:null,license:e,version:null,isTrial:null};const s=i.length-32,r=i.substring(s),n=i.substring(0,s),[o,a,l]=mn.extractBracketedInformation(i);return{md5:r,license:n,version:o,isTrial:a,type:l}}getLicenseDetails(e){const i=mn.chartsLicenseManager?"BOTH":"GRID";if(dT(e))return{licenseKey:e,valid:!1,missing:!0,currentLicenseType:i};const s=mn.getGridReleaseDate(),{md5:r,license:n,version:o,isTrial:a,type:l}=mn.extractLicenseComponents(e);let c=r===this.md5.md5(n)&&e.indexOf("For_Trialing_ag-Grid_Only")===-1,u,d,h=null,p=!1,f;function m(){u=h<new Date,d=void 0}if(c&&(h=mn.extractExpiry(n),c=!isNaN(h.getTime()),c))switch(d=s>h,o){case"legacy":case"2":{a&&m();break}case"3":dT(l)?c=!1:(f=l,l!==bb["01"]&&l!==bb["0102"]||i==="BOTH"&&f!=="BOTH"?(c=!1,p=!0):a&&m())}return c?{licenseKey:e,valid:c,expiry:mn.formatDate(h),expired:d,version:o,isTrial:a,trialExpired:u,incorrectLicenseType:p,currentLicenseType:i,suppliedLicenseType:f}:{licenseKey:e,valid:c,incorrectLicenseType:p,currentLicenseType:i,suppliedLicenseType:f}}isDisplayWatermark(){return this.isForceWatermark()||!this.isLocalhost()&&!this.isWebsiteUrl()&&!dT(this.watermarkMessage)}getWatermarkMessage(){return this.watermarkMessage||""}getHostname(){const i=(this.document.defaultView||window).location,{hostname:s=""}=i;return s}isForceWatermark(){const i=(this.document.defaultView||window).location,{pathname:s}=i;return s?s.indexOf("forceWatermark")!==-1:!1}isWebsiteUrl(){return this.getHostname().match(/^((?:[\w-]+\.)?ag-grid\.com)$/)!==null}isLocalhost(){return this.getHostname().match(/^(?:127\.0\.0\.1|localhost)$/)!==null}static formatDate(e){const i=["January","February","March","April","May","June","July","August","September","October","November","December"],s=e.getDate(),r=e.getMonth(),n=e.getFullYear();return s+" "+i[r]+" "+n}static getGridReleaseDate(){return new Date(parseInt(mn.decode(mn.RELEASE_INFORMATION),10))}static decode(e){const i="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";let s="",r,n,o,a,l,c,u,d=0;const h=e.replace(/[^A-Za-z0-9+/=]/g,"");for(;d<h.length;)a=i.indexOf(h.charAt(d++)),l=i.indexOf(h.charAt(d++)),c=i.indexOf(h.charAt(d++)),u=i.indexOf(h.charAt(d++)),r=a<<2|l>>4,n=(l&15)<<4|c>>2,o=(c&3)<<6|u,s=s+String.fromCharCode(r),c!=64&&(s=s+String.fromCharCode(n)),u!=64&&(s=s+String.fromCharCode(o));return s=mn.utf8_decode(s),s}static utf8_decode(e){e=e.replace(/rn/g,"n");let i="";for(let s=0;s<e.length;s++){const r=e.charCodeAt(s);r<128?i+=String.fromCharCode(r):r>127&&r<2048?(i+=String.fromCharCode(r>>6|192),i+=String.fromCharCode(r&63|128)):(i+=String.fromCharCode(r>>12|224),i+=String.fromCharCode(r>>6&63|128),i+=String.fromCharCode(r&63|128))}return i}static setChartsLicenseManager(e){this.chartsLicenseManager=e}static setLicenseKey(e){this.licenseKey=e,this.chartsLicenseManager&&this.chartsLicenseManager.setLicenseKey(e,!0)}static extractBracketedInformation(e){if(!e.includes("["))return["legacy",!1,void 0];const i=e.match(/\[(.*?)\]/g).map(a=>a.replace("[","").replace("]",""));if(!i||i.length===0)return["legacy",!1,void 0];const s=i.filter(a=>a==="TRIAL").length===1,r=i.filter(a=>a.indexOf("v")===0)[0],n=r?r.replace("v",""):"legacy",o=bb[i.filter(a=>bb[a])[0]];return[n,s,o]}centerPadAndOutput(e){const i=this.totalMessageLength-e.length;console.error(e.padStart(i/2+e.length,"*").padEnd(this.totalMessageLength,"*"))}padAndOutput(e,i="*",s=""){console.error(e.padEnd(this.totalMessageLength-s.length,i)+s)}outputInvalidLicenseKey(e,i,s){e?(this.centerPadAndOutput(""),this.centerPadAndOutput(` ${i} License `),this.centerPadAndOutput(" Incompatible License Key "),this.padAndOutput(`* Your license key is for ${s} only and does not cover you for ${i}.`," ","*"),this.padAndOutput("* Please contact info@ag-grid.com to obtain a combined license key."," ","*"),this.centerPadAndOutput(""),this.centerPadAndOutput("")):(this.centerPadAndOutput(""),this.centerPadAndOutput(` ${i} License `),this.centerPadAndOutput(" Invalid License Key "),this.padAndOutput("* Your license key is not valid - please contact info@ag-grid.com to obtain a valid license."," ","*"),this.centerPadAndOutput(""),this.centerPadAndOutput("")),this.watermarkMessage="Invalid License"}outputExpiredTrialKey(e,i,s){this.centerPadAndOutput(""),this.centerPadAndOutput(` ${i} License `),this.centerPadAndOutput(" Trial Period Expired. "),this.padAndOutput(`* Your trial only license for ${s} expired on ${e}.`," ","*"),this.padAndOutput("* Please email info@ag-grid.com to purchase a license."," ","*"),this.centerPadAndOutput(""),this.centerPadAndOutput(""),this.watermarkMessage="Trial Period Expired"}outputMissingLicenseKey(e){this.centerPadAndOutput(""),this.centerPadAndOutput(` ${e} License `),this.centerPadAndOutput(" License Key Not Found "),this.padAndOutput(`* All ${e} features are unlocked for trial.`," ","*"),this.padAndOutput("* If you want to hide the watermark please email info@ag-grid.com for a trial license key."," ","*"),this.centerPadAndOutput(""),this.centerPadAndOutput(""),this.watermarkMessage="For Trial Use Only"}outputExpiredKey(e,i,s,r){this.centerPadAndOutput(""),this.centerPadAndOutput(` ${s} License `),this.centerPadAndOutput(" Incompatible Software Version "),this.padAndOutput(`* Your license key works with versions of ${r} released before ${e}.`," ","*"),this.padAndOutput(`* The version you are trying to use was released on ${i}.`," ","*"),this.padAndOutput("* Please contact info@ag-grid.com to renew your license key."," ","*"),this.centerPadAndOutput(""),this.centerPadAndOutput(""),this.watermarkMessage="License Expired"}};JB.RELEASE_INFORMATION="MTcxNTc3NTcyODYxNg==";var wb=JB,Yy=class extends ye{validateLicense(){this.licenseManager=new wb(this.gos.getDocument()),this.licenseManager.validateLicense()}static getLicenseDetails(t){return new wb(null).getLicenseDetails(t)}isDisplayWatermark(){return this.licenseManager.isDisplayWatermark()}getWatermarkMessage(){return this.licenseManager.getWatermarkMessage()}static setLicenseKey(t){wb.setLicenseKey(t)}static setChartsLicenseManager(t){wb.setChartsLicenseManager(t)}};ci([Wh],Yy.prototype,"validateLicense",1);Yy=ci([Me("licenseManager")],Yy);var vE=class extends Te{constructor(){super(`<div class="ag-watermark">
                <div ref="eLicenseTextRef" class="ag-watermark-text"></div>
            </div>`)}postConstruct(){const t=this.shouldDisplayWatermark();this.setDisplayed(t),t&&(this.eLicenseTextRef.innerText=this.licenseManager.getWatermarkMessage(),window.setTimeout(()=>this.addCssClass("ag-opacity-zero"),0),window.setTimeout(()=>this.setDisplayed(!1),5e3))}shouldDisplayWatermark(){return this.licenseManager.isDisplayWatermark()}};ci([W("licenseManager")],vE.prototype,"licenseManager",2);ci([pe("eLicenseTextRef")],vE.prototype,"eLicenseTextRef",2);ci([de],vE.prototype,"postConstruct",1);var dte="31.3.4",Qs={version:dte,moduleName:Ut.EnterpriseCoreModule,beans:[Yy],agStackComponents:[{componentName:"AgWatermark",componentClass:vE}]},QB=Object.defineProperty,hte=Object.defineProperties,pte=Object.getOwnPropertyDescriptor,fte=Object.getOwnPropertyDescriptors,bL=Object.getOwnPropertySymbols,gte=Object.prototype.hasOwnProperty,mte=Object.prototype.propertyIsEnumerable,wL=(t,e,i)=>e in t?QB(t,e,{enumerable:!0,configurable:!0,writable:!0,value:i}):t[e]=i,$P=(t,e)=>{for(var i in e||(e={}))gte.call(e,i)&&wL(t,i,e[i]);if(bL)for(var i of bL(e))mte.call(e,i)&&wL(t,i,e[i]);return t},KP=(t,e)=>hte(t,fte(e)),nt=(t,e,i,s)=>{for(var r=s>1?void 0:s?pte(e,i):e,n=t.length-1,o;n>=0;n--)(o=t[n])&&(r=(s?o(e,i,r):o(r))||r);return s&&r&&QB(e,i,r),r},n0=class extends Te{constructor(t){super(`
            <div class="ag-advanced-filter-header" role="row">
            </div>`),this.enabled=t}postConstruct(){this.setupAdvancedFilter(this.enabled),this.addDestroyFunc(()=>this.destroyBean(this.eAdvancedFilter)),this.addManagedListener(this.eventService,K.EVENT_GRID_COLUMNS_CHANGED,()=>this.onGridColumnsChanged()),this.addGuiEventListener("keydown",t=>this.onKeyDown(t)),this.addGuiEventListener("focusout",t=>{this.getFocusableElement().contains(t.relatedTarget)||this.focusService.clearAdvancedFilterColumn()})}getFocusableElement(){var t,e;return(e=(t=this.eAdvancedFilter)==null?void 0:t.getGui())!=null?e:this.getGui()}setEnabled(t){t!==this.enabled&&this.setupAdvancedFilter(t)}refresh(){var t;(t=this.eAdvancedFilter)==null||t.refresh()}getHeight(){return this.height}setInputDisabled(t){var e;(e=this.eAdvancedFilter)==null||e.setInputDisabled(t)}setupAdvancedFilter(t){const e=this.getGui();if(t){this.eAdvancedFilter=this.createBean(new Zo);const i=this.eAdvancedFilter.getGui();this.eAdvancedFilter.addCssClass("ag-advanced-filter-header-cell"),this.height=this.columnModel.getFloatingFiltersHeight();const s=`${this.height}px`;e.style.height=s,e.style.minHeight=s,this.setAriaRowIndex(),Q.setAriaRole(i,"gridcell"),Q.setAriaColIndex(i,1),this.setAriaColumnCount(i),e.appendChild(i)}else Q.clearElement(e),this.destroyBean(this.eAdvancedFilter),this.height=0;Q.setDisplayed(e,t),this.enabled=t}setAriaColumnCount(t){Q.setAriaColSpan(t,this.columnModel.getAllGridColumns().length)}setAriaRowIndex(){Q.setAriaRowIndex(this.getGui(),this.headerNavigationService.getHeaderRowCount())}onGridColumnsChanged(){this.eAdvancedFilter&&(this.setAriaColumnCount(this.eAdvancedFilter.getGui()),this.setAriaRowIndex())}onKeyDown(t){switch(t.key){case ce.ENTER:{this.hasFocus()&&this.focusService.focusInto(this.getFocusableElement())&&t.preventDefault();break}case ce.ESCAPE:this.hasFocus()||this.getFocusableElement().focus();break;case ce.UP:this.navigateUpDown(!0,t);break;case ce.DOWN:this.navigateUpDown(!1,t);break;case ce.TAB:if(this.hasFocus())this.navigateLeftRight(t);else{const e=this.focusService.findNextFocusableElement(this.getFocusableElement(),null,t.shiftKey);e?(t.preventDefault(),e.focus()):this.navigateLeftRight(t)}break}}navigateUpDown(t,e){this.hasFocus()&&this.focusService.focusNextFromAdvancedFilter(t)&&e.preventDefault()}navigateLeftRight(t){(t.shiftKey?this.focusService.focusLastHeader():this.focusService.focusNextFromAdvancedFilter(!1,!0))&&t.preventDefault()}hasFocus(){return this.gos.getActiveDomElement()===this.getFocusableElement()}};nt([W("columnModel")],n0.prototype,"columnModel",2);nt([W("focusService")],n0.prototype,"focusService",2);nt([W("headerNavigationService")],n0.prototype,"headerNavigationService",2);nt([de],n0.prototype,"postConstruct",1);var eV=class extends rd{constructor(t){super(KP($P({},t),{template:`
                <div class="ag-picker-field" role="presentation">
                    <div ref="eLabel"></div>
                    <div ref="eWrapper" class="ag-wrapper ag-picker-collapsed">
                        <div ref="eDisplayField" class="ag-picker-field-display"></div>
                        <ag-input-text-field ref="eInput" class="ag-rich-select-field-input"></ag-input-text-field>
                        <div ref="eIcon" class="ag-picker-field-icon" aria-hidden="true"></div>
                    </div>
                </div>`})),this.params=t}showPicker(){setTimeout(()=>super.showPicker())}hidePicker(){setTimeout(()=>super.hidePicker())}postConstruct(){super.postConstruct();const{wrapperClassName:t,ariaLabel:e}=this.params;Q.setDisplayed(this.eDisplayField,!1),t&&this.eWrapper.classList.add(t),Q.setAriaLabelledBy(this.eWrapper,""),Q.setAriaLabel(this.eWrapper,e)}onEnterKeyDown(t){Q.stopPropagationForAgGrid(t),this.isPickerDisplayed?super.onEnterKeyDown(t):(t.preventDefault(),this.showPicker())}},yE=class wA extends ye{constructor(e,i){super(),this.comp=e,this.virtualList=i}postConstruct(){this.createManagedBean(new IC(this.comp,this.virtualList,{dragSourceType:Ln.AdvancedFilterBuilder,listItemDragStartEvent:wA.EVENT_DRAG_STARTED,listItemDragEndEvent:wA.EVENT_DRAG_ENDED,eventSource:this,getCurrentDragValue:e=>this.getCurrentDragValue(e),isMoveBlocked:()=>!1,getNumRows:e=>e.getNumItems(),moveItem:(e,i)=>this.moveItem(e,i)}))}getCurrentDragValue(e){return e.item}moveItem(e,i){this.comp.moveItem(e,i)}};yE.EVENT_DRAG_STARTED="advancedFilterBuilderDragStarted";yE.EVENT_DRAG_ENDED="advancedFilterBuilderDragEnded";nt([de],yE.prototype,"postConstruct",1);var SA=yE,YP=class extends ye{constructor(t,e,i){super(),this.eGui=t,this.focusWrapper=e,this.eFocusableComp=i}postConstruct(){this.addManagedListener(this.eGui,"keydown",t=>{switch(t.key){case ce.TAB:t.defaultPrevented||Q.stopPropagationForAgGrid(t);break;case ce.UP:case ce.DOWN:Q.stopPropagationForAgGrid(t);break;case ce.ESCAPE:if(Q.isStopPropagationForAgGrid(t))return;this.eGui.contains(this.gos.getActiveDomElement())&&(t.preventDefault(),Q.stopPropagationForAgGrid(t),this.focusWrapper.focus());break}}),this.addManagedListener(this.focusWrapper,"keydown",t=>{switch(t.key){case ce.ENTER:if(Q.isStopPropagationForAgGrid(t))return;this.gos.getActiveDomElement()===this.focusWrapper&&(t.preventDefault(),Q.stopPropagationForAgGrid(t),this.eFocusableComp.getFocusableElement().focus());break}}),this.addManagedListener(this.focusWrapper,"focusin",()=>{this.focusWrapper.classList.add("ag-advanced-filter-builder-virtual-list-item-highlight")}),this.addManagedListener(this.focusWrapper,"focusout",t=>{this.focusWrapper.contains(t.relatedTarget)||this.focusWrapper.classList.remove("ag-advanced-filter-builder-virtual-list-item-highlight")})}};nt([de],YP.prototype,"postConstruct",1);function tV(t,e){return{pickerAriaLabelKey:"ariaLabelAdvancedFilterBuilderAddField",pickerAriaLabelValue:"Advanced Filter Builder Add Field",pickerType:"ag-list",valueList:[{key:"condition",displayValue:t("advancedFilterBuilderAddCondition")},{key:"join",displayValue:t("advancedFilterBuilderAddJoin")}],valueFormatter:i=>{var s;return i==null?null:(s=i.displayValue)!=null?s:i.key},pickerIcon:"advancedFilterBuilderAdd",maxPickerWidth:`${e??120}px`,wrapperClassName:"ag-advanced-filter-builder-item-button",ariaLabel:t("advancedFilterBuilderAddButtonTooltip")}}var ir=class{};ir.EVENT_ADDED="advancedFilterBuilderAdded";ir.EVENT_MOVED="advancedFilterBuilderMoved";ir.EVENT_REMOVED="advancedFilterBuilderRemoved";ir.EVENT_VALUE_CHANGED="advancedFilterBuilderValueChanged";ir.EVENT_VALID_CHANGED="advancedFilterBuilderValidChanged";var qP=class extends Te{constructor(){super(`
            <div class="ag-advanced-filter-builder-item-condition" role="presentation"></div>
        `),this.validationMessage=null}init(t){const{item:e,createPill:i}=t;this.item=e,this.createPill=i,this.filterModel=e.filterModel,this.setupColumnCondition(this.filterModel),this.validate(),this.addDestroyFunc(()=>this.destroyBeans([this.eColumnPill,this.eOperatorPill,this.eOperandPill]))}getDragName(){return this.filterModel.colId?this.advancedFilterExpressionService.parseColumnFilterModel(this.filterModel):this.getDefaultColumnDisplayValue()}getAriaLabel(){return`${this.advancedFilterExpressionService.translate("ariaAdvancedFilterBuilderFilterItem")} ${this.getDragName()}`}getValidationMessage(){return this.validationMessage}getFocusableElement(){return this.eColumnPill.getFocusableElement()}setupColumnCondition(t){var e;const i=this.advancedFilterExpressionService.getColumnDetails(t.colId);this.baseCellDataType=i.baseCellDataType,this.column=i.column,this.numOperands=this.getNumOperands(this.getOperatorKey()),this.eColumnPill=this.createPill({key:this.getColumnKey(),displayValue:(e=this.getColumnDisplayValue())!=null?e:this.getDefaultColumnDisplayValue(),cssClass:"ag-advanced-filter-builder-column-pill",isSelect:!0,getEditorParams:()=>({values:this.advancedFilterExpressionService.getColumnAutocompleteEntries()}),update:s=>this.setColumnKey(s),pickerAriaLabelKey:"ariaLabelAdvancedFilterBuilderColumnSelectField",pickerAriaLabelValue:"Advanced Filter Builder Column Select Field",ariaLabel:this.advancedFilterExpressionService.translate("ariaAdvancedFilterBuilderColumn")}),this.getGui().appendChild(this.eColumnPill.getGui()),Q.exists(this.getColumnKey())&&(this.createOperatorPill(),this.hasOperand()&&this.createOperandPill())}createOperatorPill(){var t;this.eOperatorPill=this.createPill({key:this.getOperatorKey(),displayValue:(t=this.getOperatorDisplayValue())!=null?t:this.getDefaultOptionSelectValue(),cssClass:"ag-advanced-filter-builder-option-pill",isSelect:!0,getEditorParams:()=>({values:this.getOperatorAutocompleteEntries()}),update:e=>this.setOperatorKey(e),pickerAriaLabelKey:"ariaLabelAdvancedFilterBuilderOptionSelectField",pickerAriaLabelValue:"Advanced Filter Builder Option Select Field",ariaLabel:this.advancedFilterExpressionService.translate("ariaAdvancedFilterBuilderOption")}),this.eColumnPill.getGui().insertAdjacentElement("afterend",this.eOperatorPill.getGui())}createOperandPill(){var t;const e=(t=this.getOperandDisplayValue())!=null?t:"";this.eOperandPill=this.createPill({key:e,displayValue:e,baseCellDataType:this.baseCellDataType,cssClass:"ag-advanced-filter-builder-value-pill",isSelect:!1,update:i=>this.setOperand(i),ariaLabel:this.advancedFilterExpressionService.translate("ariaAdvancedFilterBuilderValue")}),this.getGui().appendChild(this.eOperandPill.getGui())}getColumnKey(){return this.filterModel.colId}getColumnDisplayValue(){return this.advancedFilterExpressionService.getColumnDisplayValue(this.filterModel)}getOperatorKey(){return this.filterModel.type}getOperatorDisplayValue(){return this.advancedFilterExpressionService.getOperatorDisplayValue(this.filterModel)}getOperandDisplayValue(){return this.advancedFilterExpressionService.getOperandDisplayValue(this.filterModel,!0)}hasOperand(){return this.numOperands>0}getOperatorAutocompleteEntries(){return this.column?this.advancedFilterExpressionService.getOperatorAutocompleteEntries(this.column,this.baseCellDataType):[]}setColumnKey(t){this.eOperatorPill||this.createOperatorPill();const e=this.advancedFilterExpressionService.getColumnDetails(t);this.column=e.column;const i=e.baseCellDataType;this.baseCellDataType!==i&&(this.baseCellDataType=i,this.setOperatorKey(void 0),this.eOperatorPill&&(Q.removeFromParent(this.eOperatorPill.getGui()),this.destroyBean(this.eOperatorPill),this.createOperatorPill()),this.validate()),this.filterModel.colId=t,this.filterModel.filterType=this.baseCellDataType}setOperatorKey(t){const e=this.getNumOperands(t);e!==this.numOperands&&(this.numOperands=e,e===0?this.destroyOperandPill():(this.createOperandPill(),this.baseCellDataType!=="number"&&this.setOperand(""))),this.filterModel.type=t,this.validate()}setOperand(t){var e;let i=t;this.column&&(i=(e=this.advancedFilterExpressionService.getOperandModelValue(t,this.baseCellDataType,this.column))!=null?e:""),this.filterModel.filter=i,this.validate()}getNumOperands(t){var e,i;return(i=(e=this.advancedFilterExpressionService.getExpressionOperator(this.baseCellDataType,t))==null?void 0:e.numOperands)!=null?i:0}destroyOperandPill(){delete this.filterModel.filter,this.getGui().removeChild(this.eOperandPill.getGui()),this.destroyBean(this.eOperandPill),this.eOperandPill=void 0}validate(){let t=null;Q.exists(this.getColumnKey())?Q.exists(this.getOperatorKey())?this.numOperands>0&&!Q.exists(this.getOperandDisplayValue())&&(t=this.advancedFilterExpressionService.translate("advancedFilterBuilderValidationEnterValue")):t=this.advancedFilterExpressionService.translate("advancedFilterBuilderValidationSelectOption"):t=this.advancedFilterExpressionService.translate("advancedFilterBuilderValidationSelectColumn"),this.item.valid=!t,t!==this.validationMessage&&(this.validationMessage=t,this.dispatchEvent({type:ir.EVENT_VALID_CHANGED}))}getDefaultColumnDisplayValue(){return this.advancedFilterExpressionService.translate("advancedFilterBuilderSelectColumn")}getDefaultOptionSelectValue(){return this.advancedFilterExpressionService.translate("advancedFilterBuilderSelectOption")}};nt([W("advancedFilterExpressionService")],qP.prototype,"advancedFilterExpressionService",2);nt([W("valueService")],qP.prototype,"valueService",2);var o0=class extends Te{constructor(t){super(`
            <div class="ag-advanced-filter-builder-pill-wrapper" role="presentation">
                <div ref="ePill" class="ag-advanced-filter-builder-pill" role="button">
                    <span ref="eLabel" class="ag-advanced-filter-builder-pill-display"></span>
                </div>
            </div>
        `),this.params=t,this.value=t.value}postConstruct(){const{cssClass:t,ariaLabel:e}=this.params;this.ePill.classList.add(t),this.activateTabIndex([this.ePill]),this.eLabel.id=`${this.getCompId()}`,Q.setAriaDescribedBy(this.ePill,this.eLabel.id),Q.setAriaLabel(this.ePill,e),this.renderValue(),this.addManagedListener(this.ePill,"click",i=>{i.preventDefault(),this.showEditor()}),this.addManagedListener(this.ePill,"keydown",i=>{switch(i.key){case ce.ENTER:i.preventDefault(),Q.stopPropagationForAgGrid(i),this.showEditor();break}}),this.addDestroyFunc(()=>this.destroyBean(this.eEditor))}getFocusableElement(){return this.ePill}showEditor(){if(this.eEditor)return;Q.setDisplayed(this.ePill,!1),this.eEditor=this.createEditorComp(this.params.type),this.eEditor.setValue(this.value);const t=this.eEditor.getGui();this.eEditor.addManagedListener(t,"keydown",e=>{switch(e.key){case ce.ENTER:e.preventDefault(),Q.stopPropagationForAgGrid(e),this.updateValue(!0);break;case ce.ESCAPE:e.preventDefault(),Q.stopPropagationForAgGrid(e),this.hideEditor(!0);break}}),this.eEditor.addManagedListener(t,"focusout",()=>{this.updateValue(!1)}),this.getGui().appendChild(t),this.eEditor.getFocusableElement().focus()}createEditorComp(t){let e;switch(t){case"text":e=new vl;break;case"number":e=new _C;break;case"date":e=new YM;break}return this.createBean(e)}hideEditor(t){const{eEditor:e}=this;e&&(this.eEditor=void 0,this.getGui().removeChild(e.getGui()),this.destroyBean(e),Q.setDisplayed(this.ePill,!0),t&&this.ePill.focus())}renderValue(){let t;this.eLabel.classList.remove("ag-advanced-filter-builder-value-empty","ag-advanced-filter-builder-value-number","ag-advanced-filter-builder-value-text"),Q.exists(this.value)?this.params.type==="number"?(t=this.value,this.eLabel.classList.add("ag-advanced-filter-builder-value-number")):(t=`"${this.value}"`,this.eLabel.classList.add("ag-advanced-filter-builder-value-text")):(t=this.advancedFilterExpressionService.translate("advancedFilterBuilderEnterValue"),this.eLabel.classList.add("ag-advanced-filter-builder-value-empty")),this.eLabel.innerText=t}updateValue(t){var e;if(!this.eEditor)return;const i=(e=this.eEditor.getValue())!=null?e:"";this.dispatchEvent({type:K.EVENT_FIELD_VALUE_CHANGED,value:i}),this.value=i,this.renderValue(),this.hideEditor(t)}};nt([pe("ePill")],o0.prototype,"ePill",2);nt([pe("eLabel")],o0.prototype,"eLabel",2);nt([W("advancedFilterExpressionService")],o0.prototype,"advancedFilterExpressionService",2);nt([de],o0.prototype,"postConstruct",1);var iV=class extends Te{constructor(){super(`
            <div class="ag-advanced-filter-builder-item-condition" role="presentation"></div>
        `)}init(t){const{item:e,createPill:i}=t,s=e.filterModel;this.filterModel=s,this.ePill=i({key:s.type,displayValue:this.advancedFilterExpressionService.parseJoinOperator(s),cssClass:"ag-advanced-filter-builder-join-pill",isSelect:!0,getEditorParams:()=>({values:this.advancedFilterExpressionService.getJoinOperatorAutocompleteEntries()}),update:r=>s.type=r,pickerAriaLabelKey:"ariaLabelAdvancedFilterBuilderJoinSelectField",pickerAriaLabelValue:"Advanced Filter Builder Join Operator Select Field",ariaLabel:this.advancedFilterExpressionService.translate("ariaAdvancedFilterBuilderJoinOperator")}),this.getGui().appendChild(this.ePill.getGui()),this.addDestroyFunc(()=>this.destroyBean(this.ePill))}getDragName(){return this.advancedFilterExpressionService.parseJoinOperator(this.filterModel)}getAriaLabel(){return`${this.advancedFilterExpressionService.translate("ariaAdvancedFilterBuilderGroupItem")} ${this.getDragName()}`}getValidationMessage(){return null}getFocusableElement(){return this.ePill.getFocusableElement()}};nt([W("advancedFilterExpressionService")],iV.prototype,"advancedFilterExpressionService",2);var vte=class extends rd{constructor(t){super(KP($P({},t),{template:`
                <div class="ag-picker-field ag-advanced-filter-builder-pill-wrapper" role="presentation">
                    <div ref="eLabel"></div>
                    <div ref="eWrapper" class="ag-wrapper ag-advanced-filter-builder-pill ag-picker-collapsed">
                        <div ref="eDisplayField" class="ag-picker-field-display ag-advanced-filter-builder-pill-display"></div>
                        <ag-input-text-field ref="eInput" class="ag-rich-select-field-input"></ag-input-text-field>
                        <div ref="eIcon" class="ag-picker-field-icon" aria-hidden="true"></div>
                    </div>
                </div>`})),this.params=t}getFocusableElement(){return this.eWrapper}showPicker(){setTimeout(()=>super.showPicker())}hidePicker(){setTimeout(()=>super.hidePicker())}postConstruct(){super.postConstruct();const{wrapperClassName:t,ariaLabel:e}=this.params;this.eWrapper.classList.add(t),Q.setAriaLabelledBy(this.eWrapper,""),Q.setAriaLabel(this.eWrapper,e)}createPickerComponent(){var t;if(!this.values){const{values:e}=this.params.getEditorParams();this.values=e;const i=this.value.key,s=(t=e.find(r=>r.key===i))!=null?t:{key:i,displayValue:this.value.displayValue};this.value=s}return super.createPickerComponent()}onEnterKeyDown(t){Q.stopPropagationForAgGrid(t),this.isPickerDisplayed?super.onEnterKeyDown(t):(t.preventDefault(),this.showPicker())}},Or=class extends yl{constructor(t,e,i){super(`
            <div class="ag-advanced-filter-builder-item-wrapper" role="presentation">
                <div ref="eItem" class="ag-advanced-filter-builder-item" role="presentation">
                    <div ref="eTreeLines" class="ag-advanced-filter-builder-item-tree-lines" aria-hidden="true"></div>
                    <span ref="eDragHandle" class="ag-drag-handle" aria-hidden="true"></span>
                    <span ref="eValidation" class="ag-advanced-filter-builder-item-button ag-advanced-filter-builder-invalid" aria-hidden="true"></span>
                </div>
                <div ref="eButtons" class="ag-advanced-filter-builder-item-buttons">
                    <span ref="eMoveUpButton" class="ag-advanced-filter-builder-item-button" role="button"></span>
                    <span ref="eMoveDownButton" class="ag-advanced-filter-builder-item-button" role="button"></span>
                    <div ref="eAddButton" role="presentation"></div>
                    <span ref="eRemoveButton" class="ag-advanced-filter-builder-item-button" role="button"></span>
                </div>
            </div>
        `),this.item=t,this.dragFeature=e,this.focusWrapper=i,this.moveUpDisabled=!1,this.moveDownDisabled=!1}postConstruct(){const{filterModel:t,level:e,showMove:i}=this.item,s=t.filterType==="join";if(this.ePillWrapper=this.createManagedBean(s?new iV:new qP),this.ePillWrapper.init({item:this.item,createPill:r=>this.createPill(r)}),this.eDragHandle.insertAdjacentElement("afterend",this.ePillWrapper.getGui()),e===0){const r=document.createElement("div");r.classList.add("ag-advanced-filter-builder-item-tree-line-vertical-bottom"),r.classList.add("ag-advanced-filter-builder-item-tree-line-root"),this.eTreeLines.appendChild(r),Q.setDisplayed(this.eDragHandle,!1),Q.setDisplayed(this.eButtons,!1),Q.setAriaExpanded(this.focusWrapper,!0)}else this.setupTreeLines(e),this.eDragHandle.appendChild(Q.createIconNoSpan("advancedFilterBuilderDrag",this.gos)),this.setupValidation(),this.setupMoveButtons(i),this.setupAddButton(),this.setupRemoveButton(),this.setupDragging(),this.updateAriaExpanded();Q.setAriaLevel(this.focusWrapper,e+1),this.initialiseTabGuard({}),this.createManagedBean(new YP(this.getGui(),this.focusWrapper,this.ePillWrapper)),this.updateAriaLabel(),this.addManagedListener(this.ePillWrapper,ir.EVENT_VALUE_CHANGED,()=>this.dispatchEvent({type:ir.EVENT_VALUE_CHANGED})),this.addManagedListener(this.ePillWrapper,ir.EVENT_VALID_CHANGED,()=>this.updateValidity())}setState(t){const{level:e}=this.item;if(e===0)return;const{showMove:i}=this.item,{disableMoveUp:s,disableMoveDown:r,treeLines:n,showStartTreeLine:o}=t;this.updateTreeLines(n,o),this.updateAriaExpanded(),i&&(this.moveUpDisabled=!!s,this.moveDownDisabled=!!r,this.eMoveUpButton.classList.toggle("ag-advanced-filter-builder-item-button-disabled",s),this.eMoveDownButton.classList.toggle("ag-advanced-filter-builder-item-button-disabled",r),Q.setAriaDisabled(this.eMoveUpButton,!!s),Q.setAriaDisabled(this.eMoveDownButton,!!r),this.moveUpTooltipFeature.refreshToolTip(),this.moveDownTooltipFeature.refreshToolTip())}focusMoveButton(t){(t?this.eMoveUpButton:this.eMoveDownButton).focus()}afterAdd(){this.ePillWrapper.getFocusableElement().focus()}setupTreeLines(t){for(let e=0;e<t;e++){const i=document.createElement("div");this.eTreeLines.appendChild(i)}}updateTreeLines(t,e){const i=t.length-1,{children:s}=this.eTreeLines;for(let n=0;n<i;n++){const o=s.item(n);o&&o.classList.toggle("ag-advanced-filter-builder-item-tree-line-vertical",!t[n])}const r=s.item(i);if(r){r.classList.add("ag-advanced-filter-builder-item-tree-line-horizontal");const n=t[i];r.classList.toggle("ag-advanced-filter-builder-item-tree-line-vertical-top",n),r.classList.toggle("ag-advanced-filter-builder-item-tree-line-vertical",!n)}this.eDragHandle.classList.toggle("ag-advanced-filter-builder-item-tree-line-vertical-bottom",e)}setupValidation(){this.eValidation.appendChild(Q.createIconNoSpan("advancedFilterBuilderInvalid",this.gos)),this.validationTooltipFeature=this.createManagedBean(new hr({getGui:()=>this.eValidation,getLocation:()=>"advancedFilter",getTooltipValue:()=>this.ePillWrapper.getValidationMessage(),getTooltipShowDelayOverride:()=>1e3})),this.updateValidity()}setupAddButton(){var t;const e=tV(s=>this.advancedFilterExpressionService.translate(s),(t=this.gos.get("advancedFilterBuilderParams"))==null?void 0:t.addSelectWidth),i=this.createManagedBean(new eV(e));this.addManagedListener(i,K.EVENT_FIELD_PICKER_VALUE_SELECTED,({value:s})=>this.dispatchEvent({type:ir.EVENT_ADDED,item:this.item,isJoin:s.key==="join"})),this.eAddButton.appendChild(i.getGui()),this.createManagedBean(new hr({getGui:()=>this.eAddButton,getLocation:()=>"advancedFilter",getTooltipValue:()=>this.advancedFilterExpressionService.translate("advancedFilterBuilderAddButtonTooltip")}))}setupRemoveButton(){this.eRemoveButton.appendChild(Q.createIconNoSpan("advancedFilterBuilderRemove",this.gos)),this.addManagedListener(this.eRemoveButton,"click",()=>this.removeItem()),this.addManagedListener(this.eRemoveButton,"keydown",t=>{switch(t.key){case ce.ENTER:t.preventDefault(),Q.stopPropagationForAgGrid(t),this.removeItem();break}}),this.createManagedBean(new hr({getGui:()=>this.eRemoveButton,getLocation:()=>"advancedFilter",getTooltipValue:()=>this.advancedFilterExpressionService.translate("advancedFilterBuilderRemoveButtonTooltip")})),Q.setAriaLabel(this.eRemoveButton,this.advancedFilterExpressionService.translate("advancedFilterBuilderRemoveButtonTooltip")),this.activateTabIndex([this.eRemoveButton])}setupMoveButtons(t){t?(this.eMoveUpButton.appendChild(Q.createIconNoSpan("advancedFilterBuilderMoveUp",this.gos)),this.addManagedListener(this.eMoveUpButton,"click",()=>this.moveItem(!0)),this.addManagedListener(this.eMoveUpButton,"keydown",e=>{switch(e.key){case ce.ENTER:e.preventDefault(),Q.stopPropagationForAgGrid(e),this.moveItem(!0);break}}),this.moveUpTooltipFeature=this.createManagedBean(new hr({getGui:()=>this.eMoveUpButton,getLocation:()=>"advancedFilter",getTooltipValue:()=>this.moveUpDisabled?null:this.advancedFilterExpressionService.translate("advancedFilterBuilderMoveUpButtonTooltip")})),Q.setAriaLabel(this.eMoveUpButton,this.advancedFilterExpressionService.translate("advancedFilterBuilderMoveUpButtonTooltip")),this.eMoveDownButton.appendChild(Q.createIconNoSpan("advancedFilterBuilderMoveDown",this.gos)),this.addManagedListener(this.eMoveDownButton,"click",()=>this.moveItem(!1)),this.addManagedListener(this.eMoveDownButton,"keydown",e=>{switch(e.key){case ce.ENTER:e.preventDefault(),Q.stopPropagationForAgGrid(e),this.moveItem(!1);break}}),this.moveDownTooltipFeature=this.createManagedBean(new hr({getGui:()=>this.eMoveDownButton,getLocation:()=>"advancedFilter",getTooltipValue:()=>this.moveDownDisabled?null:this.advancedFilterExpressionService.translate("advancedFilterBuilderMoveDownButtonTooltip")})),Q.setAriaLabel(this.eMoveDownButton,this.advancedFilterExpressionService.translate("advancedFilterBuilderMoveDownButtonTooltip")),this.activateTabIndex([this.eMoveUpButton,this.eMoveDownButton])):(Q.setDisplayed(this.eMoveUpButton,!1),Q.setDisplayed(this.eMoveDownButton,!1))}updateValidity(){Q.setVisible(this.eValidation,!this.item.valid),this.validationTooltipFeature.refreshToolTip(),this.updateAriaLabel()}createPill(t){var e,i;const{key:s,displayValue:r,cssClass:n,update:o,ariaLabel:a}=t,l=c=>{c!=null&&(o(c),this.dispatchEvent({type:ir.EVENT_VALUE_CHANGED}))};if(t.isSelect){const{getEditorParams:c,pickerAriaLabelKey:u,pickerAriaLabelValue:d}=t,h=this.gos.get("advancedFilterBuilderParams"),p=`${(e=h==null?void 0:h.pillSelectMinWidth)!=null?e:140}px`,f=`${(i=h==null?void 0:h.pillSelectMaxWidth)!=null?i:200}px`,m=this.createBean(new vte({pickerAriaLabelKey:u,pickerAriaLabelValue:d,pickerType:"ag-list",value:{key:s,displayValue:r},valueFormatter:g=>{var y;return g==null?null:(y=g.displayValue)!=null?y:g.key},variableWidth:!0,minPickerWidth:p,maxPickerWidth:f,getEditorParams:c,wrapperClassName:n,ariaLabel:a}));return this.addManagedListener(m,K.EVENT_FIELD_PICKER_VALUE_SELECTED,({value:g})=>l(g==null?void 0:g.key)),m}else{const c=this.createBean(new o0({value:r,cssClass:n,type:this.getInputType(t.baseCellDataType),ariaLabel:a}));return this.addManagedListener(c,K.EVENT_FIELD_VALUE_CHANGED,({value:u})=>l(u)),c}}getInputType(t){switch(t){case"text":case"object":case"boolean":return"text";case"number":return"number";case"date":case"dateString":return"date"}}setupDragging(){const t={type:Ln.AdvancedFilterBuilder,eElement:this.eDragHandle,dragItemName:()=>this.ePillWrapper.getDragName(),getDefaultIconName:()=>st.ICON_NOT_ALLOWED,getDragItem:()=>({}),onDragStarted:()=>this.dragFeature.dispatchEvent({type:SA.EVENT_DRAG_STARTED,item:this.item}),onDragStopped:()=>this.dragFeature.dispatchEvent({type:SA.EVENT_DRAG_ENDED})};this.dragAndDropService.addDragSource(t,!0),this.addDestroyFunc(()=>this.dragAndDropService.removeDragSource(t))}updateAriaLabel(){const t=this.ePillWrapper.getAriaLabel(),e=`${this.item.level+1}`,i=this.ePillWrapper.getValidationMessage();let s;i?s=this.advancedFilterExpressionService.translate("ariaAdvancedFilterBuilderItemValidation",[t,e,i]):s=this.advancedFilterExpressionService.translate("ariaAdvancedFilterBuilderItem",[t,e]),Q.setAriaLabel(this.focusWrapper,s)}updateAriaExpanded(){Q.removeAriaExpanded(this.focusWrapper);const{filterModel:t}=this.item;(t==null?void 0:t.filterType)==="join"&&t.conditions.length&&Q.setAriaExpanded(this.focusWrapper,!0)}removeItem(){this.dispatchEvent({type:ir.EVENT_REMOVED,item:this.item})}moveItem(t){this.dispatchEvent({type:ir.EVENT_MOVED,item:this.item,backwards:t})}};nt([pe("eTreeLines")],Or.prototype,"eTreeLines",2);nt([pe("eDragHandle")],Or.prototype,"eDragHandle",2);nt([pe("eItem")],Or.prototype,"eItem",2);nt([pe("eButtons")],Or.prototype,"eButtons",2);nt([pe("eValidation")],Or.prototype,"eValidation",2);nt([pe("eMoveUpButton")],Or.prototype,"eMoveUpButton",2);nt([pe("eMoveDownButton")],Or.prototype,"eMoveDownButton",2);nt([pe("eAddButton")],Or.prototype,"eAddButton",2);nt([pe("eRemoveButton")],Or.prototype,"eRemoveButton",2);nt([W("beans")],Or.prototype,"beans",2);nt([W("dragAndDropService")],Or.prototype,"dragAndDropService",2);nt([W("advancedFilterExpressionService")],Or.prototype,"advancedFilterExpressionService",2);nt([de],Or.prototype,"postConstruct",1);var a0=class extends Te{constructor(t,e){super(`
            <div class="ag-advanced-filter-builder-item-wrapper" role="presentation">
                <div ref="eItem" class="ag-advanced-filter-builder-item" role="presentation">
                    <div class="ag-advanced-filter-builder-item-tree-lines" aria-hidden="true">
                        <div class="ag-advanced-filter-builder-item-tree-line-vertical-top ag-advanced-filter-builder-item-tree-line-horizontal"></div>
                    </div>
                </div>
            </div>
        `),this.item=t,this.focusWrapper=e}postConstruct(){var t;Q.setAriaLevel(this.focusWrapper,2);const e=tV(s=>this.advancedFilterExpressionService.translate(s),(t=this.gos.get("advancedFilterBuilderParams"))==null?void 0:t.addSelectWidth),i=this.createManagedBean(new eV(e));this.addManagedListener(i,K.EVENT_FIELD_PICKER_VALUE_SELECTED,({value:s})=>{this.dispatchEvent({type:ir.EVENT_ADDED,item:this.item,isJoin:s.key==="join"})}),this.eItem.appendChild(i.getGui()),this.createManagedBean(new hr({getGui:()=>i.getGui(),getLocation:()=>"advancedFilter",getTooltipValue:()=>this.advancedFilterExpressionService.translate("advancedFilterBuilderAddButtonTooltip")})),this.createManagedBean(new YP(this.getGui(),this.focusWrapper,i)),Q.setAriaLabel(this.focusWrapper,this.advancedFilterExpressionService.translate("ariaAdvancedFilterBuilderItem",[this.advancedFilterExpressionService.translate("advancedFilterBuilderAddButtonTooltip"),`${this.item.level+1}`]))}afterAdd(){}};nt([W("beans")],a0.prototype,"beans",2);nt([W("advancedFilterExpressionService")],a0.prototype,"advancedFilterExpressionService",2);nt([pe("eItem")],a0.prototype,"eItem",2);nt([de],a0.prototype,"postConstruct",1);var Bc=class extends Te{constructor(){super(`
            <div role="presentation" class="ag-advanced-filter-builder" tabindex="-1">
                <div role="presentation" class="ag-advanced-filter-builder-list" ref="eList"></div>
                <div role="presentation" class="ag-advanced-filter-builder-button-panel">
                    <button class="ag-button ag-standard-button ag-advanced-filter-builder-apply-button" ref="eApplyFilterButton"></button>
                    <button class="ag-button ag-standard-button ag-advanced-filter-builder-cancel-button" ref="eCancelFilterButton"></button>
                </div>
            </div>`),this.validationMessage=null}postConstruct(){var t;const{showMoveButtons:e}=(t=this.gos.get("advancedFilterBuilderParams"))!=null?t:{};this.showMove=!!e,this.addManagedPropertyListener("advancedFilterBuilderParams",({currentValue:i})=>{this.showMove=!!(i!=null&&i.showMoveButtons),this.refreshList(!1)}),this.filterModel=this.setupFilterModel(),this.setupVirtualList(),this.dragFeature=this.createManagedBean(new SA(this,this.virtualList)),this.setupButtons()}refresh(){let t=this.virtualList.getLastFocusedRow();this.setupFilterModel(),this.validateItems(),this.refreshList(!1),t!=null&&(this.virtualList.getComponentAt(t)||(t=0),this.virtualList.focusRow(t))}getNumItems(){return this.items.length}moveItem(t,e){!e||!t||this.moveItemToIndex(t,e.rowIndex,e.position)}afterGuiAttached(){this.virtualList.focusRow(0)}setupVirtualList(){this.virtualList=this.createManagedBean(new tp({cssIdentifier:"advanced-filter-builder",ariaRole:"tree",listName:this.advancedFilterExpressionService.translate("ariaAdvancedFilterBuilderList")})),this.virtualList.setComponentCreator(this.createItemComponent.bind(this)),this.virtualList.setComponentUpdater(this.updateItemComponent.bind(this)),this.virtualList.setRowHeight(40),this.eList.appendChild(this.virtualList.getGui()),this.virtualList.setModel({getRowCount:()=>this.items.length,getRow:t=>this.items[t],areRowsEqual:(t,e)=>t===e}),this.buildList(),this.virtualList.refresh()}setupButtons(){this.eApplyFilterButton.innerText=this.advancedFilterExpressionService.translate("advancedFilterBuilderApply"),this.activateTabIndex([this.eApplyFilterButton]),this.addManagedListener(this.eApplyFilterButton,"click",()=>{this.advancedFilterService.setModel(this.filterModel),this.filterManager.onFilterChanged({source:"advancedFilter"}),this.close()}),this.validationTooltipFeature=this.createManagedBean(new hr({getGui:()=>this.eApplyFilterButton,getLocation:()=>"advancedFilter",getTooltipValue:()=>this.validationMessage,getTooltipShowDelayOverride:()=>1e3})),this.validate(),this.addManagedListener(this.eApplyFilterButton,"mouseenter",()=>this.addOrRemoveCssClass("ag-advanced-filter-builder-validation",!0)),this.addManagedListener(this.eApplyFilterButton,"mouseleave",()=>this.addOrRemoveCssClass("ag-advanced-filter-builder-validation",!1)),this.eCancelFilterButton.innerText=this.advancedFilterExpressionService.translate("advancedFilterBuilderCancel"),this.activateTabIndex([this.eCancelFilterButton]),this.addManagedListener(this.eCancelFilterButton,"click",()=>this.close())}removeItemFromParent(t){const e=t.parent.conditions.indexOf(t.filterModel);return t.parent.conditions.splice(e,1),e}moveItemToIndex(t,e,i){var s;const r=this.items[e],n=((s=r.filterModel)==null?void 0:s.filterType)==="join"&&i==="bottom",o=n?r.filterModel:r.parent;if(!o||this.isChildOrSelf(o,t.filterModel)||r===t)return;this.removeItemFromParent(t);let a;n?a=0:(a=o.conditions.indexOf(r.filterModel),a===-1?a=o.conditions.length:i==="bottom"&&(a+=1)),o.conditions.splice(a,0,t.filterModel),this.refreshList(!1)}isChildOrSelf(t,e){return t===e||e.filterType==="join"&&e.conditions.some(i=>this.isChildOrSelf(t,i))}setupFilterModel(){const t=this.formatFilterModel(this.advancedFilterService.getModel());return this.stringifiedModel=JSON.stringify(t),t}formatFilterModel(t){return t=t??{filterType:"join",type:"AND",conditions:[]},t.filterType!=="join"&&(t={filterType:"join",type:"AND",conditions:[t]}),t}buildList(){const t=(e,i,s,r)=>{i.push({filterModel:e,level:s,parent:r,valid:!0,showMove:this.showMove}),e.filterType==="join"&&(e.conditions.forEach(n=>t(n,i,s+1,e)),s===0&&i.push({filterModel:null,level:s+1,parent:e,valid:!0}))};this.items=[],t(this.filterModel,this.items,0)}refreshList(t){if(!t){const e=[];this.items.forEach(i=>{i.valid||e.push(i.filterModel)}),this.buildList(),e.length&&this.items.forEach(i=>{i.filterModel&&e.includes(i.filterModel)&&(i.valid=!1)})}this.virtualList.refresh(t),this.validate()}updateItemComponent(t,e){const i=this.items.indexOf(t),s=(a,l)=>{const c=this.items.find(d=>d.filterModel===a),u=c==null?void 0:c.parent;if(u){const{conditions:d}=u;s(u,l),l.push(d[d.length-1]===a)}},r=[],{filterModel:n}=t;n&&(s(n,r),r[0]=!1);const o=(n==null?void 0:n.filterType)==="join"&&!!n.conditions.length;e.setState({disableMoveUp:i===1,disableMoveDown:!this.canMoveDown(t,i),treeLines:r,showStartTreeLine:o})}createItemComponent(t,e){const i=this.createBean(t.filterModel?new Or(t,this.dragFeature,e):new a0(t,e));return i.addManagedListener(i,ir.EVENT_REMOVED,({item:s})=>this.removeItem(s)),i.addManagedListener(i,ir.EVENT_VALUE_CHANGED,()=>this.validate()),i.addManagedListener(i,ir.EVENT_ADDED,({item:s,isJoin:r})=>this.addItem(s,r)),i.addManagedListener(i,ir.EVENT_MOVED,({item:s,backwards:r})=>this.moveItemUpDown(s,r)),i instanceof Or&&this.updateItemComponent(t,i),i}addItem(t,e){var i;const{parent:s,level:r,filterModel:n}=t,o=(n==null?void 0:n.filterType)==="join",a=e?{filterType:"join",type:"AND",conditions:[]}:{},l=o?n:s;let c=o?0:l.conditions.indexOf(n);c>=0?(o||(c+=1),l.conditions.splice(c,0,a)):l.conditions.push(a);let u=this.items.indexOf(t);const d=u>=0;if(d){t.filterModel&&u++;const h=[{filterModel:a,level:o?r+1:r,parent:l,valid:e,showMove:this.showMove}];this.items.splice(u,0,...h)}this.refreshList(d),d&&((i=this.virtualList.getComponentAt(u))==null||i.afterAdd())}removeItem(t){var e;const i=t.parent,{filterModel:s}=t,r=i.conditions.indexOf(s);i.conditions.splice(r,1);const n=((e=t.filterModel)==null?void 0:e.filterType)==="join",o=this.items.indexOf(t),a=!n&&o>=0;a&&this.items.splice(o,1),this.refreshList(a),o>=0&&this.virtualList.focusRow(o)}moveItemUpDown(t,e){const i=this.items.indexOf(t),s=e?i-1:i+1;if(s===0||!e&&!this.canMoveDown(t,i))return;const r=this.items[s],n=this.removeItemFromParent(t),{level:o,filterModel:a,parent:l}=t,{level:c,filterModel:u,parent:d}=r;if(e)if(c===o&&u.filterType==="join")u.conditions.push(a);else if(c<=o){const p=d.conditions.indexOf(u);d.conditions.splice(p,0,a)}else l.conditions[n-1].conditions.push(a);else if(c===o)if(u.filterType==="join")u.conditions.splice(0,0,a);else{const p=d.conditions.indexOf(u);d.conditions.splice(p+1,0,a)}else if(n<l.conditions.length)l.conditions.splice(n+1,0,a);else{const p=this.items.find(m=>m.filterModel===l),f=p.parent.conditions.indexOf(p.filterModel)+1;p.parent.conditions.splice(f,0,a)}this.refreshList(!1);const h=this.items.findIndex(({filterModel:p})=>p===a);if(h>=0){const p=this.virtualList.getComponentAt(h);p instanceof Or&&p.focusMoveButton(e)}}canMoveDown(t,e){return!(t.level===1&&e===this.items.length-2||t.level===1&&t.parent.conditions[t.parent.conditions.length-1]===t.filterModel)}close(){this.advancedFilterService.getCtrl().toggleFilterBuilder("ui")}validate(){let t=!this.items.every(({valid:e})=>e);t?this.validationMessage=this.advancedFilterExpressionService.translate("advancedFilterBuilderValidationIncomplete"):(t=JSON.stringify(this.filterModel)===this.stringifiedModel,t?this.validationMessage=this.advancedFilterExpressionService.translate("advancedFilterBuilderValidationAlreadyApplied"):this.validationMessage=null),Q.setDisabled(this.eApplyFilterButton,t),this.validationTooltipFeature.refreshToolTip()}validateItems(){const t=i=>{i.type=void 0},e=i=>{delete i.filter};this.items.forEach(i=>{if(!i.valid||!i.filterModel||i.filterModel.filterType==="join")return;const{filterModel:s}=i,{colId:r}=s,n=this.advancedFilterExpressionService.getColumnAutocompleteEntries().find(({key:c})=>c===r),o=this.advancedFilterExpressionService.getColumnDetails(s.colId);if(!n||!o.column){i.valid=!1,s.colId=void 0,t(s),e(s);return}const l=this.advancedFilterExpressionService.getDataTypeExpressionOperator(o.baseCellDataType).operators[s.type];if(!l){i.valid=!1,t(s),e(s);return}if(l.numOperands>0&&!Q.exists(s.filter)){i.valid=!1;return}})}};nt([pe("eList")],Bc.prototype,"eList",2);nt([pe("eApplyFilterButton")],Bc.prototype,"eApplyFilterButton",2);nt([pe("eCancelFilterButton")],Bc.prototype,"eCancelFilterButton",2);nt([W("filterManager")],Bc.prototype,"filterManager",2);nt([W("advancedFilterService")],Bc.prototype,"advancedFilterService",2);nt([W("advancedFilterExpressionService")],Bc.prototype,"advancedFilterExpressionService",2);nt([W("beans")],Bc.prototype,"beans",2);nt([de],Bc.prototype,"postConstruct",1);var Cp=class sV extends ye{constructor(e){super(),this.enabled=e}postConstruct(){this.hasAdvancedFilterParent=!!this.gos.get("advancedFilterParent"),this.ctrlsService.whenReady(()=>this.setAdvancedFilterComp()),this.addManagedListener(this.eventService,K.EVENT_ADVANCED_FILTER_ENABLED_CHANGED,({enabled:e})=>this.onEnabledChanged(e)),this.addManagedPropertyListener("advancedFilterParent",()=>this.updateComps()),this.addDestroyFunc(()=>{this.destroyAdvancedFilterComp(),this.destroyBean(this.eBuilderComp),this.eBuilderDialog&&this.eBuilderDialog.isAlive()&&this.destroyBean(this.eBuilderDialog)})}setupHeaderComp(e){this.eHeaderComp=this.createManagedBean(new n0(this.enabled&&!this.hasAdvancedFilterParent)),e.insertAdjacentElement("beforebegin",this.eHeaderComp.getGui())}focusHeaderComp(){return this.eHeaderComp?(this.eHeaderComp.getFocusableElement().focus(),!0):!1}refreshComp(){var e,i;(e=this.eFilterComp)==null||e.refresh(),(i=this.eHeaderComp)==null||i.refresh()}refreshBuilderComp(){var e;(e=this.eBuilderComp)==null||e.refresh()}getHeaderHeight(){var e,i;return(i=(e=this.eHeaderComp)==null?void 0:e.getHeight())!=null?i:0}setInputDisabled(e){var i,s;(i=this.eFilterComp)==null||i.setInputDisabled(e),(s=this.eHeaderComp)==null||s.setInputDisabled(e)}toggleFilterBuilder(e,i){if(i&&this.eBuilderDialog||i===!1&&!this.eBuilderDialog)return;if(this.eBuilderDialog){this.builderDestroySource=e,this.destroyBean(this.eBuilderDialog);return}this.setInputDisabled(!0);const{width:s,height:r,minWidth:n}=this.getBuilderDialogSize();this.eBuilderComp=this.createBean(new Bc),this.eBuilderDialog=this.createBean(new lc({title:this.advancedFilterExpressionService.translate("advancedFilterBuilderTitle"),component:this.eBuilderComp,width:s,height:r,resizable:!0,movable:!0,maximizable:!0,centered:!0,closable:!0,minWidth:n,afterGuiAttached:()=>{var o;return(o=this.eBuilderComp)==null?void 0:o.afterGuiAttached()}})),this.dispatchFilterBuilderVisibleChangedEvent(e,!0),this.eBuilderDialog.addEventListener(lc.EVENT_DESTROYED,()=>{var o;this.destroyBean(this.eBuilderComp),this.eBuilderComp=void 0,this.eBuilderDialog=void 0,this.setInputDisabled(!1),this.dispatchEvent({type:sV.EVENT_BUILDER_CLOSED}),this.dispatchFilterBuilderVisibleChangedEvent((o=this.builderDestroySource)!=null?o:"ui",!1),this.builderDestroySource=void 0})}dispatchFilterBuilderVisibleChangedEvent(e,i){const s={type:K.EVENT_ADVANCED_FILTER_BUILDER_VISIBLE_CHANGED,source:e,visible:i};this.eventService.dispatchEvent(s)}getBuilderDialogSize(){var e,i;const s=(i=(e=this.gos.get("advancedFilterBuilderParams"))==null?void 0:e.minWidth)!=null?i:500,r=this.popupService.getPopupParent(),n=Math.round(Q.getAbsoluteWidth(r))-2,o=Math.round(Q.getAbsoluteHeight(r)*.75)-2,a=Math.min(Math.max(600,s),n),l=Math.min(600,o);return{width:a,height:l,minWidth:s}}onEnabledChanged(e){this.enabled=e,this.updateComps()}updateComps(){this.setAdvancedFilterComp(),this.setHeaderCompEnabled(),this.eventService.dispatchEvent({type:K.EVENT_HEADER_HEIGHT_CHANGED})}setAdvancedFilterComp(){if(this.destroyAdvancedFilterComp(),!this.enabled)return;const e=this.gos.get("advancedFilterParent");if(this.hasAdvancedFilterParent=!!e,e){const i=this.createBean(new Zo),s=i.getGui(),{allThemes:r}=this.environment.getTheme();r.length&&s.classList.add(...r),s.classList.add(this.gos.get("enableRtl")?"ag-rtl":"ag-ltr"),e.appendChild(s),this.eFilterComp=i}}setHeaderCompEnabled(){var e;(e=this.eHeaderComp)==null||e.setEnabled(this.enabled&&!this.hasAdvancedFilterParent)}destroyAdvancedFilterComp(){this.eFilterComp&&(Q.removeFromParent(this.eFilterComp.getGui()),this.destroyBean(this.eFilterComp))}};Cp.EVENT_BUILDER_CLOSED="advancedFilterBuilderClosed";nt([W("focusService")],Cp.prototype,"focusService",2);nt([W("ctrlsService")],Cp.prototype,"ctrlsService",2);nt([W("popupService")],Cp.prototype,"popupService",2);nt([W("advancedFilterExpressionService")],Cp.prototype,"advancedFilterExpressionService",2);nt([de],Cp.prototype,"postConstruct",1);var rV=Cp,Zo=class extends Te{constructor(){super(`
            <div class="ag-advanced-filter" role="presentation" tabindex="-1">
                <ag-autocomplete ref="eAutocomplete"></ag-autocomplete>
                <button class="ag-button ag-standard-button ag-advanced-filter-apply-button" ref="eApplyFilterButton"></button>
                <button class="ag-advanced-filter-builder-button" ref="eBuilderFilterButton">
                    <span ref="eBuilderFilterButtonIcon" aria-hidden="true"></span>
                    <span class="ag-advanced-filter-builder-button-label" ref="eBuilderFilterButtonLabel"></span>
                </button>
            </div>`),this.expressionParser=null,this.isApplyDisabled=!0,this.builderOpen=!1}postConstruct(){this.eAutocomplete.setListGenerator((t,e)=>this.generateAutocompleteListParams(e)).setValidator(()=>this.validateValue()).setForceLastSelection((t,e)=>this.forceLastSelection(t,e)).setInputAriaLabel(this.advancedFilterExpressionService.translate("ariaAdvancedFilterInput")).setListAriaLabel(this.advancedFilterExpressionService.translate("ariaLabelAdvancedFilterAutocomplete")),this.refresh(),this.addManagedListener(this.eAutocomplete,vf.EVENT_VALUE_CHANGED,({value:t})=>this.onValueChanged(t)),this.addManagedListener(this.eAutocomplete,vf.EVENT_VALUE_CONFIRMED,({isValid:t})=>this.onValueConfirmed(t)),this.addManagedListener(this.eAutocomplete,vf.EVENT_OPTION_SELECTED,({position:t,updateEntry:e,autocompleteType:i})=>this.onOptionSelected(t,e,i)),this.addManagedListener(this.eAutocomplete,vf.EVENT_VALID_CHANGED,({isValid:t,validationMessage:e})=>this.onValidChanged(t,e)),this.setupApplyButton(),this.setupBuilderButton()}refresh(){const t=this.advancedFilterService.getExpressionDisplayValue();this.eAutocomplete.setValue({value:t??"",position:t==null?void 0:t.length,updateListOnlyIfOpen:!0})}setInputDisabled(t){this.eAutocomplete.setInputDisabled(t),Q.setDisabled(this.eApplyFilterButton,t||this.isApplyDisabled)}getTooltipParams(){const t=super.getTooltipParams();return t.location="advancedFilter",t}setupApplyButton(){this.eApplyFilterButton.innerText=this.advancedFilterExpressionService.translate("advancedFilterApply"),this.activateTabIndex([this.eApplyFilterButton]),this.addManagedListener(this.eApplyFilterButton,"click",()=>this.onValueConfirmed(this.eAutocomplete.isValid())),Q.setDisabled(this.eApplyFilterButton,this.isApplyDisabled)}setupBuilderButton(){this.eBuilderFilterButtonIcon.appendChild(Q.createIconNoSpan("advancedFilterBuilder",this.gos)),this.eBuilderFilterButtonLabel.innerText=this.advancedFilterExpressionService.translate("advancedFilterBuilder"),this.activateTabIndex([this.eBuilderFilterButton]),this.addManagedListener(this.eBuilderFilterButton,"click",()=>this.openBuilder()),this.addManagedListener(this.advancedFilterService.getCtrl(),rV.EVENT_BUILDER_CLOSED,()=>this.closeBuilder())}onValueChanged(t){var e;t=Q.makeNull(t),this.advancedFilterService.setExpressionDisplayValue(t),this.expressionParser=this.advancedFilterService.createExpressionParser(t);const i=(e=this.expressionParser)==null?void 0:e.parseExpression();i&&i!==t&&this.eAutocomplete.setValue({value:i,silent:!0,restoreFocus:!0})}onValueConfirmed(t){!t||this.isApplyDisabled||(Q.setDisabled(this.eApplyFilterButton,!0),this.advancedFilterService.applyExpression(),this.filterManager.onFilterChanged({source:"advancedFilter"}))}onOptionSelected(t,e,i){const{updatedValue:s,updatedPosition:r,hideAutocomplete:n}=this.updateExpression(t,e,i);this.eAutocomplete.setValue({value:s,position:r,updateListOnlyIfOpen:n,restoreFocus:!0})}validateValue(){var t,e,i;return(t=this.expressionParser)!=null&&t.isValid()?null:(i=(e=this.expressionParser)==null?void 0:e.getValidationMessage())!=null?i:null}onValidChanged(t,e){this.isApplyDisabled=!t||this.advancedFilterService.isCurrentExpressionApplied(),Q.setDisabled(this.eApplyFilterButton,this.isApplyDisabled),this.setTooltip({newTooltipText:e,showDelayOverride:1e3})}generateAutocompleteListParams(t){return this.expressionParser?this.expressionParser.getAutocompleteListParams(t):this.advancedFilterExpressionService.getDefaultAutocompleteListParams("")}updateExpression(t,e,i){var s,r;return this.advancedFilterExpressionService.updateAutocompleteCache(e,i),(r=(s=this.expressionParser)==null?void 0:s.updateExpression(t,e,i))!=null?r:this.advancedFilterService.getDefaultExpression(e)}forceLastSelection({key:t,displayValue:e},i){return!!i.toLocaleLowerCase().match(`^${(e??t).toLocaleLowerCase()}\\s*$`)}openBuilder(){this.builderOpen||(this.builderOpen=!0,Q.setDisabled(this.eBuilderFilterButton,!0),this.advancedFilterService.getCtrl().toggleFilterBuilder("ui"))}closeBuilder(){this.builderOpen&&(this.builderOpen=!1,Q.setDisabled(this.eBuilderFilterButton,!1),this.eBuilderFilterButton.focus())}};nt([pe("eAutocomplete")],Zo.prototype,"eAutocomplete",2);nt([pe("eApplyFilterButton")],Zo.prototype,"eApplyFilterButton",2);nt([pe("eBuilderFilterButton")],Zo.prototype,"eBuilderFilterButton",2);nt([pe("eBuilderFilterButtonIcon")],Zo.prototype,"eBuilderFilterButtonIcon",2);nt([pe("eBuilderFilterButtonLabel")],Zo.prototype,"eBuilderFilterButtonLabel",2);nt([W("advancedFilterService")],Zo.prototype,"advancedFilterService",2);nt([W("advancedFilterExpressionService")],Zo.prototype,"advancedFilterExpressionService",2);nt([W("filterManager")],Zo.prototype,"filterManager",2);nt([de],Zo.prototype,"postConstruct",1);var yte={ariaAdvancedFilterBuilderItem:t=>`${t[0]}. Level ${t[1]}. Press ENTER to edit.`,ariaAdvancedFilterBuilderItemValidation:t=>`${t[0]}. Level ${t[1]}. ${t[2]} Press ENTER to edit.`,ariaAdvancedFilterBuilderList:"Advanced Filter Builder List",ariaAdvancedFilterBuilderFilterItem:"Filter Condition",ariaAdvancedFilterBuilderGroupItem:"Filter Group",ariaAdvancedFilterBuilderColumn:"Column",ariaAdvancedFilterBuilderOption:"Option",ariaAdvancedFilterBuilderValue:"Value",ariaAdvancedFilterBuilderJoinOperator:"Join Operator",ariaAdvancedFilterInput:"Advanced Filter Input",ariaLabelAdvancedFilterAutocomplete:"Advanced Filter Autocomplete",advancedFilterContains:"contains",advancedFilterNotContains:"does not contain",advancedFilterTextEquals:"equals",advancedFilterTextNotEqual:"does not equal",advancedFilterStartsWith:"begins with",advancedFilterEndsWith:"ends with",advancedFilterBlank:"is blank",advancedFilterNotBlank:"is not blank",advancedFilterEquals:"=",advancedFilterNotEqual:"!=",advancedFilterGreaterThan:">",advancedFilterGreaterThanOrEqual:">=",advancedFilterLessThan:"<",advancedFilterLessThanOrEqual:"<=",advancedFilterTrue:"is true",advancedFilterFalse:"is false",advancedFilterAnd:"AND",advancedFilterOr:"OR",advancedFilterApply:"Apply",advancedFilterBuilder:"Builder",advancedFilterValidationMissingColumn:"Column is missing",advancedFilterValidationMissingOption:"Option is missing",advancedFilterValidationMissingValue:"Value is missing",advancedFilterValidationInvalidColumn:"Column not found",advancedFilterValidationInvalidOption:"Option not found",advancedFilterValidationMissingQuote:"Value is missing an end quote",advancedFilterValidationNotANumber:"Value is not a number",advancedFilterValidationInvalidDate:"Value is not a valid date",advancedFilterValidationMissingCondition:"Condition is missing",advancedFilterValidationJoinOperatorMismatch:"Join operators within a condition must be the same",advancedFilterValidationInvalidJoinOperator:"Join operator not found",advancedFilterValidationMissingEndBracket:"Missing end bracket",advancedFilterValidationExtraEndBracket:"Too many end brackets",advancedFilterValidationMessage:t=>`Expression has an error. ${t[0]} - ${t[1]}.`,advancedFilterValidationMessageAtEnd:t=>`Expression has an error. ${t[0]} at end of expression.`,advancedFilterBuilderTitle:"Advanced Filter",advancedFilterBuilderApply:"Apply",advancedFilterBuilderCancel:"Cancel",advancedFilterBuilderAddButtonTooltip:"Add Filter or Group",advancedFilterBuilderRemoveButtonTooltip:"Remove",advancedFilterBuilderMoveUpButtonTooltip:"Move Up",advancedFilterBuilderMoveDownButtonTooltip:"Move Down",advancedFilterBuilderAddJoin:"Add Group",advancedFilterBuilderAddCondition:"Add Filter",advancedFilterBuilderSelectColumn:"Select a column",advancedFilterBuilderSelectOption:"Select an option",advancedFilterBuilderEnterValue:"Enter a value...",advancedFilterBuilderValidationAlreadyApplied:"Current filter already applied.",advancedFilterBuilderValidationIncomplete:"Not all conditions are complete.",advancedFilterBuilderValidationSelectColumn:"Must select a column.",advancedFilterBuilderValidationSelectOption:"Must select an option.",advancedFilterBuilderValidationEnterValue:"Must enter a value."};function xA(t,e,i){if(!t)return"";const s=i-e;return s?t.slice(0,t.length-s):t}function Su(t,e,i,s,r,n,o){const a=i+(!t.length||o?0:1);let l=0;return r&&(t[a]===" "?l=1:(s+=" ",n&&(s+='"'))),{updatedValue:t.slice(0,e)+s+t.slice(a),updatedPosition:e+s.length+l}}function Cte(t,e,i){let s=e;for(;s<i&&t[s]===" ";)s++;return s}function EA(t,e,i,s){let r=e,n=!1;for(;r<t.length;){const o=t[r];if(o==="("){s&&t[r-1]===" "?n=!0:r=r-1;break}else if(o===" "||i&&o===")"){r=r-1;break}r++}return{endPosition:r,isEmpty:n}}function XP(t,e,i,s){i!==e&&(t.expression=Su(t.expression,s-e.length+1,s,i).updatedValue)}function bte(t){return t.replace(/(['"])/,"\\$1")}var wte=class{constructor(t,e){this.params=t,this.startPosition=e,this.type="column",this.valid=!0,this.hasStartChar=!1,this.hasEndChar=!1,this.colName=""}parse(t,e){if(t===ql.COL_START_CHAR&&!this.colName)this.hasStartChar=!0;else if(t===ql.COL_END_CHAR&&this.hasStartChar){if(this.parseColumn(!1,e))return this.hasEndChar=!0,!1;this.colName+=t}else this.colName+=t}getDisplayValue(){return(this.hasStartChar?ql.COL_START_CHAR:"")+this.colName+(this.hasEndChar?ql.COL_END_CHAR:"")}getColId(){return this.colId}complete(t){this.parseColumn(!0,t)}getValidationError(){var t;return this.valid?null:{message:this.params.advancedFilterExpressionService.translate("advancedFilterValidationInvalidColumn"),startPosition:this.startPosition,endPosition:(t=this.endPosition)!=null?t:this.params.expression.length-1}}parseColumn(t,e){var i;this.endPosition=e;const s=this.params.advancedFilterExpressionService.getColId(this.colName);return s&&this.hasStartChar&&(this.colId=s.colId,XP(this.params,this.colName,s.columnName,e-1),this.colName=s.columnName,this.column=this.params.columnModel.getPrimaryColumn(this.colId),this.column)?(this.baseCellDataType=(i=this.params.dataTypeService.getBaseDataType(this.column))!=null?i:"text",!0):(t&&(this.valid=!1),this.baseCellDataType="text",!1)}},Ste=class{constructor(t,e,i){this.params=t,this.startPosition=e,this.baseCellDataType=i,this.type="operator",this.valid=!0,this.expectedNumOperands=0,this.operator=""}parse(t,e){if(t===" "||t===")"){if(this.parseOperator(!1,e-1))return!0;this.operator+=t}else this.operator+=t}complete(t){this.parseOperator(!0,t)}getValidationError(){var t;return this.valid?null:{message:this.params.advancedFilterExpressionService.translate("advancedFilterValidationInvalidOption"),startPosition:this.startPosition,endPosition:(t=this.endPosition)!=null?t:this.params.expression.length-1}}getDisplayValue(){return this.operator}getOperatorKey(){return this.parsedOperator}parseOperator(t,e){const i=this.params.advancedFilterExpressionService.getDataTypeExpressionOperator(this.baseCellDataType),s=i.findOperator(this.operator);if(this.endPosition=e,s){this.parsedOperator=s;const n=i.operators[s];this.expectedNumOperands=n.numOperands;const o=n.displayValue;return XP(this.params,this.operator,o,e),this.operator=o,!0}return(t||!(s===null))&&(this.valid=!1),!1}},xte=class{constructor(t,e,i,s){this.params=t,this.startPosition=e,this.baseCellDataType=i,this.column=s,this.type="operand",this.valid=!0,this.operand="",this.validationMessage=null}parse(t,e){if(t===" ")if(this.quotes)this.operand+=t;else return this.parseOperand(!1,e),!0;else if(t===")"){if(this.baseCellDataType==="number"||!this.quotes)return this.parseOperand(!1,e-1),!0;this.operand+=t}else if(!this.operand&&!this.quotes&&(t==="'"||t==='"'))this.quotes=t;else{if(this.quotes&&t===this.quotes)return this.parseOperand(!1,e),!1;this.operand+=t}}complete(t){this.parseOperand(!0,t)}getValidationError(){var t;return this.validationMessage?{message:this.validationMessage,startPosition:this.startPosition,endPosition:(t=this.endPosition)!=null?t:this.params.expression.length-1}:null}getRawValue(){return this.operand}getModelValue(){return this.modelValue}parseOperand(t,e){const{advancedFilterExpressionService:i}=this.params;if(this.endPosition=e,this.modelValue=this.operand,t&&this.quotes)this.valid=!1,this.validationMessage=i.translate("advancedFilterValidationMissingQuote");else if(this.modelValue==="")this.valid=!1,this.validationMessage=i.translate("advancedFilterValidationMissingValue");else{const s=i.getOperandModelValue(this.operand,this.baseCellDataType,this.column);switch(s!=null&&(this.modelValue=s),this.baseCellDataType){case"number":(this.quotes||isNaN(this.modelValue))&&(this.valid=!1,this.validationMessage=i.translate("advancedFilterValidationNotANumber"));break;case"date":case"dateString":s==null&&(this.valid=!1,this.validationMessage=i.translate("advancedFilterValidationInvalidDate"));break}}}},ql=class{constructor(t,e){this.params=t,this.startPosition=e,this.isAwaiting=!0}parseExpression(){var t,e;let i=this.startPosition;const{expression:s}=this.params;for(;i<s.length;){const r=s[i];if(!(r===" "&&this.isAwaiting)){if(this.isAwaiting=!1,!this.parser){let o;this.columnParser?this.operatorParser?(this.operandParser=new xte(this.params,i,this.columnParser.baseCellDataType,this.columnParser.column),o=this.operandParser):(this.operatorParser=new Ste(this.params,i,this.columnParser.baseCellDataType),o=this.operatorParser):(this.columnParser=new wte(this.params,i),o=this.columnParser),this.parser=o}const n=this.parser.parse(r,i);if(n!=null){if(this.isComplete())return this.returnEndPosition(n?i-1:i,!0);this.parser=void 0,this.isAwaiting=!0}}i++}return(e=(t=this.parser)==null?void 0:t.complete)==null||e.call(t,i-1),this.returnEndPosition(i)}isValid(){return this.isComplete()&&this.columnParser.valid&&this.operatorParser.valid&&(!this.operandParser||this.operandParser.valid)}getValidationError(){var t,e,i,s,r;const n=(r=(i=(t=this.columnParser)==null?void 0:t.getValidationError())!=null?i:(e=this.operatorParser)==null?void 0:e.getValidationError())!=null?r:(s=this.operandParser)==null?void 0:s.getValidationError();if(n)return n;const o=this.params.expression.length;let a;return this.columnParser?this.operatorParser?this.operatorParser.expectedNumOperands&&!this.operandParser&&(a="advancedFilterValidationMissingValue"):a="advancedFilterValidationMissingOption":a="advancedFilterValidationMissingColumn",a?{message:this.params.advancedFilterExpressionService.translate(a),startPosition:o,endPosition:o}:null}getFunctionString(t){return this.getFunctionCommon(t,(e,i,s,r)=>{const n=bte(s),o=e==null?"":`, params.operands[${e}]`;return`params.operators[${i}].evaluator(expressionProxy.getValue('${n}', node), node, params.evaluatorParams[${r}]${o})`})}getFunctionParsed(t){return this.getFunctionCommon(t,(e,i,s,r)=>(n,o,a)=>a.operators[i].evaluator(n.getValue(s,o),o,a.evaluatorParams[r],e==null?void 0:a.operands[e]))}getAutocompleteListParams(t){if(this.isColumnPosition(t))return this.getColumnAutocompleteListParams(t);if(this.isOperatorPosition(t))return this.getOperatorAutocompleteListParams(t);if(!this.isBeyondEndPosition(t))return{enabled:!1}}updateExpression(t,e,i){var s,r,n,o,a;const{expression:l}=this.params;if(this.isColumnPosition(t))return Su(this.params.expression,this.startPosition,(s=this.columnParser)!=null&&s.getColId()?this.columnParser.endPosition:EA(l,t).endPosition,this.params.advancedFilterExpressionService.getColumnValue(e),!0);if(this.isOperatorPosition(t)){const c=this.getBaseCellDataTypeFromOperatorAutocompleteType(i),u=this.hasOperand(c,e.key),d=u&&this.doesOperandNeedQuotes(c);let h;if(((r=this.operatorParser)==null?void 0:r.startPosition)!=null&&t<this.operatorParser.startPosition)h=Su(l,t,t,(n=e.displayValue)!=null?n:e.key,u,d);else{let p,f=!1;if((o=this.operatorParser)!=null&&o.getOperatorKey())p=this.operatorParser.endPosition;else{const{endPosition:m,isEmpty:g}=EA(l,t,!0,!0);p=m,f=g}h=Su(l,Cte(l,this.columnParser.endPosition+1,p),p,(a=e.displayValue)!=null?a:e.key,u,d,f)}return KP($P({},h),{hideAutocomplete:!u})}return null}getModel(){const t=this.columnParser.getColId(),e={filterType:this.columnParser.baseCellDataType,colId:t,type:this.operatorParser.getOperatorKey()};return this.operatorParser.expectedNumOperands&&(e.filter=this.operandParser.getModelValue()),e}getFunctionCommon(t,e){var i,s;const r=this.columnParser.getColId(),n=(i=this.operatorParser)==null?void 0:i.getOperatorKey(),{operators:o,evaluatorParams:a,operands:l}=t,c=this.params.advancedFilterExpressionService.getExpressionOperator(this.columnParser.baseCellDataType,n),u=this.addToListAndGetIndex(o,c),d=this.params.advancedFilterExpressionService.getExpressionEvaluatorParams(r),h=this.addToListAndGetIndex(a,d),p=((s=this.operatorParser)==null?void 0:s.expectedNumOperands)===0?void 0:this.addToListAndGetIndex(l,this.getOperandValue());return e(p,u,r,h)}getOperandValue(){let t=this.operandParser.getRawValue();const{baseCellDataType:e,column:i}=this.columnParser;switch(e){case"number":t=Number(t);break;case"date":case"dateString":t=this.params.valueService.parseValue(i,null,t,void 0);break}return e==="dateString"?this.params.dataTypeService.getDateParserFunction(i)(t):t}isComplete(){return!!(this.operatorParser&&(!this.operatorParser.expectedNumOperands||this.operatorParser.expectedNumOperands&&this.operandParser))}isColumnPosition(t){return!this.columnParser||this.columnParser.endPosition==null||t<=this.columnParser.endPosition+1}isOperatorPosition(t){return!this.operatorParser||this.operatorParser.endPosition==null||t<=this.operatorParser.endPosition+1}isBeyondEndPosition(t){return this.isComplete()&&this.endPosition!=null&&t>this.endPosition+1&&this.endPosition+1<this.params.expression.length}returnEndPosition(t,e){return this.endPosition=e?t:t-1,t}getColumnAutocompleteListParams(t){return this.params.advancedFilterExpressionService.generateAutocompleteListParams(this.params.advancedFilterExpressionService.getColumnAutocompleteEntries(),"column",this.getColumnSearchString(t))}getColumnSearchString(t){var e,i,s,r,n;const o=(i=(e=this.columnParser)==null?void 0:e.getDisplayValue())!=null?i:"",a=xA(o,t,((s=this.columnParser)==null?void 0:s.endPosition)==null?this.params.expression.length:this.columnParser.endPosition+1),l=((r=this.columnParser)==null?void 0:r.hasStartChar)&&a.length>0,c=((n=this.columnParser)==null?void 0:n.hasEndChar)&&a.length===o.length+2;return l?a.slice(1,c?-1:void 0):a}getOperatorAutocompleteListParams(t){var e,i,s,r,n;const o=(e=this.columnParser)==null?void 0:e.column;if(!o)return{enabled:!1};const a=this.columnParser.baseCellDataType,l=((i=this.operatorParser)==null?void 0:i.startPosition)!=null&&t<this.operatorParser.startPosition?"":xA((r=(s=this.operatorParser)==null?void 0:s.getDisplayValue())!=null?r:"",t,((n=this.operatorParser)==null?void 0:n.endPosition)==null?this.params.expression.length:this.operatorParser.endPosition+1);return this.params.advancedFilterExpressionService.generateAutocompleteListParams(this.params.advancedFilterExpressionService.getOperatorAutocompleteEntries(o,a),`operator-${a}`,l)}getBaseCellDataTypeFromOperatorAutocompleteType(t){return t==null?void 0:t.replace("operator-","")}hasOperand(t,e){var i,s;return!t||!e||((s=(i=this.params.advancedFilterExpressionService.getExpressionOperator(t,e))==null?void 0:i.numOperands)!=null?s:0)>0}doesOperandNeedQuotes(t){return t!=="number"}addToListAndGetIndex(t,e){const i=t.length;return t.push(e),i}};ql.COL_START_CHAR="[";ql.COL_END_CHAR="]";function CE(t,e,i){let s=!1;const r=t.toLocaleLowerCase(),n=r+" ",o=Object.entries(e).find(([a,l])=>{const c=i(l).toLocaleLowerCase();return c.startsWith(n)&&(s=!0),c===r});return o?o[0]:s?null:void 0}function ZP(t,e){return(e??Object.keys(t)).map(s=>({key:s,displayValue:t[s].displayValue}))}var SL=class{constructor(t){this.params=t,this.initOperators()}getEntries(t){return ZP(this.operators,t)}findOperator(t){return CE(t,this.operators,({displayValue:e})=>e)}initOperators(){const{translate:t}=this.params;this.operators={contains:{displayValue:t("advancedFilterContains"),evaluator:(e,i,s,r)=>this.evaluateExpression(e,i,s,r,!1,(n,o)=>n.includes(o)),numOperands:1},notContains:{displayValue:t("advancedFilterNotContains"),evaluator:(e,i,s,r)=>this.evaluateExpression(e,i,s,r,!0,(n,o)=>!n.includes(o)),numOperands:1},equals:{displayValue:t("advancedFilterTextEquals"),evaluator:(e,i,s,r)=>this.evaluateExpression(e,i,s,r,!1,(n,o)=>n===o),numOperands:1},notEqual:{displayValue:t("advancedFilterTextNotEqual"),evaluator:(e,i,s,r)=>this.evaluateExpression(e,i,s,r,!0,(n,o)=>n!=o),numOperands:1},startsWith:{displayValue:t("advancedFilterStartsWith"),evaluator:(e,i,s,r)=>this.evaluateExpression(e,i,s,r,!1,(n,o)=>n.startsWith(o)),numOperands:1},endsWith:{displayValue:t("advancedFilterEndsWith"),evaluator:(e,i,s,r)=>this.evaluateExpression(e,i,s,r,!1,(n,o)=>n.endsWith(o)),numOperands:1},blank:{displayValue:t("advancedFilterBlank"),evaluator:e=>e==null||typeof e=="string"&&e.trim().length===0,numOperands:0},notBlank:{displayValue:t("advancedFilterNotBlank"),evaluator:e=>e!=null&&(typeof e!="string"||e.trim().length>0),numOperands:0}}}evaluateExpression(t,e,i,s,r,n){return t==null?r:i.caseSensitive?n(i.valueConverter(t,e),s):n(i.valueConverter(t,e).toLocaleLowerCase(),s.toLocaleLowerCase())}},hT=class{constructor(t){this.params=t,this.initOperators()}getEntries(t){return ZP(this.operators,t)}findOperator(t){return CE(t,this.operators,({displayValue:e})=>e)}initOperators(){const{translate:t,equals:e}=this.params;this.operators={equals:{displayValue:t("advancedFilterEquals"),evaluator:(i,s,r,n)=>this.evaluateSingleOperandExpression(i,s,r,n,!!r.includeBlanksInEquals,e),numOperands:1},notEqual:{displayValue:t("advancedFilterNotEqual"),evaluator:(i,s,r,n)=>this.evaluateSingleOperandExpression(i,s,r,n,!!r.includeBlanksInEquals,(o,a)=>!e(o,a)),numOperands:1},greaterThan:{displayValue:t("advancedFilterGreaterThan"),evaluator:(i,s,r,n)=>this.evaluateSingleOperandExpression(i,s,r,n,!!r.includeBlanksInGreaterThan,(o,a)=>o>a),numOperands:1},greaterThanOrEqual:{displayValue:t("advancedFilterGreaterThanOrEqual"),evaluator:(i,s,r,n)=>this.evaluateSingleOperandExpression(i,s,r,n,!!r.includeBlanksInGreaterThan,(o,a)=>o>=a),numOperands:1},lessThan:{displayValue:t("advancedFilterLessThan"),evaluator:(i,s,r,n)=>this.evaluateSingleOperandExpression(i,s,r,n,!!r.includeBlanksInLessThan,(o,a)=>o<a),numOperands:1},lessThanOrEqual:{displayValue:t("advancedFilterLessThanOrEqual"),evaluator:(i,s,r,n)=>this.evaluateSingleOperandExpression(i,s,r,n,!!r.includeBlanksInLessThan,(o,a)=>o<=a),numOperands:1},blank:{displayValue:t("advancedFilterBlank"),evaluator:i=>i==null,numOperands:0},notBlank:{displayValue:t("advancedFilterNotBlank"),evaluator:i=>i!=null,numOperands:0}}}evaluateSingleOperandExpression(t,e,i,s,r,n){return t==null?r:n(i.valueConverter(t,e),s)}},Ete=class{constructor(t){this.params=t,this.initOperators()}getEntries(t){return ZP(this.operators,t)}findOperator(t){return CE(t,this.operators,({displayValue:e})=>e)}initOperators(){const{translate:t}=this.params;this.operators={true:{displayValue:t("advancedFilterTrue"),evaluator:e=>!!e,numOperands:0},false:{displayValue:t("advancedFilterFalse"),evaluator:e=>e===!1,numOperands:0},blank:{displayValue:t("advancedFilterBlank"),evaluator:e=>e==null,numOperands:0},notBlank:{displayValue:t("advancedFilterNotBlank"),evaluator:e=>e!=null,numOperands:0}}}},kh=class extends ye{constructor(){super(...arguments),this.columnNameToIdMap={},this.columnAutocompleteEntries=null,this.expressionEvaluatorParams={}}postConstruct(){this.expressionJoinOperators=this.generateExpressionJoinOperators(),this.expressionOperators=this.generateExpressionOperators()}parseJoinOperator(t){var e;const{type:i}=t;return(e=this.expressionJoinOperators[i])!=null?e:i}getColumnDisplayValue(t){const{colId:e}=t,s=this.getColumnAutocompleteEntries().find(({key:n})=>n===e);let r;return s?(r=s.displayValue,this.columnNameToIdMap[r.toLocaleUpperCase()]={colId:e,columnName:r}):r=e,r}getOperatorDisplayValue(t){var e,i;return(i=(e=this.getExpressionOperator(t.filterType,t.type))==null?void 0:e.displayValue)!=null?i:t.type}getOperandModelValue(t,e,i){var s;switch(e){case"number":return Q.exists(t)?Number(t):null;case"date":return Q.serialiseDate(this.valueService.parseValue(i,null,t,void 0),!1);case"dateString":const r=this.valueService.parseValue(i,null,t,void 0);return Q.serialiseDate((s=this.dataTypeService.getDateParserFunction(i)(r))!=null?s:null,!1)}return t}getOperandDisplayValue(t,e){var i,s;const{colId:r,filter:n}=t,o=this.columnModel.getPrimaryColumn(r);let a="";if(n!=null){let l;switch(t.filterType){case"number":l=(i=Q.toStringOrNull(n))!=null?i:"";break;case"date":const c=Q.parseDateTimeFromString(n);l=o?this.valueService.formatValue(o,null,c):null;break;case"dateString":const u=Q.parseDateTimeFromString(n),d=o?this.dataTypeService.getDateFormatterFunction(o)(u??void 0):null;l=o?this.valueService.formatValue(o,null,d):null;break}t.filterType!=="number"&&(l=(s=l??Q.toStringOrNull(n))!=null?s:"",e||(l=`"${l}"`)),a=e?l:` ${l}`}return a}parseColumnFilterModel(t){var e,i;const s=(e=this.getColumnDisplayValue(t))!=null?e:"",r=(i=this.getOperatorDisplayValue(t))!=null?i:"",n=this.getOperandDisplayValue(t);return`[${s}] ${r}${n}`}updateAutocompleteCache(t,e){if(e==="column"){const{key:i,displayValue:s}=t;this.columnNameToIdMap[t.displayValue.toLocaleUpperCase()]={colId:i,columnName:s}}}translate(t,e){let i=yte[t];return typeof i=="function"&&(i=i(e)),this.localeService.getLocaleTextFunc()(t,i,e)}generateAutocompleteListParams(t,e,i){return{enabled:!0,type:e,searchString:i,entries:t}}getColumnAutocompleteEntries(){var t;if(this.columnAutocompleteEntries)return this.columnAutocompleteEntries;const e=(t=this.columnModel.getAllPrimaryColumns())!=null?t:[],i=[],s=this.gos.get("includeHiddenColumnsInAdvancedFilter");return e.forEach(r=>{r.getColDef().filter&&(s||r.isVisible()||r.isRowGroupActive())&&i.push({key:r.getColId(),displayValue:this.columnModel.getDisplayNameForColumn(r,"advancedFilter")})}),i.sort((r,n)=>{var o,a;const l=(o=r.displayValue)!=null?o:"",c=(a=n.displayValue)!=null?a:"";return l<c?-1:c>l?1:0}),i}getOperatorAutocompleteEntries(t,e){const i=this.getActiveOperators(t);return this.getDataTypeExpressionOperator(e).getEntries(i)}getJoinOperatorAutocompleteEntries(){return Object.entries(this.expressionJoinOperators).map(([t,e])=>({key:t,displayValue:e}))}getDefaultAutocompleteListParams(t){return this.generateAutocompleteListParams(this.getColumnAutocompleteEntries(),"column",t)}getDataTypeExpressionOperator(t){return this.expressionOperators[t]}getExpressionOperator(t,e){var i,s;return(s=(i=this.getDataTypeExpressionOperator(t))==null?void 0:i.operators)==null?void 0:s[e]}getExpressionJoinOperators(){return this.expressionJoinOperators}getColId(t){const e=t.toLocaleUpperCase(),i=this.columnNameToIdMap[e];if(i)return i;const r=this.getColumnAutocompleteEntries().find(({displayValue:n})=>n.toLocaleUpperCase()===e);if(r){const{key:n,displayValue:o}=r,a={colId:n,columnName:o};return this.columnNameToIdMap[e]=a,a}return null}getExpressionEvaluatorParams(t){let e=this.expressionEvaluatorParams[t];if(e)return e;const i=this.columnModel.getPrimaryColumn(t);if(!i)return{valueConverter:n=>n};switch(this.dataTypeService.getBaseDataType(i)){case"dateString":e={valueConverter:this.dataTypeService.getDateParserFunction(i)};break;case"object":i.getColDef().filterValueGetter?e={valueConverter:n=>n}:e={valueConverter:(n,o)=>{var a;return(a=this.valueService.formatValue(i,o,n))!=null?a:typeof n.toString=="function"?n.toString():""}};break;case"text":case void 0:e={valueConverter:n=>Q.toStringOrNull(n)};break;default:e={valueConverter:n=>n};break}const{filterParams:r}=i.getColDef();return r&&["caseSensitive","includeBlanksInEquals","includeBlanksInLessThan","includeBlanksInGreaterThan"].forEach(n=>{const o=r[n];o&&(e[n]=o)}),this.expressionEvaluatorParams[t]=e,e}getColumnDetails(t){var e,i;const s=(e=this.columnModel.getPrimaryColumn(t))!=null?e:void 0,r=(i=s?this.dataTypeService.getBaseDataType(s):void 0)!=null?i:"text";return{column:s,baseCellDataType:r}}generateExpressionOperators(){const t=(e,i)=>this.translate(e,i);return{text:new SL({translate:t}),boolean:new Ete({translate:t}),object:new SL({translate:t}),number:new hT({translate:t,equals:(e,i)=>e===i}),date:new hT({translate:t,equals:(e,i)=>e.getTime()===i.getTime()}),dateString:new hT({translate:t,equals:(e,i)=>e.getTime()===i.getTime()})}}getColumnValue({displayValue:t}){return`${ql.COL_START_CHAR}${t}${ql.COL_END_CHAR}`}generateExpressionJoinOperators(){return{AND:this.translate("advancedFilterAnd"),OR:this.translate("advancedFilterOr")}}getActiveOperators(t){var e;const i=(e=t.getColDef().filterParams)==null?void 0:e.filterOptions;return i&&i.every(r=>typeof r=="string")?i:void 0}resetColumnCaches(){this.columnAutocompleteEntries=null,this.columnNameToIdMap={},this.expressionEvaluatorParams={}}};nt([W("valueService")],kh.prototype,"valueService",2);nt([W("columnModel")],kh.prototype,"columnModel",2);nt([W("dataTypeService")],kh.prototype,"dataTypeService",2);nt([de],kh.prototype,"postConstruct",1);kh=nt([Me("advancedFilterExpressionService")],kh);var Tte=class{constructor(t){this.params=t,this.operators=[],this.operatorStartPositions=[],this.operatorEndPositions=[],this.activeOperator=0,this.validationError=null}parseExpression(t){this.operators.push(""),this.operatorStartPositions.push(t),this.operatorEndPositions.push(void 0);const{expression:e}=this.params;for(;t<e.length;){const i=e[t];if(i===" "){if(this.parseOperator(t-1))return this.activeOperator++,t-1;this.operators[this.activeOperator]+=i}else this.operators[this.activeOperator]+=i;t++}return this.parseOperator(t-1),t}isValid(){return!this.validationError&&(!this.operators.length||!!this.parsedOperator)}getValidationError(){return this.validationError}getFunction(){return this.parsedOperator==="OR"?"||":"&&"}getModel(){return this.parsedOperator==="OR"?"OR":"AND"}getAutocompleteListParams(t,e){let i;if(e==null)i="";else{const r=this.operators[e],n=this.operatorEndPositions[e];i=xA(r,t,n==null?this.params.expression.length:n+1)}let s=this.params.advancedFilterExpressionService.getJoinOperatorAutocompleteEntries();return(e||e==null&&this.activeOperator)&&(s=s.filter(({key:r})=>r===this.parsedOperator)),this.params.advancedFilterExpressionService.generateAutocompleteListParams(s,"join",i)}updateExpression(t,e,i){var s,r;let{expression:n}=this.params;const o=(s=e.displayValue)!=null?s:e.key;if(i===0)for(let c=this.operatorEndPositions.length-1;c>0;c--){const u=this.operatorEndPositions[c];u!=null&&(n=Su(n,this.operatorStartPositions[c],u,o).updatedValue)}const a=this.operatorStartPositions.length>i?this.operatorStartPositions[i]:t,l=(r=this.operatorEndPositions.length>i?this.operatorEndPositions[i]:void 0)!=null?r:EA(n,t,!0).endPosition;return Su(n,a,l,o,!0)}getNumOperators(){return this.operators.length}getLastOperatorEndPosition(){return this.operatorEndPositions[this.operatorEndPositions.length-1]}parseOperator(t){const e=this.operators.length>this.activeOperator?this.operators[this.activeOperator]:"",i=this.params.advancedFilterExpressionService.getExpressionJoinOperators(),s=CE(e,i,r=>r);if(s){this.operatorEndPositions[this.activeOperator]=t;const r=i[s];if(this.activeOperator){if(s!==this.parsedOperator)return this.validationError||(this.validationError={message:this.params.advancedFilterExpressionService.translate("advancedFilterValidationJoinOperatorMismatch"),startPosition:t-e.length+1,endPosition:t}),!1}else this.parsedOperator=s;return e!==r&&(XP(this.params,e,r,t),this.operators[this.activeOperator]=r),!0}else return s===null?!1:(this.validationError||(this.validationError={message:this.params.advancedFilterExpressionService.translate("advancedFilterValidationInvalidJoinOperator"),startPosition:t-e.length+1,endPosition:t}),!0)}},_te=class nV{constructor(e,i){this.params=e,this.startPosition=i,this.expectingExpression=!0,this.expectingOperator=!1,this.expressionParsers=[],this.operatorParser=new Tte(this.params),this.missingEndBracket=!1,this.extraEndBracket=!1}parseExpression(){let e=this.startPosition;const{expression:i}=this.params;for(;e<i.length;){const s=i[e];if(s==="("&&!this.expectingOperator){const r=new nV(this.params,e+1);e=r.parseExpression(),this.expressionParsers.push(r),this.expectingExpression=!1,this.expectingOperator=!0}else{if(s===")")return this.endPosition=e-1,this.startPosition===0&&(this.extraEndBracket=!0),e;if(s!==" ")if(this.expectingExpression){const r=new ql(this.params,e);e=r.parseExpression(),this.expressionParsers.push(r),this.expectingExpression=!1,this.expectingOperator=!0}else this.expectingOperator&&(e=this.operatorParser.parseExpression(e),this.expectingOperator=!1,this.expectingExpression=!0)}e++}return this.startPosition>0&&(this.missingEndBracket=!0),e}isValid(){return!this.missingEndBracket&&!this.extraEndBracket&&this.expressionParsers.length===this.operatorParser.getNumOperators()+1&&this.operatorParser.isValid()&&this.expressionParsers.every(e=>e.isValid())}getValidationError(){const e=this.operatorParser.getValidationError();for(let s=0;s<this.expressionParsers.length;s++){const r=this.expressionParsers[s].getValidationError();if(r)return e&&e.startPosition<r.startPosition?e:r}if(e)return e;if(this.extraEndBracket)return{message:this.params.advancedFilterExpressionService.translate("advancedFilterValidationExtraEndBracket"),startPosition:this.endPosition+1,endPosition:this.endPosition+1};let i;return this.expressionParsers.length===this.operatorParser.getNumOperators()?i="advancedFilterValidationMissingCondition":this.missingEndBracket&&(i="advancedFilterValidationMissingEndBracket"),i?{message:this.params.advancedFilterExpressionService.translate(i),startPosition:this.params.expression.length,endPosition:this.params.expression.length}:null}getFunctionString(e){const i=this.expressionParsers.length>1,s=this.expressionParsers.map(r=>r.getFunctionString(e)).join(` ${this.operatorParser.getFunction()} `);return i?`(${s})`:s}getFunctionParsed(e){const i=this.operatorParser.getFunction(),s=this.expressionParsers.map(n=>n.getFunctionParsed(e)),r=i==="&&"?"every":"some";return(n,o,a)=>s[r](l=>l(n,o,a))}getAutocompleteListParams(e){if(this.endPosition!=null&&e>this.endPosition+1)return;if(!this.expressionParsers.length)return this.getColumnAutocompleteListParams();const i=this.getExpressionParserIndex(e);if(i==null)return this.params.expression[e]==="("?{enabled:!1}:this.getColumnAutocompleteListParams();const r=this.expressionParsers[i].getAutocompleteListParams(e);if(!r){if(i<this.expressionParsers.length-1)return this.operatorParser.getAutocompleteListParams(e,i);if(this.expressionParsers.length===this.operatorParser.getNumOperators()){const n=this.operatorParser.getLastOperatorEndPosition();return n==null||e<=n+1?this.operatorParser.getAutocompleteListParams(e,this.operatorParser.getNumOperators()-1):this.getColumnAutocompleteListParams()}return this.params.expression[e-1]===")"?{enabled:!1}:this.operatorParser.getAutocompleteListParams(e)}return r}updateExpression(e,i,s){var r;const n=this.params.expression,o=this.getExpressionParserIndex(e);if(o==null){const c=s==="column"?this.params.advancedFilterExpressionService.getColumnValue(i):(r=i.displayValue)!=null?r:i.key;return Su(n,this.startPosition,this.startPosition,c,!0)}const l=this.expressionParsers[o].updateExpression(e,i,s);return l??(s==="column"?Su(n,e,n.length-1,this.params.advancedFilterExpressionService.getColumnValue(i),!0):this.endPosition!=null&&e>this.endPosition+1?null:this.operatorParser.updateExpression(e,i,o))}getModel(){return this.expressionParsers.length>1?{filterType:"join",type:this.operatorParser.getModel(),conditions:this.expressionParsers.map(e=>e.getModel())}:this.expressionParsers[0].getModel()}getColumnAutocompleteListParams(){return this.params.advancedFilterExpressionService.generateAutocompleteListParams(this.params.advancedFilterExpressionService.getColumnAutocompleteEntries(),"column","")}getExpressionParserIndex(e){let i;for(let s=0;s<this.expressionParsers.length&&!(this.expressionParsers[s].startPosition>e);s++)i=s;return i}},Ate=class{constructor(t){this.params=t,this.valid=!1}parseExpression(){this.joinExpressionParser=new _te(this.params,0);const t=this.joinExpressionParser.parseExpression();return this.valid=t>=this.params.expression.length-1&&this.joinExpressionParser.isValid(),this.params.expression}isValid(){return this.valid}getValidationMessage(){const t=this.joinExpressionParser.getValidationError();if(!t)return null;const{message:e,startPosition:i,endPosition:s}=t;return i<this.params.expression.length?this.params.advancedFilterExpressionService.translate("advancedFilterValidationMessage",[e,this.params.expression.slice(i,s+1).trim()]):this.params.advancedFilterExpressionService.translate("advancedFilterValidationMessageAtEnd",[e])}getFunctionString(){const t=this.createFunctionParams();return{functionString:`return ${this.joinExpressionParser.getFunctionString(t)};`,params:t}}getFunctionParsed(){const t=this.createFunctionParams();return{expressionFunction:this.joinExpressionParser.getFunctionParsed(t),params:t}}getAutocompleteListParams(t){var e;return(e=this.joinExpressionParser.getAutocompleteListParams(t))!=null?e:{enabled:!1}}updateExpression(t,e,i){return this.joinExpressionParser.updateExpression(t,e,i)}getModel(){return this.isValid()?this.joinExpressionParser.getModel():null}createFunctionParams(){return{operands:[],operators:[],evaluatorParams:[]}}},fc=class extends ye{constructor(){super(...arguments),this.appliedExpression=null,this.expression=null,this.isValid=!0}postConstruct(){this.setEnabled(this.gos.get("enableAdvancedFilter"),!0),this.ctrl=this.createManagedBean(new rV(this.enabled)),this.expressionProxy={getValue:(t,e)=>{const i=this.columnModel.getPrimaryColumn(t);return i?this.valueService.getValue(i,e,!0):void 0}},this.addManagedPropertyListener("enableAdvancedFilter",t=>this.setEnabled(!!t.currentValue)),this.addManagedListener(this.eventService,K.EVENT_NEW_COLUMNS_LOADED,t=>this.onNewColumnsLoaded(t)),this.addManagedPropertyListener("includeHiddenColumnsInAdvancedFilter",()=>this.updateValidity())}isEnabled(){return this.enabled}isFilterPresent(){return!!this.expressionFunction}doesFilterPass(t){return this.expressionFunction(this.expressionProxy,t,this.expressionParams)}getModel(){var t;const e=this.createExpressionParser(this.appliedExpression);return e==null||e.parseExpression(),(t=e==null?void 0:e.getModel())!=null?t:null}setModel(t){const e=(s,r)=>{if(s.filterType==="join"){const n=this.advancedFilterExpressionService.parseJoinOperator(s),o=s.conditions.map(a=>e(a)).filter(a=>Q.exists(a)).join(` ${n} `);return r||s.conditions.length<=1?o:`(${o})`}else return this.advancedFilterExpressionService.parseColumnFilterModel(s)},i=t?e(t,!0):null;this.setExpressionDisplayValue(i),this.applyExpression(),this.ctrl.refreshComp(),this.ctrl.refreshBuilderComp()}getExpressionDisplayValue(){return this.expression}setExpressionDisplayValue(t){this.expression=t}isCurrentExpressionApplied(){return this.appliedExpression===this.expression}createExpressionParser(t){return t?new Ate({expression:t,columnModel:this.columnModel,dataTypeService:this.dataTypeService,valueService:this.valueService,advancedFilterExpressionService:this.advancedFilterExpressionService}):null}getDefaultExpression(t){const e=this.advancedFilterExpressionService.getColumnValue(t)+" ";return{updatedValue:e,updatedPosition:e.length}}isHeaderActive(){return!this.gos.get("advancedFilterParent")}getCtrl(){return this.ctrl}setEnabled(t,e){const i=this.enabled,s=this.rowModel.getType(),r=s==="clientSide"||s==="serverSide";if(t&&!s&&Q.warnOnce("Advanced Filter is only supported with the Client-Side Row Model or Server-Side Row Model."),this.enabled=t&&r,!e&&this.enabled!==i){const n={type:K.EVENT_ADVANCED_FILTER_ENABLED_CHANGED,enabled:this.enabled};this.eventService.dispatchEvent(n)}}applyExpression(){const t=this.createExpressionParser(this.expression);t==null||t.parseExpression(),this.applyExpressionFromParser(t)}applyExpressionFromParser(t){if(this.isValid=!t||t.isValid(),!t||!this.isValid){this.expressionFunction=null,this.expressionParams=null,this.appliedExpression=null;return}const{expressionFunction:e,params:i}=this.getFunction(t);this.expressionFunction=e,this.expressionParams=i,this.appliedExpression=this.expression}getFunction(t){if(this.gos.get("suppressAdvancedFilterEval"))return t.getFunctionParsed();{const{functionString:e,params:i}=t.getFunctionString();return{expressionFunction:new Function("expressionProxy","node","params",e),params:i}}}updateValidity(){this.advancedFilterExpressionService.resetColumnCaches();const t=this.createExpressionParser(this.expression);t==null||t.parseExpression();const i=(!t||t.isValid())!==this.isValid;return this.applyExpressionFromParser(t),this.ctrl.refreshComp(),this.ctrl.refreshBuilderComp(),i}onNewColumnsLoaded(t){if(t.source!=="gridInitializing"||!this.dataTypeService.isPendingInference())return;this.ctrl.setInputDisabled(!0);const e=this.addManagedListener(this.eventService,K.EVENT_DATA_TYPES_INFERRED,()=>{e==null||e(),this.ctrl.setInputDisabled(!1)})}};nt([W("valueService")],fc.prototype,"valueService",2);nt([W("columnModel")],fc.prototype,"columnModel",2);nt([W("dataTypeService")],fc.prototype,"dataTypeService",2);nt([W("rowModel")],fc.prototype,"rowModel",2);nt([W("advancedFilterExpressionService")],fc.prototype,"advancedFilterExpressionService",2);nt([de],fc.prototype,"postConstruct",1);fc=nt([Me("advancedFilterService")],fc);var Rte="31.3.4",oV={version:Rte,moduleName:Ut.AdvancedFilterModule,beans:[fc,kh],agStackComponents:[{componentName:"agAdvancedFilter",componentClass:Zo}],dependantModules:[Qs]},JP={};qB(JP,{GridChartsModule:()=>y2,__FORCE_MODULE_DETECTION_AG_GRID_CORE_EXT:()=>o9,agCharts:()=>a9});var aV=Object.defineProperty,Mte=Object.defineProperties,Dte=Object.getOwnPropertyDescriptor,Pte=Object.getOwnPropertyDescriptors,xL=Object.getOwnPropertySymbols,Ite=Object.prototype.hasOwnProperty,Fte=Object.prototype.propertyIsEnumerable,EL=(t,e,i)=>e in t?aV(t,e,{enumerable:!0,configurable:!0,writable:!0,value:i}):t[e]=i,Hl=(t,e)=>{for(var i in e||(e={}))Ite.call(e,i)&&EL(t,i,e[i]);if(xL)for(var i of xL(e))Fte.call(e,i)&&EL(t,i,e[i]);return t},TA=(t,e)=>Mte(t,Pte(e)),cs=(t,e,i,s)=>{for(var r=s>1?void 0:s?Dte(e,i):e,n=t.length-1,o;n>=0;n--)(o=t[n])&&(r=(s?o(e,i,r):o(r))||r);return s&&r&&aV(e,i,r),r},lo=class extends ye{constructor(){super(...arguments),this.cellRanges=[],this.bodyScrollListener=this.onBodyScroll.bind(this),this.dragging=!1,this.intersectionRange=!1}init(){this.addManagedListener(this.eventService,K.EVENT_NEW_COLUMNS_LOADED,()=>this.onColumnsChanged()),this.addManagedListener(this.eventService,K.EVENT_COLUMN_VISIBLE,this.onColumnsChanged.bind(this)),this.addManagedListener(this.eventService,K.EVENT_COLUMN_VALUE_CHANGED,this.onColumnsChanged.bind(this)),this.addManagedListener(this.eventService,K.EVENT_COLUMN_PIVOT_MODE_CHANGED,()=>this.removeAllCellRanges()),this.addManagedListener(this.eventService,K.EVENT_COLUMN_ROW_GROUP_CHANGED,()=>this.removeAllCellRanges()),this.addManagedListener(this.eventService,K.EVENT_COLUMN_PIVOT_CHANGED,()=>this.removeAllCellRanges()),this.addManagedListener(this.eventService,K.EVENT_COLUMN_GROUP_OPENED,this.refreshLastRangeStart.bind(this)),this.addManagedListener(this.eventService,K.EVENT_COLUMN_MOVED,this.refreshLastRangeStart.bind(this)),this.addManagedListener(this.eventService,K.EVENT_COLUMN_PINNED,this.refreshLastRangeStart.bind(this)),this.ctrlsService.whenReady(t=>{const e=t.gridBodyCtrl;this.autoScrollService=new PC({scrollContainer:e.getBodyViewportElement(),scrollAxis:"xy",getVerticalPosition:()=>e.getScrollFeature().getVScrollPosition().top,setVerticalPosition:i=>e.getScrollFeature().setVerticalScrollPosition(i),getHorizontalPosition:()=>e.getScrollFeature().getHScrollPosition().left,setHorizontalPosition:i=>e.getScrollFeature().setHorizontalScrollPosition(i),shouldSkipVerticalScroll:()=>!this.gos.isDomLayout("normal"),shouldSkipHorizontalScroll:()=>!e.getScrollFeature().isHorizontalScrollShowing()})})}onColumnsChanged(){this.refreshLastRangeStart();const t=this.columnModel.getAllDisplayedColumns();this.cellRanges.forEach(i=>{const s=i.columns;i.columns=i.columns.filter(n=>n.isVisible()&&t.indexOf(n)!==-1),!Q.areEqual(s,i.columns)&&this.dispatchChangedEvent(!1,!0,i.id)});const e=this.cellRanges.length;this.cellRanges=this.cellRanges.filter(i=>i.columns.length>0),e>this.cellRanges.length&&this.dispatchChangedEvent(!1,!0)}refreshLastRangeStart(){const t=Q.last(this.cellRanges);t&&this.refreshRangeStart(t)}isContiguousRange(t){const e=t.columns;if(!e.length)return!1;const i=this.columnModel.getAllDisplayedColumns(),s=e.map(r=>i.indexOf(r)).sort((r,n)=>r-n);return Q.last(s)-s[0]+1===e.length}getRangeStartRow(t){return t.startRow&&t.endRow?this.rowPositionUtils.before(t.startRow,t.endRow)?t.startRow:t.endRow:{rowIndex:0,rowPinned:this.pinnedRowModel.getPinnedTopRowCount()>0?"top":null}}getRangeEndRow(t){if(t.startRow&&t.endRow)return this.rowPositionUtils.before(t.startRow,t.endRow)?t.endRow:t.startRow;const e=this.pinnedRowModel.getPinnedBottomRowCount();return e>0?{rowIndex:e-1,rowPinned:"bottom"}:{rowIndex:this.rowModel.getRowCount()-1,rowPinned:null}}setRangeToCell(t,e=!1){if(!this.gos.get("enableRangeSelection"))return;const i=this.calculateColumnsBetween(t.column,t.column);if(!i)return;(this.gos.get("suppressMultiRangeSelection")||!e||Q.missing(this.cellRanges))&&this.removeAllCellRanges(!0);const r={rowIndex:t.rowIndex,rowPinned:t.rowPinned},n={startRow:r,endRow:r,columns:i,startColumn:t.column};this.cellRanges.push(n),this.setNewestRangeStartCell(t),this.onDragStop(),this.dispatchChangedEvent(!0,!0)}extendLatestRangeToCell(t){if(this.isEmpty()||!this.newestRangeStartCell)return;const e=Q.last(this.cellRanges);this.updateRangeEnd(e,t)}updateRangeEnd(t,e,i=!1){const s=e.column,r=this.calculateColumnsBetween(t.startColumn,s);!r||this.isLastCellOfRange(t,e)||(t.columns=r,t.endRow={rowIndex:e.rowIndex,rowPinned:e.rowPinned},i||this.dispatchChangedEvent(!0,!0,t.id))}refreshRangeStart(t){const{startColumn:e,columns:i}=t,s=(l,c)=>{const u=t.columns.filter(d=>d!==l);l?(t.startColumn=l,t.columns=c?[l,...u]:[...u,l]):t.columns=u},{left:r,right:n}=this.getRangeEdgeColumns(t);if(e===i[0]&&e!==r){s(r,!0);return}if(e===Q.last(i)&&e===n){s(n,!1);return}}getRangeEdgeColumns(t){const e=this.columnModel.getAllDisplayedColumns(),i=t.columns.map(s=>e.indexOf(s)).filter(s=>s>-1).sort((s,r)=>s-r);return{left:e[i[0]],right:e[Q.last(i)]}}extendLatestRangeInDirection(t){if(this.isEmpty()||!this.newestRangeStartCell)return;const e=t.key,i=t.ctrlKey||t.metaKey,s=Q.last(this.cellRanges),r=this.newestRangeStartCell,n=s.columns[0],o=Q.last(s.columns),a=s.endRow.rowIndex,l=s.endRow.rowPinned,u={column:r.column===n?o:n,rowIndex:a,rowPinned:l},d=this.cellNavigationService.getNextCellToFocus(e,u,i);if(d)return this.setCellRange({rowStartIndex:r.rowIndex,rowStartPinned:r.rowPinned,rowEndIndex:d.rowIndex,rowEndPinned:d.rowPinned,columnStart:r.column,columnEnd:d.column}),d}setCellRange(t){this.gos.get("enableRangeSelection")&&(this.removeAllCellRanges(!0),this.addCellRange(t))}setCellRanges(t){Q.shallowCompare(this.cellRanges,t)||(this.removeAllCellRanges(!0),t.forEach(e=>{e.columns&&e.startRow&&this.setNewestRangeStartCell({rowIndex:e.startRow.rowIndex,rowPinned:e.startRow.rowPinned,column:e.columns[0]}),this.cellRanges.push(e)}),this.dispatchChangedEvent(!1,!0))}setNewestRangeStartCell(t){this.newestRangeStartCell=t}clearCellRangeCellValues(t){let{cellRanges:e}=t;const{cellEventSource:i="rangeService",dispatchWrapperEvents:s,wrapperEventSource:r="deleteKey"}=t;if(s){const n={type:K.EVENT_RANGE_DELETE_START,source:r};this.eventService.dispatchEvent(n)}if(e||(e=this.cellRanges),e.forEach(n=>{this.forEachRowInRange(n,o=>{var a;const l=this.rowPositionUtils.getRowNode(o);if(l)for(let c=0;c<n.columns.length;c++){const u=this.columnModel.getGridColumn(n.columns[c]);if(!u||!u.isCellEditable(l))continue;const d=(a=this.valueService.parseValue(u,l,"",l.getValueFromValueService(u)))!=null?a:null;l.setDataValue(u,d,i)}})}),s){const n={type:K.EVENT_RANGE_DELETE_END,source:r};this.eventService.dispatchEvent(n)}}createCellRangeFromCellRangeParams(t){return this.createPartialCellRangeFromRangeParams(t,!1)}createPartialCellRangeFromRangeParams(t,e){let i,s=!1;if(t.columns)i=t.columns.map(o=>this.columnModel.getColumnWithValidation(o)).filter(o=>o);else{const o=this.columnModel.getColumnWithValidation(t.columnStart),a=this.columnModel.getColumnWithValidation(t.columnEnd);if(!o||!a)return;i=this.calculateColumnsBetween(o,a),i&&i.length&&(s=i[0]!==o)}if(!i||!e&&i.length===0)return;const r=t.rowStartIndex!=null?{rowIndex:t.rowStartIndex,rowPinned:t.rowStartPinned||null}:void 0,n=t.rowEndIndex!=null?{rowIndex:t.rowEndIndex,rowPinned:t.rowEndPinned||null}:void 0;return{startRow:r,endRow:n,columns:i,startColumn:s?Q.last(i):i[0]}}addCellRange(t){if(!this.gos.get("enableRangeSelection"))return;const e=this.createCellRangeFromCellRangeParams(t);e&&(e.startRow&&this.setNewestRangeStartCell({rowIndex:e.startRow.rowIndex,rowPinned:e.startRow.rowPinned,column:e.startColumn}),this.cellRanges.push(e),this.dispatchChangedEvent(!1,!0,e.id))}getCellRanges(){return this.cellRanges}isEmpty(){return this.cellRanges.length===0}isMoreThanOneCell(){const t=this.cellRanges.length;if(t===0)return!1;if(t>1)return!0;const e=this.cellRanges[0],i=this.getRangeStartRow(e),s=this.getRangeEndRow(e);return i.rowPinned!==s.rowPinned||i.rowIndex!==s.rowIndex||e.columns.length!==1}areAllRangesAbleToMerge(){const t=new Map;if(this.cellRanges.length<=1)return!0;this.cellRanges.forEach(s=>{this.forEachRowInRange(s,r=>{const n=`${r.rowPinned||"normal"}_${r.rowIndex}`,o=t.get(n),a=s.columns.map(l=>l.getId());if(o){const l=a.filter(c=>o.indexOf(c)===-1);o.push(...l)}else t.set(n,a)})});let i;for(const s of t.values()){const r=s.sort().join();if(i===void 0){i=r;continue}if(i!==r)return!1}return!0}forEachRowInRange(t,e){const i=this.getRangeStartRow(t),s=this.getRangeEndRow(t);let r=i;for(;r&&(e(r),!this.rowPositionUtils.sameRow(r,s));)r=this.cellNavigationService.getRowBelow(r)}removeAllCellRanges(t){this.isEmpty()||(this.onDragStop(),this.cellRanges.length=0,t||this.dispatchChangedEvent(!1,!0))}onBodyScroll(){this.dragging&&this.lastMouseEvent&&this.onDragging(this.lastMouseEvent)}isCellInAnyRange(t){return this.getCellRangeCount(t)>0}isCellInSpecificRange(t,e){const i=e.columns!==null&&Q.includes(e.columns,t.column),s=this.isRowInRange(t.rowIndex,t.rowPinned,e);return i&&s}isLastCellOfRange(t,e){const{startRow:i,endRow:s}=t,r=this.rowPositionUtils.before(i,s)?s:i,n=e.rowIndex===r.rowIndex&&e.rowPinned===r.rowPinned,o=t.columns[0],a=Q.last(t.columns),l=t.startColumn===o?a:o;return e.column===l&&n}isBottomRightCell(t,e){const i=this.columnModel.getAllDisplayedColumns(),s=t.columns.map(c=>i.indexOf(c)).sort((c,u)=>c-u),{startRow:r,endRow:n}=t,o=this.rowPositionUtils.before(r,n)?n:r,a=i.indexOf(e.column)===Q.last(s),l=e.rowIndex===o.rowIndex&&Q.makeNull(e.rowPinned)===Q.makeNull(o.rowPinned);return a&&l}getCellRangeCount(t){return this.isEmpty()?0:this.cellRanges.filter(e=>this.isCellInSpecificRange(t,e)).length}isRowInRange(t,e,i){const s=this.getRangeStartRow(i),r=this.getRangeEndRow(i),n={rowIndex:t,rowPinned:e||null},o=n.rowIndex===s.rowIndex&&n.rowPinned==s.rowPinned,a=n.rowIndex===r.rowIndex&&n.rowPinned==r.rowPinned;if(o||a)return!0;const l=!this.rowPositionUtils.before(n,s),c=this.rowPositionUtils.before(n,r);return l&&c}getDraggingRange(){return this.draggingRange}onDragStart(t){if(!this.gos.get("enableRangeSelection"))return;const{ctrlKey:e,metaKey:i,shiftKey:s}=t,r=e||i,o=!this.gos.get("suppressMultiRangeSelection")?r:!1,a=s&&Q.existsAndNotEmpty(this.cellRanges);!o&&(!a||Q.exists(Q.last(this.cellRanges).type))&&this.removeAllCellRanges(!0);const l=this.dragService.getStartTarget();if(l&&this.updateValuesOnMove(l),!!this.lastCellHovered){if(this.dragging=!0,this.lastMouseEvent=t,this.intersectionRange=o&&this.getCellRangeCount(this.lastCellHovered)>1,a||this.setNewestRangeStartCell(this.lastCellHovered),this.cellRanges.length>0)this.draggingRange=Q.last(this.cellRanges);else{const c={rowIndex:this.lastCellHovered.rowIndex,rowPinned:this.lastCellHovered.rowPinned};this.draggingRange={startRow:c,endRow:c,columns:[this.lastCellHovered.column],startColumn:this.newestRangeStartCell.column},this.cellRanges.push(this.draggingRange)}this.ctrlsService.getGridBodyCtrl().addScrollEventListener(this.bodyScrollListener),this.dispatchChangedEvent(!0,!1,this.draggingRange.id)}}intersectLastRange(t){if(t&&this.dragging||this.gos.get("suppressMultiRangeSelection")||this.isEmpty())return;const e=this.rowPositionUtils,i=Q.last(this.cellRanges),s=this.getRangeStartRow(i),r=this.getRangeEndRow(i),n=[];this.cellRanges.slice(0,-1).forEach(o=>{const a=this.getRangeStartRow(o),l=this.getRangeEndRow(o),c=o.columns,u=c.filter(h=>i.columns.indexOf(h)===-1);if(u.length===c.length){n.push(o);return}if(e.before(r,a)||e.before(l,s)){n.push(o);return}const d=n.length;if(e.before(a,s)){const h={columns:[...c],startColumn:i.startColumn,startRow:Hl({},a),endRow:this.cellNavigationService.getRowAbove(s)};n.push(h)}if(u.length>0){const h={columns:u,startColumn:Q.includes(u,i.startColumn)?i.startColumn:u[0],startRow:this.rowMax([Hl({},s),Hl({},a)]),endRow:this.rowMin([Hl({},r),Hl({},l)])};n.push(h)}e.before(r,l)&&n.push({columns:[...c],startColumn:i.startColumn,startRow:this.cellNavigationService.getRowBelow(r),endRow:Hl({},l)}),n.length-d===1&&(n[n.length-1].id=o.id)}),this.cellRanges=n,t&&this.dispatchChangedEvent(!1,!0)}rowMax(t){let e;return t.forEach(i=>{(e===void 0||this.rowPositionUtils.before(e,i))&&(e=i)}),e}rowMin(t){let e;return t.forEach(i=>{(e===void 0||this.rowPositionUtils.before(i,e))&&(e=i)}),e}updateValuesOnMove(t){const e=Q.getCtrlForEventTarget(this.gos,t,Jl.DOM_DATA_KEY_CELL_CTRL),i=e==null?void 0:e.getCellPosition();this.cellHasChanged=!1,!(!i||this.lastCellHovered&&this.cellPositionUtils.equals(i,this.lastCellHovered))&&(this.lastCellHovered&&(this.cellHasChanged=!0),this.lastCellHovered=i)}onDragging(t){if(!this.dragging||!t)return;this.updateValuesOnMove(t.target),this.lastMouseEvent=t;const e=this.lastCellHovered,i=n=>e&&e.rowPinned===n&&this.newestRangeStartCell.rowPinned===n,s=i("top")||i("bottom");if(this.autoScrollService.check(t,s),!this.cellHasChanged)return;const r=this.calculateColumnsBetween(this.newestRangeStartCell.column,e.column);r&&(this.draggingRange.endRow={rowIndex:e.rowIndex,rowPinned:e.rowPinned},this.draggingRange.columns=r,this.dispatchChangedEvent(!1,!1,this.draggingRange.id))}onDragStop(){if(!this.dragging)return;const{id:t}=this.draggingRange;this.autoScrollService.ensureCleared(),this.ctrlsService.getGridBodyCtrl().removeScrollEventListener(this.bodyScrollListener),this.lastMouseEvent=null,this.dragging=!1,this.draggingRange=void 0,this.lastCellHovered=void 0,this.intersectionRange&&(this.intersectionRange=!1,this.intersectLastRange()),this.dispatchChangedEvent(!1,!0,t)}dispatchChangedEvent(t,e,i){const s={type:K.EVENT_RANGE_SELECTION_CHANGED,started:t,finished:e,id:i};this.eventService.dispatchEvent(s)}calculateColumnsBetween(t,e){const i=this.columnModel.getAllDisplayedColumns(),s=t===e,r=i.indexOf(t);if(r<0){console.warn(`AG Grid: column ${t.getId()} is not visible`);return}const n=s?r:i.indexOf(e);if(n<0){console.warn(`AG Grid: column ${e.getId()} is not visible`);return}if(s)return[t];const o=Math.min(r,n),a=o===r?n:r,l=[];for(let c=o;c<=a;c++)l.push(i[c]);return l}};cs([W("rowModel")],lo.prototype,"rowModel",2);cs([W("dragService")],lo.prototype,"dragService",2);cs([W("columnModel")],lo.prototype,"columnModel",2);cs([W("cellNavigationService")],lo.prototype,"cellNavigationService",2);cs([W("pinnedRowModel")],lo.prototype,"pinnedRowModel",2);cs([W("rowPositionUtils")],lo.prototype,"rowPositionUtils",2);cs([W("cellPositionUtils")],lo.prototype,"cellPositionUtils",2);cs([W("ctrlsService")],lo.prototype,"ctrlsService",2);cs([W("valueService")],lo.prototype,"valueService",2);cs([de],lo.prototype,"init",1);lo=cs([Me("rangeService")],lo);var bo=class extends Te{constructor(){super(...arguments),this.changedCalculatedValues=!1,this.dragging=!1,this.shouldDestroyOnEndDragging=!1}init(){this.dragService.addDragSource({dragStartPixels:0,eElement:this.getGui(),onDragStart:this.onDragStart.bind(this),onDragging:t=>{this.dragging=!0,this.rangeService.autoScrollService.check(t),this.changedCalculatedValues&&(this.onDrag(t),this.changedCalculatedValues=!1)},onDragStop:t=>{this.dragging=!1,this.onDragEnd(t),this.clearValues(),this.rangeService.autoScrollService.ensureCleared(),document.body.classList.remove(this.getDraggingCssClass()),this.shouldDestroyOnEndDragging&&this.destroy()}}),this.addManagedListener(this.getGui(),"mousedown",this.preventRangeExtension.bind(this))}isDragging(){return this.dragging}getCellCtrl(){return this.cellCtrl}setCellCtrl(t){this.cellCtrl=t}getCellRange(){return this.cellRange}setCellRange(t){this.cellRange=t}getRangeStartRow(){return this.rangeStartRow}setRangeStartRow(t){this.rangeStartRow=t}getRangeEndRow(){return this.rangeEndRow}setRangeEndRow(t){this.rangeEndRow=t}getLastCellHovered(){return this.lastCellHovered}preventRangeExtension(t){t.stopPropagation()}onDragStart(t){this.cellHoverListener=this.addManagedListener(this.ctrlsService.get("gridCtrl").getGui(),"mousemove",this.updateValuesOnMove.bind(this)),document.body.classList.add(this.getDraggingCssClass())}getDraggingCssClass(){return`ag-dragging-${this.type===Gg.FILL?"fill":"range"}-handle`}updateValuesOnMove(t){const e=this.mouseEventService.getCellPositionForEvent(t);!e||this.lastCellHovered&&this.cellPositionUtils.equals(e,this.lastCellHovered)||(this.lastCellHovered=e,this.changedCalculatedValues=!0)}getType(){return this.type}refresh(t){const e=this.getCellCtrl(),i=this.getGui(),s=Q.last(this.rangeService.getCellRanges()),r=s.startRow,n=s.endRow;if(r&&n&&(this.rowPositionUtils.before(n,r)?(this.setRangeStartRow(n),this.setRangeEndRow(r)):(this.setRangeStartRow(r),this.setRangeEndRow(n))),e!==t||!Q.isVisible(i)){this.setCellCtrl(t);const o=t.getComp().getParentOfValue();o&&o.appendChild(i)}this.setCellRange(s)}clearValues(){this.lastCellHovered=void 0,this.removeListeners()}removeListeners(){this.cellHoverListener&&(this.cellHoverListener(),this.cellHoverListener=void 0)}destroy(){if(!this.shouldDestroyOnEndDragging&&this.isDragging()){Q.setDisplayed(this.getGui(),!1),this.shouldDestroyOnEndDragging=!0;return}this.shouldDestroyOnEndDragging=!1,super.destroy(),this.removeListeners();const t=this.getGui();t.parentElement&&t.parentElement.removeChild(t)}};cs([W("rowRenderer")],bo.prototype,"rowRenderer",2);cs([W("dragService")],bo.prototype,"dragService",2);cs([W("rangeService")],bo.prototype,"rangeService",2);cs([W("mouseEventService")],bo.prototype,"mouseEventService",2);cs([W("columnModel")],bo.prototype,"columnModel",2);cs([W("cellNavigationService")],bo.prototype,"cellNavigationService",2);cs([W("navigationService")],bo.prototype,"navigationService",2);cs([W("rowPositionUtils")],bo.prototype,"rowPositionUtils",2);cs([W("cellPositionUtils")],bo.prototype,"cellPositionUtils",2);cs([W("ctrlsService")],bo.prototype,"ctrlsService",2);cs([de],bo.prototype,"init",1);function Lte(t){const e=t.length;let i=0;if(e<=1)return t;for(let d=0;d<t.length;d++){const h=t[d],p=h.toString().split("e-");if(p.length>1){i=Math.max(i,parseInt(p[1],10));continue}Math.floor(h)!==h&&(i=Math.max(i,h.toString().split(".")[1].length))}let s=0,r=0,n=0,o=0,a=0;for(let d=0;d<e;d++)a=t[d],s+=d,r+=a,o+=d*d,n+=d*a;const l=(e*n-s*r)/(e*o-s*s),c=r/e-l*s/e,u=[];for(let d=0;d<=e;d++)u.push(parseFloat((d*l+c).toFixed(i)));return u}var QP=class lV extends bo{constructor(){super(lV.TEMPLATE),this.markedCells=[],this.cellValues=[],this.isUp=!1,this.isLeft=!1,this.isReduce=!1,this.type=Gg.FILL}updateValuesOnMove(e){super.updateValuesOnMove(e),this.initialXY||(this.initialXY=this.mouseEventService.getNormalisedPosition(e));const{x:i,y:s}=this.initialXY,{x:r,y:n}=this.mouseEventService.getNormalisedPosition(e),o=Math.abs(i-r),a=Math.abs(s-n),l=this.getFillHandleDirection();let c;l==="xy"?c=o>a?"x":"y":c=l,c!==this.dragAxis&&(this.dragAxis=c,this.changedCalculatedValues=!0)}onDrag(e){if(!this.initialPosition){const s=this.getCellCtrl();if(!s)return;this.initialPosition=s.getCellPosition()}const i=this.getLastCellHovered();i&&this.markPathFrom(this.initialPosition,i)}onDragEnd(e){if(this.initialXY=null,!this.markedCells.length)return;const i=this.dragAxis==="x",s=this.getCellRange(),r=s.columns.length,n=this.getRangeStartRow(),o=this.getRangeEndRow();let a;if(!this.isUp&&!this.isLeft)a=this.rangeService.createCellRangeFromCellRangeParams({rowStartIndex:n.rowIndex,rowStartPinned:n.rowPinned,columnStart:s.columns[0],rowEndIndex:i?o.rowIndex:this.lastCellMarked.rowIndex,rowEndPinned:i?o.rowPinned:this.lastCellMarked.rowPinned,columnEnd:i?this.lastCellMarked.column:s.columns[r-1]});else{const l=i?n:this.lastCellMarked;a=this.rangeService.createCellRangeFromCellRangeParams({rowStartIndex:l.rowIndex,rowStartPinned:l.rowPinned,columnStart:i?this.lastCellMarked.column:s.columns[0],rowEndIndex:o.rowIndex,rowEndPinned:o.rowPinned,columnEnd:s.columns[r-1]})}a&&(this.raiseFillStartEvent(),this.handleValueChanged(s,a,e),this.rangeService.setCellRanges([a]),this.raiseFillEndEvent(s,a))}getFillHandleDirection(){const e=this.gos.get("fillHandleDirection");return e?e!=="x"&&e!=="y"&&e!=="xy"?(Q.warnOnce("valid values for fillHandleDirection are 'x', 'y' and 'xy'. Default to 'xy'."),"xy"):e:"xy"}raiseFillStartEvent(){const e={type:K.EVENT_FILL_START};this.eventService.dispatchEvent(e)}raiseFillEndEvent(e,i){const s={type:K.EVENT_FILL_END,initialRange:e,finalRange:i};this.eventService.dispatchEvent(s)}handleValueChanged(e,i,s){const r=this.rangeService.getRangeEndRow(e),n=this.rangeService.getRangeStartRow(e),o=this.rangeService.getRangeEndRow(i),a=this.rangeService.getRangeStartRow(i),l=this.dragAxis==="y";if(this.isReduce&&!this.gos.get("suppressClearOnFillReduction")){const v=l?e.columns:e.columns.filter(b=>i.columns.indexOf(b)<0),C=l?this.cellNavigationService.getRowBelow(o):a;C&&this.clearCellsInRange(C,r,v);return}const c=[],u=[],d=[],h=[];let p=!0,f=0;const m=()=>{c.length=0,u.length=0,d.length=0,h.length=0,f=0},g=(v,C)=>{let b=this.isUp?r:n,T=!1;for(l&&(p=!0,m());!T&&b;){const A=this.rowPositionUtils.getRowNode(b);if(!A)break;l&&v?y(c,v,A,()=>!this.rowPositionUtils.sameRow(b,this.isUp?n:r)):C&&(p=!0,m(),C.forEach(I=>y(c,I,A,()=>I!==(this.isLeft?e.columns[0]:Q.last(e.columns))))),T=this.rowPositionUtils.sameRow(b,this.isUp?a:o),b=this.isUp?this.cellNavigationService.getRowAbove(b):this.cellNavigationService.getRowBelow(b)}},y=(v,C,b,T)=>{var A,I;let D,F=!1;if(p)D=this.valueService.getValue(C,b),u.push(D),d.push(this.valueService.getValue(C,b,void 0,!0)),h.push(this.valueService.formatValue(C,b,D)),p=T();else{const{value:B,fromUserFunction:U,sourceCol:H,sourceRowNode:R}=this.processValues({event:s,values:v,initialValues:u,initialNonAggregatedValues:d,initialFormattedValues:h,col:C,rowNode:b,idx:f++});if(D=B,C.isCellEditable(b)){const L=this.valueService.getValue(C,b);U||(H&&((A=H.getColDef())==null?void 0:A.useValueFormatterForExport)!==!1&&(D=(I=this.valueService.formatValue(H,R,D))!=null?I:D),C.getColDef().useValueParserForImport!==!1&&(D=this.valueService.parseValue(C,b,H?D:Q.toStringOrNull(D),L))),!U||L!==D?b.setDataValue(C,D,"rangeService"):F=!0}}F||v.push({value:D,column:C,rowNode:b})};if(l)e.columns.forEach(v=>{g(v)});else{const v=this.isLeft?[...i.columns].reverse():i.columns;g(void 0,v)}}clearCellsInRange(e,i,s){const r={startRow:e,endRow:i,columns:s,startColumn:s[0]};this.rangeService.clearCellRangeCellValues({cellRanges:[r]})}processValues(e){const{event:i,values:s,initialValues:r,initialNonAggregatedValues:n,initialFormattedValues:o,col:a,rowNode:l,idx:c}=e,u=this.gos.getCallback("fillOperation"),d=this.dragAxis==="y";let h;if(d?h=this.isUp?"up":"down":h=this.isLeft?"left":"right",u){const f={event:i,values:s.map(({value:g})=>g),initialValues:r,initialNonAggregatedValues:n,initialFormattedValues:o,currentIndex:c,currentCellValue:this.valueService.getValue(a,l),direction:h,column:a,rowNode:l},m=u(f);if(m!==!1)return{value:m,fromUserFunction:!0}}const p=!s.some(({value:f})=>{const m=parseFloat(f);return isNaN(m)||m.toString()!==f.toString()});if(i.altKey||!p){if(p&&r.length===1){const y=this.isUp||this.isLeft?-1:1;return{value:parseFloat(Q.last(s).value)+1*y,fromUserFunction:!1}}const{value:f,column:m,rowNode:g}=s[c%s.length];return{value:f,fromUserFunction:!1,sourceCol:m,sourceRowNode:g}}return{value:Q.last(Lte(s.map(({value:f})=>Number(f)))),fromUserFunction:!1}}clearValues(){this.clearMarkedPath(),this.clearCellValues(),this.lastCellMarked=void 0,super.clearValues()}clearMarkedPath(){this.markedCells.forEach(e=>{if(!e.isAlive())return;const i=e.getComp();i.addOrRemoveCssClass("ag-selection-fill-top",!1),i.addOrRemoveCssClass("ag-selection-fill-right",!1),i.addOrRemoveCssClass("ag-selection-fill-bottom",!1),i.addOrRemoveCssClass("ag-selection-fill-left",!1)}),this.markedCells.length=0,this.isUp=!1,this.isLeft=!1,this.isReduce=!1}clearCellValues(){this.cellValues.length=0}markPathFrom(e,i){if(this.clearMarkedPath(),this.clearCellValues(),this.dragAxis==="y"){if(this.rowPositionUtils.sameRow(i,e))return;const s=this.rowPositionUtils.before(i,e),r=this.getRangeStartRow(),n=this.getRangeEndRow();s&&(i.rowPinned==r.rowPinned&&i.rowIndex>=r.rowIndex||r.rowPinned!=n.rowPinned&&i.rowPinned==n.rowPinned&&i.rowIndex<=n.rowIndex)?(this.reduceVertical(e,i),this.isReduce=!0):(this.extendVertical(e,i,s),this.isReduce=!1)}else{const s=e.column,r=i.column;if(s===r)return;const n=this.columnModel.getAllDisplayedColumns(),o=n.indexOf(s),a=n.indexOf(r);a<=o&&a>=n.indexOf(this.getCellRange().columns[0])?(this.reduceHorizontal(e,i),this.isReduce=!0):(this.extendHorizontal(e,i,a<o),this.isReduce=!1)}this.lastCellMarked=i}extendVertical(e,i,s){const{navigationService:r,rangeService:n}=this;let o=e;do{const a=this.getCellRange(),l=a.columns.length;for(let c=0;c<l;c++){const u=a.columns[c],d={rowIndex:o.rowIndex,rowPinned:o.rowPinned},h=TA(Hl({},d),{column:u}),p=n.isCellInSpecificRange(h,a),f=this.rowPositionUtils.sameRow(o,e);if(s&&(this.isUp=!0),!f){const m=r.getCellByPosition(h);if(m){this.markedCells.push(m);const g=m.getComp();p||(g.addOrRemoveCssClass("ag-selection-fill-left",c===0),g.addOrRemoveCssClass("ag-selection-fill-right",c===l-1)),g.addOrRemoveCssClass(s?"ag-selection-fill-top":"ag-selection-fill-bottom",this.rowPositionUtils.sameRow(o,i))}}}if(this.rowPositionUtils.sameRow(o,i))break}while(o=s?this.cellNavigationService.getRowAbove(o):this.cellNavigationService.getRowBelow(o))}reduceVertical(e,i){let s=e;do{const r=this.getCellRange(),n=r.columns.length,o=this.rowPositionUtils.sameRow(s,i);for(let a=0;a<n;a++){const l={rowIndex:s.rowIndex,rowPinned:s.rowPinned},c=TA(Hl({},l),{column:r.columns[a]}),u=this.navigationService.getCellByPosition(c);u&&(this.markedCells.push(u),u.getComp().addOrRemoveCssClass("ag-selection-fill-bottom",this.rowPositionUtils.sameRow(s,i)))}if(o)break}while(s=this.cellNavigationService.getRowAbove(s))}extendHorizontal(e,i,s){const r=this.columnModel.getAllDisplayedColumns(),n=r.indexOf(s?i.column:e.column),o=r.indexOf(s?this.getCellRange().columns[0]:i.column),a=s?0:1,l=r.slice(n+a,o+a),c=this.getRangeStartRow(),u=this.getRangeEndRow();l.forEach(d=>{let h=c,p=!1;do{p=this.rowPositionUtils.sameRow(h,u);const f=this.navigationService.getCellByPosition({rowIndex:h.rowIndex,rowPinned:h.rowPinned,column:d});if(f){this.markedCells.push(f);const m=f.getComp();m.addOrRemoveCssClass("ag-selection-fill-top",this.rowPositionUtils.sameRow(h,c)),m.addOrRemoveCssClass("ag-selection-fill-bottom",this.rowPositionUtils.sameRow(h,u)),s?(this.isLeft=!0,m.addOrRemoveCssClass("ag-selection-fill-left",d===l[0])):m.addOrRemoveCssClass("ag-selection-fill-right",d===Q.last(l))}h=this.cellNavigationService.getRowBelow(h)}while(!p)})}reduceHorizontal(e,i){const s=this.columnModel.getAllDisplayedColumns(),r=s.indexOf(i.column),n=s.indexOf(e.column),o=s.slice(r,n),a=this.getRangeStartRow(),l=this.getRangeEndRow();o.forEach(c=>{let u=a,d=!1;do{d=this.rowPositionUtils.sameRow(u,l);const h=this.navigationService.getCellByPosition({rowIndex:u.rowIndex,rowPinned:u.rowPinned,column:c});h&&(this.markedCells.push(h),h.getComp().addOrRemoveCssClass("ag-selection-fill-right",c===o[0])),u=this.cellNavigationService.getRowBelow(u)}while(!d)})}refresh(e){const i=this.rangeService.getCellRanges()[0];if(!i.startRow||!i.endRow){this.destroy();return}super.refresh(e)}};QP.TEMPLATE='<div class="ag-fill-handle"></div>';cs([W("valueService")],QP.prototype,"valueService",2);var cV=QP,uV=class dV extends bo{constructor(){super(dV.TEMPLATE),this.type=Gg.RANGE,this.rangeFixed=!1}onDrag(e){const i=this.getLastCellHovered();if(!i)return;const s=this.rangeService.getCellRanges(),r=Q.last(s);this.rangeFixed||(this.fixRangeStartEnd(r),this.rangeFixed=!0),this.endPosition={rowIndex:i.rowIndex,rowPinned:i.rowPinned,column:i.column},s.length===2&&s[0].type===jl.DIMENSION&&r.type===jl.VALUE&&!this.rowPositionUtils.sameRow(this.endPosition,this.rangeService.getRangeEndRow(r))&&this.rangeService.updateRangeEnd(s[0],TA(Hl({},this.endPosition),{column:s[0].columns[0]}),!0),this.rangeService.extendLatestRangeToCell(this.endPosition)}onDragEnd(e){const i=Q.last(this.rangeService.getCellRanges());this.fixRangeStartEnd(i),this.rangeFixed=!1}fixRangeStartEnd(e){const i=this.rangeService.getRangeStartRow(e),s=this.rangeService.getRangeEndRow(e),r=e.columns[0];e.startRow=i,e.endRow=s,e.startColumn=r}};uV.TEMPLATE='<div class="ag-range-handle"></div>';var hV=uV,_A=class extends ye{createSelectionHandle(t){return this.createBean(t===Gg.RANGE?new hV:new cV)}};_A=cs([Me("selectionHandleFactory")],_A);var kte="31.3.4",e2={version:kte,moduleName:Ut.RangeSelectionModule,beans:[lo,_A],agStackComponents:[{componentName:"AgFillHandle",componentClass:cV},{componentName:"AgRangeHandle",componentClass:hV}],dependantModules:[Qs]};XB(JP,ote);var pV=Object.defineProperty,Nte=Object.defineProperties,Ote=Object.getOwnPropertyDescriptor,Gte=Object.getOwnPropertyDescriptors,yS=Object.getOwnPropertySymbols,fV=Object.prototype.hasOwnProperty,gV=Object.prototype.propertyIsEnumerable,TL=(t,e,i)=>e in t?pV(t,e,{enumerable:!0,configurable:!0,writable:!0,value:i}):t[e]=i,Xe=(t,e)=>{for(var i in e||(e={}))fV.call(e,i)&&TL(t,i,e[i]);if(yS)for(var i of yS(e))gV.call(e,i)&&TL(t,i,e[i]);return t},Bt=(t,e)=>Nte(t,Gte(e)),xu=(t,e)=>{var i={};for(var s in t)fV.call(t,s)&&e.indexOf(s)<0&&(i[s]=t[s]);if(t!=null&&yS)for(var s of yS(t))e.indexOf(s)<0&&gV.call(t,s)&&(i[s]=t[s]);return i},Ce=(t,e,i,s)=>{for(var r=s>1?void 0:s?Ote(e,i):e,n=t.length-1,o;n>=0;n--)(o=t[n])&&(r=(s?o(e,i,r):o(r))||r);return s&&r&&pV(e,i,r),r},bp=class mV extends ye{getData(e){if(e.crossFiltering){if(e.grouping)return console.warn("AG Grid: crossing filtering with row grouping is not supported."),{chartData:[],columnNames:{}};if(!this.gos.isRowModelType("clientSide"))return console.warn("AG Grid: crossing filtering is only supported in the client side row model."),{chartData:[],columnNames:{}}}this.gos.isRowModelType("serverSide")&&e.pivoting&&this.updatePivotKeysForSSRM();const s=this.extractRowsFromGridRowModel(e);return s.chartData=this.aggregateRowsByDimension(e,s.chartData),s}extractRowsFromGridRowModel(e){const{crossFiltering:i,startRow:s,endRow:r,valueCols:n,dimensionCols:o,grouping:a}=e;let l=[];const c={},u={},d={};let h={},p=[],f;if(i)h=this.getFilteredRowNodes(),p=this.getAllRowNodes(),f=p.length;else{const y=this.gridRowModel.getRowCount()-1;s===r&&s===0&&o.length===0&&n.length===0?f=0:f=(r>=0?Math.min(r,y):y)-s+1}f>0&&n.forEach(y=>{let v=[];const C=y.getColDef().pivotKeys;C&&(v=C.slice());const b=y.getColDef().headerName;b&&v.push(b),v.length>0&&(c[y.getId()]=v)});let m=0;for(let y=0;y<f;y++){const v=i?p[y]:this.gridRowModel.getRow(y+s);if(v.footer){m++;continue}const C={};o.forEach(b=>{const T=b.colId,A=this.columnModel.getGridColumn(T);if(A){const I=this.valueService.getValue(A,v);if(a){const D=I&&I.toString?String(I.toString()):"",F=mV.getGroupLabels(v,D);C[T]={labels:F,toString:function(){return this.labels.filter(U=>!!U).reverse().join(" - ")}},v.group&&(u[F.toString()]=y-m);const B=F.slice(1,F.length).toString();B&&(d[B]=u[B])}else C[T]=I}else C[gc.DEFAULT_CATEGORY]=y+1}),n.forEach(b=>{const T=b.getColId();if(i){const A=T+"-filtered-out",I=this.valueService.getValue(b,v),D=I!=null&&typeof I.toNumber=="function"?I.toNumber():I;h[v.id]?(C[T]=D,C[A]=e.aggFunc||e.isScatter?void 0:0):(C[T]=e.aggFunc||e.isScatter?void 0:0,C[A]=D)}else{let A=this.valueService.getValue(b,v);A&&A.hasOwnProperty("toString")&&(A=parseFloat(A.toString())),C[T]=A!=null&&typeof A.toNumber=="function"?A.toNumber():A}}),l.push(C)}let g;if(a){const y=Q.values(d),v=l;l=[],g=[];for(let C=0;C<v.length;C++)(Q.includes(y,C)?g:l).push(v[C])}return{chartData:l,columnNames:c,groupChartData:g}}aggregateRowsByDimension(e,i){const s=e.dimensionCols;if(!e.aggFunc||s.length===0)return i;const r=Q.last(s),n=r&&r.colId,o={},a=[];if(i.forEach(l=>{let c=o;s.forEach(u=>{const d=u.colId,h=l[d];if(d===n){let p=c[h];p||(p={__children:[]},s.forEach(f=>{const m=f.colId;p[m]=l[m]}),c[h]=p,a.push(p)),p.__children.push(l)}else c[h]||(c[h]={}),c=c[h]})}),vt.__assertRegistered(Ut.RowGroupingModule,"Charting Aggregation",this.context.getGridId())){const l=this.aggregationStage;a.forEach(c=>e.valueCols.forEach(u=>{if(e.crossFiltering)e.valueCols.forEach(d=>{const h=d.getColId(),p=c.__children.filter(v=>typeof v[h]<"u").map(v=>v[h]);let f=l.aggregateValues(p,e.aggFunc);c[d.getId()]=f&&typeof f.value<"u"?f.value:f;const m=`${h}-filtered-out`,g=c.__children.filter(v=>typeof v[m]<"u").map(v=>v[m]);let y=l.aggregateValues(g,e.aggFunc);c[m]=y&&typeof y.value<"u"?y.value:y});else{const d=c.__children.map(p=>p[u.getId()]);let h=l.aggregateValues(d,e.aggFunc);c[u.getId()]=h&&typeof h.value<"u"?h.value:h}}))}return a}updatePivotKeysForSSRM(){const e=this.columnModel.getSecondaryColumns();if(!e)return;const i=this.extractPivotKeySeparator(e);e.forEach(s=>{if(i==="")s.getColDef().pivotKeys=[];else{const r=s.getColId().split(i);s.getColDef().pivotKeys=r.slice(0,r.length-1)}})}extractPivotKeySeparator(e){if(e.length===0)return"";const i=(r,n)=>{const o=r.getGroupId();return r.getParent()?i(r.getParent(),o):n.split(o)[1][0]},s=e[0];return s.getParent()==null?"":i(s.getParent(),s.getColId())}static getGroupLabels(e,i){const s=[i];for(;e&&e.level!==0;)e=e.parent,e&&s.push(e.key);return s}getFilteredRowNodes(){const e={};return this.gridRowModel.forEachNodeAfterFilterAndSort(i=>{e[i.id]=i}),e}getAllRowNodes(){let e=[];return this.gridRowModel.forEachNode(i=>{e.push(i)}),this.sortRowNodes(e)}sortRowNodes(e){const i=this.sortController.getSortOptions();return!i||i.length==0?e:this.rowNodeSorter.doFullSort(e,i)}};Ce([W("rowModel")],bp.prototype,"gridRowModel",2);Ce([W("valueService")],bp.prototype,"valueService",2);Ce([W("columnModel")],bp.prototype,"columnModel",2);Ce([W("rowNodeSorter")],bp.prototype,"rowNodeSorter",2);Ce([W("sortController")],bp.prototype,"sortController",2);Ce([Vt("aggregationStage")],bp.prototype,"aggregationStage",2);var Bte=bp,Nh=class extends ye{constructor(){super(...arguments),this.valueColsWithoutSeriesType=new Set}postConstruct(){const t=()=>this.valueColsWithoutSeriesType.clear();this.addManagedListener(this.eventService,K.EVENT_NEW_COLUMNS_LOADED,t),this.addManagedListener(this.eventService,K.EVENT_ROW_DATA_UPDATED,t)}getColumn(t){return this.columnModel.getPrimaryColumn(t)}getAllDisplayedColumns(){return this.columnModel.getAllDisplayedColumns()}getColDisplayName(t){return this.columnModel.getDisplayNameForColumn(t,"chart")}getRowGroupColumns(){return this.columnModel.getRowGroupColumns()}getGroupDisplayColumns(){return this.columnModel.getGroupDisplayColumns()}isPivotMode(){return this.columnModel.isPivotMode()}isPivotActive(){return this.columnModel.isPivotActive()}getChartColumns(){const t=this.columnModel.getAllGridColumns(),e=new Set,i=new Set;return t.forEach(s=>{const r=s.getColDef(),n=r.chartDataType;if(n)switch(n){case"category":case"time":e.add(s);return;case"series":i.add(s);return;case"excluded":return;default:console.warn(`AG Grid: unexpected chartDataType value '${n}' supplied, instead use 'category', 'series' or 'excluded'`);break}if(r.colId==="ag-Grid-AutoColumn"){e.add(s);return}if(!s.isPrimary()){i.add(s);return}(this.isInferredValueCol(s)?i:e).add(s)}),{dimensionCols:e,valueCols:i}}isInferredValueCol(t){const e=t.getColId();if(e==="ag-Grid-AutoColumn")return!1;const i=this.rowPositionUtils.getRowNode({rowIndex:0,rowPinned:null});if(!i)return this.valueColsWithoutSeriesType.has(e);let s=this.valueService.getValue(t,i);s==null&&(s=this.extractLeafData(i,t)),s!=null&&typeof s.toNumber=="function"&&(s=s.toNumber());const r=typeof s=="number";return r&&this.valueColsWithoutSeriesType.add(e),r}extractLeafData(t,e){if(!t.allLeafChildren)return null;for(let i=0;i<t.allLeafChildren.length;i++){const s=t.allLeafChildren[i],r=this.valueService.getValue(e,s);if(r!=null)return r}return null}destroy(){this.valueColsWithoutSeriesType.clear(),super.destroy()}};Ce([W("columnModel")],Nh.prototype,"columnModel",2);Ce([W("valueService")],Nh.prototype,"valueService",2);Ce([W("rowPositionUtils")],Nh.prototype,"rowPositionUtils",2);Ce([de],Nh.prototype,"postConstruct",1);Nh=Ce([Me("chartColumnService")],Nh);var t2=class vV extends ye{constructor(e){var i;super(),this.suppressComboChartWarnings=!1,this.chartDataModel=e,this.seriesChartTypes=(i=e.params.seriesChartTypes)!=null?i:[]}init(){this.initComboCharts()}update(e){this.seriesChartTypes=e??this.seriesChartTypes,this.initComboCharts(),this.updateSeriesChartTypes()}initComboCharts(){const e=this.seriesChartTypes&&this.seriesChartTypes.length>0;(this.chartDataModel.chartType==="customCombo"||e)&&(this.chartDataModel.chartType="customCombo",this.savedCustomSeriesChartTypes=this.seriesChartTypes||[])}updateSeriesChartTypes(){if(this.chartDataModel.isComboChart()){if(this.seriesChartTypes=this.seriesChartTypes.map(e=>{const i=["groupedColumn","stackedColumn","stackedArea"].includes(e.chartType);return e.secondaryAxis=i?!1:e.secondaryAxis,e}),this.chartDataModel.chartType==="customCombo"){this.updateSeriesChartTypesForCustomCombo();return}this.updateChartSeriesTypesForBuiltInCombos()}}updateSeriesChartTypesForCustomCombo(){!(this.seriesChartTypes&&this.seriesChartTypes.length>0)&&!this.suppressComboChartWarnings&&console.warn("AG Grid: 'seriesChartTypes' are required when the 'customCombo' chart type is specified."),this.seriesChartTypes=this.seriesChartTypes.map(r=>(vV.SUPPORTED_COMBO_CHART_TYPES.includes(r.chartType)||(console.warn(`AG Grid: invalid chartType '${r.chartType}' supplied in 'seriesChartTypes', converting to 'line' instead.`),r.chartType="line"),r));const i=r=>{(!this.savedCustomSeriesChartTypes||this.savedCustomSeriesChartTypes.length===0)&&(this.savedCustomSeriesChartTypes=this.seriesChartTypes);const n=this.savedCustomSeriesChartTypes.find(o=>o.colId===r.colId);return n||(r.selected&&!this.suppressComboChartWarnings&&console.warn(`AG Grid: no 'seriesChartType' found for colId = '${r.colId}', defaulting to 'line'.`),{colId:r.colId,chartType:"line",secondaryAxis:!1})},s=this.chartDataModel.valueColState.map(i);this.seriesChartTypes=s,this.savedCustomSeriesChartTypes=s,this.suppressComboChartWarnings=!0}updateChartSeriesTypesForBuiltInCombos(){const{chartType:e,valueColState:i}=this.chartDataModel;let s=e==="columnLineCombo"?"groupedColumn":"stackedArea",r=e==="columnLineCombo"?"line":"groupedColumn";const n=i.filter(a=>a.selected),o=Math.ceil(n.length/2);this.seriesChartTypes=n.map((a,l)=>{const c=l>=o?r:s;return{colId:a.colId,chartType:c,secondaryAxis:!1}})}};t2.SUPPORTED_COMBO_CHART_TYPES=["line","groupedColumn","stackedColumn","area","stackedArea"];Ce([de],t2.prototype,"init",1);var Vte=t2,yV={area:{isCartesian:!0,canInvert:!0},bar:{isCartesian:!0,canInvert:!0},histogram:{isCartesian:!0},line:{isCartesian:!0,canInvert:!0},pie:{isPie:!0},donut:{isPie:!0,canInvert:!0},scatter:{isCartesian:!0},bubble:{isCartesian:!0},"radial-column":{isPolar:!0,isEnterprise:!0,isRadial:!0,canInvert:!0},"radial-bar":{isPolar:!0,isEnterprise:!0,isRadial:!0,canInvert:!0},"radar-line":{isPolar:!0,isEnterprise:!0,canInvert:!0},"radar-area":{isPolar:!0,isEnterprise:!0,canInvert:!0},nightingale:{isPolar:!0,isEnterprise:!0,canInvert:!0},"range-bar":{isCartesian:!0,isEnterprise:!0,canSwitchDirection:!0},"range-area":{isCartesian:!0,isEnterprise:!0},"box-plot":{isCartesian:!0,isEnterprise:!0,canSwitchDirection:!0},treemap:{isEnterprise:!0,isHierarchical:!0},sunburst:{isEnterprise:!0,isHierarchical:!0},heatmap:{isCartesian:!0,isEnterprise:!0},waterfall:{isCartesian:!0,isEnterprise:!0,canSwitchDirection:!0}};function Hte(t){return!!yV[t]}function CV(t){return np.COMBO_CHART_TYPES.includes(t)}function wd(t,e){var i;return!!((i=yV[t])!=null&&i[e])}function jte(t){return wd(ss(t),"isEnterprise")}var Ute=new Set(["stackedColumn","normalizedColumn","stackedBar","normalizedBar"]);function Wte(t){return Ute.has(t)}function ih(t){return wd(t,"isCartesian")}function _L(t){return wd(t,"isPolar")}function zte(t){return wd(t,"isRadial")}function sh(t){return wd(t,"isHierarchical")}function qy(t){return t==="doughnut"?"donut":t}function bV(t){return np.CHART_TYPE_TO_SERIES_TYPE[t]}function ss(t){var e;return(e=bV(t))!=null?e:"line"}function wV(t){return wd(t,"isPie")}function $te(t){return t==="pie"||t==="waterfall"||t==="histogram"}function AA(t){return sh(ss(t))?void 0:1}function CS(t){return sh(ss(t))?2:$te(t)?1:void 0}function SV(t){return wd(ss(t),"canInvert")}function Kte(t){return wd(ss(t),"canSwitchDirection")}var l0=class RA extends ye{constructor(e){super(),this.unlinked=!1,this.chartData=[],this.valueColState=[],this.dimensionColState=[],this.columnNames={},this.crossFiltering=!1,this.grouping=!1,this.params=e,this.chartId=e.chartId,this.setParams(e)}setParams(e){const{chartType:i,pivotChart:s,chartThemeName:r,switchCategorySeries:n,aggFunc:o,cellRange:a,suppressChartRanges:l,unlinkChart:c,crossFiltering:u,seriesGroupType:d}=e;this.chartType=i,this.pivotChart=s??!1,this.chartThemeName=r,this.switchCategorySeries=!!n,this.aggFunc=o,this.referenceCellRange=a,this.suppliedCellRange=a,this.suppressChartRanges=l??!1,this.unlinked=!!c,this.crossFiltering=!!u,this.seriesGroupType=d}init(){this.datasource=this.createManagedBean(new Bte),this.chartColumnService=this.createManagedBean(new Nh),this.comboChartModel=this.createManagedBean(new Vte(this)),this.updateCellRanges({setColsFromRange:!0}),this.updateData()}updateModel(e){const{cellRange:i,seriesChartTypes:s}=e;i!==this.suppliedCellRange&&(this.dimensionCellRange=void 0,this.valueCellRange=void 0),this.setParams(e),this.updateSelectedDimensions(i==null?void 0:i.columns),this.updateCellRanges({setColsFromRange:!0}),(this.isComboChart()||s)&&this.comboChartModel.update(s),this.unlinked||this.updateData()}updateCellRanges(e){const{updatedColState:i,resetOrder:s,maintainColState:r,setColsFromRange:n}=e??{};this.valueCellRange&&(this.referenceCellRange=this.valueCellRange);const{dimensionCols:o,valueCols:a}=this.chartColumnService.getChartColumns(),l=this.getAllColumnsFromRanges();i&&this.updateColumnState(i,s),this.setDimensionCellRange(o,l,i),this.setValueCellRange(a,l,n),!i&&!r&&(this.resetColumnState(),this.syncDimensionCellRange()),this.comboChartModel.updateSeriesChartTypes()}updateData(){const{startRow:e,endRow:i}=this.getRowIndexes();this.pivotChart&&this.resetColumnState(),this.grouping=this.isGrouping();const s={aggFunc:this.aggFunc,dimensionCols:this.getSelectedDimensions(),grouping:this.grouping,pivoting:this.isPivotActive(),crossFiltering:this.crossFiltering,valueCols:this.getSelectedValueCols(),startRow:e,endRow:i,isScatter:Q.includes(["scatter","bubble"],this.chartType)},{chartData:r,columnNames:n,groupChartData:o}=this.datasource.getData(s);this.chartData=r,this.groupChartData=o,this.columnNames=n,this.categoryAxisType=void 0}isGrouping(){const e=this.gos.get("treeData"),i=e?null:this.chartColumnService.getRowGroupColumns(),s=e||i&&i.length>0,r=this.getSelectedDimensions().map(({colId:a})=>a),o=this.chartColumnService.getGroupDisplayColumns().map(a=>a.getColId()).some(a=>r.includes(a));return!!s&&o}getSelectedValueCols(){return this.valueColState.filter(e=>e.selected).map(e=>e.column)}getSelectedDimensions(){return this.dimensionColState.filter(e=>e.selected)}getColDisplayName(e){return this.chartColumnService.getColDisplayName(e)}isPivotMode(){return this.chartColumnService.isPivotMode()}getChartDataType(e){const i=this.chartColumnService.getColumn(e);return i?i.getColDef().chartDataType:void 0}isPivotActive(){return this.chartColumnService.isPivotActive()}createCellRange(e,...i){return{id:this.chartId,startRow:this.referenceCellRange.startRow,endRow:this.referenceCellRange.endRow,columns:i,startColumn:e===jl.DIMENSION||this.referenceCellRange.startColumn==null?i[0]:this.referenceCellRange.startColumn,type:e}}getAllColumnsFromRanges(){if(this.pivotChart)return Q.convertToSet(this.chartColumnService.getAllDisplayedColumns());const e=this.dimensionCellRange||this.valueCellRange?[]:this.referenceCellRange.columns;return this.dimensionCellRange&&e.push(...this.dimensionCellRange.columns),this.valueCellRange&&e.push(...this.valueCellRange.columns),Q.convertToSet(e)}getRowIndexes(){let e=0,i=0;const{rangeService:s,valueCellRange:r,dimensionCellRange:n}=this,o=r||n;if(s&&o){e=s.getRangeStartRow(o).rowIndex;const a=s.getRangeEndRow(o);i=a.rowPinned==="bottom"?-1:a.rowIndex}return{startRow:e,endRow:i}}resetColumnState(){const{dimensionCols:e,valueCols:i}=this.chartColumnService.getChartColumns(),s=this.getAllColumnsFromRanges(),r=this.valueColState.length<1;this.dimensionColState=[],this.valueColState=[];const n=sh(ss(this.chartType));let o=!1,a=1;const l=this.suppliedCellRange.columns[0];e.forEach(d=>{const h=d.getColId()==="ag-Grid-AutoColumn";let p=!1;this.crossFiltering&&this.aggFunc?l.getColId()===d.getColId()&&(p=!0):p=h?!0:(!o||n)&&s.has(d),this.dimensionColState.push({column:d,colId:d.getColId(),displayName:this.getColDisplayName(d),selected:p,order:a++}),p&&(o=!0)});const c={colId:RA.DEFAULT_CATEGORY,displayName:this.chartTranslationService.translate("defaultCategory"),selected:!o,order:0};this.dimensionColState.unshift(c);const u=this.referenceCellRange.columns.filter(d=>i.has(d));i.forEach(d=>{r&&Q.includes(this.referenceCellRange.columns,d)&&(d=u.shift()),this.valueColState.push({column:d,colId:d.getColId(),displayName:this.getColDisplayName(d),selected:s.has(d),order:a++})})}updateColumnState(e,i){const s=u=>u.colId===e.colId,{dimensionColState:r,valueColState:n}=this,o=r.find(s),a=n.find(s);if(o)if(sh(ss(this.chartType)))o.selected=e.selected;else{const d=e.selected?o:r.filter(h=>h!==o).find(({selected:h})=>h);r.forEach(h=>h.selected=h===d)}else a&&(a.selected=e.selected);const l=[...r,...n],c=[];i||(l.forEach((u,d)=>{d===e.order&&c.push(e.colId),u.colId!==e.colId&&c.push(u.colId)}),l.forEach(u=>{const d=c.indexOf(u.colId);u.order=d>=0?c.indexOf(u.colId):l.length-1})),this.reorderColState()}reorderColState(){const e=(i,s)=>i.order-s.order;this.dimensionColState.sort(e),this.valueColState.sort(e)}setDimensionCellRange(e,i,s){this.dimensionCellRange=void 0;const r=sh(ss(this.chartType));if(!s&&!this.dimensionColState.length){const l=new Array;e.forEach(c=>{l.length>0&&!r||!i.has(c)||l.push(c)}),l.length>0&&(this.dimensionCellRange=this.createCellRange(jl.DIMENSION,...l));return}let n=s?[s]:[];if(this.crossFiltering&&this.aggFunc){const l=this.suppliedCellRange.columns[0];n=this.dimensionColState.filter(c=>c.colId===l.getColId())}else(r||n.length===0||n.some(({column:l})=>!l||!e.has(l)))&&(n=this.dimensionColState.filter(l=>l.selected));const o=n.length===1?n[0].colId===RA.DEFAULT_CATEGORY:!1,a=n.map(({column:l})=>l).filter(l=>l!=null);a.length>0&&!o&&(this.dimensionCellRange=this.createCellRange(jl.DIMENSION,...a))}setValueCellRange(e,i,s){this.valueCellRange=void 0;const r=[],n=CS(this.chartType);let o=0;if(e.forEach(a=>{s?(n==null||o<n)&&i.has(a)&&(r.push(a),o++):this.valueColState.some(l=>l.selected&&l.colId===a.getColId())&&r.push(a)}),r.length>0){let a=[];this.valueColState.length>0?a=this.valueColState.map(l=>l.colId):i.forEach(l=>a.push(l.getColId())),r.sort((l,c)=>a.indexOf(l.getColId())-a.indexOf(c.getColId())),this.valueCellRange=this.createCellRange(jl.VALUE,...r)}}resetCellRanges(e,i){if(!e&&!i)return;const{dimensionCols:s,valueCols:r}=this.chartColumnService.getChartColumns(),n=this.getAllColumnsFromRanges();e&&this.setDimensionCellRange(s,n),i&&this.setValueCellRange(r,n)}updateSelectedDimensions(e){const i=new Set(e.map(r=>r.getColId()));if(sh(ss(this.chartType))){const r=this.dimensionColState.filter(o=>i.has(o.colId)),n=new Set(r.map(o=>o.colId));this.dimensionColState=this.dimensionColState.map(o=>Bt(Xe({},o),{selected:n.has(o.colId)}))}else{const n=(this.dimensionColState.find(o=>i.has(o.colId))||this.dimensionColState[0]).colId;this.dimensionColState=this.dimensionColState.map(o=>Bt(Xe({},o),{selected:o.colId===n}))}}syncDimensionCellRange(){const e=this.getSelectedDimensions();if(e.length===0)return;const i=e.map(({column:s})=>s).filter(s=>s!=null);i.length>0&&(this.dimensionCellRange=this.createCellRange(jl.DIMENSION,...i))}isComboChart(e){return CV(e??this.chartType)}};l0.DEFAULT_CATEGORY="AG-GRID-DEFAULT-CATEGORY";Ce([W("rangeService")],l0.prototype,"rangeService",2);Ce([W("chartTranslationService")],l0.prototype,"chartTranslationService",2);Ce([de],l0.prototype,"init",1);var gc=l0,xV=["number","category","grouped-category","log","time"];function Yte(t){switch(t){case"bar":case"stackedBar":case"normalizedBar":return["number","category"];case"groupedBar":return["number","grouped-category"];case"column":case"stackedColumn":case"normalizedColumn":case"line":case"area":case"stackedArea":case"normalizedArea":case"histogram":return["category","number"];case"groupedColumn":return["grouped-category","number"];case"scatter":case"bubble":return["number","number"];default:return}}function qte(t){return Array.isArray(t)?[]:{}}function Xy(t,e){return e.clone!==!1&&e.isMergeableObject(t)?Eg(qte(t),t,e):t}function Xte(t,e,i){return t.concat(e).map(function(s){return Xy(s,i)})}function Zte(t,e){if(!e.customMerge)return Eg;const i=e.customMerge(t);return typeof i=="function"?i:Eg}function Jte(t){return Object.getOwnPropertySymbols?Object.getOwnPropertySymbols(t).filter(function(e){return t.propertyIsEnumerable(e)}):[]}function AL(t){return Object.keys(t).concat(Jte(t))}function EV(t,e){try{return e in t}catch{return!1}}function Qte(t,e){return EV(t,e)&&!(Object.hasOwnProperty.call(t,e)&&Object.propertyIsEnumerable.call(t,e))}function eie(t={},e={},i){const s={};return i.isMergeableObject(t)&&AL(t).forEach(function(r){s[r]=Xy(t[r],i)}),AL(e).forEach(function(r){Qte(t,r)||(EV(t,r)&&i.isMergeableObject(e[r])?s[r]=Zte(r,i)(t[r],e[r],i):s[r]=Xy(e[r],i))}),s}function tie(t){return iie(t)&&!sie(t)}function iie(t){return!!t&&typeof t=="object"}function sie(t){const e=Object.prototype.toString.call(t);return e==="[object RegExp]"||e==="[object Date]"}function Eg(t,e,i){i=i||{},i.arrayMerge=i.arrayMerge||Xte,i.isMergeableObject=i.isMergeableObject||tie,i.cloneUnlessOtherwiseSpecified=Xy;const s=Array.isArray(e),r=Array.isArray(t);return s===r?s?i.arrayMerge(t,e,i):eie(t,e,i):Xy(e,i)}function $d(t,e,i){if(t==null)return i;const s=e.split(".");let r=t;for(;s.length>1;)if(r=r[s.shift()],r==null)return i;const n=r[s[0]];return n??i}function rie(t,e,i){if(t==null)return;const s=e.split(".");let r=t;s.forEach((n,o)=>{r[n]||(r[n]={}),o<s.length-1&&(r=r[n])}),r[s[s.length-1]]=i}function nie(t,e,i,s,r){var n;const{chartOptionsToRestore:o,chartPaletteToRestore:a,chartThemeToRestore:l}=t,c=uie(t),u=i2(c),d=u?{baseTheme:c}:(n=TV(t,c))!=null?n:{},h=t.getGridOptionsChartThemeOverrides(),p=t.apiChartThemeOverrides,f=ss(t.chartType),m=t.crossFiltering?aie(e,t,f):void 0,v=[u?cie(t,i,(()=>{const C=b=>b?Object.keys(b).some(T=>$d(b[T],"title.enabled",!1)):!1;return C(h)||C(p)})()):void 0,s,m,h,p,Xe({},o??{}),r].filter(C=>!!C).reduce((C,b)=>({baseTheme:C,overrides:b}),d);if(a&&c===l){const C=Uo.getChartTheme(d).palette;oie(a,C)||(v.palette=a)}return v}function oie(t,e){const i=(s,r)=>s.length!==r.length?!1:s.every((n,o)=>n===r[o]);return i(t.fills,e.fills)&&i(t.strokes,e.strokes)}function i2(t){return Q.includes(Object.keys(Uo.themes),t)}function aie(t,e,i){const s={listeners:{legendItemClick:r=>{t.getChart().series.forEach(o=>{o.toggleSeriesItem(r.itemId,r.enabled),o.toggleSeriesItem(`${r.itemId}-filtered-out`,r.enabled)})}}};return{[i]:{tooltip:{delay:500},legend:s,listeners:{click:r=>e.crossFilterCallback(r,!0)}}}}var lie=xV.reduce((t,e)=>Bt(Xe({},t),{[e]:{title:{_enabledFromTheme:!0}}}),{});function cie(t,e,i){const s=t.getExtraPaddingDirections();return{common:Bt(Xe({},e?{animation:{duration:500}}:void 0),{axes:lie,padding:{top:!i&&s.includes("top")?40:20,right:s.includes("right")?30:20,bottom:s.includes("bottom")?40:20,left:s.includes("left")?30:20}}),pie:{series:{title:{_enabledFromTheme:!0},calloutLabel:{_enabledFromTheme:!0},sectorLabel:{enabled:!1,_enabledFromTheme:!0}}},donut:{series:{title:{_enabledFromTheme:!0},calloutLabel:{_enabledFromTheme:!0},sectorLabel:{enabled:!1,_enabledFromTheme:!0}}}}}function uie(t){let e=t.getChartThemeName();const i=t.getChartThemes();return Q.includes(i,e)||(e=i[0]),e}function TV(t,e){const{customChartThemes:i}=t,s=i&&i[e];return s||console.warn(`AG Grid: no stock theme exists with the name '${e}' and no custom chart theme with that name was supplied to 'customChartThemes'`),s}var Cm=t=>e=>e==null?!0:t(e),RL=t=>typeof t=="string",_V=t=>typeof t=="boolean",die=t=>typeof t=="object",Wl=(t,e)=>i=>`AG Grid - unable to update chart as invalid params supplied:  \`${t}: ${i}\`, expected ${e}.`,AV=t=>`${t} is not supported in AG Charts Community (either 'ag-grid-charts-enterprise' or '@ag-grid-enterprise/charts-enterprise' hasn't been loaded). See https://www.ag-grid.com/javascript-data-grid/integrated-charts-installation/ for more details.`,ks=class Ms{static isEnterprise(){return ym.enterpriseModule.isEnterprise}static isValidChartType(e){return!!bV(e)||CV(e)}static isLegacyChartType(e){return Ms.legacyChartTypes.includes(e)}static validateUpdateParams(e){switch(e.type){case"rangeChartUpdate":return Ms.validateUpdateRangeChartParams(e);case"pivotChartUpdate":return Ms.validateUpdatePivotChartParams(e);case"crossFilterChartUpdate":return Ms.validateUpdateCrossFilterChartParams(e);default:return console.warn(`AG Grid - Invalid value supplied for 'type': ${e.type}. It must be either 'rangeChartUpdate', 'pivotChartUpdate', or 'crossFilterChartUpdate'.`),!1}}static validateCreateParams(e){return Ms.validateProperties(e,[Ms.enterpriseChartTypeValidation,Ms.switchCategorySeriesValidation])}static validateUpdateRangeChartParams(e){const i=[...Ms.commonUpdateValidations,Ms.enterpriseChartTypeValidation,...Ms.cellRangeValidations,{property:"seriesChartTypes",validationFn:s=>s===void 0||Array.isArray(s)&&s.every(die),warnMessage:Wl("seriesChartTypes","Array of SeriesChartType")}];return Ms.validateProperties(e,i,[...Ms.baseUpdateChartParams,"cellRange","suppressChartRanges","switchCategorySeries","aggFunc","seriesChartTypes","seriesGroupType"],"UpdateRangeChartParams")}static validateUpdatePivotChartParams(e){const i=[...Ms.commonUpdateValidations];return Ms.validateProperties(e,i,[...Ms.baseUpdateChartParams],"UpdatePivotChartParams")}static validateUpdateCrossFilterChartParams(e){const i=[...Ms.commonUpdateValidations,...Ms.cellRangeValidations];return Ms.validateProperties(e,i,[...Ms.baseUpdateChartParams,"cellRange","suppressChartRanges","aggFunc"],"UpdateCrossFilterChartParams")}static validateProperties(e,i,s,r){let n;for(const o of i){const{property:a,validationFn:l,warnMessage:c,warnIfFixed:u}=o;if(a in e){const d=e[a],h=l(d);if(h===!0)continue;if(h===!1)return console.warn(c(d)),!1;n=n||Xe({},e),n[a]=h,u&&console.warn(c(d))}}if(s){for(const o in e)if(!s.includes(o))return console.warn(`AG Grid - Unexpected property supplied. ${r} does not contain: \`${o}\`.`),!1}return n||!0}};ks.legacyChartTypes=["doughnut"];ks.baseUpdateChartParams=["type","chartId","chartType","chartThemeName","chartThemeOverrides","unlinkChart"];ks.validateChartType=Cm(t=>{if(ks.isValidChartType(t))return!0;if(ks.isLegacyChartType(t)){const e=qy(t);return Q.warnOnce(`The chart type '${t}' has been deprecated. Please use '${e}' instead.`),e}return!1});ks.validateAgChartThemeOverrides=Cm(t=>typeof t=="object");ks.validateChartParamsCellRange=Cm(t=>typeof t=="object");ks.validateAggFunc=Cm(t=>typeof t=="string"||typeof t=="function");ks.enterpriseChartTypeValidation={property:"chartType",validationFn:Cm(t=>ks.isEnterprise()||!t||!jte(t)),warnMessage:t=>AV(`The '${t}' chart type`)};ks.switchCategorySeriesValidation={property:"switchCategorySeries",validationFn:Cm(t=>{if(!t||ks.isEnterprise())return!0}),warnMessage:()=>AV("'switchCategorySeries' has been ignored as it"),warnIfFixed:!0};ks.commonUpdateValidations=[{property:"chartId",validationFn:RL,warnMessage:Wl("chartId","string")},{property:"chartType",validationFn:ks.validateChartType,warnMessage:Wl("chartType","ChartType")},{property:"chartThemeName",validationFn:RL,warnMessage:Wl("chartThemeName","string")},{property:"chartThemeOverrides",validationFn:ks.validateAgChartThemeOverrides,warnMessage:Wl("chartThemeOverrides","AgChartThemeOverrides")},{property:"unlinkChart",validationFn:_V,warnMessage:Wl("unlinkChart","boolean")}];ks.cellRangeValidations=[{property:"cellRange",validationFn:ks.validateChartParamsCellRange,warnMessage:Wl("cellRange","ChartParamsCellRange")},{property:"suppressChartRanges",validationFn:_V,warnMessage:Wl("suppressChartRanges","boolean")},{property:"aggFunc",validationFn:ks.validateAggFunc,warnMessage:Wl("aggFunc","string or IAggFunc")},ks.switchCategorySeriesValidation];var RV=ks,MV=["ag-default","ag-material","ag-sheets","ag-polychroma","ag-vivid"],Vc=class Wd extends ye{constructor(e){super(),this.model=e,this.isEnterprise=()=>ym.enterpriseModule.isEnterprise}init(){this.setChartRange(),this.addManagedListener(this.eventService,K.EVENT_RANGE_SELECTION_CHANGED,e=>{e.id&&e.id===this.model.chartId&&this.updateForRangeChange()}),this.model.unlinked&&this.rangeService&&this.rangeService.setCellRanges([]),this.addManagedListener(this.eventService,K.EVENT_COLUMN_MOVED,this.updateForGridChange.bind(this)),this.addManagedListener(this.eventService,K.EVENT_COLUMN_PINNED,this.updateForGridChange.bind(this)),this.addManagedListener(this.eventService,K.EVENT_COLUMN_VISIBLE,this.updateForGridChange.bind(this)),this.addManagedListener(this.eventService,K.EVENT_COLUMN_ROW_GROUP_CHANGED,this.updateForGridChange.bind(this)),this.addManagedListener(this.eventService,K.EVENT_MODEL_UPDATED,this.updateForGridChange.bind(this)),this.addManagedListener(this.eventService,K.EVENT_CELL_VALUE_CHANGED,this.updateForDataChange.bind(this))}update(e){if(!this.validUpdateType(e))return!1;const i=RV.validateUpdateParams(e);if(!i)return!1;const s=i===!0?e:i;return this.applyValidatedChartParams(s),!0}applyValidatedChartParams(e){var i,s,r,n,o,a,l,c,u;const{chartId:d,chartType:h,chartThemeName:p,unlinkChart:f}=e,m={chartId:d,pivotChart:this.model.pivotChart,chartType:h??this.model.chartType,chartThemeName:p??this.model.chartThemeName,unlinkChart:f??this.model.unlinked,cellRange:this.model.suppliedCellRange,switchCategorySeries:this.model.switchCategorySeries,aggFunc:this.model.aggFunc,seriesChartTypes:void 0,suppressChartRanges:!1,crossFiltering:!1};let g=Xe({},m);switch(e.type){case"rangeChartUpdate":g.cellRange=(i=this.createCellRange(e))!=null?i:this.model.suppliedCellRange,g.switchCategorySeries=(s=e.switchCategorySeries)!=null?s:this.model.switchCategorySeries,g.aggFunc=(r=e.aggFunc)!=null?r:this.model.aggFunc,g.seriesChartTypes=e.seriesChartTypes,g.suppressChartRanges=(n=e.suppressChartRanges)!=null?n:this.model.suppressChartRanges,g.seriesGroupType=(o=e.seriesGroupType)!=null?o:this.model.seriesGroupType;break;case"crossFilterChartUpdate":g.cellRange=(a=this.createCellRange(e))!=null?a:this.model.suppliedCellRange,g.switchCategorySeries=!1,g.aggFunc=(l=e.aggFunc)!=null?l:this.model.aggFunc,g.crossFiltering=!0,g.suppressChartRanges=(c=e.suppressChartRanges)!=null?c:this.model.suppressChartRanges;break;case"pivotChartUpdate":g.switchCategorySeries=!1;break}this.model.updateModel(g),g.unlinkChart||g.suppressChartRanges?(u=this.rangeService)==null||u.setCellRanges([]):this.setChartRange()}updateForGridChange(e){if(this.model.unlinked)return;const{maintainColState:i,setColsFromRange:s}=e??{};this.model.updateCellRanges({maintainColState:i,setColsFromRange:s}),this.model.updateData(),this.setChartRange()}updateForDataChange(){this.model.unlinked||(this.model.updateData(),this.raiseChartModelUpdateEvent())}updateForRangeChange(){this.updateForGridChange({setColsFromRange:!0}),this.raiseChartRangeSelectionChangedEvent()}updateForPanelChange(e){this.model.updateCellRanges(e),this.model.updateData(),e.skipAnimation&&this.getChartProxy().getChartRef().skipAnimations(),this.setChartRange(),this.raiseChartRangeSelectionChangedEvent()}updateThemeOverrides(e){this.chartProxy.updateThemeOverrides(e)}getChartUpdateParams(e){const s=this.getSelectedValueColState().map(a=>({colId:a.colId,displayName:a.displayName})),r=this.getChartData(),n=this.getSelectedDimensions(),o={data:r,groupData:this.model.groupChartData,grouping:this.isGrouping(),categories:n.map(a=>{var l;return{id:a.colId,name:a.displayName,chartDataType:(l=this.model.categoryAxisType)!=null?l:this.model.getChartDataType(a.colId)}}),fields:s,chartId:this.getChartId(),getCrossFilteringContext:()=>({lastSelectedChartId:"xxx"}),seriesChartTypes:this.getSeriesChartTypes(),updatedOverrides:e,seriesGroupType:this.model.seriesGroupType};return this.isCategorySeriesSwitched()?this.invertCategorySeriesParams(o):o}invertCategorySeriesParams(e){const[i]=e.categories,s=[{id:gc.DEFAULT_CATEGORY,name:""}],r=e.data.map((o,a)=>{const l=`${i.id}:${a}`,c=o[i.id],u=c==null?"":String(c);return{colId:l,displayName:u}}),n=e.fields.map(o=>{const a={[gc.DEFAULT_CATEGORY]:o.displayName};for(const[l,c]of e.data.entries()){const u=`${i.id}:${l}`,d=c[o.colId];a[u]=d}return a});return Bt(Xe({},e),{categories:s,fields:r,data:n})}getChartModel(){const e=this.model.pivotChart?"pivot":"range",i=this.isComboChart()?this.model.comboChartModel.seriesChartTypes:void 0;return{modelType:e,chartId:this.model.chartId,chartType:this.model.chartType,chartThemeName:this.getChartThemeName(),chartOptions:this.chartProxy.getChartThemeOverrides(),chartPalette:this.chartProxy.getChartPalette(),cellRange:this.getCellRangeParams(),switchCategorySeries:this.model.switchCategorySeries,suppressChartRanges:this.model.suppressChartRanges,aggFunc:this.model.aggFunc,unlinkChart:this.model.unlinked,seriesChartTypes:i,seriesGroupType:this.model.seriesGroupType}}getChartId(){return this.model.chartId}getChartData(){return this.model.chartData}getChartType(){return this.model.chartType}setChartType(e){this.updateMultiSeriesAndCategory(this.model.chartType,e),this.model.chartType=e,this.model.comboChartModel.updateSeriesChartTypes(),this.model.switchCategorySeries=!1,this.model.categoryAxisType=void 0,this.model.seriesGroupType=void 0,this.raiseChartModelUpdateEvent(),this.raiseChartOptionsChangedEvent()}isCategorySeriesSwitched(){return this.model.switchCategorySeries&&!this.model.isGrouping()}switchCategorySeries(e){SV(this.getChartType())&&(this.model.switchCategorySeries=e,this.raiseChartModelUpdateEvent())}getAggFunc(){return this.model.aggFunc}setAggFunc(e,i){this.model.aggFunc!==e&&(this.model.aggFunc=e,!i&&(this.model.updateData(),this.raiseChartModelUpdateEvent()))}updateMultiSeriesAndCategory(e,i){var s,r;const n=(u,d)=>{let h=0;for(const p of u)p.selected&&(h>=d?p.selected=!1:h++);h===0&&(u[0].selected=!0)},o=AA(i),a=CS(i),l=o!=null&&((s=AA(e))!=null?s:100)>(o??100),c=a!=null&&((r=CS(e))!=null?r:100)>(a??100);l&&n(this.model.dimensionColState,o),c&&n(this.model.valueColState,a),(l||c)&&(this.model.resetCellRanges(l,c),this.setChartRange(!0))}setChartThemeName(e,i){this.model.chartThemeName=e,i||(this.raiseChartModelUpdateEvent(),this.raiseChartOptionsChangedEvent())}getChartThemeName(){return this.model.chartThemeName}isPivotChart(){return this.model.pivotChart}isPivotMode(){return this.model.isPivotMode()}isGrouping(){return this.model.isGrouping()}isCrossFilterChart(){return this.model.crossFiltering}getThemeNames(){return this.gos.get("chartThemes")||MV}getThemes(){return this.getThemeNames().map(i=>{const r=i2(i)?i:this.chartProxy.lookupCustomChartTheme(i);return Uo.getChartTheme(r)})}getPalettes(){return this.getThemes().map(i=>i.palette)}getThemeTemplateParameters(){return this.getThemes().map(i=>i.getTemplateParameters())}getValueColState(){return this.model.valueColState.map(this.displayNameMapper.bind(this))}getSelectedValueColState(){return this.getValueColState().filter(e=>e.selected)}getSelectedDimensions(){return this.model.getSelectedDimensions()}displayNameMapper(e){const i=this.model.columnNames[e.colId];return e.displayName=i?i.join(" - "):this.model.getColDisplayName(e.column),e}getColStateForMenu(){return{dimensionCols:this.model.dimensionColState,valueCols:this.getValueColState()}}setChartRange(e=!1){this.rangeService&&!this.model.suppressChartRanges&&!this.model.unlinked&&this.rangeService.setCellRanges(this.getCellRanges()),e||this.raiseChartModelUpdateEvent()}detachChartRange(){this.model.unlinked=!this.model.unlinked,this.model.unlinked?this.rangeService&&this.rangeService.setCellRanges([]):this.updateForGridChange(),this.dispatchEvent({type:Wd.EVENT_CHART_LINKED_CHANGED})}setChartProxy(e){this.chartProxy=e}getChartProxy(){return this.chartProxy}isActiveXYChart(){return Q.includes(["scatter","bubble"],this.getChartType())}isChartLinked(){return!this.model.unlinked}customComboExists(){const e=this.model.comboChartModel.savedCustomSeriesChartTypes;return e&&e.length>0}getSeriesChartTypes(){return this.model.comboChartModel.seriesChartTypes}isComboChart(e){return this.model.isComboChart(e)}updateSeriesChartType(e,i,s){const r=this.model.comboChartModel.seriesChartTypes.find(n=>n.colId===e);if(r){const n=this.model.chartType!=="customCombo";n&&(this.model.chartType="customCombo");const o=r.chartType;i!=null&&(r.chartType=i),s!=null&&(r.secondaryAxis=s),this.model.comboChartModel.savedCustomSeriesChartTypes=this.model.comboChartModel.seriesChartTypes,this.model.comboChartModel.updateSeriesChartTypes(),this.updateForDataChange(),n&&this.dispatchEvent({type:Wd.EVENT_CHART_TYPE_CHANGED}),o!==i&&this.dispatchEvent({type:Wd.EVENT_CHART_SERIES_CHART_TYPE_CHANGED}),this.raiseChartOptionsChangedEvent()}}getActiveSeriesChartTypes(){const e=this.getSelectedValueColState().map(i=>i.colId);return this.getSeriesChartTypes().filter(i=>e.includes(i.colId))}getChartSeriesTypes(e){const i=e??this.getChartType();return this.isComboChart(i)?["line","bar","area"]:[ss(i)]}getChartSeriesType(){const e=this.getSeriesChartTypes();if(e.length===0)return"bar";const i=e[0].chartType;return i==="columnLineCombo"?"bar":i==="areaColumnCombo"?"area":ss(i)}getCellRanges(){return[this.model.dimensionCellRange,this.model.valueCellRange].filter(e=>e)}createCellRange(e){var i;return e.cellRange&&((i=this.rangeService)==null?void 0:i.createPartialCellRangeFromRangeParams(e.cellRange,!0))}validUpdateType(e){var i;if(!e.type)return console.warn("AG Grid - Unable to update chart as the 'type' is missing. It must be either 'rangeChartUpdate', 'pivotChartUpdate', or 'crossFilterChartUpdate'."),!1;const s={"Range Chart":()=>!this.isPivotChart()&&!this.isCrossFilterChart(),"Pivot Chart":()=>this.isPivotChart(),"Cross Filter Chart":()=>this.isCrossFilterChart()},r=(i=Object.keys(s).find(o=>s[o]()))!=null?i:"Range Chart",n=e.type===`${r[0].toLowerCase()}${r.slice(1).replace(/ /g,"")}Update`;return n||console.warn(`AG Grid - Unable to update chart as a '${e.type}' update type is not permitted on a ${r}.`),n}getCellRangeParams(){const e=this.getCellRanges(),i=e[0],s=i&&i.startRow||null,r=i&&i.endRow||null;return{rowStartIndex:s&&s.rowIndex,rowStartPinned:s&&s.rowPinned,rowEndIndex:r&&r.rowIndex,rowEndPinned:r&&r.rowPinned,columns:e.reduce((n,o)=>n.concat(o.columns.map(a=>a.getId())),[])}}setCategoryAxisType(e){this.model.categoryAxisType=e,this.raiseChartModelUpdateEvent()}getSeriesGroupType(){var e;return(e=this.model.seriesGroupType)!=null?e:this.chartProxy.getSeriesGroupType()}setSeriesGroupType(e){this.model.seriesGroupType=e,this.raiseChartModelUpdateEvent()}raiseChartModelUpdateEvent(){const e={type:Wd.EVENT_CHART_MODEL_UPDATE};this.dispatchEvent(e)}raiseChartUpdatedEvent(){const e={type:Wd.EVENT_CHART_UPDATED};this.dispatchEvent(e)}raiseChartApiUpdateEvent(){const e={type:Wd.EVENT_CHART_API_UPDATE};this.dispatchEvent(e)}raiseChartOptionsChangedEvent(){const{chartId:e,chartType:i}=this.getChartModel(),s={type:K.EVENT_CHART_OPTIONS_CHANGED,chartId:e,chartType:i,chartThemeName:this.getChartThemeName(),chartOptions:this.chartProxy.getChartThemeOverrides()};this.eventService.dispatchEvent(s)}raiseChartRangeSelectionChangedEvent(){const e={type:K.EVENT_CHART_RANGE_SELECTION_CHANGED,id:this.model.chartId,chartId:this.model.chartId,cellRange:this.getCellRangeParams()};this.eventService.dispatchEvent(e)}destroy(){super.destroy(),this.rangeService&&this.rangeService.setCellRanges([])}};Vc.EVENT_CHART_UPDATED="chartUpdated";Vc.EVENT_CHART_API_UPDATE="chartApiUpdate";Vc.EVENT_CHART_MODEL_UPDATE="chartModelUpdate";Vc.EVENT_CHART_TYPE_CHANGED="chartTypeChanged";Vc.EVENT_CHART_SERIES_CHART_TYPE_CHANGED="chartSeriesChartTypeChanged";Vc.EVENT_CHART_LINKED_CHANGED="chartLinkedChanged";Ce([W("rangeService")],Vc.prototype,"rangeService",2);Ce([de],Vc.prototype,"init",1);var co=Vc,s2=class DV extends Te{constructor(e){super(DV.TEMPLATE),this.config=e??{};const{selectedValueList:i,valueFormatter:s,valueList:r}=this.config;this.selectedValues=i??[],this.valueList=r??[],this.valueFormatter=s??(n=>Q.escapeString(n))}init(){const{ariaLabel:e,onValuesChange:i,dragSourceId:s}=this.config;this.dropZonePanel=this.createManagedBean(new IV({getValues:()=>this.selectedValues,setValues:n=>this.updateValues(n),isDraggable:()=>this.selectedValues.length>1},n=>this.valueFormatter(n),e,s)),this.getGui().appendChild(this.dropZonePanel.getGui()),this.initSelect(),i!=null&&(this.onValuesChange=i)}setValues(e,i){const{added:s,removed:r,updated:n}=this.getChanges(this.valueList,e);let o=!1;return(s.length||r.length||n.length)&&(o=!0),this.valueList=e,this.updateValues(i,o,!0),this}setValueFormatter(e){return this.valueFormatter=e,this}initSelect(){const e=this.createSelectOptions();if(!e.length)return!1;const{selectPlaceholder:i}=this.config;return this.eSelect=this.createBean(new Jr({options:e,placeholder:i,onValueChange:s=>this.addValue(s),pickerIcon:"chartsMenuAdd"})),this.getGui().appendChild(this.eSelect.getGui()),!0}createSelectOptions(){let e=[];const{maxSelection:i}=this.config;return i&&this.selectedValues.length>=i||this.valueList.forEach(s=>{this.selectedValues.includes(s)||e.push({value:s,text:this.valueFormatter(s)})}),e}addValue(e){this.dropZonePanel.addItem(e)}updateValues(e,i,s){var r,n,o,a,l;const c=this.selectedValues;this.selectedValues=e;const u=this.getChanges(c,e),d=i||u.added.length||u.removed.length,h=this.gos.getActiveDomElement(),p=(r=this.eSelect)==null?void 0:r.getGui().contains(h),f=(n=this.dropZonePanel)==null?void 0:n.getGui().contains(h);s||(o=this.onValuesChange)==null||o.call(this,u);const m=d?!this.refreshSelect():!1;this.dropZonePanel.refreshGui(),d&&p&&(m?this.dropZonePanel.focusList(!0):(a=this.eSelect)==null||a.getFocusableElement().focus()),f&&!e.length&&((l=this.eSelect)==null||l.getFocusableElement().focus())}getChanges(e,i){const s=i.filter(o=>!e.includes(o)),r=e.filter(o=>!i.includes(o)),n=i.filter((o,a)=>e[a]!==o);return{added:s,removed:r,updated:n,selected:i}}refreshSelect(){if(!this.eSelect)return this.initSelect();const e=this.createSelectOptions();return e.length?(this.eSelect.clearOptions().addOptions(e).setValue(void 0,!0),!0):(Q.removeFromParent(this.eSelect.getGui()),this.eSelect=this.destroyBean(this.eSelect),!1)}destroy(){this.destroyBean(this.eSelect),super.destroy()}};s2.TEMPLATE='<div class="ag-pill-select" role="presentation"></div>';Ce([de],s2.prototype,"init",1);var PV=s2,hie=class extends Px{constructor(t,e,i,s,r,n){super(e,i,!1),this.value=t,this.valueFormatter=s,this.draggable=r,this.sourceId=n}getItem(){return this.value}getDisplayName(){return this.valueFormatter(this.value)}getAriaDisplayName(){return this.getDisplayName()}getTooltip(){}createGetDragItem(){return()=>({value:this.value})}getDragSourceType(){return Ln.ChartPanel}getDragSourceId(){return this.sourceId}isDraggable(){return this.draggable}},IV=class extends JM{constructor(t,e,i,s){super(!1),this.model=t,this.valueFormatter=e,this.ariaLabel=i,this.sourceId=s}postConstruct(){super.init()}isItemDroppable(t,e){return this.isSourceEventFromTarget(e)||this.sourceId!=null&&this.sourceId===e.dragSource.sourceId}updateItems(t){this.model.setValues(t)}getExistingItems(){return this.model.getValues()}getIconName(){return this.isPotentialDndItems()?st.ICON_MOVE:st.ICON_NOT_ALLOWED}getAriaLabel(){return this.ariaLabel}createPillComponent(t,e,i){return new hie(t,e,i,this.valueFormatter,this.model.isDraggable(),this.sourceId)}getItems(t){return[t.value]}isInterestedIn(t){return t===Ln.ChartPanel}};Ce([de],IV.prototype,"postConstruct",1);var bE=class extends Te{constructor(t,e,i,s,r){super(r),this.chartController=t,this.autoScrollService=e,this.allowMultipleSelection=i,this.maxSelection=s,this.columnComps=new Map}refreshColumnComps(t){return Q.areEqual(Q.keys(this.columnComps),t.map(({colId:e})=>e))?(t.forEach(e=>{this.columnComps.get(e.colId).setValue(e.selected,!0)}),!0):!1}createGroup(t,e,i,s,r){if(this.allowMultipleSelection){const n=t.filter(o=>o.selected);this.valuePillSelect=this.groupComp.createManagedBean(new PV({valueList:t,selectedValueList:n,valueFormatter:e,selectPlaceholder:this.chartTranslationService.translate(i),dragSourceId:s,onValuesChange:o=>this.onValueChange(o),maxSelection:this.maxSelection})),this.groupComp.addItem(this.valuePillSelect)}else{const n=this.createValueSelectParams(t);n.onValueChange=o=>{t.forEach(a=>{a.selected=!1}),o.selected=!0,o.colId===gc.DEFAULT_CATEGORY&&this.chartController.setAggFunc(void 0,!0),this.chartController.updateForPanelChange({updatedColState:o,skipAnimation:r==null?void 0:r()})},this.valueSelect=this.groupComp.createManagedBean(new Jr(n)),this.groupComp.addItem(this.valueSelect)}}refreshValueSelect(t){if(!this.valueSelect)return;const{options:e,value:i}=this.createValueSelectParams(t);this.valueSelect.clearOptions().addOptions(e).setValue(i,!0)}createValueSelectParams(t){let e;return{options:t.map(s=>{var r;const n=(r=s.displayName)!=null?r:"";return s.selected&&(e=s),{value:s,text:n}}),value:e}}onDragging(t){const e=this.checkHoveredItem(t);if(!e)return;this.lastDraggedColumn=t.dragItem.columns[0];const{comp:i,position:s}=e,{comp:r,position:n}=this.lastHoveredItem||{};if(i===r&&s===n)return;this.autoScrollService.check(t.event),this.clearHoveredItems(),this.lastHoveredItem={comp:i,position:s},i.getGui().classList.add("ag-list-item-hovered",`ag-item-highlight-${s}`)}checkHoveredItem(t){if(Q.missing(t.vDirection))return null;const e=t.event;for(const i of this.columnComps.values()){const s=i.getGui();if(!s.querySelector(".ag-chart-data-column-drag-handle"))continue;const r=s.getBoundingClientRect();if(e.clientY>=r.top&&e.clientY<=r.bottom){const o=s.clientHeight,a=e.clientY>r.top+o/2?"bottom":"top";return{comp:i,position:a}}}return null}onDragLeave(){this.clearHoveredItems()}onDragStop(){if(this.lastHoveredItem){const{dimensionCols:t,valueCols:e}=this.chartController.getColStateForMenu(),i=[...t,...e].find(s=>s.column===this.lastDraggedColumn);if(i){let s=Array.from(this.columnComps.values()).indexOf(this.lastHoveredItem.comp);this.lastHoveredItem.position==="bottom"&&s++,i.order=s,this.chartController.updateForPanelChange({updatedColState:i})}}this.clearHoveredItems(),this.lastDraggedColumn=void 0,this.autoScrollService.ensureCleared()}clearHoveredItems(){this.columnComps.forEach(t=>{t.getGui().classList.remove("ag-list-item-hovered","ag-item-highlight-top","ag-item-highlight-bottom")}),this.lastHoveredItem=void 0}addDragHandle(t,e){const i=Q.createIconNoSpan("columnDrag",this.gos);i.classList.add("ag-drag-handle","ag-chart-data-column-drag-handle"),t.getGui().insertAdjacentElement("beforeend",i);const s={type:Ln.ChartPanel,eElement:i,dragItemName:e.displayName,getDragItem:()=>({columns:[e.column]}),onDragStopped:()=>this.onDragStop()};this.dragAndDropService.addDragSource(s,!0),this.addDestroyFunc(()=>this.dragAndDropService.removeDragSource(s))}addChangeListener(t,e){this.addManagedListener(t,K.EVENT_FIELD_VALUE_CHANGED,()=>{e.selected=t.getValue(),this.chartController.updateForPanelChange({updatedColState:e})})}isInterestedIn(t){return t===Ln.ChartPanel}onValueChange({added:t,updated:e,removed:i,selected:s}){let r,n;const o=()=>{s.forEach((a,l)=>{a.order=l}),n=!0};t.length?(r=t[0],r.selected=!0,o()):i.length?(r=i[0],r.selected=!1):e.length&&(o(),r=e[0]),r&&this.chartController.updateForPanelChange({updatedColState:r,resetOrder:n})}destroy(){this.valuePillSelect=void 0,this.valueSelect=void 0,super.destroy()}};Ce([W("dragAndDropService")],bE.prototype,"dragAndDropService",2);Ce([W("chartTranslationService")],bE.prototype,"chartTranslationService",2);var pie="sum",wE=class FV extends bE{constructor(e,i,s,r,n,o){super(e,i,r,void 0,FV.TEMPLATE),this.title=s,this.dimensionCols=n,this.isOpen=o}init(){this.groupComp=this.createBean(new Bo({title:this.title,enabled:!0,suppressEnabledCheckbox:!0,suppressOpenCloseIcons:!1,cssIdentifier:"charts-data",expanded:this.isOpen})),this.chartMenuService.isLegacyFormat()?(this.createLegacyCategoriesGroup(this.dimensionCols),this.clearAggFuncControls()):(this.createCategoriesGroup(this.dimensionCols),this.createAggFuncControls(this.dimensionCols)),this.getGui().appendChild(this.groupComp.getGui())}refresh(e){var i;this.chartMenuService.isLegacyFormat()?this.refreshColumnComps(e)||this.recreate(e):((i=this.valuePillSelect)==null||i.setValues(e,e.filter(s=>s.selected)),this.refreshValueSelect(e),this.refreshAggFuncControls(e,this.chartController.getAggFunc()))}recreate(e){this.isOpen=this.groupComp.isExpanded(),Q.clearElement(this.getGui()),this.destroyBean(this.groupComp),this.dimensionCols=e,this.init()}createCategoriesGroup(e){this.createGroup(e,i=>{var s;return(s=i.displayName)!=null?s:""},"categoryAdd","categorySelect",()=>!this.chartController.getAggFunc())}createLegacyCategoriesGroup(e){const i=`chartDimension${this.groupComp.getCompId()}`,s=this.allowMultipleSelection;if(e.forEach(r=>{var n;const o={label:(n=r.displayName)!=null?n:"",value:r.selected,inputName:i},a=this.groupComp.createManagedBean(s?(()=>{const l=new Tc(o);return l.addCssClass("ag-data-select-checkbox"),l})():new mx(o));this.addChangeListener(a,r),this.groupComp.addItem(a),this.columnComps.set(r.colId,a),s&&this.addDragHandle(a,r)}),s){const r=this.groupComp.getGui(),n={getIconName:()=>st.ICON_MOVE,getContainer:()=>r,onDragging:o=>this.onDragging(o),onDragLeave:()=>this.onDragLeave(),isInterestedIn:this.isInterestedIn.bind(this),targetContainsSource:!0};this.dragAndDropService.addDropTarget(n),this.addDestroyFunc(()=>this.dragAndDropService.removeDropTarget(n))}}createAggFuncControls(e){const i=this.chartController.getAggFunc();this.groupComp.addItem(this.aggFuncToggle=this.createBean(new ep({label:this.chartTranslationService.translate("aggregate"),labelAlignment:"left",labelWidth:"flex",inputWidth:"flex",value:i!=null,onValueChange:s=>{var r,n;const o=s?pie:void 0;this.chartController.setAggFunc(o),(r=this.aggFuncSelect)==null||r.setValue(o,!0),(n=this.aggFuncSelect)==null||n.setDisplayed(o!=null)}}))),this.groupComp.addItem(this.aggFuncSelect=this.createBean(new Jr({options:[{value:"sum",text:this.chartTranslationService.translate("sum")},{value:"first",text:this.chartTranslationService.translate("first")},{value:"last",text:this.chartTranslationService.translate("last")},{value:"min",text:this.chartTranslationService.translate("min")},{value:"max",text:this.chartTranslationService.translate("max")},{value:"count",text:this.chartTranslationService.translate("count")},{value:"avg",text:this.chartTranslationService.translate("avg")}],value:typeof i=="string"?i:void 0,onValueChange:s=>{this.chartController.setAggFunc(s)}}))),this.refreshAggFuncControls(e,i)}refreshAggFuncControls(e,i){var s,r,n,o;const l=e.filter(c=>c.selected).some(c=>c.colId!==gc.DEFAULT_CATEGORY);(s=this.aggFuncToggle)==null||s.setValue(i!=null),(r=this.aggFuncSelect)==null||r.setValue(typeof i=="string"?i:void 0,!0),(n=this.aggFuncToggle)==null||n.setDisplayed(l),(o=this.aggFuncSelect)==null||o.setDisplayed(l&&i!=null)}clearAggFuncControls(){this.aggFuncToggle=this.aggFuncToggle&&this.destroyBean(this.aggFuncToggle),this.aggFuncSelect=this.aggFuncSelect&&this.destroyBean(this.aggFuncSelect)}destroy(){this.clearAggFuncControls(),this.groupComp=this.destroyBean(this.groupComp),super.destroy()}};wE.TEMPLATE='<div id="categoriesGroup"></div>';Ce([W("chartMenuService")],wE.prototype,"chartMenuService",2);Ce([de],wE.prototype,"init",1);var fie=wE,SE=class LV extends bE{constructor(e,i,s,r,n,o,a,l){super(e,i,n,o,LV.TEMPLATE),this.chartOptionsService=s,this.title=r,this.valueCols=a,this.isOpen=l}init(){if(this.groupComp=this.createBean(new Bo({title:this.title,enabled:!0,suppressEnabledCheckbox:!0,suppressOpenCloseIcons:!1,cssIdentifier:"charts-data",expanded:this.isOpen})),this.chartController.isActiveXYChart()){const e=this.groupComp.createManagedBean(new ep({label:this.chartTranslationService.translate("paired"),labelAlignment:"left",labelWidth:"flex",inputWidth:"flex",value:this.chartOptionsService.getPairedMode(),onValueChange:i=>{this.chartOptionsService.setPairedMode(!!i),this.chartController.updateForGridChange({maintainColState:!0})}}));this.groupComp.addItem(e)}this.chartMenuService.isLegacyFormat()?this.createLegacySeriesGroup(this.valueCols):this.createSeriesGroup(this.valueCols),this.getGui().appendChild(this.groupComp.getGui())}refresh(e){var i,s;if(this.chartMenuService.isLegacyFormat())if(this.refreshColumnComps(e)){if(this.chartController.isActiveXYChart()){const n=this.generateGetSeriesLabel(e);e.forEach(o=>{this.columnComps.get(o.colId).setLabel(n(o))})}}else this.recreate(e);else(i=this.valuePillSelect)==null||i.setValueFormatter(this.generateGetSeriesLabel(e)),(s=this.valuePillSelect)==null||s.setValues(e,e.filter(r=>r.selected)),this.refreshValueSelect(e)}recreate(e){this.isOpen=this.groupComp.isExpanded(),Q.clearElement(this.getGui()),this.destroyBean(this.groupComp),this.valueCols=e,this.init()}createSeriesGroup(e){this.createGroup(e,this.generateGetSeriesLabel(e),"seriesAdd","seriesSelect")}createLegacySeriesGroup(e){const i=this.generateGetSeriesLabel(e);e.forEach(n=>{const o=i(n),a=this.groupComp.createManagedBean(new Tc({label:o,value:n.selected}));a.addCssClass("ag-data-select-checkbox"),this.addChangeListener(a,n),this.groupComp.addItem(a),this.columnComps.set(n.colId,a),this.addDragHandle(a,n)});const s=this.groupComp.getGui(),r={getIconName:()=>st.ICON_MOVE,getContainer:()=>s,onDragging:n=>this.onDragging(n),onDragLeave:()=>this.onDragLeave(),isInterestedIn:this.isInterestedIn.bind(this),targetContainsSource:!0};this.dragAndDropService.addDropTarget(r),this.addDestroyFunc(()=>this.dragAndDropService.removeDropTarget(r))}generateGetSeriesLabel(e){if(!this.chartController.isActiveXYChart())return o=>{var a;return(a=o.displayName)!=null?a:""};const i=e.filter(o=>o.selected),s=this.chartController.getChartType()==="bubble",r=this.chartOptionsService.getPairedMode(),n=new Map;return n.set(0,"X"),n.set(1,"Y"),n.set(2,"size"),o=>{var a;const l=(a=o.displayName)!=null?a:"";if(!o.selected)return l;const c=i.indexOf(o);if(c===-1)return l;let u;return r?u=n.get(c%(s?3:2)):c===0?u="X":u=s&&c%2===0?"size":"Y",`${l} (${u})`}}destroy(){this.groupComp=this.destroyBean(this.groupComp),super.destroy()}};SE.TEMPLATE='<div id="seriesGroup"></div>';Ce([W("chartMenuService")],SE.prototype,"chartMenuService",2);Ce([de],SE.prototype,"init",1);var gie=SE,xE=class kV extends Te{constructor(e,i,s){super(kV.TEMPLATE),this.chartController=e,this.columns=i,this.isOpen=s,this.selectedColIds=[],this.chartTypeComps=new Map,this.secondaryAxisComps=new Map}init(){this.createSeriesChartTypeGroup(this.columns)}refresh(e){Q.areEqual(this.getValidColIds(e),this.selectedColIds)?this.refreshComps():this.recreate(e)}recreate(e){this.isOpen=this.seriesChartTypeGroupComp.isExpanded(),Q.clearElement(this.getGui()),this.destroyBean(this.seriesChartTypeGroupComp),this.columns=e,this.selectedColIds=[],this.clearComps(),this.init()}getValidColIds(e){const i=this.chartController.getSeriesChartTypes();return e.filter(s=>s.selected&&!!i.filter(r=>r.colId===s.colId)[0]).map(({colId:s})=>s)}createSeriesChartTypeGroup(e){this.seriesChartTypeGroupComp=this.createBean(new Bo({title:this.chartTranslationService.translate("seriesChartType"),enabled:!0,suppressEnabledCheckbox:!0,suppressOpenCloseIcons:!1,cssIdentifier:"charts-data",expanded:this.isOpen}));const i=this.chartController.getSeriesChartTypes();e.forEach(s=>{if(!s.selected)return;const r=i.filter(d=>d.colId===s.colId)[0];if(!r)return;this.selectedColIds.push(s.colId);const n=this.seriesChartTypeGroupComp.createManagedBean(new Bo({title:s.displayName,enabled:!0,suppressEnabledCheckbox:!0,suppressOpenCloseIcons:!0,cssIdentifier:"charts-format-sub-level"})),o=d=>["groupedColumn","stackedColumn","stackedArea"].includes(d),a=this.seriesChartTypeGroupComp.createManagedBean(new Tc({label:this.chartTranslationService.translate("secondaryAxis"),labelWidth:"flex",disabled:o(r.chartType),value:!!r.secondaryAxis,onValueChange:d=>this.chartController.updateSeriesChartType(s.colId,void 0,d)}));n.addItem(a);const l=d=>this.chartTranslationService.translate(d),c=[{value:"line",text:l("line")},{value:"area",text:l("area")},{value:"stackedArea",text:l("stackedArea")},{value:"groupedColumn",text:l("groupedColumn")},{value:"stackedColumn",text:l("stackedColumn")}],u=n.createManagedBean(new Jr({labelAlignment:"left",labelWidth:"flex",options:c,value:r.chartType,onValueChange:d=>this.chartController.updateSeriesChartType(s.colId,d)}));n.addItem(u),this.seriesChartTypeGroupComp.addItem(n),this.chartTypeComps.set(s.colId,u),this.secondaryAxisComps.set(s.colId,a)}),this.getGui().appendChild(this.seriesChartTypeGroupComp.getGui())}refreshComps(){const e=this.chartController.getSeriesChartTypes();this.selectedColIds.forEach(i=>{const s=e.find(o=>o.colId===i);if(!s)return;const r=this.chartTypeComps.get(i),n=this.secondaryAxisComps.get(i);r==null||r.setValue(s.chartType),n==null||n.setValue(!!s.secondaryAxis),n==null||n.setDisabled(this.isSecondaryAxisDisabled(s.chartType))})}clearComps(){this.chartTypeComps.clear(),this.secondaryAxisComps.clear()}isSecondaryAxisDisabled(e){return["groupedColumn","stackedColumn","stackedArea"].includes(e)}destroy(){this.clearComps(),this.seriesChartTypeGroupComp=this.destroyBean(this.seriesChartTypeGroupComp),super.destroy()}};xE.TEMPLATE='<div id="seriesChartTypeGroup"></div>';Ce([W("chartTranslationService")],xE.prototype,"chartTranslationService",2);Ce([de],xE.prototype,"init",1);var mie=xE,EE=class NV extends Te{constructor(e,i){super(),this.getValue=e,this.setValue=i}init(){this.switchCategorySeriesToggleButton=this.createManagedBean(new ep({label:this.chartTranslationService.translate("switchCategorySeries"),labelAlignment:"left",labelWidth:"flex",inputWidth:"flex",value:this.getValue(),onValueChange:i=>{this.setValue(i)}}));const e={title:void 0,suppressEnabledCheckbox:!0,suppressOpenCloseIcons:!0,cssIdentifier:"charts-data",expanded:!0,items:[this.switchCategorySeriesToggleButton]};this.setTemplate(NV.TEMPLATE,{switchCategorySeriesGroup:e})}refresh(){var e;(e=this.switchCategorySeriesToggleButton)==null||e.setValue(this.getValue(),!0)}};EE.TEMPLATE=`<div>
        <ag-group-component ref="switchCategorySeriesGroup"></ag-group-component>
    </div>`;Ce([W("chartTranslationService")],EE.prototype,"chartTranslationService",2);Ce([de],EE.prototype,"init",1);var vie=EE,yie={groups:[{type:"categories",isOpen:!0},{type:"series",isOpen:!0},{type:"seriesChartType",isOpen:!0}]},c0=class OV extends Te{constructor(e,i){super(OV.TEMPLATE),this.chartController=e,this.chartOptionsService=i,this.isSwitchCategorySeriesToggled=!1}init(){this.switchCategorySeriesPanel=this.addComponent(this.createManagedBean(new vie(()=>this.chartController.isCategorySeriesSwitched(),e=>this.chartController.switchCategorySeries(e)))),this.isSwitchCategorySeriesToggled=this.chartController.isCategorySeriesSwitched(),this.createAutoScrollService(),this.updatePanels(),this.addManagedListener(this.chartController,co.EVENT_CHART_MODEL_UPDATE,this.updatePanels.bind(this)),this.addManagedListener(this.chartController,co.EVENT_CHART_API_UPDATE,this.updatePanels.bind(this))}destroy(){this.clearPanelComponents(),super.destroy()}updatePanels(){var e,i,s,r,n;const o=this.chartType,a=this.isSwitchCategorySeriesToggled,{dimensionCols:l,valueCols:c}=this.chartController.getColStateForMenu();this.chartType=this.chartController.getChartType(),this.isSwitchCategorySeriesToggled=this.chartController.isCategorySeriesSwitched();const u=this.isSwitchCategorySeriesToggled!==a;this.canRefresh(o,this.chartType)&&!u?((e=this.categoriesDataPanel)==null||e.refresh(l),(i=this.seriesDataPanel)==null||i.refresh(c),(s=this.seriesChartTypePanel)==null||s.refresh(c)):this.recreatePanels(l,c),(r=this.switchCategorySeriesPanel)==null||r.setDisplayed(SV(this.chartType)&&!this.chartMenuService.isLegacyFormat()&&!this.chartController.isGrouping()),u&&((n=this.switchCategorySeriesPanel)==null||n.refresh())}canRefresh(e,i){if(e===void 0)return!1;if(e===i)return!0;const s=r=>["columnLineCombo","areaColumnCombo","customCombo"].includes(r);return!!(s(e)&&s(i))}recreatePanels(e,i){var s;this.clearPanelComponents();const{chartType:r}=this;if(!r)return;const n=this.chartController.isCategorySeriesSwitched(),o=(s=this.getDataPanelDef().groups)==null?void 0:s.map(({type:a,isOpen:l})=>a===(n?"series":"categories")?this.categoriesDataPanel=this.createBean(new fie(this.chartController,this.autoScrollService,this.getCategoryGroupTitle(n),this.getCategoryGroupMultipleSelect(r,n),e,l)):a===(n?"categories":"series")?this.seriesDataPanel=this.createBean(new gie(this.chartController,this.autoScrollService,this.chartOptionsService,this.getSeriesGroupTitle(n),this.getSeriesGroupMultipleSelect(r,n),this.getSeriesGroupMaxSelection(r,n),i,l)):a==="seriesChartType"?this.chartController.isComboChart()?this.seriesChartTypePanel=this.createBean(new mie(this.chartController,i,l)):null:(Q.warnOnce(`Invalid charts data panel group name supplied: '${a}'`),null)).filter(a=>a!=null);o&&this.addPanelComponents(o)}addPanelComponents(e){var i;const s=document.createDocumentFragment();for(const n of e)this.registerComponent(n),s.appendChild(n.getGui());const r=(i=this.switchCategorySeriesPanel)==null?void 0:i.getGui();return this.getGui().insertBefore(s,r??null),e}clearPanelComponents(){const e=this.getGui();this.categoriesDataPanel&&e.removeChild(this.categoriesDataPanel.getGui()),this.seriesDataPanel&&e.removeChild(this.seriesDataPanel.getGui()),this.seriesChartTypePanel&&e.removeChild(this.seriesChartTypePanel.getGui()),this.categoriesDataPanel=this.destroyBean(this.categoriesDataPanel),this.seriesDataPanel=this.destroyBean(this.seriesDataPanel),this.seriesChartTypePanel=this.destroyBean(this.seriesChartTypePanel)}createAutoScrollService(){const e=this.getGui();this.autoScrollService=new PC({scrollContainer:e,scrollAxis:"y",getVerticalPosition:()=>e.scrollTop,setVerticalPosition:i=>e.scrollTop=i})}addComponent(e){return this.registerComponent(e),this.getGui().appendChild(e.getGui()),e}registerComponent(e){e.addCssClass("ag-chart-data-section")}getDataPanelDef(){var e,i;return(i=(e=this.gos.get("chartToolPanelsDef"))==null?void 0:e.dataPanel)!=null?i:yie}getCategoryGroupTitle(e){return e?this.chartTranslationService.translate("seriesLabels"):this.chartTranslationService.translate(this.chartController.isActiveXYChart()?"labels":"categories")}getCategoryGroupMultipleSelect(e,i){return i?!1:AA(e)!==1}getSeriesGroupTitle(e){return e?this.chartTranslationService.translate("categoryValues"):this.chartTranslationService.translate(this.chartController.isActiveXYChart()?"xyValues":"series")}getSeriesGroupMultipleSelect(e,i){return this.getSeriesGroupMaxSelection(e,i)!==1}getSeriesGroupMaxSelection(e,i){if(!i)return CS(e)}};c0.TEMPLATE='<div class="ag-chart-data-wrapper ag-scrollable-container"></div>';Ce([W("chartTranslationService")],c0.prototype,"chartTranslationService",2);Ce([W("chartMenuService")],c0.prototype,"chartMenuService",2);Ce([de],c0.prototype,"init",1);var Cie=c0,u0=class GV extends Te{constructor(e){super(),this.activeComps=[],this.params=e,this.chartOptions=e.chartMenuUtils.getChartOptions()}init(){const e={cssIdentifier:"charts-format-sub-level",direction:"vertical",suppressOpenCloseIcons:!0,title:this.params.name||this.chartTranslationService.translate("font"),enabled:this.params.enabled,suppressEnabledCheckbox:!!this.params.suppressEnabledCheckbox,onEnableChange:i=>{this.params.onEnableChange&&this.params.onEnableChange(i)}};this.setTemplate(GV.TEMPLATE,{fontGroup:e,familySelect:this.getFamilySelectParams(),weightStyleSelect:this.getWeightStyleSelectParams(),sizeSelect:this.getSizeSelectParams(),colorPicker:this.params.chartMenuUtils.getDefaultColorPickerParams(this.params.keyMapper("color"))})}addCompToPanel(e){this.fontGroup.addItem(e),this.activeComps.push(e)}setEnabled(e){this.fontGroup.setEnabled(e)}getFamilySelectParams(){const e=["Arial, sans-serif","Aria Black, sans-serif","Book Antiqua,  serif","Charcoal, sans-serif","Comic Sans MS, cursive","Courier, monospace","Courier New, monospace","Gadget, sans-serif","Geneva, sans-serif","Helvetica, sans-serif","Impact, sans-serif","Lucida Console, monospace","Lucida Grande, sans-serif","Lucida Sans Unicode,  sans-serif","Monaco, monospace","Palatino Linotype, serif","Palatino, serif","Times New Roman, serif","Times, serif","Verdana, sans-serif"],i=this.getInitialFontValue("fontFamily");let s=e[0];if(i){const o=e.map(a=>a.toLowerCase()).indexOf(i.toLowerCase());if(o>=0)s=e[o];else{const a=Q.capitalise(i);e.push(a),s=a}}return{options:e.sort().map(n=>({value:n,text:n})),inputWidth:"flex",value:`${s}`,onValueChange:n=>this.setFont({fontFamily:n})}}getSizeSelectParams(){const e=[8,10,12,14,16,18,20,22,24,26,28,30,32,34,36],i=this.getInitialFontValue("fontSize");return Q.includes(e,i)||e.push(i),{options:e.sort((r,n)=>r-n).map(r=>({value:`${r}`,text:`${r}`})),inputWidth:"flex",value:`${i}`,onValueChange:r=>this.setFont({fontSize:parseInt(r,10)}),label:this.chartTranslationService.translate("size")}}getWeightStyleSelectParams(){var e,i;const s=(e=this.getInitialFontValue("fontWeight"))!=null?e:"normal",r=(i=this.getInitialFontValue("fontStyle"))!=null?i:"normal",n=[{name:"normal",weight:"normal",style:"normal"},{name:"bold",weight:"bold",style:"normal"},{name:"italic",weight:"normal",style:"italic"},{name:"boldItalic",weight:"bold",style:"italic"}];let o=n.find(l=>l.weight===s&&l.style===r);return o||(o={name:"predefined",weight:s,style:r},n.unshift(o)),{options:n.map(l=>({value:l.name,text:this.chartTranslationService.translate(l.name)})),inputWidth:"flex",value:o.name,onValueChange:l=>{const c=n.find(u=>u.name===l);this.setFont({fontWeight:c.weight,fontStyle:c.style})}}}addItemToPanel(e){this.fontGroup.addItem(e),this.activeComps.push(e)}destroyActiveComps(){this.activeComps.forEach(e=>{Q.removeFromParent(e.getGui()),this.destroyBean(e)})}destroy(){this.destroyActiveComps(),super.destroy()}setFont(e){const{keyMapper:i}=this.params;Object.entries(e).forEach(([s,r])=>{r&&this.chartOptions.setValue(i(s),r)})}getInitialFontValue(e){const{keyMapper:i}=this.params;return this.chartOptions.getValue(i(e))}};u0.TEMPLATE=`<div class="ag-font-panel">
            <ag-group-component ref="fontGroup">
                <ag-select ref="familySelect"></ag-select>
                <ag-select ref="weightStyleSelect"></ag-select>
                <div class="ag-charts-font-size-color">
                    <ag-select ref="sizeSelect"></ag-select>
                    <ag-color-picker ref="colorPicker"></ag-color-picker>
                </div>
            </ag-group-component>
        </div>`;Ce([pe("fontGroup")],u0.prototype,"fontGroup",2);Ce([W("chartTranslationService")],u0.prototype,"chartTranslationService",2);Ce([de],u0.prototype,"init",1);var Bu=u0,TE=class BV extends Te{constructor({chartMenuParamsFactory:e,isExpandedOnInit:i=!1}){super(),this.chartMenuUtils=e,this.isExpandedOnInit=i}init(){const e=this.chartMenuUtils.addEnableParams("legend.enabled",{cssIdentifier:"charts-format-top-level",direction:"vertical",title:this.chartTranslationService.translate("legend"),suppressEnabledCheckbox:!1,suppressToggleExpandOnEnableChange:!0,expanded:this.isExpandedOnInit,items:[this.createLabelPanel()]});this.setTemplate(BV.TEMPLATE,{legendGroup:e,legendPositionSelect:this.chartMenuUtils.getDefaultLegendParams("legend.position"),legendPaddingSlider:this.getSliderParams("spacing","spacing",200),markerSizeSlider:this.getSliderParams("item.marker.size","markerSize",40),markerStrokeSlider:this.getSliderParams("item.marker.strokeWidth","markerStroke",10),markerPaddingSlider:this.getSliderParams("item.marker.padding","itemSpacing",20),itemPaddingXSlider:this.getSliderParams("item.paddingX","layoutHorizontalSpacing",50),itemPaddingYSlider:this.getSliderParams("item.paddingY","layoutVerticalSpacing",50)})}getSliderParams(e,i,s){return this.chartMenuUtils.getDefaultSliderParams(`legend.${e}`,i,s)}createLabelPanel(){const e={enabled:!0,suppressEnabledCheckbox:!0,chartMenuUtils:this.chartMenuUtils,keyMapper:i=>`legend.item.label.${i}`};return this.createManagedBean(new Bu(e))}};TE.TEMPLATE=`<div>
            <ag-group-component ref="legendGroup">
                <ag-select ref="legendPositionSelect"></ag-select>
                <ag-slider ref="legendPaddingSlider"></ag-slider>
                <ag-slider ref="markerSizeSlider"></ag-slider>
                <ag-slider ref="markerStrokeSlider"></ag-slider>
                <ag-slider ref="markerPaddingSlider"></ag-slider>
                <ag-slider ref="itemPaddingXSlider"></ag-slider>
                <ag-slider ref="itemPaddingYSlider"></ag-slider>
            </ag-group-component>
        </div>`;Ce([W("chartTranslationService")],TE.prototype,"chartTranslationService",2);Ce([de],TE.prototype,"init",1);var bie=TE,_E=class VV extends Te{constructor(e){super(),this.chartMenuUtils=e}init(){const e=this.chartMenuUtils.addEnableParams("tick.enabled",{cssIdentifier:"charts-format-sub-level",direction:"vertical",suppressOpenCloseIcons:!0,title:this.chartTranslationService.translate("ticks"),suppressEnabledCheckbox:!1}),i=this.chartMenuUtils.getDefaultColorPickerParams("tick.color"),s=this.chartMenuUtils.getDefaultSliderParams("tick.width","width",10),r=this.chartMenuUtils.getDefaultSliderParams("tick.size","length",30);this.setTemplate(VV.TEMPLATE,{axisTicksGroup:e,axisTicksColorPicker:i,axisTicksWidthSlider:s,axisTicksSizeSlider:r})}};_E.TEMPLATE=`<div>
            <ag-group-component ref="axisTicksGroup">
                <ag-color-picker ref="axisTicksColorPicker"></ag-color-picker>
                <ag-slider ref="axisTicksWidthSlider"></ag-slider>
                <ag-slider ref="axisTicksSizeSlider"></ag-slider>
            </ag-group-component>
        </div>`;Ce([W("chartTranslationService")],_E.prototype,"chartTranslationService",2);Ce([de],_E.prototype,"init",1);var wie=_E,AE=class HV extends Te{constructor(e){super(),this.chartMenuUtils=e,this.chartOptions=e.getChartOptions()}init(){const e=this.chartMenuUtils.addEnableParams("gridLine.enabled",{cssIdentifier:"charts-format-sub-level",direction:"vertical",suppressOpenCloseIcons:!0,title:this.chartTranslationService.translate("gridLines"),suppressEnabledCheckbox:!1}),i=this.getGridLineColorPickerParams("color"),s=this.getGridLineWidthSliderParams("thickness"),r=this.getGridLineDashSliderParams("lineDash");this.setTemplate(HV.TEMPLATE,{gridLineGroup:e,gridLineColorPicker:i,gridLineWidthSlider:s,gridLineLineDashSlider:r})}getGridLineColorPickerParams(e){return this.chartMenuUtils.getDefaultColorPickerParams("gridLine.style",e,{formatInputValue:i=>{var s;return(s=i==null?void 0:i[0])==null?void 0:s.stroke},parseInputValue:i=>{var s;const r=(s=this.chartOptions.getValue("gridLine.style"))!=null?s:[];return r.length===0?[{stroke:i,lineDash:[]}]:[Bt(Xe({},r[0]),{stroke:i})]}})}getGridLineWidthSliderParams(e){return this.chartMenuUtils.getDefaultSliderParams("gridLine.width",e,10)}getGridLineDashSliderParams(e){var i,s;const r=this.chartOptions.getValue("gridLine.style"),n=(s=(i=r==null?void 0:r[0])==null?void 0:i.lineDash)==null?void 0:s[0],o=this.chartMenuUtils.getDefaultSliderParamsWithoutValueParams(n??0,e,30);return o.onValueChange=a=>{const l=this.chartOptions.getValue("gridLine.style.0.stroke");this.chartOptions.setValue("gridLine.style",[{lineDash:[a],stroke:l}])},o}};AE.TEMPLATE=`<div>
            <ag-group-component ref="gridLineGroup">
                <ag-color-picker ref="gridLineColorPicker"></ag-color-picker>
                <ag-slider ref="gridLineWidthSlider"></ag-slider>
                <ag-slider ref="gridLineLineDashSlider"></ag-slider>
            </ag-group-component>
        </div>`;Ce([W("chartTranslationService")],AE.prototype,"chartTranslationService",2);Ce([de],AE.prototype,"init",1);var Sie=AE,wp=class jV extends TC{constructor(e){super(e,jV.TEMPLATE),this.radius=0,this.offsetX=0,this.offsetY=0}postConstruct(){super.postConstruct();const{value:e,onValueChange:i}=this.config;e!=null&&this.setValue(e,void 0,!0),i!=null&&this.onValueChange(i),this.dragListener={eElement:this.eParentCircle,dragStartPixels:0,onDragStart:s=>{this.parentCircleRect=this.eParentCircle.getBoundingClientRect()},onDragging:s=>this.calculateAngleDrag(s),onDragStop:()=>{}},this.dragService.addDragSource(this.dragListener),this.eAngleValue.setLabel("").setLabelWidth(5).setInputWidth(45).setMin(0).setMax(360).setValue(`${this.degrees}`).onValueChange(s=>{(s==null||s==="")&&(s="0"),s=this.eAngleValue.normalizeValue(s);let r=parseFloat(s);r>180&&(r=r-360),this.setValue(r)}),this.updateNumberInput(),Q.exists(this.getValue())&&this.eAngleValue.setValue(this.normalizeNegativeValue(this.getValue()).toString()),this.addManagedListener(this,K.EVENT_FIELD_VALUE_CHANGED,()=>{this.eAngleValue.getInputElement().contains(this.gos.getActiveDomElement())||this.updateNumberInput()})}updateNumberInput(){const e=this.normalizeNegativeValue(this.getValue());this.eAngleValue.setValue(e.toString())}positionChildCircle(e){const i=this.parentCircleRect||{width:24,height:24},s=this.eChildCircle,r=i.width/2,n=i.height/2;s.style.left=`${r+Math.cos(e)*8}px`,s.style.top=`${n+Math.sin(e)*8}px`}calculatePolar(){const e=this.offsetX,i=this.offsetY,s=Math.atan2(i,e);this.degrees=this.toDegrees(s),this.radius=Math.sqrt(e*e+i*i),this.positionChildCircle(s)}calculateCartesian(){const e=this.toRadians(this.getValue()),i=this.getRadius();this.setOffsetX(Math.cos(e)*i).setOffsetY(Math.sin(e)*i)}setOffsetX(e){return this.offsetX!==e&&(this.offsetX=e,this.calculatePolar()),this}setOffsetY(e){return this.offsetY!==e&&(this.offsetY=e,this.calculatePolar()),this}calculateAngleDrag(e){const i=this.parentCircleRect,s=i.width/2,r=i.height/2,n=e.clientX-i.left,o=e.clientY-i.top,a=n-s,l=o-r,c=Math.atan2(l,a);this.setValue(c,!0)}toDegrees(e){return e/Math.PI*180}toRadians(e){return e/180*Math.PI}normalizeNegativeValue(e){return e<0?360+e:e}normalizeAngle180(e){return e%=Math.PI*2,e<-Math.PI?e+=Math.PI*2:e>=Math.PI&&(e-=Math.PI*2),e}getRadius(){return this.radius}setRadius(e){return this.radius===e?this:(this.radius=e,this.calculateCartesian(),this)}onValueChange(e){return this.addManagedListener(this,K.EVENT_FIELD_VALUE_CHANGED,()=>{e(this.degrees)}),this}getValue(e){return e?this.toRadians(this.degrees):this.degrees}setValue(e,i,s){let r;return i?r=e:r=this.normalizeAngle180(this.toRadians(e)),e=this.toDegrees(r),this.degrees!==e&&(this.degrees=Math.floor(e),this.calculateCartesian(),this.positionChildCircle(r),s||this.dispatchEvent({type:K.EVENT_FIELD_VALUE_CHANGED})),this}setWidth(e){return Q.setFixedWidth(this.getGui(),e),this}setDisabled(e){return super.setDisabled(e),this.eAngleValue.setDisabled(e),this}destroy(){this.dragService.removeDragSource(this.dragListener),super.destroy()}};wp.TEMPLATE=`<div class="ag-angle-select">
            <div ref="eLabel"></div>
            <div class="ag-wrapper ag-angle-select-wrapper">
                <div ref="eAngleSelectField" class="ag-angle-select-field">
                    <div ref="eParentCircle" class="ag-angle-select-parent-circle">
                        <div ref="eChildCircle" class="ag-angle-select-child-circle"></div>
                    </div>
                </div>
                <ag-input-number-field ref="eAngleValue"></ag-input-number-field>
            </div>
        </div>`;Ce([pe("eLabel")],wp.prototype,"eLabel",2);Ce([pe("eParentCircle")],wp.prototype,"eParentCircle",2);Ce([pe("eChildCircle")],wp.prototype,"eChildCircle",2);Ce([pe("eAngleValue")],wp.prototype,"eAngleValue",2);Ce([W("dragService")],wp.prototype,"dragService",2);var UV=wp,Oh=class extends ye{constructor(t){super(),this.chartOptionsProxy=t}getDefaultColorPickerParams(t,e,i){return this.addValueParams(t,{label:this.chartTranslationService.translate(e??"color"),labelWidth:"flex",inputWidth:"flex"},i)}getDefaultNumberInputParams(t,e,i){return this.addValueParams(t,{label:this.chartTranslationService.translate(e),labelWidth:"flex",inputWidth:"flex",precision:i==null?void 0:i.precision,step:i==null?void 0:i.step,min:i==null?void 0:i.min,max:i==null?void 0:i.max},{parseInputValue:s=>{const r=Number(s);return isNaN(r)?void 0:r},formatInputValue:s=>s==null?"":`${s}`})}getDefaultSliderParams(t,e,i,s){var r;let n=(r=this.chartOptionsProxy.getValue(t))!=null?r:0;s&&Array.isArray(n)&&(n=n[0]);const o=this.getDefaultSliderParamsWithoutValueParams(n,e,i);return o.onValueChange=a=>this.chartOptionsProxy.setValue(t,s?[a]:a),o}getDefaultSliderParamsWithoutValueParams(t,e,i){return{label:this.chartTranslationService.translate(e),minValue:0,maxValue:Math.max(t,i),textFieldWidth:45,value:`${t}`}}getDefaultCheckboxParams(t,e,i){const s=this.chartOptionsProxy.getValue(t),r={label:this.chartTranslationService.translate(e),value:s,readOnly:i==null?void 0:i.readOnly,passive:i==null?void 0:i.passive};return r.onValueChange=n=>{this.chartOptionsProxy.setValue(t,typeof n=="boolean"?n:void 0)},r}getDefaultSelectParams(t,e,i,s){const r=this.chartOptionsProxy.getValue(t),n={label:this.chartTranslationService.translate(e),value:r,options:i,pickerType:s==null?void 0:s.pickerType,pickerAriaLabelKey:s==null?void 0:s.pickerAriaLabelKey,pickerAriaLabelValue:s==null?void 0:s.pickerAriaLabelValue};return n.onValueChange=o=>{this.chartOptionsProxy.setValue(t,o)},n}getDefaultLegendParams(t){return this.addValueParams(t,{label:this.chartTranslationService.translate("position"),labelWidth:"flex",inputWidth:"flex",options:["top","right","bottom","left"].map(e=>({value:e,text:this.chartTranslationService.translate(e)}))})}getDefaultFontPanelParams(t,e){const i=s=>`${t}.${s}`;return this.addEnableParams(i("enabled"),{name:this.chartTranslationService.translate(e),suppressEnabledCheckbox:!1,chartMenuUtils:this,keyMapper:i})}addValueParams(t,e,i){const s=this.chartOptionsProxy.getValue(t);return e.value=i!=null&&i.formatInputValue?i.formatInputValue(s):s,e.onValueChange=r=>{const n=i!=null&&i.parseInputValue?i.parseInputValue(r):r;this.chartOptionsProxy.setValue(t,n)},e}addEnableParams(t,e){var i;return e.enabled=(i=this.chartOptionsProxy.getValue(t))!=null?i:!1,e.onEnableChange=s=>this.chartOptionsProxy.setValue(t,s),e}getChartOptions(){return this.chartOptionsProxy}};Ce([W("chartTranslationService")],Oh.prototype,"chartTranslationService",2);var xie="%d %B %Y",Sd=class WV extends Te{constructor(e,{chartController:i,chartOptionsService:s,isExpandedOnInit:r=!1,seriesType:n}){super(),this.activePanels=[],this.axisLabelUpdateFuncs=[],this.axisType=e,this.chartController=i,this.chartAxisOptionsProxy=s.getCartesianAxisOptionsProxy(e),this.chartAxisThemeOverridesProxy=s.getCartesianAxisThemeOverridesProxy(e),this.chartAxisAppliedThemeOverridesProxy=s.getCartesianAxisAppliedThemeOverridesProxy(e),this.chartOptionsSeriesProxy=s.getSeriesOptionsProxy(()=>n??this.chartController.getChartSeriesType()),this.chartOptionsService=s,this.isExpandedOnInit=r}init(){var e;const i=this.axisType,s={cssIdentifier:"charts-format-top-level",direction:"vertical",title:this.translate(i),expanded:this.isExpandedOnInit,suppressEnabledCheckbox:!0},r=this.createManagedBean(new Oh(this.chartAxisOptionsProxy)),n=this.createManagedBean(new Oh(this.chartAxisThemeOverridesProxy)),o=this.getAxisTypeSelectParams(r,this.chartAxisAppliedThemeOverridesProxy),a=this.getAxisPositionSelectParams(r),l=this.getAxisTimeFormatSelectParams(r),c=this.getAxisColorInputParams(n),u=this.getAxisLineWidthSliderParams(n);this.setTemplate(WV.TEMPLATE,{axisGroup:s,axisTypeSelect:o??void 0,axisPositionSelect:a??void 0,axisTimeFormatSelect:l??void 0,axisColorInput:c,axisLineWidthSlider:u}),this.axisTypeSelect.setDisplayed(!!((e=o.options)!=null&&e.length)),a||this.removeTemplateComponent(this.axisPositionSelect);const d=()=>{const p=this.chartAxisOptionsProxy.getValue("type")==="time";Q.setDisplayed(this.axisTimeFormatSelect.getGui(),p)};l?(d(),this.addManagedListener(this.eventService,K.EVENT_CHART_OPTIONS_CHANGED,p=>{d()})):this.removeTemplateComponent(this.axisTimeFormatSelect),this.initGridLines(n),this.initAxisTicks(n),this.initAxisLabels(n);const h=()=>this.axisLabelUpdateFuncs.forEach(p=>p());this.addManagedListener(this.chartController,co.EVENT_CHART_UPDATED,h),this.addManagedListener(this.chartController,co.EVENT_CHART_MODEL_UPDATE,()=>setTimeout(()=>{this.refreshAxisTypeSelect(r),d()}))}getAxisTypeSelectParams(e,i){const s=e.getChartOptions(),r=this.getAxisTypeSelectOptions(),n=e.getDefaultSelectParams("type","axisType",r);return n.onValueChange=o=>{var a;const l=s.getValue("type");if(o===l)return;const c=i.getValue("*"),u=l==="time",d=o==="time",h=u!==d?d?xie:void 0:null;if(this.chartOptionsService.setCartesianCategoryAxisType(this.axisType,o),h!==null){const p=(a=s.getValue("label"))!=null?a:{};s.setValue("label",Bt(Xe({},p),{format:h}))}i.setValue("*",c)},n}refreshAxisTypeSelect(e){const i=this.getAxisTypeSelectOptions(),s=!!i.length;this.axisTypeSelect.setDisplayed(s),s&&this.axisTypeSelect.clearOptions().addOptions(i).setValue(e.getChartOptions().getValue("type"))}getAxisTypeSelectOptions(){const e=this.chartController.getChartType(),i=()=>{const s=this.chartController.getChartData()[0];return s?this.chartController.getSelectedDimensions().every(r=>!isNaN(parseFloat(s[r.colId]))):!1};return["heatmap","histogram","boxPlot","rangeBar","scatter","bubble"].includes(e)||this.chartController.isGrouping()||!this.isCategoryAxis()||this.chartController.isCategorySeriesSwitched()||!i()?[]:["category","number","time"].map(s=>({value:s,text:this.translate(s)}))}isCategoryAxis(){const e=this.chartOptionsSeriesProxy.getValue("direction")==="horizontal";return e&&this.axisType==="yAxis"||!e&&this.axisType==="xAxis"}getAxisPositionSelectParams(e){const i=((s,r)=>{switch(s){case"heatmap":return null;default:switch(r){case"xAxis":return[{value:"top",text:this.translate("top")},{value:"bottom",text:this.translate("bottom")}];case"yAxis":return[{value:"left",text:this.translate("left")},{value:"right",text:this.translate("right")}]}}})(this.chartController.getChartType(),this.axisType);return i?e.getDefaultSelectParams("position","position",i):null}getAxisTimeFormatSelectParams(e){if(!this.isCategoryAxis())return null;const i=[{value:"%d/%m/%Y",text:this.translate("timeFormatSlashesDDMMYYYY")},{value:"%m/%d/%Y",text:this.translate("timeFormatSlashesMMDDYYYY")},{value:"%d/%m/%y",text:this.translate("timeFormatSlashesDDMMYY")},{value:"%m/%d/%y",text:this.translate("timeFormatSlashesMMDDYY")},{value:"%d.%e.%y",text:this.translate("timeFormatDotsDDMYY")},{value:"%e.%d.%y",text:this.translate("timeFormatDotsMDDYY")},{value:"%Y-%m-%d",text:this.translate("timeFormatDashesYYYYMMDD")},{value:"%d %B %Y",text:this.translate("timeFormatSpacesDDMMMMYYYY")},{value:"%H:%M:%S",text:this.translate("timeFormatHHMMSS")},{value:"%I:%M:%S %p",text:this.translate("timeFormatHHMMSSAmPm")}];return e.getDefaultSelectParams("label.format","timeFormat",i)}getAxisColorInputParams(e){return e.getDefaultColorPickerParams("line.color")}getAxisLineWidthSliderParams(e){var i;const s=e.getChartOptions(),r=()=>s.getValue("line.enabled")?s.getValue("line.width"):null,n=a=>{s.setValues([{expression:"line.enabled",value:a!=null},{expression:"line.width",value:a??0}])},o=e.getDefaultSliderParamsWithoutValueParams((i=r())!=null?i:0,"thickness",10);return o.onValueChange=a=>{n(a===0?null:a)},o}initGridLines(e){switch(this.chartController.getChartType()){case"heatmap":return;default:const s=this.createBean(new Sie(e));this.axisGroup.addItem(s),this.activePanels.push(s)}}initAxisTicks(e){if(!this.hasConfigurableAxisTicks())return;const i=this.createBean(new wie(e));this.axisGroup.addItem(i),this.activePanels.push(i)}hasConfigurableAxisTicks(){switch(this.chartController.getChartType()){case"radarLine":case"radarArea":case"rangeBar":case"boxPlot":case"waterfall":return!1;default:return!0}}initAxisLabels(e){const i={name:this.translate("labels"),enabled:!0,suppressEnabledCheckbox:!0,chartMenuUtils:e,keyMapper:r=>`label.${r}`},s=this.createBean(new Bu(i));this.axisGroup.addItem(s),this.activePanels.push(s),this.addAdditionalLabelComps(s,e)}addAdditionalLabelComps(e,i){this.addLabelPadding(e,i);const s=this.createRotationWidget("labelRotation",i),r=this.initLabelRotation(s,i);e.addCompToPanel(r),e.addCompToPanel(s)}initLabelRotation(e,i){const s=i.getChartOptions(),r=()=>s.getValue("label.rotation"),n=()=>s.getValue("label.autoRotate"),o=u=>{u&&(this.prevRotation=r()),s.setValues([{expression:"label.autoRotate",value:u},{expression:"label.rotation",value:u?void 0:this.prevRotation}]),e.setDisabled(u)},l=typeof r()=="number"?!1:n(),c=this.createBean(new Tc({label:this.translate("autoRotate"),value:l,onValueChange:o}));return e.setDisabled(l),c}createRotationWidget(e,i){var s;const r=i.getChartOptions(),n=()=>r.getValue("label.rotation"),o=u=>r.setValue("label.rotation",u),l=`${this.chartTranslationService.translate(e)} `,c=new UV({label:l,labelWidth:"flex",value:(s=n())!=null?s:0,onValueChange:o});return this.axisLabelUpdateFuncs.push(()=>{var u;c.setValue((u=n())!=null?u:0)}),this.createBean(c)}addLabelPadding(e,i){const s=this.createBean(new Yn(i.getDefaultSliderParams("label.padding","padding",30)));e.addCompToPanel(s)}translate(e){return this.chartTranslationService.translate(e)}removeTemplateComponent(e){Q.removeFromParent(e.getGui()),this.destroyBean(e)}destroyActivePanels(){this.activePanels.forEach(e=>{Q.removeFromParent(e.getGui()),this.destroyBean(e)})}destroy(){this.destroyActivePanels(),super.destroy()}};Sd.TEMPLATE=`<div>
            <ag-group-component ref="axisGroup">
                <ag-select ref="axisTypeSelect"></ag-select>
                <ag-select ref="axisTimeFormatSelect"></ag-select>
                <ag-select ref="axisPositionSelect"></ag-select>
                <ag-color-picker ref="axisColorInput"></ag-color-picker>
                <ag-slider ref="axisLineWidthSlider"></ag-slider>
            </ag-group-component>
        </div>`;Ce([pe("axisGroup")],Sd.prototype,"axisGroup",2);Ce([pe("axisTypeSelect")],Sd.prototype,"axisTypeSelect",2);Ce([pe("axisPositionSelect")],Sd.prototype,"axisPositionSelect",2);Ce([pe("axisTimeFormatSelect")],Sd.prototype,"axisTimeFormatSelect",2);Ce([W("chartTranslationService")],Sd.prototype,"chartTranslationService",2);Ce([de],Sd.prototype,"init",1);var Sb=Sd,d0=class zV extends Te{constructor({chartController:e,chartAxisMenuParamsFactory:i,isExpandedOnInit:s=!1}){super(),this.chartController=e,this.chartMenuUtils=i,this.isExpandedOnInit=s}init(){const e={cssIdentifier:"charts-format-top-level",direction:"vertical",title:this.translate("polarAxis"),expanded:this.isExpandedOnInit,suppressEnabledCheckbox:!0},i=this.chartMenuUtils.getDefaultColorPickerParams("line.color"),s=this.chartMenuUtils.getDefaultSliderParams("line.width","thickness",10);this.setTemplate(zV.TEMPLATE,{axisGroup:e,axisColorInput:i,axisLineWidthSlider:s}),this.initAxis(),this.initAxisLabels(),this.initRadiusAxis()}initAxis(){const e=this.chartController.getChartType();if(["radarLine","radarArea"].includes(e)){const s=[{value:"circle",text:this.translate("circle")},{value:"polygon",text:this.translate("polygon")}];this.axisGroup.addItem(this.createSelect({labelKey:"shape",options:s,property:"shape"}))}e!=="pie"&&this.axisGroup.addItem(this.createSlider({labelKey:"innerRadius",defaultMaxValue:1,property:"innerRadiusRatio"}))}initAxisLabels(){const e={name:this.translate("labels"),enabled:!0,suppressEnabledCheckbox:!0,chartMenuUtils:this.chartMenuUtils,keyMapper:r=>`label.${r}`},i=this.createManagedBean(new Bu(e)),s=this.createOrientationWidget();i.addItemToPanel(s),this.axisGroup.addItem(i)}createOrientationWidget(){const e=[{value:"fixed",text:this.translate("fixed")},{value:"parallel",text:this.translate("parallel")},{value:"perpendicular",text:this.translate("perpendicular")}];return this.createSelect({labelKey:"orientation",options:e,property:"label.orientation"})}initRadiusAxis(){const e=ss(this.chartController.getChartType());if(!zte(e))return;const i=[this.createSlider({labelKey:"groupPadding",defaultMaxValue:1,property:"paddingInner"}),this.createSlider({labelKey:"seriesPadding",defaultMaxValue:1,property:"groupPaddingInner"})],s=this.createManagedBean(new Bo({cssIdentifier:"charts-format-sub-level",direction:"vertical",suppressOpenCloseIcons:!0,enabled:!0,suppressEnabledCheckbox:!0,title:this.translate("padding"),items:i})).hideEnabledCheckbox(!0).hideOpenCloseIcons(!0);this.axisGroup.addItem(s)}createSlider(e){const{labelKey:i,defaultMaxValue:s,step:r=.05,property:n}=e,o=this.chartMenuUtils.getDefaultSliderParams(n,i,s);return o.step=r,this.createManagedBean(new Yn(o))}createSelect(e){const{labelKey:i,options:s,property:r}=e;return this.createManagedBean(new Jr(this.chartMenuUtils.addValueParams(r,{label:this.chartTranslationService.translate(i),labelAlignment:"left",labelWidth:"flex",inputWidth:"flex",options:s})))}translate(e){return this.chartTranslationService.translate(e)}};d0.TEMPLATE=`<div>
            <ag-group-component ref="axisGroup">
                <ag-color-picker ref="axisColorInput"></ag-color-picker>
                <ag-slider ref="axisLineWidthSlider"></ag-slider>
            </ag-group-component>
        </div>`;Ce([pe("axisGroup")],d0.prototype,"axisGroup",2);Ce([W("chartTranslationService")],d0.prototype,"chartTranslationService",2);Ce([de],d0.prototype,"init",1);var Eie=d0,h0=class $V extends Te{constructor(e,i){super(),this.chartMenuUtils=e,this.chartController=i}init(){const e={cssIdentifier:"charts-format-sub-level",direction:"vertical",suppressOpenCloseIcons:!0,title:this.chartTranslationService.translate("padding"),suppressEnabledCheckbox:!0},i=s=>this.chartMenuUtils.getDefaultSliderParams("padding."+s,s,200);this.setTemplate($V.TEMPLATE,{chartPaddingGroup:e,paddingTopSlider:i("top"),paddingRightSlider:i("right"),paddingBottomSlider:i("bottom"),paddingLeftSlider:i("left")}),this.addManagedListener(this.eventService,K.EVENT_CHART_OPTIONS_CHANGED,s=>{this.updateTopPadding(s.chartOptions)})}updateTopPadding(e){const i=[...this.chartController.getChartSeriesTypes(),"common"].map(s=>{var r,n;return(n=(r=e[s])==null?void 0:r.padding)==null?void 0:n.top}).find(s=>s!=null);i!=null&&this.paddingTopSlider.setValue(`${i}`)}};h0.TEMPLATE=`<div>
            <ag-group-component ref="chartPaddingGroup">
                <ag-slider ref="paddingTopSlider"></ag-slider>
                <ag-slider ref="paddingRightSlider"></ag-slider>
                <ag-slider ref="paddingBottomSlider"></ag-slider>
                <ag-slider ref="paddingLeftSlider"></ag-slider>
            </ag-group-component>
        <div>`;Ce([pe("paddingTopSlider")],h0.prototype,"paddingTopSlider",2);Ce([W("chartTranslationService")],h0.prototype,"chartTranslationService",2);Ce([de],h0.prototype,"init",1);var Tie=h0,RE=class KV extends Te{constructor(e){super(),this.chartMenuUtils=e}init(){const e=this.chartMenuUtils.addEnableParams("background.visible",{cssIdentifier:"charts-format-sub-level",direction:"vertical",suppressOpenCloseIcons:!0,title:this.chartTranslationService.translate("background"),suppressEnabledCheckbox:!1}),i=this.chartMenuUtils.getDefaultColorPickerParams("background.fill");this.setTemplate(KV.TEMPLATE,{chartBackgroundGroup:e,colorPicker:i})}};RE.TEMPLATE=`<div>
            <ag-group-component ref="chartBackgroundGroup">
                <ag-color-picker ref="colorPicker"></ag-color-picker>
            </ag-group-component>
        <div>`;Ce([W("chartTranslationService")],RE.prototype,"chartTranslationService",2);Ce([de],RE.prototype,"init",1);var _ie=RE,p0=class YV extends Te{constructor(e,i){super(YV.TEMPLATE),this.chartMenuUtils=e,this.chartController=i,this.activePanels=[],this.chartOptions=e.getChartOptions()}init(){this.initFontPanel(),this.titlePlaceholder=this.chartTranslationService.translate("titlePlaceholder")}hasTitle(){const e=this.chartOptions.getValue("title");return e&&e.enabled&&e.text&&e.text.length>0}initFontPanel(){const e=this.hasTitle(),i={name:this.chartTranslationService.translate("title"),enabled:e,suppressEnabledCheckbox:!1,chartMenuUtils:this.chartMenuUtils,keyMapper:r=>`title.${r}`,onEnableChange:r=>{if(this.chartMenuService.doesChartToolbarExist(this.chartController)){const a=this.chartOptions.getValue("padding.top");this.chartOptions.setValue("padding.top",r?a-20:a+20)}this.chartOptions.setValue("title.enabled",r);const n=this.chartOptions.getValue("title.text"),o=n==="Title"||(n==null?void 0:n.trim().length)===0;r&&o&&this.chartOptions.setValue("title.text",this.titlePlaceholder)}},s=this.createBean(new Bu(i));s.addItemToPanel(this.createSpacingSlicer()),this.getGui().appendChild(s.getGui()),this.activePanels.push(s),this.addManagedListener(this.eventService,"chartTitleEdit",()=>{s.setEnabled(this.hasTitle())})}createSpacingSlicer(){const e=this.chartMenuUtils.getDefaultSliderParams("title.spacing","spacing",100);return e.value="10",this.createBean(new Yn(e))}destroyActivePanels(){this.activePanels.forEach(e=>{Q.removeFromParent(e.getGui()),this.destroyBean(e)})}destroy(){this.destroyActivePanels(),super.destroy()}};p0.TEMPLATE="<div></div>";Ce([W("chartTranslationService")],p0.prototype,"chartTranslationService",2);Ce([W("chartMenuService")],p0.prototype,"chartMenuService",2);Ce([de],p0.prototype,"init",1);var Aie=p0,f0=class qV extends Te{constructor({chartController:e,chartMenuParamsFactory:i,isExpandedOnInit:s=!1,chartOptionsService:r,seriesType:n}){super(),this.chartController=e,this.chartMenuParamsFactory=i,this.chartOptionsSeriesProxy=r.getSeriesOptionsProxy(()=>n??this.chartController.getChartSeriesType()),this.isExpandedOnInit=s}init(){this.chartSeriesMenuParamsFactory=this.createManagedBean(new Oh(this.chartOptionsSeriesProxy));const e={cssIdentifier:"charts-format-top-level",direction:"vertical",title:this.chartTranslationService.translate("chart"),expanded:this.isExpandedOnInit,suppressEnabledCheckbox:!0,items:[this.createManagedBean(new Aie(this.chartMenuParamsFactory,this.chartController)),this.createManagedBean(new Tie(this.chartMenuParamsFactory,this.chartController)),this.createManagedBean(new _ie(this.chartMenuParamsFactory)),...this.createDirectionSelect()]};this.setTemplate(qV.TEMPLATE,{chartGroup:e}),this.addManagedListener(this.eventService,K.EVENT_CHART_OPTIONS_CHANGED,()=>this.refresh())}refresh(){this.updateDirectionSelect()}createDirectionSelect(){if(!!this.chartMenuService.isLegacyFormat())return[];const i=["horizontal","vertical"].map(n=>({value:n,text:this.chartTranslationService.translate(n)})),s=this.chartSeriesMenuParamsFactory.getDefaultSelectParams("direction","direction",i);s.labelWidth="flex",s.inputWidth="flex";const r=s.onValueChange;return s.onValueChange=n=>{r(n),this.chartController.raiseChartModelUpdateEvent()},this.directionSelect=this.createManagedBean(new Jr(s)),this.updateDirectionSelect(),[this.directionSelect]}updateDirectionSelect(){var e;(e=this.directionSelect)==null||e.setDisplayed(Kte(this.chartController.getChartType()))}};f0.TEMPLATE=`<div>
            <ag-group-component ref="chartGroup"></ag-group-component>
        </div>`;Ce([W("chartTranslationService")],f0.prototype,"chartTranslationService",2);Ce([W("chartMenuService")],f0.prototype,"chartMenuService",2);Ce([de],f0.prototype,"init",1);var Rie=f0,ME=class XV extends Te{constructor(e,i="shadow"){super(),this.chartMenuUtils=e,this.propertyKey=i}init(){const e=this.propertyKey,i=this.chartMenuUtils.addEnableParams(`${e}.enabled`,{cssIdentifier:"charts-format-sub-level",direction:"vertical",suppressOpenCloseIcons:!0,title:this.chartTranslationService.translate("shadow"),suppressEnabledCheckbox:!1}),s=this.chartMenuUtils.getDefaultColorPickerParams(`${e}.color`);this.setTemplate(XV.TEMPLATE,{shadowGroup:i,shadowColorPicker:s,shadowBlurSlider:this.getSliderParams("blur",0,20),shadowXOffsetSlider:this.getSliderParams("xOffset",-10,10),shadowYOffsetSlider:this.getSliderParams("yOffset",-10,10)})}getSliderParams(e,i,s){const r=`${this.propertyKey}.${e}`,n=this.chartMenuUtils.getDefaultSliderParams(r,e,s);return n.minValue=i,n}};ME.TEMPLATE=`<div>
            <ag-group-component ref="shadowGroup">
                <ag-color-picker ref="shadowColorPicker"></ag-color-picker>
                <ag-slider ref="shadowBlurSlider"></ag-slider>
                <ag-slider ref="shadowXOffsetSlider"></ag-slider>
                <ag-slider ref="shadowYOffsetSlider"></ag-slider>
            </ag-group-component>
        </div>`;Ce([W("chartTranslationService")],ME.prototype,"chartTranslationService",2);Ce([de],ME.prototype,"init",1);var Mie=ME,g0=class ZV extends Te{constructor(e,i){super(),this.chartOptionsService=e,this.chartMenuUtils=i}init(){const e=this.chartOptionsService.getChartType(),i=Q.includes(["scatter","bubble"],e),s=this.chartMenuUtils.addEnableParams("marker.enabled",{cssIdentifier:"charts-format-sub-level",direction:"vertical",title:this.chartTranslationService.translate("markers"),suppressEnabledCheckbox:i,suppressOpenCloseIcons:!0}),r=e==="bubble";let n,o;r?(n=this.getSliderParams("marker.maxSize","maxSize",60),o=this.getSliderParams("marker.size","minSize",60)):(n={},o=this.getSliderParams("marker.size","size",60)),this.setTemplate(ZV.TEMPLATE,{seriesMarkersGroup:s,seriesMarkerShapeSelect:this.getMarkerShapeSelectParams(),seriesMarkerMinSizeSlider:n,seriesMarkerSizeSlider:o,seriesMarkerStrokeWidthSlider:this.getSliderParams("marker.strokeWidth","strokeWidth",10)}),r||this.seriesMarkerMinSizeSlider.setDisplayed(!1)}getMarkerShapeSelectParams(){const e=[{value:"square",text:"Square"},{value:"circle",text:"Circle"},{value:"cross",text:"Cross"},{value:"diamond",text:"Diamond"},{value:"plus",text:"Plus"},{value:"triangle",text:"Triangle"},{value:"heart",text:"Heart"}];return this.chartMenuUtils.addValueParams("marker.shape",{options:e,label:this.chartTranslationService.translate("shape")})}getSliderParams(e,i,s){return this.chartMenuUtils.getDefaultSliderParams(e,i,s)}};g0.TEMPLATE=`<div>
            <ag-group-component ref="seriesMarkersGroup">
                <ag-select ref="seriesMarkerShapeSelect"></ag-select>
                <ag-slider ref="seriesMarkerMinSizeSlider"></ag-slider>
                <ag-slider ref="seriesMarkerSizeSlider"></ag-slider>
                <ag-slider ref="seriesMarkerStrokeWidthSlider"></ag-slider>
            </ag-group-component>
        </div>`;Ce([pe("seriesMarkerMinSizeSlider")],g0.prototype,"seriesMarkerMinSizeSlider",2);Ce([W("chartTranslationService")],g0.prototype,"chartTranslationService",2);Ce([de],g0.prototype,"init",1);var Die=g0,wo=class Xc extends Te{constructor(e){super(Xc.TEMPLATE),this.H=1,this.S=1,this.B=1,this.A=1,this.isSpectrumDragging=!1,this.isSpectrumHueDragging=!1,this.isSpectrumAlphaDragging=!1,this.colorChanged=!1,this.picker=e.picker}postConstruct(){this.initTabIndex(),this.initRecentColors(),this.addGuiEventListener("focus",()=>this.spectrumColor.focus()),this.addGuiEventListener("keydown",e=>{e.key===ce.ENTER&&!e.defaultPrevented&&this.destroy()}),this.addManagedListener(this.spectrumColor,"keydown",e=>this.moveDragger(e)),this.addManagedListener(this.spectrumAlphaSlider,"keydown",e=>this.moveAlphaSlider(e)),this.addManagedListener(this.spectrumHueSlider,"keydown",e=>this.moveHueSlider(e)),this.addManagedListener(this.spectrumVal,"mousedown",this.onSpectrumDraggerDown.bind(this)),this.addManagedListener(this.spectrumHue,"mousedown",this.onSpectrumHueDown.bind(this)),this.addManagedListener(this.spectrumAlpha,"mousedown",this.onSpectrumAlphaDown.bind(this)),this.addGuiEventListener("mousemove",e=>{this.onSpectrumDraggerMove(e),this.onSpectrumHueMove(e),this.onSpectrumAlphaMove(e)}),this.addManagedListener(document,"mouseup",this.onMouseUp.bind(this)),this.addManagedListener(this.recentColors,"click",this.onRecentColorClick.bind(this)),this.addManagedListener(this.recentColors,"keydown",e=>{(e.key===ce.ENTER||e.key===ce.SPACE)&&(e.preventDefault(),this.onRecentColorClick(e))})}initTabIndex(){const e=this.tabIndex=this.gos.get("tabIndex").toString();this.spectrumColor.setAttribute("tabindex",e),this.spectrumHueSlider.setAttribute("tabindex",e),this.spectrumAlphaSlider.setAttribute("tabindex",e)}refreshSpectrumRect(){return this.spectrumValRect=this.spectrumVal.getBoundingClientRect()}refreshHueRect(){return this.spectrumHueRect=this.spectrumHue.getBoundingClientRect()}refreshAlphaRect(){return this.spectrumAlphaRect=this.spectrumAlpha.getBoundingClientRect()}onSpectrumDraggerDown(e){this.refreshSpectrumRect(),this.isSpectrumDragging=!0,this.moveDragger(e)}onSpectrumDraggerMove(e){this.isSpectrumDragging&&this.moveDragger(e)}onSpectrumHueDown(e){this.refreshHueRect(),this.isSpectrumHueDragging=!0,this.moveHueSlider(e)}onSpectrumHueMove(e){this.isSpectrumHueDragging&&this.moveHueSlider(e)}onSpectrumAlphaDown(e){this.refreshAlphaRect(),this.isSpectrumAlphaDragging=!0,this.moveAlphaSlider(e)}onSpectrumAlphaMove(e){this.isSpectrumAlphaDragging&&this.moveAlphaSlider(e)}onMouseUp(){this.isSpectrumDragging=!1,this.isSpectrumHueDragging=!1,this.isSpectrumAlphaDragging=!1}moveDragger(e){const i=this.spectrumValRect;if(!i)return;let s,r;if(e instanceof MouseEvent)s=e.clientX-i.left,r=e.clientY-i.top;else{const n=e.key===ce.LEFT,o=e.key===ce.RIGHT,a=e.key===ce.UP,l=e.key===ce.DOWN,c=a||l,u=n||o;if(!c&&!u)return;e.preventDefault();const{x:d,y:h}=this.getSpectrumValue();s=d+(u?n?-5:5:0),r=h+(c?a?-5:5:0)}s=Math.max(s,0),s=Math.min(s,i.width),r=Math.max(r,0),r=Math.min(r,i.height),this.setSpectrumValue(s/i.width,1-r/i.height)}moveHueSlider(e){const i=this.spectrumHueRect;if(!i)return;const s=this.moveSlider(this.spectrumHueSlider,e);s!=null&&(this.H=1-s/i.width,this.update())}moveAlphaSlider(e){const i=this.spectrumAlphaRect;if(!i)return;const s=this.moveSlider(this.spectrumAlphaSlider,e);s!=null&&(this.A=s/i.width,this.update())}moveSlider(e,i){var s;const r=e.getBoundingClientRect(),n=(s=e.parentElement)==null?void 0:s.getBoundingClientRect();if(!e||!n)return null;let o;if(i instanceof MouseEvent)o=i.clientX-n.left;else{const a=i.key===ce.LEFT,l=i.key===ce.RIGHT;if(!a&&!l)return null;i.preventDefault();const c=a?-5:5;o=parseFloat(e.style.left)-r.width/2+c}return o=Math.max(o,0),o=Math.min(o,n.width),e.style.left=o+r.width/2+"px",o}update(){const e=qs.Color.fromHSB(this.H*360,this.S,this.B,this.A),i=qs.Color.fromHSB(this.H*360,1,1),s=e.toRgbaString(),r=this.picker;qs.Color.fromString(r.getValue()).toRgbaString()!==s&&(this.colorChanged=!0),r.setValue(s),this.spectrumColor.style.backgroundColor=i.toRgbaString(),this.spectrumDragger.style.backgroundColor=s}setSpectrumValue(e,i){const s=this.spectrumValRect||this.refreshSpectrumRect();if(s==null)return;const r=this.spectrumDragger,n=r.getBoundingClientRect();e=Math.max(0,e),e=Math.min(1,e),i=Math.max(0,i),i=Math.min(1,i),this.S=e,this.B=i,r.style.left=e*s.width-n.width/2+"px",r.style.top=(1-i)*s.height-n.height/2+"px",this.update()}getSpectrumValue(){const e=this.spectrumDragger,i=e.getBoundingClientRect(),s=parseFloat(e.style.left)+i.width/2,r=parseFloat(e.style.top)+i.height/2;return{x:s,y:r}}initRecentColors(){const i=Xc.recentColors.map((s,r)=>`<div class="ag-recent-color" id=${r} style="background-color: ${s}; width: 15px; height: 15px;" recent-color="${s}" tabIndex="${this.tabIndex}"></div>`);this.recentColors.innerHTML=i.join("")}setValue(e){const i=qs.Color.fromString(e),[s,r,n]=i.toHSB();this.H=(isNaN(s)?0:s)/360,this.A=i.a;const o=this.spectrumHueRect||this.refreshHueRect(),a=this.spectrumAlphaRect||this.refreshAlphaRect();this.spectrumHueSlider.style.left=`${(this.H-1)*-o.width}px`,this.spectrumAlphaSlider.style.left=`${this.A*a.width}px`,this.setSpectrumValue(r,n)}onRecentColorClick(e){const i=e.target;if(!Q.exists(i.id))return;const s=parseInt(i.id,10);this.setValue(Xc.recentColors[s]),this.destroy()}addRecentColor(){const i=qs.Color.fromHSB(this.H*360,this.S,this.B,this.A).toRgbaString();let s=Xc.recentColors;!this.colorChanged||s[0]===i||(s=s.filter(r=>r!=i),s=[i].concat(s),s.length>Xc.maxRecentColors&&(s=s.slice(0,Xc.maxRecentColors)),Xc.recentColors=s)}destroy(){this.addRecentColor(),super.destroy()}};wo.maxRecentColors=8;wo.recentColors=[];wo.TEMPLATE=`<div class="ag-color-panel" tabindex="-1">
            <div ref="spectrumColor" class="ag-spectrum-color">
                <div class="ag-spectrum-sat ag-spectrum-fill">
                    <div ref="spectrumVal" class="ag-spectrum-val ag-spectrum-fill">
                        <div ref="spectrumDragger" class="ag-spectrum-dragger"></div>
                    </div>
                </div>
            </div>
            <div class="ag-spectrum-tools">
                <div ref="spectrumHue" class="ag-spectrum-hue ag-spectrum-tool">
                    <div class="ag-spectrum-hue-background"></div>
                    <div ref="spectrumHueSlider" class="ag-spectrum-slider"></div>
                </div>
                <div ref="spectrumAlpha" class="ag-spectrum-alpha ag-spectrum-tool">
                    <div class="ag-spectrum-alpha-background"></div>
                    <div ref="spectrumAlphaSlider" class="ag-spectrum-slider"></div>
                </div>
                <div ref="recentColors" class="ag-recent-colors"></div>
            </div>
        </div>`;Ce([pe("spectrumColor")],wo.prototype,"spectrumColor",2);Ce([pe("spectrumVal")],wo.prototype,"spectrumVal",2);Ce([pe("spectrumDragger")],wo.prototype,"spectrumDragger",2);Ce([pe("spectrumHue")],wo.prototype,"spectrumHue",2);Ce([pe("spectrumHueSlider")],wo.prototype,"spectrumHueSlider",2);Ce([pe("spectrumAlpha")],wo.prototype,"spectrumAlpha",2);Ce([pe("spectrumAlphaSlider")],wo.prototype,"spectrumAlphaSlider",2);Ce([pe("recentColors")],wo.prototype,"recentColors",2);Ce([de],wo.prototype,"postConstruct",1);var Pie=wo,JV=class extends Ec{constructor(t){super(Xe({pickerAriaLabelKey:"ariaLabelColorPicker",pickerAriaLabelValue:"Color Picker",pickerType:"ag-list",className:"ag-color-picker",pickerIcon:"colorPicker"},t))}postConstruct(){super.postConstruct(),this.value&&this.setValue(this.value)}createPickerComponent(){const t=this.getGui().getBoundingClientRect();return this.createBean(new lc({closable:!1,modal:!0,hideTitleBar:!0,minWidth:190,width:190,height:250,x:t.right-190,y:t.top-250}))}renderAndPositionPicker(){const t=this.pickerComponent,e=this.createBean(new Pie({picker:this}));return t.addCssClass("ag-color-dialog"),e.addDestroyFunc(()=>{t.isAlive()&&this.destroyBean(t)}),t.setParentComponent(this),t.setBodyComponent(e),e.setValue(this.getValue()),e.getGui().focus(),t.addDestroyFunc(()=>{this.isDestroyingPicker?this.isDestroyingPicker=!1:(this.beforeHidePicker(),this.isDestroyingPicker=!0,e.isAlive()&&this.destroyBean(e),this.isAlive()&&this.getFocusableElement().focus())}),()=>{var i;return(i=this.pickerComponent)==null?void 0:i.close()}}setValue(t){return this.value===t?this:(this.eDisplayField.style.backgroundColor=t,super.setValue(t))}getValue(){return this.value}},DE=class QV extends Te{constructor(e){super(),this.chartMenuUtils=e}init(){const e={cssIdentifier:"charts-format-sub-level",direction:"vertical",title:this.chartTranslationService.translate("callout"),enabled:!0,suppressOpenCloseIcons:!0,suppressEnabledCheckbox:!0};this.setTemplate(QV.TEMPLATE,{calloutGroup:e,calloutLengthSlider:this.chartMenuUtils.getDefaultSliderParams("calloutLine.length","length",40),calloutStrokeWidthSlider:this.chartMenuUtils.getDefaultSliderParams("calloutLine.strokeWidth","strokeWidth",10),labelOffsetSlider:this.chartMenuUtils.getDefaultSliderParams("calloutLabel.offset","offset",30)})}};DE.TEMPLATE=`<div>
            <ag-group-component ref="calloutGroup">
                <ag-slider ref="calloutLengthSlider"></ag-slider>
                <ag-slider ref="calloutStrokeWidthSlider"></ag-slider>
                <ag-slider ref="labelOffsetSlider"></ag-slider>
            </ag-group-component>
        </div>`;Ce([W("chartTranslationService")],DE.prototype,"chartTranslationService",2);Ce([de],DE.prototype,"init",1);var Iie=DE,PE=class e7 extends Te{constructor(e){super(),this.chartMenuUtils=e}init(){const e={cssIdentifier:"charts-format-sub-level",direction:"vertical",title:this.chartTranslationService.translate("cap"),enabled:!0,suppressOpenCloseIcons:!0,suppressEnabledCheckbox:!0},i=this.chartMenuUtils.getDefaultSliderParams("cap.lengthRatio","capLengthRatio",1);i.step=.05,this.setTemplate(e7.TEMPLATE,{capsGroup:e,capLengthRatioSlider:i})}};PE.TEMPLATE=`<div>
            <ag-group-component ref="capsGroup">
                <ag-slider ref="capLengthRatioSlider"></ag-slider>
            </ag-group-component>
        </div>`;Ce([W("chartTranslationService")],PE.prototype,"chartTranslationService",2);Ce([de],PE.prototype,"init",1);var Fie=PE,IE=class t7 extends Te{constructor(e){super(),this.chartMenuUtils=e}init(){const e={cssIdentifier:"charts-format-sub-level",direction:"vertical",title:this.chartTranslationService.translate("connectorLine"),enabled:!0,suppressOpenCloseIcons:!0,suppressEnabledCheckbox:!0};this.setTemplate(t7.TEMPLATE,{lineGroup:e,lineColorPicker:this.chartMenuUtils.getDefaultColorPickerParams("line.stroke"),lineStrokeWidthSlider:this.getSliderParams("strokeWidth",10,"line.strokeWidth"),lineDashSlider:this.getSliderParams("lineDash",30,"line.lineDash",1,!0),lineOpacitySlider:this.getSliderParams("strokeOpacity",1,"line.strokeOpacity",.05)})}getSliderParams(e,i,s,r=1,n=!1){const o=this.chartMenuUtils.getDefaultSliderParams(s,e,i,n);return o.step=r,o}};IE.TEMPLATE=`<div>
            <ag-group-component ref="lineGroup">
                <ag-color-picker ref="lineColorPicker"></ag-color-picker>
                <ag-slider ref="lineStrokeWidthSlider"></ag-slider>
                <ag-slider ref="lineOpacitySlider"></ag-slider>
                <ag-slider ref="lineDashSlider"></ag-slider>                
            </ag-group-component>
        </div>`;Ce([W("chartTranslationService")],IE.prototype,"chartTranslationService",2);Ce([de],IE.prototype,"init",1);var Lie=IE,FE=class i7 extends Te{constructor(e){super(),this.chartMenuUtils=e}init(){const e={cssIdentifier:"charts-format-sub-level",direction:"vertical",title:this.chartTranslationService.translate("whisker"),enabled:!0,suppressOpenCloseIcons:!0,suppressEnabledCheckbox:!0};this.setTemplate(i7.TEMPLATE,{whiskersGroup:e,whiskerColorPicker:this.chartMenuUtils.getDefaultColorPickerParams("whisker.stroke"),whiskerThicknessSlider:this.chartMenuUtils.getDefaultSliderParams("whisker.strokeWidth","strokeWidth",10),whiskerOpacitySlider:this.chartMenuUtils.getDefaultSliderParams("whisker.strokeOpacity","strokeOpacity",1),whiskerLineDashSlider:this.chartMenuUtils.getDefaultSliderParams("whisker.lineDash","lineDash",30,!0),whiskerLineDashOffsetSlider:this.chartMenuUtils.getDefaultSliderParams("whisker.lineDashOffset","lineDashOffset",30)})}};FE.TEMPLATE=`<div>
            <ag-group-component ref="whiskersGroup">
                <ag-color-picker ref="whiskerColorPicker"></ag-color-picker>
                <ag-slider ref="whiskerThicknessSlider"></ag-slider>
                <ag-slider ref="whiskerOpacitySlider"></ag-slider>
                <ag-slider ref="whiskerLineDashSlider"></ag-slider>
                <ag-slider ref="whiskerLineDashOffsetSlider"></ag-slider>
            </ag-group-component>
        </div>`;Ce([W("chartTranslationService")],FE.prototype,"chartTranslationService",2);Ce([de],FE.prototype,"init",1);var kie=FE,m0=class s7 extends Te{constructor(e){super(),this.chartMenuUtils=e,this.activePanels=[]}init(){const e={cssIdentifier:"charts-format-sub-level",direction:"vertical",title:this.chartTranslationService.translate("seriesItems"),enabled:!0,suppressOpenCloseIcons:!0,suppressEnabledCheckbox:!0};this.setTemplate(s7.TEMPLATE,{seriesItemsGroup:e,seriesItemSelect:this.getSeriesItemsParams()}),this.initSeriesControls()}getSeriesItemsParams(){const e=[{value:"positive",text:this.chartTranslationService.translate("seriesItemPositive")},{value:"negative",text:this.chartTranslationService.translate("seriesItemNegative")}],i=s=>{this.destroyActivePanels(),this.initSeriesControls(s)};return{label:this.chartTranslationService.translate("seriesItemType"),labelAlignment:"left",labelWidth:"flex",inputWidth:"flex",options:e,value:"positive",onValueChange:i}}initSeriesControls(e="positive"){this.initSlider("strokeWidth",10,`item.${e}.strokeWidth`),this.initSlider("lineDash",30,`item.${e}.lineDash`,1,!0),this.initSlider("strokeOpacity",1,`item.${e}.strokeOpacity`,.05,!1),this.initSlider("fillOpacity",1,`item.${e}.fillOpacity`,.05,!1),this.initItemLabels(e)}initSlider(e,i,s,r=1,n=!1){const o=this.chartMenuUtils.getDefaultSliderParams(s,e,i,n);o.step=r;const a=this.seriesItemsGroup.createManagedBean(new Yn(o));this.seriesItemsGroup.addItem(a),this.activePanels.push(a)}initItemLabels(e){const i=this.chartMenuUtils.getDefaultFontPanelParams(`item.${e}.label`,"seriesItemLabels"),s=this.createBean(new Bu(i));this.seriesItemsGroup.addItem(s),this.activePanels.push(s)}destroyActivePanels(){this.activePanels.forEach(e=>{Q.removeFromParent(e.getGui()),this.destroyBean(e)})}destroy(){this.destroyActivePanels(),super.destroy()}};m0.TEMPLATE=`<div>
            <ag-group-component ref="seriesItemsGroup">
                <ag-select ref="seriesItemSelect"></ag-select>
            </ag-group-component>
        </div>`;Ce([pe("seriesItemsGroup")],m0.prototype,"seriesItemsGroup",2);Ce([W("chartTranslationService")],m0.prototype,"chartTranslationService",2);Ce([de],m0.prototype,"init",1);var Nie=m0,LE=class r7 extends Te{constructor(e){super(),this.chartMenuUtils=e}init(){const e={cssIdentifier:"charts-format-sub-level",direction:"vertical",enabled:!0,suppressOpenCloseIcons:!0,suppressEnabledCheckbox:!0};this.setTemplate(r7.TEMPLATE,{groupSpacing:Bt(Xe({},e),{title:this.chartTranslationService.translate("group")}),tileSpacing:Bt(Xe({},e),{title:this.chartTranslationService.translate("tile")}),groupPaddingSlider:this.getSliderParams("padding","group.padding"),groupSpacingSlider:this.getSliderParams("spacing","group.gap"),tilePaddingSlider:this.getSliderParams("padding","tile.padding"),tileSpacingSlider:this.getSliderParams("spacing","tile.gap")})}getSliderParams(e,i){return this.chartMenuUtils.getDefaultSliderParams(i,e,10)}};LE.TEMPLATE=`<div>
            <ag-group-component ref="groupSpacing">
                <ag-slider ref="groupPaddingSlider"></ag-slider>
                <ag-slider ref="groupSpacingSlider"></ag-slider>
            </ag-group-component>
            <ag-group-component ref="tileSpacing">
                <ag-slider ref="tilePaddingSlider"></ag-slider>
                <ag-slider ref="tileSpacingSlider"></ag-slider>
            </ag-group-component>
        </div>`;Ce([W("chartTranslationService")],LE.prototype,"chartTranslationService",2);Ce([de],LE.prototype,"init",1);var Oie=LE,v0=class n7 extends Te{constructor({chartController:e,chartOptionsService:i,seriesType:s,isExpandedOnInit:r=!1}){super(),this.activePanels=[],this.widgetFuncs={lineWidth:()=>this.initStrokeWidth("lineWidth"),strokeWidth:()=>this.initStrokeWidth("strokeWidth"),lineColor:()=>this.initLineColor(),lineDash:()=>this.initLineDash(),lineOpacity:()=>this.initLineOpacity(),fillOpacity:()=>this.initFillOpacity(),markers:()=>this.initMarkers(),labels:()=>this.initLabels(),shadow:()=>this.initShadow(),tooltips:()=>this.initTooltips(),bins:()=>this.initBins(),whiskers:()=>this.initWhiskers(),caps:()=>this.initCaps(),connectorLine:()=>this.initConnectorLine(),seriesItems:()=>this.initSeriesItemsPanel(),tileSpacing:()=>this.initTileSpacingPanel(),groupType:()=>this.initGroupType()},this.seriesWidgetMappings={bar:["tooltips","strokeWidth","lineDash","lineOpacity","fillOpacity","labels","shadow"],pie:["tooltips","strokeWidth","lineOpacity","fillOpacity","labels","shadow"],donut:["tooltips","strokeWidth","lineOpacity","fillOpacity","labels","shadow"],line:["tooltips","lineWidth","lineDash","lineOpacity","markers","labels"],scatter:["tooltips","markers","labels"],bubble:["tooltips","markers","labels"],area:["tooltips","lineWidth","lineDash","lineOpacity","fillOpacity","markers","labels","shadow"],histogram:["tooltips","bins","strokeWidth","lineDash","lineOpacity","fillOpacity","labels","shadow"],"radial-column":["tooltips","strokeWidth","lineDash","lineOpacity","fillOpacity","labels","groupType"],"radial-bar":["tooltips","strokeWidth","lineDash","lineOpacity","fillOpacity","labels","groupType"],"radar-line":["tooltips","strokeWidth","lineDash","lineOpacity","markers","labels"],"radar-area":["tooltips","strokeWidth","lineDash","lineOpacity","fillOpacity","markers","labels"],nightingale:["tooltips","strokeWidth","lineDash","lineOpacity","fillOpacity","labels","groupType"],"box-plot":["tooltips","strokeWidth","lineDash","lineOpacity","fillOpacity","whiskers","caps"],"range-bar":["tooltips","strokeWidth","lineDash","lineOpacity","fillOpacity","labels"],"range-area":["tooltips","lineWidth","lineDash","lineOpacity","fillOpacity","markers","labels","shadow"],treemap:["tooltips","tileSpacing"],sunburst:["tooltips"],heatmap:["tooltips","labels","lineColor","lineWidth","lineOpacity"],waterfall:["tooltips","connectorLine","seriesItems"]},this.chartController=e,this.chartOptionsService=i,this.seriesType=s||this.chartController.getChartSeriesType(),this.isExpandedOnInit=r}init(){const e={cssIdentifier:"charts-format-top-level",direction:"vertical",title:this.translate("series"),expanded:this.isExpandedOnInit,suppressEnabledCheckbox:!0};this.setTemplate(n7.TEMPLATE,{seriesGroup:e}),this.chartMenuUtils=this.createManagedBean(new Oh(this.chartOptionsService.getSeriesOptionsProxy(()=>this.seriesType))),this.chartOptions=this.chartMenuUtils.getChartOptions(),this.addManagedListener(this.chartController,co.EVENT_CHART_SERIES_CHART_TYPE_CHANGED,this.refreshWidgets.bind(this)),this.refreshWidgets()}refreshWidgets(){this.destroyActivePanels(),this.chartController.getChartProxy().getChart().waitForUpdate().then(()=>{var i;this.isAlive()&&(this.chartController.isComboChart()&&(this.updateSeriesType(),this.initSeriesSelect()),((i=this.seriesWidgetMappings[this.seriesType])!=null?i:[]).forEach(r=>this.widgetFuncs[r]()))}).catch(i=>console.error("AG Grid - chart rendering failed",i))}initSeriesSelect(){const e=this.seriesGroup.createManagedBean(new Jr({label:this.translate("seriesType"),labelAlignment:"left",labelWidth:"flex",inputWidth:"flex",options:this.getSeriesSelectOptions(),value:`${this.seriesType}`,onValueChange:i=>{this.seriesType=i,this.refreshWidgets()}}));this.seriesGroup.addItem(e),this.activePanels.push(e)}initTooltips(){const e=this.createBean(new ep(this.chartMenuUtils.addValueParams("tooltip.enabled",{label:this.translate("tooltips"),labelAlignment:"left",labelWidth:"flex",inputWidth:"flex"})));this.addWidget(e)}initLineColor(){const e=this.createBean(new JV(this.chartMenuUtils.getDefaultColorPickerParams("stroke","strokeColor")));this.addWidget(e)}initStrokeWidth(e){const i=this.createBean(new Yn(this.chartMenuUtils.getDefaultSliderParams("strokeWidth",e,10)));this.addWidget(i)}initLineDash(){const e=this.createBean(new Yn(this.chartMenuUtils.getDefaultSliderParams("lineDash","lineDash",30,!0)));this.addWidget(e)}initLineOpacity(){const e=this.chartMenuUtils.getDefaultSliderParams("strokeOpacity","strokeOpacity",1);e.step=.05;const i=this.createBean(new Yn(e));this.addWidget(i)}initFillOpacity(){const e=this.chartMenuUtils.getDefaultSliderParams("fillOpacity","fillOpacity",1);e.step=.05;const i=this.createBean(new Yn(e));this.addWidget(i)}initLabels(){const e=wV(this.seriesType),i=e?"calloutLabel":"label",s=e?"calloutLabels":"labels",r=this.chartMenuUtils.getDefaultFontPanelParams(i,s),n=this.createBean(new Bu(r));if(e){const o=this.createBean(new Iie(this.chartMenuUtils));n.addCompToPanel(o),this.activePanels.push(o)}if(this.addWidget(n),e){const o=this.chartMenuUtils.getDefaultFontPanelParams("sectorLabel","sectorLabels"),a=this.createBean(new Bu(o)),l=this.getSectorLabelPositionRatio();a.addCompToPanel(l),this.addWidget(a)}if(this.seriesType==="range-bar"){const o=[{value:"inside",text:this.translate("inside")},{value:"outside",text:this.translate("outside")}],a=n.createManagedBean(new Jr(this.chartMenuUtils.addValueParams("label.placement",{label:this.translate("labelPlacement"),labelAlignment:"left",labelWidth:"flex",inputWidth:"flex",options:o})));n.addCompToPanel(a),this.activePanels.push(a);const l=n.createManagedBean(new Yn(this.chartMenuUtils.getDefaultSliderParams("label.padding","padding",200)));n.addCompToPanel(l),this.activePanels.push(l)}}getSectorLabelPositionRatio(){const e=this.chartMenuUtils.getDefaultSliderParams("sectorLabel.positionRatio","positionRatio",1);return e.step=.05,this.createBean(new Yn(e))}initShadow(){const e=this.createBean(new Mie(this.chartMenuUtils));this.addWidget(e)}initMarkers(){const e=this.createBean(new Die(this.chartOptionsService,this.chartMenuUtils));this.addWidget(e)}initBins(){var e;const i=this.chartMenuUtils.getDefaultSliderParams("binCount","histogramBinCount",20),s=((e=this.chartOptions.getValue("bins"))!=null?e:this.chartOptions.getValue("calculatedBins",!0)).length;i.value=`${s}`,i.maxValue=Math.max(s,20);const r=this.createBean(new Yn(i));this.addWidget(r)}initWhiskers(){const e=this.createBean(new kie(this.chartMenuUtils));this.addWidget(e)}initCaps(){const e=this.createBean(new Fie(this.chartMenuUtils));this.addWidget(e)}initConnectorLine(){const e=this.createBean(new Lie(this.chartMenuUtils));this.addWidget(e)}initSeriesItemsPanel(){const e=this.createBean(new Nie(this.chartMenuUtils));this.addWidget(e)}initTileSpacingPanel(){const e=this.createBean(new Oie(this.chartMenuUtils));this.addWidget(e)}initGroupType(){const e=this.createBean(new Jr({label:this.chartTranslationService.translate("seriesGroupType"),options:np.SERIES_GROUP_TYPES.map(i=>({value:i,text:this.chartTranslationService.translate(`${i}SeriesGroupType`)})),value:this.chartController.getSeriesGroupType(),onValueChange:i=>this.chartController.setSeriesGroupType(i)}));this.addWidget(e)}addWidget(e){this.seriesGroup.addItem(e),this.activePanels.push(e)}getSeriesSelectOptions(){const e=this.getActiveSeriesTypes();return["area","bar","line"].filter(i=>e.includes(i)).map(i=>({value:i,text:this.translate(i)}))}updateSeriesType(){const e=this.getActiveSeriesTypes();!e.includes(this.seriesType)&&e.length>0&&(this.seriesType=e[0])}getActiveSeriesTypes(){return this.chartController.getActiveSeriesChartTypes().map(e=>ss(e.chartType))}translate(e){return this.chartTranslationService.translate(e)}destroyActivePanels(){this.activePanels.forEach(e=>{Q.removeFromParent(e.getGui()),this.destroyBean(e)})}destroy(){this.destroyActivePanels(),super.destroy()}};v0.TEMPLATE=`<div>
            <ag-group-component ref="seriesGroup">
            </ag-group-component>
        </div>`;Ce([pe("seriesGroup")],v0.prototype,"seriesGroup",2);Ce([W("chartTranslationService")],v0.prototype,"chartTranslationService",2);Ce([de],v0.prototype,"init",1);var Gie=v0,kE=class o7 extends Te{constructor({chartMenuParamsFactory:e,isExpandedOnInit:i=!1}){super(),this.chartMenuUtils=e,this.isExpandedOnInit=i}init(){const e=this.chartMenuUtils.addEnableParams("gradientLegend.enabled",{cssIdentifier:"charts-format-top-level",direction:"vertical",title:this.chartTranslationService.translate("legend"),suppressEnabledCheckbox:!1,suppressToggleExpandOnEnableChange:!0,expanded:this.isExpandedOnInit,items:[this.createLabelPanel()]});this.setTemplate(o7.TEMPLATE,{legendGroup:e,legendPositionSelect:this.chartMenuUtils.getDefaultLegendParams("gradientLegend.position"),gradientReverseCheckbox:this.getGradientReverseCheckboxParams(),gradientThicknessSlider:this.chartMenuUtils.getDefaultSliderParams("gradientLegend.gradient.thickness","thickness",40),gradientPreferredLengthSlider:this.chartMenuUtils.getDefaultSliderParams("gradientLegend.gradient.preferredLength","preferredLength",300),legendSpacingSlider:this.chartMenuUtils.getDefaultSliderParams("gradientLegend.spacing","spacing",200)})}getGradientReverseCheckboxParams(){return this.chartMenuUtils.addValueParams("gradientLegend.reverseOrder",{label:this.chartTranslationService.translate("reverseDirection"),labelWidth:"flex"})}createLabelPanel(){const e={enabled:!0,suppressEnabledCheckbox:!0,chartMenuUtils:this.chartMenuUtils,keyMapper:i=>`gradientLegend.scale.label.${i}`};return this.createManagedBean(new Bu(e))}};kE.TEMPLATE=`<div>
            <ag-group-component ref="legendGroup">
                <ag-select ref="legendPositionSelect"></ag-select>
                <ag-checkbox ref="gradientReverseCheckbox"></ag-checkbox>
                <ag-slider ref="gradientThicknessSlider"></ag-slider>
                <ag-slider ref="gradientPreferredLengthSlider"></ag-slider>
                <ag-slider ref="legendSpacingSlider"></ag-slider>
            </ag-group-component>
        </div>`;Ce([W("chartTranslationService")],kE.prototype,"chartTranslationService",2);Ce([de],kE.prototype,"init",1);var Bie=kE,r2=class extends ye{constructor(t,e,i,s){super(),this.chartController=t,this.eGui=e,this.cssClass=i,this.createPanels=s,this.panels=[]}postConstruct(){this.addManagedListener(this.chartController,co.EVENT_CHART_UPDATED,()=>this.refreshPanels(!0)),this.addManagedListener(this.chartController,co.EVENT_CHART_API_UPDATE,()=>this.refreshPanels(!1))}addComponent(t){this.createBean(t),this.panels.push(t),t.addCssClass(this.cssClass),this.eGui.appendChild(t.getGui())}refreshPanels(t){const e=this.chartController.getChartType(),i=this.chartController.isGrouping(),s=ss(e);t&&e===this.chartType&&i===this.isGrouping||(this.destroyPanels(),this.createPanels(e,s),this.chartType=e,this.isGrouping=i)}destroyPanels(){this.panels.forEach(t=>{Q.removeFromParent(t.getGui()),this.destroyBean(t)}),this.panels=[]}destroy(){this.destroyPanels(),super.destroy()}};Ce([de],r2.prototype,"postConstruct",1);var Vie={groups:[{type:"chart"},{type:"legend"},{type:"series"},{type:"axis"}]},n2=class a7 extends Te{constructor(e){super(a7.TEMPLATE),this.chartMenuContext=e}init(){this.chartPanelFeature=this.createManagedBean(new r2(this.chartMenuContext.chartController,this.getGui(),"ag-chart-format-section",(e,i)=>this.createPanels(e,i))),this.chartPanelFeature.refreshPanels()}createPanels(e,i){var s;(s=this.getFormatPanelDef().groups)==null||s.forEach(r=>{const n=r.type;if(!this.isGroupPanelShownInSeries(n,i))return;const o=Bt(Xe({},this.chartMenuContext),{isExpandedOnInit:r.isOpen,seriesType:i});switch(n){case"chart":this.chartPanelFeature.addComponent(new Rie(o));break;case"legend":const a=["treemap","sunburst","heatmap"].includes(e)?new Bie(o):new bie(o);this.chartPanelFeature.addComponent(a);break;case"axis":_L(i)?this.chartPanelFeature.addComponent(new Eie(o)):ih(i)&&(this.chartPanelFeature.addComponent(new Sb("xAxis",o)),this.chartPanelFeature.addComponent(new Sb("yAxis",o)));break;case"horizontalAxis":this.chartPanelFeature.addComponent(new Sb("xAxis",o));break;case"verticalAxis":this.chartPanelFeature.addComponent(new Sb("yAxis",o));break;case"series":this.chartPanelFeature.addComponent(new Gie(o));break;case"navigator":Q.warnOnce("'navigator' is now displayed in the charts advanced settings instead of the format panel, and this setting will be ignored.");default:Q.warnOnce(`Invalid charts format panel group name supplied: '${r.type}'`)}})}getFormatPanelDef(){var e;const i=(e=this.gos.get("chartToolPanelsDef"))==null?void 0:e.formatPanel;return i||Vie}isGroupPanelShownInSeries(e,i){return["chart","legend","series"].includes(e)||ih(i)&&["axis","horizontalAxis","verticalAxis"].includes(e)||_L(i)&&e==="axis"}};n2.TEMPLATE='<div class="ag-chart-format-wrapper"></div>';Ce([de],n2.prototype,"init",1);var Hie=n2,jie="ag-chart-mini-thumbnail-canvas",Uie="AG Grid - chart update failed",xd=class extends Te{constructor(t,e){super(),this.tooltipName=e,this.size=58,this.padding=5,this.root=new Ae.Group;const i=new Ae.Scene({width:this.size,height:this.size});i.canvas.element.classList.add(jie),i.setRoot(this.root),i.setContainer(t),this.scene=i}init(){this.scene.canvas.element.title=this.chartTranslationService.translate(this.tooltipName),this.scene.render().catch(t=>{console.error(`${Uie}`,t)})}};Ce([W("chartTranslationService")],xd.prototype,"chartTranslationService",2);Ce([de],xd.prototype,"init",1);var Sr=class extends xd{constructor(t,e){super(t,e),this.stroke="gray",this.axisOvershoot=3}addAxes(){const t=this.size,e=this.padding,i=new Ae.Line;i.x1=e,i.y1=e,i.x2=e,i.y2=t-e+this.axisOvershoot,i.stroke=this.stroke;const s=new Ae.Line;s.x1=e-this.axisOvershoot+1,s.y1=t-e,s.x2=t-e+1,s.y2=t-e,s.stroke=this.stroke;const r=this.root;r.append(i),r.append(s)}};Ce([de],Sr.prototype,"addAxes",1);function y0(t){const{stacked:e,size:i,padding:s,xScalePadding:r,xScaleDomain:n,yScaleDomain:o}=t,a=new Ae.BandScale;a.domain=n,a.range=[s,i-s],a.paddingInner=r,a.paddingOuter=r;const l=new Ae.LinearScale;l.domain=o,l.range=[i-s,s];const c=(u,d,h)=>u.map((p,f)=>{const m=h.convert(p),g=new Ae.Rect;return g.x=d.convert(f),g.y=m,g.width=d.bandwidth,g.height=h.convert(0)-m,g.strokeWidth=0,g.crisp=!0,g});return e?t.data.map(u=>c(u,a,l)):c(t.data,a,l)}function o2(t,e,i,s){const r=new Ae.LinearScale;r.domain=[0,4],r.range=[s,i-s];const n=new Ae.LinearScale;n.domain=[0,10],n.range=[i-s,s];const o=e.map(l=>{const c=new Ae.Path;return c.strokeWidth=3,c.lineCap="round",c.fill=void 0,l.forEach((u,d)=>{c.path[d>0?"lineTo":"moveTo"](r.convert(d),n.convert(u))}),c}),a=new Ae.Group;return a.setClipRectInGroupCoordinateSpace(new Ae.BBox(s,s,i-s*2,i-s*2)),a.append(o),t.append(a),o}function l7(t,e,i,s,r,n=0){const o=new Ae.LinearScale;o.domain=[0,7],o.range=[-Math.PI,Math.PI].map(h=>h+Math.PI/2);const a=new Ae.LinearScale;a.domain=[0,10],a.range=[s,r];const l=[],c=e.map(h=>{const p=new Ae.Path;return p.strokeWidth=1,p.strokeOpacity=.5,p.lineCap="round",p.fill=void 0,p.fillOpacity=.8,h.forEach((f,m)=>{const g=o.convert(m),y=s+r-a.convert(f),v=y*Math.cos(g),C=y*Math.sin(g);if(p.path[m>0?"lineTo":"moveTo"](v,C),n>0){const b=new Ae.Circle;b.x=v,b.y=C,b.size=n,l.push(b)}}),p.path.closePath(),p}),u=new Ae.Group,d=i/2;return u.translationX=d,u.translationY=d,u.append([...c,...l]),t.append(u),{paths:c,markers:l}}function NE(t){let[e,i]=[1/0,-1/0];return{processedData:t.reduce((r,n,o)=>{var a;const l=o>0?r[o-1]:void 0;(a=r[o])!=null||(r[o]=[]);const c=r[o];return n.forEach((u,d)=>{l&&(u+=l[d]),c[d]=u,c[d]<e&&(e=c[d]),c[d]>i&&(i=c[d])}),r},[]),min:e,max:i}}var c7=class extends Sr{constructor(t,e,i){super(t,"groupedColumnTooltip"),this.columnData=[2,3,4];const{root:s,columnData:r,size:n,padding:o}=this;this.columns=y0({stacked:!1,data:r,size:n,padding:o,xScaleDomain:[0,1,2],yScaleDomain:[0,4],xScalePadding:.3}),s.append(this.columns),this.updateColors(e,i)}updateColors(t,e){this.columns.forEach((i,s)=>{i.fill=t[s],i.stroke=e[s]})}};c7.chartType="groupedColumn";var a2=class u7 extends Sr{constructor(e,i,s,r,n,o=u7.data,a=[0,16],l="stackedColumnTooltip"){super(e,l);const{root:c,size:u,padding:d}=this;this.stackedColumns=y0({stacked:!0,data:o,size:u,padding:d,xScaleDomain:[0,1,2],yScaleDomain:a,xScalePadding:.3}),c.append([].concat.apply([],this.stackedColumns)),this.updateColors(i,s)}updateColors(e,i){this.stackedColumns.forEach((s,r)=>s.forEach(n=>{n.fill=e[r],n.stroke=i[r]}))}};a2.chartType="stackedColumn";a2.data=[[8,12,16],[6,9,12],[2,3,4]];var d7=a2,l2=class h7 extends d7{constructor(e,i,s,r,n){super(e,i,s,r,n,h7.data,[0,10],"normalizedColumnTooltip")}};l2.chartType="normalizedColumn";l2.data=[[10,10,10],[6,7,8],[2,4,6]];var Wie=l2,p7=class extends Sr{constructor(t,e,i){super(t,"groupedBarTooltip");const s=this.padding,r=this.size,n=[2,3,4],o=new Ae.BandScale;o.domain=[0,1,2],o.range=[s,r-s],o.paddingInner=.3,o.paddingOuter=.3;const a=new Ae.LinearScale;a.domain=[0,4],a.range=[r-s,s];const l=a.convert(0),c=o.bandwidth;this.bars=n.map((u,d)=>{const h=new Ae.Rect;return h.x=s,h.y=o.convert(d),h.width=l-a.convert(u),h.height=c,h.strokeWidth=0,h.crisp=!0,h}),this.updateColors(e,i),this.root.append(this.bars)}updateColors(t,e){this.bars.forEach((i,s)=>{i.fill=t[s],i.stroke=e[s]})}};p7.chartType="groupedBar";var c2=class f7 extends Sr{constructor(e,i,s,r,n,o=f7.data,a=[0,16],l="stackedBarTooltip"){super(e,l);const c=this.size,u=this.padding,d=new Ae.BandScale;d.domain=[0,1,2],d.range=[u,c-u],d.paddingInner=.3,d.paddingOuter=.3;const h=new Ae.LinearScale;h.domain=a,h.range=[c-u,u];const p=h.convert(0),f=d.bandwidth;this.bars=o.map(m=>m.map((g,y)=>{const v=new Ae.Rect;return v.x=u,v.y=d.convert(y),v.width=p-h.convert(g),v.height=f,v.strokeWidth=0,v.crisp=!0,v})),this.updateColors(i,s),this.root.append([].concat.apply([],this.bars))}updateColors(e,i){this.bars.forEach((s,r)=>s.forEach(n=>{n.fill=e[r],n.stroke=i[r]}))}};c2.chartType="stackedBar";c2.data=[[8,12,16],[6,9,12],[2,3,4]];var g7=c2,u2=class m7 extends g7{constructor(e,i,s,r,n){super(e,i,s,r,n,m7.data,[0,10],"normalizedBarTooltip")}};u2.chartType="normalizedBar";u2.data=[[10,10,10],[6,7,8],[2,4,6]];var zie=u2,xo=Ae.toRadians,bS=class extends xd{constructor(t,e,i,s,r,n=.6,o="donutTooltip"){super(t,o);const a=(this.size-this.padding*2)/2,l=a+this.padding,c=[[xo(-90),xo(30)],[xo(30),xo(120)],[xo(120),xo(180)],[xo(180),xo(210)],[xo(210),xo(240)],[xo(240),xo(270)]];this.sectors=c.map(([u,d])=>{const h=new Ae.Sector;return h.centerX=l,h.centerY=l,h.innerRadius=a*n,h.outerRadius=a,h.startAngle=u,h.endAngle=d,h.stroke=void 0,h.strokeWidth=0,h.inset=.75,h}),this.updateColors(e,i),this.root.append(this.sectors)}updateColors(t,e){this.sectors.forEach((i,s)=>{i.fill=t[s%t.length],i.stroke=e[s%e.length]})}};bS.chartType="donut";var v7=class extends bS{constructor(t,e,i,s,r){super(t,e,i,s,r,0,"pieTooltip")}};v7.chartType="pie";var y7=class extends Sr{constructor(t,e,i){super(t,"lineTooltip"),this.data=[[9,7,8,5,6],[5,6,3,4,1],[1,3,4,8,7]],this.lines=o2(this.root,this.data,this.size,this.padding),this.updateColors(e,i)}updateColors(t,e){this.lines.forEach((i,s)=>{i.stroke=t[s]})}};y7.chartType="line";var C7=class extends Sr{constructor(t,e,i){super(t,"scatterTooltip");const s=this.size,r=this.padding,n=[[[.3,3],[1.1,.9],[2,.4],[3.4,2.4]],[[0,.3],[1,2],[2.4,1.4],[3,0]]],o=new Ae.LinearScale;o.domain=[-.5,4],o.range=[r*2,s-r];const a=new Ae.LinearScale;a.domain=[-.5,3.5],a.range=[s-r,r];const l=[];n.forEach(u=>{u.forEach(([d,h])=>{const p=new Ae.Arc;p.strokeWidth=0,p.centerX=o.convert(d),p.centerY=a.convert(h),p.radius=2.5,l.push(p)})}),this.points=l,this.updateColors(e,i);const c=new Ae.Group;c.setClipRectInGroupCoordinateSpace(new Ae.BBox(r,r,s-r*2,s-r*2)),c.append(this.points),this.root.append(c)}updateColors(t,e){this.points.forEach((i,s)=>{i.stroke=e[s%e.length],i.fill=t[s%t.length]})}};C7.chartType="scatter";var b7=class extends Sr{constructor(t,e,i){super(t,"bubbleTooltip");const s=this.size,r=this.padding,n=[[[.1,.3,5],[.5,.4,7],[.2,.8,7]],[[.8,.7,5],[.7,.3,9]]],o=new Ae.LinearScale;o.domain=[0,1],o.range=[r*2,s-r];const a=new Ae.LinearScale;a.domain=[0,1],a.range=[s-r,r];const l=[];n.forEach(u=>{u.forEach(([d,h,p])=>{const f=new Ae.Arc;f.strokeWidth=0,f.centerX=o.convert(d),f.centerY=a.convert(h),f.radius=p,f.fillOpacity=.7,l.push(f)})}),this.points=l,this.updateColors(e,i);const c=new Ae.Group;c.setClipRectInGroupCoordinateSpace(new Ae.BBox(r,r,s-r*2,s-r*2)),c.append(this.points),this.root.append(c)}updateColors(t,e){this.points.forEach((i,s)=>{i.stroke=e[s%e.length],i.fill=t[s%t.length]})}};b7.chartType="bubble";var d2=class w7 extends Sr{constructor(e,i,s,r,n,o=w7.data){super(e,"groupedAreaTooltip");const a=this.size,l=this.padding,c=new Ae.BandScale;c.domain=[0,1,2],c.paddingInner=1,c.paddingOuter=0,c.range=[l+.5,a-l-.5];const u=new Ae.LinearScale;u.domain=[0,6],u.range=[a-l+.5,l];const h=o.length*2-1,p=[],f=u.convert(0);o.forEach((m,g)=>{const y=c.convert(g);m.forEach((v,C)=>{const b=u.convert(v),T=p[C]||(p[C]=[]);T[g]={x:y,y:b},T[h-g]={x:y,y:f}})}),this.areas=p.reverse().map(m=>{const g=new Ae.Path;g.strokeWidth=1,g.strokeOpacity=.75,g.fillOpacity=.7;const y=g.path;return y.clear(),m.forEach((v,C)=>y[C>0?"lineTo":"moveTo"](v.x,v.y)),y.closePath(),g}),this.updateColors(i,s),this.root.append(this.areas)}updateColors(e,i){this.areas.forEach((s,r)=>{s.fill=e[r],s.stroke=i[r]})}};d2.chartType="area";d2.data=[[1,3,5],[2,6,4],[5,3,1]];var $ie=d2,h2=class S7 extends Sr{constructor(e,i,s,r,n,o=S7.data,a="stackedAreaTooltip"){super(e,a);const l=this.size,c=this.padding,u=new Ae.BandScale;u.domain=[0,1,2],u.paddingInner=1,u.paddingOuter=0,u.range=[c+.5,l-c-.5];const d=new Ae.LinearScale;d.domain=[0,16],d.range=[l-c+.5,c+.5];const p=o.length*2-1,f=[];o.forEach((m,g)=>{const y=u.convert(g);let v=0;m.forEach((C,b)=>{const T=d.convert(v+C),A=f[b]||(f[b]=[]);A[g]={x:y,y:T},A[p-g]={x:y,y:d.convert(v)},v+=C})}),this.areas=f.map(m=>{const g=new Ae.Path;g.strokeWidth=0;const y=g.path;return y.clear(),m.forEach((v,C)=>y[C>0?"lineTo":"moveTo"](v.x,v.y)),y.closePath(),g}),this.updateColors(i,s),this.root.append(this.areas)}updateColors(e,i){this.areas.forEach((s,r)=>{s.fill=e[r],s.stroke=i[r]})}};h2.chartType="stackedArea";h2.data=[[2,3,2],[3,6,5],[6,2,2]];var p2=h2,f2=class x7 extends p2{constructor(e,i,s,r,n,o=x7.data){super(e,i,s,r,n,o,"normalizedAreaTooltip")}};f2.chartType="normalizedArea";f2.data=p2.data.map(t=>{const e=t.reduce((i,s)=>i+s,0);return t.map(i=>i/e*16)});var Kie=f2,E7=class extends Sr{constructor(t,e,i){super(t,"histogramTooltip");const s=this.padding,r=this.size,n=[2,5,11,13,10,6,1],o=new Ae.LinearScale;o.domain=[0,n.length],o.range=[s,r-s];const a=new Ae.LinearScale;a.domain=[0,n.reduce((c,u)=>Math.max(c,u),0)],a.range=[r-s,s];const l=a.convert(0);this.bars=n.map((c,u)=>{const d=a.convert(c),h=o.convert(u),p=o.convert(u+1),f=new Ae.Rect;return f.x=h,f.y=d,f.width=p-h,f.height=l-d,f.strokeWidth=1,f.strokeOpacity=.75,f.crisp=!0,f}),this.updateColors(e,i),this.root.append(this.bars)}updateColors([t],[e]){this.bars.forEach(i=>{i.fill=t,i.stroke=e})}};E7.chartType="histogram";var Sp=class extends xd{constructor(t,e){super(t,e),this.stroke="gray",this.showRadiusAxisLine=!0,this.showAngleAxisLines=!0}addAxes(){const t=this.size,e=this.padding,i=e*2,s=(t-i)/2,r=this.showAngleAxisLines?[s,s*.8,s*.6,s*.4]:[],n=new Ae.Line;n.x1=t/2,n.y1=e,n.x2=t/2,n.y2=t-e-s-r[r.length-1],n.stroke=this.stroke,n.strokeOpacity=.5,n.fill=void 0,n.visible=this.showRadiusAxisLine;const o=e+s;this.gridLines=r.map((l,c)=>{const u=new Ae.Path;return u.path.arc(o,o,l,0,2*Math.PI),u.strokeWidth=1,u.stroke=this.stroke,u.strokeOpacity=c===0?.5:.2,u.fill=void 0,u});const a=this.root;a.append(n),this.gridLines.length>0&&a.append(this.gridLines)}};Ce([de],Sp.prototype,"addAxes",1);var T7=class extends Sp{constructor(t,e,i){super(t,"radialColumnTooltip"),this.data=[[6,8,10,2,6,5],[4,4,3,6,4,4],[5,4,2,9,8,9]],this.showRadiusAxisLine=!1;const{padding:s,size:r,data:n}=this,o=(r-s*2)/2,l=o*.4,c=new Ae.BandScale;c.domain=n[0].map((m,g)=>g),c.range=[0,2*Math.PI],c.paddingInner=0,c.paddingOuter=0;const u=c.bandwidth*.7,{processedData:d,max:h}=NE(n),p=new Ae.LinearScale;p.domain=[0,h],p.range=[l,o];const f=this.size/2;this.series=d.map((m,g)=>{const v=g===0?void 0:d[g-1],C=new Ae.Group({zIndex:1e6}),b=m.map((T,A)=>{const I=v==null?void 0:v[A],D=p.convert(T),F=p.convert(I??0),B=c.convert(A),U=B+u,H=Ae.getRadialColumnWidth(B,U,o,.5,.5),R=new Ae.RadialColumnShape;return R.scalingCenterX=f,R.scalingCenterY=f,R.columnWidth=H,R.innerRadius=F,R.outerRadius=D,R.startAngle=B,R.endAngle=U,R.isBeveled=!0,R.axisInnerRadius=l,R.axisOuterRadius=o,R.stroke=void 0,R.strokeWidth=0,R});return C.append(b),C.translationX=f,C.translationY=f,C}),this.root.append(this.series),this.updateColors(e,i)}updateColors(t,e){this.series.forEach((i,s)=>{var r;(r=i.children)==null||r.forEach(n=>{n.fill=t[s%t.length],n.stroke=e[s%e.length]})})}};T7.chartType="radialColumn";var _7=class extends Sp{constructor(t,e,i){super(t,"radialBarTooltip"),this.data=[[6,8,10],[4,4,3],[5,4,2]],this.showRadiusAxisLine=!1;const s=(this.size-this.padding)/2,n=s*.4,o=s+n,a=new Ae.BandScale;a.domain=this.data[0].map((m,g)=>g),a.range=[s,n],a.paddingInner=.5,a.paddingOuter=0;const l=a.bandwidth,{processedData:c,max:u}=NE(this.data),d=new Ae.LinearScale;d.domain=[0,Math.ceil(u*1.5)];const h=3/2*Math.PI,p=h+2*Math.PI;d.range=[h,p];const f=this.size/2;this.series=c.map((m,g)=>{const y=g<0?void 0:c[g-1],v=new Ae.Group({zIndex:1e6}),C=m.map((b,T)=>{var A;const I=(A=y==null?void 0:y[T])!=null?A:0,D=o-a.convert(T),F=D+l,B=d.convert(I),U=d.convert(b),H=new Ae.Sector;return H.centerX=f,H.centerY=f,H.innerRadius=D,H.outerRadius=F,H.startAngle=B,H.endAngle=U,H.stroke=void 0,H.strokeWidth=0,H});return v.append(C),v}),this.root.append(this.series),this.updateColors(e,i)}updateColors(t,e){this.series.forEach((i,s)=>{var r;(r=i.children)==null||r.forEach(n=>{n.fill=t[s%t.length],n.stroke=e[s%e.length]})})}};_7.chartType="radialBar";var A7=class extends Sp{constructor(t,e,i){super(t,"radarLineTooltip"),this.markerSize=4,this.data=[[8,7,8,7,8,8,7,8],[6,8,5,10,6,7,4,6],[0,3,3,5,4,4,2,0]],this.showRadiusAxisLine=!1;const s=(this.size-this.padding*2)/2,r=0,{paths:n,markers:o}=l7(this.root,this.data,this.size,s,r,this.markerSize);this.lines=n,this.markers=o,this.updateColors(e,i)}updateColors(t,e){this.lines.forEach((i,s)=>{const r=this.data[s].length;i.stroke=t[s];const n=s*r,o=n+r;this.markers.slice(n,o).forEach(l=>{l.stroke=e[s],l.fill=t[s]})})}};A7.chartType="radarLine";var R7=class extends Sp{constructor(t,e,i){super(t,"radarAreaTooltip"),this.data=[[8,10,5,7,4,1,5,8],[1,1,2,7,7,8,10,1],[4,5,9,9,4,2,3,4]],this.showRadiusAxisLine=!1;const s=(this.size-this.padding*2)/2,r=s-this.size*.3;this.areas=l7(this.root,this.data,this.size,s,r).paths,this.updateColors(e,i)}updateColors(t,e){this.areas.forEach((i,s)=>{i.fill=t[s],i.stroke=e[s]})}};R7.chartType="radarArea";var M7=class extends Sp{constructor(t,e,i){super(t,"nightingaleTooltip"),this.data=[[6,10,9,8,7,8],[4,6,5,4,5,5],[3,5,4,3,4,7]],this.showRadiusAxisLine=!1;const s=(this.size-this.padding*2)/2,r=new Ae.BandScale;r.domain=this.data[0].map((u,d)=>d),r.range=[-Math.PI,Math.PI],r.paddingInner=0,r.paddingOuter=0;const n=r.bandwidth*.7,{processedData:o,max:a}=NE(this.data),l=new Ae.LinearScale;l.domain=[0,a],l.range=[0,s];const c=this.size/2;this.series=o.map((u,d)=>{const h=d<0?void 0:o[d-1],p=new Ae.Group({zIndex:1e6}),f=u.map((m,g)=>{const y=h==null?void 0:h[g],v=l.convert(m),C=l.convert(y??0),b=r.convert(g),T=b+n,A=new Ae.Sector;return A.centerX=c,A.centerY=c,A.innerRadius=C,A.outerRadius=v,A.startAngle=b,A.endAngle=T,A.stroke=void 0,A.strokeWidth=0,A});return p.append(f),p}),this.root.append(this.series),this.updateColors(e,i)}updateColors(t,e){this.series.forEach((i,s)=>{var r;(r=i.children)==null||r.forEach(n=>{n.fill=t[s%t.length],n.stroke=e[s%e.length]})})}};M7.chartType="nightingale";var D7=class extends Sr{constructor(t,e,i){super(t,"rangeBarTooltip");const s=[3,3.5,3];this.bars=this.createRangeBar(this.root,s,this.size,this.padding,"vertical"),this.updateColors(e,i)}updateColors(t,e){this.bars.forEach((i,s)=>{i.fill=t[s],i.stroke=e[s]})}createRangeBar(t,e,i,s,r){const n=r==="horizontal",o=2*s,a=new Ae.BandScale;a.domain=e.map((p,f)=>f),a.range=[s,i-s],a.paddingInner=.3,a.paddingOuter=.3;const l=.7,c=1.3,u=new Ae.LinearScale;u.domain=[e.reduce((p,f)=>Math.min(p,f),1/0)*l,e.reduce((p,f)=>Math.max(p,f),0)*c],u.range=[o,i-o];const d=a.bandwidth,h=e.map((p,f)=>{const[m,g]=[p*l,p*c],y=a.convert(f),v=u.convert(m),C=u.convert(g)-v,b=new Ae.Rect;return b.x=n?v:y,b.y=n?y:v,b.width=n?C:d,b.height=n?d:C,b.strokeWidth=0,b.crisp=!0,b});return t.append(h),h}};D7.chartType="rangeBar";var P7=class extends Sr{constructor(t,e,i){super(t,"rangeAreaTooltip");const s=4,r=[pT({offset:.375*s,length:s,pattern:{low:3,high:5,period:s}}),pT({offset:.375*s,length:s,pattern:{low:2.25,high:4.25,period:s}}),pT({offset:.75*s,length:s,pattern:{low:2.5,high:4.5,period:s}})],n=1.75,o=r.map(c=>c.map(([u,d])=>({x:u,low:d-.5*n,high:d+.5*n}))),{lines:a,areas:l}=this.createRangeArea(this.root,o,this.size,this.padding);this.lines=a,this.areas=l,this.updateColors(e,i)}updateColors(t,e){t=DL(t,1,2),e=DL(e,1,2),this.lines.forEach(([i,s],r)=>{i.fill=void 0,i.stroke=e[r],s.fill=void 0,s.stroke=e[r]}),this.areas.forEach((i,s)=>{i.fill=t[s]})}createRangeArea(t,e,i,s){const r=e.reduce((f,m)=>m.reduce((g,{x:y})=>Math.min(g,y),f),1/0),n=e.reduce((f,m)=>m.reduce((g,{x:y})=>Math.max(g,y),f),-1/0),o=e.reduce((f,m)=>m.reduce((g,{low:y})=>Math.min(g,y),f),1/0),a=e.reduce((f,m)=>m.reduce((g,{high:y})=>Math.max(g,y),f),-1/0),l=new Ae.LinearScale;l.domain=[r,n],l.range=[s,i-s];const c=2*s,u=new Ae.LinearScale;u.domain=[o,a],u.range=[i-c,c];const d=[],h=[];return e.map(f=>{const m=new Ae.Path,g=new Ae.Path,y=new Ae.Path;return d.push([m,g]),h.push(y),m.strokeWidth=0,g.strokeWidth=0,y.strokeWidth=0,y.fillOpacity=.8,m.path.clear(),g.path.clear(),y.path.clear(),f.map((v,C)=>{const{x:b,low:T,high:A}=v,I=l.convert(b),D=u.convert(T),F=u.convert(A),B=C>0?"lineTo":"moveTo";return m.path[B](I,F),g.path[B](I,D),y.path[B](I,F),[I,D]})}).forEach((f,m)=>{const g=f.length-1,y=h[m];for(let v=g;v>=0;v--){const[C,b]=f[v];y.path.lineTo(C,b)}}),t.append(h.concat(...d)),{lines:d,areas:h}}};P7.chartType="rangeArea";function pT(t){const{offset:e,length:i,pattern:s}=t,r=a(e,i,s),n=0,o=i;return(r.length===0||r[0][0]!==n)&&r.unshift(l(n,e,s)),r[r.length-1][0]!==o&&r.push(l(o,e,s)),r;function a(u,d,h){const{period:p}=h,f=u/p,g=[0,.5].map(v=>v-f).map(ML).sort((v,C)=>v-C);return Array.from({length:Math.floor(g.length*(p/d))},(v,C)=>g[C%g.length]+Math.floor(C/g.length)).map(v=>v*p).map(v=>l(v,u,h))}function l(u,d,h){return[u,c(d+u,h)]}function c(u,d){const{low:h,high:p,period:f}=d,m=ML(u/f),g=m>.5?1-2*(m-.5):2*m;return h+(p-h)*g}}function ML(t){const e=t%1;return e<0?e+1:e}function DL(t,e,i){const s=[...t],r=s[e];return s[e]=s[i],s[i]=r,s}var I7=class extends Sr{constructor(t,e,i,s,r){super(t,"boxPlotTooltip");const n=this.padding,o=this.size,a=[11,11.5,10.5],l=1.2,c=1.1,u=.9,d=.8,h=new Ae.LinearScale;h.domain=[a.reduce((g,y)=>Math.min(g,y),1/0)*d,a.reduce((g,y)=>Math.max(g,y),0)*l],h.range=[o-1.5*n,n];const p=new Ae.BandScale;p.domain=a.map((g,y)=>y),p.range=[n,o-n],p.paddingInner=.4,p.paddingOuter=.2;const f=Math.round(p.bandwidth),m=Math.round(p.bandwidth/2);this.boxPlotGroups=a.map((g,y)=>{let[v,C,b,T]=[g*d,g*u,g*c,g*l];const A=Math.round(h.convert(b)),I=Math.round(p.convert(y)),D=Math.round(I+f),F=Math.round(h.convert(C)),B=Math.round(h.convert(v)),U=Math.round(h.convert(g)),H=Math.round(h.convert(T)),R=I+m,L=new Ae.Group,_=new Ae.Rect,w=new Ae.Line,S=new Ae.Line,x=new Ae.Line,E=new Ae.Line,M=new Ae.Line;return _.x=I,_.y=A,_.width=f,_.height=F-A,_.strokeWidth=1,_.strokeOpacity=.75,_.crisp=!0,this.setLineProperties(w,I,D,U,U),this.setLineProperties(S,R,R,H,A),this.setLineProperties(x,R,R,B,F),this.setLineProperties(E,I,D,H,H),this.setLineProperties(M,I,D,B,B),L.append([_,w,S,x,E,M]),L}),this.updateColors(e,i,s,r),this.root.append(this.boxPlotGroups)}updateColors(t,e,i,s){var r;const n=i==null?void 0:i.properties.get(Uo.DEFAULT_BACKGROUND_COLOUR),o=(r=Array.isArray(n)?n[0]:n)!=null?r:"white";this.boxPlotGroups.forEach((a,l)=>{var c;(c=a.children)==null||c.forEach(u=>{const d=t[l%t.length];u.fill=s?d:qs.Color.interpolate(d,o)(.7),u.stroke=e[l%e.length]})})}setLineProperties(t,e,i,s,r){t.x1=e,t.x2=i,t.y1=s,t.y2=r,t.strokeOpacity=.75}};I7.chartType="boxPlot";var F7=class extends xd{constructor(t,e,i,s,r){super(t,"treemapTooltip");const{size:n,padding:o}=this,a=[[1,1],[3,2,1]],c=a.length%2===0?.3:.2,u=[o,n-o],d=a.length,h=d*(d+1)/2,p=c/(d-1),f=u[1]-u[0],m=f-c;let g=u[0];this.rects=a.reduce((v,C,b)=>{v??(v=[]);const T=(d-b)/h,A=m*T,I=C.length,D=C.reduce((R,L)=>R+=L,0),F=c/(I-1||1),B=I>1?f-c:f;let U=u[0];const H=C.map(R=>{const L=new Ae.Rect,_=B*R/D;return L.x=g,L.y=U,L.width=A,L.height=_,L.strokeWidth=.75,L.crisp=!0,U+=_+F,L});return g+=A+p,v.push(...H),v},[]),this.updateColors(e,i,s,r);const y=new Ae.Group;y.setClipRectInGroupCoordinateSpace(new Ae.BBox(o,o,n-o,n-o)),y.append(this.rects),this.root.append(y)}updateColors(t,e,i,s){var r;const{properties:n}=i??{},o=n==null?void 0:n.get(Uo.DEFAULT_BACKGROUND_COLOUR),a=(r=Array.isArray(o)?o[0]:o)!=null?r:"white";this.rects.forEach((l,c)=>{l.fill=t[c%e.length],l.stroke=s?e[c%e.length]:a})}};F7.chartType="treemap";var L7=class extends Sp{constructor(t,e,i){super(t,"sunburstTooltip"),this.data=[[[],[]],[[],[]],[[],[]]],this.angleOffset=-Math.PI/2,this.innerRadiusRatio=0,this.showRadiusAxisLine=!1,this.showAngleAxisLines=!1;const{data:s,size:r,padding:n,angleOffset:o,innerRadiusRatio:a}=this,l=(r-n*2)/2,c=[o+0,o+2*Math.PI],u=Math.abs(c[1]-c[0]),d=[l*a,l],h=Math.abs(d[1]-d[0]);let p=0;const f=(C,b)=>{C.forEach(T=>{const A=b+1;p=Math.max(p,A),f(T,A)})};f(s,0);const m=h/p,g=this.size/2,y=c[0];this.series=[];const v=(C,b,T,A,I)=>{if(!Array.isArray(C))return;const F=b+1;let B=T;C.forEach((U,H,R)=>{let L=I;L||(L=new Ae.Group,this.series.push(L));const _=d[0]+b*m,w=d[0]+F*m,S=1/R.length,x=B,E=x+A*S,M=new Ae.Sector;M.centerX=g,M.centerY=g,M.innerRadius=_,M.outerRadius=w,M.startAngle=x,M.endAngle=E,M.stroke=void 0,M.strokeWidth=0,M.inset=.75,B=E,L.append(M),v(U,F,x,Math.abs(E-x),L)})};v(s,0,y,u),this.root.append(this.series),this.updateColors(e,i)}updateColors(t,e){this.series.forEach((i,s)=>{var r;(r=i.children)==null||r.forEach(n=>{n.fill=t[s%t.length],n.stroke=e[s%e.length]})})}};L7.chartType="sunburst";var k7=class extends xd{constructor(t,e,i,s,r){var n,o;super(t,"heatmapTooltip");const{size:a,padding:l}=this,c=3,u=Array.from({length:c},(y,v)=>Array.from({length:c},(C,b)=>b)),d=u.map((y,v)=>v),h=new Ae.BandScale;h.domain=d,h.range=[l,a-l],h.paddingInner=.01,h.paddingOuter=.1;const p=new Ae.BandScale;p.domain=d,p.range=[l,a-l],p.paddingInner=.01,p.paddingOuter=.1;const f=(n=h.bandwidth)!=null?n:0,m=(o=p.bandwidth)!=null?o:0;this.rects=u.reduce((y,v,C)=>{y??(y=[]);const b=v.map((T,A)=>{const I=new Ae.Rect;return I.x=h.convert(C),I.y=p.convert(A),I.width=f,I.height=m,I.strokeWidth=0,I.crisp=!0,I});return y.push(...b),y},[]),this.updateColors(e,i,s,r);const g=new Ae.Group;g.setClipRectInGroupCoordinateSpace(new Ae.BBox(l,l,a-l,a-l)),g.append(this.rects),this.root.append(g)}updateColors(t,e,i,s){var r;const{properties:n}=i??{},o=n==null?void 0:n.get(Uo.DEFAULT_DIVERGING_SERIES_COLOUR_RANGE),a=n==null?void 0:n.get(Uo.DEFAULT_BACKGROUND_COLOUR),l=(r=Array.isArray(a)?a[0]:a)!=null?r:"white",c=s?[t[0],t[1]]:o,u=s?e[0]:l;this.rects.forEach((d,h)=>{d.fill=qs.Color.interpolate(c[0],c[1])(h*.2),d.stroke=u})}};k7.chartType="heatmap";var N7=class extends Sr{constructor(t,e,i,s,r){super(t,"waterfallTooltip"),this.data=[4,3,-3,6,-3],this.bars=this.createWaterfall(this.root,this.data,this.size,this.padding,"vertical").bars,this.updateColors(e,i,s,r)}updateColors(t,e,i,s){var r,n;const{data:o}=this,{properties:a}=i??{},l={fill:t[0],stroke:e[0]},c={fill:t[1],stroke:e[1]},u=s?l:(r=a==null?void 0:a.get(Uo.DEFAULT_WATERFALL_SERIES_POSITIVE_COLOURS))!=null?r:l,d=s?c:(n=a==null?void 0:a.get(Uo.DEFAULT_WATERFALL_SERIES_NEGATIVE_COLOURS))!=null?n:c;this.bars.forEach((h,p)=>{const f=o[p]>=0;h.fill=f?u.fill:d.fill,h.stroke=f?u.stroke:d.stroke})}createWaterfall(t,e,i,s,r){const n=2*s,{processedData:o,min:a,max:l}=NE(e.map(v=>[v])),c=o.reduce((v,C)=>v.concat(C),[]),u=new Ae.LinearScale;u.domain=[Math.min(a,0),l],u.range=[i-n,n];const d=new Ae.BandScale;d.domain=e.map((v,C)=>C),d.range=[s,i-s],d.paddingInner=.2,d.paddingOuter=.3;const h=d.bandwidth,p=new Ae.Path;p.stroke="#575757",p.strokeWidth=0;const f=Math.floor(p.strokeWidth)%2/2,m=p.path;m.clear();const g=r==="horizontal",y=c.map((v,C)=>{const b=C>0?c[C-1]:0,A=e[C]>0,I=Math.round(u.convert(v)),D=Math.round(u.convert(b)),F=(A?I:D)-f,B=(A?D:I)+f,U=Math.abs(B-F),H=d.convert(C),R=new Ae.Rect;R.x=g?F:H,R.y=g?H:F,R.width=g?U:h,R.height=g?h:U,R.strokeWidth=0,R.crisp=!0;const L=I+f,_=D+f;if(C>0){const x=g?_:R.x,E=g?R.y:_;m.lineTo(x,E)}const w=g?L:R.x,S=g?R.y:L;return m.moveTo(w,S),R});return t.append([p,...y]),{bars:y}}};N7.chartType="waterfall";var O7=class extends Sr{constructor(t,e,i){super(t,"columnLineComboTooltip"),this.columnData=[3,4],this.lineData=[[5,4,6,5,4]];const{root:s,columnData:r,lineData:n,size:o,padding:a}=this;this.columns=y0({stacked:!1,data:r,size:o,padding:a,xScaleDomain:[0,1],yScaleDomain:[0,4],xScalePadding:.5}),s.append(this.columns),this.lines=o2(s,n,o,a),this.updateColors(e,i)}updateColors(t,e){this.columns.forEach((i,s)=>{i.fill=t[s],i.stroke=e[s]}),this.lines.forEach((i,s)=>{i.stroke=t[s+2]})}};O7.chartType="columnLineCombo";var G7=class extends Sr{constructor(t,e,i){super(t,"areaColumnComboTooltip"),this.columnData=[3,4.5],this.areaData=[[5,4,6,5,4]];const{root:s,columnData:r,areaData:n,size:o,padding:a}=this;this.columns=y0({stacked:!1,data:r,size:o,padding:a,xScaleDomain:[0,1],yScaleDomain:[0,6],xScalePadding:.5});const l=new Ae.BandScale;l.range=[a,o-a],l.domain=[0,1,2,3,4],l.paddingInner=1,l.paddingOuter=0;const c=new Ae.LinearScale;c.range=[o-a,a],c.domain=[0,6];const u=[],d=c.convert(0),h=l.convert(0);n.forEach((p,f)=>{const m=u[f]||(u[f]=[]);p.forEach((y,v)=>{const C=y,b=v,T=l.convert(b),A=c.convert(C);m[v]={x:T,y:A}});const g=l.convert(p.length-1);u[f].push({x:g,y:d},{x:h,y:d})}),this.areas=u.map(p=>{const f=new Ae.Path;f.strokeWidth=0,f.fillOpacity=.8;const m=f.path;return p.forEach((g,y)=>m[y>0?"lineTo":"moveTo"](g.x,g.y)),f}),s.append(this.areas),s.append([].concat.apply([],this.columns)),this.updateColors(e,i)}updateColors(t,e){this.areas.forEach((i,s)=>{i.fill=t[s],i.stroke=e[s]}),this.columns.forEach((i,s)=>{i.fill=t[s+1],i.stroke=e[s+1]})}};G7.chartType="areaColumnCombo";var B7=class extends xd{constructor(t,e,i){super(t,"customComboTooltip"),this.columnData=[3,4],this.lineData=[[5,4,6,5,4]];const{root:s,columnData:r,lineData:n,size:o,padding:a}=this;this.columns=y0({stacked:!1,data:r,size:o,padding:a,xScaleDomain:[0,1],yScaleDomain:[0,4],xScalePadding:.5}),s.append(this.columns),this.lines=o2(s,n,o,a);const l="grey",c=3,u=new Ae.Line;u.x1=a,u.y1=a,u.x2=a,u.y2=o-a+c,u.stroke=l;const d=new Ae.Line;d.x1=a-c+1,d.y1=o-a,d.x2=o-a+1,d.y2=o-a,d.stroke=l;const h=new Ae.Path;this.buildPenIconPath(h),h.fill="whitesmoke",h.stroke="darkslategrey",h.strokeWidth=1,s.append([d,u,h]),this.updateColors(e,i)}updateColors(t,e){this.columns.forEach((i,s)=>{i.fill=t[s],i.stroke=e[s]}),this.lines.forEach((i,s)=>{i.stroke=t[s+2]})}buildPenIconPath(t){const{path:e}=t;e.moveTo(25.76,43.46),e.lineTo(31.27,48.53),e.moveTo(49.86,22),e.lineTo(49.86,22),e.cubicCurveTo(49.01994659053345,21.317514933510974,47.89593834348529,21.09645997825817,46.86,21.41),e.lineTo(46.86,21.41),e.cubicCurveTo(45.55460035985361,21.77260167850787,44.38777081121966,22.517979360321792,43.51,23.55),e.lineTo(25.51,43.8),e.lineTo(25.43,43.89),e.lineTo(23.01,51.89),e.lineTo(22.83,52.46),e.lineTo(31.02,48.86),e.lineTo(49.02,28.52),e.lineTo(49.02,28.52),e.cubicCurveTo(49.940716461596224,27.521914221246085,50.54302631059587,26.2720342455763,50.75,24.93),e.lineTo(50.75,24.93),e.cubicCurveTo(50.95363374988308,23.866379846512814,50.62080640232334,22.77066734274871,49.86,22),e.closePath(),e.moveTo(41.76,25.5),e.lineTo(47.34,30.5),e.moveTo(40.74,26.65),e.lineTo(46.25,31.71)}};B7.chartType="customCombo";var PL={columnGroup:{column:{range:!0,pivot:!0,enterprise:!1,icon:c7},stackedColumn:{range:!0,pivot:!0,enterprise:!1,icon:d7},normalizedColumn:{range:!0,pivot:!0,enterprise:!1,icon:Wie}},barGroup:{bar:{range:!0,pivot:!0,enterprise:!1,icon:p7},stackedBar:{range:!0,pivot:!0,enterprise:!1,icon:g7},normalizedBar:{range:!0,pivot:!0,enterprise:!1,icon:zie}},pieGroup:{pie:{range:!0,pivot:!0,enterprise:!1,icon:v7},donut:{range:!0,pivot:!0,enterprise:!1,icon:bS},doughnut:{range:!0,pivot:!0,enterprise:!1,icon:bS}},lineGroup:{line:{range:!0,pivot:!0,enterprise:!1,icon:y7}},scatterGroup:{scatter:{range:!0,pivot:!0,enterprise:!1,icon:C7},bubble:{range:!0,pivot:!0,enterprise:!1,icon:b7}},areaGroup:{area:{range:!0,pivot:!0,enterprise:!1,icon:$ie},stackedArea:{range:!0,pivot:!0,enterprise:!1,icon:p2},normalizedArea:{range:!0,pivot:!0,enterprise:!1,icon:Kie}},polarGroup:{radarLine:{range:!0,pivot:!1,enterprise:!0,icon:A7},radarArea:{range:!0,pivot:!1,enterprise:!0,icon:R7},nightingale:{range:!0,pivot:!1,enterprise:!0,icon:M7},radialColumn:{range:!0,pivot:!1,enterprise:!0,icon:T7},radialBar:{range:!0,pivot:!1,enterprise:!0,icon:_7}},statisticalGroup:{boxPlot:{range:!0,pivot:!1,enterprise:!0,icon:I7},histogram:{range:!0,pivot:!1,enterprise:!1,icon:E7},rangeBar:{range:!0,pivot:!1,enterprise:!0,icon:D7},rangeArea:{range:!0,pivot:!1,enterprise:!0,icon:P7}},hierarchicalGroup:{treemap:{range:!0,pivot:!0,enterprise:!0,icon:F7},sunburst:{range:!0,pivot:!0,enterprise:!0,icon:L7}},specializedGroup:{heatmap:{range:!0,pivot:!1,enterprise:!0,icon:k7},waterfall:{range:!0,pivot:!1,enterprise:!0,icon:N7}},combinationGroup:{columnLineCombo:{range:!0,pivot:!0,enterprise:!1,icon:O7},areaColumnCombo:{range:!0,pivot:!0,enterprise:!1,icon:G7},customCombo:{range:!0,pivot:!0,enterprise:!1,icon:B7}}},Yie={columnGroup:["column","stackedColumn","normalizedColumn"],barGroup:["bar","stackedBar","normalizedBar"],pieGroup:["pie","donut"],lineGroup:["line"],scatterGroup:["scatter","bubble"],areaGroup:["area","stackedArea","normalizedArea"],polarGroup:["radarLine","radarArea","nightingale","radialColumn","radialBar"],statisticalGroup:["boxPlot","histogram","rangeBar","rangeArea"],hierarchicalGroup:["treemap","sunburst"],specializedGroup:["heatmap","waterfall"],combinationGroup:["columnLineCombo","areaColumnCombo","customCombo"]},OE=class V7 extends Te{constructor(e,i,s,r,n,o=Yie){super(V7.TEMPLATE),this.wrappers={},this.chartController=e,this.fills=i,this.strokes=s,this.themeTemplateParameters=r,this.isCustomTheme=n,this.chartGroups=Xe({},o)}init(){!this.chartController.customComboExists()&&this.chartGroups.combinationGroup&&(this.chartGroups.combinationGroup=this.chartGroups.combinationGroup.filter(o=>o!=="customCombo"));const e=this.getGui(),i=this.chartController.isEnterprise(),s=this.chartController.isPivotChart(),r=!s,n=Object.keys(this.chartGroups).map(o=>{var a;const l=o in PL?PL[o]:void 0;if(!l)return Q.warnOnce(`invalid chartGroupsDef config '${o}'`),null;const u=((a=this.chartGroups[o])!=null?a:[]).map(d=>{const h=d in l?l[d]:void 0;return h?!i&&h.enterprise?null:r&&h.range||s&&h.pivot?h:null:(Q.warnOnce(`invalid chartGroupsDef config '${o}.${d}'`),null)}).filter(d=>d!=null);return u.length===0?null:{label:this.chartTranslationService.translate(o),items:u}}).filter(o=>o!=null);for(const{label:o,items:a}of n){const l=this.createBean(new Bo({title:o,suppressEnabledCheckbox:!0,enabled:!0,suppressOpenCloseIcons:!0,cssIdentifier:"charts-settings",direction:"horizontal"}));for(const c of a){const u=c.icon,d=document.createElement("div");d.classList.add("ag-chart-mini-thumbnail");const h=u.chartType;this.addManagedListener(d,"click",()=>{this.chartController.setChartType(h),this.updateSelectedMiniChart()}),this.wrappers[h]=d,this.createBean(new u(d,this.fills,this.strokes,this.themeTemplateParameters,this.isCustomTheme)),l.addItem(d)}e.appendChild(l.getGui())}this.updateSelectedMiniChart()}updateSelectedMiniChart(){const e=this.chartController.getChartType();for(const i in this.wrappers){const s=this.wrappers[i],r=i===e;s.classList.toggle("ag-selected",r)}}};OE.TEMPLATE='<div class="ag-chart-settings-mini-wrapper"></div>';Ce([W("chartTranslationService")],OE.prototype,"chartTranslationService",2);Ce([de],OE.prototype,"init",1);var qie=OE,Ed=class H7 extends Te{constructor(e){super(H7.TEMPLATE),this.chartController=e,this.miniChartsContainers=[],this.cardItems=[],this.activePaletteIndex=0,this.palettes=[],this.themes=[]}postConstruct(){this.resetPalettes(),this.ePrevBtn.insertAdjacentElement("afterbegin",Q.createIconNoSpan("previous",this.gos)),this.eNextBtn.insertAdjacentElement("afterbegin",Q.createIconNoSpan("next",this.gos)),this.addManagedListener(this.ePrevBtn,"click",()=>this.setActivePalette(this.getPrev(),"left")),this.addManagedListener(this.eNextBtn,"click",()=>this.setActivePalette(this.getNext(),"right")),this.addManagedListener(this.chartController,co.EVENT_CHART_TYPE_CHANGED,()=>this.resetPalettes(!0)),this.addManagedListener(this.chartController,co.EVENT_CHART_API_UPDATE,()=>this.resetPalettes(!0)),this.scrollSelectedIntoView()}scrollSelectedIntoView(){setTimeout(()=>{const e=r=>!r.getGui().classList.contains("ag-hidden"),s=this.miniChartsContainers.find(e).getGui().querySelector(".ag-selected");if(s){const r=s.offsetParent;r&&this.eMiniChartsContainer.scrollTo(0,r.offsetTop)}},250)}resetPalettes(e){var i,s;const r=this.chartController.getPalettes(),n=this.chartController.getThemeTemplateParameters(),o=(s=(i=this.gos.get("chartToolPanelsDef"))==null?void 0:i.settingsPanel)==null?void 0:s.chartGroupsDef;if(Q.shallowCompare(r,this.palettes)&&!e||this.isAnimating)return;this.palettes=r,this.themes=this.chartController.getThemeNames(),this.activePaletteIndex=this.themes.findIndex(l=>l===this.chartController.getChartThemeName()),this.cardItems=[],Q.clearElement(this.eCardSelector),this.destroyMiniCharts();const{themes:a}=this;this.palettes.forEach((l,c)=>{const u=this.activePaletteIndex===c,{fills:d,strokes:h}=l,p=a[c],f=!i2(p),m=this.createBean(new qie(this.chartController,d,h,n[c],f,o));this.miniChartsContainers.push(m),this.eMiniChartsContainer.appendChild(m.getGui()),this.addCardLink(c),u?m.updateSelectedMiniChart():m.setDisplayed(!1)}),Q.setDisplayed(this.eNavBar,this.palettes.length>1),Q.radioCssClass(this.cardItems[this.activePaletteIndex],"ag-selected","ag-not-selected")}addCardLink(e){const i=document.createElement("div");i.classList.add("ag-chart-settings-card-item"),this.addManagedListener(i,"click",()=>{this.setActivePalette(e,e<this.activePaletteIndex?"left":"right")}),this.eCardSelector.appendChild(i),this.cardItems.push(i)}getPrev(){let e=this.activePaletteIndex-1;return e<0&&(e=this.palettes.length-1),e}getNext(){let e=this.activePaletteIndex+1;return e>=this.palettes.length&&(e=0),e}setActivePalette(e,i){if(this.isAnimating||this.activePaletteIndex===e)return;Q.radioCssClass(this.cardItems[e],"ag-selected","ag-not-selected");const s=this.miniChartsContainers[this.activePaletteIndex],r=s.getGui(),n=this.miniChartsContainers[e],o=n.getGui();s.updateSelectedMiniChart(),n.updateSelectedMiniChart();const a=i==="left"?-1:1,l=o.style.left=`${Q.getAbsoluteWidth(this.getGui())*a}px`;this.activePaletteIndex=e,this.isAnimating=!0;const c="ag-animating";n.setDisplayed(!0),s.addCssClass(c),n.addCssClass(c),this.chartController.setChartThemeName(this.themes[e]),window.setTimeout(()=>{r.style.left=`${-parseFloat(l)}px`,o.style.left="0px"},0),window.setTimeout(()=>{this.isAnimating=!1,s.removeCssClass(c),n.removeCssClass(c),s.setDisplayed(!1)},300)}destroyMiniCharts(){Q.clearElement(this.eMiniChartsContainer),this.miniChartsContainers=this.destroyBeans(this.miniChartsContainers)}destroy(){this.destroyMiniCharts(),super.destroy()}};Ed.TEMPLATE=`<div class="ag-chart-settings-wrapper">
            <div ref="eMiniChartsContainer" class="ag-chart-settings-mini-charts-container ag-scrollable-container"></div>
            <div ref="eNavBar" class="ag-chart-settings-nav-bar">
                <div ref="ePrevBtn" class="ag-chart-settings-prev">
                    <button type="button" class="ag-button ag-chart-settings-prev-button"></button>
                </div>
                <div ref="eCardSelector" class="ag-chart-settings-card-selector"></div>
                <div ref="eNextBtn" class="ag-chart-settings-next">
                    <button type="button" class="ag-button ag-chart-settings-next-button"></button>
                </div>
            </div>
        </div>`;Ce([pe("eMiniChartsContainer")],Ed.prototype,"eMiniChartsContainer",2);Ce([pe("eNavBar")],Ed.prototype,"eNavBar",2);Ce([pe("eCardSelector")],Ed.prototype,"eCardSelector",2);Ce([pe("ePrevBtn")],Ed.prototype,"ePrevBtn",2);Ce([pe("eNextBtn")],Ed.prototype,"eNextBtn",2);Ce([de],Ed.prototype,"postConstruct",1);var Xie=Ed,xp=class rw extends Te{constructor(e,i){super(),this.panels=e,this.chartMenuContext=i,this.tabs=[]}init(){this.panels.forEach(e=>{const i=e.replace("chart","").toLowerCase(),s=this.createPanel(i),r=this.createTab(e,i,s);this.tabs.push(r),this.addDestroyFunc(()=>this.destroyBean(s))}),this.tabbedLayout=new KM({items:this.tabs,cssClass:"ag-chart-tabbed-menu",keepScrollPosition:!0,suppressFocusBodyOnOpen:!0,suppressTrapFocus:!0,enableCloseButton:!this.chartMenuService.isLegacyFormat(),closeButtonAriaLabel:this.chartTranslationService.translate("ariaChartMenuClose"),onCloseClicked:()=>{var e;(e=this.eventSource)==null||e.focus({preventScroll:!0}),this.dispatchEvent({type:rw.EVENT_CLOSED})}}),this.getContext().createBean(this.tabbedLayout)}createTab(e,i,s){const r=document.createElement("div");r.classList.add("ag-chart-tab",`ag-chart-${i}`),this.getContext().createBean(s),r.appendChild(s.getGui());const n=document.createElement("div"),o=this.chartTranslationService.translate(i);return n.innerText=o,{title:n,titleLabel:o,bodyPromise:Ft.resolve(r),getScrollableContainer:()=>r.querySelector(".ag-scrollable-container")||r,name:e}}showTab(e){const i=this.tabs[e];this.tabbedLayout.showItem(i)}getGui(){return this.tabbedLayout&&this.tabbedLayout.getGui()}showMenu(e,i){var s;this.eventSource=e,i||(s=this.tabbedLayout)==null||s.focusHeader(!0)}destroy(){this.parentComponent&&this.parentComponent.isAlive()&&this.destroyBean(this.parentComponent),super.destroy()}createPanel(e){const{chartController:i,chartOptionsService:s}=this.chartMenuContext;switch(e){case rw.TAB_DATA:return new Cie(i,s);case rw.TAB_FORMAT:return new Hie(this.chartMenuContext);default:return new Xie(i)}}};xp.EVENT_CLOSED="closed";xp.TAB_DATA="data";xp.TAB_FORMAT="format";Ce([W("chartTranslationService")],xp.prototype,"chartTranslationService",2);Ce([W("chartMenuService")],xp.prototype,"chartMenuService",2);Ce([de],xp.prototype,"init",1);var IL=xp,GE=class extends Te{constructor(){super('<div class="ag-chart-menu" ref="eMenu"></div>'),this.buttonListenersDestroyFuncs=[]}updateParams(t){const{buttons:e}=t;this.createButtons(e)}createButtons(t){this.buttonListenersDestroyFuncs.forEach(i=>i==null?void 0:i()),this.buttonListenersDestroyFuncs=[];const e=this.eMenu;Q.clearElement(e),t.forEach(i=>{const{buttonName:s,iconName:r,callback:n}=i,o=this.createButton(r),a=this.chartTranslationService.translate(s+"ToolbarTooltip");a&&o instanceof HTMLElement&&(o.title=a),this.buttonListenersDestroyFuncs.push(this.addManagedListener(o,"click",l=>n(l.target))),e.appendChild(o)})}createButton(t){let e=Q.createIconNoSpan(t,this.gos,void 0,!0);return e.classList.add("ag-chart-menu-icon"),this.chartMenuService.isLegacyFormat()||(e=this.wrapButton(e)),e}wrapButton(t){const e=this.gos.getDocument().createElement("button");return e.appendChild(t),e.classList.add("ag-chart-menu-toolbar-button"),e}destroy(){this.buttonListenersDestroyFuncs=[],super.destroy()}};Ce([W("chartTranslationService")],GE.prototype,"chartTranslationService",2);Ce([W("chartMenuService")],GE.prototype,"chartMenuService",2);Ce([pe("eMenu")],GE.prototype,"eMenu",2);var C0=class j7 extends Te{constructor(e,i,s){super(j7.TEMPLATE),this.eChartContainer=e,this.eMenuPanelContainer=i,this.chartMenuContext=s,this.buttons={chartSettings:{iconName:"menu",callback:()=>this.showMenu({panel:this.defaultPanel})},chartData:{iconName:"menu",callback:()=>this.showMenu({panel:"chartData"})},chartFormat:{iconName:"menu",callback:()=>this.showMenu({panel:"chartFormat"})},chartLink:{iconName:"linked",callback:()=>this.chartMenuService.toggleLinked(this.chartMenuContext)},chartUnlink:{iconName:"unlinked",callback:()=>this.chartMenuService.toggleLinked(this.chartMenuContext)},chartDownload:{iconName:"save",callback:()=>this.chartMenuService.downloadChart(this.chartMenuContext)},chartMenu:{iconName:"menuAlt",callback:r=>this.showMenuList(r)}},this.panels=[],this.menuVisible=!1,this.chartController=s.chartController}postConstruct(){this.legacyFormat=this.chartMenuService.isLegacyFormat(),this.chartToolbar=this.createManagedBean(new GE),this.getGui().appendChild(this.chartToolbar.getGui()),this.legacyFormat&&this.createLegacyToggleButton(),this.refreshToolbarAndPanels(),this.addManagedListener(this.eventService,K.EVENT_CHART_CREATED,e=>{var i;e.chartId===this.chartController.getChartId()&&((i=this.gos.get("chartToolPanelsDef"))!=null&&i.defaultToolPanel)&&this.showMenu({panel:this.defaultPanel,animate:!1,suppressFocus:!0})}),this.addManagedListener(this.chartController,co.EVENT_CHART_LINKED_CHANGED,this.refreshToolbarAndPanels.bind(this)),this.refreshMenuClasses(),this.legacyFormat&&!this.gos.get("suppressChartToolPanelsButton")&&this.panels.length>0&&(this.getGui().classList.add("ag-chart-tool-panel-button-enable"),this.eHideButton&&this.addManagedListener(this.eHideButton,"click",this.toggleMenu.bind(this))),this.legacyFormat||this.getGui().classList.add("ag-chart-menu-wrapper"),this.addManagedListener(this.chartController,co.EVENT_CHART_API_UPDATE,this.refreshToolbarAndPanels.bind(this))}isVisible(){return this.menuVisible}getExtraPaddingDirections(){const e=["chartMenu","chartLink","chartUnlink","chartDownload"],i=["chartSettings","chartData","chartFormat"],s=[];return e.some(r=>this.chartToolbarOptions.includes(r))&&s.push("top"),i.some(r=>this.chartToolbarOptions.includes(r))&&s.push(this.gos.get("enableRtl")?"left":"right"),s}createLegacyToggleButton(){const e=this.gos.getDocument();this.eHideButton=e.createElement("button"),this.eHideButton.classList.add("ag-button","ag-chart-menu-close"),this.eHideButtonIcon=e.createElement("span"),this.eHideButtonIcon.classList.add("ag-icon","ag-icon-contracted"),this.eHideButton.appendChild(this.eHideButtonIcon),this.getGui().appendChild(this.eHideButton)}refreshToolbarAndPanels(){this.initToolbarOptionsAndPanels(),this.updateToolbar()}initToolbarOptionsAndPanels(){const{panels:e,defaultPanel:i,chartToolbarOptions:s}=this.chartMenuService.getToolbarOptionsAndPanels(this.chartController);this.panels=e,this.defaultPanel=i,this.chartToolbarOptions=s}updateToolbar(){const e=this.chartToolbarOptions.map(i=>{const{iconName:s,callback:r}=this.buttons[i];return{buttonName:i,iconName:s,callback:r}});this.chartToolbar.updateParams({buttons:e})}createMenuPanel(e){const i=this.environment.chartMenuPanelWidth(),s=this.menuPanel=this.createBean(new ZM({minWidth:i,width:i,height:"100%",closable:!0,hideTitleBar:!0,cssIdentifier:"chart-menu"}));return s.setParentComponent(this),this.eMenuPanelContainer.appendChild(s.getGui()),this.tabbedMenu=this.createBean(new IL(this.panels,this.chartMenuContext)),this.addManagedListener(this.tabbedMenu,IL.EVENT_CLOSED,()=>{this.hideMenu(!1)}),this.addManagedListener(s,Te.EVENT_DESTROYED,()=>this.destroyBean(this.tabbedMenu)),new Ft(r=>{window.setTimeout(()=>{s.setBodyComponent(this.tabbedMenu),this.tabbedMenu.showTab(e),r(s),this.legacyFormat&&this.addManagedListener(this.eChartContainer,"click",n=>{this.getGui().contains(n.target)||this.menuVisible&&this.hideMenu()})},100)})}showContainer(e,i){this.menuPanel&&(this.menuVisible=!0,this.showParent(this.menuPanel.getWidth()),this.refreshMenuClasses(),this.tabbedMenu.showMenu(e,i))}toggleMenu(){this.menuVisible?this.hideMenu(this.legacyFormat):this.showMenu({animate:this.legacyFormat})}showMenu(e){const{panel:i,animate:s=!0,eventSource:r,suppressFocus:n}=e;if(s||this.eMenuPanelContainer.classList.add("ag-no-transition"),this.menuPanel&&!i)this.showContainer(r,n);else{const o=i||this.defaultPanel;let a=this.panels.indexOf(o);a<0&&(console.warn(`AG Grid: '${i}' is not a valid Chart Tool Panel name`),a=this.panels.indexOf(this.defaultPanel)),this.menuPanel?(this.tabbedMenu.showTab(a),this.showContainer(r,n)):this.createMenuPanel(a).then(()=>this.showContainer(r,n))}s||setTimeout(()=>{this.isAlive()&&this.eMenuPanelContainer.classList.remove("ag-no-transition")},500)}hideMenu(e=!0){e||this.eMenuPanelContainer.classList.add("ag-no-transition"),this.hideParent(),window.setTimeout(()=>{this.menuVisible=!1,this.refreshMenuClasses(),e||this.eMenuPanelContainer.classList.remove("ag-no-transition")},500)}refreshMenuClasses(){this.eChartContainer.classList.toggle("ag-chart-menu-visible",this.menuVisible),this.eChartContainer.classList.toggle("ag-chart-menu-hidden",!this.menuVisible),this.legacyFormat&&!this.gos.get("suppressChartToolPanelsButton")&&(this.eHideButtonIcon.classList.toggle("ag-icon-contracted",this.menuVisible),this.eHideButtonIcon.classList.toggle("ag-icon-expanded",!this.menuVisible))}showParent(e){this.eMenuPanelContainer.style.minWidth=`${e}px`}hideParent(){this.eMenuPanelContainer.style.minWidth="0"}showMenuList(e){this.chartMenuListFactory.showMenuList({eventSource:e,showMenu:()=>this.showMenu({animate:!1,eventSource:e}),chartMenuContext:this.chartMenuContext})}destroy(){super.destroy(),this.menuPanel&&this.menuPanel.isAlive()&&this.destroyBean(this.menuPanel),this.tabbedMenu&&this.tabbedMenu.isAlive()&&this.destroyBean(this.tabbedMenu)}};C0.TEMPLATE="<div></div>";Ce([W("chartMenuService")],C0.prototype,"chartMenuService",2);Ce([W("chartMenuListFactory")],C0.prototype,"chartMenuListFactory",2);Ce([de],C0.prototype,"postConstruct",1);var Zie=C0,b0=class U7 extends Te{constructor(e){super(U7.TEMPLATE),this.chartMenu=e,this.destroyableChartListeners=[],this.editing=!1}init(){this.addManagedListener(this.getGui(),"keydown",e=>{this.editing&&e.key==="Enter"&&!e.shiftKey&&(this.handleEndEditing(),e.preventDefault())}),this.addManagedListener(this.getGui(),"input",()=>{this.editing&&this.updateHeight()}),this.addManagedListener(this.getGui(),"blur",()=>this.endEditing())}refreshTitle(e){this.chartController=e.chartController,this.chartOptionsService=e.chartOptionsService,this.chartMenuUtils=e.chartMenuParamsFactory.getChartOptions();for(const l of this.destroyableChartListeners)l();this.destroyableChartListeners=[];const s=this.chartController.getChartProxy().getChart(),r=s.canvasElement,n=this.addManagedListener(r,"dblclick",l=>{const{title:c}=s;if(c&&c.node.containsPoint(l.offsetX,l.offsetY)){const u=c.node.computeBBox(),d=c.node.inverseTransformPoint(u.x,u.y);this.startEditing(Xe(Xe({},u),d),r.width)}});let o=!1;const a=this.addManagedListener(r,"mousemove",l=>{const{title:c}=s,u=!!(c&&c.enabled&&c.node.containsPoint(l.offsetX,l.offsetY));o!==u&&(r.style.cursor=u?"pointer":""),o=u});this.destroyableChartListeners=[n,a]}startEditing(e,i){if(this.chartMenuService.isLegacyFormat()&&this.chartMenu&&this.chartMenu.isVisible()||this.editing)return;this.editing=!0;const r=Math.max(Math.min(e.width+20,i),300),n=this.getGui();n.classList.add("currently-editing");const o=n.style;o.fontFamily=this.chartMenuUtils.getValue("title.fontFamily"),o.fontWeight=this.chartMenuUtils.getValue("title.fontWeight"),o.fontStyle=this.chartMenuUtils.getValue("title.fontStyle"),o.fontSize=this.chartMenuUtils.getValue("title.fontSize")+"px",o.color=this.chartMenuUtils.getValue("title.color");const a=this.chartMenuUtils.getValue("title.text"),l=a===this.chartTranslationService.translate("titlePlaceholder");n.value=l?"":a;const c=a.split(/\r?\n/g).length;o.left=Math.round(e.x+e.width/2-r/2-1)+"px",o.top=Math.round(e.y+e.height/2-c*this.getLineHeight()/2-2)+"px",o.width=Math.round(r)+"px",o.lineHeight=this.getLineHeight()+"px",this.updateHeight(),n.focus()}updateHeight(){const e=this.getGui(),i=this.chartMenuUtils.getValue("title.text").split(/\r?\n/g).length,s=e.value.split(/\r?\n/g).length;e.style.height=Math.round(Math.max(i,s)*this.getLineHeight())+4+"px"}getLineHeight(){const e=this.chartMenuUtils.getValue("title.lineHeight");return e?parseInt(e):Math.round(parseInt(this.chartMenuUtils.getValue("title.fontSize"))*1.2)}handleEndEditing(){const e=this.chartMenuUtils.getValue("title.color");this.chartMenuUtils.setValue("title.color","rgba(0, 0, 0, 0)"),this.chartOptionsService.awaitChartOptionUpdate(()=>this.endEditing()),this.chartOptionsService.awaitChartOptionUpdate(()=>{this.chartMenuUtils.setValue("title.color",e)})}endEditing(){if(!this.editing)return;this.editing=!1;const e=this.getGui().value;e&&e.trim()!==""?(this.chartMenuUtils.setValue("title.text",e),this.chartMenuUtils.setValue("title.enabled",!0)):(this.chartMenuUtils.setValue("title.text",""),this.chartMenuUtils.setValue("title.enabled",!1)),this.getGui().classList.remove("currently-editing"),this.chartOptionsService.awaitChartOptionUpdate(()=>{this.eventService.dispatchEvent({type:"chartTitleEdit"})})}};b0.TEMPLATE=`<textarea
             class="ag-chart-title-edit"
             style="padding:0; border:none; border-radius: 0; min-height: 0; text-align: center; resize: none;" />
        `;Ce([W("chartTranslationService")],b0.prototype,"chartTranslationService",2);Ce([W("chartMenuService")],b0.prototype,"chartMenuService",2);Ce([de],b0.prototype,"init",1);var Jie=b0;function FL(t){return t.chart!=null?t.chart:t}var w0=class{constructor(t){this.chartProxyParams=t,this.clearThemeOverrides=!1,this.isEnterpriseCharts=ym.enterpriseModule.isEnterprise,this.chart=t.chartInstance,this.chartType=t.chartType,this.crossFiltering=t.crossFiltering,this.crossFilterCallback=t.crossFilterCallback,this.standaloneChartType=ss(this.chartType),this.chart==null?this.chart=Do.create(this.getCommonChartOptions()):this.clearThemeOverrides=!0}crossFilteringReset(){}update(t){Do.update(this.getChartRef(),this.getUpdateOptions(t,this.getCommonChartOptions(t.updatedOverrides)))}updateThemeOverrides(t){Do.updateDelta(this.getChartRef(),{theme:{overrides:t}})}getChart(){return FL(this.chart)}getChartRef(){return this.chart}downloadChart(t,e,i){const{chart:s}=this,r=FL(s),n=e||(r.title?r.title.text:"chart"),{width:o,height:a}=t||{};Do.download(s,{width:o,height:a,fileName:n,fileFormat:i})}getChartImageDataURL(t){return this.getChart().getCanvasDataURL(t)}getChartOptions(){return this.chart.getOptions()}getChartThemeOverrides(){var t;return(t=this.getChartOptions().theme.overrides)!=null?t:{}}getChartPalette(){return Uo.getChartTheme(this.getChartOptions().theme).palette}setPaired(t){const e=ss(this.chartProxyParams.chartType);Do.updateDelta(this.chart,{theme:{overrides:{[e]:{paired:t}}}})}isPaired(){const t=ss(this.chartProxyParams.chartType);return $d(this.getChartThemeOverrides(),`${t}.paired`,!0)}lookupCustomChartTheme(t){return TV(this.chartProxyParams,t)}getSeriesGroupType(){}transformCategoryData(t,e){return t.map((i,s)=>{const r=i[e],n=r&&r.toString?r.toString():"",o=Xe({},i);return o[e]={id:s,value:r,toString:()=>n},o})}getCommonChartOptions(t){var e,i;const s=this.clearThemeOverrides?{}:(i=(e=this.chart)==null?void 0:e.getOptions())!=null?i:{},r=this.chart!=null?this.getActiveFormattingPanelOverrides():void 0;this.clearThemeOverrides=!1;const n=nie(this.chartProxyParams,this,this.isEnterpriseCharts,this.getChartThemeDefaults(),t??r),o=Bt(Xe({},s),{mode:"integrated"});return o.theme=n,o.container=this.chartProxyParams.parentElement,o}getChartThemeDefaults(){const t=this.getSeriesChartThemeDefaults(),e=t?{[this.standaloneChartType]:t}:{},i={enabled:!0,snap:!0,label:{enabled:!1}};return Xe({common:{navigator:{enabled:!1},zoom:{enabled:!0},animation:{enabled:!0,duration:500},axes:{number:{crosshair:i},category:{crosshair:i},log:{crosshair:i},time:{crosshair:i}}}},e)}getSeriesChartThemeDefaults(){}getActiveFormattingPanelOverrides(){var t,e;if(this.clearThemeOverrides)return{};const i=(t=this.chart)==null?void 0:t.getOptions().theme;return(e=i==null?void 0:i.overrides)!=null?e:{}}destroy({keepChartInstance:t=!1}={}){if(t)return this.chart.resetAnimations(),this.chart;this.destroyChart()}destroyChart(){this.chart&&(this.chart.destroy(),this.chart=void 0)}},Td=class extends w0{constructor(t){super(t),this.crossFilteringAllPoints=new Set,this.crossFilteringSelectedPoints=[]}getUpdateOptions(t,e){const i=this.getAxes(t,e);return Bt(Xe({},e),{data:this.getData(t,i),axes:i,series:this.getSeries(t)})}getData(t,e){const i=["area","line"].includes(this.standaloneChartType);return this.crossFiltering&&i?this.getCrossFilterData(t):this.getDataTransformedData(t,e)}getDataTransformedData(t,e){const i=e[0].type,{categories:s,data:r}=t,[n]=s;switch(i){case"category":return this.transformCategoryData(r,n.id);case"time":return this.transformTimeData(r,n.id);default:return r}}getXAxisType(t){return t.grouping?"grouped-category":this.isXAxisOfType(t,"time",e=>e instanceof Date)?"time":this.isXAxisOfType(t,"number")?"number":"category"}isXAxisOfType(t,e,i){const[s]=t.categories;if(s!=null&&s.chartDataType)return s.chartDataType===e;if(!i)return!1;const r=t.data[0];return r?i(r[s.id]):!1}transformTimeData(t,e){var i;return((i=t[0])==null?void 0:i[e])instanceof Date?t:t.map(r=>{const n=r[e];return typeof n=="string"?Bt(Xe({},r),{[e]:new Date(n)}):r})}crossFilteringReset(){this.crossFilteringSelectedPoints=[],this.crossFilteringAllPoints.clear()}crossFilteringPointSelected(t){return this.crossFilteringSelectedPoints.length==0||this.crossFilteringSelectedPoints.includes(t)}crossFilteringDeselectedPoints(){return this.crossFilteringSelectedPoints.length>0&&this.crossFilteringAllPoints.size!==this.crossFilteringSelectedPoints.length}extractLineAreaCrossFilterSeries(t,e){const[i]=e.categories,s=r=>this.standaloneChartType==="area"?e.getCrossFilteringContext().lastSelectedChartId===e.chartId?r+"-total":r:r+"-total";return t.map(r=>(r.yKey=s(r.yKey),r.listeners={nodeClick:n=>{const o=n.datum[r.xKey],a=n.event.metaKey||n.event.ctrlKey;this.crossFilteringAddSelectedPoint(a,o),this.crossFilterCallback(n)}},r.marker={formatter:n=>{const o=n.datum[i.id];return{fill:n.highlighted?"yellow":n.fill,size:n.highlighted?14:this.crossFilteringPointSelected(o)?8:0}}},this.standaloneChartType==="area"&&(r.fillOpacity=this.crossFilteringDeselectedPoints()?.3:1),this.standaloneChartType==="line"&&(r.strokeOpacity=this.crossFilteringDeselectedPoints()?.3:1),r))}getCrossFilterData(t){this.crossFilteringAllPoints.clear();const[e]=t.categories,i=t.fields[0].colId,s=`${i}-filtered-out`,r=t.getCrossFilteringContext().lastSelectedChartId;return t.data.map(n=>{const o=n[e.id];this.crossFilteringAllPoints.add(o);const a=this.crossFilteringPointSelected(o);return this.standaloneChartType==="area"&&r===t.chartId&&(n[`${i}-total`]=a?n[i]:n[i]+n[s]),this.standaloneChartType==="line"&&(n[`${i}-total`]=a?n[i]:n[i]+n[s]),n})}crossFilteringAddSelectedPoint(t,e){t?this.crossFilteringSelectedPoints.push(e):this.crossFilteringSelectedPoints=[e]}isHorizontal(t){const e=this.standaloneChartType;if(e!=="waterfall"&&e!=="box-plot"&&e!=="range-bar")return!1;const i=t.theme,s=r=>{var n,o,a;const l=(a=(o=(n=r==null?void 0:r.overrides)==null?void 0:n[e])==null?void 0:o.series)==null?void 0:a.direction;return l!=null?l==="horizontal":typeof(r==null?void 0:r.baseTheme)=="object"?s(r.baseTheme):!1};return s(i)}};function LL(t,e){const i=parseInt(t.slice(1,3),16),s=parseInt(t.slice(3,5),16),r=parseInt(t.slice(5,7),16);return`rgba(${i}, ${s}, ${r}, ${e})`}function kL(t,e){return t.map(i=>{const s=qs.Color.fromString(i);return new qs.Color(s.r,s.g,s.b,e).toHexString()})}var Qie=new Set(["bar","groupedBar","stackedBar","normalizedBar"]),ese=class extends Td{constructor(t){super(t)}getAxes(t){const e=[{type:this.getXAxisType(t),position:this.isHorizontal()?"left":"bottom"},{type:"number",position:this.isHorizontal()?"bottom":"left"}];if(this.isNormalised()){const i=e[1];i.label=Bt(Xe({},i.label),{formatter:s=>Math.round(s.value)+"%"})}return e}getSeries(t){const[e]=t.categories,i=t.fields.map(s=>({type:this.standaloneChartType,direction:this.isHorizontal()?"horizontal":"vertical",stacked:this.crossFiltering||Wte(this.chartType),normalizedTo:this.isNormalised()?100:void 0,xKey:e.id,xName:e.name,yKey:s.colId,yName:s.displayName}));return this.crossFiltering?this.extractCrossFilterSeries(i):i}extractCrossFilterSeries(t){const e=this.getChartPalette(),i=(n,o)=>Bt(Xe({},n),{highlightStyle:{item:{fill:void 0}},fill:e==null?void 0:e.fills[o],stroke:e==null?void 0:e.strokes[o],listeners:{nodeClick:this.crossFilterCallback}}),s=n=>{const o=n.yKey+"-filtered-out";return Bt(Xe({},Eg({},n)),{yKey:o,fill:LL(n.fill,"0.3"),stroke:LL(n.stroke,"0.3"),showInLegend:!1})},r=[];for(let n=0;n<t.length;n++){const o=i(t[n],n);r.push(o),r.push(s(o))}return r}isNormalised(){const t=["normalizedColumn","normalizedBar"];return!this.crossFiltering&&Q.includes(t,this.chartType)}isHorizontal(){return Qie.has(this.chartType)}},tse=class extends Td{constructor(t){super(t)}getAxes(t){const e=[{type:this.getXAxisType(t),position:"bottom"},{type:"number",position:"left"}];if(this.isNormalised()){const i=e[1];i.label=Bt(Xe({},i.label),{formatter:s=>Math.round(s.value)+"%"})}return e}getSeries(t){const[e]=t.categories,i=t.fields.map(s=>({type:this.standaloneChartType,xKey:e.id,xName:e.name,yKey:s.colId,yName:s.displayName,normalizedTo:this.chartType==="normalizedArea"?100:void 0,stacked:["normalizedArea","stackedArea"].includes(this.chartType)}));return this.crossFiltering?this.extractLineAreaCrossFilterSeries(i,t):i}isNormalised(){return!this.crossFiltering&&this.chartType==="normalizedArea"}},ise=class extends Td{constructor(t){super(t)}getAxes(t){return[{type:this.getXAxisType(t),position:"bottom"},{type:"number",position:"left"}]}getSeries(t){const[e]=t.categories,i=t.fields.map(s=>({type:this.standaloneChartType,xKey:e.id,xName:e.name,yKey:s.colId,yName:s.displayName}));return this.crossFiltering?this.extractLineAreaCrossFilterSeries(i,t):i}},sse=class extends w0{constructor(t){super(t)}getAxes(t){const e=this.standaloneChartType==="radial-bar";return[{type:e?"angle-number":"angle-category"},{type:e?"radius-category":"radius-number"}]}getSeries(t){const{fields:e,categories:i,seriesGroupType:s}=t,[r]=i,n=this.standaloneChartType==="radial-bar",o=this.getSeriesGroupTypeOptions(s);return e.map(a=>{var l,c;return Xe({type:this.standaloneChartType,angleKey:n?a.colId:r.id,angleName:n?(l=a.displayName)!=null?l:void 0:r.name,radiusKey:n?r.id:a.colId,radiusName:n?r.name:(c=a.displayName)!=null?c:void 0},o)})}getSeriesGroupType(){var t,e;const i=this.standaloneChartType;if(!["nightingale","radial-bar","radial-column"].includes(i))return;const s=(e=(t=this.getChart().series)==null?void 0:t[0])==null?void 0:e.properties.toJson(),r=()=>s.normalizedTo?"normalized":"stacked";return i==="nightingale"?s.grouped?"grouped":r():s.stacked?r():"grouped"}getUpdateOptions(t,e){const i=this.getAxes(t);return Bt(Xe({},e),{data:this.getData(t,i),axes:i,series:this.getSeries(t)})}getData(t,e){if(e.some(s=>s.type==="angle-category"||s.type==="radius-category")){const[s]=t.categories;return this.transformCategoryData(t.data,s.id)}else return t.data}getSeriesGroupTypeOptions(t){return t?{grouped:t==="grouped"||void 0,stacked:t!=="grouped"||void 0,normalizedTo:t==="normalized"?100:void 0}:{}}},rse=class W7 extends w0{constructor(e){super(e)}getUpdateOptions(e,i){return Bt(Xe({},i),{data:this.crossFiltering?this.getCrossFilterData(e):e.data,series:this.getSeries(e)})}getSeries(e){const[i]=e.categories,s=e.fields.length,r={currentOffset:0,offsetAmount:s>1?20:40},n=this.getFields(e).map(o=>{var a;const l={type:this.standaloneChartType,angleKey:o.colId,angleName:o.displayName,sectorLabelKey:o.colId,calloutLabelName:i.name,calloutLabelKey:i.id};if(this.chartType==="donut"||this.chartType==="doughnut"){const{outerRadiusOffset:c,innerRadiusOffset:u}=W7.calculateOffsets(r),d=o.displayName?{title:{text:o.displayName,showInLegend:s>1}}:void 0;return Bt(Xe(Bt(Xe({},l),{type:"donut",outerRadiusOffset:c,innerRadiusOffset:u}),d),{calloutLine:{colors:(a=this.getChartPalette())==null?void 0:a.strokes}})}return l});return this.crossFiltering?this.extractCrossFilterSeries(n):n}getCrossFilterData(e){const i=e.fields[0].colId,s=`${i}-filtered-out`;return e.data.map(r=>{const n=r[i]+r[s];return r[`${i}-total`]=n,r[s]=1,r[i]=r[i]/n,r})}extractCrossFilterSeries(e){const i=this.getChartPalette(),s=l=>Bt(Xe({},l),{legendItemKey:l.calloutLabelKey,calloutLabel:{enabled:!1},highlightStyle:{item:{fill:void 0}},radiusKey:l.angleKey,angleKey:l.angleKey+"-total",radiusMin:0,radiusMax:1,listeners:{nodeClick:this.crossFilterCallback}}),r=(l,c)=>{var u,d;return Bt(Xe({},Eg({},a)),{radiusKey:c+"-filtered-out",fills:kL((u=l.fills)!=null?u:i.fills,.3),strokes:kL((d=l.strokes)!=null?d:i.strokes,.3),showInLegend:!1})},n=e[0],o=n.angleKey,a=s(n);return[r(n,o),a]}static calculateOffsets(e){const i=e.currentOffset;e.currentOffset-=e.offsetAmount;const s=e.currentOffset;return e.currentOffset-=e.offsetAmount,{outerRadiusOffset:i,innerRadiusOffset:s}}getFields(e){return this.chartType==="pie"?e.fields.slice(0,1):e.fields}},nse=class extends Td{constructor(t){super(t)}getAxes(t){return[{type:"number",position:"bottom"},{type:"number",position:"left"}]}getSeries(t){const[e]=t.categories,i=this.isPaired(),s=this.getSeriesDefinitions(t.fields,i),r=e.id===gc.DEFAULT_CATEGORY?void 0:e,n=s.map(o=>{var a,l,c,u,d;return o!=null&&o.sizeField?{type:"bubble",xKey:o.xField.colId,xName:(a=o.xField.displayName)!=null?a:void 0,yKey:o.yField.colId,yName:(l=o.yField.displayName)!=null?l:void 0,title:`${o.yField.displayName} vs ${o.xField.displayName}`,sizeKey:o.sizeField.colId,sizeName:(c=o.sizeField.displayName)!=null?c:"",labelKey:r?r.id:o.yField.colId,labelName:r?r.name:void 0}:{type:"scatter",xKey:o.xField.colId,xName:(u=o.xField.displayName)!=null?u:void 0,yKey:o.yField.colId,yName:(d=o.yField.displayName)!=null?d:void 0,title:`${o.yField.displayName} vs ${o.xField.displayName}`,labelKey:r?r.id:o.yField.colId,labelName:r?r.name:void 0}});return this.crossFiltering?this.extractCrossFilterSeries(n,t):n}extractCrossFilterSeries(t,e){const{data:i}=e,s=this.getChartPalette(),r=c=>`${c}-filtered-out`,n=(c,u)=>{var d;const h=[1/0,-1/0];if(u!=null)for(const p of c){const f=(d=p[u])!=null?d:p[r(u)];f<h[0]&&(h[0]=f),f>h[1]&&(h[1]=f)}if(h[0]<=h[1])return h},o=(c,u)=>{const d=s==null?void 0:s.fills[u],h=s==null?void 0:s.strokes[u];let p;if(c.type==="bubble"){const{sizeKey:m}=c;p=n(i,m)}const f=Bt(Xe({},c.marker),{fill:d,stroke:h,domain:p});return Bt(Xe({},c),{marker:f,highlightStyle:{item:{fill:"yellow"}},listeners:Bt(Xe({},c.listeners),{nodeClick:this.crossFilterCallback})})},a=c=>{let{yKey:u,xKey:d}=c,h={};return c.type==="bubble"&&(h={sizeKey:r(c.sizeKey)}),Bt(Xe(Xe({},c),h),{yKey:r(u),xKey:r(d),marker:Bt(Xe({},c.marker),{fillOpacity:.3,strokeOpacity:.3}),showInLegend:!1,listeners:Bt(Xe({},c.listeners),{nodeClick:p=>{const f=p.datum[r(d)],m=Bt(Xe({},p),{xKey:d,datum:Bt(Xe({},p.datum),{[d]:f})});this.crossFilterCallback(m)}})})},l=t.map(o);return[...l,...l.map(a)]}getSeriesDefinitions(t,e){if(t.length<2)return[];const i=this.chartType==="bubble";if(e)return i?t.map((r,n)=>n%3===0?{xField:r,yField:t[n+1],sizeField:t[n+2]}:null).filter(r=>r&&r.yField&&r.sizeField):t.map((r,n)=>n%2===0?{xField:r,yField:t[n+1]}:null).filter(r=>r&&r.yField);const s=t[0];return i?t.map((r,n)=>n%2===1?{xField:s,yField:r,sizeField:t[n+1]}:null).filter(r=>r&&r.sizeField):t.filter((r,n)=>n>0).map(r=>({xField:s,yField:r}))}},z7=class extends Td{constructor(t){super(t)}getAxes(t,e){return[{type:this.getXAxisType(t),position:this.isHorizontal(e)?"left":"bottom"},{type:"number",position:this.isHorizontal(e)?"bottom":"left"}]}computeSeriesStatistics(t,e){const{data:i,fields:s}=t,[r]=t.categories,n=r.id||gc.DEFAULT_CATEGORY,o=this.groupDataByCategory(n,i);return Array.from(o).map(([a,l])=>{const c={[r.id]:a};return s.forEach((u,d)=>{const h=l.map(p=>p[u.colId]).filter(p=>typeof p=="number"&&!isNaN(p));Object.entries(e(h)).forEach(([p,f])=>{const m=`${p}:${d}`;c[m]=h.length>0?f:null})}),c})}groupDataByCategory(t,e){const i=s=>{if(t===gc.DEFAULT_CATEGORY)return 1;const r=s[t];return r==null?"":r instanceof Date?r.getTime():r};return e.reduce((s,r)=>{let n=i(r);const o=s.get(n);return o?o.push(r):s.set(n,[r]),s},new Map)}},ose=class extends z7{constructor(t){super(t)}getSeries(t){const[e]=t.categories;return t.fields.map((i,s)=>{var r;return{type:this.standaloneChartType,xKey:e.id,xName:e.name,yName:(r=i.displayName)!=null?r:void 0,yLowName:"Min",yHighName:"Max",yLowKey:`min:${s}`,yHighKey:`max:${s}`}})}getData(t){return this.computeSeriesStatistics(t,e=>({min:Math.min(...e),max:Math.max(...e)}))}},ase=class extends Td{constructor(t){super(t)}getSeries(t){const e=t.fields[0];return[{type:this.standaloneChartType,xKey:e.colId,xName:e.displayName,yName:this.chartProxyParams.translate("histogramFrequency"),areaPlot:!1}]}getAxes(t){return[{type:"number",position:"bottom"},{type:"number",position:"left"}]}},lse=class extends z7{constructor(t){super(t)}getSeries(t){const[e]=t.categories;return t.fields.map((i,s)=>{var r;return{type:this.standaloneChartType,xKey:e.id,xName:e.name,yName:(r=i.displayName)!=null?r:void 0,minName:"Min",q1Name:"Q1",medianName:"Median",q3Name:"Q3",maxName:"Max",minKey:`min:${s}`,q1Key:`q1:${s}`,medianKey:`median:${s}`,q3Key:`q3:${s}`,maxKey:`max:${s}`}})}getData(t){return this.computeSeriesStatistics(t,e=>{const i=e.sort((s,r)=>s-r);return{min:i[0],q1:this.quantile(i,.25),median:this.quantile(i,.5),q3:this.quantile(i,.75),max:i[i.length-1]}})}quantile(t,e){const i=(t.length-1)*e,s=Math.floor(i),r=i-s;return t[s+1]!==void 0?t[s]+r*(t[s+1]-t[s]):t[s]}};function cse(t,e){return t.reduce((i,s,r,n)=>i.concat(e(s,r,n)),new Array)}var use="AG-GRID-DEFAULT-HEATMAP-CATEGORY-KEY",dse="AG-GRID-DEFAULT-HEATMAP-SERIES-KEY",hse="AG-GRID-DEFAULT-HEATMAP-VALUE-KEY",pse=class extends w0{constructor(t){super(t)}getUpdateOptions(t,e){const i=dse,s=hse,r=use;return Bt(Xe({},e),{series:this.getSeries(t,i,s,r),data:this.getData(t,i,s,r)})}getSeries(t,e,i,s){const[r]=t.categories;return[{type:this.standaloneChartType,yKey:s,xKey:e,colorKey:i,yName:r.name,xName:void 0,colorName:void 0}]}getData(t,e,i,s){const[r]=t.categories;return cse(t.data,(n,o)=>{const a=n[r.id],l=a==null?"":String(a),c={id:o,value:a,toString:()=>l};return t.fields.map(({colId:u,displayName:d})=>Bt(Xe({},n),{[e]:d,[i]:n[u],[s]:c}))})}getSeriesChartThemeDefaults(){return{gradientLegend:{gradient:{preferredLength:200}},series:{tooltip:{renderer:fse}}}}};function fse(t){const{xKey:e,yKey:i,colorKey:s,yName:r,datum:n}=t;return{title:"",content:[{label:r,value:n[i]},{label:n[e],value:s&&n[s]}].map(({label:l,value:c})=>`<b>${NL(String(l))}:</b> ${NL(String(c))}`).join("<br>")}}function NL(t){const e={"&":"&amp;","<":"&lt;",">":"&gt;"},i=`[${Object.keys(e).join("")}]`,s=new RegExp(i,"g");return t.replace(s,r=>e[r])}var gse=class extends Td{constructor(t){super(t)}getAxes(t,e){return[{type:this.getXAxisType(t),position:this.isHorizontal(e)?"left":"bottom"},{type:"number",position:this.isHorizontal(e)?"bottom":"left"}]}getSeries(t){var e;const[i]=t.categories,[s]=t.fields;return[{type:this.standaloneChartType,xKey:i.id,xName:i.name,yKey:s.colId,yName:(e=s.displayName)!=null?e:void 0}]}},$7=["number","category","time","grouped-category"],mse=["angle-category","angle-number","radius-category","radius-number"],vse=[...$7,...mse],yse=class K7 extends ye{constructor(e){super(),this.chartController=e}getChartThemeOverridesProxy(){return{getValue:e=>this.getChartOption(e),setValue:(e,i)=>this.setChartThemeOverrides([{expression:e,value:i}]),setValues:e=>this.setChartThemeOverrides(e)}}getAxisThemeOverridesProxy(){return{getValue:e=>this.getAxisProperty(e),setValue:(e,i)=>this.setAxisThemeOverrides([{expression:e,value:i}]),setValues:e=>this.setAxisThemeOverrides(e)}}getCartesianAxisOptionsProxy(e){return{getValue:i=>this.getCartesianAxisProperty(e,i),setValue:(i,s)=>this.setCartesianAxisOptions(e,[{expression:i,value:s}]),setValues:i=>this.setCartesianAxisOptions(e,i)}}getCartesianAxisThemeOverridesProxy(e){return{getValue:i=>this.getCartesianAxisProperty(e,i),setValue:(i,s)=>this.setCartesianAxisThemeOverrides(e,[{expression:i,value:s}]),setValues:i=>this.setCartesianAxisThemeOverrides(e,i)}}getCartesianAxisAppliedThemeOverridesProxy(e){return{getValue:i=>this.getCartesianAxisThemeOverride(e,i==="*"?null:i),setValue:(i,s)=>this.setCartesianAxisThemeOverrides(e,[{expression:i==="*"?null:i,value:s}]),setValues:i=>this.setCartesianAxisThemeOverrides(e,i)}}getSeriesOptionsProxy(e){return{getValue:(i,s)=>this.getSeriesOption(e(),i,s),setValue:(i,s)=>this.setSeriesOptions(e(),[{expression:i,value:s}]),setValues:i=>this.setSeriesOptions(e(),i)}}getPersistedChartThemeOverrides(e,i,s,r){const n=this.getRetainedChartThemeOverrideKeys(s,r),o=this.getRetainedChartAxisThemeOverrideKeys(null,s,r),a=this.createChartOptions();for(const l of n){const c=this.retrieveChartOptionsThemeOverride(e,s,l);c!==void 0&&this.assignChartOptionsThemeOverride(a,r,l,c)}return i&&this.assignPersistedAxisOverrides({existingAxes:i,retainedChartAxisThemeOverrideKeys:o,existingChartOptions:e,targetChartOptions:a,existingChartType:s,targetChartType:r}),a.theme.overrides}assignPersistedAxisOverrides(e){const{existingAxes:i,retainedChartAxisThemeOverrideKeys:s,existingChartOptions:r,targetChartOptions:n,existingChartType:o,targetChartType:a}=e;for(const{expression:l,targetAxisTypes:c}of s)for(const u of i.map(d=>d.type)){const d=this.retrieveChartOptionsThemeOverride(r,o,["axes",u,l].join("."));if(d!==void 0)for(const h of c)this.assignChartOptionsThemeOverride(n,a,["axes",h,l].join("."),d)}}getRetainedChartThemeOverrideKeys(e,i){const s=["animation"],r=["zoom","navigator"],n=((o,a)=>{const l=new Array;return ih(ss(o))&&ih(ss(a))&&l.push(...r),l})(e,i);return[...s,...n]}getRetainedChartAxisThemeOverrideKeys(e,i,s){return ih(ss(i))&&ih(ss(s))?this.getRetainedCartesianAxisThemeOverrideKeys(e).map(n=>({expression:n,targetAxisTypes:$7})):[]}getRetainedCartesianAxisThemeOverrideKeys(e){const i=e==="xAxis"?["",".top",".bottom"]:e==="yAxis"?["",".left",".right"]:["",".left",".right",".top",".bottom"],s=["crosshair"],r=new Array;for(const n of s)for(const o of i)r.push(`${n}${o}`);return r}getChartOption(e){return $d(this.getChart(),e,void 0)}setChartThemeOverrides(e){const i=this.getChartType(),s=this.createChartOptions();for(const{expression:r,value:n}of e)this.assignChartOptionsThemeOverride(s,i,r,n);this.applyChartOptions(s)}applyChartOptions(e,i){if(Object.keys(e).length===0)return;this.updateChart(e),!(i!=null&&i.silent)&&this.raiseChartOptionsChangedEvent()}awaitChartOptionUpdate(e){this.chartController.getChartProxy().getChart().waitForUpdate().then(()=>e()).catch(s=>console.error("AG Grid - chart update failed",s))}getAxisProperty(e){var i;return $d((i=this.getChart().axes)==null?void 0:i[0],e,void 0)}setAxisThemeOverrides(e){var i;const s=this.getChart(),r=this.getChartType();let n=this.createChartOptions();for(const{expression:o,value:a}of e){const l=(i=s.axes)==null?void 0:i.filter(c=>{const u=o.split(".");let d=c;for(const h of u){if(!(h in d))return!1;d=d[h]}return!0});if(l)for(const c of l)this.isValidAxisType(c)&&this.assignChartAxisThemeOverride(n,r,c.type,null,o,a)}this.applyChartOptions(n)}getCartesianAxisProperty(e,i){const s=this.getChartAxes(),r=this.getCartesianAxis(s,e);return $d(r,i,void 0)}getCartesianAxisThemeOverride(e,i){const s=this.getChartAxes(),r=this.getCartesianAxis(s,e);if(!r||!this.isValidAxisType(r))return;const n=this.getChartType(),o=this.getChart().getOptions();return this.retrieveChartAxisThemeOverride(o,n,r.type,e==="yAxis"?["left","right"]:["bottom","top"],i)}setCartesianAxisThemeOverrides(e,i){const s=this.getChartAxes(),r=this.getCartesianAxis(s,e);if(!r||!this.isValidAxisType(r))return;const n=this.getChartType();let o=this.createChartOptions();for(const{expression:a,value:l}of i)this.assignChartAxisThemeOverride(o,n,r.type,e==="yAxis"?["left","right"]:["bottom","top"],a,l);this.applyChartOptions(o)}setCartesianAxisOptions(e,i){this.updateCartesianAxisOptions(e,(s,r,n)=>{const o=r.indexOf(n);for(const{expression:a,value:l}of i)this.assignChartOption(s,`axes.${o}.${a}`,l)})}updateCartesianAxisOptions(e,i){const s=this.getChart().getOptions(),r="axes"in s?s.axes:void 0;if(!s||!r)return;const n=this.getChartAxes(),o=this.getCartesianAxis(n,e);if(!o)return;let a=this.createChartOptions();a.axes=r,i(a,n,o,s),this.applyChartOptions(a)}setCartesianCategoryAxisType(e,i){this.updateCartesianAxisOptions(e,(s,r,n,o)=>{const a=this.getChartType();this.assignPersistedAxisOverrides({existingAxes:[n],retainedChartAxisThemeOverrideKeys:this.getRetainedChartAxisThemeOverrideKeys(e,a,a),existingChartOptions:o,targetChartOptions:s,existingChartType:a,targetChartType:a}),this.assignChartOption(s,"axes.0.type",i),this.chartController.setCategoryAxisType(i)})}getCartesianAxis(e,i){if(!(e.length<2))switch(i){case"xAxis":return e[0].direction==="x"?e[0]:e[1];case"yAxis":return e[1].direction==="y"?e[1]:e[0]}}getSeriesOption(e,i,s){const r=this.getChart().series.find(n=>K7.isMatchingSeries(e,n));return $d(s?r:r==null?void 0:r.properties.toJson(),i,void 0)}setSeriesOptions(e,i){let s=this.createChartOptions();for(const{expression:r,value:n}of i)this.assignChartOptionsSeriesThemeOverride(s,e,`series.${r}`,n);this.applyChartOptions(s)}getPairedMode(){return this.chartController.getChartProxy().isPaired()}setPairedMode(e){this.chartController.getChartProxy().setPaired(e)}getChartAxes(){var e;return(e=this.getChart().axes)!=null?e:[]}retrieveChartAxisThemeOverride(e,i,s,r,n){if(r)for(const o of r){const a=this.retrieveChartOptionsThemeOverride(e,i,["axes",s,o,...n?[n]:[]].join("."));if(a!==void 0)return a}else return this.retrieveChartOptionsThemeOverride(e,i,["axes",s,...n?[n]:[]].join("."))}assignChartAxisThemeOverride(e,i,s,r,n,o){if(r)for(const a of r)this.assignChartOptionsThemeOverride(e,i,["axes",s,a,...n?[n]:[]].join("."),o);else this.assignChartOptionsThemeOverride(e,i,["axes",s,...n?[n]:[]].join("."),o)}isValidAxisType(e){return vse.includes(e.type)}getChartType(){return this.chartController.getChartType()}getChart(){return this.chartController.getChartProxy().getChart()}updateChart(e){const i=this.chartController.getChartProxy().getChartRef();i.skipAnimations(),Do.updateDelta(i,e)}createChartOptions(){return{theme:{overrides:{}}}}retrieveChartOptionsThemeOverride(e,i,s){const r=this.getChartThemeOverridesSeriesTypeKeys(i);for(const n of r){const o=this.retrieveChartOptionsSeriesThemeOverride(e,n,s);if(o!==void 0)return o}}assignChartOptionsThemeOverride(e,i,s,r){const n=this.getChartThemeOverridesSeriesTypeKeys(i);for(const o of n)this.assignChartOptionsSeriesThemeOverride(e,o,s,r)}retrieveChartOptionsSeriesThemeOverride(e,i,s){return this.retrieveChartOption(e,["theme","overrides",i,...s?[s]:[]].join("."))}assignChartOptionsSeriesThemeOverride(e,i,s,r){this.assignChartOption(e,["theme","overrides",i,...s?[s]:[]].join("."),r)}getChartThemeOverridesSeriesTypeKeys(e){const i=this.chartController.getChartSeriesTypes(e);return this.chartController.isComboChart()&&i.push("common"),i}retrieveChartOption(e,i){return $d(e,i,void 0)}assignChartOption(e,i,s){rie(e,i,s)}raiseChartOptionsChangedEvent(){const e=this.chartController.getChartModel(),i={type:K.EVENT_CHART_OPTIONS_CHANGED,chartId:e.chartId,chartType:e.chartType,chartThemeName:this.chartController.getChartThemeName(),chartOptions:e.chartOptions};this.eventService.dispatchEvent(i)}static isMatchingSeries(e,i){return Hte(e)&&i.type===e}destroy(){super.destroy()}},Cse=class extends Td{constructor(t){super(t)}getAxes(t){const e=t?t.fields:[],i=new Map(e.map(o=>[o.colId,o])),{primaryYKeys:s,secondaryYKeys:r}=this.getYKeys(e,t.seriesChartTypes),n=[{type:this.getXAxisType(t),position:"bottom"}];return s.length>0&&n.push({type:"number",keys:s,position:"left"}),r.length>0&&r.forEach(o=>{const a=i.get(o);if(!(a&&a.colId===o))return;const c={type:"number",keys:[o],position:"right"};n.push(c)}),n}getSeries(t){const{fields:e,seriesChartTypes:i}=t,[s]=t.categories;return e.map(r=>{const n=i.find(o=>o.colId===r.colId);if(n){const o=n.chartType,l=["groupedColumn","groupedBar"].includes(o)?{grouped:!0}:{};return Xe({type:ss(o),xKey:s.id,yKey:r.colId,yName:r.displayName,stacked:["stackedArea","stackedColumn"].includes(o)},l)}})}getYKeys(t,e){const i=[],s=[];return t.forEach(r=>{const n=r.colId,o=e.find(a=>a.colId===n);o&&(o.secondaryAxis?s.push(n):i.push(n))}),{primaryYKeys:i,secondaryYKeys:s}}},xb=["chartSettings","chartData","chartFormat"],Wm=["chartUnlink","chartLink","chartDownload"],nw={settings:"chartSettings",data:"chartData",format:"chartFormat"},Zy=class extends ye{isLegacyFormat(){return!this.chartService.isEnterprise()}downloadChart(t,e,i,s){t.chartController.getChartProxy().downloadChart(e,i,s)}toggleLinked(t){t.chartController.detachChartRange()}openAdvancedSettings(t,e){this.advancedSettingsMenuFactory.showMenu(t,e)}hideAdvancedSettings(){this.advancedSettingsMenuFactory.hideMenu()}getToolbarOptionsAndPanels(t){var e,i,s;const r=this.isLegacyFormat(),n=!!this.gos.get("chartToolPanelsDef")||!r;let o,a,l;if(n){const c=r?[t.isChartLinked()?"chartLink":"chartUnlink","chartDownload"]:["chartMenu"],u=this.gos.getCallback("getChartToolbarItems");l=u?u({defaultItems:c}).filter(f=>{if(!(r?Wm:[...Wm,"chartMenu"]).includes(f)){let m;return xb.includes(f)?m=`'${f}' is a Chart Tool Panel option and will be ignored since 'chartToolPanelsDef' is used. Please use 'chartToolPanelsDef.panels' grid option instead`:f==="chartMenu"?m="'chartMenu' is only allowed as a Chart Toolbar Option when using AG Charts Enterprise":m=`'${f}' is not a valid Chart Toolbar Option`,Q.warnOnce(m),!1}return!0}):c;const h=(i=(e=this.gos.get("chartToolPanelsDef"))==null?void 0:e.panels)==null?void 0:i.map(f=>{const m=nw[f];return m||Q.warnOnce(`Invalid panel in chartToolPanelsDef.panels: '${f}'`),m}).filter(f=>!!f);o=h||Object.values(nw),t.isPivotChart()&&(o=o.filter(f=>f!=="chartData"));const p=(s=this.gos.get("chartToolPanelsDef"))==null?void 0:s.defaultToolPanel;a=p&&nw[p]||o[0],r&&(l=o.length>0?[o[0],...l]:l)}else{let c=["chartSettings","chartData","chartFormat",t.isChartLinked()?"chartLink":"chartUnlink","chartDownload"];const u=this.gos.getCallback("getChartToolbarItems");if(u){const h=this.gos.get("suppressChartToolPanelsButton");c=u({defaultItems:h?c:Wm}).filter(f=>{if(!xb.includes(f)&&!Wm.includes(f))return Q.warnOnce(`'${f}' is not a valid Chart Toolbar Option`),!1;if(!h&&xb.includes(f)){const m=`'${f}' is a Chart Tool Panel option and will be ignored. Please use 'chartToolPanelsDef.panels' grid option instead`;return Q.warnOnce(m),!1}return!0}),h||(c=c.concat(xb))}t.isPivotChart()&&(c=c.filter(h=>h!=="chartData"));const d=["chartUnlink","chartLink","chartDownload"];o=c.filter(h=>d.indexOf(h)===-1),a=o[0],l=c.filter(h=>d.indexOf(h)!==-1||o.length&&h===o[0])}return{panels:o,defaultPanel:a,chartToolbarOptions:l}}doesChartToolbarExist(t){const{chartToolbarOptions:e}=this.getToolbarOptionsAndPanels(t);return["chartMenu",...Wm].some(i=>e.includes(i))}doChartToolPanelsExist(t){const{panels:e}=this.getToolbarOptionsAndPanels(t);return e.length>0}};Ce([W("chartService")],Zy.prototype,"chartService",2);Ce([W("advancedSettingsMenuFactory")],Zy.prototype,"advancedSettingsMenuFactory",2);Zy=Ce([Me("chartMenuService")],Zy);var ow="AG-GRID-DEFAULT-LABEL-KEY";function bse(t,e){const i=Y7(t,s,r);return g2(i);function s(o){return e.length}function r(o,a){const l=e[a],c=o[l];return n(c)}function n(o){return o==null?null:String(o)}}function wse(t,e){const i=Y7(t,s,r);return g2(i);function s(n){var o,a;return(a=(o=e(n))==null?void 0:o.length)!=null?a:0}function r(n,o){const a=e(n);if(!a)return null;const l=a.length-1-o;return a[l]}}function g2(t,e=null,i){const{depth:s,rootValues:r,value:n,children:o}=t;if(r)return r.map(l=>Xe({[ow]:e},l));if(s===0)return[Xe({[ow]:e},n)];const a=[];for(const[l,c]of o.entries())a.push(...g2(c,l,!0));return i?[Xe({[ow]:e,children:a},n??{})]:a}function Y7(t,e,i){const s={depth:0,children:new Map};return t.forEach(n=>{const o=e(n);r(n,o,i,0,s)}),s;function r(n,o,a,l,c){if(l===o)return l===0?(c.rootValues||(c.rootValues=[]),c.rootValues.push(n)):c.value=n,c;{const u=a(n,l),d=c.children.get(u),h=r(n,o,a,l+1,d||{depth:0,children:new Map});return c.children.set(u,h),c.depth=Math.max(1+h.depth,c.depth),c}}}var Sse=class extends w0{constructor(t){super(t)}getUpdateOptions(t,e){const{fields:i}=t,[s,r]=i;return Bt(Xe({},e),{series:this.getSeries(s,r),data:this.getData(t,s,r)})}getSeriesChartThemeDefaults(){return{gradientLegend:{gradient:{preferredLength:200}}}}getSeries(t,e){var i,s;return[{type:this.standaloneChartType,labelKey:ow,sizeKey:t==null?void 0:t.colId,sizeName:(i=t==null?void 0:t.displayName)!=null?i:void 0,colorKey:e==null?void 0:e.colId,colorName:(s=e==null?void 0:e.displayName)!=null?s:void 0}]}getData(t,e,i){var s;const{categories:r,data:n,groupData:o,grouping:a}=t;if(a){const l=i?n.concat((s=o==null?void 0:o.map(c=>{const u=Xe({},c);return delete u[e.colId],u}))!=null?s:[]):n;return wse(l,c=>{var u,d;return(d=(u=c[rc])==null?void 0:u.labels)!=null?d:null})}else{const l=r.map(({id:c})=>c);return bse(n,l)}}},So=class MA extends Te{constructor(e){super(MA.TEMPLATE),this.params=e}init(){const e=Bt(Xe({},this.params),{chartType:qy(this.params.chartType),chartThemeName:this.getThemeName()}),i=this.gos.get("enableRtl");this.addCssClass(i?"ag-rtl":"ag-ltr");const s=this.createBean(new gc(e));this.chartController=this.createManagedBean(new co(s)),this.chartOptionsService=this.createManagedBean(new yse(this.chartController)),this.validateCustomThemes(),this.createChart(),this.params.insideDialog&&this.addDialog(),this.addMenu(),this.addTitleEditComp(),this.addManagedListener(this.getGui(),"focusin",this.setActiveChartCellRange.bind(this)),this.addManagedListener(this.chartController,co.EVENT_CHART_MODEL_UPDATE,this.update.bind(this)),this.addManagedPropertyListeners(["chartThemeOverrides","chartThemes"],this.reactivePropertyUpdate.bind(this)),this.update(),this.raiseChartCreatedEvent()}createChart(){var e;let i;this.chartProxy&&(i=this.chartProxy.destroy({keepChartInstance:!0}));const s=(a,l)=>{const c=this.params.crossFilteringContext;c.lastSelectedChartId=l?"":this.chartController.getChartId(),l&&this.params.crossFilteringResetCallback(),this.crossFilterService.filter(a,l)},r=this.chartController.getChartType(),n={chartType:r,chartInstance:i,getChartThemeName:this.getChartThemeName.bind(this),getChartThemes:this.getChartThemes.bind(this),customChartThemes:this.gos.get("customChartThemes"),getGridOptionsChartThemeOverrides:()=>this.getGridOptionsChartThemeOverrides(),getExtraPaddingDirections:()=>{var a,l;return(l=(a=this.chartMenu)==null?void 0:a.getExtraPaddingDirections())!=null?l:[]},apiChartThemeOverrides:this.params.chartThemeOverrides,crossFiltering:(e=this.params.crossFiltering)!=null?e:!1,crossFilterCallback:s,parentElement:this.eChart,grouping:this.chartController.isGrouping(),chartThemeToRestore:this.params.chartThemeName,chartOptionsToRestore:this.params.chartOptionsToRestore,chartPaletteToRestore:this.params.chartPaletteToRestore,seriesChartTypes:this.chartController.getSeriesChartTypes(),translate:a=>this.chartTranslationService.translate(a)};if(this.params.chartOptionsToRestore=void 0,this.chartType=r,this.chartProxy=MA.createChartProxy(n),!this.chartProxy){console.warn("AG Grid: invalid chart type supplied: ",n.chartType);return}const o=this.eChart.querySelector("canvas");o&&o.classList.add("ag-charts-canvas"),this.chartController.setChartProxy(this.chartProxy),this.createMenuContext(),this.titleEdit&&this.titleEdit.refreshTitle(this.chartMenuContext)}createMenuContext(){if(this.chartMenuContext)return;const e=this.createManagedBean(new Oh(this.chartOptionsService.getChartThemeOverridesProxy())),i=this.createManagedBean(new Oh(this.chartOptionsService.getAxisThemeOverridesProxy()));this.chartMenuContext={chartController:this.chartController,chartOptionsService:this.chartOptionsService,chartMenuParamsFactory:e,chartAxisMenuParamsFactory:i}}getChartThemeName(){return this.chartController.getChartThemeName()}getChartThemes(){return this.chartController.getThemeNames()}getGridOptionsChartThemeOverrides(){return this.gos.get("chartThemeOverrides")}static createChartProxy(e){switch(e.chartType){case"column":case"bar":case"groupedColumn":case"stackedColumn":case"normalizedColumn":case"groupedBar":case"stackedBar":case"normalizedBar":return new ese(e);case"pie":case"donut":case"doughnut":return new rse(e);case"area":case"stackedArea":case"normalizedArea":return new tse(e);case"line":return new ise(e);case"scatter":case"bubble":return new nse(e);case"histogram":return new ase(e);case"radarLine":case"radarArea":case"nightingale":case"radialColumn":case"radialBar":return new sse(e);case"rangeBar":case"rangeArea":return new ose(e);case"boxPlot":return new lse(e);case"treemap":case"sunburst":return new Sse(e);case"heatmap":return new pse(e);case"waterfall":return new gse(e);case"columnLineCombo":case"areaColumnCombo":case"customCombo":return new Cse(e);default:throw`AG Grid: Unable to create chart as an invalid chartType = '${e.chartType}' was supplied.`}}addDialog(){const e=this.chartTranslationService.translate(this.params.pivotChart?"pivotChartTitle":"rangeChartTitle"),{width:i,height:s}=this.getBestDialogSize();this.chartDialog=new lc({resizable:!0,movable:!0,maximizable:!0,title:e,width:i,height:s,component:this,centered:!0,closable:!0}),this.getContext().createBean(this.chartDialog),this.chartDialog.addEventListener(lc.EVENT_DESTROYED,()=>{this.destroy(),this.chartMenuService.hideAdvancedSettings()})}getBestDialogSize(){const e=this.popupService.getPopupParent(),i=Q.getAbsoluteWidth(e)*.75,s=Q.getAbsoluteHeight(e)*.75,r=.553,n=this.chartProxy.getChart();let o=this.params.insideDialog?850:n.width,a=this.params.insideDialog?470:n.height;return(o>i||a>s)&&(o=Math.min(o,i),a=Math.round(o*r),a>s&&(a=s,o=Math.min(o,Math.round(a/r)))),{width:o,height:a}}addMenu(){this.params.crossFiltering||(this.chartMenu=this.createBean(new Zie(this.eChartContainer,this.eMenuContainer,this.chartMenuContext)),this.eChartContainer.appendChild(this.chartMenu.getGui()))}addTitleEditComp(){this.titleEdit=this.createBean(new Jie(this.chartMenu)),this.eTitleEditContainer.appendChild(this.titleEdit.getGui()),this.chartProxy&&this.titleEdit.refreshTitle(this.chartMenuContext)}update(e){if(e!=null&&e.chartId&&!this.chartController.update(e))return;const i=this.chartTypeChanged(e),s=i||this.chartEmpty?(n=>{const o=this.chartType,a=n,l=this.chartProxy.getChart(),c=l==null?void 0:l.getOptions(),u=l==null?void 0:l.axes;return this.chartOptionsService.getPersistedChartThemeOverrides(c,u,o,a??o)})(i):void 0;i&&this.createChart();const r=s&&(e!=null&&e.chartThemeOverrides)?Eg(s,e.chartThemeOverrides):s||(e==null?void 0:e.chartThemeOverrides);this.updateChart(r),e!=null&&e.chartId&&this.chartProxy.getChart().waitForUpdate().then(()=>{this.chartController.raiseChartApiUpdateEvent()})}updateChart(e){const{chartProxy:i}=this,s=this.chartController.getSelectedValueColState(),r=this.chartController.getChartData(),n=this.handleEmptyChart(r,s.length);if(this.chartEmpty=n,n){e&&this.chartController.updateThemeOverrides(e);return}let o=this.chartController.getChartUpdateParams(e);i.update(o),this.chartProxy.getChart().waitForUpdate().then(()=>{this.chartController.raiseChartUpdatedEvent()}),this.titleEdit.refreshTitle(this.chartMenuContext)}chartTypeChanged(e){const[i,s]=[this.chartController.getChartType(),e==null?void 0:e.chartType],r=s?qy(s):void 0;return this.chartType!==i?r??i:r&&i!==r?r:null}getChartModel(){return this.chartController.getChartModel()}getChartImageDataURL(e){return this.chartProxy.getChartImageDataURL(e)}handleEmptyChart(e,i){const s=this.chartController.isPivotChart()&&!this.chartController.isPivotMode(),r=this.chartController.getChartType();let n=1;this.chartController.isActiveXYChart()?n=r==="bubble"?3:2:sh(ss(r))&&(n=0);const o=i<n||e.length===0;if(this.eChart){const a=s||o;Q.setDisplayed(this.eChart,!a),Q.setDisplayed(this.eEmpty,a)}return s?(this.eEmpty.innerText=this.chartTranslationService.translate("pivotChartRequiresPivotMode"),!0):o?(this.eEmpty.innerText=this.chartTranslationService.translate("noDataToChart"),!0):!1}downloadChart(e,i,s){this.chartProxy.downloadChart(e,i,s)}openChartToolPanel(e){const i=e&&nw[e];this.chartMenu.showMenu({panel:i})}closeChartToolPanel(){this.chartMenu.hideMenu()}getChartId(){return this.chartController.getChartId()}getUnderlyingChart(){return this.chartProxy.getChartRef()}crossFilteringReset(){this.chartProxy.crossFilteringReset()}setActiveChartCellRange(e){this.getGui().contains(e.relatedTarget)||(this.chartController.setChartRange(!0),this.focusService.clearFocusedCell())}getThemeName(){const e=this.gos.get("chartThemes")||MV;if(e.length===0)throw new Error("Cannot create chart: no chart themes available.");const{chartThemeName:i}=this.params;return Q.includes(e,i)?i:e[0]}getAllKeysInObjects(e){const i={};return e.filter(s=>s!=null).forEach(s=>{Object.keys(s).forEach(r=>i[r]=null)}),Object.keys(i)}validateCustomThemes(){const e=this.getChartThemes(),i=this.gos.get("customChartThemes");i&&this.getAllKeysInObjects([i]).forEach(s=>{Q.includes(e,s)||console.warn("AG Grid: a custom chart theme with the name '"+s+"' has been supplied but not added to the 'chartThemes' list")})}reactivePropertyUpdate(){this.chartController.setChartThemeName(this.getThemeName(),!0);const e=this.getChartId(),i=this.chartController.isCrossFilterChart()?"crossFilter":this.getChartModel().modelType,s=this.gos.get("chartThemeOverrides")||{};this.update({type:`${i}ChartUpdate`,chartId:e,chartThemeOverrides:s})}raiseChartCreatedEvent(){const e={type:K.EVENT_CHART_CREATED,chartId:this.chartController.getChartId()};this.chartProxy.getChart().waitForUpdate().then(()=>{this.eventService.dispatchEvent(e)})}raiseChartDestroyedEvent(){const e={type:K.EVENT_CHART_DESTROYED,chartId:this.chartController.getChartId()};this.eventService.dispatchEvent(e)}destroy(){var e;super.destroy(),this.chartProxy&&this.chartProxy.destroy(),this.destroyBean(this.chartMenu),this.destroyBean(this.titleEdit),this.chartDialog&&this.chartDialog.isAlive()&&this.destroyBean(this.chartDialog),(e=this.onDestroyColorSchemeChangeListener)==null||e.call(this);const i=this.getGui();Q.clearElement(i),Q.removeFromParent(i),this.raiseChartDestroyedEvent()}};So.TEMPLATE=`<div class="ag-chart" tabindex="-1">
            <div ref="eChartContainer" tabindex="-1" class="ag-chart-components-wrapper">
                <div ref="eChart" class="ag-chart-canvas-wrapper"></div>
                <div ref="eEmpty" class="ag-chart-empty-text ag-unselectable"></div>
            </div>
            <div ref="eTitleEditContainer"></div>
            <div ref="eMenuContainer" class="ag-chart-docked-container" style="min-width: 0px;"></div>
        </div>`;Ce([pe("eChart")],So.prototype,"eChart",2);Ce([pe("eChartContainer")],So.prototype,"eChartContainer",2);Ce([pe("eMenuContainer")],So.prototype,"eMenuContainer",2);Ce([pe("eEmpty")],So.prototype,"eEmpty",2);Ce([pe("eTitleEditContainer")],So.prototype,"eTitleEditContainer",2);Ce([W("chartCrossFilterService")],So.prototype,"crossFilterService",2);Ce([W("chartTranslationService")],So.prototype,"chartTranslationService",2);Ce([W("chartMenuService")],So.prototype,"chartMenuService",2);Ce([W("focusService")],So.prototype,"focusService",2);Ce([W("popupService")],So.prototype,"popupService",2);Ce([de],So.prototype,"init",1);var OL=So,Jy="31.3.4";function xse(t){return t.version,t.version==null&&(t.version=Nse(t)),t=pn("23.0.0",t,Ese),t=pn("24.0.0",t,Tse),t=pn("25.1.0",t,_se),t=pn("26.0.0",t,Ase),t=pn("26.1.0",t,Rse),t=pn("26.2.0",t,Mse),t=pn("28.0.0",t,Dse),t=pn("28.2.0",t,Pse),t=pn("29.0.0",t,Ise),t=pn("29.1.0",t,q7),t=pn("29.2.0",t,X7),t=pn("30.0.0",t,Fse),t=pn("31.0.0",t,Lse),t=kse(t),t=pn(Jy,t,e=>e),t}function Ese(t){return t=Kr("chartOptions.legend.item.marker.type","shape",t),t=Kr("chartOptions.seriesDefaults.marker.type","shape",t),t=Kr("chartOptions.legend.padding","spacing",t),t}function Tse(t){var e;t=Lr("chartOptions.seriesDefaults.marker.minSize",t);const i=t,{chartType:s,chartPalette:r,chartOptions:n}=i,o=n,{xAxis:a,yAxis:l}=o,c=xu(o,["xAxis","yAxis"]),u=xu(i,["chartType","chartPalette","chartOptions"]),d=Yte(s),h=d==null?void 0:d.map((f,m)=>Xe({type:f},m===0?a:l));return Xe({chartType:s,chartThemeName:(e={borneo:"ag-default",material:"ag-material",bright:"ag-vivid"}[r])!=null?e:"ag-default",chartOptions:Bt(Xe({},c),{axes:h,xAxis:a,yAxis:l})},u)}function _se(t){return t=Kr("chartOptions.seriesDefaults.label.minRequiredAngle","minAngle",t),t}function Ase(t){return t=Xl("chartOptions.seriesDefaults.highlightStyle",t,i=>{var s=i,{dimOpacity:r}=s,n=xu(s,["dimOpacity"]);return Xe(Xe({},n),r!=null?{series:{dimOpacity:r}}:{})}),t=Lr("chart",t),t=Lr("chartOptions.seriesDefaults.tooltipClass",t),t=Lr("chartOptions.seriesDefaults.tooltipTracking",t),t=BL("chartOptions.axes[].label.rotation",0,t),t=BL("chartOptions.axes[].label.rotation",335,t),t}function Rse(t){const e=i=>{var s=i,{item:r,series:n}=s,o=xu(s,["item","series"]);return Xe({item:Xe(Xe({},o),r)},n?{series:n}:{})};return t=Xl("chartOptions.seriesDefaults.highlightStyle",t,e),t=Xl("chartOptions.series[].highlightStyle",t,e),t}function Mse(t){t=aw("chartOptions.seriesDefaults.fill.opacity","chartOptions.seriesDefaults.fillOpacity",t),t=aw("chartOptions.seriesDefaults.stroke.opacity","chartOptions.seriesDefaults.strokeOpacity",t),t=aw("chartOptions.seriesDefaults.stroke.width","chartOptions.seriesDefaults.strokeWidth",t),t=Lr("chartOptions.seriesDefaults.fill",t),t=Lr("chartOptions.seriesDefaults.stroke",t),t=Lr("chartOptions.seriesDefaults.callout.colors",t),t=Lr("chartOptions.xAxis",t),t=Lr("chartOptions.yAxis",t);const e=t,{chartType:i,chartOptions:s}=e,r=s,{axes:n,series:o,seriesDefaults:a}=r,l=xu(r,["axes","series","seriesDefaults"]),c=xu(e,["chartType","chartOptions"]),u=qy(i),d=ss(u),h=[d],p={};if(!wV(d)){const m={top:{},bottom:{},left:{},right:{}},g=n.map(y=>{var v=y,{type:C}=v,b=xu(v,["type"]);return{[C]:Xe(Xe({},m),b)}}).reduce(VL,{});xV.filter(y=>g[y]==null).forEach(y=>{g[y]=Xe({},m)}),p.axes=g}const f=h.map(m=>({[m]:Xe(Bt(Xe({},p),{series:a}),l)})).reduce(VL,{});return t=Bt(Xe({},c),{chartType:u,chartOptions:f}),t}function Dse(t){return t=Lr("chartOptions.*.title.padding",t),t=Lr("chartOptions.*.subtitle.padding",t),t=Lr("chartOptions.*.axes.*.title.padding",t),t=m2("chartOptions.*.axes.*.title.enabled",!1,t),t}function Pse(t){return t=Kr("chartOptions.pie.series.callout","calloutLine",t),t=Kr("chartOptions.pie.series.label","calloutLabel",t),t=Kr("chartOptions.pie.series.labelKey","sectorLabelKey",t),t=Kr("chartOptions.pie.series.labelName","sectorLabelName",t),t=Kr("chartOptions.donut.series.callout","calloutLine",t),t=Kr("chartOptions.donut.series.label","calloutLabel",t),t=Kr("chartOptions.donut.series.labelKey","sectorLabelKey",t),t=Kr("chartOptions.donut.series.labelName","sectorLabelName",t),t}function Ise(t){return t=zm("chartOptions.scatter.series.fill","chartOptions.scatter.series.marker.fill",t),t=zm("chartOptions.scatter.series.fillOpacity","chartOptions.scatter.series.marker.fillOpacity",t),t=zm("chartOptions.scatter.series.stroke","chartOptions.scatter.series.marker.stroke",t),t=zm("chartOptions.scatter.series.strokeOpacity","chartOptions.scatter.series.marker.strokeOpacity",t),t=zm("chartOptions.scatter.series.strokeWidth","chartOptions.scatter.series.marker.strokeWidth",t),t=aw("chartOptions.scatter.series.paired","chartOptions.scatter.paired",t),t}function q7(t){return t=Lr("chartOptions.axes[].tick.count",t),t}function X7(t){return t=Xl("chartOptions.*.tooltip",t,i=>{var s=i,{tracking:r}=s,n=xu(s,["tracking"]),o,a,l,c;const u=Xe({},n);return r===!1?((o=u.position)!=null||(u.position={type:"pointer"}),(a=u.range)!=null||(u.range="nearest")):r===!0&&((l=u.position)!=null||(u.position={type:"node"}),(c=u.range)!=null||(u.range="nearest")),u}),t}function Fse(t){return t=Kr("chartOptions.pie.series.labelKey","sectorLabelKey",t),t=Kr("chartOptions.pie.series.labelName","sectorLabelName",t),t=q7(t),t=X7(t),t=Lr("chartOptions.*.series.flipXY",t),t=Z7("chartOptions.common.legend.enabled",!0,t),t=m2("chartOptions.common.legend.position","right",t),t}function Lse(t){const e={"ag-pastel":"ag-sheets","ag-solar":"ag-polychroma"},i=Kr("chartOptions.column","bar",t),s=e[i.chartThemeName]||i.chartThemeName;return Bt(Xe({},i),{chartThemeName:s})}function kse(t){return t=Lr("chartOptions.*.width",t),t=Lr("chartOptions.*.height",t),t=m2("chartOptions.*.axes.category.label.autoRotate",!0,t),t}function Nse(t){var e,i;const s=t;if(t.version!=null)return t.version;const r=(d,...h)=>Object.keys(d||{}).some(p=>h.includes(p)),n=s.chartOptions,o=r(n,"seriesDefaults")?n==null?void 0:n.seriesDefaults:n==null?void 0:n[Object.keys(n)[0]],a={"27.0.0":r(s,"seriesChartTypes"),"26.2.0":!r(n,"seriesDefaults"),"26.1.0":r(o==null?void 0:o.highlightStyle,"item"),"26.0.0":r(o==null?void 0:o.highlightStyle,"series"),"25.1.0":r(o==null?void 0:o.label,"minAngle"),"25.0.0":r(s,"modelType","aggFunc","unlinkChart","suppressChartRanges")||r(o,"lineDash","lineDashOffset"),"24.0.0":r(s,"chartThemeName","chart")||r(n,"series"),"23.2.0":r(n,"navigator"),"23.0.0":r((i=(e=n==null?void 0:n.legend)==null?void 0:e.item)==null?void 0:i.marker,"shape"),"22.1.0":r(s,"chartPalette","chartType")},l="27.1.0",c=Object.entries(a).filter(([d,h])=>h),[u=l]=c[0];return u}function pn(t,e,i){if(GL(t)>GL(e.version)){const s=i(e);return s.version=t,s}return e}function Ose(t){const e=typeof t=="string"?t.split(".").map(i=>Number(i)):[];if(e.length!==3||e.some(i=>isNaN(i)))throw new Error("AG Grid - Illegal version string: "+t);return{major:e[0],minor:e[1],patch:e[2]}}function GL(t){const{major:e,minor:i,patch:s}=Ose(t);return e*1e4+i*100+s}function BL(t,e,i){return Vu(t,!0,i,(s,r)=>{s[r]===e&&delete s[r]})}function m2(t,e,i){return Vu(t,!1,i,(s,r)=>{s[r]==null&&(s[r]=e)})}function Z7(t,e,i){var s;typeof t=="string"&&(t=t.split("."));const r=t[0];return t.length>1&&(i[r]=Z7(t.slice(1),e,(s=i[r])!=null?s:{})),Object.keys(i).includes(r)||(i[r]=e),i}function aw(t,e,i){let s,r=!1;return i=Vu(t,!0,i,(n,o)=>{r=!0,s=n[o],delete n[o]}),r?Vu(e,!1,i,(n,o)=>{n[o]=s}):i}function zm(t,e,i){let s,r=!1;return i=Vu(t,!0,i,(n,o)=>{r=!0,s=n[o],delete n[o]}),r?Vu(e,!1,i,(n,o)=>{n[o]===void 0&&(n[o]=s)}):i}function Kr(t,e,i){return Vu(t,!0,i,(s,r)=>{s[e]=s[r],delete s[r]})}function Lr(t,e){return Vu(t,!0,e,(i,s)=>delete i[s])}function Vu(t,e,i,s){const r=t instanceof Array?t:t.split("."),n=r.slice(0,r.length-1),o=r[r.length-1];return Xl(n,i,a=>{const l=Object.keys(a).includes(o);if(e&&!l)return a;const c=Xe({},a);return s(c,o),c})}function Xl(t,e,i){const s=t instanceof Array?t:t.split(".");if(e=Xe({},e),s.length===0)return i(e);if(s[0].startsWith("{")){const r=s[0].substring(1,s[0].lastIndexOf("}")).split(",");for(const n of r)e[n]!=null&&(e[n]=Xl(s.slice(1),e[n],i))}else if(s[0].endsWith("[]")){const r=s[0].substring(0,t[0].indexOf("["));e[r]instanceof Array&&(e[r]=e[r].map(n=>Xl(s.slice(1),n,i)))}else if(s[0]==="*")for(const r in e)e[r]=Xl(s.slice(1),e[r],i);else e[s[0]]!=null&&(e[s[0]]=Xl(s.slice(1),e[s[0]],i));return e}var VL=(t,e)=>Xe(Xe({},t),e),Hu=class extends ye{constructor(){super(...arguments),this.activeCharts=new Set,this.activeChartComps=new Set,this.crossFilteringContext={lastSelectedChartId:""},this.isEnterprise=()=>ym.enterpriseModule.isEnterprise}updateChart(t){if(this.activeChartComps.size===0){console.warn("AG Grid - No active charts to update.");return}const e=[...this.activeChartComps].find(i=>i.getChartId()===t.chartId);if(!e){console.warn(`AG Grid - Unable to update chart. No active chart found with ID: ${t.chartId}.`);return}e.update(t)}getChartModels(){const t=[],e=i=>Bt(Xe({},i),{version:Jy});return this.activeChartComps.forEach(i=>t.push(e(i.getChartModel()))),t}getChartRef(t){let e;return this.activeCharts.forEach(i=>{i.chartId===t&&(e=i)}),e}getChartComp(t){let e;return this.activeChartComps.forEach(i=>{i.getChartId()===t&&(e=i)}),e}getChartImageDataURL(t){let e;return this.activeChartComps.forEach(i=>{i.getChartId()===t.chartId&&(e=i.getChartImageDataURL(t.fileFormat))}),e}downloadChart(t){const e=Array.from(this.activeChartComps).find(i=>i.getChartId()===t.chartId);e==null||e.downloadChart(t.dimensions,t.fileName,t.fileFormat)}openChartToolPanel(t){const e=Array.from(this.activeChartComps).find(i=>i.getChartId()===t.chartId);e==null||e.openChartToolPanel(t.panel)}closeChartToolPanel(t){const e=Array.from(this.activeChartComps).find(i=>i.getChartId()===t);e==null||e.closeChartToolPanel()}createChartFromCurrentRange(t="groupedColumn"){const e=this.getSelectedRange();return this.createChart({cellRange:e,chartType:t})}restoreChart(t,e){if(!t){console.warn("AG Grid - unable to restore chart as no chart model is provided");return}t.version!==Jy&&(t=xse(t));let i,s,r,n;if(t.modelType==="pivot"?(this.gos.updateGridOptions({options:{pivotMode:!0},source:"pivotChart"}),i=this.createCellRange(void 0,!0),s=!0,r=!0):(i=this.createCellRange(t.cellRange),n=t.chartPalette),!!i)return this.createChart(Bt(Xe({},t),{cellRange:i,pivotChart:s,suppressChartRanges:r,chartContainer:e,chartOptionsToRestore:t.chartOptions,chartPaletteToRestore:n}))}createRangeChart(t){const e=this.createCellRange(t.cellRange);if(e)return this.createChart(Bt(Xe({},t),{cellRange:e}))}createPivotChart(t){this.gos.updateGridOptions({options:{pivotMode:!0},source:"pivotChart"});const e=this.createCellRange(void 0,!0);if(e)return this.createChart(Bt(Xe({},t),{cellRange:e,pivotChart:!0,suppressChartRanges:!0}))}createCrossFilterChart(t){const e=this.createCellRange(t.cellRange);if(!e)return;const s=typeof t.suppressChartRanges<"u"&&t.suppressChartRanges!==null?t.suppressChartRanges:!0;return this.createChart(Bt(Xe({},t),{cellRange:e,suppressChartRanges:s,crossFiltering:!0}))}createChart(t){const e=RV.validateCreateParams(t);if(!e)return;t=e===!0?t:e;const{chartType:i,chartContainer:s}=t,r=this.gos.getCallback("createChartContainer"),n=Bt(Xe({},t),{chartId:this.generateId(),chartType:qy(i),insideDialog:!(s||r),crossFilteringContext:this.crossFilteringContext,crossFilteringResetCallback:()=>this.activeChartComps.forEach(l=>l.crossFilteringReset())}),o=new OL(n);this.context.createBean(o);const a=this.createChartRef(o);if(s){s.appendChild(o.getGui());const l=this.environment.getTheme();l.el&&!l.el.contains(s)&&s.classList.add(l.theme)}else r?r(a):o.addEventListener(OL.EVENT_DESTROYED,()=>{this.activeChartComps.delete(o),this.activeCharts.delete(a)});return a}createChartRef(t){const e={destroyChart:()=>{this.activeCharts.has(e)&&(this.context.destroyBean(t),this.activeChartComps.delete(t),this.activeCharts.delete(e))},chartElement:t.getGui(),chart:t.getUnderlyingChart(),chartId:t.getChartModel().chartId};return this.activeCharts.add(e),this.activeChartComps.add(t),e}getSelectedRange(){var t,e;const i=(e=(t=this.rangeService)==null?void 0:t.getCellRanges())!=null?e:[];return i.length>0?i[0]:{columns:[]}}generateId(){return`id-${Math.random().toString(36).substring(2,18)}`}createCellRange(t,e){var i;const s=e?{rowStartIndex:null,rowStartPinned:void 0,rowEndIndex:null,rowEndPinned:void 0,columns:this.columnModel.getAllDisplayedColumns().map(n=>n.getColId())}:t,r=s&&((i=this.rangeService)==null?void 0:i.createPartialCellRangeFromRangeParams(s,!0));return r||console.warn(`AG Grid - unable to create chart as ${e?"there are no columns in the grid":"no range is selected"}.`),r}destroyAllActiveCharts(){this.activeCharts.forEach(t=>t.destroyChart())}};Hu.CHARTS_VERSION=$B;Ce([W("columnModel")],Hu.prototype,"columnModel",2);Ce([Vt("rangeService")],Hu.prototype,"rangeService",2);Ce([Hi],Hu.prototype,"destroyAllActiveCharts",1);Hu=Ce([Me("chartService")],Hu);var Qy=class extends ye{translate(t){const e=this.localeService.getLocaleTextFunc(),i=Qy.DEFAULT_TRANSLATIONS[t];return e(t,i)}};Qy.DEFAULT_TRANSLATIONS={pivotChartTitle:"Pivot Chart",rangeChartTitle:"Range Chart",settings:"Chart",data:"Data",format:"Format",categories:"Categories",defaultCategory:"(None)",series:"Series",switchCategorySeries:"Switch Category / Series",categoryValues:"Category Values",seriesLabels:"Series Labels",aggregate:"Aggregate",xyValues:"X Y Values",paired:"Paired Mode",axis:"Axis",xAxis:"Horizontal Axis",yAxis:"Vertical Axis",polarAxis:"Polar Axis",radiusAxis:"Radius Axis",navigator:"Navigator",zoom:"Zoom",animation:"Animation",crosshair:"Crosshair",color:"Color",thickness:"Thickness",preferredLength:"Preferred Length",xType:"X Type",axisType:"Axis Type",automatic:"Automatic",category:"Category",number:"Number",time:"Time",timeFormat:"Time Format",autoRotate:"Auto Rotate",labelRotation:"Rotation",circle:"Circle",orientation:"Orientation",polygon:"Polygon",fixed:"Fixed",parallel:"Parallel",perpendicular:"Perpendicular",radiusAxisPosition:"Position",ticks:"Ticks",gridLines:"Grid Lines",width:"Width",height:"Height",length:"Length",padding:"Padding",spacing:"Spacing",chart:"Chart",title:"Title",titlePlaceholder:"Chart title - double click to edit",background:"Background",font:"Font",top:"Top",right:"Right",bottom:"Bottom",left:"Left",labels:"Labels",calloutLabels:"Callout Labels",sectorLabels:"Sector Labels",positionRatio:"Position Ratio",size:"Size",shape:"Shape",minSize:"Minimum Size",maxSize:"Maximum Size",legend:"Legend",position:"Position",markerSize:"Marker Size",markerStroke:"Marker Stroke",markerPadding:"Marker Padding",itemSpacing:"Item Spacing",itemPaddingX:"Item Padding X",itemPaddingY:"Item Padding Y",layoutHorizontalSpacing:"Horizontal Spacing",layoutVerticalSpacing:"Vertical Spacing",strokeWidth:"Stroke Width",offset:"Offset",offsets:"Offsets",tooltips:"Tooltips",callout:"Callout",markers:"Markers",shadow:"Shadow",blur:"Blur",xOffset:"X Offset",yOffset:"Y Offset",lineWidth:"Line Width",lineDash:"Line Dash",lineDashOffset:"Dash Offset",scrollingZoom:"Scrolling",scrollingStep:"Scrolling Step",selectingZoom:"Selecting",durationMillis:"Duration (ms)",crosshairLabel:"Label",crosshairSnap:"Snap to Node",normal:"Normal",bold:"Bold",italic:"Italic",boldItalic:"Bold Italic",predefined:"Predefined",fillOpacity:"Fill Opacity",strokeColor:"Line Color",strokeOpacity:"Line Opacity",miniChart:"Mini-Chart",histogramBinCount:"Bin count",connectorLine:"Connector Line",seriesItems:"Series Items",seriesItemType:"Item Type",seriesItemPositive:"Positive",seriesItemNegative:"Negative",seriesItemLabels:"Item Labels",columnGroup:"Column",barGroup:"Bar",pieGroup:"Pie",lineGroup:"Line",scatterGroup:"X Y (Scatter)",areaGroup:"Area",polarGroup:"Polar",statisticalGroup:"Statistical",hierarchicalGroup:"Hierarchical",specializedGroup:"Specialized",combinationGroup:"Combination",groupedColumnTooltip:"Grouped",stackedColumnTooltip:"Stacked",normalizedColumnTooltip:"100% Stacked",groupedBarTooltip:"Grouped",stackedBarTooltip:"Stacked",normalizedBarTooltip:"100% Stacked",pieTooltip:"Pie",donutTooltip:"Donut",lineTooltip:"Line",groupedAreaTooltip:"Area",stackedAreaTooltip:"Stacked",normalizedAreaTooltip:"100% Stacked",scatterTooltip:"Scatter",bubbleTooltip:"Bubble",histogramTooltip:"Histogram",radialColumnTooltip:"Radial Column",radialBarTooltip:"Radial Bar",radarLineTooltip:"Radar Line",radarAreaTooltip:"Radar Area",nightingaleTooltip:"Nightingale",rangeBarTooltip:"Range Bar",rangeAreaTooltip:"Range Area",boxPlotTooltip:"Box Plot",treemapTooltip:"Treemap",sunburstTooltip:"Sunburst",heatmapTooltip:"Heatmap",waterfallTooltip:"Waterfall",columnLineComboTooltip:"Column & Line",areaColumnComboTooltip:"Area & Column",customComboTooltip:"Custom Combination",innerRadius:"Inner Radius",startAngle:"Start Angle",endAngle:"End Angle",reverseDirection:"Reverse Direction",groupPadding:"Group Padding",seriesPadding:"Series Padding",group:"Group",tile:"Tile",whisker:"Whisker",cap:"Cap",capLengthRatio:"Length Ratio",labelPlacement:"Placement",inside:"Inside",outside:"Outside",noDataToChart:"No data available to be charted.",pivotChartRequiresPivotMode:"Pivot Chart requires Pivot Mode enabled.",chartSettingsToolbarTooltip:"Menu",chartLinkToolbarTooltip:"Linked to Grid",chartUnlinkToolbarTooltip:"Unlinked from Grid",chartDownloadToolbarTooltip:"Download Chart",chartMenuToolbarTooltip:"Menu",chartEdit:"Edit Chart",chartAdvancedSettings:"Advanced Settings",chartLink:"Link to Grid",chartUnlink:"Unlink from Grid",chartDownload:"Download Chart",histogramFrequency:"Frequency",seriesChartType:"Series Chart Type",seriesType:"Series Type",secondaryAxis:"Secondary Axis",seriesAdd:"Add a series",categoryAdd:"Add a category",area:"Area",bar:"Bar",column:"Column",line:"Line",scatter:"Scatter",histogram:"Histogram",radialColumn:"Radial Column",radialBar:"Radial Bar",radarLine:"Radar Line",radarArea:"Radar Area",nightingale:"Nightingale",rangeBar:"Range Bar",rangeArea:"Range Area",treemap:"Treemap",sunburst:"Sunburst",waterfall:"Waterfall",boxPlot:"Box Plot",pie:"Pie",donut:"Donut",stackedArea:"StackedArea",groupedColumn:"Grouped Column",stackedColumn:"Stacked Column",advancedSettings:"Advanced Settings",ariaChartMenuClose:"Close Chart Edit Menu",timeFormatSlashesDDMMYYYY:"DD/MM/YYYY",timeFormatSlashesMMDDYYYY:"MM/DD/YYYY",timeFormatSlashesDDMMYY:"DD/MM/YY",timeFormatSlashesMMDDYY:"MM/DD/YY",timeFormatDotsDDMYY:"DD.M.YY",timeFormatDotsMDDYY:"M.DD.YY",timeFormatDashesYYYYMMDD:"YYYY-MM-DD",timeFormatSpacesDDMMMMYYYY:"DD MMMM YYYY",timeFormatHHMMSS:"HH:MM:SS",timeFormatHHMMSSAmPm:"HH:MM:SS AM/PM",sum:"Sum",first:"First",last:"Last",min:"Min",max:"Max",count:"Count",avg:"Average",direction:"Direction",horizontal:"Horizontal",vertical:"Vertical",seriesGroupType:"Group Type",groupedSeriesGroupType:"Grouped",stackedSeriesGroupType:"Stacked",normalizedSeriesGroupType:"100% Stacked"};Qy=Ce([Me("chartTranslationService")],Qy);var ju=class extends ye{filter(t,e=!1){const i=this.gridApi.getFilterModel();if(e){this.resetFilters(i);return}let s=ju.extractFilterColId(t);this.isValidColumnFilter(s)?this.updateFilters(i,t,s):console.warn("AG Grid: cross filtering requires a 'agSetColumnFilter' or 'agMultiColumnFilter' to be defined on the column with id: '"+s+"'")}resetFilters(t){Object.keys(t).length>0&&(this.gridApi.setFilterModel(null),this.gridApi.onFilterChanged())}updateFilters(t,e,i){let s=ju.extractFilterColId(e),r=e.datum[s];if(r===void 0)return;let n=r.toString();if(e.event.metaKey||e.event.ctrlKey){const o=this.getCurrentGridValuesForCategory(i),a=Q.includes(o,n);let l;a?l=o.filter(c=>c!==n):(l=o,l.push(n)),t[i]=this.getUpdatedFilterModel(i,l)}else{const o=[n];t={[i]:this.getUpdatedFilterModel(i,o)}}this.gridApi.setFilterModel(t)}getUpdatedFilterModel(t,e){return this.getColumnFilterType(t)==="agMultiColumnFilter"?{filterType:"multi",filterModels:[null,{filterType:"set",values:e}]}:{filterType:"set",values:e}}getCurrentGridValuesForCategory(t){let e=[];const i=this.getColumnById(t);return this.gridApi.forEachNodeAfterFilter(s=>{if(i&&!s.group){const r=this.valueService.getValue(i,s)+"";e.includes(r)||e.push(r)}}),e}static extractFilterColId(t){return t.xKey||t.calloutLabelKey}isValidColumnFilter(t){t.indexOf("-filtered-out")&&(t=t.replace("-filtered-out",""));let e=this.getColumnFilterType(t);return typeof e=="boolean"?e:Q.includes(["agSetColumnFilter","agMultiColumnFilter"],e)}getColumnFilterType(t){let e=this.getColumnById(t);if(e)return e.getColDef().filter}getColumnById(t){return this.columnModel.getGridColumn(t)}};Ce([W("gridApi")],ju.prototype,"gridApi",2);Ce([W("columnModel")],ju.prototype,"columnModel",2);Ce([W("valueService")],ju.prototype,"valueService",2);ju=Ce([Me("chartCrossFilterService")],ju);var J7=28,Q7=6;function DA(t){return t&&t.match(/\d+\.\d+\.\d+/)}function Gse({gridMajorVersion:t,chartsMajorVersion:e}){const i=parseInt(t,10),s=parseInt(e,10),r=i-J7,n=s-Q7,o=r>=0;return r===n&&o}function Bse(t){if(!DA(t))return;const[e,i]=t.split(".")||[],s=`${e}.${i}.x`,n=parseInt(e,10)-J7+Q7;if(n<0)return;const a=`${n}.${i}.x`;return{gridMajorMinor:s,chartsMajorMinor:a}}function Eb({type:t,gridVersion:e,chartsVersion:i}){const s="AG Grid: AG Grid version is incompatible. Please see https://www.ag-grid.com/javascript-data-grid/modules/ for more information.",r=Bse(e);if(!r)return s;const{gridMajorMinor:n,chartsMajorMinor:o}=r;return t==="incompatible"?`AG Grid version ${e} and AG Charts version ${i} is not supported. AG Grid version ${n} should be used with AG Chart ${o}. Please see https://www.ag-grid.com/javascript-data-grid/modules/ for more information.`:t==="invalidCharts"?`AG Grid version ${n} should be used with AG Chart ${o}. Please see https://www.ag-grid.com/javascript-data-grid/modules/ for more information.`:s}function Vse({gridVersion:t,chartsVersion:e}){if(!DA(e))return{isValid:!1,message:Eb({type:"invalidCharts",gridVersion:t,chartsVersion:e})};if(!DA(t))return{isValid:!1,message:Eb({type:"invalidGrid",gridVersion:t,chartsVersion:e})};const[i,s]=t.split(".")||[],[r,n,o]=e.split(".")||[],a=Gse({gridMajorVersion:i,chartsMajorVersion:r});return a&&s===n||o.includes("beta")?{isValid:!0}:!a||s!==n?{isValid:!1,message:Eb({type:"incompatible",gridVersion:t,chartsVersion:e})}:{isValid:!1,message:Eb({type:"invalid",gridVersion:t,chartsVersion:e})}}var Tg=class extends ye{showMenuList(t){const{eventSource:e,showMenu:i,chartMenuContext:s}=t,r=this.chartMenuService.doChartToolPanelsExist(s.chartController),n=this.mapWithStockItems(this.getMenuItems(s.chartController,r),s,i,e,r);if(!n.length)return;const o=this.createBean(new BE(n));this.activeChartMenuList=o;let a=-1,l="left";this.gos.get("enableRtl")&&(a=1,l="right");const c=o.getGui();this.popupService.addPopup({modal:!0,eChild:c,closeOnEsc:!0,closedCallback:()=>{this.destroyBean(o),this.activeChartMenuList=void 0;const u=this.gos.getDocument(),d=this.gos.getActiveDomElement();(!d||d===u.body)&&e.focus({preventScroll:!0})},afterGuiAttached:u=>o.afterGuiAttached(u),positionCallback:()=>{this.popupService.positionPopupByComponent({type:"chartMenu",eventSource:e,ePopup:c,alignSide:l,nudgeX:4*a,nudgeY:4,position:"under",keepWithinBounds:!0})},ariaLabel:"Chart Menu"})}getMenuItems(t,e){const i=[...e?["chartEdit"]:[],...t.isEnterprise()?["chartAdvancedSettings"]:[],t.isChartLinked()?"chartUnlink":"chartLink","chartDownload"],s=this.gos.get("chartMenuItems");return s?Array.isArray(s)?s:s(this.gos.addGridCommonParams({defaultItems:i})):i}mapWithStockItems(t,e,i,s,r){if(!t)return[];const n=[];return t.forEach(o=>{let a;if(typeof o=="string"?a=this.getStockMenuItem(o,e,i,s,r):a=Xe({},o),!a)return;const{subMenu:l}=a;Array.isArray(l)&&(a.subMenu=this.mapWithStockItems(l,e,i,s,r)),n.push(a)}),n}getStockMenuItem(t,e,i,s,r){switch(t){case"chartEdit":return r?this.createMenuItem(this.chartTranslationService.translate("chartEdit"),"chartsMenuEdit",i):null;case"chartAdvancedSettings":return this.createMenuItem(this.chartTranslationService.translate("chartAdvancedSettings"),"chartsMenuAdvancedSettings",()=>this.chartMenuService.openAdvancedSettings(e,s));case"chartUnlink":return e.chartController.isChartLinked()?this.createMenuItem(this.chartTranslationService.translate("chartUnlink"),"unlinked",()=>this.chartMenuService.toggleLinked(e)):null;case"chartLink":return e.chartController.isChartLinked()?null:this.createMenuItem(this.chartTranslationService.translate("chartLink"),"linked",()=>this.chartMenuService.toggleLinked(e));case"chartDownload":return this.createMenuItem(this.chartTranslationService.translate("chartDownload"),"save",()=>this.chartMenuService.downloadChart(e))}return null}createMenuItem(t,e,i){return{name:t,icon:Q.createIconNoSpan(e,this.gos,null),action:i}}destroy(){this.destroyBean(this.activeChartMenuList),super.destroy()}};Ce([W("popupService")],Tg.prototype,"popupService",2);Ce([W("chartMenuService")],Tg.prototype,"chartMenuService",2);Ce([W("chartTranslationService")],Tg.prototype,"chartTranslationService",2);Tg=Ce([Me("chartMenuListFactory")],Tg);var BE=class extends Te{constructor(t){super(`
            <div ref="eChartsMenu" role="presentation" class="ag-menu ag-chart-menu-popup"></div>
        `),this.menuItems=t}init(){this.mainMenuList=this.createManagedBean(new od(0)),this.mainMenuList.addMenuItems(this.menuItems),this.mainMenuList.addEventListener(Jn.EVENT_CLOSE_MENU,this.onHidePopup.bind(this)),this.eChartsMenu.appendChild(this.mainMenuList.getGui())}onHidePopup(){var t;(t=this.hidePopupFunc)==null||t.call(this)}afterGuiAttached({hidePopup:t}){t&&(this.hidePopupFunc=t,this.addDestroyFunc(t)),this.focusService.focusInto(this.mainMenuList.getGui())}};Ce([W("focusService")],BE.prototype,"focusService",2);Ce([pe("eChartsMenu")],BE.prototype,"eChartsMenu",2);Ce([de],BE.prototype,"init",1);var VE=class e9 extends Te{constructor(e){super(),this.chartMenuParamsFactory=e}init(){const e=this.chartMenuParamsFactory.addEnableParams("animation.enabled",{cssIdentifier:"charts-advanced-settings-top-level",direction:"vertical",suppressOpenCloseIcons:!0,title:this.chartTranslationService.translate("animation"),suppressEnabledCheckbox:!0,useToggle:!0}),i=this.chartMenuParamsFactory.getDefaultNumberInputParams("animation.duration","durationMillis",{min:0});this.setTemplate(e9.TEMPLATE,{animationGroup:e,animationHeightInput:i})}};VE.TEMPLATE=`<div>
            <ag-group-component ref="animationGroup">
                <ag-input-number-field ref="animationHeightInput"></ag-input>
            </ag-group-component>
        </div>`;Ce([W("chartTranslationService")],VE.prototype,"chartTranslationService",2);Ce([de],VE.prototype,"init",1);var Hse=VE,HE=class t9 extends Te{constructor(e){super(),this.chartMenuParamsFactory=e}init(){const e=this.chartMenuParamsFactory.addEnableParams("crosshair.enabled",{cssIdentifier:"charts-advanced-settings-top-level",direction:"vertical",suppressOpenCloseIcons:!0,title:this.chartTranslationService.translate("crosshair"),suppressEnabledCheckbox:!0,useToggle:!0}),i=this.chartMenuParamsFactory.getDefaultCheckboxParams("crosshair.label.enabled","crosshairLabel"),s=this.chartMenuParamsFactory.getDefaultCheckboxParams("crosshair.snap","crosshairSnap"),r=this.chartMenuParamsFactory.getDefaultColorPickerParams("crosshair.stroke","color");this.setTemplate(t9.TEMPLATE,{crosshairGroup:e,crosshairLabelCheckbox:i,crosshairSnapCheckbox:s,crosshairStrokeColorPicker:r})}};HE.TEMPLATE=`<div>
            <ag-group-component ref="crosshairGroup">
                <ag-checkbox ref="crosshairLabelCheckbox"></ag-checkbox>
                <ag-checkbox ref="crosshairSnapCheckbox"></ag-checkbox>
                <ag-color-picker ref="crosshairStrokeColorPicker"></ag-color-picker>
            </ag-group-component>
        </div>`;Ce([W("chartTranslationService")],HE.prototype,"chartTranslationService",2);Ce([de],HE.prototype,"init",1);var jse=HE,jE=class i9 extends Te{constructor(e){super(),this.chartMenuParamsFactory=e}init(){const e=this.chartMenuParamsFactory.addEnableParams("navigator.enabled",{cssIdentifier:"charts-advanced-settings-top-level",direction:"vertical",suppressOpenCloseIcons:!0,title:this.chartTranslationService.translate("navigator"),suppressEnabledCheckbox:!0,useToggle:!0}),i=this.chartMenuParamsFactory.getDefaultSliderParams("navigator.height","height",60);i.minValue=10;const s=this.chartMenuParamsFactory.getDefaultCheckboxParams("navigator.miniChart.enabled","miniChart");this.setTemplate(i9.TEMPLATE,{navigatorGroup:e,navigatorHeightSlider:i,navigatorMiniChartCheckbox:s})}};jE.TEMPLATE=`<div>
            <ag-group-component ref="navigatorGroup">
                <ag-slider ref="navigatorHeightSlider"></ag-slider>
                <ag-checkbox ref="navigatorMiniChartCheckbox"></ag-checkbox>
            </ag-group-component>
        </div>`;Ce([W("chartTranslationService")],jE.prototype,"chartTranslationService",2);Ce([de],jE.prototype,"init",1);var Use=jE,S0=class s9 extends Te{constructor(e){super(),this.chartMenuParamsFactory=e}init(){const e=this.chartMenuParamsFactory.addEnableParams("zoom.enabled",{cssIdentifier:"charts-advanced-settings-top-level",direction:"vertical",suppressOpenCloseIcons:!0,title:this.chartTranslationService.translate("zoom"),suppressEnabledCheckbox:!0,useToggle:!0}),i=this.chartMenuParamsFactory.getDefaultCheckboxParams("zoom.enableScrolling","scrollingZoom"),s=this.chartMenuParamsFactory.getDefaultSliderParams("zoom.scrollingStep","scrollingStep",1);s.step=.01,s.minValue=s.step;const r=this.chartMenuParamsFactory.getDefaultCheckboxParams("zoom.enableSelecting","selectingZoom");i.onValueChange=(n=>o=>{n&&(n(o),this.zoomScrollingStepInput.setDisabled(!o))})(i.onValueChange),this.setTemplate(s9.TEMPLATE,{zoomGroup:e,zoomScrollingCheckbox:i,zoomScrollingStepInput:s,zoomSelectingCheckbox:r}),this.zoomScrollingStepInput.setDisabled(!i.value)}};S0.TEMPLATE=`<div>
            <ag-group-component ref="zoomGroup">
                <ag-checkbox ref="zoomSelectingCheckbox"></ag-checkbox>
                <ag-checkbox ref="zoomScrollingCheckbox"></ag-checkbox>
                <ag-slider ref="zoomScrollingStepInput"></ag-slider>
            </ag-group-component>
        </div>`;Ce([W("chartTranslationService")],S0.prototype,"chartTranslationService",2);Ce([pe("zoomScrollingStepInput")],S0.prototype,"zoomScrollingStepInput",2);Ce([de],S0.prototype,"init",1);var Wse=S0,zse=["navigator","zoom","animation","crosshair"],v2=class r9 extends Te{constructor(e){super(r9.TEMPLATE),this.chartMenuContext=e}postConstruct(){this.chartPanelFeature=this.createManagedBean(new r2(this.chartMenuContext.chartController,this.getGui(),"ag-chart-advanced-settings-section",(e,i)=>this.createPanels(e,i))),this.chartPanelFeature.refreshPanels()}createPanels(e,i){zse.forEach(s=>{if(!this.isGroupPanelShownForSeries(s,i))return;const r=this.createPanel(s);this.chartPanelFeature.addComponent(r)})}isGroupPanelShownForSeries(e,i){return e==="animation"||ih(i)}createPanel(e){const{chartMenuParamsFactory:i,chartAxisMenuParamsFactory:s}=this.chartMenuContext;switch(e){case"navigator":return new Use(i);case"zoom":return new Wse(i);case"animation":return new Hse(i);case"crosshair":return new jse(s)}}};v2.TEMPLATE='<div class="ag-chart-advanced-settings-wrapper"></div>';Ce([de],v2.prototype,"postConstruct",1);var $se=v2,eC=class extends ye{showMenu(t,e){this.hideMenu();const i=this.createBean(new Kse(t));this.activeDialog=this.createBean(new lc({title:this.chartTranslationService.translate("advancedSettings"),component:i,width:300,height:400,resizable:!0,movable:!0,centered:!0,closable:!0,afterGuiAttached:()=>{var s;(s=this.focusService.findFocusableElements(i.getGui())[0])==null||s.focus()},closedCallback:()=>{this.activeMenu=this.destroyBean(this.activeMenu),this.activeDialog=void 0,e==null||e.focus({preventScroll:!0})}})),this.activeMenu=i}hideMenu(){this.activeDialog&&this.destroyBean(this.activeDialog)}destroy(){this.activeMenu=this.destroyBean(this.activeMenu),this.activeDialog=this.destroyBean(this.activeDialog),super.destroy()}};Ce([W("focusService")],eC.prototype,"focusService",2);Ce([W("chartTranslationService")],eC.prototype,"chartTranslationService",2);eC=Ce([Me("advancedSettingsMenuFactory")],eC);var UE=class n9 extends yl{constructor(e){super(n9.TEMPLATE),this.chartMenuContext=e}postConstruct(){this.advancedSettingsPanel=this.createManagedBean(new $se(this.chartMenuContext)),this.getGui().appendChild(this.advancedSettingsPanel.getGui()),this.initialiseTabGuard({onTabKeyDown:this.onTabKeyDown.bind(this),focusTrapActive:!0})}onTabKeyDown(e){if(e.defaultPrevented)return;e.preventDefault();const i=e.shiftKey,s=this.advancedSettingsPanel.getGui(),r=this.focusService.findNextFocusableElement(s,!1,i);if(r)r.focus();else{const n=this.focusService.findFocusableElements(s);n.length&&n[i?n.length-1:0].focus()}}};UE.TEMPLATE='<div class="ag-chart-advanced-settings"></div>';Ce([W("focusService")],UE.prototype,"focusService",2);Ce([de],UE.prototype,"postConstruct",1);var Kse=UE,y2={version:Jy,validate:()=>Vse({gridVersion:Jy,chartsVersion:Hu.CHARTS_VERSION}),moduleName:Ut.GridChartsModule,beans:[Hu,Qy,ju,Tg,Zy,eC],agStackComponents:[{componentName:"AgColorPicker",componentClass:JV},{componentName:"AgAngleSelect",componentClass:UV},{componentName:"AgPillSelect",componentClass:PV}],dependantModules:[e2,Qs]},o9=0,a9={time:aD,AgChart:WB},Yse=Object.defineProperty,qse=Object.getOwnPropertyDescriptor,un=(t,e,i,s)=>{for(var r=s>1?void 0:s?qse(e,i):e,n=t.length-1,o;n>=0;n--)(o=t[n])&&(r=(s?o(e,i,r):o(r))||r);return s&&r&&Yse(e,i,r),r},fT="paste",gT="dragCopy",HL="clipboard",jL=t=>`AG Grid: Unable to use the Clipboard API (navigator.clipboard.${t}()). The reason why it could not be used has been logged in the previous line. For this reason the grid has defaulted to using a workaround which doesn't perform as well. Either fix why Clipboard API is blocked, OR stop this message from appearing by setting grid property suppressClipboardApi=true (which will default the grid to using the workaround rather than the API.`,or=class extends ye{constructor(){super(...arguments),this.lastPasteOperationTime=0,this.navigatorApiFailed=!1}init(){this.logger=this.loggerFactory.create("ClipboardService"),this.rowModel.getType()==="clientSide"&&(this.clientSideRowModel=this.rowModel),this.ctrlsService.whenReady(t=>{this.gridCtrl=t.gridCtrl})}pasteFromClipboard(){this.logger.log("pasteFromClipboard"),!this.gos.get("suppressClipboardApi")&&!this.navigatorApiFailed&&navigator.clipboard&&navigator.clipboard.readText?navigator.clipboard.readText().then(this.processClipboardData.bind(this)).catch(e=>{Q.doOnce(()=>{console.warn(e),console.warn(jL("readText"))},"clipboardApiError"),this.navigatorApiFailed=!0,this.pasteFromClipboardLegacy()}):this.pasteFromClipboardLegacy()}pasteFromClipboardLegacy(){let t=!1;const e=i=>{const s=new Date().getTime();s-this.lastPasteOperationTime<50&&(t=!0,i.preventDefault()),this.lastPasteOperationTime=s};this.executeOnTempElement(i=>{i.addEventListener("paste",e),i.focus({preventScroll:!0})},i=>{const s=i.value;t?this.refocusLastFocusedCell():this.processClipboardData(s),i.removeEventListener("paste",e)})}refocusLastFocusedCell(){const t=this.focusService.getFocusedCell();t&&this.focusService.setFocusedCell({rowIndex:t.rowIndex,column:t.column,rowPinned:t.rowPinned,forceBrowserFocus:!0})}getClipboardDelimiter(){const t=this.gos.get("clipboardDelimiter");return Q.exists(t)?t:"	"}processClipboardData(t){if(t==null)return;let e=or.stringToArray(t,this.getClipboardDelimiter());const i=this.gos.getCallback("processDataFromClipboard");if(i&&(e=i({data:e})),e==null)return;this.gos.get("suppressLastEmptyLineOnPaste")&&this.removeLastLineIfBlank(e);const s=(r,n,o,a)=>{var l;((l=this.rangeService)==null?void 0:l.isMoreThanOneCell())&&!this.hasOnlyOneValueToPaste(e)?this.pasteIntoActiveRange(this.rangeService,e,r,n,a):this.pasteStartingFromFocusedCell(e,r,n,o,a)};this.doPasteOperation(s)}static stringToArray(t,e=","){const i=[],s=n=>n==="\r"||n===`
`;let r=!1;if(t==="")return[[""]];for(let n=0,o=0,a=0;a<t.length;a++){const l=t[a-1],c=t[a],u=t[a+1],d=()=>{i[n]||(i[n]=[]),i[n][o]||(i[n][o]="")};if(d(),c==='"'&&(r?u==='"'?(i[n][o]+='"',a++):r=!1:(l===void 0||l===e||s(l))&&(r=!0)),!r&&c!=='"'){if(c===e){o++,d();continue}else if(s(c)){o=0,n++,d(),c==="\r"&&u===`
`&&a++;continue}}i[n][o]+=c}return i}doPasteOperation(t){const e="clipboard";this.eventService.dispatchEvent({type:K.EVENT_PASTE_START,source:e});let i;if(this.clientSideRowModel){const l=this.gos.get("aggregateOnlyChangedColumns");i=new Ug(l,this.clientSideRowModel.getRootNode())}const s={},r=[],n=this.focusService.getFocusedCell();t(s,r,n,i);const o=[...r];i&&(this.clientSideRowModel.doAggregate(i),i.forEachChangedNodeDepthFirst(l=>{o.push(l)})),this.rowRenderer.refreshCells({rowNodes:o}),this.dispatchFlashCells(s),this.fireRowChanged(r),this.refocusLastFocusedCell();const a={type:K.EVENT_PASTE_END,source:e};this.eventService.dispatchEvent(a)}pasteIntoActiveRange(t,e,i,s,r){const n=this.getRangeSize(t)%e.length!=0;let o=0,a=0;const l=(c,u,d,h)=>{if(h-o>=e.length){if(n)return;o+=a,a=0}const f=e[h-o];s.push(u);const m=this.gos.getCallback("processCellFromClipboard");d.forEach((g,y)=>{if(!g.isCellEditable(u)||g.isSuppressPaste(u))return;y>=f.length&&(y=y%f.length);const v=this.processCell(u,g,f[y],gT,m,!0);u.setDataValue(g,v,fT),r&&r.addParentNode(u.parent,[g]);const{rowIndex:C,rowPinned:b}=c,T=this.cellPositionUtils.createIdFromValues({rowIndex:C,column:g,rowPinned:b});i[T]=!0}),a++};this.iterateActiveRanges(!1,l)}getDisplayedColumnsStartingAt(t){let e=t;const i=[];for(;e!=null;)i.push(e),e=this.columnModel.getDisplayedColAfter(e);return i}pasteStartingFromFocusedCell(t,e,i,s,r){if(!s)return;const n={rowIndex:s.rowIndex,rowPinned:s.rowPinned},o=this.getDisplayedColumnsStartingAt(s.column);this.isPasteSingleValueIntoRange(t)?this.pasteSingleValueIntoRange(t,i,e,r):this.pasteMultipleValues(t,n,i,o,e,HL,r)}isPasteSingleValueIntoRange(t){return this.hasOnlyOneValueToPaste(t)&&this.rangeService!=null&&!this.rangeService.isEmpty()}pasteSingleValueIntoRange(t,e,i,s){const r=t[0][0],n=(o,a,l)=>{e.push(a),l.forEach(c=>this.updateCellValue(a,c,r,i,HL,s))};this.iterateActiveRanges(!1,n)}hasOnlyOneValueToPaste(t){return t.length===1&&t[0].length===1}copyRangeDown(){if(!this.rangeService||this.rangeService.isEmpty())return;const t=[],e=(i,s,r,n)=>{const o=this.gos.getCallback("processCellForClipboard"),a=this.gos.getCallback("processCellFromClipboard"),l=(c,u,d)=>{t.length?(s.push(u),d.forEach((h,p)=>{if(!h.isCellEditable(u)||h.isSuppressPaste(u))return;const f=this.processCell(u,h,t[p],gT,a,!0);u.setDataValue(h,f,fT),n&&n.addParentNode(u.parent,[h]);const{rowIndex:m,rowPinned:g}=c,y=this.cellPositionUtils.createIdFromValues({rowIndex:m,column:h,rowPinned:g});i[y]=!0})):d.forEach(h=>{const p=this.processCell(u,h,this.valueService.getValue(h,u),gT,o,!1,!0);t.push(p)})};this.iterateActiveRanges(!0,l)};this.doPasteOperation(e)}removeLastLineIfBlank(t){const e=Q.last(t);if(e&&e.length===1&&e[0]===""){if(t.length===1)return;Q.removeFromArray(t,e)}}fireRowChanged(t){this.gos.get("editType")==="fullRow"&&t.forEach(e=>{const i={type:K.EVENT_ROW_VALUE_CHANGED,node:e,data:e.data,rowIndex:e.rowIndex,rowPinned:e.rowPinned};this.eventService.dispatchEvent(i)})}pasteMultipleValues(t,e,i,s,r,n,o){let a=e;const l=this.clientSideRowModel!=null&&!this.gos.get("enableGroupEdit")&&!this.gos.get("treeData"),c=()=>{for(;;){if(!a)return null;const u=this.rowPositionUtils.getRowNode(a);if(a=this.cellNavigationService.getRowBelow({rowPinned:a.rowPinned,rowIndex:a.rowIndex}),u==null)return null;if(!(u.detail||u.footer||l&&u.group))return u}};t.forEach(u=>{const d=c();d&&(u.forEach((h,p)=>this.updateCellValue(d,s[p],h,r,n,o)),i.push(d))})}updateCellValue(t,e,i,s,r,n){if(!t||!e||!e.isCellEditable(t)||e.isSuppressPaste(t)||t.group&&e.isValueActive())return;const o=this.processCell(t,e,i,r,this.gos.getCallback("processCellFromClipboard"),!0);t.setDataValue(e,o,fT);const{rowIndex:a,rowPinned:l}=t,c=this.cellPositionUtils.createIdFromValues({rowIndex:a,column:e,rowPinned:l});s[c]=!0,n&&n.addParentNode(t.parent,[e])}copyToClipboard(t={}){this.copyOrCutToClipboard(t)}cutToClipboard(t={},e="api"){if(this.gos.get("suppressCutToClipboard"))return;const i={type:K.EVENT_CUT_START,source:e};this.eventService.dispatchEvent(i),this.copyOrCutToClipboard(t,!0);const s={type:K.EVENT_CUT_END,source:e};this.eventService.dispatchEvent(s)}copyOrCutToClipboard(t,e){let{includeHeaders:i,includeGroupHeaders:s}=t;this.logger.log(`copyToClipboard: includeHeaders = ${i}`),i==null&&(i=this.gos.get("copyHeadersToClipboard")),s==null&&(s=this.gos.get("copyGroupHeadersToClipboard"));const r={includeHeaders:i,includeGroupHeaders:s},n=!this.gos.get("suppressCopyRowsToClipboard");let o=null;this.rangeService&&!this.rangeService.isEmpty()&&!this.shouldSkipSingleCellRange(this.rangeService)?(this.copySelectedRangeToClipboard(r),o=0):n&&!this.selectionService.isEmpty()?(this.copySelectedRowsToClipboard(r),o=1):this.focusService.isAnyCellFocused()&&(this.copyFocusedCellToClipboard(r),o=2),e&&o!==null&&this.clearCellsAfterCopy(o)}clearCellsAfterCopy(t){if(this.eventService.dispatchEvent({type:K.EVENT_KEY_SHORTCUT_CHANGED_CELL_START}),t===0)this.rangeService.clearCellRangeCellValues({cellEventSource:"clipboardService"});else if(t===1)this.clearSelectedRows();else{const e=this.focusService.getFocusedCell();if(e==null)return;const i=this.rowPositionUtils.getRowNode(e);i&&this.clearCellValue(i,e.column)}this.eventService.dispatchEvent({type:K.EVENT_KEY_SHORTCUT_CHANGED_CELL_END})}clearSelectedRows(){const t=this.selectionService.getSelectedNodes(),e=this.columnModel.getAllDisplayedColumns();for(const i of t)for(const s of e)this.clearCellValue(i,s)}clearCellValue(t,e){var i;if(!e.isCellEditable(t))return;const s=(i=this.valueService.parseValue(e,t,"",t.getValueFromValueService(e)))!=null?i:null;t.setDataValue(e,s,"clipboardService")}shouldSkipSingleCellRange(t){return this.gos.get("suppressCopySingleCellRanges")&&!t.isMoreThanOneCell()}iterateActiveRanges(t,e,i){if(!this.rangeService||this.rangeService.isEmpty())return;const s=this.rangeService.getCellRanges();t?this.iterateActiveRange(s[0],e,i,!0):s.forEach((r,n)=>this.iterateActiveRange(r,e,i,n===s.length-1))}iterateActiveRange(t,e,i,s){if(!this.rangeService)return;let r=this.rangeService.getRangeStartRow(t);const n=this.rangeService.getRangeEndRow(t);i&&t.columns&&i(t.columns);let o=0,a=!1;for(;!a&&r!=null;){const l=this.rowPositionUtils.getRowNode(r);a=this.rowPositionUtils.sameRow(r,n),e(r,l,t.columns,o++,a&&s),r=this.cellNavigationService.getRowBelow(r)}}copySelectedRangeToClipboard(t={}){if(!this.rangeService||this.rangeService.isEmpty())return;const e=this.rangeService.areAllRangesAbleToMerge(),{data:i,cellsToFlash:s}=e?this.buildDataFromMergedRanges(this.rangeService,t):this.buildDataFromRanges(this.rangeService,t);this.copyDataToClipboard(i),this.dispatchFlashCells(s)}buildDataFromMergedRanges(t,e){const i=new Set,s=t.getCellRanges(),r=new Map,n=[],o={};s.forEach(u=>{u.columns.forEach(p=>i.add(p));const{rowPositions:d,cellsToFlash:h}=this.getRangeRowPositionsAndCellsToFlash(t,u);d.forEach(p=>{const f=`${p.rowIndex}-${p.rowPinned||"null"}`;r.get(f)||(r.set(f,!0),n.push(p))}),Object.assign(o,h)});const a=this.columnModel.getAllDisplayedColumns(),l=Array.from(i);return l.sort((u,d)=>{const h=a.indexOf(u),p=a.indexOf(d);return h-p}),{data:this.buildExportParams({columns:l,rowPositions:n,includeHeaders:e.includeHeaders,includeGroupHeaders:e.includeGroupHeaders}),cellsToFlash:o}}buildDataFromRanges(t,e){const i=t.getCellRanges(),s=[],r={};return i.forEach(n=>{const{rowPositions:o,cellsToFlash:a}=this.getRangeRowPositionsAndCellsToFlash(t,n);Object.assign(r,a),s.push(this.buildExportParams({columns:n.columns,rowPositions:o,includeHeaders:e.includeHeaders,includeGroupHeaders:e.includeGroupHeaders}))}),{data:s.join(`
`),cellsToFlash:r}}getRangeRowPositionsAndCellsToFlash(t,e){const i=[],s={},r=t.getRangeStartRow(e),n=t.getRangeEndRow(e);let o=r;for(;o&&(i.push(o),e.columns.forEach(a=>{const{rowIndex:l,rowPinned:c}=o,u=this.cellPositionUtils.createIdFromValues({rowIndex:l,column:a,rowPinned:c});s[u]=!0}),!this.rowPositionUtils.sameRow(o,n));)o=this.cellNavigationService.getRowBelow(o);return{rowPositions:i,cellsToFlash:s}}getCellsToFlashFromRowNodes(t){const e=this.columnModel.getAllDisplayedColumns(),i={};for(let s=0;s<t.length;s++){const{rowIndex:r,rowPinned:n}=t[s];if(r!=null)for(let o=0;o<e.length;o++){const a=e[o],l=this.cellPositionUtils.createIdFromValues({rowIndex:r,column:a,rowPinned:n});i[l]=!0}}return i}copyFocusedCellToClipboard(t={}){const e=this.focusService.getFocusedCell();if(e==null)return;const i=this.cellPositionUtils.createId(e),s={rowPinned:e.rowPinned,rowIndex:e.rowIndex},r=e.column,n=this.buildExportParams({columns:[r],rowPositions:[s],includeHeaders:t.includeHeaders,includeGroupHeaders:t.includeGroupHeaders});this.copyDataToClipboard(n),this.dispatchFlashCells({[i]:!0})}copySelectedRowsToClipboard(t={}){const{columnKeys:e,includeHeaders:i,includeGroupHeaders:s}=t,r=this.buildExportParams({columns:e,includeHeaders:i,includeGroupHeaders:s});this.copyDataToClipboard(r);const n=this.selectionService.getSelectedNodes()||[];this.dispatchFlashCells(this.getCellsToFlashFromRowNodes(n))}buildExportParams(t){const{columns:e,rowPositions:i,includeHeaders:s=!1,includeGroupHeaders:r=!1}=t,n={columnKeys:e,rowPositions:i,skipColumnHeaders:!s,skipColumnGroupHeaders:!r,suppressQuotes:!0,columnSeparator:this.getClipboardDelimiter(),onlySelected:!i,processCellCallback:this.gos.getCallback("processCellForClipboard"),processRowGroupCallback:o=>this.processRowGroupCallback(o),processHeaderCallback:this.gos.getCallback("processHeaderForClipboard"),processGroupHeaderCallback:this.gos.getCallback("processGroupHeaderForClipboard")};return this.csvCreator.getDataAsCsv(n,!0)}processRowGroupCallback(t){const{node:e,column:i}=t,s=this.gos.get("treeData"),r=this.gos.get("suppressGroupMaintainValueType");let o=(()=>{var l,c;if(s||r||!i)return e.key;const u=(l=e.groupData)==null?void 0:l[i.getId()];return!u||!e.rowGroupColumn||e.rowGroupColumn.getColDef().useValueFormatterForExport===!1?u:(c=this.valueService.formatValue(e.rowGroupColumn,e,u))!=null?c:u})();if(t.node.footer){let l="";o&&o.length&&(l=` ${o}`),o=`Total${l}`}const a=this.gos.getCallback("processCellForClipboard");if(a){let l=e.rowGroupColumn;return!l&&e.footer&&e.level===-1&&(l=this.columnModel.getRowGroupColumns()[0]),a({value:o,node:e,column:l,type:"clipboard",formatValue:c=>{var u;return(u=this.valueService.formatValue(l,e,c))!=null?u:c},parseValue:c=>this.valueService.parseValue(l,e,c,this.valueService.getValue(l,e))})}return o}dispatchFlashCells(t){window.setTimeout(()=>{const e={type:K.EVENT_FLASH_CELLS,cells:t};this.eventService.dispatchEvent(e)},0)}processCell(t,e,i,s,r,n,o){var a;return r?r({column:e,node:t,value:i,type:s,formatValue:c=>{var u;return(u=this.valueService.formatValue(e,t??null,c))!=null?u:c},parseValue:c=>this.valueService.parseValue(e,t??null,c,this.valueService.getValue(e,t))}):n&&e.getColDef().useValueParserForImport!==!1?this.valueService.parseValue(e,t??null,i,this.valueService.getValue(e,t)):o&&e.getColDef().useValueFormatterForExport!==!1&&(a=this.valueService.formatValue(e,t??null,i))!=null?a:i}copyDataToClipboard(t){const e=this.gos.getCallback("sendToClipboard");if(e){e({data:t});return}if(!this.gos.get("suppressClipboardApi")&&navigator.clipboard){navigator.clipboard.writeText(t).catch(s=>{Q.doOnce(()=>{console.warn(s),console.warn(jL("writeText"))},"clipboardApiError"),this.copyDataToClipboardLegacy(t)});return}this.copyDataToClipboardLegacy(t)}copyDataToClipboardLegacy(t){this.executeOnTempElement(e=>{const i=this.gos.getDocument(),s=this.gos.getActiveDomElement();e.value=t||" ",e.select(),e.focus({preventScroll:!0}),i.execCommand("copy")||console.warn("AG Grid: Browser did not allow document.execCommand('copy'). Ensure api.copySelectedRowsToClipboard() is invoked via a user event, i.e. button click, otherwise the browser will prevent it for security reasons."),s!=null&&s.focus!=null&&s.focus({preventScroll:!0})})}executeOnTempElement(t,e){const i=this.gos.getDocument(),s=i.createElement("textarea");s.style.width="1px",s.style.height="1px",s.style.top=i.documentElement.scrollTop+"px",s.style.left=i.documentElement.scrollLeft+"px",s.style.position="absolute",s.style.opacity="0";const r=this.gridCtrl.getGui();r.appendChild(s);try{t(s)}catch{console.warn("AG Grid: Browser does not support document.execCommand('copy') for clipboard operations")}e?window.setTimeout(()=>{e(s),r.removeChild(s)},100):r.removeChild(s)}getRangeSize(t){const e=t.getCellRanges();let i=0,s=0;return e.length>0&&(i=t.getRangeStartRow(e[0]).rowIndex,s=t.getRangeEndRow(e[0]).rowIndex),i-s+1}};un([W("csvCreator")],or.prototype,"csvCreator",2);un([W("loggerFactory")],or.prototype,"loggerFactory",2);un([W("selectionService")],or.prototype,"selectionService",2);un([W("rowModel")],or.prototype,"rowModel",2);un([W("ctrlsService")],or.prototype,"ctrlsService",2);un([W("valueService")],or.prototype,"valueService",2);un([W("focusService")],or.prototype,"focusService",2);un([W("rowRenderer")],or.prototype,"rowRenderer",2);un([W("columnModel")],or.prototype,"columnModel",2);un([W("cellNavigationService")],or.prototype,"cellNavigationService",2);un([W("cellPositionUtils")],or.prototype,"cellPositionUtils",2);un([W("rowPositionUtils")],or.prototype,"rowPositionUtils",2);un([Vt("rangeService")],or.prototype,"rangeService",2);un([de],or.prototype,"init",1);or=un([Me("clipboardService")],or);var Xse="31.3.4",l9={version:Xse,moduleName:Ut.ClipboardModule,beans:[or],dependantModules:[Qs,Fx]},c9=Object.defineProperty,Zse=Object.defineProperties,Jse=Object.getOwnPropertyDescriptor,Qse=Object.getOwnPropertyDescriptors,UL=Object.getOwnPropertySymbols,ere=Object.prototype.hasOwnProperty,tre=Object.prototype.propertyIsEnumerable,WL=(t,e,i)=>e in t?c9(t,e,{enumerable:!0,configurable:!0,writable:!0,value:i}):t[e]=i,ire=(t,e)=>{for(var i in e||(e={}))ere.call(e,i)&&WL(t,i,e[i]);if(UL)for(var i of UL(e))tre.call(e,i)&&WL(t,i,e[i]);return t},sre=(t,e)=>Zse(t,Qse(e)),Kt=(t,e,i,s)=>{for(var r=s>1?void 0:s?Jse(e,i):e,n=t.length-1,o;n>=0;n--)(o=t[n])&&(r=(s?o(e,i,r):o(r))||r);return s&&r&&c9(e,i,r),r},_g=class extends ye{execute(t){const e=Q.missingOrEmpty(this.columnModel.getValueColumns()),i=!this.gos.getCallback("getGroupRowAgg"),s=t.changedPath&&t.changedPath.isActive();if(e&&i&&s)return;const r=this.createAggDetails(t);this.recursivelyCreateAggData(r)}createAggDetails(t){const e=this.columnModel.isPivotActive(),i=this.columnModel.getValueColumns(),s=e?this.columnModel.getPivotColumns():[];return{alwaysAggregateAtRootLevel:this.gos.get("alwaysAggregateAtRootLevel"),groupIncludeTotalFooter:!!this.gos.getGrandTotalRow(),changedPath:t.changedPath,valueColumns:i,pivotColumns:s,filteredOnly:!this.isSuppressAggFilteredOnly(),userAggFunc:this.gos.getCallback("getGroupRowAgg")}}isSuppressAggFilteredOnly(){return this.gos.getGroupAggFiltering()!==void 0||this.gos.get("suppressAggFilteredOnly")}recursivelyCreateAggData(t){const e=i=>{if(!i.hasChildren()){i.aggData&&i.setAggData(null);return}if(i.level===-1&&!t.groupIncludeTotalFooter){const n=!this.columnModel.isPivotMode();if(!t.alwaysAggregateAtRootLevel&&n){i.setAggData(null);return}}this.aggregateRowNode(i,t)};t.changedPath.forEachChangedNodeDepthFirst(e,!0)}aggregateRowNode(t,e){const i=e.valueColumns.length===0,s=e.pivotColumns.length===0;let r;e.userAggFunc?r=e.userAggFunc({nodes:t.childrenAfterFilter}):i?r=null:s?r=this.aggregateRowNodeUsingValuesOnly(t,e):r=this.aggregateRowNodeUsingValuesAndPivot(t),t.setAggData(r),t.sibling&&t.sibling.setAggData(r)}aggregateRowNodeUsingValuesAndPivot(t){var e,i;const s={},r=(e=this.columnModel.getSecondaryColumns())!=null?e:[];let n=!0;for(let o=0;o<r.length;o++){const a=r[o],l=a.getColDef();if(l.pivotTotalColumnIds!=null){n=!1;continue}const c=(i=l.pivotKeys)!=null?i:[];let u;t.leafGroup?u=this.getValuesFromMappedSet(t.childrenMapped,c,l.pivotValueColumn):u=this.getValuesPivotNonLeaf(t,l.colId),s[l.colId]=this.aggregateValues(u,l.pivotValueColumn.getAggFunc(),l.pivotValueColumn,t,a)}if(!n)for(let o=0;o<r.length;o++){const a=r[o],l=a.getColDef();if(l.pivotTotalColumnIds==null||!l.pivotTotalColumnIds.length)continue;const c=l.pivotTotalColumnIds.map(u=>s[u]);s[l.colId]=this.aggregateValues(c,l.pivotValueColumn.getAggFunc(),l.pivotValueColumn,t,a)}return s}aggregateRowNodeUsingValuesOnly(t,e){const i={},s=e.changedPath.isActive()?e.changedPath.getValueColumnsForNode(t,e.valueColumns):e.valueColumns,r=e.changedPath.isActive()?e.changedPath.getNotValueColumnsForNode(t,e.valueColumns):null,n=this.getValuesNormal(t,s,e.filteredOnly),o=t.aggData;return s.forEach((a,l)=>{i[a.getId()]=this.aggregateValues(n[l],a.getAggFunc(),a,t)}),r&&o&&r.forEach(a=>{i[a.getId()]=o[a.getId()]}),i}getValuesPivotNonLeaf(t,e){return t.childrenAfterFilter.map(i=>i.aggData[e])}getValuesFromMappedSet(t,e,i){let s=t;for(let r=0;r<e.length;r++){const n=e[r];s=s?s[n]:null}return s?s.map(r=>this.valueService.getValue(i,r)):[]}getValuesNormal(t,e,i){const s=[];e.forEach(()=>s.push([]));const r=e.length,n=i?t.childrenAfterFilter:t.childrenAfterGroup,o=n.length;for(let a=0;a<o;a++){const l=n[a];for(let c=0;c<r;c++){const u=e[c],d=this.valueService.getValue(u,l);s[c].push(d)}}return s}aggregateValues(t,e,i,s,r){const n=typeof e=="string"?this.aggFuncService.getAggFunc(e):e;if(typeof n!="function")return console.error(`AG Grid: unrecognised aggregation function ${e}`),null;const o=n,a=this.gos.addGridCommonParams({values:t,column:i,colDef:i?i.getColDef():void 0,pivotResultColumn:r,rowNode:s,data:s?s.data:void 0});return o(a)}};Kt([W("columnModel")],_g.prototype,"columnModel",2);Kt([W("valueService")],_g.prototype,"valueService",2);Kt([W("aggFuncService")],_g.prototype,"aggFuncService",2);_g=Kt([Me("aggregationStage")],_g);var mT=class{constructor(){this.allSets={},this.allParents=[]}removeFromChildrenAfterGroup(t,e){const i=this.getSet(t);i.removeFromChildrenAfterGroup[e.id]=!0}isRemoveFromAllLeafChildren(t,e){return!!this.getSet(t).removeFromAllLeafChildren[e.id]}preventRemoveFromAllLeafChildren(t,e){const i=this.getSet(t);delete i.removeFromAllLeafChildren[e.id]}removeFromAllLeafChildren(t,e){const i=this.getSet(t);i.removeFromAllLeafChildren[e.id]=!0}getSet(t){return this.allSets[t.id]||(this.allSets[t.id]={removeFromAllLeafChildren:{},removeFromChildrenAfterGroup:{}},this.allParents.push(t)),this.allSets[t.id]}getAllParents(){return this.allParents}flush(){this.allParents.forEach(t=>{const e=this.allSets[t.id];t.childrenAfterGroup=t.childrenAfterGroup.filter(i=>!e.removeFromChildrenAfterGroup[i.id]),t.allLeafChildren=t.allLeafChildren.filter(i=>!e.removeFromAllLeafChildren[i.id]),t.updateHasChildren(),t.sibling&&(t.sibling.childrenAfterGroup=t.childrenAfterGroup,t.sibling.allLeafChildren=t.allLeafChildren)}),this.allSets={},this.allParents.length=0}},Uu=class extends ye{execute(t){const e=this.createGroupingDetails(t);if(e.transactions)this.handleTransaction(e);else{const i=t.afterColumnsChanged===!0;this.shotgunResetEverything(e,i)}e.usingTreeData||(this.positionLeafsAndGroups(t.changedPath),this.orderGroups(e)),this.selectableService.updateSelectableAfterGrouping()}positionLeafsAndGroups(t){t.forEachChangedNodeDepthFirst(e=>{if(e.childrenAfterGroup){const i=[],s=[];let r;e.childrenAfterGroup.forEach(n=>{var o;(o=n.childrenAfterGroup)!=null&&o.length?n.key===""&&!r?r=n:s.push(n):i.push(n)}),r&&s.push(r),e.childrenAfterGroup=[...i,...s]}},!1)}createGroupingDetails(t){var e;const{rowNode:i,changedPath:s,rowNodeTransactions:r,rowNodeOrder:n}=t,o=this.gos.get("treeData"),a=o?null:this.columnModel.getRowGroupColumns();return{includeParents:!this.gos.get("suppressParentsInRowNodes"),expandByDefault:this.gos.get("groupDefaultExpanded"),groupedCols:a,rootNode:i,pivotMode:this.columnModel.isPivotMode(),groupedColCount:o||!a?0:a.length,rowNodeOrder:n,transactions:r,changedPath:s,groupAllowUnbalanced:this.gos.get("groupAllowUnbalanced"),isGroupOpenByDefault:this.gos.getCallback("isGroupOpenByDefault"),initialGroupOrderComparator:this.gos.getCallback("initialGroupOrderComparator"),usingTreeData:o,suppressGroupMaintainValueType:this.gos.get("suppressGroupMaintainValueType"),getDataPath:o?this.gos.get("getDataPath"):void 0,keyCreators:(e=a==null?void 0:a.map(c=>c.getColDef().keyCreator))!=null?e:[]}}handleTransaction(t){t.transactions.forEach(e=>{const i=t.usingTreeData?void 0:new mT;if(Q.existsAndNotEmpty(e.remove)&&this.removeNodes(e.remove,t,i),Q.existsAndNotEmpty(e.update)&&this.moveNodesInWrongPath(e.update,t,i),Q.existsAndNotEmpty(e.add)&&this.insertNodes(e.add,t,!1),i){const s=i.getAllParents().slice();i.flush(),this.removeEmptyGroups(s,t)}}),t.rowNodeOrder&&this.sortChildren(t)}sortChildren(t){t.changedPath.forEachChangedNodeDepthFirst(e=>{if(!e.childrenAfterGroup)return;Q.sortRowNodesByOrder(e.childrenAfterGroup,t.rowNodeOrder)&&t.changedPath.addParentNode(e)},!1,!0)}orderGroups(t){const e=t.initialGroupOrderComparator;Q.exists(e)&&i(t.rootNode);function i(s){Q.exists(s.childrenAfterGroup)&&!s.leafGroup&&(s.childrenAfterGroup.sort((n,o)=>e({nodeA:n,nodeB:o})),s.childrenAfterGroup.forEach(n=>i(n)))}}getExistingPathForNode(t,e){const i=[];let s=e.usingTreeData?t:t.parent;for(;s&&s!==e.rootNode;)i.push({key:s.key,rowGroupColumn:s.rowGroupColumn,field:s.field}),s=s.parent;return i.reverse(),i}moveNodesInWrongPath(t,e,i){t.forEach(s=>{e.changedPath.isActive()&&e.changedPath.addParentNode(s.parent);const r=l=>l.key,n=this.getExistingPathForNode(s,e).map(r),o=this.getGroupInfo(s,e).map(r);Q.areEqual(n,o)||this.moveNode(s,e,i)})}moveNode(t,e,i){if(this.removeNodesInStages([t],e,i),this.insertOneNode(t,e,!0,i),t.setData(t.data),e.changedPath.isActive()){const s=t.parent;e.changedPath.addParentNode(s)}}removeNodes(t,e,i){this.removeNodesInStages(t,e,i),e.changedPath.isActive()&&t.forEach(s=>e.changedPath.addParentNode(s.parent))}removeNodesInStages(t,e,i){if(this.removeNodesFromParents(t,e,i),e.usingTreeData){this.postRemoveCreateFillerNodes(t,e);const s=t.map(r=>r.parent);this.removeEmptyGroups(s,e)}}forEachParentGroup(t,e,i){let s=e;for(;s&&s!==t.rootNode;)i(s),s=s.parent}removeNodesFromParents(t,e,i){const s=i==null,r=i||new mT;t.forEach(n=>{this.removeFromParent(n,r),this.forEachParentGroup(e,n.parent,o=>{r.removeFromAllLeafChildren(o,n)})}),s&&r.flush()}postRemoveCreateFillerNodes(t,e){t.forEach(i=>{if(i.hasChildren()){const r=this.getExistingPathForNode(i,e),n=this.findParentForNode(i,r,e);n.expanded=i.expanded,n.allLeafChildren=i.allLeafChildren,n.childrenAfterGroup=i.childrenAfterGroup,n.childrenMapped=i.childrenMapped,n.updateHasChildren(),n.childrenAfterGroup.forEach(o=>o.parent=n)}})}removeEmptyGroups(t,e){let i=!0;const s=r=>{const n=this.getChildrenMappedKey(r.key,r.rowGroupColumn),o=r.parent;return(o&&o.childrenMapped?!o.childrenMapped[n]:!0)?!1:!!r.isEmptyRowGroupNode()};for(;i;){i=!1;const r=new mT;t.forEach(n=>{this.forEachParentGroup(e,n,o=>{s(o)&&(i=!0,this.removeFromParent(o,r),o.setSelectedParams({newValue:!1,source:"rowGroupChanged"}))})}),r.flush()}}removeFromParent(t,e){t.parent&&(e?e.removeFromChildrenAfterGroup(t.parent,t):(Q.removeFromArray(t.parent.childrenAfterGroup,t),t.parent.updateHasChildren()));const i=this.getChildrenMappedKey(t.key,t.rowGroupColumn);t.parent&&t.parent.childrenMapped&&(t.parent.childrenMapped[i]=void 0),t.setRowTop(null),t.setRowIndex(null)}addToParent(t,e){const i=this.getChildrenMappedKey(t.key,t.rowGroupColumn);e&&(e.childrenMapped!=null&&(e.childrenMapped[i]=t),e.childrenAfterGroup.push(t),e.updateHasChildren())}areGroupColsEqual(t,e){return t==null||e==null||t.pivotMode!==e.pivotMode?!1:Q.areEqual(t.groupedCols,e.groupedCols)&&Q.areEqual(t.keyCreators,e.keyCreators)}checkAllGroupDataAfterColsChanged(t){const e=i=>{i&&i.forEach(s=>{if(!t.usingTreeData&&!s.group)return;const n={field:s.field,key:s.key,rowGroupColumn:s.rowGroupColumn,leafNode:s.allLeafChildren[0]};this.setGroupData(s,n,t),e(s.childrenAfterGroup)})};e(t.rootNode.childrenAfterGroup)}shotgunResetEverything(t,e){if(this.noChangeInGroupingColumns(t,e))return;this.selectionService.filterFromSelection(n=>n&&!n.group);const{rootNode:i,groupedCols:s}=t;i.leafGroup=t.usingTreeData?!1:s.length===0,i.childrenAfterGroup=[],i.childrenMapped={},i.updateHasChildren();const r=i.sibling;r&&(r.childrenAfterGroup=i.childrenAfterGroup,r.childrenMapped=i.childrenMapped),this.insertNodes(i.allLeafChildren,t,!1)}noChangeInGroupingColumns(t,e){let i=!1;const s=this.columnModel.getGroupDisplayColumns(),r=s?s.map(n=>n.getId()).join("-"):"";return e&&(i=t.usingTreeData||this.areGroupColsEqual(t,this.oldGroupingDetails),this.oldGroupDisplayColIds!==r&&this.checkAllGroupDataAfterColsChanged(t)),this.oldGroupingDetails=t,this.oldGroupDisplayColIds=r,i}insertNodes(t,e,i){t.forEach(s=>{this.insertOneNode(s,e,i),e.changedPath.isActive()&&e.changedPath.addParentNode(s.parent)})}insertOneNode(t,e,i,s){const r=this.getGroupInfo(t,e),n=this.findParentForNode(t,r,e,s);n.group||console.warn("AG Grid: duplicate group keys for row data, keys should be unique",[n.data,t.data]),e.usingTreeData?this.swapGroupWithUserNode(n,t,i):(t.parent=n,t.level=r.length,n.childrenAfterGroup.push(t),n.updateHasChildren())}findParentForNode(t,e,i,s){let r=i.rootNode;return e.forEach((n,o)=>{r=this.getOrCreateNextNode(r,n,o,i),s!=null&&s.isRemoveFromAllLeafChildren(r,t)?s==null||s.preventRemoveFromAllLeafChildren(r,t):r.allLeafChildren.push(t)}),r}swapGroupWithUserNode(t,e,i){e.parent=t.parent,e.key=t.key,e.field=t.field,e.groupData=t.groupData,e.level=t.level,i||(e.expanded=t.expanded),e.leafGroup=t.leafGroup,e.rowGroupIndex=t.rowGroupIndex,e.allLeafChildren=t.allLeafChildren,e.childrenAfterGroup=t.childrenAfterGroup,e.childrenMapped=t.childrenMapped,e.sibling=t.sibling,e.updateHasChildren(),this.removeFromParent(t),e.childrenAfterGroup.forEach(s=>s.parent=e),this.addToParent(e,t.parent)}getOrCreateNextNode(t,e,i,s){const r=this.getChildrenMappedKey(e.key,e.rowGroupColumn);let n=t.childrenMapped?t.childrenMapped[r]:void 0;return n||(n=this.createGroup(e,t,i,s),this.addToParent(n,t)),n}createGroup(t,e,i,s){const r=new Tt(this.beans);return r.group=!0,r.field=t.field,r.rowGroupColumn=t.rowGroupColumn,this.setGroupData(r,t,s),r.key=t.key,r.id=this.createGroupId(r,e,s.usingTreeData,i),r.level=i,r.leafGroup=s.usingTreeData?!1:i===s.groupedColCount-1,r.allLeafChildren=[],r.setAllChildrenCount(0),r.rowGroupIndex=s.usingTreeData?null:i,r.childrenAfterGroup=[],r.childrenMapped={},r.updateHasChildren(),r.parent=s.includeParents?e:null,this.setExpandedInitialValue(s,r),r}createGroupId(t,e,i,s){let r;return i?r=(n,o,a)=>{if(a<0)return null;const l=o?r(o,o.parent,a-1):null;return`${l==null?"":l+"-"}${a}-${n.key}`}:r=(n,o)=>{if(!n.rowGroupColumn)return null;const a=o?r(o,o.parent,0):null;return`${a==null?"":a+"-"}${n.rowGroupColumn.getColId()}-${n.key}`},Tt.ID_PREFIX_ROW_GROUP+r(t,e,s)}setGroupData(t,e,i){t.groupData={},this.columnModel.getGroupDisplayColumns().forEach(r=>{if(i.usingTreeData){t.groupData[r.getColId()]=e.key;return}const o=t.rowGroupColumn;o!==null&&r.isRowGroupDisplayed(o.getId())&&(i.suppressGroupMaintainValueType?t.groupData[r.getColId()]=e.key:t.groupData[r.getColId()]=this.valueService.getValue(o,e.leafNode))})}getChildrenMappedKey(t,e){return e?e.getId()+"-"+t:t}setExpandedInitialValue(t,e){if(t.pivotMode&&e.leafGroup){e.expanded=!1;return}const i=t.isGroupOpenByDefault;if(i){const r={rowNode:e,field:e.field,key:e.key,level:e.level,rowGroupColumn:e.rowGroupColumn};e.expanded=i(r)==!0;return}const{expandByDefault:s}=t;if(t.expandByDefault===-1){e.expanded=!0;return}e.expanded=e.level<s}getGroupInfo(t,e){return e.usingTreeData?this.getGroupInfoFromCallback(t,e):this.getGroupInfoFromGroupColumns(t,e)}getGroupInfoFromCallback(t,e){const i=e.getDataPath?e.getDataPath(t.data):null;(i==null||i.length===0)&&Q.warnOnce(`getDataPath() should not return an empty path for data ${t.data}`);const s=r=>({key:r,field:null,rowGroupColumn:null});return i?i.map(s):[]}getGroupInfoFromGroupColumns(t,e){const i=[];return e.groupedCols.forEach(s=>{let r=this.valueService.getKeyForNode(s,t),n=r!=null&&r!=="";if((e.pivotMode||!e.groupAllowUnbalanced)&&!n&&(r="",n=!0),n){const a={key:r,field:s.getColDef().field,rowGroupColumn:s,leafNode:t};i.push(a)}}),i}};Kt([W("columnModel")],Uu.prototype,"columnModel",2);Kt([W("selectableService")],Uu.prototype,"selectableService",2);Kt([W("valueService")],Uu.prototype,"valueService",2);Kt([W("beans")],Uu.prototype,"beans",2);Kt([W("selectionService")],Uu.prototype,"selectionService",2);Uu=Kt([Me("groupStage")],Uu);var Wu=class extends ye{init(){const t=()=>{var i;return(i=this.gos.get("serverSidePivotResultFieldSeparator"))!=null?i:"_"};this.fieldSeparator=t(),this.addManagedPropertyListener("serverSidePivotResultFieldSeparator",()=>{this.fieldSeparator=t()});const e=()=>this.gos.get("pivotDefaultExpanded");this.pivotDefaultExpanded=e(),this.addManagedPropertyListener("pivotDefaultExpanded",()=>{this.pivotDefaultExpanded=e()})}createPivotColumnDefs(t){const e=this.createPivotColumnsFromUniqueValues(t);function i(n,o=[]){return n.forEach(a=>{a.children!==void 0?i(a.children,o):o.push(a)}),o}const s=i(e);this.addRowGroupTotals(e,s),this.addExpandablePivotGroups(e,s),this.addPivotTotalsToGroups(e,s);const r=s.map(n=>Q.cloneObject(n));return{pivotColumnGroupDefs:e,pivotColumnDefs:r}}createPivotColumnsFromUniqueValues(t){const e=this.columnModel.getPivotColumns(),i=e.length;return this.recursivelyBuildGroup(0,t,[],i,e)}recursivelyBuildGroup(t,e,i,s,r){const n=this.columnModel.getValueColumns();if(t>=s)return this.buildMeasureCols(i);const o=r[t].getColDef(),a=this.headerNameComparator.bind(this,o.pivotComparator);if(n.length===1&&this.gos.get("removePivotHeaderRowWhenSingleValueColumn")&&t===s-1){const c=[];return Q.iterateObject(e,u=>{const d=[...i,u],h=this.createColDef(n[0],u,d);h.columnGroupShow="open",c.push(h)}),c.sort(a),c}const l=[];return Q.iterateObject(e,(c,u)=>{const d=this.pivotDefaultExpanded===-1||t<this.pivotDefaultExpanded,h=[...i,c];l.push({children:this.recursivelyBuildGroup(t+1,u,h,s,r),headerName:c,pivotKeys:h,columnGroupShow:"open",openByDefault:d,groupId:this.generateColumnGroupId(h)})}),l.sort(a),l}buildMeasureCols(t){const e=this.columnModel.getValueColumns();return e.length===0?[this.createColDef(null,"-",t)]:e.map(i=>{const s=this.columnModel.getDisplayNameForColumn(i,"header");return sre(ire({},this.createColDef(i,s,t)),{columnGroupShow:"open"})})}addExpandablePivotGroups(t,e){if(this.gos.get("suppressExpandablePivotGroups")||this.gos.get("pivotColumnGroupTotals"))return;const i=(s,r,n)=>{const o=s;if(o.children){const a=new Map;o.children.forEach(c=>{i(c,r,a)});const l=!o.children.some(c=>c.children);this.columnModel.getValueColumns().forEach(c=>{const u=this.columnModel.getDisplayNameForColumn(c,"header"),d=this.createColDef(c,u,s.pivotKeys);d.pivotTotalColumnIds=a.get(c.getColId()),d.columnGroupShow="closed",d.aggFunc=c.getAggFunc(),l||(s.children.push(d),r.push(d))}),this.merge(n,a)}else{const a=s;if(!a.pivotValueColumn)return;const l=a.pivotValueColumn.getColId(),c=n.has(l)?n.get(l):[];c.push(a.colId),n.set(l,c)}};t.forEach(s=>{i(s,e,new Map)})}addPivotTotalsToGroups(t,e){if(!this.gos.get("pivotColumnGroupTotals"))return;const i=this.gos.get("pivotColumnGroupTotals")==="after",s=this.columnModel.getValueColumns(),r=s.map(o=>o.getAggFunc());if(!r||r.length<1||!this.sameAggFuncs(r))return;const n=s[0];t.forEach(o=>{this.recursivelyAddPivotTotal(o,e,n,i)})}recursivelyAddPivotTotal(t,e,i,s){const r=t;if(!r.children){const o=t;return o.colId?[o.colId]:null}let n=[];if(r.children.forEach(o=>{const a=this.recursivelyAddPivotTotal(o,e,i,s);a&&(n=n.concat(a))}),r.children.length>1){const a=this.localeService.getLocaleTextFunc()("pivotColumnGroupTotals","Total"),l=this.createColDef(i,a,t.pivotKeys,!0);l.pivotTotalColumnIds=n,l.aggFunc=i.getAggFunc();const c=t.children;s?c.push(l):c.unshift(l),e.push(l)}return n}addRowGroupTotals(t,e){if(!this.gos.get("pivotRowTotals"))return;const i=this.gos.get("pivotRowTotals")==="after",s=this.columnModel.getValueColumns(),r=i?s.slice():s.slice().reverse();for(let n=0;n<r.length;n++){const o=r[n];let a=[];t.forEach(c=>{a=a.concat(this.extractColIdsForValueColumn(c,o))});const l=r.length>1||!this.gos.get("removePivotHeaderRowWhenSingleValueColumn");this.createRowGroupTotal(t,e,o,a,i,l)}}extractColIdsForValueColumn(t,e){const i=t;if(!i.children){const r=i;return r.pivotValueColumn===e&&r.colId?[r.colId]:[]}let s=[];return i.children.forEach(r=>{this.extractColIdsForValueColumn(r,e);const n=this.extractColIdsForValueColumn(r,e);s=s.concat(n)}),s}createRowGroupTotal(t,e,i,s,r,n){const o=this.columnModel.getValueColumns();let a;if(o.length===0)a=this.createColDef(null,"-",[]);else{const c=this.columnModel.getDisplayNameForColumn(i,"header");a=this.createColDef(i,c,[]),a.pivotTotalColumnIds=s}a.colId=Wu.PIVOT_ROW_TOTAL_PREFIX+a.colId,e.push(a);const l=n?{children:[a],pivotKeys:[],groupId:`${Wu.PIVOT_ROW_TOTAL_PREFIX}_pivotGroup_${i.getColId()}`}:a;r?t.push(l):t.unshift(l)}createColDef(t,e,i,s=!1){const r={};if(t){const n=t.getColDef();Object.assign(r,n),r.hide=!1}return r.headerName=e,r.colId=this.generateColumnId(i||[],t&&!s?t.getColId():""),r.field=r.colId,r.valueGetter=n=>{var o;return(o=n.data)==null?void 0:o[n.colDef.field]},r.pivotKeys=i,r.pivotValueColumn=t,r.filter===!0&&(r.filter="agNumberColumnFilter"),r}sameAggFuncs(t){if(t.length==1)return!0;for(let e=1;e<t.length;e++)if(t[e]!==t[0])return!1;return!0}headerNameComparator(t,e,i){return t?t(e.headerName,i.headerName):e.headerName&&!i.headerName?1:!e.headerName&&i.headerName?-1:!e.headerName||!i.headerName?0:e.headerName<i.headerName?-1:e.headerName>i.headerName?1:0}merge(t,e){e.forEach((i,s,r)=>{const o=[...t.has(s)?t.get(s):[],...i];t.set(s,o)})}generateColumnGroupId(t){return`pivotGroup_${this.columnModel.getPivotColumns().map(i=>i.getColId()).join("-")}_${t.join("-")}`}generateColumnId(t,e){return`pivot_${this.columnModel.getPivotColumns().map(s=>s.getColId()).join("-")}_${t.join("-")}_${e}`}createColDefsFromFields(t){const e={};for(let r=0;r<t.length;r++){const o=t[r].split(this.fieldSeparator);let a=e;for(let l=0;l<o.length;l++){const c=o[l];a[c]==null&&(a[c]={}),a=a[c]}}const i=(r,n,o,a)=>{var l;const c=[];for(let h in o){const p=o[h],f=i(`${r}${this.fieldSeparator}${h}`,h,p,a+1);c.push(f)}if(c.length===0){const h=this.columnModel.getPrimaryColumn(n);if(h){const f=(l=this.columnModel.getDisplayNameForColumn(h,"header"))!=null?l:n,m=this.createColDef(h,f,void 0,!1);return m.colId=r,m.aggFunc=h.getAggFunc(),m.valueGetter=g=>{var y;return(y=g.data)==null?void 0:y[r]},m}return{colId:r,headerName:n,valueGetter:f=>{var m;return(m=f.data)==null?void 0:m[r]}}}return this.gos.get("removePivotHeaderRowWhenSingleValueColumn")&&c.length===1&&"colId"in c[0]?(c[0].headerName=n,c[0]):{openByDefault:this.pivotDefaultExpanded===-1||a<this.pivotDefaultExpanded,groupId:r,headerName:n,children:c}},s=[];for(let r in e){const n=e[r],o=i(r,r,n,0);s.push(o)}return s}};Wu.PIVOT_ROW_TOTAL_PREFIX="PivotRowTotal_";Kt([W("columnModel")],Wu.prototype,"columnModel",2);Kt([de],Wu.prototype,"init",1);Wu=Kt([Me("pivotColDefService")],Wu);var mc=class extends ye{constructor(){super(...arguments),this.uniqueValues={},this.lastTimeFailed=!1,this.maxUniqueValues=-1,this.currentUniqueCount=0}execute(t){const e=t.changedPath;this.columnModel.isPivotActive()?this.executePivotOn(e):this.executePivotOff(e)}executePivotOff(t){this.aggregationColumnsHashLastTime=null,this.uniqueValues={},this.columnModel.isSecondaryColumnsPresent()&&(this.columnModel.setSecondaryColumns(null,"rowModelUpdated"),t&&t.setInactive())}executePivotOn(t){var e;const i=(e=this.columnModel.getValueColumns().length)!=null?e:1,s=this.gos.get("pivotMaxGeneratedColumns");this.maxUniqueValues=s===-1?-1:s/i;let r;try{r=this.bucketUpRowNodes(t)}catch(v){if(v.message===mc.EXCEEDED_MAX_UNIQUE_VALUES){this.columnModel.setSecondaryColumns([],"rowModelUpdated");const C={type:K.EVENT_PIVOT_MAX_COLUMNS_EXCEEDED,message:v.message};this.eventService.dispatchEvent(C),this.lastTimeFailed=!0;return}throw v}const n=this.setUniqueValues(r),o=this.columnModel.getValueColumns(),a=o.map(v=>`${v.getId()}-${v.getColDef().headerName}`).join("#"),l=o.map(v=>v.getAggFunc().toString()).join("#"),c=this.aggregationColumnsHashLastTime!==a,u=this.aggregationFuncsHashLastTime!==l;this.aggregationColumnsHashLastTime=a,this.aggregationFuncsHashLastTime=l;const d=this.columnModel.getRowGroupColumns().map(v=>v.getId()).join("#"),h=d!==this.groupColumnsHashLastTime;this.groupColumnsHashLastTime=d;const p=this.gos.get("pivotRowTotals"),f=this.gos.get("pivotColumnGroupTotals"),m=this.gos.get("suppressExpandablePivotGroups"),g=this.gos.get("removePivotHeaderRowWhenSingleValueColumn"),y=p!==this.pivotRowTotalsLastTime||f!==this.pivotColumnGroupTotalsLastTime||m!==this.suppressExpandablePivotGroupsLastTime||g!==this.removePivotHeaderRowWhenSingleValueColumnLastTime;if(this.pivotRowTotalsLastTime=p,this.pivotColumnGroupTotalsLastTime=f,this.suppressExpandablePivotGroupsLastTime=m,this.removePivotHeaderRowWhenSingleValueColumnLastTime=g,this.lastTimeFailed||n||c||h||u||y){const{pivotColumnGroupDefs:v,pivotColumnDefs:C}=this.pivotColDefService.createPivotColumnDefs(this.uniqueValues);this.pivotColumnDefs=C,this.columnModel.setSecondaryColumns(v,"rowModelUpdated"),t&&t.setInactive()}this.lastTimeFailed=!1}setUniqueValues(t){const e=JSON.stringify(t),i=JSON.stringify(this.uniqueValues);return e!==i?(this.uniqueValues=t,!0):!1}bucketUpRowNodes(t){this.currentUniqueCount=0;const e={};t.forEachChangedNodeDepthFirst(s=>{s.leafGroup&&(s.childrenMapped=null)});const i=s=>{var r;s.leafGroup?this.bucketRowNode(s,e):(r=s.childrenAfterFilter)==null||r.forEach(i)};return t.executeFromRootNode(i),e}bucketRowNode(t,e){const i=this.columnModel.getPivotColumns();i.length===0?t.childrenMapped=null:t.childrenMapped=this.bucketChildren(t.childrenAfterFilter,i,0,e),t.sibling&&(t.sibling.childrenMapped=t.childrenMapped)}bucketChildren(t,e,i,s){const r={},n=e[i];if(t.forEach(o=>{let a=this.valueService.getKeyForNode(n,o);if(Q.missing(a)&&(a=""),!s[a]){this.currentUniqueCount+=1,s[a]={};const l=this.maxUniqueValues!==-1,c=this.currentUniqueCount>this.maxUniqueValues;if(l&&c)throw Error(mc.EXCEEDED_MAX_UNIQUE_VALUES)}r[a]||(r[a]=[]),r[a].push(o)}),i===e.length-1)return r;{const o={};return Q.iterateObject(r,(a,l)=>{o[a]=this.bucketChildren(l,e,i+1,s[a])}),o}}getPivotColumnDefs(){return this.pivotColumnDefs}};mc.EXCEEDED_MAX_UNIQUE_VALUES="Exceeded maximum allowed pivot column count.";Kt([W("valueService")],mc.prototype,"valueService",2);Kt([W("columnModel")],mc.prototype,"columnModel",2);Kt([W("pivotColDefService")],mc.prototype,"pivotColDefService",2);mc=Kt([Me("pivotStage")],mc);var rre={sum:"Sum",first:"First",last:"Last",min:"Min",max:"Max",count:"Count",avg:"Average"},Ps=class extends ye{constructor(){super(...arguments),this.aggFuncsMap={},this.initialised=!1}init(){this.initialised||(this.initialiseWithDefaultAggregations(),this.addAggFuncs(this.gos.get("aggFuncs")))}initialiseWithDefaultAggregations(){this.aggFuncsMap[Ps.AGG_SUM]=nre,this.aggFuncsMap[Ps.AGG_FIRST]=ore,this.aggFuncsMap[Ps.AGG_LAST]=are,this.aggFuncsMap[Ps.AGG_MIN]=lre,this.aggFuncsMap[Ps.AGG_MAX]=cre,this.aggFuncsMap[Ps.AGG_COUNT]=ure,this.aggFuncsMap[Ps.AGG_AVG]=dre,this.initialised=!0}isAggFuncPossible(t,e){const i=this.getFuncNames(t),s=Q.includes(i,e),r=Q.exists(this.aggFuncsMap[e]);return s&&r}getDefaultFuncLabel(t){var e;return(e=rre[t])!=null?e:t}getDefaultAggFunc(t){const e=t.getColDef().defaultAggFunc;if(Q.exists(e)&&this.isAggFuncPossible(t,e))return e;if(this.isAggFuncPossible(t,Ps.AGG_SUM))return Ps.AGG_SUM;const i=this.getFuncNames(t);return Q.existsAndNotEmpty(i)?i[0]:null}addAggFuncs(t){this.init(),Q.iterateObject(t,(e,i)=>{this.aggFuncsMap[e]=i})}getAggFunc(t){return this.init(),this.aggFuncsMap[t]}getFuncNames(t){const e=t.getColDef().allowedAggFuncs;return e??Object.keys(this.aggFuncsMap).sort()}clear(){this.aggFuncsMap={}}};Ps.AGG_SUM="sum";Ps.AGG_FIRST="first";Ps.AGG_LAST="last";Ps.AGG_MIN="min";Ps.AGG_MAX="max";Ps.AGG_COUNT="count";Ps.AGG_AVG="avg";Kt([de],Ps.prototype,"init",1);Ps=Kt([Me("aggFuncService")],Ps);function nre(t){const{values:e}=t;let i=null;for(let s=0;s<e.length;s++){const r=e[s];typeof r=="number"?i===null?i=r:i+=typeof i=="number"?r:BigInt(r):typeof r=="bigint"&&(i===null?i=r:i=(typeof i=="bigint"?i:BigInt(i))+r)}return i}function ore(t){return t.values.length>0?t.values[0]:null}function are(t){return t.values.length>0?Q.last(t.values):null}function lre(t){const{values:e}=t;let i=null;for(let s=0;s<e.length;s++){const r=e[s];(typeof r=="number"||typeof r=="bigint")&&(i===null||i>r)&&(i=r)}return i}function cre(t){const{values:e}=t;let i=null;for(let s=0;s<e.length;s++){const r=e[s];(typeof r=="number"||typeof r=="bigint")&&(i===null||i<r)&&(i=r)}return i}function ure(t){var e,i;const{values:s}=t;let r=0;for(let o=0;o<s.length;o++){const a=s[o];r+=a!=null&&typeof a.value=="number"?a.value:1}const n=(i=(e=t.rowNode)==null?void 0:e.aggData)==null?void 0:i[t.column.getColId()];return n&&n.value===r?n:{value:r,toString:function(){return this.value.toString()},toNumber:function(){return this.value}}}function dre(t){var e,i,s;const{values:r}=t;let n=0,o=0;for(let c=0;c<r.length;c++){const u=r[c];let d=null;typeof u=="number"||typeof u=="bigint"?(d=u,o++):u!=null&&(typeof u.value=="number"||typeof u.value=="bigint")&&typeof u.count=="number"&&(d=u.value*(typeof u.value=="number"?u.count:BigInt(u.count)),o+=u.count),typeof d=="number"?n+=typeof n=="number"?d:BigInt(d):typeof d=="bigint"&&(n=(typeof n=="bigint"?n:BigInt(n))+d)}let a=null;o>0&&(a=n/(typeof n=="number"?o:BigInt(o)));const l=(s=(e=t.rowNode)==null?void 0:e.aggData)==null?void 0:s[(i=t.column)==null?void 0:i.getColId()];return l&&l.count===o&&l.value===a?l:{count:o,value:a,toString:function(){return typeof this.value=="number"||typeof this.value=="bigint"?this.value.toString():""},toNumber:function(){return this.value}}}var bm=class extends Px{constructor(t,e,i,s,r){super(e,i,r,`
                <span role="option">
                    <span ref="eDragHandle" class="ag-drag-handle ag-column-drop-cell-drag-handle" role="presentation"></span>
                    <span ref="eText" class="ag-column-drop-cell-text" aria-hidden="true"></span>
                    <ag-sort-indicator ref="eSortIndicator"></ag-sort-indicator>
                    <span ref="eButton" class="ag-column-drop-cell-button" role="presentation"></span>
                </span>
            `),this.column=t,this.dropZonePurpose=s,this.popupShowing=!1}init(){this.displayName=this.columnModel.getDisplayNameForColumn(this.column,"columnDrop"),super.init(),this.setupSort(),this.addManagedListener(this.eventService,Nt.EVENT_SORT_CHANGED,()=>{this.setupAria()}),this.isGroupingZone()&&this.addManagedPropertyListener("groupLockGroupColumns",()=>{this.refreshRemove(),this.refreshDraggable(),this.setupAria()})}getItem(){return this.column}getDisplayName(){return this.displayName}getTooltip(){return this.column.getColDef().headerTooltip}addAdditionalAriaInstructions(t,e){const i=this.gos.get("rowGroupPanelSuppressSort"),s=this.gos.get("functionsReadOnly");if(this.isAggregationZone()&&!s){const r=e("ariaDropZoneColumnValueItemDescription","Press ENTER to change the aggregation type");t.push(r)}if(this.isGroupingZone()&&this.column.isSortable()&&!i){const r=e("ariaDropZoneColumnGroupItemDescription","Press ENTER to sort");t.push(r)}super.addAdditionalAriaInstructions(t,e)}isDraggable(){return this.isReadOnly()}isRemovable(){return this.isReadOnly()}isReadOnly(){return!this.isGroupingAndLocked()&&!this.gos.get("functionsReadOnly")}getAriaDisplayName(){const t=this.localeService.getLocaleTextFunc(),{name:e,aggFuncName:i}=this.getColumnAndAggFuncName(),s=t("ariaDropZoneColumnComponentAggFuncSeparator"," of "),r={asc:t("ariaDropZoneColumnComponentSortAscending","ascending"),desc:t("ariaDropZoneColumnComponentSortDescending","descending")},n=this.column.getSort(),o=this.gos.get("rowGroupPanelSuppressSort");return[i&&`${i}${s}`,e,this.isGroupingZone()&&!o&&n&&`, ${r[n]}`].filter(a=>!!a).join("")}getColumnAndAggFuncName(){const t=this.displayName;let e="";if(this.isAggregationZone()){const i=this.column.getAggFunc(),s=typeof i=="string"?i:"agg";e=this.localeService.getLocaleTextFunc()(s,s)}return{name:t,aggFuncName:e}}setupSort(){const t=this.column.isSortable(),e=this.isGroupingZone();if(!(!t||!e)&&!this.gos.get("rowGroupPanelSuppressSort")){this.eSortIndicator.setupSort(this.column,!0);const i=s=>{s.preventDefault();const n=this.gos.get("multiSortKey")==="ctrl"?s.ctrlKey||s.metaKey:s.shiftKey;this.sortController.progressSort(this.column,n,"uiColumnSorted")};this.addGuiEventListener("click",i),this.addGuiEventListener("keydown",s=>{s.key===ce.ENTER&&this.isGroupingZone()&&i(s)})}}getDefaultIconName(){return st.ICON_HIDE}createGetDragItem(){const{column:t}=this;return()=>{const e={};return e[t.getId()]=t.isVisible(),{columns:[t],visibleState:e}}}setupComponents(){super.setupComponents(),this.isAggregationZone()&&!this.gos.get("functionsReadOnly")&&this.addGuiEventListener("click",this.onShowAggFuncSelection.bind(this))}onKeyDown(t){super.onKeyDown(t),t.key===ce.ENTER&&this.isAggregationZone()&&!this.gos.get("functionsReadOnly")&&(t.preventDefault(),this.onShowAggFuncSelection())}getDisplayValue(){const{name:t,aggFuncName:e}=this.getColumnAndAggFuncName();return this.isAggregationZone()?`${e}(${t})`:t}onShowAggFuncSelection(){if(this.popupShowing)return;this.popupShowing=!0;const t=new tp({cssIdentifier:"select-agg-func"}),e=this.aggFuncService.getFuncNames(this.column),i=this.getGui(),s=t.getGui();t.setModel({getRow:function(u){return e[u]},getRowCount:function(){return e.length}}),this.getContext().createBean(t);const r=Q.loadTemplate('<div class="ag-select-agg-func-popup"></div>');r.style.top="0px",r.style.left="0px",r.appendChild(s),r.style.width=`${i.clientWidth}px`;const n=this.addManagedListener(r,"focusout",u=>{!r.contains(u.relatedTarget)&&l&&l.hideFunc()}),o=u=>{this.destroyBean(t),this.popupShowing=!1,(u==null?void 0:u.key)==="Escape"&&i.focus(),n&&n()},a=this.localeService.getLocaleTextFunc(),l=this.popupService.addPopup({modal:!0,eChild:r,closeOnEsc:!0,closedCallback:o,ariaLabel:a("ariaLabelAggregationFunction","Aggregation Function")});l&&t.setComponentCreator(this.createAggSelect.bind(this,l.hideFunc)),t.addGuiEventListener("keydown",u=>{if(u.key===ce.ENTER||u.key===ce.SPACE){const d=t.getLastFocusedRow();if(d==null)return;const h=t.getComponentAt(d);h&&h.selectItem()}}),this.popupService.positionPopupByComponent({type:"aggFuncSelect",eventSource:i,ePopup:r,keepWithinBounds:!0,column:this.column,position:"under"}),t.refresh();let c=e.findIndex(u=>u===this.column.getAggFunc());c===-1&&(c=0),t.focusRow(c)}createAggSelect(t,e){const i=()=>{if(t(),this.gos.get("functionsPassive")){const a={type:K.EVENT_COLUMN_AGG_FUNC_CHANGE_REQUEST,columns:[this.column],aggFunc:e};this.eventService.dispatchEvent(a)}else this.columnModel.setColumnAggFunc(this.column,e,"toolPanelDragAndDrop")},s=this.localeService.getLocaleTextFunc(),r=e.toString(),n=s(r,r);return new hre(i,n)}isGroupingAndLocked(){return this.isGroupingZone()&&this.columnModel.isColumnGroupingLocked(this.column)}isAggregationZone(){return this.dropZonePurpose==="aggregation"}isGroupingZone(){return this.dropZonePurpose==="rowGroup"}getDragSourceType(){return Ln.ToolPanel}destroy(){super.destroy(),this.column=null}};Kt([W("popupService")],bm.prototype,"popupService",2);Kt([W("sortController")],bm.prototype,"sortController",2);Kt([W("columnModel")],bm.prototype,"columnModel",2);Kt([Vt("aggFuncService")],bm.prototype,"aggFuncService",2);Kt([pe("eSortIndicator")],bm.prototype,"eSortIndicator",2);var hre=class extends Te{constructor(t,e){super('<div class="ag-select-agg-func-item"/>'),this.selectItem=t,this.getGui().innerText=e,this.addGuiEventListener("click",this.selectItem)}},WE=class extends JM{constructor(t,e){super(t),this.dropZonePurpose=e}init(t){super.init(t),this.addManagedListener(this.eventService,K.EVENT_NEW_COLUMNS_LOADED,this.refreshGui.bind(this)),this.addManagedPropertyListeners(["functionsReadOnly","rowGroupPanelSuppressSort","groupLockGroupColumns"],this.refreshGui.bind(this))}getItems(t){var e;return(e=t.columns)!=null?e:[]}isInterestedIn(t){return t===Ln.HeaderCell||t===Ln.ToolPanel}minimumAllowedNewInsertIndex(){const t=this.gos.get("groupLockGroupColumns"),e=this.columnModel.getRowGroupColumns().length;return t===-1?e:Math.min(t,e)}showOrHideColumnOnExit(t){return this.isRowGroupPanel()&&!this.gos.get("suppressRowGroupHidesColumns")&&!t.fromNudge}handleDragEnterEnd(t){if(this.showOrHideColumnOnExit(t)){const s=t.dragSource.getDragItem().columns;this.setColumnsVisible(s,!1,"uiColumnDragged")}}handleDragLeaveEnd(t){if(this.showOrHideColumnOnExit(t)){const i=t.dragSource.getDragItem();this.setColumnsVisible(i.columns,!0,"uiColumnDragged")}}setColumnsVisible(t,e,i){if(t){const s=t.filter(r=>!r.getColDef().lockVisible);this.columnModel.setColumnsVisible(s,e,i)}}isRowGroupPanel(){return this.dropZonePurpose==="rowGroup"}refreshOnDragStop(){return!this.gos.get("functionsPassive")}createPillComponent(t,e,i,s){return new bm(t,e,i,this.dropZonePurpose,s)}};Kt([W("columnModel")],WE.prototype,"columnModel",2);var tC=class extends WE{constructor(t){super(t,"rowGroup")}passBeansUp(){const t=this.localeService.getLocaleTextFunc(),e=t("rowGroupColumnsEmptyMessage","Drag here to set row groups"),i=t("groups","Row Groups");super.init({icon:Q.createIconNoSpan("rowGroupPanel",this.gos,null),emptyMessage:e,title:i}),this.addManagedListener(this.eventService,K.EVENT_COLUMN_ROW_GROUP_CHANGED,this.refreshGui.bind(this))}getAriaLabel(){return this.localeService.getLocaleTextFunc()("ariaRowGroupDropZonePanelLabel","Row Groups")}getTooltipParams(){const t=super.getTooltipParams();return t.location="rowGroupColumnsList",t}isItemDroppable(t,e){return this.gos.get("functionsReadOnly")||!t.isPrimary()?!1:t.isAllowRowGroup()&&(!t.isRowGroupActive()||this.isSourceEventFromTarget(e))}updateItems(t){if(this.gos.get("functionsPassive")){const e={type:K.EVENT_COLUMN_ROW_GROUP_CHANGE_REQUEST,columns:t};this.eventService.dispatchEvent(e)}else this.columnModel.setRowGroupColumns(t,"toolPanelUi")}getIconName(){return this.isPotentialDndItems()?st.ICON_GROUP:st.ICON_NOT_ALLOWED}getExistingItems(){return this.columnModel.getRowGroupColumns()}};Kt([de],tC.prototype,"passBeansUp",1);var iC=class extends WE{constructor(t){super(t,"pivot")}passBeansUp(){const t=this.localeService.getLocaleTextFunc(),e=t("pivotColumnsEmptyMessage","Drag here to set column labels"),i=t("pivots","Column Labels");super.init({icon:Q.createIconNoSpan("pivotPanel",this.gos,null),emptyMessage:e,title:i}),this.addManagedListener(this.eventService,K.EVENT_NEW_COLUMNS_LOADED,this.refresh.bind(this)),this.addManagedListener(this.eventService,K.EVENT_COLUMN_PIVOT_CHANGED,this.refresh.bind(this)),this.addManagedListener(this.eventService,K.EVENT_COLUMN_PIVOT_MODE_CHANGED,this.checkVisibility.bind(this)),this.refresh()}getAriaLabel(){return this.localeService.getLocaleTextFunc()("ariaPivotDropZonePanelLabel","Column Labels")}getTooltipParams(){const t=super.getTooltipParams();return t.location="pivotColumnsList",t}refresh(){this.checkVisibility(),this.refreshGui()}checkVisibility(){const t=this.columnModel.isPivotMode();if(this.isHorizontal())switch(this.gos.get("pivotPanelShow")){case"always":this.setDisplayed(t);break;case"onlyWhenPivoting":const e=this.columnModel.isPivotActive();this.setDisplayed(t&&e);break;default:this.setDisplayed(!1);break}else this.setDisplayed(t)}isItemDroppable(t,e){return this.gos.get("functionsReadOnly")||!t.isPrimary()?!1:t.isAllowPivot()&&(!t.isPivotActive()||this.isSourceEventFromTarget(e))}updateItems(t){if(this.gos.get("functionsPassive")){const e={type:K.EVENT_COLUMN_PIVOT_CHANGE_REQUEST,columns:t};this.eventService.dispatchEvent(e)}else this.columnModel.setPivotColumns(t,"toolPanelUi")}getIconName(){return this.isPotentialDndItems()?st.ICON_PIVOT:st.ICON_NOT_ALLOWED}getExistingItems(){return this.columnModel.getPivotColumns()}};Kt([de],iC.prototype,"passBeansUp",1);var C2=class extends Te{constructor(){super()}postConstruct(){this.setGui(this.createNorthPanel()),this.addManagedListener(this.eventService,K.EVENT_COLUMN_ROW_GROUP_CHANGED,()=>this.onRowGroupChanged()),this.addManagedListener(this.eventService,K.EVENT_NEW_COLUMNS_LOADED,()=>this.onRowGroupChanged()),this.addManagedPropertyListener("rowGroupPanelShow",()=>this.onRowGroupChanged()),this.addManagedPropertyListener("pivotPanelShow",()=>this.onPivotPanelShow()),this.onRowGroupChanged()}createNorthPanel(){const t=document.createElement("div");return t.classList.add("ag-column-drop-wrapper"),Q.setAriaRole(t,"presentation"),this.rowGroupComp=new tC(!0),this.createManagedBean(this.rowGroupComp),this.pivotComp=new iC(!0),this.createManagedBean(this.pivotComp),t.appendChild(this.rowGroupComp.getGui()),t.appendChild(this.pivotComp.getGui()),this.addManagedListener(this.rowGroupComp,Te.EVENT_DISPLAYED_CHANGED,()=>this.onDropPanelVisible()),this.addManagedListener(this.pivotComp,Te.EVENT_DISPLAYED_CHANGED,()=>this.onDropPanelVisible()),this.onDropPanelVisible(),t}onDropPanelVisible(){const t=this.rowGroupComp.isDisplayed()&&this.pivotComp.isDisplayed();this.rowGroupComp.addOrRemoveCssClass("ag-column-drop-horizontal-half-width",t),this.pivotComp.addOrRemoveCssClass("ag-column-drop-horizontal-half-width",t)}onRowGroupChanged(){if(!this.rowGroupComp)return;const t=this.gos.get("rowGroupPanelShow");if(t==="always")this.rowGroupComp.setDisplayed(!0);else if(t==="onlyWhenGrouping"){const e=!this.columnModel.isRowGroupEmpty();this.rowGroupComp.setDisplayed(e)}else this.rowGroupComp.setDisplayed(!1)}onPivotPanelShow(){if(!this.pivotComp)return;const t=this.gos.get("pivotPanelShow");if(t==="always")this.pivotComp.setDisplayed(!0);else if(t==="onlyWhenPivoting"){const e=this.columnModel.isPivotActive();this.pivotComp.setDisplayed(e)}else this.pivotComp.setDisplayed(!1)}};Kt([W("columnModel")],C2.prototype,"columnModel",2);Kt([de],C2.prototype,"postConstruct",1);var sC=class extends ye{execute(t){const e=this.columnModel.isPivotMode(),i=this.filterManager.isAggregateFilterPresent()||this.filterManager.isAggregateQuickFilterPresent(),s=c=>!c.node.group,r=c=>c.node.leafGroup,n=this.gos.getGroupAggFiltering()||(e?r:s),{changedPath:o}=t,a=(c,u=!1)=>{c.childrenAfterFilter&&(c.childrenAfterAggFilter=c.childrenAfterFilter,u&&c.childrenAfterAggFilter.forEach(d=>a(d,u)),this.setAllChildrenCount(c)),c.sibling&&(c.sibling.childrenAfterAggFilter=c.childrenAfterAggFilter)},l=c=>{var u;c.childrenAfterAggFilter=((u=c.childrenAfterFilter)==null?void 0:u.filter(d=>{var h;return n({node:d})&&this.filterManager.doesRowPassAggregateFilters({rowNode:d})?(a(d,!0),!0):(h=d.childrenAfterAggFilter)==null?void 0:h.length}))||null,this.setAllChildrenCount(c),c.sibling&&(c.sibling.childrenAfterAggFilter=c.childrenAfterAggFilter)};o.forEachChangedNodeDepthFirst(i?l:a,!0)}setAllChildrenCountTreeData(t){let e=0;t.childrenAfterAggFilter.forEach(i=>{e++,e+=i.allChildrenCount}),t.setAllChildrenCount(e)}setAllChildrenCountGridGrouping(t){let e=0;t.childrenAfterAggFilter.forEach(i=>{i.group?e+=i.allChildrenCount:e++}),t.setAllChildrenCount(e)}setAllChildrenCount(t){if(!t.hasChildren()){t.setAllChildrenCount(null);return}this.gos.get("treeData")?this.setAllChildrenCountTreeData(t):this.setAllChildrenCountGridGrouping(t)}};Kt([W("filterManager")],sC.prototype,"filterManager",2);Kt([W("columnModel")],sC.prototype,"columnModel",2);sC=Kt([Me("filterAggregatesStage")],sC);var pre="31.3.4",_d=class PA extends yl{constructor(){super(`
            <div class="ag-group-filter">
                <div ref="eGroupField"></div>
                <div ref="eUnderlyingFilter"></div>
            </div>
        `)}postConstruct(){this.initialiseTabGuard({})}init(e){return this.params=e,this.validateParams(),this.updateGroups().then(()=>{this.addManagedListener(this.eventService,K.EVENT_COLUMN_ROW_GROUP_CHANGED,()=>this.onColumnRowGroupChanged())})}validateParams(){const{colDef:e}=this.params;e.field&&Q.warnOnce('Group Column Filter does not work with the colDef property "field". This property will be ignored.'),e.filterValueGetter&&Q.warnOnce('Group Column Filter does not work with the colDef property "filterValueGetter". This property will be ignored.'),e.filterParams&&Q.warnOnce('Group Column Filter does not work with the colDef property "filterParams". This property will be ignored.')}updateGroups(){const e=this.updateGroupField();return this.getUnderlyingFilters(e)}getSourceColumns(){if(this.groupColumn=this.params.column,this.gos.get("treeData"))return Q.warnOnce("Group Column Filter does not work with Tree Data enabled. Please disable Tree Data, or use a different filter."),[];const e=this.columnModel.getSourceColumnsForGroupColumn(this.groupColumn);return e||(Q.warnOnce("Group Column Filter only works on group columns. Please use a different filter."),[])}updateGroupField(){Q.clearElement(this.eGroupField),this.eGroupFieldSelect&&this.destroyBean(this.eGroupFieldSelect);const e=this.getSourceColumns(),i=e.filter(s=>s.isFilterAllowed());return i.length?(e.length===1?(this.selectedColumn=i[0],Q.setDisplayed(this.eGroupField,!1)):((!this.selectedColumn||!i.some(s=>s.getId()===this.selectedColumn.getId()))&&(this.selectedColumn=i[0]),this.createGroupFieldSelectElement(i),this.eGroupField.appendChild(this.eGroupFieldSelect.getGui()),this.eGroupField.appendChild(Q.loadTemplate('<div class="ag-filter-separator"></div>')),Q.setDisplayed(this.eGroupField,!0)),i):(this.selectedColumn=void 0,Q.setDisplayed(this.eGroupField,!1),null)}createGroupFieldSelectElement(e){this.eGroupFieldSelect=this.createManagedBean(new Jr);const i=this.localeService.getLocaleTextFunc();this.eGroupFieldSelect.setLabel(i("groupFilterSelect","Select field:")),this.eGroupFieldSelect.setLabelAlignment("top"),this.eGroupFieldSelect.addOptions(e.map(s=>{var r;return{value:s.getId(),text:(r=this.columnModel.getDisplayNameForColumn(s,"groupFilter",!1))!=null?r:void 0}})),this.eGroupFieldSelect.setValue(this.selectedColumn.getId()),this.eGroupFieldSelect.onValueChange(s=>this.updateSelectedColumn(s)),this.eGroupFieldSelect.addCssClass("ag-group-filter-field-select-wrapper"),e.length===1&&this.eGroupFieldSelect.setDisabled(!0)}getUnderlyingFilters(e){if(!e)return this.filterColumnPairs=void 0,this.selectedFilter=void 0,this.groupColumn.setFilterActive(!1,"columnRowGroupChanged"),Ft.resolve();const i=[],s=[];return e.forEach(r=>{const n=this.filterManager.getOrCreateFilterWrapper(r,"COLUMN_MENU");n!=null&&n.filterPromise&&i.push(n.filterPromise.then(o=>(o&&s.push({filter:o,column:r}),r.getId()===this.selectedColumn.getId()&&(this.selectedFilter=o??void 0),o)))}),Ft.all(i).then(()=>{this.filterColumnPairs=s,this.groupColumn.setFilterActive(this.isFilterActive(),"columnRowGroupChanged")})}addUnderlyingFilterElement(){var e,i;if(Q.clearElement(this.eUnderlyingFilter),!this.selectedColumn)return Ft.resolve();const s=this.createManagedBean(new ed(this.selectedColumn,"COLUMN_MENU"));return this.filterWrapperComp=s,s.hasFilter()?(this.eUnderlyingFilter.appendChild(s.getGui()),(i=(e=s.getFilter())==null?void 0:e.then(()=>{var r,n;(r=s.afterGuiAttached)==null||r.call(s,this.afterGuiAttachedParams),!((n=this.afterGuiAttachedParams)!=null&&n.suppressFocus)&&this.eGroupFieldSelect&&!this.eGroupFieldSelect.isDisabled()&&this.eGroupFieldSelect.getFocusableElement().focus()}))!=null?i:Ft.resolve()):Ft.resolve()}updateSelectedColumn(e){var i;if(!e)return;(i=this.filterWrapperComp)==null||i.afterGuiDetached(),this.destroyBean(this.filterWrapperComp);const s=this.getFilterColumnPair(e);this.selectedColumn=s==null?void 0:s.column,this.selectedFilter=s==null?void 0:s.filter,this.dispatchEvent({type:PA.EVENT_SELECTED_COLUMN_CHANGED}),this.addUnderlyingFilterElement()}isFilterActive(){var e;return!!((e=this.filterColumnPairs)!=null&&e.some(({filter:i})=>i.isFilterActive()))}doesFilterPass(){return!0}getModel(){return null}setModel(){return Ft.resolve()}afterGuiAttached(e){this.afterGuiAttachedParams=e,this.addUnderlyingFilterElement()}afterGuiDetached(){var e,i;Q.clearElement(this.eUnderlyingFilter),(i=(e=this.selectedFilter)==null?void 0:e.afterGuiDetached)==null||i.call(e)}onColumnRowGroupChanged(){this.updateGroups().then(()=>{this.dispatchEvent({type:PA.EVENT_COLUMN_ROW_GROUP_CHANGED}),this.eventService.dispatchEvent({type:"filterAllowedUpdated"})})}getFilterColumnPair(e){var i;if(e)return(i=this.filterColumnPairs)==null?void 0:i.find(({column:s})=>s.getId()===e)}getSelectedFilter(){return this.selectedFilter}getSelectedColumn(){return this.selectedColumn}isFilterAllowed(){return!!this.selectedColumn}destroy(){super.destroy()}};_d.EVENT_COLUMN_ROW_GROUP_CHANGED="columnRowGroupChanged";_d.EVENT_SELECTED_COLUMN_CHANGED="selectedColumnChanged";Kt([W("filterManager")],_d.prototype,"filterManager",2);Kt([W("columnModel")],_d.prototype,"columnModel",2);Kt([pe("eGroupField")],_d.prototype,"eGroupField",2);Kt([pe("eUnderlyingFilter")],_d.prototype,"eUnderlyingFilter",2);Kt([de],_d.prototype,"postConstruct",1);var IA=_d,zE=class extends Te{constructor(){super(`
            <div ref="eFloatingFilter" class="ag-group-floating-filter ag-floating-filter-input" role="presentation"></div>
        `),this.haveAddedColumnListeners=!1}init(t){this.params=t;const e=this.gos.get("groupDisplayType")==="multipleColumns";return new Ft(i=>{this.params.parentFilterInstance(s=>{this.parentFilterInstance=s,e?this.setupUnderlyingFloatingFilterElement().then(()=>i()):(this.setupReadOnlyFloatingFilterElement(),i())})}).then(()=>{this.addManagedListener(this.parentFilterInstance,IA.EVENT_SELECTED_COLUMN_CHANGED,()=>this.onSelectedColumnChanged()),this.addManagedListener(this.parentFilterInstance,IA.EVENT_COLUMN_ROW_GROUP_CHANGED,()=>this.onColumnRowGroupChanged())})}onParamsUpdated(t){this.refresh(t)}refresh(t){this.params=t,this.setParams()}setParams(){var t;const e=this.columnModel.getDisplayNameForColumn(this.params.column,"header",!0),i=this.localeService.getLocaleTextFunc();(t=this.eFloatingFilterText)==null||t.setInputAriaLabel(`${e} ${i("ariaFilterInput","Filter Input")}`)}setupReadOnlyFloatingFilterElement(){this.eFloatingFilterText||(this.eFloatingFilterText=this.createManagedBean(new vl),this.eFloatingFilterText.setDisabled(!0).addGuiEventListener("click",()=>this.params.showParentFilter()),this.setParams()),this.updateDisplayedValue(),this.eFloatingFilter.appendChild(this.eFloatingFilterText.getGui())}setupUnderlyingFloatingFilterElement(){this.showingUnderlyingFloatingFilter=!1,this.underlyingFloatingFilter=void 0,Q.clearElement(this.eFloatingFilter);const t=this.parentFilterInstance.getSelectedColumn();if(t&&!t.isVisible()){const e=this.filterManager.getFloatingFilterCompDetails(t,this.params.showParentFilter);if(e)return this.compDetails=e,this.haveAddedColumnListeners||(this.haveAddedColumnListeners=!0,this.addManagedListener(t,Nt.EVENT_VISIBLE_CHANGED,this.onColumnVisibleChanged.bind(this)),this.addManagedListener(t,Nt.EVENT_COL_DEF_CHANGED,this.onColDefChanged.bind(this))),e.newAgStackInstance().then(i=>{var s,r;this.underlyingFloatingFilter=i,(r=this.underlyingFloatingFilter)==null||r.onParentModelChanged((s=this.parentFilterInstance.getSelectedFilter())==null?void 0:s.getModel()),this.appendChild(i.getGui()),this.showingUnderlyingFloatingFilter=!0})}return this.setupReadOnlyFloatingFilterElement(),Ft.resolve()}onColumnVisibleChanged(){this.setupUnderlyingFloatingFilterElement()}onColDefChanged(t){var e,i,s;if(!t.column)return;const r=this.filterManager.getFloatingFilterCompDetails(t.column,this.params.showParentFilter);r&&((e=this.underlyingFloatingFilter)!=null&&e.refresh?this.underlyingFloatingFilter.refresh(r.params):(s=(i=this.underlyingFloatingFilter)==null?void 0:i.onParamsUpdated)==null||s.call(i,r.params))}onParentModelChanged(t,e){var i,s;this.showingUnderlyingFloatingFilter?(s=this.underlyingFloatingFilter)==null||s.onParentModelChanged((i=this.parentFilterInstance.getSelectedFilter())==null?void 0:i.getModel(),e):this.updateDisplayedValue()}updateDisplayedValue(){if(!this.parentFilterInstance||!this.eFloatingFilterText)return;const t=this.parentFilterInstance.getSelectedFilter();if(!t){this.eFloatingFilterText.setValue(""),this.eFloatingFilterText.setDisplayed(!1);return}if(this.eFloatingFilterText.setDisplayed(!0),t.getModelAsString){const e=t.getModel();this.eFloatingFilterText.setValue(e==null?"":t.getModelAsString(e))}else this.eFloatingFilterText.setValue("")}onSelectedColumnChanged(){this.showingUnderlyingFloatingFilter||this.updateDisplayedValue()}onColumnRowGroupChanged(){this.showingUnderlyingFloatingFilter||this.updateDisplayedValue()}destroy(){super.destroy()}};Kt([W("columnModel")],zE.prototype,"columnModel",2);Kt([W("filterManager")],zE.prototype,"filterManager",2);Kt([pe("eFloatingFilter")],zE.prototype,"eFloatingFilter",2);var b2={version:pre,moduleName:Ut.RowGroupingModule,beans:[_g,sC,Uu,Wu,mc,Ps],agStackComponents:[{componentName:"AgGridHeaderDropZones",componentClass:C2}],userComponents:[{componentName:"agGroupColumnFilter",componentClass:IA},{componentName:"agGroupColumnFloatingFilter",componentClass:zE}],dependantModules:[Qs]},wS=class extends WE{constructor(t){super(t,"aggregation")}passBeansUp(){const t=this.localeService.getLocaleTextFunc(),e=t("valueColumnsEmptyMessage","Drag here to aggregate"),i=t("values","Values");super.init({icon:Q.createIconNoSpan("valuePanel",this.gos,null),emptyMessage:e,title:i}),this.addManagedListener(this.eventService,K.EVENT_COLUMN_VALUE_CHANGED,this.refreshGui.bind(this))}getAriaLabel(){return this.localeService.getLocaleTextFunc()("ariaValuesDropZonePanelLabel","Values")}getTooltipParams(){const t=super.getTooltipParams();return t.location="valueColumnsList",t}getIconName(){return this.isPotentialDndItems()?st.ICON_AGGREGATE:st.ICON_NOT_ALLOWED}isItemDroppable(t,e){return this.gos.get("functionsReadOnly")||!t.isPrimary()?!1:t.isAllowValue()&&(!t.isValueActive()||this.isSourceEventFromTarget(e))}updateItems(t){if(this.gos.get("functionsPassive")){const e={type:K.EVENT_COLUMN_VALUE_CHANGE_REQUEST,columns:t};this.eventService.dispatchEvent(e)}else this.columnModel.setValueColumns(t,"toolPanelUi")}getExistingItems(){return this.columnModel.getValueColumns()}};Kt([de],wS.prototype,"passBeansUp",1);var u9=Object.defineProperty,fre=Object.defineProperties,gre=Object.getOwnPropertyDescriptor,mre=Object.getOwnPropertyDescriptors,zL=Object.getOwnPropertySymbols,vre=Object.prototype.hasOwnProperty,yre=Object.prototype.propertyIsEnumerable,$L=(t,e,i)=>e in t?u9(t,e,{enumerable:!0,configurable:!0,writable:!0,value:i}):t[e]=i,Cre=(t,e)=>{for(var i in e||(e={}))vre.call(e,i)&&$L(t,i,e[i]);if(zL)for(var i of zL(e))yre.call(e,i)&&$L(t,i,e[i]);return t},bre=(t,e)=>fre(t,mre(e)),Hs=(t,e,i,s)=>{for(var r=s>1?void 0:s?gre(e,i):e,n=t.length-1,o;n>=0;n--)(o=t[n])&&(r=(s?o(e,i,r):o(r))||r);return s&&r&&u9(e,i,r),r},$E=class extends Te{constructor(){super('<div class="ag-tool-panel-horizontal-resize"></div>'),this.minWidth=100,this.maxWidth=null}setElementToResize(t){this.elementToResize=t}postConstruct(){const t=this.horizontalResizeService.addResizeBar({eResizeBar:this.getGui(),dragStartPixels:1,onResizeStart:this.onResizeStart.bind(this),onResizing:this.onResizing.bind(this),onResizeEnd:this.onResizeEnd.bind(this)});this.addDestroyFunc(t),this.setInverted(this.gos.get("enableRtl"))}dispatchResizeEvent(t,e,i){const s={type:K.EVENT_TOOL_PANEL_SIZE_CHANGED,width:i,started:t,ended:e};this.eventService.dispatchEvent(s)}onResizeStart(){this.startingWidth=this.elementToResize.offsetWidth,this.dispatchResizeEvent(!0,!1,this.startingWidth)}onResizeEnd(t){return this.onResizing(t,!0)}onResizing(t,e=!1){const i=this.inverted?-1:1;let s=Math.max(this.minWidth,Math.floor(this.startingWidth-t*i));this.maxWidth!=null&&(s=Math.min(this.maxWidth,s)),this.elementToResize.style.width=`${s}px`,this.dispatchResizeEvent(!1,e,s)}setInverted(t){this.inverted=t}setMaxWidth(t){this.maxWidth=t}setMinWidth(t){t!=null?this.minWidth=t:this.minWidth=100}};Hs([W("horizontalResizeService")],$E.prototype,"horizontalResizeService",2);Hs([de],$E.prototype,"postConstruct",1);var wm=class d9 extends Te{constructor(e){super(),this.toolPanelDef=e}getToolPanelId(){return this.toolPanelDef.id}postConstruct(){const e=this.createTemplate();this.setTemplate(e),this.setLabel(),this.setIcon(),this.addManagedListener(this.eToggleButton,"click",this.onButtonPressed.bind(this)),this.eToggleButton.setAttribute("id",`ag-${this.getCompId()}-button`)}createTemplate(){return`<div class="ag-side-button" role="presentation">
                <button type="button" ref="eToggleButton" tabindex="-1" role="tab" aria-expanded="false" class="ag-button ag-side-button-button">
                    <div ref="eIconWrapper" class="ag-side-button-icon-wrapper" aria-hidden="true"></div>
                    <span ref ="eLabel" class="ag-side-button-label"></span>
                </button>
            </div>`}setLabel(){const e=this.localeService.getLocaleTextFunc(),i=this.toolPanelDef,s=e(i.labelKey,i.labelDefault);this.eLabel.innerText=s}setIcon(){this.eIconWrapper.insertAdjacentElement("afterbegin",Q.createIconNoSpan(this.toolPanelDef.iconKey,this.gos))}onButtonPressed(){this.dispatchEvent({type:d9.EVENT_TOGGLE_BUTTON_CLICKED})}setSelected(e){this.addOrRemoveCssClass("ag-selected",e),Q.setAriaExpanded(this.eToggleButton,e)}getButtonElement(){return this.eToggleButton}};wm.EVENT_TOGGLE_BUTTON_CLICKED="toggleButtonClicked";Hs([pe("eToggleButton")],wm.prototype,"eToggleButton",2);Hs([pe("eIconWrapper")],wm.prototype,"eIconWrapper",2);Hs([pe("eLabel")],wm.prototype,"eLabel",2);Hs([de],wm.prototype,"postConstruct",1);var KL=wm,Ep=class FA extends Te{constructor(){super(FA.TEMPLATE),this.buttonComps=[]}postConstruct(){this.addManagedListener(this.getFocusableElement(),"keydown",this.handleKeyDown.bind(this))}handleKeyDown(e){if(e.key!==ce.TAB||!e.shiftKey)return;const i=Q.last(this.columnModel.getAllDisplayedColumns());this.focusService.focusGridView(i,!0)&&e.preventDefault()}setActiveButton(e){this.buttonComps.forEach(i=>{i.setSelected(e===i.getToolPanelId())})}addButtonComp(e){const i=this.createBean(new KL(e));return this.buttonComps.push(i),this.appendChild(i),i.addEventListener(KL.EVENT_TOGGLE_BUTTON_CLICKED,()=>{this.dispatchEvent({type:FA.EVENT_SIDE_BAR_BUTTON_CLICKED,toolPanelId:e.id})}),i}clearButtons(){this.buttonComps=this.destroyBeans(this.buttonComps),Q.clearElement(this.getGui())}};Ep.EVENT_SIDE_BAR_BUTTON_CLICKED="sideBarButtonClicked";Ep.TEMPLATE='<div class="ag-side-buttons" role="tablist"></div>';Hs([W("focusService")],Ep.prototype,"focusService",2);Hs([W("columnModel")],Ep.prototype,"columnModel",2);Hs([de],Ep.prototype,"postConstruct",1);Hs([Hi],Ep.prototype,"clearButtons",1);var h9=Ep,zf=class Nl{static parse(e){if(!e)return;if(e===!0)return{toolPanels:[Nl.DEFAULT_COLUMN_COMP,Nl.DEFAULT_FILTER_COMP],defaultToolPanel:"columns"};if(typeof e=="string")return Nl.parse([e]);if(Array.isArray(e)){const s=[];return e.forEach(r=>{const n=Nl.DEFAULT_BY_KEY[r];if(!n){console.warn(`AG Grid: the key ${r} is not a valid key for specifying a tool panel, valid keys are: ${Object.keys(Nl.DEFAULT_BY_KEY).join(",")}`);return}s.push(n)}),s.length===0?void 0:{toolPanels:s,defaultToolPanel:s[0].id}}return{toolPanels:Nl.parseComponents(e.toolPanels),defaultToolPanel:e.defaultToolPanel,hiddenByDefault:e.hiddenByDefault,position:e.position}}static parseComponents(e){const i=[];return e&&e.forEach(s=>{let r=null;if(typeof s=="string"){const n=Nl.DEFAULT_BY_KEY[s];if(!n){console.warn(`AG Grid: the key ${s} is not a valid key for specifying a tool panel, valid keys are: ${Object.keys(Nl.DEFAULT_BY_KEY).join(",")}`);return}r=n}else r=s;i.push(r)}),i}};zf.DEFAULT_COLUMN_COMP={id:"columns",labelDefault:"Columns",labelKey:"columns",iconKey:"columns",toolPanel:"agColumnsToolPanel"};zf.DEFAULT_FILTER_COMP={id:"filters",labelDefault:"Filters",labelKey:"filters",iconKey:"filter",toolPanel:"agFiltersToolPanel"};zf.DEFAULT_BY_KEY={columns:zf.DEFAULT_COLUMN_COMP,filters:zf.DEFAULT_FILTER_COMP};var YL=zf,KE=class p9 extends Te{constructor(){super(p9.TEMPLATE)}setupResize(){const e=this.getGui(),i=this.resizeBar=this.createManagedBean(new $E);e.setAttribute("id",`ag-${this.getCompId()}`),i.setElementToResize(e),this.appendChild(i)}getToolPanelId(){return this.toolPanelId}setToolPanelDef(e,i){const{id:s,minWidth:r,maxWidth:n,width:o}=e;this.toolPanelId=s,this.width=o;const a=this.userComponentFactory.getToolPanelCompDetails(e,i),l=a.newAgStackInstance();if(this.params=a.params,l==null){console.warn(`AG Grid: error processing tool panel component ${s}. You need to specify 'toolPanel'`);return}l.then(this.setToolPanelComponent.bind(this)),r!=null&&this.resizeBar.setMinWidth(r),n!=null&&this.resizeBar.setMaxWidth(n)}setToolPanelComponent(e){this.toolPanelCompInstance=e,this.appendChild(e.getGui()),this.addDestroyFunc(()=>{this.destroyBean(e)}),this.width&&(this.getGui().style.width=`${this.width}px`)}getToolPanelInstance(){return this.toolPanelCompInstance}setResizerSizerSide(e){const i=this.gos.get("enableRtl"),s=e==="left",r=i?s:!s;this.resizeBar.setInverted(r)}refresh(){this.toolPanelCompInstance.refresh(this.params)}};KE.TEMPLATE='<div class="ag-tool-panel-wrapper" role="tabpanel"/>';Hs([W("userComponentFactory")],KE.prototype,"userComponentFactory",2);Hs([de],KE.prototype,"setupResize",1);var wre=KE,Tp=class f9 extends Te{constructor(){super(f9.TEMPLATE),this.toolPanelWrappers=[]}postConstruct(){var e;this.sideBarButtonsComp.addEventListener(h9.EVENT_SIDE_BAR_BUTTON_CLICKED,this.onToolPanelButtonClicked.bind(this));const{sideBar:i}=(e=this.gos.get("initialState"))!=null?e:{};this.setSideBarDef({sideBarDef:YL.parse(this.gos.get("sideBar")),sideBarState:i}),this.addManagedPropertyListener("sideBar",this.onSideBarUpdated.bind(this)),this.sideBarService.registerSideBarComp(this),this.createManagedBean(new ml(this.getFocusableElement(),{onTabKeyDown:this.onTabKeyDown.bind(this),handleKeyDown:this.handleKeyDown.bind(this)}))}onTabKeyDown(e){if(e.defaultPrevented)return;const{focusService:i,sideBarButtonsComp:s}=this,r=this.getGui(),n=s.getGui(),o=this.gos.getActiveDomElement(),a=r.querySelector(".ag-tool-panel-wrapper:not(.ag-hidden)"),l=e.target;if(!a)return;if(n.contains(o)){i.focusInto(a,e.shiftKey)&&e.preventDefault();return}if(!e.shiftKey)return;let c=null;a.contains(o)?c=this.focusService.findNextFocusableElement(a,void 0,!0):i.isTargetUnderManagedComponent(a,l)&&e.shiftKey&&(c=this.focusService.findFocusableElementBeforeTabGuard(a,l)),c||(c=n.querySelector(".ag-selected button")),c&&c!==e.target&&(e.preventDefault(),c.focus())}handleKeyDown(e){const i=this.gos.getActiveDomElement();if(!this.sideBarButtonsComp.getGui().contains(i))return;const s=this.sideBarButtonsComp.getGui(),r=Array.prototype.slice.call(s.querySelectorAll(".ag-side-button")),n=r.findIndex(l=>l.contains(i));let o=null;switch(e.key){case ce.LEFT:case ce.UP:o=Math.max(0,n-1);break;case ce.RIGHT:case ce.DOWN:o=Math.min(n+1,r.length-1);break}if(o===null)return;const a=r[o].querySelector("button");a&&(a.focus(),e.preventDefault())}onToolPanelButtonClicked(e){const i=e.toolPanelId;this.openedItem()===i?this.openToolPanel(void 0,"sideBarButtonClicked"):this.openToolPanel(i,"sideBarButtonClicked")}clearDownUi(){this.sideBarButtonsComp.clearButtons(),this.destroyToolPanelWrappers()}setSideBarDef({sideBarDef:e,sideBarState:i,existingToolPanelWrappers:s}){if(this.setDisplayed(!1),this.sideBar=e,this.sideBar&&this.sideBar.toolPanels){const r=this.sideBar.toolPanels;if(this.createToolPanelsAndSideButtons(r,i,s),!this.toolPanelWrappers.length)return;const n=i?i.visible:!this.sideBar.hiddenByDefault;if(this.setDisplayed(n),this.setSideBarPosition(i?i.position:this.sideBar.position),n)if(i){const{openToolPanel:o}=i;o&&this.openToolPanel(o,"sideBarInitializing")}else this.openToolPanel(this.sideBar.defaultToolPanel,"sideBarInitializing")}}getDef(){return this.sideBar}setSideBarPosition(e){e||(e="right"),this.position=e;const i=e==="left",s=i?"right":"left";return this.addOrRemoveCssClass("ag-side-bar-left",i),this.addOrRemoveCssClass("ag-side-bar-right",!i),this.toolPanelWrappers.forEach(r=>{r.setResizerSizerSide(s)}),this.eventService.dispatchEvent({type:K.EVENT_SIDE_BAR_UPDATED}),this}setDisplayed(e,i){super.setDisplayed(e,i),this.eventService.dispatchEvent({type:K.EVENT_SIDE_BAR_UPDATED})}getState(){const e={};return this.toolPanelWrappers.forEach(i=>{var s,r;e[i.getToolPanelId()]=(r=(s=i.getToolPanelInstance())==null?void 0:s.getState)==null?void 0:r.call(s)}),{visible:this.isDisplayed(),position:this.position,openToolPanel:this.openedItem(),toolPanels:e}}createToolPanelsAndSideButtons(e,i,s){var r;for(const n of e)this.createToolPanelAndSideButton(n,(r=i==null?void 0:i.toolPanels)==null?void 0:r[n.id],s==null?void 0:s[n.id])}validateDef(e){if(e.id==null)return console.warn("AG Grid: please review all your toolPanel components, it seems like at least one of them doesn't have an id"),!1;if(e.toolPanel==="agColumnsToolPanel"&&!vt.__assertRegistered(Ut.ColumnsToolPanelModule,"Column Tool Panel",this.context.getGridId()))return!1;if(e.toolPanel==="agFiltersToolPanel"){if(!vt.__assertRegistered(Ut.FiltersToolPanelModule,"Filters Tool Panel",this.context.getGridId()))return!1;if(this.filterManager.isAdvancedFilterEnabled())return Q.warnOnce("Advanced Filter does not work with Filters Tool Panel. Filters Tool Panel has been disabled."),!1}return!0}createToolPanelAndSideButton(e,i,s){if(!this.validateDef(e))return;const r=this.sideBarButtonsComp.addButtonComp(e);let n;s?n=s:(n=this.getContext().createBean(new wre),n.setToolPanelDef(e,{initialState:i,onStateUpdated:()=>this.eventService.dispatchEvent({type:K.EVENT_SIDE_BAR_UPDATED})})),n.setDisplayed(!1);const o=n.getGui();this.appendChild(o),this.toolPanelWrappers.push(n),Q.setAriaControls(r.getButtonElement(),o)}refresh(){this.toolPanelWrappers.forEach(e=>e.refresh())}openToolPanel(e,i="api"){const s=this.openedItem();if(s===e)return;this.toolPanelWrappers.forEach(o=>{const a=e===o.getToolPanelId();o.setDisplayed(a)});const r=this.openedItem();s!==r&&(this.sideBarButtonsComp.setActiveButton(e),this.raiseToolPanelVisibleEvent(e,s??void 0,i))}getToolPanelInstance(e){const i=this.toolPanelWrappers.filter(s=>s.getToolPanelId()===e)[0];if(!i){console.warn(`AG Grid: unable to lookup Tool Panel as invalid key supplied: ${e}`);return}return i.getToolPanelInstance()}raiseToolPanelVisibleEvent(e,i,s){const r=!!e&&!!i;if(i){const n={type:K.EVENT_TOOL_PANEL_VISIBLE_CHANGED,source:s,key:i,visible:!1,switchingToolPanel:r};this.eventService.dispatchEvent(n)}if(e){const n={type:K.EVENT_TOOL_PANEL_VISIBLE_CHANGED,source:s,key:e,visible:!0,switchingToolPanel:r};this.eventService.dispatchEvent(n)}}close(e="api"){this.openToolPanel(void 0,e)}isToolPanelShowing(){return!!this.openedItem()}openedItem(){let e=null;return this.toolPanelWrappers.forEach(i=>{i.isDisplayed()&&(e=i.getToolPanelId())}),e}onSideBarUpdated(){var e;const i=YL.parse(this.gos.get("sideBar"));let s={};i&&this.sideBar&&((e=i.toolPanels)==null||e.forEach(r=>{var n,o;const{id:a}=r;if(!a)return;const l=(n=this.sideBar.toolPanels)==null?void 0:n.find(h=>h.id===a);if(!l||r.toolPanel!==l.toolPanel)return;const c=this.toolPanelWrappers.find(h=>h.getToolPanelId()===a);if(!c)return;const u=this.gos.addGridCommonParams(bre(Cre({},(o=r.toolPanelParams)!=null?o:{}),{onStateUpdated:()=>this.eventService.dispatchEvent({type:K.EVENT_SIDE_BAR_UPDATED})}));c.getToolPanelInstance().refresh(u)===!0&&(this.toolPanelWrappers=this.toolPanelWrappers.filter(h=>h!==c),Q.removeFromParent(c.getGui()),s[a]=c)})),this.clearDownUi(),this.setSideBarDef({sideBarDef:i,existingToolPanelWrappers:s})}destroyToolPanelWrappers(){this.toolPanelWrappers.forEach(e=>{Q.removeFromParent(e.getGui()),this.destroyBean(e)}),this.toolPanelWrappers.length=0}destroy(){this.destroyToolPanelWrappers(),super.destroy()}};Tp.TEMPLATE=`<div class="ag-side-bar ag-unselectable">
            <ag-side-bar-buttons ref="sideBarButtons"></ag-side-bar-buttons>
        </div>`;Hs([W("focusService")],Tp.prototype,"focusService",2);Hs([W("filterManager")],Tp.prototype,"filterManager",2);Hs([W("sideBarService")],Tp.prototype,"sideBarService",2);Hs([pe("sideBarButtons")],Tp.prototype,"sideBarButtonsComp",2);Hs([de],Tp.prototype,"postConstruct",1);var Sre=Tp,rC=class extends ye{constructor(){super(...arguments),this.isColGroupDef=t=>t&&typeof t.children<"u",this.getId=t=>this.isColGroupDef(t)?t.groupId:t.colId}createColumnTree(t){const e=[],i=(r,n)=>{if(this.isColGroupDef(r)){const o=r,a=typeof o.groupId<"u"?o.groupId:o.headerName,l=new bi(o,a,!1,n),c=[];return o.children.forEach(u=>{const d=i(u,n+1);d&&c.push(d)}),l.setChildren(c),l}else{const o=r,a=o.colId?o.colId:o.field,l=this.columnModel.getPrimaryColumn(a);return l||e.push(o),l}},s=[];return t.forEach(r=>{const n=i(r,0);n&&s.push(n)}),e.length>0&&console.warn("AG Grid: unable to find grid columns for the supplied colDef(s):",e),s}syncLayoutWithGrid(t){const e=this.getLeafPathTrees(),i=this.mergeLeafPathTrees(e);t(i)}getLeafPathTrees(){const t=(s,r)=>{let n;if(s instanceof bi)if(s.isPadding())n=r;else{const a=Object.assign({},s.getColGroupDef());a.groupId=s.getGroupId(),a.children=[r],n=a}else{const a=Object.assign({},s.getColDef());a.colId=s.getColId(),n=a}const o=s.getOriginalParent();return o?t(o,n):n};return this.columnModel.getAllGridColumns().filter(s=>{const r=s.getColDef();return s.isPrimary()&&!r.showRowGroup}).map(s=>t(s,s.getColDef()))}mergeLeafPathTrees(t){const e=(r,n)=>this.isColGroupDef(r)&&this.isColGroupDef(n)&&this.getId(r)===this.getId(n),i=(r,n)=>{if(!this.isColGroupDef(n))return r;const o=r,a=n;return a.children&&a.groupId&&this.addChildrenToGroup(o,a.groupId,a.children[0])||a.children.forEach(l=>i(o,l)),o},s=[];for(let r=1;r<=t.length;r++){const n=t[r-1],o=t[r];e(n,o)?t[r]=i(n,o):s.push(n)}return s}addChildrenToGroup(t,e,i){const s=(o,a)=>{const l=o.children.map(this.getId),c=Q.includes(l,this.getId(a)),u=Q.last(o.children),d=u&&this.getId(u)!==this.getId(a);return c&&d};if(!this.isColGroupDef(t))return!0;const r=t,n=i;if(s(r,n))return r.children.push(n),!0;if(r.groupId===e){const o=r.children.map(this.getId);if(!Q.includes(o,this.getId(n)))return r.children.push(n),!0}return r.children.forEach(o=>this.addChildrenToGroup(o,e,i)),!1}};Hs([W("columnModel")],rC.prototype,"columnModel",2);rC=Hs([Me("toolPanelColDefService")],rC);var xre="31.3.4",LA=class extends ye{registerSideBarComp(t){this.sideBarComp=t}getSideBarComp(){return this.sideBarComp}};LA=Hs([Me("sideBarService")],LA);var YE={version:xre,moduleName:Ut.SideBarModule,beans:[rC,LA],agStackComponents:[{componentName:"AgHorizontalResize",componentClass:$E},{componentName:"AgSideBar",componentClass:Sre},{componentName:"AgSideBarButtons",componentClass:h9}],dependantModules:[Qs]},g9=Object.defineProperty,Ere=Object.getOwnPropertyDescriptor,qL=Object.getOwnPropertySymbols,Tre=Object.prototype.hasOwnProperty,_re=Object.prototype.propertyIsEnumerable,XL=(t,e,i)=>e in t?g9(t,e,{enumerable:!0,configurable:!0,writable:!0,value:i}):t[e]=i,ZL=(t,e)=>{for(var i in e||(e={}))Tre.call(e,i)&&XL(t,i,e[i]);if(qL)for(var i of qL(e))_re.call(e,i)&&XL(t,i,e[i]);return t},Yt=(t,e,i,s)=>{for(var r=s>1?void 0:s?Ere(e,i):e,n=t.length-1,o;n>=0;n--)(o=t[n])&&(r=(s?o(e,i,r):o(r))||r);return s&&r&&g9(e,i,r),r},Ad=class lw extends Te{constructor(){super(lw.TEMPLATE)}postConstruct(){this.createExpandIcons(),this.addManagedListener(this.eExpand,"click",this.onExpandClicked.bind(this)),this.addManagedListener(this.eExpand,"keydown",i=>{i.key===ce.SPACE&&(i.preventDefault(),this.onExpandClicked())}),this.addManagedListener(this.eSelect.getInputElement(),"click",this.onSelectClicked.bind(this)),this.addManagedPropertyListener("functionsReadOnly",()=>this.onFunctionsReadOnlyPropChanged()),this.eFilterTextField.setAutoComplete(!1).onValueChange(()=>this.onFilterTextChanged()),this.addManagedListener(this.eFilterTextField.getInputElement(),"keydown",this.onMiniFilterKeyDown.bind(this)),this.addManagedListener(this.eventService,K.EVENT_NEW_COLUMNS_LOADED,this.showOrHideOptions.bind(this));const e=this.localeService.getLocaleTextFunc();this.eSelect.setInputAriaLabel(e("ariaColumnSelectAll","Toggle Select All Columns")),this.eFilterTextField.setInputAriaLabel(e("ariaFilterColumnsInput","Filter Columns Input")),this.activateTabIndex([this.eExpand])}onFunctionsReadOnlyPropChanged(){const e=this.gos.get("functionsReadOnly");this.eSelect.setReadOnly(e),this.eSelect.addOrRemoveCssClass("ag-column-select-column-readonly",e)}init(e){this.params=e;const i=this.gos.get("functionsReadOnly");this.eSelect.setReadOnly(i),this.eSelect.addOrRemoveCssClass("ag-column-select-column-readonly",i),this.columnModel.isReady()&&this.showOrHideOptions()}createExpandIcons(){this.eExpand.appendChild(this.eExpandChecked=Q.createIconNoSpan("columnSelectOpen",this.gos)),this.eExpand.appendChild(this.eExpandUnchecked=Q.createIconNoSpan("columnSelectClosed",this.gos)),this.eExpand.appendChild(this.eExpandIndeterminate=Q.createIconNoSpan("columnSelectIndeterminate",this.gos)),this.setExpandState(0)}showOrHideOptions(){const e=!this.params.suppressColumnFilter,i=!this.params.suppressColumnSelectAll,s=!this.params.suppressColumnExpandAll,r=this.columnModel.isPrimaryColumnGroupsPresent(),n=this.localeService.getLocaleTextFunc();this.eFilterTextField.setInputPlaceholder(n("searchOoo","Search...")),Q.setDisplayed(this.eFilterTextField.getGui(),e),Q.setDisplayed(this.eSelect.getGui(),i),Q.setDisplayed(this.eExpand,s&&r)}onFilterTextChanged(){this.onFilterTextChangedDebounced||(this.onFilterTextChangedDebounced=Q.debounce(()=>{const e=this.eFilterTextField.getValue();this.dispatchEvent({type:"filterChanged",filterText:e})},lw.DEBOUNCE_DELAY)),this.onFilterTextChangedDebounced()}onMiniFilterKeyDown(e){e.key===ce.ENTER&&setTimeout(()=>this.onSelectClicked(),lw.DEBOUNCE_DELAY)}onSelectClicked(){this.dispatchEvent({type:this.selectState?"unselectAll":"selectAll"})}onExpandClicked(){this.dispatchEvent({type:this.expandState===0?"collapseAll":"expandAll"})}setExpandState(e){this.expandState=e,Q.setDisplayed(this.eExpandChecked,this.expandState===0),Q.setDisplayed(this.eExpandUnchecked,this.expandState===1),Q.setDisplayed(this.eExpandIndeterminate,this.expandState===2)}setSelectionState(e){this.selectState=e,this.eSelect.setValue(this.selectState)}};Ad.DEBOUNCE_DELAY=300;Ad.TEMPLATE=`<div class="ag-column-select-header" role="presentation">
            <div ref="eExpand" class="ag-column-select-header-icon"></div>
            <ag-checkbox ref="eSelect" class="ag-column-select-header-checkbox"></ag-checkbox>
            <ag-input-text-field class="ag-column-select-header-filter-wrapper" ref="eFilterTextField"></ag-input-text-field>
        </div>`;Yt([W("columnModel")],Ad.prototype,"columnModel",2);Yt([pe("eExpand")],Ad.prototype,"eExpand",2);Yt([pe("eSelect")],Ad.prototype,"eSelect",2);Yt([pe("eFilterTextField")],Ad.prototype,"eFilterTextField",2);Yt([de],Ad.prototype,"postConstruct",1);var Are=Ad,m9=class v9{constructor(e,i,s,r=!1,n){this.eventService=new In,this.displayName=e,this.dept=s,this.group=r,r?(this.columnGroup=i,this.expanded=n,this.children=[]):this.column=i}isGroup(){return this.group}getDisplayName(){return this.displayName}getColumnGroup(){return this.columnGroup}getColumn(){return this.column}getDept(){return this.dept}isExpanded(){return!!this.expanded}getChildren(){return this.children}isPassesFilter(){return this.passesFilter}setExpanded(e){e!==this.expanded&&(this.expanded=e,this.eventService.dispatchEvent({type:v9.EVENT_EXPANDED_CHANGED}))}setPassesFilter(e){this.passesFilter=e}addEventListener(e,i){this.eventService.addEventListener(e,i)}removeEventListener(e,i){this.eventService.removeEventListener(e,i)}};m9.EVENT_EXPANDED_CHANGED="expandedChanged";var mv=m9,Sm=class extends Te{constructor(t,e,i){super('<div class="ag-menu"></div>'),this.column=t,this.mouseEvent=e,this.parentEl=i,this.displayName=null}postConstruct(){if(this.initializeProperties(this.column),this.buildMenuItemMap(),this.column instanceof Nt?this.displayName=this.columnModel.getDisplayNameForColumn(this.column,"columnToolPanel"):this.displayName=this.columnModel.getDisplayNameForProvidedColumnGroup(null,this.column,"columnToolPanel"),this.isActive()){this.mouseEvent.preventDefault();const t=this.getMappedMenuItems();if(t.length===0)return;this.displayContextMenu(t)}}initializeProperties(t){t instanceof bi?this.columns=t.getLeafColumns():this.columns=[t],this.allowGrouping=this.columns.some(e=>e.isPrimary()&&e.isAllowRowGroup()),this.allowValues=this.columns.some(e=>e.isPrimary()&&e.isAllowValue()),this.allowPivoting=this.columnModel.isPivotMode()&&this.columns.some(e=>e.isPrimary()&&e.isAllowPivot())}buildMenuItemMap(){const t=this.localeService.getLocaleTextFunc();this.menuItemMap=new Map,this.menuItemMap.set("rowGroup",{allowedFunction:e=>e.isPrimary()&&e.isAllowRowGroup()&&!this.columnModel.isColumnGroupingLocked(e),activeFunction:e=>e.isRowGroupActive(),activateLabel:()=>`${t("groupBy","Group by")} ${this.displayName}`,deactivateLabel:()=>`${t("ungroupBy","Un-Group by")} ${this.displayName}`,activateFunction:()=>{const e=this.columnModel.getRowGroupColumns();this.columnModel.setRowGroupColumns(this.addColumnsToList(e),"toolPanelUi")},deActivateFunction:()=>{const e=this.columnModel.getRowGroupColumns();this.columnModel.setRowGroupColumns(this.removeColumnsFromList(e),"toolPanelUi")},addIcon:"menuAddRowGroup",removeIcon:"menuRemoveRowGroup"}),this.menuItemMap.set("value",{allowedFunction:e=>e.isPrimary()&&e.isAllowValue(),activeFunction:e=>e.isValueActive(),activateLabel:()=>t("addToValues",`Add ${this.displayName} to values`,[this.displayName]),deactivateLabel:()=>t("removeFromValues",`Remove ${this.displayName} from values`,[this.displayName]),activateFunction:()=>{const e=this.columnModel.getValueColumns();this.columnModel.setValueColumns(this.addColumnsToList(e),"toolPanelUi")},deActivateFunction:()=>{const e=this.columnModel.getValueColumns();this.columnModel.setValueColumns(this.removeColumnsFromList(e),"toolPanelUi")},addIcon:"valuePanel",removeIcon:"valuePanel"}),this.menuItemMap.set("pivot",{allowedFunction:e=>this.columnModel.isPivotMode()&&e.isPrimary()&&e.isAllowPivot(),activeFunction:e=>e.isPivotActive(),activateLabel:()=>t("addToLabels",`Add ${this.displayName} to labels`,[this.displayName]),deactivateLabel:()=>t("removeFromLabels",`Remove ${this.displayName} from labels`,[this.displayName]),activateFunction:()=>{const e=this.columnModel.getPivotColumns();this.columnModel.setPivotColumns(this.addColumnsToList(e),"toolPanelUi")},deActivateFunction:()=>{const e=this.columnModel.getPivotColumns();this.columnModel.setPivotColumns(this.removeColumnsFromList(e),"toolPanelUi")},addIcon:"pivotPanel",removeIcon:"pivotPanel"})}addColumnsToList(t){return[...t].concat(this.columns.filter(e=>t.indexOf(e)===-1))}removeColumnsFromList(t){return t.filter(e=>this.columns.indexOf(e)===-1)}displayContextMenu(t){const e=this.getGui(),i=this.createBean(new od),s=this.localeService.getLocaleTextFunc();let r=()=>{};e.appendChild(i.getGui()),i.addMenuItems(t),i.addManagedListener(i,Jn.EVENT_CLOSE_MENU,()=>{this.parentEl.focus(),r()});const n=this.popupService.addPopup({modal:!0,eChild:e,closeOnEsc:!0,afterGuiAttached:()=>this.focusService.focusInto(i.getGui()),ariaLabel:s("ariaLabelContextMenu","Context Menu"),closedCallback:o=>{o instanceof KeyboardEvent&&this.parentEl.focus(),this.destroyBean(i)}});n&&(r=n.hideFunc),this.popupService.positionPopupUnderMouseEvent({type:"columnContextMenu",mouseEvent:this.mouseEvent,ePopup:e})}isActive(){return this.allowGrouping||this.allowValues||this.allowPivoting}getMappedMenuItems(){const t=[];for(const e of this.menuItemMap.values()){const i=this.columns.some(r=>e.allowedFunction(r)&&!e.activeFunction(r)),s=this.columns.some(r=>e.allowedFunction(r)&&e.activeFunction(r));i&&t.push({name:e.activateLabel(this.displayName),icon:Q.createIconNoSpan(e.addIcon,this.gos,null),action:()=>e.activateFunction()}),s&&t.push({name:e.deactivateLabel(this.displayName),icon:Q.createIconNoSpan(e.removeIcon,this.gos,null),action:()=>e.deActivateFunction()})}return t}};Yt([W("columnModel")],Sm.prototype,"columnModel",2);Yt([W("popupService")],Sm.prototype,"popupService",2);Yt([W("focusService")],Sm.prototype,"focusService",2);Yt([de],Sm.prototype,"postConstruct",1);var La=class y9 extends Te{constructor(e,i,s,r){super(),this.modelItem=e,this.allowDragging=i,this.eventType=s,this.focusWrapper=r,this.processingColumnStateChange=!1,this.modelItem=e,this.columnGroup=e.getColumnGroup(),this.columnDept=e.getDept(),this.displayName=e.getDisplayName(),this.allowDragging=i}init(){this.setTemplate(y9.TEMPLATE),this.eDragHandle=Q.createIconNoSpan("columnDrag",this.gos),this.eDragHandle.classList.add("ag-drag-handle","ag-column-select-column-group-drag-handle");const e=this.cbSelect.getGui(),i=this.cbSelect.getInputElement();e.insertAdjacentElement("afterend",this.eDragHandle),i.setAttribute("tabindex","-1"),this.eLabel.innerHTML=this.displayName?this.displayName:"",this.setupExpandContract(),this.addCssClass("ag-column-select-indent-"+this.columnDept),this.addManagedListener(this.eventService,K.EVENT_COLUMN_PIVOT_MODE_CHANGED,this.onColumnStateChanged.bind(this)),this.addManagedListener(this.eLabel,"click",this.onLabelClicked.bind(this)),this.addManagedListener(this.cbSelect,K.EVENT_FIELD_VALUE_CHANGED,this.onCheckboxChanged.bind(this)),this.addManagedListener(this.modelItem,mv.EVENT_EXPANDED_CHANGED,this.onExpandChanged.bind(this)),this.addManagedListener(this.focusWrapper,"keydown",this.handleKeyDown.bind(this)),this.addManagedListener(this.focusWrapper,"contextmenu",this.onContextMenu.bind(this)),this.setOpenClosedIcons(),this.setupDragging(),this.onColumnStateChanged(),this.addVisibilityListenersToAllChildren(),this.refreshAriaExpanded(),this.refreshAriaLabel(),this.setupTooltip(),td.getToolPanelClassesFromColDef(this.columnGroup.getColGroupDef(),this.gos,null,this.columnGroup).forEach(r=>this.addOrRemoveCssClass(r,!0))}getColumns(){return this.columnGroup.getLeafColumns()}setupTooltip(){const e=this.columnGroup.getColGroupDef();if(!e)return;const i=this.gos.get("tooltipShowMode")==="whenTruncated";let s;i&&(s=()=>this.eLabel.scrollWidth>this.eLabel.clientWidth);const r=()=>{const n=e.headerTooltip;this.setTooltip({newTooltipText:n,location:"columnToolPanelColumnGroup",shouldDisplayTooltip:s})};r(),this.addManagedListener(this.eventService,K.EVENT_NEW_COLUMNS_LOADED,r)}getTooltipParams(){const e=super.getTooltipParams();return e.location="columnToolPanelColumnGroup",e}handleKeyDown(e){switch(e.key){case ce.LEFT:e.preventDefault(),this.modelItem.setExpanded(!1);break;case ce.RIGHT:e.preventDefault(),this.modelItem.setExpanded(!0);break;case ce.SPACE:e.preventDefault(),this.isSelectable()&&this.onSelectAllChanged(!this.isSelected());break}}onContextMenu(e){const{columnGroup:i,gos:s}=this;if(s.get("functionsReadOnly"))return;const r=this.createBean(new Sm(i,e,this.focusWrapper));this.addDestroyFunc(()=>{r.isAlive()&&this.destroyBean(r)})}addVisibilityListenersToAllChildren(){this.columnGroup.getLeafColumns().forEach(e=>{this.addManagedListener(e,Nt.EVENT_VISIBLE_CHANGED,this.onColumnStateChanged.bind(this)),this.addManagedListener(e,Nt.EVENT_VALUE_CHANGED,this.onColumnStateChanged.bind(this)),this.addManagedListener(e,Nt.EVENT_PIVOT_CHANGED,this.onColumnStateChanged.bind(this)),this.addManagedListener(e,Nt.EVENT_ROW_GROUP_CHANGED,this.onColumnStateChanged.bind(this))})}setupDragging(){if(!this.allowDragging){Q.setDisplayed(this.eDragHandle,!1);return}let e=!this.gos.get("suppressDragLeaveHidesColumns");const i={type:Ln.ToolPanel,eElement:this.eDragHandle,dragItemName:this.displayName,getDefaultIconName:()=>e?st.ICON_HIDE:st.ICON_NOT_ALLOWED,getDragItem:()=>this.createDragItem(),onDragStarted:()=>{e=!this.gos.get("suppressDragLeaveHidesColumns");const s={type:K.EVENT_COLUMN_PANEL_ITEM_DRAG_START,column:this.columnGroup};this.eventService.dispatchEvent(s)},onDragStopped:()=>{const s={type:K.EVENT_COLUMN_PANEL_ITEM_DRAG_END};this.eventService.dispatchEvent(s)},onGridEnter:s=>{e&&this.modelItemUtils.updateColumns({columns:this.columnGroup.getLeafColumns(),visibleState:s==null?void 0:s.visibleState,pivotState:s==null?void 0:s.pivotState,eventType:this.eventType})},onGridExit:()=>{e&&this.onChangeCommon(!1)}};this.dragAndDropService.addDragSource(i,!0),this.addDestroyFunc(()=>this.dragAndDropService.removeDragSource(i))}createDragItem(){const e=this.columnGroup.getLeafColumns(),i={},s={};return e.forEach(r=>{const n=r.getId();i[n]=r.isVisible(),s[n]=this.modelItemUtils.createPivotState(r)}),{columns:e,visibleState:i,pivotState:s}}setupExpandContract(){this.eGroupClosedIcon.appendChild(Q.createIcon("columnSelectClosed",this.gos,null)),this.eGroupOpenedIcon.appendChild(Q.createIcon("columnSelectOpen",this.gos,null)),this.addManagedListener(this.eGroupClosedIcon,"click",this.onExpandOrContractClicked.bind(this)),this.addManagedListener(this.eGroupOpenedIcon,"click",this.onExpandOrContractClicked.bind(this));const e=new Es(this.eColumnGroupIcons,!0);this.addManagedListener(e,Es.EVENT_TAP,this.onExpandOrContractClicked.bind(this)),this.addDestroyFunc(e.destroy.bind(e))}onLabelClicked(){const e=!this.cbSelect.getValue();this.onChangeCommon(e)}onCheckboxChanged(e){this.onChangeCommon(e.selected)}getVisibleLeafColumns(){const e=[],i=s=>{s.forEach(r=>{r.isPassesFilter()&&(r.isGroup()?i(r.getChildren()):e.push(r.getColumn()))})};return i(this.modelItem.getChildren()),e}onChangeCommon(e){this.refreshAriaLabel(),!this.processingColumnStateChange&&this.modelItemUtils.selectAllChildren(this.modelItem.getChildren(),e,this.eventType)}refreshAriaLabel(){const e=this.localeService.getLocaleTextFunc(),i=e("ariaColumnGroup","Column Group"),s=this.cbSelect.getValue(),r=s===void 0?e("ariaIndeterminate","indeterminate"):s?e("ariaVisible","visible"):e("ariaHidden","hidden"),n=e("ariaToggleVisibility","Press SPACE to toggle visibility");Q.setAriaLabel(this.focusWrapper,`${this.displayName} ${i}`),this.cbSelect.setInputAriaLabel(`${n} (${r})`),Q.setAriaDescribedBy(this.focusWrapper,this.cbSelect.getInputElement().id)}onColumnStateChanged(){const e=this.workOutSelectedValue(),i=this.workOutReadOnlyValue();this.processingColumnStateChange=!0,this.cbSelect.setValue(e),this.cbSelect.setReadOnly(i),this.addOrRemoveCssClass("ag-column-select-column-group-readonly",i),this.processingColumnStateChange=!1}workOutSelectedValue(){const e=this.columnModel.isPivotMode(),i=this.getVisibleLeafColumns();let s=0,r=0;if(i.forEach(n=>{!e&&n.getColDef().lockVisible||(this.isColumnChecked(n,e)?s++:r++)}),!(s>0&&r>0))return s>0}workOutReadOnlyValue(){const e=this.columnModel.isPivotMode();let i=0;return this.columnGroup.getLeafColumns().forEach(s=>{e?s.isAnyFunctionAllowed()&&i++:s.getColDef().lockVisible||i++}),i===0}isColumnChecked(e,i){if(i){const s=e.isPivotActive(),r=e.isRowGroupActive(),n=e.isValueActive();return s||r||n}return e.isVisible()}onExpandOrContractClicked(){const e=this.modelItem.isExpanded();this.modelItem.setExpanded(!e)}onExpandChanged(){this.setOpenClosedIcons(),this.refreshAriaExpanded()}setOpenClosedIcons(){const e=this.modelItem.isExpanded();Q.setDisplayed(this.eGroupClosedIcon,!e),Q.setDisplayed(this.eGroupOpenedIcon,e)}refreshAriaExpanded(){Q.setAriaExpanded(this.focusWrapper,this.modelItem.isExpanded())}getDisplayName(){return this.displayName}onSelectAllChanged(e){const i=this.cbSelect.getValue();!this.cbSelect.isReadOnly()&&(e&&!i||!e&&i)&&this.cbSelect.toggle()}isSelected(){return this.cbSelect.getValue()}isSelectable(){return!this.cbSelect.isReadOnly()}setSelected(e){this.cbSelect.setValue(e,!0)}};La.TEMPLATE=`<div class="ag-column-select-column-group" aria-hidden="true">
            <span class="ag-column-group-icons" ref="eColumnGroupIcons" >
                <span class="ag-column-group-closed-icon" ref="eGroupClosedIcon"></span>
                <span class="ag-column-group-opened-icon" ref="eGroupOpenedIcon"></span>
            </span>
            <ag-checkbox ref="cbSelect" class="ag-column-select-checkbox"></ag-checkbox>
            <span class="ag-column-select-column-label" ref="eLabel"></span>
        </div>`;Yt([W("columnModel")],La.prototype,"columnModel",2);Yt([W("dragAndDropService")],La.prototype,"dragAndDropService",2);Yt([W("modelItemUtils")],La.prototype,"modelItemUtils",2);Yt([pe("cbSelect")],La.prototype,"cbSelect",2);Yt([pe("eLabel")],La.prototype,"eLabel",2);Yt([pe("eGroupOpenedIcon")],La.prototype,"eGroupOpenedIcon",2);Yt([pe("eGroupClosedIcon")],La.prototype,"eGroupClosedIcon",2);Yt([pe("eColumnGroupIcons")],La.prototype,"eColumnGroupIcons",2);Yt([de],La.prototype,"init",1);var C9=La,w2=class extends ye{constructor(t,e){super(),this.comp=t,this.virtualList=e}postConstruct(){this.createManagedBean(new IC(this.comp,this.virtualList,{dragSourceType:Ln.ToolPanel,listItemDragStartEvent:K.EVENT_COLUMN_PANEL_ITEM_DRAG_START,listItemDragEndEvent:K.EVENT_COLUMN_PANEL_ITEM_DRAG_END,eventSource:this.eventService,getCurrentDragValue:t=>this.getCurrentDragValue(t),isMoveBlocked:t=>this.isMoveBlocked(t),getNumRows:t=>t.getDisplayedColsList().length,moveItem:(t,e)=>this.moveItem(t,e)}))}getCurrentDragValue(t){return t.column}isMoveBlocked(t){return this.gos.get("suppressMovableColumns")?!0:!!this.getCurrentColumns(t).find(r=>{const n=r.getColDef();return!!n.suppressMovable||!!n.lockPosition})}moveItem(t,e){const i=this.getTargetIndex(t,e),s=this.getCurrentColumns(t);i!=null&&this.columnModel.moveColumns(s,i,"toolPanelUi")}getMoveDiff(t,e){const i=this.columnModel.getAllGridColumns(),s=this.getCurrentColumns(t),r=s[0],n=s.length;return i.indexOf(r)<e?n:0}getCurrentColumns(t){return t instanceof bi?t.getLeafColumns():[t]}getTargetIndex(t,e){if(!e)return null;const i=e.component;let s=e.position==="top",r;if(i instanceof C9?(r=i.getColumns()[0],s=!0):r=i.getColumn(),this.getCurrentColumns(t).indexOf(r)!==-1)return null;const o=this.columnModel.getAllGridColumns().indexOf(r),a=s?o:o+1,l=this.getMoveDiff(t,a);return a-l}};Yt([W("columnModel")],w2.prototype,"columnModel",2);Yt([de],w2.prototype,"postConstruct",1);var Rd=class b9 extends Te{constructor(e,i,s,r){super(),this.allowDragging=i,this.groupsExist=s,this.focusWrapper=r,this.processingColumnStateChange=!1,this.column=e.getColumn(),this.columnDept=e.getDept(),this.displayName=e.getDisplayName()}init(){this.setTemplate(b9.TEMPLATE),this.eDragHandle=Q.createIconNoSpan("columnDrag",this.gos),this.eDragHandle.classList.add("ag-drag-handle","ag-column-select-column-drag-handle");const e=this.cbSelect.getGui(),i=this.cbSelect.getInputElement();e.insertAdjacentElement("afterend",this.eDragHandle),i.setAttribute("tabindex","-1");const s=Q.escapeString(this.displayName);this.eLabel.innerHTML=s;const r=this.columnDept;this.groupsExist&&this.addCssClass("ag-column-select-add-group-indent"),this.addCssClass(`ag-column-select-indent-${r}`),this.setupDragging(),this.addManagedListener(this.eventService,K.EVENT_COLUMN_PIVOT_MODE_CHANGED,this.onColumnStateChanged.bind(this)),this.addManagedListener(this.column,Nt.EVENT_VALUE_CHANGED,this.onColumnStateChanged.bind(this)),this.addManagedListener(this.column,Nt.EVENT_PIVOT_CHANGED,this.onColumnStateChanged.bind(this)),this.addManagedListener(this.column,Nt.EVENT_ROW_GROUP_CHANGED,this.onColumnStateChanged.bind(this)),this.addManagedListener(this.column,Nt.EVENT_VISIBLE_CHANGED,this.onColumnStateChanged.bind(this)),this.addManagedListener(this.focusWrapper,"keydown",this.handleKeyDown.bind(this)),this.addManagedListener(this.focusWrapper,"contextmenu",this.onContextMenu.bind(this)),this.addManagedPropertyListener("functionsReadOnly",this.onColumnStateChanged.bind(this)),this.addManagedListener(this.cbSelect,K.EVENT_FIELD_VALUE_CHANGED,this.onCheckboxChanged.bind(this)),this.addManagedListener(this.eLabel,"click",this.onLabelClicked.bind(this)),this.onColumnStateChanged(),this.refreshAriaLabel(),this.setupTooltip(),td.getToolPanelClassesFromColDef(this.column.getColDef(),this.gos,this.column,null).forEach(o=>this.addOrRemoveCssClass(o,!0))}getColumn(){return this.column}setupTooltip(){const e=this.gos.get("tooltipShowMode")==="whenTruncated";let i;e&&(i=()=>this.eLabel.scrollWidth>this.eLabel.clientWidth);const s=()=>{const r=this.column.getColDef().headerTooltip;this.setTooltip({newTooltipText:r,location:"columnToolPanelColumn",shouldDisplayTooltip:i})};s(),this.addManagedListener(this.eventService,K.EVENT_NEW_COLUMNS_LOADED,s)}getTooltipParams(){const e=super.getTooltipParams();return e.location="columnToolPanelColumn",e.colDef=this.column.getColDef(),e}onContextMenu(e){const{column:i,gos:s}=this;if(s.get("functionsReadOnly"))return;const r=this.createBean(new Sm(i,e,this.focusWrapper));this.addDestroyFunc(()=>{r.isAlive()&&this.destroyBean(r)})}handleKeyDown(e){e.key===ce.SPACE&&(e.preventDefault(),this.isSelectable()&&this.onSelectAllChanged(!this.isSelected()))}onLabelClicked(){if(this.gos.get("functionsReadOnly"))return;const e=!this.cbSelect.getValue();this.onChangeCommon(e)}onCheckboxChanged(e){this.onChangeCommon(e.selected)}onChangeCommon(e){this.cbSelect.isReadOnly()||(this.refreshAriaLabel(),!this.processingColumnStateChange&&this.modelItemUtils.setColumn(this.column,e,"toolPanelUi"))}refreshAriaLabel(){const e=this.localeService.getLocaleTextFunc(),i=e("ariaColumn","Column"),s=this.cbSelect.getValue()?e("ariaVisible","visible"):e("ariaHidden","hidden"),r=e("ariaToggleVisibility","Press SPACE to toggle visibility");Q.setAriaLabel(this.focusWrapper,`${this.displayName} ${i}`),this.cbSelect.setInputAriaLabel(`${r} (${s})`),Q.setAriaDescribedBy(this.focusWrapper,this.cbSelect.getInputElement().id)}setupDragging(){if(!this.allowDragging){Q.setDisplayed(this.eDragHandle,!1);return}let e=!this.gos.get("suppressDragLeaveHidesColumns");const i={type:Ln.ToolPanel,eElement:this.eDragHandle,dragItemName:this.displayName,getDefaultIconName:()=>e?st.ICON_HIDE:st.ICON_NOT_ALLOWED,getDragItem:()=>this.createDragItem(),onDragStarted:()=>{e=!this.gos.get("suppressDragLeaveHidesColumns");const s={type:K.EVENT_COLUMN_PANEL_ITEM_DRAG_START,column:this.column};this.eventService.dispatchEvent(s)},onDragStopped:()=>{const s={type:K.EVENT_COLUMN_PANEL_ITEM_DRAG_END};this.eventService.dispatchEvent(s)},onGridEnter:s=>{e&&this.modelItemUtils.updateColumns({columns:[this.column],visibleState:s==null?void 0:s.visibleState,pivotState:s==null?void 0:s.pivotState,eventType:"toolPanelUi"})},onGridExit:()=>{e&&this.onChangeCommon(!1)}};this.dragAndDropService.addDragSource(i,!0),this.addDestroyFunc(()=>this.dragAndDropService.removeDragSource(i))}createDragItem(){const e=this.column.getColId(),i={[e]:this.column.isVisible()},s={[e]:this.modelItemUtils.createPivotState(this.column)};return{columns:[this.column],visibleState:i,pivotState:s}}onColumnStateChanged(){this.processingColumnStateChange=!0;const e=this.columnModel.isPivotMode();if(e){const n=this.column.isAnyFunctionActive();this.cbSelect.setValue(n)}else this.cbSelect.setValue(this.column.isVisible());let i=!0,s=!0;if(e){const n=this.gos.get("functionsReadOnly"),o=!this.column.isAnyFunctionAllowed();i=!n&&!o,s=i}else{const{enableRowGroup:n,enableValue:o,lockPosition:a,suppressMovable:l,lockVisible:c}=this.column.getColDef(),u=!!n||!!o,d=!!a||!!l;i=!c,s=u||!d}this.cbSelect.setReadOnly(!i),this.eDragHandle.classList.toggle("ag-column-select-column-readonly",!s),this.addOrRemoveCssClass("ag-column-select-column-readonly",!s&&!i);const r=e&&this.gos.get("functionsPassive");this.cbSelect.setPassive(r),this.processingColumnStateChange=!1}getDisplayName(){return this.displayName}onSelectAllChanged(e){e!==this.cbSelect.getValue()&&(this.cbSelect.isReadOnly()||this.cbSelect.toggle())}isSelected(){return this.cbSelect.getValue()}isSelectable(){return!this.cbSelect.isReadOnly()}isExpandable(){return!1}setExpanded(e){console.warn("AG Grid: can not expand a column item that does not represent a column group header")}};Rd.TEMPLATE=`<div class="ag-column-select-column" aria-hidden="true">
            <ag-checkbox ref="cbSelect" class="ag-column-select-checkbox"></ag-checkbox>
            <span class="ag-column-select-column-label" ref="eLabel"></span>
        </div>`;Yt([W("columnModel")],Rd.prototype,"columnModel",2);Yt([W("dragAndDropService")],Rd.prototype,"dragAndDropService",2);Yt([W("modelItemUtils")],Rd.prototype,"modelItemUtils",2);Yt([pe("eLabel")],Rd.prototype,"eLabel",2);Yt([pe("cbSelect")],Rd.prototype,"cbSelect",2);Yt([de],Rd.prototype,"init",1);var Rre=Rd,Mre=class{constructor(t){this.items=t}getRowCount(){return this.items.length}getRow(t){return this.items[t]}},Dre="ag-column-select-list",xm=class w9 extends Te{constructor(){super(w9.TEMPLATE),this.destroyColumnItemFuncs=[],this.hasLoadedInitialState=!1,this.isInitialState=!1}destroyColumnTree(){this.allColsTree=[],this.destroyColumnItemFuncs.forEach(e=>e()),this.destroyColumnItemFuncs=[]}init(e,i,s){this.params=e,this.allowDragging=i,this.eventType=s,this.params.suppressSyncLayoutWithGrid||this.addManagedListener(this.eventService,K.EVENT_COLUMN_MOVED,this.onColumnsChanged.bind(this)),this.addManagedListener(this.eventService,K.EVENT_NEW_COLUMNS_LOADED,this.onColumnsChanged.bind(this)),[K.EVENT_COLUMN_PIVOT_CHANGED,K.EVENT_COLUMN_PIVOT_MODE_CHANGED,K.EVENT_COLUMN_ROW_GROUP_CHANGED,K.EVENT_COLUMN_VALUE_CHANGED,K.EVENT_COLUMN_VISIBLE,K.EVENT_NEW_COLUMNS_LOADED].forEach(n=>{this.addManagedListener(this.eventService,n,this.fireSelectionChangedEvent.bind(this))}),this.expandGroupsByDefault=!this.params.contractColumnSelection,this.virtualList=this.createManagedBean(new tp({cssIdentifier:"column-select",ariaRole:"tree"})),this.appendChild(this.virtualList.getGui()),this.virtualList.setComponentCreator((n,o)=>(Q.setAriaLevel(o,n.getDept()+1),this.createComponentFromItem(n,o))),this.columnModel.isReady()&&this.onColumnsChanged(),!this.params.suppressColumnMove&&this.createManagedBean(new w2(this,this.virtualList))}createComponentFromItem(e,i){if(e.isGroup()){const r=new C9(e,this.allowDragging,this.eventType,i);return this.getContext().createBean(r),r}const s=new Rre(e,this.allowDragging,this.groupsExist,i);return this.getContext().createBean(s),s}onColumnsChanged(){this.hasLoadedInitialState||(this.hasLoadedInitialState=!0,this.isInitialState=!!this.params.initialState);const e=this.getExpandedStates(),i=this.columnModel.isPivotMode();!this.params.suppressSyncLayoutWithGrid&&!i?this.buildTreeFromWhatGridIsDisplaying():this.buildTreeFromProvidedColumnDefs(),this.setExpandedStates(e),this.markFilteredColumns(),this.flattenAndFilterModel(),this.isInitialState=!1}getDisplayedColsList(){return this.displayedColsList}getExpandedStates(){const e={};if(this.isInitialState){const{expandedGroupIds:i}=this.params.initialState;return i.forEach(s=>{e[s]=!0}),e}return this.allColsTree?(this.forEachItem(i=>{if(!i.isGroup())return;const s=i.getColumnGroup();s&&(e[s.getId()]=i.isExpanded())}),e):{}}setExpandedStates(e){if(!this.allColsTree)return;const{isInitialState:i}=this;this.forEachItem(s=>{if(!s.isGroup())return;const r=s.getColumnGroup();if(r){const n=e[r.getId()];(n!=null||i)&&s.setExpanded(!!n)}})}buildTreeFromWhatGridIsDisplaying(){this.colDefService.syncLayoutWithGrid(this.setColumnLayout.bind(this))}setColumnLayout(e){const i=this.colDefService.createColumnTree(e);this.buildListModel(i),this.groupsExist=e.some(s=>s&&typeof s.children<"u"),this.markFilteredColumns(),this.flattenAndFilterModel()}buildTreeFromProvidedColumnDefs(){this.buildListModel(this.columnModel.getPrimaryColumnTree()),this.groupsExist=this.columnModel.isPrimaryColumnGroupsPresent()}buildListModel(e){const i=this.onColumnExpanded.bind(this),s=a=>{a.addEventListener(mv.EVENT_EXPANDED_CHANGED,i);const l=a.removeEventListener.bind(a,mv.EVENT_EXPANDED_CHANGED,i);this.destroyColumnItemFuncs.push(l)},r=(a,l,c)=>{a.forEach(u=>{u instanceof bi?n(u,l,c):o(u,l,c)})},n=(a,l,c)=>{const u=a.getColGroupDef();if(u&&u.suppressColumnsToolPanel)return;if(a.isPadding()){r(a.getChildren(),l,c);return}const h=this.columnModel.getDisplayNameForProvidedColumnGroup(null,a,"columnToolPanel"),p=new mv(h,a,l,!0,this.expandGroupsByDefault);c.push(p),s(p),r(a.getChildren(),l+1,p.getChildren())},o=(a,l,c)=>{if(a.getColDef()&&a.getColDef().suppressColumnsToolPanel)return;const d=this.columnModel.getDisplayNameForColumn(a,"columnToolPanel");c.push(new mv(d,a,l))};this.destroyColumnTree(),r(e,0,this.allColsTree)}onColumnExpanded(){this.flattenAndFilterModel()}flattenAndFilterModel(){this.displayedColsList=[];const e=s=>{s.isPassesFilter()&&(this.displayedColsList.push(s),s.isGroup()&&s.isExpanded()&&s.getChildren().forEach(e))};this.allColsTree.forEach(e),this.virtualList.setModel(new Mre(this.displayedColsList));const i=this.virtualList.getLastFocusedRow();this.virtualList.refresh(),i!=null&&this.focusRowIfAlive(i),this.notifyListeners(),this.refreshAriaLabel()}refreshAriaLabel(){const e=this.localeService.getLocaleTextFunc(),i=e("ariaColumnPanelList","Column List"),s=e("columns","Columns"),r=this.displayedColsList.length;Q.setAriaLabel(this.virtualList.getAriaElement(),`${i} ${r} ${s}`)}focusRowIfAlive(e){window.setTimeout(()=>{this.isAlive()&&this.virtualList.focusRow(e)},0)}forEachItem(e){const i=s=>{s.forEach(r=>{e(r),r.isGroup()&&i(r.getChildren())})};this.allColsTree&&i(this.allColsTree)}doSetExpandedAll(e){this.forEachItem(i=>{i.isGroup()&&i.setExpanded(e)})}setGroupsExpanded(e,i){if(!i){this.doSetExpandedAll(e);return}const s=[];this.forEachItem(n=>{if(!n.isGroup())return;const o=n.getColumnGroup().getId();i.indexOf(o)>=0&&(n.setExpanded(e),s.push(o))});const r=i.filter(n=>!Q.includes(s,n));r.length>0&&console.warn("AG Grid: unable to find group(s) for supplied groupIds:",r)}getExpandState(){let e=0,i=0;return this.forEachItem(s=>{s.isGroup()&&(s.isExpanded()?e++:i++)}),e>0&&i>0?2:i>0?1:0}doSetSelectedAll(e){this.modelItemUtils.selectAllChildren(this.allColsTree,e,this.eventType)}getSelectionState(){let e=0,i=0;const s=this.columnModel.isPivotMode();if(this.forEachItem(r=>{if(r.isGroup()||!r.isPassesFilter())return;const n=r.getColumn(),o=n.getColDef();let a;if(s){if(!n.isAllowPivot()&&!n.isAllowRowGroup()&&!n.isAllowValue())return;a=n.isValueActive()||n.isPivotActive()||n.isRowGroupActive()}else{if(o.lockVisible)return;a=n.isVisible()}a?e++:i++}),!(e>0&&i>0))return!(e===0||i>0)}setFilterText(e){this.filterText=Q.exists(e)?e.toLowerCase():null,this.markFilteredColumns(),this.flattenAndFilterModel()}markFilteredColumns(){const e=s=>{if(!Q.exists(this.filterText))return!0;const r=s.getDisplayName();return r==null||r.toLowerCase().indexOf(this.filterText)!==-1},i=(s,r)=>{let n=!1;if(s.isGroup()){const a=e(s);s.getChildren().forEach(l=>{const c=i(l,a||r);c&&(n=c)})}const o=r||n?!0:e(s);return s.setPassesFilter(o),o};this.allColsTree.forEach(s=>i(s,!1))}notifyListeners(){this.fireGroupExpandedEvent(),this.fireSelectionChangedEvent()}fireGroupExpandedEvent(){const e=this.getExpandState();this.dispatchEvent({type:"groupExpanded",state:e})}fireSelectionChangedEvent(){if(!this.allColsTree)return;const e=this.getSelectionState();this.dispatchEvent({type:"selectionChanged",state:e})}getExpandedGroups(){const e=[];return this.allColsTree&&this.forEachItem(i=>{i.isGroup()&&i.isExpanded()&&e.push(i.getColumnGroup().getId())}),e}};xm.TEMPLATE=`<div class="${Dre}" role="presentation"></div>`;Yt([W("columnModel")],xm.prototype,"columnModel",2);Yt([W("toolPanelColDefService")],xm.prototype,"colDefService",2);Yt([W("modelItemUtils")],xm.prototype,"modelItemUtils",2);Yt([Hi],xm.prototype,"destroyColumnTree",1);var Pre=xm,Ag=class extends Te{createTemplate(){return`<div class="ag-pivot-mode-panel">
                <ag-toggle-button ref="cbPivotMode" class="ag-pivot-mode-select"></ag-toggle-button>
            </div>`}init(){this.setTemplate(this.createTemplate()),this.cbPivotMode.setValue(this.columnModel.isPivotMode());const t=this.localeService.getLocaleTextFunc();this.cbPivotMode.setLabel(t("pivotMode","Pivot Mode")),this.addManagedListener(this.cbPivotMode,K.EVENT_FIELD_VALUE_CHANGED,this.onBtPivotMode.bind(this)),this.addManagedListener(this.eventService,K.EVENT_NEW_COLUMNS_LOADED,this.onPivotModeChanged.bind(this)),this.addManagedListener(this.eventService,K.EVENT_COLUMN_PIVOT_MODE_CHANGED,this.onPivotModeChanged.bind(this))}onBtPivotMode(){const t=!!this.cbPivotMode.getValue();if(t!==this.columnModel.isPivotMode()){this.gos.updateGridOptions({options:{pivotMode:t},source:"toolPanelUi"});const{api:e}=this;e&&e.refreshHeader()}}onPivotModeChanged(){const t=this.columnModel.isPivotMode();this.cbPivotMode.setValue(t)}};Yt([W("columnModel")],Ag.prototype,"columnModel",2);Yt([W("gridApi")],Ag.prototype,"api",2);Yt([pe("cbPivotMode")],Ag.prototype,"cbPivotMode",2);Yt([Wh],Ag.prototype,"init",1);var qE=class S9 extends Te{constructor(){super(S9.TEMPLATE)}init(e,i,s){this.allowDragging=e,this.params=i,this.eventType=s,this.primaryColsHeaderPanel.init(this.params);const r=this.params.suppressColumnFilter,n=this.params.suppressColumnSelectAll;this.params.suppressColumnExpandAll&&r&&n&&this.primaryColsHeaderPanel.setDisplayed(!1),this.addManagedListener(this.primaryColsListPanel,"groupExpanded",this.onGroupExpanded.bind(this)),this.addManagedListener(this.primaryColsListPanel,"selectionChanged",this.onSelectionChange.bind(this)),this.primaryColsListPanel.init(this.params,this.allowDragging,this.eventType),this.addManagedListener(this.primaryColsHeaderPanel,"expandAll",this.onExpandAll.bind(this)),this.addManagedListener(this.primaryColsHeaderPanel,"collapseAll",this.onCollapseAll.bind(this)),this.addManagedListener(this.primaryColsHeaderPanel,"selectAll",this.onSelectAll.bind(this)),this.addManagedListener(this.primaryColsHeaderPanel,"unselectAll",this.onUnselectAll.bind(this)),this.addManagedListener(this.primaryColsHeaderPanel,"filterChanged",this.onFilterChanged.bind(this)),this.positionableFeature=new Qu(this.getGui(),{minHeight:100}),this.createManagedBean(this.positionableFeature)}toggleResizable(e){this.positionableFeature.setResizable(e?{bottom:!0}:!1)}onExpandAll(){this.primaryColsListPanel.doSetExpandedAll(!0)}onCollapseAll(){this.primaryColsListPanel.doSetExpandedAll(!1)}expandGroups(e){this.primaryColsListPanel.setGroupsExpanded(!0,e)}collapseGroups(e){this.primaryColsListPanel.setGroupsExpanded(!1,e)}setColumnLayout(e){this.primaryColsListPanel.setColumnLayout(e)}onFilterChanged(e){this.primaryColsListPanel.setFilterText(e.filterText)}syncLayoutWithGrid(){this.primaryColsListPanel.onColumnsChanged()}onSelectAll(){this.primaryColsListPanel.doSetSelectedAll(!0)}onUnselectAll(){this.primaryColsListPanel.doSetSelectedAll(!1)}onGroupExpanded(e){this.primaryColsHeaderPanel.setExpandState(e.state),this.params.onStateUpdated()}onSelectionChange(e){this.primaryColsHeaderPanel.setSelectionState(e.state)}getExpandedGroups(){return this.primaryColsListPanel.getExpandedGroups()}};qE.TEMPLATE=`<div class="ag-column-select">
            <ag-primary-cols-header ref="primaryColsHeaderPanel"></ag-primary-cols-header>
            <ag-primary-cols-list ref="primaryColsListPanel"></ag-primary-cols-list>
        </div>`;Yt([pe("primaryColsHeaderPanel")],qE.prototype,"primaryColsHeaderPanel",2);Yt([pe("primaryColsListPanel")],qE.prototype,"primaryColsListPanel",2);var XE=qE,x9=class E9 extends Te{constructor(){super(E9.TEMPLATE),this.initialised=!1,this.childDestroyFuncs=[]}setVisible(e){super.setDisplayed(e),e&&!this.initialised&&this.init(this.params)}init(e){const i=this.gos.addGridCommonParams({suppressColumnMove:!1,suppressColumnSelectAll:!1,suppressColumnFilter:!1,suppressColumnExpandAll:!1,contractColumnSelection:!1,suppressPivotMode:!1,suppressRowGroups:!1,suppressValues:!1,suppressPivots:!1,suppressSyncLayoutWithGrid:!1});if(this.params=ZL(ZL({},i),e),this.isRowGroupingModuleLoaded()&&!this.params.suppressPivotMode&&(this.pivotModePanel=this.createBean(new Ag),this.childDestroyFuncs.push(()=>this.destroyBean(this.pivotModePanel)),this.appendChild(this.pivotModePanel)),this.primaryColsPanel=this.createBean(new XE),this.childDestroyFuncs.push(()=>this.destroyBean(this.primaryColsPanel)),this.primaryColsPanel.init(!0,this.params,"toolPanelUi"),this.primaryColsPanel.addCssClass("ag-column-panel-column-select"),this.appendChild(this.primaryColsPanel),this.isRowGroupingModuleLoaded()){this.params.suppressRowGroups||(this.rowGroupDropZonePanel=this.createBean(new tC(!1)),this.childDestroyFuncs.push(()=>this.destroyBean(this.rowGroupDropZonePanel)),this.appendChild(this.rowGroupDropZonePanel)),this.params.suppressValues||(this.valuesDropZonePanel=this.createBean(new wS(!1)),this.childDestroyFuncs.push(()=>this.destroyBean(this.valuesDropZonePanel)),this.appendChild(this.valuesDropZonePanel)),this.params.suppressPivots||(this.pivotDropZonePanel=this.createBean(new iC(!1)),this.childDestroyFuncs.push(()=>this.destroyBean(this.pivotDropZonePanel)),this.appendChild(this.pivotDropZonePanel)),this.setLastVisible();const s=this.addManagedListener(this.eventService,K.EVENT_COLUMN_PIVOT_MODE_CHANGED,()=>{this.resetChildrenHeight(),this.setLastVisible()});this.childDestroyFuncs.push(()=>s())}this.initialised=!0}setPivotModeSectionVisible(e){this.isRowGroupingModuleLoaded()&&(this.pivotModePanel?this.pivotModePanel.setDisplayed(e):e&&(this.pivotModePanel=this.createBean(new Ag),this.getGui().insertBefore(this.pivotModePanel.getGui(),this.getGui().firstChild),this.childDestroyFuncs.push(()=>this.destroyBean(this.pivotModePanel))),this.setLastVisible())}setRowGroupsSectionVisible(e){this.isRowGroupingModuleLoaded()&&(this.rowGroupDropZonePanel?this.rowGroupDropZonePanel.setDisplayed(e):e&&(this.rowGroupDropZonePanel=this.createManagedBean(new tC(!1)),this.appendChild(this.rowGroupDropZonePanel)),this.setLastVisible())}setValuesSectionVisible(e){this.isRowGroupingModuleLoaded()&&(this.valuesDropZonePanel?this.valuesDropZonePanel.setDisplayed(e):e&&(this.valuesDropZonePanel=this.createManagedBean(new wS(!1)),this.appendChild(this.valuesDropZonePanel)),this.setLastVisible())}setPivotSectionVisible(e){this.isRowGroupingModuleLoaded()&&(this.pivotDropZonePanel?this.pivotDropZonePanel.setDisplayed(e):e&&(this.pivotDropZonePanel=this.createManagedBean(new iC(!1)),this.appendChild(this.pivotDropZonePanel),this.pivotDropZonePanel.setDisplayed(e)),this.setLastVisible())}setResizers(){[this.primaryColsPanel,this.rowGroupDropZonePanel,this.valuesDropZonePanel,this.pivotDropZonePanel].forEach(e=>{if(!e)return;const i=e.getGui();e.toggleResizable(!i.classList.contains("ag-last-column-drop")&&!i.classList.contains("ag-hidden"))})}setLastVisible(){const e=this.getGui();Array.prototype.slice.call(e.querySelectorAll(".ag-column-drop")).forEach(n=>n.classList.remove("ag-last-column-drop"));const s=e.querySelectorAll(".ag-column-drop:not(.ag-hidden)"),r=Q.last(s);r&&r.classList.add("ag-last-column-drop"),this.setResizers()}resetChildrenHeight(){const i=this.getGui().children;for(let s=0;s<i.length;s++){const r=i[s];r.style.removeProperty("height"),r.style.removeProperty("flex")}}isRowGroupingModuleLoaded(){return vt.__assertRegistered(Ut.RowGroupingModule,"Row Grouping",this.context.getGridId())}expandColumnGroups(e){this.primaryColsPanel.expandGroups(e)}collapseColumnGroups(e){this.primaryColsPanel.collapseGroups(e)}setColumnLayout(e){this.primaryColsPanel.setColumnLayout(e)}syncLayoutWithGrid(){this.primaryColsPanel.syncLayoutWithGrid()}destroyChildren(){this.childDestroyFuncs.forEach(e=>e()),this.childDestroyFuncs.length=0,Q.clearElement(this.getGui())}refresh(e){return this.destroyChildren(),this.init(e),!0}getState(){return{expandedGroupIds:this.primaryColsPanel.getExpandedGroups()}}destroy(){this.destroyChildren(),super.destroy()}};x9.TEMPLATE='<div class="ag-column-panel"></div>';var Ire=x9,Gh=class{selectAllChildren(t,e,i){const s=this.extractAllLeafColumns(t);this.setAllColumns(s,e,i)}setColumn(t,e,i){this.setAllColumns([t],e,i)}setAllColumns(t,e,i){this.columnModel.isPivotMode()?this.setAllPivot(t,e,i):this.setAllVisible(t,e,i)}extractAllLeafColumns(t){const e=[],i=s=>{s.forEach(r=>{r.isPassesFilter()&&(r.isGroup()?i(r.getChildren()):e.push(r.getColumn()))})};return i(t),e}setAllVisible(t,e,i){const s=[];t.forEach(r=>{r.getColDef().lockVisible||r.isVisible()!=e&&s.push({colId:r.getId(),hide:!e})}),s.length>0&&this.columnModel.applyColumnState({state:s},i)}setAllPivot(t,e,i){this.gos.get("functionsPassive")?this.setAllPivotPassive(t,e):this.setAllPivotActive(t,e,i)}setAllPivotPassive(t,e){const i=this.columnModel.getPivotColumns().slice(),s=this.columnModel.getValueColumns().slice(),r=this.columnModel.getRowGroupColumns().slice();let n=!1,o=!1,a=!1;const u=e?d=>{d.isAnyFunctionActive()||(d.isAllowValue()?(s.push(d),o=!0):d.isAllowRowGroup()?(r.push(d),n=!0):d.isAllowPivot()&&(i.push(d),a=!0))}:d=>{d.isAnyFunctionActive()&&(i.indexOf(d)>=0&&(Q.removeFromArray(i,d),n=!0),s.indexOf(d)>=0&&(Q.removeFromArray(s,d),o=!0),r.indexOf(d)>=0&&(Q.removeFromArray(r,d),a=!0))};if(t.forEach(u),n){const d={type:K.EVENT_COLUMN_PIVOT_CHANGE_REQUEST,columns:i};this.eventService.dispatchEvent(d)}if(a){const d={type:K.EVENT_COLUMN_ROW_GROUP_CHANGE_REQUEST,columns:r};this.eventService.dispatchEvent(d)}if(o){const d={type:K.EVENT_COLUMN_VALUE_CHANGE_REQUEST,columns:r};this.eventService.dispatchEvent(d)}}setAllPivotActive(t,e,i){const s=[],o=e?a=>{if(!a.isAnyFunctionActive())if(a.isAllowValue()){const l=typeof a.getAggFunc()=="string"?a.getAggFunc():this.aggFuncService.getDefaultAggFunc(a);s.push({colId:a.getId(),aggFunc:l})}else a.isAllowRowGroup()?s.push({colId:a.getId(),rowGroup:!0}):a.isAllowPivot()&&s.push({colId:a.getId(),pivot:!0})}:a=>{(a.isPivotActive()||a.isRowGroupActive()||a.isValueActive())&&s.push({colId:a.getId(),pivot:!1,rowGroup:!1,aggFunc:null})};t.forEach(o),s.length>0&&this.columnModel.applyColumnState({state:s},i)}updateColumns(t){const{columns:e,visibleState:i,pivotState:s,eventType:r}=t,n=e.map(o=>{const a=o.getColId();if(this.columnModel.isPivotMode()){const l=s==null?void 0:s[a];return{colId:a,pivot:l==null?void 0:l.pivot,rowGroup:l==null?void 0:l.rowGroup,aggFunc:l==null?void 0:l.aggFunc}}else return{colId:a,hide:!(i!=null&&i[a])}});this.columnModel.applyColumnState({state:n},r)}createPivotState(t){return{pivot:t.isPivotActive(),rowGroup:t.isRowGroupActive(),aggFunc:t.isValueActive()?t.getAggFunc():void 0}}};Yt([W("aggFuncService")],Gh.prototype,"aggFuncService",2);Yt([W("columnModel")],Gh.prototype,"columnModel",2);Yt([W("gridOptionsService")],Gh.prototype,"gos",2);Yt([W("eventService")],Gh.prototype,"eventService",2);Gh=Yt([Me("modelItemUtils")],Gh);var Fre="31.3.4",T9={version:Fre,moduleName:Ut.ColumnsToolPanelModule,beans:[Gh],agStackComponents:[{componentName:"AgPrimaryColsHeader",componentClass:Are},{componentName:"AgPrimaryColsList",componentClass:Pre},{componentName:"AgPrimaryCols",componentClass:XE}],userComponents:[{componentName:"agColumnsToolPanel",componentClass:Ire}],dependantModules:[Qs,b2,YE]},_9=Object.defineProperty,Lre=Object.defineProperties,kre=Object.getOwnPropertyDescriptor,Nre=Object.getOwnPropertyDescriptors,JL=Object.getOwnPropertySymbols,Ore=Object.prototype.hasOwnProperty,Gre=Object.prototype.propertyIsEnumerable,QL=(t,e,i)=>e in t?_9(t,e,{enumerable:!0,configurable:!0,writable:!0,value:i}):t[e]=i,S2=(t,e)=>{for(var i in e||(e={}))Ore.call(e,i)&&QL(t,i,e[i]);if(JL)for(var i of JL(e))Gre.call(e,i)&&QL(t,i,e[i]);return t},x2=(t,e)=>Lre(t,Nre(e)),_p=(t,e,i,s)=>{for(var r=s>1?void 0:s?kre(e,i):e,n=t.length-1,o;n>=0;n--)(o=t[n])&&(r=(s?o(e,i,r):o(r))||r);return s&&r&&_9(e,i,r),r},Bre={getTemplate(t){const i=new Date().toJSON();return{name:"cp:coreProperties",properties:{prefixedAttributes:[{prefix:"xmlns:",map:{cp:"http://schemas.openxmlformats.org/package/2006/metadata/core-properties",dc:"http://purl.org/dc/elements/1.1/",dcterms:"http://purl.org/dc/terms/",dcmitype:"http://purl.org/dc/dcmitype/",xsi:"http://www.w3.org/2001/XMLSchema-instance"}}]},children:[{name:"dc:creator",textNode:t},{name:"dc:title",textNode:"Workbook"},{name:"dcterms:created",properties:{rawMap:{"xsi:type":"dcterms:W3CDTF"}},textNode:i},{name:"dcterms:modified",properties:{rawMap:{"xsi:type":"dcterms:W3CDTF"}},textNode:i}]}}},Vre=Bre,Hre={getTemplate(t){const{name:e,ContentType:i,Extension:s,PartName:r}=t;return{name:e,properties:{rawMap:{Extension:s,PartName:r,ContentType:i}}}}},jre=Hre,Ure={getTemplate(t){const e=new Array(t).fill(void 0).map((u,d)=>({name:"Override",ContentType:"application/vnd.openxmlformats-officedocument.spreadsheetml.worksheet+xml",PartName:`/xl/worksheets/sheet${d+1}.xml`})),i=si.worksheetImages.size,s=si.worksheetHeaderFooterImages.size,r=si.worksheetDataTables.size,n={};si.workbookImageIds.forEach(u=>{const d=u.type==="jpg"?"jpeg":u.type;n[d]=!0});const o=new Array(i).fill(void 0).map((u,d)=>({name:"Override",ContentType:"application/vnd.openxmlformats-officedocument.drawing+xml",PartName:`/xl/drawings/drawing${d+1}.xml`})),a=new Array(r).fill(void 0).map((u,d)=>({name:"Override",ContentType:"application/vnd.openxmlformats-officedocument.spreadsheetml.table+xml",PartName:`/xl/tables/${si.getTableNameFromIndex(d)}.xml`})),l=Object.keys(n).map(u=>({name:"Default",ContentType:`image/${u}`,Extension:u}));s&&l.push({name:"Default",Extension:"vml",ContentType:"application/vnd.openxmlformats-officedocument.vmlDrawing"});const c=[...l,{name:"Default",Extension:"rels",ContentType:"application/vnd.openxmlformats-package.relationships+xml"},{name:"Default",ContentType:"application/xml",Extension:"xml"},{name:"Override",ContentType:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet.main+xml",PartName:"/xl/workbook.xml"},...e,{name:"Override",ContentType:"application/vnd.openxmlformats-officedocument.theme+xml",PartName:"/xl/theme/theme1.xml"},{name:"Override",ContentType:"application/vnd.openxmlformats-officedocument.spreadsheetml.styles+xml",PartName:"/xl/styles.xml"},{name:"Override",ContentType:"application/vnd.openxmlformats-officedocument.spreadsheetml.sharedStrings+xml",PartName:"/xl/sharedStrings.xml"},...o,...a,{name:"Override",ContentType:"application/vnd.openxmlformats-package.core-properties+xml",PartName:"/docProps/core.xml"}].map(u=>jre.getTemplate(u));return{name:"Types",properties:{rawMap:{xmlns:"http://schemas.openxmlformats.org/package/2006/content-types"}},children:c}}},Wre=Ure,zre=9525,ek={0:1,"0.00":2,"#,##0":3,"#,##0.00":4,"0%":9,"0.00%":10,"0.00E+00":11,"# ?/?":12,"# ??/??":13,"mm-dd-yy":14,"d-mmm-yy":15,"d-mmm":16,"mmm-yy":17,"h:mm AM/PM":18,"h:mm:ss AM/PM":19,"h:mm":20,"h:mm:ss":21,"m/d/yy h:mm":22,"#,##0 ;(#,##0)":37,"#,##0 ;[Red](#,##0)":38,"#,##0.00;(#,##0.00)":39,"#,##0.00;[Red](#,##0.00)":40,"mm:ss":45,"[h]:mm:ss":46,"mmss.0":47,"##0.0E+0":48,"@":49},$re=t=>Math.round(t*72/96),Kre=t=>Math.round(t*96/72),Lp=t=>Math.ceil(t*zre),Yre=t=>{if(t===void 0)return;const i=["Automatic","Roman","Swiss","Modern","Script","Decorative"].indexOf(t||"Automatic");return Math.max(i,0)},cw=(t,e)=>{if(!e)return;let i;return typeof e=="number"?i=e:i=e({rowIndex:t}),$re(i)},qre=(t,e)=>{const{colSpan:i,column:s}=t.position;if(t.width)if(i){const r=e.slice(s-1,s+i-1);let n=0;for(let o=0;o<r.length;o++){const a=r[o].getActualWidth();if(t.width<n+a){t.position.colSpan=o+1,t.totalWidth=t.width,t.width=t.totalWidth-n;break}n+=a}}else t.totalWidth=t.width},Xre=(t,e)=>{const{rowSpan:i,row:s}=t.position;if(t.height)if(i){let r=0,n=0;for(let o=s;o<s+i;o++){const a=Kre(cw(o,e)||20);if(t.height<r+a){t.position.rowSpan=n+1,t.totalHeight=t.height,t.height=t.totalHeight-r;break}r+=a,n++}}else t.totalHeight=t.height},Wr=(t,e)=>{const i=TF.createHeader({encoding:"UTF-8",standalone:"yes"}),s=TF.createXml(t);return e?s:`${i}${s}`},nC=t=>{const s=String.fromCharCode,r=Math.floor(t/26),n=t%26;return!r||t===26?s(65+t-1):n?r<26?s(65+r-1)+s(65+n-1):nC(r)+s(65+n-1):nC(r-1)+"Z"},tk=(t,e)=>({name:`xdr:${t}`,children:[{name:"xdr:col",textNode:e.col.toString()},{name:"xdr:colOff",textNode:e.offsetX.toString()},{name:"xdr:row",textNode:e.row.toString()},{name:"xdr:rowOff",textNode:e.offsetY.toString()}]}),Zre=t=>{const e=[{name:"a:ext",properties:{rawMap:{uri:"{FF2B5EF4-FFF2-40B4-BE49-F238E27FC236}"}},children:[{name:"a16:creationId",properties:{rawMap:{id:"{822E6D20-D7BC-2841-A643-D49A6EF008A2}","xmlns:a16":"http://schemas.microsoft.com/office/drawing/2014/main"}}}]}];switch(t.recolor&&t.recolor.toLowerCase()){case"grayscale":case"sepia":case"washout":e.push({name:"a:ext",properties:{rawMap:{uri:"{C183D7F6-B498-43B3-948B-1728B52AA6E4}"}},children:[{name:"adec:decorative",properties:{rawMap:{val:"0","xmlns:adec":"http://schemas.microsoft.com/office/drawing/2017/decorative"}}}]})}return{name:"a:extLst",children:e}},Jre=(t,e)=>({name:"xdr:nvPicPr",children:[{name:"xdr:cNvPr",properties:{rawMap:{id:e,name:t.id,descr:t.altText!=null?t.altText:void 0}},children:[Zre(t)]},{name:"xdr:cNvPicPr",properties:{rawMap:{preferRelativeResize:"0"}},children:[{name:"a:picLocks"}]}]}),ik=t=>{if(!t.saturation&&!t.tint)return;const e=[];return t.saturation&&e.push({name:"a:satMod",properties:{rawMap:{val:t.saturation*1e3}}}),t.tint&&e.push({name:"a:tint",properties:{rawMap:{val:t.tint*1e3}}}),e},Qre=(t,e)=>({name:"a:duotone",children:[{name:"a:prstClr",properties:{rawMap:{val:t.color}},children:ik(t)},{name:"a:srgbClr",properties:{rawMap:{val:e.color}},children:ik(e)}]}),ene=(t,e)=>{let i;if(t.transparency){const s=Math.min(Math.max(t.transparency,0),100);i=[{name:"a:alphaModFix",properties:{rawMap:{amt:1e5-Math.round(s*1e3)}}}]}if(t.recolor)switch(i||(i=[]),t.recolor.toLocaleLowerCase()){case"grayscale":i.push({name:"a:grayscl"});break;case"sepia":i.push(Qre({color:"black"},{color:"D9C3A5",tint:50,saturation:180}));break;case"washout":i.push({name:"a:lum",properties:{rawMap:{bright:"70000",contrast:"-70000"}}});break}return{name:"xdr:blipFill",children:[{name:"a:blip",properties:{rawMap:{cstate:"print","r:embed":`rId${e}`,"xmlns:r":"http://schemas.openxmlformats.org/officeDocument/2006/relationships"}},children:i},{name:"a:stretch",children:[{name:"a:fillRect"}]}]}},tne=(t,e)=>{const i={name:"a:xfrm",children:[{name:"a:off",properties:{rawMap:{x:0,y:0}}},{name:"a:ext",properties:{rawMap:{cx:e.width,cy:e.height}}}]};if(t.rotation){const n=t.rotation;i.properties={rawMap:{rot:Math.min(Math.max(n,0),360)*6e4}}}return{name:"xdr:spPr",children:[i,{name:"a:prstGeom",properties:{rawMap:{prst:"rect"}},children:[{name:"a:avLst"}]}]}},ine=t=>{t.fitCell=!!t.fitCell||!t.width||!t.height;const{position:e={},fitCell:i,width:s=0,height:r=0,totalHeight:n,totalWidth:o}=t,{offsetX:a=0,offsetY:l=0,row:c=1,rowSpan:u=1,column:d=1,colSpan:h=1}=e;return{from:{row:c-1,col:d-1,offsetX:Lp(a),offsetY:Lp(l)},to:{row:c-1+(i?1:u-1),col:d-1+(i?1:h-1),offsetX:Lp(s+a),offsetY:Lp(r+l)},height:Lp(n||r),width:Lp(o||s)}},sne=(t,e,i,s)=>({name:"xdr:pic",children:[Jre(t,e+1),ene(t,i+1),tne(t,s)]}),rne={getTemplate(t){const{sheetIndex:e}=t,i=si.worksheetImages.get(e),s=si.worksheetImageIds.get(e),r=i.map((n,o)=>{const a=ine(n);return{name:"xdr:twoCellAnchor",properties:{rawMap:{editAs:"absolute"}},children:[tk("from",a.from),tk("to",a.to),sne(n,o,s.get(n.id).index,a),{name:"xdr:clientData"}]}});return{name:"xdr:wsDr",properties:{rawMap:{"xmlns:a":"http://schemas.openxmlformats.org/drawingml/2006/main","xmlns:xdr":"http://schemas.openxmlformats.org/drawingml/2006/spreadsheetDrawing"}},children:r}}},nne=rne,one={getTemplate(t,e){const{name:i,columns:s,rowCount:r,displayName:n,headerRowIndex:o,showRowStripes:a,showColumnStripes:l,showFilterButtons:c,highlightFirstColumn:u,highlightLastColumn:d}=t||{};if(!t||!i||!Array.isArray(s)||!s.length||!r)return{name:"table"};const h=s.map((C,b)=>({name:"filterColumn",properties:{rawMap:{colId:b.toString(),hiddenButton:c[b]?0:1}}})),p=o+1,f=(e+1).toString(),m=`A${p}`,g=`${String.fromCharCode(64+s.length)}${p+r}`,y=`${m}:${g}`,v=e?`${n}_${e+1}`:n;return{name:"table",properties:{rawMap:{xmlns:"http://schemas.openxmlformats.org/spreadsheetml/2006/main","xmlns:mc":"http://schemas.openxmlformats.org/markup-compatibility/2006","mc:Ignorable":"xr xr3","xmlns:xr":"http://schemas.microsoft.com/office/spreadsheetml/2014/revision","xmlns:xr3":"http://schemas.microsoft.com/office/spreadsheetml/2016/revision3",name:i,displayName:v,ref:y,totalsRowShown:0,id:f}},children:[{name:"autoFilter",properties:{rawMap:{ref:y}},children:h},{name:"tableColumns",properties:{rawMap:{count:s.length}},children:s.map((C,b)=>({name:"tableColumn",properties:{rawMap:{id:(b+1).toString(),name:C,dataCellStyle:"Normal"}}}))},{name:"tableStyleInfo",properties:{rawMap:{name:"TableStyleLight1",showFirstColumn:u?1:0,showLastColumn:d?1:0,showRowStripes:a?1:0,showColumnStripes:l?1:0}}}]}}},ane=one,Eo=t=>{const[e,i,s,r]=t;return{name:`a:${e}`,children:[{name:`a:${i}`,properties:{rawMap:{val:s,lastClr:r}}}]}},lne={getTemplate(){return{name:"a:clrScheme",properties:{rawMap:{name:"Office"}},children:[Eo(["dk1","sysClr","windowText","000000"]),Eo(["lt1","sysClr","window","FFFFFF"]),Eo(["dk2","srgbClr","44546A"]),Eo(["lt2","srgbClr","E7E6E6"]),Eo(["accent1","srgbClr","4472C4"]),Eo(["accent2","srgbClr","ED7D31"]),Eo(["accent3","srgbClr","A5A5A5"]),Eo(["accent4","srgbClr","FFC000"]),Eo(["accent5","srgbClr","5B9BD5"]),Eo(["accent6","srgbClr","70AD47"]),Eo(["hlink","srgbClr","0563C1"]),Eo(["folHlink","srgbClr","954F72"])]}}},cne=lne,ke=t=>{const[e,i,s,r]=t;return{name:`a:${e}`,properties:{rawMap:{script:s,typeface:i,panose:r}}}},une={getTemplate(){return{name:"a:fontScheme",properties:{rawMap:{name:"Office"}},children:[{name:"a:majorFont",children:[ke(["latin","Calibri Light",void 0,"020F0302020204030204"]),ke(["ea",""]),ke(["cs",""]),ke(["font"," Light","Jpan"]),ke(["font"," ","Hang"]),ke(["font"," Light","Hans"]),ke(["font","","Hant"]),ke(["font","Times New Roman","Arab"]),ke(["font","Times New Roman","Hebr"]),ke(["font","Tahoma","Thai"]),ke(["font","Nyala","Ethi"]),ke(["font","Vrinda","Beng"]),ke(["font","Shruti","Gujr"]),ke(["font","MoolBoran","Khmr"]),ke(["font","Tunga","Knda"]),ke(["font","Raavi","Guru"]),ke(["font","Euphemia","Cans"]),ke(["font","Plantagenet Cherokee","Cher"]),ke(["font","Microsoft Yi Baiti","Yiii"]),ke(["font","Microsoft Himalaya","Tibt"]),ke(["font","MV Boli","Thaa"]),ke(["font","Mangal","Deva"]),ke(["font","Gautami","Telu"]),ke(["font","Latha","Taml"]),ke(["font","Estrangelo Edessa","Syrc"]),ke(["font","Kalinga","Orya"]),ke(["font","Kartika","Mlym"]),ke(["font","DokChampa","Laoo"]),ke(["font","Iskoola Pota","Sinh"]),ke(["font","Mongolian Baiti","Mong"]),ke(["font","Times New Roman","Viet"]),ke(["font","Microsoft Uighur","Uigh"]),ke(["font","Sylfaen","Geor"]),ke(["font","Arial","Armn"]),ke(["font","Leelawadee UI","Bugi"]),ke(["font","Microsoft JhengHei","Bopo"]),ke(["font","Javanese Text","Java"]),ke(["font","Segoe UI","Lisu"]),ke(["font","Myanmar Text","Mymr"]),ke(["font","Ebrima","Nkoo"]),ke(["font","Nirmala UI","Olck"]),ke(["font","Ebrima","Osma"]),ke(["font","Phagspa","Phag"]),ke(["font","Estrangelo Edessa","Syrn"]),ke(["font","Estrangelo Edessa","Syrj"]),ke(["font","Estrangelo Edessa","Syre"]),ke(["font","Nirmala UI","Sora"]),ke(["font","Microsoft Tai Le","Tale"]),ke(["font","Microsoft New Tai Lue","Talu"]),ke(["font","Ebrima","Tfng"])]},{name:"a:minorFont",children:[ke(["latin","Calibri",void 0,"020F0502020204030204"]),ke(["ea",""]),ke(["cs",""]),ke(["font","","Jpan"]),ke(["font"," ","Hang"]),ke(["font","","Hans"]),ke(["font","","Hant"]),ke(["font","Arial","Arab"]),ke(["font","Arial","Hebr"]),ke(["font","Tahoma","Thai"]),ke(["font","Nyala","Ethi"]),ke(["font","Vrinda","Beng"]),ke(["font","Shruti","Gujr"]),ke(["font","DaunPenh","Khmr"]),ke(["font","Tunga","Knda"]),ke(["font","Raavi","Guru"]),ke(["font","Euphemia","Cans"]),ke(["font","Plantagenet Cherokee","Cher"]),ke(["font","Microsoft Yi Baiti","Yiii"]),ke(["font","Microsoft Himalaya","Tibt"]),ke(["font","MV Boli","Thaa"]),ke(["font","Mangal","Deva"]),ke(["font","Gautami","Telu"]),ke(["font","Latha","Taml"]),ke(["font","Estrangelo Edessa","Syrc"]),ke(["font","Kalinga","Orya"]),ke(["font","Kartika","Mlym"]),ke(["font","DokChampa","Laoo"]),ke(["font","Iskoola Pota","Sinh"]),ke(["font","Mongolian Baiti","Mong"]),ke(["font","Arial","Viet"]),ke(["font","Microsoft Uighur","Uigh"]),ke(["font","Sylfaen","Geor"]),ke(["font","Arial","Armn"]),ke(["font","Leelawadee UI","Bugi"]),ke(["font","Microsoft JhengHei","Bopo"]),ke(["font","Javanese Text","Java"]),ke(["font","Segoe UI","Lisu"]),ke(["font","Myanmar Text","Mymr"]),ke(["font","Ebrima","Nkoo"]),ke(["font","Nirmala UI","Olck"]),ke(["font","Ebrima","Osma"]),ke(["font","Phagspa","Phag"]),ke(["font","Estrangelo Edessa","Syrn"]),ke(["font","Estrangelo Edessa","Syrj"]),ke(["font","Estrangelo Edessa","Syre"]),ke(["font","Nirmala UI","Sora"]),ke(["font","Microsoft Tai Le","Tale"]),ke(["font","Microsoft New Tai Lue","Talu"]),ke(["font","Ebrima","Tfng"])]}]}}},dne=une,Ja=(t,e,i)=>({name:`a:${t}`,properties:{rawMap:{val:e}},children:i}),vT=t=>{const[e,i,s,r,n,o]=t,a=[];return a.push(Ja("satMod",s)),r&&a.push(Ja("lumMod",r)),n&&a.push(Ja("tint",n)),o&&a.push(Ja("shade",o)),{name:"a:gs",properties:{rawMap:{pos:e}},children:[{name:"a:schemeClr",properties:{rawMap:{val:i}},children:a}]}},SS=(t,e)=>({name:"a:solidFill",children:[Ja("schemeClr",t,e)]}),kA=t=>{const[e,i,s,r,n]=t,[o,a]=n;return{name:"a:gradFill",properties:{rawMap:{rotWithShape:e}},children:[{name:"a:gsLst",children:[vT(i),vT(s),vT(r)]},{name:"a:lin",properties:{rawMap:{ang:o,scaled:a}}}]}},yT=t=>{const[e,i,s,r]=t;return{name:"a:ln",properties:{rawMap:{w:e,cap:i,cmpd:s,algn:r}},children:[SS("phClr"),Ja("prstDash","solid"),{name:"a:miter",properties:{rawMap:{lim:"800000"}}}]}},CT=t=>{const e=[];if(t){const[i,s,r,n,o]=t;e.push({name:"a:outerShdw",properties:{rawMap:{blurRad:i,dist:s,dir:r,algn:n,rotWithShape:o}},children:[Ja("srgbClr","000000",[Ja("alpha","63000")])]})}return{name:"a:effectStyle",children:[Object.assign({},{name:"a:effectLst"},e.length?{children:e}:{})]}},hne=()=>({name:"a:fillStyleLst",children:[SS("phClr"),kA(["1",["0","phClr","105000","110000","67000"],["50000","phClr","103000","105000","73000"],["100000","phClr","109000","105000","81000"],["5400000","0"]]),kA(["1",["0","phClr","103000","102000","94000"],["50000","phClr","110000","100000",void 0,"100000"],["100000","phClr","120000","99000",void 0,"78000"],["5400000","0"]])]}),pne=()=>({name:"a:lnStyleLst",children:[yT(["6350","flat","sng","ctr"]),yT(["12700","flat","sng","ctr"]),yT(["19050","flat","sng","ctr"])]}),fne=()=>({name:"a:effectStyleLst",children:[CT(),CT(),CT(["57150","19050","5400000","ctr","0"])]}),gne=()=>({name:"a:bgFillStyleLst",children:[SS("phClr"),SS("phClr",[Ja("tint","95000"),Ja("satMod","170000")]),kA(["1",["0","phClr","150000","102000","93000","98000"],["50000","phClr","130000","103000","98000","90000"],["100000","phClr","120000",void 0,void 0,"63000"],["5400000","0"]])]}),mne={getTemplate(){return{name:"a:fmtScheme",properties:{rawMap:{name:"Office"}},children:[hne(),pne(),fne(),gne()]}}},vne=mne,yne={getTemplate(){return{name:"a:themeElements",children:[cne.getTemplate(),dne.getTemplate(),vne.getTemplate()]}}},Cne=yne,bne={getTemplate(){return{name:"a:theme",properties:{prefixedAttributes:[{prefix:"xmlns:",map:{a:"http://schemas.openxmlformats.org/drawingml/2006/main"}}],rawMap:{name:"Office Theme"}},children:[Cne.getTemplate(),{name:"a:objectDefaults"},{name:"a:extraClrSchemeLst"}]}}},wne=bne,Sne=t=>{const e=[];for(const i of t.keys()){const s=i.toString(),r={name:"t",textNode:Q.escapeString(s)};s.trim().length!==s.length&&(r.properties={rawMap:{"xml:space":"preserve"}}),e.push({name:"si",children:[r]})}return e},xne={getTemplate(t){return{name:"sst",properties:{rawMap:{xmlns:"http://schemas.openxmlformats.org/spreadsheetml/2006/main",count:t.size,uniqueCount:t.size}},children:Sne(t)}}},Ene=xne;function Tne(t){const e=t.split(/(\[[^\]]*\])/);for(let i=0;i<e.length;i++){let s=e[i];s.length&&(s.startsWith("[")||(s=s.replace(/\$/g,'"$"')),e[i]=Q.escapeString(s))}return e.join("")}var _ne={getTemplate(t){let{formatCode:e,numFmtId:i}=t;return e.length&&(e=Tne(e)),{name:"numFmt",properties:{rawMap:{formatCode:e,numFmtId:i}}}}},Ane=_ne,Rne={getTemplate(t){return{name:"numFmts",properties:{rawMap:{count:t.length}},children:t.map(e=>Ane.getTemplate(e))}}},Mne=Rne,Dne={getTemplate(t){const{size:e,colorTheme:i,color:s="FF000000",fontName:r="Calibri",family:n,scheme:o,italic:a,bold:l,strikeThrough:c,outline:u,shadow:d,underline:h,verticalAlign:p}=t,f=[{name:"sz",properties:{rawMap:{val:e}}},{name:"color",properties:{rawMap:{theme:i,rgb:s}}},{name:"name",properties:{rawMap:{val:r}}}];return n&&f.push({name:"family",properties:{rawMap:{val:n}}}),o&&f.push({name:"scheme",properties:{rawMap:{val:o}}}),a&&f.push({name:"i"}),l&&f.push({name:"b"}),c&&f.push({name:"strike"}),u&&f.push({name:"outline"}),d&&f.push({name:"shadow"}),h&&f.push({name:"u",properties:{rawMap:{val:h}}}),p&&f.push({name:"vertAlign",properties:{rawMap:{val:p}}}),{name:"font",children:f}}},Pne=Dne,Ine={getTemplate(t){return{name:"fonts",properties:{rawMap:{count:t.length}},children:t.map(e=>Pne.getTemplate(e))}}},Fne=Ine,Lne={getTemplate(t){const{patternType:e,fgTheme:i,fgTint:s,fgRgb:r,bgRgb:n,bgIndexed:o}=t,a={name:"patternFill",properties:{rawMap:{patternType:e}}};return(i||s||r)&&(a.children=[{name:"fgColor",properties:{rawMap:{theme:i,tint:s,rgb:r}}}]),(o||n)&&(a.children||(a.children=[]),a.children.push({name:"bgColor",properties:{rawMap:{indexed:o,rgb:n}}})),{name:"fill",children:[a]}}},kne=Lne,Nne={getTemplate(t){return{name:"fills",properties:{rawMap:{count:t.length}},children:t.map(e=>kne.getTemplate(e))}}},One=Nne,Gne=t=>{switch(t){case 1:return"thin";case 2:return"medium";case 3:return"thick";default:return"hair"}},Bne={None:"None",Dot:"Dotted",Dash:"Dashed",Double:"Double",DashDot:"DashDot",DashDotDot:"DashDotDot",SlantDashDot:"SlantDashDot"},Vne=["Dashed","DashDot","DashDotDot"],Hne={None:"none",Solid:"solid",Gray50:"mediumGray",Gray75:"darkGray",Gray25:"lightGray",HorzStripe:"darkHorizontal",VertStripe:"darkVertical",ReverseDiagStripe:"darkDown",DiagStripe:"darkUp",DiagCross:"darkGrid",ThickDiagCross:"darkTrellis",ThinHorzStripe:"lightHorizontal",ThinVertStripe:"lightVertical",ThinReverseDiagStripe:"lightDown",ThinDiagStripe:"lightUp",ThinHorzCross:"lightGrid",ThinDiagCross:"lightTrellis",Gray125:"gray125",Gray0625:"gray0625"},jne={Automatic:"general",Left:"left",Center:"center",Right:"right",Fill:"fill",Justify:"justify",CenterAcrossSelection:"centerContinuous",Distributed:"distributed",JustifyDistributed:"justify"},Une={Automatic:void 0,Top:"top",Bottom:"bottom",Center:"center",Justify:"justify",Distributed:"distributed",JustifyDistributed:"justify"},Wne=t=>t?Hne[t]||t:"none",au=t=>t==null?t:(t.charAt(0)==="#"&&(t=t.substring(1)),t.length===6?"FF"+t:t),Tb=(t,e)=>{if(!t)return"thin";const i=Gne(e),s=Bne[t];return t==="Continuous"?i:i==="medium"&&Vne.indexOf(s)!==-1?`medium${s}`:s.charAt(0).toLowerCase()+s.substring(1)},zne=t=>jne[t]||"general",$ne=t=>Une[t]||void 0,$m=t=>({name:"color",properties:{rawMap:{rgb:au(t||"#000000")}}}),Kne={getTemplate(t){const{left:e,right:i,top:s,bottom:r,diagonal:n}=t,o=e?[$m(e.color)]:void 0,a=i?[$m(i.color)]:void 0,l=s?[$m(s.color)]:void 0,c=r?[$m(r.color)]:void 0,u=n?[$m(n.color)]:void 0;return{name:"border",children:[{name:"left",properties:{rawMap:{style:e&&e.style}},children:o},{name:"right",properties:{rawMap:{style:i&&i.style}},children:a},{name:"top",properties:{rawMap:{style:s&&s.style}},children:l},{name:"bottom",properties:{rawMap:{style:r&&r.style}},children:c},{name:"diagonal",properties:{rawMap:{style:n&&n.style}},children:u}]}}},Yne=Kne,qne={getTemplate(t){return{name:"borders",properties:{rawMap:{count:t.length}},children:t.map(e=>Yne.getTemplate(e))}}},Xne=qne,Zne=t=>{const i=["Context","LeftToRight","RightToLeft"].indexOf(t);return Math.max(i,0)},Jne={getTemplate(t){const{horizontal:e,indent:i,readingOrder:s,rotate:r,shrinkToFit:n,vertical:o,wrapText:a}=t;return{name:"alignment",properties:{rawMap:{horizontal:e&&zne(e),indent:i,readingOrder:s&&Zne(s),textRotation:r,shrinkToFit:n,vertical:o&&$ne(o),wrapText:a}}}}},Qne=Jne,eoe={getTemplate(t){const e=t.protected===!1?0:1;return{name:"protection",properties:{rawMap:{hidden:t.hideFormula===!0?1:0,locked:e}}}}},toe=eoe,ioe={getTemplate(t){const{alignment:e,borderId:i,fillId:s,fontId:r,numFmtId:n,protection:o,quotePrefix:a,xfId:l}=t,c=[];return e&&c.push(Qne.getTemplate(e)),o&&c.push(toe.getTemplate(o)),{name:"xf",properties:{rawMap:{applyAlignment:e?1:void 0,applyProtection:o?1:void 0,applyBorder:i?1:void 0,applyFill:s?1:void 0,borderId:i,fillId:s,applyFont:r?1:void 0,fontId:r,applyNumberFormat:n?1:void 0,numFmtId:n,quotePrefix:a?1:void 0,xfId:l}},children:c.length?c:void 0}}},A9=ioe,soe={getTemplate(t){return{name:"cellStyleXfs",properties:{rawMap:{count:t.length}},children:t.map(e=>A9.getTemplate(e))}}},roe=soe,noe={getTemplate(t){return{name:"cellXfs",properties:{rawMap:{count:t.length}},children:t.map(e=>A9.getTemplate(e))}}},ooe=noe,aoe={getTemplate(t){const{builtinId:e,name:i,xfId:s}=t;return{name:"cellStyle",properties:{rawMap:{builtinId:e,name:i,xfId:s}}}}},loe=aoe,coe={getTemplate(t){return{name:"cellStyles",properties:{rawMap:{count:t.length}},children:t.map(e=>loe.getTemplate(e))}}},uoe=coe,xS,Sf,Gv,Bv,Vv,R9,ES,M9,NA,D9=(t,e)=>(t.indexOf("mixedStyle")!==-1&&e>1&&(t+=`_${e}`),t),P9=()=>{xS={base:0},Sf=[],Gv=[{fontName:"Calibri",colorTheme:"1",family:"2",scheme:"minor"}],Bv=[{patternType:"none"},{patternType:"gray125"}],Vv=[{left:void 0,right:void 0,top:void 0,bottom:void 0,diagonal:void 0}],R9=[{borderId:0,fillId:0,fontId:0,numFmtId:0}],ES=[{borderId:0,fillId:0,fontId:0,numFmtId:0,xfId:0}],M9=[{builtinId:0,name:"Normal",xfId:0}]},doe=t=>{const e=Wne(t.pattern),i=au(t.color),s=au(t.patternColor);let r=Bv.findIndex(n=>{const{patternType:o,fgRgb:a,bgRgb:l}=n;return!(o!=e||a!=i||l!=s)});return r===-1&&(r=Bv.length,Bv.push({patternType:e,fgRgb:i,bgRgb:s})),r},hoe=t=>{if(ek[t])return ek[t];let e=Sf.findIndex(i=>i.formatCode===t);return e===-1?(e=Sf.length+164,Sf.push({formatCode:t,numFmtId:e})):e=Sf[e].numFmtId,e},poe=t=>{const{borderBottom:e,borderTop:i,borderLeft:s,borderRight:r}=t;let n,o,a,l,c,u,d,h;s&&(a=Tb(s.lineStyle,s.weight),d=au(s.color)),r&&(l=Tb(r.lineStyle,r.weight),h=au(r.color)),e&&(n=Tb(e.lineStyle,e.weight),c=au(e.color)),i&&(o=Tb(i.lineStyle,i.weight),u=au(i.color));let p=Vv.findIndex(f=>{const{left:m,right:g,top:y,bottom:v}=f;if(!m&&(a||d)||!g&&(l||h)||!y&&(o||u)||!v&&(n||c))return!1;const{style:C,color:b}=m||{},{style:T,color:A}=g||{},{style:I,color:D}=y||{},{style:F,color:B}=v||{};return!(C!=a||b!=d||T!=l||A!=h||I!=o||D!=u||F!=n||B!=c)});return p===-1&&(p=Vv.length,Vv.push({left:{style:a,color:d},right:{style:l,color:h},top:{style:o,color:u},bottom:{style:n,color:c},diagonal:{style:void 0,color:void 0}})),p},foe=t=>{const{fontName:e="Calibri",color:i,size:s,bold:r,italic:n,outline:o,shadow:a,strikeThrough:l,underline:c,family:u,verticalAlign:d}=t,h=au(i),p=Yre(u),f=c?c.toLocaleLowerCase():void 0,m=d?d.toLocaleLowerCase():void 0;let g=Gv.findIndex(y=>!(y.fontName!=e||y.color!=h||y.size!=s||y.bold!=r||y.italic!=n||y.outline!=o||y.shadow!=a||y.strikeThrough!=l||y.underline!=f||y.verticalAlign!=m||y.family!=p));return g===-1&&(g=Gv.length,Gv.push({fontName:e,color:h,size:s,bold:r,italic:n,outline:o,shadow:a,strikeThrough:l,underline:f,verticalAlign:m,family:p!=null?p.toString():void 0})),g},goe=t=>{const{alignment:e,borders:i,font:s,interior:r,numberFormat:n,protection:o,quotePrefix:a}=t;let{id:l}=t,c=0,u=0,d=0,h=0;l&&(l=D9(l,NA),xS[l]==null&&(r&&(c=doe(r)),i&&(u=poe(i)),s&&(d=foe(s)),n&&(h=hoe(n.format)),xS[l]=ES.length,ES.push({alignment:e,borderId:u||0,fillId:c||0,fontId:d||0,numFmtId:h||0,protection:o,quotePrefix:a,xfId:0})))},moe={getTemplate(t){const e=Mne.getTemplate(Sf),i=Fne.getTemplate(Gv.map(l=>x2(S2({},l),{size:l.size!=null?l.size:t}))),s=One.getTemplate(Bv),r=Xne.getTemplate(Vv),n=roe.getTemplate(R9),o=ooe.getTemplate(ES),a=uoe.getTemplate(M9);return P9(),{name:"styleSheet",properties:{rawMap:{"mc:Ignorable":"x14ac x16r2 xr",xmlns:"http://schemas.openxmlformats.org/spreadsheetml/2006/main","xmlns:mc":"http://schemas.openxmlformats.org/markup-compatibility/2006","xmlns:x14ac":"http://schemas.microsoft.com/office/spreadsheetml/2009/9/ac","xmlns:x16r2":"http://schemas.microsoft.com/office/spreadsheetml/2015/02/main","xmlns:xr":"http://schemas.microsoft.com/office/spreadsheetml/2014/revision"}},children:[e,i,s,r,n,o,a,{name:"tableStyles",properties:{rawMap:{count:0,defaultPivotStyle:"PivotStyleLight16",defaultTableStyle:"TableStyleMedium2"}}}]}}},voe=(t,e)=>xS[D9(t,e)]||0,yoe=(t,e)=>{NA=e,NA===1&&P9(),t.forEach(goe)},Coe=moe,boe={getTemplate(t,e){const i=(e+1).toString();return{name:"sheet",properties:{rawMap:{name:t,sheetId:i,"r:id":`rId${i}`}}}}},woe=boe,Soe={getTemplate(t){return{name:"sheets",children:t.map((e,i)=>woe.getTemplate(e,i))}}},xoe=Soe,Eoe={getTemplate(t){return{name:"workbook",properties:{prefixedAttributes:[{prefix:"xmlns:",map:{r:"http://schemas.openxmlformats.org/officeDocument/2006/relationships"}}],rawMap:{xmlns:"http://schemas.openxmlformats.org/spreadsheetml/2006/main"}},children:[xoe.getTemplate(t)]}}},Toe=Eoe,_oe=t=>Math.ceil((t-12)/7+1),Aoe={getTemplate(t){const{min:e,max:i,outlineLevel:s,s:r,width:n,hidden:o,bestFit:a}=t;let l=1,c="0";return n>1&&(l=_oe(n),c="1"),{name:"col",properties:{rawMap:{min:e,max:i,outlineLevel:s??void 0,width:l,style:r,hidden:o?"1":"0",bestFit:a?"1":"0",customWidth:c}}}}},Roe=Aoe,Moe=t=>{const e=t.charAt(0).toLowerCase();return e==="s"?"inlineStr":e},Doe={getTemplate(t,e,i){const{ref:s,data:r,styleId:n}=t,{type:o,value:a}=r||{type:"empty",value:null};let l=o;o==="f"?l="str":o.charAt(0)===o.charAt(0).toUpperCase()&&(l=Moe(o));const c={name:"c",properties:{rawMap:{r:s,t:l==="empty"?void 0:l,s:n?voe(n,i):void 0}}};if(l==="empty")return c;let u;return l==="str"&&o==="f"?u=[{name:"f",textNode:Q.escapeString(a)}]:l==="inlineStr"?u=[{name:"is",children:[{name:"t",textNode:Q.escapeString(a)}]}]:u=[{name:"v",textNode:a}],Object.assign({},c,{children:u})}},Poe=Doe,Ioe=(t,e)=>{const i=[];let s=0;for(let r=0;r<t.length;r++){const n=t[r];n.mergeAcross&&(i.push({pos:r,excelPos:s}),s+=n.mergeAcross),s++}if(i.length)for(let r=i.length-1;r>=0;r--){const n=[],o=t[i[r].pos];for(let a=1;a<=o.mergeAcross;a++)n.push({ref:`${nC(i[r].excelPos+1+a)}${e+1}`,styleId:o.styleId,data:{type:"empty",value:null}});n.length&&t.splice(i[r].pos+1,0,...n)}},Foe=t=>{var e;return((e=t.data)==null?void 0:e.value)!==""||t.styleId!==void 0},Loe={getTemplate(t,e,i){const{collapsed:s,hidden:r,height:n,outlineLevel:o,cells:a=[]}=t;Ioe(a,e);const l=a.filter(Foe).map((c,u)=>Poe.getTemplate(c,u,i));return{name:"row",properties:{rawMap:{r:e+1,collapsed:s?"1":"0",hidden:r?"1":"0",ht:n,customHeight:n!=null?"1":"0",spans:"1:1",outlineLevel:o||void 0}},children:l}}},koe=Loe,Noe={getTemplate(t){return{name:"mergeCell",properties:{rawMap:{ref:t}}}}},Ooe=Noe,Goe=(t,e,i)=>{const s=[],r=[];t.forEach((a,l)=>{const c=a.cells;let u=0,d;c.forEach((h,p)=>{const f=p+u+1,m=nC(f),g=l+1;if(h.mergeAcross){u+=h.mergeAcross;const v=nC(p+u+1);s.push(`${m}${g}:${v}${g}`)}e[f-1]||(e[f-1]={});const{collapsibleRanges:y}=h;y&&y.forEach(v=>{r.push([f+v[0],f+v[1]])}),d=e[f-1],d.min=f,d.max=f,h.ref=`${m}${g}`})}),r.sort((a,l)=>a[0]!==l[0]?a[0]-l[0]:l[1]-a[1]);const n=new Map,o=new Map;return r.filter(a=>{const l=a.toString();return n.get(l)?!1:(n.set(l,!0),!0)}).forEach(a=>{const l=e.find(u=>u.min==a[0]&&u.max==a[1]),c=o.get(a[0]);e.push({min:a[0],max:a[1],outlineLevel:i?void 0:c||1,width:(l||{width:100}).width}),o.set(a[0],(c||0)+1)}),s},Boe=t=>!t||t!=="Portrait"&&t!=="Landscape"?"portrait":t.toLocaleLowerCase(),Voe=t=>{if(t==null)return 1;const i=["Letter","Letter Small","Tabloid","Ledger","Legal","Statement","Executive","A3","A4","A4 Small","A5","A6","B4","B5","Folio","Envelope","Envelope DL","Envelope C5","Envelope B5","Envelope C3","Envelope C4","Envelope C6","Envelope Monarch","Japanese Postcard","Japanese Double Postcard"].indexOf(t);return i===-1?1:i+1},Hoe=t=>e=>(t.length&&e.children.push({name:"cols",children:t.map(i=>Roe.getTemplate(i))}),e),joe=(t,e)=>i=>(t.length&&i.children.push({name:"sheetData",children:t.map((s,r)=>koe.getTemplate(s,r,e))}),i),Uoe=t=>e=>(t.length&&e.children.push({name:"mergeCells",properties:{rawMap:{count:t.length}},children:t.map(i=>Ooe.getTemplate(i))}),e),Woe=t=>e=>{const{top:i=.75,right:s=.7,bottom:r=.75,left:n=.7,header:o=.3,footer:a=.3}=t;return e.children.push({name:"pageMargins",properties:{rawMap:{bottom:r,footer:a,header:o,left:n,right:s,top:i}}}),e},zoe=t=>e=>(t&&e.children.push({name:"pageSetup",properties:{rawMap:{horizontalDpi:0,verticalDpi:0,orientation:Boe(t.orientation),paperSize:Voe(t.pageSize)}}}),e),$oe=t=>{const e={"&[Page]":"&P","&[Pages]":"&N","&[Date]":"&D","&[Time]":"&T","&[Tab]":"&A","&[Path]":"&Z","&[File]":"&F","&[Picture]":"&G"};return Q.iterateObject(e,(i,s)=>{t=t.replace(i,s)}),t},Koe=t=>t==="Center"?"C":t==="Right"?"R":"L",Yoe=(t,e)=>(e&&(t+="&amp;&quot;",t+=e.fontName||"Calibri",e.bold!==e.italic?t+=e.bold?",Bold":",Italic":e.bold?t+=",Bold Italic":t+=",Regular",t+="&quot;",e.size&&(t+=`&amp;${e.size}`),e.strikeThrough&&(t+="&amp;S"),e.underline&&(t+=`&amp;${e.underline==="Double"?"E":"U"}`),e.color&&(t+=`&amp;K${e.color.replace("#","").toUpperCase()}`)),t),qoe=(t,e,i)=>t.reduce((s,r,n)=>{const o=Koe(r.position),a=Yoe(`${s}&amp;${o}`,r.font),l=["Left","Center","Right"];r.position||(r.position=l[n]);const{image:c}=r;if(r.value==="&[Picture]"&&c){const u=`${o}${e}${i}`;si.addHeaderFooterImageToMap(c,u)}return`${a}${Q.escapeString($oe(r.value))}`},""),Xoe=t=>{const e=["all","first","even"],i=[];return e.forEach(s=>{const r=t[s],n=s==="all"?"odd":s;if(r)for(const[o,a]of Object.entries(r)){const l=`${o.charAt(0).toUpperCase()}${o.slice(1)}`,c=o[0].toUpperCase();if(a){const u=s==="all"?"":s.toUpperCase();i.push({name:`${n}${l}`,properties:{rawMap:{"xml:space":"preserve"}},textNode:qoe(a,c,u)})}}}),i},Zoe=t=>e=>{if(!t)return e;const i=t.first!=null?1:0,s=t.even!=null?1:0;return e.children.push({name:"headerFooter",properties:{rawMap:{differentFirst:i,differentOddEven:s}},children:Xoe(t)}),e},Joe=t=>e=>(t&&e.children.push({name:"tableParts",properties:{rawMap:{count:"1"}},children:[{name:"tablePart",properties:{rawMap:{"r:id":`rId${++e.rIdCounter}`}}}]}),e),Qoe=t=>e=>{const i=si.worksheetImages.get(t);return i!=null&&i.length&&e.children.push({name:"drawing",properties:{rawMap:{"r:id":`rId${++e.rIdCounter}`}}}),e},eae=t=>e=>(si.worksheetHeaderFooterImages.get(t)&&e.children.push({name:"legacyDrawingHF",properties:{rawMap:{"r:id":`rId${++e.rIdCounter}`}}}),e),tae=()=>t=>(t.children.push({name:"sheetPr",children:[{name:"outlinePr",properties:{rawMap:{summaryBelow:0}}}]}),t),iae=t=>e=>{const i=t.reduce((s,r)=>r.outlineLevel&&r.outlineLevel>s?r.outlineLevel:s,0);return e.children.push({name:"sheetFormatPr",properties:{rawMap:{baseColWidth:10,defaultRowHeight:16,outlineLevelRow:i||void 0}}}),e},sae={getTemplate(t){const{worksheet:e,currentSheet:i,config:s}=t,{margins:r={},pageSetup:n,headerFooterConfig:o,suppressColumnOutline:a}=s,{table:l}=e,{rows:c,columns:u}=l,d=u&&u.length?Goe(c,u,!!a):[],{worksheetDataTables:h}=si,p=h.get(i),f=Q.compose(tae(),iae(c),Hoe(u),joe(c,i+1),Uoe(d),Woe(r),zoe(n),Zoe(o),Qoe(i),eae(i),Joe(p)),{children:m}=f({children:[],rIdCounter:0});return{name:"worksheet",properties:{prefixedAttributes:[{prefix:"xmlns:",map:{r:"http://schemas.openxmlformats.org/officeDocument/2006/relationships"}}],rawMap:{xmlns:"http://schemas.openxmlformats.org/spreadsheetml/2006/main"}},children:m}}},rae=sae,nae={getTemplate(t){const{Id:e,Type:i,Target:s}=t;return{name:"Relationship",properties:{rawMap:{Id:e,Type:i,Target:s}}}}},oae=nae,aae={getTemplate(t){const e=t.map(i=>oae.getTemplate(i));return{name:"Relationships",properties:{rawMap:{xmlns:"http://schemas.openxmlformats.org/package/2006/relationships"}},children:e}}},Km=aae,lae=()=>({name:"o:shapelayout",properties:{prefixedAttributes:[{prefix:"v:",map:{ext:"edit"}}]},children:[{name:"o:idmap",properties:{prefixedAttributes:[{prefix:"v:",map:{ext:"edit"}}],rawMap:{data:"1"}}}]}),cae=()=>({name:"v:stroke",properties:{rawMap:{joinstyle:"miter"}}}),uae=t=>({name:"v:formulas",children:t.map(e=>({name:"v:f",properties:{rawMap:{eqn:e}}}))}),dae=()=>({name:"v:path",properties:{prefixedAttributes:[{prefix:"o:",map:{connecttype:"rect",extrusionok:"f"}}],rawMap:{gradientshapeok:"t"}}}),I9=t=>{const{aspectratio:e,rotation:i}=t||{},s={};return e&&(s.aspectratio="t"),i&&(s.rotation="t"),{name:"o:lock",properties:{prefixedAttributes:[{prefix:"v:",map:{ext:"edit"}}],rawMap:s}}};function hae(t,e,i,s,r){return(t-e)/(i-e)*(r-s)+s}var pae={0:"0",5:"6554f",10:"13107f",15:"19661f",20:"26214f",25:".5",30:"39322f",35:"45875f",40:"52429f",45:"58982f",50:"1",55:"72818f",60:"1.25",65:"93623f",70:"109227f",75:"2",80:"2.5",85:"3.4",90:"5",95:"10",96:"12.5",97:"1092267f",98:"25",99:"50",100:"2147483647f"},fae=(t,e)=>{var i;let s;const{recolor:r,brightness:n,contrast:o,id:a}=t;return r&&(s={},(r==="Washout"||r==="Grayscale")&&(s.gain="19661f",s.blacklevel="22938f"),(r==="Black & White"||r==="Grayscale")&&(s.grayscale="t",r==="Black & White"&&(s.bilevel="t"))),(!r||r==="Grayscale")&&(s||(s={}),o!=null&&o!==50&&(s.gain=(i=pae[o])!=null?i:"1"),n!=null&&n!==50&&(s.blacklevel=hae(n,0,100,-.5,.5).toString())),{name:"v:imagedata",properties:{prefixedAttributes:[{prefix:"o:",map:{relid:`rId${e}`,title:a}}],rawMap:s}}},gae=()=>{const t=["if lineDrawn pixelLineWidth 0","sum @0 1 0","sum 0 0 @1","prod @2 1 2","prod @3 21600 pixelWidth","prod @3 21600 pixelHeight","sum @0 0 1","prod @6 1 2","prod @7 21600 pixelWidth","sum @8 21600 0","prod @7 21600 pixelHeight","sum @10 21600 0"];return{name:"v:shapetype",properties:{prefixedAttributes:[{prefix:"o:",map:{spt:"75",preferrelative:"t"}}],rawMap:{coordsize:"21600,21600",filled:"f",id:"_x0000_t75",path:"m@4@5l@4@11@9@11@9@5xe",stroked:"f"}},children:[cae(),uae(t),dae(),I9({aspectratio:!0})]}},sk=t=>Math.floor((t??0)*.74999943307122),mae=(t,e)=>{const{width:i=0,height:s=0,altText:r}=t,n=sk(i),o=sk(s);return{name:"v:shape",properties:{rawMap:{id:t.headerFooterPosition,"o:spid":"_x0000_s1025",style:`position: absolute; margin-left: 0; margin-top: 10in; margin-bottom: 0; margin-right: 0; width: ${n}pt; height: ${o}pt; z-index: ${e+1}`,type:"#_x0000_t75",alt:r}},children:[fae(t,e+1),I9({rotation:!0})]}},vae={getTemplate(t){const e=si.worksheetHeaderFooterImages.get(t.sheetIndex)||[],i=[lae(),gae(),...e.map((s,r)=>mae(s,r))];return{name:"xml",properties:{prefixedAttributes:[{prefix:"xmlns:",map:{v:"urn:schemas-microsoft-com:vml",o:"urn:schemas-microsoft-com:office:office",x:"urn:schemas-microsoft-com:office:excel"}}]},children:i}}},yae=vae,ka=class F9{static createExcel(e,i,s){this.addSheetName(i),yoe(e,this.sheetNames.length);let r=Object.assign({},s);return s.exportAsExcelTable&&(s.columnModel.isPivotActive()&&(this.showExcelTableNonCompatibleFeaturesWarning("pivot mode"),r.exportAsExcelTable=!1),s.gos.get("masterDetail")&&(this.showExcelTableNonCompatibleFeaturesWarning("master/detail"),r.exportAsExcelTable=!1)),this.processTableConfig(i,r),this.createWorksheet(i,r)}static showExcelTableNonCompatibleFeaturesWarning(e){console.warn(`AG Grid: Excel table export does not work with ${e}. The exported Excel file will not contain any Excel tables.
Please turn off ${e} to enable Excel table exports.`)}static getTableNameFromIndex(e){return`table${e+1}`}static getSanitizedTableName(e){return e.replace(/^[^a-zA-Z_]+/,"_").replace(/\s/g,"_").replace(/[^a-zA-Z0-9_]/g,"_")}static addTableToSheet(e,i){if(this.worksheetDataTables.has(e)){console.warn("Unable to add data table to Excel sheet: A table already exists.");return}this.worksheetDataTables.set(e,i)}static processTableConfig(e,i){var s;if(!i.exportAsExcelTable)return;const r=typeof i.exportAsExcelTable=="boolean"?{}:i.exportAsExcelTable,{name:n,showColumnStripes:o,showRowStripes:a,showFilterButton:l,highlightFirstColumn:c,highlightLastColumn:u}=r,d=this.getSanitizedTableName(n||F9.defaultTableDisplayName),h=this.sheetNames.length-1,{table:p}=e,{rows:f,columns:m}=p,g=i.columnModel.getHeaderRowCount(),y=g-1,v=f.length,C=m.length,b=[],T=[];for(let A=0;A<C;A++){const I=m[A];b.push(I.displayName||""),T.push(l==="match"||l===void 0?(s=I.filterAllowed)!=null?s:!1:l)}if(!b||!b.length||!v||!d){console.warn("Unable to add data table to Excel sheet: Missing required parameters.");return}this.addTableToSheet(h,{name:this.getTableNameFromIndex(h),displayName:d,columns:b,showFilterButtons:T,headerRowIndex:y,rowCount:v-g,showRowStripes:a??!0,showColumnStripes:o??!1,highlightFirstColumn:c??!1,highlightLastColumn:u??!1})}static addHeaderFooterImageToMap(e,i){const s=this.sheetNames.length-1,r=e;r.headerFooterPosition=i,this.buildImageMap({imageToAdd:r,idx:s});let n=this.worksheetHeaderFooterImages.get(s);n||(n=[],this.worksheetHeaderFooterImages.set(s,n)),n.find(o=>o.id===e.id)||n.push(e)}static addBodyImageToMap(e,i,s,r,n){let o=this.sheetNames.length;const{row:a,column:l}=e.position||{},c=e;r&&(i!=null&&s!=null&&(!a||!l)&&(e.position||(e.position={}),e.position=Object.assign({},e.position,{row:i,column:r.indexOf(s)+1})),qre(c,r),Xre(c,n)),this.buildImageMap({imageToAdd:c,idx:o});let u=this.worksheetImageIds.get(o);u||(u=new Map,this.worksheetImageIds.set(o,u));const d=this.worksheetImages.get(o);d?d.push(c):this.worksheetImages.set(o,[c]),u.get(e.id)||u.set(e.id,{index:u.size,type:e.imageType})}static buildImageMap(e){const{imageToAdd:i,idx:s}=e,r=this.images.get(i.id);if(r){const n=r.find(o=>o.sheetId===s);n?n.image.push(i):r.push({sheetId:s,image:[i]})}else this.images.set(i.id,[{sheetId:s,image:[i]}]),this.workbookImageIds.set(i.id,{type:i.imageType,index:this.workbookImageIds.size})}static addSheetName(e){const i=Q.escapeString(e.name)||"";let s="";for(;this.sheetNames.indexOf(`${i}${s}`)!==-1;)s===""?s="_1":s=`_${parseInt(s.slice(1),10)+1}`;e.name=`${i}${s}`,this.sheetNames.push(e.name)}static getStringPosition(e){return this.sharedStrings.has(e)?this.sharedStrings.get(e):(this.sharedStrings.set(e,this.sharedStrings.size),this.sharedStrings.size-1)}static resetFactory(){this.sharedStrings=new Map,this.images=new Map,this.worksheetImages=new Map,this.worksheetHeaderFooterImages=new Map,this.workbookImageIds=new Map,this.worksheetImageIds=new Map,this.worksheetDataTables=new Map,this.sheetNames=[],this.factoryMode=Sx.SINGLE_SHEET}static createWorkbook(){return Wr(Toe.getTemplate(this.sheetNames))}static createStylesheet(e){return Wr(Coe.getTemplate(e))}static createSharedStrings(){return Wr(Ene.getTemplate(this.sharedStrings))}static createCore(e){return Wr(Vre.getTemplate(e))}static createContentTypes(e){return Wr(Wre.getTemplate(e))}static createRels(){const e=Km.getTemplate([{Id:"rId1",Type:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/officeDocument",Target:"xl/workbook.xml"},{Id:"rId2",Type:"http://schemas.openxmlformats.org/package/2006/relationships/metadata/core-properties",Target:"docProps/core.xml"}]);return Wr(e)}static createTheme(){return Wr(wne.getTemplate())}static createTable(e,i){return Wr(ane.getTemplate(e,i))}static createWorkbookRels(e){const i=new Array(e).fill(void 0).map((r,n)=>({Id:`rId${n+1}`,Type:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/worksheet",Target:`worksheets/sheet${n+1}.xml`})),s=Km.getTemplate([...i,{Id:`rId${e+1}`,Type:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/theme",Target:"theme/theme1.xml"},{Id:`rId${e+2}`,Type:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/styles",Target:"styles.xml"},{Id:`rId${e+3}`,Type:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/sharedStrings",Target:"sharedStrings.xml"}]);return Wr(s)}static createDrawing(e){return Wr(nne.getTemplate({sheetIndex:e}))}static createDrawingRel(e){const i=this.worksheetImageIds.get(e)||[],s=[];for(const[r,n]of i)s.push({Id:`rId${n.index+1}`,Type:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/image",Target:`../media/image${this.workbookImageIds.get(r).index+1}.${n.type}`});return Wr(Km.getTemplate(s))}static createVmlDrawing(e){return Wr(yae.getTemplate({sheetIndex:e}),!0)}static createVmlDrawingRel(e){const i=this.worksheetHeaderFooterImages.get(e)||[],s=[];for(let r=0;r<i.length;r++){const n=i[r],o=this.workbookImageIds.get(n.id);if(!o)continue;const{index:a,type:l}=o,c=l==="jpg"?"jpeg":l;s.push({Id:`rId${r+1}`,Type:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/image",Target:`../media/image${a+1}.${c}`})}return Wr(Km.getTemplate(s))}static createRelationships({drawingIndex:e,vmlDrawingIndex:i,tableIndex:s}={}){if(e===void 0&&i===void 0&&s===void 0)return"";const r=[];e!=null&&r.push({Id:`rId${r.length+1}`,Type:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/drawing",Target:`../drawings/drawing${e+1}.xml`}),i!=null&&r.push({Id:`rId${r.length+1}`,Type:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/vmlDrawing",Target:`../drawings/vmlDrawing${i+1}.vml`}),s!=null&&r.push({Id:`rId${r.length+1}`,Type:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/table",Target:`../tables/${this.getTableNameFromIndex(s)}.xml`});const n=Km.getTemplate(r);return Wr(n)}static createWorksheet(e,i){return Wr(rae.getTemplate({worksheet:e,currentSheet:this.sheetNames.length-1,config:i}))}};ka.sharedStrings=new Map;ka.sheetNames=[];ka.images=new Map;ka.worksheetImages=new Map;ka.worksheetHeaderFooterImages=new Map;ka.workbookImageIds=new Map;ka.worksheetImageIds=new Map;ka.worksheetDataTables=new Map;ka.defaultTableDisplayName="AG-GRID-TABLE";ka.factoryMode=Sx.SINGLE_SHEET;var si=ka,Cae=class extends w5{constructor(t){super(t),this.mixedStyles={},this.mixedStyleCounter=0,this.rows=[],this.config=Object.assign({},t),this.stylesByIds={},this.config.baseExcelStyles.forEach(e=>{this.stylesByIds[e.id]=e}),this.excelStyles=[...this.config.baseExcelStyles,{id:"_quotePrefix",quotePrefix:1}]}addCustomContent(t){t.forEach(e=>{const i=this.rows.length+1;let s;!this.config.suppressRowOutline&&e.outlineLevel!=null&&(s=e.outlineLevel);const r={height:cw(i,e.height||this.config.rowHeight),cells:(e.cells||[]).map((n,o)=>{var a,l,c;const u=this.addImage(i,this.columnsToExport[o],(a=n.data)==null?void 0:a.value);let d=null;n.styleId&&(d=typeof n.styleId=="string"?[n.styleId]:n.styleId);const h=this.getStyleId(d);if(u)return this.createCell(h,this.getDataTypeForValue(u.value),u.value==null?"":u.value);const p=(c=(l=n.data)==null?void 0:l.value)!=null?c:"",f=this.getDataTypeForValue(p);return n.mergeAcross?this.createMergedCell(h,f,p,n.mergeAcross):this.createCell(h,f,p)}),outlineLevel:s};e.collapsed!=null&&(r.collapsed=e.collapsed),e.hidden!=null&&(r.hidden=e.hidden),this.rows.push(r)})}onNewHeaderGroupingRow(){const t=[];return this.rows.push({cells:t,height:cw(this.rows.length+1,this.config.headerRowHeight)}),{onColumn:(e,i,s,r,n)=>{const o=this.config.styleLinker({rowType:kf.HEADER_GROUPING,rowIndex:1,value:`grouping-${i}`,columnGroup:e});t.push(x2(S2({},this.createMergedCell(this.getStyleId(o),this.getDataTypeForValue("string"),i,r)),{collapsibleRanges:n}))}}}onNewHeaderRow(){return this.onNewRow(this.onNewHeaderColumn,this.config.headerRowHeight)}onNewBodyRow(t){const e=this.onNewRow(this.onNewBodyColumn,this.config.rowHeight);return t&&this.addRowOutlineIfNecessary(t),e}prepare(t){super.prepare(t),this.columnsToExport=[...t],this.cols=t.map((e,i)=>this.convertColumnToExcel(e,i))}parse(){const t=this.rows.reduce((i,s)=>Math.max(i,s.cells.length),0);for(;this.cols.length<t;)this.cols.push(this.convertColumnToExcel(null,this.cols.length+1));const e={name:this.config.sheetName,table:{columns:this.cols,rows:this.rows}};return this.createExcel(e)}addRowOutlineIfNecessary(t){const{gos:e,suppressRowOutline:i,rowGroupExpandState:s="expanded"}=this.config;if(e.get("groupHideOpenParents")||i||t.level==null)return;const n=t.footer?1:0,o=Q.last(this.rows);if(o.outlineLevel=t.level+n,s==="expanded")return;const a=s==="collapsed";if(t.isExpandable()){const l=!a&&t.expanded;o.collapsed=!l}o.hidden=!!t.parent&&t.parent.level!==-1&&(a||this.isAnyParentCollapsed(t.parent))}isAnyParentCollapsed(t){for(;t&&t.level!==-1;){if(!t.expanded)return!0;t=t.parent}return!1}convertColumnToExcel(t,e){const i=this.config.columnWidth,s=t?this.extractHeaderValue(t):void 0,r=s??"",n=t?t.isFilterAllowed():!1;return i?typeof i=="number"?{width:i,displayName:r,filterAllowed:n}:{width:i({column:t,index:e}),displayName:r,filterAllowed:n}:t?{width:Math.max(t.getActualWidth(),75),displayName:r,filterAllowed:n}:{displayName:r,filterAllowed:n}}onNewHeaderColumn(t,e){return i=>{const s=this.extractHeaderValue(i),r=this.config.styleLinker({rowType:kf.HEADER,rowIndex:t,value:s,column:i});e.push(this.createCell(this.getStyleId(r),this.getDataTypeForValue("string"),s))}}onNewBodyColumn(t,e){let i=0;return(s,r,n)=>{if(i>0){i-=1;return}const{value:o,valueFormatted:a}=this.extractRowCellValue(s,r,t,"excel",n),l=this.config.styleLinker({rowType:kf.BODY,rowIndex:t,value:o,column:s,node:n}),c=this.getStyleId(l),u=s.getColSpan(n),d=this.addImage(t,s,o);d?e.push(this.createCell(c,this.getDataTypeForValue(d.value),d.value==null?"":d.value)):u>1?(i=u-1,e.push(this.createMergedCell(c,this.getDataTypeForValue(o),o,u-1))):e.push(this.createCell(c,this.getDataTypeForValue(o),o,a))}}onNewRow(t,e){const i=[];return this.rows.push({cells:i,height:cw(this.rows.length+1,e)}),{onColumn:t.bind(this,this.rows.length,i)()}}createExcel(t){const{excelStyles:e,config:i}=this;return si.createExcel(e,t,i)}getDataTypeForValue(t){return t===void 0?"empty":this.isNumerical(t)?"n":"s"}getTypeFromStyle(t,e){if(this.isFormula(e))return"f";if(t&&t.dataType)switch(t.dataType.toLocaleLowerCase()){case"formula":return"f";case"string":return"s";case"number":return"n";case"datetime":return"d";case"error":return"e";case"boolean":return"b";default:console.warn(`AG Grid: Unrecognized data type for excel export [${t.id}.dataType=${t.dataType}]`)}return null}addImage(t,e,i){if(!this.config.addImageToCell)return;const s=this.config.addImageToCell(t,e,i);if(s)return si.addBodyImageToMap(s.image,t,e,this.columnsToExport,this.config.rowHeight),s}createCell(t,e,i,s){const r=this.getStyleById(t);!(r!=null&&r.dataType)&&e==="s"&&s&&(i=s);const n=this.getTypeFromStyle(r,i)||e,{value:o,escaped:a}=this.getCellValue(n,i),l=[];return r&&l.push(t),a&&l.push("_quotePrefix"),t=this.getStyleId(l)||void 0,{styleId:t,data:{type:n,value:o}}}createMergedCell(t,e,i,s){const r=i??"";return{styleId:this.getStyleById(t)?t:void 0,data:{type:e,value:e==="s"?si.getStringPosition(r).toString():i},mergeAcross:s}}getCellValue(t,e){let i=!1;if(e==null&&(t="s",e=""),t==="s")e&&e[0]==="'"&&(i=!0,e=e.slice(1)),e=si.getStringPosition(e).toString();else if(t==="f")e=e.slice(1);else if(t==="n"){const s=Number(e);isNaN(s)?e="":e!==""&&(e=s.toString())}return{value:e,escaped:i}}getStyleId(t){if(!t||!t.length)return null;if(t.length===1)return t[0];const e=t.join("-");return this.mixedStyles[e]||this.addNewMixedStyle(t),this.mixedStyles[e].excelID}deepCloneObject(t){return JSON.parse(JSON.stringify(t))}addNewMixedStyle(t){this.mixedStyleCounter+=1;const e=`mixedStyle${this.mixedStyleCounter}`,i={};for(const r of t)for(const n of this.excelStyles)n.id===r&&Q.mergeDeep(i,this.deepCloneObject(n));i.id=e,i.name=e;const s=t.join("-");this.mixedStyles[s]={excelID:e,key:s,result:i},this.excelStyles.push(i),this.stylesByIds[e]=i}isFormula(t){return t==null?!1:this.config.autoConvertFormulas&&t.toString().startsWith("=")}isNumerical(t){return typeof t=="bigint"?!0:isFinite(t)&&t!==""&&!isNaN(parseFloat(t))}getStyleById(t){return t==null?null:this.stylesByIds[t]||null}},bae=()=>{vs.addFolders(["_rels/","docProps/","xl/","xl/theme/","xl/_rels/","xl/worksheets/"]);const{images:t}=si;if(!t.size)return;vs.addFolders(["xl/worksheets/_rels","xl/drawings/","xl/drawings/_rels","xl/media/"]);let e=0;t.forEach(i=>{const s=i[0].image[0],{base64:r,imageType:n}=s,o=n==="jpg"?"jpeg":n;vs.addFile(`xl/media/image${++e}.${o}`,r,!0)})},wae=t=>{let e=0,i=0,s=0;const{images:r,worksheetDataTables:n,worksheetImages:o,worksheetHeaderFooterImages:a}=si;for(let l=0;l<t.length;l++){const c=t[l];vs.addFile(`xl/worksheets/sheet${l+1}.xml`,c,!1);const u=r.size>0&&o.has(l),d=n.size>0&&n.has(l),h=r.size&&a.has(l);if(!u&&!d&&!h)continue;let p,f,m;u&&(Sae(l,e),f=e,e++),h&&(xae(l,i),m=i,i++),d&&(p=s++);const g=`xl/worksheets/_rels/sheet${l+1}.xml.rels`;vs.addFile(g,si.createRelationships({tableIndex:p,drawingIndex:f,vmlDrawingIndex:m}))}},Sae=(t,e)=>{const i="xl/drawings",s=`${i}/drawing${e+1}.xml`,r=`${i}/_rels/drawing${e+1}.xml.rels`;vs.addFile(r,si.createDrawingRel(t)),vs.addFile(s,si.createDrawing(t))},xae=(t,e)=>{const i="xl/drawings",s=`${i}/vmlDrawing${e+1}.vml`,r=`${i}/_rels/vmlDrawing${e+1}.vml.rels`;vs.addFile(s,si.createVmlDrawing(t)),vs.addFile(r,si.createVmlDrawingRel(t))},Eae=()=>{const{worksheetDataTables:t}=si,e=t,i=Array.from(e.keys());for(let s=0;s<i.length;s++){const r=i[s],n=e.get(r);n&&vs.addFile(`xl/tables/${n.name}.xml`,si.createTable(n,s))}},Tae=(t,e,i)=>{vs.addFile("xl/workbook.xml",si.createWorkbook()),vs.addFile("xl/styles.xml",si.createStylesheet(t)),vs.addFile("xl/sharedStrings.xml",si.createSharedStrings()),vs.addFile("xl/theme/theme1.xml",si.createTheme()),vs.addFile("xl/_rels/workbook.xml.rels",si.createWorkbookRels(i)),vs.addFile("docProps/core.xml",si.createCore(e)),vs.addFile("[Content_Types].xml",si.createContentTypes(i)),vs.addFile("_rels/.rels",si.createRels())},L9=(t,e={})=>{if(!t||t.length===0)return console.warn("AG Grid: Invalid params supplied to createExcelFileForExcel() - `ExcelExportParams.data` is empty."),si.resetFactory(),!1;const{fontSize:i=11,author:s="AG Grid"}=e;return bae(),Eae(),wae(t),Tae(i,s,t.length),si.resetFactory(),!0},k9=t=>{const{data:e,fontSize:i,author:s}=t,r=t.mimeType||"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet";return L9(e,{author:s,fontSize:i})?vs.getZipFile(r):Promise.resolve(void 0)},OA=t=>{const{data:e,fontSize:i,author:s}=t,r=t.mimeType||"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet";if(L9(e,{author:s,fontSize:i}))return vs.getUncompressedZipFile(r)},N9=t=>{const{fileName:e="export.xlsx"}=t;k9(t).then(i=>{if(i){const s=typeof e=="function"?e():e;sD.download(s,i)}})},vc=class extends b5{postConstruct(){this.setBeans({gridSerializer:this.gridSerializer,gos:this.gos})}getMergedParams(t){const e=this.gos.get("defaultExcelExportParams");return Object.assign({},e,t)}export(t){if(this.isExportSuppressed()){console.warn("AG Grid: Export cancelled. Export is not allowed as per your configuration.");return}const e=this.getMergedParams(t),s={data:[this.getData(e)],fontSize:e.fontSize,author:e.author,mimeType:e.mimeType};this.packageCompressedFile(s).then(r=>{if(r){const{fileName:n}=e,o=typeof n=="function"?n(this.gos.getGridCommonParams()):n;sD.download(this.getFileName(o),r)}})}exportDataAsExcel(t){this.export(t)}getDataAsExcel(t){const e=this.getMergedParams(t),s={data:[this.getData(e)],fontSize:e.fontSize,author:e.author,mimeType:e.mimeType};return this.packageFile(s)}setFactoryMode(t){si.factoryMode=t}getFactoryMode(){return si.factoryMode}getSheetDataForExcel(t){const e=this.getMergedParams(t);return this.getData(e)}getMultipleSheetsAsExcel(t){return OA(t)}exportMultipleSheetsAsExcel(t){N9(t)}getDefaultFileExtension(){return"xlsx"}createSerializingSession(t){const{columnModel:e,valueService:i,gos:s}=this;let r;if(t.sheetName!=null){const{sheetName:o}=t,a=typeof o=="function"?o(this.gos.getGridCommonParams()):o;r=String(a).substring(0,31)}else r="ag-grid";const n=x2(S2({},t),{sheetName:r,columnModel:e,valueService:i,gos:s,suppressRowOutline:t.suppressRowOutline||t.skipRowGroups,headerRowHeight:t.headerRowHeight||t.rowHeight,baseExcelStyles:this.gos.get("excelStyles")||[],styleLinker:this.styleLinker.bind(this)});return new Cae(n)}styleLinker(t){const{rowType:e,rowIndex:i,value:s,column:r,columnGroup:n,node:o}=t,a=e===kf.HEADER,l=e===kf.HEADER_GROUPING,c=a?r:n;let u=[];if(a||l)return u.push("header"),l&&u.push("headerGroup"),c&&(u=u.concat(td.getHeaderClassesFromColDef(c.getDefinition(),this.gos,r||null,n||null))),u;const d=this.gos.get("excelStyles"),h=["cell"];if(!d||!d.length)return h;const p=d.map(f=>f.id);return this.stylingService.processAllCellClasses(r.getDefinition(),this.gos.addGridCommonParams({value:s,data:o.data,node:o,colDef:r.getDefinition(),column:r,rowIndex:i}),f=>{p.indexOf(f)>-1&&h.push(f)}),h.sort((f,m)=>p.indexOf(f)<p.indexOf(m)?-1:1)}isExportSuppressed(){return this.gos.get("suppressExcelExport")}packageCompressedFile(t){return k9(t)}packageFile(t){return OA(t)}};_p([W("columnModel")],vc.prototype,"columnModel",2);_p([W("valueService")],vc.prototype,"valueService",2);_p([W("stylingService")],vc.prototype,"stylingService",2);_p([W("gridSerializer")],vc.prototype,"gridSerializer",2);_p([W("gridOptionsService")],vc.prototype,"gos",2);_p([de],vc.prototype,"postConstruct",1);vc=_p([Me("excelCreator")],vc);var _ae="31.3.4",O9={version:_ae,moduleName:Ut.ExcelExportModule,beans:[vc,ya,dc],dependantModules:[Fx,Qs]},G9=Object.defineProperty,Aae=Object.getOwnPropertyDescriptor,rk=Object.getOwnPropertySymbols,Rae=Object.prototype.hasOwnProperty,Mae=Object.prototype.propertyIsEnumerable,nk=(t,e,i)=>e in t?G9(t,e,{enumerable:!0,configurable:!0,writable:!0,value:i}):t[e]=i,ok=(t,e)=>{for(var i in e||(e={}))Rae.call(e,i)&&nk(t,i,e[i]);if(rk)for(var i of rk(e))Mae.call(e,i)&&nk(t,i,e[i]);return t},Rs=(t,e,i,s)=>{for(var r=s>1?void 0:s?Aae(e,i):e,n=t.length-1,o;n>=0;n--)(o=t[n])&&(r=(s?o(e,i,r):o(r))||r);return s&&r&&G9(e,i,r),r},Em=class extends Te{preConstruct(){this.setTemplate(`<div class="ag-filter-toolpanel-search" role="presentation">
                <div ref="eExpand" class="ag-filter-toolpanel-expand"></div>
                <ag-input-text-field ref="eFilterTextField" class="ag-filter-toolpanel-search-input"></ag-input-text-field>
            </div>`)}postConstruct(){const t=this.localeService.getLocaleTextFunc();this.eFilterTextField.setAutoComplete(!1).setInputAriaLabel(t("ariaFilterColumnsInput","Filter Columns Input")).onValueChange(this.onSearchTextChanged.bind(this)),this.createExpandIcons(),this.setExpandState(0),this.addManagedListener(this.eExpand,"click",this.onExpandClicked.bind(this)),this.addManagedListener(this.eventService,K.EVENT_NEW_COLUMNS_LOADED,this.showOrHideOptions.bind(this))}init(t){this.params=t,this.columnModel.isReady()&&this.showOrHideOptions()}createExpandIcons(){this.eExpand.appendChild(this.eExpandChecked=Q.createIconNoSpan("columnSelectOpen",this.gos)),this.eExpand.appendChild(this.eExpandUnchecked=Q.createIconNoSpan("columnSelectClosed",this.gos)),this.eExpand.appendChild(this.eExpandIndeterminate=Q.createIconNoSpan("columnSelectIndeterminate",this.gos))}showOrHideOptions(){const t=!this.params.suppressFilterSearch,e=!this.params.suppressExpandAll,i=this.localeService.getLocaleTextFunc();this.eFilterTextField.setInputPlaceholder(i("searchOoo","Search..."));const s=n=>n.getOriginalParent()&&n.isFilterAllowed(),r=this.columnModel.getAllGridColumns().some(s);Q.setDisplayed(this.eFilterTextField.getGui(),t),Q.setDisplayed(this.eExpand,e&&r)}onSearchTextChanged(){this.onSearchTextChangedDebounced||(this.onSearchTextChangedDebounced=Q.debounce(()=>{this.dispatchEvent({type:"searchChanged",searchText:this.eFilterTextField.getValue()})},300)),this.onSearchTextChangedDebounced()}onExpandClicked(){const t=this.currentExpandState===0?{type:"collapseAll"}:{type:"expandAll"};this.dispatchEvent(t)}setExpandState(t){this.currentExpandState=t,Q.setDisplayed(this.eExpandChecked,this.currentExpandState===0),Q.setDisplayed(this.eExpandUnchecked,this.currentExpandState===1),Q.setDisplayed(this.eExpandIndeterminate,this.currentExpandState===2)}};Rs([W("columnModel")],Em.prototype,"columnModel",2);Rs([pe("eExpand")],Em.prototype,"eExpand",2);Rs([pe("eFilterTextField")],Em.prototype,"eFilterTextField",2);Rs([Wh],Em.prototype,"preConstruct",1);Rs([de],Em.prototype,"postConstruct",1);var Al=class B9 extends Te{constructor(e,i){super(B9.TEMPLATE),this.expandedCallback=i,this.expanded=!1,this.hideHeader=e}postConstruct(){this.eExpandChecked=Q.createIconNoSpan("columnSelectOpen",this.gos),this.eExpandUnchecked=Q.createIconNoSpan("columnSelectClosed",this.gos),this.eExpand.appendChild(this.eExpandChecked),this.eExpand.appendChild(this.eExpandUnchecked)}setColumn(e){this.column=e,this.eFilterName.innerText=this.columnModel.getDisplayNameForColumn(this.column,"filterToolPanel",!1)||"",this.addManagedListener(this.eFilterToolPanelHeader,"click",this.toggleExpanded.bind(this)),this.addManagedListener(this.eFilterToolPanelHeader,"keydown",this.onKeyDown.bind(this)),this.addManagedListener(this.eventService,K.EVENT_FILTER_OPENED,this.onFilterOpened.bind(this)),this.addInIcon("filter",this.eFilterIcon,this.column),Q.setDisplayed(this.eFilterIcon,this.isFilterActive(),{skipAriaHidden:!0}),Q.setDisplayed(this.eExpandChecked,!1),this.hideHeader?(Q.setDisplayed(this.eFilterToolPanelHeader,!1),this.eFilterToolPanelHeader.removeAttribute("tabindex")):this.eFilterToolPanelHeader.setAttribute("tabindex","0"),this.addManagedListener(this.column,Nt.EVENT_FILTER_CHANGED,this.onFilterChanged.bind(this))}onKeyDown(e){const{key:i}=e,{ENTER:s,SPACE:r,LEFT:n,RIGHT:o}=ce;i!==s&&i!==r&&i!==n&&i!==o||(e.preventDefault(),i===s||i===r?this.toggleExpanded():i===ce.LEFT?this.collapse():this.expand())}getColumn(){return this.column}getColumnFilterName(){return this.columnModel.getDisplayNameForColumn(this.column,"filterToolPanel",!1)}addCssClassToTitleBar(e){this.eFilterToolPanelHeader.classList.add(e)}addInIcon(e,i,s){if(i==null)return;const r=Q.createIconNoSpan(e,this.gos,s);i.appendChild(r)}isFilterActive(){return this.filterManager.isFilterActive(this.column)}onFilterChanged(){Q.setDisplayed(this.eFilterIcon,this.isFilterActive(),{skipAriaHidden:!0}),this.dispatchEvent({type:Nt.EVENT_FILTER_CHANGED})}toggleExpanded(){this.expanded?this.collapse():this.expand()}expand(){this.expanded||(this.expanded=!0,Q.setAriaExpanded(this.eFilterToolPanelHeader,!0),Q.setDisplayed(this.eExpandChecked,!0),Q.setDisplayed(this.eExpandUnchecked,!1),this.addFilterElement(),this.expandedCallback())}addFilterElement(e){var i;const s=Q.loadTemplate('<div class="ag-filter-toolpanel-instance-filter"></div>'),r=this.createManagedBean(new ed(this.column,"TOOLBAR"));this.filterWrapperComp=r,r.hasFilter()&&((i=r.getFilter())==null||i.then(n=>{this.underlyingFilter=n,n&&(s.appendChild(r.getGui()),this.agFilterToolPanelBody.appendChild(s),r.afterGuiAttached({container:"toolPanel",suppressFocus:e}))}))}collapse(){var e;this.expanded&&(this.expanded=!1,Q.setAriaExpanded(this.eFilterToolPanelHeader,!1),this.removeFilterElement(),Q.setDisplayed(this.eExpandChecked,!1),Q.setDisplayed(this.eExpandUnchecked,!0),(e=this.filterWrapperComp)==null||e.afterGuiDetached(),this.destroyBean(this.filterWrapperComp),this.expandedCallback())}removeFilterElement(){Q.clearElement(this.agFilterToolPanelBody)}isExpanded(){return this.expanded}refreshFilter(e){var i;if(!this.expanded)return;const s=this.underlyingFilter;s&&(e?typeof s.refreshVirtualList=="function"&&s.refreshVirtualList():(i=s.afterGuiDetached)==null||i.call(s))}onFilterOpened(e){e.source==="COLUMN_MENU"&&e.column===this.column&&this.expanded&&this.collapse()}};Al.TEMPLATE=`
        <div class="ag-filter-toolpanel-instance">
            <div class="ag-filter-toolpanel-header ag-filter-toolpanel-instance-header" ref="eFilterToolPanelHeader" role="button" aria-expanded="false">
                <div ref="eExpand" class="ag-filter-toolpanel-expand"></div>
                <span ref="eFilterName" class="ag-header-cell-text"></span>
                <span ref="eFilterIcon" class="ag-header-icon ag-filter-icon ag-filter-toolpanel-instance-header-icon" aria-hidden="true"></span>
            </div>
            <div class="ag-filter-toolpanel-instance-body ag-filter" ref="agFilterToolPanelBody"></div>
        </div>`;Rs([pe("eFilterToolPanelHeader")],Al.prototype,"eFilterToolPanelHeader",2);Rs([pe("eFilterName")],Al.prototype,"eFilterName",2);Rs([pe("agFilterToolPanelBody")],Al.prototype,"agFilterToolPanelBody",2);Rs([pe("eFilterIcon")],Al.prototype,"eFilterIcon",2);Rs([pe("eExpand")],Al.prototype,"eExpand",2);Rs([W("filterManager")],Al.prototype,"filterManager",2);Rs([W("columnModel")],Al.prototype,"columnModel",2);Rs([de],Al.prototype,"postConstruct",1);var V9=Al,Tm=class GA extends Te{constructor(e,i,s,r,n){super(),this.columnGroup=e,this.childFilterComps=i,this.depth=r,this.expandedCallback=s,this.showingColumn=n}preConstruct(){const e={cssIdentifier:"filter-toolpanel",direction:"vertical"};this.setTemplate(GA.TEMPLATE,{filterGroupComp:e})}init(){this.setGroupTitle(),this.filterGroupComp.setAlignItems("stretch"),this.filterGroupComp.addCssClass(`ag-filter-toolpanel-group-level-${this.depth}`),this.filterGroupComp.addCssClassToTitleBar(`ag-filter-toolpanel-group-level-${this.depth}-header`),this.childFilterComps.forEach(e=>{this.filterGroupComp.addItem(e),e.addCssClassToTitleBar(`ag-filter-toolpanel-group-level-${this.depth+1}-header`)}),this.refreshFilterClass(),this.addExpandCollapseListeners(),this.addFilterChangedListeners(),this.setupTooltip(),this.addInIcon("filter")}setupTooltip(){if(!this.showingColumn)return;const e=this.gos.get("tooltipShowMode")==="whenTruncated";let i;e&&(i=()=>{const n=this.filterGroupComp.getGui().querySelector(".ag-group-title");return n?n.scrollWidth>n.clientWidth:!0});const s=()=>{const r=this.columnGroup.getColDef().headerTooltip;this.setTooltip({newTooltipText:r,location:"filterToolPanelColumnGroup",shouldDisplayTooltip:i})};s(),this.addManagedListener(this.eventService,K.EVENT_NEW_COLUMNS_LOADED,s)}getTooltipParams(){const e=super.getTooltipParams();return e.location="filterToolPanelColumnGroup",e}addCssClassToTitleBar(e){this.filterGroupComp.addCssClassToTitleBar(e)}refreshFilters(e){this.childFilterComps.forEach(i=>{i instanceof GA?i.refreshFilters(e):i.refreshFilter(e)})}isColumnGroup(){return this.columnGroup instanceof bi}isExpanded(){return this.filterGroupComp.isExpanded()}getChildren(){return this.childFilterComps}getFilterGroupName(){return this.filterGroupName?this.filterGroupName:""}getFilterGroupId(){return this.columnGroup.getId()}hideGroupItem(e,i){this.filterGroupComp.hideItem(e,i)}hideGroup(e){this.setDisplayed(!e)}addInIcon(e){const i=Q.createIconNoSpan(e,this.gos);i&&i.classList.add("ag-filter-toolpanel-group-instance-header-icon"),this.filterGroupComp.addTitleBarWidget(i)}forEachToolPanelFilterChild(e){this.childFilterComps.forEach(i=>{i instanceof V9&&e(i)})}addExpandCollapseListeners(){const e=this.isColumnGroup()?()=>this.expandedCallback():()=>this.forEachToolPanelFilterChild(s=>s.expand()),i=this.isColumnGroup()?()=>this.expandedCallback():()=>this.forEachToolPanelFilterChild(s=>s.collapse());this.addManagedListener(this.filterGroupComp,Bo.EVENT_EXPANDED,e),this.addManagedListener(this.filterGroupComp,Bo.EVENT_COLLAPSED,i)}getColumns(){return this.columnGroup instanceof bi?this.columnGroup.getLeafColumns():[this.columnGroup]}addFilterChangedListeners(){this.getColumns().forEach(e=>{this.addManagedListener(e,Nt.EVENT_FILTER_CHANGED,()=>this.refreshFilterClass())}),this.columnGroup instanceof bi||this.addManagedListener(this.eventService,K.EVENT_FILTER_OPENED,this.onFilterOpened.bind(this))}refreshFilterClass(){const e=this.getColumns(),i=()=>e.some(s=>s.isFilterActive());this.filterGroupComp.addOrRemoveCssClass("ag-has-filter",i())}onFilterOpened(e){e.source==="COLUMN_MENU"&&e.column===this.columnGroup&&this.isExpanded()&&this.collapse()}expand(){this.filterGroupComp.toggleGroupExpand(!0)}collapse(){this.filterGroupComp.toggleGroupExpand(!1)}setGroupTitle(){this.filterGroupName=this.columnGroup instanceof bi?this.getColumnGroupName(this.columnGroup):this.getColumnName(this.columnGroup),this.filterGroupComp.setTitle(this.filterGroupName||"")}getColumnGroupName(e){return this.columnModel.getDisplayNameForProvidedColumnGroup(null,e,"filterToolPanel")}getColumnName(e){return this.columnModel.getDisplayNameForColumn(e,"filterToolPanel",!1)}destroyFilters(){this.childFilterComps=this.destroyBeans(this.childFilterComps),Q.clearElement(this.getGui())}destroy(){this.destroyFilters(),super.destroy()}};Tm.TEMPLATE=`<div class="ag-filter-toolpanel-group-wrapper">
            <ag-group-component ref="filterGroupComp"></ag-group-component>
        </div>`;Rs([pe("filterGroupComp")],Tm.prototype,"filterGroupComp",2);Rs([W("columnModel")],Tm.prototype,"columnModel",2);Rs([Wh],Tm.prototype,"preConstruct",1);Rs([de],Tm.prototype,"init",1);var qc=Tm,ZE=class H9 extends Te{constructor(){super(H9.TEMPLATE),this.initialised=!1,this.hasLoadedInitialState=!1,this.isInitialState=!1,this.filterGroupComps=[],this.suppressOnColumnsChanged=!1,this.onColumnsChangedPending=!1}init(e){this.initialised=!0;const i=this.gos.addGridCommonParams({suppressExpandAll:!1,suppressFilterSearch:!1,suppressSyncLayoutWithGrid:!1});Q.mergeDeep(i,e),this.params=i,this.params.suppressSyncLayoutWithGrid||this.addManagedListener(this.eventService,K.EVENT_COLUMN_MOVED,()=>this.onColumnsChanged()),this.addManagedListener(this.eventService,K.EVENT_NEW_COLUMNS_LOADED,()=>this.onColumnsChanged()),this.addManagedListener(this.eventService,K.EVENT_TOOL_PANEL_VISIBLE_CHANGED,s=>{s.key==="filters"&&this.refreshFilters(s.visible)}),this.addManagedListener(this.eventService,K.EVENT_DRAG_STARTED,()=>{this.suppressOnColumnsChanged=!0}),this.addManagedListener(this.eventService,K.EVENT_DRAG_STOPPED,()=>{this.suppressOnColumnsChanged=!1,this.onColumnsChangedPending&&(this.onColumnsChangedPending=!1,this.onColumnsChanged())}),this.columnModel.isReady()&&this.onColumnsChanged()}onColumnsChanged(){if(this.suppressOnColumnsChanged){this.onColumnsChangedPending=!0;return}const e=this.columnModel.isPivotMode();!this.params.suppressSyncLayoutWithGrid&&!e?this.syncFilterLayout():this.buildTreeFromProvidedColumnDefs(),this.refreshAriaLabel()}syncFilterLayout(){this.toolPanelColDefService.syncLayoutWithGrid(this.setFiltersLayout.bind(this)),this.refreshAriaLabel()}buildTreeFromProvidedColumnDefs(){const e=this.columnModel.getPrimaryColumnTree();this.recreateFilters(e)}setFiltersLayout(e){const i=this.toolPanelColDefService.createColumnTree(e);this.recreateFilters(i)}recreateFilters(e){const i=this.gos.getActiveDomElement();this.hasLoadedInitialState||(this.hasLoadedInitialState=!0,this.isInitialState=!!this.params.initialState);const s=this.getExpansionState();this.destroyFilters(),this.filterGroupComps=this.recursivelyAddComps(e,0,s);const r=this.filterGroupComps.length;r&&(this.filterGroupComps.forEach(n=>this.appendChild(n)),this.setFirstAndLastVisible(0,r-1)),Q.exists(this.searchFilterText)&&this.searchFilters(this.searchFilterText),this.fireExpandedEvent(),this.getGui().contains(i)&&i.focus(),this.isInitialState=!1,this.refreshAriaLabel()}recursivelyAddComps(e,i,s){return Q.flatten(e.map(r=>{if(r instanceof bi)return Q.flatten(this.recursivelyAddFilterGroupComps(r,i,s));const n=r;if(!this.shouldDisplayFilter(n))return[];const o=i===0,a=new V9(o,()=>this.onFilterExpanded());if(this.createBean(a),a.setColumn(n),s.get(n.getId())&&a.expand(),i>0)return a;const l=this.createBean(new qc(n,[a],this.onGroupExpanded.bind(this),i,!0));return l.addCssClassToTitleBar("ag-filter-toolpanel-header"),s.get(l.getFilterGroupId())||l.collapse(),l}))}refreshAriaLabel(){const e=this.localeService.getLocaleTextFunc(),i=e("ariaFilterPanelList","Filter List"),s=e("filters","Filters"),c=this.getGui().querySelectorAll(".ag-filter-toolpanel-group-item:not(.ag-filter-toolpanel-group-wrapper, .ag-hidden)").length;Q.setAriaLabel(this.getAriaElement(),`${i} ${c} ${s}`)}recursivelyAddFilterGroupComps(e,i,s){if(!this.filtersExistInChildren(e.getChildren()))return;const r=e.getColGroupDef();if(r&&r.suppressFiltersToolPanel)return[];const n=e.isPadding()?i:i+1,o=Q.flatten(this.recursivelyAddComps(e.getChildren(),n,s));if(e.isPadding())return o;const a=new qc(e,o,this.onGroupExpanded.bind(this),i,!1);this.createBean(a),a.addCssClassToTitleBar("ag-filter-toolpanel-header");const l=s.get(a.getFilterGroupId());return(this.isInitialState&&!l||l===!1)&&a.collapse(),[a]}filtersExistInChildren(e){return e.some(i=>i instanceof bi?this.filtersExistInChildren(i.getChildren()):this.shouldDisplayFilter(i))}shouldDisplayFilter(e){const i=e.getColDef()&&e.getColDef().suppressFiltersToolPanel;return e.isFilterAllowed()&&!i}getExpansionState(){const e=new Map;if(this.isInitialState){const{expandedColIds:s,expandedGroupIds:r}=this.params.initialState;return s.forEach(n=>e.set(n,!0)),r.forEach(n=>e.set(n,!0)),e}const i=s=>{e.set(s.getFilterGroupId(),s.isExpanded()),s.getChildren().forEach(r=>{r instanceof qc?i(r):e.set(r.getColumn().getId(),r.isExpanded())})};return this.filterGroupComps.forEach(i),e}refresh(){}setVisible(e){super.setDisplayed(e),e&&!this.initialised&&this.init(this.params)}expandFilterGroups(e,i){const s=[],r=n=>{const o=n.getFilterGroupId();(!i||Q.includes(i,o))&&(e&&n.isColumnGroup()?n.expand():n.collapse(),s.push(o)),n.getChildren().forEach(l=>{l instanceof qc&&r(l)})};if(this.filterGroupComps.forEach(r),this.onGroupExpanded(),i){const n=i.filter(o=>s.indexOf(o)<0);n.length>0&&console.warn("AG Grid: unable to find groups for these supplied groupIds:",n)}}expandFilters(e,i){const s=[],r=n=>{if(n instanceof qc){let l=!1;return n.getChildren().forEach(c=>{r(c)&&(e?(n.expand(),l=!0):n.isColumnGroup()||n.collapse())}),l}const o=n.getColumn().getColId(),a=!i||Q.includes(i,o);return a&&(e?n.expand():n.collapse(),s.push(o)),a};if(this.filterGroupComps.forEach(r),this.onGroupExpanded(),i){const n=i.filter(o=>s.indexOf(o)<0);n.length>0&&console.warn("AG Grid: unable to find columns for these supplied colIds:",n)}}onGroupExpanded(){this.fireExpandedEvent()}onFilterExpanded(){this.dispatchEvent({type:"filterExpanded"})}fireExpandedEvent(){let e=0,i=0;const s=n=>{n.isColumnGroup()&&(n.isExpanded()?e++:i++,n.getChildren().forEach(o=>{o instanceof qc&&s(o)}))};this.filterGroupComps.forEach(s);let r;e>0&&i>0?r=2:i>0?r=1:r=0,this.dispatchEvent({type:"groupExpanded",state:r})}performFilterSearch(e){this.searchFilterText=Q.exists(e)?e.toLowerCase():null,this.searchFilters(this.searchFilterText)}searchFilters(e){const i=o=>!Q.exists(e)||o.toLowerCase().indexOf(e)!==-1,s=(o,a)=>{if(!(o instanceof qc))return i(o.getColumnFilterName()||"");const l=o.getChildren(),c=i(o.getFilterGroupName()),u=a||c;if(u){o.hideGroup(!1);for(let h=0;h<l.length;h++)s(l[h],u),o.hideGroupItem(!1,h);return!0}let d=!1;return l.forEach((h,p)=>{const f=s(h,a);o.hideGroupItem(!f,p),f&&(d=!0)}),o.hideGroup(!d),d};let r,n;this.filterGroupComps.forEach((o,a)=>{s(o,!1),r===void 0?o.containsCssClass("ag-hidden")||(r=a,n=a):!o.containsCssClass("ag-hidden")&&n!==a&&(n=a)}),this.setFirstAndLastVisible(r,n),this.refreshAriaLabel()}setFirstAndLastVisible(e,i){this.filterGroupComps.forEach((s,r)=>{s.removeCssClass("ag-first-group-visible"),s.removeCssClass("ag-last-group-visible"),r===e&&s.addCssClass("ag-first-group-visible"),r===i&&s.addCssClass("ag-last-group-visible")})}refreshFilters(e){this.filterGroupComps.forEach(i=>i.refreshFilters(e))}getExpandedFiltersAndGroups(){const e=[],i=new Set,s=r=>{if(r instanceof qc){r.getChildren().forEach(o=>s(o));const n=r.getFilterGroupId();r.isExpanded()&&!i.has(n)&&e.push(n)}else r.isExpanded()&&i.add(r.getColumn().getColId())};return this.filterGroupComps.forEach(s),{expandedGroupIds:e,expandedColIds:Array.from(i)}}destroyFilters(){this.filterGroupComps=this.destroyBeans(this.filterGroupComps),Q.clearElement(this.getGui())}destroy(){this.destroyFilters(),super.destroy()}};ZE.TEMPLATE='<div class="ag-filter-list-panel"></div>';Rs([W("toolPanelColDefService")],ZE.prototype,"toolPanelColDefService",2);Rs([W("columnModel")],ZE.prototype,"columnModel",2);var Dae=ZE,JE=class j9 extends Te{constructor(){super(j9.TEMPLATE),this.initialised=!1,this.listenerDestroyFuncs=[]}init(e){this.initialised&&(this.listenerDestroyFuncs.forEach(n=>n()),this.listenerDestroyFuncs=[]),this.initialised=!0;const i=this.gos.addGridCommonParams({suppressExpandAll:!1,suppressFilterSearch:!1,suppressSyncLayoutWithGrid:!1});this.params=ok(ok({},i),e),this.filtersToolPanelHeaderPanel.init(this.params),this.filtersToolPanelListPanel.init(this.params);const s=this.params.suppressExpandAll,r=this.params.suppressFilterSearch;s&&r&&this.filtersToolPanelHeaderPanel.setDisplayed(!1),this.listenerDestroyFuncs.push(this.addManagedListener(this.filtersToolPanelHeaderPanel,"expandAll",this.onExpandAll.bind(this)),this.addManagedListener(this.filtersToolPanelHeaderPanel,"collapseAll",this.onCollapseAll.bind(this)),this.addManagedListener(this.filtersToolPanelHeaderPanel,"searchChanged",this.onSearchChanged.bind(this)),this.addManagedListener(this.filtersToolPanelListPanel,"filterExpanded",this.onFilterExpanded.bind(this)),this.addManagedListener(this.filtersToolPanelListPanel,"groupExpanded",this.onGroupExpanded.bind(this)))}setVisible(e){super.setDisplayed(e),e&&!this.initialised&&this.init(this.params)}onExpandAll(){this.filtersToolPanelListPanel.expandFilterGroups(!0)}onCollapseAll(){this.filtersToolPanelListPanel.expandFilterGroups(!1)}onSearchChanged(e){this.filtersToolPanelListPanel.performFilterSearch(e.searchText)}setFilterLayout(e){this.filtersToolPanelListPanel.setFiltersLayout(e)}onFilterExpanded(){this.params.onStateUpdated()}onGroupExpanded(e){this.filtersToolPanelHeaderPanel.setExpandState(e.state),this.params.onStateUpdated()}expandFilterGroups(e){this.filtersToolPanelListPanel.expandFilterGroups(!0,e)}collapseFilterGroups(e){this.filtersToolPanelListPanel.expandFilterGroups(!1,e)}expandFilters(e){this.filtersToolPanelListPanel.expandFilters(!0,e)}collapseFilters(e){this.filtersToolPanelListPanel.expandFilters(!1,e)}syncLayoutWithGrid(){this.filtersToolPanelListPanel.syncFilterLayout()}refresh(e){return this.init(e),!0}getState(){return this.filtersToolPanelListPanel.getExpandedFiltersAndGroups()}destroy(){super.destroy()}};JE.TEMPLATE=`<div class="ag-filter-toolpanel">
            <ag-filters-tool-panel-header ref="filtersToolPanelHeaderPanel"></ag-filters-tool-panel-header>
            <ag-filters-tool-panel-list ref="filtersToolPanelListPanel"></ag-filters-tool-panel-list>
         </div>`;Rs([pe("filtersToolPanelHeaderPanel")],JE.prototype,"filtersToolPanelHeaderPanel",2);Rs([pe("filtersToolPanelListPanel")],JE.prototype,"filtersToolPanelListPanel",2);var Pae=JE,Iae="31.3.4",U9={version:Iae,moduleName:Ut.FiltersToolPanelModule,beans:[],agStackComponents:[{componentName:"AgFiltersToolPanelHeader",componentClass:Em},{componentName:"AgFiltersToolPanelList",componentClass:Dae}],userComponents:[{componentName:"agFiltersToolPanel",componentClass:Pae}],dependantModules:[YE,Qs]},W9=Object.defineProperty,ak=Object.getOwnPropertySymbols,Fae=Object.prototype.hasOwnProperty,Lae=Object.prototype.propertyIsEnumerable,lk=(t,e,i)=>e in t?W9(t,e,{enumerable:!0,configurable:!0,writable:!0,value:i}):t[e]=i,kae=(t,e)=>{for(var i in e||(e={}))Fae.call(e,i)&&lk(t,i,e[i]);if(ak)for(var i of ak(e))Lae.call(e,i)&&lk(t,i,e[i]);return t},E2=(t,e,i,s)=>{for(var r=void 0,n=t.length-1,o;n>=0;n--)(o=t[n])&&(r=o(e,i,r)||r);return r&&W9(e,i,r),r},QE=class extends ye{constructor(){super(...arguments),this.loadRowDataVersion=0}init(t,e){this.params=e,this.comp=t,e.pinned==null&&(this.setAutoHeightClasses(),this.setupRefreshStrategy(),this.addThemeToDetailGrid(),this.createDetailGrid(),this.loadRowData(),this.addManagedListener(this.eventService,K.EVENT_FULL_WIDTH_ROW_FOCUSED,this.onFullWidthRowFocused.bind(this)))}onFullWidthRowFocused(t){const e=this.params,i={rowIndex:e.node.rowIndex,rowPinned:e.node.rowPinned},s={rowIndex:t.rowIndex,rowPinned:t.rowPinned};this.rowPositionUtils.sameRow(i,s)&&this.focusService.focusInto(this.comp.getGui(),t.fromBelow)}setAutoHeightClasses(){const t=this.gos.get("detailRowAutoHeight"),e=t?"ag-details-row-auto-height":"ag-details-row-fixed-height",i=t?"ag-details-grid-auto-height":"ag-details-grid-fixed-height";this.comp.addOrRemoveCssClass(e,!0),this.comp.addOrRemoveDetailGridCssClass(i,!0)}setupRefreshStrategy(){const t=this.params.refreshStrategy;if(t=="everything"||t=="nothing"||t=="rows"){this.refreshStrategy=t;return}t!=null&&console.warn("AG Grid: invalid cellRendererParams.refreshStrategy = '"+t+"' supplied, defaulting to refreshStrategy = 'rows'."),this.refreshStrategy="rows"}addThemeToDetailGrid(){const{theme:t}=this.environment.getTheme();t&&this.comp.addOrRemoveDetailGridCssClass(t,!0)}createDetailGrid(){if(Q.missing(this.params.detailGridOptions)){console.warn("AG Grid: could not find detail grid options for master detail, please set gridOptions.detailCellRendererParams.detailGridOptions");return}const t=this.gos.get("detailRowAutoHeight"),e=kae({},this.params.detailGridOptions);t&&(e.domLayout="autoHeight"),this.comp.setDetailGrid(e)}registerDetailWithMaster(t,e){const i=this.params.node.id,s=this.params.api,r={id:i,api:t,columnApi:e},n=this.params.node;s.isDestroyed()||(s.addDetailGridInfo(i,r),n.detailGridInfo=r,this.addDestroyFunc(()=>{n.detailGridInfo===r&&(s.isDestroyed()||s.removeDetailGridInfo(i),n.detailGridInfo=null)}))}loadRowData(){var t,e,i;this.loadRowDataVersion++;const s=this.loadRowDataVersion;if(((t=this.params.detailGridOptions)==null?void 0:t.rowModelType)==="serverSide"){(i=(e=this.params.node.detailGridInfo)==null?void 0:e.api)==null||i.refreshServerSide({purge:!0});return}const r=this.params.getDetailRowData;if(!r){console.warn("AG Grid: could not find getDetailRowData for master / detail, please set gridOptions.detailCellRendererParams.getDetailRowData");return}const n=a=>{this.loadRowDataVersion===s&&this.comp.setRowData(a)},o={node:this.params.node,data:this.params.node.data,successCallback:n,context:this.gos.getGridCommonParams().context};r(o)}refresh(){switch(this.refreshStrategy){case"nothing":return!0;case"everything":return!1}return this.loadRowData(),!0}};E2([W("rowPositionUtils")],QE.prototype,"rowPositionUtils");E2([W("focusService")],QE.prototype,"focusService");var T2=class z9 extends Te{init(e){this.params=e,this.selectAndSetTemplate();const i={addOrRemoveCssClass:(s,r)=>this.addOrRemoveCssClass(s,r),addOrRemoveDetailGridCssClass:(s,r)=>this.eDetailGrid.classList.toggle(s,r),setDetailGrid:s=>this.setDetailGrid(s),setRowData:s=>this.setRowData(s),getGui:()=>this.eDetailGrid};this.ctrl=this.createManagedBean(new QE),this.ctrl.init(i,e)}refresh(){return this.ctrl&&this.ctrl.refresh()}destroy(){super.destroy()}selectAndSetTemplate(){if(this.params.pinned){this.setTemplate('<div class="ag-details-row"></div>');return}const e=()=>{this.setTemplate(z9.TEMPLATE)};if(Q.missing(this.params.template))e();else if(typeof this.params.template=="string")this.setTemplate(this.params.template);else if(typeof this.params.template=="function"){const i=this.params.template,s=i(this.params);this.setTemplate(s)}else console.warn("AG Grid: detailCellRendererParams.template should be function or string"),e();this.eDetailGrid==null&&console.warn('AG Grid: reference to eDetailGrid was missing from the details template. Please add ref="eDetailGrid" to the template.')}setDetailGrid(e){if(!this.eDetailGrid)return;const i=this.context.getBean("agGridReact"),s=i?Q.cloneObject(i):void 0,r=this.context.getBean("frameworkComponentWrapper"),n=this.getFrameworkOverrides(),o=h5(this.eDetailGrid,e,{frameworkOverrides:n,providedBeanInstances:{agGridReact:s,frameworkComponentWrapper:r},modules:vt.__getGridRegisteredModules(this.params.api.getGridId())});this.detailApi=o,this.ctrl.registerDetailWithMaster(o,new Pu(o)),this.addDestroyFunc(()=>{o==null||o.destroy()})}setRowData(e){this.detailApi&&this.detailApi.setGridOption("rowData",e)}};T2.TEMPLATE=`<div class="ag-details-row" role="gridcell">
            <div ref="eDetailGrid" class="ag-details-grid" role="presentation"></div>
        </div>`;E2([pe("eDetailGrid")],T2.prototype,"eDetailGrid");var Nae=T2,Oae="31.3.4",$9={version:Oae,moduleName:Ut.MasterDetailModule,beans:[],userComponents:[{componentName:"agDetailCellRenderer",componentClass:Nae}],controllers:[{controllerName:"detailCellRenderer",controllerClass:QE}],dependantModules:[Qs]},K9=Object.defineProperty,Gae=Object.defineProperties,Bae=Object.getOwnPropertyDescriptor,Vae=Object.getOwnPropertyDescriptors,ck=Object.getOwnPropertySymbols,Hae=Object.prototype.hasOwnProperty,jae=Object.prototype.propertyIsEnumerable,uk=(t,e,i)=>e in t?K9(t,e,{enumerable:!0,configurable:!0,writable:!0,value:i}):t[e]=i,TS=(t,e)=>{for(var i in e||(e={}))Hae.call(e,i)&&uk(t,i,e[i]);if(ck)for(var i of ck(e))jae.call(e,i)&&uk(t,i,e[i]);return t},BA=(t,e)=>Gae(t,Vae(e)),yt=(t,e,i,s)=>{for(var r=s>1?void 0:s?Bae(e,i):e,n=t.length-1,o;n>=0;n--)(o=t[n])&&(r=(s?o(e,i,r):o(r))||r);return s&&r&&K9(e,i,r),r},gl=class extends ye{hideActiveMenu(){this.destroyBean(this.activeMenu)}showMenuAfterMouseEvent(t,e,i,s){const r=s?"filterMenuTab":void 0;this.showMenu(t,n=>{var o;const a=n.getGui();this.popupService.positionPopupUnderMouseEvent({type:i,column:t,mouseEvent:e,ePopup:a}),r&&((o=n.showTab)==null||o.call(n,r)),this.dispatchVisibleChangedEvent(!0,!1,t,r)},i,r,void 0,e.target)}showMenuAfterButtonClick(t,e,i,s){let r=-1,n="left";this.gos.get("enableRtl")&&(r=1,n="right");const o=s?"filterMenuTab":void 0,a=o?[o]:void 0,l=this.menuService.isLegacyMenuEnabled();let c=(l?9:4)*r,u=l?-23:4;this.showMenu(t,d=>{var h;const p=d.getGui();this.popupService.positionPopupByComponent({type:i,column:t,eventSource:e,ePopup:p,alignSide:n,nudgeX:c,nudgeY:u,position:"under",keepWithinBounds:!0}),o&&((h=d.showTab)==null||h.call(d,o)),this.dispatchVisibleChangedEvent(!0,!1,t,o)},i,o,a,e)}showMenu(t,e,i,s,r,n){var o;const{menu:a,eMenuGui:l,anchorToElement:c,restoreFocusParams:u}=this.getMenuParams(t,r,n),d=[];d.push(p=>{const f=a.getGui();this.destroyBean(a),t&&(t.setMenuVisible(!1,"contextMenu"),this.menuUtils.restoreFocusOnClose(u,f,p))});const h=this.localeService.getLocaleTextFunc();if(this.popupService.addPopup({modal:!0,eChild:l,closeOnEsc:!0,closedCallback:p=>{d.forEach(f=>f(p)),this.dispatchVisibleChangedEvent(!1,!1,t,s)},afterGuiAttached:p=>a.afterGuiAttached(Object.assign({},{container:i},p)),positionCallback:s?()=>e(a):void 0,ariaLabel:h("ariaLabelColumnMenu","Column Menu")}),s||((o=a.showTabBasedOnPreviousSelection)==null||o.call(a),e(a)),this.menuService.isColumnMenuAnchoringEnabled()){const p=this.popupService.setPopupPositionRelatedToElement(l,c);p&&t&&this.addStopAnchoring(p,t,d)}a.addEventListener(Ym.EVENT_TAB_SELECTED,p=>{this.dispatchVisibleChangedEvent(!1,!0,t),this.lastSelectedTab=p.key,this.dispatchVisibleChangedEvent(!0,!0,t)}),t==null||t.setMenuVisible(!0,"contextMenu"),this.activeMenu=a,a.addEventListener(ye.EVENT_DESTROYED,()=>{this.activeMenu===a&&(this.activeMenu=null)})}addStopAnchoring(t,e,i){t.then(s=>{e.addEventListener("leftChanged",s),e.addEventListener("visibleChanged",s),i.push(()=>{e.removeEventListener("leftChanged",s),e.removeEventListener("visibleChanged",s)})})}getMenuParams(t,e,i){const s={column:t,headerPosition:this.focusService.getFocusedHeader(),columnIndex:this.columnModel.getAllDisplayedColumns().indexOf(t),eventSource:i},r=this.createMenu(t,s,e,i);return{menu:r,eMenuGui:r.getGui(),anchorToElement:i||this.ctrlsService.getGridBodyCtrl().getGui(),restoreFocusParams:s}}createMenu(t,e,i,s){return this.menuService.isLegacyMenuEnabled()?this.createBean(new Ym(t,e,this.lastSelectedTab,i,s)):this.createBean(new _m(t,e,s))}dispatchVisibleChangedEvent(t,e,i,s){var r,n;const o={type:K.EVENT_COLUMN_MENU_VISIBLE_CHANGED,visible:t,switchingTab:e,key:(n=(r=this.lastSelectedTab)!=null?r:s)!=null?n:this.menuService.isLegacyMenuEnabled()?Ym.TAB_GENERAL:"columnMenu",column:i??null};this.eventService.dispatchEvent(o)}isMenuEnabled(t){var e;if(!this.menuService.isLegacyMenuEnabled())return!0;const i=!this.filterManager.isFilterAllowed(t),s=(e=t.getColDef().menuTabs)!=null?e:Ym.TABS_DEFAULT;return(i&&s.includes(Ym.TAB_FILTER)?s.length-1:s.length)>0}showMenuAfterContextMenuEvent(t,e,i){this.menuUtils.onContextMenu(e,i,s=>(this.showMenuAfterMouseEvent(t,s,"columnMenu"),!0))}};yt([W("popupService")],gl.prototype,"popupService",2);yt([W("focusService")],gl.prototype,"focusService",2);yt([W("ctrlsService")],gl.prototype,"ctrlsService",2);yt([W("columnModel")],gl.prototype,"columnModel",2);yt([W("filterManager")],gl.prototype,"filterManager",2);yt([W("menuUtils")],gl.prototype,"menuUtils",2);yt([W("menuService")],gl.prototype,"menuService",2);gl=yt([Me("enterpriseMenuFactory")],gl);var Tn=class rs extends ye{constructor(e,i,s,r,n){super(),this.column=e,this.restoreFocusParams=i,this.initialSelection=s,this.restrictTo=r,this.sourceElement=n,this.tabFactories={},this.includeChecks={},this.tabFactories[rs.TAB_GENERAL]=this.createMainPanel.bind(this),this.tabFactories[rs.TAB_FILTER]=this.createFilterPanel.bind(this),this.tabFactories[rs.TAB_COLUMNS]=this.createColumnsPanel.bind(this),this.includeChecks[rs.TAB_GENERAL]=()=>!0,this.includeChecks[rs.TAB_FILTER]=()=>e?this.filterManager.isFilterAllowed(e):!1,this.includeChecks[rs.TAB_COLUMNS]=()=>!0}init(){const e=this.getTabsToCreate().map(i=>this.createTab(i));this.tabbedLayout=new KM({items:e,cssClass:"ag-menu",onActiveItemClicked:this.onHidePopup.bind(this),onItemClicked:this.onTabItemClicked.bind(this)}),this.createBean(this.tabbedLayout),this.mainMenuList&&this.mainMenuList.setParentComponent(this.tabbedLayout),this.addDestroyFunc(()=>this.destroyBean(this.tabbedLayout))}getTabsToCreate(){var e,i;return this.restrictTo?this.restrictTo:((i=(e=this.column)==null?void 0:e.getColDef().menuTabs)!=null?i:rs.TABS_DEFAULT).filter(s=>this.isValidMenuTabItem(s)).filter(s=>this.isNotSuppressed(s)).filter(s=>this.isModuleLoaded(s))}isModuleLoaded(e){return e===rs.TAB_COLUMNS?vt.__isRegistered(Ut.ColumnsToolPanelModule,this.context.getGridId()):!0}isValidMenuTabItem(e){let i=!0,s=rs.TABS_DEFAULT;return this.restrictTo!=null&&(i=this.restrictTo.indexOf(e)>-1,s=this.restrictTo),i=i&&rs.TABS_DEFAULT.indexOf(e)>-1,i||console.warn(`AG Grid: Trying to render an invalid menu item '${e}'. Check that your 'menuTabs' contains one of [${s}]`),i}isNotSuppressed(e){return this.includeChecks[e]()}createTab(e){return this.tabFactories[e]()}showTabBasedOnPreviousSelection(){this.showTab(this.initialSelection)}showTab(e){this.tabItemColumns&&e===rs.TAB_COLUMNS?this.tabbedLayout.showItem(this.tabItemColumns):this.tabItemFilter&&e===rs.TAB_FILTER?this.tabbedLayout.showItem(this.tabItemFilter):this.tabItemGeneral&&e===rs.TAB_GENERAL?this.tabbedLayout.showItem(this.tabItemGeneral):this.tabbedLayout.showFirstItem()}onTabItemClicked(e){let i=null;switch(e.item){case this.tabItemColumns:i=rs.TAB_COLUMNS;break;case this.tabItemFilter:i=rs.TAB_FILTER;break;case this.tabItemGeneral:i=rs.TAB_GENERAL;break}i&&this.activateTab(i)}activateTab(e){const i={type:rs.EVENT_TAB_SELECTED,key:e};this.dispatchEvent(i)}createMainPanel(){return this.mainMenuList=this.columnMenuFactory.createMenu(this,this.column,()=>{var e;return(e=this.sourceElement)!=null?e:this.getGui()}),this.mainMenuList.addEventListener(Jn.EVENT_CLOSE_MENU,this.onHidePopup.bind(this)),this.tabItemGeneral={title:Q.createIconNoSpan("menu",this.gos,this.column),titleLabel:rs.TAB_GENERAL.replace("MenuTab",""),bodyPromise:Ft.resolve(this.mainMenuList.getGui()),name:rs.TAB_GENERAL},this.tabItemGeneral}onHidePopup(e){this.menuUtils.closePopupAndRestoreFocusOnSelect(this.hidePopupFunc,this.restoreFocusParams,e)}createFilterPanel(){const e=this.column?this.createManagedBean(new ed(this.column,"COLUMN_MENU")):null;if(!(e!=null&&e.hasFilter()))throw new Error("AG Grid - Unable to instantiate filter");const i=r=>e.afterGuiAttached(r),s=()=>e.afterGuiDetached();return this.tabItemFilter={title:Q.createIconNoSpan("filter",this.gos,this.column),titleLabel:rs.TAB_FILTER.replace("MenuTab",""),bodyPromise:Ft.resolve(e==null?void 0:e.getGui()),afterAttachedCallback:i,afterDetachedCallback:s,name:rs.TAB_FILTER},this.tabItemFilter}createColumnsPanel(){const e=document.createElement("div");e.classList.add("ag-menu-column-select-wrapper");const s=this.columnChooserFactory.createColumnSelectPanel(this,this.column).getGui();return s.classList.add("ag-menu-column-select"),e.appendChild(s),this.tabItemColumns={title:Q.createIconNoSpan("columns",this.gos,this.column),titleLabel:rs.TAB_COLUMNS.replace("MenuTab",""),bodyPromise:Ft.resolve(e),name:rs.TAB_COLUMNS},this.tabItemColumns}afterGuiAttached(e){const{container:i,hidePopup:s}=e;this.tabbedLayout.setAfterAttachedParams({container:i,hidePopup:s}),s&&(this.hidePopupFunc=s,this.addDestroyFunc(s))}getGui(){return this.tabbedLayout.getGui()}};Tn.EVENT_TAB_SELECTED="tabSelected";Tn.TAB_FILTER="filterMenuTab";Tn.TAB_GENERAL="generalMenuTab";Tn.TAB_COLUMNS="columnsMenuTab";Tn.TABS_DEFAULT=[Tn.TAB_GENERAL,Tn.TAB_FILTER,Tn.TAB_COLUMNS];yt([W("filterManager")],Tn.prototype,"filterManager",2);yt([W("columnChooserFactory")],Tn.prototype,"columnChooserFactory",2);yt([W("columnMenuFactory")],Tn.prototype,"columnMenuFactory",2);yt([W("menuUtils")],Tn.prototype,"menuUtils",2);yt([de],Tn.prototype,"init",1);var Ym=Tn,_m=class extends Te{constructor(t,e,i){super(`
            <div ref="eColumnMenu" role="presentation" class="ag-menu ag-column-menu"></div>
        `),this.column=t,this.restoreFocusParams=e,this.sourceElement=i}init(){this.mainMenuList=this.columnMenuFactory.createMenu(this,this.column,()=>{var t;return(t=this.sourceElement)!=null?t:this.getGui()}),this.mainMenuList.addEventListener(Jn.EVENT_CLOSE_MENU,this.onHidePopup.bind(this)),this.eColumnMenu.appendChild(this.mainMenuList.getGui())}onHidePopup(t){this.menuUtils.closePopupAndRestoreFocusOnSelect(this.hidePopupFunc,this.restoreFocusParams,t)}afterGuiAttached({hidePopup:t}){t&&(this.hidePopupFunc=t,this.addDestroyFunc(t)),this.focusService.focusInto(this.mainMenuList.getGui())}};yt([W("columnMenuFactory")],_m.prototype,"columnMenuFactory",2);yt([W("menuUtils")],_m.prototype,"menuUtils",2);yt([W("focusService")],_m.prototype,"focusService",2);yt([pe("eColumnMenu")],_m.prototype,"eColumnMenu",2);yt([de],_m.prototype,"init",1);var Uae="ag-menu",dk="ag-context-menu-open",zu=class extends ye{hideActiveMenu(){this.destroyBean(this.activeMenu)}getMenuItems(t,e,i){const s=[];if(Q.exists(t)&&vt.__isRegistered(Ut.ClipboardModule,this.context.getGridId())&&e&&(this.gos.get("suppressCutToClipboard")||s.push("cut"),s.push("copy","copyWithHeaders","copyWithGroupHeaders","paste","separator")),this.gos.get("enableCharts")&&vt.__isRegistered(Ut.GridChartsModule,this.context.getGridId())&&(this.columnModel.isPivotMode()&&s.push("pivotChart"),this.rangeService&&!this.rangeService.isEmpty()&&s.push("chartRange")),Q.exists(t)){const a=!vt.__isRegistered(Ut.CsvExportModule,this.context.getGridId()),l=!vt.__isRegistered(Ut.ExcelExportModule,this.context.getGridId()),c=this.gos.get("suppressExcelExport")||l,u=this.gos.get("suppressCsvExport")||a;!Q.isIOSUserAgent()&&(!c||!u)&&s.push("export")}const r=s.length?s:void 0,n=e==null?void 0:e.getColDef().contextMenuItems;if(Array.isArray(n))return n;if(typeof n=="function")return n(this.gos.addGridCommonParams({column:e,node:t,value:i,defaultItems:r}));const o=this.gos.getCallback("getContextMenuItems");return o?o({column:e,node:t,value:i,defaultItems:r}):s}onContextMenu(t,e,i,s,r,n){this.menuUtils.onContextMenu(t,e,o=>this.showMenu(i,s,r,o,n))}showMenu(t,e,i,s,r){const n=this.getMenuItems(t,e,i),o=this.ctrlsService.getGridBodyCtrl().getGui();if(n===void 0||Q.missingOrEmpty(n))return!1;const a=new x0(n,e,t,i);this.createBean(a);const l=a.getGui(),c={column:e,rowNode:t,type:"contextMenu",mouseEvent:s,ePopup:l,nudgeY:1},u=this.localeService.getLocaleTextFunc(),d=this.popupService.addPopup({modal:!0,eChild:l,closeOnEsc:!0,closedCallback:p=>{o.classList.remove(dk),this.destroyBean(a),this.dispatchVisibleChangedEvent(!1,p===void 0?"api":"ui")},click:s,positionCallback:()=>{const p=this.gos.get("enableRtl");this.popupService.positionPopupUnderMouseEvent(BA(TS({},c),{nudgeX:p?(l.offsetWidth+1)*-1:1}))},anchorToElement:r,ariaLabel:u("ariaLabelContextMenu","Context Menu")});d&&(o.classList.add(dk),a.afterGuiAttached({container:"contextMenu",hidePopup:d.hideFunc})),this.activeMenu&&this.hideActiveMenu(),this.activeMenu=a,a.addEventListener(ye.EVENT_DESTROYED,()=>{this.activeMenu===a&&(this.activeMenu=null)}),d&&a.addEventListener(Jn.EVENT_CLOSE_MENU,p=>{var f,m;return d.hideFunc({mouseEvent:(f=p.mouseEvent)!=null?f:void 0,keyboardEvent:(m=p.keyboardEvent)!=null?m:void 0,forceHide:!0})});const h=s&&s instanceof MouseEvent&&s.type==="mousedown";return this.dispatchVisibleChangedEvent(!0,h?"api":"ui"),!0}dispatchVisibleChangedEvent(t,e="ui"){const i={type:K.EVENT_CONTEXT_MENU_VISIBLE_CHANGED,visible:t,source:e};this.eventService.dispatchEvent(i)}};yt([W("popupService")],zu.prototype,"popupService",2);yt([W("ctrlsService")],zu.prototype,"ctrlsService",2);yt([W("columnModel")],zu.prototype,"columnModel",2);yt([W("menuUtils")],zu.prototype,"menuUtils",2);yt([Vt("rangeService")],zu.prototype,"rangeService",2);zu=yt([Me("contextMenuFactory")],zu);var x0=class extends Te{constructor(t,e,i,s){super(`<div class="${Uae}" role="presentation"></div>`),this.menuItems=t,this.column=e,this.node=i,this.value=s,this.menuList=null,this.focusedCell=null}addMenuItems(){const t=this.createManagedBean(new od(0,{column:this.column,node:this.node,value:this.value})),e=this.menuItemMapper.mapWithStockItems(this.menuItems,null,()=>this.getGui());t.addMenuItems(e),this.appendChild(t),this.menuList=t,t.addEventListener(Jn.EVENT_CLOSE_MENU,i=>this.dispatchEvent(i))}afterGuiAttached(t){t.hidePopup&&this.addDestroyFunc(t.hidePopup),this.focusedCell=this.focusService.getFocusedCell(),this.menuList&&this.focusService.focusInto(this.menuList.getGui())}restoreFocusedCell(){const t=this.focusService.getFocusedCell();if(t&&this.focusedCell&&this.cellPositionUtils.equals(t,this.focusedCell)){const{rowIndex:e,rowPinned:i,column:s}=this.focusedCell,r=this.gos.getDocument(),n=this.gos.getActiveDomElement();(!n||n===r.body)&&this.focusService.setFocusedCell({rowIndex:e,column:s,rowPinned:i,forceBrowserFocus:!0,preventScrollOnBrowserFocus:!this.focusService.isKeyboardMode()})}}destroy(){this.restoreFocusedCell(),super.destroy()}};yt([W("menuItemMapper")],x0.prototype,"menuItemMapper",2);yt([W("focusService")],x0.prototype,"focusService",2);yt([W("cellPositionUtils")],x0.prototype,"cellPositionUtils",2);yt([de],x0.prototype,"addMenuItems",1);var Wo=class extends ye{mapWithStockItems(t,e,i){if(!t)return[];const s=[];return t.forEach(r=>{let n;if(typeof r=="string"?n=this.getStockMenuItem(r,e,i):n=TS({},r),!n)return;const o=n,{subMenu:a}=o;a&&a instanceof Array&&(o.subMenu=this.mapWithStockItems(a,e,i)),n!=null&&s.push(n)}),s}getStockMenuItem(t,e,i){var s;const r=this.localeService.getLocaleTextFunc(),n=this.gos.get("skipHeaderOnAutoSize");switch(t){case"pinSubMenu":return{name:r("pinColumn","Pin Column"),icon:Q.createIconNoSpan("menuPin",this.gos,null),subMenu:["clearPinned","pinLeft","pinRight"]};case"pinLeft":return{name:r("pinLeft","Pin Left"),action:()=>this.columnModel.setColumnsPinned([e],"left","contextMenu"),checked:!!e&&e.isPinnedLeft()};case"pinRight":return{name:r("pinRight","Pin Right"),action:()=>this.columnModel.setColumnsPinned([e],"right","contextMenu"),checked:!!e&&e.isPinnedRight()};case"clearPinned":return{name:r("noPin","No Pin"),action:()=>this.columnModel.setColumnsPinned([e],null,"contextMenu"),checked:!!e&&!e.isPinned()};case"valueAggSubMenu":return vt.__assertRegistered(Ut.RowGroupingModule,"Aggregation from Menu",this.context.getGridId())?!(e!=null&&e.isPrimary())&&!(e!=null&&e.getColDef().pivotValueColumn)?null:{name:r("valueAggregation","Value Aggregation"),icon:Q.createIconNoSpan("menuValue",this.gos,null),subMenu:this.createAggregationSubMenu(e,this.aggFuncService)}:null;case"autoSizeThis":return{name:r("autosizeThiscolumn","Autosize This Column"),action:()=>this.columnModel.autoSizeColumn(e,"contextMenu",n)};case"autoSizeAll":return{name:r("autosizeAllColumns","Autosize All Columns"),action:()=>this.columnModel.autoSizeAllColumns("contextMenu",n)};case"rowGroup":return{name:r("groupBy","Group by")+" "+Q.escapeString(this.columnModel.getDisplayNameForColumn(e,"header")),disabled:(e==null?void 0:e.isRowGroupActive())||!(e!=null&&e.getColDef().enableRowGroup),action:()=>this.columnModel.addRowGroupColumns([e],"contextMenu"),icon:Q.createIconNoSpan("menuAddRowGroup",this.gos,null)};case"rowUnGroup":const o=Q.createIconNoSpan("menuRemoveRowGroup",this.gos,null),a=e==null?void 0:e.getColDef().showRowGroup,l=this.gos.get("groupLockGroupColumns");if(a===!0)return{name:r("ungroupAll","Un-Group All"),disabled:l===-1||l>=this.columnModel.getRowGroupColumns().length,action:()=>this.columnModel.setRowGroupColumns(this.columnModel.getRowGroupColumns().slice(0,l),"contextMenu"),icon:o};if(typeof a=="string"){const h=this.columnModel.getPrimaryColumn(a),p=h!=null?Q.escapeString(this.columnModel.getDisplayNameForColumn(h,"header")):a;return{name:r("ungroupBy","Un-Group by")+" "+p,disabled:h!=null&&this.columnModel.isColumnGroupingLocked(h),action:()=>this.columnModel.removeRowGroupColumns([a],"contextMenu"),icon:o}}return{name:r("ungroupBy","Un-Group by")+" "+Q.escapeString(this.columnModel.getDisplayNameForColumn(e,"header")),disabled:!(e!=null&&e.isRowGroupActive())||!(e!=null&&e.getColDef().enableRowGroup)||this.columnModel.isColumnGroupingLocked(e),action:()=>this.columnModel.removeRowGroupColumns([e],"contextMenu"),icon:o};case"resetColumns":return{name:r("resetColumns","Reset Columns"),action:()=>this.columnModel.resetColumnState("contextMenu")};case"expandAll":return{name:r("expandAll","Expand All Row Groups"),action:()=>this.gridApi.expandAll()};case"contractAll":return{name:r("collapseAll","Collapse All Row Groups"),action:()=>this.gridApi.collapseAll()};case"copy":return vt.__assertRegistered(Ut.ClipboardModule,"Copy from Menu",this.context.getGridId())?{name:r("copy","Copy"),shortcut:r("ctrlC","Ctrl+C"),icon:Q.createIconNoSpan("clipboardCopy",this.gos,null),action:()=>this.clipboardService.copyToClipboard()}:null;case"copyWithHeaders":return vt.__assertRegistered(Ut.ClipboardModule,"Copy with Headers from Menu",this.context.getGridId())?{name:r("copyWithHeaders","Copy with Headers"),icon:Q.createIconNoSpan("clipboardCopy",this.gos,null),action:()=>this.clipboardService.copyToClipboard({includeHeaders:!0})}:null;case"copyWithGroupHeaders":return vt.__assertRegistered(Ut.ClipboardModule,"Copy with Group Headers from Menu",this.context.getGridId())?{name:r("copyWithGroupHeaders","Copy with Group Headers"),icon:Q.createIconNoSpan("clipboardCopy",this.gos,null),action:()=>this.clipboardService.copyToClipboard({includeHeaders:!0,includeGroupHeaders:!0})}:null;case"cut":if(vt.__assertRegistered(Ut.ClipboardModule,"Cut from Menu",this.context.getGridId())){const h=this.focusService.getFocusedCell(),p=h?this.rowPositionUtils.getRowNode(h):null,f=p?h==null?void 0:h.column.isCellEditable(p):!1;return{name:r("cut","Cut"),shortcut:r("ctrlX","Ctrl+X"),icon:Q.createIconNoSpan("clipboardCut",this.gos,null),disabled:!f||this.gos.get("suppressCutToClipboard"),action:()=>this.clipboardService.cutToClipboard(void 0,"contextMenu")}}else return null;case"paste":return vt.__assertRegistered(Ut.ClipboardModule,"Paste from Clipboard",this.context.getGridId())?{name:r("paste","Paste"),shortcut:r("ctrlV","Ctrl+V"),disabled:!0,icon:Q.createIconNoSpan("clipboardPaste",this.gos,null),action:()=>this.clipboardService.pasteFromClipboard()}:null;case"export":const c=[],u=vt.__isRegistered(Ut.CsvExportModule,this.context.getGridId()),d=vt.__isRegistered(Ut.ExcelExportModule,this.context.getGridId());return!this.gos.get("suppressCsvExport")&&u&&c.push("csvExport"),!this.gos.get("suppressExcelExport")&&d&&c.push("excelExport"),{name:r("export","Export"),subMenu:c,icon:Q.createIconNoSpan("save",this.gos,null)};case"csvExport":return{name:r("csvExport","CSV Export"),icon:Q.createIconNoSpan("csvExport",this.gos,null),action:()=>this.gridApi.exportDataAsCsv({})};case"excelExport":return{name:r("excelExport","Excel Export"),icon:Q.createIconNoSpan("excelExport",this.gos,null),action:()=>this.gridApi.exportDataAsExcel()};case"separator":return"separator";case"pivotChart":case"chartRange":return(s=this.chartMenuItemMapper.getChartItems(t))!=null?s:null;case"columnFilter":return e?{name:r("columnFilter","Column Filter"),icon:Q.createIconNoSpan("filter",this.gos,null),action:()=>this.menuService.showFilterMenu({column:e,buttonElement:i(),containerType:"columnFilter",positionBy:"button"})}:null;case"columnChooser":return vt.__isRegistered(Ut.ColumnsToolPanelModule,this.context.getGridId())?{name:r("columnChooser","Choose Columns"),icon:Q.createIconNoSpan("columns",this.gos,null),action:()=>this.menuService.showColumnChooser({column:e,eventSource:i()})}:null;case"sortAscending":return{name:r("sortAscending","Sort Ascending"),icon:Q.createIconNoSpan("sortAscending",this.gos,null),action:()=>this.sortController.setSortForColumn(e,"asc",!1,"columnMenu")};case"sortDescending":return{name:r("sortDescending","Sort Descending"),icon:Q.createIconNoSpan("sortDescending",this.gos,null),action:()=>this.sortController.setSortForColumn(e,"desc",!1,"columnMenu")};case"sortUnSort":return{name:r("sortUnSort","Clear Sort"),icon:Q.createIconNoSpan("sortUnSort",this.gos,null),action:()=>this.sortController.setSortForColumn(e,null,!1,"columnMenu")};default:return console.warn(`AG Grid: unknown menu item type ${t}`),null}}createAggregationSubMenu(t,e){const i=this.localeService.getLocaleTextFunc();let s;if(t.isPrimary())s=t;else{const n=t.getColDef().pivotValueColumn;s=Q.exists(n)?n:void 0}const r=[];if(s){const n=s.isValueActive(),o=e.getFuncNames(s);r.push({name:i("noAggregation","None"),action:()=>{this.columnModel.removeValueColumns([s],"contextMenu"),this.columnModel.setColumnAggFunc(s,void 0,"contextMenu")},checked:!n}),o.forEach(a=>{r.push({name:i(a,e.getDefaultFuncLabel(a)),action:()=>{this.columnModel.setColumnAggFunc(s,a,"contextMenu"),this.columnModel.addValueColumns([s],"contextMenu")},checked:n&&s.getAggFunc()===a})})}return r}};yt([W("columnModel")],Wo.prototype,"columnModel",2);yt([W("gridApi")],Wo.prototype,"gridApi",2);yt([W("focusService")],Wo.prototype,"focusService",2);yt([W("rowPositionUtils")],Wo.prototype,"rowPositionUtils",2);yt([W("chartMenuItemMapper")],Wo.prototype,"chartMenuItemMapper",2);yt([W("menuService")],Wo.prototype,"menuService",2);yt([W("sortController")],Wo.prototype,"sortController",2);yt([Vt("clipboardService")],Wo.prototype,"clipboardService",2);yt([Vt("aggFuncService")],Wo.prototype,"aggFuncService",2);Wo=yt([Me("menuItemMapper")],Wo);var Wae="31.3.4",oC=class extends ye{getChartItems(t){var e,i;if(!this.chartService){vt.__assertRegistered(Ut.GridChartsModule,`the Context Menu key "${t}"`,this.context.getGridId());return}const s=t==="pivotChart"?new zae(this.gos,this.chartService,this.localeService):new $ae(this.gos,this.chartService,this.localeService),r=this.chartService.isEnterprise();let n=s.getMenuItem();if(n&&n.subMenu&&!r){const a=l=>{var c;return BA(TS({},l),{subMenu:(c=l.subMenu)==null?void 0:c.filter(u=>!u._enterprise).map(u=>a(u))})};n=a(n)}const o=(i=(e=this.gos.get("chartToolPanelsDef"))==null?void 0:e.settingsPanel)==null?void 0:i.chartGroupsDef;return o&&(n=oC.filterAndOrderChartMenu(n,o,s.getConfigLookup())),this.cleanInternals(n)}cleanInternals(t){if(!t)return t;const e=i=>{var s;return i==null||delete i._key,i==null||delete i._enterprise,(s=i==null?void 0:i.subMenu)==null||s.forEach(r=>e(r)),i};return e(t)}static buildLookup(t){let e={};const i=s=>{e[s._key]=s,s.subMenu&&s.subMenu.forEach(r=>i(r))};return i(t),e}static filterAndOrderChartMenu(t,e,i){var s;const r=this.buildLookup(t);let n=BA(TS({},t),{subMenu:[]});if(Object.entries(e).forEach(([o,a])=>{var l,c;const u=i[o];if(u===null)return;if(u==null){Q.warnOnce(`invalid chartGroupsDef config '${o}'`);return}const d=r[u._key];if(d)if(d.subMenu){const h=a.map(p=>{const f=u[p];if(f==null){Q.warnOnce(`invalid chartGroupsDef config '${o}.${p}'`);return}return r[f]}).filter(p=>p!==void 0);h.length>0&&(d.subMenu=h,(l=n.subMenu)==null||l.push(d))}else(c=n.subMenu)==null||c.push(d)}),((s=n.subMenu)==null?void 0:s.length)!=0)return n}};yt([Vt("chartService")],oC.prototype,"chartService",2);oC=yt([Me("chartMenuItemMapper")],oC);var zae=class{constructor(t,e,i){this.gos=t,this.chartService=e,this.localeService=i}getMenuItem(){const t=this.localeService.getLocaleTextFunc(),e=(i,s,r,n,o=!1)=>({name:t(i,s),action:()=>this.chartService.createPivotChart({chartType:r}),_key:n,_enterprise:o});return{name:t("pivotChart","Pivot Chart"),_key:"pivotChart",subMenu:[{_key:"pivotColumnChart",name:t("columnChart","Column"),subMenu:[e("groupedColumn","Grouped&lrm;","groupedColumn","pivotGroupedColumn"),e("stackedColumn","Stacked&lrm;","stackedColumn","pivotStackedColumn"),e("normalizedColumn","100% Stacked&lrm;","normalizedColumn","pivotNormalizedColumn")]},{_key:"pivotBarChart",name:t("barChart","Bar"),subMenu:[e("groupedBar","Grouped&lrm;","groupedBar","pivotGroupedBar"),e("stackedBar","Stacked&lrm;","stackedBar","pivotStackedBar"),e("normalizedBar","100% Stacked&lrm;","normalizedBar","pivotNormalizedBar")]},{_key:"pivotPieChart",name:t("pieChart","Pie"),subMenu:[e("pie","Pie&lrm;","pie","pivotPie"),e("donut","Donut&lrm;","donut","pivotDonut")]},e("line","Line&lrm;","line","pivotLineChart"),{_key:"pivotXYChart",name:t("xyChart","X Y (Scatter)"),subMenu:[e("scatter","Scatter&lrm;","scatter","pivotScatter"),e("bubble","Bubble&lrm;","bubble","pivotBubble")]},{_key:"pivotAreaChart",name:t("areaChart","Area"),subMenu:[e("area","Area&lrm;","area","pivotArea"),e("stackedArea","Stacked&lrm;","stackedArea","pivotStackedArea"),e("normalizedArea","100% Stacked&lrm;","normalizedArea","pivotNormalizedArea")]},{_key:"pivotStatisticalChart",_enterprise:!1,name:t("statisticalChart","Statistical"),subMenu:[e("histogramChart","Histogram&lrm;","histogram","pivotHistogram",!1)]},{_key:"pivotHierarchicalChart",_enterprise:!0,name:t("hierarchicalChart","Hierarchical"),subMenu:[e("treemapChart","Treemap&lrm;","treemap","pivotTreemap",!0),e("sunburstChart","Sunburst&lrm;","sunburst","pivotSunburst",!0)]},{_key:"pivotCombinationChart",name:t("combinationChart","Combination"),subMenu:[e("columnLineCombo","Column & Line&lrm;","columnLineCombo","pivotColumnLineCombo"),e("AreaColumnCombo","Area & Column&lrm;","areaColumnCombo","pivotAreaColumnCombo")]}],icon:Q.createIconNoSpan("chart",this.gos,void 0)}}getConfigLookup(){return{columnGroup:{_key:"pivotColumnChart",column:"pivotGroupedColumn",stackedColumn:"pivotStackedColumn",normalizedColumn:"pivotNormalizedColumn"},barGroup:{_key:"pivotBarChart",bar:"pivotGroupedBar",stackedBar:"pivotStackedBar",normalizedBar:"pivotNormalizedBar"},pieGroup:{_key:"pivotPieChart",pie:"pivotPie",donut:"pivotDonut",doughnut:"pivotDonut"},lineGroup:{_key:"pivotLineChart",line:"pivotLineChart"},scatterGroup:{_key:"pivotXYChart",bubble:"pivotBubble",scatter:"pivotScatter"},areaGroup:{_key:"pivotAreaChart",area:"pivotArea",stackedArea:"pivotStackedArea",normalizedArea:"pivotNormalizedArea"},combinationGroup:{_key:"pivotCombinationChart",columnLineCombo:"pivotColumnLineCombo",areaColumnCombo:"pivotAreaColumnCombo",customCombo:null},hierarchicalGroup:{_key:"pivotHierarchicalChart",treemap:"pivotTreemap",sunburst:"pivotSunburst"},statisticalGroup:{_key:"pivotStatisticalChart",histogram:"pivotHistogram",rangeBar:null,rangeArea:null,boxPlot:null},polarGroup:null,specializedGroup:null}}},$ae=class{constructor(t,e,i){this.gos=t,this.chartService=e,this.localeService=i}getMenuItem(){const t=this.localeService.getLocaleTextFunc(),e=(i,s,r,n,o=!1)=>({name:t(i,s),action:()=>this.chartService.createChartFromCurrentRange(r),_key:n,_enterprise:o});return{name:t("chartRange","Chart Range"),_key:"chartRange",subMenu:[{name:t("columnChart","Column"),subMenu:[e("groupedColumn","Grouped&lrm;","groupedColumn","rangeGroupedColumn"),e("stackedColumn","Stacked&lrm;","stackedColumn","rangeStackedColumn"),e("normalizedColumn","100% Stacked&lrm;","normalizedColumn","rangeNormalizedColumn")],_key:"rangeColumnChart"},{name:t("barChart","Bar"),subMenu:[e("groupedBar","Grouped&lrm;","groupedBar","rangeGroupedBar"),e("stackedBar","Stacked&lrm;","stackedBar","rangeStackedBar"),e("normalizedBar","100% Stacked&lrm;","normalizedBar","rangeNormalizedBar")],_key:"rangeBarChart"},{name:t("pieChart","Pie"),subMenu:[e("pie","Pie&lrm;","pie","rangePie"),e("donut","Donut&lrm;","donut","rangeDonut")],_key:"rangePieChart"},e("line","Line&lrm;","line","rangeLineChart"),{name:t("xyChart","X Y (Scatter)"),subMenu:[e("scatter","Scatter&lrm;","scatter","rangeScatter"),e("bubble","Bubble&lrm;","bubble","rangeBubble")],_key:"rangeXYChart"},{name:t("areaChart","Area"),subMenu:[e("area","Area&lrm;","area","rangeArea"),e("stackedArea","Stacked&lrm;","stackedArea","rangeStackedArea"),e("normalizedArea","100% Stacked&lrm;","normalizedArea","rangeNormalizedArea")],_key:"rangeAreaChart"},{name:t("polarChart","Polar"),subMenu:[e("radarLine","Radar Line&lrm;","radarLine","rangeRadarLine"),e("radarArea","Radar Area&lrm;","radarArea","rangeRadarArea"),e("nightingale","Nightingale&lrm;","nightingale","rangeNightingale"),e("radialColumn","Radial Column&lrm;","radialColumn","rangeRadialColumn"),e("radialBar","Radial Bar&lrm;","radialBar","rangeRadialBar")],_key:"rangePolarChart",_enterprise:!0},{name:t("statisticalChart","Statistical"),subMenu:[e("boxPlot","Box Plot&lrm;","boxPlot","rangeBoxPlot",!0),e("histogramChart","Histogram&lrm;","histogram","rangeHistogram",!1),e("rangeBar","Range Bar&lrm;","rangeBar","rangeRangeBar",!0),e("rangeArea","Range Area&lrm;","rangeArea","rangeRangeArea",!0)],_key:"rangeStatisticalChart",_enterprise:!1},{name:t("hierarchicalChart","Hierarchical"),subMenu:[e("treemap","Treemap&lrm;","treemap","rangeTreemap"),e("sunburst","Sunburst&lrm;","sunburst","rangeSunburst")],_key:"rangeHierarchicalChart",_enterprise:!0},{name:t("specializedChart","Specialized"),subMenu:[e("heatmap","Heatmap&lrm;","heatmap","rangeHeatmap"),e("waterfall","Waterfall&lrm;","waterfall","rangeWaterfall")],_key:"rangeSpecializedChart",_enterprise:!0},{name:t("combinationChart","Combination"),subMenu:[e("columnLineCombo","Column & Line&lrm;","columnLineCombo","rangeColumnLineCombo"),e("AreaColumnCombo","Area & Column&lrm;","areaColumnCombo","rangeAreaColumnCombo")],_key:"rangeCombinationChart"}],icon:Q.createIconNoSpan("chart",this.gos,void 0)}}getConfigLookup(){return{columnGroup:{_key:"rangeColumnChart",column:"rangeGroupedColumn",stackedColumn:"rangeStackedColumn",normalizedColumn:"rangeNormalizedColumn"},barGroup:{_key:"rangeBarChart",bar:"rangeGroupedBar",stackedBar:"rangeStackedBar",normalizedBar:"rangeNormalizedBar"},pieGroup:{_key:"rangePieChart",pie:"rangePie",donut:"rangeDonut",doughnut:"rangeDonut"},lineGroup:{_key:"rangeLineChart",line:"rangeLineChart"},scatterGroup:{_key:"rangeXYChart",bubble:"rangeBubble",scatter:"rangeScatter"},areaGroup:{_key:"rangeAreaChart",area:"rangeArea",stackedArea:"rangeStackedArea",normalizedArea:"rangeNormalizedArea"},polarGroup:{_key:"rangePolarChart",radarLine:"rangeRadarLine",radarArea:"rangeRadarArea",nightingale:"rangeNightingale",radialColumn:"rangeRadialColumn",radialBar:"rangeRadialBar"},statisticalGroup:{_key:"rangeStatisticalChart",boxPlot:"rangeBoxPlot",histogram:"rangeHistogram",rangeBar:"rangeRangeBar",rangeArea:"rangeRangeArea"},hierarchicalGroup:{_key:"rangeHierarchicalChart",treemap:"rangeTreemap",sunburst:"rangeSunburst"},specializedGroup:{_key:"rangeSpecializedChart",heatmap:"rangeHeatmap",waterfall:"rangeWaterfall"},combinationGroup:{_key:"rangeCombinationChart",columnLineCombo:"rangeColumnLineCombo",areaColumnCombo:"rangeAreaColumnCombo",customCombo:null}}}},Rg=class extends ye{createColumnSelectPanel(t,e,i,s){var r,n;const o=t.createManagedBean(new XE),a=(n=(r=s??(e==null?void 0:e.getColDef().columnChooserParams))!=null?r:e==null?void 0:e.getColDef().columnsMenuParams)!=null?n:{},{contractColumnSelection:l,suppressColumnExpandAll:c,suppressColumnFilter:u,suppressColumnSelectAll:d,suppressSyncLayoutWithGrid:h,columnLayout:p}=a;return o.init(!!i,this.gos.addGridCommonParams({suppressColumnMove:!1,suppressValues:!1,suppressPivots:!1,suppressRowGroups:!1,suppressPivotMode:!1,contractColumnSelection:!!l,suppressColumnExpandAll:!!c,suppressColumnFilter:!!u,suppressColumnSelectAll:!!d,suppressSyncLayoutWithGrid:!!p||!!h,onStateUpdated:()=>{}}),"columnMenu"),p&&o.setColumnLayout(p),o}showColumnChooser({column:t,chooserParams:e,eventSource:i}){this.hideActiveColumnChooser();const s=this.createColumnSelectPanel(this,t,!0,e),r=this.localeService.getLocaleTextFunc(),n=this.columnModel.getAllDisplayedColumns().indexOf(t),o=t?this.focusService.getFocusedHeader():null;this.activeColumnChooserDialog=this.createBean(new lc({title:r("chooseColumns","Choose Columns"),component:s,width:300,height:300,resizable:!0,movable:!0,centered:!0,closable:!0,afterGuiAttached:()=>{var a;(a=this.focusService.findNextFocusableElement(s.getGui()))==null||a.focus(),this.dispatchVisibleChangedEvent(!0,t)},closedCallback:a=>{const l=this.activeColumnChooser.getGui();this.destroyBean(this.activeColumnChooser),this.activeColumnChooser=void 0,this.activeColumnChooserDialog=void 0,this.dispatchVisibleChangedEvent(!1,t),t&&this.menuUtils.restoreFocusOnClose({column:t,headerPosition:o,columnIndex:n,eventSource:i},l,a,!0)}})),this.activeColumnChooser=s}hideActiveColumnChooser(){this.activeColumnChooserDialog&&this.destroyBean(this.activeColumnChooserDialog)}dispatchVisibleChangedEvent(t,e){const i={type:K.EVENT_COLUMN_MENU_VISIBLE_CHANGED,visible:t,switchingTab:!1,key:"columnChooser",column:e??null};this.eventService.dispatchEvent(i)}};yt([W("focusService")],Rg.prototype,"focusService",2);yt([W("menuUtils")],Rg.prototype,"menuUtils",2);yt([W("columnModel")],Rg.prototype,"columnModel",2);Rg=yt([Me("columnChooserFactory")],Rg);var Yr=class extends ye{createMenu(t,e,i){const s=t.createManagedBean(new od(0,{column:e??null,node:null,value:null})),r=this.getMenuItems(e),n=this.menuItemMapper.mapWithStockItems(r,e??null,i);return s.addMenuItems(n),s}getMenuItems(t){const e=this.getDefaultMenuOptions(t);let i;const s=t==null?void 0:t.getColDef().mainMenuItems;if(Array.isArray(s))i=s;else if(typeof s=="function")i=s(this.gos.addGridCommonParams({column:t,defaultItems:e}));else{const r=this.gos.getCallback("getMainMenuItems");r&&t?i=r({column:t,defaultItems:e}):i=e}return Q.removeRepeatsFromArray(i,Yr.MENU_ITEM_SEPARATOR),i}getDefaultMenuOptions(t){const e=[],i=this.menuService.isLegacyMenuEnabled();if(!t)return i||e.push("columnChooser"),e.push("resetColumns"),e;const s=!t.getColDef().lockPinned,r=this.columnModel.getRowGroupColumns().length,n=r>0,o=t.isAllowValue(),a=t.isAllowRowGroup(),l=t.isPrimary(),c=this.columnModel.isPivotMode(),u=this.rowModel.getType()==="clientSide",d=this.gos.get("treeData"),h=l&&n&&o||!l;if(!i&&t.isSortable()){const m=t.getSort();m!=="asc"&&e.push("sortAscending"),m!=="desc"&&e.push("sortDescending"),m&&e.push("sortUnSort"),e.push(Yr.MENU_ITEM_SEPARATOR)}return this.menuService.isFilterMenuItemEnabled(t)&&(e.push("columnFilter"),e.push(Yr.MENU_ITEM_SEPARATOR)),s&&e.push("pinSubMenu"),h&&e.push("valueAggSubMenu"),(s||h)&&e.push(Yr.MENU_ITEM_SEPARATOR),e.push("autoSizeThis"),e.push("autoSizeAll"),e.push(Yr.MENU_ITEM_SEPARATOR),t.getColDef().showRowGroup?e.push("rowUnGroup"):a&&t.isPrimary()&&(t.isRowGroupActive()?this.columnModel.isColumnGroupingLocked(t)||e.push("rowUnGroup"):e.push("rowGroup")),e.push(Yr.MENU_ITEM_SEPARATOR),i||e.push("columnChooser"),e.push("resetColumns"),u&&(d||r>(c?1:0))&&(e.push("expandAll"),e.push("contractAll")),e}};Yr.MENU_ITEM_SEPARATOR="separator";yt([W("menuItemMapper")],Yr.prototype,"menuItemMapper",2);yt([W("columnModel")],Yr.prototype,"columnModel",2);yt([W("rowModel")],Yr.prototype,"rowModel",2);yt([W("filterManager")],Yr.prototype,"filterManager",2);yt([W("menuService")],Yr.prototype,"menuService",2);Yr=yt([Me("columnMenuFactory")],Yr);var Mg=class extends ye{restoreFocusOnClose(t,e,i,s){const{eventSource:r}=t,n=i instanceof KeyboardEvent;if(!s&&!n||!r)return;const o=this.gos.getDocument(),a=this.gos.getActiveDomElement();!e.contains(a)&&a!==o.body||this.focusHeaderCell(t)}closePopupAndRestoreFocusOnSelect(t,e,i){let s;i&&i.keyboardEvent&&(s=i.keyboardEvent),t(s&&{keyboardEvent:s});const r=this.focusService.getFocusedCell(),n=this.gos.getDocument(),o=this.gos.getActiveDomElement();if(!o||o===n.body)if(r){const{rowIndex:a,rowPinned:l,column:c}=r;this.focusService.setFocusedCell({rowIndex:a,column:c,rowPinned:l,forceBrowserFocus:!0,preventScrollOnBrowserFocus:!0})}else this.focusHeaderCell(e)}onContextMenu(t,e,i){if(!this.gos.get("allowContextMenuWithControlKey")&&t&&(t.ctrlKey||t.metaKey)||(t&&this.blockMiddleClickScrollsIfNeeded(t),this.gos.get("suppressContextMenu")))return;const s=t??e.touches[0];if(i(s)){const r=t??e;r&&r.cancelable&&r.preventDefault()}}focusHeaderCell(t){const{column:e,columnIndex:i,headerPosition:s,eventSource:r}=t;if(this.columnModel.getAllDisplayedColumns().some(o=>o===e)&&r&&Q.isVisible(r)){const o=this.focusService.findTabbableParent(r);o&&(e&&this.headerNavigationService.scrollToColumn(e),o.focus())}else if(s&&i!==-1){const o=this.columnModel.getAllDisplayedColumns(),a=o[i]||Q.last(o);a&&this.focusService.focusHeaderPosition({headerPosition:{headerRowIndex:s.headerRowIndex,column:a}})}}blockMiddleClickScrollsIfNeeded(t){this.gos.get("suppressMiddleClickScrolls")&&t.which===2&&t.preventDefault()}};yt([W("focusService")],Mg.prototype,"focusService",2);yt([W("headerNavigationService")],Mg.prototype,"headerNavigationService",2);yt([W("columnModel")],Mg.prototype,"columnModel",2);Mg=yt([Me("menuUtils")],Mg);var Y9={version:Wae,moduleName:Ut.MenuModule,beans:[gl,zu,Wo,oC,Rg,Yr,Mg],dependantModules:[Qs]},q9=Object.defineProperty,Kae=Object.defineProperties,Yae=Object.getOwnPropertyDescriptor,qae=Object.getOwnPropertyDescriptors,hk=Object.getOwnPropertySymbols,Xae=Object.prototype.hasOwnProperty,Zae=Object.prototype.propertyIsEnumerable,pk=(t,e,i)=>e in t?q9(t,e,{enumerable:!0,configurable:!0,writable:!0,value:i}):t[e]=i,VA=(t,e)=>{for(var i in e||(e={}))Xae.call(e,i)&&pk(t,i,e[i]);if(hk)for(var i of hk(e))Zae.call(e,i)&&pk(t,i,e[i]);return t},HA=(t,e)=>Kae(t,qae(e)),E0=(t,e,i,s)=>{for(var r=s>1?void 0:s?Yae(e,i):e,n=t.length-1,o;n>=0;n--)(o=t[n])&&(r=(s?o(e,i,r):o(r))||r);return s&&r&&q9(e,i,r),r},e1=class X9 extends yl{constructor(){super('<div class="ag-multi-filter ag-menu-list-compact"></div>'),this.filterDefs=[],this.filters=[],this.guiDestroyFuncs=[],this.filterGuis=[],this.activeFilterIndices=[],this.lastActivatedMenuItem=null,this.afterFiltersReadyFuncs=[]}postConstruct(){this.initialiseTabGuard({onFocusIn:e=>this.onFocusIn(e)})}static getFilterDefs(e){const{filters:i}=e;return i&&i.length>0?i:[{filter:"agTextColumnFilter"},{filter:"agSetColumnFilter"}]}init(e){this.params=e,this.filterDefs=X9.getFilterDefs(e);const{column:i,filterChangedCallback:s}=e;this.column=i,this.filterChangedCallback=s;const r=[];return this.filterDefs.forEach((n,o)=>{const a=this.createFilter(n,o);a!=null&&r.push(a)}),new Ft(n=>{Ft.all(r).then(o=>{this.filters=o,this.refreshGui("columnMenu").then(()=>{n()})})}).then(()=>{this.afterFiltersReadyFuncs.forEach(n=>n()),this.afterFiltersReadyFuncs.length=0})}refreshGui(e){return e===this.lastOpenedInContainer?Ft.resolve():(this.removeAllChildrenExceptTabGuards(),this.destroyChildren(),Ft.all(this.filters.map((i,s)=>{const r=this.filterDefs[s],n=this.getFilterTitle(i,r);let o;if(r.display==="subMenu"&&e!=="toolPanel")o=this.insertFilterMenu(i,n).then(a=>a.getGui());else if(r.display==="subMenu"||r.display==="accordion"){const a=this.insertFilterGroup(i,n);o=Ft.resolve(a.getGui())}else o=Ft.resolve(i.getGui());return o})).then(i=>{i.forEach((s,r)=>{r>0&&this.appendChild(Q.loadTemplate('<div class="ag-filter-separator"></div>')),this.appendChild(s)}),this.filterGuis=i,this.lastOpenedInContainer=e}))}getFilterTitle(e,i){return i.title!=null?i.title:e instanceof Au?e.getFilterTitle():"Filter"}destroyChildren(){this.guiDestroyFuncs.forEach(e=>e()),this.guiDestroyFuncs.length=0,this.filterGuis.length=0}insertFilterMenu(e,i){const s=this.createBean(new Jn);return s.init({menuItemDef:{name:i,subMenu:[],cssClasses:["ag-multi-filter-menu-item"],menuItem:GM,menuItemParams:{cssClassPrefix:"ag-compact-menu-option",isCompact:!0}},level:0,isAnotherSubMenuOpen:()=>!1,childComponent:e,contextParams:{column:null,node:null,value:null}}).then(()=>{s.setParentComponent(this),this.guiDestroyFuncs.push(()=>this.destroyBean(s)),this.addManagedListener(s,Jn.EVENT_MENU_ITEM_ACTIVATED,n=>{this.lastActivatedMenuItem&&this.lastActivatedMenuItem!==n.menuItem&&this.lastActivatedMenuItem.deactivate(),this.lastActivatedMenuItem=n.menuItem});const r=s.getGui();return s.addManagedListener(r,"keydown",n=>{const{key:o}=n;switch(o){case ce.UP:case ce.RIGHT:case ce.DOWN:case ce.LEFT:n.preventDefault(),o===ce.RIGHT&&s.openSubMenu(!0);break}}),s.addManagedListener(r,"focusin",()=>s.activate()),s.addManagedListener(r,"focusout",()=>{!s.isSubMenuOpen()&&!s.isSubMenuOpening()&&s.deactivate()}),s})}insertFilterGroup(e,i){const s=this.createBean(new Bo({title:i,cssIdentifier:"multi-filter"}));return this.guiDestroyFuncs.push(()=>this.destroyBean(s)),s.addItem(e.getGui()),s.toggleGroupExpand(!1),e.afterGuiAttached&&s.addManagedListener(s,Bo.EVENT_EXPANDED,()=>e.afterGuiAttached({container:this.lastOpenedInContainer,suppressFocus:!0,hidePopup:this.hidePopup})),s}isFilterActive(){return this.filters.some(e=>e.isFilterActive())}getLastActiveFilterIndex(){return this.activeFilterIndices.length>0?this.activeFilterIndices[this.activeFilterIndices.length-1]:null}doesFilterPass(e,i){let s=!0;return this.filters.forEach(r=>{!s||r===i||!r.isFilterActive()||(s=r.doesFilterPass(e))}),s}getFilterType(){return"multi"}getModelFromUi(){return{filterType:this.getFilterType(),filterModels:this.filters.map(i=>{const s=i;return typeof s.getModelFromUi=="function"?s.getModelFromUi():null})}}getModel(){return this.isFilterActive()?{filterType:this.getFilterType(),filterModels:this.filters.map(i=>i.isFilterActive()?i.getModel():null)}:null}setModel(e){const i=(r,n)=>new Ft(o=>{const a=r.setModel(n);a?a.then(()=>o()):o()});let s=[];return e==null?s=this.filters.map((r,n)=>i(r,null).then(()=>{this.updateActiveList(n)})):this.filters.forEach((r,n)=>{const o=e.filterModels.length>n?e.filterModels[n]:null,a=i(r,o).then(()=>{this.updateActiveList(n)});s.push(a)}),Ft.all(s).then(()=>{})}applyModel(e="api"){let i=!1;return this.filters.forEach(s=>{s instanceof Au&&(i=s.applyModel(e)||i)}),i}getChildFilterInstance(e){return this.filters[e]}afterGuiAttached(e){let i;e?(this.hidePopup=e.hidePopup,i=this.refreshGui(e.container)):(this.hidePopup=void 0,i=Ft.resolve()),i.then(()=>{const{filterDefs:s}=this;let r=!1;s&&Q.forEachReverse(s,(a,l)=>{var c;const u=l===0,d=!u||a.display!=="inline",h=HA(VA({},e??{}),{suppressFocus:d}),p=(c=this.filters)==null?void 0:c[l];if(p&&(this.executeFunctionIfExistsOnFilter(p,"afterGuiAttached",h),u&&(r=!0)),u&&d){const f=this.filterGuis[l];f&&(f.focus(),r=!0)}});const n=this.gos.getDocument(),o=this.gos.getActiveDomElement();!r&&(!o||o===n.body||this.getGui().contains(o))&&this.forceFocusOutOfContainer(!0)})}afterGuiDetached(){this.executeFunctionIfExists("afterGuiDetached")}onAnyFilterChanged(){this.executeFunctionIfExists("onAnyFilterChanged")}onNewRowsLoaded(){this.executeFunctionIfExists("onNewRowsLoaded")}destroy(){this.filters.forEach(e=>this.destroyBean(e)),this.filters.length=0,this.destroyChildren(),this.hidePopup=void 0,super.destroy()}executeFunctionIfExists(e,...i){Q.forEachReverse(this.filters,s=>{this.executeFunctionIfExistsOnFilter(s,e,i)})}executeFunctionIfExistsOnFilter(e,i,...s){const r=e[i];typeof r=="function"&&r.apply(e,s)}createFilter(e,i){const{filterModifiedCallback:s,doesRowPassOtherFilter:r}=this.params;let n;const o=HA(VA({},this.filterManager.createFilterParams(this.column,this.column.getColDef())),{filterModifiedCallback:s,filterChangedCallback:c=>{this.executeWhenAllFiltersReady(()=>this.filterChanged(i,c))},doesRowPassOtherFilter:c=>r(c)&&this.doesFilterPass({node:c,data:c.data},n)}),a=this.userComponentFactory.getFilterDetails(e,o,"agTextColumnFilter");if(!a)return null;const l=a.newAgStackInstance();return l&&l.then(c=>n=c),l}executeWhenAllFiltersReady(e){this.filters&&this.filters.length>0?e():this.afterFiltersReadyFuncs.push(e)}updateActiveList(e){const i=this.filters[e];Q.removeFromArray(this.activeFilterIndices,e),i.isFilterActive()&&this.activeFilterIndices.push(e)}filterChanged(e,i){this.updateActiveList(e),this.filterChangedCallback(i);const s=this.filters[e];this.filters.forEach(r=>{r!==s&&typeof r.onAnyFilterChanged=="function"&&r.onAnyFilterChanged()})}onFocusIn(e){this.lastActivatedMenuItem!=null&&!this.lastActivatedMenuItem.getGui().contains(e.target)&&(this.lastActivatedMenuItem.deactivate(),this.lastActivatedMenuItem=null)}getModelAsString(e){var i,s,r,n;if(!this.filters||!((i=e==null?void 0:e.filterModels)!=null&&i.length))return"";const o=(s=this.getLastActiveFilterIndex())!=null?s:0,a=this.filters[o];return(n=(r=a.getModelAsString)==null?void 0:r.call(a,e.filterModels[o]))!=null?n:""}};E0([W("filterManager")],e1.prototype,"filterManager",2);E0([W("userComponentFactory")],e1.prototype,"userComponentFactory",2);E0([de],e1.prototype,"postConstruct",1);var _S=e1,_2=class extends Te{constructor(){super('<div class="ag-multi-floating-filter ag-floating-filter-input"></div>'),this.floatingFilters=[],this.compDetailsList=[]}init(t){this.params=t;const{compDetailsList:e}=this.getCompDetailsList(t);return this.setParams(e)}setParams(t){const e=[];return t.forEach(i=>{const s=i==null?void 0:i.newAgStackInstance();s!=null&&(this.compDetailsList.push(i),e.push(s))}),Ft.all(e).then(i=>{i.forEach((s,r)=>{this.floatingFilters.push(s);const n=s.getGui();this.appendChild(n),r>0&&Q.setDisplayed(n,!1)})})}onParamsUpdated(t){this.refresh(t)}refresh(t){this.params=t;const{compDetailsList:e,floatingFilterParamsList:i}=this.getCompDetailsList(t);e.length===this.compDetailsList.length&&e.every((r,n)=>!this.filterManager.areFilterCompsDifferent(this.compDetailsList[n],r))?i.forEach((r,n)=>{var o;const a=this.floatingFilters[n];let l=!1;a.refresh&&a.refresh(r)!==null&&(l=!0),l||(o=a.onParamsUpdated)==null||o.call(a,r)}):(Q.clearElement(this.getGui()),this.destroyBeans(this.floatingFilters),this.floatingFilters=[],this.compDetailsList=[],this.setParams(e))}getCompDetailsList(t){const e=[],i=[],s=t.filterParams;return _S.getFilterDefs(s).forEach((r,n)=>{const o=HA(VA({},t),{parentFilterInstance:l=>{this.parentMultiFilterInstance(c=>{const u=c.getChildFilterInstance(n);u!=null&&l(u)})}});Q.mergeDeep(o.filterParams,r.filterParams);const a=this.getCompDetails(r,o);a&&(e.push(a),i.push(o))}),{compDetailsList:e,floatingFilterParamsList:i}}onParentModelChanged(t,e){e&&e.afterFloatingFilter||this.parentMultiFilterInstance(i=>{if(t==null)this.floatingFilters.forEach((s,r)=>{s.onParentModelChanged(null,e),Q.setDisplayed(s.getGui(),r===0)});else{const s=i.getLastActiveFilterIndex();this.floatingFilters.forEach((r,n)=>{const o=t.filterModels.length>n?t.filterModels[n]:null;r.onParentModelChanged(o,e);const a=s==null?n===0:n===s;Q.setDisplayed(r.getGui(),a)})}})}destroy(){this.destroyBeans(this.floatingFilters),this.floatingFilters.length=0,super.destroy()}getCompDetails(t,e){var i;let s=(i=this.userComponentFactory.getDefaultFloatingFilterType(t,()=>this.filterManager.getDefaultFloatingFilter(this.params.column)))!=null?i:"agReadOnlyFloatingFilter";return this.userComponentFactory.getFloatingFilterCompDetails(t,e,s)}parentMultiFilterInstance(t){this.params.parentFilterInstance(e=>{if(!(e instanceof _S))throw new Error("AG Grid - MultiFloatingFilterComp expects MultiFilter as its parent");t(e)})}};E0([W("userComponentFactory")],_2.prototype,"userComponentFactory",2);E0([W("filterManager")],_2.prototype,"filterManager",2);var Jae="31.3.4",Z9={version:Jae,moduleName:Ut.MultiFilterModule,beans:[],userComponents:[{componentName:"agMultiColumnFilter",componentClass:_S},{componentName:"agMultiColumnFloatingFilter",componentClass:_2}],dependantModules:[Qs]},fk=class extends Ac{constructor(){super('<div class="ag-cell-edit-wrapper"></div>')}init(t){this.params=t;const{cellStartedEdit:e,cellHeight:i,values:s}=t;Q.missing(s)&&console.warn("AG Grid: agRichSelectCellEditor requires cellEditorParams.values to be set");const{params:r,valuesPromise:n}=this.buildRichSelectParams();this.richSelect=this.createManagedBean(new rd(r)),this.richSelect.addCssClass("ag-cell-editor"),this.appendChild(this.richSelect),n&&n.then(o=>{this.richSelect.setValueList({valueList:o,refresh:!0});const a=this.getSearchStringCallback(o);a&&this.richSelect.setSearchStringCreator(a)}),this.addManagedListener(this.richSelect,K.EVENT_FIELD_PICKER_VALUE_SELECTED,this.onEditorPickerValueSelected.bind(this)),this.addManagedListener(this.richSelect.getGui(),"focusout",this.onEditorFocusOut.bind(this)),this.focusAfterAttached=e,Q.exists(i)&&this.richSelect.setRowHeight(i)}onEditorPickerValueSelected(t){this.params.stopEditing(!t.fromEnterKey)}onEditorFocusOut(t){this.richSelect.getGui().contains(t.relatedTarget)||this.params.stopEditing(!0)}buildRichSelectParams(){const{cellRenderer:t,value:e,values:i,formatValue:s,searchDebounceDelay:r,valueListGap:n,valueListMaxHeight:o,valueListMaxWidth:a,allowTyping:l,filterList:c,searchType:u,highlightMatch:d,valuePlaceholder:h,eventKey:p}=this.params,f={value:e,cellRenderer:t,searchDebounceDelay:r,valueFormatter:s,pickerAriaLabelKey:"ariaLabelRichSelectField",pickerAriaLabelValue:"Rich Select Field",pickerType:"virtual-list",pickerGap:n,allowTyping:l,filterList:c,searchType:u,highlightMatch:d,maxPickerHeight:o,maxPickerWidth:a,placeholder:h,initialInputValue:(p==null?void 0:p.length)===1?p:void 0};let m,g;return typeof i=="function"?m=i(this.params):m=i??[],Array.isArray(m)?(f.valueList=m,f.searchStringCreator=this.getSearchStringCallback(m)):g=m,{params:f,valuesPromise:g}}getSearchStringCallback(t){const{colDef:e}=this.params;if(!(typeof t[0]!="object"||!e.keyCreator))return i=>i.map(s=>{const r=this.gos.addGridCommonParams({value:s,colDef:this.params.colDef,column:this.params.column,node:this.params.node,data:this.params.data});return e.keyCreator(r)})}afterGuiAttached(){const{focusAfterAttached:t,params:e}=this;setTimeout(()=>{if(!this.isAlive())return;if(t){const s=this.richSelect.getFocusableElement();s.focus();const{allowTyping:r,eventKey:n}=this.params;r&&(!n||n.length!==1)&&s.select()}this.richSelect.showPicker();const{eventKey:i}=e;i&&(i==null?void 0:i.length)===1&&this.richSelect.searchTextFromString(i)})}getValue(){return this.richSelect.getValue()}isPopup(){return!1}},Qae="31.3.4",J9={version:Qae,moduleName:Ut.RichSelectModule,beans:[],userComponents:[{componentName:"agRichSelect",componentClass:fk},{componentName:"agRichSelectCellEditor",componentClass:fk}],dependantModules:[Qs]},Q9=Object.defineProperty,ele=Object.defineProperties,tle=Object.getOwnPropertyDescriptor,ile=Object.getOwnPropertyDescriptors,AS=Object.getOwnPropertySymbols,eH=Object.prototype.hasOwnProperty,tH=Object.prototype.propertyIsEnumerable,gk=(t,e,i)=>e in t?Q9(t,e,{enumerable:!0,configurable:!0,writable:!0,value:i}):t[e]=i,jA=(t,e)=>{for(var i in e||(e={}))eH.call(e,i)&&gk(t,i,e[i]);if(AS)for(var i of AS(e))tH.call(e,i)&&gk(t,i,e[i]);return t},sle=(t,e)=>ele(t,ile(e)),iH=(t,e)=>{var i={};for(var s in t)eH.call(t,s)&&e.indexOf(s)<0&&(i[s]=t[s]);if(t!=null&&AS)for(var s of AS(t))e.indexOf(s)<0&&tH.call(t,s)&&(i[s]=t[s]);return i},Ne=(t,e,i,s)=>{for(var r=s>1?void 0:s?tle(e,i):e,n=t.length-1,o;n>=0;n--)(o=t[n])&&(r=(s?o(e,i,r):o(r))||r);return s&&r&&Q9(e,i,r),r},Br=class extends za{constructor(t,e,i){super(0),this.nodeIdSequence=new pr,this.info={},this.ssrmParams=t,this.parentRowNode=i,this.level=i.level+1,this.groupLevel=t.rowGroupCols?this.level<t.rowGroupCols.length:void 0,this.leafGroup=t.rowGroupCols?this.level===t.rowGroupCols.length-1:!1}postConstruct(){if(this.usingTreeData=this.gos.get("treeData"),this.nodeIdPrefix=this.blockUtils.createNodeIdPrefix(this.parentRowNode),!this.usingTreeData&&this.groupLevel){const s=this.ssrmParams.rowGroupCols[this.level];this.groupField=s.field,this.rowGroupColumn=this.columnModel.getRowGroupColumns()[this.level]}let t=1;const e=this.parentRowNode.level===-1,i=this.storeUtils.getServerSideInitialRowCount();e&&i!=null&&(t=i),this.initialiseRowNodes(t),this.rowNodeBlockLoader.addBlock(this),this.addDestroyFunc(()=>this.rowNodeBlockLoader.removeBlock(this)),this.postSortFunc=this.gos.getCallback("postSortRows"),i!=null&&this.eventService.dispatchEventOnce({type:K.EVENT_ROW_COUNT_READY})}destroyRowNodes(){this.blockUtils.destroyRowNodes(this.allRowNodes),this.allRowNodes=[],this.nodesAfterSort=[],this.nodesAfterFilter=[],this.allNodesMap={}}initialiseRowNodes(t,e=!1){this.destroyRowNodes();for(let i=0;i<t;i++){const s=this.blockUtils.createRowNode({field:this.groupField,group:this.groupLevel,leafGroup:this.leafGroup,level:this.level,parent:this.parentRowNode,rowGroupColumn:this.rowGroupColumn});e&&(s.failedLoad=!0),this.allRowNodes.push(s),this.nodesAfterFilter.push(s),this.nodesAfterSort.push(s)}}getBlockStateJson(){return{id:this.nodeIdPrefix?this.nodeIdPrefix:"",state:this.getState()}}loadFromDatasource(){this.storeUtils.loadFromDatasource({startRow:void 0,endRow:void 0,parentBlock:this,parentNode:this.parentRowNode,storeParams:this.ssrmParams,success:this.success.bind(this,this.getVersion()),fail:this.pageLoadFailed.bind(this,this.getVersion())})}getStartRow(){return 0}getEndRow(){return this.nodesAfterSort.length}createDataNode(t,e){const i=this.blockUtils.createRowNode({field:this.groupField,group:this.groupLevel,leafGroup:this.leafGroup,level:this.level,parent:this.parentRowNode,rowGroupColumn:this.rowGroupColumn});e!=null?Q.insertIntoArray(this.allRowNodes,i,e):this.allRowNodes.push(i);const s=this.prefixId(this.nodeIdSequence.next());return this.blockUtils.setDataIntoRowNode(i,t,s,void 0),this.nodeManager.addRowNode(i),this.blockUtils.checkOpenByDefault(i),this.allNodesMap[i.id]=i,i}prefixId(t){return this.nodeIdPrefix?this.nodeIdPrefix+"-"+t:t.toString()}processServerFail(){this.initialiseRowNodes(1,!0),this.fireStoreUpdatedEvent(),this.flushAsyncTransactions()}processServerResult(t){if(!this.isAlive())return;const e=t.groupLevelInfo;e&&Object.assign(this.info,e),t.pivotResultFields&&this.serverSideRowModel.generateSecondaryColumns(t.pivotResultFields);const i=this.allRowNodes.length>0?this.allNodesMap:void 0;this.allRowNodes=[],this.nodesAfterSort=[],this.nodesAfterFilter=[],this.allNodesMap={},t.rowData||Q.warnOnce('"params.data" is missing from Server-Side Row Model success() callback. Please use the "data" attribute. If no data is returned, set an empty list.'),this.createOrRecycleNodes(i,t.rowData),i&&this.blockUtils.destroyRowNodes(Q.getAllValuesInObject(i)),this.level===0&&this.eventService.dispatchEventOnce({type:K.EVENT_ROW_COUNT_READY}),this.filterAndSortNodes(),this.fireStoreUpdatedEvent(),this.flushAsyncTransactions()}createOrRecycleNodes(t,e){if(!e)return;const i=r=>{if(!t)return;const n=this.gos.getCallback("getRowId");if(!n)return;const o=this.parentRowNode.getGroupKeys(),a=this.level,l=n({data:r,parentKeys:o.length>0?o:void 0,level:a}),c=t[l];if(c)return delete t[l],c},s=(r,n)=>{this.allNodesMap[r.id]=r,this.blockUtils.updateDataIntoRowNode(r,n),this.allRowNodes.push(r)};e.forEach(r=>{const n=i(r);n?s(n,r):this.createDataNode(r)})}flushAsyncTransactions(){window.setTimeout(()=>this.transactionManager.flushAsyncTransactions(),0)}filterAndSortNodes(){this.filterRowNodes(),this.sortRowNodes()}sortRowNodes(){const t=this.storeUtils.isServerSideSortAllLevels()||this.storeUtils.isServerSideSortOnServer(),e=this.sortController.getSortOptions(),i=!e||e.length==0;if(t||i){this.nodesAfterSort=this.nodesAfterFilter;return}if(this.nodesAfterSort=this.rowNodeSorter.doFullSort(this.nodesAfterFilter,e),this.postSortFunc){const s={nodes:this.nodesAfterSort};this.postSortFunc(s)}}filterRowNodes(){const t=!this.storeUtils.isServerSideOnlyRefreshFilteredGroups()||this.storeUtils.isServerSideFilterOnServer(),e=this.groupLevel;if(t||e){this.nodesAfterFilter=this.allRowNodes;return}this.nodesAfterFilter=this.allRowNodes.filter(i=>this.filterManager.doesRowPassFilter({rowNode:i}))}clearDisplayIndexes(){this.displayIndexStart=void 0,this.displayIndexEnd=void 0,this.allRowNodes.forEach(t=>this.blockUtils.clearDisplayIndex(t))}getDisplayIndexEnd(){return this.displayIndexEnd}isDisplayIndexInStore(t){return this.getRowCount()===0?!1:t>=this.displayIndexStart&&t<this.displayIndexEnd}setDisplayIndexes(t,e){this.displayIndexStart=t.peek(),this.topPx=e.value;const i={};this.nodesAfterSort.forEach(s=>{this.blockUtils.setDisplayIndex(s,t,e),i[s.id]=!0}),this.allRowNodes.forEach(s=>{i[s.id]||this.blockUtils.clearDisplayIndex(s)}),this.displayIndexEnd=t.peek(),this.heightPx=e.value-this.topPx}forEachStoreDeep(t,e=new pr){t(this,e.next()),this.allRowNodes.forEach(i=>{const s=i.childStore;s&&s.forEachStoreDeep(t,e)})}forEachNodeDeep(t,e=new pr){this.allRowNodes.forEach(i=>{t(i,e.next());const s=i.childStore;s&&s.forEachNodeDeep(t,e)})}forEachNodeDeepAfterFilterAndSort(t,e=new pr,i=!1){this.nodesAfterSort.forEach(s=>{t(s,e.next());const r=s.childStore;r&&r.forEachNodeDeepAfterFilterAndSort(t,e,i)}),i&&this.parentRowNode.sibling&&t(this.parentRowNode.sibling,e.next())}getRowUsingDisplayIndex(t){return this.isDisplayIndexInStore(t)?this.blockUtils.binarySearchForDisplayIndex(t,this.nodesAfterSort):void 0}getRowBounds(t){for(let e=0;e<this.nodesAfterSort.length;e++){const i=this.nodesAfterSort[e],s=this.blockUtils.extractRowBounds(i,t);if(s)return s}return null}isPixelInRange(t){return t>=this.topPx&&t<this.topPx+this.heightPx}getRowIndexAtPixel(t){if(t<=this.topPx)return this.nodesAfterSort[0].rowIndex;if(t>=this.topPx+this.heightPx){const n=this.nodesAfterSort[this.nodesAfterSort.length-1],o=n.rowTop+n.rowHeight;if(t>=o&&n.expanded){if(n.childStore&&n.childStore.getRowCount()>0)return n.childStore.getRowIndexAtPixel(t);if(n.detailNode)return n.detailNode.rowIndex}return n.rowIndex}let s=null;return this.nodesAfterSort.forEach(n=>{const o=this.blockUtils.getIndexAtPixel(n,t);o!=null&&(s=o)}),s??this.displayIndexEnd-1}getChildStore(t){return this.storeUtils.getChildStore(t,this,e=>this.allRowNodes.find(s=>s.key==e))}forEachChildStoreShallow(t){this.allRowNodes.forEach(e=>{const i=e.childStore;i&&t(i)})}refreshAfterFilter(t){const e=this.storeUtils.isServerSideFilterOnServer(),i=this.storeUtils.isServerRefreshNeeded(this.parentRowNode,this.ssrmParams.rowGroupCols,t);if(!this.storeUtils.isServerSideOnlyRefreshFilteredGroups()||e&&i){this.refreshStore(!0),this.sortRowNodes();return}this.filterRowNodes(),this.sortRowNodes(),this.forEachChildStoreShallow(r=>r.refreshAfterFilter(t))}refreshAfterSort(t){const e=this.storeUtils.isServerSideSortOnServer(),i=this.storeUtils.isServerRefreshNeeded(this.parentRowNode,this.ssrmParams.rowGroupCols,t);if(this.storeUtils.isServerSideSortAllLevels()||e&&i){this.refreshStore(!0),this.filterRowNodes();return}this.filterRowNodes(),this.sortRowNodes(),this.forEachChildStoreShallow(r=>r.refreshAfterSort(t))}applyTransaction(t){switch(this.getState()){case za.STATE_FAILED:return{status:Mr.StoreLoadingFailed};case za.STATE_LOADING:return{status:Mr.StoreLoading};case za.STATE_WAITING_TO_LOAD:return{status:Mr.StoreWaitingToLoad}}const e=this.gos.getCallback("isApplyServerSideTransaction");if(e){const r={transaction:t,parentNode:this.parentRowNode,groupLevelInfo:this.info};if(!e(r))return{status:Mr.Cancelled}}const i={status:Mr.Applied,remove:[],update:[],add:[]},s=[];return this.executeAdd(t,i),this.executeRemove(t,i,s),this.executeUpdate(t,i,s),this.filterAndSortNodes(),this.updateSelection(s),i}updateSelection(t){if(t.length>0){this.selectionService.setNodesSelected({newValue:!1,nodes:t,suppressFinishActions:!0,clearSelection:!1,source:"rowDataChanged"});const i={type:K.EVENT_SELECTION_CHANGED,source:"rowDataChanged"};this.eventService.dispatchEvent(i)}}executeAdd(t,e){const{add:i,addIndex:s}=t;if(Q.missingOrEmpty(i))return;typeof s=="number"&&s>=0?i.reverse().forEach(n=>{const o=this.createDataNode(n,s);e.add.push(o)}):i.forEach(n=>{const o=this.createDataNode(n);e.add.push(o)})}executeRemove(t,e,i){const{remove:s}=t;if(s==null)return;const r={};s.forEach(n=>{const o=this.lookupRowNode(n);o&&(o.isSelected()&&i.push(o),o.clearRowTopAndRowIndex(),r[o.id]=!0,delete this.allNodesMap[o.id],e.remove.push(o),this.nodeManager.removeNode(o))}),this.allRowNodes=this.allRowNodes.filter(n=>!r[n.id])}executeUpdate(t,e,i){const{update:s}=t;s!=null&&s.forEach(r=>{const n=this.lookupRowNode(r);n&&(this.blockUtils.updateDataIntoRowNode(n,r),!n.selectable&&n.isSelected()&&i.push(n),e.update.push(n))})}lookupRowNode(t){const e=this.gos.getCallback("getRowId");let i;if(e!=null){const s=this.level,r=this.parentRowNode.getGroupKeys(),n=e({data:t,parentKeys:r.length>0?r:void 0,level:s});if(i=this.allNodesMap[n],!i)return console.error(`AG Grid: could not find row id=${n}, data item was not found for this id`),null}else if(i=this.allRowNodes.find(s=>s.data===t),!i)return console.error("AG Grid: could not find data item as object was not found",t),null;return i}addStoreStates(t){t.push({suppressInfiniteScroll:!0,route:this.parentRowNode.getGroupKeys(),rowCount:this.allRowNodes.length,info:this.info}),this.forEachChildStoreShallow(e=>e.addStoreStates(t))}refreshStore(t){if(t){const e=this.nodesAfterSort?this.nodesAfterSort.length:1;this.initialiseRowNodes(e)}this.scheduleLoad(),this.fireStoreUpdatedEvent()}retryLoads(){this.getState()===za.STATE_FAILED&&(this.initialiseRowNodes(1),this.scheduleLoad()),this.forEachChildStoreShallow(t=>t.retryLoads())}scheduleLoad(){this.setStateWaitingToLoad(),this.rowNodeBlockLoader.checkBlockToLoad()}fireStoreUpdatedEvent(){const t={type:K.EVENT_STORE_UPDATED};this.eventService.dispatchEvent(t)}getRowCount(){return this.nodesAfterSort.length}getTopLevelRowDisplayedIndex(t){return this.nodesAfterSort[t].rowIndex}isLastRowIndexKnown(){return this.getState()==za.STATE_LOADED}getRowNodesInRange(t,e){const i=[];let s=!1;return Q.missing(t)&&(s=!0),this.nodesAfterSort.forEach(n=>{const o=n===t||n===e;(s||o)&&i.push(n),o&&(s=!s)}),s?[]:i}getStoreBounds(){return{topPx:this.topPx,heightPx:this.heightPx}}};Ne([W("ssrmStoreUtils")],Br.prototype,"storeUtils",2);Ne([W("ssrmBlockUtils")],Br.prototype,"blockUtils",2);Ne([W("columnModel")],Br.prototype,"columnModel",2);Ne([W("rowNodeBlockLoader")],Br.prototype,"rowNodeBlockLoader",2);Ne([W("rowNodeSorter")],Br.prototype,"rowNodeSorter",2);Ne([W("sortController")],Br.prototype,"sortController",2);Ne([W("selectionService")],Br.prototype,"selectionService",2);Ne([W("ssrmNodeManager")],Br.prototype,"nodeManager",2);Ne([W("filterManager")],Br.prototype,"filterManager",2);Ne([W("ssrmTransactionManager")],Br.prototype,"transactionManager",2);Ne([W("rowModel")],Br.prototype,"serverSideRowModel",2);Ne([de],Br.prototype,"postConstruct",1);Ne([Hi],Br.prototype,"destroyRowNodes",1);var rle=class{constructor(...t){if(t.length<1)throw new Error("AG Grid: At least one index must be provided.");this.indexes=t,this.maps=new Map(this.indexes.map(e=>[e,new Map]))}getSize(){return this.maps.get(this.indexes[0]).size}getBy(t,e){const i=this.maps.get(t);if(!i)throw new Error(`AG Grid: ${String(t)} not found`);return i.get(e)}set(t){this.indexes.forEach(e=>{const i=this.maps.get(e);if(!i)throw new Error(`AG Grid: ${String(e)} not found`);i.set(t[e],t)})}delete(t){this.indexes.forEach(e=>{const i=this.maps.get(e);if(!i)throw new Error(`AG Grid: ${String(e)} not found`);i.delete(t[e])})}clear(){this.maps.forEach(t=>t.clear())}getIterator(t){const e=this.maps.get(t);if(!e)throw new Error(`AG Grid: ${String(t)} not found`);return e.values()}forEach(t){const e=this.getIterator(this.indexes[0]);let i;for(;(i=e.next())&&!i.done;)t(i.value)}find(t){const e=this.getIterator(this.indexes[0]);let i;for(;(i=e.next())&&!i.done;)if(t(i.value))return i.value}filter(t){const e=this.getIterator(this.indexes[0]);let i;const s=[];for(;(i=e.next())&&!i.done;)t(i.value)&&s.push(i.value);return s}},yc=class extends ye{constructor(){super(...arguments),this.cacheLoadingNodesMap=new Map,this.isCheckQueued=!1,this.nextBlockToLoad=void 0}init(){this.addManagedListener(this.rowNodeBlockLoader,Go.BLOCK_LOADED_EVENT,()=>this.queueLoadCheck())}subscribe(t){this.cacheLoadingNodesMap.set(t,new Set)}unsubscribe(t){this.cacheLoadingNodesMap.delete(t)}queueLoadCheck(){this.isCheckQueued||(this.isCheckQueued=!0,window.queueMicrotask(()=>{this.queueLoadAction(),this.isCheckQueued=!1}))}queueLoadAction(){const t=this.getBlockToLoad();if(!t)return;const e=this.nextBlockToLoad&&this.nextBlockToLoad.cache===t.cache&&this.nextBlockToLoad.index===t.index;if(!e&&(!this.nextBlockToLoad||!e)){this.nextBlockToLoad=t,window.clearTimeout(this.loaderTimeout);const i=Number(this.nextBlockToLoad.index),s=this.nextBlockToLoad.cache,r=t.index+t.cache.getBlockSize();this.loaderTimeout=window.setTimeout(()=>{s.isAlive()&&(this.loaderTimeout=void 0,this.attemptLoad(s,i,r),this.nextBlockToLoad=void 0)},this.gos.get("blockLoadDebounceMillis"))}}attemptLoad(t,e,i){const s=this.rowNodeBlockLoader.getAvailableLoadingCount();s!=null&&s===0||(this.rowNodeBlockLoader.registerLoads(1),this.executeLoad(t,e,i),this.queueLoadCheck())}executeLoad(t,e,i){var s;const r=t.getSsrmParams(),n={startRow:e,endRow:i,rowGroupCols:r.rowGroupCols,valueCols:r.valueCols,pivotCols:r.pivotCols,pivotMode:r.pivotMode,groupKeys:t.store.getParentNode().getGroupKeys(),filterModel:r.filterModel,sortModel:r.sortModel},o=this.cacheLoadingNodesMap.get(t),a=()=>{for(let h=0;h<i-e;h++)o.delete(e+h)},l=()=>{for(let h=0;h<i-e;h++)o.add(e+h)},c=h=>{this.rowNodeBlockLoader.loadComplete(),t.onLoadSuccess(e,i-e,h),a()},u=()=>{this.rowNodeBlockLoader.loadComplete(),t.onLoadFailed(e,i-e),a()},d=this.gos.addGridCommonParams({request:n,success:c,fail:u,parentNode:t.store.getParentNode()});l(),(s=t.getSsrmParams().datasource)==null||s.getRows(d)}getBlockToLoad(){var t;const e=this.rowRenderer.getFirstVirtualRenderedRow(),i=this.rowRenderer.getLastVirtualRenderedRow();for(let l=e;l<=i;l++){const c=this.rowModel.getRow(l);if(!c)continue;const u=c.parent&&c.parent.childStore;if(!u||!(u instanceof ga))continue;const d=u.getCache(),h=d.getNodes().getBy("node",c);if(!h)continue;const p=this.cacheLoadingNodesMap.get(d);if(!(p!=null&&p.has(h.index))&&(c.__needsRefreshWhenVisible||c.stub&&!c.failedLoad))return{cache:d,index:d.getBlockStartIndex(h.index)}}let s=null,r=null,n=Number.MAX_SAFE_INTEGER;for(const l of this.cacheLoadingNodesMap.keys())l.getNodesToRefresh().forEach(u=>{if(u.rowIndex==null){r=u,s=l;return}const d=l.getNodes().getBy("node",u);if(!d)return;const h=this.cacheLoadingNodesMap.get(l);if(h!=null&&h.has(d.index))return;const p=Math.abs(e-u.rowIndex),f=Math.abs(u.rowIndex-i);p<n&&(r=u,n=p,s=l),f<n&&(r=u,n=f,s=l)});if(!s)return;const o=s,a=(t=o.getNodes().getBy("node",r))==null?void 0:t.index;return a==null?void 0:{cache:o,index:o.getBlockStartIndex(a)}}isRowLoading(t,e){var i,s;return(s=(i=this.cacheLoadingNodesMap.get(t))==null?void 0:i.has(e))!=null?s:!1}};yc.DEFAULT_BLOCK_SIZE=100;Ne([W("rowNodeBlockLoader")],yc.prototype,"rowNodeBlockLoader",2);Ne([W("rowRenderer")],yc.prototype,"rowRenderer",2);Ne([W("rowModel")],yc.prototype,"rowModel",2);Ne([de],yc.prototype,"init",1);yc=Ne([Me("lazyBlockLoadingService")],yc);var so=class extends ye{constructor(t,e,i){super(),this.live=!0,this.removedNodeCache=new Map,this.store=t,this.numberOfRows=e,this.isLastRowKnown=!1,this.storeParams=i}init(){this.lazyBlockLoadingService.subscribe(this),this.nodeMap=new rle("index","id","node"),this.nodeDisplayIndexMap=new Map,this.nodesToRefresh=new Set,this.defaultNodeIdPrefix=this.blockUtils.createNodeIdPrefix(this.store.getParentNode()),this.getRowIdFunc=this.gos.getCallback("getRowId"),this.isMasterDetail=this.gos.get("masterDetail")}destroyRowNodes(){this.lazyBlockLoadingService.unsubscribe(this),this.numberOfRows=0,this.nodeMap.forEach(t=>this.blockUtils.destroyRowNode(t.node)),this.nodeMap.clear(),this.nodeDisplayIndexMap.clear(),this.nodesToRefresh.clear(),this.live=!1}getRowByDisplayIndex(t){var e,i,s,r;if(!this.store.isDisplayIndexInStore(t))return;const n=this.nodeDisplayIndexMap.get(t);if(n)return(n.stub||n.__needsRefreshWhenVisible)&&this.lazyBlockLoadingService.queueLoadCheck(),n;if(t===this.store.getDisplayIndexStart())return this.createStubNode(0,t);const o=this.nodeDisplayIndexMap.get(t-1);if(o){if(this.isMasterDetail&&o.master&&o.expanded)return o.detailNode;if(o.expanded&&((e=o.childStore)!=null&&e.isDisplayIndexInStore(t)))return(i=o.childStore)==null?void 0:i.getRowUsingDisplayIndex(t);const d=this.nodeMap.getBy("node",o);return this.createStubNode(d.index+1,t)}const a=this.getSurroundingNodesByDisplayIndex(t);if(a==null){const d=this.store.getRowCount()-(this.store.getDisplayIndexEnd()-t);return this.createStubNode(d,t)}const{previousNode:l,nextNode:c}=a;if(l&&l.node.expanded&&((s=l.node.childStore)!=null&&s.isDisplayIndexInStore(t)))return(r=l.node.childStore)==null?void 0:r.getRowUsingDisplayIndex(t);if(c){const d=c.node.rowIndex-t,h=c.index-d;return this.createStubNode(h,t)}const u=this.store.getRowCount()-(this.store.getDisplayIndexEnd()-t);return this.createStubNode(u,t)}createStubNode(t,e){const i=this.store.getRowBounds(e),s=this.createRowAtIndex(t,null,r=>{r.setRowIndex(e),r.setRowTop(i.rowTop),this.nodeDisplayIndexMap.set(e,r)});return this.lazyBlockLoadingService.queueLoadCheck(),s}getRowByStoreIndex(t){var e;return(e=this.nodeMap.getBy("index",t))==null?void 0:e.node}skipDisplayIndexes(t,e,i){if(t===0)return;const s=this.gos.getRowHeightAsNumber();e.skip(t),i.value+=t*s}setDisplayIndexes(t,e){this.nodeDisplayIndexMap.clear();const i={};this.nodeMap.forEach(n=>{i[n.index]=n.node});let s=-1;for(const n in i){const o=i[n],a=Number(n),l=a-1-s;this.skipDisplayIndexes(l,t,e),this.blockUtils.setDisplayIndex(o,t,e),this.nodeDisplayIndexMap.set(o.rowIndex,o),s=a}const r=this.numberOfRows-1-s;this.skipDisplayIndexes(r,t,e),this.purgeExcessRows()}getRowCount(){return this.numberOfRows}setRowCount(t,e){if(t<0)throw new Error("AG Grid: setRowCount can only accept a positive row count.");this.numberOfRows=t,e!=null&&(this.isLastRowKnown=e,e===!1&&(this.numberOfRows+=1)),this.fireStoreUpdatedEvent()}getNodes(){return this.nodeMap}getNodeCachedByDisplayIndex(t){var e;return(e=this.nodeDisplayIndexMap.get(t))!=null?e:null}getNodesToRefresh(){return this.nodesToRefresh}getSurroundingNodesByDisplayIndex(t){let e,i;return this.nodeMap.forEach(s=>{if(t>s.node.rowIndex){(i==null||i.node.rowIndex<s.node.rowIndex)&&(i=s);return}if(e==null||e.node.rowIndex>s.node.rowIndex){e=s;return}}),!i&&!e?null:{previousNode:i,nextNode:e}}getDisplayIndexFromStoreIndex(t){var e,i;const s=this.nodeMap.getBy("index",t);if(s)return s.node.rowIndex;let r,n;if(this.nodeMap.forEach(l=>{if(t>l.index){(n==null||n.index<l.index)&&(n=l);return}if(r==null||r.index>l.index){r=l;return}}),!r)return this.store.getDisplayIndexEnd()-(this.numberOfRows-t);if(!n)return this.store.getDisplayIndexStart()+t;const o=t-n.index;return((i=(e=n.node.childStore)==null?void 0:e.getDisplayIndexEnd())!=null?i:n.node.rowIndex)+o}createRowAtIndex(t,e,i){var s,r;const n=this.nodeMap.getBy("index",t);if(n){const{node:a}=n;if(a.__needsRefreshWhenVisible=!1,this.doesNodeMatch(e,a))return this.blockUtils.updateDataIntoRowNode(a,e),this.nodesToRefresh.delete(a),a;if(this.getRowIdFunc==null&&a.hasChildren()&&a.expanded)return this.nodesToRefresh.delete(a),a;this.destroyRowAtIndex(t)}if(e&&this.getRowIdFunc!=null){const a=this.getRowId(e),l=a&&((s=this.removedNodeCache)==null?void 0:s.get(a));if(l)return(r=this.removedNodeCache)==null||r.delete(a),this.blockUtils.updateDataIntoRowNode(l,e),this.nodeMap.set({id:l.id,node:l,index:t}),l;const c=this.nodeMap.getBy("id",a);if(c){this.nodeMap.delete(c);const{node:u,index:d}=c;return this.blockUtils.updateDataIntoRowNode(u,e),this.nodeMap.set({id:u.id,node:u,index:t}),this.nodesToRefresh.delete(u),this.getBlockStartIndex(d)===this.getBlockStartIndex(t)||this.markBlockForVerify(d),u}}const o=this.blockUtils.createRowNode(this.store.getRowDetails());if(e!=null){const a=this.getPrefixedId(this.store.getIdSequence().next());this.blockUtils.setDataIntoRowNode(o,e,a,void 0),this.serverSideRowModel.setPaused(!0),this.blockUtils.checkOpenByDefault(o),this.serverSideRowModel.setPaused(!1),this.nodeManager.addRowNode(o)}return this.nodeMap.set({id:o.id,node:o,index:t}),i&&i(o),o}getBlockStates(){const t={},e={};this.nodeMap.forEach(({node:n,index:o})=>{var a;const l=this.getBlockStartIndex(o);!n.stub&&!n.failedLoad&&(t[l]=((a=t[l])!=null?a:0)+1);let c="loaded";n.failedLoad?c="failed":this.lazyBlockLoadingService.isRowLoading(this,l)?c="loading":(this.nodesToRefresh.has(n)||n.stub)&&(c="needsLoading"),e[l]||(e[l]=new Set),e[l].add(c)});const i={loading:4,failed:3,needsLoading:2,loaded:1},s=this.blockUtils.createNodeIdPrefix(this.store.getParentNode()),r={};return Object.entries(e).forEach(([n,o])=>{var a;const c=[...o].sort((h,p)=>{var f,m;return((f=i[h])!=null?f:0)-((m=i[p])!=null?m:0)})[0],u=Number(n)/this.getBlockSize(),d=s?`${s}-${u}`:String(u);r[d]={blockNumber:u,startRow:Number(n),endRow:Number(n)+this.getBlockSize(),pageStatus:c,loadedRowCount:(a=t[n])!=null?a:0}}),r}destroyRowAtIndex(t){const e=this.nodeMap.getBy("index",t);e&&(this.nodeMap.delete(e),this.nodeDisplayIndexMap.delete(e.node.rowIndex),this.nodesToRefresh.size>0?this.removedNodeCache.set(e.node.id,e.node):this.blockUtils.destroyRowNode(e.node),this.nodesToRefresh.delete(e.node))}getSsrmParams(){return this.store.getSsrmParams()}getPrefixedId(t){return this.defaultNodeIdPrefix?this.defaultNodeIdPrefix+"-"+t:t.toString()}markBlockForVerify(t){const[e,i]=this.getBlockBounds(t);this.nodeMap.filter(r=>r.index>=e&&r.index<i).forEach(({node:r})=>{r.__needsRefreshWhenVisible=!0})}doesNodeMatch(t,e){if(e.stub)return!1;if(this.getRowIdFunc!=null){const i=this.getRowId(t);return e.id===i}return e.data===t}purgeStubsOutsideOfViewport(){const t=this.api.getFirstDisplayedRowIndex(),e=this.api.getLastDisplayedRowIndex(),i=this.getBlockStartIndex(t),[s,r]=this.getBlockBounds(e);this.nodeMap.forEach(n=>{this.lazyBlockLoadingService.isRowLoading(this,n.index)||n.node.failedLoad||n.node.stub&&(n.index<i||n.index>r)&&this.destroyRowAtIndex(n.index)})}getBlocksDistanceFromRow(t,e){const i={};return t.forEach(({node:s,index:r})=>{const[n,o]=this.getBlockBounds(r);if(n in i)return;const a=Math.abs(s.rowIndex-e);let l;const c=this.nodeMap.getBy("index",[o-1]);c&&(l=Math.abs(c.node.rowIndex-e));const u=l==null||a<l?a:l;i[n]=u}),Object.entries(i)}purgeExcessRows(){var t;if(this.purgeStubsOutsideOfViewport(),this.store.getDisplayIndexEnd()==null||this.storeParams.maxBlocksInCache==null)return;const e=this.api.getFirstDisplayedRowIndex(),i=this.api.getLastDisplayedRowIndex(),s=new Set,r=new Set;this.nodeMap.forEach(({index:f,node:m})=>{const g=this.getBlockStartIndex(f);s.add(g),m.rowIndex>=e&&m.rowIndex<=i&&r.add(g)});const n=Math.max(r.size,(t=this.storeParams.maxBlocksInCache)!=null?t:0),a=s.size-n;if(a<=0)return;let l=Number.MAX_SAFE_INTEGER,c=Number.MIN_SAFE_INTEGER;r.forEach(f=>{l>f&&(l=f),c<f&&(c=f)});const u=this.nodeMap.filter(({node:f,index:m})=>{const g=this.getBlockStartIndex(m);return!(g>=l&&g<=c)&&!this.isNodeCached(f)});if(u.length===0)return;const d=e+(i-e)/2,h=this.getBlocksDistanceFromRow(u,d),p=this.getBlockSize();h.sort((f,m)=>Math.sign(m[1]-f[1]));for(let f=0;f<Math.min(a,h.length);f++){const m=Number(h[f][0]);for(let g=m;g<m+p;g++){const y=this.nodeMap.getBy("index",g);!y||this.isNodeCached(y.node)||this.destroyRowAtIndex(g)}}}isNodeFocused(t){const e=this.focusService.getFocusCellToUseAfterRefresh();return!e||e.rowPinned!=null?!1:e.rowIndex===t.rowIndex}isNodeCached(t){return t.isExpandable()&&t.expanded||this.isNodeFocused(t)}extractDuplicateIds(t){if(this.getRowIdFunc==null)return[];const e=new Set,i=new Set;return t.forEach(s=>{const r=this.getRowId(s);if(e.has(r)){i.add(r);return}e.add(r)}),[...i]}onLoadSuccess(t,e,i){if(!this.live)return;const s=i.groupLevelInfo;if(this.store.setStoreInfo(s),this.getRowIdFunc!=null){const o=this.extractDuplicateIds(i.rowData);if(o.length>0){const a=o.join(", ");console.warn(`AG Grid: Unable to display rows as duplicate row ids (${a}) were returned by the getRowId callback. Please modify the getRowId callback to provide unique ids.`),this.onLoadFailed(t,e);return}}i.pivotResultFields&&this.serverSideRowModel.generateSecondaryColumns(i.pivotResultFields);const r=this.nodesToRefresh.size>0;if(i.rowData.forEach((o,a)=>{var l;const c=t+a,u=this.nodeMap.getBy("index",c);if((l=u==null?void 0:u.node)!=null&&l.stub){this.createRowAtIndex(c,o);return}if(u&&this.doesNodeMatch(o,u.node)){this.blockUtils.updateDataIntoRowNode(u.node,o),this.nodesToRefresh.delete(u.node),u.node.__needsRefreshWhenVisible=!1;return}this.createRowAtIndex(c,o)}),i.rowCount!=null&&i.rowCount!==-1)this.numberOfRows=i.rowCount,this.isLastRowKnown=!0;else if(e>i.rowData.length)this.numberOfRows=t+i.rowData.length,this.isLastRowKnown=!0;else if(!this.isLastRowKnown){const o=t+i.rowData.length+1;o>this.numberOfRows&&(this.numberOfRows=o)}this.isLastRowKnown&&this.nodeMap.filter(a=>a.index>=this.numberOfRows).forEach(a=>this.destroyRowAtIndex(a.index)),this.fireStoreUpdatedEvent();const n=this.nodesToRefresh.size===0;r&&n&&this.fireRefreshFinishedEvent()}fireRefreshFinishedEvent(){this.nodesToRefresh.size===0&&(this.removedNodeCache.forEach(e=>{this.blockUtils.destroyRowNode(e)}),this.removedNodeCache=new Map,this.store.fireRefreshFinishedEvent())}isStoreFullyLoaded(){const t=this.isLastRowKnown,e=this.nodeMap.getSize()===this.numberOfRows;if(!t||!e||this.nodesToRefresh.size>0)return;let i=-1;return this.nodeMap.find(r=>(i+=1,!!(r.index!==i||r.node.__needsRefreshWhenVisible||r.node.stub)))==null}isLastRowIndexKnown(){return this.isLastRowKnown}onLoadFailed(t,e){var i;if(!this.live)return;const s=this.nodesToRefresh.size>0;for(let n=t;n<t+e&&n<this.getRowCount();n++){let{node:o}=(i=this.nodeMap.getBy("index",n))!=null?i:{};o&&this.nodesToRefresh.delete(o),(!o||!o.stub)&&(o&&!o.stub&&this.destroyRowAtIndex(n),o=this.createRowAtIndex(n)),o.__needsRefreshWhenVisible=!1,o.failedLoad=!0}const r=this.nodesToRefresh.size===0;s&&r&&this.fireRefreshFinishedEvent(),this.fireStoreUpdatedEvent()}markNodesForRefresh(){this.nodeMap.forEach(t=>{t.node.stub&&!t.node.failedLoad||this.nodesToRefresh.add(t.node)}),this.lazyBlockLoadingService.queueLoadCheck(),this.isLastRowKnown&&this.numberOfRows===0&&(this.numberOfRows=1,this.isLastRowKnown=!1,this.fireStoreUpdatedEvent())}isNodeInCache(t){return!!this.nodeMap.getBy("id",t)}fireStoreUpdatedEvent(){this.live&&this.store.fireStoreUpdatedEvent()}getRowId(t){if(this.getRowIdFunc==null)return null;const{level:e}=this.store.getRowDetails(),i=this.store.getParentNode().getGroupKeys(),s=this.getRowIdFunc({data:t,parentKeys:i.length>0?i:void 0,level:e});return String(s)}getOrderedNodeMap(){const t={};return this.nodeMap.forEach(e=>t[e.index]=e),t}clearDisplayIndexes(){this.nodeDisplayIndexMap.clear()}clientSideSortRows(){const t=this.sortController.getSortOptions();if(!t.some(r=>r.sort!=null))return;const i=new Array(this.nodeMap.getSize());this.nodeMap.forEach(r=>i[r.index]=r.node),this.nodeMap.clear(),this.rowNodeSorter.doFullSort(i,t).forEach((r,n)=>{this.nodeMap.set({id:r.id,node:r,index:n})})}updateRowNodes(t){if(this.getRowIdFunc==null)throw new Error("AG Grid: Transactions can only be applied when row ids are supplied.");const e=[];return t.forEach(i=>{const s=this.getRowId(i),r=this.nodeMap.getBy("id",s);r&&(this.blockUtils.updateDataIntoRowNode(r.node,i),e.push(r.node))}),e}insertRowNodes(t,e){const i=this.store.getRowCount()-(this.store.getParentNode().sibling?1:0),s=e==null&&this.isLastRowKnown?i:e;if(s==null||i<s)return[];if(this.getRowIdFunc==null)throw new Error("AG Grid: Transactions can only be applied when row ids are supplied.");const r={};t.forEach(l=>{const c=this.getRowId(l);c&&this.isNodeInCache(c)||(r[c]=l)});const n=Object.values(r);let o=n.length;if(o===0)return[];const a=this.nodeMap.filter(l=>l.index>=s);return a.forEach(l=>this.nodeMap.delete(l)),a.forEach(l=>{this.nodeMap.set({node:l.node,index:l.index+o,id:l.id})}),this.numberOfRows+=o,n.map((l,c)=>this.createRowAtIndex(s+c,l))}removeRowNodes(t){if(this.getRowIdFunc==null)throw new Error("AG Grid: Transactions can only be applied when row ids are supplied.");const e=[],i=[];let s=0;const r=[...t],n=this.getOrderedNodeMap();let o=-1;for(let a in n){o+=1;const l=n[a],c=r.findIndex(d=>d===l.id);if(c!==-1){r.splice(c,1),this.destroyRowAtIndex(Number(a)),e.push(l.node),s+=1;continue}if(s===0)continue;const u=Number(a);o!==u&&i.push(l.node),this.nodeMap.delete(n[a]),this.nodeMap.set({id:l.id,node:l.node,index:u-s})}return this.numberOfRows-=this.isLastRowIndexKnown()?t.length:s,r.length>0&&i.length>0&&(i.forEach(a=>a.__needsRefreshWhenVisible=!0),this.lazyBlockLoadingService.queueLoadCheck()),e}getBlockSize(){return this.storeParams.cacheBlockSize||yc.DEFAULT_BLOCK_SIZE}getBlockStartIndex(t){const e=this.getBlockSize();return t-t%e}getBlockBounds(t){const e=this.getBlockStartIndex(t),i=this.getBlockSize();return[e,e+i]}};Ne([W("gridApi")],so.prototype,"api",2);Ne([W("ssrmBlockUtils")],so.prototype,"blockUtils",2);Ne([W("focusService")],so.prototype,"focusService",2);Ne([W("ssrmNodeManager")],so.prototype,"nodeManager",2);Ne([W("rowModel")],so.prototype,"serverSideRowModel",2);Ne([W("rowNodeSorter")],so.prototype,"rowNodeSorter",2);Ne([W("sortController")],so.prototype,"sortController",2);Ne([W("lazyBlockLoadingService")],so.prototype,"lazyBlockLoadingService",2);Ne([de],so.prototype,"init",1);Ne([Hi],so.prototype,"destroyRowNodes",1);var ga=class extends ye{constructor(t,e,i){super(),this.idSequence=new pr,this.ssrmParams=t,this.parentRowNode=i,this.storeParams=e,this.level=i.level+1,this.group=t.rowGroupCols?this.level<t.rowGroupCols.length:!1,this.leafGroup=t.rowGroupCols?this.level===t.rowGroupCols.length-1:!1,this.info={}}init(){var t;let e=1;if(this.level===0&&(e=(t=this.storeUtils.getServerSideInitialRowCount())!=null?t:1,this.eventService.dispatchEventOnce({type:K.EVENT_ROW_COUNT_READY})),this.cache=this.createManagedBean(new so(this,e,this.storeParams)),!this.gos.get("treeData")&&this.group){const s=this.ssrmParams.rowGroupCols[this.level];this.groupField=s.field,this.rowGroupColumn=this.columnModel.getRowGroupColumns()[this.level]}}destroyRowNodes(){this.displayIndexStart=void 0,this.displayIndexEnd=void 0,this.destroyBean(this.cache)}applyRowData(t,e,i){this.cache.onLoadSuccess(e,i,t)}applyTransaction(t){var e,i,s;const r=this.gos.getCallback("getRowId");if(!r)return console.warn("AG Grid: getRowId callback must be implemented for transactions to work. Transaction was ignored."),{status:Mr.Cancelled};const n=this.gos.getCallback("isApplyServerSideTransaction");if(n){const p={transaction:t,parentNode:this.parentRowNode,groupLevelInfo:this.info};if(!n(p))return{status:Mr.Cancelled}}const o=this.cache.isStoreFullyLoaded();let a;(e=t.update)!=null&&e.length&&(a=this.cache.updateRowNodes(t.update));let l;if((i=t.add)!=null&&i.length){let p=t.addIndex;p!=null&&p<0&&(p=void 0),l=this.cache.insertRowNodes(t.add,p)}let c;if((s=t.remove)!=null&&s.length){const p=t.remove.map(m=>r({level:this.level,parentKeys:this.parentRowNode.getGroupKeys(),data:m})),f=[...new Set(p)];c=this.cache.removeRowNodes(f)}const u=this.gos.get("serverSideEnableClientSideSort"),d=(a==null?void 0:a.length)||(l==null?void 0:l.length);return o&&u&&d&&this.cache.clientSideSortRows(),this.updateSelectionAfterTransaction(a,c),{status:Mr.Applied,update:a,add:l,remove:c}}updateSelectionAfterTransaction(t,e){const i=[];t==null||t.forEach(s=>{s.isSelected()&&!s.selectable&&i.push(s)}),e==null||e.forEach(s=>{s.isSelected()&&i.push(s)}),i.length&&this.selectionService.setNodesSelected({newValue:!1,clearSelection:!1,nodes:i,source:"rowDataChanged"})}clearDisplayIndexes(){this.displayIndexStart=void 0,this.displayIndexEnd=void 0,this.cache.getNodes().forEach(t=>this.blockUtils.clearDisplayIndex(t.node)),this.parentRowNode.sibling&&this.blockUtils.clearDisplayIndex(this.parentRowNode.sibling),this.cache.clearDisplayIndexes()}getDisplayIndexStart(){return this.displayIndexStart}getDisplayIndexEnd(){return this.displayIndexEnd}getRowCount(){return this.parentRowNode.sibling?this.cache.getRowCount()+1:this.cache.getRowCount()}setRowCount(t,e){this.cache.setRowCount(t,e)}isDisplayIndexInStore(t){return this.cache.getRowCount()===0?!1:this.displayIndexStart<=t&&t<this.getDisplayIndexEnd()}setDisplayIndexes(t,e){this.displayIndexStart=t.peek(),this.topPx=e.value;const i=this.parentRowNode.level>-1&&this.gos.getGroupTotalRowCallback()({node:this.parentRowNode});i||this.parentRowNode.destroyFooter(),i==="top"&&(this.parentRowNode.createFooter(),this.blockUtils.setDisplayIndex(this.parentRowNode.sibling,t,e)),this.cache.setDisplayIndexes(t,e),i==="bottom"&&(this.parentRowNode.createFooter(),this.blockUtils.setDisplayIndex(this.parentRowNode.sibling,t,e)),this.displayIndexEnd=t.peek(),this.heightPx=e.value-this.topPx}forEachStoreDeep(t,e=new pr){t(this,e.next()),this.cache.getNodes().forEach(i=>{const s=i.node.childStore;s&&s.forEachStoreDeep(t,e)})}forEachNodeDeep(t,e=new pr){this.cache.getNodes().forEach(i=>{t(i.node,e.next());const s=i.node.childStore;s&&s.forEachNodeDeep(t,e)})}forEachNodeDeepAfterFilterAndSort(t,e=new pr,i=!1){const s=this.parentRowNode.level>-1&&this.gos.getGroupTotalRowCallback()({node:this.parentRowNode});s==="top"&&t(this.parentRowNode.sibling,e.next());const r=this.cache.getOrderedNodeMap();for(let n in r){const o=r[n];t(o.node,e.next());const a=o.node.childStore;a&&a.forEachNodeDeepAfterFilterAndSort(t,e,i)}s==="bottom"&&t(this.parentRowNode.sibling,e.next())}retryLoads(){this.cache.getNodes().forEach(({node:t})=>{t.failedLoad&&(t.failedLoad=!1,t.__needsRefreshWhenVisible=!0,t.stub=!0)}),this.forEachChildStoreShallow(t=>t.retryLoads()),this.fireStoreUpdatedEvent()}getRowUsingDisplayIndex(t){return this.parentRowNode.sibling&&t===this.parentRowNode.sibling.rowIndex?this.parentRowNode.sibling:this.cache.getRowByDisplayIndex(t)}getRowBounds(t){var e;if(!this.isDisplayIndexInStore(t))return null;const i=this.cache.getNodeCachedByDisplayIndex(t);if(i){const l=this.blockUtils.extractRowBounds(i,t);if(l)return l}const{previousNode:s,nextNode:r}=(e=this.cache.getSurroundingNodesByDisplayIndex(t))!=null?e:{};if(s){const l=this.blockUtils.extractRowBounds(s.node,t);if(l!=null)return l}const n=this.gos.getRowHeightAsNumber();if(r){const l=(r.node.rowIndex-t)*n;return{rowTop:r.node.rowTop-l,rowHeight:n}}const o=this.topPx+this.heightPx,a=(this.getDisplayIndexEnd()-t)*n;return{rowTop:o-a,rowHeight:n}}isPixelInRange(t){return t>=this.topPx&&t<this.topPx+this.heightPx}getRowIndexAtPixel(t){if(t<this.topPx)return this.getDisplayIndexStart();if(t>=this.topPx+this.heightPx)return this.getDisplayIndexEnd()-1;if(this.parentRowNode.sibling&&t>this.parentRowNode.sibling.rowTop&&t<this.parentRowNode.sibling.rowTop+this.parentRowNode.sibling.rowHeight)return this.parentRowNode.sibling.rowIndex;let e=Number.MAX_SAFE_INTEGER,i=null,s=Number.MAX_SAFE_INTEGER,r=null;if(this.cache.getNodes().forEach(({node:l})=>{const c=Math.abs(t-l.rowTop);if(l.rowTop<t){c<e&&(e=c,i=l);return}c<s&&(s=c,r=l)}),i=i,r=r,i){const l=this.blockUtils.getIndexAtPixel(i,t);if(l!=null)return l}const n=this.gos.getRowHeightAsNumber();if(r){const l=r.rowTop,c=Math.ceil((l-t)/n);return r.rowIndex-c}const o=this.topPx+this.heightPx,a=Math.floor((o-t)/n);return this.getDisplayIndexEnd()-a}getChildStore(t){return this.storeUtils.getChildStore(t,this,e=>{const i=this.cache.getNodes().find(s=>s.node.key==e);return i?i.node:null})}forEachChildStoreShallow(t){this.cache.getNodes().forEach(({node:e})=>{e.childStore&&t(e.childStore)})}refreshAfterSort(t){if(this.storeUtils.isServerSideSortAllLevels()||this.storeUtils.isServerRefreshNeeded(this.parentRowNode,this.ssrmParams.rowGroupCols,t)){const i=this.cache.isStoreFullyLoaded(),s=this.gos.get("serverSideEnableClientSideSort");if(!(i&&s)){const n=this.cache.getRowCount();this.destroyBean(this.cache),this.cache=this.createManagedBean(new so(this,n,this.storeParams));return}this.cache.clientSideSortRows()}this.forEachChildStoreShallow(i=>i.refreshAfterSort(t))}refreshAfterFilter(t){if(!this.storeUtils.isServerSideOnlyRefreshFilteredGroups()||this.storeUtils.isServerRefreshNeeded(this.parentRowNode,this.ssrmParams.rowGroupCols,t)){this.refreshStore(!0);return}this.forEachChildStoreShallow(i=>i.refreshAfterFilter(t))}refreshStore(t){if(t){this.destroyBean(this.cache),this.cache=this.createManagedBean(new so(this,1,this.storeParams)),this.fireStoreUpdatedEvent();return}this.cache.markNodesForRefresh()}getTopLevelRowDisplayedIndex(t){const e=this.cache.getDisplayIndexFromStoreIndex(t);return e??t}isLastRowIndexKnown(){return this.cache.isLastRowIndexKnown()}getRowNodesInRange(t,e){return Q.missing(t),this.cache.getNodes().filter(({node:i})=>i.rowIndex>=t.rowIndex&&i.rowIndex<=e.rowIndex).map(({node:i})=>i)}addStoreStates(t){t.push({suppressInfiniteScroll:!1,route:this.parentRowNode.getGroupKeys(),rowCount:this.getRowCount(),lastRowIndexKnown:this.isLastRowIndexKnown(),info:this.info,maxBlocksInCache:this.storeParams.maxBlocksInCache,cacheBlockSize:this.storeParams.cacheBlockSize}),this.forEachChildStoreShallow(e=>e.addStoreStates(t))}getIdSequence(){return this.idSequence}getParentNode(){return this.parentRowNode}getRowDetails(){return{field:this.groupField,group:this.group,leafGroup:this.leafGroup,level:this.level,parent:this.parentRowNode,rowGroupColumn:this.rowGroupColumn}}getSsrmParams(){return this.ssrmParams}setStoreInfo(t){t&&Object.assign(this.info,t)}fireStoreUpdatedEvent(){const t={type:K.EVENT_STORE_UPDATED};this.eventService.dispatchEvent(t)}fireRefreshFinishedEvent(){const t={type:K.EVENT_STORE_REFRESHED,route:this.parentRowNode.getRoute()};this.eventService.dispatchEvent(t)}getBlockStates(){return this.cache.getBlockStates()}getStoreBounds(){return{topPx:this.topPx,heightPx:this.heightPx}}getCache(){return this.cache}};Ne([W("ssrmBlockUtils")],ga.prototype,"blockUtils",2);Ne([W("ssrmStoreUtils")],ga.prototype,"storeUtils",2);Ne([W("columnModel")],ga.prototype,"columnModel",2);Ne([W("selectionService")],ga.prototype,"selectionService",2);Ne([de],ga.prototype,"init",1);Ne([Hi],ga.prototype,"destroyRowNodes",1);var Nn=class extends ye{constructor(){super(...arguments),this.onRowHeightChanged_debounced=Q.debounce(this.onRowHeightChanged.bind(this),100),this.pauseStoreUpdateListening=!1,this.started=!1,this.managingPivotResultColumns=!1}ensureRowHeightsValid(){return!1}start(){this.started=!0,this.updateDatasource()}destroyDatasource(){this.datasource&&(this.datasource.destroy&&this.datasource.destroy(),this.rowRenderer.datasourceChanged(),this.datasource=void 0)}addEventListeners(){this.addManagedListener(this.eventService,K.EVENT_NEW_COLUMNS_LOADED,this.onColumnEverything.bind(this)),this.addManagedListener(this.eventService,K.EVENT_STORE_UPDATED,this.onStoreUpdated.bind(this));const t=this.resetRootStore.bind(this);this.addManagedListener(this.eventService,K.EVENT_COLUMN_VALUE_CHANGED,t),this.addManagedListener(this.eventService,K.EVENT_COLUMN_PIVOT_CHANGED,t),this.addManagedListener(this.eventService,K.EVENT_COLUMN_ROW_GROUP_CHANGED,t),this.addManagedListener(this.eventService,K.EVENT_COLUMN_PIVOT_MODE_CHANGED,t),this.addManagedPropertyListeners(["masterDetail","treeData","removePivotHeaderRowWhenSingleValueColumn","suppressServerSideInfiniteScroll","cacheBlockSize"],t),this.addManagedPropertyListener("rowHeight",()=>this.resetRowHeights()),this.verifyProps(),this.addManagedPropertyListener("serverSideDatasource",()=>this.updateDatasource())}updateDatasource(){const t=this.gos.get("serverSideDatasource");t&&this.setDatasource(t)}verifyProps(){this.gos.exists("initialGroupOrderComparator")&&Q.warnOnce("initialGroupOrderComparator cannot be used with Server Side Row Model."),this.gos.isRowSelection()&&!this.gos.exists("getRowId")&&Q.warnOnce("getRowId callback must be provided for Server Side Row Model selection to work correctly.")}setDatasource(t){this.started&&(this.destroyDatasource(),this.datasource=t,this.resetRootStore())}applyRowData(t,e,i){const s=this.getRootStore();if(!s)return;const r=s.getChildStore(i);r&&(r instanceof ga?r.applyRowData(t,e,t.rowData.length):r instanceof Br&&r.processServerResult(t))}isLastRowIndexKnown(){const t=this.getRootStore();return t?t.isLastRowIndexKnown():!1}onColumnEverything(){if(!this.storeParams){this.resetRootStore();return}const t=this.columnsToValueObjects(this.columnModel.getRowGroupColumns()),e=this.columnsToValueObjects(this.columnModel.getValueColumns()),i=this.columnsToValueObjects(this.columnModel.getPivotColumns()),s=c=>{const u={};c.oldCols.forEach(p=>u[p.id]=p);const d=c.newCols.every(p=>{const f=u[p.id];return f&&delete u[p.id],f&&f.field===p.field&&f.aggFunc===p.aggFunc}),h=!c.allowRemovedColumns&&!!Object.values(u).length;return d&&!h},r=!Q.jsonEquals(this.storeParams.sortModel,this.sortController.getSortModel()),n=!s({oldCols:this.storeParams.rowGroupCols,newCols:t}),o=!s({oldCols:this.storeParams.pivotCols,newCols:i}),a=!!(t!=null&&t.length)&&!s({oldCols:this.storeParams.valueCols,newCols:e,allowRemovedColumns:!0});if(r||n||o||a)this.resetRootStore();else{const c=this.createStoreParams();this.storeParams.rowGroupCols=c.rowGroupCols,this.storeParams.pivotCols=c.pivotCols,this.storeParams.valueCols=c.valueCols}}destroyRootStore(){!this.rootNode||!this.rootNode.childStore||(this.rootNode.childStore=this.destroyBean(this.rootNode.childStore),this.nodeManager.clear())}refreshAfterSort(t,e){this.storeParams&&(this.storeParams.sortModel=t);const i=this.getRootStore();i&&(i.refreshAfterSort(e),this.onStoreUpdated())}generateSecondaryColumns(t){if(!this.pivotColDefService){vt.__assertRegistered(Ut.RowGroupingModule,"pivotResultFields",this.context.getGridId());return}const e=this.pivotColDefService.createColDefsFromFields(t);this.managingPivotResultColumns=!0,this.columnModel.setSecondaryColumns(e,"rowModelUpdated")}resetRowHeights(){const t=this.resetRowHeightsForAllRowNodes(),e=this.gos.getRowHeightForNode(this.rootNode);if(this.rootNode.setRowHeight(e.height,e.estimated),this.rootNode.sibling){const i=this.gos.getRowHeightForNode(this.rootNode.sibling);this.rootNode.sibling.setRowHeight(i.height,i.estimated)}t&&this.onRowHeightChanged()}resetRowHeightsForAllRowNodes(){let t=!1;return this.forEachNode(e=>{const i=this.gos.getRowHeightForNode(e);e.setRowHeight(i.height,i.estimated);const s=e.detailNode;if(s){const r=this.gos.getRowHeightForNode(s);s.setRowHeight(r.height,r.estimated)}if(e.sibling){const r=this.gos.getRowHeightForNode(e.sibling);s.setRowHeight(r.height,r.estimated)}t=!0}),t}resetRootStore(){this.destroyRootStore(),this.rootNode=new Tt(this.beans),this.rootNode.group=!0,this.rootNode.level=-1,this.datasource&&(this.storeParams=this.createStoreParams(),this.rootNode.childStore=this.createBean(this.storeFactory.createStore(this.storeParams,this.rootNode)),this.updateRowIndexesAndBounds()),this.managingPivotResultColumns&&(this.columnModel.setSecondaryColumns(null,"api"),this.managingPivotResultColumns=!1),this.dispatchModelUpdated(!0)}columnsToValueObjects(t){return t.map(e=>({id:e.getId(),aggFunc:e.getAggFunc(),displayName:this.columnModel.getDisplayNameForColumn(e,"model"),field:e.getColDef().field}))}createStoreParams(){const t=this.columnsToValueObjects(this.columnModel.getRowGroupColumns()),e=this.columnsToValueObjects(this.columnModel.getValueColumns()),i=this.columnsToValueObjects(this.columnModel.getPivotColumns()),s=this.gos.isGetRowHeightFunction();return{valueCols:e,rowGroupCols:t,pivotCols:i,pivotMode:this.columnModel.isPivotMode(),filterModel:this.filterManager.isAdvancedFilterEnabled()?this.filterManager.getAdvancedFilterModel():this.filterManager.getFilterModel(),sortModel:this.sortController.getSortModel(),datasource:this.datasource,lastAccessedSequence:new pr,dynamicRowHeight:s}}getParams(){return this.storeParams}dispatchModelUpdated(t=!1){const e={type:K.EVENT_MODEL_UPDATED,animate:!t,keepRenderedRows:!t,newPage:!1,newData:!1};this.eventService.dispatchEvent(e)}onStoreUpdated(){this.pauseStoreUpdateListening||(this.updateRowIndexesAndBounds(),this.dispatchModelUpdated())}onRowHeightChangedDebounced(){this.onRowHeightChanged_debounced()}onRowHeightChanged(){this.updateRowIndexesAndBounds(),this.dispatchModelUpdated()}updateRowIndexesAndBounds(){const t=this.getRootStore();t&&t.setDisplayIndexes(new pr,{value:0})}retryLoads(){const t=this.getRootStore();t&&(t.retryLoads(),this.onStoreUpdated())}getRow(t){const e=this.getRootStore();if(e)return e.getRowUsingDisplayIndex(t)}setPaused(t){this.pauseStoreUpdateListening=t}expandAll(t){this.pauseStoreUpdateListening=!0,this.forEachNode(e=>{e.stub||e.hasChildren()&&e.setExpanded(t)}),this.pauseStoreUpdateListening=!1,this.onStoreUpdated()}refreshAfterFilter(t,e){this.storeParams&&(this.storeParams.filterModel=t);const i=this.getRootStore();i&&(i.refreshAfterFilter(e),this.onStoreUpdated())}getRootStore(){if(this.rootNode&&this.rootNode.childStore)return this.rootNode.childStore}getRowCount(){const t=this.getRootStore();return t?t.getDisplayIndexEnd():0}getTopLevelRowCount(){const t=this.getRootStore();return t?t.getRowCount():1}getTopLevelRowDisplayedIndex(t){const e=this.getRootStore();return e?e.getTopLevelRowDisplayedIndex(t):t}getRowBounds(t){const e=this.getRootStore();return e?e.getRowBounds(t):{rowTop:0,rowHeight:this.gos.getRowHeightAsNumber()}}getBlockStates(){const t=this.getRootStore();if(!t)return;const e={};return t.forEachStoreDeep(i=>{if(i instanceof Br){const{id:s,state:r}=i.getBlockStateJson();e[s]=r}else if(i instanceof ga)Object.entries(i.getBlockStates()).forEach(([s,r])=>{e[s]=r});else throw new Error("AG Grid: Unsupported store type")}),e}getRowIndexAtPixel(t){const e=this.getRootStore();return t<=0||!e?0:e.getRowIndexAtPixel(t)}isEmpty(){return!1}isRowsToRender(){return this.getRootStore()!=null&&this.getRowCount()>0}getType(){return"serverSide"}forEachNode(t){const e=this.getRootStore();e&&e.forEachNodeDeep(t)}forEachNodeAfterFilterAndSort(t,e=!1){const i=this.getRootStore();i&&i.forEachNodeDeepAfterFilterAndSort(t,void 0,e)}executeOnStore(t,e){if(!this.started)return!1;const i=this.getRootStore();if(!i)return!0;const s=i.getChildStore(t);return s&&e(s),!0}refreshStore(t={}){const e=t.route?t.route:[];this.executeOnStore(e,i=>i.refreshStore(t.purge==!0))}getStoreState(){const t=[],e=this.getRootStore();return e&&e.addStoreStates(t),t}getNodesInRangeForSelection(t,e){if(!Q.exists(t))return[];if(!e)return[t];const i=t.rowIndex,s=e.rowIndex;if(i===null||s===null)return[t];const r=[],[n,o]=[i,s].sort((a,l)=>a-l);return this.forEachNode(a=>{const l=a.rowIndex;l==null||a.stub||l>=n&&l<=o&&r.push(a)}),r.length!==o-n+1?[t]:r}getRowNode(t){let e;return this.forEachNode(i=>{i.id===t&&(e=i),i.detailNode&&i.detailNode.id===t&&(e=i.detailNode)}),e}isRowPresent(t){return!!this.getRowNode(t.id)}setRowCount(t,e){const i=this.getRootStore();if(i){if(i instanceof ga){i.setRowCount(t,e);return}console.error("AG Grid: Infinite scrolling must be enabled in order to set the row count.")}}};Ne([W("columnModel")],Nn.prototype,"columnModel",2);Ne([W("filterManager")],Nn.prototype,"filterManager",2);Ne([W("sortController")],Nn.prototype,"sortController",2);Ne([W("rowRenderer")],Nn.prototype,"rowRenderer",2);Ne([W("ssrmNodeManager")],Nn.prototype,"nodeManager",2);Ne([W("ssrmStoreFactory")],Nn.prototype,"storeFactory",2);Ne([W("beans")],Nn.prototype,"beans",2);Ne([Vt("pivotColDefService")],Nn.prototype,"pivotColDefService",2);Ne([Hi],Nn.prototype,"destroyDatasource",1);Ne([de],Nn.prototype,"addEventListeners",1);Ne([Hi],Nn.prototype,"destroyRootStore",1);Nn=Ne([Me("rowModel")],Nn);var Dg=class extends ye{loadFromDatasource(t){const{storeParams:e,parentBlock:i,parentNode:s}=t,r=s.getGroupKeys();if(!e.datasource)return;const n={startRow:t.startRow,endRow:t.endRow,rowGroupCols:e.rowGroupCols,valueCols:e.valueCols,pivotCols:e.pivotCols,pivotMode:e.pivotMode,groupKeys:r,filterModel:e.filterModel,sortModel:e.sortModel},o=this.gos.addGridCommonParams({success:t.success,fail:t.fail,request:n,parentNode:t.parentNode});window.setTimeout(()=>{if(!e.datasource||!i.isAlive()){t.fail();return}e.datasource.getRows(o)},0)}getChildStore(t,e,i){if(Q.missingOrEmpty(t))return e;const s=t[0],r=i(s);if(r){if(t.length===1&&!r.childStore){const a=this.serverSideRowModel.getParams();r.childStore=this.createBean(this.storeFactory.createStore(a,r))}const n=t.slice(1,t.length),o=r.childStore;return o?o.getChildStore(n):null}return null}isServerRefreshNeeded(t,e,i){if(i.valueColChanged||i.secondaryColChanged)return!0;const s=t.level+1;if(!(s<e.length))return!0;const o=e[s].id;return i.changedColumns.indexOf(o)>-1?!0:this.columnModel.getAllGridColumns().filter(u=>u.getColDef().showRowGroup&&i.changedColumns.includes(u.getId())).map(u=>u.getColDef().showRowGroup).some(u=>u===!0||u===o)}getServerSideInitialRowCount(){return this.gos.get("serverSideInitialRowCount")}assertRowModelIsServerSide(t){return this.gos.isRowModelType("serverSide")?!0:(Q.warnOnce(`The '${t}' property can only be used with the Server Side Row Model.`),!1)}assertNotTreeData(t){return this.gos.get("treeData")?(Q.warnOnce(`The '${t}' property cannot be used while using tree data.`),!1):!0}isServerSideSortAllLevels(){return this.gos.get("serverSideSortAllLevels")&&this.assertRowModelIsServerSide("serverSideSortAllLevels")}isServerSideOnlyRefreshFilteredGroups(){return this.gos.get("serverSideOnlyRefreshFilteredGroups")&&this.assertRowModelIsServerSide("serverSideOnlyRefreshFilteredGroups")}isServerSideSortOnServer(){return this.gos.get("serverSideSortOnServer")&&this.assertRowModelIsServerSide("serverSideSortOnServer")&&this.assertNotTreeData("serverSideSortOnServer")}isServerSideFilterOnServer(){return this.gos.get("serverSideFilterOnServer")&&this.assertRowModelIsServerSide("serverSideFilterOnServer")&&this.assertNotTreeData("serverSideFilterOnServer")}};Ne([W("columnModel")],Dg.prototype,"columnModel",2);Ne([W("rowModel")],Dg.prototype,"serverSideRowModel",2);Ne([W("ssrmStoreFactory")],Dg.prototype,"storeFactory",2);Dg=Ne([Me("ssrmStoreUtils")],Dg);var nle="ag-Grid-MissingKey",$u=class extends ye{createRowNode(t){const e=new Tt(this.beans),i=t.rowHeight!=null?t.rowHeight:this.gos.getRowHeightAsNumber();return e.setRowHeight(i),e.group=t.group,e.leafGroup=t.leafGroup,e.level=t.level,e.uiLevel=t.level,e.parent=t.parent,e.stub=!0,e.__needsRefreshWhenVisible=!1,e.group&&(e.expanded=!1,e.field=t.field,e.rowGroupColumn=t.rowGroupColumn),e}destroyRowNodes(t){t&&t.forEach(e=>this.destroyRowNode(e))}destroyRowNode(t,e=!1){t.childStore&&!e&&(this.destroyBean(t.childStore),t.childStore=null),t.sibling&&!t.footer&&this.destroyRowNode(t.sibling,!1),t.clearRowTopAndRowIndex(),t.id!=null&&this.nodeManager.removeNode(t)}setTreeGroupInfo(t){t.updateHasChildren();const e=this.gos.get("getServerSideGroupKey");t.hasChildren()&&e!=null&&(t.key=e(t.data)),!t.hasChildren()&&t.childStore!=null&&(this.destroyBean(t.childStore),t.childStore=null,t.expanded=!1)}setRowGroupInfo(t){t.key=this.valueService.getValue(t.rowGroupColumn,t),(t.key===null||t.key===void 0)&&Q.doOnce(()=>{console.warn("AG Grid: null and undefined values are not allowed for server side row model keys"),t.rowGroupColumn&&console.warn(`column = ${t.rowGroupColumn.getId()}`),console.warn("data is ",t.data)},"ServerSideBlock-CannotHaveNullOrUndefinedForKey"),this.beans.gos.getGroupTotalRowCallback()({node:t})&&(t.createFooter(),t.sibling&&(t.sibling.uiLevel=t.uiLevel+1))}setMasterDetailInfo(t){const e=this.gos.get("isRowMaster");e!=null?t.master=e(t.data):t.master=!0}updateDataIntoRowNode(t,e){t.updateData(e),this.gos.get("treeData")?(this.setTreeGroupInfo(t),this.setChildCountIntoRowNode(t)):t.group?(this.setChildCountIntoRowNode(t),t.footer||(this.beans.gos.getGroupTotalRowCallback()({node:t})?t.sibling?t.sibling.updateData(e):t.createFooter():t.sibling&&t.destroyFooter())):this.gos.get("masterDetail")}setDataIntoRowNode(t,e,i,s){var r;t.stub=!1;const n=this.gos.get("treeData");Q.exists(e)?(t.setDataAndId(e,i),n?this.setTreeGroupInfo(t):t.group?this.setRowGroupInfo(t):this.gos.get("masterDetail")&&this.setMasterDetailInfo(t)):(t.setDataAndId(void 0,void 0),t.key=null),(n||t.group)&&(this.setGroupDataIntoRowNode(t),this.setChildCountIntoRowNode(t)),Q.exists(e)&&(t.setRowHeight(this.gos.getRowHeightForNode(t,!1,s).height),(r=t.sibling)==null||r.setRowHeight(this.gos.getRowHeightForNode(t.sibling,!1,s).height))}setChildCountIntoRowNode(t){const e=this.gos.get("getChildCount");e&&t.setAllChildrenCount(e(t.data))}setGroupDataIntoRowNode(t){const e=this.columnModel.getGroupDisplayColumns(),i=this.gos.get("treeData");e.forEach(s=>{if(t.groupData==null&&(t.groupData={}),i)t.groupData[s.getColId()]=t.key;else if(s.isRowGroupDisplayed(t.rowGroupColumn.getId())){const r=this.valueService.getValue(t.rowGroupColumn,t);t.groupData[s.getColId()]=r}})}clearDisplayIndex(t){t.clearRowTopAndRowIndex(),t.hasChildren()&&Q.exists(t.childStore)&&t.childStore.clearDisplayIndexes(),t.master&&t.detailNode&&t.detailNode.clearRowTopAndRowIndex()}setDisplayIndex(t,e,i){if(t.setRowIndex(e.next()),t.setRowTop(i.value),i.value+=t.rowHeight,t.footer)return;if(t.master&&(t.expanded&&t.detailNode?(t.detailNode.setRowIndex(e.next()),t.detailNode.setRowTop(i.value),i.value+=t.detailNode.rowHeight):t.detailNode&&t.detailNode.clearRowTopAndRowIndex()),t.hasChildren()&&Q.exists(t.childStore)){const n=t.childStore;t.expanded?n.setDisplayIndexes(e,i):n.clearDisplayIndexes()}}binarySearchForDisplayIndex(t,e){let i=0,s=e.length-1;if(Q.missing(s)||Q.missing(i)){console.warn(`AG Grid: error: topPointer = ${s}, bottomPointer = ${i}`);return}for(;;){const r=Math.floor((i+s)/2),n=e[r];if(n.rowIndex===t)return n;const o=n.master&&n.expanded,a=n.detailNode;if(o&&a&&a.rowIndex===t)return n.detailNode;const l=n.childStore;if(n.expanded&&l&&l.isDisplayIndexInStore(t))return l.getRowUsingDisplayIndex(t);if(n.rowIndex<t)i=r+1;else if(n.rowIndex>t)s=r-1;else{console.warn(`AG Grid: error: unable to locate rowIndex = ${t} in cache`);return}}}extractRowBounds(t,e){const i=s=>({rowHeight:s.rowHeight,rowTop:s.rowTop});if(t.rowIndex===e)return i(t);if(t.hasChildren()&&t.expanded&&Q.exists(t.childStore)){const s=t.childStore;if(s.isDisplayIndexInStore(e))return s.getRowBounds(e)}else if(t.master&&t.expanded&&Q.exists(t.detailNode)&&t.detailNode.rowIndex===e)return i(t.detailNode)}getIndexAtPixel(t,e){if(t.isPixelInRange(e))return t.rowIndex;const i=t.master&&t.expanded,s=t.detailNode;if(i&&s&&s.isPixelInRange(e))return t.detailNode.rowIndex;if(t.hasChildren()&&t.expanded&&Q.exists(t.childStore)){const r=t.childStore;if(r.isPixelInRange(e))return r.getRowIndexAtPixel(e)}return null}createNodeIdPrefix(t){const e=[];let i=t;for(;i&&i.level>=0;)i.key===""?e.push(nle):e.push(i.key),i=i.parent;if(e.length>0)return e.reverse().join("-")}checkOpenByDefault(t){return this.expansionService.checkOpenByDefault(t)}};Ne([W("valueService")],$u.prototype,"valueService",2);Ne([W("columnModel")],$u.prototype,"columnModel",2);Ne([W("ssrmNodeManager")],$u.prototype,"nodeManager",2);Ne([W("beans")],$u.prototype,"beans",2);Ne([W("expansionService")],$u.prototype,"expansionService",2);$u=Ne([Me("ssrmBlockUtils")],$u);var RS=class{constructor(){this.rowNodes={}}addRowNode(t){const e=t.id;this.rowNodes[e]&&(console.warn(`AG Grid: Duplicate node id ${t.id}. Row ID's are provided via the getRowId() callback. Please modify the getRowId() callback code to provide unique row id values.`),console.warn("first instance",this.rowNodes[e].data),console.warn("second instance",t.data)),this.rowNodes[e]=t}removeNode(t){const e=t.id;this.rowNodes[e]&&(this.rowNodes[e]=void 0)}clear(){this.rowNodes={}}};Ne([Hi],RS.prototype,"clear",1);RS=Ne([Me("ssrmNodeManager")],RS);var Cc=class extends ye{constructor(){super(...arguments),this.asyncTransactions=[]}postConstruct(){this.gos.isRowModelType("serverSide")}applyTransactionAsync(t,e){this.asyncTransactionsTimeout==null&&this.scheduleExecuteAsync(),this.asyncTransactions.push({transaction:t,callback:e})}scheduleExecuteAsync(){const t=this.gos.getAsyncTransactionWaitMillis();this.asyncTransactionsTimeout=window.setTimeout(()=>{this.executeAsyncTransactions()},t)}executeAsyncTransactions(){if(!this.asyncTransactions)return;const t=[],e=[],i=[];let s=!1;if(this.asyncTransactions.forEach(r=>{let n;if(this.serverSideRowModel.executeOnStore(r.transaction.route,l=>{n=l.applyTransaction(r.transaction)})?n==null&&(n={status:Mr.StoreNotFound}):n={status:Mr.StoreNotStarted},e.push(n),n.status==Mr.StoreLoading){i.push(r);return}r.callback&&t.push(()=>r.callback(n)),n.status===Mr.Applied&&(s=!0)}),t.length>0&&window.setTimeout(()=>{t.forEach(r=>r())},0),this.asyncTransactionsTimeout=void 0,this.asyncTransactions=i,s&&(this.valueCache.onDataChanged(),this.eventService.dispatchEvent({type:K.EVENT_STORE_UPDATED})),e.length>0){const r={type:K.EVENT_ASYNC_TRANSACTIONS_FLUSHED,results:e};this.eventService.dispatchEvent(r)}}flushAsyncTransactions(){this.asyncTransactionsTimeout!=null&&clearTimeout(this.asyncTransactionsTimeout),this.executeAsyncTransactions()}applyTransaction(t){let e;if(this.serverSideRowModel.executeOnStore(t.route,s=>{e=s.applyTransaction(t)}))if(e){if(this.valueCache.onDataChanged(),e.remove){const s=e.remove.map(r=>r.id);this.selectionService.deleteSelectionStateFromParent(t.route||[],s)}return this.eventService.dispatchEvent({type:K.EVENT_STORE_UPDATED}),e}else return{status:Mr.StoreNotFound};else return{status:Mr.StoreNotStarted}}};Ne([W("rowNodeBlockLoader")],Cc.prototype,"rowNodeBlockLoader",2);Ne([W("valueCache")],Cc.prototype,"valueCache",2);Ne([W("rowModel")],Cc.prototype,"serverSideRowModel",2);Ne([W("rowRenderer")],Cc.prototype,"rowRenderer",2);Ne([W("selectionService")],Cc.prototype,"selectionService",2);Ne([de],Cc.prototype,"postConstruct",1);Cc=Ne([Me("ssrmTransactionManager")],Cc);var Bh=class extends ye{postConstruct(){this.gos.isRowModelType("serverSide")&&this.addManagedListener(this.eventService,K.EVENT_ROW_GROUP_OPENED,this.onRowGroupOpened.bind(this))}onRowGroupOpened(t){const e=t.node;if(e.expanded){if(e.master)this.createDetailNode(e);else if(Q.missing(e.childStore)){const s=this.serverSideRowModel.getParams();e.childStore=this.createBean(this.storeFactory.createStore(s,e))}}else this.gos.get("purgeClosedRowNodes")&&Q.exists(e.childStore)&&(e.childStore=this.destroyBean(e.childStore));const i={type:K.EVENT_STORE_UPDATED};this.eventService.dispatchEvent(i)}createDetailNode(t){if(Q.exists(t.detailNode))return t.detailNode;const e=new Tt(this.beans);e.detail=!0,e.selectable=!1,e.parent=t,Q.exists(t.id)&&(e.id="detail_"+t.id),e.data=t.data,e.level=t.level+1;const i=200,s=this.gos.getRowHeightForNode(e).height;return e.rowHeight=s||i,t.detailNode=e,e}};Ne([W("rowModel")],Bh.prototype,"serverSideRowModel",2);Ne([W("ssrmStoreFactory")],Bh.prototype,"storeFactory",2);Ne([W("beans")],Bh.prototype,"beans",2);Ne([de],Bh.prototype,"postConstruct",1);Bh=Ne([Me("ssrmExpandListener")],Bh);var Vh=class extends ye{postConstruct(){this.gos.isRowModelType("serverSide")&&this.addManagedListener(this.eventService,K.EVENT_SORT_CHANGED,this.onSortChanged.bind(this))}onSortChanged(){const t=this.serverSideRowModel.getParams();if(!t)return;const e=this.sortController.getSortModel(),i=t.sortModel,s=this.findChangedColumnsInSort(e,i),r=this.listenerUtils.isSortingWithValueColumn(s),n=this.listenerUtils.isSortingWithSecondaryColumn(s),o={valueColChanged:r,secondaryColChanged:n,changedColumns:s};this.serverSideRowModel.refreshAfterSort(e,o)}findChangedColumnsInSort(t,e){let i=[];[t,e].forEach(n=>{if(n){const o=n.map(a=>a.colId);i=i.concat(o)}});const s=(n,o)=>{const a=n?n.sort:null,l=o?o.sort:null;return a!==l},r=(n,o)=>{const a=n?e.indexOf(n):-1,l=o?t.indexOf(o):-1;return a!==l};return i.filter(n=>{const o=e.find(l=>l.colId===n),a=t.find(l=>l.colId===n);return s(o,a)||r(o,a)})}};Ne([W("sortController")],Vh.prototype,"sortController",2);Ne([W("rowModel")],Vh.prototype,"serverSideRowModel",2);Ne([W("ssrmListenerUtils")],Vh.prototype,"listenerUtils",2);Ne([de],Vh.prototype,"postConstruct",1);Vh=Ne([Me("ssrmSortService")],Vh);var Hh=class extends ye{postConstruct(){this.gos.isRowModelType("serverSide")&&(this.addManagedListener(this.eventService,K.EVENT_ADVANCED_FILTER_ENABLED_CHANGED,()=>this.onFilterChanged(!0)),this.addManagedListener(this.eventService,K.EVENT_FILTER_CHANGED,()=>this.onFilterChanged()))}onFilterChanged(t){const e=this.serverSideRowModel.getParams();if(!e)return;const i=e.filterModel;let s,r;if(this.filterManager.isAdvancedFilterEnabled()){s=this.filterManager.getAdvancedFilterModel();const l=t?Object.keys(i??{}):this.getAdvancedFilterColumns(i),c=this.getAdvancedFilterColumns(s);l.forEach(u=>c.add(u)),r=Array.from(c)}else if(s=this.filterManager.getFilterModel(),t){const l=this.getAdvancedFilterColumns(i);Object.keys(s).forEach(c=>l.add(c)),r=Array.from(l)}else r=this.findChangedColumns(i,s);const n=this.listenerUtils.isSortingWithValueColumn(r),o=this.listenerUtils.isSortingWithSecondaryColumn(r),a={valueColChanged:n,secondaryColChanged:o,changedColumns:r};this.serverSideRowModel.refreshAfterFilter(s,a)}findChangedColumns(t,e){const i={};Object.keys(t).forEach(r=>i[r]=!0),Object.keys(e).forEach(r=>i[r]=!0);const s=[];return Object.keys(i).forEach(r=>{const n=JSON.stringify(t[r]),o=JSON.stringify(e[r]);n!=o&&s.push(r)}),s}getAdvancedFilterColumns(t){const e=new Set;if(!t)return e;const i=s=>{s.filterType==="join"?s.conditions.forEach(r=>i(r)):e.add(s.colId)};return i(t),e}};Ne([W("rowModel")],Hh.prototype,"serverSideRowModel",2);Ne([W("filterManager")],Hh.prototype,"filterManager",2);Ne([W("ssrmListenerUtils")],Hh.prototype,"listenerUtils",2);Ne([de],Hh.prototype,"postConstruct",1);Hh=Ne([Me("ssrmFilterListener")],Hh);var aC=class{createStore(t,e){const i=this.getStoreParams(t,e),s=i.suppressInfiniteScroll?Br:ga;return new s(t,i,e)}getStoreParams(t,e){const i=this.getLevelSpecificParams(e),s=this.isInfiniteScroll(i),r=this.getBlockSize(s,i),n=this.getMaxBlocksInCache(s,t,i);return{suppressInfiniteScroll:!s,cacheBlockSize:r,maxBlocksInCache:n}}getMaxBlocksInCache(t,e,i){if(!t)return;const s=i&&i.maxBlocksInCache!=null?i.maxBlocksInCache:this.gos.get("maxBlocksInCache");if(s!=null&&s>=0){if(e.dynamicRowHeight){Q.warnOnce("Server Side Row Model does not support Dynamic Row Height and Cache Purging. Either a) remove getRowHeight() callback or b) remove maxBlocksInCache property. Purging has been disabled.");return}if(this.columnModel.isAutoRowHeightActive()){Q.warnOnce("Server Side Row Model does not support Auto Row Height and Cache Purging. Either a) remove colDef.autoHeight or b) remove maxBlocksInCache property. Purging has been disabled.");return}return s}}getBlockSize(t,e){if(!t)return;const i=e&&e.cacheBlockSize!=null?e.cacheBlockSize:this.gos.get("cacheBlockSize");return i!=null&&i>0?i:100}getLevelSpecificParams(t){const e=this.gos.getCallback("getServerSideGroupLevelParams");if(!e)return;const i={level:t.level+1,parentRowNode:t.level>=0?t:void 0,rowGroupColumns:this.columnModel.getRowGroupColumns(),pivotColumns:this.columnModel.getPivotColumns(),pivotMode:this.columnModel.isPivotMode()};return e(i)}isInfiniteScroll(t){return!(t&&t.suppressInfiniteScroll!=null?t.suppressInfiniteScroll:this.isSuppressServerSideInfiniteScroll())}isSuppressServerSideInfiniteScroll(){return this.gos.get("suppressServerSideInfiniteScroll")}};Ne([W("gridOptionsService")],aC.prototype,"gos",2);Ne([W("columnModel")],aC.prototype,"columnModel",2);aC=Ne([Me("ssrmStoreFactory")],aC);var MS=class{isSortingWithValueColumn(t){const e=this.columnModel.getValueColumns().map(i=>i.getColId());for(let i=0;i<t.length;i++)if(e.indexOf(t[i])>-1)return!0;return!1}isSortingWithSecondaryColumn(t){if(!this.columnModel.getSecondaryColumns())return!1;const e=this.columnModel.getSecondaryColumns().map(i=>i.getColId());for(let i=0;i<t.length;i++)if(e.indexOf(t[i])>-1)return!0;return!1}};Ne([W("columnModel")],MS.prototype,"columnModel",2);MS=Ne([Me("ssrmListenerUtils")],MS);var DS=class extends ye{constructor(){super(...arguments),this.selectedState={selectAll:!1,toggledNodes:new Set},this.lastSelected=null,this.selectAllUsed=!1,this.selectedNodes={}}init(){this.rowSelection=this.gos.get("rowSelection"),this.addManagedPropertyListener("rowSelection",t=>{this.rowSelection=t.currentValue})}getSelectedState(){return{selectAll:this.selectedState.selectAll,toggledNodes:[...this.selectedState.toggledNodes]}}setSelectedState(t){const e={selectAll:!1,toggledNodes:new Set};if(typeof t!="object"){console.error("AG Grid: The provided selection state should be an object.");return}if("selectAll"in t&&typeof t.selectAll=="boolean")e.selectAll=t.selectAll;else{console.error("AG Grid: Select all status should be of boolean type.");return}if("toggledNodes"in t&&Array.isArray(t.toggledNodes))t.toggledNodes.forEach(i=>{typeof i=="string"?e.toggledNodes.add(i):console.warn(`AG Grid: Provided ids must be of string type. Invalid id provided: ${i}`)});else{console.error("AG Grid: `toggledNodes` must be an array of string ids.");return}this.selectedState=e}deleteSelectionStateFromParent(t,e){if(this.selectedState.toggledNodes.size===0)return!1;let i=!1;return e.forEach(s=>{this.selectedState.toggledNodes.delete(s)&&(i=!0)}),i}setNodesSelected(t){if(t.nodes.length===0)return 0;const e=t.clearSelection&&t.newValue&&!t.rangeSelect;if(this.rowSelection!=="multiple"||e){if(t.nodes.length>1)throw new Error("AG Grid: cannot select multiple rows when rowSelection is set to 'single'");const s=t.nodes[0];return t.newValue?(this.selectedNodes={[s.id]:s},this.selectedState={selectAll:!1,toggledNodes:new Set([s.id])}):(this.selectedNodes={},this.selectedState={selectAll:!1,toggledNodes:new Set}),this.lastSelected=s.id,1}const i=s=>{t.newValue?this.selectedNodes[s.id]=s:delete this.selectedNodes[s.id];const r=s.selectable;if(t.newValue===this.selectedState.selectAll||!r){this.selectedState.toggledNodes.delete(s.id);return}this.selectedState.toggledNodes.add(s.id)};if(t.rangeSelect&&this.lastSelected){if(t.nodes.length>1)throw new Error("AG Grid: cannot select multiple rows when using rangeSelect");const s=t.nodes[0],r=this.rowModel.getRowNode(this.lastSelected);return this.rowModel.getNodesInRangeForSelection(s,r??null).forEach(i),this.lastSelected=s.id,1}return t.nodes.forEach(i),this.lastSelected=t.nodes[t.nodes.length-1].id,1}processNewRow(t){this.selectedNodes[t.id]&&(this.selectedNodes[t.id]=t)}isNodeSelected(t){const e=this.selectedState.toggledNodes.has(t.id);return this.selectedState.selectAll?!e:e}getSelectedNodes(){return this.selectAllUsed&&console.warn("AG Grid: getSelectedNodes and getSelectedRows functions cannot be used with select all functionality with the server-side row model.\n                Use `api.getServerSideSelectionState()` instead."),Object.values(this.selectedNodes)}getSelectedRows(){return this.getSelectedNodes().map(t=>t.data)}getSelectionCount(){return this.selectedState.selectAll?-1:this.selectedState.toggledNodes.size}clearOtherNodes(t,e){const i=this.selectedState.selectAll?1:this.selectedState.toggledNodes.size-1;this.selectedState={selectAll:!1,toggledNodes:new Set([t.id])},this.rowModel.forEachNode(r=>{r!==t&&r.selectThisNode(!1,void 0,e)});const s={type:K.EVENT_SELECTION_CHANGED,source:e};return this.eventService.dispatchEvent(s),i}isEmpty(){var t;return!this.selectedState.selectAll&&!((t=this.selectedState.toggledNodes)!=null&&t.size)}selectAllRowNodes(t){this.selectedState={selectAll:!0,toggledNodes:new Set},this.selectedNodes={},this.selectAllUsed=!0}deselectAllRowNodes(t){this.selectedState={selectAll:!1,toggledNodes:new Set},this.selectedNodes={}}getSelectAllState(t,e){return this.selectedState.selectAll?this.selectedState.toggledNodes.size>0?null:!0:this.selectedState.toggledNodes.size>0?null:!1}};Ne([W("rowModel")],DS.prototype,"rowModel",2);Ne([de],DS.prototype,"init",1);var Ku=class extends ye{constructor(){super(...arguments),this.selectedState={selectAllChildren:!1,toggledNodes:new Map},this.lastSelected=null}init(){this.addManagedListener(this.eventService,K.EVENT_MODEL_UPDATED,()=>this.removeRedundantState()),this.addManagedListener(this.eventService,K.EVENT_COLUMN_ROW_GROUP_CHANGED,()=>this.selectionService.reset("rowGroupChanged"))}getSelectedState(){const t=this.gos.get("treeData"),e=(i,s,r)=>{const n={nodeId:r};if((t||s<=this.columnModel.getRowGroupColumns().length)&&(n.selectAllChildren=i.selectAllChildren),i.toggledNodes.size){const o=[];i.toggledNodes.forEach((a,l)=>{const c=e(a,s+1,l);o.push(c)}),n.toggledNodes=o}return n};return e(this.selectedState,0)}setSelectedState(t){const e=(i,s)=>{var r,n;if(typeof i!="object")throw new Error("AG Grid: Each provided state object must be an object.");if("selectAllChildren"in i&&typeof i.selectAllChildren!="boolean")throw new Error("AG Grid: `selectAllChildren` must be a boolean value or undefined.");if("toggledNodes"in i){if(!Array.isArray(i.toggledNodes))throw new Error("AG Grid: `toggledNodes` must be an array.");if(!i.toggledNodes.every(u=>typeof u=="object"&&"nodeId"in u&&typeof u.nodeId=="string"))throw new Error("AG Grid: Every `toggledNode` requires an associated string id.")}const o=(r=i.selectAllChildren)!=null?r:!s,a=(n=i.toggledNodes)==null?void 0:n.map(c=>[c.nodeId,e(c,o)]);if(a==null?void 0:a.some(([c,u])=>o===u.selectAllChildren&&u.toggledNodes.size===0))throw new Error(`
                    AG Grid: AG Grid: Row selection state could not be parsed due to invalid data. Ensure all child state has toggledNodes or does not conform with the parent rule.
                    Please rebuild the selection state and reapply it.
                `);return{selectAllChildren:o,toggledNodes:new Map(a)}};try{this.selectedState=e(t,!!t.selectAllChildren)}catch(i){console.error(i.message)}}deleteSelectionStateFromParent(t,e){let i=this.selectedState;const s=[...t];for(;i&&s.length;)i=i.toggledNodes.get(s.pop());if(!i)return!1;let r=!1;return e.forEach(n=>{i!=null&&i.toggledNodes.delete(n)&&(r=!0)}),r&&this.removeRedundantState(),r}setNodesSelected(t){const e=t,{nodes:i}=e,s=iH(e,["nodes"]);if(i.length===0)return 0;if(t.rangeSelect){if(i.length>1)throw new Error("AG Grid: cannot select multiple rows when using rangeSelect");const r=i[0],o=this.rowModel.getNodesInRangeForSelection(r,this.lastSelected).map(this.getRouteToNode).sort((l,c)=>c.length-l.length),a=new Set;return o.forEach(l=>{a.has(l[l.length-1])||(l.forEach(c=>a.add(c)),this.recursivelySelectNode(l,this.selectedState,jA({node:r},s)))}),this.removeRedundantState(),this.lastSelected=r,1}return t.nodes.forEach(r=>{const n=this.getRouteToNode(r);this.recursivelySelectNode(n,this.selectedState,sle(jA({},s),{node:r}))}),this.removeRedundantState(),this.lastSelected=t.nodes[t.nodes.length-1],1}isNodeSelected(t){const e=this.getRouteToNode(t);return this.isNodePathSelected(e,this.selectedState)}isNodePathSelected([t,...e],i){if(e.length===0){const s=i.toggledNodes.has(t.id);if(t.hasChildren()){const r=i.toggledNodes.get(t.id);if(r&&r.toggledNodes.size)return}return i.selectAllChildren?!s:s}if(i.toggledNodes.has(t.id)){const s=i.toggledNodes.get(t.id);if(s)return this.isNodePathSelected(e,s)}return!!i.selectAllChildren}getRouteToNode(t){const e=[];let i=t;for(;i.parent;)e.push(i),i=i.parent;return e.reverse()}removeRedundantState(){if(this.filterManager.isAnyFilterPresent())return;const t=(e=this.selectedState,i,s)=>{if(e.toggledNodes.forEach((o,a)=>{t(o,a,e)}),i){const o=this.rowModel.getRowNode(i),a=o==null?void 0:o.childStore;if((a==null?void 0:a.isLastRowIndexKnown())&&e.toggledNodes.size>=a.getRowCount()){for(const u of e.toggledNodes.entries()){const[d,h]=u;if(h.toggledNodes.size>0||!this.rowModel.getRowNode(d))return}e.selectAllChildren=!e.selectAllChildren,e.toggledNodes.clear()}}const r=e.toggledNodes.size===0,n=(s==null?void 0:s.selectAllChildren)===e.selectAllChildren;r&&n&&(s==null||s.toggledNodes.delete(i))};t()}recursivelySelectNode([t,...e],i,s){if(!t)return;if(!e.length){const a=t.selectable;if(i.selectAllChildren===s.newValue||!a){i.toggledNodes.delete(t.id);return}const c={selectAllChildren:s.newValue,toggledNodes:new Map};i.toggledNodes.set(t.id,c);return}const n=i.toggledNodes.has(t.id),o=n?i.toggledNodes.get(t.id):{selectAllChildren:i.selectAllChildren,toggledNodes:new Map};n||i.toggledNodes.set(t.id,o),this.recursivelySelectNode(e,o,s),i.selectAllChildren===o.selectAllChildren&&o.toggledNodes.size===0&&i.toggledNodes.delete(t.id)}getSelectedNodes(){console.warn("AG Grid: `getSelectedNodes` and `getSelectedRows` functions cannot be used with `groupSelectsChildren` and the server-side row model.\n            Use `api.getServerSideSelectionState()` instead.");const t=[];return this.rowModel.forEachNode(e=>{e.isSelected()&&t.push(e)}),t}processNewRow(t){}getSelectedRows(){return this.getSelectedNodes().map(t=>t.data)}getSelectionCount(){return-1}isEmpty(){var t;return!this.selectedState.selectAllChildren&&!((t=this.selectedState.toggledNodes)!=null&&t.size)}selectAllRowNodes(t){this.selectedState={selectAllChildren:!0,toggledNodes:new Map}}deselectAllRowNodes(t){this.selectedState={selectAllChildren:!1,toggledNodes:new Map}}getSelectAllState(t,e){return this.selectedState.selectAllChildren?this.selectedState.toggledNodes.size>0?null:!0:this.selectedState.toggledNodes.size>0?null:!1}};Ne([W("rowModel")],Ku.prototype,"rowModel",2);Ne([W("columnModel")],Ku.prototype,"columnModel",2);Ne([W("filterManager")],Ku.prototype,"filterManager",2);Ne([W("rowModel")],Ku.prototype,"serverSideRowModel",2);Ne([W("selectionService")],Ku.prototype,"selectionService",2);Ne([de],Ku.prototype,"init",1);var lC=class extends ye{init(){const t=this.gos.get("groupSelectsChildren");this.addManagedPropertyListener("groupSelectsChildren",i=>{this.destroyBean(this.selectionStrategy);const s=i.currentValue?Ku:DS;this.selectionStrategy=this.createManagedBean(new s),this.shotgunResetNodeSelectionState();const r={type:K.EVENT_SELECTION_CHANGED,source:"api"};this.eventService.dispatchEvent(r)}),this.addManagedPropertyListener("rowSelection",()=>this.deselectAllRowNodes({source:"api"}));const e=t?Ku:DS;this.selectionStrategy=this.createManagedBean(new e)}getSelectionState(){return this.selectionStrategy.getSelectedState()}setSelectionState(t,e){if(Array.isArray(t))return;this.selectionStrategy.setSelectedState(t),this.shotgunResetNodeSelectionState();const i={type:K.EVENT_SELECTION_CHANGED,source:e};this.eventService.dispatchEvent(i)}setNodesSelected(t){const e=t,{nodes:i}=e,s=iH(e,["nodes"]),r=this.gos.get("rowSelection");if(i.length>1&&r!=="multiple")return console.warn("AG Grid: cannot multi select while rowSelection='single'"),0;if(i.length>1&&t.rangeSelect)return console.warn("AG Grid: cannot use range selection when multi selecting rows"),0;const n=jA({nodes:i.filter(l=>l.selectable)},s);if(!n.nodes.length)return 0;const o=this.selectionStrategy.setNodesSelected(n);this.shotgunResetNodeSelectionState(n.source);const a={type:K.EVENT_SELECTION_CHANGED,source:n.source};return this.eventService.dispatchEvent(a),o}deleteSelectionStateFromParent(t,e){if(!this.selectionStrategy.deleteSelectionStateFromParent(t,e))return;this.shotgunResetNodeSelectionState();const s={type:K.EVENT_SELECTION_CHANGED,source:"api"};this.eventService.dispatchEvent(s)}shotgunResetNodeSelectionState(t){this.rowModel.forEachNode(e=>{if(e.stub)return;const i=this.selectionStrategy.isNodeSelected(e);i!==e.isSelected()&&e.selectThisNode(i,void 0,t)})}getSelectedNodes(){return this.selectionStrategy.getSelectedNodes()}getSelectedRows(){return this.selectionStrategy.getSelectedRows()}getSelectionCount(){return this.selectionStrategy.getSelectionCount()}syncInRowNode(t,e){this.selectionStrategy.processNewRow(t);const i=this.selectionStrategy.isNodeSelected(t);if(i!=!1&&!t.selectable){this.selectionStrategy.setNodesSelected({nodes:[t],newValue:!1,source:"api"}),this.shotgunResetNodeSelectionState();const s={type:K.EVENT_SELECTION_CHANGED,source:"api"};this.eventService.dispatchEvent(s);return}t.setSelectedInitialValue(i)}reset(){this.selectionStrategy.deselectAllRowNodes({source:"api"})}isEmpty(){return this.selectionStrategy.isEmpty()}hasNodesToSelect(t=!1,e=!1){return!0}selectAllRowNodes(t){(t.justCurrentPage||t.justFiltered)&&console.warn("AG Grid: selecting just filtered only works when gridOptions.rowModelType='clientSide'"),this.selectionStrategy.selectAllRowNodes(t),this.rowModel.forEachNode(i=>{i.stub||i.selectThisNode(!0,void 0,t.source)});const e={type:K.EVENT_SELECTION_CHANGED,source:t.source};this.eventService.dispatchEvent(e)}deselectAllRowNodes(t){(t.justCurrentPage||t.justFiltered)&&console.warn("AG Grid: selecting just filtered only works when gridOptions.rowModelType='clientSide'"),this.selectionStrategy.deselectAllRowNodes(t),this.rowModel.forEachNode(i=>{i.stub||i.selectThisNode(!1,void 0,t.source)});const e={type:K.EVENT_SELECTION_CHANGED,source:t.source};this.eventService.dispatchEvent(e)}getSelectAllState(t,e){return this.selectionStrategy.getSelectAllState(t,e)}updateGroupsFromChildrenSelections(t,e){return!1}getBestCostNodeSelection(){console.warn("AG Grid: calling gridApi.getBestCostNodeSelection() is only possible when using rowModelType=`clientSide`.")}filterFromSelection(){}};Ne([W("rowModel")],lC.prototype,"rowModel",2);Ne([de],lC.prototype,"init",1);lC=Ne([Me("selectionService")],lC);var ole="31.3.4",PS=class extends _h{constructor(){super(...arguments),this.queuedRowIds=new Set}postConstruct(){super.postConstruct(),this.addManagedListener(this.eventService,K.EVENT_COLUMN_ROW_GROUP_CHANGED,()=>{this.queuedRowIds.clear()})}checkOpenByDefault(t){if(!t.isExpandable())return;if(this.queuedRowIds.has(t.id)){this.queuedRowIds.delete(t.id),t.setExpanded(!0);return}const e=this.gos.getCallback("isServerSideGroupOpenByDefault");if(!e)return;const i={data:t.data,rowNode:t};e(i)&&t.setExpanded(!0)}expandRows(t){t.forEach(e=>{const i=this.serverSideRowModel.getRowNode(e);i?i.setExpanded(!0):this.queuedRowIds.add(e)})}expandAll(t){this.serverSideRowModel.expandAll(t)}onGroupExpandedOrCollapsed(){}};Ne([W("rowModel")],PS.prototype,"serverSideRowModel",2);PS=Ne([Me("expansionService")],PS);var sH={version:ole,moduleName:Ut.ServerSideRowModelModule,rowModel:"serverSide",beans:[Nn,Bh,Vh,Dg,$u,RS,Cc,Hh,aC,MS,lC,PS,yc],dependantModules:[Qs]},ale=Object.defineProperty,lle=Object.getOwnPropertyDescriptor,dn=(t,e,i,s)=>{for(var r=s>1?void 0:s?lle(e,i):e,n=t.length-1,o;n>=0;n--)(o=t[n])&&(r=(s?o(e,i,r):o(r))||r);return s&&r&&ale(e,i,r),r},cle=class{constructor(t,e,i,s,r,n,o,a,l,c,u){this.rowModel=t,this.filterParams=e,this.createKey=i,this.caseFormat=s,this.columnModel=r,this.valueService=n,this.treeDataOrGrouping=o,this.treeData=a,this.getDataPath=l,this.groupAllowUnbalanced=c,this.addManagedListener=u}extractUniqueValuesAsync(t,e){return new Ft(i=>{if(this.rowModel.isRowDataLoaded())i(this.extractUniqueValues(t,e));else{const s=this.addManagedListener(K.EVENT_ROW_COUNT_READY,()=>{s==null||s(),i(this.extractUniqueValues(t,e))})}})}extractUniqueValues(t,e){const i=new Map,s=this.extractExistingFormattedKeys(e),r=new Set,n=this.treeData&&!!this.getDataPath,o=this.columnModel.getRowGroupColumns(),a=(l,c)=>{const u=this.caseFormat(l);if(!r.has(u)){r.add(u);let d=l,h=Q.makeNull(c);const p=s==null?void 0:s.get(u);p!=null&&(d=p,h=e.get(p)),i.set(d,h)}};return this.rowModel.forEachLeafNode(l=>{if(!l.data||!t(l))return;if(this.treeDataOrGrouping){this.addValueForTreeDataOrGrouping(l,n,o,a);return}let c=this.getValue(l);if(this.filterParams.convertValuesToStrings){this.addValueForConvertValuesToString(l,c,a);return}c!=null&&Array.isArray(c)?(c.forEach(u=>{a(this.createKey(u,l),u)}),c.length===0&&a(null,null)):a(this.createKey(c,l),c)}),i}addValueForConvertValuesToString(t,e,i){const s=this.createKey(e,t);s!=null&&Array.isArray(s)?(s.forEach(r=>{const n=Q.toStringOrNull(Q.makeNull(r));i(n,n)}),s.length===0&&i(null,null)):i(s,s)}addValueForTreeDataOrGrouping(t,e,i,s){var r;let n;if(e){if((r=t.childrenAfterGroup)!=null&&r.length)return;n=this.getDataPath(t.data)}else n=i.map(o=>this.valueService.getKeyForNode(o,t)),n.push(this.getValue(t));n&&(n=n.map(o=>Q.toStringOrNull(Q.makeNull(o)))),!e&&this.groupAllowUnbalanced&&(n!=null&&n.some(o=>o==null))&&(n=n.filter(o=>o!=null)),s(this.createKey(n),n)}getValue(t){return this.filterParams.getValue(t)}extractExistingFormattedKeys(t){if(!t)return null;const e=new Map;return t.forEach((i,s)=>{e.set(this.caseFormat(s),s)}),e}},Ar=class{};Ar.SELECT_ALL="__AG_SELECT_ALL__";Ar.ADD_SELECTION_TO_FILTER="__AG_ADD_SELECTION_TO_FILTER__";var ule=class{constructor(t,e,i,s){this.valueService=t,this.valueFormatter=e,this.formatter=i,this.column=s,this.displayedKeys=[]}updateDisplayedValuesToAllAvailable(t,e,i){this.displayedKeys=Array.from(i)}updateDisplayedValuesToMatchMiniFilter(t,e,i,s,r){this.displayedKeys=[];for(let n of i)if(n==null)r&&this.displayedKeys.push(n);else{const o=t(n),a=this.valueService.formatValue(this.column,null,o,this.valueFormatter,!1),l=this.formatter(a);s(l)&&this.displayedKeys.push(n)}}getDisplayedValueCount(){return this.displayedKeys.length}getDisplayedItem(t){return this.displayedKeys[t]}getSelectAllItem(){return Ar.SELECT_ALL}getAddSelectionToFilterItem(){return Ar.ADD_SELECTION_TO_FILTER}getDisplayedKeys(){return this.displayedKeys}forEachDisplayedKey(t){this.displayedKeys.forEach(t)}someDisplayedKey(t){return this.displayedKeys.some(t)}hasGroups(){return!1}refresh(){}},rH=class nH{constructor(e,i,s,r){this.formatter=e,this.treeListPathGetter=i,this.treeListFormatter=s,this.treeDataOrGrouping=r,this.allDisplayedItemsTree=[],this.activeDisplayedItemsFlat=[],this.selectAllItem={depth:0,filterPasses:!0,available:!0,treeKey:Ar.SELECT_ALL,children:this.allDisplayedItemsTree,expanded:!0,key:Ar.SELECT_ALL,parentTreeKeys:[]},this.addSelectionToFilterItem={depth:0,filterPasses:!0,available:!0,treeKey:Ar.ADD_SELECTION_TO_FILTER,expanded:!0,key:Ar.ADD_SELECTION_TO_FILTER,parentTreeKeys:[]}}updateDisplayedValuesToAllAvailable(e,i,s,r){r==="reload"?this.generateItemTree(e,i,s):r==="otherFilter"?(this.updateAvailable(s),this.updateExpandAll()):r==="miniFilter"&&(this.resetFilter(),this.updateExpandAll()),this.flattenItems()}updateDisplayedValuesToMatchMiniFilter(e,i,s,r,n,o){o==="reload"?this.generateItemTree(e,i,s):o==="otherFilter"&&this.updateAvailable(s),this.updateFilter(r,n),this.updateExpandAll(),this.flattenItems()}generateItemTree(e,i,s){var r;this.allDisplayedItemsTree=[],this.groupsExist=!1;const n=this.getTreeListPathGetter(e,s);for(let o of i){const a=e(o),l=(r=n(a))!=null?r:[null];l.length>1&&(this.groupsExist=!0);const c=s.has(o);let u=this.allDisplayedItemsTree,d,h=[];l.forEach((p,f)=>{u||(u=[],d.children=u),d=u.find(m=>{var g;return((g=m.treeKey)==null?void 0:g.toUpperCase())===(p==null?void 0:p.toUpperCase())}),d||(d={treeKey:p,depth:f,filterPasses:!0,expanded:!1,available:c,parentTreeKeys:h},f===l.length-1&&(d.key=o),u.push(d)),u=d.children,h=[...h,p]})}this.updateAvailable(s),this.selectAllItem.children=this.allDisplayedItemsTree,this.selectAllItem.expanded=!1}getTreeListPathGetter(e,i){if(this.treeListPathGetter)return this.treeListPathGetter;if(this.treeDataOrGrouping)return r=>r;let s=!1;for(const r of i){const n=e(r);if(n instanceof Date){s=!0;break}else if(n!=null)break}return s?nH.DATE_TREE_LIST_PATH_GETTER:(Q.warnOnce("property treeList=true for Set Filter params, but you did not provide a treeListPathGetter or values of type Date."),r=>[String(r)])}flattenItems(){this.activeDisplayedItemsFlat=[];const e=i=>{i.forEach(s=>{!s.filterPasses||!s.available||(this.activeDisplayedItemsFlat.push(s),s.children&&s.expanded&&e(s.children))})};e(this.allDisplayedItemsTree)}resetFilter(){const e=i=>{i.children&&i.children.forEach(s=>{e(s)}),i.filterPasses=!0};this.allDisplayedItemsTree.forEach(i=>e(i))}updateFilter(e,i){const s=r=>r.available?r.treeKey==null?i:e(this.formatter(this.treeListFormatter?this.treeListFormatter(r.treeKey,r.depth,r.parentTreeKeys):r.treeKey)):!1;this.allDisplayedItemsTree.forEach(r=>this.recursiveItemCheck(r,!1,s,"filterPasses"))}getDisplayedValueCount(){return this.activeDisplayedItemsFlat.length}getDisplayedItem(e){return this.activeDisplayedItemsFlat[e]}getSelectAllItem(){return this.selectAllItem}getAddSelectionToFilterItem(){return this.addSelectionToFilterItem}getDisplayedKeys(){const e=[];return this.forEachDisplayedKey(i=>e.push(i)),e}forEachDisplayedKey(e){const i=(s,r)=>{s.children?(!s.expanded||!r)&&s.children.forEach(n=>{n.filterPasses&&i(n,!1)}):e(s.key)};this.activeDisplayedItemsFlat.forEach(s=>i(s,!0))}someDisplayedKey(e){const i=(s,r)=>{if(s.children){if(!s.expanded||!r)return s.children.some(n=>n.filterPasses?i(n,!1):!1)}else return e(s.key);return!1};return this.activeDisplayedItemsFlat.some(s=>i(s,!0))}hasGroups(){return this.groupsExist}refresh(){this.updateExpandAll(),this.flattenItems()}updateExpandAll(){const e=(s,r,n)=>{for(const o of s){if(!o.filterPasses||!o.available||!o.children)continue;if(r=r||!!o.expanded,n=n||!o.expanded,r&&n)return;const a=e(o.children,r,n);if(a===void 0)return;a?r=!0:n=!0}return r&&n?void 0:r},i=this.getSelectAllItem();i.expanded=e(i.children,!1,!1)}recursiveItemCheck(e,i,s,r){let n=!1;e.children&&e.children.forEach(a=>{const l=this.recursiveItemCheck(a,i||s(e),s,r);n=n||l});const o=i||n||s(e);return e[r]=o,o}updateAvailable(e){const i=s=>e.has(s.key);this.allDisplayedItemsTree.forEach(s=>this.recursiveItemCheck(s,!1,i,"available"))}};rH.DATE_TREE_LIST_PATH_GETTER=t=>t?[String(t.getFullYear()),String(t.getMonth()+1),String(t.getDate())]:null;var dle=rH,hle=class{constructor({caseFormat:t}){this.filteringKeys=null,this.filteringKeysCaseFormatted=null,this.hasNoAppliedFilteringKeys=!1,this.caseFormat=t}allFilteringKeys(){return this.filteringKeys}allFilteringKeysCaseFormatted(){return this.filteringKeysCaseFormatted}noAppliedFilteringKeys(){return this.hasNoAppliedFilteringKeys}setFilteringKeys(t){this.filteringKeys=new Set(t),this.hasNoAppliedFilteringKeys=!this.filteringKeys||this.filteringKeys.size===0,this.filteringKeysCaseFormatted=new Set,this.filteringKeys.forEach(e=>this.filteringKeysCaseFormatted.add(this.caseFormat(e)))}addFilteringKey(t){this.filteringKeys==null&&(this.filteringKeys=new Set,this.filteringKeysCaseFormatted=new Set),this.filteringKeys.add(t),this.filteringKeysCaseFormatted.add(this.caseFormat(t)),this.hasNoAppliedFilteringKeys&&(this.hasNoAppliedFilteringKeys=!1)}hasCaseFormattedFilteringKey(t){return this.filteringKeysCaseFormatted.has(this.caseFormat(t))}hasFilteringKey(t){return this.filteringKeys.has(t)}reset(){this.filteringKeys=null,this.filteringKeysCaseFormatted=null,this.hasNoAppliedFilteringKeys=!1}},oH=class aH{constructor(e){this.localEventService=new In,this.miniFilterText=null,this.addCurrentSelectionToFilter=!1,this.providedValues=null,this.allValues=new Map,this.availableKeys=new Set,this.selectedKeys=new Set,this.initialised=!1;const{usingComplexObjects:i,columnModel:s,valueService:r,treeDataTreeList:n,groupingTreeList:o,filterParams:a,gos:l,valueFormatter:c,addManagedListener:u}=e,{column:d,colDef:h,textFormatter:p,doesRowPassOtherFilter:f,suppressSorting:m,comparator:g,rowModel:y,values:v,caseSensitive:C,convertValuesToStrings:b,treeList:T,treeListPathGetter:A,treeListFormatter:I}=a;this.filterParams=a,this.gos=l,this.setIsLoading=e.setIsLoading,this.translate=e.translate,this.caseFormat=e.caseFormat,this.createKey=e.createKey,this.usingComplexObjects=!!e.usingComplexObjects,this.formatter=p||og.DEFAULT_FORMATTER,this.doesRowPassOtherFilters=f,this.suppressSorting=m||!1,this.convertValuesToStrings=!!b,this.filteringKeys=new hle({caseFormat:this.caseFormat});const D=g??h.comparator,F=!!n||!!o;this.compareByValue=!!(i&&D||F||T&&!A),F&&!D?this.entryComparator=this.createTreeDataOrGroupingComparator():T&&!A&&!D?this.entryComparator=([H,R],[L,_])=>Q.defaultComparator(R,_):this.entryComparator=([H,R],[L,_])=>D(R,_),this.keyComparator=D??Q.defaultComparator,this.caseSensitive=!!C;const B=l.get("getDataPath"),U=l.get("groupAllowUnbalanced");y.getType()==="clientSide"&&(this.clientSideValuesExtractor=new cle(y,this.filterParams,this.createKey,this.caseFormat,s,r,F,!!n,B,U,u)),v==null?this.valuesType=2:(this.valuesType=Array.isArray(v)?0:1,this.providedValues=v),this.displayValueModel=T?new dle(this.formatter,A,I,n||o):new ule(r,c,this.formatter,d),this.updateAllValues().then(H=>this.resetSelectionState(H||[]))}addEventListener(e,i,s){this.localEventService.addEventListener(e,i,s)}removeEventListener(e,i,s){this.localEventService.removeEventListener(e,i,s)}updateOnParamsChange(e){return new Ft(i=>{const{values:s,textFormatter:r,suppressSorting:n}=e,o=this.providedValues,a=this.suppressSorting;if(this.filterParams=e,this.formatter=r||og.DEFAULT_FORMATTER,this.suppressSorting=n||!1,this.providedValues=s??null,this.providedValues!==o||this.suppressSorting!==a){!s||s.length===0?(this.valuesType=2,this.providedValues=null):this.valuesType=Array.isArray(s)?0:1;const l=this.getModel();this.updateAllValues().then(c=>{this.setModel(l).then(()=>i())})}else i()})}refreshValues(){return new Ft(e=>{this.allValuesPromise.then(()=>{const i=this.getModel();this.updateAllValues(),this.setModel(i).then(()=>e())})})}overrideValues(e){return new Ft(i=>{this.allValuesPromise.then(()=>{this.valuesType=0,this.providedValues=e,this.refreshValues().then(()=>i())})})}refreshAfterAnyFilterChanged(){return this.showAvailableOnly()?this.allValuesPromise.then(e=>(this.updateAvailableKeys(e??[],"otherFilter"),!0)):Ft.resolve(!1)}isInitialised(){return this.initialised}updateAllValues(){return this.allValuesPromise=new Ft(e=>{switch(this.valuesType){case 2:this.getValuesFromRowsAsync(!1).then(i=>e(this.processAllValues(i)));break;case 0:{e(this.processAllValues(this.uniqueValues(this.validateProvidedValues(this.providedValues))));break}case 1:{this.setIsLoading(!0);const i=this.providedValues,{column:s,colDef:r}=this.filterParams,n=this.gos.addGridCommonParams({success:o=>{this.setIsLoading(!1),e(this.processAllValues(this.uniqueValues(this.validateProvidedValues(o))))},colDef:r,column:s});window.setTimeout(()=>i(n),0);break}default:throw new Error("Unrecognised valuesType")}}),this.allValuesPromise.then(e=>this.updateAvailableKeys(e||[],"reload")).then(()=>this.initialised=!0),this.allValuesPromise}processAllValues(e){const i=this.sortKeys(e);return this.allValues=e??new Map,i}validateProvidedValues(e){if(this.usingComplexObjects&&(e!=null&&e.length)){const i=e[0];i&&typeof i!="object"&&typeof i!="function"&&(this.createKey(i)==null?Q.warnOnce("Set Filter Key Creator is returning null for provided values and provided values are primitives. Please provide complex objects or set convertValuesToStrings=true in the filterParams. See https://www.ag-grid.com/javascript-data-grid/filter-set-filter-list/#filter-value-types"):Q.warnOnce("Set Filter has a Key Creator, but provided values are primitives. Did you mean to provide complex objects or enable convertValuesToStrings?"))}return e}setValuesType(e){this.valuesType=e}getValuesType(){return this.valuesType}isKeyAvailable(e){return this.availableKeys.has(e)}showAvailableOnly(){return this.valuesType===2}updateAvailableKeys(e,i){const s=this.showAvailableOnly()?this.sortKeys(this.getValuesFromRows(!0)):e;this.availableKeys=new Set(s),this.localEventService.dispatchEvent({type:aH.EVENT_AVAILABLE_VALUES_CHANGED}),this.updateDisplayedValues(i,e)}sortKeys(e){const i=e??new Map;if(this.suppressSorting)return Array.from(i.keys());let s;return this.compareByValue?s=Array.from(i.entries()).sort(this.entryComparator).map(([r])=>r):s=Array.from(i.keys()).sort(this.keyComparator),this.filterParams.excelMode&&i.has(null)&&(s=s.filter(r=>r!=null),s.push(null)),s}getParamsForValuesFromRows(e=!1){if(!this.clientSideValuesExtractor)return Q.doOnce(()=>{console.error("AG Grid: Set Filter cannot initialise because you are using a row model that does not contain all rows in the browser. Either use a different filter type, or configure Set Filter such that you provide it with values")},"setFilterValueNotCSRM"),null;const i=r=>!e||this.doesRowPassOtherFilters(r),s=e&&!this.caseSensitive?this.allValues:void 0;return{predicate:i,existingValues:s}}getValuesFromRows(e=!1){const i=this.getParamsForValuesFromRows(e);return i?this.clientSideValuesExtractor.extractUniqueValues(i.predicate,i.existingValues):null}getValuesFromRowsAsync(e=!1){const i=this.getParamsForValuesFromRows(e);return i?this.clientSideValuesExtractor.extractUniqueValuesAsync(i.predicate,i.existingValues):Ft.resolve(null)}setMiniFilter(e){return e=Q.makeNull(e),this.miniFilterText===e?!1:(e===null&&this.setAddCurrentSelectionToFilter(!1),this.miniFilterText=e,this.updateDisplayedValues("miniFilter"),!0)}getMiniFilter(){return this.miniFilterText}updateDisplayedValues(e,i){if(e==="expansion"){this.displayValueModel.refresh();return}if(this.miniFilterText==null){this.displayValueModel.updateDisplayedValuesToAllAvailable(o=>this.getValue(o),i,this.availableKeys,e);return}const s=this.caseFormat(this.formatter(this.miniFilterText)||""),r=o=>o!=null&&this.caseFormat(o).indexOf(s)>=0,n=!!this.filterParams.excelMode&&r(this.translate("blanks"));this.displayValueModel.updateDisplayedValuesToMatchMiniFilter(o=>this.getValue(o),i,this.availableKeys,r,n,e)}getDisplayedValueCount(){return this.displayValueModel.getDisplayedValueCount()}getDisplayedItem(e){return this.displayValueModel.getDisplayedItem(e)}getSelectAllItem(){return this.displayValueModel.getSelectAllItem()}getAddSelectionToFilterItem(){return this.displayValueModel.getAddSelectionToFilterItem()}hasSelections(){return this.filterParams.defaultToNothingSelected?this.selectedKeys.size>0:this.allValues.size!==this.selectedKeys.size}getKeys(){return Array.from(this.allValues.keys())}getValues(){return Array.from(this.allValues.values())}getValue(e){return this.allValues.get(e)}setAddCurrentSelectionToFilter(e){this.addCurrentSelectionToFilter=e}isInWindowsExcelMode(){return this.filterParams.excelMode==="windows"}isAddCurrentSelectionToFilterChecked(){return this.isInWindowsExcelMode()&&this.addCurrentSelectionToFilter}showAddCurrentSelectionToFilter(){return this.isInWindowsExcelMode()&&Q.exists(this.miniFilterText)&&this.miniFilterText.length>0}selectAllMatchingMiniFilter(e=!1){this.miniFilterText==null?this.selectedKeys=new Set(this.allValues.keys()):(e&&this.selectedKeys.clear(),this.displayValueModel.forEachDisplayedKey(i=>this.selectedKeys.add(i)))}deselectAllMatchingMiniFilter(){this.miniFilterText==null?this.selectedKeys.clear():this.displayValueModel.forEachDisplayedKey(e=>this.selectedKeys.delete(e))}selectKey(e){this.selectedKeys.add(e)}deselectKey(e){this.filterParams.excelMode&&this.isEverythingVisibleSelected()&&this.resetSelectionState(this.displayValueModel.getDisplayedKeys()),this.selectedKeys.delete(e)}isKeySelected(e){return this.selectedKeys.has(e)}isEverythingVisibleSelected(){return!this.displayValueModel.someDisplayedKey(e=>!this.isKeySelected(e))}isNothingVisibleSelected(){return!this.displayValueModel.someDisplayedKey(e=>this.isKeySelected(e))}getModel(){if(!this.hasSelections())return null;const e=this.isAddCurrentSelectionToFilterChecked()?this.filteringKeys.allFilteringKeys():null;if(e&&e.size>0){if(this.selectedKeys){const i=new Set([...Array.from(e),...Array.from(this.selectedKeys).filter(s=>!e.has(s))]);return Array.from(i)}return Array.from(e)}return Array.from(this.selectedKeys)}setModel(e){return this.allValuesPromise.then(i=>{if(e==null)this.resetSelectionState(i??[]);else{this.selectedKeys.clear();const s=new Map;this.allValues.forEach((r,n)=>{s.set(this.caseFormat(n),n)}),e.forEach(r=>{const n=this.caseFormat(Q.makeNull(r)),o=s.get(n);o!==void 0&&this.selectKey(o)})}})}uniqueValues(e){const i=new Map,s=new Set;return(e??[]).forEach(r=>{const n=Q.makeNull(r),o=this.convertAndGetKey(n),a=this.caseFormat(o);s.has(a)||(s.add(a),i.set(o,n))}),i}convertAndGetKey(e){return this.convertValuesToStrings?e:this.createKey(e)}resetSelectionState(e){this.filterParams.defaultToNothingSelected?this.selectedKeys.clear():this.selectedKeys=new Set(e)}hasGroups(){return this.displayValueModel.hasGroups()}createTreeDataOrGroupingComparator(){return([e,i],[s,r])=>{if(i==null)return r==null?0:-1;if(r==null)return 1;for(let n=0;n<i.length;n++){if(n>=r.length)return 1;const o=Q.defaultComparator(i[n],r[n]);if(o!==0)return o}return 0}}setAppliedModelKeys(e){this.filteringKeys.setFilteringKeys(e)}addToAppliedModelKeys(e){this.filteringKeys.addFilteringKey(e)}getAppliedModelKeys(){return this.filteringKeys.allFilteringKeys()}getCaseFormattedAppliedModelKeys(){return this.filteringKeys.allFilteringKeysCaseFormatted()}hasAppliedModelKey(e){return this.filteringKeys.hasCaseFormattedFilteringKey(e)}hasAnyAppliedModelKey(){return!this.filteringKeys.noAppliedFilteringKeys()}};oH.EVENT_AVAILABLE_VALUES_CHANGED="availableValuesChanged";var lH=oH,Jo=class vv extends Te{constructor(e){var i;super(e.isGroup?vv.GROUP_TEMPLATE:vv.TEMPLATE),this.focusWrapper=e.focusWrapper,this.value=e.value,this.params=e.params,this.translate=e.translate,this.valueFormatter=e.valueFormatter,this.item=e.item,this.isSelected=e.isSelected,this.isTree=e.isTree,this.depth=(i=e.depth)!=null?i:0,this.isGroup=e.isGroup,this.groupsExist=e.groupsExist,this.isExpanded=e.isExpanded,this.hasIndeterminateExpandState=e.hasIndeterminateExpandState}init(){this.addDestroyFunc(()=>{var e;return(e=this.destroyCellRendererComponent)==null?void 0:e.call(this)}),this.render(),this.eCheckbox.setLabelEllipsis(!0).setValue(this.isSelected,!0).setDisabled(!!this.params.readOnly).getInputElement().setAttribute("tabindex","-1"),this.refreshVariableAriaLabels(),this.isTree&&(this.depth>0&&this.addCssClass("ag-set-filter-indent-"+this.depth),this.isGroup?this.setupExpansion():this.groupsExist&&this.addCssClass("ag-set-filter-add-group-indent"),Q.setAriaLevel(this.getAriaElement(),this.depth+1)),this.refreshAriaChecked(),!this.params.readOnly&&this.eCheckbox.onValueChange(e=>this.onCheckboxChanged(!!e))}getFocusableElement(){return this.focusWrapper}setupExpansion(){this.eGroupClosedIcon.appendChild(Q.createIcon("setFilterGroupClosed",this.gos,null)),this.eGroupOpenedIcon.appendChild(Q.createIcon("setFilterGroupOpen",this.gos,null)),this.addManagedListener(this.eGroupClosedIcon,"click",this.onExpandOrContractClicked.bind(this)),this.addManagedListener(this.eGroupOpenedIcon,"click",this.onExpandOrContractClicked.bind(this)),this.hasIndeterminateExpandState&&(this.eGroupIndeterminateIcon.appendChild(Q.createIcon("setFilterGroupIndeterminate",this.gos,null)),this.addManagedListener(this.eGroupIndeterminateIcon,"click",this.onExpandOrContractClicked.bind(this))),this.setExpandedIcons(),this.refreshAriaExpanded()}onExpandOrContractClicked(){this.setExpanded(!this.isExpanded)}setExpanded(e,i){if(this.isGroup&&e!==this.isExpanded){this.isExpanded=e;const s={type:vv.EVENT_EXPANDED_CHANGED,isExpanded:!!e,item:this.item};i||this.dispatchEvent(s),this.setExpandedIcons(),this.refreshAriaExpanded()}}setExpandedIcons(){Q.setDisplayed(this.eGroupClosedIcon,this.hasIndeterminateExpandState?this.isExpanded===!1:!this.isExpanded),Q.setDisplayed(this.eGroupOpenedIcon,this.isExpanded===!0),this.hasIndeterminateExpandState&&Q.setDisplayed(this.eGroupIndeterminateIcon,this.isExpanded===void 0)}onCheckboxChanged(e){this.isSelected=e;const i={type:vv.EVENT_SELECTION_CHANGED,isSelected:e,item:this.item};this.dispatchEvent(i),this.refreshVariableAriaLabels(),this.refreshAriaChecked()}toggleSelected(){this.params.readOnly||this.setSelected(!this.isSelected)}setSelected(e,i){this.isSelected=e,this.eCheckbox.setValue(e,i),this.refreshAriaChecked()}refreshVariableAriaLabels(){if(!this.isTree)return;const e=this.localeService.getLocaleTextFunc(),i=this.eCheckbox.getValue(),s=i===void 0?e("ariaIndeterminate","indeterminate"):i?e("ariaVisible","visible"):e("ariaHidden","hidden"),r=e("ariaToggleVisibility","Press SPACE to toggle visibility");Q.setAriaLabelledBy(this.eCheckbox.getInputElement(),void 0),this.eCheckbox.setInputAriaLabel(`${r} (${s})`)}setupFixedAriaLabels(e){if(!this.isTree)return;const s=this.localeService.getLocaleTextFunc()("ariaFilterValue","Filter Value"),r=this.getAriaElement();Q.setAriaLabel(r,`${e} ${s}`),Q.setAriaDescribedBy(r,this.eCheckbox.getInputElement().id)}refreshAriaChecked(){const e=this.getAriaElement();Q.setAriaChecked(e,this.eCheckbox.getValue())}refreshAriaExpanded(){Q.setAriaExpanded(this.getAriaElement(),!!this.isExpanded)}refresh(e,i,s){var r,n;if(this.item=e,i!==this.isSelected&&this.setSelected(i,!0),this.setExpanded(s,!0),this.valueFunction){const o=this.valueFunction();this.setTooltipAndCellRendererParams(o,o),this.cellRendererComponent||this.renderCellWithoutCellRenderer()}if(this.cellRendererComponent&&!((n=(r=this.cellRendererComponent).refresh)==null?void 0:n.call(r,this.cellRendererParams))){const a=this.cellRendererComponent;this.renderCell(),this.destroyBean(a)}}render(){const{params:{column:e}}=this;let{value:i}=this,s=null;typeof i=="function"?(this.valueFunction=i,s=this.valueFunction(),i=s):this.isTree?s=Q.toStringOrNull(i):s=this.getFormattedValue(e,i),this.setTooltipAndCellRendererParams(i,s),this.renderCell()}setTooltipAndCellRendererParams(e,i){const s=this.gos.get("tooltipShowMode")==="whenTruncated";if(this.params.showTooltips&&(!s||!this.params.cellRenderer)){const r=i??Q.toStringOrNull(e);let n;s&&(n=()=>{const o=this.eCheckbox.getGui().querySelector(".ag-label");return o?o.scrollWidth>o.clientWidth:!0}),this.setTooltip({newTooltipText:r,location:"setFilterValue",getColDef:()=>this.params.colDef,getColumn:()=>this.params.column,shouldDisplayTooltip:n})}this.cellRendererParams=this.gos.addGridCommonParams({value:e,valueFormatted:i,colDef:this.params.colDef,column:this.params.column,setTooltip:(r,n)=>{this.setTooltip({newTooltipText:r,getColDef:()=>this.params.colDef,getColumn:()=>this.params.column,location:"setFilterValue",shouldDisplayTooltip:n})}})}getTooltipParams(){const e=super.getTooltipParams();return e.location="setFilterValue",e.colDef=this.getComponentHolder(),this.isTree&&(e.level=this.depth),e}getFormattedValue(e,i){return this.valueService.formatValue(e,null,i,this.valueFormatter,!1)}renderCell(){const e=this.userComponentFactory.getSetFilterCellRendererDetails(this.params,this.cellRendererParams),i=e?e.newAgStackInstance():void 0;if(i==null){this.renderCellWithoutCellRenderer();return}i.then(s=>{s&&(this.cellRendererComponent=s,this.eCheckbox.setLabel(s.getGui()),this.destroyCellRendererComponent=()=>this.destroyBean(s))})}renderCellWithoutCellRenderer(){var e;let i=(e=this.cellRendererParams.valueFormatted==null?this.cellRendererParams.value:this.cellRendererParams.valueFormatted)!=null?e:this.translate("blanks");typeof i!="string"&&(Q.warnOnce(`Set Filter Value Formatter must return string values. Please ensure the Set Filter Value Formatter returns string values for complex objects, or set convertValuesToStrings=true in the filterParams. See ${this.getFrameworkOverrides().getDocLink("filter-set-filter-list/#filter-value-types")}`),i=""),this.eCheckbox.setLabel(i),this.setupFixedAriaLabels(i)}getComponentHolder(){return this.params.column.getColDef()}};Jo.EVENT_SELECTION_CHANGED="selectionChanged";Jo.EVENT_EXPANDED_CHANGED="expandedChanged";Jo.GROUP_TEMPLATE=`
        <div class="ag-set-filter-item" aria-hidden="true">
            <span class="ag-set-filter-group-icons">
                <span class="ag-set-filter-group-closed-icon" ref="eGroupClosedIcon"></span>
                <span class="ag-set-filter-group-opened-icon" ref="eGroupOpenedIcon"></span>
                <span class="ag-set-filter-group-indeterminate-icon" ref="eGroupIndeterminateIcon"></span>
            </span>
            <ag-checkbox ref="eCheckbox" class="ag-set-filter-item-checkbox"></ag-checkbox>
        </div>`;Jo.TEMPLATE=`
        <div class="ag-set-filter-item">
            <ag-checkbox ref="eCheckbox" class="ag-set-filter-item-checkbox"></ag-checkbox>
        </div>`;dn([W("valueService")],Jo.prototype,"valueService",2);dn([W("userComponentFactory")],Jo.prototype,"userComponentFactory",2);dn([pe("eCheckbox")],Jo.prototype,"eCheckbox",2);dn([pe("eGroupOpenedIcon")],Jo.prototype,"eGroupOpenedIcon",2);dn([pe("eGroupClosedIcon")],Jo.prototype,"eGroupClosedIcon",2);dn([pe("eGroupIndeterminateIcon")],Jo.prototype,"eGroupIndeterminateIcon",2);dn([de],Jo.prototype,"init",1);var bT=Jo,ple={loadingOoo:"Loading...",blanks:"(Blanks)",searchOoo:"Search...",selectAll:"(Select All)",selectAllSearchResults:"(Select All Search Results)",addCurrentSelectionToFilter:"Add current selection to filter",noMatches:"No matches."},cH=class{getModelAsString(t,e){const{values:i}=t||e.getModel()||{},s=e.getValueModel();if(i==null||s==null)return"";const r=i.filter(a=>s.isKeyAvailable(a)),n=r.length,o=r.slice(0,10).map(a=>e.getFormattedValue(a));return`(${n}) ${o.join(",")}${n>10?",...":""}`}},Hc=class extends Au{constructor(){super("setFilter"),this.valueModel=null,this.setFilterParams=null,this.virtualList=null,this.caseSensitive=!1,this.convertValuesToStrings=!1,this.treeDataTreeList=!1,this.groupingTreeList=!1,this.hardRefreshVirtualList=!1,this.noValueFormatterSupplied=!1,this.filterModelFormatter=new cH,this.updateSetFilterOnParamsChange=t=>{var e;this.setFilterParams=t,this.convertValuesToStrings=!!t.convertValuesToStrings,this.caseSensitive=!!t.caseSensitive;const i=(e=t.keyCreator)!=null?e:t.colDef.keyCreator;this.setValueFormatter(t.valueFormatter,i,this.convertValuesToStrings,!!t.treeList,!!t.colDef.refData);const s=t.column.getId().startsWith(rc);this.treeDataTreeList=this.gos.get("treeData")&&!!t.treeList&&s,this.getDataPath=this.gos.get("getDataPath"),this.groupingTreeList=!!this.columnModel.getRowGroupColumns().length&&!!t.treeList&&s,this.createKey=this.generateCreateKey(i,this.convertValuesToStrings,this.treeDataTreeList||this.groupingTreeList)}}postConstruct(){super.postConstruct()}updateUiVisibility(){}createBodyTemplate(){return`
            <div class="ag-set-filter">
                <div ref="eFilterLoading" class="ag-filter-loading ag-hidden">${this.translateForSetFilter("loadingOoo")}</div>
                <ag-input-text-field class="ag-mini-filter" ref="eMiniFilter"></ag-input-text-field>
                <div ref="eFilterNoMatches" class="ag-filter-no-matches ag-hidden">${this.translateForSetFilter("noMatches")}</div>
                <div ref="eSetFilterList" class="ag-set-filter-list" role="presentation"></div>
            </div>`}handleKeyDown(t){if(super.handleKeyDown(t),!t.defaultPrevented)switch(t.key){case ce.SPACE:this.handleKeySpace(t);break;case ce.ENTER:this.handleKeyEnter(t);break;case ce.LEFT:this.handleKeyLeft(t);break;case ce.RIGHT:this.handleKeyRight(t);break}}handleKeySpace(t){var e;(e=this.getComponentForKeyEvent(t))==null||e.toggleSelected()}handleKeyEnter(t){if(!this.setFilterParams)return;const{excelMode:e,readOnly:i}=this.setFilterParams||{};!e||i||(t.preventDefault(),this.onBtApply(!1,!1,t),this.setFilterParams.excelMode==="mac"&&this.eMiniFilter.getInputElement().select())}handleKeyLeft(t){var e;(e=this.getComponentForKeyEvent(t))==null||e.setExpanded(!1)}handleKeyRight(t){var e;(e=this.getComponentForKeyEvent(t))==null||e.setExpanded(!0)}getComponentForKeyEvent(t){var e;if(!this.eSetFilterList.contains(this.gos.getActiveDomElement())||!this.virtualList)return;const i=this.virtualList.getLastFocusedRow();if(i==null)return;const s=this.virtualList.getComponentAt(i);if(s==null)return;t.preventDefault();const{readOnly:r}=(e=this.setFilterParams)!=null?e:{};if(!r)return s}getCssIdentifier(){return"set-filter"}setModel(t){var e;return t==null&&((e=this.valueModel)==null?void 0:e.getModel())==null?(this.setMiniFilter(null),Ft.resolve()):super.setModel(t)}refresh(t){var e,i,s;return!super.refresh(t)||["treeList","treeListFormatter","treeListPathGetter","keyCreator","convertValuesToStrings","caseSensitive","comparator","suppressSelectAll","excelMode"].some(n=>{var o;return t[n]!==((o=this.setFilterParams)==null?void 0:o[n])})||this.haveColDefParamsChanged(t.colDef)?!1:(super.updateParams(t),this.updateSetFilterOnParamsChange(t),this.updateMiniFilter(),(t.cellRenderer!==((e=this.setFilterParams)==null?void 0:e.cellRenderer)||t.valueFormatter!==((i=this.setFilterParams)==null?void 0:i.valueFormatter))&&this.checkAndRefreshVirtualList(),(s=this.valueModel)==null||s.updateOnParamsChange(t).then(()=>{var n;(n=this.valueModel)!=null&&n.hasSelections()&&this.refreshFilterValues()}),!0)}haveColDefParamsChanged(t){var e;const i=["keyCreator","filterValueGetter"],s=(e=this.setFilterParams)==null?void 0:e.colDef;return i.some(r=>t[r]!==(s==null?void 0:s[r]))}setModelAndRefresh(t){return this.valueModel?this.valueModel.setModel(t).then(()=>this.checkAndRefreshVirtualList()):Ft.resolve()}resetUiToDefaults(){return this.setMiniFilter(null),this.setModelAndRefresh(null)}setModelIntoUi(t){this.setMiniFilter(null);const e=t==null?null:t.values;return this.setModelAndRefresh(e)}getModelFromUi(){if(!this.valueModel)throw new Error("Value model has not been created.");const t=this.valueModel.getModel();return t?{values:t,filterType:this.getFilterType()}:null}getFilterType(){return"set"}getValueModel(){return this.valueModel}areModelsEqual(t,e){return t==null&&e==null?!0:t!=null&&e!=null&&Q.areEqual(t.values,e.values)}setParams(t){var e;this.applyExcelModeOptions(t),super.setParams(t),this.updateSetFilterOnParamsChange(t);const i=(e=t.keyCreator)!=null?e:t.colDef.keyCreator;this.valueModel=new lH({filterParams:t,setIsLoading:s=>this.setIsLoading(s),translate:s=>this.translateForSetFilter(s),caseFormat:s=>this.caseFormat(s),createKey:this.createKey,valueFormatter:this.valueFormatter,usingComplexObjects:!!i,gos:this.gos,columnModel:this.columnModel,valueService:this.valueService,treeDataTreeList:this.treeDataTreeList,groupingTreeList:this.groupingTreeList,addManagedListener:(s,r)=>this.addManagedListener(this.eventService,s,r)}),this.initialiseFilterBodyUi(),this.addEventListenersForDataChanges()}onAddCurrentSelectionToFilterChange(t){if(!this.valueModel)throw new Error("Value model has not been created.");this.valueModel.setAddCurrentSelectionToFilter(t)}setValueFormatter(t,e,i,s,r){let n=t;if(!n){if(e&&!i&&!s)throw new Error("AG Grid: Must supply a Value Formatter in Set Filter params when using a Key Creator unless convertValuesToStrings is enabled");this.noValueFormatterSupplied=!0,r||(n=o=>Q.toStringOrNull(o.value))}this.valueFormatter=n}generateCreateKey(t,e,i){if(i&&!t)throw new Error("AG Grid: Must supply a Key Creator in Set Filter params when `treeList = true` on a group column, and Tree Data or Row Grouping is enabled.");return t?(s,r=null)=>{const n=this.getKeyCreatorParams(s,r);return Q.makeNull(t(n))}:e?s=>Array.isArray(s)?s:Q.makeNull(Q.toStringOrNull(s)):s=>Q.makeNull(Q.toStringOrNull(s))}getFormattedValue(t){var e;let i=this.valueModel.getValue(t);this.noValueFormatterSupplied&&(this.treeDataTreeList||this.groupingTreeList)&&Array.isArray(i)&&(i=Q.last(i));const s=this.valueService.formatValue(this.setFilterParams.column,null,i,this.valueFormatter,!1);return(e=s??Q.toStringOrNull(i))!=null?e:this.translateForSetFilter("blanks")}applyExcelModeOptions(t){t.excelMode==="windows"?(t.buttons||(t.buttons=["apply","cancel"]),t.closeOnApply==null&&(t.closeOnApply=!0)):t.excelMode==="mac"&&(t.buttons||(t.buttons=["reset"]),t.applyMiniFilterWhileTyping==null&&(t.applyMiniFilterWhileTyping=!0),t.debounceMs==null&&(t.debounceMs=500)),t.excelMode&&t.defaultToNothingSelected&&(t.defaultToNothingSelected=!1,Q.warnOnce('The Set Filter Parameter "defaultToNothingSelected" value was ignored because it does not work when "excelMode" is used.'))}addEventListenersForDataChanges(){this.isValuesTakenFromGrid()&&(this.addManagedListener(this.eventService,K.EVENT_CELL_VALUE_CHANGED,t=>{this.setFilterParams&&t.column===this.setFilterParams.column&&this.syncAfterDataChange()}),this.addManagedPropertyListeners(["treeData","getDataPath","groupAllowUnbalanced"],()=>{this.syncAfterDataChange()}))}syncAfterDataChange(){if(!this.valueModel)throw new Error("Value model has not been created.");return this.valueModel.refreshValues().then(()=>{this.checkAndRefreshVirtualList(),this.onBtApply(!1,!0)})}setIsLoading(t){Q.setDisplayed(this.eFilterLoading,t),t||(this.hardRefreshVirtualList=!0)}initialiseFilterBodyUi(){this.initVirtualList(),this.initMiniFilter()}initVirtualList(){if(!this.setFilterParams)throw new Error("Set filter params have not been provided.");if(!this.valueModel)throw new Error("Value model has not been created.");const e=this.localeService.getLocaleTextFunc()("ariaFilterList","Filter List"),i=!!this.setFilterParams.treeList,s=this.virtualList=this.createBean(new tp({cssIdentifier:"filter",ariaRole:i?"tree":"listbox",listName:e})),r=this.getRefElement("eSetFilterList");i&&r.classList.add("ag-set-filter-tree-list"),r&&r.appendChild(s.getGui());const{cellHeight:n}=this.setFilterParams;n!=null&&s.setRowHeight(n);const o=(c,u)=>this.createSetListItem(c,i,u);s.setComponentCreator(o);const a=(c,u)=>this.updateSetListItem(c,u);s.setComponentUpdater(a);let l;this.setFilterParams.suppressSelectAll?l=new fle(this.valueModel):l=new gle(this.valueModel,()=>this.isSelectAllSelected()),i&&(l=new mle(l)),s.setModel(l)}getSelectAllLabel(){if(!this.setFilterParams)throw new Error("Set filter params have not been provided.");if(!this.valueModel)throw new Error("Value model has not been created.");const t=this.valueModel.getMiniFilter()==null||!this.setFilterParams.excelMode?"selectAll":"selectAllSearchResults";return this.translateForSetFilter(t)}getAddSelectionToFilterLabel(){if(!this.setFilterParams)throw new Error("Set filter params have not been provided.");if(!this.valueModel)throw new Error("Value model has not been created.");return this.translateForSetFilter("addCurrentSelectionToFilter")}createSetListItem(t,e,i){if(!this.setFilterParams)throw new Error("Set filter params have not been provided.");if(!this.valueModel)throw new Error("Value model has not been created.");const s=this.valueModel.hasGroups(),{isSelected:r,isExpanded:n}=this.isSelectedExpanded(t),{value:o,depth:a,isGroup:l,hasIndeterminateExpandState:c,selectedListener:u,expandedListener:d}=this.newSetListItemAttributes(t,e),h={focusWrapper:i,value:o,params:this.setFilterParams,translate:f=>this.translateForSetFilter(f),valueFormatter:this.valueFormatter,item:t,isSelected:r,isTree:e,depth:a,groupsExist:s,isGroup:l,isExpanded:n,hasIndeterminateExpandState:c},p=this.createBean(new bT(h));return p.addEventListener(bT.EVENT_SELECTION_CHANGED,u),d&&p.addEventListener(bT.EVENT_EXPANDED_CHANGED,d),p}newSetTreeItemAttributes(t,e){var i,s,r,n,o,a;if(!this.setFilterParams)throw new Error("Set filter params have not been provided.");if(!this.valueModel)throw new Error("Value model has not been created.");const l=this.valueModel.hasGroups();return t.key===Ar.SELECT_ALL?{value:()=>this.getSelectAllLabel(),isGroup:l,depth:t.depth,hasIndeterminateExpandState:!0,selectedListener:c=>this.onSelectAll(c.isSelected),expandedListener:c=>this.onExpandAll(c.item,c.isExpanded)}:t.key===Ar.ADD_SELECTION_TO_FILTER?{value:()=>this.getAddSelectionToFilterLabel(),depth:t.depth,isGroup:!1,hasIndeterminateExpandState:!1,selectedListener:c=>{this.onAddCurrentSelectionToFilterChange(c.isSelected)}}:t.children?{value:(r=(s=(i=this.setFilterParams).treeListFormatter)==null?void 0:s.call(i,t.treeKey,t.depth,t.parentTreeKeys))!=null?r:t.treeKey,depth:t.depth,isGroup:!0,selectedListener:c=>this.onGroupItemSelected(c.item,c.isSelected),expandedListener:c=>this.onExpandedChanged(c.item,c.isExpanded)}:{value:(a=(o=(n=this.setFilterParams).treeListFormatter)==null?void 0:o.call(n,t.treeKey,t.depth,t.parentTreeKeys))!=null?a:t.treeKey,depth:t.depth,selectedListener:c=>this.onItemSelected(c.item.key,c.isSelected)}}newSetListItemAttributes(t,e){if(!this.setFilterParams)throw new Error("Set filter params have not been provided.");if(!this.valueModel)throw new Error("Value model has not been created.");return this.isSetFilterModelTreeItem(t)?this.newSetTreeItemAttributes(t,e):t===Ar.SELECT_ALL?{value:()=>this.getSelectAllLabel(),selectedListener:i=>this.onSelectAll(i.isSelected)}:t===Ar.ADD_SELECTION_TO_FILTER?{value:()=>this.getAddSelectionToFilterLabel(),selectedListener:i=>{this.onAddCurrentSelectionToFilterChange(i.isSelected)}}:{value:this.valueModel.getValue(t),selectedListener:i=>this.onItemSelected(i.item,i.isSelected)}}updateSetListItem(t,e){const{isSelected:i,isExpanded:s}=this.isSelectedExpanded(t);e.refresh(t,i,s)}isSelectedExpanded(t){let e,i;return this.isSetFilterModelTreeItem(t)?(i=t.expanded,t.key===Ar.SELECT_ALL?e=this.isSelectAllSelected():t.key===Ar.ADD_SELECTION_TO_FILTER?e=this.valueModel.isAddCurrentSelectionToFilterChecked():t.children?e=this.areAllChildrenSelected(t):e=this.valueModel.isKeySelected(t.key)):t===Ar.SELECT_ALL?e=this.isSelectAllSelected():t===Ar.ADD_SELECTION_TO_FILTER?e=this.valueModel.isAddCurrentSelectionToFilterChecked():e=this.valueModel.isKeySelected(t),{isSelected:e,isExpanded:i}}isSetFilterModelTreeItem(t){return(t==null?void 0:t.treeKey)!==void 0}initMiniFilter(){if(!this.setFilterParams)throw new Error("Set filter params have not been provided.");if(!this.valueModel)throw new Error("Value model has not been created.");const{eMiniFilter:t,localeService:e}=this,i=e.getLocaleTextFunc();t.setDisplayed(!this.setFilterParams.suppressMiniFilter),t.setValue(this.valueModel.getMiniFilter()),t.onValueChange(()=>this.onMiniFilterInput()),t.setInputAriaLabel(i("ariaSearchFilterValues","Search filter values")),this.addManagedListener(t.getInputElement(),"keydown",s=>this.onMiniFilterKeyDown(s))}updateMiniFilter(){if(!this.setFilterParams)throw new Error("Set filter params have not been provided.");if(!this.valueModel)throw new Error("Value model has not been created.");const{eMiniFilter:t}=this;t.isDisplayed()!==!this.setFilterParams.suppressMiniFilter&&t.setDisplayed(!this.setFilterParams.suppressMiniFilter);const e=this.valueModel.getMiniFilter();t.getValue()!==e&&t.setValue(e)}afterGuiAttached(t){if(!this.setFilterParams)throw new Error("Set filter params have not been provided.");super.afterGuiAttached(t),this.resetExpansion(),this.refreshVirtualList();const{eMiniFilter:e}=this;e.setInputPlaceholder(this.translateForSetFilter("searchOoo")),(!t||!t.suppressFocus)&&e.getFocusableElement().focus()}afterGuiDetached(){var t,e;super.afterGuiDetached(),(t=this.setFilterParams)!=null&&t.excelMode&&this.resetMiniFilter();const i=this.getModel();((e=this.setFilterParams)!=null&&e.excelMode||!this.areModelsEqual(i,this.getModelFromUi()))&&(this.resetUiToActiveModel(i),this.showOrHideResults())}applyModel(t="api"){if(!this.setFilterParams)throw new Error("Set filter params have not been provided.");if(!this.valueModel)throw new Error("Value model has not been created.");this.setFilterParams.excelMode&&t!=="rowDataUpdated"&&this.valueModel.isEverythingVisibleSelected()&&this.valueModel.selectAllMatchingMiniFilter();const e=this.valueModel.showAddCurrentSelectionToFilter()&&this.valueModel.isAddCurrentSelectionToFilterChecked();if(e&&!this.getModel())return!1;const i=super.applyModel(t),s=this.getModel();return s?(e||this.valueModel.setAppliedModelKeys(new Set),s.values.forEach(r=>{this.valueModel.addToAppliedModelKeys(r)})):e||this.valueModel.setAppliedModelKeys(null),i}isModelValid(t){return this.setFilterParams&&this.setFilterParams.excelMode?t==null||t.values.length>0:!0}doesFilterPass(t){if(!this.setFilterParams||!this.valueModel||!this.valueModel.getCaseFormattedAppliedModelKeys())return!0;if(!this.valueModel.hasAnyAppliedModelKey())return!1;const{node:e,data:i}=t;if(this.treeDataTreeList)return this.doesFilterPassForTreeData(e,i);if(this.groupingTreeList)return this.doesFilterPassForGrouping(e);let s=this.getValueFromNode(e);return this.convertValuesToStrings?this.doesFilterPassForConvertValuesToString(e,s):s!=null&&Array.isArray(s)?s.length===0?this.valueModel.hasAppliedModelKey(null):s.some(r=>this.isInAppliedModel(this.createKey(r,e))):this.isInAppliedModel(this.createKey(s,e))}doesFilterPassForConvertValuesToString(t,e){const i=this.createKey(e,t);return i!=null&&Array.isArray(i)?i.length===0?this.valueModel.hasAppliedModelKey(null):i.some(s=>this.isInAppliedModel(s)):this.isInAppliedModel(i)}doesFilterPassForTreeData(t,e){var i;return(i=t.childrenAfterGroup)!=null&&i.length?!1:this.isInAppliedModel(this.createKey(this.checkMakeNullDataPath(this.getDataPath(e))))}doesFilterPassForGrouping(t){const e=this.columnModel.getRowGroupColumns().map(i=>this.valueService.getKeyForNode(i,t));return e.push(this.getValueFromNode(t)),this.isInAppliedModel(this.createKey(this.checkMakeNullDataPath(e)))}checkMakeNullDataPath(t){return t&&(t=t.map(e=>Q.toStringOrNull(Q.makeNull(e)))),t!=null&&t.some(e=>e==null)?null:t}isInAppliedModel(t){return this.valueModel.hasAppliedModelKey(t)}getValueFromNode(t){return this.setFilterParams.getValue(t)}getKeyCreatorParams(t,e=null){return{value:t,colDef:this.setFilterParams.colDef,column:this.setFilterParams.column,node:e,data:e==null?void 0:e.data,api:this.setFilterParams.api,columnApi:this.setFilterParams.columnApi,context:this.setFilterParams.context}}onNewRowsLoaded(){this.isValuesTakenFromGrid()&&this.syncAfterDataChange()}isValuesTakenFromGrid(){return this.valueModel?this.valueModel.getValuesType()===2:!1}setFilterValues(t){if(!this.valueModel)throw new Error("Value model has not been created.");this.valueModel.overrideValues(t).then(()=>{this.checkAndRefreshVirtualList(),this.onUiChanged()})}resetFilterValues(){if(!this.valueModel)throw new Error("Value model has not been created.");this.valueModel.setValuesType(2),this.syncAfterDataChange()}refreshFilterValues(){if(!this.valueModel)throw new Error("Value model has not been created.");this.valueModel.isInitialised()&&this.valueModel.refreshValues().then(()=>{this.checkAndRefreshVirtualList(),this.onUiChanged()})}onAnyFilterChanged(){setTimeout(()=>{if(this.isAlive()){if(!this.valueModel)throw new Error("Value model has not been created.");this.valueModel.refreshAfterAnyFilterChanged().then(t=>{t&&(this.checkAndRefreshVirtualList(),this.showOrHideResults())})}},0)}onMiniFilterInput(){if(!this.setFilterParams)throw new Error("Set filter params have not been provided.");if(!this.valueModel)throw new Error("Value model has not been created.");if(!this.valueModel.setMiniFilter(this.eMiniFilter.getValue()))return;const{applyMiniFilterWhileTyping:t,readOnly:e}=this.setFilterParams||{};!e&&t?this.filterOnAllVisibleValues(!1):this.updateUiAfterMiniFilterChange()}updateUiAfterMiniFilterChange(){if(!this.setFilterParams)throw new Error("Set filter params have not been provided.");if(!this.valueModel)throw new Error("Value model has not been created.");const{excelMode:t,readOnly:e}=this.setFilterParams||{};t==null||e?this.checkAndRefreshVirtualList():this.valueModel.getMiniFilter()==null?this.resetUiToActiveModel(this.getModel()):(this.valueModel.selectAllMatchingMiniFilter(!0),this.checkAndRefreshVirtualList(),this.onUiChanged()),this.showOrHideResults()}showOrHideResults(){if(!this.valueModel)throw new Error("Value model has not been created.");const t=this.valueModel.getMiniFilter()!=null&&this.valueModel.getDisplayedValueCount()<1;Q.setDisplayed(this.eNoMatches,t),Q.setDisplayed(this.eSetFilterList,!t)}resetMiniFilter(){var t;this.eMiniFilter.setValue(null,!0),(t=this.valueModel)==null||t.setMiniFilter(null)}resetUiToActiveModel(t,e){this.setModelAndRefresh(t==null?null:t.values).then(()=>{this.onUiChanged(!1,"prevent"),e==null||e()})}handleCancelEnd(t){this.setMiniFilter(null),super.handleCancelEnd(t)}onMiniFilterKeyDown(t){const{excelMode:e,readOnly:i}=this.setFilterParams||{};t.key===ce.ENTER&&!e&&!i&&this.filterOnAllVisibleValues()}filterOnAllVisibleValues(t=!0){const{readOnly:e}=this.setFilterParams||{};if(!this.valueModel)throw new Error("Value model has not been created.");if(e)throw new Error("Unable to filter in readOnly mode.");this.valueModel.selectAllMatchingMiniFilter(!0),this.checkAndRefreshVirtualList(),this.onUiChanged(!1,t?"immediately":"debounce"),this.showOrHideResults()}focusRowIfAlive(t){t!=null&&window.setTimeout(()=>{if(!this.virtualList)throw new Error("Virtual list has not been created.");this.isAlive()&&this.virtualList.focusRow(t)},0)}onSelectAll(t){if(!this.valueModel)throw new Error("Value model has not been created.");if(!this.virtualList)throw new Error("Virtual list has not been created.");t?this.valueModel.selectAllMatchingMiniFilter():this.valueModel.deselectAllMatchingMiniFilter(),this.refreshAfterSelection()}onGroupItemSelected(t,e){const i=s=>{s.children?s.children.forEach(r=>i(r)):this.selectItem(s.key,e)};i(t),this.refreshAfterSelection()}onItemSelected(t,e){if(!this.valueModel)throw new Error("Value model has not been created.");if(!this.virtualList)throw new Error("Virtual list has not been created.");this.selectItem(t,e),this.refreshAfterSelection()}selectItem(t,e){e?this.valueModel.selectKey(t):this.valueModel.deselectKey(t)}onExpandAll(t,e){const i=s=>{s.filterPasses&&s.available&&s.children&&(s.children.forEach(r=>i(r)),s.expanded=e)};i(t),this.refreshAfterExpansion()}onExpandedChanged(t,e){t.expanded=e,this.refreshAfterExpansion()}refreshAfterExpansion(){const t=this.virtualList.getLastFocusedRow();this.valueModel.updateDisplayedValues("expansion"),this.checkAndRefreshVirtualList(),this.focusRowIfAlive(t)}refreshAfterSelection(){const t=this.virtualList.getLastFocusedRow();this.checkAndRefreshVirtualList(),this.onUiChanged(),this.focusRowIfAlive(t)}setMiniFilter(t){this.eMiniFilter.setValue(t),this.onMiniFilterInput()}getMiniFilter(){return this.valueModel?this.valueModel.getMiniFilter():null}checkAndRefreshVirtualList(){if(!this.virtualList)throw new Error("Virtual list has not been created.");this.virtualList.refresh(!this.hardRefreshVirtualList),this.hardRefreshVirtualList&&(this.hardRefreshVirtualList=!1)}getFilterKeys(){return this.valueModel?this.valueModel.getKeys():[]}getFilterValues(){return this.valueModel?this.valueModel.getValues():[]}getValues(){return this.getFilterKeys()}refreshVirtualList(){this.setFilterParams&&this.setFilterParams.refreshValuesOnOpen?this.refreshFilterValues():this.checkAndRefreshVirtualList()}translateForSetFilter(t){return this.localeService.getLocaleTextFunc()(t,ple[t])}isSelectAllSelected(){if(!this.setFilterParams||!this.valueModel)return!1;if(this.setFilterParams.defaultToNothingSelected){if(this.valueModel.hasSelections()&&this.valueModel.isEverythingVisibleSelected())return!0;if(this.valueModel.isNothingVisibleSelected())return!1}else{if(this.valueModel.hasSelections()&&this.valueModel.isNothingVisibleSelected())return!1;if(this.valueModel.isEverythingVisibleSelected())return!0}}areAllChildrenSelected(t){const e=i=>{if(i.children){let s=!1,r=!1;return i.children.some(o=>{if(!o.filterPasses||!o.available)return!1;const a=e(o);return a===void 0?!0:(a?s=!0:r=!0,s&&r)})?void 0:s}else return this.valueModel.isKeySelected(i.key)};return this.setFilterParams.defaultToNothingSelected?this.valueModel.hasSelections()&&e(t):e(t)}destroy(){this.virtualList!=null&&(this.virtualList.destroy(),this.virtualList=null),super.destroy()}caseFormat(t){return t==null||typeof t!="string"||this.caseSensitive?t:t.toUpperCase()}resetExpansion(){var t,e;if(!((t=this.setFilterParams)!=null&&t.treeList))return;const i=(e=this.valueModel)==null?void 0:e.getSelectAllItem();if(this.isSetFilterModelTreeItem(i)){const s=r=>{r.children&&(r.children.forEach(n=>s(n)),r.expanded=!1)};s(i),this.valueModel.updateDisplayedValues("expansion")}}getModelAsString(t){return this.filterModelFormatter.getModelAsString(t,this)}getPositionableElement(){return this.eSetFilterList}};dn([pe("eMiniFilter")],Hc.prototype,"eMiniFilter",2);dn([pe("eFilterLoading")],Hc.prototype,"eFilterLoading",2);dn([pe("eSetFilterList")],Hc.prototype,"eSetFilterList",2);dn([pe("eFilterNoMatches")],Hc.prototype,"eNoMatches",2);dn([W("columnModel")],Hc.prototype,"columnModel",2);dn([W("valueService")],Hc.prototype,"valueService",2);var fle=class{constructor(t){this.model=t}getRowCount(){return this.model.getDisplayedValueCount()}getRow(t){return this.model.getDisplayedItem(t)}areRowsEqual(t,e){return t===e}},gle=class{constructor(t,e){this.model=t,this.isSelectAllSelected=e}getRowCount(){const e=this.model.showAddCurrentSelectionToFilter()?2:1;return this.model.getDisplayedValueCount()+e}getRow(t){if(t===0)return this.model.getSelectAllItem();const e=this.model.showAddCurrentSelectionToFilter(),i=e?2:1;return t===1&&e?this.model.getAddSelectionToFilterItem():this.model.getDisplayedItem(t-i)}areRowsEqual(t,e){return t===e}},mle=class{constructor(t){this.model=t}getRowCount(){return this.model.getRowCount()}getRow(t){return this.model.getRow(t)}areRowsEqual(t,e){return t==null&&e==null?!0:t!=null&&e!=null&&t.treeKey===e.treeKey&&t.depth===e.depth}},A2=class extends Te{constructor(){super(`
            <div class="ag-floating-filter-input ag-set-floating-filter-input" role="presentation">
                <ag-input-text-field ref="eFloatingFilterText"></ag-input-text-field>
            </div>`),this.availableValuesListenerAdded=!1,this.filterModelFormatter=new cH}destroy(){super.destroy()}init(t){this.params=t,this.eFloatingFilterText.setDisabled(!0).addGuiEventListener("click",()=>this.params.showParentFilter()),this.setParams(t)}setParams(t){const e=this.columnModel.getDisplayNameForColumn(t.column,"header",!0),i=this.localeService.getLocaleTextFunc();this.eFloatingFilterText.setInputAriaLabel(`${e} ${i("ariaFilterInput","Filter Input")}`)}onParamsUpdated(t){this.refresh(t)}refresh(t){this.params=t,this.setParams(t)}onParentModelChanged(t){this.updateFloatingFilterText(t)}parentSetFilterInstance(t){this.params.parentFilterInstance(e=>{if(!(e instanceof Hc))throw new Error("AG Grid - SetFloatingFilter expects SetFilter as its parent");t(e)})}addAvailableValuesListener(){this.parentSetFilterInstance(t=>{const e=t.getValueModel();e&&this.addManagedListener(e,lH.EVENT_AVAILABLE_VALUES_CHANGED,()=>this.updateFloatingFilterText())}),this.availableValuesListenerAdded=!0}updateFloatingFilterText(t){this.availableValuesListenerAdded||this.addAvailableValuesListener(),this.parentSetFilterInstance(e=>{this.eFloatingFilterText.setValue(this.filterModelFormatter.getModelAsString(t,e))})}};dn([pe("eFloatingFilterText")],A2.prototype,"eFloatingFilterText",2);dn([W("columnModel")],A2.prototype,"columnModel",2);var vle="31.3.4",uH={version:vle,moduleName:Ut.SetFilterModule,beans:[],userComponents:[{componentName:"agSetColumnFilter",componentClass:Hc},{componentName:"agSetColumnFloatingFilter",componentClass:A2}],dependantModules:[Qs]},dH=Object.defineProperty,yle=Object.getOwnPropertyDescriptor,mk=Object.getOwnPropertySymbols,Cle=Object.prototype.hasOwnProperty,ble=Object.prototype.propertyIsEnumerable,vk=(t,e,i)=>e in t?dH(t,e,{enumerable:!0,configurable:!0,writable:!0,value:i}):t[e]=i,wle=(t,e)=>{for(var i in e||(e={}))Cle.call(e,i)&&vk(t,i,e[i]);if(mk)for(var i of mk(e))ble.call(e,i)&&vk(t,i,e[i]);return t},Am=(t,e,i,s)=>{for(var r=s>1?void 0:s?yle(e,i):e,n=t.length-1,o;n>=0;n--)(o=t[n])&&(r=(s?o(e,i,r):o(r))||r);return s&&r&&dH(e,i,r),r},Sle=`
.ag-sparkline-tooltip-wrapper {
    position: absolute;
    user-select: none;
    pointer-events: none;
}

.ag-sparkline-tooltip {
    position: relative;
    font: 12px arial,sans-serif;
    border-radius: 2px;
    box-shadow: 0 1px 3px rgb(0 0 0 / 20%), 0 1px 1px rgb(0 0 0 / 14%);
    line-height: 1.7em;
    overflow: hidden;
    white-space: nowrap;
    z-index: 99999;
    background-color: rgb(255, 255, 255);
    color: rgba(0,0,0, 0.67);
}

.ag-sparkline-tooltip-content {
    padding: 0 7px;
    opacity: 1;
}

.ag-sparkline-tooltip-title {
    padding-left: 7px;
    opacity: 1;
}

.ag-sparkline-tooltip-wrapper-hidden {
    top: -10000px !important;
}

.ag-sparkline-wrapper {
    box-sizing: border-box;
    overflow: hidden;
}
`,{extent:xle,isNumber:qm,isString:Ele,isStringObject:Tle,isDate:yk,createId:_le,Padding:Ale}=qs,{LinearScale:wT,BandScale:Rle,TimeScale:Ck}=yp,Mle=class{constructor(){this.type="category",this.stroke="rgb(204, 214, 235)",this.strokeWidth=1}},hH=class UA{constructor(){this.id=_le(this),this.seriesRect={x:0,y:0,width:0,height:0},this._context=void 0,this._container=void 0,this._data=void 0,this.padding=new Ale(3),this.xKey="x",this.yKey="y",this.dataType=void 0,this.xData=[],this.yData=[],this.min=void 0,this.max=void 0,this.yScale=new wT,this.axis=new Mle,this.highlightStyle={size:6,fill:"yellow",stroke:"silver",strokeWidth:1},this._width=100,this._height=100,this.smallestInterval=void 0,this.layoutId=0,this.defaultDateFormatter=new Intl.DateTimeFormat("en-US",{year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit",hour12:!1}),this._onMouseMove=this.onMouseMove.bind(this),this._onMouseOut=this.onMouseOut.bind(this);const e=new Ae.Group;this.rootGroup=e;const i=document.createElement("div");i.setAttribute("class","ag-sparkline-wrapper");const s=new Ae.Scene({});this.scene=s,this.canvasElement=s.canvas.element,s.setRoot(e),s.setContainer(i),this.resizeAndSetDimensions(this.width,this.height),UA.tooltipDocuments.includes(document)||this.initialiseTooltipStyles(),this.setupDomEventListeners(this.canvasElement)}set context(e){this._context!==e&&(this._context=e)}get context(){return this._context}set container(e){if(this._container!==e){const{parentNode:i}=this.canvasElement;i!=null&&i.removeChild(this.canvasElement),e&&e.appendChild(this.canvasElement),this._container=e}}get container(){return this._container}set data(e){this._data!==e&&(this._data=e,this.processData(),this.mouseMoveEvent&&this.highlightedDatum&&this.updateHitPoint(this.mouseMoveEvent))}get data(){return this._data}resizeAndSetDimensions(e,i){this.scene.resize(e,i),this.seriesRect.width=e,this.seriesRect.height=i}initialiseTooltipStyles(){const e=document.createElement("style");e.innerHTML=Sle,document.head.insertBefore(e,document.head.querySelector("style")),UA.tooltipDocuments.push(document)}set width(e){this._width!==e&&(this._width=e,this.scene.resize(e,this.height),this.scheduleLayout())}get width(){return this._width}set height(e){this._height!==e&&(this._height=e,this.scene.resize(this.width,e),this.scheduleLayout())}get height(){return this._height}update(){}updateYScale(){this.updateYScaleRange(),this.updateYScaleDomain()}updateYScaleDomain(){}updateYScaleRange(){const{yScale:e,seriesRect:i}=this;e.range=[i.height,0]}updateXScale(){const{type:e}=this.axis;this.xScale=this.getXScale(e),this.updateXScaleRange(),this.updateXScaleDomain()}updateXScaleRange(){this.xScale.range=[0,this.seriesRect.width]}updateXScaleDomain(){const{xData:e,xScale:i}=this;let s;(i instanceof wT||i instanceof Ck)&&(s=xle(e)),this.xScale.domain=s?s.slice():e}getXScale(e="category"){switch(e){case"number":return new wT;case"time":return new Ck;case"category":default:return new Rle}}updateAxisLine(){}updateAxes(){this.updateYScale(),this.updateXScale(),this.updateAxisLine()}updateCrosshairs(){this.updateXCrosshairLine(),this.updateYCrosshairLine()}generateNodeData(){return[]}getNodeData(){return[]}updateNodes(){}updateXCrosshairLine(){}updateYCrosshairLine(){}highlightDatum(e){this.updateNodes()}dehighlightDatum(){this.highlightedDatum=void 0,this.updateNodes(),this.updateCrosshairs()}onMouseMove(e){this.mouseMoveEvent=e,this.updateHitPoint(e)}updateHitPoint(e){var i,s,r;const n=this.pickClosestSeriesNodeDatum(e.offsetX,e.offsetY);if(!n)return;const o=this.highlightedDatum;this.highlightedDatum=n,(this.highlightedDatum&&!o||this.highlightedDatum&&o&&this.highlightedDatum!==o)&&(this.highlightDatum(n),this.updateCrosshairs(),this.scene.render().catch(l=>console.error("AG Grid - chart rendering failed",l))),((r=(s=(i=this.processedOptions)==null?void 0:i.tooltip)==null?void 0:s.enabled)!=null?r:!0)&&this.handleTooltip(e,n)}onMouseOut(e){this.dehighlightDatum(),this.tooltip.toggle(!1),this.scene.render().catch(i=>console.error("AG Grid - chart rendering failed",i))}processData(){const{data:e,yData:i,xData:s}=this;if(!e||this.invalidData(this.data))return;i.length=0,s.length=0;const r=e.length,n=this.getDataType(e);this.dataType=n;const{type:o}=this.axis,a=o!=="number"&&o!=="time"?"category":o,l=a==="number"||a==="time",c=(d,h)=>{this.smallestInterval==null&&(this.smallestInterval={x:1/0,y:1/0});const{x:p}=this.smallestInterval,f=Math.abs(d-h);f>0&&f<p&&(this.smallestInterval.x=f)};let u;if(n==="number")for(let d=0;d<r;d++){const h=d,p=e[d],f=this.getDatum(h,a),m=this.getDatum(p,"number");l&&c(f,u),s.push(f),i.push(m),u=f}else if(n==="array")for(let d=0;d<r;d++){const h=e[d];if(Array.isArray(h)){const p=h[0],f=h[1],m=this.getDatum(p,a),g=this.getDatum(f,"number");if(m==null)continue;l&&c(m,u),s.push(m),i.push(g),u=m}}else if(n==="object"){const{yKey:d,xKey:h}=this;for(let p=0;p<r;p++){const f=e[p];if(typeof f=="object"&&!Array.isArray(f)){const m=f[h],g=f[d],y=this.getDatum(m,a),v=this.getDatum(g,"number");if(y==null)continue;l&&c(y,u),s.push(y),i.push(v),u=y}}}this.updateAxes(),this.immediateLayout()}getDataType(e){for(const i of e)if(i!=null){if(qm(i))return"number";if(Array.isArray(i))return"array";if(typeof i=="object")return"object"}}getDatum(e,i){if(i==="number"&&qm(e)||i==="time"&&(qm(e)||yk(e)))return e;if(i==="category"){if(Ele(e)||yk(e)||qm(e))return{toString:()=>String(e)};if(Tle(e))return e}}get layoutScheduled(){return!!this.layoutId}scheduleLayout(){this.layoutId&&cancelAnimationFrame(this.layoutId),this.layoutId=requestAnimationFrame(()=>{this.immediateLayout(),this.layoutId=0})}immediateLayout(){this.setSparklineDimensions(),!this.invalidData(this.data)&&(this.updateXScaleRange(),this.updateYScaleRange(),this.updateAxisLine(),this.update(),this.scene.render().catch(e=>console.error("AG Grid - chart rendering failed",e)))}setSparklineDimensions(){const{width:e,height:i,padding:s,seriesRect:r,rootGroup:n}=this,o=e-s.left-s.right,a=i-s.top-s.bottom;r.width=o,r.height=a,r.x=s.left,r.y=s.top,n.translationX=r.x,n.translationY=r.y}pickClosestSeriesNodeDatum(e,i){let s=1/0,r;const n=this.rootGroup.transformPoint(e,i),o=this.getNodeData();for(let a=0;a<o.length;a++){const l=o[a];if(!l.point)return;const c=this.getDistance(n,l.point);c<=s&&(s=c,r=l)}return r}getDistance(e,i){return Math.abs(e.x-i.x)}handleTooltip(e,i){var s,r;const{seriesDatum:n}=i,{canvasElement:o}=this,{clientX:a,clientY:l}=e,c=(s=this.processedOptions)==null?void 0:s.tooltip,u={pageX:a,pageY:l,position:{xOffset:c==null?void 0:c.xOffset,yOffset:c==null?void 0:c.yOffset},container:c==null?void 0:c.container};u.container==null&&(u.container=o);const d=n.y,h=n.x;let p=(r=c==null?void 0:c.enabled)!=null?r:!0;const f=c==null?void 0:c.renderer;if(f){const g=f({context:this.context,datum:n,yValue:d,xValue:h});p=typeof g!="string"&&g.enabled!==void 0?g.enabled:p}const m=p&&n.y!==void 0&&this.getTooltipHtml(i);m&&this.tooltip.show(u,m)}formatNumericDatum(e){return String(Math.round(e*10)/10)}formatDatum(e){const i=this.axis.type||"category";return i==="number"&&typeof e=="number"?this.formatNumericDatum(e):i==="time"&&(e instanceof Date||qm(e))?this.defaultDateFormatter.format(e):String(e)}setupDomEventListeners(e){e.addEventListener("mousemove",this._onMouseMove),e.addEventListener("mouseout",this._onMouseOut)}cleanupDomEventListeners(e){e.removeEventListener("mousemove",this._onMouseMove),e.removeEventListener("mouseout",this._onMouseOut)}invalidData(e){return!e||!Array.isArray(e)}destroy(){this.cleanupDomEventListeners(this.canvasElement),this.scene.destroy(),this.container=void 0}};hH.tooltipDocuments=[];var R2=hH;function Pg(t,e){var i,s,r;if(typeof t=="string")return t;e=e??{};const{content:n=(i=e.content)!=null?i:"",title:o=(s=e.title)!=null?s:void 0,color:a=e.color,backgroundColor:l=e.backgroundColor,opacity:c=(r=e.opacity)!=null?r:1}=t;let u,d;a?(u=o?`<span class="${sf.class}-title"; style="color: ${a}">${o}</span>`:"",d=`<span class="${sf.class}-content" style="color: ${a}">${n}</span>`):(u=o?`<span class="${sf.class}-title">${o}</span>`:"",d=`<span class="${sf.class}-content">${n}</span>`);let h=`opacity: ${c}`;return l&&(h+=`; background-color: ${l.toLowerCase()}`),`<div class="${sf.class}" style="${h}">
                ${u}
                ${d}
            </div>`}var pH=class yv{constructor(){this.element=document.createElement("div"),document.body.appendChild(this.element)}isVisible(){const{element:e}=this;if(e.classList)return!e.classList.contains(`${yv.class}-wrapper-hidden`);const i=e.getAttribute("class");return i?i.split(" ").indexOf(`${yv.class}-wrapper-hidden`)<0:!1}updateClass(e){const i=[`${yv.class}-wrapper`];e!==!0&&i.push(`${yv.class}-wrapper-hidden`),this.element.setAttribute("class",i.join(" "))}show(e,i){var s,r,n,o;this.toggle(!1);const{element:a}=this;if(i!==void 0)a.innerHTML=i;else if(!a.innerHTML)return;const l=(r=(s=e.position)==null?void 0:s.xOffset)!=null?r:10,c=(o=(n=e.position)==null?void 0:n.yOffset)!=null?o:0;let u=e.pageX+l,d=e.pageY+c;const h=a.getBoundingClientRect();let p=window.innerWidth-h.width;if(e.container){const f=e.container.getBoundingClientRect();p=f.left+(f.width-h.width)}u>p&&(u=e.pageX-a.clientWidth-l),typeof scrollX<"u"&&(u+=scrollX),typeof scrollY<"u"&&(d+=scrollY),a.style.left=`${Math.round(u)}px`,a.style.top=`${Math.round(d)}px`,this.toggle(!0)}toggle(e){this.updateClass(e)}destroy(){const{parentNode:e}=this.element;e&&e.removeChild(this.element)}};pH.class="ag-sparkline-tooltip";var sf=pH;function fH(t){switch(t){case"circle":return Ae.Circle;case"square":return Ae.Square;case"diamond":return Ae.Diamond;default:return Ae.Circle}}function IS(t,e="solid"){const i={solid:[],dash:[4,3],dot:[1,3],dashDot:[4,3,1,3],dashDotDot:[4,3,1,3,1,3],shortDot:[1,1],shortDash:[3,1],shortDashDot:[3,1,1,1],shortDashDotDot:[3,1,1,1,1,1],longDash:[8,3],longDashDot:[8,3,1,3],longDashDotDot:[8,3,1,3,1,3]},s={solid:[],dash:[3,3],dot:[0,3],dashDot:[3,3,0,3],dashDotDot:[3,3,0,3,0,3],shortDot:[0,2],shortDash:[2,2],shortDashDot:[2,2,0,2],shortDashDotDot:[2,2,0,2,0,2],longDash:[7,3],longDashDot:[7,3,0,3],longDashDotDot:[7,3,0,3,0,3]};return t==="round"||t==="square"?s[e]==null?(console.warn(`'${e}' is not a valid 'lineDash' option.`),s.solid):s[e]:i[e]==null?(console.warn(`'${e}' is not a valid 'lineDash' option.`),i.solid):i[e]}var{extent:Dle}=qs,{BandScale:Ple}=yp,Ile=class{constructor(){this.enabled=!0,this.shape="circle",this.size=0,this.fill="rgb(124, 181, 236)",this.stroke="rgb(124, 181, 236)",this.strokeWidth=1,this.formatter=void 0}},Fle=class{constructor(){this.stroke="rgb(124, 181, 236)",this.strokeWidth=1}},Lle=class{constructor(){this.xLine={enabled:!0,stroke:"rgba(0,0,0, 0.54)",strokeWidth:1,lineDash:"solid",lineCap:void 0},this.yLine={enabled:!1,stroke:"rgba(0,0,0, 0.54)",strokeWidth:1,lineDash:"solid",lineCap:void 0}}},gH=class extends R2{constructor(){super(),this.fill="rgba(124, 181, 236, 0.25)",this.strokePath=new Ae.Path,this.fillPath=new Ae.Path,this.xCrosshairLine=new Ae.Line,this.yCrosshairLine=new Ae.Line,this.areaSparklineGroup=new Ae.Group,this.xAxisLine=new Ae.Line,this.markers=new Ae.Group,this.markerSelection=Ae.Selection.select(this.markers,()=>this.markerFactory()),this.markerSelectionData=[],this.marker=new Ile,this.line=new Fle,this.crosshairs=new Lle,this.rootGroup.append(this.areaSparklineGroup),this.xAxisLine.zIndex=500,this.fillPath.zIndex=50,this.strokePath.zIndex=1e3,this.xCrosshairLine.zIndex=2e3,this.yCrosshairLine.zIndex=2e3,this.markers.zIndex=2500,this.areaSparklineGroup.append([this.fillPath,this.xAxisLine,this.strokePath,this.xCrosshairLine,this.yCrosshairLine,this.markers])}markerFactory(){const{shape:t}=this.marker,e=fH(t);return new e}getNodeData(){return this.markerSelectionData}update(){const t=this.generateNodeData();if(!t)return;const{nodeData:e,fillData:i,strokeData:s}=t;this.markerSelectionData=e,this.updateSelection(e),this.updateNodes(),this.updateStroke(s),this.updateFill(i)}updateYScaleDomain(){const{yData:t,yScale:e}=this,i=Dle(t);let s=0,r=1;i!==void 0&&(s=this.min=i[0],r=this.max=i[1]),s=s<0?s:0,r=r<0?0:r,e.domain=[s,r]}generateNodeData(){const{data:t,yData:e,xData:i,xScale:s,yScale:r}=this;if(!t)return;const n=!(s instanceof Ple),o=n?0:s.bandwidth/2,a=e.length,l=[],c=[],u=[];let d,h,p,f;const m=r.convert(0);for(let g=0;g<a;g++){const y=e[g],v=i[g],C=s.convert(n?s.toDomain(v):v)+o,b=y===void 0?NaN:r.convert(y);g+1<a&&(f=s.convert(n?s.toDomain(i[g+1]):i[g+1])+o),u.push({seriesDatum:{x:v,y},point:{x:C,y:b}}),y===void 0&&p!==void 0?(c.push({seriesDatum:void 0,point:{x:p,y:m}}),f!==void 0&&c.push({seriesDatum:void 0,point:{x:f,y:m}})):y!==void 0&&(c.push({seriesDatum:{x:v,y},point:{x:C,y:b}}),l.push({seriesDatum:{x:v,y},point:{x:C,y:b}}),d=d!==void 0?d:C,h=C),p=C}return c.push({seriesDatum:void 0,point:{x:h,y:m}},{seriesDatum:void 0,point:{x:d,y:m}}),{nodeData:l,fillData:c,strokeData:u}}updateAxisLine(){const{xScale:t,yScale:e,axis:i,xAxisLine:s}=this;s.x1=t.range[0],s.x2=t.range[1],s.y1=s.y2=0,s.stroke=i.stroke,s.strokeWidth=i.strokeWidth;const r=e.convert(0);s.translationY=r}updateSelection(t){this.markerSelection.update(t)}updateNodes(){const{highlightedDatum:t,highlightStyle:e,marker:i}=this,{size:s,fill:r,stroke:n,strokeWidth:o}=e,a=i.formatter;this.markerSelection.each((l,c,u)=>{const{point:d,seriesDatum:h}=c;if(!d)return;const p=c===t,f=p&&r!==void 0?r:i.fill,m=p&&n!==void 0?n:i.stroke,g=p&&o!==void 0?o:i.strokeWidth,y=p&&s!==void 0?s:i.size;let v;if(a){const C=u===0,b=u===this.markerSelectionData.length-1,T=h.y===this.min,A=h.y===this.max;v=a({datum:c,xValue:h.x,yValue:h.y,min:T,max:A,first:C,last:b,fill:f,stroke:m,strokeWidth:g,size:y,highlighted:p})}l.size=v&&v.size!=null?v.size:y,l.fill=v&&v.fill!=null?v.fill:f,l.stroke=v&&v.stroke!=null?v.stroke:m,l.strokeWidth=v&&v.strokeWidth!=null?v.strokeWidth:g,l.translationX=d.x,l.translationY=d.y,l.visible=v&&v.enabled!=null?v.enabled:i.enabled&&l.size>0})}updateStroke(t){const{strokePath:e,yData:i,line:s}=this,r=e.path;if(r.clear(),i.length<2)return;const n=t.length;let o=!0;for(let a=0;a<n;a++){const{point:l,seriesDatum:c}=t[a],u=l.x,d=l.y;c.y==null?o=!0:o?(r.moveTo(u,d),o=!1):r.lineTo(u,d)}e.lineJoin=e.lineCap="round",e.fill=void 0,e.stroke=s.stroke,e.strokeWidth=s.strokeWidth}updateFill(t){const{fillPath:e,yData:i,fill:s}=this,r=e.path,n=t.length;if(r.clear(),!(i.length<2)){for(let o=0;o<n;o++){const{point:a}=t[o],l=a.x,c=a.y;o>0?r.lineTo(l,c):r.moveTo(l,c)}r.closePath(),e.lineJoin="round",e.stroke=void 0,e.fill=s}}updateXCrosshairLine(){var t;const{yScale:e,xCrosshairLine:i,highlightedDatum:s,crosshairs:{xLine:r}}=this;if(!r.enabled||s==null){i.strokeWidth=0;return}i.y1=e.range[0],i.y2=e.range[1],i.x1=i.x2=0,i.stroke=r.stroke,i.strokeWidth=(t=r.strokeWidth)!=null?t:1,i.lineCap=r.lineCap==="round"||r.lineCap==="square"?r.lineCap:void 0;const{lineDash:n}=r;i.lineDash=Array.isArray(n)?n:IS(i.lineCap,r.lineDash),i.translationX=s.point.x}updateYCrosshairLine(){var t;const{xScale:e,yCrosshairLine:i,highlightedDatum:s,crosshairs:{yLine:r}}=this;if(!r.enabled||s==null){i.strokeWidth=0;return}i.x1=e.range[0],i.x2=e.range[1],i.y1=i.y2=0,i.stroke=r.stroke,i.strokeWidth=(t=r.strokeWidth)!=null?t:1,i.lineCap=r.lineCap==="round"||r.lineCap==="square"?r.lineCap:void 0;const{lineDash:n}=r;i.lineDash=Array.isArray(n)?n:IS(i.lineCap,r.lineDash),i.translationY=s.point.y}getTooltipHtml(t){var e,i;const{dataType:s}=this,{seriesDatum:r}=t,n=r.y,o=r.x,a=this.formatNumericDatum(n),l=s==="array"||s==="object"?this.formatDatum(o):void 0,c={content:a,title:l},u=(i=(e=this.processedOptions)==null?void 0:e.tooltip)==null?void 0:i.renderer;return u?Pg(u({context:this.context,datum:r,yValue:n,xValue:o}),c):Pg(c)}};gH.className="AreaSparkline";var{extent:kle}=qs,{BandScale:bk}=yp,Nle=class{constructor(){this.enabled=!0,this.shape="circle",this.size=0,this.fill="rgb(124, 181, 236)",this.stroke="rgb(124, 181, 236)",this.strokeWidth=1,this.formatter=void 0}},Ole=class{constructor(){this.stroke="rgb(124, 181, 236)",this.strokeWidth=1}},Gle=class{constructor(){this.xLine={enabled:!0,stroke:"rgba(0,0,0, 0.54)",strokeWidth:1,lineDash:"solid",lineCap:void 0},this.yLine={enabled:!1,stroke:"rgba(0,0,0, 0.54)",strokeWidth:1,lineDash:"solid",lineCap:void 0}}},mH=class extends R2{constructor(){super(),this.linePath=new Ae.Path,this.xCrosshairLine=new Ae.Line,this.yCrosshairLine=new Ae.Line,this.lineSparklineGroup=new Ae.Group,this.markers=new Ae.Group,this.markerSelection=Ae.Selection.select(this.markers,()=>this.markerFactory()),this.markerSelectionData=[],this.marker=new Nle,this.line=new Ole,this.crosshairs=new Gle,this.rootGroup.append(this.lineSparklineGroup),this.linePath.zIndex=1e3,this.xCrosshairLine.zIndex=2e3,this.yCrosshairLine.zIndex=2e3,this.markers.zIndex=2500,this.lineSparklineGroup.append([this.linePath,this.xCrosshairLine,this.yCrosshairLine,this.markers])}getNodeData(){return this.markerSelectionData}markerFactory(){const{shape:t}=this.marker,e=fH(t);return new e}onMarkerShapeChange(){this.markerSelection=this.markerSelection.clear(),this.scheduleLayout()}update(){const t=this.generateNodeData();t&&(this.markerSelectionData=t,this.updateSelection(t),this.updateNodes(),this.updateLine())}updateYScaleDomain(){const{yData:t,yScale:e}=this,i=kle(t);let s=0,r=1;if(i!==void 0&&(s=this.min=i[0],r=this.max=i[1]),s===r){const n=Math.abs(s*.01);s-=n,r+=n}e.domain=[s,r]}generateNodeData(){const{data:t,yData:e,xData:i,xScale:s,yScale:r}=this;if(!t)return;const n=!(s instanceof bk),o=n?0:s.bandwidth/2,a=[];for(let l=0;l<e.length;l++){const c=e[l],u=i[l];if(c==null)continue;const d=s.convert(n?s.toDomain(u):u)+o,h=c===void 0?NaN:r.convert(c);a.push({seriesDatum:{x:u,y:c},point:{x:d,y:h}})}return a}updateSelection(t){this.markerSelection.update(t)}updateNodes(){const{highlightedDatum:t,highlightStyle:e,marker:i}=this,{size:s,fill:r,stroke:n,strokeWidth:o}=e,a=i.formatter;this.markerSelection.each((l,c,u)=>{const d=c===t,h=d&&r!==void 0?r:i.fill,p=d&&n!==void 0?n:i.stroke,f=d&&o!==void 0?o:i.strokeWidth,m=d&&s!==void 0?s:i.size;let g;const{seriesDatum:y,point:v}=c;if(a){const C=u===0,b=u===this.markerSelectionData.length-1,T=y.y===this.min,A=y.y===this.max;g=a({datum:c,xValue:y.x,yValue:y.y,min:T,max:A,first:C,last:b,fill:h,stroke:p,strokeWidth:f,size:m,highlighted:d})}l.size=g&&g.size!=null?g.size:m,l.fill=g&&g.fill!=null?g.fill:h,l.stroke=g&&g.stroke!=null?g.stroke:p,l.strokeWidth=g&&g.strokeWidth!=null?g.strokeWidth:f,l.translationX=v.x,l.translationY=v.y,l.visible=g&&g.enabled!=null?g.enabled:i.enabled&&l.size>0})}updateLine(){const{linePath:t,yData:e,xData:i,xScale:s,yScale:r,line:n}=this,o=t.path;if(o.clear(),e.length<2)return;const a=!(s instanceof bk),l=e.length,c=a?0:s.bandwidth/2;let u=!0;for(let d=0;d<l;d++){const h=i[d],p=e[d],f=s.convert(a?s.toDomain(h):h)+c,m=p===void 0?NaN:r.convert(p);p==null?u=!0:u?(o.moveTo(f,m),u=!1):o.lineTo(f,m)}t.fill=void 0,t.stroke=n.stroke,t.strokeWidth=n.strokeWidth}updateXCrosshairLine(){var t;const{yScale:e,xCrosshairLine:i,highlightedDatum:s,crosshairs:{xLine:r}}=this;if(!r.enabled||s==null){i.strokeWidth=0;return}i.y1=e.range[0],i.y2=e.range[1],i.x1=i.x2=0,i.stroke=r.stroke,i.strokeWidth=(t=r.strokeWidth)!=null?t:1,i.lineCap=r.lineCap==="round"||r.lineCap==="square"?r.lineCap:void 0;const{lineDash:n}=r;i.lineDash=Array.isArray(n)?n:IS(i.lineCap,r.lineDash),i.translationX=s.point.x}updateYCrosshairLine(){var t;const{xScale:e,yCrosshairLine:i,highlightedDatum:s,crosshairs:{yLine:r}}=this;if(!r.enabled||s==null){i.strokeWidth=0;return}i.x1=e.range[0],i.x2=e.range[1],i.y1=i.y2=0,i.stroke=r.stroke,i.strokeWidth=(t=r.strokeWidth)!=null?t:1,i.lineCap=r.lineCap==="round"||r.lineCap==="square"?r.lineCap:void 0;const{lineDash:n}=r;i.lineDash=Array.isArray(n)?n:IS(i.lineCap,r.lineDash),i.translationY=s.point.y}getTooltipHtml(t){var e,i;const{dataType:s}=this,{seriesDatum:r}=t,n=r.y,o=r.x,a=this.formatNumericDatum(n),l=s==="array"||s==="object"?this.formatDatum(o):void 0,c={content:a,title:l},u=(i=(e=this.processedOptions)==null?void 0:e.tooltip)==null?void 0:i.renderer;return u?Pg(u({context:this.context,datum:r,yValue:n,xValue:o}),c):Pg(c)}};mH.className="LineSparkline";var Ble=class{constructor(){this.enabled=!0,this.fontSize=8,this.fontFamily="Verdana, sans-serif",this.fontStyle=void 0,this.fontWeight=void 0,this.color="rgba(70, 70, 70, 1)"}},{extent:Vle}=qs,Hle=class extends Ble{constructor(){super(...arguments),this.formatter=void 0,this.placement="insideEnd"}},vH=class extends R2{constructor(){super(),this.fill="rgb(124, 181, 236)",this.stroke="silver",this.strokeWidth=0,this.paddingInner=.1,this.paddingOuter=.2,this.valueAxisDomain=void 0,this.formatter=void 0,this.axisLine=new Ae.Line,this.bandWidth=0,this.sparklineGroup=new Ae.Group,this.rectGroup=new Ae.Group,this.labelGroup=new Ae.Group,this.rectSelection=Ae.Selection.select(this.rectGroup,Ae.Rect),this.labelSelection=Ae.Selection.select(this.labelGroup,Ae.Text),this.nodeSelectionData=[],this.label=new Hle,this.rootGroup.append(this.sparklineGroup),this.rectGroup.zIndex=50,this.axisLine.zIndex=500,this.labelGroup.zIndex=1500,this.sparklineGroup.append([this.rectGroup,this.axisLine,this.labelGroup]),this.axisLine.lineCap="round",this.label.enabled=!1}getNodeData(){return this.nodeSelectionData}update(){this.updateSelections(),this.updateNodes()}updateSelections(){const t=this.generateNodeData();t&&(this.nodeSelectionData=t,this.updateRectSelection(t),this.updateLabelSelection(t))}updateNodes(){this.updateRectNodes(),this.updateLabelNodes()}calculateStep(t){var e;const{xScale:i,paddingInner:s,paddingOuter:r,smallestInterval:n}=this;let a=(i.domain[1]-i.domain[0])/((e=n==null?void 0:n.x)!=null?e:1)+1;const c=Math.min(a,50),u=c-1;return t/Math.max(1,2*r+u*s+c)}updateYScaleDomain(){const{yScale:t,yData:e,valueAxisDomain:i}=this,s=Vle(e);let r=0,n=1;s!==void 0&&(r=this.min=s[0],n=this.max=s[1]),r=r<0?r:0,n=n<0?0:n,i&&(i[1]<n&&(i[1]=n),i[0]>r&&(i[0]=r)),t.domain=i||[r,n]}updateRectSelection(t){this.rectSelection.update(t)}updateRectNodes(){const{highlightedDatum:t,formatter:e,fill:i,stroke:s,strokeWidth:r}=this,{fill:n,stroke:o,strokeWidth:a}=this.highlightStyle;this.rectSelection.each((l,c,u)=>{const d=c===t,h=d&&n!==void 0?n:i,p=d&&o!==void 0?o:s,f=d&&a!==void 0?a:r;let m;const{x:g,y,width:v,height:C,seriesDatum:b}=c;if(e){const T=u===0,A=u===this.nodeSelectionData.length-1,I=b.y===this.min,D=b.y===this.max;m=e({datum:c,xValue:b.x,yValue:b.y,width:v,height:C,min:I,max:D,first:T,last:A,fill:h,stroke:p,strokeWidth:f,highlighted:d})}l.fill=m&&m.fill||h,l.stroke=m&&m.stroke||p,l.strokeWidth=m&&m.strokeWidth||f,l.x=l.y=0,l.width=v,l.height=C,l.visible=l.height>0,l.translationX=g,l.translationY=y})}updateLabelSelection(t){this.labelSelection.update(t,e=>{e.tag=1,e.pointerEvents=Ae.PointerEvents.None})}updateLabelNodes(){const{label:{enabled:t,fontStyle:e,fontWeight:i,fontSize:s,fontFamily:r,color:n}}=this;this.labelSelection.each((o,a)=>{const l=a.label;l&&t?(o.fontStyle=e,o.fontWeight=i,o.fontSize=s,o.fontFamily=r,o.textAlign=l.textAlign,o.textBaseline=l.textBaseline,o.text=l.text,o.x=l.x,o.y=l.y,o.fill=n,o.visible=!0):o.visible=!1})}getTooltipHtml(t){var e,i;const{dataType:s}=this,{seriesDatum:r}=t,n=r.y,o=r.x,a=this.formatNumericDatum(n),l=s==="array"||s==="object"?this.formatDatum(o):void 0,c={content:a,title:l},u=(i=(e=this.processedOptions)==null?void 0:e.tooltip)==null?void 0:i.renderer;return u?Pg(u({context:this.context,datum:r,yValue:n,xValue:o}),c):Pg(c)}formatLabelValue(t){return t%1!==0?t.toFixed(1):t.toFixed(0)}},{isNumber:jle}=qs,{BandScale:wk}=yp,yH=class extends vH{updateYScaleRange(){const{seriesRect:t,yScale:e}=this;e.range=[0,t.width]}updateXScaleRange(){const{xScale:t,seriesRect:e,paddingOuter:i,paddingInner:s}=this;if(t instanceof wk)t.range=[0,e.height],t.paddingInner=s,t.paddingOuter=i;else{const r=this.calculateStep(e.height),n=r*i;this.bandWidth=r*(1-s),t.range=[n,e.height-n-this.bandWidth]}}updateAxisLine(){const{yScale:t,axis:e,axisLine:i,seriesRect:s}=this,{strokeWidth:r}=e;i.x1=0,i.x2=0,i.y1=0,i.y2=s.height,i.stroke=e.stroke,i.strokeWidth=r+(r%2===1?1:0);const n=t.convert(0);i.translationX=n}generateNodeData(){const{data:t,yData:e,xData:i,xScale:s,yScale:r,fill:n,stroke:o,strokeWidth:a,label:l}=this;if(!t)return;const{fontStyle:c,fontWeight:u,fontSize:d,fontFamily:h,color:p,formatter:f,placement:m}=l,g=[],y=r.convert(0),v=!(s instanceof wk);for(let C=0,b=e.length;C<b;C++){let T=e[C];const A=i[C],I=T===void 0;I&&(T=0);const D=s.convert(v?s.toDomain(A):A),F=Math.min(T===void 0?NaN:r.convert(T),y),B=Math.max(T===void 0?NaN:r.convert(T),y),U=v?this.bandWidth:s.bandwidth,H=B-F,R={x:y,y:D};let L;f?L=f({value:T}):L=T!==void 0&&jle(T)?this.formatLabelValue(T):"";const _=D+U/2;let w;const S="middle";let x;const E=T!==void 0&&T>=0,M=4;if(m==="center")w=F+H/2,x="center";else if(m==="outsideEnd")w=F+(E?H+M:-M),x=E?"start":"end";else if(m==="insideEnd"){w=F+(E?H-M:M),x=E?"end":"start";const V=Ae.Text.getTextSize(L,h).width||20,Y=y+V,$=y-V;(E&&w<Y||!E&&w>$)&&(w=y+M*(E?1:-1),x=E?"start":"end")}else w=y+M*(E?1:-1),x=E?"start":"end";g.push({x:F,y:D,width:H,height:U,fill:n,stroke:o,strokeWidth:a,seriesDatum:{x:A,y:I?void 0:T},point:R,label:{x:w,y:_,text:L,fontStyle:c,fontWeight:u,fontSize:d,fontFamily:h,textAlign:x,textBaseline:S,fill:p}})}return g}getDistance(t,e){return Math.abs(t.y-e.y)}};yH.className="BarSparkline";var{isNumber:Ule}=qs,{BandScale:Sk}=yp,CH=class extends vH{updateYScaleRange(){const{seriesRect:t,yScale:e}=this;e.range=[t.height,0]}updateXScaleRange(){const{xScale:t,seriesRect:e,paddingOuter:i,paddingInner:s}=this;if(t instanceof Sk)t.range=[0,e.width],t.paddingInner=s,t.paddingOuter=i;else{const r=this.calculateStep(e.width),n=r*i;this.bandWidth=r*(1-s),t.range=[n,e.width-n-this.bandWidth]}}updateAxisLine(){const{yScale:t,axis:e,axisLine:i,seriesRect:s}=this,{strokeWidth:r}=e;i.x1=0,i.x2=s.width,i.y1=0,i.y2=0,i.stroke=e.stroke,i.strokeWidth=r+(r%2===1?1:0);const n=t.convert(0);i.translationY=n}generateNodeData(){const{data:t,yData:e,xData:i,xScale:s,yScale:r,fill:n,stroke:o,strokeWidth:a,label:l}=this;if(!t)return;const{fontStyle:c,fontWeight:u,fontSize:d,fontFamily:h,color:p,formatter:f,placement:m}=l,g=[],y=r.convert(0),v=!(s instanceof Sk);for(let C=0,b=e.length;C<b;C++){let T=e[C];const A=i[C],I=T===void 0;I&&(T=0);const D=Math.min(T===void 0?NaN:r.convert(T),y),F=s.convert(v?s.toDomain(A):A),B=Math.max(T===void 0?NaN:r.convert(T),y),U=v?this.bandWidth:s.bandwidth,H=B-D,R={x:F+U/2,y};let L;f?L=f({value:T}):L=T!==void 0&&Ule(T)?this.formatLabelValue(T):"";const _=F+U/2;let w;const S="center";let x;const E=T!==void 0&&T>=0,M=2;if(m==="center")w=D+H/2,x="middle";else if(m==="outsideEnd")w=D+(E?-M:H+M),x=E?"bottom":"top";else if(m==="insideEnd"){w=D+(E?M:H-M),x=E?"top":"bottom";const V=Ae.Text.getTextSize(L,h).height||10,Y=y-V,$=y+V;(E&&w>Y||!E&&w<$)&&(w=y+M*(E?-1:1),x=E?"bottom":"top")}else w=y+M*(E?-1:1),x=E?"bottom":"top";g.push({x:F,y:D,width:U,height:H,fill:n,stroke:o,strokeWidth:a,seriesDatum:{x:A,y:I?void 0:T},point:R,label:{x:_,y:w,text:L,fontStyle:c,fontWeight:u,fontSize:d,fontFamily:h,textAlign:S,textBaseline:x,fill:p}})}return g}};CH.className="ColumnSparkline";var{isNumber:Wle}=qs,zle=class{static create(t,e){t=qs.deepClone(t);const i=$le(t.type);return e&&(i.tooltip=e),Yle(i,t),Kle(i,t),t.data&&(i.data=t.data),i.processedOptions=t,i}};function $le(t="line"){switch(t){case"column":return new CH;case"bar":return new yH;case"area":return new gH;case"line":default:return new mH}}function Kle(t,e){switch(e.type){case"bar":xk(t,e);break;case"column":xk(t,e);break;case"area":Xle(t,e);break;case"line":default:qle(t,e);break}}function Yle(t,e){Mt(t,"context",e.context,e),Mt(t,"width",e.width,e),Mt(t,"height",e.height,e),Mt(t,"container",e.container,e),Mt(t,"xKey",e.xKey,e),Mt(t,"yKey",e.yKey,e),e.padding&&Zle(t.padding,e.padding),e.axis&&Qle(t.axis,e.axis),e.highlightStyle&&ece(t.highlightStyle,e.highlightStyle)}function qle(t,e){e.marker&&bH(t.marker,e.marker),e.line&&wH(t.line,e.line),e.crosshairs&&SH(t.crosshairs,e.crosshairs)}function Xle(t,e){Mt(t,"fill",e.fill,e),e.marker&&bH(t.marker,e.marker),e.line&&wH(t.line,e.line),e.crosshairs&&SH(t.crosshairs,e.crosshairs)}function xk(t,e){Mt(t,"valueAxisDomain",e.valueAxisDomain,e),Mt(t,"fill",e.fill,e),Mt(t,"stroke",e.stroke,e),Mt(t,"strokeWidth",e.strokeWidth,e),Mt(t,"paddingInner",e.paddingInner,e),Mt(t,"paddingOuter",e.paddingOuter,e),Mt(t,"formatter",e.formatter,e),e.label&&Jle(t.label,e.label)}function Zle(t,e){Mt(t,"top",e.top,e),Mt(t,"right",e.right,e),Mt(t,"bottom",e.bottom,e),Mt(t,"left",e.left,e)}function bH(t,e){Mt(t,"enabled",e.enabled,e),Mt(t,"size",e.size,e),Mt(t,"shape",e.shape,e),Mt(t,"fill",e.fill,e),Mt(t,"stroke",e.stroke,e),Mt(t,"strokeWidth",e.strokeWidth,e),Mt(t,"formatter",e.formatter,e)}function Jle(t,e){Mt(t,"enabled",e.enabled,e),Mt(t,"fontStyle",e.fontStyle,e),Mt(t,"fontWeight",e.fontWeight,e),Mt(t,"fontSize",e.fontSize,e),Mt(t,"fontFamily",e.fontFamily,e),Mt(t,"textAlign",e.textAlign,e),Mt(t,"textBaseline",e.textBaseline,e),Mt(t,"color",e.color,e),Mt(t,"formatter",e.formatter,e),Mt(t,"placement",e.placement,e)}function wH(t,e){Mt(t,"stroke",e.stroke,e),Mt(t,"strokeWidth",e.strokeWidth,e)}function Qle(t,e){Mt(t,"type",e.type,e),Mt(t,"stroke",e.stroke,e),Mt(t,"strokeWidth",e.strokeWidth,e)}function ece(t,e){Mt(t,"fill",e.fill,e),Mt(t,"size",e.size,e),Mt(t,"stroke",e.stroke,e),Mt(t,"strokeWidth",e.strokeWidth,e)}function SH(t,e){t.xLine&&e.xLine&&Ek(t.xLine,e.xLine),t.yLine&&e.yLine&&Ek(t.yLine,e.yLine)}function Ek(t,e){Mt(t,"enabled",e.enabled,e),Mt(t,"stroke",e.stroke,e),Mt(t,"strokeWidth",e.strokeWidth,e),Mt(t,"lineDash",e.lineDash,e),Mt(t,"lineCap",e.lineCap,e)}var Tk={};function tce(t,e){Tk[e]||(t(),Tk[e]=!0)}var _k=(t,e,i)=>{if(Wle(e))return!0;const s=`AG Charts: ${t} must be a number, the value you provided is not a valid number. Using the default of ${i}px.`;return tce(()=>console.warn(s),`${t} not a number`),!1},ice={xOffset:_k,yOffset:_k};function Mt(t,e,i,s){if(e in s)if(e in t){const r=ice[e];(r?r(e,i,t[e]):!0)&&t[e]!==i&&(t[e]=i)}else console.warn(`Property ${e} does not exist on the target object.`)}var T0=class xH extends Te{constructor(){super(xH.TEMPLATE)}init(e){let i=!0;const s=()=>{const{clientWidth:n,clientHeight:o}=this.getGui();if(!(n===0||o===0))if(i){const a=wle({data:e.value,width:n,height:o,context:{data:e.data}},e.sparklineOptions);this.sparkline=zle.create(a,this.sparklineTooltipSingleton.getSparklineTooltip()),this.eSparkline.appendChild(this.sparkline.canvasElement),i=!1}else this.sparkline.width=n,this.sparkline.height=o},r=this.resizeObserverService.observeResize(this.getGui(),s);this.addDestroyFunc(()=>r())}refresh(e){return this.sparkline?(this.sparkline.data=e.value,!0):!1}destroy(){this.sparkline&&this.sparkline.destroy(),super.destroy()}};T0.TEMPLATE=`<div class="ag-sparkline-wrapper">
            <span ref="eSparkline"></span>
        </div>`;Am([pe("eSparkline")],T0.prototype,"eSparkline",2);Am([W("resizeObserverService")],T0.prototype,"resizeObserverService",2);Am([W("sparklineTooltipSingleton")],T0.prototype,"sparklineTooltipSingleton",2);var sce=T0,cC=class extends ye{postConstruct(){this.tooltip=new sf}getSparklineTooltip(){return this.tooltip}destroyTooltip(){this.tooltip&&this.tooltip.destroy()}};Am([de],cC.prototype,"postConstruct",1);Am([Hi],cC.prototype,"destroyTooltip",1);cC=Am([Me("sparklineTooltipSingleton")],cC);var rce="31.3.4",EH={version:rce,moduleName:Ut.SparklinesModule,beans:[cC],userComponents:[{componentName:"agSparklineCellRenderer",componentClass:sce}],dependantModules:[Qs]},WA=class extends ye{constructor(){super(),this.allComponents=new Map}registerStatusPanel(t,e){this.allComponents.set(t,e)}unregisterStatusPanel(t){this.allComponents.delete(t)}unregisterAllComponents(){this.allComponents.clear()}getStatusPanel(t){return this.allComponents.get(t)}destroy(){this.unregisterAllComponents(),super.destroy()}};WA=ci([Me("statusBarService")],WA);var jc=class TH extends Te{constructor(){super(TH.TEMPLATE),this.compDestroyFunctions={}}postConstruct(){this.processStatusPanels(new Map),this.addManagedPropertyListeners(["statusBar"],this.handleStatusBarChanged.bind(this))}processStatusPanels(e){var i;const s=(i=this.gos.get("statusBar"))==null?void 0:i.statusPanels;if(s){const r=s.filter(a=>a.align==="left");this.createAndRenderComponents(r,this.eStatusBarLeft,e);const n=s.filter(a=>a.align==="center");this.createAndRenderComponents(n,this.eStatusBarCenter,e);const o=s.filter(a=>!a.align||a.align==="right");this.createAndRenderComponents(o,this.eStatusBarRight,e)}else this.setDisplayed(!1)}handleStatusBarChanged(){var e;const i=(e=this.gos.get("statusBar"))==null?void 0:e.statusPanels,s=Array.isArray(i)&&i.length>0;this.setDisplayed(s);const r=new Map;s&&i.forEach(n=>{var o,a;const l=(o=n.key)!=null?o:n.statusPanel,c=this.statusBarService.getStatusPanel(l);if(c!=null&&c.refresh){const u=this.gos.addGridCommonParams((a=n.statusPanelParams)!=null?a:{});c.refresh(u)&&(r.set(l,c),delete this.compDestroyFunctions[l],Q.removeFromParent(c.getGui()))}}),this.resetStatusBar(),s&&this.processStatusPanels(r)}resetStatusBar(){this.eStatusBarLeft.innerHTML="",this.eStatusBarCenter.innerHTML="",this.eStatusBarRight.innerHTML="",this.destroyComponents(),this.statusBarService.unregisterAllComponents()}destroyComponents(){Object.values(this.compDestroyFunctions).forEach(e=>e()),this.compDestroyFunctions={}}createAndRenderComponents(e,i,s){const r=[];e.forEach(n=>{const o=n.key||n.statusPanel,a=s.get(o);let l;if(a)l=Ft.resolve(a);else{const c={};if(l=this.userComponentFactory.getStatusPanelCompDetails(n,c).newAgStackInstance(),!l)return}r.push({key:o,promise:l})}),Ft.all(r.map(n=>n.promise)).then(()=>{r.forEach(n=>{n.promise.then(o=>{const a=()=>{this.getContext().destroyBean(o)};this.isAlive()?(this.statusBarService.registerStatusPanel(n.key,o),i.appendChild(o.getGui()),this.compDestroyFunctions[n.key]=a):a()})})})}};jc.TEMPLATE=`<div class="ag-status-bar">
            <div ref="eStatusBarLeft" class="ag-status-bar-left" role="status"></div>
            <div ref="eStatusBarCenter" class="ag-status-bar-center" role="status"></div>
            <div ref="eStatusBarRight" class="ag-status-bar-right" role="status"></div>
        </div>`;ci([W("userComponentFactory")],jc.prototype,"userComponentFactory",2);ci([W("statusBarService")],jc.prototype,"statusBarService",2);ci([pe("eStatusBarLeft")],jc.prototype,"eStatusBarLeft",2);ci([pe("eStatusBarCenter")],jc.prototype,"eStatusBarCenter",2);ci([pe("eStatusBarRight")],jc.prototype,"eStatusBarRight",2);ci([de],jc.prototype,"postConstruct",1);ci([Hi],jc.prototype,"destroyComponents",1);var nce=jc,t1=class _H extends Te{constructor(){super(_H.TEMPLATE)}setLabel(e,i){this.setDisplayed(!1);const s=this.localeService.getLocaleTextFunc();this.eLabel.innerHTML=s(e,i)}setValue(e){this.eValue.innerHTML=e}};t1.TEMPLATE=`<div class="ag-status-name-value">
            <span ref="eLabel"></span>:&nbsp;
            <span ref="eValue" class="ag-status-name-value-value"></span>
        </div>`;ci([pe("eLabel")],t1.prototype,"eLabel",2);ci([pe("eValue")],t1.prototype,"eValue",2);var _0=t1,M2=class extends _0{postConstruct(){if(this.rowModel.getType()!=="clientSide"){Q.warnOnce("agTotalAndFilteredRowCountComponent should only be used with the client side row model.");return}this.setLabel("totalAndFilteredRows","Rows"),this.addCssClass("ag-status-panel"),this.addCssClass("ag-status-panel-total-and-filtered-row-count"),this.setDisplayed(!0),this.addManagedListener(this.eventService,K.EVENT_MODEL_UPDATED,this.onDataChanged.bind(this)),this.onDataChanged()}onDataChanged(){const t=this.localeService.getLocaleTextFunc(),e=t("thousandSeparator",","),i=t("decimalSeparator","."),s=Q.formatNumberCommas(this.getFilteredRowCountValue(),e,i),r=Q.formatNumberCommas(this.getTotalRowCount(),e,i);if(s===r)this.setValue(s);else{const n=this.localeService.getLocaleTextFunc();this.setValue(`${s} ${n("of","of")} ${r}`)}}getFilteredRowCountValue(){let t=0;return this.rowModel.forEachNodeAfterFilter(e=>{e.group||t++}),t}getTotalRowCount(){let t=0;return this.rowModel.forEachNode(e=>{e.group||t++}),t}init(){}refresh(){return!0}destroy(){super.destroy()}};ci([W("rowModel")],M2.prototype,"rowModel",2);ci([de],M2.prototype,"postConstruct",1);var D2=class extends _0{postConstruct(){if(this.setLabel("filteredRows","Filtered"),this.rowModel.getType()!=="clientSide"){Q.warnOnce("agFilteredRowCountComponent should only be used with the client side row model.");return}this.addCssClass("ag-status-panel"),this.addCssClass("ag-status-panel-filtered-row-count"),this.setDisplayed(!0);const t=this.onDataChanged.bind(this);this.addManagedListener(this.eventService,K.EVENT_MODEL_UPDATED,t),t()}onDataChanged(){const t=this.getTotalRowCountValue(),e=this.getFilteredRowCountValue(),i=this.localeService.getLocaleTextFunc(),s=i("thousandSeparator",","),r=i("decimalSeparator",".");this.setValue(Q.formatNumberCommas(e,s,r)),this.setDisplayed(t!==e)}getTotalRowCountValue(){let t=0;return this.rowModel.forEachNode(e=>t+=1),t}getFilteredRowCountValue(){let t=0;return this.rowModel.forEachNodeAfterFilter(e=>{e.group||(t+=1)}),t}init(){}refresh(){return!0}destroy(){super.destroy()}};ci([W("rowModel")],D2.prototype,"rowModel",2);ci([de],D2.prototype,"postConstruct",1);var P2=class extends _0{postConstruct(){if(this.setLabel("totalRows","Total Rows"),this.rowModel.getType()!=="clientSide"){Q.warnOnce("agTotalRowCountComponent should only be used with the client side row model.");return}this.addCssClass("ag-status-panel"),this.addCssClass("ag-status-panel-total-row-count"),this.setDisplayed(!0),this.addManagedListener(this.eventService,K.EVENT_MODEL_UPDATED,this.onDataChanged.bind(this)),this.onDataChanged()}onDataChanged(){const t=this.localeService.getLocaleTextFunc(),e=t("thousandSeparator",","),i=t("decimalSeparator",".");this.setValue(Q.formatNumberCommas(this.getRowCountValue(),e,i))}getRowCountValue(){let t=0;return this.rowModel.forEachLeafNode(e=>t+=1),t}init(){}refresh(){return!0}destroy(){super.destroy()}};ci([W("rowModel")],P2.prototype,"rowModel",2);ci([de],P2.prototype,"postConstruct",1);var i1=class extends _0{postConstruct(){if(!this.isValidRowModel()){console.warn("AG Grid: agSelectedRowCountComponent should only be used with the client and server side row model.");return}this.setLabel("selectedRows","Selected"),this.addCssClass("ag-status-panel"),this.addCssClass("ag-status-panel-selected-row-count"),this.onRowSelectionChanged();const t=this.onRowSelectionChanged.bind(this);this.addManagedListener(this.eventService,K.EVENT_MODEL_UPDATED,t),this.addManagedListener(this.eventService,K.EVENT_SELECTION_CHANGED,t)}isValidRowModel(){const t=this.rowModel.getType();return t==="clientSide"||t==="serverSide"}onRowSelectionChanged(){const t=this.selectionService.getSelectionCount();if(t<0){this.setValue("?"),this.setDisplayed(!0);return}const e=this.localeService.getLocaleTextFunc(),i=e("thousandSeparator",","),s=e("decimalSeparator",".");this.setValue(Q.formatNumberCommas(t,i,s)),this.setDisplayed(t>0)}init(){}refresh(){return!0}destroy(){super.destroy()}};ci([W("rowModel")],i1.prototype,"rowModel",2);ci([W("selectionService")],i1.prototype,"selectionService",2);ci([de],i1.prototype,"postConstruct",1);var Wn=class AH extends Te{constructor(){super(AH.TEMPLATE)}destroy(){super.destroy()}postConstruct(){if(!this.isValidRowModel()){console.warn("AG Grid: agAggregationComponent should only be used with the client and server side row model.");return}this.avgAggregationComp.setLabel("avg","Average"),this.countAggregationComp.setLabel("count","Count"),this.minAggregationComp.setLabel("min","Min"),this.maxAggregationComp.setLabel("max","Max"),this.sumAggregationComp.setLabel("sum","Sum"),this.addManagedListener(this.eventService,K.EVENT_RANGE_SELECTION_CHANGED,this.onRangeSelectionChanged.bind(this)),this.addManagedListener(this.eventService,K.EVENT_MODEL_UPDATED,this.onRangeSelectionChanged.bind(this))}isValidRowModel(){const e=this.rowModel.getType();return e==="clientSide"||e==="serverSide"}init(e){this.params=e}refresh(e){return this.params=e,this.onRangeSelectionChanged(),!0}setAggregationComponentValue(e,i,s){var r;const n=this.getAllowedAggregationValueComponent(e);if(Q.exists(n)&&n){const o=this.localeService.getLocaleTextFunc(),a=o("thousandSeparator",","),l=o("decimalSeparator",".");n.setValue(Q.formatNumberTwoDecimalPlacesAndCommas(i,a,l)),n.setDisplayed(s)}else(r=this.getAggregationValueComponent(e))==null||r.setDisplayed(!1)}getAllowedAggregationValueComponent(e){const{aggFuncs:i}=this.params;return!i||i.includes(e)?this.getAggregationValueComponent(e):null}getAggregationValueComponent(e){const i=`${e}AggregationComp`;return this[i]}onRangeSelectionChanged(){var e;const i=(e=this.rangeService)==null?void 0:e.getCellRanges();let s=0,r=0,n=0,o=null,a=null;const l={};if(i&&!Q.missingOrEmpty(i)&&this.rangeService)for(let d=0;d<i.length;d++){const h=i[d];let p=this.rangeService.getRangeStartRow(h);const f=this.rangeService.getRangeEndRow(h);for(;!(Q.missing(p)||!p||this.rowPositionUtils.before(f,p)||!p||!h.columns);)h.columns.forEach(g=>{if(p===null)return;const y=this.cellPositionUtils.createId({rowPinned:p.rowPinned,column:g,rowIndex:p.rowIndex});if(l[y])return;l[y]=!0;const v=this.rowPositionUtils.getRowNode(p);if(Q.missing(v))return;let C=this.valueService.getValue(g,v);Q.missing(C)||C===""||(r++,!(typeof C=="object"&&"value"in C&&(C=C.value,C===""))&&(typeof C=="string"&&(C=Number(C)),typeof C=="number"&&!isNaN(C)&&(s+=C,(a===null||C>a)&&(a=C),(o===null||C<o)&&(o=C),n++)))}),p=this.cellNavigationService.getRowBelow(p)}const c=r>1,u=n>1;this.setAggregationComponentValue("count",r,c),this.setAggregationComponentValue("sum",s,u),this.setAggregationComponentValue("min",o,u),this.setAggregationComponentValue("max",a,u),this.setAggregationComponentValue("avg",s/n,u)}};Wn.TEMPLATE=`<div class="ag-status-panel ag-status-panel-aggregations">
            <ag-name-value ref="avgAggregationComp"></ag-name-value>
            <ag-name-value ref="countAggregationComp"></ag-name-value>
            <ag-name-value ref="minAggregationComp"></ag-name-value>
            <ag-name-value ref="maxAggregationComp"></ag-name-value>
            <ag-name-value ref="sumAggregationComp"></ag-name-value>
        </div>`;ci([Vt("rangeService")],Wn.prototype,"rangeService",2);ci([W("valueService")],Wn.prototype,"valueService",2);ci([W("cellNavigationService")],Wn.prototype,"cellNavigationService",2);ci([W("rowModel")],Wn.prototype,"rowModel",2);ci([W("cellPositionUtils")],Wn.prototype,"cellPositionUtils",2);ci([W("rowPositionUtils")],Wn.prototype,"rowPositionUtils",2);ci([pe("sumAggregationComp")],Wn.prototype,"sumAggregationComp",2);ci([pe("countAggregationComp")],Wn.prototype,"countAggregationComp",2);ci([pe("minAggregationComp")],Wn.prototype,"minAggregationComp",2);ci([pe("maxAggregationComp")],Wn.prototype,"maxAggregationComp",2);ci([pe("avgAggregationComp")],Wn.prototype,"avgAggregationComp",2);ci([de],Wn.prototype,"postConstruct",1);var oce=Wn,ace="31.3.4",RH={version:ace,moduleName:Ut.StatusBarModule,beans:[WA],agStackComponents:[{componentName:"AgStatusBar",componentClass:nce},{componentName:"AgNameValue",componentClass:_0}],userComponents:[{componentName:"agAggregationComponent",componentClass:oce},{componentName:"agSelectedRowCountComponent",componentClass:i1},{componentName:"agTotalRowCountComponent",componentClass:P2},{componentName:"agFilteredRowCountComponent",componentClass:D2},{componentName:"agTotalAndFilteredRowCountComponent",componentClass:M2}],dependantModules:[Qs]},lce=Object.defineProperty,cce=Object.getOwnPropertyDescriptor,Rm=(t,e,i,s)=>{for(var r=s>1?void 0:s?cce(e,i):e,n=t.length-1,o;n>=0;n--)(o=t[n])&&(r=(s?o(e,i,r):o(r))||r);return s&&r&&lce(e,i,r),r},uce="31.3.4",Yu=class extends ye{constructor(){super(...arguments),this.firstRow=-1,this.lastRow=-1,this.rowCount=-1,this.rowNodesByIndex={}}ensureRowHeightsValid(t,e,i,s){return!1}init(){this.rowHeight=this.gos.getRowHeightAsNumber(),this.addManagedListener(this.eventService,K.EVENT_VIEWPORT_CHANGED,this.onViewportChanged.bind(this)),this.addManagedPropertyListener("viewportDatasource",()=>this.updateDatasource()),this.addManagedPropertyListener("rowHeight",()=>{this.rowHeight=this.gos.getRowHeightAsNumber(),this.updateRowHeights()})}start(){this.updateDatasource()}isLastRowIndexKnown(){return!0}destroyDatasource(){this.viewportDatasource&&(this.viewportDatasource.destroy&&this.viewportDatasource.destroy(),this.rowRenderer.datasourceChanged(),this.firstRow=-1,this.lastRow=-1)}updateDatasource(){const t=this.gos.get("viewportDatasource");t&&this.setViewportDatasource(t)}getViewportRowModelPageSize(){return this.gos.get("viewportRowModelPageSize")}getViewportRowModelBufferSize(){return this.gos.get("viewportRowModelBufferSize")}calculateFirstRow(t){const e=this.getViewportRowModelBufferSize(),i=this.getViewportRowModelPageSize(),s=t-e;return s<0?0:Math.floor(s/i)*i}calculateLastRow(t){if(t===-1)return t;const e=this.getViewportRowModelBufferSize(),i=this.getViewportRowModelPageSize(),s=t+e,r=Math.ceil(s/i)*i,n=this.rowCount-1;return Math.min(r,n)}onViewportChanged(t){const e=this.calculateFirstRow(t.firstRow),i=this.calculateLastRow(t.lastRow);(this.firstRow!==e||this.lastRow!==i)&&(this.firstRow=e,this.lastRow=i,this.purgeRowsNotInViewport(),this.viewportDatasource&&this.viewportDatasource.setViewportRange(this.firstRow,this.lastRow))}purgeRowsNotInViewport(){Object.keys(this.rowNodesByIndex).forEach(t=>{const e=parseInt(t,10);if(e<this.firstRow||e>this.lastRow){if(this.isRowFocused(e))return;delete this.rowNodesByIndex[e]}})}isRowFocused(t){const e=this.focusService.getFocusCellToUseAfterRefresh();return!e||e.rowPinned!=null?!1:e.rowIndex===t}setViewportDatasource(t){this.destroyDatasource(),this.viewportDatasource=t,this.rowCount=-1,t.init?t.init({setRowCount:this.setRowCount.bind(this),setRowData:this.setRowData.bind(this),getRow:this.getRow.bind(this)}):console.warn("AG Grid: viewport is missing init method.")}getType(){return"viewport"}getRow(t){return this.rowNodesByIndex[t]||(this.rowNodesByIndex[t]=this.createBlankRowNode(t)),this.rowNodesByIndex[t]}getRowNode(t){let e;return this.forEachNode(i=>{i.id===t&&(e=i)}),e}getRowCount(){return this.rowCount===-1?0:this.rowCount}getRowIndexAtPixel(t){return this.rowHeight!==0?Math.floor(t/this.rowHeight):0}getRowBounds(t){return{rowHeight:this.rowHeight,rowTop:this.rowHeight*t}}updateRowHeights(){this.forEachNode(e=>{e.setRowHeight(this.rowHeight),e.setRowTop(this.rowHeight*e.rowIndex)});const t={type:K.EVENT_MODEL_UPDATED,newData:!1,newPage:!1,keepRenderedRows:!0,animate:!1};this.eventService.dispatchEvent(t)}getTopLevelRowCount(){return this.getRowCount()}getTopLevelRowDisplayedIndex(t){return t}isEmpty(){return this.rowCount>0}isRowsToRender(){return this.rowCount>0}getNodesInRangeForSelection(t,e){const i=Q.missing(t)?0:t.rowIndex,s=e.rowIndex,r=i<this.firstRow||i>this.lastRow,n=s<this.firstRow||s>this.lastRow;if(r||n)return[];const o=[],a=i<=s?i:s,l=i<=s?s:i;for(let c=a;c<=l;c++)o.push(this.rowNodesByIndex[c]);return o}forEachNode(t){let e=0;Object.keys(this.rowNodesByIndex).forEach(i=>{const s=parseInt(i,10),r=this.rowNodesByIndex[s];t(r,e),e++})}setRowData(t){Q.iterateObject(t,(e,i)=>{const s=parseInt(e,10);if(s>=this.firstRow&&s<=this.lastRow){let r=this.rowNodesByIndex[s];Q.missing(r)&&(r=this.createBlankRowNode(s),this.rowNodesByIndex[s]=r),r.setDataAndId(i,s.toString())}})}createBlankRowNode(t){const e=new Tt(this.beans);return e.setRowHeight(this.rowHeight),e.setRowTop(this.rowHeight*t),e.setRowIndex(t),e}setRowCount(t,e=!1){if(t===this.rowCount)return;this.rowCount=t,this.eventService.dispatchEventOnce({type:K.EVENT_ROW_COUNT_READY});const i={type:K.EVENT_MODEL_UPDATED,newData:!1,newPage:!1,keepRenderedRows:e,animate:!1};this.eventService.dispatchEvent(i)}isRowPresent(t){return!!this.getRowNode(t.id)}};Rm([W("rowRenderer")],Yu.prototype,"rowRenderer",2);Rm([W("focusService")],Yu.prototype,"focusService",2);Rm([W("beans")],Yu.prototype,"beans",2);Rm([de],Yu.prototype,"init",1);Rm([Hi],Yu.prototype,"destroyDatasource",1);Yu=Rm([Me("rowModel")],Yu);var MH={version:uce,moduleName:Ut.ViewportRowModelModule,rowModel:"viewport",beans:[Yu],dependantModules:[Qs]};XB(ZB,JP);vt.__registerModules([f5,m5,Fx,oV,y2,l9,T9,O9,U9,$9,Y9,Z9,e2,J9,b2,sH,uH,YE,EH,RH,MH],!1,void 0);const dce=document.getElementById("root")||(()=>{const t=document.createElement("div");return t.id="root",document.body.appendChild(t),t})();ST.createRoot(dce).render(k.jsx(qA.StrictMode,{children:k.jsx(x$,{})}));
